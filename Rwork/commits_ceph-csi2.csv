"name_with_owner","sha","author","date","verified","message","num_issues","commit_month","has_ci","is_core","first_commit","days_since_first"
"ceph/ceph-csi","724eed5f94ab0d387cdeee3d92dcb0966b3953ff","MiaoZhou","2019-04-24 10:31:50","true","Merge pull request #1 from ceph/csi-v1.0

update",56,15,0,0,"2018-01-08 15:47:21","471.03"
"ceph/ceph-csi","00e7e29996726c0b712f36905528c273841bf5b2","MiaoZhou","2019-05-06 07:52:45","false","bump up the chart version",63,16,0,0,"2018-01-08 15:47:21","483.92"
"ceph/ceph-csi","76f1b4249851016ded3933824b58258d21dd7a69","Madhu-1","2021-09-07 06:36:14","false","cephfs: correct comment for validateExpandVolumeRequest

corrected the function comment for
validateExpandVolumeRequest.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",66,44,0,1,"2018-01-08 15:47:21","1335.37"
"ceph/ceph-csi","c0e775a49bf698d6aa96b38b88de09a5b17d5818","plnordquist","2018-12-11 19:03:45","false","Changed version to 0.1",17,11,0,0,"2018-01-08 15:47:21","333.14"
"ceph/ceph-csi","46b19a93f5485ad5bb248fd638cfe8c8da220efa","humblec","2019-06-10 11:19:40","true","Merge pull request #416 from Madhu-1/update-golanglint

Enable all static-checks in golangci-lint",75,17,0,1,"2018-01-08 15:47:21","517.06"
"ceph/ceph-csi","b2c9c589aa8b9efe238a4ce758f117d79411d31b","agarwal-mudit","2020-07-28 14:14:04","false","util: fix tracevol.py to use namespace argument

tracevol.py accepts namespace argument but doesn't use it currently, fixing the same.

Signed-off-by: Mudit Agarwal <muagarwa@redhat.com>",115,31,0,0,"2018-01-08 15:47:21","930.44"
"ceph/ceph-csi","3dde768894efa5cc4a075def0f8371e6477ae6b7","humblec","2019-07-08 05:15:07","true","Merge pull request #456 from Madhu-1/rbd-mount-opt

support mountflags during nodepublish in rbd",80,18,0,1,"2018-01-08 15:47:21","545.81"
"ceph/ceph-csi","85b8415024286552c1203d65ff95c2834343e676","rootfs","2019-01-15 16:15:30","false","Merge branch 'master' into master-to-1.0",17,12,0,0,"2018-01-08 15:47:21","372.27"
"ceph/ceph-csi","40ae60cbe432772c691a2e853088896011c2d20a","Madhu-1","2020-11-30 12:10:05","false","ci: add github action for multiarch build

added a github action for multiarch docker
build.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",83,35,0,1,"2018-01-08 15:47:21","1052.35"
"ceph/ceph-csi","5cb8f80c101dd3ced89d5f0b9c28dc072cb280d5","humblec","2022-08-17 12:55:18","false","build: enable ceph_pre_quincy tag

This commit add ceph_pre_quincy tag to the build. The main
reason being the changes or new APIs exposed in go-ceph version
v0.17.0 is part of this Ceph build tag. Enabling the same for
the reason.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",41,55,1,1,"2018-01-08 15:47:21","1679.88"
"ceph/ceph-csi","43500fd6b8cc53fdb7dca5790df64823d0839665","nixpanic","2020-06-09 09:10:17","false","ci: disable storage addons when starting minikube

Storage providers and the default storage class is not needed for
Ceph-CSI testing. In order to reduce resources and potential conflicts
between storage plugins, disable them.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,29,0,1,"2018-01-08 15:47:21","881.22"
"ceph/ceph-csi","9f0af30735f34b4977e56a29e4035ce3edd8fc0c","Madhu-1","2021-07-28 03:47:05","false","e2e: add retryKubectlArgs helper for kubectl retry

added helper function retryKubectlArgs to perform
action if its a known error.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",118,43,0,1,"2018-01-08 15:47:21","1295.25"
"ceph/ceph-csi","75ae16cfab86f387c22dfc3d3e147e2ffc263500","nixpanic","2020-08-07 08:02:31","false","util: use local DefaultLog() for util/topology instead of klog

Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","940.18"
"ceph/ceph-csi","8e434bb3ee2d173f451c09c1dbc8250b9547eccc","agarwal-mudit","2020-09-21 08:54:50","false","build: update vendor with latest version

Updating the version of golang.org/x/text to version v0.3.3.
It fixes the vulnerability in http://golang.org/x/text/encoding/unicode
which leads UTF-16 decoder entering an infinite loop causing
the program to crash or run out of memory.

Signed-off-by: Mudit Agarwal <muagarwa@redhat.com>",132,32,0,0,"2018-01-08 15:47:21","983.21"
"ceph/ceph-csi","23faa600c1efcc51efcabcebb6d64eef3ad1fb1e","nixpanic","2020-05-07 12:51:44","false","ci: run e2e tests with current Kubernetes 1.17.5 release

Kubernetes 1.17.0 has had several updates, 1.17.5 is the latest patch
release.

See-also: https://github.com/kubernetes/sig-release/blob/master/releases/patch-releases.md#117
Signed-off-by: Niels de Vos <ndevos@redhat.com>",108,28,0,1,"2018-01-08 15:47:21","850.38"
"ceph/ceph-csi","393569482e6ef3577381c3e98df07cd68d996e4a","nixpanic","2020-07-02 08:23:23","false","doc: add comments to cephfs error methods

Signed-off-by: Niels de Vos <ndevos@redhat.com>",110,30,0,1,"2018-01-08 15:47:21","905.19"
"ceph/ceph-csi","8662e01d2c13a3018b389f4710f685a20b0fb4f6","nixpanic","2021-06-24 10:39:40","false","deploy: allow RBD components to get ServiceAccounts

The provisioner and node-plugin have the capability to connect to
Hashicorp Vault with a ServiceAccount from the Namespace where the PVC
is created. This requires permissions to read the contents of the
ServiceAccount from an other Namespace than where Ceph-CSI is deployed.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,41,0,1,"2018-01-08 15:47:21","1261.54"
"ceph/ceph-csi","21946ae3458f9bdc3ee263117b7b44f09fd606db","nixpanic","2020-06-22 12:48:32","false","ci: move HELM_VERSION to build.env

Signed-off-by: Niels de Vos <ndevos@redhat.com>",116,29,0,1,"2018-01-08 15:47:21","894.38"
"ceph/ceph-csi","3e305970df58c6c9a56d957aece0e2e6bebf8df9","nixpanic","2020-10-26 13:18:48","false","cleanup: do not panic when validateCloneDepthFlag() detects an error

When the cephcsi executable receives an error when calling
validateCloneDepthFlag(), it panics due to klog.Fatalln(). The errors
that validateCloneDepthFlag() logs should be understandable enough, so
that users know what to investigate. A Go panic on a user error is not
very userfriendly, and does not provide any additional usefil
information.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,33,0,1,"2018-01-08 15:47:21","1018.4"
"ceph/ceph-csi","c4372b85677b9514307b801ce78600486e6ffe88","nixpanic","2021-07-15 07:42:44","false","doc: describe Hashicorp Vault with a ServiceAccount per Tenant

In addition to the single ServiceAccount KMS support for Hashicorp
Vault, Ceph-CSI can now use a ServiceAccount per Tenant as well. This
adds the user-documentation with references to the example deployment
files.

Closes: #2222
Signed-off-by: Niels de Vos <ndevos@redhat.com>",123,42,0,1,"2018-01-08 15:47:21","1282.41"
"ceph/ceph-csi","f3192bd1b34b7327485a00255e6dcae34f930256","phlogistonjohn","2020-05-21 19:58:08","false","util: add New* funcs for ErrKeyNotFound & ErrPoolNotFound types

These types have private fields but we need to construct them outside of
the util package. Add New* methods for both.

Signed-off-by: John Mulligan <jmulligan@redhat.com>",111,28,0,0,"2018-01-08 15:47:21","863.67"
"ceph/ceph-csi","1f1504479c31d6e2f2f430242b6e40646fc6fdc0","irq0","2022-09-06 12:43:47","false","rbd: Add context to fscrypt errors

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",38,56,1,0,"2018-01-08 15:47:21","1699.87"
"ceph/ceph-csi","61924adf575be8e6398ce82de53c7f068950973f","nixpanic","2020-08-07 07:30:48","false","util: use FatalLog() in util/httpserver.go

Hide the use of klog by using our own FatalLog() function.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","940.16"
"ceph/ceph-csi","92aae4834e78cb2488c084132ce9d944e46f62ba","nixpanic","2020-06-25 11:30:04","false","cleanup: use standard Golang errors package

""github.com/pkg/errors"" does not offer more functionlity than that we
need from the standard ""errors"" package. With Golang v1.13 errors can be
wrapped with `fmt.Errorf(""... %w"", err)`. `errors.Is()` and
`errors.As()` are available as well.

See-also: https://tip.golang.org/doc/go1.13#error_wrapping
Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,29,0,1,"2018-01-08 15:47:21","897.32"
"ceph/ceph-csi","ec691fdb89233f6be2bbb7fa6884708a0e0591ea","nixpanic","2021-03-02 12:23:07","false","rebase: use minikube v1.18

Minikube v1.18 has been released. This conains a fix for our `losetup`
workaround, so that can be removed now.

Updates: #1840
Signed-off-by: Niels de Vos <ndevos@redhat.com>",92,38,0,1,"2018-01-08 15:47:21","1150.61"
"ceph/ceph-csi","200d8089f54a4c4c3e0a918c24e788f2187fe361","nixpanic","2020-08-25 09:26:30","false","doc: add description of most useful GitHub labels

Signed-off-by: Niels de Vos <ndevos@redhat.com>",123,31,0,1,"2018-01-08 15:47:21","957.24"
"ceph/ceph-csi","89e2ff39f13eb5165a9cad750a7058b1b286f81a","nixpanic","2022-04-24 07:35:41","false","ci: do not count `Warning:` matches in kubectl_retry()

Depending on the Kubernetes version, the following warning is reported
regulary:

> Warning: policy/v1beta1 PodSecurityPolicy is deprecated in v1.21+,
> unavailable in v1.25+

The warning is written to stderr, so skipping AlreadyExists or NotFound
is not sufficient to trigger a retry. Ignoring '^Warning:' in the stderr
output should prevent unneeded failures while deploying Rook or other
components.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",38,51,1,1,"2018-01-08 15:47:21","1566.66"
"ceph/ceph-csi","9ac7f5640099b6f4f87606e1f590af97cfa3e71b","nixpanic","2021-02-15 09:24:47","false","util: move existing KMS implementations to the DEKStore interface

Use DEKStore API for Fetching and Storing passphrases.

Drop the fallback for the old KMS interface that is now provided as
DEKStore. The original implementation has been re-used for the DEKStore
interface.

This also moves GetCryptoPassphrase/StoreNewCryptoPassphrase functions
to methods of VolumeEncryption.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",85,37,0,1,"2018-01-08 15:47:21","1132.48"
"ceph/ceph-csi","3585b21e805748434a77cb6732ce9594d8a457ab","agarwal-mudit","2020-07-28 14:35:19","false","util: fix tracevol.py to take config map namespace as an option

Added a new option so that user can specify the namespace for config map.

Signed-off-by: Mudit Agarwal <muagarwa@redhat.com>",115,31,0,0,"2018-01-08 15:47:21","930.45"
"ceph/ceph-csi","7e44e557f0493eb6f79cc4fd36caf34c1e5c4b1f","humblec","2022-08-18 09:53:48","false","build: add mergify rule for backport PRs in release 3.7 branch

This commit add rule for backporting to release 3.7 branch with
label backport-to-release-v3.7

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",41,55,1,1,"2018-01-08 15:47:21","1680.75"
"ceph/ceph-csi","5ad8b16e5915cfacc010ae95d2bbf8e464f45674","rootfs","2018-07-10 16:57:30","true","Merge pull request #45 from mkimuram/issue/44

Fix Cephfs plugin to return false to ValidateVolumeCapabilities if Block volume is specified",4,6,0,0,"2018-01-08 15:47:21","182.05"
"ceph/ceph-csi","53949d2e62614dcb97112872ed3d948c1b83a990","rootfs","2018-02-15 21:06:36","true","Merge pull request #24 from rootfs/image-repo

enable sudo in travis",1,1,0,0,"2018-01-08 15:47:21","37.22"
"ceph/ceph-csi","2f1317ff1dc0d9bed6bf94dafe3c31933c1fc3f0","rootfs","2019-01-15 20:09:27","true","Merge pull request #126 from Madhu-1/dep-vendor

use dep  ensure -vendor-only",17,12,0,0,"2018-01-08 15:47:21","372.43"
"ceph/ceph-csi","4ca19ad2ff6e7d9f18cb50e6e9c38bafc4986f14","humblec","2021-11-22 06:49:34","false","e2e: reformat error message with consistent formatting

 To make the error return consistent across e2e tests we have decided
 to remove with error presence from the logs and this commit
 does that for e2e/ceph_user.go.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",55,46,0,1,"2018-01-08 15:47:21","1409.38"
"ceph/ceph-csi","c2d4200bd87976f5a65b15f58b3609624a48195d","humblec","2020-05-21 15:29:38","false","ci: Enable stale bot on issues

The flag to enable this bot on issues was off. This PR enables it

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",111,28,0,1,"2018-01-08 15:47:21","863.49"
"ceph/ceph-csi","d85304c7c22de19e20efbcb34140f2c5b130bb70","humblec","2021-07-19 14:14:52","false","doc: lift clone feature support to Beta

Since kubernetes 1.16 clone ( create a new volume from exisiing volume)
functionality is at Beta state and kubernetes v1.18, the snapshot functionality
has been lifted to GA. Ceph CSI drivers have been supporting this feature
for last few releases and users are heavily using this feature since then.

We also have good amount of e2e test case which cover volume creation
from PVC backend or iow, PVC as a datasource. With that, this PR
proposes of lifting this feature support to Beta with v3.4.0 version.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",127,42,0,1,"2018-01-08 15:47:21","1286.69"
"ceph/ceph-csi","dbb523c1506087e708289cffdbae5297960e3ef2","humblec","2022-01-12 06:24:32","false","doc: add in-tree volume to csi migration usage doc

This commit adds in-tree to csi volume migration usage documentation
to the examples.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",43,48,1,1,"2018-01-08 15:47:21","1464.61"
"ceph/ceph-csi","52603d595a6ce5b60252044a564fb2b477bfdb4d","phlogistonjohn","2020-05-12 21:05:55","false","journal: split journal types creating a new Connection type

Before, the one CSIJournal type was handling both configuration and
providing methods to make changes to the journal. This created the
temptation to modify the state of the global configuration object to
enact changes through the method calls.

This change creates a new type `journal.Connection` that takes the
monitors and credentials to create a short(er)-lived object to actually
read and make changes on the journal. This also avoid mixing the
arguments needed to connect to the cluster with the arguments needed
for the various journal read & update calls.

Signed-off-by: John Mulligan <jmulligan@redhat.com>",110,28,0,0,"2018-01-08 15:47:21","854.72"
"ceph/ceph-csi","342d28278022d61b400d89789e226124745aa2be","Madhu-1","2021-02-10 06:51:30","false","rebase: add kube-storage/replication to go.mod

add dependent kube-storage/replication package
to the vendor.

update grpc to latest release v1.35.0.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",83,37,0,1,"2018-01-08 15:47:21","1127.38"
"ceph/ceph-csi","84b046d73680e32d6d1b46a2c7cc9625fa5a66f7","Rakshith-R","2021-06-07 07:31:38","false","rbd: add check for imageFeatures parameter

This commit adds checks for missing `imageFeatures` parameter
in createvolumerequest and nodestagerequest(only for static PVs).
Missing `imageFeatures` parameter is ignored in case of non-static
PVs to ensure backwards compatibility with older versions which
did not have `imageFeatures` as required parameter.

Signed-off-by: Rakshith R <rar@redhat.com>",111,41,0,1,"2018-01-08 15:47:21","1245.41"
"ceph/ceph-csi","26c07aef02ff535a1be7e9e8a413600bedfe48d4","Rakshith-R","2021-03-18 10:01:16","false","e2e: small fixes in var name and error msg

rookTolBoxPodLabel to rookToolBoxPodLabel
podPot to podOpt
fix error message for getting PV

Signed-off-by: Rakshith R <rar@redhat.com>",84,38,0,1,"2018-01-08 15:47:21","1165.51"
"ceph/ceph-csi","2099600aa666619be415a3fb5bbf6bb685b7eb30","Madhu-1","2020-04-15 02:26:46","false","Upgrade: Upgrade doc for v2.1.0

This PR updates the upgrade document
from v2.0.x to v2.1.0

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",104,27,0,1,"2018-01-08 15:47:21","826.94"
"ceph/ceph-csi","3fde6366851435772132b8632667839a31e9874e","nixpanic","2021-03-12 15:42:31","false","e2e: add validation for cloning encrypted volumes

Signed-off-by: Niels de Vos <ndevos@redhat.com>",93,38,0,1,"2018-01-08 15:47:21","1159.75"
"ceph/ceph-csi","1845f2b77d3eb3bb6a619ded4ec8dae4ccd34403","nixpanic","2020-11-30 09:12:38","false","e2e: use full-qualified-image-name for vault-init-job

On occasion deploying Vault fails. It seems the vault-init-job batch job
does not use a full-qualified-image-name for the ""vault"" container.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",85,35,0,1,"2018-01-08 15:47:21","1052.23"
"ceph/ceph-csi","6915624380f13591e5f22de32fbb21488d7916ef","nixpanic","2021-02-17 10:57:31","false","util: add EncryptDEK DecryptDEK to EncryptionKMS interface

By adding these methods, a KMS can explicitly encrypt/decrypt the DEK if
there is no transparent way of doing so.

Hashicorp Vault encrypts the DEK when it it stored, and decrypts it when
fetched. Therefor there is no need to do any encryption in this case.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",88,37,0,1,"2018-01-08 15:47:21","1134.55"
"ceph/ceph-csi","96eafecad89b2075edcb274ba6a626e59c0a7825","nixpanic","2020-11-04 14:45:06","false","e2e: do not use Failf() to abort tests in a go-routine

There are several go-routines where Failf() is called, which will cause
a Golang panic inside the Ginko test framework. Instead of aborting the
go-routine, capture the error and check for failures once all
go-routines have finished.

Updates: #1359
Signed-off-by: Niels de Vos <ndevos@redhat.com>",80,34,0,1,"2018-01-08 15:47:21","1027.46"
"ceph/ceph-csi","b5d1edd3f75e67fa98473f746c076c1d3a90fbd4","humblec","2020-09-25 13:35:21","false","cephfs: correct cephFSCloneInprogress source code comment

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",131,32,0,1,"2018-01-08 15:47:21","987.41"
"ceph/ceph-csi","959df4dbac9c23f8b302b768855e2ca21ae60afe","humblec","2022-04-07 11:34:25","false","doc: correct typos in struct field comments and release.md

corrected strings in the release guide and util server.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",44,51,1,1,"2018-01-08 15:47:21","1550.82"
"ceph/ceph-csi","5647d4da245fb6f658cd63229d1faf4285dc1a6f","humblec","2021-11-22 06:05:49","false","e2e: reformat error message with proper error formatting

To make the error return consistent across e2e tests we have decided
to remove `with error` presence from the logs and this commit
does that for cephfs tests.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",55,46,0,1,"2018-01-08 15:47:21","1409.35"
"ceph/ceph-csi","aa698bc3e16c7e578a8485b8b372281059c9c8c1","humblec","2021-08-09 07:19:24","false","rebase: update kubernetes and libraries to v1.22.0 version

Kubernetes v1.22 version has been released and this update
ceph csi dependencies to use the same version.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",121,43,0,1,"2018-01-08 15:47:21","1306.4"
"ceph/ceph-csi","7d3fd4f683392dcbb386d35d3c933dc831517edd","humblec","2022-04-19 16:26:23","false","nfs: change the image registry for sidecars

This commit change the image registry URL for sidecars in the
NFS deployment from `k8s.gcr.io` to `registry.k8s.io` as
the migration is happening from former to the latter.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",41,51,1,1,"2018-01-08 15:47:21","1562.03"
"ceph/ceph-csi","dd31e6e9474c25dd424d20d3fd97fa9ca512e009","humblec","2019-05-07 10:50:03","false","Remove duplicate entries from Makefile and resolve merge conflict.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",68,16,0,1,"2018-01-08 15:47:21","485.04"
"ceph/ceph-csi","5e6aebee58ab886b6c26d12a9a9efe9589d8a23c","humblec","2020-01-16 09:16:08","false","Exclude snapshot changes

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",106,24,0,1,"2018-01-08 15:47:21","738.23"
"ceph/ceph-csi","2851c7d17a85e894032bcff46a4dc64cc65dbf2f","humblec","2021-06-10 11:00:26","false","cleanup: correct createORdeleteRbdResources() function name

This patch address a typo in the mentioned function name

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",108,41,0,1,"2018-01-08 15:47:21","1247.55"
"ceph/ceph-csi","ef1785ce4db0aa1f6878c770893bcabc71cff300","humblec","2020-08-04 16:58:58","false","e2e: remove volume populate test case and also change writeDataInPod()

As we are populating the volume in other two test cases for clone and
snapshot operation, we dont need a specific test case now.
WriteDataInPod() function is also changed to take the pod spec and write
some data to it

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","937.55"
"ceph/ceph-csi","2f0595ab71127bb396b90c43c8e8af17c608e561","humblec","2019-01-16 08:55:36","false","Remove unwanted else block and add comments about some exported functions
and variables.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",17,12,0,1,"2018-01-08 15:47:21","372.96"
"ceph/ceph-csi","a116764f4d3eb6f1dd1cdd9af22feb9fca1f8068","Madhu-1","2020-04-16 06:31:33","false","Snapshot: Template changes for snapshot beta

Updated the deployment templates and the sidecar
images version to support snapshot beta version.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",102,27,0,1,"2018-01-08 15:47:21","828.11"
"ceph/ceph-csi","919f3b6d85c5b115bc73b019f46a6cd5ff73c393","Madhu-1","2020-05-04 09:38:02","false","Doc: update development documentation

Updated golang version to 1.13.x and
also updated user to set GO111MODULE=on
and CGO_ENABLED=1 when doing development
in cephcsi

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",109,28,0,1,"2018-01-08 15:47:21","847.24"
"ceph/ceph-csi","f172e6956b0a077920e3fe37b92f8aca65b7ed47","nixpanic","2021-03-24 17:04:33","false","doc: add configuration example for Amazon KMS

Signed-off-by: Niels de Vos <ndevos@redhat.com>",88,38,0,1,"2018-01-08 15:47:21","1171.8"
"ceph/ceph-csi","c5f00a9e3d6024625a72fb370f42bfffcb9dc093","nixpanic","2021-03-04 09:23:53","false","e2e: add test for the SecretsMetadataKMS provider

The new provider should be able to provision and mount an encrypted
volume.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",91,38,0,1,"2018-01-08 15:47:21","1152.48"
"ceph/ceph-csi","9cd8a15c5d6bea72a4ce2768b98e916c65798bcc","irq0","2022-07-07 16:31:38","false","rbd: Document new encryptionType storage class example

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",40,54,1,0,"2018-01-08 15:47:21","1641.03"
"ceph/ceph-csi","1b2e9f556f314202c2ce3c1d632c54ce23074034","Yuggupta27","2021-03-22 07:01:38","false","e2e: add helper function for clone validation

added a helper function to test clone creation
in a different pool.

Co-authored-by: Madhu Rajanna <madhupr007@gmail.com>
Signed-off-by: Yug <yuggupta27@gmail.com>",87,38,0,0,"2018-01-08 15:47:21","1169.38"
"ceph/ceph-csi","1fa842277aaaa4e9a4a73588b5dcea49ccadffce","irq0","2022-05-27 19:55:58","false","rbd: fscrypt file encryption support

Integrate basic fscrypt functionality into RBD initialization. To
activate file encryption instead of block introduce the new
'encryptionType' storage class key.

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",37,53,1,0,"2018-01-08 15:47:21","1600.17"
"ceph/ceph-csi","0fae0e53b6d7236b9d8da78fb20dad4fd1daac45","humblec","2021-04-15 10:49:37","false","cleanup: various source code comment corrections

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",87,39,0,1,"2018-01-08 15:47:21","1192.54"
"ceph/ceph-csi","866bc7da212cde6799d96685f37adb0af0603111","humblec","2020-01-13 11:17:54","false","Add resize doc for both filesystem and block mode PVCs

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",108,24,0,1,"2018-01-08 15:47:21","735.31"
"ceph/ceph-csi","76d94007258871657233fbeb4381ee87048c64de","nixpanic","2023-11-03 08:49:08","false","cleanup: remove left-overs of ReplicationServer in csi-common

The ReplicationServer is not used anymore, the functionality has moved
to CSI-Addons and the `internal/csi-addons/rbd` package. These last
references were not activated anywhere, so can be removed without any
impact.

See-also: #3314
Signed-off-by: Niels de Vos <ndevos@ibm.com>",20,70,1,1,"2018-01-08 15:47:21","2121.96"
"ceph/ceph-csi","3d7d48a4aa8adef71cf61f4dec7926e9e3def5cd","nixpanic","2021-06-08 06:47:10","false","util: VaultTenantSA KMS implementation

This new KMS uses a Kubernetes ServiceAccount from a Tenant (Namespace)
to connect to Hashicorp Vault. The provisioner and node-plugin will
check for the configured ServiceAccount and use the token that is
located in one of the linked Secrets. Subsequently the Vault connection
is configured to use the Kubernetes token from the Tenant.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",110,41,0,1,"2018-01-08 15:47:21","1246.37"
"ceph/ceph-csi","32839948ef6c0bd51155109f8a0192711e6e30a9","nixpanic","2020-04-17 09:23:49","false","cleanup: move pkg/ to internal/

The internal/ directory in Go has a special meaning, and indicates that
those packages are not meant for external consumption. Ceph-CSI does
provide public APIs for other projects to consume. There is no plan to
keep the API of the internally used packages stable.

Closes: #903
Signed-off-by: Niels de Vos <ndevos@redhat.com>",103,27,0,1,"2018-01-08 15:47:21","829.23"
"ceph/ceph-csi","9317e2afb43a1a1d92ad59687c9828781b4eedf9","nixpanic","2021-03-18 12:50:38","false","util: rewrite GetKMS() to use KMS provider plugin API

GetKMS() is the public API that initilizes the KMS providers on demand.
Each provider identifies itself with a KMS-Type, and adds its own
initialization function to a switch/case construct. This is not well
maintainable.

The new GetKMS() can be used the same way, but uses the new kmsManager
interface to create and configure the KMS provider instances.

All existing KMS providers are converted to use the new kmsManager
plugins API.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",84,38,0,1,"2018-01-08 15:47:21","1165.63"
"ceph/ceph-csi","d4076d6216e6f86e61768dffc41e6a6510c89056","nixpanic","2021-02-22 15:25:35","false","util: introduce VolumeEncryption type

Prepare for grouping encryption related functions together. The main
rbdVolume object should not be cluttered with KMS or DEK procedures.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",90,37,0,1,"2018-01-08 15:47:21","1139.73"
"ceph/ceph-csi","c0ab4c03e6c71005ff5d5bc67008ec2372f7d07b","nixpanic","2021-01-11 08:02:41","false","cephfs: move NodeGetVolumeStats() to CephFS NodeServer

The CephFS NodeServer should handle the CephFS specific requests. This
is not something that the NodeServer for RBD should handle.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",82,36,0,1,"2018-01-08 15:47:21","1098.43"
"ceph/ceph-csi","9077c25c15c8d695de5a5d350143f255a48d1dd7","Madhu-1","2020-07-08 12:59:38","false","e2e: add e2e to test pvc-pvc cloning

Added an e2e testcase to test pvc-pvc
cloning.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",110,30,0,1,"2018-01-08 15:47:21","911.38"
"ceph/ceph-csi","50a84fb9308cfb05f3d029f4d73474daa1d3e3dc","Madhu-1","2020-01-20 11:05:47","false","Update mergify to release-v2.0

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",108,24,0,1,"2018-01-08 15:47:21","742.3"
"ceph/ceph-csi","99bdbf21821d6fe0614bd8b89abd637d94712ff4","gman0","2018-03-13 10:21:34","false","Merge branch 'master' into wip-cephfs",2,2,0,0,"2018-01-08 15:47:21","64.77"
"ceph/ceph-csi","7b4bdd8a2fb36a37b4374ae6b980a60b73556380","gman0","2019-04-02 06:37:39","true","Merge pull request #283 from Madhu-1/CI-for-v0.3

update travis.yml and deploy.sh",46,15,0,0,"2018-01-08 15:47:21","449.87"
"ceph/ceph-csi","60588d89685f1741bf8621e5dd328021d437129b","gman0","2019-02-26 10:06:16","false","cephfs/volume: create/delete-volume idempotency checks",31,14,0,0,"2018-01-08 15:47:21","413.01"
"ceph/ceph-csi","6e3d68f5758197123a94f87dcc8bb26b3c6b12e5","nixpanic","2020-10-27 11:00:39","false","ci: use major Kubernetes versions again for Mergify checks

With the update to minikube v1.14.1 downloading binaries for the recent
Kubernetes patch releases works again. The CI jobs have been updated to
use the major versions, and so should Mergify.

Fixes: #1588
Signed-off-by: Niels de Vos <ndevos@redhat.com>",76,33,0,1,"2018-01-08 15:47:21","1019.3"
"ceph/ceph-csi","2cc96dc539ace42d2d55f323cf4d8c4836adb891","nixpanic","2021-08-30 11:33:09","false","build: vendor code.cloudfoundry.org/gofileutils from GitHub

There is a problem accessing the code.cloudfoundry.org web service iver
TLS. It seems to redirect to GitHub, so use the package from there:

    running: go mod verify
    go: github.com/libopenstorage/secrets@v0.0.0-20210709082113-dde442ea20ec requires
    	github.com/hashicorp/vault@v1.4.2 requires
    	github.com/hashicorp/vault-plugin-auth-cf@v0.5.4 requires
    	github.com/cloudfoundry-community/go-cfclient@v0.0.0-20190201205600-f136f9222381 requires
    	code.cloudfoundry.org/gofileutils@v0.0.0-20170111115228-4d0c80011a0f: unrecognized import path ""code.cloudfoundry.org/gofileutils"": https fetch: Get ""https://code.cloudfoundry.org/gofileutils?go-get=1"": x509: certificate signed by unknown authority

Signed-off-by: Niels de Vos <ndevos@redhat.com>",106,44,0,1,"2018-01-08 15:47:21","1327.57"
"ceph/ceph-csi","7ff048bf1e8ee1be58db2d00a60085f8b4a119e8","humblec","2022-01-24 06:29:14","false","e2e: add podsecuritycontext fsgroup for normal user validation

considering the pod has run as normal user, the fsgroup has also
set to the same.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",37,49,1,1,"2018-01-08 15:47:21","1476.61"
"ceph/ceph-csi","37caeb5b2c2f193c2099b85f9d40d0a22937299b","mcronce","2018-12-04 20:04:14","false","pkg/cephfs/driver.go:  Updated PluginFolder to use new CSI 1.x directory",16,11,0,0,"2018-01-08 15:47:21","327.18"
"ceph/ceph-csi","62ae17e2634430c0c392c881bbe372d0a46a8ccd","Yuggupta27","2021-04-07 12:30:15","false","doc: update dev standup timing

The Dev standup was preponed 2 hours
some time back. Updating the same in upstream.

Signed-off-by: Yug <yuggupta27@gmail.com>",87,39,0,0,"2018-01-08 15:47:21","1185.61"
"ceph/ceph-csi","94b745d5731581a8fc2de9c0d5b2f97f75593a81","Yuggupta27","2020-07-12 13:11:02","false","ci: disable goerr113 linter

goerr113 linter checks the errors handling expressions.
It warns about using wrapped static errors in place
of dynamic at multiple places.

Disabled the linter as of now to avoid regression,
and this need to be handled in a seperate issue.
Tracker Issue: #1227

Signed-off-by: Yug <yuggupta27@gmail.com>",114,30,0,0,"2018-01-08 15:47:21","914.39"
"ceph/ceph-csi","9499e73b93d1ef2343fe84e8df5f3709d160f7e8","Madhu-1","2021-12-20 15:31:17","false","rbd: correct logging in createBackingImage

after creating the rbd image log the image
details corresponding for the request along
with the request name.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",57,47,1,1,"2018-01-08 15:47:21","1437.74"
"ceph/ceph-csi","3c3a624d1a9bed8a4a4cba2bc5fd062cc3c58a18","Madhu-1","2020-03-30 08:25:37","false","Log error message for cephfs

If the loading of cephfs fuse or
the mount.ceph command fails log it.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",116,27,0,1,"2018-01-08 15:47:21","812.19"
"ceph/ceph-csi","841a3713f517ec2afe02618e52262d31fdedd286","Madhu-1","2020-08-11 12:19:36","false","cephfs: replace Errorf with ErrorLog in unprotectSnapshot

replace Errorf with ErrorLog in unprotectSnapshot
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.36"
"ceph/ceph-csi","ad3c334a3a1034fd9ab0dbc625137c1d84a69c95","Rakshith-R","2021-11-09 11:41:17","false","rbd: use go-ceph rbd admin task api instead of cli

This commit adds support to go-ceph rbd task api
`trash remove` and `flatten` instead of using cli
cmds.

Fixes: #2186

Signed-off-by: Rakshith R <rar@redhat.com>",56,46,0,1,"2018-01-08 15:47:21","1396.58"
"ceph/ceph-csi","43fde0a30a114e105399bb8f7c6a56a9deb084ed","Madhu-1","2020-12-04 08:36:05","false","cleanup: add a helper function storeImageID

added a helper function storeImageID to reduce
code duplication.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",80,35,0,1,"2018-01-08 15:47:21","1057.2"
"ceph/ceph-csi","b6b7cf2c3d42f08b5200068dc6f73ff5d822cec4","Madhu-1","2019-05-29 13:32:15","false","skip functional tests for doc change

in some cases, we don't need to do
functional testing, like doc change
of the yml files related to Travis
or mergify.This PR skip functional
testing for this kind of changes

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",76,17,0,1,"2018-01-08 15:47:21","506.16"
"ceph/ceph-csi","f9b009b32fdc660cacc126a41f3ba7f9c3f3d85e","leseb","2019-01-31 17:03:31","false","add mergify as a merge engine

From now on, each PR will be merged automatically if:

* there is no DNM label on the PR AND
* the PR has at least one approuval AND
* the travis CI successfully passed

Closes: https://github.com/ceph/ceph-csi/issues/154
Signed-off-by: Sébastien Han <seb@redhat.com>",21,13,0,0,"2018-01-08 15:47:21","388.3"
"ceph/ceph-csi","8d38107fd6f71cd75f62d2631192b5e1149035cd","irq0","2022-08-19 16:30:16","false","e2e: add basic PVC Ceph FS fscrypt tests

Test storage class, pvc and app bind of an fscrypt encrypted Ceph FS
with secrets metadata, vault, vault tokens and vault tenant KMS.

Tests are based on the RBD block/file encryption tests.

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",41,55,1,0,"2018-01-08 15:47:21","1682.03"
"ceph/ceph-csi","b3910f2b4ad70cab395b7de7ad392c368af08f4d","nixpanic","2021-11-26 19:20:03","false","rbd: enable CSI-Addons Server and Identity Service

Add a new endpoint for the CSI-Addons Service and enable the Identity
Service for the RBD plugin.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",56,46,0,1,"2018-01-08 15:47:21","1413.9"
"ceph/ceph-csi","bb4f1c7c9d6f91316af3030e30de8a0e40f78249","nixpanic","2020-07-22 09:16:08","false","rbd: use util.ExecCommand() instead of execCommand()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",112,30,0,1,"2018-01-08 15:47:21","924.23"
"ceph/ceph-csi","7b332a01841d711c26f500eb3ceb76d3d1f253f2","nixpanic","2021-03-12 13:26:21","false","rbd: add rbdImage.copyEncryptionConfig() to copy encryption metadata

Cloning volumes requires copying the DEK from the source to the newly
cloned volume. Introduce copyEncryptionConfig() as a helper for that.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",95,38,0,1,"2018-01-08 15:47:21","1159.65"
"ceph/ceph-csi","8f133e03b82bc238e54897c4272a9f17bcc5952f","nixpanic","2019-08-30 10:23:10","false","Add 'gosec' to the static-checks

Run static security scanning tool 'gosec' while testing.

URL: https://github.com/securego/gosec
Signed-off-by: Niels de Vos <ndevos@redhat.com>",86,20,0,1,"2018-01-08 15:47:21","597.02"
"ceph/ceph-csi","5cf3b4ab806726af86799d7abc7bc3267ecbaa7e","Rakshith-R","2021-04-15 05:57:32","false","cleanup: update mergify.yml to remove bot_account option

Mergify.io has removed bot_account from its free open source plan.
This commit removes bot_account option from comment, merge and rebase
actions default and documenting the implications going forward.

Signed-off-by: Rakshith R <rar@redhat.com>",87,39,0,1,"2018-01-08 15:47:21","1192.34"
"ceph/ceph-csi","e243c0006b56af7772b5a5e50d67f2f5f7cd618c","Madhu-1","2020-12-04 08:19:27","false","rbd: dont generate OMAP data for static volume

if the user has created a static PV for a RBD
image which is not created by CSI driver, dont
generate the OMAP data.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",80,35,0,1,"2018-01-08 15:47:21","1057.19"
"ceph/ceph-csi","5be2f62d381803108a14a899117ecee4503cab3d","Madhu-1","2020-06-16 10:53:25","false","doc: update readme for ROX PVC

Updated readme for support of ROX PVC

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",117,29,0,1,"2018-01-08 15:47:21","888.3"
"ceph/ceph-csi","9d1c91f3c0a3189fdcc2dcc7df91f25809796129","Madhu-1","2020-07-08 11:48:32","false","ci: Pass on the arguments to E2E

Pass on the arugments which are sent when
calling the scripts to the E2E.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",110,30,0,1,"2018-01-08 15:47:21","911.33"
"ceph/ceph-csi","b4e6504e9b6cf0e9920deb5b230061c22adf5b1b","Madhu-1","2020-03-02 08:31:44","false","Fix mountoption issue in  rbd

use mountoptions when mounting rbd to stagingpath
in stagevolume request, add E2E for mount options

fixes: #846
updates: #757

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",109,26,0,1,"2018-01-08 15:47:21","785.2"
"ceph/ceph-csi","882bebf1d8507d6bcd4b4bfae23a861057353785","hyperbolic2346","2019-05-02 15:11:11","false","Fix spelling error

helm chats -> helm charts",58,16,0,0,"2018-01-08 15:47:21","480.22"
"ceph/ceph-csi","05e4accead94a8d71a4f19ca8c4245ee5a392bc5","rootfs","2018-02-15 20:55:59","true","Merge pull request #22 from rootfs/image-repo

add deploy script",1,1,0,0,"2018-01-08 15:47:21","37.21"
"ceph/ceph-csi","16c4e33b09431fb60dd19bd5eef1b398226172b9","nixpanic","2020-06-30 09:31:47","false","util: log error when closing temp fail fails in GetOMapValue()

gosec-2.3.0 complains about the following:

    [/go/src/github.com/ceph/ceph-csi/internal/util/cephcmds.go:146] - G307 (CWE-): Deferring unsafe method ""*os.File"" on type ""Close"" (Confidence: HIGH, Severity: MEDIUM)
      > defer tmpFile.Close()

By logging the error from Close(), the warning is gone.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,30,0,1,"2018-01-08 15:47:21","902.24"
"ceph/ceph-csi","bb561c5da3a3f7f26d722cb5ac7a36336f12248f","nixpanic","2020-06-30 11:05:19","false","ci: select OS for Travis CI

Travis logs a message while parsing its configuration:

    root: missing os, using the default linux

By adding the ""os: linux"" option, the unneeded message is removed.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,30,0,1,"2018-01-08 15:47:21","902.3"
"ceph/ceph-csi","dfc8f64bdd791a2e8e82490136d147e1027bccf6","nixpanic","2021-09-28 15:20:15","false","ci: require passing of k8s-e2e-external-storage jobs for merge

Signed-off-by: Niels de Vos <ndevos@redhat.com>",60,45,0,1,"2018-01-08 15:47:21","1355.73"
"ceph/ceph-csi","fad0cf7f1c4bcfd297d3097959dec6802d25afc1","nixpanic","2020-06-30 06:43:24","false","cephfs: add Unwrap() to error types

See-also: https://github.com/golang/go/wiki/ErrorValueFAQ#i-have-a-type-that-implements-error-and-holds-a-nested-error-how-should-i-adapt-it-to-the-new-features
Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,30,0,1,"2018-01-08 15:47:21","902.12"
"ceph/ceph-csi","22e23640a42206a7dfaf57a5b599bb8ac3099bdd","mcronce","2018-12-04 20:04:21","false","pkg/rbd/rbd.go:  Updated PluginFolder to use new CSI 1.x directory",16,11,0,0,"2018-01-08 15:47:21","327.18"
"ceph/ceph-csi","36f4c0cabb8979818a246eaaaa1d5fbed2aa4ae9","humblec","2021-06-28 09:56:48","false","e2e: remove passing waitgroups for go routines

We are unwantedly passing around waitgroups which is not required.
This address the same inside e2e/cephfs.go and remove waitgroup arg

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",116,42,0,1,"2018-01-08 15:47:21","1265.51"
"ceph/ceph-csi","74097141039482646e3b62d1186a7c7521e1e5f9","humblec","2021-06-25 12:19:02","false","cephfs: reformat long lines in 'cmd' package to 120 chars

We have many declarations and invocations..etc
with long lines which are very difficult to follow while doing
code reading. This address the issues in 'cmd' package to restrict
the line length to 120 chars.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",118,41,0,1,"2018-01-08 15:47:21","1262.61"
"ceph/ceph-csi","dc4da25a304a5ca12f413ffb1b2bafb0dd1c1681","humblec","2020-10-20 09:52:22","false","e2e: correct typo in encryption string

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",77,33,0,1,"2018-01-08 15:47:21","1012.25"
"ceph/ceph-csi","b9f176106d015c80d416abcf27d830663c154b7d","rootfs","2018-02-15 19:20:43","false","push image into quay.io

Signed-off-by: Huamin Chen <hchen@redhat.com>",1,1,0,0,"2018-01-08 15:47:21","37.15"
"ceph/ceph-csi","e602ddd675af2d0f069536e53206857a2cb8329d","rootfs","2018-02-15 20:55:06","false","add deploy script

Signed-off-by: Huamin Chen <hchen@redhat.com>",1,1,0,0,"2018-01-08 15:47:21","37.21"
"ceph/ceph-csi","b471cac6bd4914201fbfd866f5d02dc184f7278d","Rakshith-R","2021-10-01 04:57:38","false","e2e: add nolint:param to retryKubectlArgs

Currently only kubectlCreate arg is used with retryKubectlArgs(),
But it maybe used later on.

Signed-off-by: Rakshith R <rar@redhat.com>",59,45,0,1,"2018-01-08 15:47:21","1359.3"
"ceph/ceph-csi","9aea701bd95d59ed9149c3bbfc08848f5f4de60a","Rakshith-R","2021-04-05 04:44:26","false","ci: enable nestif linter

The nestif linter reports deeply nested if statements.
This commit enables the nestif linter and sets
min-complexity to 7.

Closes: #1229

Signed-off-by: Rakshith R <rar@redhat.com>",90,39,0,1,"2018-01-08 15:47:21","1183.29"
"ceph/ceph-csi","c6c496ff59e3bc67f36836ba59dc6d6b21d8983f","rootfs","2019-01-22 16:31:55","false","switch to node registrar",19,12,0,0,"2018-01-08 15:47:21","379.28"
"ceph/ceph-csi","0bc4ddde3eb8f17d4c5715c9b2f85d41421ef6ff","nixpanic","2021-02-09 08:46:41","false","e2e: use ""--cni=bridge"" when starting minikube

It seems that recent minikube versions changed something in the
networking, and that prevents

    $ ceph fs subvolumegroup create myfs testGroup

from working. Strangely RBD is not impacted. Possibly something is
confusing the CephMgr pod that handles the CephFS admin commands.

Using the ""bridge"" CNI seems to help, CephFS admin commands work with
this in minikube.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",83,37,0,1,"2018-01-08 15:47:21","1126.46"
"ceph/ceph-csi","7d15992769469e25802ab467fa1a0525caa1f972","Madhu-1","2019-12-18 08:41:20","false","Enable logging in E2E if test fails

source: https://github.com/kubernetes/kubernetes/blob/master/test/e2e/framework/kubectl/kubectl_utils.go
kubectlLogPod function is not exposed in above code so copied it.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",102,23,0,1,"2018-01-08 15:47:21","704.95"
"ceph/ceph-csi","8c5563a9bcef229b6cfe54ae9fbfbbbed70089be","Madhu-1","2022-07-27 05:32:53","false","rbd: remove checkHealthyPrimary check

After Failover of workloads to the secondary
cluster when the primary cluster is down,
RBD Image is not marked healthy, and VR
resources are not promoted to the Primary,
In VolumeReplication, the `CURRENT STATE`
remains Unknown and doesn't change to Primary.

This happens because the primary cluster went down,
and we have force promoted the image on the
secondary cluster. and the image stays in
up+stopping_replay or could be any other states.
Currently assumption was that the image will
always be `up+stopped`. But the image will be in
`up+stopped` only for planned failover and it
could be in any other state if its a forced
failover. For this reason, removing
checkHealthyPrimary from the PromoteVolume RPC call.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",41,55,1,1,"2018-01-08 15:47:21","1659.57"
"ceph/ceph-csi","3c111291493105ba738e10f21ee498616d173d6e","gman0","2018-08-28 08:21:11","false","cephfs: ceph user is created in CreateVolume and deleted in DeleteVolume",7,8,0,0,"2018-01-08 15:47:21","229.69"
"ceph/ceph-csi","a4a2dc93c1e00ab6b2ba41aa21ed0428ee63e92f","humblec","2021-10-01 04:06:06","false","e2e: change createCustomConfigmap to be more general

createCustomConfigmap helps to create a custom cluster entry in
the configmap, however this was coupled with subvolumegroup filling
in the cluster configuration. This commit helps to make it more
general and the subvolumegroup filling is controlled now with a flag

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",59,45,0,1,"2018-01-08 15:47:21","1359.26"
"ceph/ceph-csi","2bb5ca9dbc2bd2041d924f0d9e9a55952b02f1e4","humblec","2022-04-06 08:15:10","false","doc: move release 3.4.0 to unsupported version

As we have 3.6.0 release available now, moving 3.4.0
to unsupported version.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",45,51,1,1,"2018-01-08 15:47:21","1549.69"
"ceph/ceph-csi","2f7b733f7eaf45166fde4a88f0709aa56aba06d5","Yuggupta27","2021-04-07 12:25:27","false","doc: update command usage

Running the command specified `date -d 14:00 UTC`
fails with the following error:
```date: the argument ‘UTC’ lacks a leading '+';
when using an option to specify date(s), any non-option
argument must be a format string beginning with '+'
```
Add quotes to ensure expected output.

Signed-off-by: Yug <yuggupta27@gmail.com>",87,39,0,0,"2018-01-08 15:47:21","1185.61"
"ceph/ceph-csi","83df1eae53a0e0e2b3b8ff0972f32ca110baf862","nixpanic","2022-08-02 07:50:18","false","rebase: k8s.io/mount-utils/IsNotMountPoint() is deprecated

IsNotMountPoint() is deprecated and Mounter.IsMountPoint() is
recommended to be used instead.

Reported-by: golangci/staticcheck
Signed-off-by: Niels de Vos <ndevos@redhat.com>",39,55,1,1,"2018-01-08 15:47:21","1665.67"
"ceph/ceph-csi","cb1899b8c0be1dadd804d8d2235a766e3e6ad01f","nixpanic","2020-12-10 10:27:11","false","deploy: allow rbd nodeplugin to read Secrets from Tenants

In order to fetch the Kubernetes Secret with the Vault Token for a
Tenant, the ClusterRole needs to allow reading Secrets from all
Kubernetes Namespaces (each Tenant has their own Namespace).

Signed-off-by: Niels de Vos <ndevos@redhat.com>",75,35,0,1,"2018-01-08 15:47:21","1062.28"
"ceph/ceph-csi","7d2bba13759dbdea88106a435b67820b2a79dbff","humblec","2020-08-07 06:10:17","false","cephfs: introduce parsetime() to parse createdAt field in snap return

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","940.1"
"ceph/ceph-csi","263c45bb458ed8bf05fa5c4148fa76d83ca3871e","rootfs","2019-01-16 18:52:45","false","enable csi block; use canary external-provisioner image to pick up block volume provisioning

Signed-off-by: Huamin Chen <hchen@redhat.com>",16,12,0,0,"2018-01-08 15:47:21","373.38"
"ceph/ceph-csi","a1d44056fda32f6c6eb31a1024fc5edf2e44ef5f","rootfs","2018-02-06 13:23:51","false","update provisioner/attacher statefulsets

Signed-off-by: Huamin Chen <hchen@redhat.com>",1,1,0,0,"2018-01-08 15:47:21","28.9"
"ceph/ceph-csi","10d539efc855deb437c479ff0ea09781c3b4529c","Rakshith-R","2021-04-08 11:29:12","false","cleanup: correct nolint directive listing format

nolint directive needs to be followed by comma separated
list of linters. This commit changes to gocognit:gocyclo
which was not recognised to linters which show error for
the function.

Signed-off-by: Rakshith R <rar@redhat.com>",85,39,0,1,"2018-01-08 15:47:21","1186.57"
"ceph/ceph-csi","e83a51c1e15853844ab3c39eac3bea0ebf019f06","Madhu-1","2020-08-11 12:21:44","false","cephfs: replace Errorf with ErrorLog in parseTime

replace Errorf with ErrorLog in parseTime
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.36"
"ceph/ceph-csi","6d14eeee70b7fb99e23723fe5164cb414d4caff6","Madhu-1","2021-06-17 12:51:28","false","rbd: use RbdSnapName to check the image details

RbdSnapName holds the actual RBD image name which
got created during the CreateSnapshot operation.
RbdImageName holds the name of the parent from
which the snapshot is created. and the parent
is independent of snapshot and it can be deleted
any time for the same reason using the RbdSnapName
to check the rbd image details.

generate a temporary volume from the snapshot which
replaces the rbdImageName with RbdSnapName and use
it to check the image metadata.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",114,41,0,1,"2018-01-08 15:47:21","1254.63"
"ceph/ceph-csi","61103bbc472aa390ec454b4ea3a853495088ffac","gman0","2018-03-26 13:01:13","false","cephfs/cephconf: workaround for http://tracker.ceph.com/issues/23446",2,3,0,0,"2018-01-08 15:47:21","77.88"
"ceph/ceph-csi","0df9e8e7947c5691ab844446ffc02526c5dc2816","rootfs","2018-06-13 18:43:49","true","Merge pull request #42 from gman0/cephfs-delete-policy

cephfs: forbid deletion of shares not provisioned by the driver",4,5,0,0,"2018-01-08 15:47:21","155.12"
"ceph/ceph-csi","30fb7de118936653f20cc30640fd31802301190a","wilmardo","2019-08-15 08:44:03","false","feat: Implement helm lint

Signed-off-by: wilmardo <info@wilmardenouden.nl>",80,19,0,0,"2018-01-08 15:47:21","581.96"
"ceph/ceph-csi","b864afd6d7013eb44c1281b9fc061a4b5ae26d0d","nixpanic","2020-08-07 08:21:20","false","util: use local ErrorLog() for Create/RemoveObject() instead of klog

Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","940.19"
"ceph/ceph-csi","079459c247db1ecbae63493aff7026c678e22f78","nixpanic","2020-06-22 12:39:35","false","build: move GOSEC_VERSION to build.env

Signed-off-by: Niels de Vos <ndevos@redhat.com>",116,29,0,1,"2018-01-08 15:47:21","894.37"
"ceph/ceph-csi","188e560ee9920bce2ba3cdfd193795a56f62e097","humblec","2022-04-27 11:02:46","false","nfs: use latest liveness probe and node driver registrar

This commit make use of latest sidecars of livenessprobe and
node driver registrar in NFS driver deployment.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",38,52,1,1,"2018-01-08 15:47:21","1569.8"
"ceph/ceph-csi","3c2c7551df9d9e1e3428ddf1e70457644ad3830f","rootfs","2018-05-23 17:19:53","true","Merge pull request #38 from gman0/cephfs-conf-scheme

cephfs config scheme",3,4,0,0,"2018-01-08 15:47:21","135.06"
"ceph/ceph-csi","75beccd8c0d499d2881e586cb18ef194c4ed35e8","Madhu-1","2019-01-17 06:26:03","false","Remove unused variable

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",16,12,0,1,"2018-01-08 15:47:21","373.86"
"ceph/ceph-csi","fe947eccce63944571153b853841c7367b79e7f8","Madhu-1","2021-07-29 10:47:52","false","build: install specific commitlint version

commitlint 13.1.0 is causing issues when
PR is backported from devel branch to release
branch
https://github.com/ceph/ceph-csi/pull/2332#issuecomment-888325775
Lets revert back to commitlint 12.1.4 where we have
not seen any issue with backports to release
branch.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",118,43,0,1,"2018-01-08 15:47:21","1296.54"
"ceph/ceph-csi","cbc82106001b1b710f26ae91b9719b8469ec44c9","iPraveenParihar","2023-11-07 11:25:13","false","ci: create default subvolumegroup

Signed-off-by: Praveen M <m.praveen@ibm.com>",4,70,1,0,"2018-01-08 15:47:21","2126.07"
"ceph/ceph-csi","9bd10d2698e98a6ffa16cae4c51d8478ba004769","nixpanic","2020-10-01 07:10:10","false","cephfs: newVolumeOptions() does not need all secrets, only credentials

There is no need to pass all secrets on to newVolumeOptions(), it only
needs the credentials. As the caller of newVolumeOptions() already has
the credentials generated, just pass them along instead of the raw
secrets.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",119,33,0,1,"2018-01-08 15:47:21","994.14"
"ceph/ceph-csi","7d5879ad81c1f1a9d66bd24c0710911388798beb","Yuggupta27","2022-01-03 16:45:55","false","rbd: add network fencing utils

Convert the CIDR block into a range of IPs,
and then add network fencing via ""ceph osd blocklist""
for each IP in that range.

Signed-off-by: Yug Gupta <yuggupta27@gmail.com>",47,48,1,0,"2018-01-08 15:47:21","1451.79"
"ceph/ceph-csi","b223924044e5f61132d970982d326a205e9263d0","Madhu-1","2020-08-11 11:33:57","false","util: rename WarningLog to WarningLogMsg

renamed WarningLog function to WarningLogMsg
to log with message.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.32"
"ceph/ceph-csi","44d79e3bda377d601970736cbcf28e3c43760f21","chenxu1990","2020-07-01 08:58:16","false","deploy: Missing quotes

Missing quotes in deploy/cephfs/kubernetes/csi-provisioner-rbac.yaml

Signed-off-by: chenxu1990 <xuchen1990xx@gmail.com>",111,30,0,0,"2018-01-08 15:47:21","904.22"
"ceph/ceph-csi","47dfd97ea9f600b5df64d3c53bc9221f3951e14e","humblec","2020-10-13 05:16:15","false","helm: update charts for new sidecar repo path

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",76,33,0,1,"2018-01-08 15:47:21","1005.06"
"ceph/ceph-csi","e6949945bbfd01d608a113a39595cee165959fa1","humblec","2021-10-29 09:08:33","false","cephfs: add validation for generic ephemeral volumes

This commit adds the validation of csi cephfs driver to work with
ephemeral volume support. With ephemeral volume support a user can
specify ephemeral volumes in its pod spec and tie the lifecycle
of the PVC with the POD.

An example POD spec also included in this commit.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",55,46,0,1,"2018-01-08 15:47:21","1386.47"
"ceph/ceph-csi","74965fef41d8e08f18b99b02372d370cccc3b22a","nixpanic","2021-12-22 07:46:53","false","deploy: fix default URL for --csi-addons-endpoint option

The --csi-addons-endpoint= option has been added recently, but was not
configured in the deployment files yet. The socket was incorrectly
created as `/csi-addons.sock`, by correcting the URL to the socket, the
socket now gets created as `/tmp/csi-addons.sock` in the same directory
as other sockets.

If an endpoint is a UNIX Domain Socket, the format needs to be
`unix:///path/to/socket`. The `unix://` URL format allows an
authentication provider to be added directly after the `//`. If there is
no authentication provider needed, the field can remain empty. After the
authetication provider, the full path needs to be specified, starting
with a `/`. This means that URLs to a UDS should start with `unix:///`
in normal cases.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",53,47,1,1,"2018-01-08 15:47:21","1439.42"
"ceph/ceph-csi","cfddc9f8874c16f59c337735bc7c2d339f8e5a63","nixpanic","2020-10-14 09:00:25","false","e2e: use k8sVersionGreaterEquals() for cephfs tests

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,33,0,1,"2018-01-08 15:47:21","1006.22"
"ceph/ceph-csi","54fc65a5610d6e82a0ba7d7f1a62a82e459cade3","nixpanic","2023-09-13 14:02:16","false","util: add health-checker for periodic filesystem checks

Signed-off-by: Niels de Vos <ndevos@ibm.com>",19,68,1,1,"2018-01-08 15:47:21","2071.18"
"ceph/ceph-csi","30092ff4e132a276217f1dabfe9b342f331da409","Yuggupta27","2021-03-22 05:48:22","false","e2e: add an option to set rbd storageclass name

added an option to set storageclass name.

Co-authored-by: Madhu Rajanna <madhupr007@gmail.com>
Signed-off-by: Yug <yuggupta27@gmail.com>",87,38,0,0,"2018-01-08 15:47:21","1169.33"
"ceph/ceph-csi","4dc1d36218fd1855d30c677cd6df3484f88f2b95","nixpanic","2022-03-17 09:21:30","false","cleanup: reduce complexity of main()

Move the printing of the version and other information to its own
function. This reduces the complexity enough so that golang-ci does not
complain about it anymore.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",43,50,1,1,"2018-01-08 15:47:21","1529.73"
"ceph/ceph-csi","45d1404d3e699b2e4862e81dce835493734e0653","nixpanic","2020-04-21 07:52:26","false","rbd: split buildCreateVolumeResponse() from CreateVolume()

The gocyclo linter complains about the high complexity of the
CreateVolume() function:

> pkg/rbd/controllerserver.go:133:1: cyclomatic complexity 21 of func `(*ControllerServer).CreateVolume` is high (> 20) (gocyclo)

By splitting it up and separeting the creation of an exisint CSI Volume
object in buildCreateVolumeResponse(), the gocyclic linter does not
complain any longer.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",100,27,0,1,"2018-01-08 15:47:21","833.17"
"ceph/ceph-csi","bc2ac1ccac0a0aa70185a699e2e14ca439c799fe","nixpanic","2020-06-22 12:06:43","false","build: move GOLANGCI_VERSION to build.env

Signed-off-by: Niels de Vos <ndevos@redhat.com>",116,29,0,1,"2018-01-08 15:47:21","894.35"
"ceph/ceph-csi","8870575a48a84b8a60e6dfd526ad0b96a1e3b0c0","nixpanic","2021-02-12 16:25:44","false","e2e: compare resource.Quantity with Equals() instead of operator

When one Quantity is in GiB, and the other in Dec (bytes), the value
should be the same. However, by using ==, this is not the case. It is
needed to use Equals() for that.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",84,37,0,1,"2018-01-08 15:47:21","1129.78"
"ceph/ceph-csi","7c2cbf473c12a032ed51eae66348b5516794f4e4","humblec","2021-08-17 05:33:11","false","doc: update readme for 3.4.0 release

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",116,43,0,1,"2018-01-08 15:47:21","1314.32"
"ceph/ceph-csi","e69f462336dd825b2c62dc6f6d52bb2fe8fcde67","humblec","2019-11-27 12:15:49","false","Add e2e tests for RBD resizer

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",94,22,0,1,"2018-01-08 15:47:21","684.1"
"ceph/ceph-csi","41e4dbe509dd9c3f45e97be756e1c20e2d9916c8","nixpanic","2021-02-25 08:19:52","false","deploy: use ""devel"" branch instead of ""master""

Signed-off-by: Niels de Vos <ndevos@redhat.com>",90,38,0,1,"2018-01-08 15:47:21","1142.44"
"ceph/ceph-csi","be8c3c4b721705106f5a0b325b2cede2b077be8f","nixpanic","2020-05-14 12:28:55","false","cleanup: return InvalidPoolID on error in GetPoolID()

InvalidPoolID has recently been added, and can be used in other location
too. As GetPoolID is updated with this patch set, return InvalidPoolID
on errors too.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",113,28,0,1,"2018-01-08 15:47:21","856.36"
"ceph/ceph-csi","db40c06e846e0785b0baab4c39a39d17f15a0eee","nixpanic","2020-12-10 15:47:20","false","doc: add usage for Vault Tokens KMS support

In addition to the Vault KMS support (uses Kubernetes ServiceAccount),
there is the new Vault Tokens KMS feature.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",75,35,0,1,"2018-01-08 15:47:21","1062.5"
"ceph/ceph-csi","d9fbdeb5175955cb47d766149ce422832b25ae0e","mcronce","2018-12-05 02:39:00","false","pkg/cephfs:  Use request name to generate deterministic volume names",16,11,0,0,"2018-01-08 15:47:21","327.45"
"ceph/ceph-csi","ebd8a762f05f005a17852a2390a6439cb05d655d","Yuggupta27","2022-01-03 16:15:49","false","rbd: implement FenceClusterNetwork

implement FenceClusterNetwork grpc call which
allows to blocks access to a CIDR block by
creating a network fence.

Signed-off-by: Yug Gupta <yuggupta27@gmail.com>",47,48,1,0,"2018-01-08 15:47:21","1451.77"
"ceph/ceph-csi","79cef18f8f652102e7f730f9c2a5550bbf38069b","mehdy","2020-05-29 07:49:08","false","ci: Use bionic dist for test environments

As bionic uses a newer version of linux we'd also be using
a newer version of krbd.

Signed-off-by: Mehdy Khoshnoody <mehdy.khoshnoody@gmail.com>",108,29,0,0,"2018-01-08 15:47:21","871.17"
"ceph/ceph-csi","3e7fa93256c09f07d28f77521f51d3a050f21ad2","Madhu-1","2020-06-24 06:37:53","false","rbd: Remove protect and unprotect function

As we are using v2 cloning we dont need to
do protect the snapshot before cloning and
unprotect it before deleting.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",115,29,0,1,"2018-01-08 15:47:21","896.12"
"ceph/ceph-csi","28793efc9026c0addec96c8d7944d9065ad3a0fe","Madhu-1","2020-10-22 12:24:10","false","doc: design document for rbd mirroring

This document outlines the internal cephcsi
design to handle mirrored RBD images.

Co-authored-by: ShyamsundarR <srangana@redhat.com>
Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",74,33,0,1,"2018-01-08 15:47:21","1014.36"
"ceph/ceph-csi","6fd3f57f4013e0a46e4dc077bdce1fac38e98528","nixpanic","2021-03-30 20:42:23","false","rbd: set kmsID in reserveSnap()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",90,39,0,1,"2018-01-08 15:47:21","1177.95"
"ceph/ceph-csi","294a0973bd1e088b8106c63f0194432d5a8c951c","nixpanic","2021-01-28 08:45:51","false","rbd: mark images thick-provisioned in metadata

When images get resized/expanded, the additional space needs to be
allocated if the image was initially thick-provisioned. By marking the
image with a ""thick-provisioned"" key in the metadata, future operations
can check the need.

A missing ""thick-provisioned"" key indicates that the image has not been
thick-provisioned.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",80,37,0,1,"2018-01-08 15:47:21","1115.46"
"ceph/ceph-csi","b43d28d35bc362c47e23360799e601a5b4cd4d37","nixpanic","2021-03-18 12:47:16","false","util: add API for KMS Provider plugins

The KMSProvider struct is a simple, extendable type that can be used to
register KMS providers with an internal kmsManager.

Helper functions for creating and configuring KMS providers will also be
located in the new kms.go file. This makes things more modular and
better maintainable.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",84,38,0,1,"2018-01-08 15:47:21","1165.62"
"ceph/ceph-csi","c137af57f353120a5838c090bcf046aeca3b29c3","nixpanic","2022-04-11 08:03:06","false","e2e: add RWOP examples for NFS-provisioning

Signed-off-by: Niels de Vos <ndevos@redhat.com>",45,51,1,1,"2018-01-08 15:47:21","1553.68"
"ceph/ceph-csi","8d0b39e690d03c0a49844b2f9b741c5c8a340241","nixpanic","2021-02-10 16:22:45","false","rbd: log error when scheduling flattening fails

Signed-off-by: Niels de Vos <ndevos@redhat.com>",83,37,0,1,"2018-01-08 15:47:21","1127.77"
"ceph/ceph-csi","16ec97d8f75ae362c1e0f243601d39487d7c092c","troian","2021-07-30 04:27:50","false","util: getCgroupPidsFile produces striped path when extra : present

This commit uses `string.SplitN` instead of `string.Split`.
The path for pids.max has extra `:` symbols in it due to which
getCgroupPidsFile() splits the string into 5 tokens instead of
3 leading to loss of part of the path.
As a result, the below error is reported:
`Failed to get the PID limit, can not reconfigure: open
/sys/fs/cgroup/pids/system.slice/containerd.service/
kubepods-besteffort-pod183b9d14_aed1_4b66_a696_da0c738bc012.slice/pids.max:
no such file or directory`
SplitN takes an argument n and splits the string
accordingly which helps us to get the desired
file path.

Fixes: #2337

Co-authored-by: Yati Padia <ypadia@redhat.com>
Signed-off-by: Yati Padia <ypadia@redhat.com>",121,43,0,0,"2018-01-08 15:47:21","1297.28"
"ceph/ceph-csi","9a61fa0c0a4e70a64dca7be72b6bb96a7d61726e","idryomov","2019-10-03 16:54:02","false","Format ext4 with lazy_journal_init

Skip zeroing of the journal on freshly created images.  As only dynamic
PVs are supported, it is fine to assume that existingFormat == """" image
has never been mapped and written to before.

lazy_itable_init is enabled by default, passing it for consistency with
lazy_journal_init.

Signed-off-by: Ilya Dryomov <idryomov@gmail.com>",86,21,0,0,"2018-01-08 15:47:21","631.3"
"ceph/ceph-csi","e1237f348fdc1ea675eb641e45c520bdc8a04ebd","agarwal-mudit","2020-08-27 11:09:45","false","rbd: replace cli with go-ceph for snapshot namespace

cephcsi uses cli for fetching snap list as well as to check the
snapshot namespace, replaced that with go-ceph calls.

Signed-off-by: Mudit Agarwal <muagarwa@redhat.com>",121,32,0,0,"2018-01-08 15:47:21","959.31"
"ceph/ceph-csi","4f955e474d4288144aa969465f21af299b049866","Yuggupta27","2021-04-01 10:37:34","false","cleanup: correct misspelling

Correct snapshots spelling in rbd.go

Signed-off-by: Yug <yuggupta27@gmail.com>",90,39,0,0,"2018-01-08 15:47:21","1179.53"
"ceph/ceph-csi","230f0d3f229305fcba5701f765bde2598315aa5c","Yuggupta27","2020-12-16 11:23:44","false","helm: Add csi secret template to ceph-csi-rbd

Deploy csi secret when using the helm chart.

Signed-off-by: Yug <yuggupta27@gmail.com>",76,35,0,0,"2018-01-08 15:47:21","1068.32"
"ceph/ceph-csi","0d432be5bf4ca3d175208c4e675ae36a34d13651","humblec","2021-06-25 10:18:59","false","internal: reformat long lines in internal/cephfs package to 120 chars

We have many declarations and invocations..etc
with long lines which are very difficult to follow while doing
code reading. This address the issues in 'internal/cephfs' package to
restrict the line length to 120 chars.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",118,41,0,1,"2018-01-08 15:47:21","1262.52"
"ceph/ceph-csi","b44a81bdbc7abf4f4f565300cc82a1d4f36d7d00","humblec","2019-09-24 09:06:50","false","We were defaulting to ext4 at first and then moved toxfs.
However further testing shows that, ext4 should be
the default or preferred fs for RBD devices.

This patch bring that change

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",85,20,0,1,"2018-01-08 15:47:21","620.97"
"ceph/ceph-csi","c7d990a96bb3d3daee9567ead3de2e3264f72d25","humblec","2019-07-29 08:32:18","true","Merge pull request #460 from Madhu-1/fix-pluginapath

Fix pluginpath for cephfs",77,19,0,1,"2018-01-08 15:47:21","565.95"
"ceph/ceph-csi","5dc60126e49025c4f087181b9800250734f16066","humblec","2021-06-25 08:21:15","false","doc: add documentaion about wrapping long lines to coding guide

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",119,41,0,1,"2018-01-08 15:47:21","1262.44"
"ceph/ceph-csi","2b180d89c5e9519201dce872be8e00de75a9f5e1","humblec","2020-08-11 06:35:36","false","cephfs: change the volumetype to RWX instead of RWO

The intention here is to keep the example YAMLs of CephFS
with recommended Access Mode of CephFS which is RWX instead of RWO.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","943.12"
"ceph/ceph-csi","6351358752901b9c1c2e0f2ba797c256a73fd931","Yuggupta27","2020-09-10 12:04:51","false","cephfs: Add `--retain-snapshots` flag to purge volume operations

Snapshots can be retained even after subvolume deletion in
Ceph 14.2.12. Adding support for the same in ceph-csi.

Signed-off-by: Yug <yuggupta27@gmail.com>",120,32,0,0,"2018-01-08 15:47:21","972.35"
"ceph/ceph-csi","d14c0afe285bdfafa1e3c7870a39c8e8d00a37cf","Yuggupta27","2021-07-26 08:58:19","false","doc: Add documentation for DR

Add documenation for Disaster Recovery
which steps to Failover and Failback in case
of a planned migration or a Disaster.

Signed-off-by: Yug Gupta <yuggupta27@gmail.com>",115,42,0,0,"2018-01-08 15:47:21","1293.47"
"ceph/ceph-csi","a7ff868daea9ccb9d719ea0d3a84083efdc18213","nixpanic","2021-07-20 14:23:14","false","e2e: retry getting the Services for Ceph MON on failures

In case listing the Kubernetes Services fails, the following error is
returned immediately:

    failed to create configmap with error failed to list services: etcdserver: request timed out

Wrapping the listing of the Services in a PollImmediate() routine, adds
a retry in case of common temporary issues.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",125,42,0,1,"2018-01-08 15:47:21","1287.69"
"ceph/ceph-csi","885295fcc95cff470641bb4011d414c06158e1a9","nixpanic","2022-03-18 09:51:37","false","nfs: store the NFS-cluster name in the journal

Signed-off-by: Niels de Vos <ndevos@redhat.com>",43,50,1,1,"2018-01-08 15:47:21","1530.75"
"ceph/ceph-csi","06066cd153a132d69ea16b879a9c1c0f1880948c","nixpanic","2020-09-24 12:06:01","false","ci: do not assume Docker is availble on the minikube host

Instead of using the Docker command to push the image to to minikube VM,
read the image from stdin over ssh and load it with the Docker command
that is available inside the VM.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",129,32,0,1,"2018-01-08 15:47:21","986.35"
"ceph/ceph-csi","f584db41e6d3c99dfc6b8f4bd91dd6bbc10dec9b","nixpanic","2021-08-02 09:35:26","false","util: add vaultDestroyKeys option to destroy Vault kv-v2 secrets

Hashicorp Vault does not completely remove the secrets in a kv-v2
backend when the keys are deleted. The metadata of the keys will be
kept, and it is possible to recover the contents of the keys afterwards.

With the new `vaultDestroyKeys` configuration parameter, this behaviour
can now be selected. By default the parameter will be set to `true`,
indicating that the keys and contents should completely be destroyed.
Setting it to any other value will make it possible to recover the
deleted keys.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",119,43,0,1,"2018-01-08 15:47:21","1300.49"
"ceph/ceph-csi","c1e072de0bbf0a1e860313e28e49e8aa6ddde7ac","nak3","2018-09-21 14:07:14","false","Fix misspelling of ""successfully""",7,8,0,0,"2018-01-08 15:47:21","252.93"
"ceph/ceph-csi","0a53b0d9ba7569492908c712018a31e25dde6ba2","KingJ","2023-11-05 15:24:19","false","helm: Allow templating of RBD striping parameters

Allow templating of stripeUnit, stripeCount and objectSize
storageClass parameters in ceph-csi-rbd chart

Signed-off-by: Kingsley Jarrett <kj@kingj.net>",5,70,1,0,"2018-01-08 15:47:21","2124.23"
"ceph/ceph-csi","b649d4f1f69f82ad232ec342f9ae52f5e88d415e","nak3","2018-07-31 05:41:14","false","Add nonempty option to ceph-fuse to support ReadWriteMany

fuse mount does not allow to mount directory if it contains some
files. Due to this, currently scaled pod with cephfs failed to mount
by ceph-fuse.

This patch adds nonempty option to ceph-fuse command to support
ReadWriteMany with ceph-fuse.",5,7,0,0,"2018-01-08 15:47:21","202.58"
"ceph/ceph-csi","c31f349c6fefd27682a65bb98db4e47c32676131","humblec","2020-08-04 03:53:28","false","cephfs: use delete operation lock in delete volume

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","937"
"ceph/ceph-csi","06e6fed9ecc2f6065d95d3806c4f803130f475d0","rootfs","2018-09-04 13:35:06","true","Merge pull request #71 from gman0/cephfs-ceph-user

csi-cephfs now creates/deletes dedicated ceph user in CreateVolume/DeleteVolume",8,8,0,0,"2018-01-08 15:47:21","236.91"
"ceph/ceph-csi","dffb6e72c2ab48d7b90197e405ae0d3d76a5fbc0","Madhu-1","2022-04-11 08:09:14","false","rbd: check nbd tool features only for rbd driver

calling setRbdNbdToolFeatures inside an init
gets called in main.go for both cephfs and rbd
driver. instead of calling it in init function
calling this in rbd driver.go as this is specific
to rbd.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",45,51,1,1,"2018-01-08 15:47:21","1553.68"
"ceph/ceph-csi","a0600d2cc74f7c1d52b6787b7b930b9498e33974","rootfs","2019-01-09 15:12:04","false","fix cache persistent default

Signed-off-by: Huamin Chen <hchen@redhat.com>",18,12,0,0,"2018-01-08 15:47:21","366.23"
"ceph/ceph-csi","b60dd286c69acd6b41ba56801ec8f0c6d0308b34","nixpanic","2021-03-01 15:35:35","false","util: use the KMS as DEKStore if it supports it

Signed-off-by: Niels de Vos <ndevos@redhat.com>",90,38,0,1,"2018-01-08 15:47:21","1149.74"
"ceph/ceph-csi","a553157b15e33f73b1c71b63be18f0474e757091","nixpanic","2022-01-11 18:41:51","false","ci: don't dismiss review if PR has not merged

Pull requests are not going to be queued if at the same time the pull
request review are dismiss

Original-author: Mehdi ABAAKOUK <sileht@sileht.net>
Signed-off-by: Niels de Vos <ndevos@redhat.com>",43,48,1,1,"2018-01-08 15:47:21","1464.12"
"ceph/ceph-csi","a7a928d7ec377b400f8e954a48b7f4d1c4603902","nixpanic","2020-12-08 13:20:22","false","cleanup: return error from execCommandErr() in bindMount()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,35,0,1,"2018-01-08 15:47:21","1061.4"
"ceph/ceph-csi","27247d1444be6fc700283565d3a2eaab983804cd","nixpanic","2021-01-22 15:58:50","false","e2e: remove losetup workaround for minikube

Signed-off-by: Niels de Vos <ndevos@redhat.com>",80,36,0,1,"2018-01-08 15:47:21","1109.76"
"ceph/ceph-csi","dfcd1c33c32f3852e92e85590e6507df6eb7d071","rootfs","2019-02-26 14:40:32","true","Merge pull request #232 from gman0/cephfs-concurrency-fix

cephfs concurrency fix",31,14,0,0,"2018-01-08 15:47:21","413.2"
"ceph/ceph-csi","82bc993b32e37acbd3bc206359f878374199f713","humblec","2021-03-24 13:13:56","false","util: remove unwanted import string from module dependencies

There is no need for an extra import string when the go mod package
itself declared in the same.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",88,38,0,1,"2018-01-08 15:47:21","1171.64"
"ceph/ceph-csi","c552b24c49ae706a370d091134cef058e053d6c6","mcronce","2018-11-29 18:16:25","false","deploy/rbd:  Updated all image tags from v0.3.0 to v1.0.0",16,11,0,0,"2018-01-08 15:47:21","321.1"
"ceph/ceph-csi","b18fca7ae06370a5251e942fa85330553413b619","Madhu-1","2020-07-23 03:47:23","false","doc: Remove support for mimic

As ceph mimic is deprecated in the ceph upstream,
we are removing the support for mimic from ceph-csi
also, the user need to update the latest Nautilus or
Octopus to use ceph-csi.

more info realated to ceph mimim deprecation at
https://lists.ceph.io/hyperkitty/list/dev@ceph.io/thread/X5IUICDEM4IVVWTMUTSSNEU424MB6WL7/
https://ceph.io/releases/mimic-is-retired/

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",116,30,0,1,"2018-01-08 15:47:21","925"
"ceph/ceph-csi","74ad010d85392b65abb63c8d511b935a2dd1dc6a","Madhu-1","2019-05-08 04:24:02","false","update Travis to build cephcsi

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",68,16,0,1,"2018-01-08 15:47:21","485.78"
"ceph/ceph-csi","9512aa6206cfa03d7c177d1432bd503463855b23","Madhu-1","2020-08-19 10:47:27","false","rbd: replace klog with util logger in rbd_attach.go

replace klog with util logger in rbd_attach.go

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",121,31,0,1,"2018-01-08 15:47:21","951.29"
"ceph/ceph-csi","b15132587164c408f1717e1c8b3938692059df50","humblec","2022-01-13 05:37:42","false","doc: add udgrade from v3.4 to v3.5

This commit adds the upgrade documentation from v3.4 to v3.5

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",39,48,1,1,"2018-01-08 15:47:21","1465.58"
"ceph/ceph-csi","0e709766b0e98212cd049aab95c383fb998e4af4","humblec","2019-06-04 07:09:45","false","Lift kube dependency to 1.14.2

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",77,17,0,1,"2018-01-08 15:47:21","511.89"
"ceph/ceph-csi","3ac5af6ce6efd9900027a25172615a84db597941","Madhu-1","2019-02-21 04:32:39","false","Fix formatting in helm rbd readme

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",30,13,0,1,"2018-01-08 15:47:21","407.78"
"ceph/ceph-csi","0ae7cd36cef6a264da068cf5ad63b5548c3c1579","Madhu-1","2019-12-11 06:12:18","false","Update minikube to latest released version

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",99,23,0,1,"2018-01-08 15:47:21","697.85"
"ceph/ceph-csi","68bd44beba36e4c7f48e6c34cbd5822e6e57311c","Madhu-1","2020-10-21 12:49:45","false","rbd: add new controller to regenerate omap data

In the case of Disaster Recovery failover, the
user expected to create the static PVC's. We have
planned not to go with the PVC name and namespace
for many reasons (as in kubernetes it's planned to
support PVC transfer to a new namespace with a
different name and with new features coming in
like data populator etc). For now, we are
planning to go with static PVC's to support
async mirroring.

During Async mirroring only the RBD images are
mirrored to the secondary site, and when the
user creates the static PVC's on the failover
we need to regenerate the omap data. The
volumeHandler in PV spec is an encoded string
which contains clusterID and poolID and image UUID,
The clusterID and poolID won't remain same on both
the clusters, for that cephcsi need to generate the
new volume handler and its to create a mapping
between new volume handler and old volume handler
with that whenever cephcsi gets csi requests it
check if the mapping exists it will pull the new
volume handler and continues other operations.

The new controller watches for the PVs created,
It checks if the omap exists if it doesn't it
will regenerate the entire omap data.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",74,33,0,1,"2018-01-08 15:47:21","1013.38"
"ceph/ceph-csi","1a1ad11f57435cceed0541a0badf7878a6201256","Madhu-1","2020-06-19 05:30:26","false","doc: update coding doc to correct import order

Updated coding doc to correct the import order
as per the standard. More info can be found on
https://github.com/golang/go/wiki/CodeReviewComments#imports

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",116,29,0,1,"2018-01-08 15:47:21","891.07"
"ceph/ceph-csi","c5ff1ba724d5f026b25979e1762aa10422362bd4","Madhu-1","2019-03-12 13:35:04","true","Merge pull request #254 from Madhu-1/fix-252-

store volume size in bytes in configmap",32,14,0,1,"2018-01-08 15:47:21","429.16"
"ceph/ceph-csi","0d1c2aa983e60a93a00ecd26a987c5ea36afc3d3","Rakshith-R","2021-12-15 05:26:34","false","rebase: update go-ceph to release v0.13.0

This commit update go-ceph to v0.13.0 and
change CEPH_VERSION in build.env to pacific.

Signed-off-by: Rakshith R <rar@redhat.com>",50,47,1,1,"2018-01-08 15:47:21","1432.32"
"ceph/ceph-csi","34593c9af034ed35ced48aa91972e9c0717cc474","Yuggupta27","2020-07-06 05:31:52","false","cleanup: Reduce cyclomatic complexity of topology_test

Reduce redundant code to make the test simpler.

Signed-off-by: Yug <yuggupta27@gmail.com>",112,30,0,0,"2018-01-08 15:47:21","909.07"
"ceph/ceph-csi","1b94ed2b3799028c14e464c8ce021925ae2548d5","humblec","2020-08-11 11:51:00","false","doc: update cephfs snapshot, restore and clone support matrix

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",119,31,0,1,"2018-01-08 15:47:21","943.34"
"ceph/ceph-csi","63c458bd632d8958e60459fb804e2d0a36679717","nixpanic","2020-05-12 14:56:08","false","rbd: use rbdVolume.open() for metadata operations

Signed-off-by: Niels de Vos <ndevos@redhat.com>",110,28,0,1,"2018-01-08 15:47:21","854.46"
"ceph/ceph-csi","33dc861f233ec1d4a3b9f505fd75779f30a25511","nixpanic","2020-06-22 11:36:23","false","ci: use ""gimme"" to install Golang in Travis CI

Signed-off-by: Niels de Vos <ndevos@redhat.com>",116,29,0,1,"2018-01-08 15:47:21","894.33"
"ceph/ceph-csi","5ccdb35da0ea9f82df542551e654b704cd64d951","Madhu-1","2021-05-10 08:52:02","false","doc: update readme for latest releases

as we have done new releases for v3.3.x and
v3.2.x updating the readme for the same.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",93,40,0,1,"2018-01-08 15:47:21","1217.46"
"ceph/ceph-csi","43fc945be6dda90c7c61461cd9bc9bdb8351cd1a","humblec","2022-01-10 10:03:25","false","ci: move from merge action to queue action

as mentioned in the below blog the support for strict mode
and merge action will be done soon in mergify. This brings
the change requested for the same.

Ref# https://blog.mergify.com/strict-mode-deprecation/

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",43,48,1,1,"2018-01-08 15:47:21","1462.76"
"ceph/ceph-csi","f0b8a3f626ecb46a0fe0f22e0254383e5fbfd82f","humblec","2021-09-02 16:01:17","false","rbd: use String() method of MirrorImageState in return error

MirrorImageState (type C.rbd_mirror_image_state_t) has a string
method which can be used while returning error in the replication
controller. Previously, we were using int return in the error which
is not the proper usage.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",109,44,0,1,"2018-01-08 15:47:21","1330.76"
"ceph/ceph-csi","95252dd9f69f1b68c6ad0b3077f4e9841d79ad5d","humblec","2019-06-07 05:14:18","true","Merge pull request #390 from ShyamsundarR/stateless-cephfs

Make CephFS plugin stateless reusing RADOS based journal scheme",80,17,0,1,"2018-01-08 15:47:21","514.81"
"ceph/ceph-csi","1b0ebc43d46fbd3ed430cbc809c0c935811a0715","humblec","2021-04-05 11:43:45","false","deploy: use serviceAccountName instead of serviceAccount in yamls

serviceAccount is the depricated alias for serviceAccountName, so it
is recommended/suggested to use serviceAccountName instead.

For ex. reference:
https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",90,39,0,1,"2018-01-08 15:47:21","1183.58"
"ceph/ceph-csi","92e7f16654c9e9128c48939ad30ad888dfc56443","humblec","2021-08-30 10:44:30","false","ci: remove the rules for backport on unsupported versions

CSI version v3.3.0 and above are the supported versions now and this
patch also adjust the mergify rules according to that, ie the backport
rules are removed for all unsupported versions here.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",106,44,0,1,"2018-01-08 15:47:21","1327.54"
"ceph/ceph-csi","523ac4b9750070dd9aa1e95f435d5d1ebd088212","nixpanic","2021-03-24 15:31:26","false","util: move getPodNamespace() and getKMSConfigMapName() into its own helpers

These functions can now be re-used easier. The Amazon KMS needs to know
the Namespace of the Pod for reading a Secret with more key/values.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",88,38,0,1,"2018-01-08 15:47:21","1171.74"
"ceph/ceph-csi","ed811e050670524607aa6317e2048f18d583357b","gman0","2018-12-01 09:39:09","false","cephfs: don't set quotas for zero-sized volumes",16,11,0,0,"2018-01-08 15:47:21","323.74"
"ceph/ceph-csi","f05ac2b25dc0f3d81f6fd5c917aa5f1dadf60b17","Rakshith-R","2021-07-16 10:07:56","false","rbd: extract kmsID from volumeAttributes in RegenerateJournal()

This commit adds functionality of extracting encryption kmsID,
owner from volumeAttributes in RegenerateJournal() and adds utility
functions ParseEncryptionOpts and FetchEncryptionKMSID.

Signed-off-by: Rakshith R <rar@redhat.com>",123,42,0,1,"2018-01-08 15:47:21","1283.51"
"ceph/ceph-csi","8f432e8bfabd988e84eeb68b6d98623c7f02597b","Rakshith-R","2021-09-21 05:14:45","false","rebase: update k8s.io packages from v0.22.1 to v0.22.2

This commit also fixes k8s.io/cloud-providers v0.22.2,
instead of v1.22.1 which does not exist and was overrided
in replace.

Signed-off-by: Rakshith R <rar@redhat.com>",62,44,0,1,"2018-01-08 15:47:21","1348.31"
"ceph/ceph-csi","8650538b78b5eda0c73a5884d53f6d3d5b5b6329","Rakshith-R","2022-10-11 06:48:20","false","rbd: setup encryption if rbdVol exits during CreateVol

This commit adds code to setup encryption on a rbdVol
being repaired in a followup CreateVolume request.
This is fixes a bug wherein encryption metadata may not
have been set in previous request due to container restart.

Fixes: #3402

Signed-off-by: Rakshith R <rar@redhat.com>",37,57,1,1,"2018-01-08 15:47:21","1733.63"
"ceph/ceph-csi","40c85922cd71504bd061dad2708d29f53c5849b4","rootfs","2019-02-11 14:07:22","true","Update README.md",27,13,0,0,"2018-01-08 15:47:21","398.18"
"ceph/ceph-csi","151b8c665f5ea3d67ce8de323c0172e16565aacf","humblec","2021-05-18 13:17:58","false","e2e: update upgrade-version to v3.3.1

making default version of upgrade test to v3.3.1

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",97,40,0,1,"2018-01-08 15:47:21","1225.65"
"ceph/ceph-csi","2e8e8f5e64888bedf3516b51cce7a8105db17b45","humblec","2021-09-16 08:26:06","false","rbd: fill clusterID if its a migration nodestage request

the migration nodestage request does not carry the 'clusterID' in it
and only monitors are available with the volumeContext. The volume
context flag 'migration=true' and 'static=true' flags allow us to
fill 'clusterID' from the passed in monitors to the volume Context,so
that rest of the static operations on nodestage can be proceeded as we
do treat static volumes today.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",60,44,0,1,"2018-01-08 15:47:21","1343.44"
"ceph/ceph-csi","a852e66133643e043116d1fca1e8f381c22270e3","Yuggupta27","2021-06-25 06:00:05","false","deploy: update node-driver-registrar

update node-driver-registrar to
the latest available release version.

Signed-off-by: Yug <yuggupta27@gmail.com>",119,41,0,0,"2018-01-08 15:47:21","1262.34"
"ceph/ceph-csi","cc3f146ad189b622b77124d2d88cb78f5953c0c9","nixpanic","2020-12-08 13:22:56","false","cleanup: return error type in rbdVolume.checkCloneImage()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,35,0,1,"2018-01-08 15:47:21","1061.4"
"ceph/ceph-csi","3f0d2b3c4ffc2bf900363254ba7eda98705db910","nixpanic","2020-05-07 12:53:33","false","ci: run e2e tests on Kubernetes 1.16.9

Kubernetes 1.16 still is maintained, so run e2e tests with that.
Currently 1.16.9 is the most current release.

See-also: https://github.com/kubernetes/sig-release/blob/master/releases/patch-releases.md#116
Signed-off-by: Niels de Vos <ndevos@redhat.com>",108,28,0,1,"2018-01-08 15:47:21","850.38"
"ceph/ceph-csi","b0270ced41cbea4e7db5063f9d91f572a43a3f81","Madhu-1","2020-05-15 08:34:59","false","e2e: reword sentences in e2e

as kube is the shortform for kubernetes.
its expected to mention full form kubernetes
in the e2e tests.

Updated few wordings in the e2e.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",114,28,0,1,"2018-01-08 15:47:21","857.2"
"ceph/ceph-csi","423183bcfcd8730db59efebff575efbcf9d0ec0d","Madhu-1","2020-07-27 03:05:06","false","doc: update readme for v3.0.0 release

updated readme for new v3.0.0 release.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",113,31,0,1,"2018-01-08 15:47:21","928.97"
"ceph/ceph-csi","ef14ea77236d490153ceb329a0ebd2878c853fa6","Madhu-1","2022-01-10 04:56:28","false","cephfs: resize cloned, restored volume if required

Currently, as a workaround, we are calling
the resize volume on the cloned, restore volumes
to adjust the cloned, restored volumes.
With this fix, we are calling the resize volume
only if there is a size mismatch with requested
and the volume from which the new volume needs
to be created.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",43,48,1,1,"2018-01-08 15:47:21","1462.55"
"ceph/ceph-csi","41b701c98c99fd88ca4d01ab1ae746984444b18a","Madhu-1","2019-09-10 09:56:08","false","Add support for erasure pool in rbd

Allow specifying different metadata and data pools in a
CSI RBD StorageClass

Fixes: #199
Fixes: https://github.com/rook/rook/issues/2650
Fixes: https://github.com/rook/rook/issues/3763

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",85,20,0,1,"2018-01-08 15:47:21","607.01"
"ceph/ceph-csi","f3ed883df994be2231826572c030289f5cc2c163","Madhu-1","2021-12-22 13:36:32","false","ci: use install.sh from golangci-lint repo

The golangci-lint install script at goreleaser.com is deprecated. Docs
now advise to install from a github link:

goreleaser/godownloader#207

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",53,47,1,1,"2018-01-08 15:47:21","1439.66"
"ceph/ceph-csi","3be9d99573fc5ce52487d952423f64be7f1a862e","humblec","2020-05-13 06:42:17","false","bot: Disable semantic bot from the repo

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",110,28,0,1,"2018-01-08 15:47:21","855.12"
"ceph/ceph-csi","6043a308770316f13156583a8394146fba5a7445","humblec","2022-04-11 09:51:12","false","e2e: change the default release version of upgrade tests

This commit correct the release version of upgrade tests from
unsupported 3.3.1 to supported version.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",45,51,1,1,"2018-01-08 15:47:21","1553.75"
"ceph/ceph-csi","561cc26e4c7fa0700bb8bf1ba7812405864baee8","humblec","2019-07-25 05:15:06","false","Implement metrics for CephFS CSI driver

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",77,18,0,1,"2018-01-08 15:47:21","561.81"
"ceph/ceph-csi","4ee4fdfebdce6f13571b9541cac317dba2a61dc8","humblec","2022-01-24 13:13:07","false","rbd: unexport SecretsKMS from KMS implementation

This commit unexport SecretsKMS from KMS implementation.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",36,49,1,1,"2018-01-08 15:47:21","1476.89"
"ceph/ceph-csi","80dda7cc30b06034f56c7705ad001fa09420c155","gman0","2022-02-02 12:23:06","false","cephfs: detect corrupt ceph-fuse mounts and try to remount

Mounts managed by ceph-fuse may get corrupted by e.g. the ceph-fuse process
exiting abruptly, or its parent container being terminated, taking down its
child processes with it.

This commit adds checks to NodeStageVolume and NodePublishVolume procedures
to detect whether a mountpoint in staging_target_path and/or target_path is
corrupted, and remount is performed if corruption is detected.

Signed-off-by: Robert Vasek <robert.vasek@cern.ch>",42,49,1,0,"2018-01-08 15:47:21","1485.86"
"ceph/ceph-csi","48a313c6ccf47cbb2e6c56071c4b169069540668","Madhu-1","2020-08-11 12:11:51","false","cephfs: replace Errorf with ErrorLog in mount

replace Errorf with ErrorLog in mount for
context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.35"
"ceph/ceph-csi","f262673b60b77cf831a92b6b6bb8eec2762dc118","nixpanic","2020-12-08 14:09:59","false","cleanup: return error type in lookupRBDImageMetadataStash()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,35,0,1,"2018-01-08 15:47:21","1061.43"
"ceph/ceph-csi","10b2277330d26a3aac9e673923c66b4af86a5ba5","nixpanic","2022-07-18 13:08:42","false","util: use k8s.io/mount-utils/NewWithoutSystemd() to prevent logging

NewWithoutSystemd() has been introduced in the k8s.io/mount-utils
package so that systemd is not called while executing functions. This
offers consumers the ability to prevent confusing and scary messages
from getting logged.

See-also: kubernetes/kubernetes#111218
Signed-off-by: Niels de Vos <ndevos@redhat.com>",39,54,1,1,"2018-01-08 15:47:21","1650.89"
"ceph/ceph-csi","386d3ddd6e2d9b63287550a1fdb2e861c11ab9fb","nixpanic","2022-10-13 08:22:55","false","e2e: disable rbd-nbd tests by default

Because the rbd-nbd tests fail with minikube and the Podman driver,
disable the tests for the time being.

Updates: #3431
Signed-off-by: Niels de Vos <ndevos@redhat.com>",39,57,1,1,"2018-01-08 15:47:21","1735.69"
"ceph/ceph-csi","f05c9a6a93fbed59495a3fb0ed61de1ce00ce5a0","Madhu-1","2020-07-08 02:22:49","false","ci: fix psp issue in minikube latest version

With minikube versions greater than 1.6.2 and less than 1.11.1, the YAML files
minikube path will not be automatically applied to the cluster. we will get
errors during bootstrap of the cluster if the admission controller is enabled.

To use Pod Security Policies with these versions of minikube, first start a
cluster without the `PodSecurityPolicy` admission controller enabled.

Next, apply the psp yaml. and stop the cluster and then restart it
with the admission controller enabled.

```
minikube start
kubectl apply -f /path/to/psp.yaml
minikube stop
minikube start --extra-config=apiserver.enable-admission-plugins=PodSecurityPolicy
```

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",110,30,0,1,"2018-01-08 15:47:21","910.94"
"ceph/ceph-csi","22f3dc3556958cf841b981adf59f041d80c352f5","Madhu-1","2020-04-07 08:35:05","false","E2E: Add Ability to test with different user #919

Updated E2E to use a normal user other than admin user,
who is having access to create and mount cephfs PVC and
create and map rbd PVC

we will use the user created by rook who is having above
access.

Signed-off-by: Madhu Rajanna madhupr007@gmail.com

This PR adds a test case for #904

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",101,27,0,1,"2018-01-08 15:47:21","820.2"
"ceph/ceph-csi","6c21be278a71a1a54d2b720e8bdc124ec4e3985e","Madhu-1","2021-04-16 05:36:04","false","doc: update readme for v3.3.0 release

updated readme with available released
image tags.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",87,39,0,1,"2018-01-08 15:47:21","1193.33"
"ceph/ceph-csi","78cdf9d4db9e15a1783fc493b130057bf3e3e6b5","Madhu-1","2020-05-18 13:07:17","false","e2e: Add option to set mountoptions in sc

Updated E2E code to pass mountoptions when
creating a storageclass.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",117,28,0,1,"2018-01-08 15:47:21","860.39"
"ceph/ceph-csi","b773e821c8945e92e921a8ad97072d6dc36a74c3","Madhu-1","2020-07-09 10:11:40","false","ci: use testCephFS flag to skip cephfs tests

This commit fixes the flag check to skip
cephfs E2E tests.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",110,30,0,1,"2018-01-08 15:47:21","911.27"
"ceph/ceph-csi","13a025680fbd3d3400f47ebe7fbe111334be9efe","Madhu-1","2019-02-18 04:47:31","false","Fix missspelled words

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",28,13,0,1,"2018-01-08 15:47:21","404.79"
"ceph/ceph-csi","032901b8d0538891b1a4966914cefa3b67e2d91c","Madhu-1","2020-08-11 12:10:24","false","cephfs: replace Errorf with ErrorLog in nodeStageVolume

replace Errorf with ErrorLog in nodeStageVolume
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.35"
"ceph/ceph-csi","ffe99403fc3823f744d56f3d4dfa281c62c2ca2b","Madhu-1","2019-07-01 07:30:04","false","update minikube version to v1.2.0

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",80,18,0,1,"2018-01-08 15:47:21","538.9"
"ceph/ceph-csi","79b0b8cfa62055b2510c2b3dcd1cb1a5d9ee035d","nixpanic","2020-03-20 08:26:49","false","travis: re-enable running on arm64

Travis CI has fixed their Ubuntu Xenial images for arm64, so the job can
be enabled again.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",114,26,0,1,"2018-01-08 15:47:21","802.19"
"ceph/ceph-csi","9f08cb7ea06c9105a71c99dff16be7fabe8a023a","nixpanic","2022-05-11 10:06:40","false","e2e: re-order deployment components

Some of the deployment artifacts refer to others (like ServiceAccount in
a Deployment). If the dependencies are not available (yet), there will
be errors reported in the logs. By deploying the components in a more
correct order, fewer errors are reported, making the logs a little
easier to understand.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",40,52,1,1,"2018-01-08 15:47:21","1583.76"
"ceph/ceph-csi","c0fbaf4276c291e4340408906ed8bcd41f26500a","nixpanic","2020-08-11 09:13:29","false","ci: only retry ""kubectl create"" if objects are missing

There can be spurious failures in the CI when running kubectl create. On
occasion, the command returns with an error, but the api-server did
receive and process the request. This causes a 2nd create action to fail
with messages like:

    cephcluster.ceph.rook.io/my-cluster created
    Error from server: error when creating ""/tmp/tmp.Ur1ZPG85o9/cluster-test.yaml"": etcdserver: request timed out
    Error from server (AlreadyExists): error when creating ""/tmp/tmp.Ur1ZPG85o9/cluster-test.yaml"": configmaps ""rook-config-override"" already exists
    Error from server (AlreadyExists): error when creating ""/tmp/tmp.Ur1ZPG85o9/cluster-test.yaml"": cephclusters.ceph.rook.io ""my-cluster"" already exists
    Error from server (AlreadyExists): error when creating ""/tmp/tmp.Ur1ZPG85o9/cluster-test.yaml"": configmaps ""rook-config-override"" already exists
    Error from server (AlreadyExists): error when creating ""/tmp/tmp.Ur1ZPG85o9/cluster-test.yaml"": cephclusters.ceph.rook.io ""my-cluster"" already exists
    Error from server (AlreadyExists): error when creating ""/tmp/tmp.Ur1ZPG85o9/cluster-test.yaml"": configmaps ""rook-config-override"" already exists
    Error from server (AlreadyExists): error when creating ""/tmp/tmp.Ur1ZPG85o9/cluster-test.yaml"": cephclusters.ceph.rook.io ""my-cluster"" already exists
    Error from server (AlreadyExists): error when creating ""/tmp/tmp.Ur1ZPG85o9/cluster-test.yaml"": configmaps ""rook-config-override"" already exists
    Error from server (AlreadyExists): error when creating ""/tmp/tmp.Ur1ZPG85o9/cluster-test.yaml"": cephclusters.ceph.rook.io ""my-cluster"" already exists

By handling the create action differently, and checking for the
AlreadyExists word in the stderr output, it is possible to detect
repeated creates that are not needed.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","943.23"
"ceph/ceph-csi","4b57cc3ec59be6445010020ee82d21ec79c71edf","Madhu-1","2022-05-24 03:38:42","false","rbd: add support for rbd striping

RBD supports creating rbd images with
object size, stripe unit and stripe count
to support striping. This PR adds the support
for the same.

More details about striping at
https://docs.ceph.com/en/quincy/man/8/rbd/#striping

fixes: #3124

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",35,52,1,1,"2018-01-08 15:47:21","1596.49"
"ceph/ceph-csi","0f8813d89ff4dfedaf18139346196dcf55c2a40a","Madhu-1","2021-03-30 10:33:55","false","rbd:store/Read volumeID in/from PV annotation

In the case of the Async DR, the volumeID will
not be the same if the clusterID or the PoolID
is different, With Earlier implementation, it
is expected that the new volumeID mapping is
stored in the rados omap pool. In the case of the
ControllerExpand or the DeleteVolume Request,
the only volumeID will be sent it's not possible
to find the corresponding poolID in the new cluster.

With This Change, it works as below

The csi-rbdplugin-controller will watch for the PV
objects, when there are any PV objects created it
will check the omap already exists, If the omap doesn't
exist it will generate the new volumeID and it checks for
the volumeID mapping entry in the PV annotation, if the
mapping does not exist, it will add the new entry
to the PV annotation.

The cephcsi will check for the PV annotations if the
omap does not exist if the mapping exists in the PV
annotation, it will use the new volumeID for further
operations.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",90,39,0,1,"2018-01-08 15:47:21","1177.53"
"ceph/ceph-csi","4302e5ee674058bdc12950e19e5d6ea1fc021d07","humblec","2021-06-10 11:39:03","false","cleanup: correct createORDeleteCephfsResources() function name

Along with correcing the name of the function, other typos are also
addressed

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",108,41,0,1,"2018-01-08 15:47:21","1247.58"
"ceph/ceph-csi","90f81516ee95d47d721f102a1b90b571ca3cff14","nixpanic","2020-02-20 19:01:16","false","util/conn_pool: add tests for ConnPool

Signed-off-by: Niels de Vos <ndevos@redhat.com>",109,25,0,1,"2018-01-08 15:47:21","772.63"
"ceph/ceph-csi","99168dc822a4c81f4a12dcf00a7165e7426594ce","Rakshith-R","2021-08-26 10:21:29","false","rbd: check for clusterid mapping in RegenerateJournal()

This commit adds fetchMappedClusterIDAndMons() which returns
monitors and clusterID info after checking cluster mapping info.
This is required for regenerating omap entries in mirrored cluster
with different clusterID.

Signed-off-by: Rakshith R <rar@redhat.com>",115,43,0,1,"2018-01-08 15:47:21","1323.52"
"ceph/ceph-csi","82d92aab4affefac48413f64a31730a7b250039d","irq0","2022-08-12 15:19:34","false","rbd: Add volume journal encryption support

Add fscrypt support to the journal to support operations like
snapshotting.

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",41,55,1,0,"2018-01-08 15:47:21","1674.98"
"ceph/ceph-csi","d03a352abfd736cee0f9484bf5106539f4e19040","nixpanic","2019-08-30 12:53:48","false","e2e: correct log format in execCommandInPod()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",86,20,0,1,"2018-01-08 15:47:21","597.13"
"ceph/ceph-csi","1f18e876f0e63e16a8beec2821889339e0a5ea8d","nixpanic","2020-11-26 12:38:10","false","e2e: use docker.io/library as prefix for official images

Docker Hub offers a way to pull official images without any project
prefix, like ""docker.io/vault:latest"". This does a redirect to the
images located under ""docker.io/library"".

By using the full qualified image name, a redirect gets removed while
pulling the images. This reduces the likelyhood of hittin Docker Hub
pull rate-limits.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",84,34,0,1,"2018-01-08 15:47:21","1048.37"
"ceph/ceph-csi","2a256661090f2875076a62a4b96809981662d288","gman0","2019-03-12 16:25:05","true","Merge pull request #249 from Madhu-1/fix-return

Fix return error codes",33,14,0,0,"2018-01-08 15:47:21","429.28"
"ceph/ceph-csi","ba84f14241c310a5e46413098c992468ca399d8b","Madhu-1","2020-10-09 11:38:59","false","journal: create object with provided UUID

incase of async mirroring the volume UUID is
retrieved from the volume name, instead of cephcsi
generating a new UUID it should reserve the passed
UUID it will be useful when we support both metro DR
and async mirroring on a kubernetes clusters.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",123,33,0,1,"2018-01-08 15:47:21","1001.33"
"ceph/ceph-csi","99dbe27921569247e5461240b02c0d8759f2d1c8","Madhu-1","2020-12-04 07:52:24","false","rbd: return nil if the omap data exists

If the omap data already exits return nil.
so that omap generator will not try to reserve
anything again.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",80,35,0,1,"2018-01-08 15:47:21","1057.17"
"ceph/ceph-csi","4312907f7ba6ba1b49d44c69da1aa232422e585d","sngchlko","2018-08-09 13:07:06","false","remove the snapshot if can't store snapshot information",8,7,0,0,"2018-01-08 15:47:21","210.89"
"ceph/ceph-csi","ba4e92eea9a1d6ed6ca75ebd06274fb92bb334bc","Rakshith-R","2021-06-16 05:06:38","false","doc: add imageFeatures parameter info to static-pvc.md

Signed-off-by: Rakshith R <rar@redhat.com>",108,41,0,1,"2018-01-08 15:47:21","1253.31"
"ceph/ceph-csi","7d3bff06543369618a18b57fe69f8d506681146d","Madhu-1","2020-12-08 10:42:31","false","e2e: enable topology based provisioning

as we are testing the topology based
provisioning in our E2E, we need to set
topology=true in E2E.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",74,35,0,1,"2018-01-08 15:47:21","1061.29"
"ceph/ceph-csi","0a7a490496e0c0cb340e393b536b2c0d564e3b53","Madhu-1","2021-08-25 09:40:02","false","ci: update mergify rules to include teams

updated mergify rules to consider the teams
approval to merge a PR.

more details at #2367

fixes #2367

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",115,43,0,1,"2018-01-08 15:47:21","1322.49"
"ceph/ceph-csi","3c45ec32dbda56835c65e19b879c2cff46e8e5e4","Madhu-1","2020-08-11 11:18:30","false","cephfs: replace klog.Error in createBackingVolume

replace klog.Error with util.ErrorLog in
createBackingVolume function.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.31"
"ceph/ceph-csi","93f692308465f78534bfd193a21409c55ffde763","Madhu-1","2022-08-24 11:26:26","false","e2e: use ginkgo.timeout for e2e

ginkgo.timeout is introduced in
ginkgo timeout for overall test suite

https://onsi.github.io/ginkgo/
\MIGRATING_TO_V2#timeout-behavior

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",41,55,1,1,"2018-01-08 15:47:21","1686.82"
"ceph/ceph-csi","68d69ac4c349132cb48afa1bd2fb4025f2a57108","rootfs","2018-02-15 21:03:21","true","Merge pull request #23 from rootfs/image-repo

verify build",1,1,0,0,"2018-01-08 15:47:21","37.22"
"ceph/ceph-csi","020cded581ad6990ee63b82eb48cd040b6757a57","Rakshith-R","2021-04-05 04:40:00","false","cleanup: refactor deeply nested if statements in internal/rbd

Refactored deeply nested if statement in internal/rbd to
reduce cognitive complexity.

Signed-off-by: Rakshith R <rar@redhat.com>",90,39,0,1,"2018-01-08 15:47:21","1183.29"
"ceph/ceph-csi","22214fb97dc2f832fd79fc35ce1f8f2ffac67041","rootfs","2018-02-15 20:23:41","true","Merge pull request #20 from rootfs/image-repo

update image repo",1,1,0,0,"2018-01-08 15:47:21","37.19"
"ceph/ceph-csi","2888640157c37226266b323f96eecfb97c680e5e","humblec","2019-01-16 09:03:12","false","update readme and correct linter errors.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",17,12,0,1,"2018-01-08 15:47:21","372.97"
"ceph/ceph-csi","66919514539f78f4fcd5af8ac315aa9cc0a7da8e","yati1998","2021-06-23 13:14:48","false","rbd: use go-ceph for getImageMirroringStatus

Currently, getImageMirroringStatus() is using RBD CLI.
This commit converts RBD CLI to go-ceph API.

Fixes: #2120

Signed-off-by: Yati Padia <ypadia@redhat.com>",118,41,0,0,"2018-01-08 15:47:21","1260.64"
"ceph/ceph-csi","b204b686359fab44dc6103fbd1a152b2e809d05c","nixpanic","2021-06-17 07:44:48","false","rebase: update golang.org/x/crypto to latest version

Signed-off-by: Niels de Vos <ndevos@redhat.com>",113,41,0,1,"2018-01-08 15:47:21","1254.41"
"ceph/ceph-csi","880b5bb4273b5a544a1ea8a352e020a8379dab40","nixpanic","2020-11-17 08:47:31","false","ci: use the Fedora container registry for cephcsi:test

This reduces the dependency on Docker, where image pull rate limits are
seen in the CI.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",77,34,0,1,"2018-01-08 15:47:21","1039.21"
"ceph/ceph-csi","d3beaeb014fbc3a7f605054ab03006d127ac0430","nixpanic","2021-07-26 15:48:49","false","e2e: retry deploying CephFS components on failure

There are reports where CephFS deploying failed with etcdserver
timeouts:

    INFO: Running '/usr/bin/kubectl --server=https://192.168.39.187:8443 --kubeconfig=/root/.kube/config --namespace=cephcsi-e2e-ea434921 create --namespace=cephcsi-e2e-ea434921 -f -'
    INFO: rc: 1
    FAIL: failed to create CephFS provisioner rbac with error error running /usr/bin/kubectl --server=https://192.168.39.187:8443 --kubeconfig=/root/.kube/config --namespace=cephcsi-e2e-ea434921 create --namespace=cephcsi-e2e-ea434921 -f -:
    Command stdout:
    role.rbac.authorization.k8s.io/cephfs-external-provisioner-cfg created
    rolebinding.rbac.authorization.k8s.io/cephfs-csi-provisioner-role-cfg created

    stderr:
    Error from server: error when creating ""STDIN"": etcdserver: request timed out
    Error from server: error when creating ""STDIN"": etcdserver: request timed out
    Error from server: error when creating ""STDIN"": etcdserver: request timed out

    error:
    exit status 1

By using retryKubectlInput() helper function, a retry will be done, and
the failure should not be fatal any longer.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,43,0,1,"2018-01-08 15:47:21","1293.75"
"ceph/ceph-csi","79e91fa894e561e1a187baa19967f92ffe461a80","nixpanic","2020-10-26 13:08:55","false","cleanup: prevent Go panic on missing driver type

When running the 'cephcsi' executable without arguments, a Go panic is
reported:

    $ ./_output/cephcsi
    F1026 13:59:04.302740 3409054 cephcsi.go:126] driver type not specified
    goroutine 1 [running]:
    k8s.io/klog/v2.stacks(0xc000010001, 0xc0000520a0, 0x48, 0x9a)
    	/go/src/github.com/ceph/ceph-csi/vendor/k8s.io/klog/v2/klog.go:996 +0xb9
    k8s.io/klog/v2.(*loggingT).output(0x2370360, 0xc000000003, 0x0, 0x0, 0xc000194770, 0x20cb265, 0xa, 0x7e, 0x413500)
    	/go/src/github.com/ceph/ceph-csi/vendor/k8s.io/klog/v2/klog.go:945 +0x191
    k8s.io/klog/v2.(*loggingT).println(0x2370360, 0x3, 0x0, 0x0, 0xc000163e08, 0x1, 0x1)
    	/go/src/github.com/ceph/ceph-csi/vendor/k8s.io/klog/v2/klog.go:699 +0x11a
    k8s.io/klog/v2.Fatalln(...)
    	/go/src/github.com/ceph/ceph-csi/vendor/k8s.io/klog/v2/klog.go:1456
    main.main()
    	/go/src/github.com/ceph/ceph-csi/cmd/cephcsi.go:126 +0xafa

Just logging the error and exiting should be sufficient. This stack-trace
from the Go panic does not add any useful information.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,33,0,1,"2018-01-08 15:47:21","1018.39"
"ceph/ceph-csi","6c8bc797712537ff1fed4d4948138325465b8b41","nixpanic","2021-03-04 09:55:09","false","ci: add unit tests for SecretsKMS

Signed-off-by: Niels de Vos <ndevos@redhat.com>",91,38,0,1,"2018-01-08 15:47:21","1152.51"
"ceph/ceph-csi","e63ebb73c5c3d3f399502151a37a6670ff83affe","nixpanic","2023-06-02 09:32:54","false","build: address `nlreturn` warnings

Signed-off-by: Niels de Vos <ndevos@ibm.com>",31,65,1,1,"2018-01-08 15:47:21","1970.99"
"ceph/ceph-csi","32d78c4f7f92b7deb63bd7cc824dbbd8e4600aeb","agarwal-mudit","2021-02-10 03:38:18","false","rebase: update go-ceph to v0.8.0

Updating go-ceph to v0.8.0.

Signed-off-by: Mudit Agarwal <muagarwa@redhat.com>",84,37,0,0,"2018-01-08 15:47:21","1127.24"
"ceph/ceph-csi","fdec9f65b81144fdb4e72039fecb49e5cc3a5828","clwluvw","2021-01-02 16:55:16","false","rbd: fix namespace json parser for xbdDeviceInfo

rbd device list --format=json returns namespace as a namespace not radosNamespace

Signed-off-by: Seena Fallah <seenafallah@gmail.com>",82,36,0,0,"2018-01-08 15:47:21","1085.55"
"ceph/ceph-csi","fd4328cd5333f4275be52c604c30801fc612fa75","nixpanic","2020-09-24 09:20:36","false","ci: add files to run Kubernetes external storage e2e suite

Signed-off-by: Niels de Vos <ndevos@redhat.com>",129,32,0,1,"2018-01-08 15:47:21","986.23"
"ceph/ceph-csi","8dc3600899fc4693f611874453a9520d017850ec","nixpanic","2020-01-07 13:45:52","false","rbd: use go-ceph API for creating RBD images

This is the initial step for improving performance during provisioning
of CSI volumes backed by RBD.

While creating a volume, an existing connection to the Ceph cluster is
used from the ConnPool. This should speed up the creation of a batch of
volumes significantly.

Updates: #449
Signed-off-by: Niels de Vos <ndevos@redhat.com>",104,24,0,1,"2018-01-08 15:47:21","725.17"
"ceph/ceph-csi","9edb3b8e728394a37e470a9455cc9c7f071b0889","Madhu-1","2020-06-24 06:46:47","false","rbd: Add getImageID to get id of an image

add a new function called getImageID to fetch
the image id of an image which need to be stored
and retrived for Delete operation.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",115,29,0,1,"2018-01-08 15:47:21","896.12"
"ceph/ceph-csi","8223ae325b0bd9ab232a3f405737bd8146ffac06","gman0","2019-02-14 13:38:53","false","addressed review comments",27,13,0,0,"2018-01-08 15:47:21","401.16"
"ceph/ceph-csi","16279eda787dc7b203c6233a703a4fefef38b4ff","Madhu-1","2019-03-01 12:08:17","false","Roundup volume size to Mib for rbd

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",32,14,0,1,"2018-01-08 15:47:21","419.1"
"ceph/ceph-csi","f08118a8e58bbbff2644b76b874c262d0a6b559a","Madhu-1","2020-06-24 07:06:29","false","rbd: Implement create and delete snapshot with go-ceph

Implement create and delete snapshot with go-ceph

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",115,29,0,1,"2018-01-08 15:47:21","896.14"
"ceph/ceph-csi","fbda8cc4caf6ca818dc62a23d12d51c582cf8067","Madhu-1","2020-01-13 04:05:50","false","Use EmptyDir to store provisioner socket

currently, we are making use of host path directory
to store the provisioner socket, as this
the socket is not needed by anyone else other than
containers inside the provisioner pod using the
empty directory to store this socket is the best option.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",107,24,0,1,"2018-01-08 15:47:21","735.01"
"ceph/ceph-csi","938051463fc3f22c09020d7fe08aac18e8d958d2","Yuggupta27","2021-10-27 08:22:50","false","e2e: validate snapshot restore in ec pool

validate snapshot restore in erasure coded
pool.

Signed-off-by: Yug Gupta <yuggupta27@gmail.com>",55,45,0,0,"2018-01-08 15:47:21","1384.44"
"ceph/ceph-csi","c359753416c7cff2859a1ea80248b9b54f291a37","plnordquist","2018-12-10 19:25:34","false","Added Helm chart for RBD plugin

Signed-off-by: Peter Nordquist <peter.nordquist@pnnl.gov>",16,11,0,0,"2018-01-08 15:47:21","332.15"
"ceph/ceph-csi","9d27b6b425c0a63d8b664047dfd1a9172cbbfe2f","humblec","2019-06-11 07:29:36","true","Merge pull request #422 from humblec/travis-1

Use v1.1.1 of minikube",76,17,0,1,"2018-01-08 15:47:21","517.9"
"ceph/ceph-csi","36469b87e2c0103f1710596b8f172dd43ee57f6a","nixpanic","2020-07-22 12:53:22","false","util: make ExecComand return stdout and stderr as string

Most consumers of util.ExecCommand() need to convert the returned []byte
format of stdout and/or stderr to string. By having util.ExecCommand()
return strings instead, the code gets a little simpler.

A few commands return JSON that needs to be parsed. These commands will
be replaced by go-ceph implementations later on. For now, convert the
strings back to []byte when needed.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",113,30,0,1,"2018-01-08 15:47:21","924.38"
"ceph/ceph-csi","234ec7b1e0c382657abf1b61e8bdeb6ce50bf302","nixpanic","2020-06-30 11:03:01","false","ci: remove ""sudo"" from travis configuration

Address the following warning Travis reports:

    root: deprecated key sudo (The key `sudo` has no effect anymore.)

Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,30,0,1,"2018-01-08 15:47:21","902.3"
"ceph/ceph-csi","8b531f337e85f43c30cf1ea7ca5da1ffe8547d08","nixpanic","2021-12-09 08:12:37","false","rbd: add functions for initializing global variables

When the rbd-driver starts, it initializes some global (yuck!) variables
in the rbd package. Because the rbd-driver is moved out into its own
package, these variables can not easily be set anymore.

Introcude SetGlobalInt(), SetGlobalBool() and InitJournals() so that the
rbd-driver can configure the rbd package.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",50,47,1,1,"2018-01-08 15:47:21","1426.43"
"ceph/ceph-csi","7126e92b4fee16738085543a824d649ecc6a6649","nixpanic","2020-06-25 08:23:32","false","cleanup: use errors.As() in rbd.rbdStatus()

See-also: https://github.com/golang/go/wiki/ErrorValueFAQ#how-should-i-change-my-error-handling-code-to-work-with-the-new-features
Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,29,0,1,"2018-01-08 15:47:21","897.19"
"ceph/ceph-csi","bc256aa755ecf6c1cf573ad924e8c2a5800ec0af","gman0","2019-02-19 14:50:46","true","Merge pull request #211 from Madhu-1/clean-up

cleanup: remove duplicate code",28,13,0,0,"2018-01-08 15:47:21","406.21"
"ceph/ceph-csi","b3837d44cec38758d67f940bea2be0b5692133a6","Rakshith-R","2022-10-18 07:13:35","false","ci: fix mdl configuration

This commit makes the following changes:
`Please replace \"":code_blocks => false\"" \`
`by \"":ignore_code_blocks => true\"" in your configuration.`
Some rules are ignore for the time being,
these will be fixed later on.

Signed-off-by: Rakshith R <rar@redhat.com>",39,57,1,1,"2018-01-08 15:47:21","1740.64"
"ceph/ceph-csi","c0847ce86860bd9fcb8083fff360ea63a8913589","q60563","2018-04-26 05:32:24","false","fix CSI plugin pvc.yaml file storageClassName Error
Signed-off-by: chunwang Lin <q60563@gmail.com>",3,4,0,0,"2018-01-08 15:47:21","107.57"
"ceph/ceph-csi","7e59c0ed78651f8278a7b81f7d1e0385cc631385","humblec","2019-11-27 12:15:27","false","Change deployment artifacts for RBD resizer

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",94,22,0,1,"2018-01-08 15:47:21","684.1"
"ceph/ceph-csi","ca7a87c0a3fb05309f016571ac3430cf4339015c","Yuggupta27","2020-09-28 12:53:51","false","ci: require upgrade tests to pass for merging

Add passing of upgrade tests as a necessary condition
for merging PRs.

Signed-off-by: Yug <yuggupta27@gmail.com>",130,33,0,0,"2018-01-08 15:47:21","990.38"
"ceph/ceph-csi","e46099a5040b212dc9f370ac6f93eb77c0f3d5de","rootfs","2019-01-15 16:20:41","false","reconcile merge

Signed-off-by: Huamin Chen <hchen@redhat.com>",17,12,0,0,"2018-01-08 15:47:21","372.27"
"ceph/ceph-csi","3ef67768747bb24ef56f31e6b86230042aa5292a","rootfs","2019-02-05 14:09:45","true","Update issue templates",24,13,0,0,"2018-01-08 15:47:21","393.18"
"ceph/ceph-csi","f3d9b8933b132eb19c2e4ca55b4c2c6e06d637f0","Madhu-1","2020-08-11 12:24:15","false","cephfs: replace Errorf with ErrorLog in getSubVolumeInfo

replace Errorf with ErrorLog in getSubVolumeInfo
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.36"
"ceph/ceph-csi","f091374ba9eb03d53d51a777f2803abb6c83f1b6","phlogistonjohn","2020-05-12 13:22:07","false","journal: remove SetNamespace setter function

The SetNamespace setter function was called only once, immediately after
the creation of a volume journal object in cephfs only.
Remove this function so that it is no longer implied that this field can
be mutated after the journal is created. In it's place, use an extended
""constructor"" NewCSIVolumeJournalWithNamespace that takes a namespace
value at create-time only.

Signed-off-by: John Mulligan <jmulligan@redhat.com>",110,28,0,0,"2018-01-08 15:47:21","854.4"
"ceph/ceph-csi","c8271fe64cb1f7036edc1b55662907afc4fcfd87","phlogistonjohn","2020-04-23 18:22:55","false","journal: move voljournal.go to a new package

This new journal package isolates journal logic from the rest of util
and helps draw bright lines between what is a generic utility function
and what is csi journal logic.

Done partly as preparation for making use of go-ceph in journal.

No functional changes are made except to update references to allow the
code to compile.

Signed-off-by: John Mulligan <jmulligan@redhat.com>",101,27,0,0,"2018-01-08 15:47:21","835.61"
"ceph/ceph-csi","e774ebb7f95be12dde7a2024303c2fc725b14ae7","nixpanic","2020-07-28 08:32:33","false","ci: detect available minikube executable

In case there is a minikube executable in the $PATH already, use that
for all commands. If there is none, install_minikube() will place a
newly downloaded executable in /usr/local/bin which will be used by the
full pathname, so that commands as root without /usr/local/bin in the
$PATH will work.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",114,31,0,1,"2018-01-08 15:47:21","930.2"
"ceph/ceph-csi","ed033153ea4eb15ed0452d7a5f35a72665e05cc6","nixpanic","2020-11-23 14:44:39","false","ci: gather logs when deploying Rook fails

Log a few commands that help troubleshooting Rook deployment issues.
This might need to get extended with more commands.

Updates: #1636
Signed-off-by: Niels de Vos <ndevos@redhat.com>",82,34,0,1,"2018-01-08 15:47:21","1045.46"
"ceph/ceph-csi","e3ea8ca0b11f023abf185f4dba87ab4f193ed0c8","nixpanic","2020-12-08 14:25:10","false","cleanup: standardize error format in util.GetTopologyFromDomainLabels()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,35,0,1,"2018-01-08 15:47:21","1061.44"
"ceph/ceph-csi","b697b9b0d93571eaf62e288c27819db44ad29218","nixpanic","2022-08-19 13:29:54","false","cleanup: replace github.com/pborman/uuid with github.com/google/uuid

The github.com/google/uuid package is used by Kubernetes, and it is part
of the vendor/ directory already. Our usage of github.com/pborman/uuid
can be replaced by github.com/google/uuid, so that
github.com/pborman/uuid can be removed as a dependency.

Closes: #3315
Signed-off-by: Niels de Vos <ndevos@redhat.com>",41,55,1,1,"2018-01-08 15:47:21","1681.9"
"ceph/ceph-csi","c4289f01e89cd3d431719293bd6883aec63a2ecd","nixpanic","2020-10-14 07:35:58","false","e2e: add k8sVersionGreaterEquals() helper to check k8s versions

Signed-off-by: Niels de Vos <ndevos@redhat.com>",75,33,0,1,"2018-01-08 15:47:21","1006.16"
"ceph/ceph-csi","9e0589cf12163b9b3162c26ef216016a0213cbcc","humblec","2020-07-23 08:48:06","false","ci: fix rook cluster version fetching

As part of https://github.com/ceph/ceph-csi/pull/1237/ there was
a patching enabled for the ceph cluster deployed, however due to
an error in the version fetching logic, the patching was not applied

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",116,30,0,1,"2018-01-08 15:47:21","925.21"
"ceph/ceph-csi","e8e92089879d84011951424995fc622502a267bd","humblec","2020-01-14 11:00:56","false","Add k8s.io/utils/exec to Gopkg.*

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",105,24,0,1,"2018-01-08 15:47:21","736.3"
"ceph/ceph-csi","4058246637a62e990efd45442747e702ca09539d","humblec","2022-01-24 13:02:51","false","rbd: unexport vaultTokenSA struct from KMS implementation

This commit unexport the vaultTokenSA from the vault KMS
implementation

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",36,49,1,1,"2018-01-08 15:47:21","1476.89"
"ceph/ceph-csi","cb7ab307dd59de4cb9f91c246a16265bbdea8fe9","nixpanic","2020-06-24 06:53:25","false","ci: disable 'testpackage' linter in golangci

The 'testpackage' linter recommends ""black box"" testing, which prevents
testing internal/non-exported functions from being tested. We have tests
that *do* test non-exported functions and types.

Disabling the linter allows us to test non-exported types and functions.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,29,0,1,"2018-01-08 15:47:21","896.13"
"ceph/ceph-csi","805f10fd7199ddf2ce457304c45f431753772090","nixpanic","2020-04-06 06:55:50","false","rbd: remove unused rbdVolume.open()

rbdVolume.open() was split from commit 5dd34732e1e while moving part of
the functionality to util.ClusterConnection. It seems that .open() is
not used anywhere at the moment, so drop it until follow-up patches
require it again.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",104,27,0,1,"2018-01-08 15:47:21","819.13"
"ceph/ceph-csi","0a046c5b6dc8840ccc16e69c85aa4ef71b5d6a91","nixpanic","2021-03-29 13:18:10","false","rbd: copy encryption configuration in CreateSnapshot

Signed-off-by: Niels de Vos <ndevos@redhat.com>",91,39,0,1,"2018-01-08 15:47:21","1176.65"
"ceph/ceph-csi","5bcd5cb928e6d5b0692d8a8be8236e5e9e0eabb5","nixpanic","2021-02-09 16:09:44","false","e2e: use secret with ""encryptionPassphrase"" for RBD tests

The e2e tests create a Secret for using with the RBD StorageClass.
However this Secret was not used, instead the Rook generated Secret was
linked in the StorageClass.

By using our own Secret from the examples, Rook should not touch it when
we make modifications. In addition, no modifications are needed for
encryption anymore, as these are included in the example.

Updates: #1795
Signed-off-by: Niels de Vos <ndevos@redhat.com>",84,37,0,1,"2018-01-08 15:47:21","1126.77"
"ceph/ceph-csi","682840476fd531f9150a1f86194ec710a00f37fe","nixpanic","2022-04-04 09:39:38","false","build: ignore generated go-tags file

The `scripts/golangci.yml.buildtags.in` file is generated from the
`Makefile`, there is no need to include it in the repository. By adding
the file to the `.gitignore` list, the output of `git status` will not
show the file anymore.

Fixes: 8fb5739f2
    ""build: more flexible handling of go build tags; added ceph_preview""
Signed-off-by: Niels de Vos <ndevos@redhat.com>",45,51,1,1,"2018-01-08 15:47:21","1547.74"
"ceph/ceph-csi","8f7016229ae26f1bedc4e1ebed94f4be5e515de4","humblec","2022-01-06 15:14:58","false","e2e: add example yamls for RWOP POD and PVC

This commit add example yamls for RBD and CephFS Pod and PVCs

RBD:
 Raw Block Volume and File Mode PVCs with RWOP accessmode
 Raw Block Volume POD and FileMode POD yamls referring RWOP PVC

CephFS:
 RWOP PVC and POD yaml referring RWOP PVC

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",44,48,1,1,"2018-01-08 15:47:21","1454.73"
"ceph/ceph-csi","c4eaf6e747efb555ee02fa5fa8867e369dd8f0a5","humblec","2021-12-21 05:38:34","false","ci: place the markdown linter rule to restrict the line length at 80

This try to enforce the markdown rule for the line length to 80

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",56,47,1,1,"2018-01-08 15:47:21","1438.33"
"ceph/ceph-csi","323cc0e3bba91208949eb9d79c09b080dde0db9e","humblec","2020-06-11 08:04:32","false","cleanup: avoid comparing errors directly

Go 1.13 contains support for error wrapping. To support wrapping,
fmt.Errorf now has a %w verb for creating wrapped errors, and three
new functions in the errors package ( errors.Unwrap, errors.Is and
errors.As) simplify unwrapping and inspecting wrapped errors.

With this change, If we currently compare errors using ==, we have to
use errors.Is instead. Example:

if err == io.ErrUnexpectedEOF

becomes

if errors.Is(err, io.ErrUnexpectedEOF)

https://tip.golang.org/doc/go1.13#error_wrapping

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",115,29,0,1,"2018-01-08 15:47:21","883.18"
"ceph/ceph-csi","9ee128123fa3635940e8ced5308586d6907d5472","riya-singhal31","2023-06-27 11:34:22","false","cleanup: correct the comment in csi-addons/rbd

Signed-off-by: riya-singhal31 <rsinghal@redhat.com>",34,66,1,0,"2018-01-08 15:47:21","1995.07"
"ceph/ceph-csi","fd5f4dbafd37010dce8f13fb335c2105caa3bc4f","nixpanic","2021-03-30 20:08:24","false","rbd: configureEncryption() in genSnapFromSnapID()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",90,39,0,1,"2018-01-08 15:47:21","1177.93"
"ceph/ceph-csi","dd29c6c06b8018ce8f9b2c50aa31ff61d5b04484","nixpanic","2020-12-16 08:52:36","false","deploy: allow rbd nodeplugin to read ConfigMaps from Tenants

Tenants can have their own ConfigMap that contains connection parameters
to the Vault Service where the PV encyption keys are located. It is
possible for a Tenant to use a different Vault Service than the one
configured by the Storage Admin who deployed Ceph-CSI.

For this, the node-plugin needs to be able to read the ConfigMap from
the Tenants namespace.

See-also: docs/design/proposals/encryption-with-vault-tokens.md
Signed-off-by: Niels de Vos <ndevos@redhat.com>",77,35,0,1,"2018-01-08 15:47:21","1068.21"
"ceph/ceph-csi","97cb1b6672b4e674902bcb27a67c1eccc3aad5dc","irq0","2022-08-02 14:09:24","false","fscrypt: Update mount info before create context

NewContextFrom{Mountpoint,Path} functions use cached
`/proc/self/mountinfo` to find mounted file systems by device ID.
Since we run fscrypt as a library in a long-lived process the cached
information is likely to be stale. Stale entries may map device IDs to
mount points of already destroyed RBDs and fail context creation.
Updating the cache beforehand prevents this.

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",40,55,1,0,"2018-01-08 15:47:21","1665.93"
"ceph/ceph-csi","69b8feec125571a1449be632463872a0a0f1f9b9","irq0","2022-10-14 17:01:47","false","e2e: Feature flag RBD fscrypt tests (default disabled)

Add test-rbd-fscrypt feature flag to e2e suite. Default disabled as
the current CI system's kernel doesn't have the required features
enabled.

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",40,57,1,0,"2018-01-08 15:47:21","1737.05"
"ceph/ceph-csi","4b435d9a123786dcb6bade712d12194d670816d8","Madhu-1","2020-09-15 07:28:40","false","ci: update mergify rules for e2e tests

as we have added v1.19.0 in CI for E2E tests and also
removed the v1.17.x from CI updating the mergify rules
for the same.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",126,32,0,1,"2018-01-08 15:47:21","977.15"
"ceph/ceph-csi","f281eba4751a82ffd91d6a8459d6f76bdd6f227c","Madhu-1","2019-12-16 09:50:29","false","Validate rbd image name in NodeExpand

Added one more validation in NodeExpand for
the volume name from the request and the image
name stored in the staging path metadata.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",103,23,0,1,"2018-01-08 15:47:21","703"
"ceph/ceph-csi","7aa53350ffebba479c01c005a07d053002a0b612","humblec","2021-06-25 12:55:46","false","e2e: reformat long lines in this package to 120 chars

We have many declarations and invocations..etc with long lines which are
very difficult to follow while doing code reading. This address the issues
in 'e2e/resize.go' files to restrict the line length to 120 chars.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",118,41,0,1,"2018-01-08 15:47:21","1262.63"
"ceph/ceph-csi","fb365005da1be708cb04502e6217e97de23efe90","Rakshith-R","2021-06-11 10:14:20","false","e2e: update e2epv.WaitOnPVandPVC() to match new parameters

Added &framework.TimeoutContext{ClaimBound: timeout, PVBound: timeout}
to parameters of function call in updated package.

Signed-off-by: Rakshith R <rar@redhat.com>",108,41,0,1,"2018-01-08 15:47:21","1248.52"
"ceph/ceph-csi","34fc1d847e99219c20017dba1de54870fcd3ac3d","humblec","2020-04-14 07:04:33","false","Changes to accommodate client-go changes and kube vendor update
to v1.18.0

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",105,27,0,1,"2018-01-08 15:47:21","826.14"
"ceph/ceph-csi","4c4879ba8b1710c13ee3b84368b1737da45acac9","humblec","2022-04-14 11:58:35","false","cleanup: remove import alias for fence library

this commit remove unneeded import alias of fence library
from the network_fence test.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",44,51,1,1,"2018-01-08 15:47:21","1556.84"
"ceph/ceph-csi","68dec02b3d210ace2af5a1366c1beb89087cee7a","rootfs","2019-02-05 15:15:18","false","skip klog init

Signed-off-by: Huamin Chen <hchen@redhat.com>",25,13,0,0,"2018-01-08 15:47:21","393.23"
"ceph/ceph-csi","151d06693884a04394cbfd6fc1709229a9fe67b0","nixpanic","2021-04-01 14:28:47","false","util: add logging when OpenEncryptedVolume() encounters an error

Signed-off-by: Niels de Vos <ndevos@redhat.com>",90,39,0,1,"2018-01-08 15:47:21","1179.7"
"ceph/ceph-csi","411bf33a3d57e28640a52c6a071b59b4d167e6b0","nixpanic","2021-11-23 08:02:26","false","ci: have Mergify label PRs for `actions/` with `ci/skip/e2e`

The matching checks the list of modified files, and if it does not
contain anything outside the `actions/` directory, the labels are
applied.

Actions are not tested with e2e, so changes can be labelled to skip
these time and resource intensive tests.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",57,46,0,1,"2018-01-08 15:47:21","1410.43"
"ceph/ceph-csi","a6c14c051f33aefa2a13c9b7f987bee48b206cff","nixpanic","2023-06-02 09:41:39","false","build: address `golint` warnings

Signed-off-by: Niels de Vos <ndevos@ibm.com>",31,65,1,1,"2018-01-08 15:47:21","1971"
"ceph/ceph-csi","8d09134125180d1fbe26df925913de20e27d93f5","nixpanic","2021-12-09 08:00:52","false","rbd: export GenVolFromVolID() for consumption by csi-addons

genVolFromVolID() is used by the CSI Controller service to create an
rbdVolume object from a CSI volume_id. This function is useful for
CSI-Addons Services as well, so rename it to GenVolFromVolID().

Signed-off-by: Niels de Vos <ndevos@redhat.com>",50,47,1,1,"2018-01-08 15:47:21","1426.43"
"ceph/ceph-csi","5a5541902514ed24ba7a6682bd8f06bfbc6825d9","irq0","2022-07-20 19:52:22","false","cephfs: Add placeholder journal fscrypt support

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",40,54,1,0,"2018-01-08 15:47:21","1653.17"
"ceph/ceph-csi","b57937661f6e430ff0863f0fd80288c16fa1efb6","Madhu-1","2023-02-13 12:20:44","false","rebase: pin dynamic-resource-allocation to v0.26.1

ping dynamic-resource-allocation
dependency to v0.26.1 as build fails sometimes
with below error message in offline builds

```
[🎩︎]mrajanna@fedora ceph-csi $]go list -mod=readonly -m all
go: k8s.io/dynamic-resource-allocation@v0.0.0:
invalid version: unknown revision v0.0.0
```

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",36,61,1,1,"2018-01-08 15:47:21","1861.11"
"ceph/ceph-csi","60c98837ca3119623e397b6c4db805e6fca905fe","riya-singhal31","2023-02-14 10:19:00","false","e2e: fix typo

Signed-off-by: riya-singhal31 <rsinghal@redhat.com>",36,61,1,0,"2018-01-08 15:47:21","1862.02"
"ceph/ceph-csi","3967e4dae92919d39c87d36334929b6b26bacef7","Madhu-1","2023-02-01 17:10:01","false","cleanup: fix static checks

fix SA1019 static check to replace
io/utils with os package and sets
with generic sets

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",32,61,1,1,"2018-01-08 15:47:21","1850.31"
"ceph/ceph-csi","c452b56285f8630b1bed415fa6004fd8ad099dee","nixpanic","2023-02-08 12:56:16","false","ci: prevent always removing `ok-to-test` label

The check for a rebase always hits, but the actions for that inspect the
event for a real rebase. Removing the `ok-to-test` label is not suitable
in the Mergify check, as the label action does not inspect the event.
This caused the `ok-to-test` label to be removed on every Mergify
validation of the PR.

Fixes: ba68ce6 (ci: drop `ok-to-test` label when a PR is rebased)
Signed-off-by: Niels de Vos <ndevos@redhat.com>",37,61,1,1,"2018-01-08 15:47:21","1857.13"
"ceph/ceph-csi","9c8de9471e1a0cbe627cf2e075aa48d462b2ac25","Madhu-1","2023-02-01 17:06:36","false","rebase: update kubernetes to 1.26.1

update kubernetes and its dependencies
to v1.26.1

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",32,61,1,1,"2018-01-08 15:47:21","1850.31"
"ceph/ceph-csi","782f08e2f0818b3a483a05d941cd2a44098955b1","nixpanic","2022-04-25 08:29:18","false","ci: execCommandInDaemonsetPod should not return unused stdout

Signed-off-by: Niels de Vos <ndevos@redhat.com>",38,52,1,1,"2018-01-08 15:47:21","1567.7"
"ceph/ceph-csi","56d7d3cd151071a68ceca420d6804bc5aa49c4f5","anthonyeleven","2022-07-31 08:24:26","false","doc: minor cleanup

Signed-off-by: Anthony D'Atri <anthonyeleven@users.noreply.github.com>",38,55,1,0,"2018-01-08 15:47:21","1663.69"
"ceph/ceph-csi","a04a0ecc9f21bad74ca1141e1a6041e2557ee7b9","nixpanic","2022-07-26 13:28:59","false","ci: retry command in Pod on ""unable to upgrade connection"" error

Sometimes executing a command in a Pod fails with ""unable to upgrade
connection"". This is most likely a temporary situation, and retrying
hopefully reduces the number of spurious failures because of it.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",40,55,1,1,"2018-01-08 15:47:21","1658.9"
"ceph/ceph-csi","384ab42ae7fa34067685c511415aa14af06ab8af","Rakshith-R","2021-12-17 05:26:01","false","cleanup: use %q instead of %s for logging

Signed-off-by: Rakshith R <rar@redhat.com>",51,47,1,1,"2018-01-08 15:47:21","1434.32"
"ceph/ceph-csi","8de063394b102bc340700ef2c31bad11529c3bc6","Madhu-1","2022-07-25 05:00:25","false","e2e: add deadcode nolint for k8sVersionGreaterEquals

k8sVersionGreaterEquals is not used anywhere but it
will be used in future if we need to have a kubernetes
version check. adding nolint for it now to skip it
from static check.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,54,1,1,"2018-01-08 15:47:21","1657.55"
"ceph/ceph-csi","10258710215b8c9630de3b871b14abbcacea8331","takmatsu","2022-07-06 15:46:12","false","cephfs: Support mount option on nodeplugin

add mount options on nodeplugin side

Signed-off-by: takeaki-matsumoto <takeaki.matsumoto@linecorp.com>",40,54,1,0,"2018-01-08 15:47:21","1640"
"ceph/ceph-csi","1e21972956e903763d2dea45ac02482c277285c0","nixpanic","2022-04-20 14:22:28","false","ci: improve logging for `kubectl_retry` helper

Rook deployments fail quite regulary in the CI environment now. It is
not clear what the cause is, hopefully a little better logging will
guide us to the issue.

Now executing `kubectl` in a sub-shell, ensuring that the redirection of
the command lands in the right files.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",42,51,1,1,"2018-01-08 15:47:21","1562.94"
"ceph/ceph-csi","a2059d5cb240b6108bd932e30671431f2f0af334","humblec","2022-04-27 06:47:06","false","cephfs: remove nodeplugin RBAC

This commit remove the clusterRole and Binding of cephfs node plugin
as the node RBAC is not needed for CephFS.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",38,52,1,1,"2018-01-08 15:47:21","1569.62"
"ceph/ceph-csi","fcb4701a06febb8ea7da1bda07c1e74bffa10f57","nixpanic","2022-04-14 11:20:11","false","e2e: cleanup StorageClass create retry

StorageClasses are cluster resources, not namespaced; there is no need
to log the namespace of a StorageClass.

When creating a StorageClass, NotFound is not an error that will be
returned, not need to check for it.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",44,51,1,1,"2018-01-08 15:47:21","1556.81"
"ceph/ceph-csi","60442fa916d5a901014ddd44f51561e2fd7d0bbe","nixpanic","2022-04-15 14:27:28","false","e2e: use ResourceDeployer for CephFS

Signed-off-by: Niels de Vos <ndevos@redhat.com>",43,51,1,1,"2018-01-08 15:47:21","1557.94"
"ceph/ceph-csi","d5a0606c33c52cf5e85505f13c30b9ed2e32a05b","Madhu-1","2020-02-17 12:15:57","false","Migrate from dep to go module

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",108,25,0,1,"2018-01-08 15:47:21","769.35"
"ceph/ceph-csi","dccbf484a8b99579fea5a6c13d5322d81827ca4d","jisnardo","2019-12-03 08:18:59","false","fixed toYaml",99,23,0,0,"2018-01-08 15:47:21","690.94"
"ceph/ceph-csi","b488a5ae8525308ed183b803d9411193624ae197","dylanzr","2019-04-24 22:55:32","false","Fix loading data from configmaps.",56,15,0,0,"2018-01-08 15:47:21","471.55"
"ceph/ceph-csi","ba2e5cff51bdb5fe65b1370723afa8da27f38b6a","ShyamsundarR","2019-03-13 13:46:56","false","Address remenant subject reference and code style reviews

Signed-off-by: ShyamsundarR <srangana@redhat.com>",32,14,0,0,"2018-01-08 15:47:21","430.17"
"ceph/ceph-csi","684cb13c54b99f1ee2e500d58732cca177912c61","Madhu-1","2020-07-16 09:58:27","false","rbd: DisAllow CreateVoulume for missmatch volume size

If the requested volume size and the snapshot or the
parent volume from which the clone is to be created
is not equal cephcsi returns an error message.

updates #1188

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",116,30,0,1,"2018-01-08 15:47:21","918.26"
"ceph/ceph-csi","4690dc6ea72ef9b1b2223785a49fd061260f510e","Madhu-1","2020-02-25 12:15:54","false","Fix CI warning related to gosec

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",107,26,0,1,"2018-01-08 15:47:21","777.35"
"ceph/ceph-csi","e0bdea24a1a1745d12f0fd301f5be752f134022d","Madhu-1","2020-09-04 08:35:56","false","ci: update minikube to latest released version

as we need minikube 1.13 for kubernetes v1.19.0
updating minikube to the latest released version

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",125,32,0,1,"2018-01-08 15:47:21","967.2"
"ceph/ceph-csi","5208c0fc3867c5e499dfb2bc8b10c47c410cb2b7","Madhu-1","2020-07-13 02:39:19","false","cleanup: replace klog with v2

This commit replaces the klog with klog/v2
in leftover place.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",114,30,0,1,"2018-01-08 15:47:21","914.95"
"ceph/ceph-csi","7fc1bf13216dbd56ea2708645a3b9e3a02b56ab1","Madhu-1","2021-09-17 08:30:26","false","deploy: remove extra volumes from rbd plugin PSP

removed extra volume permissions from the rbd
nodeplugin PSP.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",62,44,0,1,"2018-01-08 15:47:21","1344.45"
"ceph/ceph-csi","e03c0dc4a819350a07ad024d3d50103d6fb97fc3","Madhu-1","2020-07-16 11:30:10","false","build: Fix docker permission issue during manifest create

This is a workaround to fix docker permission denied issue
during manifest create in Travis CI
`docker manifest create` fails due to permission denied
on `/etc/docker/certs.d/quay.io`
more info https://github.com/docker/for-linux/issues/396.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",116,30,0,1,"2018-01-08 15:47:21","918.32"
"ceph/ceph-csi","d7bcb4248142007c819e53c4a3fea5f44c4518be","nixpanic","2021-08-02 08:40:42","false","rebase: update libopenstorage/secrets

libopenstorage has added a new feature that makes it possible to destroy
the contents of a key/value in the Hashicorp Vault kv-v2 secrets backend.

See-also: https://github.com/libopenstorage/secrets/pull/55
Signed-off-by: Niels de Vos <ndevos@redhat.com>",119,43,0,1,"2018-01-08 15:47:21","1300.45"
"ceph/ceph-csi","7d96cafad79556eb4d4b26897c12f725f202a31e","nixpanic","2023-09-13 14:05:27","false","cephfs: enable VolumeCondition with new health-checker

The HealthChecker is configured to use the Staging path pf the volume,
with a `.csi/` subdirectory. In the future this directory could be a
directory that is not under the Published directory.

Fixes: #4219
Signed-off-by: Niels de Vos <ndevos@ibm.com>",19,68,1,1,"2018-01-08 15:47:21","2071.18"
"ceph/ceph-csi","eb70fb9fd4becbb93321f45b5567a9c11623dc8c","nixpanic","2022-04-07 15:48:02","false","e2e: add minimal tests for NFS-provisioner

The tests for the NFS-provisioner can be run by passing -deploy-nfs and
-test-nfs as parameters to the `go test` or `e2e.test` command.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",44,51,1,1,"2018-01-08 15:47:21","1551"
"ceph/ceph-csi","0a90762970fb609454456a7a2723fad0caa9a79a","wilmardo","2019-08-15 08:00:25","false","fix: Adds liveness sidecar to v1.14+ helm charts

Signed-off-by: wilmardo <info@wilmardenouden.nl>",80,19,0,0,"2018-01-08 15:47:21","581.93"
"ceph/ceph-csi","d8e3a7a778c7d9620443a6fc538ff6d0bea7453e","humblec","2021-06-28 07:59:37","false","doc: correct csi configmap name in external storage test readme

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",116,42,0,1,"2018-01-08 15:47:21","1265.43"
"ceph/ceph-csi","38d005e4e6b40ede97870df5138b8bbb23ae58e3","humblec","2020-08-04 04:03:11","false","cephfs: validate create volume request

Also add functionality to generate snap from request
and to get mon and clusterID from the request

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","937.01"
"ceph/ceph-csi","ce9fbb3474bcd182d5da3df6544fd2cf3fa08ceb","irq0","2022-05-27 18:03:32","false","rbd: Rename encryption to blockEncryption prep for fscrypt

In preparation of fscrypt support for RBD filesystems, rename block
encryption related function to include the word 'block'. Add struct
fields and IsFileEncrypted.

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",37,53,1,0,"2018-01-08 15:47:21","1600.09"
"ceph/ceph-csi","a6a1a7775eaf576163e6aa35d1a6df8f25954893","humblec","2022-04-11 09:15:13","false","doc: mention csi string in flag arguments correctly

This commit correct the csi string mention in the documentation.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",45,51,1,1,"2018-01-08 15:47:21","1553.73"
"ceph/ceph-csi","22158ebf178d09dc3c834fccdcc0f245ec39832d","Madhu-1","2020-08-12 14:35:59","false","rebase: workaround missing redirect

This fix is needed because we were hitting:
```
vbom.ml/util@v0.0.0-20180919145318-efcd4e0f9787:
unrecognized import path ""vbom.ml/util"":
reading https://vbom.ml/util?go-get=1: 503 Service Unavailable
```

Source for the workaround:
golang/dep#1169

The fix consists in simply enforcing what the redirect was supposed to
do.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",120,31,0,1,"2018-01-08 15:47:21","944.45"
"ceph/ceph-csi","419117c8c23693321fd3981125236b10c41d475e","Madhu-1","2019-02-04 05:31:43","false","install gometalinter in $GOPATH/bin
update gometalinter to stable v3.0.0

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",20,13,0,1,"2018-01-08 15:47:21","391.82"
"ceph/ceph-csi","c3cf6be6a7222e773e4f70ee070e4b580c6c0c38","nixpanic","2020-04-08 13:15:50","false","util/conn_pool: open a connection with requested user

Use the Credentials.ID in combination with the keyfile to connect to the
Ceph cluster. This makes it possible to use different users for
different tasks on the cluster.

Fixes: #904
Signed-off-by: Niels de Vos <ndevos@redhat.com>",104,27,0,1,"2018-01-08 15:47:21","821.39"
"ceph/ceph-csi","565038fdfd54443bd08f4bac39dee0f8ba4ee901","nixpanic","2020-11-05 14:29:30","false","cephfs: ignore quota when SubVolumeInfo() returns Infinite

There is a type-check on BytesQuota after calling SubVolumeInfo() to see
if the value is supported. In case no quota is configured, the value
Infinite is returned. This can not be converted to an int64, so the
original code returned an error.

It seems that attaching/mounting sometimes fails with the following
error:

    FailedMount: MountVolume.MountDevice failed for volume ""pvc-0e8fdd18-873b-4420-bd27-fa6c02a49496"" : rpc error: code = Internal desc = subvolume csi-vol-0d68d71a-1f5f-11eb-96d2-0242ac110012 has unsupported quota: infinite

By ignoring the quota of Infinite, and not setting a quota in the
Subvolume object, this problem should not happen again.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",80,34,0,1,"2018-01-08 15:47:21","1028.45"
"ceph/ceph-csi","3132130e83119f19ce79b1a80504475923c13183","Madhu-1","2019-02-04 14:11:41","false","Fix CI failure for gometalinter

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",22,13,0,1,"2018-01-08 15:47:21","392.18"
"ceph/ceph-csi","a083cb713f65762364e9251e6f9c4dc6dd263d53","Madhu-1","2019-06-18 05:56:00","false","update golang version to 1.12.x

tls.VersionTLS13 requires 1.12.x

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",79,17,0,1,"2018-01-08 15:47:21","524.84"
"ceph/ceph-csi","f1c64a2a6b7663f8668972e487c71efe319d5a73","Madhu-1","2021-09-17 08:22:52","false","deploy: remove securityContext from cephfs provisioner

we dont need securityContext for the cephfs provisioner
pod as its not doing any special operations like mounts,
selinux etc.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",62,44,0,1,"2018-01-08 15:47:21","1344.44"
"ceph/ceph-csi","eb40fbcb1855f3a6812d71b9cce39e5b0f12cd87","humblec","2022-02-09 10:54:50","false","doc: remove deprecated alpha1 reference of snapshot objects

alpha1 version is deprecated and this commit correct the
example doc and make it GAd version

Additional note: we have already moved the artifacts to v1 version.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",42,49,1,1,"2018-01-08 15:47:21","1491.8"
"ceph/ceph-csi","5cebdf1fd306588b45685e5d23c81e9a0bfa81e4","gman0","2019-02-19 14:32:06","true","Merge pull request #210 from Madhu-1/remove-check

RBD: Remove dead code",28,13,0,0,"2018-01-08 15:47:21","406.2"
"ceph/ceph-csi","bbf1d1c5b0dd2cd49ee55ad68a28c903c44fc4f4","rootfs","2018-09-19 14:37:27","true","Merge pull request #76 from rootfs/rbd-nbd

allow image registry override",7,8,0,0,"2018-01-08 15:47:21","250.95"
"ceph/ceph-csi","7d36c5a9d1434d7dbfda6e32789b3e7a8c5e7fa2","nixpanic","2021-12-08 16:39:12","false","rbd: implement CSI-Addons ControllerReclaimSpace

The CSI Controller (provisioner) can call `rbd sparsify` to reduce the
space consumption of the volume.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",50,47,1,1,"2018-01-08 15:47:21","1425.79"
"ceph/ceph-csi","1f012004a68ef3b990d047f4310da7c6e15dc26d","nixpanic","2022-03-01 10:45:37","false","util: configure tenants vaultAuthNamespace if not set

When a tenant provides a configuration that includes the
`vaultNamespace` option, the `vaultAuthNamespace` option is still taken
from the global configuration. This is not wanted in all cases, as the
`vaultAuthNamespace` option defauls to the `vaultNamespace` option which
the tenant may want to override as well.

The following behaviour is now better defined:

1. no `vaultAuthNamespace` in the global configuration:
   A tenant can override the `vaultNamespace` option and that will also
   set the `vaultAuthNamespace` option to the same value.

2. `vaultAuthNamespace` and `vaultNamespace` in the global configuration:
   When both options are set to different values in the global
   configuration, the tenant `vaultNamespace` option will not override
   the global `vaultAuthNamespace` option. The tenant can configure
   `vaultAuthNamespace` with a different value if required.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",42,50,1,1,"2018-01-08 15:47:21","1514.79"
"ceph/ceph-csi","7a18e68a6e8b5f195028e53ff51404c3a70dafc8","nixpanic","2020-05-08 14:10:18","false","rbd: add rbdVolume.open() to get access to an image

Signed-off-by: Niels de Vos <ndevos@redhat.com>",110,28,0,1,"2018-01-08 15:47:21","851.43"
"ceph/ceph-csi","157d2aff647856210b5d32b5f8e98bef76a9cfc3","nixpanic","2020-10-02 08:44:40","false","cephfs: implement getFsName() with go-ceph

Fixes: #1549
Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,33,0,1,"2018-01-08 15:47:21","995.21"
"ceph/ceph-csi","533994daff124c85d32ff55711ab95dce93a6583","nixpanic","2022-07-15 09:53:35","false","rebase: update k8s.io/mount-utils to current master

kubernetes/kubernetes#111083 has been merged and synced into
k8s.io/mount-utils. This should remove any systemd log messages while
calling NodeStageVolume and NodeGetVolumeStats.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",40,54,1,1,"2018-01-08 15:47:21","1647.75"
"ceph/ceph-csi","bc34bd389e34605885231a79c4de637fedac93e1","sngchlko","2018-07-20 08:46:44","false","support image features for csi-rbdplugin",5,6,0,0,"2018-01-08 15:47:21","191.71"
"ceph/ceph-csi","9b3096959448468078d60717bcc11bf1ce7da2e4","Yuggupta27","2020-07-25 16:39:50","false","cephfs: add upgrade testing

Upgrade testing will enable us to keep
in check the backward compatibility of
earlier releases.

Signed-off-by: Yug <yuggupta27@gmail.com>",115,30,0,0,"2018-01-08 15:47:21","927.54"
"ceph/ceph-csi","5ebc11963e8c9862ee605885ba870ff855b5902c","nixpanic","2020-06-23 12:42:08","false","ci: use CEPH_VERSION from build.env

Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,29,0,1,"2018-01-08 15:47:21","895.37"
"ceph/ceph-csi","b6ea4ecdf0c621f808e9f83e220b824f86852141","nixpanic","2020-04-28 09:50:03","false","travis: run deploy as final stage

The `deploy:` section is executed as part of each successful job. That
means the container images and Helm charts are built and pushed many
times during testing after a push/merge event.

By creating a deploy stage and listing it after the tests, it is
guaranteed to run only once after all tests have succeeded. By adding a
condition to only run the stage for push events, the images and Helm
charts should only get built+pushed after a PR has been merged.

See-also: https://docs.travis-ci.com/user/conditional-builds-stages-jobs#Specifying-conditions
Signed-off-by: Niels de Vos <ndevos@redhat.com>",104,28,0,1,"2018-01-08 15:47:21","840.25"
"ceph/ceph-csi","fa97875dc9b47fb1b4127c037f998ed3e1b1b67a","nixpanic","2022-10-12 16:23:12","false","ci: fail installing Helm if `wget` is unavailable

In case `wget` is not installed, downloading the Helm release will fail.
The `install-helm.sh` script won't return a fatal error in that case,
and CI jobs continue running in an environment that is not ready.

By adding a check that exist the script with a failure, the CI will now
correctly report a problem when Helm can not be downloaded.

See-also: #3430
Signed-off-by: Niels de Vos <ndevos@redhat.com>",39,57,1,1,"2018-01-08 15:47:21","1735.02"
"ceph/ceph-csi","b20e3fa784a0390a2ce5135550066b908e58f74d","nixpanic","2022-04-07 15:36:45","false","e2e: allow passing CephFS filesystem name on CLI

A new -filesystem=... option has been added so that the e2e tests can
run against environments that do not have a ""myfs"" CephFS filesystem.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",44,51,1,1,"2018-01-08 15:47:21","1550.99"
"ceph/ceph-csi","3111e7712a2b9b767469447785280416cba31d86","wilmardo","2019-08-16 07:41:41","false","feat: Adds Ceph logo as icon for Helm charts

Signed-off-by: wilmardo <info@wilmardenouden.nl>",80,19,0,0,"2018-01-08 15:47:21","582.91"
"ceph/ceph-csi","92884f56f4facc19fe06e05943a0e2311e01f583","ansiwen","2020-07-10 01:05:42","false","rbd: simplify error handling

This change replaces the sentinel errors in rbd module with
standard errors created with errors.New().

Related: #1203

Signed-off-by: Sven Anderson <sven@redhat.com>",112,30,0,0,"2018-01-08 15:47:21","911.89"
"ceph/ceph-csi","9fe7d1612ec58dd2d2f6f1c3645bef63aa57f83b","agarwal-mudit","2020-05-19 12:29:31","false","journal: In mount failure case, suggest to check the kernel logs

When mounting fails, the node-plugin should give a suggestion to check the
kernel logs so that users can report problems better.
Edited the existing log to include the message in both rbd and cephfs.
Fixes: https://github.com/ceph/ceph-csi/issues/1006

Signed-off-by: Mudit Agarwal <muagarwa@redhat.com>",118,28,0,0,"2018-01-08 15:47:21","861.36"
"ceph/ceph-csi","cb9ec35e3a5837fff80034e1eb5eb39142e8e8da","Rakshith-R","2022-08-15 05:02:00","false","rebase: update csi-addons/spec to latest

csi-addons/spec is updated to latest to
get replication identity capability.

Signed-off-by: Rakshith R <rar@redhat.com>",41,55,1,1,"2018-01-08 15:47:21","1677.55"
"ceph/ceph-csi","16abbbc8469b7bc046f8b2f311db5d3167ce6a18","humblec","2022-03-16 12:20:46","false","build: remove cache while building container image

Reduce size of the container image by removing the cache in deploy
and devel container.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",45,50,1,1,"2018-01-08 15:47:21","1528.86"
"ceph/ceph-csi","2d0ed298e3300b1ddfe833a6b5e7cecd7c4a7dd0","humblec","2020-01-16 09:26:51","false","Update framework imports and its functions.

Signed-off-by: Cedric Hauber <hauber.c@gmail.com>",106,24,0,1,"2018-01-08 15:47:21","738.24"
"ceph/ceph-csi","a8409eccc84e6a6b122b9c4149eca93045cc1c6c","phlogistonjohn","2020-05-21 18:59:09","false","journal: change omap remove func to handle multiple keys at once

For any function that removes more than one key on a single oid removing
them as a batch will be more efficient.

Signed-off-by: John Mulligan <jmulligan@redhat.com>",111,28,0,0,"2018-01-08 15:47:21","863.63"
"ceph/ceph-csi","fe384bccfe40597d3a54b64d5f3408f27be10130","mehdy","2020-05-28 17:08:25","false","rbd: Fix error checking mistake in CreateVolume

deleteErr should be checked if it's nil instead of err

Signed-off-by: Mehdy Khoshnoody <mehdy.khoshnoody@gmail.com>",108,29,0,0,"2018-01-08 15:47:21","870.56"
"ceph/ceph-csi","5a1e3704331e8d018785ffda62f91d0099d3f87d","nixpanic","2020-10-15 14:23:54","false","util: drop nolint comment for execCommandJSON()

golang-ci suddenly complains about the following issue

    internal/cephfs/util.go:41:1: directive `// nolint:unparam //  todo:program values has to be revisited later` is unused for linter unparam (nolintlint)
    // nolint:unparam //  todo:program values has to be revisited later
    ^

Dropping the comment completely seems to fix it. Ideally
execCommandJSON() will get removed once the migration to go-ceph is
complete.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",75,33,0,1,"2018-01-08 15:47:21","1007.44"
"ceph/ceph-csi","8f915576c4d70accb3ce7914827184e6f21abc5f","nixpanic","2022-10-12 14:42:46","false","e2e: wait for deployment before scale down/up

The scale down/up functions fail often with ""deployment not found""
errors. Possibly deploying with Podman is slower than deploying in a
minikube VM, and there is a delay for the deployment to become
available.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",40,57,1,1,"2018-01-08 15:47:21","1734.96"
"ceph/ceph-csi","e08d184984f8c77c9293808513fd176bca173b1a","nixpanic","2021-08-31 07:28:02","false","ci: ignore k8s.io/kubernetes dependencies

These dependencies are pulled in by k8s.io/kubernetes with version
v0.0.0. It is therefore required to use 'replace' in go.mod to select a
compatible version of the additional k8s.io packages.

Dependabot does not seem to update packages listed in 'replace', only
under 'require'. That means, the version updates done by Dependabot do
not have any effect, as the contents is replaced with a different
version anyway. Ignoring these packages prevents the creation of
non-functional PRs.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",106,44,0,1,"2018-01-08 15:47:21","1328.4"
"ceph/ceph-csi","c9d5bc8a086a75dc86c3f91f3d8123d073c12f9c","nixpanic","2020-06-25 08:35:19","false","cleanup: use errors.As() in e2e/utils

See-also: https://github.com/golang/go/wiki/ErrorValueFAQ#how-should-i-change-my-error-handling-code-to-work-with-the-new-features
Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,29,0,1,"2018-01-08 15:47:21","897.2"
"ceph/ceph-csi","f8a08ada6d9bb670ff4dc8d0a2629836f063d863","nixpanic","2021-06-17 08:07:08","false","rebase: update google.golang.org/grpc to latest version

Signed-off-by: Niels de Vos <ndevos@redhat.com>",113,41,0,1,"2018-01-08 15:47:21","1254.43"
"ceph/ceph-csi","12958d0a9a0dca7e787a4ea959289ec517db301c","gman0","2018-08-28 08:13:53","false","cephfs/cephuser: fixed getCephUser

output from `ceph auth -f json get` contains non-JSON data in the beginning
workaround for this is searching for the start of valid JSON data (starts with ""[{"")
and start reading from there",7,8,0,0,"2018-01-08 15:47:21","229.69"
"ceph/ceph-csi","eb8c1cd5ab5fcb955210cc882847cee35e34db14","Rakshith-R","2021-08-09 06:22:07","false","ci: use kubectl_retry in install_helm.sh script

Signed-off-by: Rakshith R <rar@redhat.com>",121,43,0,1,"2018-01-08 15:47:21","1306.36"
"ceph/ceph-csi","8f07c9efcc5132051667ae6333b8c0dfb9026dd9","Madhu-1","2019-03-04 04:10:44","false","remove unused param from function

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",33,14,0,1,"2018-01-08 15:47:21","421.77"
"ceph/ceph-csi","8a479d3865d76e7a74ac29a4152b278e1b5dbc22","Madhu-1","2022-01-25 06:24:49","false","deploy: use osd as failureDomain for ec pool

in Rook 1.8 templates the failureDomain is
set to host for ec pools, as we are using
single node minikube cluster, setting the
failureDomain for osd.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",36,49,1,1,"2018-01-08 15:47:21","1477.61"
"ceph/ceph-csi","7966d2e5c127b2d716732fa7cacf2b90d5921e9a","Madhu-1","2021-06-17 06:15:29","false","rbd: add validation for thick restore/clone

added validation to allow only Restore of Thick PVC
snapshot to a thick clone and creation of thick clone
from thick PVC.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",110,41,0,1,"2018-01-08 15:47:21","1254.35"
"ceph/ceph-csi","0b6322afda0cd173bb36be241d29c0f7719365d6","Madhu-1","2021-08-04 12:13:01","false","ci: update mergify for commitlint

updated commitlint mergify rules to
consider the commitlint status to
merge the PR.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",120,43,0,1,"2018-01-08 15:47:21","1302.6"
"ceph/ceph-csi","edcb2b529b0c58b924fb1ab54dc944ee9a9614f1","Madhu-1","2021-12-20 15:14:28","false","rbd: move core fields to rbdImage struct

moved ParentName, ParentPool and ImageFeatureSet
fields to the rbdImage struct as these are the
first citizens on the rbdImage.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",57,47,1,1,"2018-01-08 15:47:21","1437.73"
"ceph/ceph-csi","b1e86ee01c511a4343b814e937744830d0adaaf2","Madhu-1","2021-08-03 07:58:15","false","ci: disable commitlint mergify rule

currently PR merging is blocked due to
commitlint issue. disabling commitlint
or the release branches now. more details at
https://github.com/ceph/ceph-csi/pull/2342

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",120,43,0,1,"2018-01-08 15:47:21","1301.42"
"ceph/ceph-csi","1018eda27a3303e853f0cce708edd93de7c6c440","Madhu-1","2019-03-04 03:46:31","false","replace gometalinter with golangci

gometalinter is being deprecated in favor of golangci.
switching to golangci in ci and make test

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",33,14,0,1,"2018-01-08 15:47:21","421.75"
"ceph/ceph-csi","5b7b5f1e3af5a6da0f829e4b7d76f0e369c4a16a","Madhu-1","2021-06-09 04:54:52","false","rebase: update go-ceph to v0.10.0

This commit updates the go-ceph to latest
release. More details about release at
https://github.com/ceph/go-ceph/releases/tag/v0.10.0

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",110,41,0,1,"2018-01-08 15:47:21","1246.3"
"ceph/ceph-csi","66eb3b7525f45b33bc91ebb2e8f5c870a61339da","Madhu-1","2020-11-30 10:17:48","false","cephfs: handle invalid error in fs resize

go ceph returns NotImplementedError for invalid
commands,cephcsi is using errors.As to find out
the error.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",85,35,0,1,"2018-01-08 15:47:21","1052.27"
"ceph/ceph-csi","fbe090065d9834b83eb3f44b419ad4590d3d2581","Madhu-1","2020-08-11 12:27:18","false","cephfs: replace Errorf with ErrorLog in purgeVolume

replace Errorf with ErrorLog in purgeVolume
for context based logging

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.36"
"ceph/ceph-csi","0bcaffc4332571396fda65cf677f9918964c5024","Madhu-1","2021-12-10 05:33:40","false","ci: remove release-v3.3 rules

as we are no longer supporting
the release 3.3.x removing the
mergify rules for the same.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",49,47,1,1,"2018-01-08 15:47:21","1427.32"
"ceph/ceph-csi","c0745486a765dcbadec7d458c85c4a16936d37f5","Madhu-1","2019-03-04 03:02:01","false","add event rules for provisioner

Fixes: #https://github.com/ceph/ceph-csi/pull/234#issuecomment-468967752

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",33,14,0,1,"2018-01-08 15:47:21","421.72"
"ceph/ceph-csi","54845b63c088c98558d209961b347c9bd399782a","humblec","2021-04-15 10:53:39","false","cleanup: better or corrected variable name in grpc prometheous code

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",87,39,0,1,"2018-01-08 15:47:21","1192.55"
"ceph/ceph-csi","b75c562217706b82e6f8d367f05b9fc59de41811","humblec","2022-01-24 13:02:26","false","rbd: Unexport VaultTenantSA struct from KMS implementation

This commit unexport VaultTenantSA struct from KMS implemenation
of Vault KMS.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",36,49,1,1,"2018-01-08 15:47:21","1476.89"
"ceph/ceph-csi","2458ec65734a68a6d07ed10c8786d89bdf139bf8","Madhu-1","2020-07-30 08:54:15","false","rbd: return error if fetching cluster id fails

if we are not able to fetch the cluster-ID from
the createSnapshot request and also if we are
not able to get the monitor information from
the cluster-ID return error instead of using
the parent image information.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",118,31,0,1,"2018-01-08 15:47:21","932.21"
"ceph/ceph-csi","fa78c00535454461aaa355d00fdea1483460caed","Madhu-1","2019-01-17 06:18:18","false","update struct names and struct fiels

it wont be meaningful to call cephfs.NewcephfsDriver()
to get a new driver, it will be better if we call
cephfs.GetNewDriver() which returns the cephfs driver
object.

same goes for rbd also

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",16,12,0,1,"2018-01-08 15:47:21","373.85"
"ceph/ceph-csi","82d09d81cfba97eab88ce2dca6fdca71c69437be","Rakshith-R","2021-09-07 06:05:11","false","util: modify GetMonsAndClusterID() to take clusterID instead of options

This commit:
- modifies GetMonsAndClusterID() to take clusterID instead of options.
- moves out validation of clusterID is set or not out of GetMonsAndClusterID().
- defines ErrClusterIDNotSet new error for reusability.
- add GetClusterID() to obtain clusterID from options.

Signed-off-by: Rakshith R <rar@redhat.com>",66,44,0,1,"2018-01-08 15:47:21","1335.35"
"ceph/ceph-csi","d02dfe2dfe04cb698912c5f15658b8f94c5bbc35","Madhu-1","2020-02-11 08:46:21","false","Remove unwanted RBAC rules from ceph-csi

There are currently unwanted RBAC permission
is given for ceph-csi, This PR reduces removes
such unwanted RBAC resources.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",107,25,0,1,"2018-01-08 15:47:21","763.21"
"ceph/ceph-csi","f45ad230a2a6ad75a74a51dc402db9584ba29962","Madhu-1","2020-08-11 11:29:54","false","cephfs: replace klog.Error with util.ErrorLog in deleteSnapshot

replace klog.Error with util.ErrorLog in deleteSnapshot
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.32"
"ceph/ceph-csi","7c96c5c567600007cf8be9f1ca38555c7059cae9","humblec","2020-01-16 09:18:56","false","Remove unused import from e2e utils

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",106,24,0,1,"2018-01-08 15:47:21","738.23"
"ceph/ceph-csi","04586dc7336cfac6fc6ee1b9d7c355d4a4b34cce","nixpanic","2020-11-16 07:32:53","false","deploy: add ""list"" operation to Vault policy

Signed-off-by: Niels de Vos <ndevos@redhat.com>",76,34,0,1,"2018-01-08 15:47:21","1038.16"
"ceph/ceph-csi","3dfe65d17c2352f90fc565546d8e41144eeceb53","nixpanic","2020-12-08 14:17:46","false","cleanup: return error type in GetCryptoPassphrase()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,35,0,1,"2018-01-08 15:47:21","1061.44"
"ceph/ceph-csi","eeec4471c5d89b0ce0fcbea5300814b479a6bbdb","nixpanic","2021-06-21 09:05:24","false","rbd: no need to create a snapshot on a thick-provisioned volume

When cloning a volume from a (CSI) snapshot, we use DeepCopy() and do
not need an RBD snapshot as source.

Suggested-by: Madhu Rajanna <madhupr007@gmail.com>
Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,41,0,1,"2018-01-08 15:47:21","1258.47"
"ceph/ceph-csi","9fd40058195c459c2d7dd355928de0f7f633f6e5","nixpanic","2020-04-24 08:53:29","false","travis: remove 'travis_wait' from deploy section

Signed-off-by: Niels de Vos <ndevos@redhat.com>",105,27,0,1,"2018-01-08 15:47:21","836.21"
"ceph/ceph-csi","290beb4dda802beaab32a20177e58ca0ac0d1121","nixpanic","2019-11-07 14:28:59","false","cephfs: add kernel version detection for mounting with client

Linux kernel 4.17.0 adds support for quota with CephFS. Without quota,
it is not possible to fullfill the requirements of the CSI Spec and
guarantee sufficient space on the filesystem for a volume. With this in
mind, usage of the kernel client is only allowed with kernel 4.17.0 or
newer.

However, some Linux vendors backport features and patches to their
Enterprise products. These kernels may have an older version, but do
support quota. One of these is the kernel that comes with RHEL-7.7.

By comparing the current running version of the Linux kernel against
known versions that support quota, we can now automatically decide to
use the kernel client, or not.

Note that this does not change the 'forcekernelclient' parameter. The
parameter is still available and can be used for kernels that are not in
the 'known to support quota list'. Or users can pass the parameter to
use a CephFS kernel client that does not support quota.

Signed-off-by: Niels de Vos <ndevos@redhat.com>
Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",93,22,0,1,"2018-01-08 15:47:21","665.2"
"ceph/ceph-csi","259839dde9a3e83917b748be6eb15d2ebd8c8549","rootfs","2019-02-08 12:21:04","true","Merge pull request #184 from Madhu-1/fix-171

Remove userID and key logging from rbd",24,13,0,0,"2018-01-08 15:47:21","396.11"
"ceph/ceph-csi","188cdd1d683dbfcca7c376112c2216fd77b78339","rootfs","2018-10-16 00:25:40","true","Merge pull request #89 from rootfs/containerized

support nsmounter when running in containerized mode",10,9,0,0,"2018-01-08 15:47:21","277.36"
"ceph/ceph-csi","69d1beeb0733cedaad7158b8046cbdc66fecefab","Yuggupta27","2021-06-24 09:30:29","false","deploy: add support to deploy storageclass and secret

Update install-helm script to accept `--deploy-sc` and
`--deploy-secret` as optional parameters when deploying
ceph-csi via helm charts.

Signed-off-by: Yug <yuggupta27@gmail.com>",117,41,0,0,"2018-01-08 15:47:21","1261.49"
"ceph/ceph-csi","cec88a7bff91d856a92a26a66f5c86a2dd391c54","irq0","2022-07-07 16:33:46","false","e2e: Add fscrypt on rbd helper

Add validation functions for fscrypt on RBD volumes

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",40,54,1,0,"2018-01-08 15:47:21","1641.03"
"ceph/ceph-csi","14276bf642880a23e1e66e172a2a0a7ef9315f45","nixpanic","2020-04-09 15:14:43","false","rbd: fallback to inline image deletion if adding it as a task fails

Fixes: #858
Signed-off-by: Niels de Vos <ndevos@redhat.com>",106,27,0,1,"2018-01-08 15:47:21","821.48"
"ceph/ceph-csi","c93217680220476e8dd2130ec9647f64efbe8931","nixpanic","2021-04-22 12:49:22","false","testing: enable nodeExpansion for k8s-storage rbd-rwo verification

Updates: #2015
Signed-off-by: Niels de Vos <ndevos@redhat.com>",84,39,0,1,"2018-01-08 15:47:21","1199.63"
"ceph/ceph-csi","ebe378c79a11a8adcbf449200428e23769b4d267","nixpanic","2020-06-17 18:34:12","false","util: trim ""\x00"" characters from the kernel version

It seems that convering the release component from the unix.Utsrelease
type leaves some trailing ""\x00"" characters.

While splitting the string to compare kernel versions, these additional
characters might prevent converting the string to an int. Strip the
additional characters before returning the string.

Note:
  ""\x00"" characters are not visible when printing to a file or screen.
  They can be seen in hex-editors, or sending the output through 'xxd'.

Fixes: #1167
Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,29,0,1,"2018-01-08 15:47:21","889.62"
"ceph/ceph-csi","14ba1498bfded74b112904c9b5aecc1f36401f9e","nixpanic","2022-06-29 13:53:55","false","util: reduce systemd related errors while mounting

There are regular reports that identify a non-error as the cause of
failures. The Kubernetes mount-utils package has detection for systemd
based environments, and if systemd is unavailable, the following error
is logged:

    Cannot run systemd-run, assuming non-systemd OS
    systemd-run output: System has not been booted with systemd as init
    system (PID 1). Can't operate.
    Failed to create bus connection: Host is down, failed with: exit status 1

Because of the `failed` and `exit status 1` error message, users might
assume that the mounting failed. This does not need to be the case. The
container-images that the Ceph-CSI projects provides, do not use
systemd, so the error will get logged with each mount attempt.

By using the newer MountSensitiveWithoutSystemd() function from the
mount-utils package where we can, the number of confusing logs get
reduced.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",43,54,1,1,"2018-01-08 15:47:21","1631.92"
"ceph/ceph-csi","66aa595e77a37c2a0d48ecd537742ca2c1d7bf1c","nixpanic","2020-10-28 14:20:41","false","cephfs: do not export internal CloneStatus type

getCloneInfo() does not need to return a full CloneStatus struct that
only has one member. Instead, it can just return the value of the single
member, so the JSON type/struct does not need to be exposed.

This makes the API for getCloneInfo() a little simpler, so it can be
replaced by a go-ceph implementation later on.

As the function does not return any of the unused attributes anymore, it
is renamed to getCloneStatu() as well.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",75,34,0,1,"2018-01-08 15:47:21","1020.44"
"ceph/ceph-csi","78c1e781beaa36f8a634bd6ce37ba28e2505b7bc","Yuggupta27","2020-08-19 12:40:42","false","doc: Add steps to set up git hook

Provide steps to install and set up
git hook locally.

Signed-off-by: Yug <yuggupta27@gmail.com>",121,31,0,0,"2018-01-08 15:47:21","951.37"
"ceph/ceph-csi","78a6de2bd06b5710f09bd1817afc2d05c5fc703e","phlogistonjohn","2020-05-11 21:21:30","false","journal: remove SetCSIDirectorySuffix to simplify journal creation

The function SetCSIDirectorySuffix was used only one per (long-lived,
gloabl) journal object. It is simpler to construct the journal objects
with this needed parameter:
1. As it is required to function and non-optional AFAICT
2. Removes the temptation to mutate global object
3. Reduces LOC with exact same functionality
4. SetCSIDirectorySuffix would not behave correctly if called a 2nd time
   anyway.

Point 4. means that if you called the function twice to change the
suffix when you previously had ""csi.volumes.alice"", you'd get
""csi.volumes.alice.bob"" instead of ""csi.volumes.bob"" what one would
expect.

Signed-off-by: John Mulligan <jmulligan@redhat.com>",107,28,0,0,"2018-01-08 15:47:21","853.73"
"ceph/ceph-csi","dd960246204dec8f9051b9daa2bf99bf0222e6dd","Madhu-1","2022-03-01 05:54:13","false","doc: remove mention of image feature dependency

avoid specifying the image feature dependencies
and add a link to rbd official document for
reference to the image feature dependencies.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",41,50,1,1,"2018-01-08 15:47:21","1514.59"
"ceph/ceph-csi","032fb228ddba3731f1d89dcadf115121cd35a7f9","Madhu-1","2020-07-02 08:48:12","false","rbd: take lock on parent image during snapshotcreate

we need to take lock on parent rbd image when
we are creating a snapshot from it, if the user
tries to delete/resize the rbd image when we are
taking snapshots,we may face issues. if the volume
lock is present on the rbd image, the user cannot
resize the rbd image nor delete the rbd image.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",110,30,0,1,"2018-01-08 15:47:21","905.21"
"ceph/ceph-csi","334f237e23ec430e0262174776a0600d81019e9c","nixpanic","2021-05-26 15:17:27","false","cleanup: move snapshot/clone/flatten into its own function

Signed-off-by: Niels de Vos <ndevos@redhat.com>",97,41,0,1,"2018-01-08 15:47:21","1233.73"
"ceph/ceph-csi","3ac6bbd87cb745b064cfcf602d0f56aab21ac3c5","Yuggupta27","2020-11-09 06:01:38","false","cephfs: Add isCloneRetryError function

The function isCloneRetryError verifies
if the clone error is `pending` or
`in-progress` error.

Co-authored-by: Madhu Rajanna <madhupr007@gmail.com>
Signed-off-by: Yug <yuggupta27@gmail.com>",81,34,0,0,"2018-01-08 15:47:21","1031.09"
"ceph/ceph-csi","e9082768b6d607ac18a90f9fc91f69b48758e466","agarwal-mudit","2020-05-29 01:36:55","false","cephfs: enhance tracevol.py script to work with cephfs

tracevol.py script traces a RBD PVC to its RADOS map, key and image.
The script is enhanced to provide the same functionality for cephfs now.

Signed-off-by: Mudit Agarwal <muagarwa@redhat.com>",108,29,0,0,"2018-01-08 15:47:21","870.91"
"ceph/ceph-csi","f7cdd5a9bd3ba83dbed140f872c603728cce095a","gman0","2018-03-20 15:25:35","false","cephfs/deploy: added more convenience scripts",2,2,0,0,"2018-01-08 15:47:21","71.98"
"ceph/ceph-csi","51d6ac6f55c1872193892a6e4e4fc6a5e60614b5","pohly","2018-12-05 13:52:10","false","rbd: refuse to create block volumes

Without this check, the driver fails one of the E2E storage tests in
Kubernetes 1.13: provisioning a block volume is expected to fail in
https://github.com/kubernetes/kubernetes/blob/e689d515f77cda51898045d626ec4070e3328194/test/e2e/storage/testsuites/volumemode.go#L329-L330",16,11,0,0,"2018-01-08 15:47:21","327.92"
"ceph/ceph-csi","46f1ab9e992da0c965fd2b4ab2ddb25accdeb11d","Madhu-1","2021-06-07 05:30:03","false","cephfs: use IsMountPoint to check mountpoint

Currently we are relaying on the error output from
the umount command we run on the nodes when mounting
the volume but we are not checking for all the error
message to verify the volume is mounted or not.
This commits uses IsMountPoint function in util
to check the mountpoint.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",109,41,0,1,"2018-01-08 15:47:21","1245.32"
"ceph/ceph-csi","76a55350aa457b13c96784be838e6114b2af5aac","Madhu-1","2020-05-05 03:48:52","false","e2e: Pass context.TODO() to kubernetes snapshot client

in external-snapshotter the client has changed we
need to pass the context to snapshot api calls.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",110,28,0,1,"2018-01-08 15:47:21","848"
"ceph/ceph-csi","2e1fc352b306e014da698cd35fb35c9a34f31250","Madhu-1","2019-06-18 07:07:11","false","Add validation of backend rbd image and snapshots

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",79,17,0,1,"2018-01-08 15:47:21","524.89"
"ceph/ceph-csi","2fe1ee5287b7f54fbc023820eac646d8efc06b0c","Madhu-1","2020-07-12 04:10:55","false","rbd: create temporary snapshot with name same as temporary clone

create temporary snapshot on the parent image same as
name as the temporary clone rbd image. Naming the snapshot
and the temporary cloned image helps to flatten the temporary
cloned images when the snapshots on the parent image exceeds
the configured maxSnapshotsOnImage.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",114,30,0,1,"2018-01-08 15:47:21","914.02"
"ceph/ceph-csi","3ddec80346f6fe6ae6da8c19adfdb92e49e41fa8","Madhu-1","2022-07-25 04:35:52","false","ci: update mergify rules for kubernetes 1.24

Updating mergify rules to consider CI run on
Kubernetes 1.24 and discard CI run on kubernetes
1.21 as we no longer need it.

updates: #3086

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,54,1,1,"2018-01-08 15:47:21","1657.53"
"ceph/ceph-csi","697ba8b5153585489552c0961fbaca2aee5190a4","Madhu-1","2022-05-30 05:12:23","false","ci: fix pylint error

fixed string format pylint error
show in the CI.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",37,53,1,1,"2018-01-08 15:47:21","1602.56"
"ceph/ceph-csi","b3664cd631ed359add691eb36c1fac212cebb12d","nixpanic","2020-04-20 09:44:20","false","go.mod: go not list grpc as direct dependency

The recent update to k8s 1.18.0 causes an issue in go.mod that gets
corrected by running `go mod verify`. grpc should be used in version
1.26, and not in the expected update 1.27.

By removing the dependency and keeping grpc in the 'replace' section,
`go mod verify` seems to be happy.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",101,27,0,1,"2018-01-08 15:47:21","832.25"
"ceph/ceph-csi","c4060b8aa25283bc022bc45dc61a3fe48d0d0a57","Rakshith-R","2021-07-05 09:16:46","false","doc: add info about `metadata` rbd volume encryption

Signed-off-by: Rakshith R <rar@redhat.com>",123,42,0,1,"2018-01-08 15:47:21","1273.48"
"ceph/ceph-csi","304462c7cc3e1b06d399a4d231c03821e7342486","Madhu-1","2023-11-08 11:40:38","false","cleanup: fix spellcheck errors

fixed spellcheck errors caught in
CI.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",4,70,1,1,"2018-01-08 15:47:21","2127.08"
"ceph/ceph-csi","60248ce8110789e9dc333db4909cc4a95a7f5abb","Madhu-1","2023-04-03 09:08:07","false","ci: remove kubernetes 1.23 from github action

Removed kubernetes 1.23 from github action
as 1.23 is not supported anymore.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",34,63,1,1,"2018-01-08 15:47:21","1911.97"
"ceph/ceph-csi","e91a59d2f948a1c81320d61f2e1a2b613a7f8183","Madhu-1","2019-02-19 06:47:40","false","RBD: Remove dead code

during volume creation we are validating
that volume name cannot be empty,removing
this check as we are not going to hit
this case

Fixes: #204

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",28,13,0,1,"2018-01-08 15:47:21","405.88"
"ceph/ceph-csi","70f954ddc0f2e4459c750ef4d19d033978cf7398","gman0","2018-03-20 15:28:09","false","vendor: applied https://github.com/kubernetes-csi/drivers/commit/e18c7cf3009fc6c5bb953bf3a80d1ecab148a1de @sbezverk",2,2,0,0,"2018-01-08 15:47:21","71.99"
"ceph/ceph-csi","f1f50e021887658d1bb9cf3245c9cfed6f52a00a","irq0","2022-09-07 15:32:10","false","fscrypt: fix metadata directory permissions

Call Mount.Setup with SingleUserWritable constant instead of 0o755,
which is silently ignored and causes the /.fscrypt/{policy,protector}/
directories to have mode 000.

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",38,56,1,0,"2018-01-08 15:47:21","1700.99"
"ceph/ceph-csi","cd24bb3f5c4703d8d73295919941e8b118cc7aa9","phlogistonjohn","2020-05-21 19:58:08","false","journal: convert journal to use new omap functions

Convert the business-logic of the journal to use the new go-ceph based
omap manipulation functions.

Signed-off-by: John Mulligan <jmulligan@redhat.com>",111,28,0,0,"2018-01-08 15:47:21","863.67"
"ceph/ceph-csi","974765a6934d46c3e76ca991aba3acaa1087bde5","gouthampacha","2019-04-17 00:26:20","false","Fix image builder in the Makefile

The binary name has a typo.",53,15,0,0,"2018-01-08 15:47:21","463.61"
"ceph/ceph-csi","f1ccc4eced70322dd824f57d0e253fe71993996d","Rakshith-R","2022-04-25 10:15:08","false","rbd: support pvc-pvc clone with different sc & encryption

This commit makes modification so as to allow pvc-pvc clone
with different storageclass having different encryption
configs.
This commit also modifies `copyEncryptionConfig()` to
include a `isEncrypted()` check within the function.

Signed-off-by: Rakshith R <rar@redhat.com>",38,52,1,1,"2018-01-08 15:47:21","1567.77"
"ceph/ceph-csi","496bcba85c8fc1b4a00b71872cb0f560036180fe","Rakshith-R","2021-08-30 04:47:45","false","rbd: move GetMappedID() to util package

This commit moves getMappedID() from rbd to util
package since it is not rbd specific and exports
it from there.

Signed-off-by: Rakshith R <rar@redhat.com>",106,44,0,1,"2018-01-08 15:47:21","1327.29"
"ceph/ceph-csi","d15ded88f558e70d2b6ca5f2f282e42adbc8fed3","Madhu-1","2020-07-10 10:44:59","false","cleanup: Remove support for Delete and Unmounting v1.1.0 PVC

as v1.0.0 is deprecated we need to remove the support
for it in the Next coming (v3.0.0) release. This PR
removes the support for the same.

closes #882

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",111,30,0,1,"2018-01-08 15:47:21","912.29"
"ceph/ceph-csi","36f99e36ca359c56407132706fc3442e56c82556","Madhu-1","2019-01-17 07:59:29","false","Fix unparam issues

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",16,12,0,1,"2018-01-08 15:47:21","373.93"
"ceph/ceph-csi","1ba160afdb4db124d1dbb081c0ecaf2096121ab2","Madhu-1","2020-11-30 10:20:07","false","cephfs: handle invalid error in subvolume info

go ceph returns NotImplementedError for invalid
commands,cephcsi is using errors.As to find out
the error.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",85,35,0,1,"2018-01-08 15:47:21","1052.27"
"ceph/ceph-csi","94fc931d44d0db3a2476e793a9c57245cc3038b8","iliul","2021-01-11 03:57:39","false","doc: remove redundant word

Signed-off-by: liulei3 <liulei3@360.cn>",82,36,0,0,"2018-01-08 15:47:21","1098.26"
"ceph/ceph-csi","b968025037ce1fa91dabffce046c279c1759998d","rootfs","2019-01-27 15:06:27","true","Merge pull request #145 from humblec/csi-v1.0

Update kube dependencies to v1.13.2 from v1.13.0",22,13,0,0,"2018-01-08 15:47:21","384.22"
"ceph/ceph-csi","5a1652e5e89a02fd702e102e7114114ce044ae89","Madhu-1","2020-08-11 12:26:34","false","cephfs: replace Errorf with ErrorLog in resizeVolume

replace Errorf with ErrorLog in resizeVolume
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.36"
"ceph/ceph-csi","7d90783f0349e8a89fefd6b1e4c4c8932bb63219","sngchlko","2018-08-09 13:06:51","false","fix nit",8,7,0,0,"2018-01-08 15:47:21","210.89"
"ceph/ceph-csi","27fa8a28b8d959f847cf64f44b236c4819b646ae","rootfs","2018-12-12 15:30:12","true","Merge pull request #108 from plnordquist/rbd-chart

Added Helm chart for RBD plugin",17,11,0,0,"2018-01-08 15:47:21","333.99"
"ceph/ceph-csi","4331960ab3a45e3c485003bb657e9fa98ed9b1a9","rootfs","2018-08-07 18:14:57","true","Merge pull request #55 from nak3/nonempty

Add nonempty option to ceph-fuse to support ReadWriteMany",8,7,0,0,"2018-01-08 15:47:21","210.1"
"ceph/ceph-csi","9b6c2117f391da20382545a957209f5d00dbd936","nixpanic","2021-02-15 09:53:25","false","rbd: set encryption passphrase on CreateVolume

Have the provisioner create the passphrase for the volume, instead of
doign it lazily at the time the volume is used for the 1st time. This
prevents potential races where pods on different nodes try to store
different passphrases at the (almost) same time.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",85,37,0,1,"2018-01-08 15:47:21","1132.5"
"ceph/ceph-csi","96bb8bfd0ebab1ef9fdef03f91f1e687d323677e","nixpanic","2021-07-08 14:47:47","false","e2e: add securityContext.runAsUser to vault-init-job

Kubelet sometimes reports the following error:

    failed to ""StartContainer"" for ""vault-init-job"" with CreateContainerConfigError: container has runAsNonRoot and image will run as root

Setting securityContext.runAsUser resolves this.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",124,42,0,1,"2018-01-08 15:47:21","1276.71"
"ceph/ceph-csi","92866f46fdaf4c8c8caaa0055ec4fd7215b08e98","nixpanic","2022-04-07 15:36:45","false","e2e: allow passing CephFS filesystem name on CLI

A new -filesystem=... option has been added so that the e2e tests can
run against environments that do not have a ""myfs"" CephFS filesystem.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",44,51,1,1,"2018-01-08 15:47:21","1550.99"
"ceph/ceph-csi","01edaf8a71c41226fa73b80d2bdfc05c3f9015f7","nixpanic","2020-03-18 08:30:02","false","move rbdVolume connection details to utils.ClusterConnection

The shared util.ClusterConnection can be used for rbd.rbdVolume and
cephfs.volumeOptions to connect to the Ceph cluster. This will then use
the shared ConnPool, and functions for obtaining connection details will
be the same across cephfs and rbd packages.

The ClusterConnection.Creds credentials are temporarily available until
all the functions have been adapted to use go-ceph and the connection
from the ConnPool.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",114,26,0,1,"2018-01-08 15:47:21","800.2"
"ceph/ceph-csi","bd6393cf764638cb1d6c29c60a836af0c73f7344","nixpanic","2020-04-18 14:59:16","false","travis: add ""make containerized-test"" job

Add the containerized test to the existing containerized-build job so
that resources are shared a little.

Both tests use a different distribution, similar to what a developer has
on their system, and production deployments on a server.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",102,27,0,1,"2018-01-08 15:47:21","830.47"
"ceph/ceph-csi","8e371f62fa7aa521388e2d74cd68b3429a94f086","gman0","2019-02-14 10:47:16","false","cephfs: ceph-fuse mimic supports passing keys via args, let's use it",27,13,0,0,"2018-01-08 15:47:21","401.04"
"ceph/ceph-csi","2f8931315a570a7183d18db6578af6803fd36783","gman0","2019-02-26 13:46:21","false","don't attempt to delete mountpoint if unmount failed",31,14,0,0,"2018-01-08 15:47:21","413.17"
"ceph/ceph-csi","25d0a1cfc0e6e98b7f04e3657798070d110fade7","nixpanic","2021-01-11 08:05:06","false","rbd: add support for block-devices in NodeGetVolumeStats()

The NodeGetVolumeStats procedure can now be used to fetch the capacity
of the RBD block-device. By default this is a thin-provisioned device,
which means that the capacity is not reserved in the Ceph cluster. This
makes it possible to over-provision the cluster.

In order to detect the amount of storage used by the RBD block-device
(when thin-provisioned), it is required to connect to the Ceph cluster.
Unfortunately, the NodeGetVolumeStats CSI procedure does not provide
enough parameters to connect to the Ceph cluster and fetch more details
about the RBD image.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",82,36,0,1,"2018-01-08 15:47:21","1098.43"
"ceph/ceph-csi","f0b2ea6a6d3b570368d7fd48bfb4993771d60f47","Madhu-1","2021-11-18 10:59:50","false","rbd: repair imageid after resync

During resync operation the local image
will get deleted and a new image is recreated
by the rbd mirroring. The new image will have
a new imageID. Once resync is completed
update the imageID in the OMAP to get the
image removed from the trash during DeleteVolume.

Before resyncing

```
sh-4.4# rbd info replicapool/csi-vol-0c25bdd3-485f-11ec-bd30-0242ac110004
rbd image 'csi-vol-0c25bdd3-485f-11ec-bd30-0242ac110004':
	size 1 GiB in 256 objects
	order 22 (4 MiB objects)
	snapshot_count: 1
	id: 1efcc6b7a769
	block_name_prefix: rbd_data.1efcc6b7a769
	format: 2
	features: layering
	op_features:
	flags:
	create_timestamp: Thu Nov 18 11:02:40 2021
	access_timestamp: Thu Nov 18 11:02:40 2021
	modify_timestamp: Thu Nov 18 11:02:40 2021
	mirroring state: enabled
	mirroring mode: snapshot
	mirroring global id: 9c4c236d-8a47-4779-b4f6-94e05da70dbd
	mirroring primary: true
```

```
sh-4.4# rados listomapvals csi.volume.0c25bdd3-485f-11ec-bd30-0242ac110004
--pool=replicapool
csi.imageid
value (12 bytes) :
00000000  31 65 66 63 63 36 62 37  61 37 36 39              |1efcc6b7a769|
0000000c

csi.imagename
value (44 bytes) :
00000000  63 73 69 2d 76 6f 6c 2d  30 63 32 35 62 64 64 33  |csi-vol-0c25bdd3|
00000010  2d 34 38 35 66 2d 31 31  65 63 2d 62 64 33 30 2d  |-485f-11ec-bd30-|
00000020  30 32 34 32 61 63 31 31  30 30 30 34              |0242ac110004|
0000002c

csi.volname
value (40 bytes) :
00000000  70 76 63 2d 32 36 38 39  33 66 30 38 2d 66 66 32  |pvc-26893f08-ff2|
00000010  62 2d 34 61 30 66 2d 61  35 63 33 2d 38 38 34 62  |b-4a0f-a5c3-884b|
00000020  37 32 30 66 66 62 32 63                           |720ffb2c|
00000028

csi.volume.owner
value (7 bytes) :
00000000  64 65 66 61 75 6c 74                              |default|
00000007
```

After Resyncing

```
sh-4.4# rbd info replicapool/csi-vol-0c25bdd3-485f-11ec-bd30-0242ac110004
rbd image 'csi-vol-0c25bdd3-485f-11ec-bd30-0242ac110004':
	size 1 GiB in 256 objects
	order 22 (4 MiB objects)
	snapshot_count: 1
	id: 10b183a48a97
	block_name_prefix: rbd_data.10b183a48a97
	format: 2
	features: layering, non-primary
	op_features:
	flags:
	create_timestamp: Thu Nov 18 11:09:39 2021
	access_timestamp: Thu Nov 18 11:09:39 2021
	modify_timestamp: Thu Nov 18 11:09:39 2021
	mirroring state: enabled
	mirroring mode: snapshot
	mirroring global id: 9c4c236d-8a47-4779-b4f6-94e05da70dbd
	mirroring primary: false

sh-4.4# rados listomapvals csi.volume.0c25bdd3-485f-11ec-bd30-0242ac110004
--pool=replicapool
csi.imageid
value (12 bytes) :
00000000  31 30 62 31 38 33 61 34  38 61 39 37              |10b183a48a97|
0000000c

csi.imagename
value (44 bytes) :
00000000  63 73 69 2d 76 6f 6c 2d  30 63 32 35 62 64 64 33  |csi-vol-0c25bdd3|
00000010  2d 34 38 35 66 2d 31 31  65 63 2d 62 64 33 30 2d  |-485f-11ec-bd30-|
00000020  30 32 34 32 61 63 31 31  30 30 30 34              |0242ac110004|
0000002c

csi.volname
value (40 bytes) :
00000000  70 76 63 2d 32 36 38 39  33 66 30 38 2d 66 66 32  |pvc-26893f08-ff2|
00000010  62 2d 34 61 30 66 2d 61  35 63 33 2d 38 38 34 62  |b-4a0f-a5c3-884b|
00000020  37 32 30 66 66 62 32 63                           |720ffb2c|
00000028

csi.volume.owner
value (7 bytes) :
00000000  64 65 66 61 75 6c 74                              |default|
00000007
```

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",55,46,0,1,"2018-01-08 15:47:21","1405.55"
"ceph/ceph-csi","0ca07e465776a656c52e9d51dddd690a292d5fd2","Madhu-1","2020-04-28 10:18:47","false","README: Update community dev stand meeting details

Updated community dev standup details in readme

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",104,28,0,1,"2018-01-08 15:47:21","840.27"
"ceph/ceph-csi","584a43dc2c1482c7f0d8cc23e2604f4205e9c4cc","Madhu-1","2021-01-28 06:14:24","false","rbd: fix issue in ENV variable check

Currently cephcsi is returning an error
if the ENV variable is set, but it should not.
This commit fixes the the POD_NAMESPACE env
variable issue and as well as the KMS_CONFIG_NAME
ENV variable.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",80,37,0,1,"2018-01-08 15:47:21","1115.35"
"ceph/ceph-csi","f526c4a5e8f214d46a49dce35dd1164e18e5024d","humblec","2021-06-25 11:08:52","false","internal: reformat long lines in internal/controller package to 120 chars

We have many declarations and invocations..etc with long lines which are
very difficult to follow while doing code reading. This address the issues
in 'internal/controller' package to restrict the line length to 120 chars.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",118,41,0,1,"2018-01-08 15:47:21","1262.56"
"ceph/ceph-csi","5763e996af2da17f7409f1a9ac88d81112dbe25c","humblec","2020-10-15 13:53:55","false","e2e: add validatePVCClone helper function

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",76,33,0,1,"2018-01-08 15:47:21","1007.42"
"ceph/ceph-csi","7bc3df2376a60a49b4cdae3f621152a87fec7a64","plnordquist","2019-01-07 16:25:40","false","Added docs for deploying rbd driver with Helm

Signed-off-by: Peter Nordquist <peter.nordquist@pnnl.gov>",16,12,0,0,"2018-01-08 15:47:21","360.03"
"ceph/ceph-csi","e16f246f83cd32702c30efcce3ee1a4aca177ae5","humblec","2019-06-07 06:07:37","true","Merge pull request #408 from humblec/validate-paths

Add staging target path validation to nodeserver",78,17,0,1,"2018-01-08 15:47:21","514.85"
"ceph/ceph-csi","053f7ee2134dd3683f9448660d5d30a51540b5f2","humblec","2021-06-28 08:28:46","false","e2e: remove passing waitgroups reference for go routines

We are unwantedly passing around waitgroups which is not required.
This address the same inside e2e/rbd_helper.go and remove the waitgroup
arg

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",116,42,0,1,"2018-01-08 15:47:21","1265.45"
"ceph/ceph-csi","3f196b5d739f0ed556f53a3e58b48850acbb9816","rootfs","2019-01-18 15:38:32","false","update cephfs doc

Signed-off-by: Huamin Chen <hchen@redhat.com>",18,12,0,0,"2018-01-08 15:47:21","375.24"
"ceph/ceph-csi","da52e8cc63348fed9595c61807bd1bcb83020b13","rootfs","2019-03-27 17:43:07","true","Merge pull request #260 from phlogistonjohn/jjm-dockercmd

makefile: use a variable to choose ""docker"" command",47,15,0,0,"2018-01-08 15:47:21","444.33"
"ceph/ceph-csi","2f6fca08622b8ddb7b6c1ba2499c6d1a3fd73b3f","nixpanic","2021-03-17 12:14:05","false","build: regenerate scripts/golangci.yml if build.env was updated

In case build.env was updated, scripts/golangci.yml needs to be
regenerated. It contains a reference to the build-tag that is used to
identify the Ceph version to link against. Failing to update the
scripts/golangci.yml configuration, may cause running tests fail.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",84,38,0,1,"2018-01-08 15:47:21","1164.6"
"ceph/ceph-csi","70f4f3d5f697a164719c5dd3ad0b41891fe022ab","nixpanic","2021-05-04 08:30:32","false","ci: drop quotes for Mergify regex matching

The matching with regexes on the `base=` configuration in Mergify does
not seem to work as intended. Possibly this is due the addtional quotes
around the regex.

Fixes: 8d7c66363 (ci: apply standard Mergify rules for release branches too)
Signed-off-by: Niels de Vos <ndevos@redhat.com>",94,40,0,1,"2018-01-08 15:47:21","1212.45"
"ceph/ceph-csi","0efe8e47110a8ac768395130517a87d8e91ef588","nixpanic","2023-07-03 08:50:28","false","build: disable ceph-iscsi repository

The ceph-iscsi repository seems to provide broken metadata or packages.
Ceph-CSI does not need to install them, so disable the repository for
now.

It seems that other repositories gave issues before too, but these
repositories were disabled after installing all available updates. For
ceph-iscsi updating fails already, so disable the repositories before
updating.

Updates: #2034
Signed-off-by: Niels de Vos <ndevos@ibm.com>",33,66,1,1,"2018-01-08 15:47:21","2001.96"
"ceph/ceph-csi","2884b0dde7e07efe242d0bf6ee49f132c05c8c58","nixpanic","2023-06-05 12:01:31","false","rebase: replace deprecated `PollImmediate()` with `PollUntilContextTimeout()

Kubernetes 1.27 deprecates `PollImmediate()`, and golangci-lint
complains about the usage of the deprecated function.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",33,65,1,1,"2018-01-08 15:47:21","1974.09"
"ceph/ceph-csi","8b8480017b11e28c37194721c205b567c423a91a","nixpanic","2021-04-09 12:04:38","false","logging: report issues in rbdImage.DEKStore API with stacks

It helps to get a stack trace when debugging issues. Certain things are
considered bugs in the code (like missing attributes in a struct), and
might cause a panic in certain occasions.

In this case, a missing string will not panic, but the behaviour will
also not be correct (DEKs getting encrypted, but unable to decrypt).
Clearly logging this as a BUG is probably better than calling panic().

Signed-off-by: Niels de Vos <ndevos@redhat.com>",87,39,0,1,"2018-01-08 15:47:21","1186.6"
"ceph/ceph-csi","ad04e0d8c43b8e142acf0cff9c7e59648b329f7b","nixpanic","2020-06-25 08:35:19","false","cleanup: use errors.As() in cephfs.checkVolExists()

See-also: https://github.com/golang/go/wiki/ErrorValueFAQ#how-should-i-change-my-error-handling-code-to-work-with-the-new-features
Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,29,0,1,"2018-01-08 15:47:21","897.2"
"ceph/ceph-csi","7f8c535c4211a4c885c9607b9f9c6350b57206c4","Madhu-1","2020-03-18 07:11:10","false","Update upgrade doc  for node hang issue

This PR updates the upgrade doc to handle the
node drain issue what we have seen in
https://github.com/ceph/ceph-csi/issues/756

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",114,26,0,1,"2018-01-08 15:47:21","800.14"
"ceph/ceph-csi","fc529f4831607ec0f7003018dd3f132c1600f88d","Madhu-1","2019-05-31 09:34:04","false","Add E2E framework

deploys rook
deploy cephfs plugin
deploy rbd plugin
create PVC/POD to test cephfs
create PVC/POD to test rbd

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",76,17,0,1,"2018-01-08 15:47:21","507.99"
"ceph/ceph-csi","72dfe6a265f1ed3b548ca765a7999618ba6bf178","Madhu-1","2020-08-11 12:18:01","false","cephfs: replace Errorf with ErrorLog in getSnapshotInfo

replace Errorf with ErrorLog in getSnapshotInfo
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.35"
"ceph/ceph-csi","075a4087d746ad31173be48f218eb014c336dc59","nixpanic","2021-07-13 14:46:57","false","e2e: mark ""etcdserver: request timed out"" errors as retryable

There are regular CI failures where etcdserver times out. These errors
seem not to get caught by any of the existing error comparing. Matching
the error by string should prevent temporary etcdserver issues now too.

Updates: #2218
Closes: #1969
Signed-off-by: Niels de Vos <ndevos@redhat.com>",122,42,0,1,"2018-01-08 15:47:21","1280.71"
"ceph/ceph-csi","fe62348cfbaad80e731033dbb6e20699eb7eed56","nixpanic","2020-08-05 14:30:47","false","util: add ClusterConnection.GetFSAdmin()

The go-ceph CephFS Admin API needs a rados.Conn to connect the Admin
interface to the Ceph cluster. As the rados.Conn is internal to the
ClusterConnection type, add GetFSAdmin() to create a new FSAdmin
instance for a specific connection.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",116,31,0,1,"2018-01-08 15:47:21","938.45"
"ceph/ceph-csi","d8e443ab491442281e567f56b5f6ff7206cb3889","nixpanic","2020-12-08 14:10:22","false","cleanup: return error type in cleanupRBDImageMetadataStash()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,35,0,1,"2018-01-08 15:47:21","1061.43"
"ceph/ceph-csi","cffec0b3f32d73b9688530bedbcdda152d0692e7","nixpanic","2021-02-25 16:26:05","false","rbd: configure the DEKStore if the configuration suggests to use metadata

NewVolumeEncryption() will return an indication that an alternative
DEKStore needs to be configured in case the KMS does not support it.

setKMS() will also set the DEKStore if needed, so renaming it to
configureEncryption() makes things clearer.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",90,38,0,1,"2018-01-08 15:47:21","1142.78"
"ceph/ceph-csi","da840a70c54242adb228b2d5729195787b11effa","Madhu-1","2021-03-31 08:20:09","false","util: avoid secret logging in GRPC Replication Request

This commit uses the helper function to avoid the
logging of secrets in Replication GRPC request.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",90,39,0,1,"2018-01-08 15:47:21","1178.44"
"ceph/ceph-csi","eefaf09adec77a003296a2abfdae84a0a805444c","nixpanic","2020-10-27 10:40:34","false","doc: add common bot commands to GitHub PR template

By placing the common bot commands and their description in the PR
template, developers are reminded on their usage. The idea comes from
the Ceph project where this is done too.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",76,33,0,1,"2018-01-08 15:47:21","1019.29"
"ceph/ceph-csi","1fcd1ed7c72cf24151e95d8428c0bb68f33f847e","nixpanic","2020-10-14 06:22:20","false","rebase: vendor ceph/go-ceph/cephfs/admin

The CephFS Admin package has been made available with go-ceph v0.6. This
will be used for provisioning and managing CephFS volumes.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",75,33,0,1,"2018-01-08 15:47:21","1006.11"
"ceph/ceph-csi","1d8cc752823ea5c26de5fae1e46c25c59f68f077","nixpanic","2020-11-04 12:56:49","false","cephfs: implement createSnapshot() with go-ceph

Signed-off-by: Niels de Vos <ndevos@redhat.com>",80,34,0,1,"2018-01-08 15:47:21","1027.38"
"ceph/ceph-csi","8e589587aea23db9eb3e238db4fc576c1b9593cf","nixpanic","2020-12-08 14:09:33","false","cleanup: return error type in stashRBDImageMetadata()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,35,0,1,"2018-01-08 15:47:21","1061.43"
"ceph/ceph-csi","4453cfce5bc815203e0f85d1c6e0c36368759e11","rootfs","2018-09-19 14:37:58","false","set dns policy in csi plugin so storage class can use mons' FQDN

Signed-off-by: Huamin Chen <hchen@redhat.com>",7,8,0,0,"2018-01-08 15:47:21","250.95"
"ceph/ceph-csi","e0e764b3a14883c50f02dc49c44b3c6895930f2a","rootfs","2019-01-23 15:05:15","false","review feedback: tune rbd provisioner rbac

Signed-off-by: Huamin Chen <hchen@redhat.com>",21,12,0,0,"2018-01-08 15:47:21","380.22"
"ceph/ceph-csi","1f6a9cabfdb74bc96bf1bb066fb2093febf4fe61","Yuggupta27","2021-03-18 11:28:23","false","rbd: verify if pool name is not empty

Validate Snapshot request to check if the
passed pool name is not empty.

Co-authored-by: Madhu Rajanna <madhupr007@gmail.com>
Signed-off-by: Yug <yuggupta27@gmail.com>",84,38,0,0,"2018-01-08 15:47:21","1165.57"
"ceph/ceph-csi","96a3aabe5a044d7c190e5797fc62ec7ee5d2c3f7","Madhu-1","2022-08-23 05:04:16","false","deploy: remove psp from cephcsi

as PSP is deprecated in kubernetes 1.21
and will be removed in kubernetes 1.25
removing the existing PSP related templates
from the repo and updated the required documents.

fixes #1988

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",41,55,1,1,"2018-01-08 15:47:21","1685.55"
"ceph/ceph-csi","7e303b6e97ba18fce00c8f05a767891b34faab85","nixpanic","2020-05-07 12:23:39","false","ci: add configuration for ""Semantic Pull Request"" bot

This configuration enforces the format of commits that are part of a
Pull Request. The title of the PR can be checked as well, that will not
be required for now.

The format of a subject of all commit messages needs to be:

    <component>: <description>

For example:

    ci: add configuration for ""Semantic Pull Request"" bot

The valid components in the commit message are listed in the
.github/semantic.yaml file as 'types'.

See-also: https://github.com/zeke/semantic-pull-requests#semantic-pull-requests
See-also: https://www.conventionalcommits.org
Signed-off-by: Niels de Vos <ndevos@redhat.com>",108,28,0,1,"2018-01-08 15:47:21","850.36"
"ceph/ceph-csi","cf6dae86e9d660a9aeb754c7ccd5efe309a3e1ce","nixpanic","2021-02-22 16:20:11","false","rbd: move encryptDevice() to a method of rbdVolume

Signed-off-by: Niels de Vos <ndevos@redhat.com>",90,37,0,1,"2018-01-08 15:47:21","1139.77"
"ceph/ceph-csi","4fcd5eb651fd8dbd1c86db5fa2482f439e00cace","rootfs","2018-08-08 14:03:16","true","Merge pull request #62 from gman0/v0.3.0-cephfs

[CSI 0.3.0 3/4] csi-cephfs 0.3.0",7,7,0,0,"2018-01-08 15:47:21","210.93"
"ceph/ceph-csi","f558f4d1a605279f4837849cba9b14408e066568","humblec","2022-05-31 07:32:58","false","helm: update external-snapshotter to v6.0.1

The extenal snapshotter has a new version which address some of the
issues in v6.0.0.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",36,53,1,1,"2018-01-08 15:47:21","1603.66"
"ceph/ceph-csi","13f16113961d0e2dcd1b86ed0bb5e0bb600eeefc","humblec","2022-02-01 15:22:56","false","deploy: correct typos in aws encryption yamls

The field name was wrong in example yaml and this correct the same

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",43,49,1,1,"2018-01-08 15:47:21","1484.98"
"ceph/ceph-csi","9aa3520c9d81ead939b3d6f6b21eb1bb1ccd23a1","humblec","2021-05-10 06:29:04","false","build: update go version to 1.16 in go.mod

Make go version latest in the repo

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",94,40,0,1,"2018-01-08 15:47:21","1217.36"
"ceph/ceph-csi","0bafa2be8cc93333ff909b1453fc3d524db67fcb","nixpanic","2020-07-02 08:31:10","false","doc: add comments to rbd error methods

Signed-off-by: Niels de Vos <ndevos@redhat.com>",110,30,0,1,"2018-01-08 15:47:21","905.2"
"ceph/ceph-csi","693aabbe1e5905c237d489e9a56596eac190d154","nixpanic","2022-02-03 07:17:47","false","e2e: use `pstree` instead of `ps` for checking rbd-nbd process

The CentOS Stream 8 base container image does not have `ps` installed.
This causes CI jobs to fail, when checking for a restarted rbd-nbd
process.

Instead of using `ps`, the `pstree` command can be used. This will add
some ASCII-tree symbols in front of the command that is logged by the
e2e tests, but that is only used for manual reviewing and does not harm
the running test.

Fixes: #2850
Signed-off-by: Niels de Vos <ndevos@redhat.com>",44,49,1,1,"2018-01-08 15:47:21","1486.65"
"ceph/ceph-csi","4dba4e3f6f65e690bb96f6ee5e4b3024aea8e5c7","Madhu-1","2021-08-26 05:26:22","false","deploy: add configmap for ceph.conf

added an example configmap for the
ceph.conf file. This allows the users to
specify different ceph configuration when
deploying cephcsi.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",116,43,0,1,"2018-01-08 15:47:21","1323.32"
"ceph/ceph-csi","eb1ef69cfbc2f510457ab32007ed786aa51db37a","nixpanic","2020-12-02 20:26:08","false","util: allow updating settings of vaultConnection

Make it possible to calle initConnection() multiple times. This enables
the VaultTokensKMS type to override global settings with options from a
per-tenant configuration.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",80,35,0,1,"2018-01-08 15:47:21","1055.69"
"ceph/ceph-csi","74d218df8db70d0ea09981fc9fe0a107258a9764","nixpanic","2021-01-22 15:20:36","false","rbd: disable rbd_discard_on_zeroed_write_same for thick-allocation

Signed-off-by: Niels de Vos <ndevos@redhat.com>",80,36,0,1,"2018-01-08 15:47:21","1109.73"
"ceph/ceph-csi","9bd91bc9d38e9fd63aea796b0dde8b456446946e","nixpanic","2020-08-12 15:03:12","false","ci: use last ""git fetch"" output to test commitlint

When running in the CI the git repository is not completely cloned. This
causes the 'commitlint' job to be unable to resolve the history of the
commits.

By using FETCH_HEAD, the last 'git fetch' output will be used.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",120,31,0,1,"2018-01-08 15:47:21","944.47"
"ceph/ceph-csi","d11266e25586db1b78f807b99eab6ccf2797047e","humblec","2020-06-11 07:54:28","false","cleanup: remove double import of csi spec from nodeserver

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",115,29,0,1,"2018-01-08 15:47:21","883.17"
"ceph/ceph-csi","6950ad468f2f8fbf709a6c51f7eeba2195dcb8b5","humblec","2019-08-14 07:53:02","false","Fix the vulnarabilities in the image.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",77,19,0,1,"2018-01-08 15:47:21","580.92"
"ceph/ceph-csi","8fddb5393157e117d29aca891a8ff8f16c0ef81b","humblec","2019-08-14 04:20:52","false","Make the kube dependency to 1.15.2

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",81,19,0,1,"2018-01-08 15:47:21","580.77"
"ceph/ceph-csi","25617929f0c311abd753f7ca5961ad34231034dc","humblec","2020-10-21 07:00:55","false","rbd: use different variable instead of builtin `cap` function

`cap` builtin function returns the capacity of a type. Its not
good practice to use this builtin function for other variable
names, removing it here

Ref# https://golang.org/pkg/builtin/#cap

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",75,33,0,1,"2018-01-08 15:47:21","1013.13"
"ceph/ceph-csi","66827facc3aec2e9ebad890f42c9126c88dfe705","humblec","2020-08-03 18:28:52","false","cephfs: make use of expand operation lock in ControllerExpandVolume

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","936.61"
"ceph/ceph-csi","419ad0dd8e84f8ee85bf90fb14e47621d681d47a","vasyl-purchel","2020-01-29 11:44:45","false","Adds per volume encryption with Vault integration

- adds proposal document for PVC encryption from PR448
- adds per-volume encription by generating encryption passphrase
  for each volume and storing it in a KMS
- adds HashiCorp Vault integration as a KMS for encryption passphrases
- avoids encrypting volume second time if it was already encrypted but
  no file system created
- avoids unnecessary checks if volume is a mapped device when encryption
  was not requested
- prevents resizing encrypted volumes (it is not currently supported)
- prevents creating snapshots from encrypted volumes to prevent attack
  on encryption key (security guard until re-encryption of volumes
  implemented)

Signed-off-by: Vasyl Purchel vasyl.purchel@workday.com
Signed-off-by: Andrea Baglioni andrea.baglioni@workday.com

Fixes #420
Fixes #744",107,25,0,0,"2018-01-08 15:47:21","751.33"
"ceph/ceph-csi","07a916b84d8cb4e9b2f4e0399f62692d985e7a89","Madhu-1","2021-04-28 07:46:00","false","rbd: mark image ready when image state is up+unknown

To recover from split brain (up+error) state the image need to be
demoted and requested for resync on site-a and then the image on site-b
should gets demoted.The volume should be marked to ready=true when the
image state on both the clusters are up+unknown because during the last
snapshot syncing the data gets copied first and then image state on the
site-a changes to up+unknown.

If the image state on both the sites are up+unknown consider that
complete data is synced as the last snapshot
gets exchanged between the clusters.

* create 10 GB of file and validate the data after resync

* Do Failover when the site-a goes down
* Force promote the image and write data in GiB
* Once the site-a comes back, Demote the image and issue resync
* Demote the image on site-b
* The status will get reflected on the other site when the last
  snapshot sync happens
* The image will go to up+unknown state. and complete data will
  be copied to site a
* Promote the image on site-a and use it

```bash
csi-vol-5633715e-a7eb-11eb-bebb-0242ac110006:
  global_id:   e7f9ec55-06ab-46cb-a1ae-784be75ed96d
  state:       up+unknown
  description: remote image demoted
  service:     a on minicluster1
  last_update: 2021-04-28 07:11:56
  peer_sites:
    name: e47e29f4-96e8-44ed-b6c6-edf15c5a91d6-rook-ceph
    state: up+unknown
    description: remote image demoted
    last_update: 2021-04-28 07:11:41
 ```

* Do Failover when the site-a goes down
* Force promote the image on site-b and write data in GiB
* Demote the image on site-b
* Once the site-a comes back, Demote the image on site-a
* The images on the both site will go to split brain state

```bash
csi-vol-37effcb5-a7f1-11eb-bebb-0242ac110006:
  global_id:   115c3df9-3d4f-4c04-93a7-531b82155ddf
  state:       up+error
  description: split-brain
  service:     a on minicluster2
  last_update: 2021-04-28 07:25:41
  peer_sites:
    name: abbda0f0-0117-4425-8cb2-deb4c853da47-rook-ceph
    state: up+error
    description: split-brain
    last_update: 2021-04-28 07:25:26
```
* Issue resync
* The images cannot be resynced because when we issue resync
  on site a the image on site-b was in demoted state
* To recover from this state (promote and then demote the
  image on site-b after sometime)

```bash
csi-vol-37effcb5-a7f1-11eb-bebb-0242ac110006:
  global_id:   115c3df9-3d4f-4c04-93a7-531b82155ddf
  state:       up+unknown
  description: remote image demoted
  service:     a on minicluster1
  last_update: 2021-04-28 07:32:56
  peer_sites:
    name: e47e29f4-96e8-44ed-b6c6-edf15c5a91d6-rook-ceph
    state: up+unknown
    description: remote image demoted
    last_update: 2021-04-28 07:32:41
```
* Once the data is copied we can see that  the image state
  is moved to up+unknown on both sites
* Promote the image on site-a and use it

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",89,40,0,1,"2018-01-08 15:47:21","1205.42"
"ceph/ceph-csi","567b2ab2800f2e7eb7c24b89a5aae381a21ca979","Madhu-1","2020-06-22 06:58:47","false","util: Rename KernelVersion to GetKernelVersion

Renames KernelVersion to GetKernelVersion for
more readibility.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",116,29,0,1,"2018-01-08 15:47:21","894.13"
"ceph/ceph-csi","379570434071aee9e5241b471c791b8fe868640d","Rakshith-R","2021-04-14 03:59:38","false","ci: update feature gates setting from minikube.sh

BlockVolume, CSIBlockVolume(GA since k8s v1.18) & VolumeSnapshotDataSource
(GA since k8s v1.20) default to true and don't need to be set to true in
feature gates setting.

Signed-off-by: Rakshith R <rar@redhat.com>",87,39,0,1,"2018-01-08 15:47:21","1191.26"
"ceph/ceph-csi","4f5e375dcf93a576d78456ab9bb1d38a806fd70b","humblec","2019-05-03 10:53:43","false","Add release process to the docs

Signed-off-by: hchiramm <hchiramm@redhat.com>",60,16,0,1,"2018-01-08 15:47:21","481.05"
"ceph/ceph-csi","49d0c238124f42538aaec99ad146b409b17f8ed0","humblec","2019-02-04 13:02:56","false","Add klog.InitFlags to main.go

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",22,13,0,1,"2018-01-08 15:47:21","392.14"
"ceph/ceph-csi","8f82a30c219e762b08efe873ce814271a785ba23","humblec","2021-06-25 11:52:34","false","internal: reformat long lines in internal/rbd package to 120 chars

We have many declarations and invocations..etc with long lines which are
very difficult to follow while doing code reading. This address the issues
in below files, and restrict the line length to 120 chars.

-internal/rbd/rbd_attach.go
-internal/rbd/rbd_journal.go
-internal/rbd/rbd_util.go
-internal/rbd/replicationcontrollerserver.go
-internal/rbd/snapshot.go

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",118,41,0,1,"2018-01-08 15:47:21","1262.59"
"ceph/ceph-csi","c9da8469add06794835dff7b366735021dab2a4d","humblec","2019-02-04 13:04:11","false","migrate cephfs code to use klog instead of glog

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",22,13,0,1,"2018-01-08 15:47:21","392.14"
"ceph/ceph-csi","2fe3f2eadfde1c5ef4a5a955e00a68003c382268","nixpanic","2021-06-17 07:31:33","false","rebase: update to CSI spec v1.5.0

Signed-off-by: Niels de Vos <ndevos@redhat.com>",112,41,0,1,"2018-01-08 15:47:21","1254.41"
"ceph/ceph-csi","3c1aff21749745eb5c253c4bd897e6ad47fe3a52","nixpanic","2020-10-26 15:03:59","false","rebase: update minikube to v1.14.1

Minikube 1.14.1 contains a fix for downloading Kubernetes binaries with
version 1.19.3 and 1.18.10. When this version of minikube is used, we
can return to passing major versions to CI jobs (1.19 and 1.18).

Updates: #1588
See-also: kubernetes/minikube#9500
Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,33,0,1,"2018-01-08 15:47:21","1018.47"
"ceph/ceph-csi","7381253ee0dbf190933e724cc8d3b83dbfc1fafd","nixpanic","2019-12-30 19:47:02","false","build: add an option to compile in a container

This makes it possible to build on any platform that supports Linux
containers. The container image used for building is created once, or on
updating the `scripts/Dockerfile.build` and is cached afterwards.

To build the executable in a container, use `make containerized-build`
and everything will be done automatically. The executable will also be
available on the usual location.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",103,24,0,1,"2018-01-08 15:47:21","717.42"
"ceph/ceph-csi","294f7b22d4cf22b192e0827010211c70a772583e","nixpanic","2020-11-04 13:36:14","false","cephfs: remove unused Credentials argument from deleteSnapshot()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",80,34,0,1,"2018-01-08 15:47:21","1027.41"
"ceph/ceph-csi","5fba89f783adfb5fba668f2c05ef00afcf2cdd07","nixpanic","2020-11-16 09:05:23","false","cleanup: use libopenstorage/secrets for Vault access

Instead of the hand-rolled Vault usage, use the libopenstorage/secrets
package that provides a nice API. The support for Vault becomes much
simpler and maintainable that way.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",76,34,0,1,"2018-01-08 15:47:21","1038.22"
"ceph/ceph-csi","b9a8d37c3d5d908f202f91f1507d6e9609ee1344","humblec","2021-12-22 05:59:09","false","rbd: enable expand operation for intree volumes

This commit enable the resize operation[1] for in-tree volumes.
new helper has been introduced here to aid the enablement or to
make it clean with existing code base.

[1] https://github.com/ceph/ceph-csi/blob/devel/docs/design/proposals/intree-migrate.md?plain=1#L66

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",53,47,1,1,"2018-01-08 15:47:21","1439.34"
"ceph/ceph-csi","381ea22641cf8f26800537c29b7d427684f79f97","nixpanic","2020-10-22 15:07:08","false","ci: create ceph-csi-config ConfigMap for external storage tests

The StorageClasses that get deployed for the Kubernetes e2e external
storage tests reference a ConfigMap that contains the connection details
for the Ceph cluster. Without this ConfigMap, Ceph-CSI will not function
correctly.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,33,0,1,"2018-01-08 15:47:21","1014.47"
"ceph/ceph-csi","0f108edc7bf8db4030c5e05ee9bf03bbb2e50692","nixpanic","2020-08-05 10:10:04","false","cephfs: connect to the Ceph Cluster with go-ceph

Add the ClusterConnection to the volumeOptions type, so that future use
of go-ceph can connect to the Ceph cluster.

Once a volumeOptions object is not needed anymore, it needs to get
destroyed to free associated resources like the ClusterConnection.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","938.27"
"ceph/ceph-csi","365fbd1ca021c477a0cc1c9fe6edb284347c0de0","nixpanic","2020-01-10 15:14:48","false","util: remove unused GetImageMeta() and SetImageMeta()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",105,24,0,1,"2018-01-08 15:47:21","732.48"
"ceph/ceph-csi","b1d05a18409c4c8c3f36cd2d16325af71ef1e4ac","nixpanic","2021-04-09 08:36:42","false","rbd: repair encryption config in case it is missing

It is possible that when a provisioner restarts after a snapshot was
cloned, but before the newly restored image had its encryption metadata
set, the new image is not marked as encrypted. This will prevent
attaching/mounting the image, as the encryption key will not be fetched,
or is not available in the DEKStore.

By actively repairing the encryption configuration when needed, this
problem should be addressed.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",87,39,0,1,"2018-01-08 15:47:21","1186.45"
"ceph/ceph-csi","36e099d9394fa6661df26a52e09ab92c638b2e13","nixpanic","2021-09-30 09:42:14","false","deploy: add API for getting OpenShift SecurityContextConstraints

This new Go module allows other projects (like Rook) to consume
deployment details (the SCC to get started) directly from Ceph-CSI.

Based-on: https://github.com/rook/rook/blob/3c93eb3/cluster/examples/kubernetes/ceph/operator-openshift.yaml#L47-L90
Signed-off-by: Niels de Vos <ndevos@redhat.com>",60,45,0,1,"2018-01-08 15:47:21","1357.5"
"ceph/ceph-csi","91774fc936240a3b58e34368c5e0a5075f5752a4","nixpanic","2020-11-19 07:52:04","false","rebase: vendor dependencies for Vault API

Uses github.com/libopenstorage/secrets to communicate with Vault. This
removes the need for maintaining our own limited Vault APIs.

By adding the new dependency, several other packages got updated in the
process. Unused indirect dependencies have been removed from go.mod.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",82,34,0,1,"2018-01-08 15:47:21","1041.17"
"ceph/ceph-csi","2598300f666c95653b233383e20ab09e4349529b","riya-singhal31","2023-11-06 06:27:03","false","cephfs: add test case for ipv6 address

Signed-off-by: Riya Singhal <rsinghal@redhat.com>",5,70,1,0,"2018-01-08 15:47:21","2124.86"
"ceph/ceph-csi","5fbc153e0f849819e42bdd431106c0b6332507e5","Yuggupta27","2020-06-14 17:05:02","false","cephfs: fix IneffAssign warnings in resizeVolume()

IneffAssign warns about the two following statements:

Line 147: warning: ineffectual assignment to supported (ineffassign)
Line 148: warning: ineffectual assignment to ok (ineffassign)

Reported-by: https://goreportcard.com/report/github.com/ceph/ceph-csi
Updates: #975

Signed-off-by: Yug Gupta <ygupta@redhat.com>",115,29,0,0,"2018-01-08 15:47:21","886.55"
"ceph/ceph-csi","8ea659f0d5bf8867cafedc59d570535a5fce3338","gman0","2018-07-18 14:47:22","false","vendor update for CSI 0.3.0",3,6,0,0,"2018-01-08 15:47:21","189.96"
"ceph/ceph-csi","4273408f2a496b81b45e8aa7c84d8cf6396fd7f8","rootfs","2019-02-25 13:04:26","true","Merge pull request #216 from gman0/cachepersister-idempotency-fix

k8s metadata cache: delete shouldn't fail on NotFound errors",30,14,0,0,"2018-01-08 15:47:21","412.14"
"ceph/ceph-csi","41be151ac6f0723e80632272101093b18338938e","Yuggupta27","2020-08-04 12:49:40","false","deploy: remove vault along with driver

The created vault should also be
brought down with the driver.

Signed-off-by: Yug <yuggupta27@gmail.com>",117,31,0,0,"2018-01-08 15:47:21","937.38"
"ceph/ceph-csi","ee79b22c97adef673bbdd8201350f7086ebacc5e","nixpanic","2021-02-15 07:26:35","false","rbd: move encryption function to encryption.go

This adds internal/rbd/encryption.go which will be used to include other
encryption functionality to support additional KMS related functions. It
will work together with the shared API from internal/util/kms.go.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",84,37,0,1,"2018-01-08 15:47:21","1132.4"
"ceph/ceph-csi","18a4ce44393c92fb1b44ce7c233a4adf8bae021f","rootfs","2018-02-06 20:58:33","true","Update README.md",1,1,0,0,"2018-01-08 15:47:21","29.22"
"ceph/ceph-csi","e72ed593be13c66501746af81d9b53a36305e3d1","Rakshith-R","2022-08-16 09:48:06","false","rebase: vendor files required for kmip

Signed-off-by: Rakshith R <rar@redhat.com>",41,55,1,1,"2018-01-08 15:47:21","1678.75"
"ceph/ceph-csi","9eaa55506f7eff1d8d7c25d3140048234657519d","Rakshith-R","2021-06-25 05:02:01","false","rebase: update controller-runtime package to v0.9.2

This commit updates controller-runtime to v0.9.2 and
makes changes in persistentvolume.go to add context to
various functions and function calls made here instead of
context.TODO().

Signed-off-by: Rakshith R <rar@redhat.com>",119,41,0,1,"2018-01-08 15:47:21","1262.3"
"ceph/ceph-csi","24515b509fb2f20d9bdfbb280f7c2274738d1056","Rakshith-R","2022-05-10 09:26:22","false","nfs: add support for create & delete snapshot

This commits adds support for creation and
deletion of nfs snapshots based on cephfs.

Signed-off-by: Rakshith R <rar@redhat.com>",40,52,1,1,"2018-01-08 15:47:21","1582.74"
"ceph/ceph-csi","e0050995495278e68fc166c8ac623447cd8c8cf0","Rakshith-R","2021-04-22 08:46:43","false","cleanup: fix author in mergifyio backport conditions

All backport prs are authored by mergify[bot] not ceph-csi-bot
and there is no support for bot_account to create backport pr
currently.
Fixes: #1994

Signed-off-by: Rakshith R <rar@redhat.com>",85,39,0,1,"2018-01-08 15:47:21","1199.46"
"ceph/ceph-csi","92f663cf24c116c258a22f7fed00d19cbeea7e9d","humblec","2019-04-04 06:29:59","false","Add development-guide.md to the docs.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",47,15,0,1,"2018-01-08 15:47:21","451.86"
"ceph/ceph-csi","78968f76e85c0698c430f351ab657146332be522","yati1998","2020-10-01 08:35:28","false","doc: update snap-clone with rbd snapshot

RBD Snapshot doc was the part of the README.md file. Hence,
renamed the cephfs-snap-clone.md file to snap-clone.md file
and moved the rbd snapshot document there.

Signed-off-by: yati1998 <ypadia@redhat.com>",114,33,0,0,"2018-01-08 15:47:21","994.2"
"ceph/ceph-csi","7f13bf6c4d6744dabf587744e547eb3c7ca2b077","Rakshith-R","2021-11-23 04:20:45","false","ci: use only latest version of test status in retest action

Github's list statuses returns list of all status, possibly
containing dupicates and previously failed statuses.
Use ""UpdatedAt"" timestamp to only get the latest status
for each test.

Signed-off-by: Rakshith R <rar@redhat.com>",55,46,0,1,"2018-01-08 15:47:21","1410.27"
"ceph/ceph-csi","71ddf51544be498eee03734573b765eb04480bb9","Yuggupta27","2020-07-21 05:10:13","false","cleanup: address gomnd warnings

Direct usage of numbers should be avoided.

Issue reported:
mnd: Magic number: X, in <argument> detected (gomnd)

Signed-off-by: Yug <yuggupta27@gmail.com>",112,30,0,0,"2018-01-08 15:47:21","923.06"
"ceph/ceph-csi","e1f8b1d44a8c9d1718f169eb3c0537546fe3c6ed","nixpanic","2021-03-24 12:51:11","false","doc: add example for csi-kms-connection-details ConfigMap

Updates: #1793
Signed-off-by: Niels de Vos <ndevos@redhat.com>",88,38,0,1,"2018-01-08 15:47:21","1171.63"
"ceph/ceph-csi","6a46b8f17f3ab29d93aacd3136eff860f52651a7","nixpanic","2020-10-10 16:17:08","false","cephfs: implement getSubVolumeInfo() with go-ceph

Fixes: #1551
Signed-off-by: Niels de Vos <ndevos@redhat.com>",123,33,0,1,"2018-01-08 15:47:21","1002.52"
"ceph/ceph-csi","9201da050235508edb105adfb024d93c5ea5647b","nixpanic","2023-06-02 09:49:22","false","build: address `gofmt` warnings

Signed-off-by: Niels de Vos <ndevos@ibm.com>",31,65,1,1,"2018-01-08 15:47:21","1971"
"ceph/ceph-csi","b9b4b1e34ef4eb72e48e408dd6e40495cfe0ae24","Rakshith-R","2021-07-16 09:40:09","false","rbd: refractor RegenerateJournal() to take in volumeAttributes

This commit refractors RegenerateJournal() to take in
volumeAttributes map[string]string as argument so it
can extract required attributes internally.

Signed-off-by: Rakshith R <rar@redhat.com>",123,42,0,1,"2018-01-08 15:47:21","1283.5"
"ceph/ceph-csi","b27d6319ca8b16004ecbc00f71393821594de712","Rakshith-R","2021-07-05 08:28:33","false","e2e: add e2e for user secret based metadata encryption

This commit adds e2e for user secret based metadata encryption,
adds user-secret.yaml and makes required changes in kms-connection-details,
kms-config yamls.

Signed-off-by: Rakshith R <rar@redhat.com>",123,42,0,1,"2018-01-08 15:47:21","1273.45"
"ceph/ceph-csi","c9815e99a969ada12c8b27a10b7b2fe5e82d2ef7","Madhu-1","2019-02-27 11:08:20","false","Fix rbac issue in cephfs plugin

remove unwanted rules and update
rbac to have permission to modify
endpoints and configmaps in the
current namespace.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",31,14,0,1,"2018-01-08 15:47:21","414.06"
"ceph/ceph-csi","fdbd4877413bc96305be87bab9e80f699e9f95dc","Madhu-1","2020-10-27 05:06:05","false","ci: fix shellcheck in test-go

Fixed shellcheck in test-go script

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
Signed-off-by: Niels de Vos <ndevos@redhat.com>",75,33,0,1,"2018-01-08 15:47:21","1019.05"
"ceph/ceph-csi","497411b26c35b4dcbca799ec48d8a8c28d09d864","Madhu-1","2019-03-13 06:23:54","false","update readme to delete namespace

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",33,14,0,1,"2018-01-08 15:47:21","429.86"
"ceph/ceph-csi","2071c535fa32bc83f4189ed6dce55d2a2892371f","Madhu-1","2021-07-28 03:49:33","false","e2e: pass variadic argument to kubectl helper function

this provides caller ability to pass the arguments
like ignore-not-found=true etc when executing
the kubectl commands.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",118,43,0,1,"2018-01-08 15:47:21","1295.25"
"ceph/ceph-csi","a4dd8457350b4c4586743d78cbd5776437e618b6","gman0","2019-03-14 05:38:13","true","Merge pull request #223 from Madhu-1/fix-222-1.0

update driver name as per csi spec",33,14,0,0,"2018-01-08 15:47:21","430.83"
"ceph/ceph-csi","b19717ef99c6f742d95382be87094884d40ba598","Yuggupta27","2021-06-23 09:38:30","false","deploy: update csi-snapshotter sidecar

update csi-snapshotter sidecar to
the latest available release version.

Signed-off-by: Yug <yuggupta27@gmail.com>",118,41,0,0,"2018-01-08 15:47:21","1260.49"
"ceph/ceph-csi","b7ec0b2d6688bfa621a8cb03d8b0b4f107f79cc4","irq0","2022-03-01 14:21:46","false","doc: add proposal for CephFS fscrypt integration

Add proposal document covering key management integration
of Ceph CSI and https://github.com/google/fscrypt

Updates: #1563
Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",42,50,1,0,"2018-01-08 15:47:21","1514.94"
"ceph/ceph-csi","f3d400730e3ec184cfe981e396beb626f5adea70","humblec","2021-06-23 07:33:59","false","e2e: make use of snapshot v1 api in cephfs.go

The import name of snapshot api package has also been changed
from `vs` to `snapapi` for consistency.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",118,41,0,1,"2018-01-08 15:47:21","1260.41"
"ceph/ceph-csi","778b5e86dea04eefaf9d8e06cd50c7705e1055ef","nixpanic","2021-08-26 11:15:47","false","cleanup: move k8s functions to the util/k8s package

By placing the NewK8sClient() function in its own package, the KMS API
can be split from the ""internal/util"" package. Some of the KMS providers
use the NewK8sClient() function, and this causes circular dependencies
between ""internal/utils"" -> ""internal/kms"" -> ""internal/utils"", which
are not alowed in Go.

Updates: #852
Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,43,0,1,"2018-01-08 15:47:21","1323.56"
"ceph/ceph-csi","d26030ca5fa953691025eabdf2f871b8554463ee","nixpanic","2020-10-14 07:41:49","false","e2e: use k8sVersionGreaterEquals() for rbd tests

Signed-off-by: Niels de Vos <ndevos@redhat.com>",75,33,0,1,"2018-01-08 15:47:21","1006.16"
"ceph/ceph-csi","5522a05f59fab28b6542e96813e20919de2c2fe6","nixpanic","2020-12-21 16:05:38","false","rbd: thick-provision images on request

Write blocks of stripe-size to allocate RBD images when
Thick-Provisioning is enabled in the StorageClass.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",80,35,0,1,"2018-01-08 15:47:21","1073.51"
"ceph/ceph-csi","abdadef8bc901bc1d7ff6dbec79ceb5543e55b71","wilmardo","2019-09-25 13:15:14","false","fix: add POD_NAMESPACE to RBD provisioner deployments

Signed-off-by: wilmardo <info@wilmardenouden.nl>",86,20,0,0,"2018-01-08 15:47:21","622.14"
"ceph/ceph-csi","d1e7d1eab34054d7683411053e4b17c5f56f0e73","Madhu-1","2020-04-24 08:30:56","false","Skip saving helm to temp file

install helm directly from the script
instead of storing it in a temp file
and then executing it.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",105,27,0,1,"2018-01-08 15:47:21","836.2"
"ceph/ceph-csi","c6b4e477237f43959ffcd4f37cbfad9cb6e08934","Madhu-1","2019-04-02 11:21:42","false","add if condition for attacher

adding the condition will help us
to easily remove the attacher later.
or even we can add else condition
if we have an alternate to attacher.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",46,15,0,1,"2018-01-08 15:47:21","450.07"
"ceph/ceph-csi","2d72550a398ca5115c5ac6308ab1634a4a7a7a9d","humblec","2020-08-03 16:55:44","false","e2e: introduce writeDataInPod() to write data to an attached PVC

writeDataInPod() write data to the attached PVC using `dd` command
It leave the pod and pvc state as it is.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","936.55"
"ceph/ceph-csi","90762342a0b272bde17e95c4ef6d8ff8945c6f27","humblec","2020-08-03 17:00:27","false","e2e: introduce createCephFSSnapshotClass creation

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","936.55"
"ceph/ceph-csi","9dee064b77377c7b78fd89b5f6df2ff49e53bc0b","humblec","2020-10-19 08:15:57","false","cephfs: fix wrong error check in CreateVolume rollback action

Previously the purgeVolume error was ignored due to wrong error variable
check in the createVolume. With this change it checks on the proper error.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",76,33,0,1,"2018-01-08 15:47:21","1011.19"
"ceph/ceph-csi","134e11e26ef82c695438339c1f1cffbd48642544","humblec","2020-06-10 10:16:27","false","doc: correct PVC expansion documentation

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",115,29,0,1,"2018-01-08 15:47:21","882.27"
"ceph/ceph-csi","1f17d254077827c171d888d9e60edfd5b94984d6","clwluvw","2021-01-02 19:15:56","false","e2e: add filesystem PVC resize test for radosNamespace

Signed-off-by: Seena Fallah <seenafallah@gmail.com>",82,36,0,0,"2018-01-08 15:47:21","1085.64"
"ceph/ceph-csi","1ae2afe2087be31188566552b4152efb55d1e178","yati1998","2021-07-22 06:28:10","false","cleanup: modifies the error caused due to merged PRs

This commit modifies the error of godot, cyclop,
paralleltest linter caused due to merged PRs.

Updates: #1586

Signed-off-by: Yati Padia <ypadia@redhat.com>",119,42,0,0,"2018-01-08 15:47:21","1289.36"
"ceph/ceph-csi","95dac056f23b4e2cf037f1146683106eb22a4fe4","humblec","2022-11-11 13:31:34","false","ci: fix formatting for the interval in dependabot configuration

as per the documentation `""""` has to be mentioned for the schedule
interval value field. This commit ensures it and make it consistent.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",35,58,1,1,"2018-01-08 15:47:21","1763.91"
"ceph/ceph-csi","776cb3cdbccac8cd4c9cc826be4c192403776831","humblec","2019-04-04 05:53:46","false","Default to 2 approvals for a patch to get in.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",47,15,0,1,"2018-01-08 15:47:21","451.84"
"ceph/ceph-csi","9229e84a7737d4e99aba0a8153c31a3c709ca6f9","Madhu-1","2020-08-11 11:11:26","false","util: rename ErrorLog to ErrorLogMsg to parity

as we have 2 functions for logging. one for logging
with message and another one is for logging with
context. renamed ErrorLog to  ErrorLogMsg to log
with messages.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.31"
"ceph/ceph-csi","0ab717f06fce595011f423666704da265e35bdfd","humblec","2022-01-13 11:55:18","false","deploy: update csi-attacher to v3.4.0

This commit update the csi-attacher sidecar version to v3.4.0

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",39,48,1,1,"2018-01-08 15:47:21","1465.84"
"ceph/ceph-csi","80eb7d3fd087aa461ca0652bd1571c3845efb1cf","Madhu-1","2022-05-24 03:50:58","false","helm: update snapshotter to v6

As snapshotter v6.0.0 is released updating
snapshot to v6.0.0

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",35,52,1,1,"2018-01-08 15:47:21","1596.5"
"ceph/ceph-csi","02b8cd0b4ba2f2fa1a95d9200a54863fccee87fe","humblec","2020-07-24 14:20:51","false","dep: lift kube dependency to v0.18.6

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",115,30,0,1,"2018-01-08 15:47:21","926.44"
"ceph/ceph-csi","fdc0d8255a5b91eb2e05809c6e42ba69c7b5e9d2","Madhu-1","2019-02-18 11:30:28","false","move csi-common to ceph-csi

kubernetes/driver/csi-common is no
longer maintained.

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",28,13,0,1,"2018-01-08 15:47:21","405.07"
"ceph/ceph-csi","76a647d20e9f6218c8be161fa02a76a7383f3651","Madhu-1","2019-03-18 04:17:57","true","Merge pull request #262 from Madhu-1/fix-driver-name

Fix driver name as per CSI  spec",35,14,0,1,"2018-01-08 15:47:21","434.77"
"ceph/ceph-csi","0749315d7eae55e500d9f643d0d8dff3eaedac65","humblec","2021-06-23 07:36:12","false","e2e: make use of snapshot v1 api in utils.go

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",118,41,0,1,"2018-01-08 15:47:21","1260.41"
"ceph/ceph-csi","593b357e1d27cbfff467464fa589342feffa0ace","Madhu-1","2019-03-22 05:27:56","false","Fix yaml lint error in mergify

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,14,0,1,"2018-01-08 15:47:21","438.82"
"ceph/ceph-csi","78963737d30997a727a7465ec65f75906ef765b5","agarwal-mudit","2020-05-26 11:13:03","false","rbd: fix tracevol.py script to work with python 3.x

tracevol.py script traces a RBD PVC to its RADOS map, key and image.
It needs minor fixup in order to work with python 3.x

Signed-off-by: Mudit Agarwal <muagarwa@redhat.com>",110,29,0,0,"2018-01-08 15:47:21","868.31"
"ceph/ceph-csi","be703d1e4295c8e328ef479b57e4e97cc056dc54","nixpanic","2020-06-02 08:03:32","false","util: implement CreateObject() with go-ceph

Signed-off-by: Niels de Vos <ndevos@redhat.com>",111,29,0,1,"2018-01-08 15:47:21","875.18"
"ceph/ceph-csi","57d3183cb132215265793c47123bf87d65e3f841","nixpanic","2021-06-17 09:27:11","false","rbd: restart thick-provisioned PVC cloning after aborting

In case cloning a thick-PVC failed during DeepCopy(), the image will
exist, but have partial contents. Only when the image has the
thick-provisioned metadata set, it has completed DeepCopy().

When the metadata is missing, the image is deleted, and an error is
returned to the caller. Kubernetes will automatically retry provisioning
on the ABORTED error, and the cloning will get restarted from the
beginning.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",113,41,0,1,"2018-01-08 15:47:21","1254.49"
"ceph/ceph-csi","d941e5abacff96374a38efe3ff70aae19c33c547","nixpanic","2021-07-13 10:59:29","false","util: make parseTenantConfig() usable for modular KMSs

parseTenantConfig() only allowed configuring a defined set of options,
and KMSs were not able to re-use the implementation. Now, the function
parses the ConfigMap from the Tenants Namespace and returns a map with
options that the KMS supports.

The map that parseTenantConfig() returns can be inspected by the KMS,
and applied to the vaultTenantConnection type by calling parseConfig().

Signed-off-by: Niels de Vos <ndevos@redhat.com>",123,42,0,1,"2018-01-08 15:47:21","1280.55"
"ceph/ceph-csi","db463edeefe2094fba0f7c1d3e5fabf7ce679794","rootfs","2019-01-18 15:27:48","false","allow ceph mon stored in secret so when mon changes, cephfs driver can get latest mons and override old ones

Signed-off-by: Huamin Chen <hchen@redhat.com>",18,12,0,0,"2018-01-08 15:47:21","375.24"
"ceph/ceph-csi","7affb9289d09b777b10b7368811c0b529160102d","nixpanic","2020-07-03 07:25:39","false","ci: display a warning when GO_ARCH is not set for image-cephcsi

`make image-cephcsi` will fail when Golang is not installed. There is no
strict requirement for Golang to be available, it is only used to gather
the architecture of the OS where the image is built. It is possible to
build the image successfully with `make image-cephcsi GOARCH=amd64`.

In case Golang is not installed, GOARCH can not be detected
automatically. This will cause a failure while installing Golang in the
container image. Because the failure is not very clear, display a
warning in the case the GO_ARCH (from ${GOARCH} in the Makefile) is not
set.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",111,30,0,1,"2018-01-08 15:47:21","906.15"
"ceph/ceph-csi","9b48598fca58df7b383220b205d7ece02b8813b0","nixpanic","2020-06-24 06:15:58","false","build: document CEPH_CSI_RUN_ALL_TESTS in build.env

Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,29,0,1,"2018-01-08 15:47:21","896.1"
"ceph/ceph-csi","75b9b9fe6de15a261af13faf74abae3bfe65a045","thojkooi","2021-07-13 19:21:56","false","cleanup: fix beta apiVersion for csidriver

This change resolves a typo for installing the CSIDriver
resource in Kubernetes clusters before 1.18,
where the apiVersion is incorrect.

See also:
https://kubernetes-csi.github.io/docs/csi-driver-object.html

[ndevos: replace v1betav1 in examples with v1beta1]
Signed-off-by: Thomas Kooi <t.j.kooi@avisi.nl>",122,42,0,0,"2018-01-08 15:47:21","1280.9"
"ceph/ceph-csi","992c0817e95f901126407c9b6cbecfc135cb631f","humblec","2019-06-04 00:13:24","true","Merge pull request #396 from humblec/v1.2.0-sidecar

Promote sidecars to latest available version tags.",77,17,0,1,"2018-01-08 15:47:21","511.6"
"ceph/ceph-csi","5753325970decba624176845e980f5d6b4abdf5b","humblec","2019-06-10 08:40:24","true","Merge pull request #418 from humblec/e2e

Combine the variable section in e2e and also introuce new vars.",78,17,0,1,"2018-01-08 15:47:21","516.95"
"ceph/ceph-csi","ea806bfa732296bafdef4abac55169b3a62e7229","humblec","2022-11-11 09:23:31","false","docs: update/correct development guide

the pre-commit version in the developement guide was too outdated
which has been updated and this commit also addressed a typo.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",36,58,1,1,"2018-01-08 15:47:21","1763.73"
"ceph/ceph-csi","93f2ed681f62c3d7958ac449415f1bab09c94195","iPraveenParihar","2023-11-02 06:00:08","false","util: added RunsOnKubernetes() function

Signed-off-by: Praveen M <m.praveen@ibm.com>",20,70,1,0,"2018-01-08 15:47:21","2120.84"
"ceph/ceph-csi","1b64a0a5052ca1919a498d581e3757f67257c993","Rakshith-R","2021-09-06 12:12:25","false","ci: add support to create extra disks through minikube

Signed-off-by: Rakshith R <rar@redhat.com>",66,44,0,1,"2018-01-08 15:47:21","1334.6"
"ceph/ceph-csi","7da796dfc1c8ded3a5f76b6a509911b465beb5ad","Rakshith-R","2021-08-19 10:32:48","false","doc: add Github release badge to README.md

Signed-off-by: Rakshith R <rar@redhat.com>",116,43,0,1,"2018-01-08 15:47:21","1316.53"
"ceph/ceph-csi","961c1d12fd1637414c993aad60bdb9cbd5543c0a","Yuggupta27","2021-03-18 11:23:08","false","rbd: add support to create clone in different pool

added support to create image in different pool.
if the snapshot/rbd image exists in one pool we
can create a clone the clone of the rbd image to
a different pool.

Co-authored-by: Madhu Rajanna <madhupr007@gmail.com>
Signed-off-by: Yug <yuggupta27@gmail.com>",84,38,0,0,"2018-01-08 15:47:21","1165.57"
"ceph/ceph-csi","c93466b00965d832d8fc19c6ef28e9d77aee54c4","sngchlko","2018-08-08 05:41:45","false","Implement NodeGetInfo for csi spec 3.0",7,7,0,0,"2018-01-08 15:47:21","210.58"
"ceph/ceph-csi","2cdf5c3b9fec09ebf83695907f8ebafd3cb6edbb","Yuggupta27","2020-05-14 13:20:11","false","util: make util.ClusterInfo usable outside util package

functions like getClusterInfo() returns struct
instead of a set of strings.

Fix: #998

Signed-off-by: Yug Gupta <ygupta@redhat.com>",113,28,0,0,"2018-01-08 15:47:21","856.4"
"ceph/ceph-csi","b63b0bf18d26534078d02232a311ea7860be9421","Yuggupta27","2021-03-17 10:55:49","false","rbd: retrieve parent pool name of child image

when clones are created in different pool,we
need to retrieve the parent pool to get the
information of the parent image.

Co-authored-by: Madhu Rajanna <madhupr007@gmail.com>
Signed-off-by: Yug <yuggupta27@gmail.com>",84,38,0,0,"2018-01-08 15:47:21","1164.55"
"ceph/ceph-csi","24a17094a2c07cec6d3ca72903bbebb2aedcdf6f","nixpanic","2020-11-30 15:42:25","false","doc: multi-tenancy with Vault tokens

Design for adding a new KMS type ""VaultTokens"" that can be used to
configure a Hashicorp Vault service where each tenant has their own
personal token to manage encryptions keys for PVCs.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",83,35,0,1,"2018-01-08 15:47:21","1052.5"
"ceph/ceph-csi","a47cfbc6c88498969356099f4934d45af1ea1672","nixpanic","2020-06-25 08:42:55","false","cleanup: use errors.As() in rbdVolume.Exists() and rbd.checkSnapExists()

See-also: https://github.com/golang/go/wiki/ErrorValueFAQ#how-should-i-change-my-error-handling-code-to-work-with-the-new-features
Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,29,0,1,"2018-01-08 15:47:21","897.21"
"ceph/ceph-csi","bb60173a9839b155d67b3c6c69d94a2973022201","nixpanic","2021-08-03 09:27:12","false","e2e: add verifyKeyDestroyed() for validating `vaultDestroyKeys`

The kmsConfig type in the e2e suite has been enhanced with two functions
that make it possible to validate the destruction of deleted keys.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",120,43,0,1,"2018-01-08 15:47:21","1301.49"
"ceph/ceph-csi","b9d1f16360379f81fe422cbbedac82fd43899e46","nixpanic","2020-08-04 07:04:46","false","ci: make number of CPUs for minikube VM configurable

By default minikube uses 2 CPUs, which might be too little for some of
the tests. When not passing a CPUS environment variable, use all CPUs
available on the system (detected with 'nproc').

Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","937.14"
"ceph/ceph-csi","2c67ba1ec4832defb3f07f4fe47f4ebaf773c1d5","Madhu-1","2020-07-14 07:26:55","false","rbd: Return current depth if the image is not found

If the image in the chain is moved to trash, we
cannot get the image details. We need to return the
found depth to the caller.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",113,30,0,1,"2018-01-08 15:47:21","916.15"
"ceph/ceph-csi","9d348094250d130912ece7ad371b4dd6460c18dc","Yuggupta27","2022-01-06 12:06:00","false","rbd: add NetworkFence operation

Signed-off-by: Yug Gupta <yuggupta27@gmail.com>",46,48,1,0,"2018-01-08 15:47:21","1454.6"
"ceph/ceph-csi","dc81e001cfb89049736a351be2402e40b0d8d93b","nixpanic","2021-02-15 09:56:22","false","cleanup: remove unused MissingPassphrase error type

Storing a passphrase is now done while the volume is created. There is
no need to (re)generate a passphrase when it can not be found.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",85,37,0,1,"2018-01-08 15:47:21","1132.51"
"ceph/ceph-csi","dd668e59f17287c71bc8dcbeeb5d3f35beb9f1bc","nixpanic","2019-08-30 10:23:10","false","Address security concerns reported by 'gosec'

gosec reports several issues, none of them looks very critical. With
this change the following concerns have been addressed:

[pkg/cephfs/nodeserver.go:229] - G302: Expect file permissions to be 0600 or less (Confidence: HIGH, Severity: MEDIUM)
  > os.Chmod(targetPath, 0777)

[pkg/cephfs/util.go:39] - G204: Subprocess launched with variable (Confidence: HIGH, Severity: MEDIUM)
  > exec.Command(program, args...)

[pkg/rbd/nodeserver.go:156] - G302: Expect file permissions to be 0600 or less (Confidence: HIGH, Severity: MEDIUM)
  > os.Chmod(stagingTargetPath, 0777)

[pkg/rbd/nodeserver.go:205] - G302: Expect file permissions to be 0600 or less (Confidence: HIGH, Severity: MEDIUM)
  > os.OpenFile(mountPath, os.O_CREATE|os.O_RDWR, 0750)

[pkg/rbd/rbd_util.go:797] - G304: Potential file inclusion via variable (Confidence: HIGH, Severity: MEDIUM)
  > ioutil.ReadFile(fPath)

[pkg/util/cephcmds.go:35] - G204: Subprocess launched with variable (Confidence: HIGH, Severity: MEDIUM)
  > exec.Command(program, args...)

[pkg/util/credentials.go:47] - G104: Errors unhandled. (Confidence: HIGH, Severity: LOW)
  > os.Remove(tmpfile.Name())

[pkg/util/credentials.go:92] - G104: Errors unhandled. (Confidence: HIGH, Severity: LOW)
  > os.Remove(cr.KeyFile)

[pkg/util/pidlimit.go:74] - G304: Potential file inclusion via variable (Confidence: HIGH, Severity: MEDIUM)
  > os.Open(pidsMax)

URL: https://github.com/securego/gosec
Signed-off-by: Niels de Vos <ndevos@redhat.com>",86,20,0,1,"2018-01-08 15:47:21","597.02"
"ceph/ceph-csi","7274bd09e548aee038506e1685b2d77fbc486497","Madhu-1","2019-09-25 08:35:33","false","Fix volsize for cephfs and rbd

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",85,20,0,1,"2018-01-08 15:47:21","621.95"
"ceph/ceph-csi","27d2cc644de2fbcaa182006faafe03ef3565da3c","Madhu-1","2020-08-19 11:02:06","false","util: replace klog with util logger in liveness.go

replace klog with util logger in liveness.go

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",122,31,0,1,"2018-01-08 15:47:21","951.3"
"ceph/ceph-csi","b1a3b027415815d4840ec52220a325411a69a9ed","Madhu-1","2021-12-10 10:19:52","false","cleanup: remove k8s.io/utils from vendor

as part of running `go mod tidy` the unused
k8s.io/utils is removed from the vendor
directory.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",50,47,1,1,"2018-01-08 15:47:21","1427.52"
"ceph/ceph-csi","6b0c4129964424ce0af49b794411045d3284c663","riya-singhal31","2023-09-11 09:27:16","false","cephfs: add network fence service to identity.go

Signed-off-by: Riya Singhal <rsinghal@redhat.com>",19,68,1,0,"2018-01-08 15:47:21","2068.99"
"ceph/ceph-csi","b8e74e62c0387c3d2bc99ac3828ee78b0ae83141","riya-singhal31","2023-09-25 19:41:04","false","cephfs: adding unit test for fetchIP for client eviction

Signed-off-by: Riya Singhal <rsinghal@redhat.com>",19,68,1,0,"2018-01-08 15:47:21","2083.41"
"ceph/ceph-csi","00d6971dbd12fcdab6c79ca76f85b307b491e759","Madhu-1","2023-11-02 12:06:17","false","util: rearrange struct to fix lint

re-arrange the struct members to
fix below lint issue

```
struct of size 336 bytes could be of size 328 bytes
```

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",20,70,1,1,"2018-01-08 15:47:21","2121.1"
"ceph/ceph-csi","14b06837d0ff1e537a3f045250fc7208df7f469c","riya-singhal31","2023-09-28 19:56:05","false","cephfs: implement the logic for unfencing procedure

this commit un-blocklists the clients provided in cidr
for unfencing operation.

Signed-off-by: Riya Singhal <rsinghal@redhat.com>",19,69,1,0,"2018-01-08 15:47:21","2086.42"
"ceph/ceph-csi","9d5ee285a24ccbc33f384085dd4b4a1a36ae8caf","riya-singhal31","2023-09-11 06:20:54","false","cephfs: adds the implementation of client eviction

this commit adds client eviction to cephfs, based
on the IPs in cidr block, it evicts those IPs from
the network.

Signed-off-by: Riya Singhal <rsinghal@redhat.com>",19,68,1,0,"2018-01-08 15:47:21","2068.86"
"ceph/ceph-csi","e5d2d3eeb4e8ea28a1643bb229735841b2729816","Madhu-1","2023-10-19 07:41:17","false","util: add UnimplementedControllerServer to default

Add UnimplementedControllerServer to the default
implementation to avoid missing method
error.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",21,69,1,1,"2018-01-08 15:47:21","2106.91"
"ceph/ceph-csi","edb065bdff9b92ae27f0091f299bb9bac7ebf93d","MaGaroo","2023-10-17 21:04:30","false","doc: improve comments in StorageClass example

The comments of mkfsOptions and mountOptions are
modified to match the real behavior of the code.

Signed-off-by: Majid Garoosi <amoomajid99@gmail.com>",21,69,1,0,"2018-01-08 15:47:21","2105.47"
"ceph/ceph-csi","b0624790121f6fe2f3ba29b9ff797d873b21d5d3","Madhu-1","2023-10-19 07:53:34","false","util: remove unimplemented methods

As we are using UnimplementedControllerServer
we dont need to implement mock
methods.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",21,69,1,1,"2018-01-08 15:47:21","2106.92"
"ceph/ceph-csi","526412d6fb45d792dbabf4684f0c6ed753c94d5a","Madhu-1","2023-09-18 09:30:24","false","doc: remove unwanted steps from upgrade

removed pending unwanted steps from the
upgrade doc.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",19,68,1,1,"2018-01-08 15:47:21","2075.99"
"ceph/ceph-csi","5a0eeb882e3a2bc6b731be432995fa8725a5a167","karthik-us","2023-10-10 11:09:37","false","cephfs: Fix cephfs PVC sizing

Issue:
The RoundOffCephFSVolSize() function omits the fractional
part when calculating the size for cephfs volumes, leading
to the created volume capacity to be lesser than the requested
volume capacity.

Fix:
Consider the fractional part during the size calculation so the
rounded off volume size will be greater than or equal to the
requested volume size.

Signed-off-by: karthik-us <ksubrahm@redhat.com>
Fixes: #4179",21,69,1,0,"2018-01-08 15:47:21","2098.06"
"ceph/ceph-csi","d516a1d66d84e9fa62fc3e58d429f89205851741","Rakshith-R","2023-10-10 15:02:17","false","cephfs: safeguard subVolumeGroupCreated map from race condition

Multiple go-routines may simultaneously create the
subVolumeGroupCreated map or  write into it
for a particular group.

This commit safeguards subVolumeGroupCreated map
from concurrent creation/writes while allowing for multiple
readers.

Signed-off-by: Rakshith R <rar@redhat.com>",22,69,1,1,"2018-01-08 15:47:21","2098.22"
"ceph/ceph-csi","8edbc5c5444d2e1f3a74cc6138c0735ebc6d287a","Madhu-1","2023-10-09 11:14:46","false","ci: disable addons after cluster creation

It looks like disabling addson pre cluster
creation is not working, Moving the disable
addons to post cluster creation.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",22,69,1,1,"2018-01-08 15:47:21","2097.06"
"ceph/ceph-csi","82f1323af48512b4201b2ca973ac9063eb24b8bf","Rakshith-R","2023-10-09 06:08:04","false","cephfs: safeguard localClusterState struct from race conditions

Multiple go-routines may simultaneously check for a clusterID's
presence in clusterAdditionalInfo and create an entry if it is
absent. This set of operation needs to be serialized.

Therefore, this commit safeguards clusterAdditionalInfo map
from concurrent writes with a mutex to prevent the above problem.

Signed-off-by: Rakshith R <rar@redhat.com>",20,69,1,1,"2018-01-08 15:47:21","2096.85"
"ceph/ceph-csi","8d4b7514023e8e8f51547380272ecd34d4e929a5","Madhu-1","2023-10-09 11:23:19","false","ci: remove support for older version of Rook

As we are having latest version of Rook,
Removing the support for pretty older
version of Rook.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",21,69,1,1,"2018-01-08 15:47:21","2097.07"
"ceph/ceph-csi","7cfe1127ce0c6a60b918033c31ad2d00ff53211d","nixpanic","2023-10-10 07:37:02","false","ci: group golang.org/x/ under golang dependencies

Golang dependencies are already grouped, but they only contain packages
from `github.com/golang*`. There are more Golang standard packages that
are located at `golang.org/x/*`. Because of the tight relationship
between these packages, it is more efficient to group updates together.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",21,69,1,1,"2018-01-08 15:47:21","2097.91"
"ceph/ceph-csi","31d84b1b663bbad24ed18d6fb5dc721474a51963","Madhu-1","2023-10-09 11:26:48","false","ci: update Rook to latest release

Update the Rook to point to the
latest release as script support it.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",21,69,1,1,"2018-01-08 15:47:21","2097.07"
"ceph/ceph-csi","ccc3aae76ea1b87dd954a57b69d630736bb96018","riya-singhal31","2023-08-29 06:03:52","false","rebase: run go mod tidy and go mod vendor

Signed-off-by: Riya Singhal <rsinghal@redhat.com>",20,68,1,0,"2018-01-08 15:47:21","2056.84"
"ceph/ceph-csi","6719d6497fec33f87ef3f91ede9e8d30628ab05a","iPraveenParihar","2023-09-13 12:27:45","false","e2e: added test to verify read affinity functionality

e2e test case is added to test if read affinity is enabled by
verifying read_from_replica=localize option is passed

Signed-off-by: Praveen M <m.praveen@ibm.com>",19,68,1,0,"2018-01-08 15:47:21","2071.11"
"ceph/ceph-csi","1b20fec20d429ad0a5e85868b589261634b97354","iPraveenParihar","2023-09-07 04:14:08","false","helm: add option to enable read affinity for rbd

This commit adds --enable-read-affinity flag to
enable read affinity for rbd

Signed-off-by: Praveen M <m.praveen@ibm.com>",19,68,1,0,"2018-01-08 15:47:21","2065.77"
"ceph/ceph-csi","cf577e39afe3ab48132c13c02ba3f5ccac42eeb9","iPraveenParihar","2023-09-14 11:11:20","false","deploy: update CSI sidecars to latest versions available

Below sidecars are updated with latest available versions

csi-node-driver-registrar: v2.9.0
csi-resizer: v1.9.0
csi-provisioner: v3.6.0
csi-attacher: v4.4.0
csi-snapshotter: v6.3.0

Signed-off-by: Praveen M <m.praveen@ibm.com>",20,68,1,0,"2018-01-08 15:47:21","2072.06"
"ceph/ceph-csi","95df0791f2aa350a81c9ddc0ccac7b15b53f3133","Madhu-1","2023-09-13 08:27:56","false","doc: remove support matrix for Snapshot

As Beta CRD is not supported and also
mentioned kubernetes versions are also
not supported anymore, Removing the
details from the doc for the same reason.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",19,68,1,1,"2018-01-08 15:47:21","2070.94"
"ceph/ceph-csi","137914b0b4b2ec4a1147080a03545732609a8179","iPraveenParihar","2023-09-12 05:28:22","false","doc: add info about csi snapshot deployment

This commit includes reference to CSI snapshot CRDs
deployment guide.

Signed-off-by: Praveen M <m.praveen@ibm.com>",19,68,1,0,"2018-01-08 15:47:21","2069.82"
"ceph/ceph-csi","e1275a293122ec347c7e9f848760dfd53251e4d7","Madhu-1","2023-09-18 09:16:04","false","rebase: update k8s packages to 1.28.2

updated kubernets packages to 1.28.2

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",19,68,1,1,"2018-01-08 15:47:21","2075.98"
"ceph/ceph-csi","4eb2dbd4f2226df7c9e1b2402aaa31bbd6a27830","Rakshith-R","2023-09-07 05:10:37","false","doc: adding empty storageClassName in static pvc

we need to add `storageClassName: """"` in cephfs static pvc
similar what was done for rbd static pvc in #4010.

Signed-off-by: Rakshith R <rar@redhat.com>",19,68,1,1,"2018-01-08 15:47:21","2065.81"
"ceph/ceph-csi","32a58f4e5854581b4cf25addcbead8ec95eff6ae","Madhu-1","2023-09-13 11:09:43","false","doc: remove storageclass details for shallow volume

As shallow volumes are default for ROX pvc from
snapshot, removing the details from doc for better
clarity.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",19,68,1,1,"2018-01-08 15:47:21","2071.06"
"ceph/ceph-csi","7c0ce53eeb0d6d26e37cc3c14974b9182a38a3b2","Madhu-1","2023-08-29 09:59:16","false","doc: add design doc for QoS

Add design doc for QoS for rbd
devices mapped with both krbd
and rbd-nbd

closes: #521

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",20,68,1,1,"2018-01-08 15:47:21","2057.01"
"ceph/ceph-csi","4a8c901405497301f6e317c912ee26c85de7fca8","Madhu-1","2023-08-29 07:20:20","false","ci: use dependabot group feature

enable dependabot raising PR by groups to
reduce PR and save CI resources.
This uses the  beta groups feature of dependabot
More details here
https://docs.github.com/en/code-security/\
dependabot/dependabot-version-updates/\
configuration-options-for-the-dependabot.yml-file#groups

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",20,68,1,1,"2018-01-08 15:47:21","2056.9"
"ceph/ceph-csi","3be99d64770705f4b6bc22c717f748cae6d0e3c4","runzhliu","2023-09-02 07:15:08","false","doc: Update README.md and fix typo

Unified hump stylek

Signed-off-by: runzhliu <runzhliu@163.com>",18,68,1,0,"2018-01-08 15:47:21","2060.89"
"ceph/ceph-csi","771470d9755a32f78a98d6831d585151f2d7b6ad","Madhu-1","2023-08-30 09:13:03","false","cephfs: add support for RWX clone from ROX

Add support to create RWX clone from the
ROX clone, in ceph no subvolume clone is
created when ROX clone is created from a
snapshot just a internal ref counter is
added. This PR allows creating a RWX clone
from a ROX clone which allows users to create
RW copy of PVC where cephcsi will identify
the snapshot created for the ROX volume and
creates a subvolume from the CephFS snapshot.

updates: #3603

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",20,68,1,1,"2018-01-08 15:47:21","2057.98"
"ceph/ceph-csi","9809f365fcb6edc4b000533d547832bc8800f896","Madhu-1","2023-08-30 10:18:29","false","e2e: add e2e test for RWX from ROX

added an e2e test case to create
RWX clone from ROX and also try
to write extra data in the RWX
cloned PVC.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",19,68,1,1,"2018-01-08 15:47:21","2058.02"
"ceph/ceph-csi","683821c4073d731d85f1050d77d1f316c1bee5f8","Madhu-1","2023-09-02 07:21:35","false","rbd: discard not found error from GetMetadata

During ResyncVolume call, discard not found
error from GetMetadata API. If the image gets
resynced the local image creation time will be
lost, if the key is not present in the image
metadata then we can assume that the image is
already resynced.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",18,68,1,1,"2018-01-08 15:47:21","2060.9"
"ceph/ceph-csi","fa0be82c341fa6b619784b5e246758c50d9a945e","Madhu-1","2023-08-02 14:36:32","false","rebase: update ceph to reef

Updating ceph base image to Reef as its
the latest ceph release.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",24,67,1,1,"2018-01-08 15:47:21","2031.2"
"ceph/ceph-csi","e76e2f88b10d96606244b109bfeb9737ab1d6372","Madhu-1","2023-08-07 08:15:18","false","e2e: add --yes-i-really-mean-it for pool creation

in recent ceph version .nfs pool creation
is failing, as we are sure about creating the
pools in the e2e tests, tring to create the pool
with required extra agruments to make it successful.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",25,67,1,1,"2018-01-08 15:47:21","2035.94"
"ceph/ceph-csi","ff030f12e15a94ce8fb3ea466bcaf8d0c7354e48","Madhu-1","2023-08-24 10:16:22","false","deploy: use resizer canary image

use resizer canary image to as it
might contain fix for pvc resize
with kubernetes 1.28

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",21,67,1,1,"2018-01-08 15:47:21","2052.02"
"ceph/ceph-csi","d45bb12cc145b91febb6b6ea466ea49790cde33f","Madhu-1","2023-08-15 14:09:10","false","build: disable ganesha package in Dockerfile

disable ganesha as dnf update is
failing on Reef ceph version.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",24,67,1,1,"2018-01-08 15:47:21","2043.18"
"ceph/ceph-csi","461effe520d712aaf6e0494b2c4b36406c88d44f","Madhu-1","2023-08-21 10:35:27","false","doc: set ceph version for NFS service

specify from what ceph versions we
need to run nfs service commands and
when to skip it.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",21,67,1,1,"2018-01-08 15:47:21","2049.03"
"ceph/ceph-csi","d435b59656ba6a334082b6a918ee3582a29ae09b","riya-singhal31","2023-08-17 09:02:36","false","e2e: add timeout for pvc deletion in ephemeral e2e

this commit adds the timeout to wait for pvc
deletion after the deletion of pod in test.

Signed-off-by: riya-singhal31 <rsinghal@redhat.com>",25,67,1,0,"2018-01-08 15:47:21","2044.97"
"ceph/ceph-csi","4061399bb20b685d64e4b1ceedfe739fcb5b1135","riya-singhal31","2023-08-25 13:08:50","false","ci: skip testing on k1.28 for the current releases

Signed-off-by: Riya Singhal <rsinghal@redhat.com>",22,67,1,0,"2018-01-08 15:47:21","2053.14"
"ceph/ceph-csi","6b40f6852cd2985842356cb36f5577dc30b8604d","nixpanic","2023-08-25 12:06:49","false","ci: use latest minikube version (v1.31.2)

Use the latest minikube version that contains minor changes and
bugfixes.

See-also: https://github.com/kubernetes/minikube/blob/master/CHANGELOG.md
Signed-off-by: Niels de Vos <ndevos@ibm.com>",21,67,1,1,"2018-01-08 15:47:21","2053.1"
"ceph/ceph-csi","a129b1c4abc660b6295a718c9f1cd6472620da0d","nixpanic","2023-08-07 10:21:27","false","rebase: update golang.org/x/net to v0.14

golang.org/x/net/html v0.12 is vulnerable against CVE-2023-3978.
Exploiting it through Ceph-CSI is non-trivial, but rebasing
golang.org/x/net should take away any concerns.

See-also: https://pkg.go.dev/vuln/GO-2023-1988
Signed-off-by: Niels de Vos <ndevos@ibm.com>",25,67,1,1,"2018-01-08 15:47:21","2036.02"
"ceph/ceph-csi","1098751843a9e87809919b4a3f7aa77a709d86aa","Madhu-1","2023-08-17 05:40:58","false","ci: update mergify rules for kube v1.28.0

updating mergify rules to consider kubernetes
v1.28.0 ci jobs.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",25,67,1,1,"2018-01-08 15:47:21","2044.83"
"ceph/ceph-csi","874d0bcf4bff87669d28813fa9416245d841f143","astraw99","2023-08-07 14:40:33","false","doc: fix helm doc of ceph-csi deployment

To make the doc better.

Signed-off-by: astraw99 <wangchengiscool@gmail.com>",25,67,1,0,"2018-01-08 15:47:21","2036.2"
"ceph/ceph-csi","9ffd3ffd98122988ac9300f847269249e3a9eb65","Madhu-1","2023-08-17 05:37:47","false","ci: update pull request commentor for kube 1.28.0

updating pull request commentor to
run tests with kubernetes 1.28.0

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",25,67,1,1,"2018-01-08 15:47:21","2044.83"
"ceph/ceph-csi","0f086bead2336f6af2f10d9e8cf1117e12b1cb74","nixpanic","2023-07-25 12:11:59","false","rebase: run `go mod tidy && go mod vendor`

Signed-off-by: Niels de Vos <ndevos@ibm.com>",26,66,1,1,"2018-01-08 15:47:21","2023.1"
"ceph/ceph-csi","3477e9cd8acd04aa23e08057ab564e56af361121","Rakshith-R","2023-07-21 10:18:14","false","ci: add CSI_UPGRADE_VERSION var to build.env

Currently, upgrade version for upgrade tests
need to be set in ci/centos branch.
This commit adds a variable in build.env,
so that we have the flexibility to use
this value instead.

Signed-off-by: Rakshith R <rar@redhat.com>",26,66,1,1,"2018-01-08 15:47:21","2019.02"
"ceph/ceph-csi","ce26b0e2125498e7fb2ac04f9418b9b4399e9d40","nixpanic","2023-07-26 06:41:43","false","ci: allow CVE-2019-11255 in Kubernetes module dependency

It is unclear how a module for utility functions can have the same
problem as a separate side-car that is expected to do the input
validation. The side-cars have been fixed already, no further details
are in the CVE description (from 2019).

See-also: https://github.com/advisories/GHSA-f4w6-3rh6-6q4
Signed-off-by: Niels de Vos <ndevos@ibm.com>",26,66,1,1,"2018-01-08 15:47:21","2023.87"
"ceph/ceph-csi","35eb347eaccfc8875b1c4e2073f557c008f5e656","Rakshith-R","2023-07-21 06:01:14","false","doc: update documentation for v3.8.1 release

This commit updates readme doc for v3.8.1 release.

Signed-off-by: Rakshith R <rar@redhat.com>",26,66,1,1,"2018-01-08 15:47:21","2018.84"
"ceph/ceph-csi","89ad6e8c5348c3be278ff5e98db37341329ad6e6","karthik-us","2023-07-12 16:37:30","false","deploy: Update provisioner image repository

Update ceph-csi-rbd helm chart to use the released image
repo for csi-provisioner instead of the staging repo.

Fixes: #3976
Signed-off-by: karthik-us <ksubrahm@redhat.com>",31,66,1,0,"2018-01-08 15:47:21","2010.28"
"ceph/ceph-csi","254699cb1a0450a0632f04f9d2ef171760252b4a","spuiuk","2023-06-08 15:23:41","false","nfs: add support for `clients` in the StorageClass

The clients parameter in the storage class is used to limit access to
the export to the set of hostnames, networks or ip addresses specified.

Signed-off-by: Sachin Prabhu <sprabhu@redhat.com>",32,65,1,0,"2018-01-08 15:47:21","1977.23"
"ceph/ceph-csi","cdaa9264eb4ee1698efa99ab48224049e7f7c64f","riya-singhal31","2023-06-05 16:18:29","false","rbd: migration of replication service to csi-addon

this commit removes grpc import from replication.go
and replaced it with usual errors and passed gRPC
responses in csi-addons

Signed-off-by: riya-singhal31 <rsinghal@redhat.com>",33,65,1,0,"2018-01-08 15:47:21","1974.27"
"ceph/ceph-csi","a7d259a334f37e9545e0ece8541e8e625e2e0f06","riya-singhal31","2023-07-05 05:45:07","false","e2e: add test for validation of kernelMountOption

Signed-off-by: riya-singhal31 <rsinghal@redhat.com>",34,66,1,0,"2018-01-08 15:47:21","2003.83"
"ceph/ceph-csi","489d0ff1a6ba390757c02d09792fd5bd83fe2976","nixpanic","2023-06-29 10:26:41","false","doc: remove `/retest all` command for Jenkins jobs

`/retest all` causes a spike in resource consumption in Jenkins and the
OpenShift cluster kills the Pod. That means tests are not fully running
yet, and results never arrive back in the PR. Instead of `/retest all`,
the `ok-to-test` label can be used to trigger required tests with a
slight delay between each command.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",35,66,1,1,"2018-01-08 15:47:21","1997.03"
"ceph/ceph-csi","f60a3580071c30b4253174996ae42168b088384e","nixpanic","2023-06-30 07:22:09","false","rbd: do not try to run `resizefs` on an encrypted BlockMode volume

When a volume has AccessType=Block and is encrypted with LUKS, a resize
of the filesystem on the (decrypted) block-device is attempted. This
should not be done, as the application that requested the Block volume
is the only authoritive reader/writer of the data.

In particular VirtualMachines that use RBD volumes as a disk, usually
have a partition table on the disk, instead of only a single filesystem.
The `resizefs` command will not be able to resize the filesystem on the
block-device, as it is a partition table.

When `resizefs` fails during NodeStageVolume, the volume is unstaged and
an error is returned.

Resizing an encrypted block-device requires `cryptsetup resize` so that
the LUKS header on the RBD-image is updated with the correct size. But
there is no need to call `resizefs` in this case.

Fixes: #3945
Signed-off-by: Niels de Vos <ndevos@ibm.com>",34,66,1,1,"2018-01-08 15:47:21","1997.9"
"ceph/ceph-csi","46fbc4868d3d35c99ae23dc9e7b72d06367464bf","Rakshith-R","2023-06-26 14:56:07","false","ci: add mergify rules for release-v3.9

This commit adds mergify rules to backport PR
to release-v3.9 branch.

Signed-off-by: Rakshith R <rar@redhat.com>",34,66,1,1,"2018-01-08 15:47:21","1994.21"
"ceph/ceph-csi","e99e6174d93b07bfc406782300adc1412e554cca","Rakshith-R","2023-06-26 14:56:47","false","ci: remove mergify rules for release-v3.7

This commit removes mergify rules to backport PR
to release-v3.7 branch.

Signed-off-by: Rakshith R <rar@redhat.com>",34,66,1,1,"2018-01-08 15:47:21","1994.21"
"ceph/ceph-csi","ef8ffb4c577d4e9e672834c1b00939ffa4cfdef6","Rakshith-R","2023-06-26 05:13:15","false","doc: update README for v3.9.0 release

This commit updates README to deprecate 3.7.x release
and pin latest release to v3.9.0

Signed-off-by: Rakshith R <rar@redhat.com>",32,66,1,1,"2018-01-08 15:47:21","1993.81"
"ceph/ceph-csi","37018a2eefa45edc4be6feee992d0a90c5ebdffd","fungaren","2023-06-15 08:32:06","false","helm: add imagePullSecrets option

Currently the Helm chart does not contain a
imagePullSecrets option when you are using
private container registry, this is very inconvenient.
This PR add this option for both CephFS and RBD.

Signed-off-by: Garen Fang <fungaren@qq.com>",31,65,1,0,"2018-01-08 15:47:21","1982.95"
"ceph/ceph-csi","37f1d722d39107de27ada4b6663666d6b08a6796","Rakshith-R","2023-06-15 11:59:39","false","ci: remove checks for k8s 1.24 ci tests

K8s 1.24 will be End of Life on 2023-07-28.
Therefore, removing checks for ci tests on
that version.

refer:
https://kubernetes.io/releases/#release-v1-24

Signed-off-by: Rakshith R <rar@redhat.com>",31,65,1,1,"2018-01-08 15:47:21","1983.09"
"ceph/ceph-csi","f8faffac89dd80c5cea33a3ed3b316febe09fbc5","irq0","2022-06-23 11:58:36","false","vendor: vendor fscrypt integration dependencies

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",43,53,1,0,"2018-01-08 15:47:21","1625.84"
"ceph/ceph-csi","c0201e493b7052cb1ec6ef2cecffd8e4cdb49157","Rakshith-R","2023-06-13 09:41:21","false","deploy: set seLinuxMount to true for csidriver objects

Setting seLinuxMount:true in csidriver objects advertize
that the driver supports passing selinux label in mount
options.

refer: https://kubernetes.io/blog/2023/04/18/ \
kubernetes-1-27-efficient-selinux-relabeling-beta/

Signed-off-by: Rakshith R <rar@redhat.com>",31,65,1,1,"2018-01-08 15:47:21","1981"
"ceph/ceph-csi","2551a0b05fc67b01bfdcdedbb918bc922dbf58b8","nixpanic","2023-06-01 16:58:10","false","rebase: update all k8s packages to 0.27.2

Signed-off-by: Niels de Vos <ndevos@ibm.com>",32,65,1,1,"2018-01-08 15:47:21","1970.3"
"ceph/ceph-csi","6709cdd1d0d5704f38e8a547dfd3d5557f0d3a5c","nixpanic","2023-06-02 15:01:18","false","rebase: update github.com/onsi/ginkgo to v2.9.5

There was a `replace` statement in `go.mod` that prevented Ginkgo from
updating. Kubernetes 1.27 requires a new Ginkgo version.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",30,65,1,1,"2018-01-08 15:47:21","1971.22"
"ceph/ceph-csi","b5e68c810eee5fe21937665d5712172bdbbe319f","riya-singhal31","2023-05-25 12:31:30","false","rbd: add unit test for ParseEncryptionOpts

Signed-off-by: riya-singhal31 <rsinghal@redhat.com>",31,64,1,0,"2018-01-08 15:47:21","1963.11"
"ceph/ceph-csi","6ac3a4dabcaa481fd03cb4771cce39f5a028d629","karthik-us","2023-05-30 15:17:51","false","cleanup: Move common files to deploy folder

Few common files related to deployments were kept
in the examples folder initially. Moving them to
deploy folder and updating the relevant files.

Signed-off-by: karthik-us <ksubrahm@redhat.com>",31,65,1,0,"2018-01-08 15:47:21","1968.23"
"ceph/ceph-csi","439918c10d1920ebc6038db28b651f952739261c","nixpanic","2023-06-05 14:41:04","false","e2e: re-use `context.Context` for `PollUntilContextTimeout()` calls

There are many locations where a new context is created. These can be
reduced when subsequent calls re-use a previously created context
object.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",33,65,1,1,"2018-01-08 15:47:21","1974.2"
"ceph/ceph-csi","e4e373cd476a687c70e43dab8e1e40867211a17d","karthik-us","2023-06-06 13:16:27","false","e2e: Make getConfigFile() generic

Update the getConfigFile() function to allow any file to be looked
at on the preferred location first and fall back to the alternate
location if it does not exist there.

Signed-off-by: karthik-us <ksubrahm@redhat.com>",35,65,1,0,"2018-01-08 15:47:21","1975.15"
"ceph/ceph-csi","e6627198d4facc822a957aa810b98166a7416b64","nixpanic","2023-06-02 15:25:01","false","e2e: pass `context.TODO()` to k8s.e2e functions

Many Kubernetes test framework functions now require a context to be
passed. Use `context.TODO()` for this, just like is done for some of the
functions already.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",30,65,1,1,"2018-01-08 15:47:21","1971.23"
"ceph/ceph-csi","92d978516675327a89ca317567aafe2404fac382","riya-singhal31","2023-04-28 09:01:58","false","cleanup: ErrWaitTimeout is deprecated in k8s 1.27

replaced ErrWaitTimeout with Interrupted

Signed-off-by: riya-singhal31 <rsinghal@redhat.com>",31,64,1,0,"2018-01-08 15:47:21","1935.97"
"ceph/ceph-csi","802df8f69b185890c9328c34aad959ca7e327c45","riya-singhal31","2023-05-16 06:30:26","false","deploy: move cephfs/csi-config-map to API

Signed-off-by: riya-singhal31 <rsinghal@redhat.com>",29,64,1,0,"2018-01-08 15:47:21","1953.86"
"ceph/ceph-csi","268ac428501d607981d117996afff4b461dfc0f1","nixpanic","2023-05-30 11:51:54","false","rebase: update k8s external-snapshotter to v6.2.2

All changes are listed here:
https://github.com/kubernetes-csi/external-snapshotter/compare/v6.1.0...v6.2.2

Signed-off-by: Niels de Vos <ndevos@ibm.com>",31,65,1,1,"2018-01-08 15:47:21","1968.09"
"ceph/ceph-csi","b804181a3d72845928627bd9d183335390e60770","nixpanic","2023-05-30 14:24:16","false","ci: remove `\` from GitHub Workflow if condition

Backslashes (`\`) cause issues in the `if` statment with GitHub
Workflows.

    Unexpected symbol: '\'. Located at position 53 within expression:
    (github.event.pull_request.label == 'ok-to-test' && \

Using the `>` YAML syntax to replace linebreaks with spaces should
address this problem.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",31,65,1,1,"2018-01-08 15:47:21","1968.19"
"ceph/ceph-csi","360df61eb0f00c5ddfb4415b363e91c4fbab6e52","nixpanic","2023-05-31 08:27:43","false","ci: `github.event.pull_request.merged` is a boolean, not a string

With the updates to the pull-request-commenter, all strings were placed
within `'` to prevent syntax issues. It seems that
`github.event.pull_request.merged` really is a boolean (or `null`), and
not a string.

Doc: https://docs.github.com/en/webhooks-and-events/ (""payloads"" section)
Signed-off-by: Niels de Vos <ndevos@ibm.com>",31,65,1,1,"2018-01-08 15:47:21","1968.94"
"ceph/ceph-csi","8ccf6a805dd8a059a5171554ea0557cdaf5efd7c","Madhu-1","2023-02-02 12:46:21","false","build: update golang to 1.19.5

update golang version to 1.19.5 which
is recent release of 1.19

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",32,61,1,1,"2018-01-08 15:47:21","1851.12"
"ceph/ceph-csi","27dc4f0fdea28f1faf1b4e7f94fc97f722e556c9","nixpanic","2023-05-30 09:02:29","false","ci: fix syntax error in `pull-request-commenter` GitHub Workflow

The `ok-to-test` label does not work anymore, and the GitHub Workflow
contains the following error:

    The workflow is not valid.
    .github/workflows/pull-request-commentor.yaml (Line: 15, Col: 9):
    Unrecognized named-value: 'ok-to-test'.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",30,65,1,1,"2018-01-08 15:47:21","1967.97"
"ceph/ceph-csi","ba991cbb8549f89121a2de615aa81109d8e2cd5a","nixpanic","2023-06-01 09:06:20","false","ci: use `github.event.label.name` for check in pull-request-commenter

The `github.event.label.name` was replaced by
`github.event.pull_request.label` in PR #3862. It seems that the value
always is `null`, which causes the pull-request-commenter to skip the
events for `ok-to-test` label additions. By using the original
`github.event.label.name`, things work again as expected.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",32,65,1,1,"2018-01-08 15:47:21","1969.97"
"ceph/ceph-csi","bc167cc6f4947a6421214fd98042c0b236dc1e62","nixpanic","2023-05-22 07:30:40","false","ci: install Helm with script located on GitHub

Installing Helm fails often in the CI. The Helm documentation does not
point to `https://git.io/get_helm.sh` anymore, but to a location on
GitHub. To make it easier to update the location in the future, it has
now been added to `build.env`, just like the `HELM_VERSION`.

See-also: https://helm.sh/docs/intro/install/
Signed-off-by: Niels de Vos <ndevos@ibm.com>",30,64,1,1,"2018-01-08 15:47:21","1959.91"
"ceph/ceph-csi","e46f65640ccf97bd4f45b13431dfe4356fe5593f","nixpanic","2023-05-15 14:51:53","false","ci: rename `gha-mergify-merge-queue-labels-copier.yaml` to `action.yaml`

It seems to be required to have the GitHub Action called `action.yaml`.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",29,64,1,1,"2018-01-08 15:47:21","1953.21"
"ceph/ceph-csi","9a9296efa15a1ebf62ca5a40815870f3dde49061","nixpanic","2023-05-15 16:44:35","false","ci: check for `mergify/merge-queue/` string, with `-`

It seems that the `-` in `mergify/merge-queue/` was dropped somehow :-(

Signed-off-by: Niels de Vos <ndevos@ibm.com>",29,64,1,1,"2018-01-08 15:47:21","1953.29"
"ceph/ceph-csi","be57cf9d9426ade64e37427e7baf1ff61c60d1dc","Rakshith-R","2023-05-15 05:31:08","false","ci: fix author=mergify[bot]

Author of mergifyio created pr is mergify[bot].
It needs the suffix `[bot]` for the condition
to be evaluated to true.

Signed-off-by: Rakshith R <rar@redhat.com>",28,64,1,1,"2018-01-08 15:47:21","1952.82"
"ceph/ceph-csi","c63af2108eed769016fd9f8c25b227d79812184f","Rakshith-R","2023-05-16 05:42:50","false","ci: switch back to official label copier & always add `ok-to-test` label

Signed-off-by: Rakshith R <rar@redhat.com>",29,64,1,1,"2018-01-08 15:47:21","1953.83"
"ceph/ceph-csi","52ebfa6b972e69b649d5ae37d7c254de1d5ce6e2","nixpanic","2023-05-15 11:24:21","false","ci: include ci/skip/.. labels for copying into merge queue PRs

Setting an empty `labels:` fails to work as intended, no labels get
copied ad all. Now setting the `ci/skip/..` labels, as those are most
important for speeding up merging.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",29,64,1,1,"2018-01-08 15:47:21","1953.07"
"ceph/ceph-csi","654786861133781b1921a01498b910a347ec8036","nixpanic","2023-05-15 15:43:54","false","ci: checkout the local mergify-merge-queue-labels-copier

Without checking out the repository, it is not possible to run the local
action.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",29,64,1,1,"2018-01-08 15:47:21","1953.25"
"ceph/ceph-csi","dd0e1988c08e75ce9564854eab93bb0826a9532d","irq0","2022-07-19 14:57:26","false","fscrypt: Fetch passphrase when keyFn is invoked not created

Fetch password when keyFn is invoked, not when it is created. This
allows creation of the keyFn before actually creating the passphrase.

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",40,54,1,0,"2018-01-08 15:47:21","1651.97"
"ceph/ceph-csi","ea3cd2b5e4dfc0e7a12acfa6ef78873df35836a4","nixpanic","2023-04-26 16:00:41","false","doc: use the Ceph Slack instance and not our silo'ed own one

Currently the Ceph-CSI community is on the 'free' Slack instance at
https://cephcsi.slack.com. The Ceph project uses a Slack instance that
we can use for Ceph-CSI as well. In order to integrate more with other
Ceph projects, we should ideally be active on the same Slack instance.

For now, we have `#ceph-csi` as only channel on the
https://ceph-storage-slack.com, we can add more channels if needed.

See-also: https://ceph.io/en/community/connect/
Signed-off-by: Niels de Vos <ndevos@ibm.com>",31,64,1,1,"2018-01-08 15:47:21","1934.26"
"ceph/ceph-csi","c8f6878570b69641e521d8da4be6c15d7dd38e99","riya-singhal31","2023-04-25 09:50:27","false","doc: update readme as kubernetes 1.27 is released

Signed-off-by: riya-singhal31 <rsinghal@redhat.com>",32,64,1,0,"2018-01-08 15:47:21","1933"
"ceph/ceph-csi","1bc090d975d8665743fd643812a9595653082e44","riya-singhal31","2023-04-12 10:55:58","false","ci: update github actions for k8s 1.27

Signed-off-by: riya-singhal31 <rsinghal@redhat.com>",35,63,1,0,"2018-01-08 15:47:21","1920.05"
"ceph/ceph-csi","fb930243a8d75f94d9125c71782ce6f97f15f36e","karthik-us","2023-04-21 05:40:31","false","doc: Correct few doc errors

Fixes the typos in deploy-cephfs and development-guide docs.

Signed-off-by: karthik-us <ksubrahm@redhat.com>",34,63,1,0,"2018-01-08 15:47:21","1928.83"
"ceph/ceph-csi","304194a0c0fd27ebb449c4172985353201942df0","riya-singhal31","2023-01-12 09:52:51","false","cleanup: migration of volrep to csi-addons

This commit moves the volrep logic from internal/rbd to
internal/csi-addons/rbd.

Signed-off-by: riya-singhal31 <rsinghal@redhat.com>",30,60,1,0,"2018-01-08 15:47:21","1830"
"ceph/ceph-csi","4fb13b9328e88e9cfd6bbd72eb75b8d1669d181a","Rakshith-R","2023-04-24 06:23:25","false","build: update golang to 1.19.8

CephCSI may be vulnerable to
https://github.com/advisories/GHSA-8v5j-pwr7-w5f8.
Update golang to 1.19.8 since it contains
fixes for mentioned CVE.

Signed-off-by: Rakshith R <rar@redhat.com>",33,63,1,1,"2018-01-08 15:47:21","1931.86"
"ceph/ceph-csi","9c0fa09f197bbb2afe8c7ac1f63b887655b13674","nixpanic","2023-03-02 08:18:35","false","e2e: add test for `mkfsOptions` in RBD StorageClass

Create a 1G volume, with ext4 and only 1024 inodes. Use `df` to check if
the number of inodes is correct.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",40,62,1,1,"2018-01-08 15:47:21","1880.94"
"ceph/ceph-csi","bd5885500209849acd64f7cfb6a2c6011a901f13","riya-singhal31","2023-02-27 08:14:21","false","doc: update the meeting schedule in readme

Signed-off-by: riya-singhal31 <rsinghal@redhat.com>",38,62,1,0,"2018-01-08 15:47:21","1874.94"
"ceph/ceph-csi","b7e1b90bb8b9fcd640089f85da2cf1aef49192c5","nixpanic","2023-03-02 09:30:47","false","e2e: replace CephFS in messages for RBD tests

Signed-off-by: Niels de Vos <ndevos@ibm.com>",40,62,1,1,"2018-01-08 15:47:21","1880.99"
"ceph/ceph-csi","13cdb08e61fc49162c4cd9cb8fac02d5305e1df0","nixpanic","2023-02-23 16:39:09","false","rbd: cleanup passing `mkfs` arguments for NodeStageVolume

Storing the default `mkfs` arguments in a map with key per filesystem
type makes this a little more modular. It prepares th code for fetching
the `mkfs` arguments from the VolumeContext.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",37,61,1,1,"2018-01-08 15:47:21","1871.29"
"ceph/ceph-csi","c84b4a15ba37bfcdb7b4cd776dac7bfaeb4a67b4","nixpanic","2023-02-21 08:35:41","false","ci: only run `test-retest-action` if the PR modifies the action

There is no need to run the `test-retest-action` GitHub Workflow if
there are no changes under the `actions/retest` directory.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",37,61,1,1,"2018-01-08 15:47:21","1868.95"
"ceph/ceph-csi","cfa173d6ff388fa40c7d304f1a365167d748f4ea","Madhu-1","2023-02-23 07:59:36","false","ci: update mergify rules for Kubernetes 1.26

removed mergify rules for Kubernetes 1.23
and update the rules to consider Kubernetes
1.26

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",37,61,1,1,"2018-01-08 15:47:21","1870.93"
"ceph/ceph-csi","8fd0383cbede79658ae2391102a2b397317df7e0","Madhu-1","2023-02-23 08:03:13","false","ci: remove rules for release-v3.6

As release 3.6 is deprecated and not
supported anymore removing its rules
from mergify

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",37,61,1,1,"2018-01-08 15:47:21","1870.93"
"ceph/ceph-csi","b7d2d28e69a9b40029addecd55965c57b6386f57","nixpanic","2023-02-20 15:59:35","false","ci: only add `ok-to-test` if there are no pending CentOS jobs

After the `ok-to-test` label was added, the commenter will remove the
label again. There is no need for Mergify to re-add the label while CI
jobs are still running.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",36,61,1,1,"2018-01-08 15:47:21","1868.26"
"ceph/ceph-csi","b28b5e6c84b37ab964ab9d4ca72887b0053c6112","riya-singhal31","2023-02-07 09:06:36","false","cephfs: use shallow volumes for the ROX accessMode

this commit makes shallow volume as default feature for ROX volumes.

Signed-off-by: riya-singhal31 <rsinghal@redhat.com>",35,61,1,0,"2018-01-08 15:47:21","1855.97"
"ceph/ceph-csi","ef6aabbfb00ecb7da49b7d0d21bcdd485db583d8","Madhu-1","2023-02-22 07:25:54","false","doc: update README for 3.8.0 release

updated README to deprecate 3.6.x release
and pin latest release to 3.8.0

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",37,61,1,1,"2018-01-08 15:47:21","1869.9"
"ceph/ceph-csi","991c21f7fdeacef76ac08911d219435d89a1c119","nixpanic","2023-02-22 11:56:59","false","ci: do not add `ok-to-test` if CentOS jobs were successful

Mergify does not add the `ok-to-test` label immediately anymore. But
once the CentOS CI jobs have finished, the label still gets added. With
the additional check, this should not be the case anymore.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",37,61,1,1,"2018-01-08 15:47:21","1870.09"
"ceph/ceph-csi","3325e5045e652a7d7f983c5355322e853c75f97e","nixpanic","2023-02-21 08:23:30","false","ci: do not run commitlint GitHub Action on dependabot PRs

Currently commitlint is only skipped for PR at the time dependabot
creates them. Once Mergify rebases them, commitlint is started anyway.
This causes failed CI runs, which then need to be ignored. It is cleaner
to not run commitlint on any PR that dependabot owns.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",37,61,1,1,"2018-01-08 15:47:21","1868.94"
"ceph/ceph-csi","f5d24628dcacb38a35ffff67b991e11244256abc","Madhu-1","2023-02-23 08:02:19","false","ci: add mergify rules for release-v3.8

added mergify rules to backport PR
to release-v3.8 branch.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",37,61,1,1,"2018-01-08 15:47:21","1870.93"
"ceph/ceph-csi","3252c1e782b7cc80ded2c120593378fc113b790e","nixpanic","2023-02-20 08:57:56","false","ci: remove `ok-to-test` label after commenting

Once the comments have been added, the `ok-to-test` label can be
removed. This makes it possible to simplify the Mergify configuration.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",37,61,1,1,"2018-01-08 15:47:21","1867.97"
"ceph/ceph-csi","48822d942d4907cd29e5184d2d213df2e36ed343","nixpanic","2023-02-20 10:16:23","false","ci: use `context.issue.number` for removing `ok-to-test`

`github.event.pull_request.number` does not seem to be valid as a script
object/variable.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",37,61,1,1,"2018-01-08 15:47:21","1868.02"
"ceph/ceph-csi","773d2df5649b24f3faa20fa7c9a7b012e21a8f2d","nixpanic","2023-02-20 12:46:23","false","ci: no need to run multi-arch-build for `/actions/retest`

Signed-off-by: Niels de Vos <ndevos@redhat.com>",37,61,1,1,"2018-01-08 15:47:21","1868.12"
"ceph/ceph-csi","ae278797be5a5c6f949974d3709cb7a1bcc654d7","Syphdias","2023-02-08 11:22:26","false","doc: Add basic upgrade documentation for Helm Charts

Without this patch the READMEs for the Helm Charts do not provide any
documentation on how to upgrade to a newer version. There is at least
one known issue when updating to a newer versions that is unavoidable as
of writing. There is a workaround for the issue which should be
documented in the upgrade section.

This is a problem because currently the only way to find this workaround
is to go through closed GitHub issues. These might not be around at the
time someone needs this information. Furthermore the issue should be
communicated to the operator before it occurs.

This patch adds basic documentation for updating the Helm repository,
and upgrading the installed release of the Helm Chart. How values can be
set is not part of the documentation. If an operator used custom values,
e.g. for the secret, they probably already know how to deal with setting
values. However, the docs still remind the reader to take values into
account.
Reusing the installed values (`--reuse-values`) has lead to problems in
past, which is why it is explicitly discouraged. An example for this
would be the value `logLevel` which was changed to `sidecarLogLevel`.
Reusing values lead to `.Values.sidecarLogLevel` being empty and the
`csi-provisioner` not being started due to invalid value `-v=""""`.
Comparing new values with set values is encouraged.

The workaround for issue #3397 from GitHub is being addressed in the
section Know Issues Upgrading.

Signed-off-by: Christian Kugler <syphdias+git@gmail.com>",37,61,1,0,"2018-01-08 15:47:21","1857.07"
"ceph/ceph-csi","95682522eea0129e2cf7127758d3cb93a8619b45","Rakshith-R","2023-02-02 09:46:37","false","rbd: add capability to automatically enable read affinity

This commit makes use of crush location labels from node
labels to supply `crush_location` and `read_from_replica=localize`
options during rbd map cmd. Using these options, ceph
will be able to redirect reads to the closest OSD,
improving performance.

Signed-off-by: Rakshith R <rar@redhat.com>",32,61,1,1,"2018-01-08 15:47:21","1851"
"ceph/ceph-csi","e9e33fb851c415124c5c2752453b6b8b04459467","Madhu-1","2023-02-01 17:10:01","false","cleanup: fix static checks

fix SA1019 static check to replace
io/utils with os package

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",32,61,1,1,"2018-01-08 15:47:21","1850.31"
"ceph/ceph-csi","567b7df197c7c59fa5a5ec159f92779520eabac9","nixpanic","2023-02-01 12:58:25","false","ci: `bot_account` is not available for our Mergify usage

`bot_account` is a feature that is part of the paid subscription. The
Ceph organization does not have that.

Mergify will use the author of the PR for rebasing by default. This
isn't very nice, but we can't change it at the moment.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",32,61,1,1,"2018-01-08 15:47:21","1850.13"
"ceph/ceph-csi","62ec2171e784aa93cab12a44f4d996608d9f6286","nixpanic","2023-01-31 08:35:41","false","ci: use ceph-csi-bot for Mergify actions

The `bot_account` option was not part of the Open Source plan, but now
it is. When Mergify rebases PRs, it sometimes leaves the following
message:

```
This pull request got rebased on behalf of a random user of the
organization. This behavior will change on the 1st February 2023,
Mergify will pick the author of the pull request instead.

To get the future behavior now, you can configure bot_account options
(e.g.: bot_account: { author } or update_bot_account: { author }.

Or you can create a dedicated github account for squash and rebase
operations, and use it in different bot_account options.
```

It is clearer for everyone when the Ceph-CSI Bot is used for automated
actions. Contributers might get confused why the PR was updated in their
name, without them doing anything.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",31,61,1,1,"2018-01-08 15:47:21","1848.95"
"ceph/ceph-csi","a4fac623ff0d7f7fca7ef61f4d226a3fe6c01cac","Madhu-1","2023-01-30 08:17:03","false","ci: update minikube to v1.29.0

update minikube to latest available
release.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",32,61,1,1,"2018-01-08 15:47:21","1847.94"
"ceph/ceph-csi","e6c97b9593da3258613c687f79e7e5e2ae939ce7","lentzi90","2023-01-09 11:17:43","false","cleanup: Fix paths and syntax

Minor cleanup of changed paths and deprecated syntax

Signed-off-by: Lennart Jern <lennart.jern@est.tech>",28,60,1,0,"2018-01-08 15:47:21","1827.06"
"ceph/ceph-csi","eff8a9b3be8e34143102df5eeb72d4fd9b84610b","humblec","2022-11-11 05:10:20","false","helm: fuse_set_user_groups need not be part of the config

this setting in ceph.conf is no longer required and this commit
remove it from the chart.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",36,58,1,1,"2018-01-08 15:47:21","1763.56"
"ceph/ceph-csi","300a6814086615f6745d571642a2d7ab3b93d8bb","Madhu-1","2023-01-09 11:52:23","false","rebase: update go-ceph to v0.19.0

updating go-ceph to latest available
release.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",28,60,1,1,"2018-01-08 15:47:21","1827.09"
"ceph/ceph-csi","d5278bd6c5c36564599b4ebe01274ecd8115bdba","Madhu-1","2023-01-11 12:12:35","false","rbd: set disableInUseChecks on rbd volume

set disableInUseChecks on rbd volume struct
as it will be used later to check whether
the rbd image is allowed to mount on multiple
nodes.

fixes: #3604

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",30,60,1,1,"2018-01-08 15:47:21","1829.1"
"ceph/ceph-csi","38c4832665e4bddd43c9b0ad54517423c9ee4228","nixpanic","2022-11-11 11:13:18","false","ci: do not leave testing comments on merged PRs

A PR with status `github.event.pull_request.merged == true` does not
need to be tested again.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",35,58,1,1,"2018-01-08 15:47:21","1763.81"
"ceph/ceph-csi","2ade8672111eccb5d15bf4b51cbe0c18c78c3a4e","irq0","2022-08-19 16:23:52","false","e2e: Add Ceph FS fscrypt validation helper

Add e2e helper to verify encrypted Ceph FS. Verify file's
ceph.fscrypt.auth attribute and KMS password creation / removal.

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",41,55,1,0,"2018-01-08 15:47:21","1682.03"
"ceph/ceph-csi","446c8c926442acd5bd5a1641ef3a3314e57329bb","irq0","2022-10-24 14:55:38","false","e2e: Deploy vault as part of the Ceph FS upgrade suite

Deploy vault, analogue to the RBD upgrade suite to have the
ceph-csi-encryption-kms-config map ready when dependent
deployments/daemonsets are created.

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",39,57,1,0,"2018-01-08 15:47:21","1746.96"
"ceph/ceph-csi","a53a64129dfe493f3669cf4302b033d34e032996","irq0","2022-08-26 18:18:07","false","e2e: add PVC-PVC clone Ceph FS fscrypt tests

Note: Feature fixed https://tracker.ceph.com/issues/57641

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",41,55,1,0,"2018-01-08 15:47:21","1689.1"
"ceph/ceph-csi","5da977db8a4ec0563d3e0475f6f6e757c6f24596","irq0","2022-11-08 18:47:37","false","deploy: Remove unnecessary RBAC permissions

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",35,58,1,0,"2018-01-08 15:47:21","1761.13"
"ceph/ceph-csi","c9ccbf29bb67a0f7d92f9c8fe62dd7e9c5986a4a","humblec","2022-11-11 04:06:17","false","rebase: update to latest snapshotter

this commit update the snapshotter client to v6.1.0

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",36,58,1,1,"2018-01-08 15:47:21","1763.51"
"ceph/ceph-csi","a2215683e1992b6471e61fc69354188370596b83","humblec","2022-11-11 13:30:05","false","ci: package dependencies in actions/retest

these dependencies were not updated and this commit update the
same.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",35,58,1,1,"2018-01-08 15:47:21","1763.9"
"ceph/ceph-csi","9a61d9cbfc805fbb393e78a7296ad2e67ff4e96e","nixpanic","2022-11-10 10:06:35","false","ci: do not immediately remove the `ok-to-test` label

It seems that Mergify removes the `ok-to-test` label as soon as someone
adds it. We don't want that, as it can trigger more CI runs than needed.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",36,58,1,1,"2018-01-08 15:47:21","1762.76"
"ceph/ceph-csi","03480d2927539c291ab1c5a994e0161e7ddf96fe","Madhu-1","2022-11-08 08:19:44","false","rebase: update csi to v1.7.0

Update csi to latest v1.7.0 release
https://github.com/container-storage-interface
/spec/releases/tag/v1.7.0

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",35,58,1,1,"2018-01-08 15:47:21","1761.69"
"ceph/ceph-csi","6009b7c7cf4568993b494e23d3f32584dab23af7","humblec","2022-11-10 08:40:34","false","doc: lift the minimum supported version of ceph to v15.0.0

at present the supported ceph cluster version has been listed with
v14.x.x version of Ceph. However upstream Ceph has dropped its
support for 14.x version and minimum supported release is v15.x

Ref # https://docs.ceph.com/en/quincy/releases/index.html

this commit update the ceph cluster version mention to v15.0.0

Additional Note:
The code should work even for last archived release but we dont
need that mention anymore in the readme.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",36,58,1,1,"2018-01-08 15:47:21","1762.7"
"ceph/ceph-csi","cf237d1f7e9a197f55d9723eeb4af46e231991ea","Madhu-1","2022-11-07 17:07:37","false","ci: update minikube to v1.28.0

update minikube to latest available
release.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",35,58,1,1,"2018-01-08 15:47:21","1761.06"
"ceph/ceph-csi","0e294d66e29e53ae61364d80fef70e9c117ad3ec","Madhu-1","2022-08-30 05:49:39","false","ci: remove podsecurity feature-gate

remove the podsecurity feature-gate
from minikube.sh, because of it
kubernetes 1.25.0 deployment is failing

fixes: #3358

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",43,56,1,1,"2018-01-08 15:47:21","1692.58"
"ceph/ceph-csi","09df2c6091976849c13980aba5b1cd9ac9956408","Madhu-1","2022-09-02 08:17:00","false","e2e: fix panic when checking error

fix panic during error handling

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,56,1,1,"2018-01-08 15:47:21","1695.69"
"ceph/ceph-csi","8f25edc888092848718a96e16d29abeaeadc87c6","Madhu-1","2022-10-28 07:47:33","false","rbd: return error if last sync time not present

As per the csiaddon spec last sync time is
required parameter in the GetVolumeReplicationInfo
if we are failed to parse the description, return
not found error message instead of nil
which is empty response

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,58,1,1,"2018-01-08 15:47:21","1750.67"
"ceph/ceph-csi","019628c8c22c7108bdf4de1cf8352e02f2d04cc0","Madhu-1","2022-10-27 14:49:42","false","rbd: update namespace name in metadata

If a PV is reattached to a new PVC in a different
namespace we need to update the namespace name
in the rbd image metadata.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,57,1,1,"2018-01-08 15:47:21","1749.96"
"ceph/ceph-csi","08652962271240aac5a4012ee351dad7377e8d5e","Madhu-1","2022-10-24 11:32:31","false","doc: ceph mount corruption detection and recovery

Added a new section for the ceph kernel client
mount corruption detection and recovery.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,57,1,1,"2018-01-08 15:47:21","1746.82"
"ceph/ceph-csi","5aaa9bf2f000b617127da3358db7c895e0a3e5d7","Madhu-1","2022-09-06 05:10:33","false","ci: use rook v1.10.4 release

Rook v1.10.4 supports deployment
of Rook on Kubernetes 1.25 or else
Rook deployment will fail.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,56,1,1,"2018-01-08 15:47:21","1699.56"
"ceph/ceph-csi","f19805a40badd88ef000da2b7192092d9e725944","Madhu-1","2022-10-27 06:29:59","false","ci: consider kubernetes 1.25 for tests

As we have successful runs with kubernetes
1.25 Marking is as default for CI jobs and
required for merging PR.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,57,1,1,"2018-01-08 15:47:21","1749.61"
"ceph/ceph-csi","0530134c9a4ee3e7d0d56303809320880aff166b","Madhu-1","2022-10-27 15:10:01","false","e2e: add e2e test for rbd reattach metadata

Added E2E test case to verify metadata after
PV is attached to a new PVC in different namespace.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,57,1,1,"2018-01-08 15:47:21","1749.97"
"ceph/ceph-csi","6258c36b73634e5a46dca55c882c3cdf6d6c1fe4","Madhu-1","2022-11-01 08:07:15","false","doc: add missing csidriver creation

Add missing csidriver object creation
steps from cephfs and rbd deployment
guide.

fixes: #3476

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,58,1,1,"2018-01-08 15:47:21","1754.68"
"ceph/ceph-csi","0f2daca5c2c8d5792aee7cb3a9b8f3bf65f47f04","humblec","2022-10-06 10:24:15","false","rebase: make use of v0.0.8 of kmip go client

The new release has some important fixes available with it
Ref: https://github.com/ThalesGroup/kmip-go/releases/tag/v0.0.8

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",41,57,1,1,"2018-01-08 15:47:21","1729.78"
"ceph/ceph-csi","36b061d426b4c683df11f7deedeb27f8bc8fbad5","yati1998","2022-09-14 11:09:35","false","rbd: get description from remote status

This commit gets the description from remote status
instead of local status.
Local status doesn't have ',' due to which we get
array index out of range panic.

Fixes: #3388

Signed-off-by: Yati Padia <ypadia@redhat.com>
Co-authored-by: shyam Ranganathan <srangana@redhat.com>",38,56,1,0,"2018-01-08 15:47:21","1706.81"
"ceph/ceph-csi","2a6487cbf5a71e58aa95baf594dc621bda4fbb8e","saiprashanth173","2022-09-07 20:49:38","false","rbd: create token and use it for vault SA everytime possible

use TokenRequest API by default for vault SA even with K8s versions < 1.24

Signed-off-by: Prashanth Dintyala <vdintyala@nvidia.com>",38,56,1,0,"2018-01-08 15:47:21","1701.21"
"ceph/ceph-csi","1e0bd66108410812b800b90991c6ee39004c2d7c","humblec","2022-09-20 10:37:14","false","rbd: make default fstype explicit to ext4

With the attacher sidecar update to v4.0.0 this has to be set
explictly.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",41,56,1,1,"2018-01-08 15:47:21","1712.78"
"ceph/ceph-csi","a57859dfa404dbef8f4ba55df0ae88158c897d5c","Rakshith-R","2022-09-13 10:13:21","false","rbd: use blocklist range cmd, fallback if it fails

This commit adds blocklist range cmd feature,
while fallbacks to old blocklist one ip at a
time if the cmd is invalid(not available).

Signed-off-by: Rakshith R <rar@redhat.com>",35,56,1,1,"2018-01-08 15:47:21","1705.77"
"ceph/ceph-csi","71e5b3f92241359b97b9eda8747cf291b26137aa","Madhu-1","2022-10-05 15:09:50","false","rbd: remove dummy image workaround

To address the problem that snapshot
schedules are triggered for volumes
that are promoted, a dummy image was
disabled/enabled for replication.
This was done as a workaround, because the
promote operation was not triggering
the schedules for the image being promoted.

The bugs related to the same have been fixed in
RBD mirroring functionality and hence the
workaround #2656 can be removed from the code base.

ceph tracker https://tracker.ceph.com/issues/53914

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",40,57,1,1,"2018-01-08 15:47:21","1728.97"
"ceph/ceph-csi","b19705f26045fcf4f911870974ceaff1ae8ab997","yati1998","2022-09-09 11:26:41","false","rbd: implements getVolumeReplicationInfo

This commit implements getVolumeReplicationInfo
to get the last sync time and update it in volume
replication CR.

Signed-off-by: yati1998 <ypadia@redhat.com>",37,56,1,0,"2018-01-08 15:47:21","1701.82"
"ceph/ceph-csi","5fa606b14de3c0ffcc59acf17c51435965c08a2a","humblec","2022-09-14 08:38:55","false","deploy: update resizer to v1.6.0 version

This commit make deployment changes to consume v1.6.0
version of the resizer controller.

Reference:
https://github.com/kubernetes-csi/external-resizer/releases/tag/v1.6.0

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",38,56,1,1,"2018-01-08 15:47:21","1706.7"
"ceph/ceph-csi","d1acae7209c78e5cf6ade35b88e8681a49ac22f6","humblec","2022-09-27 13:40:26","false","deploy: update sidecars to latest versions available

Below sidecars are updated with this commit.

csi-provisioner: v3.3.0
csi-snapshotter: v6.1.0

This commit change the sidecar versions in build.env setup.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",40,57,1,1,"2018-01-08 15:47:21","1719.91"
"ceph/ceph-csi","fc89159daf62c6bccf84892a1fbcc451cb4c7453","humblec","2022-09-13 13:59:18","false","doc: deprecate v3.5 as we are on v3.7

This commit mark v3.5 on deprecated release.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",36,56,1,1,"2018-01-08 15:47:21","1705.92"
"ceph/ceph-csi","9d46478794721f2887904ebe6340ef03c5a8aa45","Madhu-1","2022-09-06 05:06:10","false","ci: use resync to sync helm charts

When a file on source is deleted same
need to be deleted on the destination,
with rsync we can achieve it.

fixes: #3329

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,56,1,1,"2018-01-08 15:47:21","1699.55"
"ceph/ceph-csi","e3bf375035275e6d8aa7501ba8d7e1d2d9ec5dac","Madhu-1","2022-08-24 02:24:25","false","rebase: update kubernetes to v1.25.0

update kubernetes to latest v1.25.0
release.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",42,55,1,1,"2018-01-08 15:47:21","1686.44"
"ceph/ceph-csi","ade8b9151676afc1cd2b052329758c11a818f65e","Madhu-1","2022-04-21 05:27:48","false","rebase: update gingko to v2 version

Ginkgo v1 is deprecated and was replaced
with the v2.

Ref: https://onsi.github.io/ginkgo/
MIGRATING_TO_V2#upgrading-to-ginkgo-20

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",42,51,1,1,"2018-01-08 15:47:21","1563.57"
"ceph/ceph-csi","45f82322564d26a796397b27fd291f3e54b2649d","Rakshith-R","2022-08-19 04:17:41","false","doc: add nfs upgrade guide from 3.6 to 3.7

This commit adds nfs upgrade guide from 3.6
to 3.7.

Closes: #3271

Signed-off-by: Rakshith R <rar@redhat.com>",41,55,1,1,"2018-01-08 15:47:21","1681.52"
"ceph/ceph-csi","038462ff43b3898bde3d19f783d1c73c956d88e1","Madhu-1","2022-08-29 05:33:18","false","cephfs: return success if metadata operation not supported

If the ceph cluster is of older version and doesnot
support metadata operation, Instead of failing
the request return the success if metadata
operation is not supported.

fixes #3347

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",42,56,1,1,"2018-01-08 15:47:21","1691.57"
"ceph/ceph-csi","c2280011d129a9e1993754624dc70bb696dc1648","ShyamsundarR","2022-08-08 17:53:41","false","rbd: Report remote peer readiness if Up and status.Unknown

Current code uses an !A && !B condition incorrectly to
test A:Up and B:status for a remote peer image.

This should be !A || !B as we require both conditions to
be in the specified state (Up: true, and status Unknown).

This is corrected by this commit, and further fixes:
- check and return ready only when a remote site is
found in the status output
- check if all peer sites are ready, if multiple are found
and return ready appropriately

Signed-off-by: Shyamsundar Ranganathan <srangana@redhat.com>",38,55,1,0,"2018-01-08 15:47:21","1671.09"
"ceph/ceph-csi","76ddf8e3061af8e9c35775745191ff1977333346","humblec","2022-07-26 04:52:19","false","deploy: introduce new log level for sidecar controllers

At present we have single log level configuration for all the containers
running for our CSI pods, which has been defaulted to log Level 5.
However this cause many logs to be spitted in a cluster and cause log
spamming to an extent. This commit introduce one more log level control
for CSI pods called sidecarLogLevel which defaults to log Level 1.

The sidecar controllers like snapshotter, resizer, attacher..etc has
been configured with this new log level and driver pods are with old
configruation value.

This allow us to have different configuration options for sidecar
constrollers and driver pods.

With this, we will also have a choice of different configuation setting
instead of locking onto one variable for the containers deployed via CSI driver.

To summarize the CSI containers maintained by Ceph CSI driver has log
level 5 and controllers/sidecars not maintained by Ceph CSI driver has
log level 1 configuration.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",40,54,1,1,"2018-01-08 15:47:21","1658.55"
"ceph/ceph-csi","011d4fc81c6b36e21436c9b311275394e8c64b51","nixpanic","2022-07-18 16:13:36","false","cleanup: create k8s.io/mount-utils Mounter only once

Recently the k8s.io/mount-utils package added more runtime dectection.
When creating a new Mounter, the detect is run every time. This is
unfortunate, as it logs a message like the following:

```
mount_linux.go:283] Detected umount with safe 'not mounted' behavior
```

This message might be useful, so it probably good to keep it.

In Ceph-CSI there are various locations where Mounter instances are
created. Moving that to the DefaultNodeServer type reduces it to a
single place. Some utility functions need to accept the additional
parameter too, so that has been modified as well.

See-also: kubernetes/kubernetes#109676
Signed-off-by: Niels de Vos <ndevos@redhat.com>",40,54,1,1,"2018-01-08 15:47:21","1651.02"
"ceph/ceph-csi","efabe70a46f1e3805c3c84aade1f39e4186f5b57","Madhu-1","2022-07-25 04:40:20","false","e2e: remove kubernetes 1.22 check

We run CI jobs on kubernetes 1.22 by default
and we dont need to have a check to make sure
we have atleast Kubernetes 1.22 for few tests.
As we have CI runs on 1.22 by default, Removing
unwanted check.

updates: #3086
depends-on #3255

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,54,1,1,"2018-01-08 15:47:21","1657.54"
"ceph/ceph-csi","f1711431356959fe2aed57f1db1e7a4ce90f4726","Madhu-1","2022-07-12 08:49:25","false","cephfs: round to cephfs size to multiple of 4Mib

Due to the bug in the df stat we need to round off
the subvolume size to align with 4Mib.

Note:- Minimum supported size in cephcsi is 1Mib,
we dont need to take care of Kib.

fixes #3240

More details at https://github.com/ceph/ceph/pull/46905

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",41,54,1,1,"2018-01-08 15:47:21","1644.71"
"ceph/ceph-csi","9d07b914c3412a7240d72d28c17e2a8bb4cf9115","gman0","2019-02-18 19:36:53","true","Merge pull request #203 from Madhu-1/fix-spell

Fix misspelled words",28,13,0,0,"2018-01-08 15:47:21","405.41"
"ceph/ceph-csi","704cb5c941f7850800286e955c2db1de409ca35b","Madhu-1","2022-06-27 13:08:36","false","revert: rbd: consider remote image health for primary

When the image is force promoted to primary on the
cluster the remote image might not be in replaying
state because due to the split brain state. This
PR reverts back the commit
c3c87f2ef33e8d8ad08d7d9f28b59d1aedc4ef31. Which we added
to check the remote image status.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",42,54,1,1,"2018-01-08 15:47:21","1629.89"
"ceph/ceph-csi","2df55a55a3f276ffeaac3dc36450702ce47f60f8","nixpanic","2022-06-29 07:37:50","false","e2e: use `exclusive-lock` together with `lock_on_read`

When using `lock_on_read`, the RBD image needs to have the
`exclusive-lock` feature enabled too.

Fixes: #3221
Signed-off-by: Niels de Vos <ndevos@redhat.com>",42,54,1,1,"2018-01-08 15:47:21","1631.66"
"ceph/ceph-csi","8a47904e8f1a22496b8af79d22a4210a7b06aad8","Madhu-1","2022-06-28 08:22:05","false","rbd: add unit test for checkHealthyPrimary

Removed the code in checkHealthyPrimary which
makes the ceph call, passing it as input now.
Added unit test for checkHealthyPrimary function

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",43,54,1,1,"2018-01-08 15:47:21","1630.69"
"ceph/ceph-csi","3acaa018dbb971df40b29a848eba1ca0c0420299","Madhu-1","2022-06-22 05:48:10","false","rbd: issue resync only if the force flag is set

During failover we do demote the volume on the primary
as the image is still not promoted yet on the remote cluster,
there are spurious split-brain errors reported by RBD,
the Cephcsi resync will attempt to resync from the ""known""
secondary and that will cause data loss

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",42,53,1,1,"2018-01-08 15:47:21","1624.58"
"ceph/ceph-csi","0807fd2e6ca4a97b3a09b6b7d279dc393b8141f2","gman0","2022-04-06 12:39:40","false","journal: added csi.volume.backingsnapshotid image attribute

Signed-off-by: Robert Vasek <robert.vasek@cern.ch>",44,51,1,0,"2018-01-08 15:47:21","1549.87"
"ceph/ceph-csi","c9943320ace5792f8549e85fb6a6121ba68aaf70","Madhu-1","2022-06-02 05:36:14","false","cephfs: skip NetNamespaceFilePath if the volume is pre-provisioned

In case of pre-provisioned volume the clusterID is
not set in the volume context as the clusterID is missing
we cannot extract the NetNamespaceFilePath from the
configuration file. For static volume and dynamically
provisioned volume the clusterID is set.

Note:- This is a special case to support mounting PV
without clusterID parameter.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",38,53,1,1,"2018-01-08 15:47:21","1605.58"
"ceph/ceph-csi","e8c0e75e048fd216d689686daeed19157f0d5604","nixpanic","2022-06-03 12:39:14","false","ci: check more reviews in retest action

It seems PullRequests.ListReviews() returns 30 reviews by default. This
is practical for pagination, but not so much for a GitHub action. There
is the rare occasion that the number of reviews if higher than 30. If
that is the case, the retest action does not capture the latest reviews,
which is where the APPROVED status is set.

By increasing the number of results to 100 per page, we should have
sufficient space for many more reviews and automated retest-ing.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",37,53,1,1,"2018-01-08 15:47:21","1606.87"
"ceph/ceph-csi","793072deab101794ce101536c8e36701e98cc84f","humblec","2022-06-02 04:37:22","false","doc: remove attacher sidecar mentions from chart README

This commit remove the references to the attacher sidecar
attributes.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",38,53,1,1,"2018-01-08 15:47:21","1605.53"
"ceph/ceph-csi","c0fa88435f9cd9347fd939cff39abbb525a84e9f","humblec","2022-06-01 10:48:02","false","deploy: remove external-attacher sidecar from cephfs deployment

CephFS CSI driver dont need attacher sidecar for its operations.
This commit remove the same. The RBAC has also got adjusted.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",37,53,1,1,"2018-01-08 15:47:21","1604.79"
"ceph/ceph-csi","9e5cad173d4dd4d48f517452af4a016f2134591b","Madhu-1","2022-06-01 09:49:08","false","rebase: skip newly added complicated check in golangci-lint

skipping maintidx,exhaustruct and containedctx tests
which seems complicated to fix.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",37,53,1,1,"2018-01-08 15:47:21","1604.75"
"ceph/ceph-csi","2655d2edca323c94d25bd64b44306d7997921fe0","humblec","2022-05-31 07:33:33","false","deploy: update external snapshotter to v6.0.1

This commit update the external snapshotter to latest version
of the same.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",36,53,1,1,"2018-01-08 15:47:21","1603.66"
"ceph/ceph-csi","8d3bb8294963a01af9845ff1b653e9d2509c3793","humblec","2022-06-02 04:34:48","false","deploy: remove `attachrequired` param from csidriver object

As the attacher is no longer required we have to mention the same
for csidriver object parameter.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",38,53,1,1,"2018-01-08 15:47:21","1605.53"
"ceph/ceph-csi","ba93a2b037fd1b0a72a101b4c3523eb2f096d52e","humblec","2022-05-23 10:33:25","false","cephfs: adjust RBAC for CephFS provisioner role

CephFS CSI driver does not need permissions on Node,ConfigMap objects.
This PR also adjust the update->Patch for a couple of RBAC.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",35,52,1,1,"2018-01-08 15:47:21","1595.78"
"ceph/ceph-csi","952105e55131671383945301c1556b4189154b2e","Rakshith-R","2022-05-17 06:51:16","false","e2e: remove TODO update nfs node-plugin with fix csi-driver-nfs#319

This commits removes
TODO: update nfs node-plugin that has kubernetes-csi/csi-driver-nfs#319
Since, the nfsplugin image is already updated to v4.0.0.

Signed-off-by: Rakshith R <rar@redhat.com>",37,52,1,1,"2018-01-08 15:47:21","1589.63"
"ceph/ceph-csi","87beaac25bbdce34c4bc72d3a06ee530c6c723f4","humblec","2021-08-09 13:49:19","false","rbd: add ReadWriteOncePod in accessModeStrToInt() conversion function

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",119,43,0,1,"2018-01-08 15:47:21","1306.67"
"ceph/ceph-csi","ef1d589caad6e7d39cfd2e6f0c131ad1b5ee979f","nixpanic","2022-04-20 12:04:02","false","ci: use `requeue` instead of `refresh` for re-adding PRs to the queue

The current version of Mergify provides a `requeue` command in addition
to `refresh`. After a CI job failed, the PR needs to be re-added to the
queue, so the `requeue` command is more appropriate.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",42,51,1,1,"2018-01-08 15:47:21","1562.84"
"ceph/ceph-csi","1ced736447e504c3a72d8ed8c3d8c7b7200b409d","humblec","2022-04-19 16:19:39","false","cephfs: change the image registry for sidecars

This commit change the image registry URL for sidecars in the
CephFS deployment from `k8s.gcr.io` to `registry.k8s.io` as
the migration is happening from former to the latter.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",41,51,1,1,"2018-01-08 15:47:21","1562.02"
"ceph/ceph-csi","64a9b1fa5906d65478cdb5fb244b133bc1b1cfbe","Madhu-1","2022-04-11 04:35:07","false","rbd: consider remote image health for primary

To consider the image is healthy during the Promote
operation currently we are checking only the image
state on the primary site. If the network is flaky
or the remote site is down the image health is
not as expected. To make sure the image is healthy
across the clusters check the state on both local
and the remote clusters.

some details:
https://bugzilla.redhat.com/show_bug.cgi?id=2014495

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",44,51,1,1,"2018-01-08 15:47:21","1553.53"
"ceph/ceph-csi","1da19680b431b147a18f2892a41166b8757b8643","nixpanic","2022-03-30 16:00:32","false","nfs: support new and old NFS-management commands

The `ceph nfs export ...` commands have changed in recent Ceph releases.
Use the most recent command as a default, fall back to the older command
when an error is reported.

This shoud make the NFS-provisioner work on any current Ceph version.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",48,51,1,1,"2018-01-08 15:47:21","1543.01"
"ceph/ceph-csi","32ecbdeb71c14f330a2ed96336cb16405d06f5e9","humblec","2022-04-04 09:41:39","false","doc: update documentation for release 3.6.0

This commit add upgrade documentation for release 3.6.0
and also update support matrix for v3.6.0.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",45,51,1,1,"2018-01-08 15:47:21","1547.75"
"ceph/ceph-csi","519202629ee4de05c7d0dd341a1b3271248ced17","Madhu-1","2022-04-06 15:05:41","false","ci: remove release-v3.4 mergify rules

as we have deprecated the 3.4 release
removing the mergify rules for the same.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",44,51,1,1,"2018-01-08 15:47:21","1549.97"
"ceph/ceph-csi","bd3db134b9c357b64e4b2270d879710ac7eadc5f","humblec","2022-03-07 12:30:41","false","build: consume quincy release of Ceph

This promotes the ceph release to Quincy

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",44,50,1,1,"2018-01-08 15:47:21","1520.86"
"ceph/ceph-csi","010fd816ddca781503d537236a861544ebfb1af1","nixpanic","2022-03-18 09:49:03","false","nfs: store the calling Context in NFSVolume

NFSVolume instances are short lived, they only extist for a certain gRPC
procedure. It is easier to store the calling Context in the NFSVolume
struct, than to pass it to some of the functions that require it.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",43,50,1,1,"2018-01-08 15:47:21","1530.75"
"ceph/ceph-csi","e874c9c11bda386dfa21c0edf699e90df681e640","tblgit","2022-03-08 12:45:01","false","rbd: fix topology snapshot pool

Restoring a snapshot with a new PVC results with a wrong
dataPoolName in case of initial volume linked
to a storageClass with topology constraints and erasure coding.

Signed-off-by: Thibaut Blanchard <thibaut.blanchard@gmail.com>",45,50,1,0,"2018-01-08 15:47:21","1521.87"
"ceph/ceph-csi","a7315a04c1439115354bb1296a534b77926991af","Madhu-1","2022-03-15 11:01:38","false","rbd: remove kubernetes csi prefixed parameters

remove kubernetes csi prefixed parameters
from the volumeContext as we dont want
to store it in the PV VolumeAttributes.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",45,50,1,1,"2018-01-08 15:47:21","1527.8"
"ceph/ceph-csi","a56f9a0c05175032c10addcddedaf8c36e5cadd5","Rakshith-R","2022-02-21 12:25:23","false","rbd: flatten datasource image before creating volume

This commit ensures that parent image is flattened before
creating volume.
- If the data source is a PVC, the underlying image's parent
  is flattened(which would be a temp clone or snapshot).
  hard & soft limit is reduced by 2 to account for depth that
  will be added by temp & final clone.

- If the data source is a Snapshot, the underlying image is
  itself flattened.
  hard & soft limit is reduced by 1 to account for depth that
  will be added by the clone which will be restored from the
  snapshot.

Flattening step for resulting PVC image restored from snapshot is removed.
Flattening step for temp clone & final image is removed when pvc clone is
being created.

Fixes: #2190

Signed-off-by: Rakshith R <rar@redhat.com>",41,49,1,1,"2018-01-08 15:47:21","1503.86"
"ceph/ceph-csi","77011fbc61cb858683ad2984fa8c2f4368619ef1","Madhu-1","2022-03-15 11:04:28","false","cephfs: remove kubernetes csi prefixed parameters

remove kubernetes csi prefixed parameters
from the volumeContext as we dont want
to store it in the PV VolumeAttributes.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",45,50,1,1,"2018-01-08 15:47:21","1527.8"
"ceph/ceph-csi","6dd5fe9360ca2ef4af75b7dbdba0f9c47d1106cc","Rakshith-R","2022-03-18 04:48:21","false","ci: use CEPH_CSI_BOT token for retest action

For retest action's comment `@Mergifyio refresh`
to be accepted by mergifyio,
the bot should have write permissions to the repo.
Therefore, use Ceph-csi-bot instead of github actions
bot.

Signed-off-by: Rakshith R <rar@redhat.com>",43,50,1,1,"2018-01-08 15:47:21","1530.54"
"ceph/ceph-csi","d357bebbc21895cd8d01bf0f04e2db425b4b95c9","Madhu-1","2022-01-17 07:14:39","false","cephfs: disallow creating small volumes from snapshot/volume

as per the CSI standard the size is optional parameter,
as we are allowing the clone to a bigger size
today we need to block the clone to a smaller size
as its a have side effects like data corruption etc.

Note:- Even though this check is present in kubernetes
sidecar as CSI is CO independent adding the check
here.

fixes: #2718

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",42,48,1,1,"2018-01-08 15:47:21","1469.64"
"ceph/ceph-csi","548a752ff076a276544792e375fab0b0bdc1ea6a","gman0","2022-02-15 14:27:40","false","e2e: added test for verifying that ceph-fuse recovery works for new pods

Signed-off-by: Robert Vasek <robert.vasek@cern.ch>",39,49,1,0,"2018-01-08 15:47:21","1497.94"
"ceph/ceph-csi","4f0bb2315bb1229b89ab43fed6bcc3114073692b","Rakshith-R","2022-03-02 10:30:48","false","rbd: add `aws-sts-metdata` encryption type

With Amazon STS and kubernetes cluster is configured with
OIDC identity provider, credentials to access Amazon KMS
can be fetched using oidc-token(serviceaccount token).
Each tenant/namespace needs to create a secret with aws region,
role and CMK ARN.
Ceph-CSI will assume the given role with oidc token and access
aws KMS, with given CMK to encrypt/decrypt DEK which will stored
in the image metdata.

Refer: https://docs.aws.amazon.com/STS/latest/APIReference/welcome.html
Resolves: #2879

Signed-off-by: Rakshith R <rar@redhat.com>",42,50,1,1,"2018-01-08 15:47:21","1515.78"
"ceph/ceph-csi","d5c98f81a202292e81a390b1b60afbd75ee3b63d","Madhu-1","2022-02-17 06:24:47","false","rbd: make image features as optional parameter

Makes the rbd images features in the storageclass
as optional so that default image features of librbd
can be used. and also kept the option to user
to specify the image features in the storageclass.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",38,49,1,1,"2018-01-08 15:47:21","1499.61"
"ceph/ceph-csi","fb3835691f2a90ea1661b60833d8cacfc42e5593","Madhu-1","2022-02-17 06:01:34","false","rbd: add support for deep-flatten image feature

as deep-flatten is long supported in ceph and its
enabled by default in the librbd, providing an option
to enable it in cephcsi for the rbd images we are
creating.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",38,49,1,1,"2018-01-08 15:47:21","1499.59"
"ceph/ceph-csi","aa6297e164290d67d22f88bc832eb2f72fdad2ad","gman0","2022-02-02 13:45:39","false","cleanup: refactor helper functions in nodeserver.go

Refactored a couple of helper functions for easier resue.

* Code for building store.VolumeOptions is factored out into a separate function.

* Changed args of getCredentailsForVolume() and NodeServer.mount() so that
  instead of passing in whole csi.NodeStageVolumeRequest, only necessary
  properties are passed explicitly. This is to allow these functions to be
  called outside of NodeStageVolume() where NodeStageVolumeRequest is not
  available.

Signed-off-by: Robert Vasek <robert.vasek@cern.ch>",43,49,1,0,"2018-01-08 15:47:21","1485.92"
"ceph/ceph-csi","26696b49790b8d0a9f1cf701ff96fd6aacd40911","nixpanic","2022-02-14 15:56:15","false","e2e: retry deleting Rook artifacts in case of error

On occasion deploying CephFS components fail due to errors like these:

    failed to delete provisioner rbac .../csi-provisioner-rbac.yaml

By using the deleteResource() helper, an retry is done in case of a
failure.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",40,49,1,1,"2018-01-08 15:47:21","1497.01"
"ceph/ceph-csi","9c50e255fb4f2a3cad918db2c4e5a9af1696f38a","sgissi","2022-02-12 17:01:10","false","helm: make ceph.conf ConfigMap name configurable

ConfigMap name was hardcoded and led to conflicts. Fixes #2858.

Signed-off-by: Silvio Gissi <silvio@gissilabs.com>",39,49,1,0,"2018-01-08 15:47:21","1495.05"
"ceph/ceph-csi","409eda5cf36b25dcb4935dbb76384ac5b30e1fc6","rootfs","2019-02-06 17:58:04","true","Merge pull request #176 from kfox1111/fixes

Fix package check. Remove extra files.",26,13,0,0,"2018-01-08 15:47:21","394.34"
"ceph/ceph-csi","8a0377ef02d35ffe1ea855bdb7b67ce750466ee0","nixpanic","2022-02-14 15:55:43","false","e2e: retry creating StorageClass in case of error

There have been errors while CephFS tests were running, like:

    failed to create storageclass: etcdserver: request timed out

When retrying to create the StorageClass, the e2e tests are expected to
continue and (hopefully) succeed.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",40,49,1,1,"2018-01-08 15:47:21","1497.01"
"ceph/ceph-csi","3922cfc860b48f25e9bbbb46d4b97e8f9e7753ad","Madhu-1","2022-02-17 10:45:21","false","e2e: consider not found error in deployment check

it might need sometime for the deployment to
get created, consider the NotFound as a valid
error and retry again.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",38,49,1,1,"2018-01-08 15:47:21","1499.79"
"ceph/ceph-csi","46378f3bfc6e60e6e4d6dc06b93ce7d4b4db8423","Madhu-1","2022-02-14 11:18:31","false","rbd: log stderror when running modprobe

logging the error is not user-friendly and
it contains system error message. Log the
stderr which is user-friendly error message
for identifying the problem.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,49,1,1,"2018-01-08 15:47:21","1496.81"
"ceph/ceph-csi","f6894909d77ae03648094baa4c0410ceb3a7369b","nixpanic","2022-02-04 13:36:19","false","util: use `vaultNamespace` if `vaultAuthNamespace` is not set

When a tenant configures `vaultNamespace` in their own ConfigMap, it is
not applied to the Vault configuration, unless `vaultAuthNamespace` is
set as well. This is unexpected, as the `vaultAuthNamespace` usually is
something configured globally, and not per tenant.

The `vaultAuthNamespace` is an advanced option, that is often not needed
to be configured. Only when tenants have to configure their own
`vaultNamespace`, it is possible that they need to use a different
`vaultAuthNamespace`. The default for the `vaultAuthNamespace` is now
the `vaultNamespace` value from the global configuration. Tenants can
still set it to something else in their own ConfigMap if needed.

Note that Hashicorp Vault Namespaces are only functional in the
Enterprise version of the product. Therefor this can not be tested in
the Ceph-CSI e2e with the Open Source version of Vault.

Fixes: https://bugzilla.redhat.com/2050056
Reported-by: Rachael George <rgeorge@redhat.com>
Signed-off-by: Niels de Vos <ndevos@redhat.com>",45,49,1,1,"2018-01-08 15:47:21","1487.91"
"ceph/ceph-csi","2daf2f9f0c6ba1bb28d0ae2977dcd062724afa7f","Madhu-1","2022-01-11 07:14:22","false","cephfs: log error message if clone fails

During CreateVolume from snapshot/volume,
its difficult to identify if the clone is
failed and a new clone is created. In case
of clone failure logging the error message
for better debugging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",43,48,1,1,"2018-01-08 15:47:21","1463.64"
"ceph/ceph-csi","e4284745c653eb6c21672ba5dc23a79e55b277a9","Yuggupta27","2022-01-04 10:06:02","false","rebase: update to latest csi-addons/spec

Signed-off-by: Yug Gupta <yuggupta27@gmail.com>",46,48,1,0,"2018-01-08 15:47:21","1452.51"
"ceph/ceph-csi","f7f5a41774b5b0a8c24b7e9a3a79439b9ed5f4f7","humblec","2021-11-22 06:56:06","false","e2e: reformat error message with consistent formatting

To make the error return consistent across e2e tests we have decided
to remove with error presence from the logs and this commit
does that for e2e/cephfs_helper.go.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",55,46,0,1,"2018-01-08 15:47:21","1409.38"
"ceph/ceph-csi","c461f9d9b71ae8df668903db459190f25413ea3c","Rakshith-R","2021-11-22 05:11:08","false","helm: use ""version: 3-canary"" for helm charts on ""devel""

Version field for helm Chart.yaml needs to have SemVer 2
compatible value, therefore use ""<MAJOR-VERSION>-canary""
on ""devel"" branch.

Refer: https://helm.sh/docs/topics/charts/#the-chartyaml-file

Signed-off-by: Rakshith R <rar@redhat.com>",55,46,0,1,"2018-01-08 15:47:21","1409.31"
"ceph/ceph-csi","929e17d21b4941ef165a9aebb60090f92340e957","humblec","2021-11-22 06:56:50","false","e2e: reformat error message with consistent formatting

To make the error return consistent across e2e tests we have decided
to remove with error presence from the logs and this commit
does that for e2e/snapshot.go.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",55,46,0,1,"2018-01-08 15:47:21","1409.38"
"ceph/ceph-csi","ba60566cfb294c572e05d7c039011d1d725ba675","nixpanic","2021-11-18 09:50:27","false","e2e: retry on ""transport: missing content-type field"" error

The e2e sometimes fail getting objects like PVCs from the Kubernetes API
server, and log the following error:

    Error getting pvc ""rbd-6940"" in namespace ""rbd-694"": rpc error: code = Unknown desc = OK: HTTP status code 200; transport: missing content-type field

By checking the error message, and initiating a retry on this failure,
CI jobs should fail less regulary.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",55,46,0,1,"2018-01-08 15:47:21","1405.5"
"ceph/ceph-csi","58074109d1355776474127eb1d7c2ab37b87eb58","nixpanic","2021-11-23 14:42:32","false","Revert ""ci: have Mergify label PRs for `actions/` with `ci/skip/e2e`""

It seems that the matching condition on the modified files with

    -files~=^(!?actions/)

validates to 'true' when that is not intended. The example in the
Mergify documentation does not seem to be correct :-/

This reverts commit 411bf33a3d57e28640a52c6a071b59b4d167e6b0.

See-also: https://docs.mergify.com/examples/#merging-based-on-modified-files
Signed-off-by: Niels de Vos <ndevos@redhat.com>",56,46,0,1,"2018-01-08 15:47:21","1410.7"
"ceph/ceph-csi","8488d6bec29a143eb948a055c4d5a97adb1c2ae0","Rakshith-R","2021-11-22 06:06:15","false","ci: fix helm chart push for release branches

Currently BRANCH_NAME for release branches is not set causing
the source in helm chart to be set as
sources:
  - https://github.com/ceph/ceph-csi/tree//charts/ceph-csi-cephfs

Current change fixes it.

Signed-off-by: Rakshith R <rar@redhat.com>",55,46,0,1,"2018-01-08 15:47:21","1409.35"
"ceph/ceph-csi","0a5bd09a612c3f36629d9401170814ddca458ed4","Madhu-1","2021-11-16 15:02:22","false","ci: fix branch name in retest action

updated the branch name from main to
devel in retest action workflow.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",57,46,0,1,"2018-01-08 15:47:21","1403.72"
"ceph/ceph-csi","b62de1376dbc05b583bf50ff1ee1f276d062cf90","Madhu-1","2021-11-16 14:55:59","false","ci: update github workflow to test docker build

updated github action to test a retest action
docker build workflow.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",57,46,0,1,"2018-01-08 15:47:21","1403.71"
"ceph/ceph-csi","c4ceadd06a57d9341b71a818da2b986457c80e0a","Madhu-1","2021-11-16 14:55:00","false","ci: fix docker build issue for retest

fix docker build `cannot normalize nothing`

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",57,46,0,1,"2018-01-08 15:47:21","1403.71"
"ceph/ceph-csi","191b603974e4e44501e5826a20a0eef3b78440a2","Rakshith-R","2021-11-16 10:48:23","false","ci: remove gh action gosec linter,since it is already part of golangci

This commit removes gosec standalone linter and related parts,
since golangci linter runs gosec linter too.

Signed-off-by: Rakshith R <rar@redhat.com>",57,46,0,1,"2018-01-08 15:47:21","1403.54"
"ceph/ceph-csi","b95f3cdcbc1d3659afd48551e96744fd988db6bd","nixpanic","2021-11-02 11:02:06","false","ci: do not let dependabot automatically rebase

When dependabot creates a PR, and an other gets merged, the bot
automatically triggers a rebase. This will drop any approvals, causing
delays in the review/merge process.

The project uses Mergify to automatically rebase when needed, and
approvals are retained when Mergify rebases PR. By disabling the
auto-rebasing done by dependabot, fewer rebases should be needed,
contributors only need to review once, and CI jobs are triggered less
often.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",54,46,0,1,"2018-01-08 15:47:21","1390.55"
"ceph/ceph-csi","5a4bf4d151c15a0fce376bd89c1ec5644fba6368","humblec","2021-11-02 11:58:14","false","doc: add migration design documentation

This commit adds migration design doc which carry information about
the required changes and design for rbd intree to csi migration.

Fixes https://github.com/ceph/ceph-csi/issues/2596
Updates https://github.com/ceph/ceph-csi/issues/2509

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",54,46,0,1,"2018-01-08 15:47:21","1390.59"
"ceph/ceph-csi","ff0911fb6acc104ea29fc470318016545ffd95ac","humblec","2021-10-25 09:15:16","false","rbd: add unittests for IsMigrationSecret and ParseAndSetSecretMapFromMigSecret

This commit adds unit tests for newly introduced migration specific
functions.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",53,45,0,1,"2018-01-08 15:47:21","1382.48"
"ceph/ceph-csi","b49bf4b9875663ee432ba1b61691952ebb112260","humblec","2021-10-24 08:48:28","false","rbd: parse migration secret and set it for controller server operations

This commit adds a couple of helper functions to parse the migration
request secret and set it for further csi driver operations.

More details:

The intree secret has a data field called ""key"" which is the base64
admin secret key. The ceph CSI driver currently expect the secret to
contain data field ""UserKey"" for the equivalant. The CSI driver also
expect the ""UserID"" field which is not available in the in-tree secret
by deafult. This missing userID will be filled (if the username differ
than 'admin') in the migration secret as 'adminId' field in the
migration request, this commit adds the logic to parse this migration
secret as below:

""key"" field value will be picked up from the migraion secret to ""UserKey""
field.
""adminId"" field value will be picked up from the migration secret to ""UserID""
field

if `adminId` field is nil or not set, `UserID` field will be filled with
default value ie `admin`.The above logic get activated only when the secret
is a migration secret, otherwise skipped to the normal workflow as we have
today.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",54,45,0,1,"2018-01-08 15:47:21","1381.46"
"ceph/ceph-csi","fedbb01ec379bf1311ee8d5b725fcff7adb1c901","gman0","2021-06-09 14:28:59","false","doc: add proposal doc for CephFS snapshots as shallow RO volumes

This patch adds a proposal document for ""CephFS snapshots
as shallow RO volumes"".

Updates: #2142
Signed-off-by: Robert Vasek <robert.vasek@cern.ch>",109,41,0,0,"2018-01-08 15:47:21","1246.7"
"ceph/ceph-csi","74723383348d8639b7b97f8ef5770daa28ca850b","Madhu-1","2021-10-25 11:22:14","false","rbd: remove unwanted const

for comparing the image states use the states
defined in the go-ceph avoid creating of the
deplicate const in cephcsi.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",53,45,0,1,"2018-01-08 15:47:21","1382.57"
"ceph/ceph-csi","41d894f98a1094e2f449cea73f38ae761506d6fe","Rakshith-R","2021-10-12 06:32:56","false","e2e: add test cases for EnsureImageCleanup

This tests pvc,pvcsmartclone,snapshot deletion when
underlying images are in trash.

Signed-off-by: Rakshith R <rar@redhat.com>",49,45,0,1,"2018-01-08 15:47:21","1369.36"
"ceph/ceph-csi","fe9020260d682840eb21546a952646fa25b57b82","Madhu-1","2021-10-05 09:53:08","false","rbd: move flattening to helper function

in NodeStage operation we are flattening
the image to support mounting on the older
clients. this commits moves it to a helper
function to reduce code complexity.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",55,45,0,1,"2018-01-08 15:47:21","1363.5"
"ceph/ceph-csi","90ecd2d7e84449288529b2884164b612c26b106c","Madhu-1","2021-10-07 04:57:17","false","rbd: use go-ceph to get mirroring info

use go-ceph api to get image mirroring info.

closes #2558

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",55,45,0,1,"2018-01-08 15:47:21","1365.3"
"ceph/ceph-csi","0d51f6d833f749214377c8c9616cd68760c7de58","Madhu-1","2021-10-14 11:34:18","false","rbd: check local image description for split-brain

In some corner case like `re-player shutdown` the
local image will not be in error state. It would
be also worth considering `description` field to
make sure about split-brain.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",49,45,0,1,"2018-01-08 15:47:21","1371.57"
"ceph/ceph-csi","4e61156dc499609b8786abad2be3310ebb4ba5e6","humblec","2021-10-08 08:25:01","false","rbd: change iteration variable name in the migration test to be specific

we reuse or overload the variable name in the test execution at present.
This commit use a different variable name as initialized in each run

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",54,45,0,1,"2018-01-08 15:47:21","1366.44"
"ceph/ceph-csi","cff0e04e3cefbe255a2ad1e92d1862206587cd3c","nixpanic","2021-10-12 11:36:41","false","build: remove unneeded empty YAML document from deployment artifacts

The generated files under the deploy/ directory contain an empty YAML
document that may cause confusion for some versions of kubectl. Dropping
the unneeded `---` start of the file for the header should make parsing
of the deployment artifacts a little less error prone.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",49,45,0,1,"2018-01-08 15:47:21","1369.58"
"ceph/ceph-csi","90d246fc55142fbcfe9ef8fd34c4a20526c00ce0","Rakshith-R","2021-09-30 12:30:47","false","doc: update dev standup meeting link

Signed-off-by: Rakshith R <rar@redhat.com>",59,45,0,1,"2018-01-08 15:47:21","1357.61"
"ceph/ceph-csi","59b7a261754d8b4af4fbf63e2794bca08329c421","Rakshith-R","2021-09-28 05:06:20","false","rbd: modify copyEncryptionConfig to accept copyOnlyPassphrase arg

During PVC snapshot/clone both kms config and passphrase needs to copied,
while for PVC restore only passphrase needs to be copied to dest rbdvol
since destination storageclass may have another kms config.

Signed-off-by: Rakshith R <rar@redhat.com>",61,45,0,1,"2018-01-08 15:47:21","1355.3"
"ceph/ceph-csi","34a21cdbe328327db43c65255f0492670ed13c40","Madhu-1","2021-09-16 14:46:07","false","cleanup: move mount functions to new pkg

moved fuse and kernel mount functions
to a new package.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",61,44,0,1,"2018-01-08 15:47:21","1343.71"
"ceph/ceph-csi","981835a07323d54a8abd2e34517a9af045f37894","Madhu-1","2021-09-17 09:59:56","false","deploy: remove extra permission for snapshot controller

removed extra PSP permissions added for the
snapshot controller deployment

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",62,44,0,1,"2018-01-08 15:47:21","1344.51"
"ceph/ceph-csi","6f1066fd36d34a11b9a15b99f204af98f4c845c4","Madhu-1","2021-09-17 08:37:17","false","helm: reduce the PSP permission for rbd deployment

rbd deployment doesnot need extra permission like
privileged and extra volumes etc.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",62,44,0,1,"2018-01-08 15:47:21","1344.45"
"ceph/ceph-csi","42a6c3c006efc53aea57e07dd74ee2770a9128f8","Rakshith-R","2021-09-08 10:02:55","false","ci: pass $DISK_CONFIG properly to minikube start

Having double quotes around $DISK_CONFIG led to these args
not being properly passed to minikube start. This commit fixes it.

Signed-off-by: Rakshith R <rar@redhat.com>",66,44,0,1,"2018-01-08 15:47:21","1336.51"
"ceph/ceph-csi","9e88fd1eb768b82f967583a550120ef77e7de43c","Madhu-1","2021-09-17 08:27:01","false","deploy: reduce the PSP permission for rbd deployment

rbd deployment doesnot need extra permission like
privileged,Capabilities and remove unwanted volumes.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",62,44,0,1,"2018-01-08 15:47:21","1344.44"
"ceph/ceph-csi","3aab8dad008c8f9299296e9f63fc00ef533214d5","Madhu-1","2021-09-08 10:17:34","false","ci: start minikube with psp addon

we need to start minikube with the
PodSecurityPolicy admission controller
and the pod-security-policy addon enabled
for psp.

Ref:- https://minikube.sigs.k8s.io/docs/
tutorials/using_psp/#tutorial

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",66,44,0,1,"2018-01-08 15:47:21","1336.52"
"ceph/ceph-csi","9d1e98ca60911351794c398cf936ba8c5a36b3c8","Rakshith-R","2021-09-06 05:27:50","false","rbd: check for clusterid mapping in genVolFromVolumeOptions()

This commit adds capability to genVolFromVolumeOptions() to fetch
mapped clusted-id & mon ips for mirrored PVC on secondary cluster
which may have different cluster-id.

This is required for NodeStageVolume().

We also don't need to check for mapping during volume create requests,
so it can be disabled by passing a bool checkClusterIDMapping as false.

GetMonsAndClusterID() is modified to accept bool checkClusterIDMapping
based on which clustermapping is checked to fetch mapped cluster-id and
mon-ips.

Signed-off-by: Rakshith R <rar@redhat.com>",66,44,0,1,"2018-01-08 15:47:21","1334.32"
"ceph/ceph-csi","1f5963919f0140fbc25913b58b02f04a0828666e","humblec","2021-09-16 05:34:06","false","util: get clusterID for the passed in mon string

as part of migration support, the clusterID has to be fetched
from passed in mon. Because the intree RBD storage class only
got monitor and not `clusterID` parameter support. However, in
CSI, SC has the `clusterID` parameter support but not mon. Due
to that we have to fetch the clusterID from config file for the
passed in mon and use it in our operations. This adds a helper
function to retrieve clusterID from passed in mon string.

Updates https://github.com/ceph/ceph-csi/issues/2509

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",60,44,0,1,"2018-01-08 15:47:21","1343.32"
"ceph/ceph-csi","5a53a9ad768b493da2a8bc1c404b47c0787fdd6f","Madhu-1","2021-09-02 05:06:21","false","e2e: update e2e deployment for ceph conf

updated e2e deployment code to create and
delete the ceph conf configmap.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",109,44,0,1,"2018-01-08 15:47:21","1330.3"
"ceph/ceph-csi","e99dd3dea4759887a051eda486ef1df5149ad689","Rakshith-R","2021-09-07 11:50:51","false","util: read ceph.conf by calling conn.ReadConfigFile(CephConfigPath)

The configurations in cpeh.conf is not picked up by rados connection
automatically, hence we need to call conn.ReadConfigFile before calling
Connect().

Signed-off-by: Rakshith R <rar@redhat.com>",66,44,0,1,"2018-01-08 15:47:21","1335.59"
"ceph/ceph-csi","dda811c1954ff55338e5a0bc582807e5501c2949","humblec","2021-09-02 06:02:51","false","doc: add 'known to work' CO matrix with versions tested

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",109,44,0,1,"2018-01-08 15:47:21","1330.34"
"ceph/ceph-csi","28899a36c85537d10c2c5dcf183d63711b389a7d","nixpanic","2021-09-01 09:51:11","false","ci: do not run commitlint GitHub Action for dependabot

The commit messages that Dependabot (@app/dependabot) creates are not
always accepted by the commitlint check. The configuration for
dependabot does not give a lot of options to customize the message, so
instead of adjusting the message to pass commitlint, just skip the check
(Mergify does not require commitlint status either).

See-also: #2460
Signed-off-by: Niels de Vos <ndevos@redhat.com>",109,44,0,1,"2018-01-08 15:47:21","1329.5"
"ceph/ceph-csi","cc6c51395ebb41550a535caf952abc656caf44f6","Madhu-1","2021-08-26 05:28:02","false","deploy: update templates for ceph.conf

updated cephfs and rbd templates to mount
the ceph.conf configmap.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",116,43,0,1,"2018-01-08 15:47:21","1323.32"
"ceph/ceph-csi","43925477a5fbb6cb5a5dfa394a71b6095d611a4d","Madhu-1","2021-08-26 05:28:48","false","doc: update deployment doc for ceph.conf

updated cephfs and rbd deployment doc
to deploy the configmap that contains the
ceph.conf

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",116,43,0,1,"2018-01-08 15:47:21","1323.32"
"ceph/ceph-csi","3f6db2f851f4549abf00a311e2fe7e8509e6a2ed","nixpanic","2021-08-31 07:50:27","false","rebase: update k8s.io/kubernetes dependencies to v0.22.1

Dependabot can not update the dependencies for k8s.io/kubernetes
correctly. Helping the bot out with this additional commit.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",106,44,0,1,"2018-01-08 15:47:21","1328.42"
"ceph/ceph-csi","3417fe86e60b3745294edc521048d2be352f4e35","humblec","2021-08-25 09:37:49","false","doc: update support matrix for deprecated ceph csi releases

As discussed in https://github.com/ceph/ceph-csi/issues/2438
we are marking ceph csi release support to N.(x-1) release versions.

N = latest major release
x = latest minor release

This address the release version support matrix based on the
same.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",115,43,0,1,"2018-01-08 15:47:21","1322.49"
"ceph/ceph-csi","dc8479f5ade7d5e90130c640272d4d13c97ccc12","Rakshith-R","2021-06-29 04:55:11","false","ci: make csi sidecar image version configurable in minikube.sh

This commit makes csi sidecar image version configurable in
minikube.sh.

Signed-off-by: Rakshith R <rar@redhat.com>",116,42,0,1,"2018-01-08 15:47:21","1266.3"
"ceph/ceph-csi","5089a4ce5d771508c87231d9ca45b0f3c6a6d02c","humblec","2021-08-17 05:39:56","false","doc: correct some source code comments in rbd driver code

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",116,43,0,1,"2018-01-08 15:47:21","1314.33"
"ceph/ceph-csi","8e00c2c810faf92cda1282097ad3376999cda1ae","humblec","2021-08-12 08:23:42","false","helm: correct `watch` verb in topology RBAC

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",115,43,0,1,"2018-01-08 15:47:21","1309.44"
"ceph/ceph-csi","8ca7a3582020b5774672abbfe4b6685c9f18617c","Rakshith-R","2021-08-02 11:04:12","false","e2e: use retryKubectlFile() for creating & deleting secrets

Signed-off-by: Rakshith R <rar@redhat.com>",119,43,0,1,"2018-01-08 15:47:21","1300.55"
"ceph/ceph-csi","39d6752fc14868f315de3aaf21518b7727beeafa","Rakshith-R","2021-06-28 05:11:20","false","rbd: use `CSIInstanceID` var instead of ""default"" in RegenerateJournal()

Signed-off-by: Rakshith R <rar@redhat.com>",116,42,0,1,"2018-01-08 15:47:21","1265.31"
"ceph/ceph-csi","a15892a87a121e9e5205d71d8f3a536cdb8ce96c","Rakshith-R","2021-08-10 06:07:36","false","ci: move kubectl_retry() to utils.sh to be able to import it

Signed-off-by: Rakshith R <rar@redhat.com>",120,43,0,1,"2018-01-08 15:47:21","1307.35"
"ceph/ceph-csi","0744ad502bcdfab82cc14cad0dec61813042ef4f","Rakshith-R","2021-07-16 13:16:36","false","e2e: add prefixname to rbd controller test

Signed-off-by: Rakshith R <rar@redhat.com>",123,42,0,1,"2018-01-08 15:47:21","1283.65"
"ceph/ceph-csi","3c852199625333c8ccf8db18e592bb5627270d6b","Madhu-1","2021-08-09 04:48:32","false","rbd: consider empty mirroring mode

consider the empty mirroring mode when
validating the snapshot interval and
the scheduling time.
Even if the mirroring Mode is not set
validate the snapshot scheduling details
as cephcsi sets the mirroring mode to default
snapshot.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",121,43,0,1,"2018-01-08 15:47:21","1306.29"
"ceph/ceph-csi","9c91710d68b05d994d03c125c8133fbb57879d6e","nixpanic","2022-04-11 15:00:25","false","e2e: run NFS-provisioner tests together with CephFS

NFS testing will automatically be enabled when CephFS is enabled. This
makes sure the NFS tests run in the CI where there are different jobs
for CephFS and RBD. With a dedicated testNFS variable, it is still
possible to only run the NFS tests, when both CephFS and RBD are
disabled.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",45,51,1,1,"2018-01-08 15:47:21","1553.97"
"ceph/ceph-csi","891a840aa619e8d8e51b609bcb52b1d11cee6dcc","nixpanic","2022-05-02 11:18:20","false","deploy: add resize support to NFS-provisioner deployment

Resizing is handled by the csi-resizer container, which needs to run in
the provisioner Pod. In addition to the container, the StorageClass also
needs to allow volume expansion.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",38,52,1,1,"2018-01-08 15:47:21","1575.81"
"ceph/ceph-csi","df047ddaaf61d032fdc41071328b90bad44baa3f","Madhu-1","2022-05-09 04:39:05","false","ci: fix commitlint problem

Still seeing the issue of the commitlint
as below

fatal: unsafe repository
('/go/src/github.com/ceph/ceph-csi'
is owned by someone else)
To add an exception for this directory,
call:

git config --global --add safe.directory \
/go/src/github.com/ceph/ceph-csi
Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",40,52,1,1,"2018-01-08 15:47:21","1581.54"
"ceph/ceph-csi","610162b5f4a2809ffb123111dff566e6742f04df","nixpanic","2020-12-08 14:07:30","false","cleanup: return error type in genVolFromVolumeOptions()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,35,0,1,"2018-01-08 15:47:21","1061.43"
"ceph/ceph-csi","9533889b643f8274e8a0aae5583b022ddb1f5ee3","nixpanic","2022-05-08 13:03:07","false","ci: do not set `safe.directory` for commitlint checkout

Commitlint fails with errors like:

```
git fetch -v origin devel
fatal: unsafe repository ('/go/src/github.com/ceph/ceph-csi' is owned by
someone else)
To add an exception for this directory, call:

	git config --global --add safe.directory /go/src/github.com/ceph/ceph-csi
make: *** [Makefile:153: commitlint] Error 128
```

By not setting the option with actions/checkout@v3, the error should not
happen anymore.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",40,52,1,1,"2018-01-08 15:47:21","1581.89"
"ceph/ceph-csi","fc1529f268cec4774b0684ef6609b7fa041a3c4a","nixpanic","2022-05-08 13:43:52","false","rebase: bump nfsplugin to v4.0.0

Several bugs have been fixed and new features have been added.

See-also: https://github.com/kubernetes-csi/csi-driver-nfs/releases/tag/v4.0.0
Signed-off-by: Niels de Vos <ndevos@redhat.com>",40,52,1,1,"2018-01-08 15:47:21","1581.91"
"ceph/ceph-csi","acbedc52bf5c12b3a0e433130aee76e4df44d833","Yuggupta27","2020-11-09 06:00:18","false","cephfs: Add 'pending' state for clone status

In certain cases, clone status can be 'pending'.
In that case, abort error message should be
returned similar to that during 'in-progress'
state.

Co-authored-by: Madhu Rajanna <madhupr007@gmail.com>
Signed-off-by: Yug <yuggupta27@gmail.com>",81,34,0,0,"2018-01-08 15:47:21","1031.09"
"ceph/ceph-csi","7a69c5e238a2f72c695cae0335317b4e9f66d6ba","nixpanic","2020-11-19 12:18:24","false","build: add ROOK_VERSION to build.env

The CentOS CI jobs use Rook v1.3.9, this version should be places in
build.env just like other versions that the CI jobs detect.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",83,34,0,1,"2018-01-08 15:47:21","1041.35"
"ceph/ceph-csi","14700b89d1b60c2c36d7c1398742fbd87bee5038","Madhu-1","2020-10-21 05:34:03","false","rbd: update inuse logic of a rbd image

in case of mirrored image, if the image is
primary a watcher will be added by the rbd
mirror deamon on the rbd image.
we have to consider 2 watcher to check image
is in use.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",75,33,0,1,"2018-01-08 15:47:21","1013.07"
"ceph/ceph-csi","8d86bac9b7edf6e979bd7064930b24ce9e853975","Madhu-1","2020-11-18 03:30:15","false","e2e: set imagePullPolicy to ifNotPresent

If the imagePullPolicy is not set and the image
tag is empty or latest the image is always pulled.
This commit sets the policy to pull image if not
present.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",80,34,0,1,"2018-01-08 15:47:21","1039.99"
"ceph/ceph-csi","66046e4312456619f5c41435cf5f9764b95913a4","nixpanic","2020-10-01 07:08:09","false","cephfs: drop credentials from createVolume()

The credentials are not used anymore, the volume object is already
connected to the cluster when createVolume() is called.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",119,33,0,1,"2018-01-08 15:47:21","994.14"
"ceph/ceph-csi","f6468407796ec6f74be7b60d2b9c0ad7c01261c5","nixpanic","2020-10-02 08:14:17","false","cephfs: implement getFscID() with go-ceph

Fixes: #1550
Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,33,0,1,"2018-01-08 15:47:21","995.19"
"ceph/ceph-csi","7b940df568113201f896e9262055c95b3375c4ea","nberlee","2020-09-20 01:00:51","false","helm: add pod anti-affinity for provisioner deployments

When replication count is >1 of the provisioner, the added anti-affinity rules
will prevent provisioner operators from scheduling on the same nodes. The
kubernetes scheduler will spread the pods across nodes to improve availability
during node failures.

Signed-off-by: Nico Berlee <nico.berlee@on2it.net>",131,32,0,0,"2018-01-08 15:47:21","981.88"
"ceph/ceph-csi","6a5f1380b03cee7016f7f3f9dfd5ebf74fecad24","nberlee","2020-09-20 00:43:26","false","deploy: add pod anti-affinity for provisioner deployments

The added anti-affinity rules prevent provisioner operators from scheduling on
the same nodes. The kubernetes scheduler will spread the pods across nodes to
improve availability during node failures.

Signed-off-by: Nico Berlee <nico.berlee@on2it.net>",131,32,0,0,"2018-01-08 15:47:21","981.87"
"ceph/ceph-csi","e89394a5a6bbdb1d8f213ca6d9c0e2832364b352","humblec","2020-10-12 11:23:48","false","deploy: update csi-snapshotter to matching version of deployment

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",88,33,0,1,"2018-01-08 15:47:21","1004.32"
"ceph/ceph-csi","364b3afcaa4b5fb38dd1bb9cc1d2833dd0395383","humblec","2020-10-13 06:23:47","false","rbd: correct typo in validateRequestedVolumeSize()

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",76,33,0,1,"2018-01-08 15:47:21","1005.11"
"ceph/ceph-csi","0b5da6a12796cdf10e467b220e24d703e08cbb7f","humblec","2020-10-08 05:36:03","false","doc: update encryption doc for rbd

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",120,33,0,1,"2018-01-08 15:47:21","1001.08"
"ceph/ceph-csi","c89afebd4ad7b0c01658996cb8bba3e1cc4fb01c","Yuggupta27","2020-09-30 13:28:18","false","ci: Upgrade rbd upgrade tests

Add snapshot and pvc cloning test cases
to rbd upgrade testing.

Signed-off-by: Yug <yuggupta27@gmail.com>",122,33,0,0,"2018-01-08 15:47:21","992.4"
"ceph/ceph-csi","a7b65087af5ba98e3603073c09e21b1c6072b053","Madhu-1","2020-08-19 09:22:26","false","rbd: fix return error message

incase of flattening error return the
flatten error.
Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",120,31,0,1,"2018-01-08 15:47:21","951.23"
"ceph/ceph-csi","670c3b6d23b3807c0345eb93e9222e8b5379c4fe","chenxu1990","2020-07-31 02:55:24","false","deploy: update the default configmap value of helm chart

update the configmap from ceph-csi-config-cephfs and ceph-csi-config-rbd to ceph-csi-config

Signed-off-by: chenxu1990 <xuchen1990xx@gmail.com>",119,31,0,0,"2018-01-08 15:47:21","932.96"
"ceph/ceph-csi","fcb2bcdb12f97f4ee4d37b736721e36b150c3e21","Yuggupta27","2020-08-20 05:00:04","false","ci: skip functional tests for pre-commit config yaml

Skip functional tests for changes in `.pre-commit-config.yaml`.

Signed-off-by: Yug <yuggupta27@gmail.com>",121,31,0,0,"2018-01-08 15:47:21","952.05"
"ceph/ceph-csi","f74922fe577258de34957f4ea903022863b3c0e9","Yuggupta27","2020-08-21 09:25:00","false","doc: Correct static-pvc doc

Correct minor nit in static-pvc doc.

Signed-off-by: Yug <yuggupta27@gmail.com>",119,31,0,0,"2018-01-08 15:47:21","953.23"
"ceph/ceph-csi","ed364cf6ea8311387743a4196a02b012bc2c2e6b","Madhu-1","2019-09-27 08:27:13","false","Replace `'` with `""` in mergify.yaml

as per the examples rules in
https://doc.mergify.io/examples.html, string are
surrounded  by `""""`, it better to follow same
format here also.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",85,20,0,1,"2018-01-08 15:47:21","623.94"
"ceph/ceph-csi","38ca08bf65dc404d8ebf826d688492c72cfc2739","Madhu-1","2019-08-22 16:57:23","false","Context based logging for rbd

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",84,19,0,1,"2018-01-08 15:47:21","589.3"
"ceph/ceph-csi","3af364e7b5eff71568e3049edffa579fe1b51603","Madhu-1","2019-08-24 09:14:15","false","move to statand context package

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",85,19,0,1,"2018-01-08 15:47:21","590.98"
"ceph/ceph-csi","81218a69f9f81260d1f363dbc6933213723cca3d","nixpanic","2023-06-02 08:59:52","false","build: address `nolintlint` errors from new golangci-lint

Signed-off-by: Niels de Vos <ndevos@ibm.com>",31,65,1,1,"2018-01-08 15:47:21","1970.97"
"ceph/ceph-csi","1f4839cb5eb04d22f653c75ad69e1fe15be74e5a","humblec","2020-08-04 04:21:31","false","cephfs: add subvolume struct and getSubvolumeInfo calls

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","937.02"
"ceph/ceph-csi","180f0f660fc034c610cf33d797e7a38514c4558c","humblec","2022-01-04 10:41:53","false","e2e: make recreateCSIRBDPods() function to a generic one

This commit make recreateCSIRBDPods function to be a general one
so that it can be consumed by more clients.

Updates https://github.com/ceph/ceph-csi/issues/2509

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",46,48,1,1,"2018-01-08 15:47:21","1452.54"
"ceph/ceph-csi","d7ebb18122925132f94ebc1f947ecc8f4f8ccef7","rootfs","2018-03-08 18:23:13","true","Merge pull request #31 from sbezverk/v0.2.0

Refactor CSI RBD plugin to V0.2.0",2,2,0,0,"2018-01-08 15:47:21","60.11"
"ceph/ceph-csi","dcafdb519ee17b60e769279f84fe44a78061d9f6","Madhu-1","2019-12-17 09:07:46","false","discard umount error if directory is not mounted

if the directory is not mounted return nil
during umount of mountPoint

Discard error if error is os.IsNotExist

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",104,23,0,1,"2018-01-08 15:47:21","703.97"
"ceph/ceph-csi","33a2fb1b0675cfb482d7e7f7781481d30a549d87","phlogistonjohn","2019-03-19 17:30:47","false","deploy.sh: use a variable to choose ""docker"" command

This change allows the use of alternatives to or wrappers around
the normal docker command when running the deploy.sh script.

Example: CONTAINER_CMD=podman ./deploy.sh

Signed-off-by: John Mulligan <jmulligan@redhat.com>",32,14,0,0,"2018-01-08 15:47:21","436.32"
"ceph/ceph-csi","ec61f0746b9e4fec5b2d57f06479723b5b7f29c4","nixpanic","2020-03-13 09:24:01","false","util: implement GetPoolName() with go-ceph

Remove an other call to the ""rados"" executable and re-use the existing
connection to the Ceph cluster.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",112,26,0,1,"2018-01-08 15:47:21","795.23"
"ceph/ceph-csi","6df6cbd9e02b1ce3f5ebe49b037e20586d1d1338","nixpanic","2020-07-24 14:19:42","false","ci: require jjb-validate job to succeed for ci/centos branch

The jjb-validate job can not be run in parallel, so it may fail when
multiple PRs for the ci/centos branch are sent. However, the ci/centos
branch is not very active, so problems should be minimal.

In case of problems, leave the following comment in the PR and the job
should restart:

    /retest ci/centos/jjb-validate

See-also: #1273
Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,30,0,1,"2018-01-08 15:47:21","926.44"
"ceph/ceph-csi","35c5afcd3effc7fa34c22178e75c12404883cf66","nixpanic","2020-08-10 09:20:28","false","ci: always fetch GIT_SINCE for commitlint

When running the commitlint CI job, the branch that the PR is based on
may not be available. That makes it impossible for commitlint to detect
the changes between the HEAD of the branch, and the commits in the PR.

By fetching GIT_SINCE unconditionally, commitlint should be able to
detect the changes and only run the tests against the commits that were
added through the PR.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",120,31,0,1,"2018-01-08 15:47:21","942.23"
"ceph/ceph-csi","3ca8b1e006cee4bbd72b5fd8ecf93305e3ecadb0","nixpanic","2021-12-22 07:40:40","false","doc: add --csi-addons-endpoint option to rbd deployment

Signed-off-by: Niels de Vos <ndevos@redhat.com>",53,47,1,1,"2018-01-08 15:47:21","1439.41"
"ceph/ceph-csi","624b08253c5a1c3d87017cfcf7dff4eab47a048d","rootfs","2019-02-28 13:34:00","true","Merge pull request #236 from Madhu-1/bump-ver-5.0

bump helm chat version from 0.4.0 to  0.5.0",31,14,0,0,"2018-01-08 15:47:21","415.16"
"ceph/ceph-csi","1c03334a9008d54bc27d39c0d32f7216fc1d2672","Madhu-1","2019-01-17 06:20:33","false","Add constant for rbd and ndb

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",16,12,0,1,"2018-01-08 15:47:21","373.86"
"ceph/ceph-csi","0ddfdc5b69ad0a7a3039101c47f7e26f163180f9","Rakshith-R","2022-05-16 07:25:08","false","deploy: add nfs pvc-clone & pod-clone example yaml

Signed-off-by: Rakshith R <rar@redhat.com>",37,52,1,1,"2018-01-08 15:47:21","1588.65"
"ceph/ceph-csi","33bf3fae6b38b7aa5ff00a6201b9749f5207a76e","Yuggupta27","2021-06-08 05:33:29","false","e2e: add logErr function to log errors

logErr function logs all the ocured errors
with a message that is passed for occurence
of each error.

Co-authored-by: Niels de Vos <ndevos@redhat.com>
Co-authored-by: Madhu Rajanna <madhupr007@gmail.com>
Signed-off-by: Yug <yuggupta27@gmail.com>",110,41,0,0,"2018-01-08 15:47:21","1246.32"
"ceph/ceph-csi","5df45f1c1bcbc3a752fa8a7e0d6ad53801c55abd","irq0","2022-08-17 14:08:48","false","kms: testing: add KMS test dummy registry

Add registry similar to the providers one. This allows testers to
add and use GetKMSTestDummy() to create stripped down provider
instances suitable for use in unit tests.

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",41,55,1,0,"2018-01-08 15:47:21","1679.93"
"ceph/ceph-csi","203920d8f4d386606b177a7a7fb240365bd3d6bd","nixpanic","2021-12-09 08:18:39","false","rbd: move driver component into the rbd/driver package

The rbd package contains several functions that can be used by
CSI-Addons Service implmentations. Unfortunately it is not possible to
do this, as the rbd-driver needs to import the csi-addons/rbd package to
provide the CSI-Addons server. This causes a circular import when
services use the rbd package:

 - rbd/driver.go import csi-addons/rbd
 - csi-addons/rbd import rbd (including the driver)

By moving rbd/driver.go into its own package, the circular import can be
prevented.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",50,47,1,1,"2018-01-08 15:47:21","1426.44"
"ceph/ceph-csi","6df22b38bab426e22838c05a60d409ae5d54c48e","rootfs","2019-02-04 15:57:56","true","Merge branch 'csi-v1.0' into fix-134",23,13,0,0,"2018-01-08 15:47:21","392.26"
"ceph/ceph-csi","5cabfe78cb7fcb42a5b156c172dc467d110985e1","rootfs","2019-02-27 14:10:59","true","Merge pull request #234 from Madhu-1/fix-rbac

Fix rbac issue in rbd plugin",31,14,0,0,"2018-01-08 15:47:21","414.18"
"ceph/ceph-csi","e4b24711f6dd15da59b2b917d1c62ed78939539b","rootfs","2019-01-23 15:58:50","false","cope with latest changes in csi provisioner and deprecations",21,12,0,0,"2018-01-08 15:47:21","380.26"
"ceph/ceph-csi","58eb8d1de778f31fb4f8768798e1b5202614e0b8","gman0","2018-04-13 12:34:48","false","updated cephfs/util",2,3,0,0,"2018-01-08 15:47:21","94.87"
"ceph/ceph-csi","e30279721765d3140c202a2ceb24a4ec35af268c","Yuggupta27","2021-03-19 09:09:28","false","e2e: update listRBDImages to list images in different pool

made pool as a argument of listRBDImages to support
listing of rbd images in different pools.

Co-authored-by: Madhu Rajanna <madhupr007@gmail.com>
Signed-off-by: Yug <yuggupta27@gmail.com>",86,38,0,0,"2018-01-08 15:47:21","1166.47"
"ceph/ceph-csi","bc18732cb7e61309cba8eae607e3e6881cde280b","Yuggupta27","2021-08-12 07:11:55","false","ci: require job for k8s v1.22 in place of v1.19

As kubernetes v1.19 is heading towards its EOL
on 2021-09-30, run tests on kubernetes v1.22
and require it to pass for merging.

Signed-off-by: Yug Gupta <yuggupta27@gmail.com>",115,43,0,0,"2018-01-08 15:47:21","1309.39"
"ceph/ceph-csi","2ef5729a287deb37e5adb8435813b42b64ff0e21","agarwal-mudit","2020-07-07 06:44:23","false","cleanup: restructure a part of existing code

Have restructered a part of existing code so that it would be useful to get pvdata

Signed-off-by: Mudit Agarwal <muagarwa@redhat.com>",110,30,0,0,"2018-01-08 15:47:21","910.12"
"ceph/ceph-csi","35e8c3b3a58abc20be2ddde4a0a6b810ace93d5e","ShyamsundarR","2020-01-23 02:48:46","false","CephFS: Added ENOENT checks for possible missing volumes

Added checks in DeleteVolume RPC, for image missing errors, and
taking appropriate actions to cleanup the CSI reservations.

Further removed forcing a volume purge, and instead added checks
for missing volume errors in purgeVolume.

This should now fix issues where an continuation of an interrupted
DeleteVolume call, that only deleted the backing volume, will
proceed and not error out.

Signed-off-by: ShyamsundarR <srangana@redhat.com>",108,24,0,0,"2018-01-08 15:47:21","744.96"
"ceph/ceph-csi","e627a6166cbff6b86b324e38dce9408bb21aa026","rootfs","2019-02-25 13:04:38","true","Merge pull request #220 from Madhu-1/skip_cred_log

remove  secret and key  from logging",30,14,0,0,"2018-01-08 15:47:21","412.14"
"ceph/ceph-csi","dab551c8e2792d854c4273f70d1e5b50094ccaef","humblec","2019-06-10 11:18:03","true","Merge pull request #419 from humblec/release-prep

Add pointers and sidecar information in the README",75,17,0,1,"2018-01-08 15:47:21","517.06"
"ceph/ceph-csi","5bceb590fd05800abf63b6113c9935986c0854a2","humblec","2020-08-04 04:14:56","false","cephfs: add snap reserve/unreserve and snap exist functionalities

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","937.02"
"ceph/ceph-csi","82557e3f34ad95f4239753ad07cf9db868dad852","nixpanic","2021-07-20 09:18:58","false","util: allow configuring VAULT_BACKEND for Vault connection

It seems that the version of the key/value engine can not always be
detected for Hashicorp Vault. In certain cases, it is required to
configure the `VAULT_BACKEND` (or `vaultBackend`) option so that a
successful connection to the service can be made.

The `kv-v2` is the current default for development deployments of
Hashicorp Vault (what we use for automated testing). Production
deployments default to version 1 for now.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",126,42,0,1,"2018-01-08 15:47:21","1287.48"
"ceph/ceph-csi","bd947bbe31ecc1e17fe4314462ae2e82b11925fb","humblec","2021-07-09 10:14:51","false","util: remove deleteLock check while acquiring snapshot createLock

snapshot controller make sure the pvc which is the source for the
snapshot request wont get deleted while snapshot is getting created,
so we dont need to check for any ongoing delete operation here on the
volume.

Subjected code path in snapshot controller:

```
pvc, err := ctrl.getClaimFromVolumeSnapshot(snapshot)
.
..
pvcClone.ObjectMeta.Finalizers = append(pvcClone.ObjectMeta.Finalizers, utils.PVCFinalizer)
_, err = ctrl.client.CoreV1().PersistentVolumeClaims(pvcClone.Namespace).Update(..)
```

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",123,42,0,1,"2018-01-08 15:47:21","1276.52"
"ceph/ceph-csi","d5ea89e6039fee1abb68b94cddeee37fbad3ae21","nixpanic","2021-07-16 12:37:30","false","e2e: add retryKubectlInput() for retrying kubectl calls

Signed-off-by: Niels de Vos <ndevos@redhat.com>",123,42,0,1,"2018-01-08 15:47:21","1283.62"
"ceph/ceph-csi","f210d5758bd3a693aa75d5126354bb5d926a98f4","yati1998","2021-07-06 12:19:55","false","cleanup: spell check getImageMirroingStatus

This commit corrects the spelling for
getImageMirroingStatus() -> getImageMirroringStatus

Signed-off-by: Yati Padia <ypadia@redhat.com>",124,42,0,0,"2018-01-08 15:47:21","1274.61"
"ceph/ceph-csi","7f5df7c940e7de66edb2a3a36a414d7bd61dff01","yati1998","2021-07-13 13:09:31","false","cleanup: resolves gofumpt issues in e2e

This commit resolves gofumpt issues in
e2e folder.

Updates: #1586

Signed-off-by: Yati Padia <ypadia@redhat.com>",123,42,0,0,"2018-01-08 15:47:21","1280.64"
"ceph/ceph-csi","61bf49a4f5594c087941d5093cb42416aa96116f","humblec","2021-07-13 05:27:20","false","rbd: Get rid of locking at nodePublish

Considering kubelet make sure the stage and publish operations
are serialized, we dont need any extra locking in nodePublish

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",124,42,0,1,"2018-01-08 15:47:21","1280.32"
"ceph/ceph-csi","c66872c3c6d4351117b836eb2a596cb870bed391","yati1998","2021-07-13 08:49:11","false","cleanup: ineffective assignment

This commit resolves ineffective assignent of
snap.

Updates: #1586

Signed-off-by: Yati Padia <ypadia@redhat.com>",124,42,0,0,"2018-01-08 15:47:21","1280.46"
"ceph/ceph-csi","e088e8fd2e35d5982a1fad7be47d787015df464d","humblec","2021-07-13 05:28:32","false","cephfs: Get rid of locking at nodepublish

Considering kubelet make sure the stage and publish operations
are serialized, we dont need any extra locking in nodePublish

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",124,42,0,1,"2018-01-08 15:47:21","1280.32"
"ceph/ceph-csi","e3c7dea7d667a7057dcf0c011bcc3aed45843c75","nixpanic","2021-07-08 08:33:17","false","e2e: add test for Vault with ServiceAccount per Tenant

Signed-off-by: Niels de Vos <ndevos@redhat.com>",123,42,0,1,"2018-01-08 15:47:21","1276.45"
"ceph/ceph-csi","42f8d8d446f0ee8aa9ad62823e87073b8851e1a3","yati1998","2021-07-08 15:23:33","false","doc: Updates the helm doc with secret and sc configuration

This commit updates the helm doc with
storageclass and secret configurations.

Fixes: #2255

Signed-off-by: Yati Padia <ypadia@redhat.com>",124,42,0,0,"2018-01-08 15:47:21","1276.73"
"ceph/ceph-csi","2e978e42112cc914f3c2c9dbc11229752df2eff6","Madhu-1","2021-06-01 09:03:27","false","rbd: fix typo in error message

fixed typo in error message.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",100,41,0,1,"2018-01-08 15:47:21","1239.47"
"ceph/ceph-csi","b4dbffa316b0470c4f327f5420e57d663b6c9f83","Madhu-1","2021-06-07 05:35:08","false","util: return actual error from IsMountPoint

as callers are already taking care of returing
the GRPC error code return the actual error
from  the IsMountPoint function.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",109,41,0,1,"2018-01-08 15:47:21","1245.32"
"ceph/ceph-csi","bfe64d4aee5eec0236d3a67e0c8da736c40c1185","YingshuoTao","2021-06-02 11:14:58","false","cephfs: pass extra volume attributes to static PV

when using pre-provisioned volumes, pass these parameters:
- kernelMountOptions
- fuseMountOptions
- subVolumeGroup
in spec.csi.volumeAttributes in PV declaration

Signed-off-by: YingshuoTao <frigid.blues@gmail.com>",107,41,0,0,"2018-01-08 15:47:21","1240.56"
"ceph/ceph-csi","67d73cd6e9c9cede7d89667165fde4020c77a771","Madhu-1","2021-05-03 11:02:40","false","rbd: flatten image if the depth is not zero

flatten the image if the deep-flatten feature
is present on the images in the chain or if the
images in chain is not zero, as we cannot check
the deep-flatten feature the images which are
in trash.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",93,40,0,1,"2018-01-08 15:47:21","1211.55"
"ceph/ceph-csi","0f44c6acb721fcc9a3b034485dbdc28d809335ab","yati1998","2021-05-11 12:43:39","false","cleanup: address wasted assign issues

At places variable is reassigned without
being used.

Signed-off-by: Yati Padia <ypadia@redhat.com>",92,40,0,0,"2018-01-08 15:47:21","1218.62"
"ceph/ceph-csi","95387c3b5effc6552b72f2b26d077dbae303c90a","Madhu-1","2021-03-18 07:16:36","false","rbd: check for peer site status

Do resync if the image is in unknow or in error
state.

Check for the current image state for up+stopped
or up+replaying and also all peer site status
should be un up+stopped to confirm that resyncing
is done and image can be promoted and used.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",84,38,0,1,"2018-01-08 15:47:21","1165.4"
"ceph/ceph-csi","5e19803b960c2b16ff8fc60bdf4d2ef3929b1eec","Madhu-1","2021-02-10 08:54:02","false","build: update ceph tag in Makefile

As octopus supports the rbd mirroring,
updated ceph tag from nautilus to
octopus in Makefile.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",83,37,0,1,"2018-01-08 15:47:21","1127.46"
"ceph/ceph-csi","c642637cec0a7a2db1331a15ea6949811a3ef341","Madhu-1","2021-02-09 07:33:11","false","util: register replication controller

as RBD is implementing the replication
we are registering it. For CephFS, its
not implementing the replication we are
passing nil so we dont want to register
it.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",83,37,0,1,"2018-01-08 15:47:21","1126.41"
"ceph/ceph-csi","721640178b7624755a9dbae80f53ad4a256eff29","Rakshith-R","2021-03-17 06:18:36","false","cephfs: fix unmountVolume function

This commit fixes bug in unmount function which caused
unmountVolume to fail when targetPath was already unmounted.

Signed-off-by: Rakshith R <rar@redhat.com>",86,38,0,1,"2018-01-08 15:47:21","1164.36"
"ceph/ceph-csi","3fd0557550468e7b6795073a6fae6318856c092a","rootfs","2018-12-06 00:14:11","true","Merge pull request #105 from mcronce/csi-v1.0.0

[WIP] Updated to CSI v1.0.0",16,11,0,0,"2018-01-08 15:47:21","328.35"
"ceph/ceph-csi","327e81430d909b7a9cc5c6c95d566796dc6e1366","rootfs","2019-04-26 16:37:35","true","Merge pull request #320 from phlogistonjohn/jjm-remove-old-main-files

cmd: remove old command main files",58,16,0,0,"2018-01-08 15:47:21","473.28"
"ceph/ceph-csi","fbc189ff66cd15e792013da1de443a1b0c088cb2","rootfs","2019-03-04 15:00:50","true","Merge pull request #245 from Madhu-1/fix-linter

replace gometalinter with golangci",32,14,0,0,"2018-01-08 15:47:21","422.22"
"ceph/ceph-csi","7b0f051fd458f2198b423e94c93ccc609827c38e","Rakshith-R","2021-11-09 11:48:29","false","rbd: remove redundant rbdVolume.connect() in flattenRbdImage()

This commit removes `rv.Connect(cr)` since the rbdVolume should
have an active connection in this stage of the function call.

`rv.getCloneDepth(ctx)` will work after a connect to the cluster.

Signed-off-by: Rakshith R <rar@redhat.com>",56,46,0,1,"2018-01-08 15:47:21","1396.58"
"ceph/ceph-csi","0e96199a1c0fbb8b1242ee852ad1b1fc4e04cb58","nixpanic","2020-10-19 07:10:00","false","cephfs: free resources when newVolumeOptionsFromVolID() errors out

The allocated, and potentially connected, volumeOptions object in
newVolumeOptionsFromVolID() is not cleaned-up in case of errors. This
could cause resource leaks.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",77,33,0,1,"2018-01-08 15:47:21","1011.14"
"ceph/ceph-csi","fd62a5897aaabef696a4aecea74b9172b1dc6b24","nixpanic","2020-04-24 10:29:38","false","tests: allow external-sources for shellcheck

While introducing scripts/build_step.inc.sh the tests start to fail as
the script is included and each shell script is tested separately. By
adding the option --external-sources to shellcheck, the related warnings
are not reported.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",105,27,0,1,"2018-01-08 15:47:21","836.28"
"ceph/ceph-csi","decfc1ae2cf6b571bd191905e1fd388493eeed1f","nixpanic","2020-06-18 11:33:06","false","rbd: make hasSnapshotFeature() a method of rbdVolume

Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,29,0,1,"2018-01-08 15:47:21","890.32"
"ceph/ceph-csi","055975f790bb73e5a51d9f29b36cbcb7d38e09d5","nixpanic","2020-11-04 10:26:49","false","cephfs: implement getCloneState() with go-ceph

Signed-off-by: Niels de Vos <ndevos@redhat.com>",80,34,0,1,"2018-01-08 15:47:21","1027.28"
"ceph/ceph-csi","676b9f84c3e871197100ffd641088f723f3c5ea9","humblec","2021-06-25 12:48:23","false","e2e: reformat long lines in this package to 120 chars

We have many declarations and invocations..etc with long lines which are
very difficult to follow while doing code reading. This address the issues
in 'e2e/pod.go' files to restrict the line length to 120 chars.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",118,41,0,1,"2018-01-08 15:47:21","1262.63"
"ceph/ceph-csi","5aa1e4d22523366d8b5105714637c0f04119e2e5","humblec","2022-01-04 09:23:21","false","rbd: change the configmap of HPCS/KP key names to reflect the IBM string

considering IBM has different crypto services (ex: SKLM) in place, its
good to keep the configmap key names with below format

`IBM_KP_...` instead of `KP_..`

so that in future, if we add more crypto services from IBM we can keep
similar schema specific to that specific service from IBM.

Ex: `IBM_SKLM_...`

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",46,48,1,1,"2018-01-08 15:47:21","1452.48"
"ceph/ceph-csi","3fe714c4fac6d59e2049a2ea02739b65bf64306c","nixpanic","2021-03-12 12:50:07","false","cleanup: rename rbdSnapshot.SnapID to VolID

The rbdSnapshot and rbdVolume structs have many common attributes. In
order to combine these into an rbdImage struct that implements shared
functionality, having the same attribute for the ID makes things much
easier.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",95,38,0,1,"2018-01-08 15:47:21","1159.63"
"ceph/ceph-csi","cc96bdaac3f3211cdf2eced67aef58ffb58d77c7","nixpanic","2021-01-28 13:59:48","false","rbd: allocate extents when expanding an image

When and RBD image is expanded, the additional extents need to get
allocated when the image was thick-provisioned.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",81,37,0,1,"2018-01-08 15:47:21","1115.68"
"ceph/ceph-csi","ec105bd7823b1dfd325ecdf06f73c3ffe5ffbeb3","agarwal-mudit","2021-04-26 10:50:10","false","cephfs: expand clone error messages

Adding ""snapshot clone"" in the clone error messages.

Signed-off-by: Mudit Agarwal <muagarwa@redhat.com>",86,40,0,0,"2018-01-08 15:47:21","1203.54"
"ceph/ceph-csi","cae8f529dc0d864c1677750320997e5553e45864","agarwal-mudit","2020-05-14 03:26:14","false","docs: add doc for cephFS static PV

With the change in #382, support for static PV for CephFS was added.
This change is to update the already existing doc for the same.

Issue: #669

Signed-off-by: Mudit Agarwal <muagarwa@redhat.com>",112,28,0,0,"2018-01-08 15:47:21","855.99"
"ceph/ceph-csi","3081eabba520605afb3d153b58b3d3a06b1ad3e3","mehdy","2020-06-01 14:15:04","false","doc: Add rados namespace to option to csi-configs

A minimal documentation on how to use a rados namespace with rbd.

Signed-off-by: Mehdy Khoshnoody <mehdy.khoshnoody@gmail.com>",110,29,0,0,"2018-01-08 15:47:21","874.44"
"ceph/ceph-csi","63d00afb286a9dcc249e389860a210ec5073d9ff","kshlm","2019-04-16 07:49:59","true","deploy: Use aggregated ClusterRoles

The kubernetes manifests and Helm templates have been updated to use
aggregated ClusterRoles. The same change has been done in Rook as well.

Refer rook/rook#2634 and rook/rook#2975

Signed-off-by: Kaushal M <kshlmster@gmail.com>",53,15,0,0,"2018-01-08 15:47:21","462.92"
"ceph/ceph-csi","d6348545ab3d204106195e1bdfae54a3a18e1697","Madhu-1","2020-07-13 02:37:33","false","journal: Add additional operation based locking

As we are adding new functionalities like Create/Delete
snapshot,Clone from Snapshot and Clone from Volume.
with the current implementation, there are only serial
operations allowed for this functionalities, for some
function we can allow parallel operations like
Clone from snapshot and Clone from Volume and Create
`N` snapshots on a single volume.

Delete Volume: Need to ensure that there is no clone,
Snapshot create and  Expand volume in progress.

Expand Volume: Need to ensure that there is no clone,
snapshot create and cloning in progress

Delete Snapshot: Need to ensure that there is no
cloning in progress

Restore Volume/Snapshot: Need to ensure that there is
no Expand or delete operation in progress.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",114,30,0,1,"2018-01-08 15:47:21","914.95"
"ceph/ceph-csi","da60d221dfa354e915ab1e4bd2e81497898359a0","Madhu-1","2021-12-15 06:05:34","false","rbd: update size for rbdSnapshot struct

we need actual size of the rbdVolume
created for the snapshot, as we are not
storing the size of the snapshot in OMAP
we need to fetch the size from ceph cluster
and update the same on rbdSnapshot  struct.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",50,47,1,1,"2018-01-08 15:47:21","1432.35"
"ceph/ceph-csi","2f995eada29d1bf6294b5e4fd85b606e07f904b4","Rakshith-R","2021-08-02 11:12:05","false","e2e: add modification to test encrypted PVC with rbd controller

Signed-off-by: Rakshith R <rar@redhat.com>",119,43,0,1,"2018-01-08 15:47:21","1300.56"
"ceph/ceph-csi","0215b385d36a4790dd2828e367089c9e21c06e4a","rootfs","2018-01-15 17:12:33","true","Merge pull request #1 from sbezverk/the_beggining

ceph rbd csi driver",0,0,0,0,"2018-01-08 15:47:21","7.06"
"ceph/ceph-csi","80ad5b6b8f565f61832e828de1d5f2e239dbcebc","crazytaxii","2023-09-04 09:27:20","false","rbd: fixed csi-rbdplugin crashes when decoding volume ID failed

Signed-off-by: HF <crazytaxii666@gmail.com>",19,68,1,0,"2018-01-08 15:47:21","2062.99"
"ceph/ceph-csi","47b79c82ec1dc41574400f82a5af6bc3aada2e74","karthik-us","2023-07-13 07:23:53","false","e2e: Fixing the TODO in createCephfsStorageClass

Fixing the TODO from createCephfsStorageClass()
since v3.9 is released and upgrade tests will be
run from v3.9 to devel.
https://github.com/ceph/ceph-csi/pull/3994

Fixes: #3911
Signed-off-by: karthik-us <ksubrahm@redhat.com>",31,66,1,0,"2018-01-08 15:47:21","2010.9"
"ceph/ceph-csi","ebfd915ad67963f1da5c66200d81eda8e905d3c9","nixpanic","2023-07-03 15:43:27","false","build: disable ceph-iscsi repository for test-container builds too

The ceph-iscsi repository seems to provide broken metadata or packages.
Ceph-CSI does not need to install them, so disable the repository for
now.

It seems that other repositories gave issues before too, but these
repositories were disabled after installing all available updates. For
ceph-iscsi updating fails already, so disable the repositories before
updating.

Updates: #2034
Signed-off-by: Niels de Vos <ndevos@ibm.com>",34,66,1,1,"2018-01-08 15:47:21","2002.25"
"ceph/ceph-csi","db8320ce517f85fc5c85388db789cbb798b9cbcf","Rakshith-R","2023-02-02 11:53:08","false","doc: add documentation regarding read affinity

This commit adds documentation about read affinity supported
for rbd volumes.

Signed-off-by: Rakshith R <rar@redhat.com>",32,61,1,1,"2018-01-08 15:47:21","1851.09"
"ceph/ceph-csi","4235178f7c53ee3e6eba8e37cb175623fc0a8cea","Aste88","2022-02-15 23:13:39","false","helm: Add selinuxMount flag to enable/disable /etc/selinux host mount

Add selinuxMount flag to enable/disable /etc/selinux host mount inside pods
to support selinux-enabled filesystems

Signed-off-by: Francesco Astegiano <francesco.astegiano@gmail.com>",39,49,1,0,"2018-01-08 15:47:21","1498.31"
"ceph/ceph-csi","f9c369918cfa9b6cb358a34a4ff456a7a68ce0e1","Rakshith-R","2021-10-14 06:27:35","false","ci: disable rook deployed csi drivers to speed up e2e

Signed-off-by: Rakshith R <rar@redhat.com>",48,45,0,1,"2018-01-08 15:47:21","1371.36"
"ceph/ceph-csi","48108bc5493eab45db80c9bdf280a1d689c6d11c","nixpanic","2020-10-23 09:44:35","false","e2e: retry deploying on API-server timeouts

The upgrade-tests-cephfs fails relative regularly with the following
error during intial deployment:

    timeout waiting for deployment csi-cephfsplugin-provisioner with error error waiting for deployment ""csi-cephfsplugin-provisioner"" status to match expectation: etcdserver: request timed out

By detecting if the API-server returned a non-fatal error, the test does
not need to abort, but can wait for completion. PollImmediate() will
still return ErrWaitTimeout once the timeout elapsed.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,33,0,1,"2018-01-08 15:47:21","1015.25"
"ceph/ceph-csi","9d7b50dccb307429f8e52314788883117c35d062","jonasrutishauser","2020-02-18 22:07:20","false","Added forcecephkernelclient as startup parameter

Support #664 in the helm chart.

Signed-off-by: Jonas Rutishauser <jonas.rutishauser@alumni.ethz.ch>",107,25,0,0,"2018-01-08 15:47:21","770.76"
"ceph/ceph-csi","ac09c5553c652f4d788a57b02013d0b08c0962d8","humblec","2019-11-25 11:09:24","false","Add E2E for cephfs resize functionality

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",93,22,0,1,"2018-01-08 15:47:21","682.06"
"ceph/ceph-csi","52f14cf9fe3d0db58ebe4107e204e3238b1ab3ef","Madhu-1","2020-08-11 11:28:14","false","cephfs: replace klog.Error with util.ErrorLog in validateSnapshotReq

replace klog.Error with util.ErrorLog in validateSnapshotReq
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.32"
"ceph/ceph-csi","caa1eca8f65d2741693d36cd3445041723edb67d","Madhu-1","2020-07-09 07:00:13","false","ci: update kubenetes version to v1.18.5 for helm E2E

updated kubernetes version to latest version
to test cephcsi helm charts

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",110,30,0,1,"2018-01-08 15:47:21","911.13"
"ceph/ceph-csi","ff18fb1def404a1cb22809ceba56a0f78fcdf0eb","humblec","2022-11-12 06:35:25","false","build: add dnf update and add switch --nodocs to install command

this commit update the packages and then do installation of the
packages in docker build process.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",35,58,1,1,"2018-01-08 15:47:21","1764.62"
"ceph/ceph-csi","24fb43d30da038ec512ccf37b4ebf2d48cba8498","humblec","2022-11-10 07:21:37","false","doc: correct csi configuration references in the deployment

this commit correct the csi configuration documentation in
rbd deployment doc.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",36,58,1,1,"2018-01-08 15:47:21","1762.65"
"ceph/ceph-csi","1444231d05ccb26d6c55d964069c6b062ed4ce74","humblec","2019-06-04 06:10:47","true","Merge pull request #304 from humblec/contributing

Add coding.md into docs",77,17,0,1,"2018-01-08 15:47:21","511.85"
"ceph/ceph-csi","25400a7334149b0457c908df6b7e6d8c6eb99135","humblec","2020-10-15 13:54:57","false","e2e: Introduce e2e test for block mode PVC

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",76,33,0,1,"2018-01-08 15:47:21","1007.42"
"ceph/ceph-csi","9c0d5abb5ac56a5064d2e2ac4fc9bd0719fe88c8","Yuggupta27","2020-07-25 16:38:27","false","doc: Add README for upgrade-testing

Update README with upgrade testing parameters.

Signed-off-by: Yug <yuggupta27@gmail.com>",115,30,0,0,"2018-01-08 15:47:21","927.54"
"ceph/ceph-csi","9d5771722270d29927c1195cb0986d39ec5c59f4","Rakshith-R","2021-07-15 09:09:08","false","e2e: add test cases for pvc-pvcClone chain with depth 2

Signed-off-by: Rakshith R <rar@redhat.com>",123,42,0,1,"2018-01-08 15:47:21","1282.47"
"ceph/ceph-csi","b065726f19295f117c63eb9825226e6d0d6e9861","Madhu-1","2020-05-06 13:47:46","false","cephfs: use new 'ceph fs resize' command when available

Use ceph fs resize command when its available
in the cluster.if its not available fallback to
old style of resizing the subvolume

ceph change log:https://docs.ceph.com/docs/master/releases/nautilus/#v14-2-8-nautilus

Fixes #1002

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",107,28,0,1,"2018-01-08 15:47:21","849.42"
"ceph/ceph-csi","0235b9c24945ac66c9243bdcf2665df1dccc2c39","gman0","2019-02-20 14:04:30","false","k8s metadata cache: delete shouldn't fail on NotFound errors",29,13,0,0,"2018-01-08 15:47:21","407.18"
"ceph/ceph-csi","4dde3fc9e0182b2cf3175a585283866fb8e2c70d","nixpanic","2020-12-08 14:04:59","false","cleanup: return error type in encryptDevice()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,35,0,1,"2018-01-08 15:47:21","1061.43"
"ceph/ceph-csi","5c600a1bc5193b35c1f050fda527bd83be6d04c7","Madhu-1","2019-03-27 06:03:09","false","update rbd helm chats to deploy attacher as sidecar container in provisioner pod

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",45,15,0,1,"2018-01-08 15:47:21","443.84"
"ceph/ceph-csi","a44714fdfbe2df879cc99da74929e4270d2fdc33","phlogistonjohn","2019-03-20 19:15:51","false","deploy: create a new Dockerfile for unified cephcsi image

Signed-off-by: John Mulligan <jmulligan@redhat.com>",38,14,0,0,"2018-01-08 15:47:21","437.39"
"ceph/ceph-csi","ab47d83595264aff32e7ba60b95b64e1c1ab881b","phlogistonjohn","2019-04-10 18:47:12","false","cmd: remove old command main files

Now that the unified binary has its own main file under ""cmd/""
we no longer need the split main.go files.

Signed-off-by: John Mulligan <jmulligan@redhat.com>",51,15,0,0,"2018-01-08 15:47:21","457.37"
"ceph/ceph-csi","6826694618ff6a2089cc25c338a7789761528aae","dylanzr","2019-04-24 23:24:20","false","Added unit test.",56,15,0,0,"2018-01-08 15:47:21","471.57"
"ceph/ceph-csi","e0a1661beedc962b42c41296984f12a8ea7cd2ad","dylanzr","2019-04-24 23:57:01","false","linter fixes",56,15,0,0,"2018-01-08 15:47:21","471.59"
"ceph/ceph-csi","de94cb62a99b899dc95bf9db79510a1c6ae9a867","phlogistonjohn","2019-03-20 19:16:15","false","Makefile: add initial build rules for combined binary and image

Add rules and variables to the Makefile so that the unified binary
and container image can be built.

Signed-off-by: John Mulligan <jmulligan@redhat.com>",38,14,0,0,"2018-01-08 15:47:21","437.4"
"ceph/ceph-csi","a5d2abb3cc7e6f50ecd5172d7e49340ec405a113","Madhu-1","2019-04-02 08:10:15","false","Merge branch 'master' into csi-v1.0",46,15,0,1,"2018-01-08 15:47:21","449.93"
"ceph/ceph-csi","4b0ffdaaa168ceeda3c427cf02395b75515d5128","Madhu-1","2019-04-05 07:13:14","true","Merge pull request #290 from Madhu-1/fix-att

Deploy csi-attacher as sidecar container in provisioner statefulset",51,15,0,1,"2018-01-08 15:47:21","452.89"
"ceph/ceph-csi","17f5c0a7cef188a5f18c6516135baa8136b93fd0","Madhu-1","2019-01-16 13:13:38","false","use  Errorf is error  formatting is  required

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",17,12,0,1,"2018-01-08 15:47:21","373.14"
"ceph/ceph-csi","1552df6b91af37866d828441fd9b484339cc3b10","Madhu-1","2019-01-16 12:45:42","false","update make clean

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",17,12,0,1,"2018-01-08 15:47:21","373.12"
"ceph/ceph-csi","d0715f7c3d62dfeafe9fd6ac05d548077cb6b5c5","rootfs","2018-12-10 16:13:01","true","Merge pull request #107 from mcronce/csi-1.0-ci

More CI fixes for csi-v1.0",16,11,0,0,"2018-01-08 15:47:21","332.02"
"ceph/ceph-csi","ccf5f49ae6fa7d461c105d0a61a97e327794903d","plnordquist","2018-12-11 19:03:45","false","Changed version to 0.1",17,11,0,0,"2018-01-08 15:47:21","333.14"
"ceph/ceph-csi","ea753d41e27d1c0c845738ca715ced044aef8197","rootfs","2018-01-17 20:38:09","false","add git ignore

Signed-off-by: Huamin Chen <hchen@redhat.com>",0,0,0,0,"2018-01-08 15:47:21","9.2"
"ceph/ceph-csi","1fbf36c244f32ffe28e49a27b84a95f87cc1a63e","rootfs","2018-01-10 16:12:00","false","add Apache License

Signed-off-by: Huamin Chen <hchen@redhat.com>",0,0,0,0,"2018-01-08 15:47:21","2.02"
"ceph/ceph-csi","29ec9358d4136ee280461feaea9cc05350155d4a","sbezverk","2018-01-20 20:04:38","false","Starting README",0,0,0,0,"2018-01-08 15:47:21","12.18"
"ceph/ceph-csi","dfee050620e4a723905e34607c9a262ac9eba606","rootfs","2018-01-18 14:02:05","true","Merge pull request #8 from rootfs/makefile-fix

tune Makefile: clean binary; make static binary",0,0,0,0,"2018-01-08 15:47:21","9.93"
"ceph/ceph-csi","3aaa9fb876203a925c40125b2865c44d3270e13e","rootfs","2018-01-18 14:01:24","false","tune Makefile: clean binary; make static binary",0,0,0,0,"2018-01-08 15:47:21","9.93"
"ceph/ceph-csi","2c38dc6f3acce06eb586a3b01013c646ed6fec22","rootfs","2018-01-10 15:33:49","true","Merge pull request #2 from xiexingguo/wip-fix-typo

README.md: s/Interrface/Interface/",0,0,0,0,"2018-01-08 15:47:21","1.99"
"ceph/ceph-csi","d517196d5b1672788425758f8e693f0676579723","rootfs","2018-01-17 20:42:07","true","Merge pull request #7 from rootfs/git-ignore

add git ignore",0,0,0,0,"2018-01-08 15:47:21","9.2"
"ceph/ceph-csi","27334ac60d2782ade8064e07fc384cb3fbde9e8d","sbezverk","2018-01-09 18:59:50","false","just code files",0,0,0,0,"2018-01-08 15:47:21","1.13"
"ceph/ceph-csi","8614aee8ef910886c4c2715dc8dbb418e4506d59","sbezverk","2018-01-16 01:52:28","false","Making VolumeID != volName as per CSI spec",0,0,0,0,"2018-01-08 15:47:21","7.42"
"ceph/ceph-csi","06a2a069fd46435c764923193c7bc19c1678bcc4","gman0","2018-08-08 13:20:41","false","examples: cephfs storage class: changed the comments a bit",7,7,0,0,"2018-01-08 15:47:21","210.9"
"ceph/ceph-csi","6a46f381c2f5023862d9be80515b41abd273c8bd","Yuggupta27","2021-04-19 05:23:55","false","cleanup: update description to generic

Since rbdImage is a common struct for
rbdVolume and rbdSnapshot, it description
was matching to only snapshot.
This commit makes the comments generic for
both volumes and snapshots.

Signed-off-by: Yug <yuggupta27@gmail.com>",89,39,0,0,"2018-01-08 15:47:21","1196.32"
"ceph/ceph-csi","ecc33a9f863f372f5fd817d296368e8ef4934905","nixpanic","2020-10-26 13:28:09","false","cleanup: no need to validate conf.Vtype twice

conf.Vtype was verified already, no need to do it a 2nd time.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,33,0,1,"2018-01-08 15:47:21","1018.4"
"ceph/ceph-csi","2518c39956949c421d24872aa634d5fb61ded879","nixpanic","2022-11-09 13:29:20","false","ci: automatically remove `ok-to-test` and set it when queuing a PR

The `ok-to-test` label currently needs to be removed and re-added when a
PR is rebased for re-queuing.

It should be possible to automate this, by removing the `ok-to-test`
label when a PR gets queued. It can automatically be added again when
the PR has embarked the merge train.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",35,58,1,1,"2018-01-08 15:47:21","1761.9"
"ceph/ceph-csi","bdedf862de67bb2ad6e42e11a9fcf9a01260fb8c","nixpanic","2021-12-16 08:07:34","false","rebase: update to latest csi-addons/spec

Signed-off-by: Niels de Vos <ndevos@redhat.com>",52,47,1,1,"2018-01-08 15:47:21","1433.43"
"ceph/ceph-csi","0a3f9d34870f1aa80ed5b3e7864a0d1694ee3681","nixpanic","2020-10-02 08:37:52","false","cephfs: make getFsName() a method of volumeOptions

Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,33,0,1,"2018-01-08 15:47:21","995.2"
"ceph/ceph-csi","09fac4d9e29b63c39645bb63f3002152907ebc61","nixpanic","2020-12-09 07:49:31","false","e2e: fix kubectl_retry to not return a stale error

While deploying Rook, there can be issues when the environment is not
completely settled yet. On occasion the 1st kubectl command fails with

    The connection to the server ... was refused - did you specify the right host or port?

This would set the 'ret' variable to a non-zero value, before the next
retry of the kubectl command is done. In case the kubectl command
succeeds, the 'ret' variable still contains the old non-zero value, and
kubectl_retry returns the incorrect result.

By setting the 'ret' variable to 0 before calling kubectl again, this
problem is prevented.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",73,35,0,1,"2018-01-08 15:47:21","1061.17"
"ceph/ceph-csi","b8568a5bb992287259e832fd7b099a0e85614929","Madhu-1","2019-09-25 14:45:19","false","Add a check for nil secrets

Improve the error message if
secrets are not provided in request

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",86,20,0,1,"2018-01-08 15:47:21","622.21"
"ceph/ceph-csi","7c24f4d59717816d035b2479c5d67995303e27b4","Madhu-1","2020-08-11 11:13:50","false","util: add ErrorLog for log with context

added a new function ErrorLog to log with
context.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.31"
"ceph/ceph-csi","3ef11e06c3aa7f4451839aeebefc8b576c7a9206","Madhu-1","2019-03-27 04:59:40","false","deploy attacher sidecar in rbd provisioner sts

currently we are deploying external-attacher
as a seperate statefulset, which leads to
attacher communicating with the node provisoner
daemonset, This PR deploys external-attacher
as a sidecar container inside provisioner
statefulset, so that external-provisioner
always communicates with the plugin responsible
for the provision controller capcabilities.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",45,15,0,1,"2018-01-08 15:47:21","443.8"
"ceph/ceph-csi","92272d41c5ca05b7d74919a1dca2bc78ec25365a","Madhu-1","2022-05-05 07:42:36","false","ci: disable PodSecurity featuregate

PodSecurity featuregate is beta in kubernetes
1.23 and its causing problem for the existing
tests. This PR disables the PodSecurity featuregate
for now and will be enabled later.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",43,52,1,1,"2018-01-08 15:47:21","1578.66"
"ceph/ceph-csi","50d884bad3cd20ab6ff03931258636e0116b93ac","Madhu-1","2020-11-27 14:23:35","false","helm: make kubelet path configurable

removed unwanted extra arguments from the helm templates
and added a single value kubeletDir to make the kubelet
root-dir configurable.

previously used variables like socketDir,registrationDir
and pluginDir is removed now because if we have the kubelet
path we can derive all other required path for cephcsi to
work properly.

fixes: #1475

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",84,34,0,1,"2018-01-08 15:47:21","1049.44"
"ceph/ceph-csi","1c38412e392a4001dd1605deb38624fdb59af1f7","gman0","2018-07-28 08:24:07","false","cephfs: CSI 0.3.0; NodeStageVolume/NodeUnstageVolume; refactoring",5,7,0,0,"2018-01-08 15:47:21","199.69"
"ceph/ceph-csi","37c8f07ed5ae016f5c3bbe012b59b3fffcc2cc77","nixpanic","2023-03-03 11:15:38","false","rbd: do not run mkfs on a BlockMode volume

Signed-off-by: Niels de Vos <ndevos@ibm.com>",40,62,1,1,"2018-01-08 15:47:21","1882.06"
"ceph/ceph-csi","b262f06c33d06c2384856240916b6d13636e1568","iceman91176","2022-06-13 13:31:38","false","helm: enable host networking for provisioner

Adds the possibility in the helm-chart to enable hostNetworking
for provider pods.

Signed-off-by: Carsten Buchberger <c.buchberger@witcom.de>",39,53,1,0,"2018-01-08 15:47:21","1615.91"
"ceph/ceph-csi","34378aafb8054ff4af0df1e3526c1a5c1bc3258f","humblec","2022-06-09 05:19:50","false","deploy: make use of latest attacher release v3.5.0

attacher sidecar has a new release:
https://github.com/kubernetes-csi/external-attacher/releases/tag/v3.5.0

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",39,53,1,1,"2018-01-08 15:47:21","1611.56"
"ceph/ceph-csi","cbd7220b371c7120d03211a5fdc553d12a5626a0","nixpanic","2022-05-02 14:57:58","false","doc: mention ExpandVolume support for NFS in the README

Signed-off-by: Niels de Vos <ndevos@redhat.com>",38,52,1,1,"2018-01-08 15:47:21","1575.97"
"ceph/ceph-csi","f8bbd2f60f74a2e76383ebd67b0acea67fa89b4d","Madhu-1","2022-03-29 16:19:31","false","cephfs: fix omap deletion in DeleteSnapshot

The omap is stored with the requested
snapshot name not with the subvolume
snapshotname. This fix uses the correct
snapshot request name to cleanup the omap
once the subvolume snapshot is deleted.

fixes: #2974

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",49,51,1,1,"2018-01-08 15:47:21","1542.02"
"ceph/ceph-csi","ab76459e872717680748be01a9fc118f2407978d","nixpanic","2021-11-30 17:02:35","false","rbd: implement CSI-Addons Identity Service

Depending on the way Ceph-CSI is deployed, the capabilities will be
configured for the GetCapabilities procedure. The other procedures are
more straight-forward.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",52,47,0,1,"2018-01-08 15:47:21","1417.8"
"ceph/ceph-csi","1ec7c0e5d8aae15f8e599f5f5b905b830b104623","nixpanic","2021-11-23 08:13:05","false","ci: ignore case when matching Mergify config update

PRs that contain `mergify` or `Mergify` in the subject should both match
the rule to add labels. The regular expressions can include `(?i)` to
make the matching case-insensitive.

See-also: https://docs.mergify.com/configuration/#regular-expressions
Signed-off-by: Niels de Vos <ndevos@redhat.com>",57,46,0,1,"2018-01-08 15:47:21","1410.43"
"ceph/ceph-csi","2ac3f129c027fea8028efc8e535d65312538b059","humblec","2021-11-03 09:59:04","false","e2e: remove 1.15 based test enablement in rbd

considering we are far out of this release and only care about
kubernetes releases from v1.20, there is no need to have this
version check in place for the tests.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",56,46,0,1,"2018-01-08 15:47:21","1391.51"
"ceph/ceph-csi","584d43a132322260f94857a793fc6bbb4fe87ea1","nixpanic","2021-10-01 13:05:56","false","deploy: move rbd/CSIDriver to API

Signed-off-by: Niels de Vos <ndevos@redhat.com>",59,45,0,1,"2018-01-08 15:47:21","1359.64"
"ceph/ceph-csi","48ca11336e941652322475015f5159e26c528419","Madhu-1","2019-01-25 13:39:35","false","Fix snapshot time during snapshot create

Fixes: #146

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",23,13,0,1,"2018-01-08 15:47:21","382.16"
"ceph/ceph-csi","85960b6571a0189db57e265d525ab624ee17eec7","Madhu-1","2019-12-16 09:24:21","false","Add ID based logging for ExpandVolume

Updated logging to log ReqID

Fixes: #732

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",103,23,0,1,"2018-01-08 15:47:21","702.98"
"ceph/ceph-csi","2190ca922e9dbf743126d054b52ea4575be31fb1","Madhu-1","2020-05-05 08:27:38","false","set priorityclass on plugin pods

set system-node-critical priority on the plugin
pods, as its the highest priority and this need to
be applied on plugin pods as its critical for
storage in cluster.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",109,28,0,1,"2018-01-08 15:47:21","848.19"
"ceph/ceph-csi","ceef252a24ebfabcc085ca503e847c9de5ff2256","nixpanic","2020-04-20 15:24:37","false","containerized-build: use GOROOT variable everywhere

Signed-off-by: Niels de Vos <ndevos@redhat.com>",100,27,0,1,"2018-01-08 15:47:21","832.48"
"ceph/ceph-csi","7afaac9c6643c61c9146ed90b53e6c0e22ea39d5","nixpanic","2020-07-22 13:33:36","false","rbd: implement rbdVolume.isInUse() with go-ceph

The new rbdVolume.isInUse() method will replace the rbdStatus()
function. This removes one more rbd command execution in the
DeleteVolume path.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",114,30,0,1,"2018-01-08 15:47:21","924.41"
"ceph/ceph-csi","bea9d561176c23a174b3611cec370c956d49247d","nixpanic","2021-03-31 13:22:26","false","rbd: copyEncryptionConfig in doSnapshotClone()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",90,39,0,1,"2018-01-08 15:47:21","1178.65"
"ceph/ceph-csi","2ad58f152b76eea6b010f4f4e86472c1ec59385a","nixpanic","2020-05-25 12:24:12","false","build: verify that all dynamically linked libraries are available

When building with go-ceph, there are several dynamically linked
libraries used directly (libcephfs, librados and librbd), and many more
indirectly.

By adding an additional RUN statement to check if all libraries are
available in the final image, problems related to missing libraries
should be caught before publishing/consuming the image.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",110,28,0,1,"2018-01-08 15:47:21","867.36"
"ceph/ceph-csi","3f35bfd4d770adbb31480bec7575787d56eaab50","ShyamsundarR","2019-04-25 19:12:36","false","Update README contents

Minor reorg of README contents.

Also calling out alpha status of the plugins.

Signed-off-by: ShyamsundarR <srangana@redhat.com>",56,16,0,0,"2018-01-08 15:47:21","472.39"
"ceph/ceph-csi","5cd29307440f794f7d3bd922290b72a93345a886","Madhu-1","2023-04-25 07:34:31","false","doc: remove reference to imageFormat

we dont support imageFormat anymore in
cephcsi and default is set to 2, removing
its reference from the repo.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",32,64,1,1,"2018-01-08 15:47:21","1932.91"
"ceph/ceph-csi","ceb88d649801b96c87a1116c341ae31bcfcbe0a8","Madhu-1","2022-06-14 06:47:32","false","cephfs: remove extra check for restore size

Looks like cephfs snapshot size is buggy and its
getting removed in ceph fs. we cannot get the size
of the snapshot during CreateVolume call, so we cannot
do any size check at CreateVolume to check if the
restore size is smaller or not.

As we are removing this check it also fixes #3147
but we dont have any validation at CSI level for
smaller restore we need to depend on kubernetes
external-provisioner for it.

fixes: #3147

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",40,53,1,1,"2018-01-08 15:47:21","1616.63"
"ceph/ceph-csi","7e1ed75cfbc0ba4465b1945c4663f95934f773ac","humblec","2022-05-18 05:37:47","false","doc: remove topology mention from cephfs documentation

as we are removing the topology configuration from the deployment
this commit remove it from the documentation too.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",38,52,1,1,"2018-01-08 15:47:21","1590.58"
"ceph/ceph-csi","f942e2175a79f50edd742d5c594701d74dbd81ae","nixpanic","2020-04-20 15:22:19","false","containerized-build: use dnf instead of yum

The Ceph base image moved to CentOS 8 which uses dnf. Use that instead
of yum.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",100,27,0,1,"2018-01-08 15:47:21","832.48"
"ceph/ceph-csi","a4195b6e11992327c7df2fae73066f358cf7c4ff","nixpanic","2023-11-03 09:17:23","false","doc: remove use of `XXX` in example descriptions

tickgit.com identifies `XXX` as label for TODO's. There is no need to
list the `digest` hash examples in the TODO list, so  replace the `XXX`
and `YYY` examples with `XYZ` and `ZYX`.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",20,70,1,1,"2018-01-08 15:47:21","2121.98"
"ceph/ceph-csi","607129171d22e77f3ff44992ed935d27b89301be","nixpanic","2021-07-23 14:46:20","false","rbd: move image metadata key migration to its own function

The new MigrateMetadata() function can be used to get the metadata of an
image with a deprecated and new key. Renaming metadata keys can be done
easily this way.

A default value will be set in the image metadata when it is missing
completely. But if the deprecated key was set, the data is stored under
the new key and the deprecated key is removed.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",116,42,0,1,"2018-01-08 15:47:21","1290.71"
"ceph/ceph-csi","887aab1d72914c674dff8c427a4e9d14442fab8b","nixpanic","2020-06-17 09:00:55","false","util: add MountOptionsAdd() to add mount options

Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,29,0,1,"2018-01-08 15:47:21","889.22"
"ceph/ceph-csi","19cc28ddea6ae4d856938f400a2f1f70f197c9fe","nixpanic","2020-03-19 12:30:59","false","util/cephcmds: have GetOMapValue() return ErrPoolNotFound

On occasion the e2e tests fail as there is an unexpected error while
deleting an RBD image. The particular tests forcefully removes the pool
where the RBD image is stored. Deleting a volume that has been removed
already (or when its parent pool has been wiped), should succeed.

By catching the error that a pool does not exist (anymore), the
provisioner responds to the DeleteVolume request with succes.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",116,26,0,1,"2018-01-08 15:47:21","801.36"
"ceph/ceph-csi","6b34e6c899783090e86099c44792d5a20fc19324","nixpanic","2022-04-14 07:32:29","false","deploy: use k8s.gcr.io registry for the NFS-nodeplugin

Kubernetes CSI now hosts the container-image for the NFS-nodeplugin in
the the k8s.gcr.io instead of the Microsoft registry.

See-also: kubernetes-csi/csi-driver-nfs@7b5b6f344
Signed-off-by: Niels de Vos <ndevos@redhat.com>",44,51,1,1,"2018-01-08 15:47:21","1556.66"
"ceph/ceph-csi","47c6223b3a99de74a170f587ef1ac6ca71bf700b","nixpanic","2021-02-17 08:58:12","false","e2e: track deletion of PVC and PV more closely

When passing a pointer to a PVC and PV, the status of the deleted
objects is not logged correctly. The `PersistentVolumeClaim.Status` and
`PersistedVolume.Status` that is added to the logs contain the status of
the initially created object (reference to the PVC/PV). When the PVC/PV
is removed, there is no guarantee that the object is updated.

Logs show an empty (nullified) `PersistentVolumeClaim.Status`, which is
not helpful. Instead, use the returned PVC/PV from the `Get()` function
and use that for further logging. Even when the `.Status` struct from
the PVC/PV gets wiped, the returned object should have correct details.

Updates: #1874
Signed-off-by: Niels de Vos <ndevos@redhat.com>",86,37,0,1,"2018-01-08 15:47:21","1134.47"
"ceph/ceph-csi","d992803e9eddd94afad22b36b12c146e9b752170","Yuggupta27","2021-03-18 11:32:10","false","rbd: Update pool name in image chain

While traversing image chain, the parent
image can be present in a different pool
that the one child is in. So, updating
pool name in the next itteration to
that of the Parent.

Co-authored-by: Madhu Rajanna <madhupr007@gmail.com>
Signed-off-by: Yug <yuggupta27@gmail.com>",84,38,0,0,"2018-01-08 15:47:21","1165.57"
"ceph/ceph-csi","85ed2685305ce0fee03e40ffc14f4ad7426bff0b","humblec","2022-05-17 08:57:41","false","helm: updated node driver registrar to latest version

the helm chart template value has been updated to latest
version of node driver registrar container.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",37,52,1,1,"2018-01-08 15:47:21","1589.72"
"ceph/ceph-csi","7090a1814183efd975119dd5077af804e50afb9a","humblec","2021-11-03 12:07:36","false","e2e: remove 1.17 based test enablement in cephfs

Considering we are far out of these release and only care about
kubernetes releases from v1.20, there is no need to have this
version check in place for the tests.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",56,46,0,1,"2018-01-08 15:47:21","1391.6"
"ceph/ceph-csi","2cb52d6535fb289f1a73dea2744af85a014c2ee2","humblec","2022-05-26 05:56:35","false","e2e: remove the generic ephemeral volume support check

at present we have the check for kube version 1.21 in the tests
which no longer required as it falls under supported kubernetes
versions with the driver.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",36,53,1,1,"2018-01-08 15:47:21","1598.59"
"ceph/ceph-csi","78a7185e371403329b9578609095ad33a6236a96","rootfs","2018-08-07 13:47:32","true","Merge pull request #59 from gman0/v0.3.0-docs

[CSI 0.3.0 2/4] Makefile, manifests, docs, examples",7,7,0,0,"2018-01-08 15:47:21","209.92"
"ceph/ceph-csi","e97bd247c82951a3d9367cce26bf52f27068ceac","nixpanic","2023-10-11 07:36:25","false","ci: do not include go-ceph in generic GitHub package rebases

go-ceph is an important package that we consume.  It is better to have
that as separate rebase PR from Dependabot and not include it in the
general GitHub package group.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",21,69,1,1,"2018-01-08 15:47:21","2098.91"
"ceph/ceph-csi","30da273e5ebdff3f823acae1c9a9d56e7d37196f","nixpanic","2023-07-25 12:34:40","false","rebase: update Kubernetes modules to v1.27.4

Dependabot complains about Ceph-CSI being vulnerable to
GHSA-f4w6-3rh6-6q4q . This is an old and addressed CSI sidecar issue,
not related to the k8s.io/kubernetes module listed in go.mod. Is it
possible that updating the Kubernetes modules helps?

Signed-off-by: Niels de Vos <ndevos@ibm.com>",26,66,1,1,"2018-01-08 15:47:21","2023.12"
"ceph/ceph-csi","98fdadfde77adc16b578e550d4327b6d43ce0a6c","Rakshith-R","2023-07-11 07:06:08","false","rbd: do not execute rbd sparsify when volume is in use

This commit makes sure sparsify() is not run when rbd
image is in use.
Running rbd sparsify with workload doing io and too
frequently is not desirable.
When a image is in use fstrim is run and sparsify will
be run only when image is not mapped.

Signed-off-by: Rakshith R <rar@redhat.com>",31,66,1,1,"2018-01-08 15:47:21","2008.89"
"ceph/ceph-csi","4e6675df76d1196005cd3632ea3bf7ff2318ec38","nixpanic","2023-06-02 09:11:15","false","ci: disable `gocritic:uncheckedInlineErr` due to false-prositives

uncheckedInlineErr gives many false-positives, there is no need to
rewrite all of the reported if-statements.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",31,65,1,1,"2018-01-08 15:47:21","1970.97"
"ceph/ceph-csi","287a854f7f5cd8452e47549b46cb6aad0217f20d","nixpanic","2023-05-11 11:34:10","false","ci: add `ok-to-test` label to all PRs in the merge queue

It seems that some PRs still get rebased by Mergify, whereas others get
tested for the **merge queue** by creating a new temporary PR. In both
cases the `ok-to-test` label should get set automatically.

Fixes: c4d372e (ci: automatically add `ok-to-test` to PRs created by Mergify)
Signed-off-by: Niels de Vos <ndevos@ibm.com>",28,64,1,1,"2018-01-08 15:47:21","1949.07"
"ceph/ceph-csi","53bb28e0d9e368f09e74494804e9c577285e4d6b","Madhu-1","2022-10-19 08:39:40","false","doc: update documentation for v3.7.2 release

updated readme and upgrade doc for v3.7.2 release.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",40,57,1,1,"2018-01-08 15:47:21","1741.7"
"ceph/ceph-csi","a669258688ecdade040a29777828f8d90ddcd56c","nixpanic","2022-02-15 07:45:20","false","cleanup: remove unused global variable in e2e

Signed-off-by: Niels de Vos <ndevos@redhat.com>",40,49,1,1,"2018-01-08 15:47:21","1497.67"
"ceph/ceph-csi","47dc9cf28dcada5f6bd0a2416f5eb03fa2c64a6b","ShyamsundarR","2021-09-14 15:29:25","false","rbd: Report errors when a resync maybe in progress

Currently we return a !ready status if an image
is not found when a replication resync is issued.

We also return a !ready just post issuing a resync.

The change is to ensure we return errors in these
cases for the caller to retry the operation till
we can determine we are actually resyncing, and then
return !ready with nil errors.

Part of addressing:
  https://github.com/csi-addons/volume-replication-operator/issues/101

Signed-off-by: Shyamsundar Ranganathan <srangana@redhat.com>",59,44,0,0,"2018-01-08 15:47:21","1341.74"
"ceph/ceph-csi","12c3be99743525b8fad87eee5353d683859defb4","Madhu-1","2020-06-22 07:09:45","false","util: Move supported version check to util

as we need to reuse the same code for both cephfs
and rbd moving the supported version check function
to util package, for better readability renamed
the function.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",116,29,0,1,"2018-01-08 15:47:21","894.14"
"ceph/ceph-csi","4938fc2ff47c48fc09b37f6ace11c3121f92c3fa","Madhu-1","2022-01-21 09:37:41","false","cleanup: use 0o600 intead of 0600

as we are using 0o600 in multiple files
use the same in all files which also fixes
go lint issue.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,48,1,1,"2018-01-08 15:47:21","1473.74"
"ceph/ceph-csi","ed289fea5e44a84a9a8840846d3e8d20499fa781","Madhu-1","2020-08-19 11:01:21","false","journal: replace klog with util logger in voljournal.go

journal: replace klog with util logger in voljournal.go

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",122,31,0,1,"2018-01-08 15:47:21","951.3"
"ceph/ceph-csi","d1ac832266311ad388322dcaeebef70dba8c0e2c","Madhu-1","2020-08-11 12:22:23","false","cephfs: replace Errorf with ErrorLog in genSnapFromOptions

replace Errorf with ErrorLog in genSnapFromOptions
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.36"
"ceph/ceph-csi","517ad8c64412cfba0cf2769cf9e6c54cd52dc976","Madhu-1","2021-11-17 12:36:34","false","rbd: use dummy image to workaround rbd scheduling bug

currently we have a bug in rbd mirror scheduling module.
After doing failover and failback the scheduling is not
getting updated and the mirroring snapshots are not
getting created periodically as per the scheduling
interval. This PR workarounds this one by doing below
operations

* Create a dummy (unique) image per cluster and this image
should be easily identified.

* During Promote operation on any image enable the
mirroring on the dummy image. when we enable the mirroring
on the dummy image the pool will get updated and the
scheduling will be reconfigured.

* During Demote operation on any image disable the mirroring
on the dummy image. the disable need to be done to enable
the mirroring again when we get the promote request to make
the image as primary

* When the DR is no more needed, this image need to be
manually cleanup as for now as we dont want to add a check
in the existing DeleteVolume code path for delete dummy image
as it impact the performance of the DeleteVolume workflow.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",57,46,0,1,"2018-01-08 15:47:21","1404.62"
"ceph/ceph-csi","c8df7aa4751918031badf81eadc35491eaa701f6","Madhu-1","2020-04-24 08:59:09","false","create temp directory to push helm charts

Instead of creating the tmp directory in
ceph-csi create temp directory outside
and use it to push helm charts

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",105,27,0,1,"2018-01-08 15:47:21","836.22"
"ceph/ceph-csi","ced3a0922f9dc38c7a11d7eefc357ea269b987e4","humblec","2021-07-13 05:24:21","false","cephfs: Get rid of locking at nodeUnpublish call

Considering kubelet make sure the unstage and unpublish operations
are serialized, we dont need any extra locking in nodeUnpublish

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",124,42,0,1,"2018-01-08 15:47:21","1280.32"
"ceph/ceph-csi","edf511a833faf4b3fcebd58db41d84a6754007c1","humblec","2021-08-17 11:02:46","false","cephfs: make use of subvolumeInfo.state to determine quota

https://github.com/ceph/go-ceph/pull/455/ added `state` field
to subvolume info struct which helps to identify the snapshot
retention state in the caller. This patch make use of the same

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",116,43,0,1,"2018-01-08 15:47:21","1314.55"
"ceph/ceph-csi","233954bc1026cdccd667b78020fed6b53e992edc","Madhu-1","2021-03-17 07:54:19","false","rbd: make replication operations as rbdImage methods

added replication related operations as a method
of rbdImage as these methods can be easily used
when we introduce volumesnaphot mirroring operations.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",85,38,0,1,"2018-01-08 15:47:21","1164.42"
"ceph/ceph-csi","403532c9a6a5f67783d2af41269cfe6db3a6ec7c","Madhu-1","2021-04-06 05:23:38","false","rbd: use force from PromoteVolume Request

instead of fetching the force option from the
parameters. Use the Force field available in
the PromoteVolume Request.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",90,39,0,1,"2018-01-08 15:47:21","1184.32"
"ceph/ceph-csi","4c564207c6c8f463c73bd642952353ef6cdbf7f2","Madhu-1","2019-01-17 07:37:40","false","Fix error checking issue in json Decode

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",16,12,0,1,"2018-01-08 15:47:21","373.91"
"ceph/ceph-csi","dfc3562e290a7eab071656e80720afc6c08f2bd1","Madhu-1","2019-11-06 04:52:07","false","Add Version flag to cephcsi

This will be helpful if someone wants
to check the cephcsi version

output
```
docker run quay.io/cephcsi/cephcsi:v1.2.1 --version
Cephcsi Version: v1.2.1
Git Commit: 4b871366327d63e27fc1abfb699f0faaf0fc16b9
GoVersion: go1.12.5
Compiler: gc
Platform: linux/amd64
```

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",92,22,0,1,"2018-01-08 15:47:21","663.79"
"ceph/ceph-csi","4ba2d0e10bb211f4dc8034ddd5f8a7768e946444","Madhu-1","2019-08-13 10:55:52","false","Add xfs fstype as default type in storageclass

we have see better performace in device
format and mounting by setting the fstype to xfs
from default ext4.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",84,19,0,1,"2018-01-08 15:47:21","580.05"
"ceph/ceph-csi","168468a93404ccddecb2b2ddfbb0817e346a13c5","Madhu-1","2019-03-27 08:28:42","false","deploy cssi-attacher as sidecar container in provisioner

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",45,15,0,1,"2018-01-08 15:47:21","443.95"
"ceph/ceph-csi","dc04362ac5bb1b4e9a4840caf4ea9cb6cf868b3c","humblec","2019-06-05 04:43:07","true","Merge pull request #406 from Madhu-1/update-golangci

update golangci-lint to latest stable version",79,17,0,1,"2018-01-08 15:47:21","512.79"
"ceph/ceph-csi","7e6feecc25f2edd408495b168b64a539f6d52119","nixpanic","2021-03-12 14:06:27","false","util: add VolumeEncryption.StoreCryptoPassphrase()

The new StoreCryptoPassphrase() method makes it possible to store an
unencrypted passphrase newly encrypted in the DEKStore.

Cloning volumes will use this, as the passphrase from the original
volume will need to get copied as part of the metadata for the volume.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",94,38,0,1,"2018-01-08 15:47:21","1159.68"
"ceph/ceph-csi","22ee7c0de5fe49423cfc1396addbb89875b6b73d","nixpanic","2021-02-19 12:41:30","false","doc: add implementation details

Update the emcrypted PVC implementation doc with references to the new
EncryptedKMS, DEKStore and VolumeEncryption types.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",90,37,0,1,"2018-01-08 15:47:21","1136.62"
"ceph/ceph-csi","9ab197bc630efa7af7933abc97696104155b8269","kuja53","2020-09-14 15:19:36","false","fix:remove global values and fix closing values on issues

Signed-off-by: Jakub Kuzelka <jakub@kuzelka.pw>",125,32,0,0,"2018-01-08 15:47:21","976.48"
"ceph/ceph-csi","c37ac53cbb07db1b447e68c0cefa3f74e269c3af","nixpanic","2023-05-11 08:27:57","false","ci: add GitHub Workflow to copy labels in Mergify created PRs

When Mergify creates a PR, the `ok-to-test` label needs to be added
before CI runs. Not all PRs need complete testing, and they may have
some `ci/skip/..` labels too. With this new GitHub Workflow, the labels
get copied from the original PR into the newly created PR.

See-also: https://github.com/Mergifyio/mergify/discussions/5088
Signed-off-by: Niels de Vos <ndevos@ibm.com>",28,64,1,1,"2018-01-08 15:47:21","1948.94"
"ceph/ceph-csi","b92a6f5ccb5ac9381de0672439a808ce32d060c9","Madhu-1","2021-10-25 10:28:37","false","rbd: log the remote site details during resync

logging the remote site details during resyncing
for better debugging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",53,45,0,1,"2018-01-08 15:47:21","1382.53"
"ceph/ceph-csi","44639b550d542b825f12e0d87f70dbcc11399e88","humblec","2019-07-25 11:38:00","false","Update invite link to slack channel

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",77,18,0,1,"2018-01-08 15:47:21","562.08"
"ceph/ceph-csi","f11a041f565ba225bb473902d408edbd9a9d32df","nixpanic","2021-05-05 15:41:25","false","cleanup: address gosec complaint about creating a file

The new gosec 2.7.0 complains like:

    G304 (CWE-22): Potential file inclusion via variable (Confidence: HIGH, Severity: MEDIUM)

Updates: #2025
Signed-off-by: Niels de Vos <ndevos@redhat.com>",95,40,0,1,"2018-01-08 15:47:21","1213.75"
"ceph/ceph-csi","29c78f97c0e41665c2cba0756fc12aaf5c93b32c","nixpanic","2020-10-13 15:22:31","false","rebase: update vendored go-ceph to v0.6

Closes: #1547
Signed-off-by: Niels de Vos <ndevos@redhat.com>",76,33,0,1,"2018-01-08 15:47:21","1005.48"
"ceph/ceph-csi","d0f054bb6ceecf36a23073a4eb35274fa5bef36c","nixpanic","2021-03-29 11:47:40","false","util: use ConfigMap.Data instead of .BinaryData

When using .BinaryData, the contents of the configuration is not parsed
correctly. Whereas the parsing works fine whet .Data is used.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",90,39,0,1,"2018-01-08 15:47:21","1176.58"
"ceph/ceph-csi","41c7725c8c7a83307995808879a11c9e1acbac07","humblec","2022-01-17 05:00:08","false","doc: move 3.3.0 and 3.3.1 to deprecated release

With the release v3.5, as per support policy we can mark
v3.3.0 and 3.3.1 to be in deprecated release list

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",40,48,1,1,"2018-01-08 15:47:21","1469.55"
"ceph/ceph-csi","177cc078e1c53f7ecc48c2e10a4d08bd27b9d9ce","humblec","2022-01-25 12:53:41","false","ci: remove duplicate validation DCO in default rule

removing duplicated validation of DCO from the default
rule.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",38,49,1,1,"2018-01-08 15:47:21","1477.88"
"ceph/ceph-csi","49d11bf5ea2009002685c437d38feff11fd2b5be","humblec","2021-06-25 12:31:28","false","e2e: reformat long lines in this package to 120 chars

We have many declarations and invocations..etc with long lines which are
very difficult to follow while doing code reading. This address the issues
in 'e2e/cephfs*.go' files to restrict the line length to 120 chars.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",118,41,0,1,"2018-01-08 15:47:21","1262.61"
"ceph/ceph-csi","af3083f7170287e1755f23a2e7555264e6af2605","mcronce","2018-11-29 18:15:52","false","pkg:  Updated ""version"" variables from 0.3.0 to 1.0.0",16,11,0,0,"2018-01-08 15:47:21","321.1"
"ceph/ceph-csi","66bb0e4e54aa690d8d02ee78dd50c26326f1b5f8","humblec","2019-06-10 08:00:40","false","Combine the variable section in e2e and also introuce new vars.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",78,17,0,1,"2018-01-08 15:47:21","516.93"
"ceph/ceph-csi","230dd67752fd2f70dae1b64ce8b73064fbe45882","nixpanic","2020-07-28 11:40:43","false","ci: increase memory in the minikube VM

While testing with tehj default 3000 MB RAM in the minikube VM, creating
a encrypted RBD volume fails because 'cryptsetup' gets killed:

[  766.072585] Out of memory: Kill process 18497 (cryptsetup) score 1182 or sacrifice child
[  766.072589] Killed process 18497 (cryptsetup) total-vm:863136kB, anon-rss:510336kB, file-rss:10788kB, shmem-rss:0kB
[  766.072688] oom_reaper: reaped process 18497 (cryptsetup), now anon-rss:510336kB, file-rss:10780kB, shmem-rss:0kB

Using 4 GB RAM should prevent this from occuring.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,31,0,1,"2018-01-08 15:47:21","930.33"
"ceph/ceph-csi","4859f2dfdb88304cc484402739787adcbea4ed5f","nixpanic","2021-07-26 09:48:40","false","util: allow configuring VAULT_AUTH_MOUNT_PATH for Vault Tenant SA KMS

The VAULT_AUTH_MOUNT_PATH is a Vault configuration parameter that allows
a user to set a non default path for the Kubernetes ServiceAccount
integration. This can already be configured for the Vault KMS, and is
now added to the Vault Tenant SA KMS as well.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",118,42,0,1,"2018-01-08 15:47:21","1293.5"
"ceph/ceph-csi","926f1e813cb566b219d6a039605823c200717441","nixpanic","2020-06-03 07:37:44","false","rbd: keep rados.IOContext for re-use

This prevents the need to open the IOContext for additional operations
on the image.

It also addresses a leak of the IOContext in case `rbdVolume.open()` was
called. The method only returned the `rbd.Image` without the possibility
to close the related IOContext.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",110,29,0,1,"2018-01-08 15:47:21","876.16"
"ceph/ceph-csi","526da43b6af35bb33307af9e053d5fe626d3b985","nixpanic","2020-07-22 13:36:05","false","rbd: remove unused rbdStatus()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",114,30,0,1,"2018-01-08 15:47:21","924.41"
"ceph/ceph-csi","86a8d29bd130d7c6809f4f51db35f9fe67fc2882","nixpanic","2020-10-26 13:18:48","false","cleanup: do not panic when the metricspath is not a valid URL

When the cephcsi executable receives an error when calling
util.ValidateURL() on the optional ""metricspath"". The error that
util.ValidateURL() returns should be understandable enough, so that
users know what to investigate. A Go panic on a user error is not very
userfriendly, and does not provide any additional usefil information.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,33,0,1,"2018-01-08 15:47:21","1018.4"
"ceph/ceph-csi","4b5ad66662f543992926511f18b30562b2c10510","rootfs","2018-02-15 21:02:39","false","verify build

Signed-off-by: Huamin Chen <hchen@redhat.com>",1,1,0,0,"2018-01-08 15:47:21","37.22"
"ceph/ceph-csi","44e807c36bb2e9e826a0f41f6af5b83a23079713","warmchang","2019-08-08 02:42:28","false","Add the description of Deploy ConfigMap for CSI plugins

Signed-off-by: William Zhang <zhang.wanmin@zte.com.cn>",84,19,0,0,"2018-01-08 15:47:21","575.7"
"ceph/ceph-csi","37c4e3447d6951554eafb82769908dbd2c39e882","Madhu-1","2020-04-06 08:45:42","false","Add helm chart SA to vault.yaml

we need to provide access to the Service
account created with helm charts to access
the vault service.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",104,27,0,1,"2018-01-08 15:47:21","819.21"
"ceph/ceph-csi","8f4f42d2e5ef6d47cd606d30e54674a15121833b","Madhu-1","2019-01-16 11:10:24","false","reject block volume creation in cephfs

update validate create volume request
to reject block volume creation",17,12,0,1,"2018-01-08 15:47:21","373.06"
"ceph/ceph-csi","c0eca87268e769b17a0dc4a48b18ee3aaf771cb3","humblec","2020-10-15 13:55:22","false","e2e: make use of new helper function for filesystem mode PVC clone

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",75,33,0,1,"2018-01-08 15:47:21","1007.42"
"ceph/ceph-csi","ba68ce6437776b0500c68c1e5092f2772538b9a6","nixpanic","2023-01-31 08:28:17","false","ci: drop `ok-to-test` label when a PR is rebased

When reviews are dropped, tests should most often not automatically
start again.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",31,61,1,1,"2018-01-08 15:47:21","1848.95"
"ceph/ceph-csi","9c509aaaee03c53f1bcbc213d349b57ae48379e5","humblec","2023-01-16 09:20:38","false","doc: correct typo in kernel client recovery section

This commit correct a typo in the kernel mount recovery part.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",30,60,1,1,"2018-01-08 15:47:21","1833.98"
"ceph/ceph-csi","302fead71368c51a6327f4353a330e4de5ee8c26","Madhu-1","2022-10-14 12:24:51","false","cephfs: delete subvolume if SetAllMetadata fails

To avoid subvolume leaks if the SetAllMetadata
operations fails delete the subvolume.
If any operation fails after creating the subvolume
we will remove the omap as the omap gets
removed we will need to remove the subvolume to
avoid stale resources.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,57,1,1,"2018-01-08 15:47:21","1736.86"
"ceph/ceph-csi","ce9e54e5bd7ef65d74de38d996256e090d5e9a78","nixpanic","2021-07-28 07:05:35","false","ci: add Mergify backport rules for release-v3.4

The new `backport-to-release-v3.4` label can be added to PRs and Mergify
will create a backport once the PR for the devel branch has been merged.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",118,43,0,1,"2018-01-08 15:47:21","1295.39"
"ceph/ceph-csi","784c3ef06d112534046d5d6f1d63f80b71c27c84","humblec","2021-11-19 04:56:41","false","e2e: remove unparam linter escapes from getStaticPV and getStaticPVC

This `unparam` linter escape is no longer needed and CI is failing
if we keep there. This commit remove the same and make CI happy.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",56,46,0,1,"2018-01-08 15:47:21","1406.3"
"ceph/ceph-csi","95149642cb63edea8580bd92eab128382181e02f","nixpanic","2023-09-14 15:45:01","false","doc: Add initial design notes for the Health Checker

Signed-off-by: Niels de Vos <ndevos@ibm.com>",19,68,1,1,"2018-01-08 15:47:21","2072.25"
"ceph/ceph-csi","bd1388fb964d1df12975cd58cd45609d4458f884","nixpanic","2021-03-29 09:38:47","false","util: log available configs when KMS not found

When the KMS configuration can not be found, it is useful to know what
configurations are available. This aids troubleshooting when typos in
the KMS ID are made.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",89,39,0,1,"2018-01-08 15:47:21","1176.49"
"ceph/ceph-csi","11e1eda98b7b0850b92237825234a71525e61e41","nixpanic","2020-12-03 19:37:18","false","build: install diffutils in test container image

Depending on the local changes, running 'make containerized-test' fails
with an error like:

    level=error msg=""Running error: gofmt: error computing diff: exec: \""diff\"": executable file not found in $PATH""

Installing the diffutils package makes sure 'go fmt' finds the
executable.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",79,35,0,1,"2018-01-08 15:47:21","1056.66"
"ceph/ceph-csi","cdbc56de7deb8c94df18867c908a5d38df0c7510","nixpanic","2020-06-17 09:01:13","false","ci: add test for MountOptionsAdd()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,29,0,1,"2018-01-08 15:47:21","889.22"
"ceph/ceph-csi","8dc4ab6b1bbe9518b3e25a8a376f593e12a3383c","Yuggupta27","2020-07-09 05:14:10","false","rebase: update k8s.io/klog to v2.3.0

Update klog version to v2.3.0

Signed-off-by: Yug <yuggupta27@gmail.com>",111,30,0,0,"2018-01-08 15:47:21","911.06"
"ceph/ceph-csi","f07c5ab8579d7de2ae56437261f1dcb6c254cec4","humblec","2021-06-25 12:38:30","false","e2e: reformat long lines in this package to 120 chars

We have many declarations and invocations..etc with long lines which are
very difficult to follow while doing code reading. This address the issues
in 'e2e/rbd*.go' files to restrict the line length to 120 chars.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",118,41,0,1,"2018-01-08 15:47:21","1262.62"
"ceph/ceph-csi","cf426fff252d53704c6dfbd5634eb05b8ec1c485","humblec","2019-06-24 15:06:34","true","Update README.md",78,17,0,1,"2018-01-08 15:47:21","531.22"
"ceph/ceph-csi","4efcc5bf9741a8b9c0428e322257bbc6e3e82014","humblec","2021-09-03 12:48:49","false","cleanup: simplify checkStaticVolume function and remove unwanted vars

checkStaticVolume() in the reconcilePV function has been unwantedly
introducing variables to confirm the pv spec is static or not. This
patch simplify it and make a smaller footprint of the functions.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",104,44,0,1,"2018-01-08 15:47:21","1331.63"
"ceph/ceph-csi","a262063819b6f249481f7a1d8ea2e88917609578","nixpanic","2020-03-24 08:26:57","false","tests: use go modules from ./vendor for running tests

Running tests without `-mod=vendor` causes the tests to download the
dependencies if these are not available in the standard go-module
directories (parent directories of the project). All dependencies are
already included in the ./vendor directory, so passing `-mod=vendor`
prevents downloading the dependencies and speeds up testing a lot.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",114,26,0,1,"2018-01-08 15:47:21","806.19"
"ceph/ceph-csi","52fa4f10dac92b729011e0d5760dd468676a6d85","nixpanic","2020-04-24 09:17:51","false","scripts: add build_step logging functions

Signed-off-by: Niels de Vos <ndevos@redhat.com>",105,27,0,1,"2018-01-08 15:47:21","836.23"
"ceph/ceph-csi","b891e5585d7309ae645e3617f1fd3675f3ffc1f8","Rakshith-R","2021-05-06 09:49:27","false","cleanup: address ifshort linter issues

This commit addresses ifshort linter issues which
checks if short syntax for if-statements is possible.

updates: #1586

Signed-off-by: Rakshith R <rar@redhat.com>",95,40,0,1,"2018-01-08 15:47:21","1214.5"
"ceph/ceph-csi","7f6b73e71f8dcd11542de9f8b250aac96bddf4cd","Rakshith-R","2021-07-19 05:42:02","false","e2e: log imageList in validateRBDImageCount for better debugging

Signed-off-by: Rakshith R <rar@redhat.com>",126,42,0,1,"2018-01-08 15:47:21","1286.33"
"ceph/ceph-csi","3e9aafd730d5d6a932d92e60b029660b5b1f0fa0","Madhu-1","2021-06-08 09:33:17","false","build: enclose shell variables in `{}`

enclose the shell variables in `{}` deploy.sh

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",111,41,0,1,"2018-01-08 15:47:21","1246.49"
"ceph/ceph-csi","2782878ea20c7d49f392ccdb948001eb0e1b83e0","Madhu-1","2021-08-05 09:11:28","false","rbd: log LastUpdate in UTC format

This Commit converts the LastUpdate
from int to the UTC format and logs
it for better debugging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",122,43,0,1,"2018-01-08 15:47:21","1303.48"
"ceph/ceph-csi","90966597b493650165d77ba755267ff45db7f371","nixpanic","2020-12-17 16:15:12","false","ci: require ci/centos/mini-e2e/k8s-1.20 for merging

k8s-1.20 CI jobs seem stable, so there is nothing preventing us from
requiring v1.20 for test results. v1.18 jobs will be removed from the CI
environment, so that version will not be required anymore.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",81,35,0,1,"2018-01-08 15:47:21","1069.52"
"ceph/ceph-csi","e4431edaf9da4cce0f001fd4e440541787523641","nixpanic","2021-02-17 15:55:06","false","rbd: implement the DEKStore interface

To accommodate storing DEKs outside a KMS, the DEK can be stored in the
metadata of the volume.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",88,37,0,1,"2018-01-08 15:47:21","1134.76"
"ceph/ceph-csi","be9e7cf956c378227ff43e0194410468919766b7","nixpanic","2020-07-23 08:01:21","false","rbd: pass context.Context to rbdVolume.resize()

While adding the context.Context to the resizeRBDimage() function, it
became a little ugly. So renaming the function to resize() and making it
a method of the rbdVolume type.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,30,0,1,"2018-01-08 15:47:21","925.18"
"ceph/ceph-csi","6cc11c15d369955a723db5d373f30de08b72ddc8","nixpanic","2021-05-27 07:09:49","false","rbd: use DeepCopy to create a thick-provisioned clone

To create a full-allocated RBD image from a snapshot/clone DeepCopy()
can be used. This is needed when the parent of the new volume is
thick-provisioner, so that the new volume is independent of the parent
and thick-provisioned as well.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",97,41,0,1,"2018-01-08 15:47:21","1234.39"
"ceph/ceph-csi","20801d6563089e4fd7a0604dbb4f717ee7658c9b","nixpanic","2020-04-24 07:56:24","false","deploy: log steps while tasks are running

By repeated logging of the current step, Travis CI should receive some
terminal activity and is expected to not timeout anymore.

Fixes: #982
Signed-off-by: Niels de Vos <ndevos@redhat.com>",103,27,0,1,"2018-01-08 15:47:21","836.17"
"ceph/ceph-csi","6f113aa8627dc4243dadaf26cd04be75d729e6c6","nixpanic","2021-03-01 07:51:03","false","build: move mergify/merge options to defaults section

Signed-off-by: Niels de Vos <ndevos@redhat.com>",90,38,0,1,"2018-01-08 15:47:21","1149.42"
"ceph/ceph-csi","12130123aca84abc4b4a5ffa1672ca6f7fe9283b","nixpanic","2020-03-17 12:57:01","false","rbd: do not pass Credentials to checkVolExists()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",114,26,0,1,"2018-01-08 15:47:21","799.38"
"ceph/ceph-csi","409b12e4ee0f5eef6ef0a8e19ca33a438373470b","nixpanic","2020-09-15 11:16:28","false","ci: drop Kubernetes patch version from conditions

With the improvements from #1480 there is no need to specify the full
Kubernetes versions anymore, the major version is sufficient now.

See-also: #1480
Signed-off-by: Niels de Vos <ndevos@redhat.com>",127,32,0,1,"2018-01-08 15:47:21","977.31"
"ceph/ceph-csi","b26d33b7c109cb55f149ac48e185276175d15d98","nixpanic","2020-10-26 07:41:54","false","build: install git as when building from Dockerfile

When running a simple build with only the required arguments, the
following warning are reported:

    $ buildah bud --build-arg=BASE_IMAGE=ceph/ceph:v15 --build-arg=GO_ARCH=amd64 -f ./deploy/cephcsi/image/Dockerfile .
    ...
    STEP 15: COPY . ${SRC_DIR}
    STEP 16: RUN make cephcsi
    cephcsi image settings: quay.io/cephcsi/cephcsi version canary
    make: git: Command not found
    make: git: Command not found
    if [ ! -d ./vendor ]; then (go mod tidy && go mod vendor); fi
    make: git: Command not found
    ...
    STEP 23: COMMIT
    Getting image source signatures
    ...
    Writing manifest to image destination
    Storing signatures
    --> 239b19c4049

git is used to detect the current commit, and store it in the binary
that is built. Without the commit, the ""Git Commit:"" in the output is
empty, making it impossible to get the exact version:

    $ podman run --rm 239b19c4049 --version
    Cephcsi Version: canary
    Git Commit:
    Go Version: go1.15
    Compiler: gc
    Platform: linux/amd64
    Kernel: 5.8.4-200.fc32.x86_64

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,33,0,1,"2018-01-08 15:47:21","1018.16"
"ceph/ceph-csi","686db53fde8189c1f62d6f2dee24d31f34934889","nixpanic","2020-05-18 10:13:08","false","build: prevent error message when 'go' is unavailable

In case the `go` executable is not available, any `make` command shows
the error `go: command not found` even when running the actual task in a
container (that will have `go` available).

So, redirect the error message to `/dev/null`. In case `go` is really
not available in the build environment, the `check-env` make target will
report it.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,28,0,1,"2018-01-08 15:47:21","860.27"
"ceph/ceph-csi","f57b7f88b0cf305b3e1e78aef6fedbb1d9d51e51","nixpanic","2022-03-16 09:06:20","false","ci: update minikube to latest v1.25.2 release

This version addresses several bugs and includes other improvements.

See-also: https://github.com/kubernetes/minikube/releases/tag/v1.25.2
Signed-off-by: Niels de Vos <ndevos@redhat.com>",45,50,1,1,"2018-01-08 15:47:21","1528.72"
"ceph/ceph-csi","52433841b479f5841606db37b15d151de3ce7fee","nixpanic","2021-04-08 13:04:32","false","cleanup: move copyEncryptionConfig() from CreateVolume to Exists()

The rbdVolume that needs its encryption configured is constructed in the
Exists() method. It is suitable to move the copyEncryptionConfig() call
there as well, so that the object is completely constructed in a single
place.

Golang-ci:gocyclo complained about the increased complexity of the
Exists() function. Moving the repairing of the ImageID into its own
helper function makes the code a little easier to understand.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",85,39,0,1,"2018-01-08 15:47:21","1186.64"
"ceph/ceph-csi","f66b21873b0381cf0d7ed17357c0c1c4375f2b8e","nixpanic","2021-06-16 09:12:09","false","e2e: pass --delete-on-failure when starting minikube

Sometimes there is an unclear error while starting the Minikube VM.
Possibly this can be worked around by passing the --delete-on-failure
option:

    If set, delete the current cluster if start fails and try again. Defaults to false.

See-also: https://minikube.sigs.k8s.io/docs/commands/start/
Signed-off-by: Niels de Vos <ndevos@redhat.com>",109,41,0,1,"2018-01-08 15:47:21","1253.48"
"ceph/ceph-csi","8d038db047bd3542a6932f81148bda9158c1e784","Yuggupta27","2021-03-22 07:35:15","false","e2e: add e2e to test clone in different pool

added a e2e to test clones in different
pool.

Co-authored-by: Madhu Rajanna <madhupr007@gmail.com>
Signed-off-by: Yug <yuggupta27@gmail.com>",87,38,0,0,"2018-01-08 15:47:21","1169.41"
"ceph/ceph-csi","04644c1d5896b493d6aaf9ab66f2302cf67a2ee3","idryomov","2020-09-22 08:07:10","false","rbd: enable mapping and unmapping from a network namespace

Make rbdplugin pod work in a non-initial network namespace (i.e. with
""hostNetwork: false"") by skipping waiting for udev events when mapping
and unmapping images.  CSI use case is very simple: all that is needed
is a device node which is immediately fed to mkfs, so we should be able
to tolerate udev not being finished with the device just fine.

Fixes: #1323
Signed-off-by: Ilya Dryomov <idryomov@gmail.com>",133,32,0,0,"2018-01-08 15:47:21","984.18"
"ceph/ceph-csi","02b4a7175c4679466fdc6eab6674ef84525351ee","Yuggupta27","2020-07-25 16:40:28","false","rbd: add upgrade testing

Upgrade testing will enable us to keep
in check the backward compatibility of
earlier releases.

Signed-off-by: Yug <yuggupta27@gmail.com>",115,30,0,0,"2018-01-08 15:47:21","927.54"
"ceph/ceph-csi","04c8c7fd4a585f6aedf553fadeb2b3fc6027e63c","Madhu-1","2020-07-06 05:21:50","false","rbd: correct upstream kernel version for deep-flatten

as v5.1.0 supports the deep-flatten feature,lowering
the required version to map rbd images which
are having deep-flatten feature

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",112,30,0,1,"2018-01-08 15:47:21","909.07"
"ceph/ceph-csi","b2e31dbe1ed43b5b0f3d8dc5797f126577e825f1","nixpanic","2023-06-01 16:12:48","false","cleanup: no need for disabling the apache-arrow-centor repository

The apache-arrow-centor repository is not available in current Ceph
container-images, there is no need to try to disable the repository
anymore.

See-also: https://github.com/ceph/ceph-container/pull/1990
Signed-off-by: Niels de Vos <ndevos@ibm.com>",32,65,1,1,"2018-01-08 15:47:21","1970.27"
"ceph/ceph-csi","9e76eceb5ebca5ec321691c3ba2171687b0861f1","nixpanic","2023-06-02 12:36:39","false","build: address `interfacebloat` warning for SubVolumeClient

Signed-off-by: Niels de Vos <ndevos@ibm.com>",31,65,1,1,"2018-01-08 15:47:21","1971.12"
"ceph/ceph-csi","1852e977f899ba509e86e71b1a3d35dcf068a7e1","BenoitKnecht","2023-04-26 09:22:25","false","util: Limit cryptsetup PBKDF memory usage

By default, `cryptsetup luksFormat` uses Argon2i as Password-Based Key
Derivation Function (PBKDF), which not only has a CPU cost, but also a memory
cost (to make brute-force attacks harder).

The memory cost is based on the available system memory by default, which in
the context of Ceph CSI can be a problem for two reasons:

1. Pods can have a memory limit (much lower that the memory available on the
   node, usually) which isn't taken into account by `cryptsetup`, so it can get
   OOM-killed when formating a new volume;
2. The amount of memory that was used during `cryptsetup luksFormat` will then
   be needed for `cryptsetup luksOpen`, so if the volume was formated on a node
   with a lot of memory, but then needs to be opened on a different node with
   less memory, `cryptsetup` will get OOM-killed.

This commit sets the PBKDF memory limit to a fixed value to ensure consistent
memory usage regardless of the specifications of the nodes where the volume
happens to be formatted in the first place.

The limit is set to a relatively low value (32 MiB) so that the `csi-rbdplugin`
container in the `nodeplugin` pod doesn't require an extravagantly high memory
limit in order to format/open volumes (particularly with operations happening
in parallel), while at the same time not being so low as to render it
completely pointless.

Signed-off-by: Benoît Knecht <bknecht@protonmail.ch>",32,64,1,0,"2018-01-08 15:47:21","1933.98"
"ceph/ceph-csi","bf4ba0ec84cd7bb8c5cf2f93b7a8dfea227dd1ae","humblec","2022-01-07 15:14:11","false","rbd: dont attempt explicit permission mod change from the RBD driver

currently we are overriding the permission to `0o777` at time of node
stage which is not the correct action. That said, this permission
change causes an extra permission correction at time of nodestaging
by the CO while the FSGROUP change policy has been set to
`OnRootMismatch`.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",44,48,1,1,"2018-01-08 15:47:21","1455.73"
"ceph/ceph-csi","dc246404e2546fbd8b8f3df198a2401c08d9faa8","rootfs","2019-03-20 01:03:06","true","Merge pull request #267 from rootfs/megify-1.0

add mergify as a merge engine",33,14,0,0,"2018-01-08 15:47:21","436.64"
"ceph/ceph-csi","661818bd790e2f62c02cc471113f63b50f055e48","rootfs","2019-01-15 18:39:04","true","Merge pull request #123 from rootfs/master-to-1.0

Merge master to csi-v1.0 branch",17,12,0,0,"2018-01-08 15:47:21","372.37"
"ceph/ceph-csi","f881bf524969191907e457989b7836879bd3799a","gman0","2018-04-13 12:35:38","false","cephfs/Dockerfile: added attr package",2,3,0,0,"2018-01-08 15:47:21","94.87"
"ceph/ceph-csi","2b9f6c35984aab7fa0fa61de9692ada0258e573f","nixpanic","2021-01-14 07:47:57","false","e2e: fetch volume metrics from Kubelet

Test if metrics are available at all. The actual values are a little
difficult to validate.

BlockMode volumes support metrics since Kubernetes 1.22.

See-also: kubernetes/kubernetes#97972
Signed-off-by: Niels de Vos <ndevos@redhat.com>",81,36,0,1,"2018-01-08 15:47:21","1101.42"
"ceph/ceph-csi","c73fa55b977f071db9165d0df944d64390760e1b","Yuggupta27","2020-08-21 12:05:01","false","doc: Add step to verify if PVC is in Bound State

Verify if PVC is in Bound state before it's
snapshot is created.

Signed-off-by: Yug <yuggupta27@gmail.com>",119,31,0,0,"2018-01-08 15:47:21","953.35"
"ceph/ceph-csi","9b384f38e66b01a844ebd5cef16fce7775b56a9c","humblec","2019-06-10 08:37:24","false","Add pointers and sidecar information in the README

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",78,17,0,1,"2018-01-08 15:47:21","516.95"
"ceph/ceph-csi","e47738fa75093db3b2b2e5a04e4184bacee63e74","Yuggupta27","2021-06-22 12:42:23","false","helm: remove function keyword

Getting rid of function keyword for two reasons:
1. Defining a function without 'function' keyword is more
   portable as it is compatible with Bourne/Korn/POSIX scripts
2. To ensure the coding style is same for the file.

Signed-off-by: Yug <yuggupta27@gmail.com>",116,41,0,0,"2018-01-08 15:47:21","1259.62"
"ceph/ceph-csi","b29af806f70ee21d223bcba3e55b3f68639e07f1","Madhu-1","2020-11-30 12:25:49","false","ci: remove multi stage build from travis ci

removing multi stage build from travis CI
as we are moving to github action.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",83,35,0,1,"2018-01-08 15:47:21","1052.36"
"ceph/ceph-csi","c8c8176a37472b39d6e0b66042d897ab48473013","nixpanic","2020-12-08 14:12:38","false","cleanup: return error type in util.storeKey()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,35,0,1,"2018-01-08 15:47:21","1061.43"
"ceph/ceph-csi","dee6be6832690188102da6516ba3b5cd624a103c","nixpanic","2023-06-02 09:51:15","false","build: address `gocritic` warnings

Signed-off-by: Niels de Vos <ndevos@ibm.com>",31,65,1,1,"2018-01-08 15:47:21","1971"
"ceph/ceph-csi","ea3d9e941f7ab7bae3b273cbeca8b2cf796e8324","nixpanic","2020-05-27 09:43:08","false","ci: automatically merge PRs in ci/centos

Merge PRs for the ci/centos branch when they have sufficient approvals
and the tests have passed. Using the same rules as the master branch.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",109,29,0,1,"2018-01-08 15:47:21","869.25"
"ceph/ceph-csi","4c5c67b8f9d27541a6dd6bc942c151555743a5d1","gman0","2018-03-22 13:11:51","false","cephfs: check volumeOptions.Mounter and choose ceph-fuse or mount.ceph accordingly",2,2,0,0,"2018-01-08 15:47:21","73.89"
"ceph/ceph-csi","a6181200c109b9861d0519263ef6d9e0a3431cbf","gman0","2018-06-12 15:10:54","false","cephfs/deploy: bump csi-provisioner to 0.2.1",3,5,0,0,"2018-01-08 15:47:21","153.97"
"ceph/ceph-csi","2bf17007d9e3de3b2577f8b8359b47551e52c955","Yuggupta27","2021-10-27 08:25:23","false","e2e: validate pvc-pvc clone in ec pool

Validate pvc to pvc clone in erasure
coded pools.

Signed-off-by: Yug Gupta <yuggupta27@gmail.com>",55,45,0,0,"2018-01-08 15:47:21","1384.44"
"ceph/ceph-csi","d15b77d4033be1ac3e7955b047b0e6774e506fcf","nixpanic","2020-03-19 13:27:16","false","dev-guide: add reference to required go-ceph dependencies

Closes: #872
Signed-off-by: Niels de Vos <ndevos@redhat.com>",116,26,0,1,"2018-01-08 15:47:21","801.4"
"ceph/ceph-csi","2124f6e7756f9507b117307a935c4803cb9feed9","nixpanic","2020-03-24 09:03:13","false","travis: add job to test 'make containerized-build'

Signed-off-by: Niels de Vos <ndevos@redhat.com>",114,26,0,1,"2018-01-08 15:47:21","806.22"
"ceph/ceph-csi","20c90ddfc4f4bb4b75a56c21f9830b5a22e52626","humblec","2020-08-04 04:23:26","false","cephfs: getVolumeRootPathCeph and purgeVolume use new error strings

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","937.03"
"ceph/ceph-csi","bb296c4f211f00e253f0de57f9e20efec2d4d634","nixpanic","2021-04-08 15:46:11","false","e2e: add verification for encrypted Snapshot/Restore operations

This moves validatePVCSnapshot() into its own function, so that it
follows the same format as validatePVCClone() does already.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",85,39,0,1,"2018-01-08 15:47:21","1186.75"
"ceph/ceph-csi","30333378ef39eaf6dd53d06434752db798f56ba1","nixpanic","2021-12-09 16:23:02","false","cleanup: add IsBlockMultiNode() helper

IsBlockMultiNode() is a new helper that takes a slice of
VolumeCapability objects and checks if it includes multi-node access
and/or block-mode support.

This can then easily be used in other services that need checking for
these particular capabilities, and preventing multi-node block-mode
access.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",49,47,1,1,"2018-01-08 15:47:21","1426.77"
"ceph/ceph-csi","4b8b52e0de568002420fa38e8dfdb5db4b714bc9","cyb70289","2019-11-07 09:55:12","false","Support Arm64 image

Update CI merge job to build and push Arm64 image to
quay.io/cephcsi/cephcsi:version-arm64.

Add CI PR job running on Travis Arm64 nodes to make sure cephcsi
compiles successfully on Arm64.

No CI test job is availabe for Arm64 now due to below issues
- k8s-csi sidecar images for Arm64 are not available
- Travis Arm64 CI job runs inside unprivileged LXD which blocks
  launching minikube test environment

Signed-off-by: Yibo Cai <yibo.cai@arm.com>",93,22,0,0,"2018-01-08 15:47:21","665.01"
"ceph/ceph-csi","de114550d9a9459fac216f060e97e9fc44c266da","rootfs","2018-10-12 17:22:38","true","Merge pull request #88 from Cynerva/gkk/rbd-xfs

csi-rbdplugin: Install xfsprogs to support fsType: xfs",11,9,0,0,"2018-01-08 15:47:21","274.07"
"ceph/ceph-csi","9d9afc1093857f91b044f203856b958e4941566e","rootfs","2018-07-19 18:01:05","false","consolidate container deploy

Signed-off-by: Huamin Chen <hchen@redhat.com>",6,6,0,0,"2018-01-08 15:47:21","191.09"
"ceph/ceph-csi","c14cbee132b740cffc62bf451e63a984c35ad2d6","phlogistonjohn","2020-05-21 20:36:50","false","journal: change omap set func to handle multiple key-value pairs

For any function that sets more than one key on a single oid setting
them as a batch will be more efficient.

Signed-off-by: John Mulligan <jmulligan@redhat.com>",111,28,0,0,"2018-01-08 15:47:21","863.7"
"ceph/ceph-csi","e46a007961f31ff69dbb232b531d9770d932531d","Rakshith-R","2023-10-17 04:59:04","false","rebase: update github.com/libopenstorage/secrets to latest

With this update, we no longer import github.com/hashicorp/vault
which now is under BSL license.
https://github.com/hashicorp/vault/blob/main/LICENSE

resolves: #4196

Signed-off-by: Rakshith R <rar@redhat.com>",22,69,1,1,"2018-01-08 15:47:21","2104.8"
"ceph/ceph-csi","076546350cdebdca8823abc0423961180282f2ac","nixpanic","2022-11-01 09:22:16","false","build: prune go.sum of old versions

When manually changing go.mod and running `go mod tidy`, the command
suggests that references to old versions may not be needed anymore:

```
If reproducibility with go 1.16 is not needed:
	go mod tidy -compat=1.17
```

The above command modifies `go.sum` only.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",39,58,1,1,"2018-01-08 15:47:21","1754.73"
"ceph/ceph-csi","08b42e5d67469232b9351157b9e2c97c5211b9dc","humblec","2022-06-22 05:20:17","false","nfs: make use of latest sidecars in the deployment

The sidecars in the NFS deployment has latest versions which is
also updated for RBD and CephFS drivers. This commit update
the versions in the NFS deployment too.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",42,53,1,1,"2018-01-08 15:47:21","1624.56"
"ceph/ceph-csi","5c40f1ef332300b3af9db2ab1e7b9f52caa37c66","yati1998","2022-06-02 11:01:43","false","rbd: remove the clone in case of failure

This commit removes the clone incase
unsetAllMetadata or copyEncryptionConfig or
expand fails for createVolumeFromSnapshot
and CreateSnapshot.
It also removes the clone in case of
any failure in createCloneFromImage.

issue: #3103

Signed-off-by: Yati Padia <ypadia@redhat.com>",38,53,1,0,"2018-01-08 15:47:21","1605.8"
"ceph/ceph-csi","6558de9e086ce89ce35c9acbb376ca008243a78d","humblec","2022-04-27 06:50:57","false","helm: remove cephfs node plugin cluster role RBAC

This commit remove the node plugin RBAC of CephFS.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",38,52,1,1,"2018-01-08 15:47:21","1569.63"
"ceph/ceph-csi","b50e93e689d8b112b806a340a208398f0abe198a","humblec","2022-04-27 08:27:38","false","nfs: remove node plugin RBAC for NFS provisioner

this commit removes the node plugin RBAC for NFS plugin as it is
not needed.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",38,52,1,1,"2018-01-08 15:47:21","1569.69"
"ceph/ceph-csi","2b4bb63eb8fd884f6601e653ce06a0e50caed569","nixpanic","2022-04-15 14:27:09","false","e2e: introduce ResourceDeployer interface

Signed-off-by: Niels de Vos <ndevos@redhat.com>",43,51,1,1,"2018-01-08 15:47:21","1557.94"
"ceph/ceph-csi","c67bacdb116fef0d06e2811a0c17969044d38111","Madhu-1","2022-01-21 09:36:06","false","cleanup: use %s instead of %w for t.Errorf

As t.Errorf does not support error-wrapping
directive using %s.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,48,1,1,"2018-01-08 15:47:21","1473.74"
"ceph/ceph-csi","1fee3ec460a5cd3d1fa193b7dbd2b5fd6b1fe6d1","humblec","2021-09-08 05:10:46","false","cleanup: correct checkReservation return description

it wrongly mention that the return is imageUUID string where actually
it is the imageData struct

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",66,44,0,1,"2018-01-08 15:47:21","1336.31"
"ceph/ceph-csi","a3751ada245a250a6b210f1e9400f22303d4adf9","Madhu-1","2022-08-03 06:08:10","false","ci: update dependencies in build.env

This commits updates below items

* Golang version to v1.18.5
* Golangci-lint to v1.47.3
* Helm version to v3.9.2
* Rook version to v1.9.8

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",40,55,1,1,"2018-01-08 15:47:21","1666.6"
"ceph/ceph-csi","b40e8894f8eead7f86883de4078f15936d1c378e","Madhu-1","2022-10-11 11:52:26","false","cephfs: use errors.As instead of errors.Is

As we need to compare the error type instead
of the error value we need to use errors.As
to check the API is implemented or not.

fixes: #3347

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",37,57,1,1,"2018-01-08 15:47:21","1733.84"
"ceph/ceph-csi","e3d1ba770351e51d43129a6f2e3811018c602fe3","Madhu-1","2020-12-08 10:34:54","false","deploy: set topology=false in provisioner sidecar

with csi-provisioner v2.x the topology based
provisioning will not have any backward compatibility
with older version of kubernetes, if the nodes are
not labeled with topology keys, the pvc creation
is going to get fail with error `accessibility
requirements: no available topology found`, disabling
the topology based provisioning by default, if user want
to use it he can always enable it.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",74,35,0,1,"2018-01-08 15:47:21","1061.28"
"ceph/ceph-csi","f2e98a19e826eb6cb9b2f10222167b992f7d8cd2","Madhu-1","2020-03-31 05:29:25","false","Install git in devel dockerfile

looks like git is not installed by default
in v15 base image.This PR installs the
git which is required to make containerized
build.

set GO111MODULE=on in dockerfile

we need to set GO111MODULE=on to fix
""build flag -mod=vendor only valid when using modules""
issue

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",115,27,0,1,"2018-01-08 15:47:21","813.07"
"ceph/ceph-csi","4eb5bd6ba68f1cc8a67771e790d17ec87fe97b5d","agarwal-mudit","2021-02-18 08:32:38","false","e2e: add e2e for snapshot retention fetaure.

Added e2e for snapshot retention feature.

Signed-off-by: Mudit Agarwal <muagarwa@redhat.com>",88,37,0,0,"2018-01-08 15:47:21","1135.45"
"ceph/ceph-csi","58c2a3f15fdd176dc3165082c49f5b7ef5fe7970","nixpanic","2020-04-18 14:47:56","false","minikube: fix ShellCheck errors

Signed-off-by: Niels de Vos <ndevos@redhat.com>",102,27,0,1,"2018-01-08 15:47:21","830.46"
"ceph/ceph-csi","eaea18df0f3b4d7519d2822f24fd888defaefa87","nixpanic","2020-08-07 08:18:00","false","util: use local FatalLog() for NewK8sClient() instead of klog

Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","940.19"
"ceph/ceph-csi","7d642b791c1bdae966dbc5338ea6efd4200dc07c","nixpanic","2020-04-23 11:42:17","false","e2e: fix IneffAssign warnings in checkPVSelectorValuesForPVC()

IneffAssign warns about the two following statements:

  Line 1342: warning: ineffectual assignment to rFound (ineffassign)
  Line 1350: warning: ineffectual assignment to zFound (ineffassign)

rFound and zFound should be set before entering the loop, otherwise the
initial value will overwrite the updated value on each iteration.

Reported-by: https://goreportcard.com/report/github.com/ceph/ceph-csi
Updates: #975
Signed-off-by: Niels de Vos <ndevos@redhat.com>",101,27,0,1,"2018-01-08 15:47:21","835.33"
"ceph/ceph-csi","5c6bf5fa1a13247e2e5471b29ab6c05cd602421a","rootfs","2019-02-25 18:12:50","true","Merge pull request #228 from gman0/metadata-delete-idempotency

Fixed DeleteVolume/snapshot metadata idempotency",31,14,0,0,"2018-01-08 15:47:21","412.35"
"ceph/ceph-csi","d80b8d7fc527695b9f27473963497132a2e6177c","humblec","2021-03-29 12:47:26","false","doc: correct reference links in the snapshot,release,upgrade docs

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",90,39,0,1,"2018-01-08 15:47:21","1176.63"
"ceph/ceph-csi","3af1e26d7c7d20262cb4884777f68b127ddf6ff1","humblec","2020-01-14 10:38:55","false","Update to kube v1.17

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",105,24,0,1,"2018-01-08 15:47:21","736.29"
"ceph/ceph-csi","5de4c2a970aa3d5d6c50c85ea49856905c681313","Madhu-1","2023-02-22 07:31:35","false","doc: upgrade doc from 3.7 to 3.8

updating upgrade document from 3.7
to 3.8.0

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",37,61,1,1,"2018-01-08 15:47:21","1869.91"
"ceph/ceph-csi","5ed305850f42ee4a7273260209b0dc60a49125e0","Rakshith-R","2022-07-20 07:32:17","false","build: resolve a fixme and disable tcmu repo

Cmd to disable apache arrow repo is removed, since
it is no longer needed.
Cmd to disable tcmu repo is added to make build pass.

refer: https://github.com/ceph/ceph-container/issues/2034

Signed-off-by: Rakshith R <rar@redhat.com>",40,54,1,1,"2018-01-08 15:47:21","1652.66"
"ceph/ceph-csi","b72774f9e97d18b5f011016cc71a4cc06eaaf8b5","nixpanic","2022-03-25 14:19:55","false","doc: example for PVC and Pod using a NFS-volume

Signed-off-by: Niels de Vos <ndevos@redhat.com>",44,51,1,1,"2018-01-08 15:47:21","1537.94"
"ceph/ceph-csi","40de75e0db595ef4a52f78e8623b665d77506a78","Rakshith-R","2022-03-23 05:31:25","false","rbd: modify oidc token file path according to FHS 3.0

OIDC token file path has been modified from
`/var/run/secrets/token` to `/run/secrets/tokens`.
This has been done to ensure compliance with
FHS 3.0.

refer:
https://refspecs.linuxfoundation.org/FHS_3.0/fhs/ch05s13.html

Signed-off-by: Rakshith R <rar@redhat.com>",42,50,1,1,"2018-01-08 15:47:21","1535.57"
"ceph/ceph-csi","7e221801253c7ec35f22943faf5e7711a080e43d","nixpanic","2021-11-03 13:18:20","false","rbd: call undoStagingTransaction() when NodeStageVolume() fails

On line 341 a `transaction` is created. This is passed to the deferred
`undoStagingTransaction()` function when an error in the
`NodeStageVolume` procedure is detected. So far, so good.

However, on line 356 a new `transaction` is returned. This new
`transaction` is not used for the defer call.

By removing the empty `transaction` that is used in the defer call, and
calling `undoStagingTransaction()` on an error of `stageTransaction()`,
the code is a little simpler, and the cleanup of the transaction should
be done correctly now.

Updates: #2610
Signed-off-by: Niels de Vos <ndevos@redhat.com>",56,46,0,1,"2018-01-08 15:47:21","1391.65"
"ceph/ceph-csi","bb68cc9bee03f57346a0dfab1848a408cd89ce20","nixpanic","2021-09-28 15:05:57","false","rebase: update vault/api to v1.1.1

Signed-off-by: Niels de Vos <ndevos@redhat.com>",60,45,0,1,"2018-01-08 15:47:21","1355.72"
"ceph/ceph-csi","7cbad9305f71b70040509ed854f1d65c7c624d4f","nixpanic","2021-05-26 08:29:32","false","rbd: repair thick-provisioned images on CreateVolume restart

Signed-off-by: Niels de Vos <ndevos@redhat.com>",97,41,0,1,"2018-01-08 15:47:21","1233.45"
"ceph/ceph-csi","dc38320fad9449c7df2bf4fe702547ffeaca1ff2","Madhu-1","2020-09-22 05:44:21","false","e2e: add backend validation for rados namespaced images

added more backend validation for rados namespaced
images.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",133,32,0,1,"2018-01-08 15:47:21","984.08"
"ceph/ceph-csi","fa1414d98f2d516f91528aa1c553e62dfeed0fb1","Rakshith-R","2021-05-07 04:58:14","false","cleanup: address ineffectual assignement linter issue

updates: #1586

Signed-off-by: Rakshith R <rar@redhat.com>",95,40,0,1,"2018-01-08 15:47:21","1215.3"
"ceph/ceph-csi","2307687dc2c9e924a02b24190bd39a363c2afe30","Madhu-1","2020-08-05 07:35:17","false","e2e: add backend validation of cephfs pvc

added a backend validation to check subvolumes
count when we create and delete pvc.

fixes #1316

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",117,31,0,1,"2018-01-08 15:47:21","938.16"
"ceph/ceph-csi","8fb87ef8a45ae1a5cc5b915b2010323aa8d5d3cd","humblec","2019-06-11 07:01:05","false","Use v1.1.1 of minikube

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",76,17,0,1,"2018-01-08 15:47:21","517.88"
"ceph/ceph-csi","18af27c98438fb3e78cb8635d6f7e5077c6b9a3d","humblec","2020-05-27 11:02:08","false","deploy: add `retry-interval-start` for attacher & resizer helm charts

--retry-interval-start:

This is initial retry interval for failures. 1 second is used by default.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",108,29,0,1,"2018-01-08 15:47:21","869.3"
"ceph/ceph-csi","2805135e763fb2a703e9525a700d521ca7411f88","humblec","2019-07-30 14:31:33","true","Merge pull request #515 from Madhu-1/fix-readme

Fix kube version in readme",76,19,0,1,"2018-01-08 15:47:21","567.2"
"ceph/ceph-csi","f9c368f225509a8ee5b682fe9c530a7b1d4852fe","humblec","2022-01-13 11:46:56","false","doc: update support matrix for release 3.5

This commit adds release 3.5 to the release support matrix.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",39,48,1,1,"2018-01-08 15:47:21","1465.83"
"ceph/ceph-csi","8ea495ab819ffbcadb13e866370f3101b59be169","humblec","2021-08-26 09:50:27","false","rbd: skip volumeattachment processing if pv marked for deletion

if the volumeattachment has been fetched but marked for deletion
the nbd healer dont want to process further on this pv. This patch
adds a check for pv is marked for deletion and if so, make the
healer skip processing the same

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",115,43,0,1,"2018-01-08 15:47:21","1323.5"
"ceph/ceph-csi","5598c279dad76d46879501c16ac435092a4cacd9","nixpanic","2020-10-01 07:18:58","false","cleanup: no magic number for RWX permissions

golang-ci complains that 0777 is a magic number, so make it a constant
with a clear description.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",119,33,0,1,"2018-01-08 15:47:21","994.15"
"ceph/ceph-csi","6287f6c6ec72cadb23b01b91170d86191df0c916","Yuggupta27","2020-08-19 07:03:31","false","ci: Add pre-commit hook to catch issues locally

The Git hooks force the developers to satisty
certain rules before commiting changes(locally).

Following checks will be run before allowing developers
to commit changes:
1. Check if the commit message has a valid sign-off.
2. Catch gofmt issues, if any.
3. Verify syntax of yaml and json files.(if present)
4. Makes sure that files end in a new line.
5. Trims trailing whitespace.
6. Run commitlint check on the commit message.

The developers will not be allowed to commit changes
without satisfying the above mentioned rules; This will
inturn help in avoiding failures on CI.

Signed-off-by: Yug <yuggupta27@gmail.com>",120,31,0,0,"2018-01-08 15:47:21","951.14"
"ceph/ceph-csi","70501eb66132dac648753431e1cbf6ebef8f6f0d","Rakshith-R","2022-05-24 09:48:22","false","ci: increase e2e_timeout to 150 mins

With the added nfs snap and clone tests,
e2e test is timing out. This commit increases
the timeout to 150 mins.

Signed-off-by: Rakshith R <rar@redhat.com>",35,52,1,1,"2018-01-08 15:47:21","1596.75"
"ceph/ceph-csi","66f8a51c93d077da7c544351a64db92b416c72e9","humblec","2022-01-31 04:42:33","false","doc: clarified subvol in shallow-ro-vol.md

instead of subvol, subvolume has been used for consistency across
the doc

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",39,49,1,1,"2018-01-08 15:47:21","1483.54"
"ceph/ceph-csi","c42d4768caae78748f0254ea2255bc70884ab4e2","humblec","2021-07-20 07:46:33","false","util: remove the deleteLock acquistion check for clone and snapshot

At present while acquiring the deleteLock on the volume, we check
for ongoing clone and snapshot creation operations on the same.
Considering snapshot and clone controllers does not allow parent
volume deletion on subjected operations, we can be free from this
extra check.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",126,42,0,1,"2018-01-08 15:47:21","1287.42"
"ceph/ceph-csi","68ff602391bb91598618a2b15d64d636fb9e8ce8","humblec","2019-05-07 09:55:11","false","Resolve merge conflict

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",68,16,0,1,"2018-01-08 15:47:21","485.01"
"ceph/ceph-csi","b7286329ef4791201099a28682f4976a08c36e9a","rootfs","2018-01-10 18:27:56","false","rename travis",0,0,0,0,"2018-01-08 15:47:21","2.11"
"ceph/ceph-csi","b5b8e4646094d0ec1f3dfe96060a183c863d7d1a","j-griffith","2019-03-01 17:45:27","false","Add multiNodeWritable option for RBD Volumes

This change adds the ability to define a `multiNodeWritable` option in
the Storage Class.

This change does a number of things:
1. Allow multi-node-multi-writer access modes if the SC options is
enabled
2. Bypass the watcher checks for MultiNodeMultiWriter Volumes
3. Maintains existing watcher checks for SingleNodeWriter access modes
regardless of the StorageClass option.

fix lint-errors",32,14,0,0,"2018-01-08 15:47:21","419.33"
"ceph/ceph-csi","01d4a614c307188677a3fcec93fd303bbc7cc298","Madhu-1","2022-10-14 12:46:01","false","rbd: delete volume if setallmetadata fails

If any operations fails after the volume creation
we will cleanup the omap objects, but it is missing
if setAllMetadata fails. This commits adds the code
to cleanup the rbd image if metadata operation fails.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,57,1,1,"2018-01-08 15:47:21","1736.87"
"ceph/ceph-csi","81061e9f6816d1a31f44c317886f08857b0fc9e8","Madhu-1","2020-12-15 07:11:28","false","util: add support for vault certificates

Added a option to pass the client certificate
and the client certificate key for the vault token
based encryption.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",76,35,0,1,"2018-01-08 15:47:21","1067.14"
"ceph/ceph-csi","8b48ded21f08c7d4ad4af5377d3dafa9121df352","Madhu-1","2021-12-10 05:36:39","false","ci: add mergify condition for kubernetes 1.23

as we are running tests on kubernetes 1.23 by
default, adding mergify condition to check test
passed on kubernetes 1.23 also.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",49,47,1,1,"2018-01-08 15:47:21","1427.33"
"ceph/ceph-csi","6f0087e870b244fcc6a02f8747bef53b5f81f444","Madhu-1","2022-01-20 15:06:07","false","build: use cephcsi image version from build.env

we dont need to specify the image version
separately in minikube script, use the image
version defined in the build.env

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",41,48,1,1,"2018-01-08 15:47:21","1472.97"
"ceph/ceph-csi","f60a07ae8268136f40de3d62537f4f8b020f0ec4","Madhu-1","2019-04-03 07:57:13","false","update vendor to latest kubernetes 1.14.0

some of the kubernetes independent
packages are moved out of the tree to
new projects.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",46,15,0,1,"2018-01-08 15:47:21","450.92"
"ceph/ceph-csi","562dff0d19708a2e68a5d3e5a4ba7780c3286020","Madhu-1","2022-01-21 09:28:27","false","cleanup: use os.WriteFile to write files

as ioutil.WriteFile is deprecated and
suggestion is to use os.WriteFile as
per https://pkg.go.dev/io/ioutil updating
the same.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,48,1,1,"2018-01-08 15:47:21","1473.74"
"ceph/ceph-csi","dc7ba684e3ba16a0f62569f815be5261162432e3","irq0","2022-09-06 16:46:56","false","rbd: Use EncryptionTypeNone

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",38,56,1,0,"2018-01-08 15:47:21","1700.04"
"ceph/ceph-csi","bc9ad3d9f16f99929d72539cffe73c46b14eeb7c","humblec","2022-07-20 08:20:20","false","rbd: add dummy attacher implementation

previously, it was a requirement to have attacher sidecar for CSI
drivers and there had an implementation of dummy mode of operation.
However skipAttach implementation has been stabilized and the dummy
mode of operation is going to be removed from the external-attacher.
Considering this driver  work on volumeattachment objects for NBD driver
use cases, we have to implement dummy controllerpublish and unpublish
and thus keep supporting our operations even in absence of dummy mode
of operation in the sidecar.

This commit make a NOOP controller publish and unpublish for RBD driver.

CephFS driver does not require attacher and it has already been made free
from the attachment operations.

    Ref# https://github.com/ceph/ceph-csi/pull/3149
    Ref# https://github.com/kubernetes-csi/external-attacher/issues/226

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",40,54,1,1,"2018-01-08 15:47:21","1652.69"
"ceph/ceph-csi","5932fff93e82362b6c6d3426836d35a1ae2a9f09","ajarr","2019-07-25 12:34:51","false","cephfs: set pool layout of the FS subvolumes

... instead of that of the `csi` subvolume group. The pool layout
specified via storage class's `pool` setting is a subvolume property
and not a subvolume group property. The `csi` subvolume group
may have subvolumes of different storage classes with different
pool layouts.

Fixes: #499
Signed-off-by: Ramana Raja <rraja@redhat.com>",77,18,0,0,"2018-01-08 15:47:21","562.12"
"ceph/ceph-csi","d1fe12b4f00a0ca07c587dffe6219faead97b454","humblec","2020-08-04 03:56:43","false","cephfs: change createvolume for snapshot/clone workflow

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","937.01"
"ceph/ceph-csi","4f9823efbb13effc8061126583490e5c59402cd1","humblec","2020-10-15 13:53:23","false","e2e: add block mode PVC clone file

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",76,33,0,1,"2018-01-08 15:47:21","1007.42"
"ceph/ceph-csi","4785c55bb8bdd2befea3a9edb61dd6f143ef7b38","humblec","2021-11-22 06:03:50","false","e2e: reformat error message with proper error formatting

To make the error return consistent across e2e tests we have decided
to remove `with error` presence from the logs and this commit
does that for rbd tests.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",55,46,0,1,"2018-01-08 15:47:21","1409.34"
"ceph/ceph-csi","c4e373c72fbf23e1fdb969c5fee656f80b464f8c","iPraveenParihar","2023-10-30 08:23:12","false","deploy: support for read affinity options per cluster

Implemented the capability to include read affinity options
for individual clusters within the ceph-csi-config ConfigMap.
This allows users to configure the crush location for each
cluster separately. The read affinity options specified in
the ConfigMap will supersede those provided via command line arguments.

Signed-off-by: Praveen M <m.praveen@ibm.com>",19,70,1,0,"2018-01-08 15:47:21","2117.94"
"ceph/ceph-csi","4e2c4ef704c8873b5d5e52f53f8069f9bc0dda70","Madhu-1","2021-06-07 05:40:16","false","cephfs: return internal server error

if it is an error from the IsMountPoint
function and the error is not IsNotExist return
it as a internal server error.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",109,41,0,1,"2018-01-08 15:47:21","1245.33"
"ceph/ceph-csi","e4713bc9ed2687cfa8378f74dc816bb15bef1026","Madhu-1","2020-11-26 08:34:38","false","cephfs: remove unused Credentials argument from getVolumeRootPathCeph

remove unused Credentials argument from getVolumeRootPathCeph
function.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",84,34,0,1,"2018-01-08 15:47:21","1048.2"
"ceph/ceph-csi","5983d5730a4e145f8b8c4ec19c0593051fd36641","Rakshith-R","2022-05-16 07:20:43","false","deploy: add support for nfs snapshot

This commit add external-snapshotter container and
required rbac to support nfs snaphots.
Example volumesnaphotclass, volumesnapshot,
pvc-restore and pod-restore yamls are also added.

Signed-off-by: Rakshith R <rar@redhat.com>",37,52,1,1,"2018-01-08 15:47:21","1588.65"
"ceph/ceph-csi","ded75eb09954c2a04b9fb45993d5ff3d23b1c457","Rakshith-R","2021-10-01 05:46:20","false","rbd: copyEncryptionConfig for thickProvisioned snap restore too

This commit adds bugfix to copy encryption passphrase for thick
provisioned PVC restored from snapshot.

Signed-off-by: Rakshith R <rar@redhat.com>",59,45,0,1,"2018-01-08 15:47:21","1359.33"
"ceph/ceph-csi","276918db1080e8e42aca19e2ca02312e6e240c9d","nixpanic","2021-07-08 13:25:35","false","rebase: update minikube to v1.22.0

Minikube has bumped it's support for latest Kubernetes version to
1.22.0-beta.0. This might improve our CI jobs with Kubernetes 1.22 too.

See-also: https://github.com/kubernetes/minikube/releases/tag/v1.22.0
Signed-off-by: Niels de Vos <ndevos@redhat.com>",122,42,0,1,"2018-01-08 15:47:21","1276.65"
"ceph/ceph-csi","99dabca319721305c3ae791f15972cacf04c332f","nixpanic","2020-04-24 09:27:12","false","add build step logging to multi-arch build

With extra logging, there is no need to call `travis_wait` anymore. In
addition the `travis_wait` command blocks output, so the build steps are
not reported until the script finishes.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",105,27,0,1,"2018-01-08 15:47:21","836.24"
"ceph/ceph-csi","8447a1feab344374c967f53de75ce88647616701","nixpanic","2021-08-19 07:56:31","false","cleanup: address pylint ""consider-using-with"" in tracevol.py

pylint started to report errors like the following:

    troubleshooting/tools/tracevol.py:97:10: R1732: Consider using 'with' for resource-allocating operations (consider-using-with)

There probably has been an update of Pylint in the test-container that
is more strict than previous versions.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,43,0,1,"2018-01-08 15:47:21","1316.42"
"ceph/ceph-csi","3c9d7e3cd5caaa20ced8f16146074c4c3550f1d2","humblec","2021-10-01 04:18:19","false","rbd: detect migration volID in DeleteVolume() and delete rbd image

This commit adds the logic to detect a passed in volumeID
is a migrated volume ID and if yes, the driver connect to the
backend cluster and clean/delete the image. The logic
only applied if its a migration volume ID. The migration volume ID
carry the information like mons, pool and image name which is
good enough for the driver to identify and connect to the backend
cluster for its operations.

migration volID format:
<mig>_mons-<monsHash>_image-<imageUID>_<poolHash>

Details on the hash values:

* MonsHash: this carry a hash value (md5sum) which will be acted as the
`clusterID` for the operations in this context.

* ImageUID: this is the unique UUID generated by kubernetes for the created
volume.

* PoolHash: this is an encoded string of pool name.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",59,45,0,1,"2018-01-08 15:47:21","1359.27"
"ceph/ceph-csi","9ac1391d0f07924714f03772722ac19eaba13022","humblec","2021-08-18 04:16:11","false","util: correct interface name and remove redundancy

ContollerManager had a typo in it, and if we correct it,
linter  will fail and suggest not to use controller.ControllerManager
as the interface name and package name  is redundant, keeping manager
as the interface name which is the practice and also address the
linter issues.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",116,43,0,1,"2018-01-08 15:47:21","1315.27"
"ceph/ceph-csi","0151792684a04d2a755c2f073801e4147331c34f","rootfs","2019-01-21 14:21:03","false","review feedback: make monValueFromSecret override monitors if both are set

Signed-off-by: Huamin Chen <hchen@redhat.com>",18,12,0,0,"2018-01-08 15:47:21","378.19"
"ceph/ceph-csi","b2f0d62ad89bf9f68d74fc80401dffd57a0b3665","Rakshith-R","2022-05-16 09:38:35","false","e2e: add tests for nfs snapshot and restore

Signed-off-by: Rakshith R <rar@redhat.com>",37,52,1,1,"2018-01-08 15:47:21","1588.74"
"ceph/ceph-csi","de74c36d8c3db81f8d207665b74cfba42eabbfe3","ansiwen","2020-07-02 21:43:40","false","cleanup: address err113 warnings about direct error comparisons

Several places in the code compared errors directly with the go-ceph
sentinel errors.  This change uses the errors.Is() function of go
1.13 instead.  The err113 linter reported this issue as:

err113: do not compare errors directly, use errors.Is() instead

Signed-off-by: Sven Anderson <sven@redhat.com>",111,30,0,0,"2018-01-08 15:47:21","905.75"
"ceph/ceph-csi","7411773f7367f4ef05f9012f71361bfcd6cf6a70","k0ste","2021-09-16 10:38:04","false","rbd: added RBD features support for krbd

Added support for `object-map, fast-diff`

Signed-off-by: Konstantin Shalygin <k0ste@k0ste.ru>",61,44,0,0,"2018-01-08 15:47:21","1343.54"
"ceph/ceph-csi","1ac0757aab2a27f69d22f64a481696bba54ad230","rootfs","2019-01-16 14:04:01","true","Merge pull request #131 from Madhu-1/csi-v1.0-cleanup

Csi v1.0 cleanup",16,12,0,0,"2018-01-08 15:47:21","373.18"
"ceph/ceph-csi","825448825c56fe6c240458fc9a29f931c0ee6cc1","nixpanic","2020-03-24 07:48:27","false","examples: rbd/storageclass.yaml causes Python excetion with yamllint

While running the 'make test' target and have 'yamllint' available, the
test fails with the following exception:

yamllint -s -d {extends: default, rules: {line-length: {allow-non-breakable-inline-mappings: true}},ignore: charts/*/templates/*.yaml} ./examples/rbd/storageclass.yaml
Traceback (most recent call last):
  File ""/usr/local/bin/yamllint"", line 11, in <module>
    sys.exit(run())
  File ""/usr/local/lib/python3.6/site-packages/yamllint/cli.py"", line 181, in run
    problems = linter.run(f, conf, filepath)
  File ""/usr/local/lib/python3.6/site-packages/yamllint/linter.py"", line 237, in run
    content = input.read()
  File ""/usr/lib64/python3.6/encodings/ascii.py"", line 26, in decode
    return codecs.ascii_decode(input, self.errors)[0]
UnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 1947: ordinal not in range(128)

The quotes used in the comments seem to be non-ascii characters.
Replacing these with standard "" makes the test pass again.

This problem occurred while running tests in a container based on the
Ceph image (CentOS-7) with Python 3. Travis CI might still use Python 2
for yamllint, and hide the problem.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",113,26,0,1,"2018-01-08 15:47:21","806.17"
"ceph/ceph-csi","43fbc00d49bae2661ff2cb3d4a0099c878c9d649","nixpanic","2020-04-21 09:57:19","false","travis: group build/e2e testing in stages

This reduces the number of concurrent jobs that get executed. The ""build
test"" jobs are relatively quick, and give developers the 1st feedback.
Longer e2e testing now only happens once the build tests have passed.

See-also: https://docs.travis-ci.com/user/build-stages/
Signed-off-by: Niels de Vos <ndevos@redhat.com>",100,27,0,1,"2018-01-08 15:47:21","833.26"
"ceph/ceph-csi","0e6443e4c173f2e3e5d28502c97472ca166f7556","nixpanic","2020-10-22 05:07:05","false","deploy: add --extra-create-metadata arg to csi-provisioner sidecar

This argument in csi-provisioner sidecar allows us to receive pv/pvc
name/namespace metadata in the createVolume() request.

For ex:

    csi.storage.k8s.io/pvc/name
    csi.storage.k8s.io/pvc/namespace
    csi.storage.k8s.io/pv/name

This is a useful information which can be used depend on the use case we
have at our driver. The features like vault token enablement for multi
tenancy, RBD mirroring ..etc can consume this based on the need.

Refer: #1305
Signed-off-by: Humble Chirammal <hchiramm@redhat.com>
Signed-off-by: Niels de Vos <ndevos@redhat.com>",73,33,0,1,"2018-01-08 15:47:21","1014.06"
"ceph/ceph-csi","f5dd8e769fd5abbbf7465895e3b0f0a182c0de33","nixpanic","2021-06-17 07:46:32","false","rebase: update github.com/aws/aws-sdk-go to latest version

Signed-off-by: Niels de Vos <ndevos@redhat.com>",113,41,0,1,"2018-01-08 15:47:21","1254.42"
"ceph/ceph-csi","ee2e97b62db842cae0b8ac666c16f87466774608","nixpanic","2021-12-22 07:09:27","false","deploy: add CSI-Addons endpoint

Deployments place all sockets for communicating with CSI components in
the shared `/csi` directory. The CSI-Addons socket was introduced
recently, but not configured to be in the same location (by default
placed in `/tmp`).

Signed-off-by: Niels de Vos <ndevos@redhat.com>",53,47,1,1,"2018-01-08 15:47:21","1439.39"
"ceph/ceph-csi","0457fbe8516086be901b004d3d2bde271f6d4aea","humblec","2020-05-06 15:08:37","false","ci: add initial configuration for stale bot

The rules are defined here which could enable stale bot.

Additional Ref# https://probot.github.io/apps/stale/

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",107,28,0,1,"2018-01-08 15:47:21","849.47"
"ceph/ceph-csi","a1de56dbd3296ca38b1cb6117fdb8d5738999727","nixpanic","2020-03-24 07:53:55","false","tests: in case 'go test' is run in a container, skip TestGetPIDLimit()

In (standard, non-privileged) container environments the /sys/fs/cgroup
mountpoint is not available. This would cause the tests to fail, as
TestGetPIDLimit() tries to write to the cgroup configuration.

The test will work when run as root on a privileged container or
directly on a host (as Travis CI does).

Setting the CEPH_CSI_RUN_ALL_TESTS environment variable to a non-empty
value will cause the test to be executed.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",113,26,0,1,"2018-01-08 15:47:21","806.17"
"ceph/ceph-csi","57f8ee0aa7457b559a3e1b45054e0bb344874d3a","nixpanic","2020-11-04 12:46:31","false","cephfs: make createSnapshot() a method of volumeOptions

Signed-off-by: Niels de Vos <ndevos@redhat.com>",80,34,0,1,"2018-01-08 15:47:21","1027.37"
"ceph/ceph-csi","1a2d71e58016e7ed1118f14597041133ae0a37e0","Madhu-1","2019-06-14 09:26:17","false","Add code to test snapshot,pvc clone and pvc block mode

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",76,17,0,1,"2018-01-08 15:47:21","520.99"
"ceph/ceph-csi","3d0cba1931b2f61e08c6a195076862343ca57e39","Madhu-1","2019-09-25 14:51:53","false","Remove rootfs from rbd provisioner pod

rootfs dependency was removed from rbd
by removing support for `nsenter`, This
PR removed the `/` mount from provisioner

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",86,20,0,1,"2018-01-08 15:47:21","622.21"
"ceph/ceph-csi","abd548e420ee3fa69d83c41f3f177e794eaf0bce","Madhu-1","2020-08-11 12:04:12","false","cephfs: replace warning with WarningLogMsg in Run

replace warning with WarningLogMsg in Run for
context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.35"
"ceph/ceph-csi","c1ec54e5c6aa34828a0a9a429aa9394c4eb66093","nak3","2018-07-26 09:19:20","false","Correct cephfsplugin binary path

Makefile has a wrong path to `deploy/cephfs/docker/rbdplugin`. This
patch changes to `deploy/cephfs/docker/cephfsplugin`.",5,6,0,0,"2018-01-08 15:47:21","197.73"
"ceph/ceph-csi","b93418815f888e2aeadd207cd2e8fdff0275deb5","rootfs","2018-10-15 15:08:39","true","Merge pull request #90 from rootfs/master

fix golint",10,9,0,0,"2018-01-08 15:47:21","276.97"
"ceph/ceph-csi","d772fc098c130526598808167a9bce21029900fe","humblec","2022-11-11 09:47:04","false","rebase: update to go-ceph v1.18.0

this commit make use of latest go-ceph version
https://github.com/ceph/go-ceph/releases/tag/v0.18.0

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",36,58,1,1,"2018-01-08 15:47:21","1763.75"
"ceph/ceph-csi","83167e2ac55068422d59f7eb0f5c53280d7735b2","nixpanic","2021-07-30 07:52:44","false","util: correct error message when connecting to Vault fails

Signed-off-by: Niels de Vos <ndevos@redhat.com>",119,43,0,1,"2018-01-08 15:47:21","1297.42"
"ceph/ceph-csi","a6cd56ae7ea839c7fece49dcff6654db61bb2af5","nixpanic","2022-07-21 09:26:45","false","e2e: correct failure logging for NFS

Some of the steps still refer to CephFS, likely missed some replacements
while copy/pasting. The logging is a little confusing when messages
claim something with CephFS failed, but the test is about NFS.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",40,54,1,1,"2018-01-08 15:47:21","1653.74"
"ceph/ceph-csi","af922f267a2b219eed27a19a96d99ab0a9d4d3ba","nixpanic","2020-10-14 09:37:58","false","e2e: use k8sVersionGreaterEquals() for rbd upgrade tests

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,33,0,1,"2018-01-08 15:47:21","1006.24"
"ceph/ceph-csi","47f89889efca77a075463aab1974c1d2ae6f2eed","c3y1huang","2020-01-07 02:44:17","false","Fix typo for comment in charts

* ceph-csi-cephfs
* ceph-csi-rbd

Signed-off-by: Chin-Ya Huang <chin-ya.huang@suse.com>",104,24,0,0,"2018-01-08 15:47:21","724.71"
"ceph/ceph-csi","b778fe51a4ad061ccc2b02e67354b8cb2a3a8084","humblec","2021-10-01 04:15:45","false","e2e: add test for migration volID detection and delete of image

This commit add test for migration delete volID detection scenario
by passing a custom volID and with the entries in configmap changed
to simulate the situation. The staticPV function also changed its
accept the annotation map which make it more general usage.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",59,45,0,1,"2018-01-08 15:47:21","1359.27"
"ceph/ceph-csi","f3b06d4c4a4706f01200e5b7405c39f97994336a","nixpanic","2021-03-24 16:09:46","false","util: pass Namespace as part of KMSInitializerArgs

Amazon KMS expects a Secret with sensitive account and key information
in the Kubernetes Namespace where the Ceph-CSI Pods are running. It will
fetch the contents of the Secret itself.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",88,38,0,1,"2018-01-08 15:47:21","1171.77"
"ceph/ceph-csi","3c6054ddf9e80bb388566828ef5cd46f0550cf68","nixpanic","2020-04-18 14:55:23","false","add make target for containerized tests

`make containerized-test` has been added as a make target. This runs the
'make test' target in a container. All test dependencies are installed
in the container once, and the container is kept around for running
`make containerized-test` subsequently.

The test container is based on Fedora:latest so that all test tools get
easily installed and are available in a recent version. The production
container is based on the Ceph container which has CentOS as Operating
System and therefor a more stable (too old) toolset.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",102,27,0,1,"2018-01-08 15:47:21","830.46"
"ceph/ceph-csi","ee843e6ffd61c3eca9f0bf5011898e8e417cd3b4","nixpanic","2023-08-22 11:16:59","false","ci: only add `/test ..` comment if the branch for the PR matches

By adding an if-statement for each step of the matrix job, only those
steps are executed where the base ref of the PR matches the branch in
the matrix parameters.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",21,67,1,1,"2018-01-08 15:47:21","2050.06"
"ceph/ceph-csi","3d489781a0feac8b21dfc0f625c6a82f0933c3df","nixpanic","2023-05-09 07:54:10","false","rebase: `grpc_middleware.WithUnaryServerChain` is deprecated

golangci-lint reports that `grpc_middleware.WithUnaryServerChain` is
deprecated and `google.golang.org/grpc.ChainUnaryInterceptor` should be
used instead.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",28,64,1,1,"2018-01-08 15:47:21","1946.92"
"ceph/ceph-csi","f7796081d39874ff7d429270e2f53039b92e9b72","Madhu-1","2022-12-21 09:27:34","false","cephfs: skip expand for BackingSnapshot volume

We should not call ExpandVolume for the BackingSnapshot
subvolume as there wont be any real subvolume created for
it and even if we call it the ExpandVolume will fail
fail as there is no real subvolume exists.

This commits fixes by adjusting the `if` check to ensure
that ExpandVolume will only be called either the
VolumeRequest is to create from a snapshot or volume
and BackingSnapshot is not true.

sample code here https://go.dev/play/p/PI2tNii5tTg

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",30,59,1,1,"2018-01-08 15:47:21","1803.74"
"ceph/ceph-csi","82ea8fea936caa8b7b1343115920e05b619a7855","irq0","2022-12-09 16:56:35","false","doc: Briefly document CephFS fscrypt support

Add encrypted, encryptionKMSID to the parameters list. Briefly document
the fscrypt CephFS support.

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",32,59,1,0,"2018-01-08 15:47:21","1792.05"
"ceph/ceph-csi","848e3ee55775d5ecdf3562cbb569195ae0adc2fe","Madhu-1","2022-10-21 12:22:14","false","rbd: return abnormal in NodeGetVolumeStats

When we do stat on the targetpath, if there is
any error we can check is it due to corruption.
If yes, cephcsi can return abnormal in the
NodeGetVolumeStats so that consumer (CO/admin)
and detect and take further action.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,57,1,1,"2018-01-08 15:47:21","1743.86"
"ceph/ceph-csi","1eaf6af8824b2367ef07ee1e296f319d72bcaa86","nixpanic","2022-09-21 13:11:21","false","rebase: update minikube to 1.27.0

The fscrypt kernel module has been enabled, yay!

See-also: kubernetes/minikube#14783
Updates: #3310
Signed-off-by: Niels de Vos <ndevos@redhat.com>",39,56,1,1,"2018-01-08 15:47:21","1713.89"
"ceph/ceph-csi","507844c9b108992f1d6e8b5e8a6d9113e3e5fb9c","BenoitKnecht","2022-07-06 09:03:12","false","rbd: Use rados namespace when getting clone depth

When the Ceph user is restricted to a specific namespace in the pool, it is
crucial that evey interaction with the cluster is done within that namespace.
This wasn't the case in `getCloneDepth()`.

This issue was causing snapshot creation to fail with

> Failed to check and update snapshot content: failed to take snapshot of the
> volume X: ""rpc error: code = Internal desc = rbd: ret=-1, Operation not
> permitted""

Signed-off-by: Benoît Knecht <bknecht@protonmail.ch>",40,54,1,0,"2018-01-08 15:47:21","1639.72"
"ceph/ceph-csi","1b6027669c049d950839655a11484678593d1859","Madhu-1","2022-06-01 09:47:30","false","rebase: update golangci-lint to latest release

updating golangci-lint to the latest release
i.e v1.46.2

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",37,53,1,1,"2018-01-08 15:47:21","1604.75"
"ceph/ceph-csi","6333c4b1e6ca1ef7d52c7d4b9fb15d086cbb0341","Madhu-1","2022-04-06 15:07:09","false","ci: remove duplicate release-3.5 merge rules

we already have generic rules to merge the PR's
in devel and release branches with `automatic merge`
rules. Removing the duplicate release-3.5 rule.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",44,51,1,1,"2018-01-08 15:47:21","1549.97"
"ceph/ceph-csi","3b4d193ca8a2b5f6263ee7c14ceb23289305f185","nixpanic","2022-03-22 09:48:02","false","journal: add StoreAttribute/FetchAttribute

Signed-off-by: Niels de Vos <ndevos@redhat.com>",42,50,1,1,"2018-01-08 15:47:21","1534.75"
"ceph/ceph-csi","e3fb20de216e7630030eaa2789e2fd4202e894c6","Yuggupta27","2020-08-21 09:32:45","false","doc: Correct minor nits

Correct development-guide doc with minor
nit picks.

Signed-off-by: Yug <yuggupta27@gmail.com>",119,31,0,0,"2018-01-08 15:47:21","953.24"
"ceph/ceph-csi","0f0cda49a72983b58b43ce3bf96a0c8e452a0d70","Madhu-1","2021-11-08 07:56:23","false","rbd: log stdError for cryptosetup command

If we hit any error while running the cryptosetup
commands we are logging only the error message.
with only error message it is difficult to analyze
the problem, logging the stdError will help us to
check what is the problem.

updates: #2610

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",56,46,0,1,"2018-01-08 15:47:21","1396.42"
"ceph/ceph-csi","72edf069160d935aed38950ac77f3aad7d25bc3c","j-griffith","2019-03-01 22:07:07","false","Fix obsolete comment

Had a stray comment that got left behind during refactoring, move it
back to where it's relevant and reword it a bit to fit the finished
product.",32,14,0,0,"2018-01-08 15:47:21","419.51"
"ceph/ceph-csi","31634ede3d96b82cff034720bffc469c4de7d3e0","Rakshith-R","2021-04-15 05:57:32","false","cleanup: update mergify.yml to use merge_bot_account option

New version of mergifyio requires the use `merge_bot_account`
instead of `bot_accout` configuration option.

Signed-off-by: Rakshith R <rar@redhat.com>",87,39,0,1,"2018-01-08 15:47:21","1192.34"
"ceph/ceph-csi","f1e9d8084a9f4cada37ceecc1d1329ce9409bfeb","Rakshith-R","2023-08-09 11:16:45","false","cephfs: set Pool parameter to empty for Snapshot-backed volumes

Set VolumeOptions.Pool parameter to empty for Snapshot-backed volumes.
This Pool parameter is optional and  only used as 'pool-layout' parameter
during subvolume and subvolume clone create request in cephcsi
and not used for Snapshot-backed volume at all.
It is not saved anywhere for use in subsequent operations after create too.
Therefore, We can set it to empty and not error out.

Signed-off-by: rakshith-r <rar@redhat.com>",24,67,1,1,"2018-01-08 15:47:21","2037.06"
"ceph/ceph-csi","9fde4f7f188cb0fe572e1161643f2be563b74f1f","Madhu-1","2021-06-17 06:22:01","false","ci: disable push artifacts on fork repos

disabling push artifacts github action on the
fork repos as it doesnot makes sense to run push
actions on the fork repo.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",110,41,0,1,"2018-01-08 15:47:21","1254.36"
"ceph/ceph-csi","8dcb6a6105f5f890c5f4e86e1208774262847070","Madhu-1","2020-01-31 08:49:11","false","Handle Delete operation if pool not found

If the backend rbd or cephfs pool is already deleted
we need to return success to the  DeleteVolume RPC
call to make it idempotent.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",107,25,0,1,"2018-01-08 15:47:21","753.21"
"ceph/ceph-csi","4cc6238cc43019f85c624acf89fae38b8161ee5c","Madhu-1","2021-05-25 09:25:47","false","ci: add wait-timeout flag to minikube start

minikube waits for 6 minutes for the minikube or
host to be ready, due to resource issue sometimes
the host/minikube might take longer time to start
the cluster. Increase the timeout to 10m by default

updates #1969

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",100,40,0,1,"2018-01-08 15:47:21","1232.49"
"ceph/ceph-csi","3fb83aa40a2524a9b65fdc0e343b1348e259758d","rootfs","2019-02-25 17:32:06","true","Merge pull request #209 from Madhu-1/kube-1.13.3

update k8s to latest 1.13.3",31,14,0,0,"2018-01-08 15:47:21","412.32"
"ceph/ceph-csi","0b44249eef60d7c7b884d3be78e2ff72150e4f55","humblec","2019-06-03 12:45:10","true","Merge pull request #398 from humblec/travis

Remove csi-v1.0 from branches in travis.",77,17,0,1,"2018-01-08 15:47:21","511.12"
"ceph/ceph-csi","0d9548c815ff8b0ad8720b17b56d4fb762b1442c","yati1998","2021-02-10 08:19:40","false","Cephfs: Failed to delete snapshot

Failed to delete voluesnapshot when backend subvolume
(pvc) and ceph fs subvolume snapshot is deleted

Fixes#1647

Signed-off-by: Yati Padia <ypadia@redhat.com>",83,37,0,0,"2018-01-08 15:47:21","1127.44"
"ceph/ceph-csi","6a8ddad669610a8bc2094df48e66556018c52a8c","Madhu-1","2020-01-02 08:26:59","false","Add Ceph-csi Upgrade documentation

Added Upgrade doc from v1.2.x to v2.0.0

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",103,24,0,1,"2018-01-08 15:47:21","719.94"
"ceph/ceph-csi","ed9330d2f6b9e5477fcf48d42290f96dfb31afba","Madhu-1","2019-09-11 04:35:03","false","rename Key to CtxKey

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",81,20,0,1,"2018-01-08 15:47:21","607.78"
"ceph/ceph-csi","a151bec94b93f0f8ddbe50b572bcbe94e4c344ae","Madhu-1","2019-06-10 04:08:06","false","Use Deployment with leader election instead of StatefulSet

Deployment behaves better when a node gets disconnected from the rest of
the cluster - new provisioner leader is elected in ~15 seconds, while
it may take up to 5 minutes for StatefulSet to start a new replica.

Refer: https://github.com/kubernetes-csi/external-provisioner/commit/52d1fbcf9d52d35053164bb0409aa97dd3e7777a

Fixes: #335

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",79,17,0,1,"2018-01-08 15:47:21","516.76"
"ceph/ceph-csi","f4b38228ae7f2fae6313683008c106e4dddbc8da","Madhu-1","2019-09-05 06:43:53","false","Remove volumemounter flag from cephfs

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",86,20,0,1,"2018-01-08 15:47:21","602.87"
"ceph/ceph-csi","310c36e319cdaaec75a12e47f8599e82076ddadd","Madhu-1","2020-07-08 11:49:27","false","ci: separate the cephfs and rbd tests

As the maximum time allocated for the Travis
CI is 50 minutes and the cephfs and rbd E2E
takes around 45 Minutes to run completely.
This is blocking us from adding more tests in E2E.
splitting out the E2E will help us to run more tests
for each driver as we will get 50 minutes for
each Travis CI instance.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",110,30,0,1,"2018-01-08 15:47:21","911.33"
"ceph/ceph-csi","d56978739f1ff7e948f6ef21378e99f74bd1d8b4","humblec","2021-05-12 17:49:39","false","deploy: update Rook version to v1.6.2

Rook v1.6.2 is available and this patch updates the version to the
same:

https://github.com/rook/rook/releases/tag/v1.6.2

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",95,40,0,1,"2018-01-08 15:47:21","1219.83"
"ceph/ceph-csi","354f395aa13e10d9fe08101c6a181fa535856059","agarwal-mudit","2021-02-18 08:33:43","false","ci: use ceph v14.2.12 for ci

This ceph version is required to test snapshot retention feature.

Signed-off-by: Mudit Agarwal <muagarwa@redhat.com>",88,37,0,0,"2018-01-08 15:47:21","1135.45"
"ceph/ceph-csi","2c3961b96072a49014b8a6b79d4b09bdef3855c9","mcronce","2018-12-05 02:54:00","false","pkg/rbd/rbd.go:  Fix ""go vet"" errors",16,11,0,0,"2018-01-08 15:47:21","327.46"
"ceph/ceph-csi","0599089de094ed694757e474e346080344858676","irq0","2022-07-13 15:36:59","false","util: Add util to fetch encryption type from vol options

Fetch encryption type from vol options. Make fallback type
configurable to support RBD (default block) and Ceph FS (default file)

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",41,54,1,0,"2018-01-08 15:47:21","1645.99"
"ceph/ceph-csi","080f7538c0d5ec0e94306b4e4a80f7bd887aa506","Yuggupta27","2021-08-03 11:14:26","false","helm: update cephfs provisioner updateStrategy

Update ceph-csi-cephfs.provisioner updatestrategy
to allow maxUnavailable pods at a time to be 50%

Signed-off-by: Yug Gupta <yuggupta27@gmail.com>",120,43,0,0,"2018-01-08 15:47:21","1301.56"
"ceph/ceph-csi","2e14116ed78c74fdee629a48df50637af33f6d58","Yuggupta27","2020-08-04 12:48:55","false","deploy: add vault creation to rbd driver deployment

Currently, the script does not deploy the driver singlehandedly;
As the vault creation needs to be done prior to that.
The script now includes the vault creation so that
one script can be sufficient to deploy the rbd driver.

Signed-off-by: Yug <yuggupta27@gmail.com>",117,31,0,0,"2018-01-08 15:47:21","937.38"
"ceph/ceph-csi","7d28896e36043ab4076b0cafa7ac2b920004aea2","Yuggupta27","2021-06-24 10:20:25","false","e2e: add rbd test for testing sc, secret via helm

add rbd test for validating storageclass and
secret deployment via helm.

Signed-off-by: Yug <yuggupta27@gmail.com>",117,41,0,0,"2018-01-08 15:47:21","1261.52"
"ceph/ceph-csi","2505c2ad1428b28e67e7960692f9dab16faad9f7","humblec","2022-08-18 09:48:20","false","rebase: use latest kubernetes version

This commit rebase the kubernetes version to 1.24.4 tree to make
sure we are using latest available bug fix release.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",41,55,1,1,"2018-01-08 15:47:21","1680.75"
"ceph/ceph-csi","a4548c39832950b4523b7f4c35cecc2cf720f188","Yuggupta27","2021-06-24 09:43:48","false","e2e: provide an option if tests run on helm deployment

add an e2eArg `helmTest` to specify if tests are running
on ceph-csi deployment via helm.
For testing in CI, Storageclass and secret deployment
is enabled on helm installation.

Signed-off-by: Yug <yuggupta27@gmail.com>",117,41,0,0,"2018-01-08 15:47:21","1261.5"
"ceph/ceph-csi","e013cfed15e571cff6ec4945965eac34ff161407","Madhu-1","2023-08-22 16:52:49","false","rbd: fix resync issue

During the Demote volume store
the image creation timestamp.

During Resync do below operation

* Check image creation timestamp
stored during Demote operation
and current creation timestamp during Resync
and check both are equal and its for
force resync then issue resync
* If the image on both sides is
not in unknown state, check
last_snapshot_timestamp on the
local mirror description, if its present
send volumeReady as false or else return
error message.

If both the images are in up+unknown the
send volumeReady as true.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",21,67,1,1,"2018-01-08 15:47:21","2050.3"
"ceph/ceph-csi","53dfdb63b5403068e4e8ad6080da7b7bd8109a5f","Madhu-1","2019-03-05 12:24:05","false","correct yaml examples template

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",30,14,0,1,"2018-01-08 15:47:21","423.11"
"ceph/ceph-csi","0311eb5f447762a581194d649ea4d703da104fb8","Madhu-1","2022-02-10 05:21:13","false","helm: remove namespace from storageclass yaml

removes namespace from non-namespaced storageclass
object.

fixes: #2714

Replacement for #2715 as we didnt receive any update
and PR is already closed.

Co-authored-by: jhrcz-ls
Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",41,49,1,1,"2018-01-08 15:47:21","1492.57"
"ceph/ceph-csi","1c469fa522eb7dab431b073b671139132d159d67","Madhu-1","2020-12-08 06:45:49","false","doc: update new release matrix

updating the readme with latest release
image and version.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",76,35,0,1,"2018-01-08 15:47:21","1061.12"
"ceph/ceph-csi","6814f598ce2dd6d8c1318178e241a52d517fe681","agarwal-mudit","2020-07-29 09:33:29","false","util: fix tracevol.py to manage config map created by Rook

If the config map is created by rook then there won't be any provision to
specify subvolumeGroup, tracevol.py should skip looking for subvolumeGroup
in such case.

Signed-off-by: Mudit Agarwal <muagarwa@redhat.com>",117,31,0,0,"2018-01-08 15:47:21","931.24"
"ceph/ceph-csi","fac20a9446082780fb4636a20061e89e5750af55","Yuggupta27","2021-06-23 09:22:15","false","deploy: update csi-attacher sidecar

update csi-attacher sidecar to
the latest available release version.

Signed-off-by: Yug <yuggupta27@gmail.com>",118,41,0,0,"2018-01-08 15:47:21","1260.48"
"ceph/ceph-csi","cbec296543a459f0d38d395319f7cb14b60525a1","nixpanic","2022-02-04 07:32:34","false","build: disable removed Apache Arrow repository

The CentOS 8 repository for Apache Arrow has been removed. This causes
container-image builds fail with the following error:

    Errors during downloading metadata for repository 'apache-arrow-centos':
      - Status code: 404 for https://apache.jfrog.io/artifactory/arrow/centos/8/x86_64/repodata/repomd.xml (IP: 54.190.66.70)
    Error: Failed to download metadata for repo 'apache-arrow-centos': Cannot download repomd.xml: Cannot download repodata/repomd.xml: All mirrors were tried

The Ceph base image has `arrow/centos/8` configured, maybe Apache Arrow
offers a CentOS Stream 8 repository now? Once the Ceph container-image
has been updated, the repository can be enabled again.

Ceph-CSI does not depend on Apache Arrow, so there is no functional
change by disabling the repository.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",45,49,1,1,"2018-01-08 15:47:21","1487.66"
"ceph/ceph-csi","e574c807f0d944061a9ef94959decd1d0125867d","nixpanic","2021-12-08 16:40:04","false","rbd: expose CSI-Addons ReclaimSpace operations

Signed-off-by: Niels de Vos <ndevos@redhat.com>",50,47,1,1,"2018-01-08 15:47:21","1425.79"
"ceph/ceph-csi","7db0c3bfbf349c258a478ee9fb3f51d70a9b4d81","irq0","2022-08-04 16:12:33","false","e2e: Add PVC validator to ByFileAndBlockEncryption

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",38,55,1,0,"2018-01-08 15:47:21","1668.02"
"ceph/ceph-csi","fcd0f4713a930d5bb1b6aa64578f91c7bf1fb175","humblec","2022-04-14 11:59:47","false","cleanup: correct typos in test description and source code

this commit correct typos in various places.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",44,51,1,1,"2018-01-08 15:47:21","1556.84"
"ceph/ceph-csi","9160a5309ec1cdecce932b5466716780f5cc7405","nixpanic","2020-12-08 14:26:42","false","cleanup: standardize error format in VaultKMS.GetPassphrase()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,35,0,1,"2018-01-08 15:47:21","1061.44"
"ceph/ceph-csi","d0fea3baed1394a5be1b93c6044e2c024298d3f5","Sea-you","2023-11-06 18:03:12","false","deploy: allow mkfsOptions

Signed-off-by: Domonkos Cinke <seayou@gmail.com>",4,70,1,0,"2018-01-08 15:47:21","2125.34"
"ceph/ceph-csi","4560ae83a99ed0ca4e7c4c0b5182aed9fdbbddcb","Madhu-1","2023-09-13 08:29:29","false","doc: remove unwanted PSP and clusterrole

There are few PSP and clusterrole which does
not exists anymore in cephcsi, removing it
from the upgrade doc for the same reason.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",19,68,1,1,"2018-01-08 15:47:21","2070.95"
"ceph/ceph-csi","4039bf50637a94c55cfe788d8d1086cc2b9c3c8d","Madhu-1","2022-10-27 06:25:55","false","ci: remove kubernetes 1.22 tests

As we need to test with last 3 Kubernetes
releases removing Kubernetes 1.22
as we have 1.23, 1.24 and 1.25

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,57,1,1,"2018-01-08 15:47:21","1749.61"
"ceph/ceph-csi","2b71aac752614182fb0ba5dd956307401d2920b1","nixpanic","2022-04-15 08:31:07","false","nfs: return gRPC status from CephFS CreateVolume failure

The NFS Controller returns a non-gRPC error in case the CreateVolume
call for the CephFS volume fails. It is better to return the gRPC-error
that the CephFS Controller passed along.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",43,51,1,1,"2018-01-08 15:47:21","1557.7"
"ceph/ceph-csi","671e2d814ab98e316514a922083808ff1eddab85","humblec","2019-11-26 08:29:28","false","Add volumesize roundoff for expandrequest

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",93,22,0,1,"2018-01-08 15:47:21","682.95"
"ceph/ceph-csi","e5569f0547a98762d58b21481e0cafe938702bd7","Madhu-1","2021-09-17 08:25:26","false","deploy: remove securityContext from rbd provisioner

we dont need securityContext for the rbd provisioner
pod as its not doing any special operations like map
,unmap selinux etc.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",62,44,0,1,"2018-01-08 15:47:21","1344.44"
"ceph/ceph-csi","32e2a713e64f3190dd5bcf5449e1cbe2de8012c9","Madhu-1","2020-04-21 06:39:03","false","Fix multi architecture dockerfile

Add support for multi architecture build
for cephcsi. with multistage docker build
we we build cephcsi binary for both arm64
and amd64 architecture.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",100,27,0,1,"2018-01-08 15:47:21","833.12"
"ceph/ceph-csi","025aec3dd38687c696eff14cd08036cfbbd2f06f","Madhu-1","2019-07-29 09:15:04","false","Trace backend volume from pvc

logs
```
+----------+------------------------------------------+----------------------------------------------+-----------------+------------------+------------------+
| PVC Name |                 PV Name                  |                  Image Name                  | PV name in omap | Image ID in omap | Image in cluster |
+----------+------------------------------------------+----------------------------------------------+-----------------+------------------+------------------+
| rbd-pvc  | pvc-f1a501dd-03f6-45c9-89f4-85eed7a13ef2 | csi-vol-1b00f5f8-b1c1-11e9-8421-9243c1f659f0 |       True      |       True       |      False       |
| rbd-pvcq | pvc-09a8bceb-0f60-4036-85b9-dc89912ae372 | csi-vol-b781b9b1-b1c5-11e9-8421-9243c1f659f0 |       True      |       True       |       True       |
+----------+------------------------------------------+----------------------------------------------+-----------------+------------------+------------------+
```

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",77,19,0,1,"2018-01-08 15:47:21","565.98"
"ceph/ceph-csi","8ebb9a1ba094d2c23c77ad04ff87097f82f886ab","Madhu-1","2020-11-30 03:36:22","false","cleanup: fix misspell words

fixed misspell words detected by  codespell

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",84,35,0,1,"2018-01-08 15:47:21","1051.99"
"ceph/ceph-csi","6f4f148d3bf8601223eee9d0cae72afa832baf8b","Madhu-1","2019-02-19 13:49:40","false","remove glog

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",28,13,0,1,"2018-01-08 15:47:21","406.17"
"ceph/ceph-csi","b7703faf37f5905f8e1c83f0c15a01df6cdbb181","nixpanic","2022-10-03 15:46:52","false","util: make inode metrics optional in FilesystemNodeGetVolumeStats()

CephFS does not have a concept of ""free inodes"", inodes get allocated
on-demand in the filesystem.

This confuses alerting managers that expect a (high) number of free
inodes, and warnings get produced if the number of free inodes is not
high enough. This causes alerts to always get reported for CephFS.

To prevent the false-positive alerts from happening, the
NodeGetVolumeStats procedure for CephFS (and CephNFS) will not contain
inodes in the reply anymore.

See-also: https://bugzilla.redhat.com/2128263
Signed-off-by: Niels de Vos <ndevos@redhat.com>",40,57,1,1,"2018-01-08 15:47:21","1727"
"ceph/ceph-csi","5baf9811f9ebb7d2d773b8fe0ec38fd24b612bfb","nixpanic","2021-12-09 08:04:48","false","rbd: export NodeServer.mounter outside of the rbd package

NodeServer.mounter is internal to the NodeServer type, but it needs to
be initialized by the rbd-driver. The rbd-driver is moved to its own
package, so .Mounter needs to be available from there in order to set
it.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",50,47,1,1,"2018-01-08 15:47:21","1426.43"
"ceph/ceph-csi","bb5d3b7257725695037f64b1f24e1d15a8ca3a80","nixpanic","2021-12-21 17:54:13","false","cleanup: refactor gRPC middleware into NewMiddlewareServerOption

Signed-off-by: Niels de Vos <ndevos@redhat.com>",53,47,1,1,"2018-01-08 15:47:21","1438.84"
"ceph/ceph-csi","596410ae60d0a26eaa88761148a3567af60e5042","nixpanic","2021-04-08 09:21:44","false","cleanup: address ""nolint"" comments for RBD CreateSnapshot

Introduce helper function cloneFromSnapshot() that takes care of the
procedures that are needed when an existing snapshot has been found.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",85,39,0,1,"2018-01-08 15:47:21","1186.48"
"ceph/ceph-csi","74dfb7b9138522d8418f62207c890b44b727125a","riya-singhal31","2023-09-29 06:02:01","false","cephfs: adds unit testing for unfencing procedure

Signed-off-by: Riya Singhal <rsinghal@redhat.com>",19,69,1,0,"2018-01-08 15:47:21","2086.84"
"ceph/ceph-csi","d925937d5308a7f10b66e378c51b3f80284fd17d","riya-singhal31","2023-09-25 20:48:21","false","cephfs: adding unit test for fetchID

Signed-off-by: Riya Singhal <rsinghal@redhat.com>",19,68,1,0,"2018-01-08 15:47:21","2083.46"
"ceph/ceph-csi","5d034b11242d5d3e7bd77976e450ef089af28a8e","Madhu-1","2023-08-30 07:46:01","false","cephfs: block creation of ROX clone from ROX volume

As there is no usecase currently, blocking the
creation of ROX clone from the ROX volume.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",20,68,1,1,"2018-01-08 15:47:21","2057.92"
"ceph/ceph-csi","1b2e20081f930acaead54e91cfa65177f6299481","subhamkrai","2023-07-24 08:37:10","false","doc: adding empty storageClassName in static pvc

we need to add `storageClassName: """"` in static pvc
yaml other we'll get error
```
Cannot bind to requested volume ""fs-static-pv"": storageClassName does not match
```

Signed-off-by: subhamkrai <srai@redhat.com>",27,66,1,0,"2018-01-08 15:47:21","2021.95"
"ceph/ceph-csi","40888f01b66245b3b15042b62903ae742cae494a","Rakshith-R","2023-06-14 09:54:45","false","ci: fix pr-commentor for merge queue draft pr

The mergify label copier used github-actions bot
to add labels. Actions performed by github-actions
bot do not trigger a workflow and hence
pull-request-commentor was not working as expected.
This commit modifies mergify label copier to use
Cephcsi-bot to copy labels which then will be
able to trigger action to add pr comments.

Signed-off-by: Rakshith R <rar@redhat.com>",31,65,1,1,"2018-01-08 15:47:21","1982.01"
"ceph/ceph-csi","38f5e860e2a0832bbe53597cc796800cfa24664e","riya-singhal31","2023-05-24 10:52:52","false","rbd: add check for EncryptionTypeNone

this commit adds the validation for encryption
value as false, and sets the type as none

Signed-off-by: riya-singhal31 <rsinghal@redhat.com>",30,64,1,0,"2018-01-08 15:47:21","1962.05"
"ceph/ceph-csi","8265abc2c92e6109c3159323dfdf850066582a0f","nixpanic","2022-10-13 14:05:08","false","nfs: add support for `secTypes` parameter in StorageClass

CephNFS can enable different security flavours for exported volumes.
This can be configured in the optional `secTypes` parameter in the
StorageClass.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",39,57,1,1,"2018-01-08 15:47:21","1735.93"
"ceph/ceph-csi","c3d5b78276fce45e1df86d572ff7cd480837f100","mohag","2023-02-01 06:37:07","false","build: Update packages in release image

This will get updates released after the base image was built. This adds a layer
and increase the image size, but significantly reduce the number of CVEs in the
resultant image.

Signed-off-by: Gert van den Berg <github@mohag.net>",31,61,1,0,"2018-01-08 15:47:21","1849.87"
"ceph/ceph-csi","e54a97ba852e68a3d9b1e80e4a47df00e79dd9bb","Madhu-1","2023-01-27 09:33:01","false","rbd: discover if StagingTargetPath in NodeExpandVolume

The StagingTargetPath is an optional entry in
NodeExpandVolumeRequest, We cannot expect it to be
set always and at the same time cephcsi depended
on the StaingTargetPath to retrieve some metadata
information.

This commit will check all the mount ref and identifies
the stagingTargetPath by checking the image-meta.json
file exists and this is a costly operation as we need to
loop through all the mounts and check image-meta.json
in each mount but this is happens only if the
StaingTargetPath is not set in the NodeExpandVolumeRequest

fixes #3623

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",32,61,1,1,"2018-01-08 15:47:21","1844.99"
"ceph/ceph-csi","448bacc4f40d2ae107646bd21b309367478debb6","humblec","2023-01-12 09:14:46","false","deploy: update rook installation to default latest version

this commit update the rook release to latest 1.10.9

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",30,60,1,1,"2018-01-08 15:47:21","1829.98"
"ceph/ceph-csi","0bf86463401aaface1bb8be33bc5e3a96259407d","irq0","2022-10-24 12:29:00","false","cephfs: nolint:gocyclo NewVolumeOptions, NewVolumeOptionsFromVolID

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",39,57,1,0,"2018-01-08 15:47:21","1746.86"
"ceph/ceph-csi","e5ebd23709eeb5fac0dcad2808e7b52efa27c30e","irq0","2022-09-07 16:30:55","false","e2e: add cephfs fscrypt snapshot volume test

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",38,56,1,0,"2018-01-08 15:47:21","1701.03"
"ceph/ceph-csi","55768007f45caeab0bb435d311528f0d5ecc0835","Madhu-1","2023-11-02 11:31:13","false","e2e: remove multiple labels to node

update the e2e code to remove multiple
labels to the node at a time.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",20,70,1,1,"2018-01-08 15:47:21","2121.07"
"ceph/ceph-csi","b8b30eb6686b7d7b0c4a7a02b84618abcb2b6980","Madhu-1","2021-12-10 05:06:19","false","rebase: update golang version to 1.17.5

This commit updates the golang to the
latest available release i.e 1.17.5

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",49,47,1,1,"2018-01-08 15:47:21","1427.3"
"ceph/ceph-csi","a81a3bf96bcfe3ce9b26adc8d376ff65bdbd071b","Madhu-1","2019-08-21 09:28:02","false","implement grpc metrics for ceph-csi

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",84,19,0,1,"2018-01-08 15:47:21","587.99"
"ceph/ceph-csi","fce5a181d05b4880db3ece754489403fc9b7c9e1","Madhu-1","2021-08-04 05:27:37","false","doc: change FsID to FscID for cephfs

updated the filesystem identifier from
FsId to FscID.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",121,43,0,1,"2018-01-08 15:47:21","1302.32"
"ceph/ceph-csi","ba5809e1911393959341946df50b4a6dc427a6e3","Madhu-1","2022-01-12 13:51:31","false","rbd: make rbdImage as received for internal methods

Currently most of the internal methods have the
rbdVolume as the received. As these methods
are completely internal and requires only
the fields of the rbdImage use rbdImage
as the receiver instead of rbdVolume.

updates #2742

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,48,1,1,"2018-01-08 15:47:21","1464.92"
"ceph/ceph-csi","979f2b36ed27a43dfebe614aa65df4ddcef2ff87","Madhu-1","2020-05-18 08:18:46","false","doc: update helm documentation

Updated Helm documentation on how
to install charts from release repo

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",114,28,0,1,"2018-01-08 15:47:21","860.19"
"ceph/ceph-csi","1ea4a1b790b3c1a57b8ff91c9588e39cdf77d4e7","Rakshith-R","2022-08-08 06:13:30","false","ci: fix invalid mergifyio configuration

Comment out `comment: ` settings, since it
does not have any options set, otherwise
throws the following error.
```
The current Mergify configuration is invalid
required key not provided @ defaults → actions → comment → message
```

Signed-off-by: Rakshith R <rar@redhat.com>",38,55,1,1,"2018-01-08 15:47:21","1671.6"
"ceph/ceph-csi","8d08e8b37e5d3b91ae880988958a48f50a878176","nixpanic","2020-11-04 10:28:06","false","cephfs: remove unused Credentials argument from getCloneState()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",80,34,0,1,"2018-01-08 15:47:21","1027.28"
"ceph/ceph-csi","8d7c66363daa007c9c28085629b123beb197ece4","nixpanic","2021-05-03 13:14:55","false","ci: apply standard Mergify rules for release branches too

It is not always possible to automatically backport PRs to release
branches. That also means that these backport PRs are not created by the
mergify[bot] account. Because of this, it is needed to manually merge
PRs, as Mergify refuses to do it.

By changing the `base=` option to match a regular expression that
includes both `devel` and `release-*` branches, Mergify should assist
with merging PRs to release branches too.

Note that the `ci/centos` branch is different, as runs other tests than
the normal branches.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",94,40,0,1,"2018-01-08 15:47:21","1211.64"
"ceph/ceph-csi","dc990037a5ae94bc66e8003389535f94ba63d0ba","nixpanic","2021-04-01 11:18:28","false","rbd: move setupEncryption() from buildCreateVolumeResponse to CreateVolume

Signed-off-by: Niels de Vos <ndevos@redhat.com>",90,39,0,1,"2018-01-08 15:47:21","1179.56"
"ceph/ceph-csi","c8fb63e77f5acf9aa503304e046b5b2156a36d32","rootfs","2018-04-24 12:30:38","true","Merge pull request #33 from gman0/cephfs-import-fix

cephfs/main: updated import path",4,3,0,0,"2018-01-08 15:47:21","105.86"
"ceph/ceph-csi","b132696e54b1eb2398b1b16815599644543f55e7","nixpanic","2021-10-25 13:05:33","false","rbd: note that thick-provisioning is deprecated

Thick-provisioning was introduced to make accounting of assigned space
for volumes easier. When thick-provisioned volumes are the only consumer
of the Ceph cluster, this works fine. However, it is unlikely that this
is the case. Instead, accounting of the requested (thin-provisioned)
size of volumes is much more practical as different types of volumes can
be tracked.

OpenShift already provides cluster-wide quotas, which can combine
accounting of requested volumes by grouping different StorageClasses.

In addition to the difficult practise of allowing only thick-provisioned
RBD backed volumes, the performance makes thick-provisioning
troublesome. As volumes need to be completely allocated, data needs to
be written to the volume. This can take a long time, depending on the
size of the volume. Provisioning, cloning and snapshotting becomes very
much noticeable, and because of the additional time consumption, more
prone to failures.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",53,45,0,1,"2018-01-08 15:47:21","1382.64"
"ceph/ceph-csi","2bfe7670d2da73a27885fc2e00a0a115e7824240","Yuggupta27","2020-07-12 13:26:35","false","cleanup: address govet warnings

We had ""ns"" as a parameter and then trying to
declare it also as a local variable, which is what
the complaint about ""shadowing"" refers to.

Issue reported:
shadow: declaration of ""ns"" shadows declaration at line 57 (govet)

Signed-off-by: Yug <yuggupta27@gmail.com>",114,30,0,0,"2018-01-08 15:47:21","914.4"
"ceph/ceph-csi","2c6c0decbeccec60274eb7dd142a669099403164","nixpanic","2020-04-20 15:30:11","false","containerized-build: set WORKDIR and use in make target

By setting the WORKDIR in the container image, there is no need to pass
it on the commandline in the Makefile. This makes the line for the make
target a little cleaner.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",100,27,0,1,"2018-01-08 15:47:21","832.49"
"ceph/ceph-csi","86cfc3dd0c587c85b1a012afc4ea637ee8638715","nixpanic","2021-05-06 06:52:38","false","ci: update mergify config for labelling PRs

When the configuration for Mergify itself gets updated, there is not
need to run the e2e tests.

It seems that the `(ci)` part of matching a title for ci/testing PRs
would match partial words like 'capacity'. This is not intended, so
rephrasing the regex and adding `e2e` as match too.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",95,40,0,1,"2018-01-08 15:47:21","1214.38"
"ceph/ceph-csi","9940ec38e385d857eefe61776c2a51f5672cfa00","nixpanic","2022-04-25 07:57:29","false","ci: show all logs from `kubectl`

Signed-off-by: Niels de Vos <ndevos@redhat.com>",38,52,1,1,"2018-01-08 15:47:21","1567.67"
"ceph/ceph-csi","f1da7d9bd1719ae70aad751f3650e54900a48a2b","nixpanic","2020-06-22 13:20:33","false","ci: move minikube variables to build.env

Signed-off-by: Niels de Vos <ndevos@redhat.com>",116,29,0,1,"2018-01-08 15:47:21","894.4"
"ceph/ceph-csi","0f9087d05e341fecdccff9319d0f4ee5f83f98a4","nixpanic","2020-10-19 07:08:57","false","cephfs: connect snapshot to Ceph cluster in newSnapshotOptionsFromID()

Without connection, follow-up oparations on the volumeOptions object
will cause a panic. This should fix a regression in CephFS testing.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",77,33,0,1,"2018-01-08 15:47:21","1011.14"
"ceph/ceph-csi","9bbabc2f5db40213ea59ffd614391cc3dfae5801","gman0","2018-04-13 13:25:13","false","cephfs/deploy: updates storage class, secrets",2,3,0,0,"2018-01-08 15:47:21","94.9"
"ceph/ceph-csi","f6ae6120036a9dbb8903f70f44f4194138abe906","gman0","2022-02-21 14:42:51","false","util: added reference tracker

RT, reference tracker, is key-based implementation of a reference counter.
Unlike an integer-based counter, RT counts references by tracking unique
keys. This allows accounting in situations where idempotency must be
preserved. It guarantees there will be no duplicit increments or decrements
of the counter.

Signed-off-by: Robert Vasek <robert.vasek@cern.ch>",41,49,1,0,"2018-01-08 15:47:21","1503.96"
"ceph/ceph-csi","4b540ffecc9010a7da65a8b16eb74ebce8435c69","Madhu-1","2020-04-21 13:31:25","false","Update makefile and deploy.sh to pass build arguments

updated makefile to pass the required build
arguments for multistage docker build

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",101,27,0,1,"2018-01-08 15:47:21","833.41"
"ceph/ceph-csi","b1a0bb471402e52e43164a9185fa561eb1fd86b0","Madhu-1","2021-12-20 14:06:24","false","rbd: move VolSize to rbdImage struct

move the Volsize to the rbdImage struct
as size is more applicable for rbdImage
as rbdImage is used for both rbdVolume
and rbdSnapshot.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",57,47,1,1,"2018-01-08 15:47:21","1437.68"
"ceph/ceph-csi","42403e2ba73debf28b4c504988f0739a11a37a1a","Madhu-1","2021-12-10 05:11:18","false","rebase: add protobuf to go.mod

adding protobuf to go.mod to fix
`from implicitly required module
to add missing requirement` error

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",49,47,1,1,"2018-01-08 15:47:21","1427.31"
"ceph/ceph-csi","f9d4972444f8be1ad5f180bf076077e8b46ac884","Rakshith-R","2021-08-26 12:20:35","false","e2e: fix log msg in retryKubectlInput()

e2elog.Logf(""waiting for kubectl (%s -f $q args %s) to finish"", action, args)
changed to
e2elog.Logf(""waiting for kubectl (%s -f args %s) to finish"", action, args)

Signed-off-by: Rakshith R <rar@redhat.com>",115,43,0,1,"2018-01-08 15:47:21","1323.61"
"ceph/ceph-csi","0c109c5dec8aceeff4eb8e13c2059e168a1ec85a","nixpanic","2022-01-11 08:17:46","false","ci: remove queue actions from non-merge rules in Mergify config

By the addition of the queue rules in the Mrgify configuration, all PRs
that require changes, or have been updated and review should be dropped,
are now added to the queue for merging. This is obviously not what we
want.

Fixes: 43fc945 (""ci: move from merge action to queue action"")
Signed-off-by: Niels de Vos <ndevos@redhat.com>",43,48,1,1,"2018-01-08 15:47:21","1463.69"
"ceph/ceph-csi","7caca1137feaad59bb7fcba2495a8ecca719f125","nixpanic","2020-11-04 14:45:06","false","e2e: do not use Failf() to abort tests in a go-routine (util)

There are several go-routines where Failf() is called, which will cause
a Golang panic inside the Ginko test framework. Instead of aborting the
go-routine, capture the error and check for failures once all
go-routines have finished.

The CephFS tests have been updated already, this changs only affects the
validatePVCClone() utility function.

Updates: #1359
Signed-off-by: Niels de Vos <ndevos@redhat.com>",80,34,0,1,"2018-01-08 15:47:21","1027.46"
"ceph/ceph-csi","43857a3b7532b1885aaecad5572fdadb71ecc8f1","nixpanic","2020-03-16 09:26:43","false","rbd: implement deleteImage() with go-ceph

Signed-off-by: Niels de Vos <ndevos@redhat.com>",113,26,0,1,"2018-01-08 15:47:21","798.24"
"ceph/ceph-csi","d1c21eece96461df93541b131b0d4f63956696c7","ShyamsundarR","2021-11-18 17:43:10","false","rbd: Update sequence of operations on dummy mirror image

The dummy mirror image needs to be disabled and then
reenabled for mirroring, to ensure a newly promoted
primary is now starting to schedule snapshots.

Signed-off-by: Shyamsundar Ranganathan <srangana@redhat.com>",55,46,0,0,"2018-01-08 15:47:21","1405.83"
"ceph/ceph-csi","53c94efc02b9467c4316c686bf4946ef19bd7a10","nixpanic","2023-06-02 09:29:35","false","build: address `gocritic` warnings

Signed-off-by: Niels de Vos <ndevos@ibm.com>",31,65,1,1,"2018-01-08 15:47:21","1970.99"
"ceph/ceph-csi","aaeb35ecebcef2a58d8bd2e55303b75ae13af805","nixpanic","2021-04-01 14:08:44","false","rbd: encrypted volumes can be of type ""crypto_LUKS"" too

It seems that newer versions of some tools/libraries identify encrypted
filesystems with `crypto_LUKS` instead of `crypt`.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",90,39,0,1,"2018-01-08 15:47:21","1179.68"
"ceph/ceph-csi","d534ee9ce8b81b731fab7d5e9c12816ad3b8e511","nixpanic","2021-02-11 07:52:16","false","rbd: include rados-namespace when calling addRbdManagerTask()

It seems that calls to addRbdManagerTask() do not include the
rados-namespace in the image location. Functions calling
addRbdManagerTask() construct the image location themselves, but should
use rbdVolume.String() to include all the attributes.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",83,37,0,1,"2018-01-08 15:47:21","1128.42"
"ceph/ceph-csi","6367d0f692d53718545812b981573064e297cd1d","humblec","2019-07-29 08:31:20","true","Merge pull request #501 from humblec/bug-triage

Add details about weekly bug triage call in the README",77,19,0,1,"2018-01-08 15:47:21","565.95"
"ceph/ceph-csi","c9773db3f3e3030d20daf97d8cad4c8498ed19f7","humblec","2022-08-01 16:11:15","false","ci: remove check for snapshot controller installation and cleanup

At present, the check is performed to validate the version of kube
is v1.17 and this commit remove the same.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",39,55,1,1,"2018-01-08 15:47:21","1665.02"
"ceph/ceph-csi","eda167ca0dba64cbfd5ab4e202851390fca093cb","rootfs","2018-10-15 15:06:21","false","fix golint

Signed-off-by: Huamin Chen <hchen@redhat.com>",10,9,0,0,"2018-01-08 15:47:21","276.97"
"ceph/ceph-csi","582d004ca5a66b03ed3bd5c92f42474b39ffdf6c","nixpanic","2021-02-02 09:49:30","false","util: store EnvVaultInsecure as string, not bool

The configuration option `EnvVaultInsecure` is expected to be a string,
not a boolean. By converting the bool back to a string (after
verification), it is now possible to skip the certificate validation
check by setting `vaultCAVerify: false` in the Vault configuration.

Fixes: #1852
Reported-by: Bryon Nevis <bryon.nevis@intel.com>
Signed-off-by: Niels de Vos <ndevos@redhat.com>",84,37,0,1,"2018-01-08 15:47:21","1120.5"
"ceph/ceph-csi","148210530962c11428806f28da7996c802e86f07","nixpanic","2021-04-08 11:24:38","false","cleanup: use buildCreateVolumeResponse() to simplify CreateVolume()

buildCreateVolumeResponse() exists exactly for the need to create a
csi.CreateVolumeResponse based on an rbdVolume. Calling this helper
reduces the code duplication in CreateVolume().

Signed-off-by: Niels de Vos <ndevos@redhat.com>",85,39,0,1,"2018-01-08 15:47:21","1186.57"
"ceph/ceph-csi","5883f244d204c08cd75d05eef9467bea33d28e08","nixpanic","2020-11-30 13:52:13","false","cleanup: standardize logging in createSnapshot

Signed-off-by: Niels de Vos <ndevos@redhat.com>",83,35,0,1,"2018-01-08 15:47:21","1052.42"
"ceph/ceph-csi","f08182e2fcf07cbc16dedbeaa2cb6d012f41c897","nixpanic","2020-12-02 14:44:16","false","rbd: pass Owner to GetKMS()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",80,35,0,1,"2018-01-08 15:47:21","1055.46"
"ceph/ceph-csi","fa68c35f3b5d9081d8aa3241baf71064af967aa9","ShyamsundarR","2019-05-31 18:09:24","false","Support mounting and deleting version 1.0.0 RBD volumes

This commit adds support to mount and delete volumes provisioned by older
plugin versions (1.0.0) in order to support backward compatibility to 1.0.0
created volumes.

It adds back the ability to specify where older meta data was specified, using
the metadatastorage option to the plugin. Further, using the provided meta data
to mount and delete the older volumes.

It also supports a variety of ways in which monitor information may have been
specified (in the storage class, or in the secret), to keep the monitor
information current.

Testing done:
- Mount/Delete 1.0.0 plugin created volume with monitors in the StorageClass
- Mount/Delete 1.0.0 plugin created volume with monitors in the secret with
  a key ""monitors""
- Mount/Delete 1.0.0 plugin created volume with monitors in the secret with
  a user specified key
- PVC creation and deletion with the current version (to ensure at the minimum
  no broken functionality)
- Tested some negative cases, where monitor information is missing in secrets
  or present with a different key name, to understand if failure scenarios work
  as expected

Updates #378

Follow-up work:
- Documentation on how to upgrade to 1.1 plugin and retain above functionality
  for older volumes

Signed-off-by: ShyamsundarR <srangana@redhat.com>",76,17,0,0,"2018-01-08 15:47:21","508.35"
"ceph/ceph-csi","f89076b1d734f6066194f3b39c7e756c923f2c15","irq0","2022-08-26 17:57:12","false","scripts: Add env to set minikube iso url

Make iso url configurable to use pre-release minikube images or
local-built (file://)

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",41,55,1,0,"2018-01-08 15:47:21","1689.09"
"ceph/ceph-csi","f5ba45b78f81f444a3057cf5c205e0bec7c2b666","irq0","2022-07-13 16:25:15","false","e2e: Run encryption related tests on file and block type

Replace `By` with `ByFileAndBlockEncryption` in all encryption related
tests to parameterize them to file and block encryption.

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",41,54,1,0,"2018-01-08 15:47:21","1646.03"
"ceph/ceph-csi","86500c06c335393aef29e6f41d18dbe7d44352e6","Madhu-1","2020-04-13 07:07:42","false","Helm3: update scripts to install helm3

Updated scripts to install helm3

fixes #920

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",104,27,0,1,"2018-01-08 15:47:21","825.14"
"ceph/ceph-csi","82a204bfd3a43fb90ca1dcab192f48836dd27509","Rakshith-R","2021-06-15 10:08:51","false","e2e: add e2e for static PVC without imageFeature parameter

This commit adds e2e to make sure static PVC without imageFeatures
parameter fail with proper error event.

Signed-off-by: Rakshith R <rar@redhat.com>",108,41,0,1,"2018-01-08 15:47:21","1252.51"
"ceph/ceph-csi","2ca575b99d56584bdc904d3671878b28837f3aa4","Madhu-1","2019-08-06 09:54:53","false","Wrap error if failed to fetch mon

This will help user to check whats
the actual error. if the config file
is having issue or the  clusterid is
not valid.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",84,19,0,1,"2018-01-08 15:47:21","574.01"
"ceph/ceph-csi","15578432a4adbded87e6660fde0ead162f1b04f4","Madhu-1","2020-04-01 09:09:28","false","Move cephfs support from alpha to beta

Moving cephfs support from Alpha
to Beta in cephcsi.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",115,27,0,1,"2018-01-08 15:47:21","814.22"
"ceph/ceph-csi","eea52847bc33e7adc1e58c837558ff6ddd117e11","Madhu-1","2021-04-15 06:58:58","false","rbd: check volumeID in PV if image not found

If the pool or few keys are missing in the omap.
GetImageAttributes function returns nil error message and few
empty items in imageAttributes struct. if the image is not
found and  the entiries are missing use
the volumeId present on the PV annotation for further operations.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",87,39,0,1,"2018-01-08 15:47:21","1192.38"
"ceph/ceph-csi","1d11d0acc393ba96f6d366ebc40bc061cf521bd6","Madhu-1","2019-01-17 07:34:59","false","Fix lint issues

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",16,12,0,1,"2018-01-08 15:47:21","373.91"
"ceph/ceph-csi","5983fedddb933586211431a8d7b3f74b8d74fd4e","Madhu-1","2019-02-04 05:14:37","false","Fix issues found in gometalinter static check

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",20,13,0,1,"2018-01-08 15:47:21","391.81"
"ceph/ceph-csi","2d94b4ccb20eee6d29e530bc0581903e48c0ce41","Madhu-1","2023-08-24 08:48:29","false","ci: enable debug logs in kubelet

enable debug logs in kubelet for
better debugging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",21,67,1,1,"2018-01-08 15:47:21","2051.96"
"ceph/ceph-csi","89732d923ffda1459f83d9f6ee65e6b5454ad230","Madhu-1","2019-08-14 05:57:45","false","move flag configuration variable to util

remove unwanted checks
remove getting drivertype from binary name

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",79,19,0,1,"2018-01-08 15:47:21","580.84"
"ceph/ceph-csi","8ebc0659ab706f1b033876327d2b5c96dc74d9c5","Madhu-1","2021-10-05 10:01:35","false","rbd: perform resize of file system for static volume

For static volume, the user will manually mounts
already existing image as a volume to the application
pods. As its a rbd Image, if the PVC is of type
fileSystem the image will be mapped, formatted
and mounted on the node,
If the user resizes the image on the ceph cluster.
User cannot not automatically resize the filesystem
created on the rbd image. Even if deletes and
recreates the kubernetes objects, the new size
will not be visible on the node.

With this changes During the NodeStageVolumeRequest
the nodeplugin will check the size of the mapped rbd
image on the node using the devicePath. and also
the rbd image size on the ceph cluster.

If the size is not matching it will do the file
system resize on the node as part of the
NodeStageVolumeRequest RPC call.

The user need to do below operation to see new size
* Resize the rbd image in ceph cluster
* Scale down all the application pods using the static
PVC.
* Make sure no application pods which are using the
static PVC is running on a node.
* Scale up all the application pods.

Validate the new size in application pod mounted
volume.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",55,45,0,1,"2018-01-08 15:47:21","1363.51"
"ceph/ceph-csi","d95b07e39bca3fa5eb016cd8a69cd6d16af7e379","Madhu-1","2020-06-24 07:17:21","false","rbd: implement rbd clone with go-ceph

moved the implementation of clone
from CLI to go-ceph

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",115,29,0,1,"2018-01-08 15:47:21","896.15"
"ceph/ceph-csi","b157b1a7c21ba964f2108781755c31a7dc474e58","Rakshith-R","2023-05-26 06:59:05","false","ci: trigger `Add comment` workflow for ""opened"" prs

The `Add comment` workflow was triggered only
when labels were added to the pr and failed
to be run on prs which were created with the
required label.
This commit makes sure the workflow is triggered
on pr creation too.

Signed-off-by: Rakshith R <rar@redhat.com>",30,65,1,1,"2018-01-08 15:47:21","1963.88"
"ceph/ceph-csi","3dc810a75be2b18c22ef20e48d29018159f7710f","gman0","2018-03-09 16:03:31","false","cephfs: lowered permissions in cephfsplugin.yaml",2,2,0,0,"2018-01-08 15:47:21","61.01"
"ceph/ceph-csi","347b4d288553a62fada4e69134c381ec3107e256","riya-singhal31","2023-05-24 13:43:15","false","rbd: remove context where its not being used

Signed-off-by: riya-singhal31 <rsinghal@redhat.com>",30,64,1,0,"2018-01-08 15:47:21","1962.16"
"ceph/ceph-csi","40eff59d4527dfce450267fc371da0c3958703bb","nixpanic","2023-05-15 06:57:56","false","ci: Mergify copy-labels requires empty `labels:` value

See-also: Mergifyio/mergify#5088
Signed-off-by: Niels de Vos <ndevos@ibm.com>",28,64,1,1,"2018-01-08 15:47:21","1952.88"
"ceph/ceph-csi","99d7debc8e621525f25d7b0a4f2e52a550c17ebb","nixpanic","2023-03-23 13:29:33","false","rebase: prevent using old openshift/api package

Signed-off-by: Niels de Vos <ndevos@ibm.com>",37,62,1,1,"2018-01-08 15:47:21","1901.15"
"ceph/ceph-csi","56c8f1ea0be4e22be68af9f066305c80a123e45b","nixpanic","2023-02-20 09:11:59","false","ci: do not let Mergify remove the `ok-to-test` label

Sometimes Mergify removed the `ok-to-test` label before the Pull Request
Commentor action have been run. With the updated commentor action, the
`ok-to-test` label is removed after leaving comments. There is no need
for Mergify to remove the label anymore.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",37,61,1,1,"2018-01-08 15:47:21","1867.98"
"ceph/ceph-csi","3f18d6e4b4b6ebb435eb07e4e9e489adffe262f8","humblec","2022-01-24 12:57:54","false","rbd: Unexport IntegratedDEK struct from kms

This commit unexport IntegratedDEK struct from KMS
implementation

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",36,49,1,1,"2018-01-08 15:47:21","1476.88"
"ceph/ceph-csi","f7e7172c7bb1f87c2b06abd7ee27f4dd03ef098b","Madhu-1","2021-11-15 06:47:08","false","doc: add documentation for retest job

added details about retest job and the
creteria to auto retest PR.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",56,46,0,1,"2018-01-08 15:47:21","1402.37"
"ceph/ceph-csi","c443320126c7118f49b9b5c1a8dacef0fb058da4","nixpanic","2021-10-06 15:12:03","false","deploy: move rbd/ceph-csi-config ConfigMap to API

Signed-off-by: Niels de Vos <ndevos@redhat.com>",55,45,0,1,"2018-01-08 15:47:21","1364.73"
"ceph/ceph-csi","b0b46680e3c61a94a491b8ca90203c113fe91726","Madhu-1","2021-08-25 10:26:27","false","doc: update development guide for new rules

updated development guide requirement to
have review from contributors and reviewers.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",115,43,0,1,"2018-01-08 15:47:21","1322.53"
"ceph/ceph-csi","9321b4bce40f8ef924f1ec307b487ff418187fc1","Rakshith-R","2021-07-15 06:13:00","false","e2e: add test cases for snapshot-restore chain with depth 2

Signed-off-by: Rakshith R <rar@redhat.com>",122,42,0,1,"2018-01-08 15:47:21","1282.35"
"ceph/ceph-csi","de16b0f5e9aa9e132609302fa72d0b9f9d5cac2d","sbezverk","2018-02-15 13:51:23","false","Refactor rbdplugin for CSI 0.2.0 spec",1,1,0,0,"2018-01-08 15:47:21","36.92"
"ceph/ceph-csi","66631cdbf739fe94d05e4ac6c1f7e727c0a4a232","humblec","2022-05-23 10:20:21","false","deploy: enable RecoverVolumeExpansionFailure featuregate

this commit enable RecoverVolumeExpansionFailure featuregate in
minikube deployment.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",35,52,1,1,"2018-01-08 15:47:21","1595.77"
"ceph/ceph-csi","8e437244dee36fec5ab972ce9ce5e57120e85fd8","humblec","2019-11-27 12:16:11","false","Enable RBD resizer in travis

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",94,22,0,1,"2018-01-08 15:47:21","684.1"
"ceph/ceph-csi","7bdb42c14a7e7429fa025b7933b21e9ba14fc247","nixpanic","2020-04-17 08:40:09","false","doc: update to current release tracking method

Signed-off-by: Niels de Vos <ndevos@redhat.com>",103,27,0,1,"2018-01-08 15:47:21","829.2"
"ceph/ceph-csi","61a16012b76b18e8d19a4936f6b619cd43bae157","nixpanic","2020-12-22 07:58:06","false","build: only use --cpuset options when the cgroup controller is available

Fixes: #1670
Signed-off-by: Niels de Vos <ndevos@redhat.com>",80,35,0,1,"2018-01-08 15:47:21","1074.17"
"ceph/ceph-csi","df81022349c558086ae4bd8e99235046ca090f5c","nixpanic","2021-01-29 08:30:04","false","rbd: add support for VAULT_SKIP_VERIFY in KMS ConfigMap

When the KMS VaultTokens is configured through a Kubernetens ConfigMap,
the `VAULT_SKIP_VERIFY` option was not taken into account. The option
maps to the `vaultCAVerify` value in the configuration file, but has the
reverse meaning.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",81,37,0,1,"2018-01-08 15:47:21","1116.45"
"ceph/ceph-csi","4fd973b9244f9447fe66f982ffa4a73e688222c2","nixpanic","2020-06-22 13:54:18","false","build: use BASE_IMAGE from build.env

Signed-off-by: Niels de Vos <ndevos@redhat.com>",116,29,0,1,"2018-01-08 15:47:21","894.42"
"ceph/ceph-csi","cf63be41c819349601ab25989ff5d29c5564a4e9","Yuggupta27","2021-06-23 09:16:19","false","deploy: update csi-provisioner sidecar

update csi-provisioner sidecar to
the latest available release version.

Signed-off-by: Yug <yuggupta27@gmail.com>",118,41,0,0,"2018-01-08 15:47:21","1260.48"
"ceph/ceph-csi","43a4c100ec73b588d47ba5902165bdaa6c314a8d","Yuggupta27","2020-09-15 14:33:16","false","cephfs: No-Op Protect call if ""snapshot-autoprotect"" feature present

The subvolume features consists the list of features, which if includes
""snapshot-autoprotect"", result in query based approach to
detecting the need for protect/unprotect.
If ""snapshot-autoprotect"" feature is present, The ProtectSnapshot
call should be treated as a no-op

Signed-off-by: Yug <yuggupta27@gmail.com>",127,32,0,0,"2018-01-08 15:47:21","977.45"
"ceph/ceph-csi","1e8fa38879bc4eb3b0c2f549b45043ac42b3e1c3","james58899","2019-06-29 06:01:41","false","Fix nil err cause nbd fail to mount",81,18,0,0,"2018-01-08 15:47:21","535.84"
"ceph/ceph-csi","209a5e5602d175d135c3f8413878bbca965273e6","nixpanic","2020-06-17 18:30:09","false","util: add function to get the kernel version

Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,29,0,1,"2018-01-08 15:47:21","889.61"
"ceph/ceph-csi","9d9b5b33038f7661b6f000a10e5730a1883a3f66","nixpanic","2020-11-04 13:19:36","false","cephfs: implement deleteSnapshot() with go-ceph

Signed-off-by: Niels de Vos <ndevos@redhat.com>",80,34,0,1,"2018-01-08 15:47:21","1027.4"
"ceph/ceph-csi","d6fb8f302d282115ed758555f2dbe04c89fcf02e","nixpanic","2020-12-08 14:03:54","false","cleanup: return error type in NodeServer.processEncryptedDevice()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,35,0,1,"2018-01-08 15:47:21","1061.43"
"ceph/ceph-csi","04889e66db524bd7e4b29d8b80c09e40e12b05fe","nixpanic","2022-07-26 08:45:06","false","ci: verify that Ceph Mgr is running

The Ceph v17.2.2 container-image fails to start Ceph Mgr. This causes
issues while the e2e test suite is running. It is better to check if
Ceph Mgr is available, before continuing with the rest of the CI job.

Updates: #3259
Signed-off-by: Niels de Vos <ndevos@redhat.com>",40,54,1,1,"2018-01-08 15:47:21","1658.71"
"ceph/ceph-csi","43f753760b0800beb023de066ff33e850fb4189e","Rakshith-R","2021-07-22 05:45:17","false","cleanup: resolve nlreturn linter issues

nlreturn linter requires a new line before return
and branch statements except when the return is alone
inside a statement group (such as an if statement) to
increase code clarity. This commit addresses such issues.

Updates: #1586

Signed-off-by: Rakshith R <rar@redhat.com>",119,42,0,1,"2018-01-08 15:47:21","1289.33"
"ceph/ceph-csi","f63ed2ca5a646362925e0b2ff29214b5f0bfdff3","Rakshith-R","2021-09-29 06:46:55","false","e2e: modify validatePVCSnapshot() to use restoreSCName & restoreKMS

Signed-off-by: Rakshith R <rar@redhat.com>",59,45,0,1,"2018-01-08 15:47:21","1356.37"
"ceph/ceph-csi","9294d6f259ee0fc3b7950454abc96f49b92db9d3","rootfs","2018-07-19 17:50:19","false","CSI is alpha in k8s 1.9

Signed-off-by: Huamin Chen <hchen@redhat.com>",6,6,0,0,"2018-01-08 15:47:21","191.09"
"ceph/ceph-csi","366c2ace31188172327c4eaa914842f2da4f8325","Madhu-1","2022-03-16 13:49:06","false","util: add helper to get pvcnamespace from input

added helper function to return the pvc namespace
name from the input parameters.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",45,50,1,1,"2018-01-08 15:47:21","1528.92"
"ceph/ceph-csi","35324b2e1710fc6215ba7e39076b5d4372d1cb4a","Madhu-1","2021-08-12 05:17:25","false","rbd: add helper function to get local state

added helper function to check the local image
state is up+replaying.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",115,43,0,1,"2018-01-08 15:47:21","1309.31"
"ceph/ceph-csi","c9b7b6561ac64042f9afeab6c9057f251c1c8ce5","humblec","2020-10-13 06:37:50","false","rbd: remove false error condition check in genVolFromVolID

The error check condition in genVolFromID() is always false as far as
code reading/workflow goes. Removing it for the same reason.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",76,33,0,1,"2018-01-08 15:47:21","1005.12"
"ceph/ceph-csi","8dcca3ebc568f2b8b09214a45728d22f5ddd67f5","MiaoZhou","2019-01-04 03:43:28","false","bump image version

csi-attacher and csi-provisioner change from v1.0.0 to v1.0.1, as i
the v1.0.0 is a Pre-release

driver-registrar:v1.0.0 change to csi-node-driver-registrar:v1.0.2, as
in CSI Spec v1.0.0, image name has changed, see
[https://github.com/kubernetes-csi/node-driver-registrar#compatibility](https://github.com/kubernetes-csi/node-driver-registrar#compatibility)",17,12,0,0,"2018-01-08 15:47:21","356.5"
"ceph/ceph-csi","13f291dfc67eb2c31d18b4775aca19725d24ae33","ansiwen","2020-07-06 17:51:04","false","cleanup: use errors.As() for error type checks

Replaces some remaining old-style error type checks with errors.As()

Signed-off-by: Sven Anderson <sven@redhat.com>",110,30,0,0,"2018-01-08 15:47:21","909.59"
"ceph/ceph-csi","58eafcb00f946dbdd4c6dd915c4bdbf56e17d76c","rootfs","2019-02-06 19:59:33","false","helm init before package

Signed-off-by: Huamin Chen <hchen@redhat.com>",26,13,0,0,"2018-01-08 15:47:21","394.43"
"ceph/ceph-csi","2f491b2bc33556508e18ee294f6ea30ac5c7df2e","Madhu-1","2019-07-30 14:20:22","false","Fix kube version in readme

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",76,19,0,1,"2018-01-08 15:47:21","567.19"
"ceph/ceph-csi","ad06507acaa884759649b243bcfb2e8332ab731d","Madhu-1","2019-02-04 10:04:12","false","update sidecar containers to v1.0.1 stable release

Fixes: #134

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",22,13,0,1,"2018-01-08 15:47:21","392.01"
"ceph/ceph-csi","eeec1213cb63971239b009327aeb4960d517cc26","Madhu-1","2020-12-09 05:46:45","false","rebase: update go-ceph to v0.7.0

updating go-ceph to latest 0.7.0
release.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",73,35,0,1,"2018-01-08 15:47:21","1061.08"
"ceph/ceph-csi","01c02b5c02aeec0299f7588402f0542a034a17ff","Madhu-1","2020-10-19 09:29:16","false","ci: update mergify rules for auto merge

currently, auto merge is not checking for the
centos CI status before merging the PR, this commit
adds the check for the same.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",76,33,0,1,"2018-01-08 15:47:21","1011.24"
"ceph/ceph-csi","0b99bdaa82509142b74b7d7224576e3c08b5b72c","phlogistonjohn","2020-05-21 19:58:08","false","journal: add omap.go with go-ceph based omap manipulation funcs

These new omap manipulation functions (get/set/remove) are roughly
equivalent to the previous command-line based approach but rely
on direct api calls to ceph.

Signed-off-by: John Mulligan <jmulligan@redhat.com>",111,28,0,0,"2018-01-08 15:47:21","863.67"
"ceph/ceph-csi","6f3625b11e030304959cd3144f761ecb45e011b7","rootfs","2018-09-18 13:10:28","false","review feedback

Signed-off-by: Huamin Chen <hchen@redhat.com>",8,8,0,0,"2018-01-08 15:47:21","249.89"
"ceph/ceph-csi","3fa512617b828935fd3d7f03fac7912172387dd8","Madhu-1","2020-08-11 11:47:49","false","cephfs: replace Errorf with util.ErrorLog in cleanupClone

replace Errorf with util.ErrorLog in cleanupCloneFromSubvolumeSnapshot
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.33"
"ceph/ceph-csi","5fc9c3a046d445480ee6f39c9bfb53e308158561","Madhu-1","2021-07-15 08:41:00","false","doc: add design doc for clusterid poolid mapping

added design doc to handle volumeID mapping in case
of the failover in the Disaster Recovery.

update #2118

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",123,42,0,1,"2018-01-08 15:47:21","1282.45"
"ceph/ceph-csi","abe6a6e5ac91dee4999257a9ac9ec1377a168df3","humblec","2021-07-22 07:13:29","false","util: remove deleteLock test as it is enforced by the controller

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",119,42,0,1,"2018-01-08 15:47:21","1289.39"
"ceph/ceph-csi","260f4b6567ad238adc03f59236f6e7134732f7cf","humblec","2022-05-31 07:30:50","false","deploy: update external-snapshotter to v6.0.1

The extenal snapshotter has a new version which address some of the
issues in v6.0.0.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",36,53,1,1,"2018-01-08 15:47:21","1603.66"
"ceph/ceph-csi","075861e214a0930208ac54530d86462c6c1bbf7b","humblec","2019-06-04 08:12:22","true","Merge pull request #402 from humblec/kube-update

Lift kube dependency to 1.14.2",78,17,0,1,"2018-01-08 15:47:21","511.93"
"ceph/ceph-csi","c339d43272be1bfdc046a1be6b0a6164a6ddb2f8","Yuggupta27","2021-11-15 06:41:50","false","deploy: deploy erasure coded pool

deploy erasure coded pool during rook
deployment to allow usage and testing
in erasure coded pools.

Signed-off-by: Yug Gupta <yuggupta27@gmail.com>",56,46,0,0,"2018-01-08 15:47:21","1402.37"
"ceph/ceph-csi","843ea1ce31036c7e36829cbe0428bbf1162dfd5f","Yuggupta27","2020-08-21 12:12:28","false","doc: Correct cli arguments matrix

Correct the matrix for deploy-rbd document.

Signed-off-by: Yug <yuggupta27@gmail.com>",119,31,0,0,"2018-01-08 15:47:21","953.35"
"ceph/ceph-csi","1a8f8e3c243967b0598ab1c864f4c605420cefa6","ShyamsundarR","2020-04-06 20:19:13","false","Add support for erasure coded pools

This commit adds support to mention dataPool parameter for the
topology constrained pools in the StorageClass, that can be
leveraged to mention erasure coded pool names to use for RBD
data instead of the replica pools.

Signed-off-by: ShyamsundarR <srangana@redhat.com>",102,27,0,0,"2018-01-08 15:47:21","819.69"
"ceph/ceph-csi","1420ad193ab3b3021b885fcd57a697feac67a758","riya-singhal31","2023-09-26 07:01:51","false","cephfs: adds unit testing for fencing procedure

Signed-off-by: Riya Singhal <rsinghal@redhat.com>",19,68,1,0,"2018-01-08 15:47:21","2083.89"
"ceph/ceph-csi","b7b491c0977336680a6ad6d7587881d7dc4ffccc","Sea-you","2023-01-05 10:59:43","false","deploy: add extraArgs for sidecars

Add the ability to control more arguments for CSI sidecar components.

Signed-off-by: Domonkos Cinke <seayou@gmail.com>",28,60,1,0,"2018-01-08 15:47:21","1818.8"
"ceph/ceph-csi","6881b3ad3d816c29f19acb4bbf604fd6e181e6e2","irq0","2022-12-09 16:55:09","false","doc: Add encryptionType to RBD parameters list

Add the new parameter encryptionType and a hint to the encrypted
parameter that RBD now supports fscrypt on ext4 as an alternative
encryption scheme.

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",32,59,1,0,"2018-01-08 15:47:21","1792.05"
"ceph/ceph-csi","e08005f40222b7602a5f79b73219c0db03187f0e","nixpanic","2022-10-17 06:49:59","false","rebase: ParseAcceptLanguage takes a long time to parse complex tags

A vulnerability was found in golang.org/x/text/language package which
could cause a denial of service. An attacker can craft an
Accept-Language header which ParseAcceptLanguage will take significant
time to parse.
Version v0.3.8 of golang.org/x/text fixes a vulnerability.

See-also: https://go.dev/issue/56152
See-also: https://bugzilla.redhat.com/CVE-2022-32149
Signed-off-by: Niels de Vos <ndevos@redhat.com>",40,57,1,1,"2018-01-08 15:47:21","1739.63"
"ceph/ceph-csi","483181aec284f2859dc7182dda89763cb9a36af5","humblec","2022-08-16 14:08:51","false","rebase: use v1.17.0 of go-ceph library

new version of go ceph is available and this commit make use
of the same.
Ref # https://github.com/ceph/go-ceph/releases/tag/v0.17.0

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",40,55,1,1,"2018-01-08 15:47:21","1678.93"
"ceph/ceph-csi","c852f487a5e37cc532a636b0187a4bff4e61b83c","nixpanic","2021-10-28 10:21:31","false","util: set defaults for Vault config before converting

When using UPPER_CASE formatting for the HashiCorp Vault KMS
configuration, a missing `VAULT_DESTROY_KEYS` will cause the option to
be set to ""false"". The default for the option is intended for be ""true"".

This is a difference in behaviour between the `vaultDestroyKeys` and
`VAULT_DESTROY_KEYS` options. Both should use a default of ""true"" when
the configuration does not set the option explicitly.

By setting the default options in the `standardVault` struct before
unmarshalling the configuration in it, the default values will be
retained for the missing configuration options.

Reported-by: Rachael George <rgeorge@redhat.com>
Signed-off-by: Niels de Vos <ndevos@redhat.com>",55,46,0,1,"2018-01-08 15:47:21","1385.52"
"ceph/ceph-csi","6d00b39886fd979f2a5814462bc367dfc8f77444","nixpanic","2021-08-24 15:03:25","false","cleanup: move log functions to new internal/util/log package

Moving the log functions into its own internal/util/log package makes it
possible to split out the humongous internal/util packages in further
smaller pieces. This reduces the inter-dependencies between utility
functions and components, preventing circular dependencies which are not
allowed in Go.

Updates: #852
Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,43,0,1,"2018-01-08 15:47:21","1321.72"
"ceph/ceph-csi","2192d40937bd86286e37829e66097c074042e55f","nixpanic","2019-09-02 11:45:21","false","mergify: Remove approved review when a PR changes

When people have reviewed a PR, and the contributor updates it, the
reviews are staying valid. This is unfortunate as the PR might need new
corrections.

Ideally a positive review (Approved) needs to be given again. And there
needs to be a confirmation that a negative review (Changes requested)
has been addressed.

Closes: #505
Signed-off-by: Niels de Vos <ndevos@redhat.com>",86,20,0,1,"2018-01-08 15:47:21","600.08"
"ceph/ceph-csi","e1c685ef3964895b34c6005b0b2e3eb7ff3030f2","ShyamsundarR","2019-03-11 12:36:33","false","Fixed scope of confStore

Signed-off-by: ShyamsundarR <srangana@redhat.com>",29,14,0,0,"2018-01-08 15:47:21","428.12"
"ceph/ceph-csi","b0d6737db81e2ba658514ea2ab19d043caa0b43f","ShyamsundarR","2019-03-13 13:58:34","false","Removed duplicate patch template

Signed-off-by: ShyamsundarR <srangana@redhat.com>",32,14,0,0,"2018-01-08 15:47:21","430.17"
"ceph/ceph-csi","13c60eae7cfdf853172f267c7b80a8816ac59577","phlogistonjohn","2019-03-20 19:16:15","false","Makefile: add initial build rules for combined binary and image

Add rules and variables to the Makefile so that the unified binary
and container image can be built.

Signed-off-by: John Mulligan <jmulligan@redhat.com>",38,14,0,0,"2018-01-08 15:47:21","437.4"
"ceph/ceph-csi","9c7176dbb4fb989853c7fef037bdd0ab2e82a29a","Madhu-1","2020-12-17 13:01:48","false","rbd: update mount packges in import path

mount packges is moved from
k8s.io/utils/mount to a new repository
k8s.io/mount-utils. updated code to use
the same.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",81,35,0,1,"2018-01-08 15:47:21","1069.39"
"ceph/ceph-csi","5af3fe5deb02280f3ea7686eee52efb7597a4d78","Madhu-1","2020-10-21 05:49:41","false","rebase: add controller runtime dependency

this commits add the controller runtime
and its dependency to the vendor.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",75,33,0,1,"2018-01-08 15:47:21","1013.08"
"ceph/ceph-csi","a5164cfa41435fc1bd28f6699cb840900241f9bc","Madhu-1","2019-07-23 04:36:58","false","Avoid keyring message while logging

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",74,18,0,1,"2018-01-08 15:47:21","559.78"
"ceph/ceph-csi","3203673d1748d1e4b6738a15b10ab5e81c33237c","Rakshith-R","2022-01-27 05:37:23","false","cleanup: remove ceph.conf WA options which are already fixed

This commit removes ceph.conf WA options:
```
     # Workaround for http://tracker.ceph.com/issues/23446
     fuse_set_user_groups = false

     # ceph-fuse which uses libfuse2 by default has write buffer size of 2KiB
     # adding 'fuse_big_writes = true' option by default to override this limit
     # see https://github.com/ceph/ceph-csi/issues/1928
     fuse_big_writes = true
```
Since they are already fixed.

Refer: https://tracker.ceph.com/issues/44885
Refer: https://tracker.ceph.com/issues/23446
Closes: #2825

Signed-off-by: Rakshith R <rar@redhat.com>",39,49,1,1,"2018-01-08 15:47:21","1479.58"
"ceph/ceph-csi","9f2cf498b62f3af75416c1c5955667568a61563e","Rakshith-R","2021-04-07 04:34:33","false","cephfs: enable ceph-fuse big_writes by default

By default, the write buffer size in libfuse2 is 2KiB
`fuse_big_writes = true` option is used to override this limit.
This commit makes `fuse_big_writes = true` option as default
in ceph.conf.

Closes: #1928

Signed-off-by: Rakshith R <rar@redhat.com>",88,39,0,1,"2018-01-08 15:47:21","1185.28"
"ceph/ceph-csi","40134772a7eb33825368e2c0e8d14d89795c4676","Rakshith-R","2022-08-29 06:59:22","false","rbd: modify stripSecret mechanism in logGRPC()

This commit updates csi-addons spec version
and modifies logging to strip replication
request secret using csi.StripSecret, then
with replication.protosanitizer if the former
fails. This is done in order to make sure
we strip csi and replication format of secrets.

Signed-off-by: Rakshith R <rar@redhat.com>",42,56,1,1,"2018-01-08 15:47:21","1691.63"
"ceph/ceph-csi","8c4379862a6ed417518e78ae98ca3b881fb6a04e","nixpanic","2020-06-25 11:34:38","false","rebase: remove ""github.com/pkg/errors"" from go.mod

There is no direct dependency on ""github.com/pkg/errors"" anymore, so it
can be removed from go.mod.

After running `go mod tidy`, the ""github.com/pkg/errors"" gets downgraded
to a version that is referenced in other depndencies. This was
unexpected, but seems needed.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,29,0,1,"2018-01-08 15:47:21","897.32"
"ceph/ceph-csi","8effa0cd3eafec0ba7bc4fa8dd7c2a610509b86e","nixpanic","2020-06-30 06:43:24","false","util: add Unwrap() to error types

See-also: https://github.com/golang/go/wiki/ErrorValueFAQ#i-have-a-type-that-implements-error-and-holds-a-nested-error-how-should-i-adapt-it-to-the-new-features
Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,30,0,1,"2018-01-08 15:47:21","902.12"
"ceph/ceph-csi","4a6c27274fd610a1448efaffa89d46544002bd84","nixpanic","2023-06-02 09:54:25","false","build: address `ginkgolinter` warnings

Signed-off-by: Niels de Vos <ndevos@ibm.com>",31,65,1,1,"2018-01-08 15:47:21","1971"
"ceph/ceph-csi","66b73e36827cf21ed1472a803876b65d2dab48c2","nixpanic","2019-12-18 10:29:08","false","travis: install Ceph development packages for go-ceph

The Ceph community does not guarantee that arm64 packages get build and
published with each release. In order to prevent falling back to ancient
Ceph versions from ubuntu-ports, add an unsigned repository with Ceph
Nautilus 14.2.5.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",102,23,0,1,"2018-01-08 15:47:21","705.03"
"ceph/ceph-csi","8fd5478aa11655c4f3ad5a652d1f8fd38be6a117","gman0","2018-04-13 12:31:03","false","added cephfs/credentials",2,3,0,0,"2018-01-08 15:47:21","94.86"
"ceph/ceph-csi","c09700b5688847cfa2efad0ae1dab5cc14e521ed","iPraveenParihar","2023-10-30 08:45:18","false","cleanup: removed unused SnapshotInfo from CheckSnapExists()

Signed-off-by: Praveen M <m.praveen@ibm.com>",19,70,1,0,"2018-01-08 15:47:21","2117.96"
"ceph/ceph-csi","b54d7cb1eabdd383be8aa46adb2f6003abd5cafb","nixpanic","2023-10-17 19:56:24","false","ci: skip `./api/vendor` in codespell runs

The `./api/vendor` directory seems to have spellcheck problems while
running locally. For some reason the CI jobs running in GitHub do not
seem to be affected.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",21,69,1,1,"2018-01-08 15:47:21","2105.42"
"ceph/ceph-csi","2d120f2e1051aed98bd93844b0011cb6c9b7c5c6","nixpanic","2023-08-22 08:42:50","false","ci: exclude branches from the testing matrix for `ok-to-test` comments

It seems that `matrix.*` parameters can not be used in the if-statement
for a job. Now using the `exclude:` parameter with a more dynamically
constructed value for the branch. If the value for the branch is not
part of the initial branch list, the value will not be excluded, so the
jobs are expected to run.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",21,67,1,1,"2018-01-08 15:47:21","2049.96"
"ceph/ceph-csi","63871d86bfa16beb6a00ababb3ad912a2ddd86e5","Madhu-1","2023-07-19 09:01:54","false","rebase: update minikube to v1.31.0

update minikube version to the latest
release.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",28,66,1,1,"2018-01-08 15:47:21","2016.97"
"ceph/ceph-csi","c4d372e2078a55a2617c28961e3563ded35cc1bb","nixpanic","2023-05-04 15:40:13","false","ci: automatically add `ok-to-test` to PRs created by Mergify

Mergify does not automatically rebase PRs that are queued for merging
(anymore?). Instead, it creates a new draft PR that is expected to get
tested by the CI. At the moment someone needs to add the `ok-to-test`
label to the PR. This is cumbersome and can cause delays in the merge
process.

The configuration for Mergify now includes a rule that any PR created by
Mergify, will automatically get the `ok-to-test` label. This should make
it easier to get PR merged.

See-also: #3796
Signed-off-by: Niels de Vos <ndevos@ibm.com>",29,64,1,1,"2018-01-08 15:47:21","1943.25"
"ceph/ceph-csi","659567cfdc207a04b416a1055824e0223360a089","Madhu-1","2022-10-25 10:24:08","false","ci: add github action to trigger E2E

based on the discussion on the slack
channel. we are adding a github action
to trigger the CI jobs when a ok-to-test
label is added on the PR.

This action is based on below github action
https://github.com/peter-evans/create-or-update-comment

Sample Demo avaiable at
https://github.com/Madhu-1/
\label-commentor-action-testing/pull/4

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,57,1,1,"2018-01-08 15:47:21","1747.78"
"ceph/ceph-csi","7a00736b4ff2ed069eda9cee2abfadd29fa4ead8","Rakshith-R","2022-06-09 09:27:16","false","rebase: update minikube to v1.26.0-beta.1

This version is required to support k8s 1.24,
which is inturn required to test new sa token
behavior.

Signed-off-by: Rakshith R <rar@redhat.com>",39,53,1,1,"2018-01-08 15:47:21","1611.74"
"ceph/ceph-csi","ea8e360888f3d91cf0bbd73cb2c1636c84b1a23f","humblec","2022-01-13 11:50:08","false","deploy: update sidecars to latest versions.

This commit updates sidecars to the latest available version
which is compatible with kubernetes 1.23 and csi spec 1.5

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",39,48,1,1,"2018-01-08 15:47:21","1465.84"
"ceph/ceph-csi","df8f9d0848e1beae8f93b4d4730d623588f1d50d","rootfs","2018-01-19 13:42:50","true","Merge pull request #10 from sbezverk/supporting_files

Adding attacher and provisioner deployment files",0,0,0,0,"2018-01-08 15:47:21","10.91"
"ceph/ceph-csi","38aa57592500ec6f23b03b822938705c74a28374","sngchlko","2018-08-09 13:07:13","false","check snapshot feature",8,7,0,0,"2018-01-08 15:47:21","210.89"
"ceph/ceph-csi","ad6a3d7575fe3f3d8775f7a16d6a26838a8b557f","humblec","2022-02-08 10:10:49","false","rbd: remove kp-metadata register functions of HPCS/Key Protect

This commit removes `kp-metadata` registration from existing HPCS
or Key Protect code as per the plan.

Fix #2816

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",44,49,1,1,"2018-01-08 15:47:21","1491.77"
"ceph/ceph-csi","9a3a04b1805acae4674862ef48e42639cd2b9c49","humblec","2019-08-14 05:00:15","false","Add container image compatibility matrix.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",79,19,0,1,"2018-01-08 15:47:21","580.8"
"ceph/ceph-csi","5475022bc3c82e299f3b03914511656fa3930814","chenxu1990","2020-04-03 07:10:29","false","Document about stale resource cleanup

1. when user delete pv manual, it will result in stale metadata and image in ceph",100,27,0,0,"2018-01-08 15:47:21","816.14"
"ceph/ceph-csi","93d32c49c8c5a676b2e9606c39c882f017a923a9","nixpanic","2022-11-15 17:31:30","false","build: fix ShellCheck issue in `scripts/test-go.sh`

With the updated Fedora 37 container-image, a new version of ShellCheck
gets installed. This version is a little more strict and complains about
the array expansion in `scripts/test-go.sh`.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",37,58,1,1,"2018-01-08 15:47:21","1768.07"
"ceph/ceph-csi","d721ed6c5ca7357cf51b6e64e7ba73956b9c9133","humblec","2022-11-12 05:55:33","false","build: fix CVEs in the image

This commit update dependencies which is required to fix below CVEs.

CVE-2022-27664
CVE-2022-27191

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",35,58,1,1,"2018-01-08 15:47:21","1764.59"
"ceph/ceph-csi","b839c3aa63905fdafe4a59e1b4cb50df10c7f93a","humblec","2022-11-16 05:19:40","false","deploy: remove snapshot v1beta1 references from manifests

This commit remove the v1beta1 snapshot references as its
no longer valid or to be concerned about.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",37,58,1,1,"2018-01-08 15:47:21","1768.56"
"ceph/ceph-csi","628263e9b14a29266e50d1ee55d000a71a0d6126","humblec","2022-11-09 05:02:09","false","e2e: use CurrentSpecReport for failed spec run

CurrentGinkgoTestDescription() has been deprecated in favor of
CurrentSpecReport and this commit address the same.

Ref#https://github.com/onsi/ginkgo/blob/master/deprecated_dsl.go#L53

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",35,58,1,1,"2018-01-08 15:47:21","1761.55"
"ceph/ceph-csi","1952a9b4b3ff4b00859d5b663d2f3d4a7d07542b","Madhu-1","2022-06-01 10:17:19","false","ci: fix all linter errors found in golangci-lint

Fixing all the linter errors found in golang-ci
lint v1.46.2

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",37,53,1,1,"2018-01-08 15:47:21","1604.77"
"ceph/ceph-csi","63913141a4be727266ac4ebf4132c5264df2648b","humblec","2022-01-13 04:59:41","false","ci: add mergify rules for release-3.5 backport

This add automatic backport rules for version 3.5

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",39,48,1,1,"2018-01-08 15:47:21","1465.55"
"ceph/ceph-csi","daad8070ac73d7bc7f8a98633fb94c1626dbe64e","humblec","2019-10-22 07:26:11","false","Add resize side car to helm charts

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",87,21,0,1,"2018-01-08 15:47:21","648.9"
"ceph/ceph-csi","fa5866deec5a48328f43f84f179c49f539f29d0c","Yuggupta27","2022-01-03 16:22:54","false","ci: add unit test for NetworkFence grpc calls

Signed-off-by: Yug Gupta <yuggupta27@gmail.com>",47,48,1,0,"2018-01-08 15:47:21","1451.77"
"ceph/ceph-csi","ed298341a65e01dbe2229e6b28dc2013f106aaea","nixpanic","2021-06-30 07:02:58","false","doc: proposal for KMS with ServiceAccount per Tenant

A new KMS that supports Hashicorp Vault with the Kubernetes Auth backend
and ServiceAccounts per Tenant (Kubernetes Namespace).

Updates: #2222
Signed-off-by: Niels de Vos <ndevos@redhat.com>",121,42,0,1,"2018-01-08 15:47:21","1267.39"
"ceph/ceph-csi","a0ef9da39016ecf9849da57ad162f95726fad3a1","nixpanic","2020-01-16 13:35:21","false","rbd: only load nbd module if not available yet

Signed-off-by: Niels de Vos <ndevos@redhat.com>",107,24,0,1,"2018-01-08 15:47:21","738.41"
"ceph/ceph-csi","b9b8392f710067e3384e6c3686f8d185f2b9fd99","nixpanic","2023-06-02 12:18:47","false","build: address `errorlint` warning

Signed-off-by: Niels de Vos <ndevos@ibm.com>",31,65,1,1,"2018-01-08 15:47:21","1971.11"
"ceph/ceph-csi","7f1bdb49d111c53bf3c9c7af7dc6d06d685ce571","nixpanic","2021-06-17 13:35:15","false","rbd: use DeepCopy() when restoring a thick-snapshot

Signed-off-by: Niels de Vos <ndevos@redhat.com>",114,41,0,1,"2018-01-08 15:47:21","1254.66"
"ceph/ceph-csi","752841d213c12c8a6cff3caef6be4f7e779c9f7a","nixpanic","2020-12-08 14:20:13","false","cleanup: standardize error format in util.readClusterInfo()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,35,0,1,"2018-01-08 15:47:21","1061.44"
"ceph/ceph-csi","7a12a20f1995f1c0a6a6251a988880ac97880cdb","Madhu-1","2022-05-24 03:59:06","false","helm: updating Readme for image tags

image tags are not updated on the Readme, updating
the image tags in Readme to match the tags in
values.yaml

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",35,52,1,1,"2018-01-08 15:47:21","1596.51"
"ceph/ceph-csi","54d52bb411129339f8d9e67a6e6ddebb3d1d693d","Madhu-1","2019-03-28 09:45:02","false","update attacher endpoint

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",47,15,0,1,"2018-01-08 15:47:21","445"
"ceph/ceph-csi","1b23d781131725e64847a7e201045d1d2468494b","Rakshith-R","2021-06-25 04:59:51","false","rebase: update kubernetes to v1.21.2

Updated kubernetes packages to latest release.
resizefs package has been included into k8s.io/mount-utils
package. updated code to use the same.

Updates: #1968

Signed-off-by: Rakshith R <rar@redhat.com>",119,41,0,1,"2018-01-08 15:47:21","1262.3"
"ceph/ceph-csi","0f7b653b4e34de5afde748e2c0058d424eaa02eb","Rakshith-R","2021-04-04 06:52:11","false","cleanup: refactor deeply nested if statements in persistentvolume.go

Refactored deeply nested if statement in persistentvolume.go to
reduce cognitive complexity.

Signed-off-by: Rakshith R <rar@redhat.com>",90,39,0,1,"2018-01-08 15:47:21","1182.38"
"ceph/ceph-csi","8f6a7da538f6c2b3a2d23fb7cf4ce13a5b450134","humblec","2022-02-08 04:06:24","false","cephfs: dont set explicit permissions on the volume

At present we are node staging with worldwide permissions which is
not correct. We should allow the CO to take care of it and make
the decision. This commit also remove `fuseMountOptions` and
`KernelMountOptions` as they are no longer needed

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",44,49,1,1,"2018-01-08 15:47:21","1491.51"
"ceph/ceph-csi","9bab088ddcc4a9588f016338b8497a617ded1a88","humblec","2021-11-22 06:54:05","false","e2e: reformat error message with consistent formatting

To make the error return consistent across e2e tests we have decided
to remove with error presence from the logs and this commit
does that for e2e/upgrade-rbd.go.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",55,46,0,1,"2018-01-08 15:47:21","1409.38"
"ceph/ceph-csi","43b9f9aeaabe3a375b131c04c9d14b38e7be7de5","rootfs","2018-08-09 13:31:31","true","Merge pull request #61 from sngchlko/support-snapshot-in-rbdplugin

Support snapshot in rbdplugin",8,7,0,0,"2018-01-08 15:47:21","210.91"
"ceph/ceph-csi","eb2584095bbf704223dd332efe4b040f010a3b19","nixpanic","2020-10-02 11:18:24","false","cephfs: implement getMetadataPool() with go-ceph

Fixes: #1554
Signed-off-by: Niels de Vos <ndevos@redhat.com>",121,33,0,1,"2018-01-08 15:47:21","995.31"
"ceph/ceph-csi","fc378ac74b2ac079a43c037db63e0a2e03aea72a","nixpanic","2020-07-29 08:44:25","false","ci: remove weird mkdir/ln command

The command fails when PWD=/. It is unclear what the command tries to
achieve. The next command does something more useful, although it can
maybe be removed as well.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","931.21"
"ceph/ceph-csi","90cc5a4fd0a0f077294135c86e71cae70128f119","Madhu-1","2020-08-19 10:48:56","false","rbd: replace klog with util logger in rbd_journal.go

replace klog with util logger in rbd_journal.go

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",122,31,0,1,"2018-01-08 15:47:21","951.29"
"ceph/ceph-csi","284c5801c328c0f7e5c90f47a809a2e626749562","Madhu-1","2019-01-17 07:51:06","false","Fix golint issue

pkg/rbd/rbd.go:67:65:warning: exported func NewNodeServer
returns unexported type *rbd.nodeServer, which can be
annoying to use (golint)

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",16,12,0,1,"2018-01-08 15:47:21","373.92"
"ceph/ceph-csi","dec74a534f69d9e54595961e08f4b5080286ee87","Rakshith-R","2022-03-07 10:31:49","false","doc: add step to create `ceph-conf` cm to deploy plugin

Ceph-csi requires `ceph-config` configmap when deploying.
Add this step to `examples/README.md`.

Fixes: #2918

Signed-off-by: Rakshith R <rar@redhat.com>",44,50,1,1,"2018-01-08 15:47:21","1520.78"
"ceph/ceph-csi","d09ce2d003da803e9d9b90bd079de1c953d0b2c5","rootfs","2018-08-14 14:59:14","true","Merge pull request #69 from gman0/cephfs-probe

cephfs: volumemounter probe",7,7,0,0,"2018-01-08 15:47:21","215.97"
"ceph/ceph-csi","9b8bcbd874cbb9da963a0eb164eadd8aad62b8ad","humblec","2022-04-11 08:20:27","false","e2e: correct the cephfs fuse verification podnames

The podnames were wrongly mention in the e2e tests and this correct
the same.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",45,51,1,1,"2018-01-08 15:47:21","1553.69"
"ceph/ceph-csi","732ab13096c0dd8d6cdab163a432cef412061204","yati1998","2022-03-16 10:24:21","false","cleanup: adds short description to disable goerr113 linter

This commit adds a short description with reason to
disable the goerr113 linter.

issue: #1227

Signed-off-by: Yati Padia <ypadia@redhat.com>",45,50,1,0,"2018-01-08 15:47:21","1528.78"
"ceph/ceph-csi","d432421a88238a878a470d54cbf2c50f2e61cdda","riya-singhal31","2023-07-11 15:18:51","false","cephfs: add CSI-Addons support to the cephfs

this commit adds CSI-Addons support to the
cephfs provisioner

Signed-off-by: riya-singhal31 <rsinghal@redhat.com>",31,66,1,0,"2018-01-08 15:47:21","2009.23"
"ceph/ceph-csi","32b11be88c62969644474e850f3a872fb7c7256b","Rakshith-R","2023-05-30 10:19:59","false","cephfs: add mountOptions during NodeStage call

Signed-off-by: Rakshith R <rar@redhat.com>",30,65,1,1,"2018-01-08 15:47:21","1968.02"
"ceph/ceph-csi","1856647506df4b1c3fd2aec706921c6cd71f1260","humblec","2022-03-10 12:43:05","false","cephfs: go with default permissions while creating subvolumes

While creating subvolumes, CephFS driver set the mode to `777`
and pass it along to go ceph apis which cause the subvolume
permission to be on 777, however if we create a subvolume
directly in the ceph cluster, the default permission bits are
set which is 755 for the subvolume. This commit try to stick
to the default behaviour even while creating the subvolume.

This also means that we can work with fsgrouppolicy set to
`File` in csiDriver object which is also addressed in this commit.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",44,50,1,1,"2018-01-08 15:47:21","1522.87"
"ceph/ceph-csi","ed6d28a1fcc230928056c299663e8d014451ab9f","Madhu-1","2021-11-12 10:28:13","false","ci: add action to retest failed approved PR's

Adding github action to retest the failed
approved PR's. sample output is available
at https://github.com/Madhu-1/retest-action/pull/3

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",56,46,0,1,"2018-01-08 15:47:21","1399.53"
"ceph/ceph-csi","2bd6b669fac484e66bc8f6ec94343d68357b12bd","Rakshith-R","2021-08-16 04:58:46","false","ci: add csi sidecar version info to build.env

Signed-off-by: Rakshith R <rar@redhat.com>",116,43,0,1,"2018-01-08 15:47:21","1313.3"
"ceph/ceph-csi","b86d329d1ef02cd26f9e5e98e7c9fcbd2bf74bec","Madhu-1","2020-08-07 08:04:00","false","rbd: add stagingpath to error message

if the stagingpath is not present inside
the container send the staging path in error
message.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",117,31,0,1,"2018-01-08 15:47:21","940.18"
"ceph/ceph-csi","36c51007ac478ba06902fa058cab74ce1c02d063","plnordquist","2019-01-07 16:25:40","false","Added docs for deploying rbd driver with Helm

Signed-off-by: Peter Nordquist <peter.nordquist@pnnl.gov>",16,12,0,0,"2018-01-08 15:47:21","360.03"
"ceph/ceph-csi","d4f18458de545c283731cf6ade9a54ffa3eb15e0","nixpanic","2020-08-05 06:18:08","false","ci: include build.env variables when installing Helm

By default the install-helm.sh script uses ""latest"" as version for Helm.
Unfortunately this version does not exist. The HELM_VERSION variable is
already set in build.env, so source the configuration file as one of the
first actions in install-helm.sh.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","938.1"
"ceph/ceph-csi","fe0f1698754d0a841461e18a9f5ba951153a6b3c","nixpanic","2021-03-09 13:06:43","false","rbd: write max 1gb per WriteSame() operation

It seems that writing more than 1 GiB per WriteSame() operation causes
an EINVAL (22) ""Invalid argument"" error. Splitting the writes in blocks
of maximum 1 GiB should prevent that from happening.

Not all volumes are of a size that is the multiple of the stripe-size.
WriteSame() needs to write full blocks of data, so in case there is a
small left-over, it will be filled with WriteAt().

Signed-off-by: Niels de Vos <ndevos@redhat.com>",94,38,0,1,"2018-01-08 15:47:21","1156.64"
"ceph/ceph-csi","4d60e76241a75b84361b88946587455c94306a45","nixpanic","2020-04-17 10:23:44","false","travis: split static checks and continue with tests in case one fails

Signed-off-by: Niels de Vos <ndevos@redhat.com>",103,27,0,1,"2018-01-08 15:47:21","829.28"
"ceph/ceph-csi","279197bc785f5ecf566d8fda995c5bc262426673","humblec","2019-09-25 08:36:13","true","Merge pull request #635 from humblec/ext4

Set default FS to ""ext4"" on RBD device",85,20,0,1,"2018-01-08 15:47:21","621.95"
"ceph/ceph-csi","dbbda5473b75b277246cd9e90d2abf9eea404d4c","nixpanic","2022-06-24 16:25:20","false","e2e: pass non-empty Namespace/Name in deletePVCAndPV()

When getting the PVC or PV failed, the returned object may contain empty
values. If that happens, a retry uses the empty values for Namespace and
Name, which will never be successful.

Instead, use the Namespace and Name attributes from the original object,
and not from the object returned by the Get() call.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",41,53,1,1,"2018-01-08 15:47:21","1627.03"
"ceph/ceph-csi","211ca9b5a74592550b1555edf7f517856c9c9c41","Madhu-1","2021-11-22 10:19:56","false","rbd: do deep copy for dummyVol struct

with shallow copy of rbdVol to dummyVol
the image name update of the dummyVol is getting
reflected on the rbdVol which we dont want.

do deep copy to avoid this problem.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",55,46,0,1,"2018-01-08 15:47:21","1409.52"
"ceph/ceph-csi","5e26043d61112eb8369c8e58a03b89c98821249a","humblec","2022-05-17 08:56:08","false","deploy: update node-driver-registrar sidecar to latest

updated deployment yamls for the latest version.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",37,52,1,1,"2018-01-08 15:47:21","1589.71"
"ceph/ceph-csi","967076e4ba6345f41ebdda4653fad7ee015ee046","humblec","2021-12-20 07:11:45","false","doc: IBM key protect/HPCS design doc

This commit add the design considerations of IBM Key protect KMS
service to the Ceph CSI integration.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",53,47,1,1,"2018-01-08 15:47:21","1437.39"
"ceph/ceph-csi","ca5fbc180c89b351c0442631bf27add9a0bb6856","wilmardo","2019-07-29 10:36:24","false","Rework of helm charts

Signed-off-by: wilmardo <info@wilmardenouden.nl>",76,19,0,0,"2018-01-08 15:47:21","566.03"
"ceph/ceph-csi","798437d0c4cc970187f65ec110684b597f98cf49","humblec","2021-04-21 12:31:17","false","rbd: return crypt error for the rpc return

At present we return the volume connect error if the clone
from snapshot fails when rbdvolume is encrypted, which is incorrect.
This patch correctly return the failed copy encryption error to the
caller

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",85,39,0,1,"2018-01-08 15:47:21","1198.61"
"ceph/ceph-csi","1746b4e6ee23056ca55462f46aceb99fd1bf9a9b","humblec","2020-08-03 18:43:31","false","cephfs: add various error strings for command validation

Compared to previous version of the error strings, this change
depend on error strings like ENOENT, EEXIST, EINVAL..etc
The format of the error strings change in different cluster versions
and the error code return should not change. This also add extra
error strings for snapshot and clone operation outputs

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","936.62"
"ceph/ceph-csi","4be53a27d343e6556d3843046c864bbcb4eacab5","humblec","2021-09-08 05:12:30","false","cleanup: replace parentName to snapParentName in checkReservation

at present, eventhough the checkReservation works for both volume
and snapshot, the arg parentName make sense only for snapshot cases
renaming that arg to more approprite

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",66,44,0,1,"2018-01-08 15:47:21","1336.31"
"ceph/ceph-csi","f9f9fba26c24b888cd094bc9c85342c3ddc52ba1","nixpanic","2020-07-02 12:05:42","false","ci: generate golangci.yml with correct CEPH_VERSION

When building against go-ceph, the most recent version of Ceph is
assumed to be available (currently Octopus). In case an older version of
the development packages is installed, building go-ceph will fail.

Golangci-lint does not accept the `-tags nautilus` parameter like other
Golang tools. Instead, the build-constraints need to be configured in a
confguration file.

This change takes care of the following:
- move the current scripts/golangci.yml to a template
- add the @@CEPH_VERSION@@ substitute
- generate the configuration file when needed

Signed-off-by: Niels de Vos <ndevos@redhat.com>",111,30,0,1,"2018-01-08 15:47:21","905.35"
"ceph/ceph-csi","d1f175d9f3ee774286b8abddc16f4e92c7a7f1e3","Madhu-1","2020-09-08 05:23:28","false","rbd: add support for rbd map and unmap options

added support for providing map and unmap
options to rbd CLI when mapping rbd image
on the node.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,32,0,1,"2018-01-08 15:47:21","971.07"
"ceph/ceph-csi","9ddc265c10780f42ea6adb14cf7a4111163c5130","Madhu-1","2019-01-16 12:47:14","false","reject block volume creation in cephfs

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",17,12,0,1,"2018-01-08 15:47:21","373.12"
"ceph/ceph-csi","707ad086b76cf51a05ec1c1743090209b02f05c8","Rakshith-R","2022-05-16 09:15:24","false","e2e: add pvc-pvc clone e2e test

Signed-off-by: Rakshith R <rar@redhat.com>",37,52,1,1,"2018-01-08 15:47:21","1588.73"
"ceph/ceph-csi","7caf03b556f71d1847a6a840a458dbdd101daffc","rootfs","2019-01-23 14:14:11","false","review feedback:  tune cephfs provisioner and driver rbac, de-escalate privilage

Signed-off-by: Huamin Chen <hchen@redhat.com>",21,12,0,0,"2018-01-08 15:47:21","380.19"
"ceph/ceph-csi","ae14956a4c731f458897796c8c0f97114bf3cc38","rootfs","2019-02-26 00:43:53","true","Merge pull request #226 from rollandf/csi-v1.0

Remove requirement for ceph config and keyring files",31,14,0,0,"2018-01-08 15:47:21","412.62"
"ceph/ceph-csi","b5d2321d577cba5dff61a39bd9d568d51866dbd6","nixpanic","2021-08-02 09:35:26","false","cleanup: use vaultDefaultCAVerify to set default value

Golang-ci complains about the following:

    internal/util/vault_tokens.go:99:20: string `true` has 4 occurrences, but such constant `vaultDefaultDestroyKeys` already exists (goconst)
    	v.VaultCAVerify = ""true""
    	                  ^

This occurence of ""true"" can be replaced by vaultDefaultCAVerify so
address the warning.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",119,43,0,1,"2018-01-08 15:47:21","1300.49"
"ceph/ceph-csi","a6a428249328d269591bcaaf7ddc15994915ce00","irq0","2022-07-19 14:31:35","false","fscrypt: Unlock: Fetch keys early

Fetch keys from KMS before doing anything else. This will catch KMS
errors before setting up any fscrypt metadata.

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",41,54,1,0,"2018-01-08 15:47:21","1651.95"
"ceph/ceph-csi","5a079122f47efe727746b6e947d2599a94a9364a","microyahoo","2023-04-28 09:20:33","false","rbd: can exit early if image-meta.json does not exist

Signed-off-by: Liang Zheng <zhengliang0901@gmail.com>",31,64,1,0,"2018-01-08 15:47:21","1935.98"
"ceph/ceph-csi","3c6149b86ec13b55f6d95386fb148b2c5b805161","humblec","2020-08-10 07:22:50","false","cephfs: Add documentation about snapshot create/restore and clone

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",120,31,0,1,"2018-01-08 15:47:21","942.15"
"ceph/ceph-csi","0ff7062c2bb64398903115857da829e62a033c5a","humblec","2021-11-23 12:54:21","false","doc: add helper function details to the migration design doc

This commit add some more details like helper or utility functions
which will be introduced as part of the effort and also add some more
details about the CSI operations a particular identified change touches.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",57,46,0,1,"2018-01-08 15:47:21","1410.63"
"ceph/ceph-csi","fd7559a9036f0e3fab578f631f8ef3800b18262a","gman0","2022-04-06 13:26:07","false","cephfs: added support for snapshot-backed volumes

This commit implements most of
docs/design/proposals/cephfs-snapshot-shallow-ro-vol.md design document;
specifically (de-)provisioning of snapshot-backed volumes, mounting such
volumes as well as mounting pre-provisioned snapshot-backed volumes.

Signed-off-by: Robert Vasek <robert.vasek@cern.ch>",44,51,1,0,"2018-01-08 15:47:21","1549.9"
"ceph/ceph-csi","6f2f972f5b097d6d87654a890819b4bcfb101dc1","nixpanic","2020-09-21 12:04:25","false","cephfs: trim spaces around fuseMountOptions

When passing

    fuseMountOptions: debug

in the StorageClass, the mount options passed on the ceph-fuse
commandline result in ""-o nonempty ,debug"". The additional space before
the "",debug"" causes the mount command to fail.

Fixes: 1485
Signed-off-by: Niels de Vos <ndevos@redhat.com>",133,32,0,1,"2018-01-08 15:47:21","983.35"
"ceph/ceph-csi","3433cefaa5452f0576be839101f0e0ce756a62a3","nixpanic","2020-11-30 13:52:13","false","cleanup: standardize logging in deleteSnapshot

Signed-off-by: Niels de Vos <ndevos@redhat.com>",83,35,0,1,"2018-01-08 15:47:21","1052.42"
"ceph/ceph-csi","0b7521162cb7ab08396b3861ba08ad138574cf54","nixpanic","2021-01-26 14:08:59","false","cleanup: rewrite ifElseChains to switch statements

Signed-off-by: Niels de Vos <ndevos@redhat.com>",81,37,0,1,"2018-01-08 15:47:21","1113.68"
"ceph/ceph-csi","d293d91c07b9d4489b99043351ee10bec8be5819","Madhu-1","2022-01-12 08:57:05","false","rbd: disallow creating small size volume from volume

as per the CSI standard the size is optional parameter,
as we are allowing the clone to a bigger size
today we need to block the clone to a smaller size
as its a have side effects like data corruption etc.

Note:- Even though this check is present in kubernetes
sidecar as CSI is CO independent adding the check
here.

updates: #2718

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",41,48,1,1,"2018-01-08 15:47:21","1464.72"
"ceph/ceph-csi","6bfdf2feb03af6b3ed9fbeaeee599f344592daee","yati1998","2021-05-10 10:53:23","false","cleanup: gocyclo being unused for linter

This commit addresses the following issue:
'nolint:gocyclo // complexity needs to be reduced.'
is unused for linter ""gocyclo"" (nolintlint)

Updates:#2025

Signed-off-by: Yati Padia <ypadia@redhat.com>",92,40,0,0,"2018-01-08 15:47:21","1217.55"
"ceph/ceph-csi","b657200cae48e8df7674d8d7ead8d3b6c0291787","rootfs","2019-02-04 14:02:38","true","Merge pull request #158 from Madhu-1/fix-157

update csi sidecar image to v1.0.1 in RBD",22,13,0,0,"2018-01-08 15:47:21","392.18"
"ceph/ceph-csi","a56eacd81e8e9fe0927dd9dbbf20596a12c37f73","rootfs","2019-02-06 14:47:04","true","Merge pull request #170 from rollandf/csi-v1.0

Add snapshot examples in CSI-v1.0",26,13,0,0,"2018-01-08 15:47:21","394.21"
"ceph/ceph-csi","f273874f266290a985def430abe056a8e9d3f70e","malc0lm","2018-06-13 07:14:15","false","rbd: advertises PluginCapability_Service_CONTROLLER_SERVICE",3,5,0,0,"2018-01-08 15:47:21","154.64"
"ceph/ceph-csi","97525f5e743f0e7fb1c90eddb02705b302046ab0","nixpanic","2021-10-04 13:58:13","false","ci: add `make go-test-api` to GitHub Action

Signed-off-by: Niels de Vos <ndevos@redhat.com>",56,45,0,1,"2018-01-08 15:47:21","1362.67"
"ceph/ceph-csi","dba2c27bcbc863c75fa6fa02d1c2e0a6c220fafc","ansiwen","2020-07-10 00:14:39","false","cephfs: simplify error handling

This change replaces the sentinel errors in cephfs module with
standard errors created with errors.New().

Related: #1203

Signed-off-by: Sven Anderson <sven@redhat.com>",112,30,0,0,"2018-01-08 15:47:21","911.85"
"ceph/ceph-csi","a8ba1a7df3bef4a1e79b9c7f26e141e13f1644bd","rootfs","2018-02-15 19:35:59","true","Merge pull request #19 from rootfs/travis-push

push image into quay.io",1,1,0,0,"2018-01-08 15:47:21","37.16"
"ceph/ceph-csi","33c33a8b49ea43a0eb6ca2c4becad37110bfa0b6","irq0","2022-08-09 20:57:21","false","fscrypt: Use constant protector name

Use constant protector name 'ceph-csi' instead of constant prefix
concatenated with the volume ID. When cloning volumes the ID changes
and fscrypt protected directories become inunlockable due to the
protector name change

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",39,55,1,0,"2018-01-08 15:47:21","1672.22"
"ceph/ceph-csi","3e3af4da18405208fd76a5a51de95ac1cd59073a","irq0","2022-08-04 15:52:36","false","rbd: support file encrypted snapshots

Support fscrypt on RBD snapshots

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",38,55,1,0,"2018-01-08 15:47:21","1668"
"ceph/ceph-csi","8f91c672d4c0a8138ae9dd1059166856b3e9b9d7","nixpanic","2020-12-03 08:25:52","false","util: add EncryptionKMS.Destroy()

Add a new method to the EncryptionKMS interface so that resources can be
freed when EncryptionKMS instances get freed.

With the move to using the libopenstorage API, a temporary file needs to
store the optional CA certificate. The Destroy() method of the
vaultConnection type now removes this file.

The rbdVolume uses the EncryptionKMS type now, so call the new Destroy()
method from withing rbdVolume.Destroy().

Signed-off-by: Niels de Vos <ndevos@redhat.com>",79,35,0,1,"2018-01-08 15:47:21","1056.19"
"ceph/ceph-csi","ea51b0401749affdc7cda84fd73f5562fe209816","nixpanic","2020-03-17 13:39:35","false","rbd: setup connection in genVolFromVolID()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",114,26,0,1,"2018-01-08 15:47:21","799.41"
"ceph/ceph-csi","969b032f1c45ebc55517aec2d251fd70fcec725a","nixpanic","2020-07-06 15:20:38","false","build: error out when Podman or Docker is not available

In case Podman or Docker is not installed, running containerized tests
or builds will fail with unclear errors.

Introduce a 'need-container-cmd' make target that checks if the
CONTAINER_CMD is available (and non-empty). When running without Podman
and Docker, the following error is displayed:

    $ make containerized-build
    cephcsi image settings: quay.io/cephcsi/cephcsi version canary
    Missing container support, install Podman or Docker
    make: *** [Makefile:135: need-container-cmd] Error 1

Signed-off-by: Niels de Vos <ndevos@redhat.com>",110,30,0,1,"2018-01-08 15:47:21","909.48"
"ceph/ceph-csi","65982a0489b7fe2104187cc60eda396ce1110a3f","humblec","2020-05-22 06:23:58","false","deploy: add `--retry-interval-start` arg for attacher & resizer

Considering this parameter is available for other sidecars we should
have a parity between the sidecars. Adding it for the same reason

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",107,28,0,1,"2018-01-08 15:47:21","864.11"
"ceph/ceph-csi","38b013f96af51d6573b6a252c071879abf6a1be8","humblec","2021-06-24 12:40:56","false","ci: configure `lll` linter to its default value ie 120 chars

`lll` linter configuration was made for 180 chars till now due to
long source code signatures/comments we had in the project. This
address it and enabling linter with 120 chars check.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",117,41,0,1,"2018-01-08 15:47:21","1261.62"
"ceph/ceph-csi","69ecce1e75f9d0fc1ed8e6d635810e2cbe8e2cde","gman0","2018-04-13 12:24:40","false","cephfs/volumeidentifier: changed volume ID scheme

volumes have ""csi-cephfs-dyn-"" prefix when they are provisioned dynamically (provisionVolume=true)
and have ""csi-cephfs-sta-"" prefix when they are provisioned statically by the user (provisionVolume=false)",2,3,0,0,"2018-01-08 15:47:21","94.86"
"ceph/ceph-csi","ad36f13e92409e7ccc14dd6fabedc367807e7f29","humblec","2022-11-11 13:59:35","false","build: the go setup has been configured to 1.18 for retest build

this commit make use of 1.18 version of go for building
actions/retest code.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",35,58,1,1,"2018-01-08 15:47:21","1763.93"
"ceph/ceph-csi","6bba64c872ae4ade5db7930038dd3f2d9c306afe","humblec","2022-11-02 09:09:08","false","rebase: update node driver registar to latest version

v2.6.0 is the latest version of the same and this commit
update it.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",38,58,1,1,"2018-01-08 15:47:21","1755.72"
"ceph/ceph-csi","d4ae041505c02f6e1b47d11275e8891a761ab22b","humblec","2019-06-02 10:04:37","false","Remove csi-v1.0 from branches in travis.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",76,17,0,1,"2018-01-08 15:47:21","510.01"
"ceph/ceph-csi","9d4020d255b36affeceadb56fcac83b06316a4b3","nixpanic","2020-08-07 08:17:39","false","util: use local ErrorLog() for CheckKernelSupport() instead of klog

Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","940.19"
"ceph/ceph-csi","267c70919457811c3e86684827a922b831300426","nixpanic","2020-06-25 08:35:19","false","cleanup: use errors.As() in rbd/controllerserver methods

See-also: https://github.com/golang/go/wiki/ErrorValueFAQ#how-should-i-change-my-error-handling-code-to-work-with-the-new-features
Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,29,0,1,"2018-01-08 15:47:21","897.2"
"ceph/ceph-csi","b5d0524c39826a72a99a434d73e19b3f4623e65b","nixpanic","2021-04-07 07:55:00","false","cleanup: release resources for rbdImages objects after use

Signed-off-by: Niels de Vos <ndevos@redhat.com>",88,39,0,1,"2018-01-08 15:47:21","1185.42"
"ceph/ceph-csi","9ed0811422d098b4cd8ae54647faf18e5e4c2d76","agarwal-mudit","2020-07-30 06:28:51","false","rbd: implement rbdVolume.resize() with go-ceph

Replaced command execution with go-ceph Resize() function.
Volsize is being updated before waiting for resize() to return,
fixed it to get updated only after resize() is successful.

Signed-off-by: Mudit Agarwal <muagarwa@redhat.com>",118,31,0,0,"2018-01-08 15:47:21","932.11"
"ceph/ceph-csi","52290333e61bf5e659ab8ff22c412366b42db126","Madhu-1","2021-04-19 11:12:46","false","rbd: modified logic to check image watchers

Before RBD map operation, we do check the
watchers on the RBD image. In the case of
RWO volume. cephcsi makes sure only one
client is using the RBD image. If the rbd
image is mirrored, by default mirroring
daemon will add a watcher on the image
and as we are using go-ceph a watcher will
be added as we have opened the image So
we will have two watchers on an image if
mirroring is enabled. This holds when the
rbd mirror daemon is running, In case if
the mirror daemon is not running there will
be only one watcher on the rbd image
(which is placed by go-ceph image open)
we should not block the map operation if
the mirroring daemon is not running as
its Async mirroring. This commit adds a
check to make sure no more than 2 watchers
if the image is mirrored or no more than 1
watcher if it is not mirrored image.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",88,39,0,1,"2018-01-08 15:47:21","1196.56"
"ceph/ceph-csi","1db3f0385606975d0aa645393d874aee4e5d4aaa","Madhu-1","2020-12-17 13:00:02","false","e2e: IsRetryableAPIError is not available in kubernetes 1.20.0

IsRetryableAPIError is not available in latest
kubernetes release ie 1.20.0 created a internal
function called isRetryableAPIError for the same.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",81,35,0,1,"2018-01-08 15:47:21","1069.38"
"ceph/ceph-csi","9bff7b0ac97992291641d54d39280896e395de82","Madhu-1","2021-09-17 08:32:48","false","deploy: remove extra volumes from cephfs plugin PSP

removed extra volume permissions from the cephfs
nodeplugin PSP.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",62,44,0,1,"2018-01-08 15:47:21","1344.45"
"ceph/ceph-csi","b4acbd08a5e5c6169dd52cc99be5ccfad06419d1","Madhu-1","2022-04-18 06:08:52","false","rbd: move radosNamespace to RBD section

As radosNamespace is more specific to
RBD not the general ceph configuration. Now
we introduced a new RBD section for RBD specific
options, Moving the radosNamespace to RBD section
and keeping the radosNamespace still under the
global ceph level configration for backward
compatibility.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",41,51,1,1,"2018-01-08 15:47:21","1560.6"
"ceph/ceph-csi","74796bd57bd9c511940a04e60b0e20d0a1734065","Madhu-1","2019-01-29 12:59:07","false","Fix review comment

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",20,13,0,1,"2018-01-08 15:47:21","386.13"
"ceph/ceph-csi","ebb413534f4b0cc7451e6e9cbb3fb9745263cbbd","Madhu-1","2020-12-03 08:41:58","false","cephfs: remove unsed cr util.Credentials

remove unused cr util.Credentials variable.
Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",79,35,0,1,"2018-01-08 15:47:21","1056.2"
"ceph/ceph-csi","d61a87b42e453d901635df8b1f5f84fb02c2f5fe","Madhu-1","2019-03-13 05:09:58","false","Fix driver name as per CSI spec

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",33,14,0,1,"2018-01-08 15:47:21","429.81"
"ceph/ceph-csi","68350e88156ba943902a9ec9b0280f5778e3ac6e","humblec","2021-08-17 06:27:01","false","cephfs: add SINGLE_NODE_{SINGLE/MULTI}_WRITER capability

SINGLE_NODE_WRITER capability ambiguity has been fixed in csi spec v1.5
which allows the SP drivers to declare more granular WRITE capability.
These are not really new capabilities rather capabilities introduced to
get the desired functionality from CO side based on the capabilities SP
driver support for various CSI operations.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",116,43,0,1,"2018-01-08 15:47:21","1314.36"
"ceph/ceph-csi","2d1a572d11ccfb1d6695e88dae52920611bc5bd6","Rakshith-R","2021-04-04 07:14:33","false","cleanup: refactor deeply nested if statements in internal/cephfs

Refactored deeply nested if statement in internal/cephfs to
reduce cognitive complexity.

Signed-off-by: Rakshith R <rar@redhat.com>",90,39,0,1,"2018-01-08 15:47:21","1182.39"
"ceph/ceph-csi","ba99275f900adad61800af4f16258bedaf09c90e","nixpanic","2020-01-07 13:30:27","false","dep: add github.com/ceph/go-ceph for rbd API

Signed-off-by: Niels de Vos <ndevos@redhat.com>",104,24,0,1,"2018-01-08 15:47:21","725.15"
"ceph/ceph-csi","bccd5cef46044151443dab5d58bf0f7d04e334a0","nixpanic","2020-11-26 10:44:22","false","e2e: validate storing of csi.volume.owner attribute

The csi.volume.owner should get stored when the csi-provisioner sidecar
passes additional metadata. This option is now enabled by default, so
the owner (Kubernetes Namespace) of RBD images is expected to be
available.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",83,34,0,1,"2018-01-08 15:47:21","1048.29"
"ceph/ceph-csi","4c91f07c7875aab2e33f2a5e025e06342167215a","nixpanic","2020-10-26 13:18:48","false","cleanup: do not panic when validateMaxSnaphostFlag() detects an error

When the cephcsi executable detects an error when calling
validateMaxSnaphostFlag(), it panics due to klog.Fatalln(). The error
that validateMaxSnaphostFlag() logs should be understandable enough, so
that users know what to investigate. A Go panic on a user error is not
very userfriendly, and does not provide any additional usefil
information.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,33,0,1,"2018-01-08 15:47:21","1018.4"
"ceph/ceph-csi","8eaf1abbdce271bddaf6012cbeb90a36d3f739af","nixpanic","2021-12-21 17:55:13","false","util: add common logging to csi-addons gRPC

Signed-off-by: Niels de Vos <ndevos@redhat.com>",53,47,1,1,"2018-01-08 15:47:21","1438.84"
"ceph/ceph-csi","96fcc580955d12f594da6f7bc59d551de4b0785b","nixpanic","2021-03-29 12:19:19","false","util: use transformed Vault Tokens for initialization

After translating options from the ConfigMap into the common Vault
parameters, the generated configuration is not used. Instead, the
untranslated version of the configuration is passed on to the
vaultConnection initialization function, which then can detects missing
options.

By passing the right configuration to the initializatino function,
things work as intended.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",90,39,0,1,"2018-01-08 15:47:21","1176.61"
"ceph/ceph-csi","5411a69839ce23264c3410b321bfe1773d0bee1c","crazytaxii","2023-09-06 09:06:06","false","rbd: fixed all potential crashing when decoding volume ID failed

Signed-off-by: HF <crazytaxii666@gmail.com>",20,68,1,0,"2018-01-08 15:47:21","2064.97"
"ceph/ceph-csi","51a5bde97fb422cf98c38d322842664bb98fb939","Madhu-1","2021-12-09 05:26:33","false","ci: update golang dependencies to 1.17.5 release

updating the depencendices to golang 1.17.5
release

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",50,47,1,1,"2018-01-08 15:47:21","1426.32"
"ceph/ceph-csi","22ae4a0b16acaa16642dff09101f38d7cceb2a20","Madhu-1","2021-02-03 11:20:53","false","rbd: change key in secret for cert and tls

currently, the keys for kms certificates/keys in a
secret is ca.cert, tls.cert and
tls.key, this commit changes the key from ca.cert
and tls.cert to cert and tls.key to key.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",83,37,0,1,"2018-01-08 15:47:21","1121.56"
"ceph/ceph-csi","f3fca46ac8f18b2d7c7d4b05eee88195f5c33049","Madhu-1","2023-08-17 05:26:49","false","rebase: pin endpointslice to v0.28.0

pin endpointslice to specific version to
fix go mod verify problem
Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",25,67,1,1,"2018-01-08 15:47:21","2044.82"
"ceph/ceph-csi","09a858d51d62eb297c3466e657cd775798a39c11","Madhu-1","2023-04-04 08:06:55","false","ci: update minikube to 1.30.1

updating minikube to latest release
1.30.1

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",34,63,1,1,"2018-01-08 15:47:21","1912.93"
"ceph/ceph-csi","c3bc1f720b8fbef1036479f746ce18d11967d2ee","nixpanic","2023-01-30 14:52:35","false","ci: add Kubernetes 1.26 as default version to test

Kubernetes 1.26 has been released at the end of 2022 and should be
tested frequently.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",32,61,1,1,"2018-01-08 15:47:21","1848.21"
"ceph/ceph-csi","aa600754c1e52fe170bbc8d3314fec01054714ff","humblec","2021-11-02 08:39:00","false","deploy: remove expandCSIVolumes feature gate from deployment

The `expandCSIVolumes` feature gate is beta since kubernetes 1.16
version and we no longer wanted to explictly enable it in the
deployment.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",54,46,0,1,"2018-01-08 15:47:21","1390.45"
"ceph/ceph-csi","4b3bf68b374aeb49a7783e6cfa105f18401cd736","humblec","2019-07-12 07:54:16","true","Merge pull request #468 from humblec/readme

README update for v1.1.0 release",82,18,0,1,"2018-01-08 15:47:21","548.92"
"ceph/ceph-csi","c9c1c871fc54789e68de0933d088866eaf080994","ShyamsundarR","2019-03-08 01:14:39","false","Removed a couple of debug logs

Signed-off-by: ShyamsundarR <srangana@redhat.com>",29,14,0,0,"2018-01-08 15:47:21","425.64"
"ceph/ceph-csi","684f75358162b6119b34f5bfde3d2c3a47a5656b","rootfs","2019-01-15 17:25:05","false","upgrade go version

Signed-off-by: Huamin Chen <hchen@redhat.com>",17,12,0,0,"2018-01-08 15:47:21","372.32"
"ceph/ceph-csi","f6444a0b6ce07f597f5d6c47931f3032ddf43e98","rootfs","2018-01-17 16:02:31","true","Merge pull request #6 from sbezverk/volume_name_volume_id

Making VolumeID != volName as per CSI spec",0,0,0,0,"2018-01-08 15:47:21","9.01"
"ceph/ceph-csi","798f851bf3baf71d2d69dfa1bcf6fb956e998016","rootfs","2018-01-10 18:19:48","true","Merge pull request #4 from rootfs/travis

add travis",0,0,0,0,"2018-01-08 15:47:21","2.11"
"ceph/ceph-csi","e2dc8439e488cfe59e528f726010815c1407f325","Rakshith-R","2021-03-22 04:55:58","false","e2e: add execCommandInDaemonsetPod()

execCommandInDaemonsetPod() executes commands inside given
container of a daemonset pod on a particular node.

Signed-off-by: Rakshith R <rar@redhat.com>",87,38,0,1,"2018-01-08 15:47:21","1169.3"
"ceph/ceph-csi","b3120926b9dc951e49493bd3d6902a5b1168e4b3","Madhu-1","2020-10-29 09:48:31","false","rbd: remove extra Destory of parent volume

removed extra Destory of the parent volume.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",76,34,0,1,"2018-01-08 15:47:21","1021.25"
"ceph/ceph-csi","9bb23e4e32f3ebc0f83eba7b5d165c1a8aa4b27e","Madhu-1","2019-05-29 10:02:16","false","code changes for E2E

update travis and makefile for functional test

skip docker pull if image is already present
on local machine.

if the image is not present locally  pull the
image from repo.

export kubeconfig in travis

build cephcsi image in travis job for
functional testing

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",76,17,0,1,"2018-01-08 15:47:21","506.01"
"ceph/ceph-csi","f11486f4b6ebf3959ed4211fa67681b6c9612e57","Madhu-1","2020-08-13 10:42:29","false","doc: add note for cephfs snapshot limitation

added a note for cephfs snapshot limitations

closes #1242

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",120,31,0,1,"2018-01-08 15:47:21","945.29"
"ceph/ceph-csi","5ee723e634f74b6b0e985f0860910e12401a15b6","humblec","2021-11-22 06:51:04","false","e2e: reformat error message with consistent formatting

To make the error return consistent across e2e tests we have decided
to remove with error presence from the logs and this commit
does that for e2e/rbd_helper.go.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",55,46,0,1,"2018-01-08 15:47:21","1409.38"
"ceph/ceph-csi","0dfc15121c72ed48312254121c3b1e53eca91d73","humblec","2022-04-19 16:28:04","false","deploy: change the image registry for sidecars

This commit change the image registry URL for sidecars in the
deployment from `k8s.gcr.io` to `registry.k8s.io` as
the migration is happening from former to the latter. This commit
also correct the e2e readme for the change.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",41,51,1,1,"2018-01-08 15:47:21","1562.03"
"ceph/ceph-csi","b1dfcb4d7e87021b2818771624b9dec446998017","humblec","2020-03-26 12:45:45","false","Correct static errors and source code comments.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",114,27,0,1,"2018-01-08 15:47:21","808.37"
"ceph/ceph-csi","3e1f60244e47d8714e6a5b0c9ef8271dc2b3c20f","Madhu-1","2022-11-01 15:02:18","false","rbd: check for empty lastSyncTime

Sometime the json unmarshal might
get success and return empty time
stamp. add a check to make sure the
time is not zero always.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,58,1,1,"2018-01-08 15:47:21","1754.97"
"ceph/ceph-csi","6fc741199bc2a7f51cfa8be47d238ae19055cf8e","Madhu-1","2019-05-08 04:27:13","false","update doc for make command

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",68,16,0,1,"2018-01-08 15:47:21","485.78"
"ceph/ceph-csi","e3a63029a351f0d50b09433c2f90d9d72b12c1e0","Madhu-1","2020-06-24 07:43:24","false","rbd: Implement snapshot and clone from snapshot

This Adds a support for create,delete snapshot
and creating a new rbd image from the snapshot.

* Create a snapshot

* Create a temporary snapshot from the parent volume
* Clone a new image from a temporary snapshot with options
  --rbd-default-clone-format 2 --image-feature layering,deep-flatten
* Delete temporary snapshot created
* Create a new snapshot from cloned image
* Check the image chain depth, if the Softlimit is reached Add a
  task Flatten the cloned image and return success. if the depth
  is reached hard limit Add a task Flatten the cloned image and
  return snapshot status ready as false

```bash
1) rbd snap create <RBD image for src k8s volume>@<random snap name>
2) rbd clone --rbd-default-clone-format 2 --image-feature
   layering,deep-flatten <RBD image for src k8s volume>@<random snap>
   <RBD image for temporary snap image>
3) rbd snap rm <RBD image for src k8s volume>@<random snap name>
4) rbd snap rm <RBD image for temporary snap image>@<random snap name>
5) check the depth, if the depth is greater than configured hard
   limit add a task to flatten the cloned image return snapshot status
   ready as false if the depth is greater than soft limit add a task
   to flatten the image and return success
```

* Create a clone from snapshot

* Clone a new image from the snapshot with user-provided options
* Check the depth(n) of the cloned image if n>=(hard limit)
  Add task to flatten the image and return ABORT (to avoid image leak)

```bash
1) rbd clone --rbd-default-clone-format 2 --image-feature
   <k8s dst vol config> <RBD image for temporary snap image>@<random snap name>
    <RBD image for k8s dst vol>
2) check the depth, if the depth is greater than configured hard limit
    add a task to flatten the cloned image return ABORT error if the depth is
    greater than soft limit add a task to flatten the image and return success
```

* Delete snapshot or pvc

* Move the temporary cloned image to the trash
* Add task to remove the image from the trash

```bash
1) rbd trash mv <cloned image>
2) ceph rbd task trash remove <cloned image>
```

With earlier implementation to delete the image, we used to add
a task to remove the image with new changes this cannot be done
as the image may contain snapshots or linking.so we will be
doing below steps to delete an image(this will be
applicable for both normal image and cloned image)

* Move the rbd image to the trash
* Add task to remove the image from the trash

```bash
1) rbd trash mv <image>
2) ceph rbd task trash remove <image>
```

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",115,29,0,1,"2018-01-08 15:47:21","896.16"
"ceph/ceph-csi","cf98442ef64f52d717e7a508f67f0faf1d76f8e2","Madhu-1","2020-07-17 10:03:16","false","doc: add document for rbd snapshot and clone

Added a document which contains the steps
and RBD CLI commands we execute when we create
a kubernetes snapshot, delete kubernetes snapshot,
Restore a snapshot to a new PVC,Kubernetes volume
cloning and kubernetes PVC deletion.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",116,30,0,1,"2018-01-08 15:47:21","919.26"
"ceph/ceph-csi","8a41cd03a5813a9ffe046b86c660e4ea99377628","phlogistonjohn","2020-11-05 15:47:57","false","journal: fix reading omaps from objects with large key counts

The implementation of getOMapValues assumed that the number of key-value
pairs assigned to the object would be close to the number of keys
being requested. When the number of keys on the object exceeded the
""listExcess"" value the function would fail to read additional keys
even if they existed in the omap.
This change sets a large fixed ""chunk size"" value and keeps reading
key-value pairs as long as the callback gets called and increments
the numKeys counter.

Signed-off-by: John Mulligan <jmulligan@redhat.com>",80,34,0,0,"2018-01-08 15:47:21","1028.5"
"ceph/ceph-csi","cc0f0b8a6a113e9f5e40c68dbe8ff53cd9029ecb","Madhu-1","2020-08-12 15:25:36","false","deploy: remove unnecessary aggregate clusterroles

The aggregate clusterrole were designed for the scenario where
the rules are not completely owned by one component.
the aggregate rules can be removed and simplify
certain issues around upgrades.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",120,31,0,1,"2018-01-08 15:47:21","944.48"
"ceph/ceph-csi","55974973e66180412a94a612738b9a4ddfb799f6","Madhu-1","2020-12-01 14:17:24","false","ci: update mergify rule for multi arch build

updated mergify rules for multi-arch build

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",81,35,0,1,"2018-01-08 15:47:21","1054.44"
"ceph/ceph-csi","864e6baea9399886a1825c0d2c913f3a3dd3e52a","Madhu-1","2019-06-07 05:57:02","false","use filesystem-test.yaml in e2e

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",78,17,0,1,"2018-01-08 15:47:21","514.84"
"ceph/ceph-csi","8d3a44d0c45a0f675d92b065448430daf742cb6f","Madhu-1","2020-11-17 03:34:29","false","rbd: add minsnapshotsonimage flag

An rbd image can have a maximum number of
snapshots defined by maxsnapshotsonimage
On the limit is reached the cephcsi will
start flattening the older snapshots and
returns the ABORT error message, The Request
comes after this as to wait till all the
images are flattened (this will increase the
PVC creation time.  Instead of waiting till
the maximum snapshots on an RBD image, we can
have a soft limit, once the limit reached
cephcsi will start flattening the task to
break the chain. With this PVC  creation time
will only be affected when the hard limit
(minsnapshotsonimage) reached.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",77,34,0,1,"2018-01-08 15:47:21","1038.99"
"ceph/ceph-csi","c5bf95b6250d1d3fee2a939f519cc556f58a3c1a","Madhu-1","2020-04-16 07:09:59","false","e2e: Enable E2E for rbd snapshot

Updated E2E to use beta client and beta
Snapshot resources.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",102,27,0,1,"2018-01-08 15:47:21","828.14"
"ceph/ceph-csi","8c8f34cf7a98527ef6fb9324f1da7b0cf50a3445","Madhu-1","2021-09-08 07:58:30","false","rbd: set vaultAuthNamespace to vaultNamespace if empty

When we read the csi-kms-connection-details configmap
vaultAuthNamespace might not be set when we do the
conversion the vaultAuthNamespace might be set to empty
key and this commits check for the empty value of
vaultAuthNamespace and set the vaultAuthNamespace
to vaultNamespace.

setting empty value for vaultAuthNamespace happened due
to Marshalling at https://github.com/ceph/ceph-csi/blob/devel/
internal/kms/vault_tokens.go#L136-L139.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",66,44,0,1,"2018-01-08 15:47:21","1336.42"
"ceph/ceph-csi","5cf0599367f46c7b8b14fd84bdac5765664ae75c","Madhu-1","2019-07-01 07:31:33","false","Enable Travis to run E2E against kube 1.15.0
Remove Travis from skip doc check

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",80,18,0,1,"2018-01-08 15:47:21","538.91"
"ceph/ceph-csi","4473aaa7712a8e7cc572ccd621f420ff44aec264","Madhu-1","2023-11-07 07:03:28","false","doc: update release notes for grpc metrics

updating the PendingReleaseNotes.md to
mark the grpc flag's removal.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",4,70,1,1,"2018-01-08 15:47:21","2125.89"
"ceph/ceph-csi","a9174dd9531f2faf8265d86fb1679db7fccff365","Madhu-1","2020-03-16 04:59:16","false","Fix logging if the rbd manager command is supported

if there is an error when adding the rbd task
we are logging the output which is empty. This
PR logs the error if the rbd task is supported
and there is an error.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",113,26,0,1,"2018-01-08 15:47:21","798.05"
"ceph/ceph-csi","8096dd47e445bb7b8fcf68bdddfd81d8ec304d1d","Madhu-1","2022-01-21 09:43:44","false","cleanup: remove unwanted type declaration

removed unwanted int64 type declaration to
fix style check.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,48,1,1,"2018-01-08 15:47:21","1473.75"
"ceph/ceph-csi","9adb25691cec9beb7967b4fde7e7ddcd3492e8e8","Rakshith-R","2021-11-10 09:38:32","false","rbd: remove redundant util.Credentials arg from flattenRbdImage()

With introduction of go-ceph rbd admin task api, credentials are
no longer required to be passed as cli cmd is not invoked.

Signed-off-by: Rakshith R <rar@redhat.com>",56,46,0,1,"2018-01-08 15:47:21","1397.49"
"ceph/ceph-csi","e3a064827b56692ec8998ca8956f22f45d342e67","robinbraemer","2019-07-24 13:05:03","false","Update README.md",76,18,0,0,"2018-01-08 15:47:21","561.14"
"ceph/ceph-csi","6a64394139d52a56886a1f7f5af481c3cf424091","riya-singhal31","2023-08-25 12:14:49","false","ci: skip kube 1.25 check for devel branch

Signed-off-by: Riya Singhal <rsinghal@redhat.com>",21,67,1,0,"2018-01-08 15:47:21","2053.1"
"ceph/ceph-csi","1ca6f004a53632e9573ac907ff14bdaddddf1c1c","Rakshith-R","2023-06-23 08:43:59","false","rbd: (lastSyncInfo)handle last sync duration being empty case

This commit modifies code to handle last sync duration being
empty & 0,returning nil & 0 on encountering it respectively.
Earlier both case return 0. Test case is added too.

Signed-off-by: Rakshith R <rar@redhat.com>",31,65,1,1,"2018-01-08 15:47:21","1990.96"
"ceph/ceph-csi","3dd6fb40f1ba916c159802be900dfb64a630a8ec","Rakshith-R","2023-02-14 09:42:52","false","ci: remove deprecated `rebase_fallback` from .mergify.yml

This commit removes the deprecated `rebase_fallback` option
from .mergify.yml .

refer: https://docs.mergify.com/actions/merge/#options

Signed-off-by: Rakshith R <rar@redhat.com>",36,61,1,1,"2018-01-08 15:47:21","1862"
"ceph/ceph-csi","a799075cfc0119299555d7e22e5fe4d7dbebb18c","humblec","2022-09-13 06:31:20","false","doc: update doc for 3.7.1 release

updated doc for 3.7.1 release is available with this commit.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",35,56,1,1,"2018-01-08 15:47:21","1705.61"
"ceph/ceph-csi","fa0da71ce229207b643bbcd18fb89f4c1bdf41a1","humblec","2022-06-16 05:39:39","false","deploy: update external resizer to v1.5.0

Refer#
https://github.com/kubernetes-csi/external-resizer/releases/tag/v1.5.0

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",42,53,1,1,"2018-01-08 15:47:21","1618.58"
"ceph/ceph-csi","d7bf51b255fe6bd6914f8c14f8db9d66ad3bcc23","Madhu-1","2022-05-24 03:43:35","false","rebase: update csi-snapshotter to v6

as we have v6.0.0 of the external snapshotter
updating the dependency for the same.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",35,52,1,1,"2018-01-08 15:47:21","1596.5"
"ceph/ceph-csi","1b16db4ff654d437e9dc48220c8b246808943e75","nixpanic","2022-03-01 15:55:43","false","doc: proposal for providing NFS-exports

The design for NFS-provising of volumes explains how the existing NFS
CSI Node-Plugin can be used, and what the steps are to create the
NFS-export with Ceph Mgr.

Updates: #2913
Signed-off-by: Niels de Vos <ndevos@redhat.com>",42,50,1,1,"2018-01-08 15:47:21","1515.01"
"ceph/ceph-csi","ec34fdd5057ff2610da83e9df163b3b147055e5e","Madhu-1","2021-11-15 07:01:24","false","ci: skip codespell for retest vendor

as there are lot of spell check failures
on the vendor directory, skipping it.

skipping retest action folder as
PullRequests word is not getting ignored

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",56,46,0,1,"2018-01-08 15:47:21","1402.38"
"ceph/ceph-csi","4804f47b188121eefcd9b36db2403804545b1d52","humblec","2021-09-16 13:46:15","false","e2e: Add e2e for rbd migration static pvc

This commit adds e2e for rbd migration static PVCs

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",61,44,0,1,"2018-01-08 15:47:21","1343.67"
"ceph/ceph-csi","c17b3f69bddb2cbe7f8351845052afb612a9e5eb","nixpanic","2021-08-26 15:57:12","false","ci: add dependabot config for updating vendored packages

Vendored dependencies need updating on regular basis. This is currently
done manually by developers, but it can be automated by Dependabot. By
dropping the dependabot.yml config file in the .github/ directory the
bot should get enabled.

See-also: https://docs.github.com/en/code-security/supply-chain-security/keeping-your-dependencies-updated-automatically/enabling-and-disabling-version-updates
Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,43,0,1,"2018-01-08 15:47:21","1323.76"
"ceph/ceph-csi","696ee496fc52b5e2e5aa5a7dacf1b41b78c1161f","yati1998","2021-07-13 13:15:25","false","cleanup: resolves gofumpt for cmd

This commit resolves gofumpt linter for
cmd folder

Updates: 1586

Signed-off-by: Yati Padia <ypadia@redhat.com>",123,42,0,0,"2018-01-08 15:47:21","1280.64"
"ceph/ceph-csi","6312dbd92039410f43e8c989e41664136638432e","nixpanic","2020-10-15 09:38:52","false","ci: use Kubernetes 1.19.2 to merge PRs

The latest Kubernetes patch release (v1.19.3) can not be deployed with
minikube. Selecting version 1.19.2 until the problems with minikube are
addressed.

Updates: #1588
Signed-off-by: Niels de Vos <ndevos@redhat.com>",77,33,0,1,"2018-01-08 15:47:21","1007.24"
"ceph/ceph-csi","0c962d67398c17436ec5f47a082516b5f2853266","nixpanic","2023-06-02 10:00:20","false","ci: disable `revive:dot-imports`

The `revive:dot-imports` rule complains about the same problems that
`golint` reports. We only need one `//nolint:golint // ...` comment, not
a second one for revive.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",31,65,1,1,"2018-01-08 15:47:21","1971.01"
"ceph/ceph-csi","4e02dc1da98b70b29db0fc029df4c4c85a7e8781","humblec","2022-05-04 06:19:19","false","deploy: Enable featuregate for volume expansion recovery

The enabled feature gates helps us to recover from volume expansion
failure.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",39,52,1,1,"2018-01-08 15:47:21","1577.61"
"ceph/ceph-csi","66fa5891b2b54f4be3ba70ac7998fcd5e5f02876","humblec","2021-08-17 10:56:55","false","cephfs: correct typos in cephfs driver code

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",116,43,0,1,"2018-01-08 15:47:21","1314.55"
"ceph/ceph-csi","b66f40793f273754d71254bec9ce64a3c31a9556","humblec","2021-07-19 14:11:44","false","doc: lift snapshot creation/deletion to Beta

Since kubernetes 1.17 snapshot functionality is at Beta state
and external snapshotter 3.0.3. Since v4.0.0 of snapshotter controller
and kubernetes v1.20, the snapshot functionality has been lifted to GA.
Ceph CSI drivers have been supporting this feature for last few releases
and users are heavily using this feature since then.

We also have good amount of e2e test case which cover volume creation
from snapshot backend or iow, snapshot as a datasource. With that, this PR
proposes of lifting this feature support to Beta with v3.4.0 version.

Updates# https://github.com/ceph/ceph-csi/issues/2199

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",127,42,0,1,"2018-01-08 15:47:21","1286.68"
"ceph/ceph-csi","641d9c694b06c3df7e758587741b2deb41049a78","q60563","2018-04-26 05:37:45","true","Merge pull request #1 from q60563/fix_CSI_plugin

fix CSI plugin pvc.yaml file storageClassName Error",3,4,0,0,"2018-01-08 15:47:21","107.58"
"ceph/ceph-csi","3226b17d087fbb504c96783ea95278f2c6851ec4","nixpanic","2020-01-07 13:26:49","false","enable building with cgo for go-ceph usage

Signed-off-by: Niels de Vos <ndevos@redhat.com>",104,24,0,1,"2018-01-08 15:47:21","725.15"
"ceph/ceph-csi","ee033da8e9f2f0c8fa744898a05a257ea40f5658","nixpanic","2021-02-12 13:23:17","false","util: add DEKStore interface

DEKStore is a new interface that will be used for Storing and Fetching
DEKs. The existing implementations for KMS already function as a
DEKStore, and will be updated to match the interface.

By splitting KMS and DEKStore into two components, the encryption
configuration for volumes becomes more modular. This makes it possible
to implement a DEKStore where the encrypted DEK for a volume is stored
in the metadata of the volume (RBD image).

Signed-off-by: Niels de Vos <ndevos@redhat.com>",84,37,0,1,"2018-01-08 15:47:21","1129.65"
"ceph/ceph-csi","6d33fda68ea759156c71c5887239605b3c85f1d1","mcronce","2018-11-24 17:59:38","false","Gopkg.toml:  Updated Kubernetes dependencies to 1.13.0",16,10,0,0,"2018-01-08 15:47:21","316.09"
"ceph/ceph-csi","e73fe64a0d11ca2abcf968adb443fdb4fcccd6f5","Yuggupta27","2020-07-20 12:49:05","false","cleanup: address gosec warnings

gosec warns about security problems by scanning the
Go AST.

Issues Reported:
G101 (CWE-798): Potential hardcoded credentials (Confidence: LOW, Severity: HIGH)
G204 (CWE-78): Subprocess launched with variable (Confidence: HIGH, Severity: MEDIUM)
G304 (CWE-22): Potential file inclusion via variable (Confidence: HIGH, Severity: MEDIUM)

Signed-off-by: Yug <yuggupta27@gmail.com>",113,30,0,0,"2018-01-08 15:47:21","922.38"
"ceph/ceph-csi","f9f465073fca3115a74c41aa8ea46d16a2a9f984","Madhu-1","2021-11-15 06:51:48","false","ci: add github action to build retest

added basic github action for
retest building.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",56,46,0,1,"2018-01-08 15:47:21","1402.38"
"ceph/ceph-csi","819f4f90487e62d94f319abc06c98080ac00c72b","humblec","2021-10-08 08:31:33","false","e2e: adjust migration tests to use clusterID in the volume context

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",54,45,0,1,"2018-01-08 15:47:21","1366.45"
"ceph/ceph-csi","247795517fb822c28230495c02505ad65ecb873e","humblec","2021-08-12 14:04:07","false","cephfs: remove explicit size setting of cloned volume

CephFS csi driver explictly set the size of the cloned volume
to the size of parent volume as cephfs mgr was lacking this
functionality previously. However it has been addressed in cephfs
so we dont need explicit size setting.

Ref#https://tracker.ceph.com/issues/46163

Supported Ceph releases:

Ceph versions equal or above - v16.0.0, v15.2.9, v14.2.12

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",115,43,0,1,"2018-01-08 15:47:21","1309.68"
"ceph/ceph-csi","1d94c12cd6c4ff8be3d44556f0dbcce81c499dd4","humblec","2021-09-02 04:01:55","false","cleanup: add checkErrAndUndoReserve() for error check,unreserve omap

all the error check scenarios of genVolFromVolID() and unreserving
omap entries based on the error made deleteVolume method complex,
this patch create a new function which handle the error check and
unrerving omap entries accordingly and finally return the response
to deletevolume/caller.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",109,44,0,1,"2018-01-08 15:47:21","1330.26"
"ceph/ceph-csi","429f7acd8fa3a3688597ba056a98b55a78d88b45","nixpanic","2020-10-09 15:20:16","false","cephfs: make getSubVolumeInfo() a method of volumeOptions

Signed-off-by: Niels de Vos <ndevos@redhat.com>",123,33,0,1,"2018-01-08 15:47:21","1001.48"
"ceph/ceph-csi","b721accaf53f84c7cdb1572b8a1446a69b2917da","humblec","2019-10-07 06:41:33","false","Resize CephFS Volumes

This feature enables CephFS Volume expansion on demand
based on the CO resizer request.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",87,21,0,1,"2018-01-08 15:47:21","634.87"
"ceph/ceph-csi","aaef48e469fabfd52ee0cbb6419332f5675212e7","robinbraemer","2019-07-22 21:50:36","false","shorten line length",74,18,0,0,"2018-01-08 15:47:21","559.5"
"ceph/ceph-csi","75c6cb65447586d64b382ee10e0f29dde683608c","humblec","2020-10-14 16:19:03","false","rbd: remove unused credentials argument from StoreImageID()

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",75,33,0,1,"2018-01-08 15:47:21","1006.52"
"ceph/ceph-csi","859d69627935fd526074eb494cacde8e9dd34402","Rakshith-R","2021-07-14 09:11:50","false","cleanup: refractor checkCloneImage to reducing nesting if

This commit refractors checkCloneImage function to
address nestif linter issue.

Signed-off-by: Rakshith R <rar@redhat.com>",122,42,0,1,"2018-01-08 15:47:21","1281.48"
"ceph/ceph-csi","0f9c9061ceb98a27cf86cac8df5b2eeaa2178b7e","pohly","2018-12-05 13:52:10","false","rbd: refuse to create block volumes

Without this check, the driver fails one of the E2E storage tests in
Kubernetes 1.13: provisioning a block volume is expected to fail in
https://github.com/kubernetes/kubernetes/blob/e689d515f77cda51898045d626ec4070e3328194/test/e2e/storage/testsuites/volumemode.go#L329-L330",16,11,0,0,"2018-01-08 15:47:21","327.92"
"ceph/ceph-csi","e4b16a5c7204bc2afbdfb32c0cd9ea9ac68b2a54","nixpanic","2020-12-15 08:11:53","false","util: allow tenants to (re)configure VaultTokens settings

A tenant can place a ConfigMap in their Kubernetes Namespace with
configuration options that differ from the global (by the Storage Admin
set) values.

The ConfigMap needs to be located in the Tenants namespace, as described
in the documentation

See-also: docs/design/proposals/encryption-with-vault-tokens.md
Signed-off-by: Niels de Vos <ndevos@redhat.com>",76,35,0,1,"2018-01-08 15:47:21","1067.18"
"ceph/ceph-csi","6e2d16ed1ef5d311ba8a3b004d7f7db58de99926","nixpanic","2020-12-09 16:10:43","false","e2e: add test for VaultTokensKMS support

Signed-off-by: Niels de Vos <ndevos@redhat.com>",75,35,0,1,"2018-01-08 15:47:21","1061.52"
"ceph/ceph-csi","1b0b26a7a6641ede2e693a651b2e8a438f5833bc","nixpanic","2020-06-17 18:31:10","false","util: log kernel version on start

It is useful to have the kernel version logged while starting binaries.
Some functionality depends on the version of the kernel, debugging
issues related to this will be easier.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,29,0,1,"2018-01-08 15:47:21","889.61"
"ceph/ceph-csi","7824cb5ed7ef0c779d8091e1910eef2ae0a1ab2d","nixpanic","2020-11-23 13:38:25","false","util: use %w when forwarding an error

Signed-off-by: Niels de Vos <ndevos@redhat.com>",82,34,0,1,"2018-01-08 15:47:21","1045.41"
"ceph/ceph-csi","6ea163af218d15d3d0f85c893411c4c53e9055a0","nixpanic","2020-06-24 06:16:40","false","cleanup: remove unused GO_METALINTER_THREADS

Go Metalinter is not used anymore, we moved to Golangci.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,29,0,1,"2018-01-08 15:47:21","896.1"
"ceph/ceph-csi","4908ff874383e630cb300514e86083cbb02063ef","nixpanic","2021-06-15 07:23:47","false","rbd: no need to flatten thick-provisioned images

Thick-provisioned images are independent, cloned images or snapshots are
deep-flattened during creation. There is no need to try and flatten them
again.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",108,41,0,1,"2018-01-08 15:47:21","1252.4"
"ceph/ceph-csi","b54d32dd7501de193d352002b0231cbae6c6ab5f","nixpanic","2023-06-02 09:03:18","false","ci: disable `depguard` linter in golangci-lint

The `depguard` linter needs additonal configuration, namely a list of
packages that may (not) be imported.

See-also: https://github.com/OpenPeeDeeP/depguard
Signed-off-by: Niels de Vos <ndevos@ibm.com>",31,65,1,1,"2018-01-08 15:47:21","1970.97"
"ceph/ceph-csi","166eaf700f8589536bb64709f9c9e0838ebdadd8","vasyl-purchel","2019-12-13 11:41:32","false","Adds PVC encryption with LUKS

Adds encryption in StorageClass as a parameter. Encryption passphrase is
stored in kubernetes secrets per StorageClass. Implements rbd volume
encryption relying on dm-crypt and cryptsetup using LUKS extension

The change is related to proposal made earlier. This is a first part of
the full feature that adds encryption with passphrase stored in secrets.

Signed-off-by: Vasyl Purchel vasyl.purchel@workday.com
Signed-off-by: Andrea Baglioni andrea.baglioni@workday.com
Signed-off-by: Ioannis Papaioannou ioannis.papaioannou@workday.com
Signed-off-by: Paul Mc Auley paul.mcauley@workday.com
Signed-off-by: Sergio de Carvalho sergio.carvalho@workday.com",101,23,0,0,"2018-01-08 15:47:21","700.08"
"ceph/ceph-csi","097e339d69b4704d99f0501a09c37059b4ef1bfd","humblec","2022-01-18 08:24:54","false","rbd: lift snapshot, clone and metrics to GA version

We have added enough e2e tests and the below functionality is
also proven as working based on the user reports so far. The
support at CO side is also pretty stable for these features.

* snapshot
* clone
* metrics
* RWO/RWX CephFS volumes

This commit lift the support state of above features to GA from next
release onwards.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",40,48,1,1,"2018-01-08 15:47:21","1470.69"
"ceph/ceph-csi","4e890e9daf4025484a4adc595dff007bdf4453ab","yati1998","2021-07-13 11:40:32","false","ci: disable gci and wrapcheck linter

This commit disables wrapcheck and gci
linters.

Updates: #1586

Signed-off-by: Yati Padia <ypadia@redhat.com>",123,42,0,0,"2018-01-08 15:47:21","1280.58"
"ceph/ceph-csi","d46dc3361148889384a5e1593c8b65b6ccd315ca","mcronce","2018-11-29 18:16:19","false","deploy/cephfs:  Updated all image tags from v0.3.0 to v1.0.0",16,11,0,0,"2018-01-08 15:47:21","321.1"
"ceph/ceph-csi","34c37663c2380ded00374bc77dc6f90870a55599","Yuggupta27","2021-10-27 05:12:09","false","e2e: Verify if app can mount ec pvc

Verify if an application is able to mount
a pvc created via an erasure coded pool.

Signed-off-by: Yug Gupta <yuggupta27@gmail.com>",56,45,0,0,"2018-01-08 15:47:21","1384.31"
"ceph/ceph-csi","59fc4aa00ff25cc0917f307408ee454d4b97419a","Yuggupta27","2020-09-10 12:05:53","false","cephfs: validate if subvolume has snapshot-retention feature

Add validateSnapshotRetention() to verify if subvolume has
`snapshot-retention` feature.

Signed-off-by: Yug <yuggupta27@gmail.com>",120,32,0,0,"2018-01-08 15:47:21","972.35"
"ceph/ceph-csi","17eb9fb47b1bcfcba8c5f262100f2a69b44b0047","Madhu-1","2019-08-13 11:24:20","true","Merge pull request #544 from Madhu-1/skip-snap

Skip snapshot testing  in CI",84,19,0,1,"2018-01-08 15:47:21","580.07"
"ceph/ceph-csi","4abe128bd851f91f21338872cd45201e57aad767","nixpanic","2020-12-03 11:00:22","false","e2e: log events from deployment namespace

When tests run and something goes wrong during deployment, not all
information is available. Logging the events from the namespace where
Ceph-CSI (and Vault) is deployed, might help with troubleshooting.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",79,35,0,1,"2018-01-08 15:47:21","1056.3"
"ceph/ceph-csi","e5e332eded85eebc0d60fd3471c5c67231577803","ShyamsundarR","2019-07-13 12:00:47","false","Use correct file descriptor to parse errors

File descriptors in use to parse errors from a few command
invocations were incorrect. This led to inability to detect
certain errors cases and act accordingly.

One of the easiest noticeable issues was when an image is deleted
but its RADOS keys and maps are still intact. In such cases
the DeleteVolume call always errored out unable to find the
image rather than, proceed with cleaning up the RADOS objects
and returning a success.

The original method of using stdout was incorrect, as the command
was tested from within a shell script and the scripts STDIN/OUT/ERR
was redirected to understand behavior. This is now tested using just
the CLI in question, and also examining Ceph code, and further
testing a couple of edge conditions by deleting backing images
for PVs

Signed-off-by: ShyamsundarR <srangana@redhat.com>",81,18,0,0,"2018-01-08 15:47:21","550.09"
"ceph/ceph-csi","46acd6b2cdd904145cb87c91fda9c15ca7766d82","agarwal-mudit","2020-08-10 03:17:20","false","doc: update e2e README for snapshot operation

Updated e2e README with the prerequisites to run snapshot/clone e2e tests.

Signed-off-by: Mudit Agarwal <muagarwa@redhat.com>",120,31,0,0,"2018-01-08 15:47:21","941.98"
"ceph/ceph-csi","5df2a23f43cf1314e935a81bfc6cbcc27e29baef","iPraveenParihar","2023-11-02 08:10:37","false","doc: updated doc for subvolumegroup creation

Signed-off-by: Praveen M <m.praveen@ibm.com>",20,70,1,0,"2018-01-08 15:47:21","2120.93"
"ceph/ceph-csi","09f8ee0f3fcc8a51effe19039637d646ecd7dc9e","naveensrinivasan","2022-05-03 14:21:45","false","ci: Included githubactions in the dependabot config

This should help with keeping the GitHub actions updated on new
releases. This will also help with keeping it secure.

Dependabot helps in keeping the supply chain secure:
https://docs.github.com/en/code-security/dependabot

GitHub actions up to dat: e
https://docs.github.com/en/code-security/dependabot/ \
  working-with-dependabot/keeping-your-actions-up-to-date-with-dependabot

dependency-update-tool:
https://github.com/ossf/scorecard/blob/main/docs/checks.md

Signed-off-by: Naveen <172697+naveensrinivasan@users.noreply.github.com>",39,52,1,0,"2018-01-08 15:47:21","1576.94"
"ceph/ceph-csi","971f8e320bc8fdb46ce234e7ee2f586d62b49944","humblec","2021-06-25 12:42:43","false","e2e: reformat long lines in this package to 120 chars

We have many declarations and invocations..etc with long lines which are
very difficult to follow while doing code reading. This address the issues
in 'e2e/rbd_helper.go' files to restrict the line length to 120 chars.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",118,41,0,1,"2018-01-08 15:47:21","1262.62"
"ceph/ceph-csi","0c5be6d12db1a9226261973f1d031153ea3ba83c","humblec","2021-11-03 12:07:59","false","e2e: remove 1.16 based test enablement in cephfs

Considering we are far out of these release and only care about
kubernetes releases from v1.20, there is no need to have this
version check in place for the tests.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",56,46,0,1,"2018-01-08 15:47:21","1391.6"
"ceph/ceph-csi","5c39b1441298298e22f371d66580a2d26df852ee","humblec","2019-04-04 06:07:57","false","Add coding.md into docs

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",47,15,0,1,"2018-01-08 15:47:21","451.85"
"ceph/ceph-csi","995879d34981265f466c5d8244ee1ebb4079d431","yati1998","2020-12-22 07:40:06","false","cephfs: use enum to check resize is supported or not

Currently, we are using bool pointer to find out
the ceph cluster supports resize or not. This
commit replaces the bool pointer with enum.

Signed-off-by: Yati Padia <ypadia@redhat.com>

Fixes#1764",80,35,0,0,"2018-01-08 15:47:21","1074.16"
"ceph/ceph-csi","8ce5ae16c1f96a323d83e193d6b39dabce3427c6","nixpanic","2021-06-30 11:54:15","false","e2e: do not create a single-item list

The deployment of the Vault ConfigMap for the init-scripts job contains
a List with a single Item. This can be cleaned up to just be a ConfigMap
(without the list structure around it).

Signed-off-by: Niels de Vos <ndevos@redhat.com>",121,42,0,1,"2018-01-08 15:47:21","1267.59"
"ceph/ceph-csi","834ea92185146d8e07e07b318a586627390cc67e","nixpanic","2020-06-30 10:17:11","false","rebase: use gosec-2.3.0

gosec-2.3.0 is the current latest version, use that so more checks are
done on the code.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,30,0,1,"2018-01-08 15:47:21","902.27"
"ceph/ceph-csi","365eb58ff7134d3b738059684c447a5dc2209a0a","Yuggupta27","2020-09-10 12:34:48","false","cephfs: use subvolume info if available

Use subvolume info to fetch the subvolume path.
If `subvolume info` command is not available,
use `getpath` command instead.

Signed-off-by: Yug <yuggupta27@gmail.com>",120,32,0,0,"2018-01-08 15:47:21","972.37"
"ceph/ceph-csi","cc72de4b1c906cde1875519141926c18d6d3de4a","Yuggupta27","2021-06-22 08:27:53","false","helm: add support to pass --namespace option

The current approach uses hard-coded command line
arguments which is not very robust;
To maintain backward compatibility, script will
also keep working as the previous approach.

Signed-off-by: Yug <yuggupta27@gmail.com>",115,41,0,0,"2018-01-08 15:47:21","1259.44"
"ceph/ceph-csi","9394ac887e2665c603d66f1ee75daf09af44fddd","Yuggupta27","2020-05-12 12:16:06","false","rbd: change image pull policy

unlike other containers, image pull policy of
csi-snapshotter was set to ""Always"", which can
be changed to pull only if not present.

Signed-off-by: Yug Gupta <ygupta@redhat.com>",109,28,0,0,"2018-01-08 15:47:21","854.35"
"ceph/ceph-csi","20727bd41af44e4b9bca686ffb2b13a5cf103673","nixpanic","2021-11-29 09:49:18","false","cleanup: reduce complexity of rbd.Driver.Run()

After adding the new CSI-Addons Server, golang-ci complains that
driver.Run() is too complex. By moving the profiling checks and starting
of the go-routines in their own function, golang-ci is happy again.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",52,47,0,1,"2018-01-08 15:47:21","1416.5"
"ceph/ceph-csi","027b68ab391fe23e09ab13637c3f595868a6e7c4","Madhu-1","2021-11-22 12:32:52","false","rbd: operate on dummy image after adding scheduling

currently we are fist operating on the  dummy
image to refresh the pool and then we are adding
the scheduling. we think the scheduling should
be added first and than we should refresh the
pool. If we do this all the existing schedules
will be considered from the scheduler.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",55,46,0,1,"2018-01-08 15:47:21","1409.61"
"ceph/ceph-csi","f36d611ef94705885fe59fb41b0635197cf5526f","yati1998","2021-07-13 12:21:05","false","cleanup: resolves gofumpt issues of internal codes

This PR runs gofumpt for internal folder.

Updates: #1586

Signed-off-by: Yati Padia <ypadia@redhat.com>",123,42,0,0,"2018-01-08 15:47:21","1280.61"
"ceph/ceph-csi","8c2bdbc0016b20959fac616c125ba84c29c65c23","agarwal-mudit","2020-08-23 08:29:44","false","rbd: implement rbd.updateVolWithImageInfo() with go-ceph

updateVolWithImageInfo() is currently executing an rbd command
to get details about an RBD image. Replaced it with the
required go-ceph functions.

Signed-off-by: Mudit Agarwal <muagarwa@redhat.com>",120,31,0,0,"2018-01-08 15:47:21","955.2"
"ceph/ceph-csi","50268d594773715ad498630163c06137d546e362","Madhu-1","2019-10-01 08:46:01","false","Fix issue in helm chat pushing

From master and release-v1.2.0 branch we will be
pushing the canary charts. when we are doing the release
i.e v1.2.2 from release-v1.2.0 branch we will replace
all canary to released tag v1.2.2 and push helm charts
for v.1.2.2 and will revert back the changes in
release-v1.2.0 branch push canary tagged charts(
this will be same logic as pushing the container image)

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",87,21,0,1,"2018-01-08 15:47:21","628.96"
"ceph/ceph-csi","d0d5da83c985f7df436315262d0f8848e7362e9e","gman0","2019-04-02 06:36:07","true","Merge pull request #282 from huaizong/improve-remount-pv-path-when-exit-v2

remount old mount point when csi plugin unexpect exit",46,15,0,0,"2018-01-08 15:47:21","449.87"
"ceph/ceph-csi","bbd24e52f39b2d1ae55062c82398b803f9bb4ba4","nixpanic","2021-03-15 09:58:29","false","cleanup: use rbdImage.Destroy() for temporary volumes

rbdVolumes can have several resources that get allocated during its
usage. Only destroying the IOContext may not be suffiecient and can
cause resource leaks.

Use rbdVolume.Destroy() when the rbdVolume is not used anymore.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",86,38,0,1,"2018-01-08 15:47:21","1162.51"
"ceph/ceph-csi","72c74f5f8ad05ba358e2c0509d698cda58afaa62","nixpanic","2020-06-25 08:35:19","false","cleanup: use errors.As() in cephfs.NodeStageVolume()

See-also: https://github.com/golang/go/wiki/ErrorValueFAQ#how-should-i-change-my-error-handling-code-to-work-with-the-new-features
Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,29,0,1,"2018-01-08 15:47:21","897.2"
"ceph/ceph-csi","6a2717ce200de9fcc200d92d6b59ca2fccbb95fb","shaas","2019-10-10 10:15:44","false","Added forcecephkernelclient as startup parameter to force enabling ceph

Signed-off-by: Stefan Haas <shaas@suse.com>",87,21,0,0,"2018-01-08 15:47:21","637.02"
"ceph/ceph-csi","e8784ec094a314394e344bc7b5b03099c779131a","nak3","2018-07-31 06:31:11","false","Logging command and options for debug friendly

Some commands were executed in ceph-csi, but users do not know what
commands with what options were executed. Hence, it is difficult to
debug once the command did not work fine.

This patch adds logging what commmand and options are executed.",5,7,0,0,"2018-01-08 15:47:21","202.61"
"ceph/ceph-csi","e9802c4940b1ae491e6890e52700508b428fac55","Madhu-1","2022-02-15 12:11:09","false","cephfs: refactor cephfs core functions

This commits refactors the cephfs core
functions with interfaces. This helps in
better code structuring and writing the
unit test cases.

update #852

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,49,1,1,"2018-01-08 15:47:21","1497.85"
"ceph/ceph-csi","e15e2e5081975072fca6a6f4f7116b111eaaf308","Madhu-1","2021-05-03 11:00:05","false","rbd: discard image not found error

For flatten we call checkImageChainHasFeature
which internally calls to getImageInfo returns
the parent name even if the parent is in the trash,
when we try to open the parent image to get its
information it fails as the image not found.
we should treat error as nil if the parent is not found.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",93,40,0,1,"2018-01-08 15:47:21","1211.55"
"ceph/ceph-csi","e4b7943bacde6ce5af593b7e97b1902eaa32956c","Madhu-1","2021-12-22 03:36:37","false","rbd: add workaround for force promote

use ExecCommandWithTimeout with timeout
of 1 minute for the promote operation.
If the command doesnot returns error/response
in 1 minute the process will be killed
and error will be returned to the user.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",53,47,1,1,"2018-01-08 15:47:21","1439.24"
"ceph/ceph-csi","fc5eadf106a4275fe0abd21b53f57a4e5a077758","mehdy","2020-06-01 13:57:51","false","rbd: Add rados namespace support for rbd

Make sure to operate within the namespace if any given
when dealing with rbd images and snapshots and their journals.

Signed-off-by: Mehdy Khoshnoody <mehdy.khoshnoody@gmail.com>",110,29,0,0,"2018-01-08 15:47:21","874.42"
"ceph/ceph-csi","22c432cece540cafa358a6a717573cfc519ce858","xiaopei-yuan","2020-04-05 06:09:51","false","Fix typos in charts values comments

Signed-off-by: Xiaopei Yuan <yuanxiaopei@kpaas.io>",104,27,0,0,"2018-01-08 15:47:21","818.1"
"ceph/ceph-csi","3196b798cc427da76453531de412a7276771ee22","humblec","2021-12-20 09:21:47","false","doc: few corrections or typo fixing in design documentation

- Fixes spelling mistakes.
- Grammatical error correction.
- Wrapping the text at 80 line count..etc

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",55,47,1,1,"2018-01-08 15:47:21","1437.48"
"ceph/ceph-csi","2b7f078943de71600529ae905d1b4da3e4335131","nixpanic","2021-03-08 13:51:42","false","rebase: vendor golang.org/x/crypto and update to latest

The new SecretsMetadataKMS provider encrypts/decrypts DEKs as they are
stored in the metadata of volumes. The encryption/decryption uses
golang.org/x/crypto/scrypt to generate the encryption key from a
passphrase.

While vendoring golang.org/x/crypto, already vendored sub-packages have
been updated.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",94,38,0,1,"2018-01-08 15:47:21","1156.67"
"ceph/ceph-csi","6d6b5bab3c42af563d96d9f49671f2c6a3483feb","nixpanic","2020-06-30 06:43:24","false","rbd: add Unwrap() to error types

See-also: https://github.com/golang/go/wiki/ErrorValueFAQ#i-have-a-type-that-implements-error-and-holds-a-nested-error-how-should-i-adapt-it-to-the-new-features
Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,30,0,1,"2018-01-08 15:47:21","902.12"
"ceph/ceph-csi","c274649b8093b0ab238ae7604133da275363a9b9","nixpanic","2021-12-20 09:29:40","false","rbd: implement NodeReclaimSpace

By calling fstrim/blkdiscard on the volume, space consumption should get
reduced.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",55,47,1,1,"2018-01-08 15:47:21","1437.49"
"ceph/ceph-csi","8b606f538f2696943fe965dff483cf0950c3d600","Yuggupta27","2020-06-09 08:00:00","false","build: add check for ceph development headers

The script checks for the ceph development headers.
In case required packages are not found, script
suggests to run containerized build.

Signed-off-by: Yug Gupta <ygupta@redhat.com>",115,29,0,0,"2018-01-08 15:47:21","881.18"
"ceph/ceph-csi","8cd901d2ddc09c57dee924a0257a656c9d7199a0","Madhu-1","2021-02-08 07:15:23","false","cephfs: add subvolume path to volume context

There are many usecases with adding the subvolume
path to the PV object. the volume context returned
in the createVolumeResponse is added to the PV object
by the external provisioner.

More Details about the usecases are in below link
https://github.com/rook/rook/issues/5471

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",83,37,0,1,"2018-01-08 15:47:21","1126.39"
"ceph/ceph-csi","3169c8e23ab9dda2cb4401c82f9abc6b439fa1dc","Madhu-1","2021-12-15 07:25:19","false","rbd: expand filesystem during NodeStageVolume

If the volume with a bigger size is created
from a snapshot or from another volume we
need to exapand the filesystem also in the
csidriver as nodeExpand request is not triggered
for this one, During NodeStageVolume we can
expand the filesystem by checking filesystem
needs expansion or not.

If its a encrypted device, check the device
size of rbd device and the LUKS device if required
the device will be expanded before
expanding the filesystem.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",50,47,1,1,"2018-01-08 15:47:21","1432.4"
"ceph/ceph-csi","25796aa4ea1380013953a67fc1c93e27264dc6db","Madhu-1","2022-01-21 07:01:33","false","deploy: update rook version to 1.8.2

update rook version to 1.8.2 in build.env
to pick up the latest rook release.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",41,48,1,1,"2018-01-08 15:47:21","1473.63"
"ceph/ceph-csi","c02413a663a47552110e141a2e8876e18a3e4921","nixpanic","2020-06-24 12:28:02","false","build: Add `-tags=nautilus` to `go test` and `go build`

Build `GO_TAGS` based on the `CEPH_VERSION` from build.env. In case the
version is non-empty, pass `-tags=${CEPH_VERSION}` to any of the go
commandline and script that call go programs.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",116,29,0,1,"2018-01-08 15:47:21","896.36"
"ceph/ceph-csi","1b976c5068ca3516b94ffff2e07e95e0332e0ab4","gman0","2018-03-20 14:54:24","false","added cephfs/cephfsconf.go: generates ceph config and keyring",2,2,0,0,"2018-01-08 15:47:21","71.96"
"ceph/ceph-csi","6a1b795e07f7b50f78c04ffc4dced22ebba4ffea","robinbraemer","2019-07-22 14:44:17","false","Update README.md",74,18,0,0,"2018-01-08 15:47:21","559.21"
"ceph/ceph-csi","58997ecbd8e25393ccaa44ad3ad133d2f58dc174","Madhu-1","2019-01-28 12:08:16","false","update go version to 1.11.x

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",22,13,0,1,"2018-01-08 15:47:21","385.1"
"ceph/ceph-csi","f5af7d0a94ddc2e775f3761e66e06a1db1f09131","rootfs","2018-06-12 18:14:31","true","Merge pull request #39 from gman0/fix-cephfs-provisioner

Fix broken cephfs provisioner",3,5,0,0,"2018-01-08 15:47:21","154.1"
"ceph/ceph-csi","2f328cb12b00f7a0398c60a29bd85c506a8bf049","Madhu-1","2019-05-07 11:39:02","false","Fix incorrect make command
update v1.0.0-canary tag to canary tag

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",68,16,0,1,"2018-01-08 15:47:21","485.08"
"ceph/ceph-csi","44612fe34c8336dce39c96e211775579aac46905","riya-singhal31","2023-04-20 09:51:43","false","ci: fix shell check failures

Signed-off-by: riya-singhal31 <rsinghal@redhat.com>",35,63,1,0,"2018-01-08 15:47:21","1928"
"ceph/ceph-csi","804e2715d85071e3f3a2331b9bf2c2b3886b3899","nixpanic","2022-03-30 08:06:07","false","deploy: add deployment artifacts for NFS support

These deployment files are heavily based on the CephFS deployment.

Deploying an environment with these files work for me in minikube. This
should make it possible to add e2e testing as well.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",48,51,1,1,"2018-01-08 15:47:21","1542.68"
"ceph/ceph-csi","a4f6a3407f78492277bf233d03cc81fc2a8b361f","Madhu-1","2020-01-09 11:52:19","false","Add ContentSource to the CreateVolume response

if PVC is created from a snapshot, external-provisioner
expects the volume ContentSource to be set in Create
VolumeResponse

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",105,24,0,1,"2018-01-08 15:47:21","731.34"
"ceph/ceph-csi","b7790097705105290157ec40db50b00fda4fc96d","gman0","2019-02-27 19:29:20","false","parse ceph-fuse PID with regexp",31,14,0,0,"2018-01-08 15:47:21","414.4"
"ceph/ceph-csi","c9ad904331016629665c542e187aae986b5d0a6f","Yuggupta27","2020-06-25 13:48:48","false","cephfs: Add support for multiple subvolumegroups

With the current code base, the subvolumegroup will
be created once, and even for a different cluster,
subvolumegroup creation is not allowed again.

Added support multiple subvolumegroups creation by
validating one subvolumegroup creation per cluster.

Fixes: #1123

Signed-off-by: Yug Gupta <ygupta@redhat.com>",117,29,0,0,"2018-01-08 15:47:21","897.42"
"ceph/ceph-csi","1f650e12046be14ad99ada6cdd69cda5a792e0b3","nixpanic","2021-11-17 11:19:58","false","rebase: replace vendored layeh.com/radius with GitHub source

The webserver at layeh.com seems to be misbehaving, which causes `go mod
verify` to fail. The layeh.com/radius repository is maintained on
GitHub, so the sources can be vendored/verified from there too.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",57,46,0,1,"2018-01-08 15:47:21","1404.56"
"ceph/ceph-csi","6b3e6e67e46274cee2c8e8c9454e481f95ee9500","Madhu-1","2020-04-13 09:58:03","false","update the helm documentation for cephfs and rbd

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",104,27,0,1,"2018-01-08 15:47:21","825.26"
"ceph/ceph-csi","8c9105f09e6a618f1d573b031bcf516c5e8c7935","Madhu-1","2021-12-20 15:20:04","false","rbd: remove extra getImageInfo API call

as getImageInfo is already called inside
cloneRbdImageFromSnapshot function right
after creating the clone. remove the extra
API call to get the details again.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",57,47,1,1,"2018-01-08 15:47:21","1437.73"
"ceph/ceph-csi","85df59531bde767645d05b67c8939b67178c80f4","nixpanic","2020-09-21 14:56:15","false","e2e: pass SC parameters to createCephfsStorageClass()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",133,32,0,1,"2018-01-08 15:47:21","983.46"
"ceph/ceph-csi","5c016b4b9443e81543236ba93d7d13a93ab87c89","nixpanic","2021-07-19 08:48:06","false","e2e: retry on ""connect: connection refused"" errors

Sometimes there are failures in the e2e suite when connecting to the
etcdserver fails. The following error was caught:

    INFO: Error getting pvc ""rbd-pvc"" in namespace ""rbd-1318"": Get ""https://192.168.39.222:8443/api/v1/namespaces/rbd-1318/persistentvolumeclaims/rbd-pvc"": dial tcp 192.168.39.222:8443: connect: connection refused
    FAIL: failed to create PVC with error failed to get pvc: Get ""https://192.168.39.222:8443/api/v1/namespaces/rbd-1318/persistentvolumeclaims/rbd-pvc"": dial tcp 192.168.39.222:8443: connect: connection refused

If etcdserver was only briefly unavailable, one or more retries might be
sufficient to have the test pass.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",126,42,0,1,"2018-01-08 15:47:21","1286.46"
"ceph/ceph-csi","74ba85f87b1526e615f1643d3475316137a18264","nixpanic","2020-07-30 13:48:42","false","ci: add ""make run-e2e""

The keeps the standard arguments for e2e testing in a single location
instead of spread over multiple files and CI jobs.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",118,31,0,1,"2018-01-08 15:47:21","932.42"
"ceph/ceph-csi","4be3943713d4d20030ae37ca099fd8f4602a06f6","humblec","2019-06-06 12:18:11","false","Add mount options support in CephFS CSI driver

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",79,17,0,1,"2018-01-08 15:47:21","514.1"
"ceph/ceph-csi","d70b594946b44531e6852c0b107b463a9faa5f49","humblec","2022-11-08 14:13:01","false","rbd: remove false error check in getDeviceSize

this removed err condition will be always false as error
is always nil.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",35,58,1,1,"2018-01-08 15:47:21","1761.93"
"ceph/ceph-csi","6aec858cbaae1dbf5332f18823b71d44c3710408","humblec","2021-10-25 09:18:43","false","rbd: parse migration secret and set fields for nodestage operations

this commit make use of the migration request secret parsing and set
the required fields for further nodestage operations

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",53,45,0,1,"2018-01-08 15:47:21","1382.48"
"ceph/ceph-csi","d1414241ddb00440a0e00de5ca24d1cc89d522f7","humblec","2019-07-08 05:08:50","true","Merge pull request #459 from Madhu-1/fix-noexec

Replace noexec with debug mountflag for  cephfs",80,18,0,1,"2018-01-08 15:47:21","545.81"
"ceph/ceph-csi","7df51846da3cf8dc57d23e2ee5fa02716d1e1769","humblec","2020-01-16 14:22:48","false","This commit adds `""k8s.io/kubernetes/test/e2e/framework/config""`
and its functions in E2E.

update vendor packages
log dismounter command output
use kube v1.17.1 in dependency

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",107,24,0,1,"2018-01-08 15:47:21","738.44"
"ceph/ceph-csi","cd107d433d9d1030d8bef12636bc801c7fa40a98","humblec","2020-08-03 09:47:00","false","deploy: add csi-cephfsplugin provisioner deployment and role

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",118,31,0,1,"2018-01-08 15:47:21","936.25"
"ceph/ceph-csi","8f3d8f4cfdd4596b86cd6fbad0d8c293da7ae94e","humblec","2021-07-20 08:01:38","false","doc: explicitly mention volume/pv metrics feature

we have volume PV metrics support available in our driver along
with the grpc metrics support (EnableGRPCMetrics) we added in between
for csi operations. The latter is getting deprecated and the current
mention in the support matrix on metrics support confuse many.
This PR explictly mention this support in the docs to volume/PV metrics

This PR also add a seperate row for block mode PV metrics

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",126,42,0,1,"2018-01-08 15:47:21","1287.43"
"ceph/ceph-csi","79dbc41d1402256e403377d9fa599024bceedbda","Madhu-1","2020-08-11 12:12:56","false","cephfs: replace Errorf with ErrorLog in NodePublishVolume

replace Errorf with ErrorLog in NodePublishVolume
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.35"
"ceph/ceph-csi","d321663872badfc1ef91b4214db1876edc697368","Madhu-1","2021-07-26 12:28:26","false","deploy: add template changes for mapping

added template changes for the clusterID and
poolID,fsID mapping details for the pod templates.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",117,43,0,1,"2018-01-08 15:47:21","1293.61"
"ceph/ceph-csi","21bd26ebc41b4bcd9d88eb7d6473152fce3aa1ac","Madhu-1","2020-06-16 11:06:15","false","e2e: Add E2E for ROX PVC

Added E2E testing for creation
and mounting of ROX PVC, if the
PVC accessmode is ReadOnlyMany
the application pod should not get
write access to it.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",117,29,0,1,"2018-01-08 15:47:21","888.3"
"ceph/ceph-csi","3fe3d25dda3e469f47bf8ce5e6ee91814a10c14d","Madhu-1","2020-08-11 12:28:40","false","cephfs: replace Errorf with ErrorLogMsg in loadAvailableMounters

replace Errorf with ErrorLog in loadAvailableMounters
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",120,31,0,1,"2018-01-08 15:47:21","943.36"
"ceph/ceph-csi","7688306f87da143bf8c869c871fc6ef02a315baa","Rakshith-R","2022-05-26 06:31:34","false","rbd: use vaultAuthPath variable name in error msg

Before the change, the error msg was the following:
```
failed to set VAULT_AUTH_MOUNT_PATH in Vault config: path is empty
```
`vaultAuthPath` is the actual variable name set by the
user. The error message will now be the following:
```
failed to set ""vaultAuthPath"" in vault config: path is empty
```

Signed-off-by: Rakshith R <rar@redhat.com>",37,53,1,1,"2018-01-08 15:47:21","1598.61"
"ceph/ceph-csi","5168ad7ddfe1613cf63a3da0d9750e682928954f","Madhu-1","2020-07-20 12:39:50","false","e2e: create/delete snap and clone in parallel

In rbd E2E testing,we need to create snap and clone
as parallel operation.

This helps us to insure that functionality works when
we have parallel delete and create operations and also
it helps to catch bugs when we get parallel requests.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",111,30,0,1,"2018-01-08 15:47:21","922.37"
"ceph/ceph-csi","5802265b287eedf450b934625c003ee121295d80","Madhu-1","2020-08-11 11:25:36","false","cephfs: replace klog.Error with util.ErrorLog in createSnapshot

replace klog.Error with util.ErrorLog in createSnapshot
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.32"
"ceph/ceph-csi","1b30a58e5345c6948871472a062724b6773bf636","nixpanic","2021-08-30 15:08:19","false","ci: skip commitlint for dependabot PRs

Dependabot creates commit messages that commitlint fails to parse
correctly. The messages contain simple references to which dependencies
are updated, and do not need full validation like manual written
messages do.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",106,44,0,1,"2018-01-08 15:47:21","1327.72"
"ceph/ceph-csi","72d56cb8db1feb9f18fe001da480ba1d973a07bf","nixpanic","2021-08-03 15:03:13","false","e2e: use original namespace for retrying resize check

expandPVCSize() uses the namespace of the PVC that was checked. In case
the .Get() call fails, the PVC will not have its namespace set, and
subsequent tries will fail with errors like:

    Error getting pvc in namespace: '': etcdserver: request timed out
    waiting for PVC  (9 seconds elapsed)
    Error getting pvc in namespace: '': an empty namespace may not be set when a resource name is provided

By using the original namespace of the PVC stored in a separate variable
as is done with the name of the PVC, this problem should not occur
anymore.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",121,43,0,1,"2018-01-08 15:47:21","1301.72"
"ceph/ceph-csi","aa4fce2c8bfa361af21c62d82190d400f8da786d","rootfs","2019-01-27 15:04:42","true","Merge pull request #133 from Madhu-1/fix-golint

Fix golint",22,13,0,0,"2018-01-08 15:47:21","384.22"
"ceph/ceph-csi","07dbea766e6b9b3fad48d0ccef9ead73fdd3f09a","rootfs","2019-01-16 12:18:27","true","Merge pull request #130 from Madhu-1/fix-block

reject block volume creation in cephfs",17,12,0,0,"2018-01-08 15:47:21","373.1"
"ceph/ceph-csi","4cb7d2bbbd8fd97b716e94e644323b3797ead7ad","humblec","2020-10-14 15:33:25","false","rbd: remove unwanted condition check in flattenCloneImage

All the previous condition checks exit from the function and
when it reach to this block its obvious that error is non nil,
we dont need an extra check here.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",75,33,0,1,"2018-01-08 15:47:21","1006.49"
"ceph/ceph-csi","e65fbe9862f1d4aee7104482ced1a652d52ce597","humblec","2021-08-17 15:10:24","false","rebase: make use of v0.10.0 of csi-lib-utils

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",116,43,0,1,"2018-01-08 15:47:21","1314.72"
"ceph/ceph-csi","5c73f0e41bba455a9129eb143108699c48b89577","humblec","2020-10-19 13:26:57","false","rbd: correct the code comment for ErrFlattenInProgress

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",76,33,0,1,"2018-01-08 15:47:21","1011.4"
"ceph/ceph-csi","aadce54b2f2e50a139e2188dc6625df97241ef44","oguzkilcan","2020-01-21 08:22:43","false","Added PodSecurityPolicy support",108,24,0,0,"2018-01-08 15:47:21","743.19"
"ceph/ceph-csi","e14d649547db37468cdda163e9e2275d4388927c","Yuggupta27","2021-04-22 06:57:55","false","e2e: add cephfs test for sc, secret via helm

add cephfs test for validating storageclass and
secret deployment via helm.

Signed-off-by: Yug <yuggupta27@gmail.com>",87,39,0,0,"2018-01-08 15:47:21","1199.38"
"ceph/ceph-csi","e1fd12fb29dc54e4a67fdb0a4909a1b4cac933f2","Madhu-1","2020-06-16 07:38:37","false","cephfs: do chmod on stagingpath

instead of doing chmod on the targetpath always
do it once at the stagintpath.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",117,29,0,1,"2018-01-08 15:47:21","888.16"
"ceph/ceph-csi","07d26e640379b01eef604dab623884a3a93144bb","rootfs","2019-01-15 20:07:47","true","Merge pull request #125 from Madhu-1/update-toml

vendor cleanup",17,12,0,0,"2018-01-08 15:47:21","372.43"
"ceph/ceph-csi","832e0bb5915dcb5941ba870c910d69e6f4cb81d9","rootfs","2019-01-29 14:08:21","true","Merge pull request #152 from Madhu-1/gometlinter

Add gometalinter static check",20,13,0,0,"2018-01-08 15:47:21","386.18"
"ceph/ceph-csi","2672fad90a23ad900b459facdc2e88261af6704c","naveensrinivasan","2022-05-01 01:00:30","false","ci: Set permissions for GitHub actions

 Restrict the GitHub token permissions only to the required ones; this way,
 even if the attackers will succeed in compromising your workflow,
 they won’t be able to do much.

- Included permissions for the action.
https://github.com/ossf/scorecard/blob/main/docs/checks.md#token-permissions

https://docs.github.com/en/actions/using-jobs/assigning-permissions-to-jobs

Signed-off-by: naveen <172697+naveensrinivasan@users.noreply.github.com>
naveensrinivasan <172697+naveensrinivasan@users.noreply.github.com>",38,52,1,0,"2018-01-08 15:47:21","1574.38"
"ceph/ceph-csi","6f9b1ab04d943e9a15badf9e833c906aa14af360","iPraveenParihar","2023-10-16 08:14:44","false","cephfs: remove subvolumegroup creation

Signed-off-by: Praveen M <m.praveen@ibm.com>",21,69,1,0,"2018-01-08 15:47:21","2103.94"
"ceph/ceph-csi","697ed32778aa033b7936982c8451acd7cb47ace7","Madhu-1","2020-04-21 13:36:27","false","Add script to build and push multi arch images

with the help of qemu-user-static we can run
different architecute contains.

more info at https://github.com/multiarch/qemu-user-static

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",101,27,0,1,"2018-01-08 15:47:21","833.41"
"ceph/ceph-csi","992d257530ee9b3d70ad8bd183da26294069fd4c","Madhu-1","2022-01-25 09:03:37","false","cephfs: fix error logging in filesystem.go

fix error message logging in filesystem.go

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",37,49,1,1,"2018-01-08 15:47:21","1477.72"
"ceph/ceph-csi","0f80ec06644e01b1cd791d760bfedab5ddca586e","Madhu-1","2020-01-20 04:53:55","false","Return err from nodeserver

getVolumeNameByID function is already
returrning the status.Error return the err
as it is.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",108,24,0,1,"2018-01-08 15:47:21","742.05"
"ceph/ceph-csi","a128aa430bcaccfff0e717c54936c359a31cbd38","Madhu-1","2020-10-19 06:44:02","false","ci: update mergify rules for E2E on kubernetes 1.18.9

The latest Kubernetes patch release (v1.18.10) can not be deployed with
minikube. Selecting version 1.18.9 until the problems with minikube are
addressed.

https://github.com/ceph/ceph-csi/pull/1596 updated
the kubernetes version for E2E
Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",76,33,0,1,"2018-01-08 15:47:21","1011.12"
"ceph/ceph-csi","d39d2cffcc6c6a9325e1456098dbe363c2ad7d0b","Rakshith-R","2022-08-05 11:01:31","false","cleanup: use index instead of value while iterating

This commit cleans up for loop to use index to access
value instead of copying value into a new variable
while iterating.
```
internal/util/csiconfig.go:103:2: rangeValCopy: each \
iteration copies 136 bytes (consider pointers or indexing) \
(gocritic)
        for _, cluster := range config {
```

Signed-off-by: Rakshith R <rar@redhat.com>",38,55,1,1,"2018-01-08 15:47:21","1668.8"
"ceph/ceph-csi","e76bffe35341f94fc514581110502098dead6e19","nixpanic","2021-12-09 07:52:39","false","cleanup: import k8s.io/mount-utils instead of k8s.io/utils/mount

k8s.io/utils/mount has moved to k8s.io/mount-utils, and Ceph-CSI uses
that already in most locations. Only internal/util/util.go still imports
the old path.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",50,47,1,1,"2018-01-08 15:47:21","1426.42"
"ceph/ceph-csi","d1e12cb0e27194fb6c21b52d2598132b68300106","nixpanic","2020-04-21 09:23:22","false","add optional TARGET=.. parameter for 'make containerized-test'

Running the containerized-tests is relatively time consuming as it runs
all the tests. By adding a TARGET=.. option to the Makefile, it is now
possible to run a selected test, for example:

    make containerized-test TARGET=static-check

This reduces the time the tests take, so it is more friendly to the
developers while addressing problems.

When no TARGET=.. parameter is passed, the default tests are run.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",100,27,0,1,"2018-01-08 15:47:21","833.23"
"ceph/ceph-csi","1695c6965dbae56fd04eebbe3efefa9eb227cd64","sophalHong","2020-02-07 00:43:37","false","Add printing failed message when timeout

Signed-off-by: sophal <sophalHong@github.com>",106,25,0,0,"2018-01-08 15:47:21","759.87"
"ceph/ceph-csi","9ad4bb1de5eb08e58582eb42fd5eb5e879b5310b","irq0","2022-08-17 15:22:50","false","e2e: Add encrypted PVC with default settings test

Add test that enables encryption with default type. Check that we set
up block encryption.

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",41,55,1,0,"2018-01-08 15:47:21","1679.98"
"ceph/ceph-csi","be8d3b6047537a2b9f8ba3f9a3246de0268934e3","Yuggupta27","2020-07-20 08:09:37","false","ci: enable containerized test job in mergify

Since containerized-tests job is functioning
again, we can re-enable the job as a required
condition to merge PRs.

Signed-off-by: Yug <yuggupta27@gmail.com>",115,30,0,0,"2018-01-08 15:47:21","922.18"
"ceph/ceph-csi","8a1e6334035dcc3644bec2a29109d3477cad5d0f","nixpanic","2020-05-07 11:17:07","false","ci: remove unmaintained k8s versions

Version 1.18.x is currently out, and the k8s community does not maintain
versions 1.14 and 1.15 anymore. No need to test on versions that users
should not deploy.

Fixes: #1023
Signed-off-by: Niels de Vos <ndevos@redhat.com>",108,28,0,1,"2018-01-08 15:47:21","850.31"
"ceph/ceph-csi","3480cb2c25ee95f4560ee77e519203ccdc2e411f","nixpanic","2021-09-28 07:07:32","false","rebase: update minikube to v1.23.2

See-also: https://github.com/kubernetes/minikube/releases/tag/v1.23.2
Signed-off-by: Niels de Vos <ndevos@redhat.com>",61,45,0,1,"2018-01-08 15:47:21","1355.39"
"ceph/ceph-csi","5baed6190cd1048c72a5098c0d2fff96e969ff84","nixpanic","2020-10-21 11:20:52","false","cephfs: implement resizeVolume() with go-ceph

Reduce the number of calls to the `ceph fs` executable to improve
performance of CephFS volume resizing.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,33,0,1,"2018-01-08 15:47:21","1013.31"
"ceph/ceph-csi","1b52256a22d964d35b5d0fe26a80d1b2e7508006","Madhu-1","2022-04-06 14:44:25","false","ci: add mergify rule for 3.6 backport

added mergify rules to create the backport
PR for release-3.6 branch.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",44,51,1,1,"2018-01-08 15:47:21","1549.96"
"ceph/ceph-csi","6786d922460251cea2e469248e6fb37b537d4f8e","Madhu-1","2020-07-09 06:55:14","false","ci: remove kube 1.16 from Travis CI

As kube v1.18 is released we dont need to test
-2 version in our CI, removing the 1.16 testing
for the same reason.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",110,30,0,1,"2018-01-08 15:47:21","911.13"
"ceph/ceph-csi","034b1234781de9003ff9653b96d0206c54ac13f1","Madhu-1","2020-02-10 08:51:05","false","Remove mount cache for cephfs

PR #282 introduces the mount cache to
solve cephfs fuse mount issue when cephfs plugin pod
restarts .This is not working as intended. This PR removes
the code for maintainability.
Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",108,25,0,1,"2018-01-08 15:47:21","762.21"
"ceph/ceph-csi","07aa9dea5c2ebdb791c54179b451e54e9819c02e","Madhu-1","2022-10-27 14:51:27","false","rbd: update namespace name in rados object

If a PV is reattached to a new PVC in a different
namespace we need to update the namespace name
in the rados object.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,57,1,1,"2018-01-08 15:47:21","1749.96"
"ceph/ceph-csi","3fea4fa8271862886eae907d90b3fc812ef9915a","nixpanic","2020-05-14 13:28:14","false","util: remove unused context.Context from GetPoolName()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",113,28,0,1,"2018-01-08 15:47:21","856.4"
"ceph/ceph-csi","d362dffd629b89789d9f75191c0a1048b5ae6325","humblec","2020-05-13 06:46:20","false","doc: add v2.1.1 release to the release matrix

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",110,28,0,1,"2018-01-08 15:47:21","855.12"
"ceph/ceph-csi","ff91b7edbd91f65c2b369b496f04c22b910b22b5","Madhu-1","2021-12-20 15:18:35","false","rbd: get image details after creating clone

after creating the clone get the current
image details like size, creationTime,
imageFeatures etc from the ceph cluster.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",57,47,1,1,"2018-01-08 15:47:21","1437.73"
"ceph/ceph-csi","591ba3f580c099f4e74a7f2d39a23bf78083bbf0","Madhu-1","2021-06-18 04:12:48","false","rbd: set thick provision metadata on clone volume

the parent volume(CreateVolume) and the clone volume
(CreateSnapshot) are both indepedent and parent volume
can be deleted anytime. To check the thick provision
during Snapshot restore(CreateVolume from snapshot)
we need the thick provision metadata so for the same
reason setting the thick provision metadata on the
clone image we are creating at the CreateSnapshot time.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",115,41,0,1,"2018-01-08 15:47:21","1255.27"
"ceph/ceph-csi","628ae9e982e17cf630f79c470c07ae6e3e7ce8b8","Yuggupta27","2020-07-13 03:56:51","false","cleanup: use wrapped static errors instead of dynamic

In Go 1.13, the fmt.Errorf function supports a new %w verb.
When this verb is present, the error returned by fmt.Errorf
will have an Unwrap method returning the argument of %w,
which must be an error. In all other ways, %w is identical to %v.

Updates: #1227

Signed-off-by: Yug <yuggupta27@gmail.com>",114,30,0,0,"2018-01-08 15:47:21","915.01"
"ceph/ceph-csi","9a4533e5493668bd95cfd44d6aa0aad795885567","Madhu-1","2021-12-01 10:11:32","false","rbd: create 1MiB size dummy image

we added a workaround for rbd scheduling by creating
a dummy image in #2656. with the fix we are creating
a dummy image of the size of the first actual rbd
image which is sent in EnableVolumeReplication request
if the actual rbd image size is 1TiB we are creating
a dummy image of 1TiB which is not good. even though
its a thin provisioned rbd images this is causing
issue for the transfer of the snapshot during
the mirroring operation.

This commit recreates the rbd image with 1MiB size
which is the smaller supported size in rbd.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",52,47,0,1,"2018-01-08 15:47:21","1419.52"
"ceph/ceph-csi","72d1520f6d73ad7015d0baf55e4400ed44956fbb","Madhu-1","2019-03-27 06:06:20","false","update readme to deploy attacher as a sidecar continer in provisioner pod

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",45,15,0,1,"2018-01-08 15:47:21","443.85"
"ceph/ceph-csi","4657ac7f0049d3574c0f60f60e7d7172e8534997","humblec","2021-06-28 09:53:33","false","e2e: remove passing waitgroups for go routines

We are unwantedly passing around waitgroups which is not required.
This address the same inside e2e/utils.go and remove waitgroup arg

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",116,42,0,1,"2018-01-08 15:47:21","1265.5"
"ceph/ceph-csi","407478ab9ade56c40af847c503f290576d330a0b","mcronce","2018-11-26 18:23:56","false","Fresh `dep ensure`",16,10,0,0,"2018-01-08 15:47:21","318.11"
"ceph/ceph-csi","ec6703ed583143bb0d7c654e55c3a5fcb5955526","nixpanic","2021-07-23 15:23:43","false","rbd: rename encryption metadata keys to enable mirroring

RBD image metadata keys that start with '.rbd' are expected to be
internal to RBD itself and are not mirrored to remote sites. Renaming
the keys (dropping the '.' prefix) and using the new MigrateMetadata()
function now makes the keys available on remote sites too.

Closes: #2219
Signed-off-by: Niels de Vos <ndevos@redhat.com>",116,42,0,1,"2018-01-08 15:47:21","1290.73"
"ceph/ceph-csi","5c26fbb0d7b790af0cc573fd47ae4d3d9169d154","nixpanic","2021-03-15 09:50:09","false","util: use ClusterConnection.Copy() for re-using connections

Connections are reference counted, so just assigning the connection to
an other object for re-use is not correct. This can cause connections to
be garbage collected while something else is still using it.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",86,38,0,1,"2018-01-08 15:47:21","1162.5"
"ceph/ceph-csi","65a10fd553beef3f8da63fed807d4283df0d2c1c","nixpanic","2020-12-08 13:25:06","false","cleanup: standardize error format in NodeServer.NodeStageVolume()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,35,0,1,"2018-01-08 15:47:21","1061.4"
"ceph/ceph-csi","07e408408077f7fa0f63ac7f4125919715eca9c1","nixpanic","2022-02-04 07:40:43","false","build: remove container-id file before building

In case building a new container-image fails, the old image has already
been removed by the same make target. The container-id file that is used
to prevent unneeded rebuilds, causes build problems in case the
container-image in the container-id file does not exist (anymore).

By removing the container-id file before rebuilding the image, there
should not be any issues on subsequent (attempted fixed) builds of the
container-images.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",45,49,1,1,"2018-01-08 15:47:21","1487.66"
"ceph/ceph-csi","48407e2484dd69750b709c772149e15c095c5af9","rootfs","2019-01-17 13:57:18","false","add csi volume device mount path to csi plugin

Signed-off-by: Huamin Chen <hchen@redhat.com>",17,12,0,0,"2018-01-08 15:47:21","374.17"
"ceph/ceph-csi","40d0d5d29161aff15ace2c38e6221fce7e7ab2f0","nixpanic","2020-01-10 09:09:49","false","rbd: drop references to ImageFormat

librbd only supports ImageFormat 2. It is not expected that anyone has a
different version of the format in container environments.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",105,24,0,1,"2018-01-08 15:47:21","732.22"
"ceph/ceph-csi","ff728eaf0d3d5ab7caeb6769e3667fa00258fa76","nixpanic","2021-02-16 12:28:34","false","e2e: error out in case deploying Hashicorp Vault fails

Failures when deploying Hashicorp Vault are logged as informative. This
means that testing will continue, even if Vault will not be available.

Instead of logging the errors as INFO, use FAIL so that tests are not
run and the problems are identified early and obviously.

Updates: #1795
Signed-off-by: Niels de Vos <ndevos@redhat.com>",86,37,0,1,"2018-01-08 15:47:21","1133.61"
"ceph/ceph-csi","aeb5c75da7d35b56825f83f6b365a2f244492e86","nixpanic","2020-05-13 12:02:03","false","ci: install commitlint in the test container-image

The `commitlint` command can be used to verify the subject of commit
messages, so it is added to the $PATH.

See-also: https://commitlint.js.org
Signed-off-by: Niels de Vos <ndevos@redhat.com>",112,28,0,1,"2018-01-08 15:47:21","855.34"
"ceph/ceph-csi","b3f1499cd425017de61898edb1d71dac7297e7d3","Madhu-1","2020-06-24 07:09:11","false","rbd: remove unused snapshot function

we dont need to call the snapshot CLI functions
to get snapshot details. as these details are not
requried with new snapshot design.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",115,29,0,1,"2018-01-08 15:47:21","896.14"
"ceph/ceph-csi","14c008c41913b7f126695783af8c8e32f0386130","Madhu-1","2022-01-25 05:30:16","false","cleanup: use interface in filesystem.go

Currently, we are using methods and all the methods
makes a network call to fetch details from the ceph
clusters, its difficult to write test cases for
these functions, if we move to the interfaces
we can make use of mock to write unit testing
for the caller functions.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",36,49,1,1,"2018-01-08 15:47:21","1477.57"
"ceph/ceph-csi","7101a6dc8ed9cba1ee8cf6d472f5dc17c6336512","nixpanic","2020-10-27 07:13:30","false","cleanup: add logAndExit() for cephcsi:main() to call instead of panic

The main() function of the cephcsi executable calls klog.Fatalln() to
report certain errors. This causes the executable to panic which is not
helpful to users that only need the error message.

By introducing logAndExit(), there is no need to call klog.Fatalln()
anymore.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",75,33,0,1,"2018-01-08 15:47:21","1019.14"
"ceph/ceph-csi","44bf398c799536f5c40a929d8eea2beb6e2ffb09","nixpanic","2020-06-22 14:58:56","false","build: move GOARCH environment variable to targets that use it

This prevents some clutter while running 'make' commands on an
environment where 'go' is not installed. There is no requirement on 'go'
in the case containers are used for building and testing.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",116,29,0,1,"2018-01-08 15:47:21","894.47"
"ceph/ceph-csi","75de0b81ead39161fbde7c2bc26d528d2e0e9a4f","nixpanic","2021-03-04 09:54:44","false","build: vendor testify package for unit-tests

Signed-off-by: Niels de Vos <ndevos@redhat.com>",91,38,0,1,"2018-01-08 15:47:21","1152.51"
"ceph/ceph-csi","4937e59c4d3cb55de0b304bc9727f59d7fee005f","nixpanic","2021-02-16 15:56:42","false","rbd: add backwards compatible encryption in NodeStageVolume

When a volume was provisioned by an old Ceph-CSI provisioner, the
metadata of the RBD image will contain `requiresEncryption` to indicate
a passphrase needs to be created. New Ceph-CSI provisioners create the
passphrase in the CreateVolume request, and set `encryptionPrepared`
instead.

When a new node-plugin detects that `requiresEncryption` is set in the
RBD image metadata, it will fallback to the old behaviour.

In case `encryptionPrepared` is read from the RBD image metadata, the
passphrase is used to cryptsetup/format the image.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",86,37,0,1,"2018-01-08 15:47:21","1133.76"
"ceph/ceph-csi","85c84910d325056212e8f7b70752d48a786f689c","nixpanic","2021-10-15 14:08:37","false","e2e: add a monitor container to the vault Pod

The command `vault monitor` can be used to stream logging from the Vault
service. This is very helpful while debugging Vault configuration
failures.

By adding a 2nd container to the Vault deployment, it is now possible to
get the messages from the Vault service by running

    $ kubectl logs -c monitor <vault-pod-0123abcd>

This will be very useful when the e2e tests do not delete the deployment
after a failure and fetch the logs from all containers.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",50,45,0,1,"2018-01-08 15:47:21","1372.68"
"ceph/ceph-csi","57ce07f54eb74abb2ce99086037e8848c48ec22b","nixpanic","2020-12-08 14:08:43","false","cleanup: return error type in updateVolWithImageInfo()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,35,0,1,"2018-01-08 15:47:21","1061.43"
"ceph/ceph-csi","db6d37643454fc553d1dc3077db79bbf3ae4b84c","nixpanic","2020-11-18 15:53:39","false","deploy: add sys/mounts to Vault policy

Add ""sys/mounts"" so that VaultBackendKey does not need to be set. The
libopenstorage API detects the version for the key-value store in Vault
by reading ""sys/mounts"". Without permissions to read this endpoint, the
VaultBackendKey is required to be configured.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",81,34,0,1,"2018-01-08 15:47:21","1040.5"
"ceph/ceph-csi","cf6fdcb796471603cd87382842a652bcd81f98a9","humblec","2021-11-19 04:50:27","false","e2e: adjust migration e2e tests and introduce helper functions

This commit adjust existing migration e2e tests to a couple of tests
to cover the scenarios. The seperate filesystem and block tests have
been shrinked to single one and also introduced a couple of helper
functions to setup and teardown migraition specific secret,configmap
and sc. The static pv function has been renamed to a general name
while the tests were adjusted.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",56,46,0,1,"2018-01-08 15:47:21","1406.29"
"ceph/ceph-csi","074feddaf3c6e00abcf079dd66288be1ce3fa959","humblec","2020-08-03 17:48:24","false","e2e: add test cases for cephfs snapshot creation,deletion and restore

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","936.58"
"ceph/ceph-csi","02e9d0a1b28c3861a4314bfab129d4322ee04c9f","rollandf","2019-02-05 19:35:29","false","Fix examples in CSI-v1.0

Fixes issue #164",25,13,0,0,"2018-01-08 15:47:21","393.41"
"ceph/ceph-csi","aa5b53fcce1c57cdac95a657a8a1a2086b34acb4","nixpanic","2020-08-11 12:12:52","false","ci: use ceph-csi-bot account for merging PRs

Currently the ""@mergifyio rebase"" commands uses a random person from the
GitHub organization that owns the repository. This is rather confusing
and ugly. With this change, alls rebase/merge actions are done with the
ceph-csi-bot account that also posts the result of jobs in the CentOS CI.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",119,31,0,1,"2018-01-08 15:47:21","943.35"
"ceph/ceph-csi","eff4f4ba50c8b20f30cd4303ebe9f05a521d8866","nixpanic","2020-05-13 13:20:05","false","ci: add commitlint target to the Makefile

When passing `GIT_SINCE` as an argument, the commits from then on
(defaults to origin/master) are used. A CI job can pass the base branch
or ID so a range of patches gets checked.

To test the last four commits, one can run:

    $ make containerized-test TARGET=commitlint GIT_SINCE=HEAD~4

Signed-off-by: Niels de Vos <ndevos@redhat.com>",112,28,0,1,"2018-01-08 15:47:21","855.4"
"ceph/ceph-csi","7a0c233c27aabd96d51a44ab8957fa26c542cddc","Madhu-1","2019-01-28 13:59:16","false","Fix issues found in gometalinter

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",22,13,0,1,"2018-01-08 15:47:21","385.17"
"ceph/ceph-csi","f946efb7b7a9a20e52e2830e540e98a7a717d6b8","Madhu-1","2020-07-02 05:49:29","false","e2e: set maxsnapshotsonimage during helm install

as we need to test the maxsnapshotsonimage we
need to set the limit to minimal value which we
can test in CI as the default limit is 450,which
cannot be tested in CI.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",111,30,0,1,"2018-01-08 15:47:21","905.08"
"ceph/ceph-csi","06d5d8f23ab11ea23739409349f71075656b202b","nixpanic","2021-03-10 08:07:06","false","build: libcephfs-devel is not needed

go-ceph does not  use CephFS development headers, so there is no need to
install libcephfs-devel.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",94,38,0,1,"2018-01-08 15:47:21","1157.43"
"ceph/ceph-csi","165a837bca2fee33ffcb776c0c5124fcaff31e40","nixpanic","2021-02-15 07:26:35","false","rbd: move KMS initialization into rbdVol.initKMS()

Introduce initKMS() as a function of rbdVolume. KMS functionality does
not need to pollute general RBD image functions. Encryption functions
are now in internal/rbd.encryption.go, so move initKMS() there as well.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",84,37,0,1,"2018-01-08 15:47:21","1132.4"
"ceph/ceph-csi","96a8ea3e88c24e7835166f6e3c1183173fae9838","nixpanic","2021-05-26 08:33:14","false","cleanup: split repairExistingVolume() from CreateVolume()

Move the repairing of a volume/snapshot from CreateVolume to its own
function. This reduces the complexity of the code, and makes the
procedure easier to understand. Further enhancements to repairing an
exsiting volume can be done in the new function.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",97,41,0,1,"2018-01-08 15:47:21","1233.45"
"ceph/ceph-csi","ed30fa19d473933e1330c1e9e45aaf34835c3903","nixpanic","2020-05-29 12:20:15","false","build: use CURDIR instead of PWD

`make -C ${GOPATH/src/github.com/ceph/ceph-csi container...` commands
fail as the PWD variable gets substituted with the path where `make` is
called, not with the path of the Makefile that is passed with the -C
option.

The CURDIR variable is expended to the correct path, so `make -C ...`
works for all make targets now.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",111,29,0,1,"2018-01-08 15:47:21","871.36"
"ceph/ceph-csi","3364fe7b781a97fff8c74e72d973bd498e0af50c","nixpanic","2020-05-08 14:14:05","false","rbd: remove unneeded updateVolWithImageInfo()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",110,28,0,1,"2018-01-08 15:47:21","851.44"
"ceph/ceph-csi","c311bfcad338887cc1996869a9e3292c8a28c77e","rootfs","2018-09-18 14:28:55","false","update rbd doc",8,8,0,0,"2018-01-08 15:47:21","249.95"
"ceph/ceph-csi","a5f2635bc0cbdb7192b7c368812dcd43f955a68a","Madhu-1","2019-02-08 07:50:21","false","avoid logging secrets in request

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",25,13,0,1,"2018-01-08 15:47:21","395.92"
"ceph/ceph-csi","2c66dfc3e42382dab4f717c0fe9aeae10a79ad32","Madhu-1","2021-07-28 03:51:18","false","e2e: retry running kubectl on known errors

By using retryKubectl helper function,
a retry will be done, and the known error
messages will be skipped.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",118,43,0,1,"2018-01-08 15:47:21","1295.25"
"ceph/ceph-csi","dda983e6bb386b73fa0f12545631c4c6c9113448","Madhu-1","2019-01-15 18:39:21","false","use dep  ensure -vendor-only",17,12,0,1,"2018-01-08 15:47:21","372.37"
"ceph/ceph-csi","630798d95e5fb738027ba96744cf1403015b7116","Madhu-1","2021-08-26 04:37:58","false","ci: remove stale bot configuration

This commit removes the stale bot
configration as stale bot repo is not actively
maintained anymore.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",116,43,0,1,"2018-01-08 15:47:21","1323.29"
"ceph/ceph-csi","60c2afbccadf008ebcd1293f3c10f0d5596b0e62","nixpanic","2021-08-31 12:18:37","false","util: NewK8sClient() should not panic on non-Kubernetes clusters

When NewK8sClient() detects and error, it used to call FatalLogMsg()
which causes a panic. There are additional features that can be used on
Kubernetes clusters, but these are not a requirement for most
functionalities of the driver.

Instead of causing a panic, returning an error should suffice. This
allows using the driver on non-Kubernetes clusters again.

Fixes: #2452
Signed-off-by: Niels de Vos <ndevos@redhat.com>",107,44,0,1,"2018-01-08 15:47:21","1328.61"
"ceph/ceph-csi","efd9b3104324810208524434e52c720bb3686f7e","nixpanic","2020-06-17 09:13:47","false","cleanup: use util.MountOptionsAdd() in CephFS volumemounter

Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,29,0,1,"2018-01-08 15:47:21","889.23"
"ceph/ceph-csi","2ed11269b0171496a16e08afd231263f770526ca","rootfs","2019-01-07 18:57:05","true","Merge pull request #114 from plnordquist/rbd-chart-docs

Added docs for deploying rbd driver with Helm",16,12,0,0,"2018-01-08 15:47:21","360.13"
"ceph/ceph-csi","ed7d6e746cef0f7b627c13faf9523a244350474e","rootfs","2018-02-15 20:58:10","false","verify build

Signed-off-by: Huamin Chen <hchen@redhat.com>",1,1,0,0,"2018-01-08 15:47:21","37.22"
"ceph/ceph-csi","1695240f54769e7ee8a125dcebaf4c8b500c015d","humblec","2022-11-09 05:22:53","false","build: remove travis CI scripts for functest and helm

considering we have moved out of travis and replaced github
action, this commit remove the functional test and helmtest
scripts.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",35,58,1,1,"2018-01-08 15:47:21","1761.57"
"ceph/ceph-csi","9cb9020e2ececee06ec5e5854790e2872cbb64d4","humblec","2020-07-17 15:50:29","false","ci: update e2e ceph cluster version to 14.2.10

Rook version is currently 1.1.7 in our e2e deployment which brings 14.2.4 version
of ceph cluster. To support cephfs snapshot e2e, we need latest version of Ceph Cluster
in E2E. Rook 1.2.7 is good enough which on patching bring up ceph 14.2.10 cluster.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",116,30,0,1,"2018-01-08 15:47:21","919.5"
"ceph/ceph-csi","0d6db19252e9e73752bb32fda1f512b9e5723b95","Madhu-1","2022-01-25 05:58:12","false","deploy: disable startupProbe

As startup probe is failing on the ceph pods,
disabling startupProbe in ceph cluster CRD.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",36,49,1,1,"2018-01-08 15:47:21","1477.59"
"ceph/ceph-csi","b949d5f9c7cbb5c3835ac74c99239a7c60a203ef","Madhu-1","2020-07-16 06:03:06","false","build: Build and push multi architecture images to dockerhub

As quay.io doesnot support the multi architecture
images, We need to switch to dockerhub as it supports
multi-architecture images.

closes: #1003

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",116,30,0,1,"2018-01-08 15:47:21","918.09"
"ceph/ceph-csi","48d66d6cfdecbb97a5a73beea58206eb13d3c53d","Rakshith-R","2022-07-26 10:32:40","false","deploy: modify nfs daemonset to use cephcsi nfs nodeserver

This commit makes modification to nfs daemonset to use
nfs nodeserver. `nfs.NetNamespaceFilePath` example is
added.

Signed-off-by: Rakshith R <rar@redhat.com>",40,54,1,1,"2018-01-08 15:47:21","1658.78"
"ceph/ceph-csi","586a9cc8eeed2ca777f1a51b979852d39dd840b5","humblec","2022-09-01 04:14:25","false","rbd: change default FsGroupPolicy to ""File"" for RBD CSI driver

This commit change the default fsgroup policy for csi driver object
to ""File"" type which is the better/correct setting for the CSI volumes.
We have been using default value which is ""ReadWriteOnceWithFSType"".
with this change backward compatibility should be preserved.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",41,56,1,1,"2018-01-08 15:47:21","1694.52"
"ceph/ceph-csi","b7cd946b1ee5b4097a9d1726bb7baf50d6b59ca4","humblec","2021-06-23 05:35:30","false","e2e: use snapshot v1 clientset and apis in snapshot.go

snapshot.go currently make use of snapshot v1beta1 clientset and api,
with this commit it has been rolled into v1 clientset and api.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",117,41,0,1,"2018-01-08 15:47:21","1260.33"
"ceph/ceph-csi","dcbf71dd5d5e63d426425a58b7d4cbba6769172d","humblec","2020-06-11 08:11:39","false","cleanup: avoid double import of kubernetes library in e2e utils

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",115,29,0,1,"2018-01-08 15:47:21","883.18"
"ceph/ceph-csi","d02e50aa9b5af752ccdb53c79a1a14bf001af81c","ShyamsundarR","2019-04-22 21:35:39","false","Removed config maps and replaced with rados omaps

Existing config maps are now replaced with rados omaps that help
store information regarding the requested volume names and the rbd
image names backing the same.

Further to detect cluster, pool and which image a volume ID refers
to, changes to volume ID encoding has been done as per provided
design specification in the stateless ceph-csi proposal.

Additional changes and updates,
- Updated documentation
- Updated manifests
- Updated Helm chart
- Addressed a few csi-test failures

Signed-off-by: ShyamsundarR <srangana@redhat.com>",56,15,0,0,"2018-01-08 15:47:21","469.49"
"ceph/ceph-csi","c00c11f141c5a9e9c7335cb65bc40cd99e3af493","humblec","2019-06-04 06:28:34","true","Merge pull request #375 from Madhu-1/up_e2e

Add E2E test suite for cephfs",77,17,0,1,"2018-01-08 15:47:21","511.86"
"ceph/ceph-csi","802f22f0aea8d22efd9291cc04634893d56383e9","mustdiechik","2023-11-08 09:47:42","false","helm: add annotations secret manifest

To use mutating webhook to modify secrets.
For example banzaicloud vault webhook:
https://bank-vaults.dev/docs/mutating-webhook/annotations/

Signed-off-by: Ruslan Khizhnyak <mustdiechik@gmail.com>",4,70,1,0,"2018-01-08 15:47:21","2127"
"ceph/ceph-csi","d4fc23ece03ea9959958c139a65aff831c400664","Rakshith-R","2023-06-26 05:46:24","false","doc: add steps for upgrading from 3.8 to 3.9

This commit adds steps for upgrading from 3.8
to 3.9.

Signed-off-by: Rakshith R <rar@redhat.com>",32,66,1,1,"2018-01-08 15:47:21","1993.83"
"ceph/ceph-csi","f12cd9c986f3bb18c901394ab0c1e365f61b20ab","riya-singhal31","2023-04-20 08:04:31","false","ci: fix codespell failure

Signed-off-by: riya-singhal31 <rsinghal@redhat.com>",35,63,1,0,"2018-01-08 15:47:21","1927.93"
"ceph/ceph-csi","4a3550d1377b80927449b7d65e9530257d51de3d","riya-singhal31","2023-04-11 09:17:34","false","doc: configuring cephfs snapshots and clones

this commit updates the readme with the instructions on
how to configure snapshots and clones of cephfs pvc

Signed-off-by: riya-singhal31 <rsinghal@redhat.com>",34,63,1,0,"2018-01-08 15:47:21","1918.98"
"ceph/ceph-csi","525ff5d97fcc42961d6be090c2cc16db4a526d3e","humblec","2022-03-10 13:10:59","false","rbd: remove unimplemented responses for node operations

These RPCs( nodestage,unstage,volumestats) are
implemented RPCs for our drivers atm. This commit removes
the `unimplemented` responses from the common/default
server initialization routins.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",44,50,1,1,"2018-01-08 15:47:21","1522.89"
"ceph/ceph-csi","78697e4f7cb37b01f8d0a5387ca9b6bee1eb23ae","gman0","2022-02-02 12:20:37","false","doc: added docs for ceph-fuse mount corruption

Signed-off-by: Robert Vasek <robert.vasek@cern.ch>",42,49,1,0,"2018-01-08 15:47:21","1485.86"
"ceph/ceph-csi","78ec859dc6b4fe807fff5500619b2b57495762c3","Madhu-1","2022-03-10 12:38:57","false","cleanup: remove unwanted print

Removing unwanted print from the code

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",44,50,1,1,"2018-01-08 15:47:21","1522.87"
"ceph/ceph-csi","46c40fe5ad6d36942245f5140975f079a127e031","Madhu-1","2021-11-15 07:12:47","false","ci: skip shell check in vendor directory

skip shell check in vendor directories.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",56,46,0,1,"2018-01-08 15:47:21","1402.39"
"ceph/ceph-csi","0abd2e785c9627ae878e886ec87cb08aa8ff4061","Rakshith-R","2021-10-14 09:12:29","false","e2e: increase E2E_TIMEOUT to 120m

This commit increases E2E_TIMEOUT to 120m, to avoid
frequent test fails due to timeout.

Signed-off-by: Rakshith R <rar@redhat.com>",49,45,0,1,"2018-01-08 15:47:21","1371.48"
"ceph/ceph-csi","168526a906e8c042af8095455bbd9938d1d48265","Madhu-1","2020-11-19 09:19:59","false","e2e: use centos as image for normal user validation

Reduce the number of images that get pulled from Docker Hub. Use the
official CentOS container registry instead.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",82,34,0,1,"2018-01-08 15:47:21","1041.23"
"ceph/ceph-csi","0fe0962dc1b4dab7625c4a19ce8ce0ef9e68223d","nixpanic","2021-06-07 08:13:14","false","e2e: validate thick-provisioned PVC-PVC cloning

Add a case to create a new PVC with VolumeContentSource set to a
thick-provisioned PVC. This should result in a new thick-provisioned PVC
once the cloning is done.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",111,41,0,1,"2018-01-08 15:47:21","1245.43"
"ceph/ceph-csi","772d1dfa77e4fa68dad77019b6c9f22cbb8db044","nixpanic","2020-05-08 14:07:31","false","rebase: use go-ceph v0.3.0

v0.3.0 adds support for rbd.FeatureSet that can be used to parse the
features of an RBD image. This will be used in the followup commit that
adds rbdVolume.getImageInfo().

Signed-off-by: Niels de Vos <ndevos@redhat.com>",109,28,0,1,"2018-01-08 15:47:21","851.43"
"ceph/ceph-csi","19a4d12becb8d79795bb55eeb37a080c243ca123","nixpanic","2021-05-07 06:30:39","false","rebase: update minikube to v1.20.0

See-also: https://github.com/kubernetes/minikube/releases/tag/v1.20.0
Signed-off-by: Niels de Vos <ndevos@redhat.com>",95,40,0,1,"2018-01-08 15:47:21","1215.36"
"ceph/ceph-csi","81b17c5157519d24a8d1fb88bef5b41229de1828","nixpanic","2020-06-02 14:52:53","false","ci: pass target filename of /etc/resolv.conf in case it is a symlink

In some Linux distributions the /etc/resolv.conf file is a symlink. This
file gets included in the Kubernetes containers and will be used for
resolving hostnames. By including the symlink, it is possible that that
target file is not available in the container(s). This will cause
problems when resolving hostnames, and Kubernetes will not get deployed.

The default minikube VM provides /run/systemd/resolve/resolv.conf, with
/etc/resolv.conf being a symlink. Therefor, it is needed to pass the
`--extra-config=kubelet.resolv-conf=..` parameter to `kubeadm`.

In case minikube is started with `--vm-driver=none` and
/run/systemd/resolve/resolv.conf does not exist, the local
/etc/resolv.conf will be used for inclusion in the Kubelet container. If
this is a symlink, the final destination should get passed with
`--extra-config=kubelet.resolv-conf=..` so that a working hostname
resolution configuration is available in the container.

Updates: #1121
Signed-off-by: Niels de Vos <ndevos@redhat.com>",110,29,0,1,"2018-01-08 15:47:21","875.46"
"ceph/ceph-csi","8019e4d1bc42f37f48207c1f39695a2fa002d239","nixpanic","2020-12-08 14:01:05","false","rbd: return CSI status-error on resize failure

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,35,0,1,"2018-01-08 15:47:21","1061.43"
"ceph/ceph-csi","16e5de5e1d500292c92d3e719a128631fbf9e28a","nixpanic","2023-08-25 08:21:09","false","build: use lower version for dependencies if repositories are broken

Some packages have dependencies on other repositories. On occasion these
repositories seem to be out-of-sync. In that case, install updates with
an older version, instead of erroring out.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",21,67,1,1,"2018-01-08 15:47:21","2052.94"
"ceph/ceph-csi","e30364cb4d2cf97871b2d7c780aea0da39120c64","nixpanic","2022-04-08 11:08:32","false","e2e: introduce getClusterID() helper

There are many locations where the cluster-id (`ceph fsid`) is obtained
from the Rook Toolbox. Instead of duplicating the code everywhere, use a
new helper function getClusterID().

Signed-off-by: Niels de Vos <ndevos@redhat.com>",44,51,1,1,"2018-01-08 15:47:21","1551.81"
"ceph/ceph-csi","76e9b4b02ae0a8177916cf5ddeb3014d3db9eef1","Yuggupta27","2021-03-19 09:21:33","false","e2e: add function to create rbd pool

added a new function to create rbd pool
in e2e.

Co-authored-by: Madhu Rajanna <madhupr007@gmail.com>
Signed-off-by: Yug <yuggupta27@gmail.com>",86,38,0,0,"2018-01-08 15:47:21","1166.48"
"ceph/ceph-csi","2d050e3ff0efca5528a59e12864d54785eaa8c6f","Yuggupta27","2020-08-21 12:05:26","false","doc: correct the cli arguments matrix

The current matrix seems to be showing
the undesired values which is corrected
with this commit.

Signed-off-by: Yug <yuggupta27@gmail.com>",119,31,0,0,"2018-01-08 15:47:21","953.35"
"ceph/ceph-csi","a219b2f9d43d2a222d3d6da0dd0eac3582d0e824","humblec","2020-04-14 13:28:40","false","Update README for v2.1.0 release.

Signed-off-by: hchiramm <hchiramm@redhat.com>",104,27,0,1,"2018-01-08 15:47:21","826.4"
"ceph/ceph-csi","dac4e76ae1afa421cae997d5c9b268eea93ccba5","Rakshith-R","2021-09-30 04:41:29","false","e2e: add testcase for PVC restore from vaultKMS to vaultTenantSAKMS

Signed-off-by: Rakshith R <rar@redhat.com>",60,45,0,1,"2018-01-08 15:47:21","1357.29"
"ceph/ceph-csi","14389c7b4049e2d0999c434be00da87f1a9ec5ae","humblec","2021-11-22 06:48:18","false","e2e: reformat error message with consistent formatting

To make the error return consistent across e2e tests we have decided
to remove with error presence from the logs and this commit
does that for e2e/utils.go.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",55,46,0,1,"2018-01-08 15:47:21","1409.38"
"ceph/ceph-csi","a8f28a0199ff8cb081383099107212070b91ca65","humblec","2019-05-07 15:14:07","false","Update docs.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",68,16,0,1,"2018-01-08 15:47:21","485.23"
"ceph/ceph-csi","8f75a24cfd17d9f098cd18ccb12630d33523e370","Rakshith-R","2021-09-08 10:30:11","false","ci: use 0 as default NUM_DISKS in minikube.sh

This is done to prevent conflicts with current ci setup externally
attaching disks.

Signed-off-by: Rakshith R <rar@redhat.com>",66,44,0,1,"2018-01-08 15:47:21","1336.53"
"ceph/ceph-csi","b1ef842640c518ebc1ebf5c526b290abb01d653d","Madhu-1","2021-09-16 13:47:57","false","cleanup: move core functions to core pkg

as we are refractoring the cephfs code,
Moving all the core functions to a new folder
/pkg called core. This will make things easier
to implement. For now onwards all the core
functionalities will be added to the core
package.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",61,44,0,1,"2018-01-08 15:47:21","1343.67"
"ceph/ceph-csi","dfbdec4b6ab2667df2512140270b110115d954b2","Madhu-1","2019-07-25 09:01:10","false","add validation to check if stagingPath exists

It's CO responsibility to create the
stagingPath as per the CSI spec.

The CO SHALL ensure
// that the path is directory and that the process serving the
// request has `read` and `write` permission to that directory. The
// CO SHALL be responsible for creating the directory if it does not
// exist.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",77,18,0,1,"2018-01-08 15:47:21","561.97"
"ceph/ceph-csi","6eac2e366e61ae0d00e5542f4b6c1daf93eedc74","Madhu-1","2019-07-18 14:31:52","false","install dep on travis

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",70,18,0,1,"2018-01-08 15:47:21","555.2"
"ceph/ceph-csi","cfc88c991064b37e95e51fef2e4ee233b2f0415e","Madhu-1","2021-04-15 06:55:24","false","rbd: discard up+unknown state in ResyncVolume

incase if the image is promoted and demoted the
image state will be set to up+unknown if the image
on the remote cluster is still in demoted state.

when user changes the state from primary to secondary
and still the image is in demoted (secondary) state
in the remote cluster. the image state on both the cluster
will be on unknown state.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",87,39,0,1,"2018-01-08 15:47:21","1192.38"
"ceph/ceph-csi","e87c0ac275b847ecb5082c1ac7c7b897553f834a","Madhu-1","2021-12-21 14:23:26","false","e2e: add Copyright header of e2e files

added Copyright header for files inside
the e2e folder.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",53,47,1,1,"2018-01-08 15:47:21","1438.69"
"ceph/ceph-csi","c4c51e0e3900af335c71084f4a299beacad80369","rootfs","2018-02-06 20:55:42","true","Merge pull request #11 from sbezverk/readme

Starting README",1,1,0,0,"2018-01-08 15:47:21","29.21"
"ceph/ceph-csi","91662b54b6acfd3db56b4f62e2b1c58d7b8e57a7","Yuggupta27","2021-03-22 06:57:02","false","e2e: move yaml filepath declaration to global

declared yaml filepath in gobal for reusing.

Co-authored-by: Madhu Rajanna <madhupr007@gmail.com>
Signed-off-by: Yug <yuggupta27@gmail.com>",87,38,0,0,"2018-01-08 15:47:21","1169.38"
"ceph/ceph-csi","69836d7c028beb8257e51aff7da17faba2385958","humblec","2021-07-19 14:13:43","false","doc: lift snapshot creation/deletion to Beta

Since kubernetes 1.17 snapshot functionality is at Beta state
and external snapshotter 3.0.3. Since v4.0.0 of snapshotter controller
and kubernetes v1.20, the snapshot functionality has been lifted to GA.
Ceph CSI drivers have been supporting this feature for last few releases
and users are heavily using this feature since then.

We also have good amount of e2e test case which cover volume creation
from snapshot backend or iow, snapshot as a datasource. With that, this PR
proposes of lifting this feature support to Beta with v3.4.0 version.

Updates# https://github.com/ceph/ceph-csi/issues/2199

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",127,42,0,1,"2018-01-08 15:47:21","1286.68"
"ceph/ceph-csi","78211b694b6d29af98613f6d79a362952117ad30","humblec","2021-05-10 10:45:47","false","build: update client-go and other kube dependencies to 1.20.6

client-go 1.20.6 has a fix for below CVE: This patch address this
via updating client-go and other dependencies.

CVE-2019-11250 : The MITRE CVE dictionary describes this issue as:

The Kubernetes client-go library logs request headers at verbosity
levels of 7 or higher. This can disclose credentials to unauthorized
users via logs or command output. Kubernetes components (such as
kube-apiserver) prior to v1.16.0, which make use of basic or bearer
token authentication, and run at high verbosity levels, are affected.

Ref# https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-11250

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",92,40,0,1,"2018-01-08 15:47:21","1217.54"
"ceph/ceph-csi","f9530e961b5c8180200843aabf405f0264eb25a3","humblec","2022-11-12 07:06:42","false","build: update packages in api directory to the latest

this commit update the packages in API directory and also
update the mention of go version in the same.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",35,58,1,1,"2018-01-08 15:47:21","1764.64"
"ceph/ceph-csi","992d4b92bb4f4578eeab451e9aeb722b5d393cf3","humblec","2020-10-21 12:43:34","false","util: NewCredentials() dont have any callers

We have below exported function in credentials.go which is not
called from anywhere in the repo. Removing it for the same reason.

```
 // NewCredentials generates new credentials when id and key
 // are provided.

 func NewCredentials(id, key string) (*Credentials, error) {
...
```

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",74,33,0,1,"2018-01-08 15:47:21","1013.37"
"ceph/ceph-csi","763387c8e2f15abc14e86930093ab97e3f07b497","humblec","2021-08-18 04:03:49","false","rebase: update external-resizer to v1.3.0 release

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",116,43,0,1,"2018-01-08 15:47:21","1315.26"
"ceph/ceph-csi","333548b05cf4a772ad5f8dde7e1d0648cd4e77c0","humblec","2020-06-10 09:59:24","false","doc: Add v2.1.2 release details to release table

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",114,29,0,1,"2018-01-08 15:47:21","882.26"
"ceph/ceph-csi","c89c68e9eaf443f284dac35b8bf3edf452735066","nixpanic","2020-04-06 09:16:23","false","rbd: use 'rv' as name of the rbdVolume (golint)

golint has a pretty struct stylechek, it down not allow different
variable names for methods on an object:

    pkg/rbd/rbd_util.go:970:1: receiver name rbdVol should be consistent with previous receiver name rv for rbdVolume (golint)
    func (rbdVol *rbdVolume) ensureEncryptionMetadataSet(ctx context.Context) error {
    ^
    pkg/rbd/rbd_journal.go:166:26: ST1016: methods on the same type should have the same receiver name (seen 2x ""rbdVol"", 3x ""rv"") (stylecheck)
    func (rbdVol *rbdVolume) Exists(ctx context.Context) (bool, error) {
                             ^

Rename the 'rbdVol' variable to 'rv' to make it consistent.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",104,27,0,1,"2018-01-08 15:47:21","819.23"
"ceph/ceph-csi","ac4c83c96c03928836dc41aac882ce5cc2bc2130","humblec","2019-01-25 10:30:04","false","Vednor update for kube v1.13.2

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",22,13,0,1,"2018-01-08 15:47:21","382.03"
"ceph/ceph-csi","648f9ccf3113b20d37a78a5d55d465e7f825259e","nixpanic","2020-12-08 10:21:32","false","util: support vaultBackendPath and vaultTLSServerName options

Signed-off-by: Niels de Vos <ndevos@redhat.com>",76,35,0,1,"2018-01-08 15:47:21","1061.27"
"ceph/ceph-csi","e4e411248eb1ba1fce30be19fbcc1e1db5d7eeb1","Madhu-1","2019-01-28 09:59:14","false","Move ceph and rbd main files to cmd folder

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",22,13,0,1,"2018-01-08 15:47:21","385.01"
"ceph/ceph-csi","f60b097f5fa506cf85433ec85742a33ba21f693b","Rakshith-R","2021-10-01 08:47:31","false","e2e: add testcase for thick encrypted PVC restore

Signed-off-by: Rakshith R <rar@redhat.com>",59,45,0,1,"2018-01-08 15:47:21","1359.46"
"ceph/ceph-csi","7f993707ca9f575fabd78926806d3a6532d3e356","Madhu-1","2019-06-12 13:18:17","false","rbd supports ReadWriteMany for block mode

update example rbd PVC from ReadWriteMany
to ReadWriteOnce as rbd supports ReadWriteMany
only if pvc mode is block

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",76,17,0,1,"2018-01-08 15:47:21","519.15"
"ceph/ceph-csi","2bb0bbde7fb11903b8d1da1c91028d9bf2e2a0e6","humblec","2020-08-03 18:34:28","false","cephfs: change createBackingVolume to accomodate clone operations

adjust createBackingVolume() to create a subvolume from snapshot
or existing subvolume by taking restore or clone operation locks

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","936.62"
"ceph/ceph-csi","5bebb7f8f58c8bb01900119bf797cb1847498105","humblec","2019-05-27 09:31:47","false","Exit travis if script failed.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",77,17,0,1,"2018-01-08 15:47:21","503.99"
"ceph/ceph-csi","25e3a961c3fc7c6518802fe1516e358323746e98","pohly","2018-10-09 10:08:56","false","rbdplugin: idempotent DeleteVolume

When the initial DeleteVolume times out (as it does on slow clusters
due to the low 10 second limit), the external-provisioner calls it
again. The CSI standard requires the second call to succeed if the
volume has been deleted in the meantime. This didn't work because
DeleteVolume returned an error when failing to find the volume info
file:

  rbdplugin: E1008 08:05:35.631783       1 utils.go:100] GRPC error: rbd: open err /var/lib/kubelet/plugins/csi-rbdplugin/controller/csi-rbd-622a252c-cad0-11e8-9112-deadbeef0101.json/open /var/lib/kubelet/plugins/csi-rbdplugin/controller/csi-rbd-622a252c-cad0-11e8-9112-deadbeef0101.json: no such file or directory

The fix is to treat a missing volume info file as ""volume already
deleted"" and return success. To detect this, the original os error
must be wrapped, otherwise the caller of loadVolInfo cannot determine
the root cause.

Note that further work may be needed to make the driver really
resilient, for example there are probably concurrency issues.
But for now this fixes: #82",9,9,0,0,"2018-01-08 15:47:21","270.76"
"ceph/ceph-csi","f83a065c8ad7a0bbaebf63bac133476b00ec43b7","nixpanic","2020-06-22 10:19:37","false","build: move GOLANG_VERSION to build.env

Signed-off-by: Niels de Vos <ndevos@redhat.com>",116,29,0,1,"2018-01-08 15:47:21","894.27"
"ceph/ceph-csi","1c1683ba2057372418781fa60edeea08cc230d20","nixpanic","2021-03-22 15:34:40","false","util: add AmazonMetadata KMS provider

The new Amazon Metadata KMS provider uses a CMK stored in AWS KMS to
encrypt/decrypt the DEK which is stored in the volume metadata.

Updates: #1921
Signed-off-by: Niels de Vos <ndevos@redhat.com>",87,38,0,1,"2018-01-08 15:47:21","1169.74"
"ceph/ceph-csi","22c0baa4b09e60f5964cb2a1f1cc928b89c43409","nixpanic","2020-04-20 09:46:01","false","tests: fail when ""make mod-check"" detects a modified go.mod file

`go mod verify` does not fail when all moduled under vendor/ are
updated. However it does update `go.mod` in case it does not reflect the
downloaded versions.

By adding this additional verification in `make mod-check`, future
updates to vendor/ will require a correct go.mod as well.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",101,27,0,1,"2018-01-08 15:47:21","832.25"
"ceph/ceph-csi","6e24b10364355916751e0f8376c1deca527ae575","nixpanic","2020-06-02 08:02:02","false","util: implement RemoveObject() with go-ceph

Signed-off-by: Niels de Vos <ndevos@redhat.com>",111,29,0,1,"2018-01-08 15:47:21","875.18"
"ceph/ceph-csi","2a8eb959667d598da7cdd3bccd15cb64107e83f4","Madhu-1","2021-09-22 06:31:04","false","ci: disable fsGroupChangePolicy change test for cephfs

disabling fsGroupChangePolicy test suite for
cephfs.

updates: #2017

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",63,44,0,1,"2018-01-08 15:47:21","1349.36"
"ceph/ceph-csi","fc442221e4ff52d1f4f840e50bf277abf3c194be","Madhu-1","2021-06-17 06:11:29","false","rbd: make isThickProvisioned method of rbdImage

isThickProvisioned can be used for both snapshot
and clone validation if isThickProvisioned is method
of common rbdImage structure.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",110,41,0,1,"2018-01-08 15:47:21","1254.35"
"ceph/ceph-csi","e2fa84357a661c231c8674de4b9f982a252caa6e","Madhu-1","2021-04-06 15:38:37","false","rbd: take lock when reconciling the PV

there can be a change we can reconcile same
PV parallelly we can endup in generating and
deleting multiple omap keys. to be on safer
side taking lock to process one volumeHandle
at a time.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",89,39,0,1,"2018-01-08 15:47:21","1184.74"
"ceph/ceph-csi","7fcbdfb945966d4c5a51c9d5807535b83232f3c2","Madhu-1","2019-01-25 08:40:32","false","Fix template to add userID
Fix Node server

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",22,13,0,1,"2018-01-08 15:47:21","381.95"
"ceph/ceph-csi","8fc9146056b9c0194e6f8d5c13e3faf8b782727a","Madhu-1","2020-07-12 04:36:17","false","rbd: flatten temp cloned images

If the snapshots on the parent image exceeds
maxSnapshotsOnImage count, we need to flatten
all the temporary cloned images to over come the
krbd issue of maximum number of snapshots on
an image.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",114,30,0,1,"2018-01-08 15:47:21","914.03"
"ceph/ceph-csi","d31427d91a0c6f48eb8969ba12c715d1c9f4743c","Madhu-1","2020-09-09 07:33:11","false","doc: add v3.1.0 release details to doc

added v3.1.0 release details to readme doc.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",121,32,0,1,"2018-01-08 15:47:21","971.16"
"ceph/ceph-csi","1f3b32085cf652faa65d57e3e66648899f05e63a","Madhu-1","2019-02-07 09:56:39","false","Add static check tools

Added md check to check .md style
Add yamllint to check yaml style
Moved gometalinter to scripts folder

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",26,13,0,1,"2018-01-08 15:47:21","395.01"
"ceph/ceph-csi","0d64d06196cd7c9a1c12c4babba7c70f4105410b","rootfs","2019-02-04 14:39:30","true","Merge pull request #162 from Madhu-1/fix-CI

Fix CI failure for gometalinter",22,13,0,0,"2018-01-08 15:47:21","392.2"
"ceph/ceph-csi","7c8e66e4278a6de1beba933c645abd8b2b060435","humblec","2019-12-13 10:29:33","false","Add resize check for XFS formatted FS
Lock out parellel requests against same volumeID
Remove pod after resize and validation in E2E

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",101,23,0,1,"2018-01-08 15:47:21","700.03"
"ceph/ceph-csi","822cab8ed09c63eb6243994607bdd23cf60029ae","humblec","2019-05-07 14:49:45","false","Make deployment artifacts with a consistent name pattern.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",68,16,0,1,"2018-01-08 15:47:21","485.21"
"ceph/ceph-csi","3352d4aabd13067b601b675746dd2395ba00c603","Rakshith-R","2021-06-21 07:01:22","false","rbd: add user secret based metadata encryption

This commit adds capability to `metadata` encryption
to be able to fetch `encryptionPassphrase` from user
specified secret name and namespace(if not specified,
will default to namespace where PVC was created).

This behavior is followed if `secretName` key is found
in the encryption configuration else defaults to fetching
`encryptionPassphrase` from storageclass secrets.

Closes: 2107

Signed-off-by: Rakshith R <rar@redhat.com>",115,41,0,1,"2018-01-08 15:47:21","1258.38"
"ceph/ceph-csi","0c33a33d5c231f8ae0e1241f62bde41f21953f02","Rakshith-R","2022-08-16 09:47:05","false","rbd: add kmip encryption type

The Key Management Interoperability Protocol (KMIP)
is an extensible communication protocol
that defines message formats for the manipulation
of cryptographic keys on a key management server.
Ceph-CSI can now be configured to connect to
various KMS using KMIP for encrypting RBD volumes.

https://en.wikipedia.org/wiki/Key_Management_Interoperability_Protocol

Signed-off-by: Rakshith R <rar@redhat.com>",41,55,1,1,"2018-01-08 15:47:21","1678.75"
"ceph/ceph-csi","30af703a2fe7f3f2aa0bdca50bfa5054e0982d09","Madhu-1","2020-11-17 07:38:54","false","rbd: add controller to main

initialize and start the rbd controller when
we the driver type is controller.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",77,34,0,1,"2018-01-08 15:47:21","1039.16"
"ceph/ceph-csi","08144df2a83140818ae238b8fe3122c4304f0141","nixpanic","2020-05-14 11:23:55","false","util: remove unused context.Context parameter from GetPoolID()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",112,28,0,1,"2018-01-08 15:47:21","856.32"
"ceph/ceph-csi","ead02ea8e6624595f94aa1e92d1956475de80c57","nixpanic","2020-05-13 13:32:29","false","ci: add .commitlintrc.yml for forcing commitlint CI checks

The rules are documented at https://commitlint.js.org/#/reference-rules
and can easily be added to the configuration.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",112,28,0,1,"2018-01-08 15:47:21","855.41"
"ceph/ceph-csi","45d64ab7d05b544b81a51e72a5d8a5675cfaa1e1","nixpanic","2020-11-04 14:45:06","false","e2e: do not use Failf() to abort tests in a go-routine (rbd)

There are several go-routines where Failf() is called, which will cause
a Golang panic inside the Ginko test framework. Instead of aborting the
go-routine, capture the error and check for failures once all
go-routines have finished.

The CephFS tests have been updated already, this changs only affects the
RBD tests.

Updates: #1359
Signed-off-by: Niels de Vos <ndevos@redhat.com>",80,34,0,1,"2018-01-08 15:47:21","1027.46"
"ceph/ceph-csi","5e63743243ca5cd990d773a089d48dd513f388c5","nixpanic","2021-03-02 17:48:05","false","util: add SecretsMetadataKMS

This new KMS is based on the (default) SecretsKMS, but instead of using
the passphrase for all volumes, the passphrase is used to
encrypt/decrypt a Data-Encryption-Key that is stored in the metadata of
the volume.

CC: Patrick Uiterwijk <puiterwijk@redhat.com> - for encryption guidance
Signed-off-by: Niels de Vos <ndevos@redhat.com>",92,38,0,1,"2018-01-08 15:47:21","1150.83"
"ceph/ceph-csi","9732cf16a1e5921366343ce22492108bab23502d","nixpanic","2020-10-21 11:32:46","false","cephfs: drop unused Credentials from resizeVolume()

When using go-ceph and the volumeOptions.Connect() call, the credentials
are not needed once the connection is established.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,33,0,1,"2018-01-08 15:47:21","1013.32"
"ceph/ceph-csi","c9b4ee42e0c7a34d578260cf662e4ae70f2971c9","nixpanic","2020-01-16 15:33:54","false","util: use go-ceph instead of ""rados"" command for GetPoolID()

GetPoolID() did not return ErrPoolNotFound in case the pool could not be
found. This has been addressed as well, so that looking for an existing
pool behaves the same for checking by Name or ID.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",107,24,0,1,"2018-01-08 15:47:21","738.49"
"ceph/ceph-csi","5ea99fdd5b2ce43fd70fca3e3cf64657b74492c6","nixpanic","2021-10-01 12:08:56","false","build: add yamlgen to build deployment files

This initial version of yamlgen generates deploy/scc.yaml based on the
deployment artifact that is provided by the new api/deploy/ocp package.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",59,45,0,1,"2018-01-08 15:47:21","1359.6"
"ceph/ceph-csi","eddcf6b6d46340a5bd340696e8d2f85a618a7da3","Yuggupta27","2020-12-16 11:25:48","false","helm: Add storage class template to ceph-csi-cephfs

Deploy cephfs storage class when using helm chart.

Signed-off-by: Yug <yuggupta27@gmail.com>",76,35,0,0,"2018-01-08 15:47:21","1068.32"
"ceph/ceph-csi","31648c8feb82a0770b0979e1ddc4f41406678bbd","nixpanic","2019-07-26 12:36:43","false","provisioners: add reconfiguring of PID limit

The container runtime CRI-O limits the number of PIDs to 1024 by
default. When many PVCs are requested at the same time, it is possible
for the provisioner to start too many threads (or go routines) and
executing 'rbd' commands can start to fail. In case a go routine can not
get started, the process panics.

The PID limit can be changed by passing an argument to kubelet, but this
will affect all pids running on a host. Changing the parameters to
kubelet is also not a very elegant solution.

Instead, the provisioner pod can change the configuration itself. The
pod is running in privileged mode and can write to /sys/fs/cgroup where
the limit is configured.

With this change, the limit is configured to 'max', just as if there is
no limit at all. The logs of the csi-rbdplugin in the provisioner pod
will reflect the change it makes when starting the service:

    $ oc -n rook-ceph logs -c csi-rbdplugin csi-rbdplugin-provisioner-0
    ..
    I0726 13:59:19.737678       1 cephcsi.go:127] Initial PID limit is set to 1024
    I0726 13:59:19.737746       1 cephcsi.go:136] Reconfigured PID limit to -1 (max)
    ..

It is possible to pass a different limit on the commandline of the
cephcsi executable. The following flag has been added:

    --pidlimit=<int>       the PID limit to configure through cgroups

This accepts special values -1 (max) and 0 (default, do not
reconfigure). Other integers will be the limit that gets configured in
cgroups.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",76,19,0,1,"2018-01-08 15:47:21","563.12"
"ceph/ceph-csi","675ee93e46fcb6d8ed37b0d89ccf3a72a352d1ef","gman0","2018-06-13 14:23:13","false","cephfs: DeleteVolume() calls are allowed only for volumes with provisionVolume=true parameter",4,5,0,0,"2018-01-08 15:47:21","154.94"
"ceph/ceph-csi","a2c077e0d506611e0dbe4b11477dd4ab14922727","nixpanic","2020-10-14 09:25:49","false","e2e: use k8sVersionGreaterEquals() for cephfs upgrade tests

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,33,0,1,"2018-01-08 15:47:21","1006.24"
"ceph/ceph-csi","0d9cb96db1c352e04a029d1ebb4a27eb0cf35a2e","nixpanic","2021-02-18 10:37:22","false","e2e: log status of PVC when Status.Phase is empty

When deleting a PVC fails, the following messages are repeated until a
timeout is hit:

    cephfs-80811 in state &PersistentVolumeClaimStatus{Phase:,AccessModes:[],Capacity:ResourceList{},Conditions:[]PersistentVolumeClaimCondition{},} to be deleted (600 seconds elapsed)

Because the Phase is not set, the PVC seems to be in a strange state. In
case this happens, log all details from the PVC so that we can identify
additional conditions to check for completed deletion.

Updates: #1874
Signed-off-by: Niels de Vos <ndevos@redhat.com>",88,37,0,1,"2018-01-08 15:47:21","1135.53"
"ceph/ceph-csi","4df939793ba322482706d63bb2c2d3e3461c8f61","humblec","2019-06-10 07:32:07","true","Merge pull request #372 from Madhu-1/fix-err

Fix error string as per golang standard",79,17,0,1,"2018-01-08 15:47:21","516.91"
"ceph/ceph-csi","e829308249ce27a650aa3ae5d3af06ece1085000","humblec","2021-06-25 11:39:42","false","internal: reformat long lines in internal/rbd package to 120 chars

We have many declarations and invocations..etc with long lines which are
very difficult to follow while doing code reading. This address the issues
in 'internal/rbd/*server.go' and 'internal/rbd/driver.go' files to restrict
the line length to 120 chars.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",118,41,0,1,"2018-01-08 15:47:21","1262.58"
"ceph/ceph-csi","ea088d40beba000ba4d601298e96c526c89283fa","Yuggupta27","2021-08-03 11:11:51","false","helm: update rbd provisioner updateStrategy

Update ceph-csi-rbd.provisioner updatestrategy
to allow maxUnavailable pods at a time to be 50%

Signed-off-by: Yug Gupta <yuggupta27@gmail.com>",120,43,0,0,"2018-01-08 15:47:21","1301.56"
"ceph/ceph-csi","8f758450d8b78f1c3bf9550b5766b302390f83a8","Madhu-1","2020-07-06 05:28:58","false","rbd: add RHEL 8.2 kernel to the list

as RHEL 8.2 supports the deep-flatten
feature, added it to the list to map
the rbd images on the node without flattening.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",112,30,0,1,"2018-01-08 15:47:21","909.07"
"ceph/ceph-csi","143003bcfdacd4b4ef32dd90b43b2a4d7055c2db","gman0","2019-02-26 10:06:25","false","cephfs: added locks for {Create,Delete}Volume, NodeStageVolume",31,14,0,0,"2018-01-08 15:47:21","413.01"
"ceph/ceph-csi","62f271056ad0e302f365746e3e03d7eaca95de87","gman0","2018-04-13 12:28:59","false","added cephfs/volumecache - stores volume info in json files",2,3,0,0,"2018-01-08 15:47:21","94.86"
"ceph/ceph-csi","b37133728776cca1cd6cb5e538635dfdee5fafe3","nixpanic","2023-05-15 14:11:28","false","ci: use modified gha-mergify-merge-queue-labels-copier Action

The original Mergifyio/gha-mergify-merge-queue-labels-copier@main
contains `startsWith()` that has the arguments reversed. This prevents
the action from working as intended.

See-also: https://docs.github.com/en/actions/learn-github-actions/expressions
Signed-off-by: Niels de Vos <ndevos@ibm.com>",29,64,1,1,"2018-01-08 15:47:21","1953.18"
"ceph/ceph-csi","53fa00dee8d693c4e4f271fb20805a7d89ae04da","humblec","2020-08-03 16:50:21","false","deploy: update external provisioner version to v1.6.0 from v1.4.0

update helm chart and deploy yaml for version upgrade

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","936.54"
"ceph/ceph-csi","dcdee86c4485a45e882f872ea10d37ddda9d3a68","humblec","2019-06-02 09:49:24","false","Update minikube to 1.14 and also update container images to latest

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",76,17,0,1,"2018-01-08 15:47:21","510"
"ceph/ceph-csi","1efdf14ac544d9e3db8eee6bbc135f474038d141","humblec","2019-10-07 05:10:39","false","At present, the request timeout of sidecars are at the 60s and this is a request to increase
this time out value to 150s or higher. The higher timeout value can help to reduce the
load of our backend ceph cluster and also can avoid throttling issues at sidecars to an extent.

Fix# #602

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",87,21,0,1,"2018-01-08 15:47:21","634.81"
"ceph/ceph-csi","36ee8b2240e6d5413c17aabe5886a237ff81e18a","humblec","2020-10-09 05:44:09","false","rbd: make sure csi rbd pv encryption  defaulting to luks2 version

Fixes: #https://github.com/ceph/ceph-csi/issues/1564

As per release notes this new version is compatible with previous
version of LUKS.
https://www.saout.de/pipermail/dm-crypt/2017-December/005771.html

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",123,33,0,1,"2018-01-08 15:47:21","1001.08"
"ceph/ceph-csi","88911eb4e965d5c129a3ed0d2c64b1e0abb163b9","humblec","2021-11-19 04:40:12","false","rbd: add migration secret support to controllerserver functions

This commit adds the migration secret request validation to expand,
create controller functions.

Ref # https://github.com/ceph/ceph-csi/issues/2509

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",56,46,0,1,"2018-01-08 15:47:21","1406.29"
"ceph/ceph-csi","c584fa20da9f024ccde6f40bc48a5fa46d13d13d","humblec","2021-10-08 08:28:04","false","rbd: use clusterID from volumeContext at nodestage

previously we were retriving clusterID using the monitors field
in the volume context at node stage code path. however it is possible to
retrieve or use clusterID directly from the volume context. This
commit also remove the getClusterIDFromMigrationVolume() function
which was used previously and its tests

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",54,45,0,1,"2018-01-08 15:47:21","1366.44"
"ceph/ceph-csi","924a5ab9498e3e8a87ead0785bc9058e6af7f795","Madhu-1","2021-06-10 10:49:54","false","build: git config before commit

currently git commit of the helm charts to
csi-chart repo is failing with below error
```
Author identity unknown

*** Please tell me who you are.

Run

git config --global user.email ""you@example.com""
git config --global user.name ""Your Name""

to set your account's default identity.
Omit --global to set the identity only in this repository.
```
this commit add git config for bot user.

Note:- used ceph.io in github secrets for the bot user
email and its not a valid email id and am also
looking for suggestion if anyone as.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",108,41,0,1,"2018-01-08 15:47:21","1247.54"
"ceph/ceph-csi","dd0884310f07c06d04c23d72ee386507f2be208f","Madhu-1","2021-07-07 05:58:40","false","rbd: set image metadata in isThickProvisioned

setting metadata in isThickProvisioned method
helps us to avoid checking thick metakey and
deprecated metakey for both thick and thin
provisioned images and also this will easily
help us to migrated the deprecated key to new key.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",124,42,0,1,"2018-01-08 15:47:21","1275.34"
"ceph/ceph-csi","b89f7fa1d648abe6753e18eacebbb374b369700b","nixpanic","2020-05-04 08:28:40","false","build: add check for functional environment

Updates: #1000
Reported-by: Madhu Rajanna <madhupr007@gmail.com>
Signed-off-by: Niels de Vos <ndevos@redhat.com>",108,28,0,1,"2018-01-08 15:47:21","847.2"
"ceph/ceph-csi","e296e129105382bfec7b76fa40434df9de45f14f","bi-shun","2018-04-24 19:16:55","false","Fix README.md",4,3,0,0,"2018-01-08 15:47:21","106.15"
"ceph/ceph-csi","cb02a9beb9d30b479323f3e7ff21def5d7249042","irq0","2022-03-11 18:51:18","false","kms: Add GetSecret() to metadata KMS

Add GetSecret() to allow direct access to passphrases without KDF and
wrapping by a DEKStore.

This will be used by fscrypt, which has its own KDF and wrapping. It
will allow users to take a k8s secret, for example, and use that
directly as a password in fscrypt.

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",44,50,1,0,"2018-01-08 15:47:21","1524.13"
"ceph/ceph-csi","fe4821435e593dac0b402cdd6039a724b7131120","irq0","2022-02-11 15:30:23","false","util: Make encryption passphrase size a parameter

fscrypt support requires keys longer than 20 bytes. As a preparation,
make the new passphrase length configurable, but default to 20 bytes.

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",40,49,1,0,"2018-01-08 15:47:21","1493.99"
"ceph/ceph-csi","0631c150259a5ab98e0ffcd0f0b5afc5c3b71a42","riya-singhal31","2023-11-06 06:24:47","false","cephfs: update fetchIP to support ipv6 addresses

Signed-off-by: Riya Singhal <rsinghal@redhat.com>",5,70,1,0,"2018-01-08 15:47:21","2124.86"
"ceph/ceph-csi","7b24313bd6a7d79f5386738c1d016666d3ddb0ac","sbezverk","2018-01-09 18:57:14","false","vendor files",0,0,0,0,"2018-01-08 15:47:21","1.13"
"ceph/ceph-csi","b213b3b626f900939a90fd21aeee1ec5cdcae232","hyperbolic2346","2019-05-01 21:08:08","false","Nitpick spelling

chats -> charts",57,16,0,0,"2018-01-08 15:47:21","479.47"
"ceph/ceph-csi","b0f3b272096c2ff795bd57b3b8e00f92f4689200","nixpanic","2020-12-03 10:36:22","false","ci: set imagePullPolicy for Vault to IfNotPresent

Deploying Vault still fails on occasion. It seems that the
imagePullPolicy has not been configured for the container yet.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",79,35,0,1,"2018-01-08 15:47:21","1056.28"
"ceph/ceph-csi","bf0222720713f771b3dbe51d16dc73271677fe79","nixpanic","2020-08-07 07:41:57","false","util: use local ErrorLog() for OperationLock.release() instead of klog

Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","940.16"
"ceph/ceph-csi","0a173a8a9ee1313870014ab9fd63faa7f66514b7","nixpanic","2022-07-19 15:09:37","false","nfs: make DeleteVolume (more) idempotent

Signed-off-by: Niels de Vos <ndevos@redhat.com>",40,54,1,1,"2018-01-08 15:47:21","1651.97"
"ceph/ceph-csi","abfe3ed9cb29c99fb1913032724a51f048778956","nixpanic","2021-03-11 08:42:02","false","e2e: rework thick-provisioning test case

The stripe-size is the most efficient size to write to RBD images.
However, not all images are a multiple of stripe-size large. That means
thick-provisioning would not allocate the full image, and the process
might even fail.

This adds a 50 MB PVC to test the process, 100 MB is coincidentally a
multiple of the (default 4 MB) stripe-size, 50 MB is not.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",95,38,0,1,"2018-01-08 15:47:21","1158.45"
"ceph/ceph-csi","f889dc20bd25d7ee298c70a2c89e57d2a897f586","nixpanic","2020-05-11 08:48:52","false","cleanup: use switch/case for genVolFromVolID() error checking

By using switch/case it is easier to follow the error checking of the
genVolFromVolID() function. In case a new error is added as a return of
the function, it will be simpler to add checking for it.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",109,28,0,1,"2018-01-08 15:47:21","853.21"
"ceph/ceph-csi","17fea0459dbac2564f9610ab1d7d8a239cbbd721","nixpanic","2022-04-12 15:14:35","false","e2e: add `-nfs-driver=...` option to select provisioner

When testing NFS-provisioning on a cluster that has an NFS-provisioner
and node-plugins deployed with a different driver-name, it is very
useful to have a commandline option to change the name of the
provisioner that is placed in the StorageClass.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",44,51,1,1,"2018-01-08 15:47:21","1554.98"
"ceph/ceph-csi","d753eaa0161cc43748edda4663fe424ab716a16a","nixpanic","2023-11-07 16:53:19","false","build: make sure `nfs-utils` is installed

Ceph is minimizing their container-images, which can cause the
`nfs-utils` package to be dropped. As Ceph-CSI supports mounting NFS, it
needs the `/sbin/mount.nfs` executable, so install the package (or a
no-op if it is installed already).

See-also: https://rook-io.slack.com/archives/C46Q5UC05/p1699188662893109
Signed-off-by: Niels de Vos <ndevos@ibm.com>",4,70,1,1,"2018-01-08 15:47:21","2126.3"
"ceph/ceph-csi","5565a902ac86d73c3da6af058fece848732f05e6","nixpanic","2020-11-25 11:45:15","false","rebase: split vaultConnection from VaultKMS

In order to re-use the configuration of Vault, split a new
vaultConnection type from the VaultKMS type.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",82,34,0,1,"2018-01-08 15:47:21","1047.33"
"ceph/ceph-csi","701b5d7ecb75fe2da0d07fdf4be04496d46f99b8","nixpanic","2022-04-19 09:25:54","false","e2e: Add early return in Context() for disabled tests

Some parts of the Context() seem to get executed, even when BeforeEach()
did a Skip() for the test. By adding a return inside the Context(), the
tests should not get executed at all.

This was noticed in a failed test, where upgrade was running, eventhough
the job was executed as a nornal non-upgrade one.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",41,51,1,1,"2018-01-08 15:47:21","1561.74"
"ceph/ceph-csi","239f295dd16ad845f9e36b749c195c285b87676b","rootfs","2018-09-24 12:58:09","true","Merge pull request #79 from rootfs/rbd-nbd

allow monitors be embedded in credential secret",7,8,0,0,"2018-01-08 15:47:21","255.88"
"ceph/ceph-csi","71c4ae542c732bf821e9383ad68038ce00249cd7","humblec","2022-11-11 10:40:24","false","rebase: remove  protobuf dependency locking

this commit remove the protobuf dependency locking in the module
description.

Also, ptypes.TimestampProto is deprecated and this commit
make use of the timestamppb.New() for the construction.

ParseTime() function has been removed and callers adjusted to the
same.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",35,58,1,1,"2018-01-08 15:47:21","1763.79"
"ceph/ceph-csi","518ccf42b34e4351084d9f18fbe72f7b36fa5d7f","Madhu-1","2020-12-08 10:49:39","false","deploy: add option to set default-fstype in provisioner

external-provisioner is exposing a new argument
to set the default fstype while starting the provisioner
sidecar, if the fstype is not specified in the storageclass
the default fstype will be applied for the pvc created from
the storageclass.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",74,35,0,1,"2018-01-08 15:47:21","1061.29"
"ceph/ceph-csi","2b7fb1bbb1c2b4fc1409dc53f41cb2aa54ef530f","Madhu-1","2021-12-21 05:52:45","false","doc: lift supported ceph version for snapshot/clone

snapshot and clone should be supported from octopus
15.2.4 instead of 15.2.3.

fixes #2732

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",57,47,1,1,"2018-01-08 15:47:21","1438.34"
"ceph/ceph-csi","d7a02b14c2d697e95660caa93147eb768b5655f1","Madhu-1","2020-05-05 10:46:02","false","Doc: Updated github PR template

Updated github PR template about the rules
to be followed when developer is creating a PR

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",109,28,0,1,"2018-01-08 15:47:21","848.29"
"ceph/ceph-csi","de1f0996808ac2d783b8e5c73e98b66b007ad3cf","Madhu-1","2019-01-17 05:14:06","false","Remove unused struct fields

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",16,12,0,1,"2018-01-08 15:47:21","373.81"
"ceph/ceph-csi","8ef7143e6cbfc1e948009e8150096b11cd839fc7","Madhu-1","2020-07-01 05:27:11","false","rbd: add maxsnapshotsonimage flag

Added maxsnapshotsonimage flag to flatten
the older rbd images on the chain to avoid
issue in krbd.The limit is in krbd since it
only allocate 1 4KiB page to handle all the
snapshot ids for an image.

The max limit is 510 as per
https://github.com/torvalds/linux/blob/
aaa2faab4ed8e5fe0111e04d6e168c028fe2987f/drivers/block/rbd.c#L98
in cephcsi we arekeeping the default to 450 to reserve 10%
to avoid issues.
Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",114,30,0,1,"2018-01-08 15:47:21","904.07"
"ceph/ceph-csi","25642fe404fb2656abb7489f8578c8e4e83f2a40","Madhu-1","2019-01-28 11:47:06","false","Add method comments

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",22,13,0,1,"2018-01-08 15:47:21","385.08"
"ceph/ceph-csi","7e8cc41acab0e304f55edc111b275d213107e10f","Madhu-1","2020-08-11 12:17:07","false","cephfs: replace Errorf with ErrorLog in deleteSnapshot

replace Errorf with ErrorLog in deleteSnapshot
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.35"
"ceph/ceph-csi","a164169fd30db4419c9ff04c9e5cc688b41688eb","j-griffith","2019-03-13 18:19:14","false","Revert ""Add multiNodeWritable option for RBD Volumes""

This reverts commit b5b8e4646094d0ec1f3dfe96060a183c863d7d1a.",33,14,0,0,"2018-01-08 15:47:21","430.36"
"ceph/ceph-csi","404e011ae9936beaea3264927de976cdea0b3969","Rakshith-R","2021-06-15 12:25:29","false","cleanup: added helper func isNotMountPoint

Added helper func isNotMountPoint to check mountPoint,
validate error and reduce complexity of NodeStageVolume.

Signed-off-by: Rakshith R <rar@redhat.com>",108,41,0,1,"2018-01-08 15:47:21","1252.61"
"ceph/ceph-csi","0f8bbaa217ea4f297ce76245de3970eb19b60918","nixpanic","2021-11-03 07:40:57","false","rbd: add framework for CSI-Addons Identity Service

Add a new CSI-Addons Server and empty Identity Service for the RBD
plugin. The implementation of the Identity Service procedure calls will
be done in other PRs.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",53,46,0,1,"2018-01-08 15:47:21","1391.41"
"ceph/ceph-csi","5bbab25a9f620fe39403437af399fe4073274e9f","nixpanic","2020-12-02 07:53:17","false","util: move Secrets to vaultConnection

The Secrets is the main object to connect to Vault. This should be part
of the vaultConnection type.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",80,35,0,1,"2018-01-08 15:47:21","1055.17"
"ceph/ceph-csi","cabdac4913ed98f62b4a99988759782d187ed191","nixpanic","2020-10-02 11:09:49","false","cephfs: make getMetadataPool() a method of volumeOptions

Signed-off-by: Niels de Vos <ndevos@redhat.com>",121,33,0,1,"2018-01-08 15:47:21","995.31"
"ceph/ceph-csi","f46fb133577c01f0140e1a67c5c2522b830c4130","nixpanic","2020-07-28 08:35:18","false","ci: run ""kubectl cluster-info"" through minikube

In case kubectl did not get installed (VM_DRIVER != none),
scripts/minikube.sh can fail when kubectl is not in the path. By running
the ""kubectl cluster-info"" command through minikube, the script will
succeed.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",114,31,0,1,"2018-01-08 15:47:21","930.2"
"ceph/ceph-csi","3784268dde50e2f1d9fdd2c3999b511f48e0bcba","Madhu-1","2019-09-27 12:47:41","false","update mergify for auto merging

update rules to auto merge in master branch

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",85,21,0,1,"2018-01-08 15:47:21","624.13"
"ceph/ceph-csi","9271375028a213925127b7ae7873ae2305509412","nixpanic","2023-06-02 12:27:12","false","build: address `gosec` warning

Signed-off-by: Niels de Vos <ndevos@ibm.com>",31,65,1,1,"2018-01-08 15:47:21","1971.11"
"ceph/ceph-csi","7d04cf4fe7e5c2914e774b1de1ace6341dae79cb","nixpanic","2021-08-19 08:44:34","false","doc: add tickgit TODO badge

There are TODO and FIXME comments in the Ceph-CSI source code that need
addressing at one point. Adding this TODO badge and link to tickgit to
the main README makes it obvious that some cleanup is needed.

This might invite new contributors to address reported TODOs.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",116,43,0,1,"2018-01-08 15:47:21","1316.46"
"ceph/ceph-csi","4e6d9be82629d5d12dc88963acfcd1f48ffc3676","nixpanic","2021-07-23 15:27:31","false","ci: fix yamllint error in generated golangci.yml file

When running 'make containerized-test' the following error gets
reported:

    yamllint -s -d '{extends: default, rules: {line-length: {allow-non-breakable-inline-mappings: true}},ignore: charts/*/templates/*.yaml}' ./scripts/golangci.yml
    ./scripts/golangci.yml
      179:81    error    line too long (84 > 80 characters)  (line-length)

The golangci.yml.in is used to generate golangci.yml, addressing the
line-length there resolves the issue.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",116,42,0,1,"2018-01-08 15:47:21","1290.74"
"ceph/ceph-csi","16cb43f0f9a07704d5168a80b74533f8f3b112c3","nixpanic","2020-11-25 17:06:53","false","rbd: store csi.storage.k8s.io/pvc/namespace metadata as Owner

The Owner of an RBD image (Kubernetes Namespace, tenant) can be used to
identify additional configuration options. This will be used for
fetching the right Vault Token when encrypting/decrypting volumes.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",82,34,0,1,"2018-01-08 15:47:21","1047.56"
"ceph/ceph-csi","4016876c9db17164ba9f4a39bd482b558adfa467","Madhu-1","2023-08-24 11:05:31","false","cephfs: fix make go-lint error

Not sure why but go-lint is failing
with below error and this fix is required
to make it pass

```
directive `//nolint:staticcheck // See comment above.`
is unused for linter ""staticcheck"" (nolintlint)
```

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",21,67,1,1,"2018-01-08 15:47:21","2052.05"
"ceph/ceph-csi","44d454648067d21e0c474f397ff5fa675bc30f4b","Madhu-1","2022-10-21 12:16:56","false","cephfs: return abnormal in NodeGetVolumeStats

When we do stat on the targetpath, if there is
any error we can check is it due to corruption.
If yes, cephcsi can return abnormal in the
NodeGetVolumeStats so that consumer (CO/admin)
and detect and take further action.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,57,1,1,"2018-01-08 15:47:21","1743.85"
"ceph/ceph-csi","34ff13984ad7853eb812d65e98ec01c1eff33309","nixpanic","2022-06-27 08:14:58","false","ci: prevent panic in retest action on `nil` strings

In case a PullRequest does not have a MergeableState set, it will be
`nil`. Dereferencing the pointer will cause a Go panic, and the action
won't work as intended.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",41,54,1,1,"2018-01-08 15:47:21","1629.69"
"ceph/ceph-csi","6d3e25f069f6500f0923b3c5ee04c6b601094cf8","nixpanic","2021-10-19 12:07:40","false","util: NodeGetVolumeStatsResponse.Usage may not contain negative values

Following the CSI specification, values that are included in the
VolumeUsage MUST NOT be negative. However, CephFS seems to return -1 for
the number of inodes that are available. Instead of returning a
negative value, set it to 0 so that it will not get included in the
encoded JSON response.

Updates: #2579
See-also: https://github.com/container-storage-interface/spec/blob/5b0d4540158a260cb3347ef1c87ede8600afb9bf/spec.md?plain=1#L2477-L2487
Signed-off-by: Niels de Vos <ndevos@redhat.com>",54,45,0,1,"2018-01-08 15:47:21","1376.6"
"ceph/ceph-csi","b5020657e624f97e26b8fb152730d148a9e06546","nixpanic","2021-02-02 09:25:37","false","rbd: add ""--options notrim"" when mapping a thick-provisioned image

Signed-off-by: Niels de Vos <ndevos@redhat.com>",84,37,0,1,"2018-01-08 15:47:21","1120.48"
"ceph/ceph-csi","63b5a7ac966ac73ebe5682f8b7dad6846bf1929a","Yuggupta27","2020-09-30 06:38:09","false","ci: add function to validate checksum

calculateSha512sum() returns the md5sum of a file inside a pod.

Signed-off-by: Yug <yuggupta27@gmail.com>",129,33,0,0,"2018-01-08 15:47:21","992.12"
"ceph/ceph-csi","93cb8a04d765dac9879a96d977a4382f69672d9c","mcronce","2018-11-24 19:18:24","false","pkg/rbd:  Updated for new versions of CSI/Kubernetes dependencies",16,10,0,0,"2018-01-08 15:47:21","316.15"
"ceph/ceph-csi","ca7809099d5295ac084b7f7104c6c70b37dc407a","humblec","2021-08-17 03:25:19","false","rebase: update external-snapshotter client to v4.2.0

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",116,43,0,1,"2018-01-08 15:47:21","1314.23"
"ceph/ceph-csi","8a7022cc501d81fe3004e3f915554c347d017853","Madhu-1","2019-07-30 13:26:48","false","Add recover middleware for  grpc server

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",76,19,0,1,"2018-01-08 15:47:21","567.15"
"ceph/ceph-csi","c73cb1980b48ebd41d393307077d54bfc79c2c89","irq0","2022-08-31 06:32:05","false","e2e: Use utilEncryptionType instead of string in rbd suite

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",44,56,1,0,"2018-01-08 15:47:21","1693.61"
"ceph/ceph-csi","257a11780fe5206627ba4bbc297ac4c7d077ba52","gman0","2018-03-18 14:08:39","false","cephfs/deploy/k8s: updated naming and some permissions",2,2,0,0,"2018-01-08 15:47:21","69.93"
"ceph/ceph-csi","29782bf377907e5d1e9413a0f148e1cc7f77693b","Yuggupta27","2022-01-03 16:17:34","false","rbd: implement UnfenceClusterNetwork

implement UnfenceClusterNetwork grpc call
which allows to unblock the access to a
CIDR block by removing it from network fence.

Signed-off-by: Yug Gupta <yuggupta27@gmail.com>",47,48,1,0,"2018-01-08 15:47:21","1451.77"
"ceph/ceph-csi","2cf8ecc6c7f1c6d457439d5477d187c77086d988","irq0","2022-07-20 19:50:15","false","journal: Store encryptionType in Config struct

Add encryptionType next to kmsID to support both block and file
encryption.

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",40,54,1,0,"2018-01-08 15:47:21","1653.17"
"ceph/ceph-csi","123a26abb3a4194c840c381e8ecaa991cf482a39","mattb18","2021-01-24 14:17:33","false","deploy, helm: enable secret watch in rbac

enables secret ''watch'' rbac permission for ceph-csi-rbd-provisioner role. Fixes 1841.

Signed-off-by: Matt Brown <matthewbrown18@gmail.com>",81,37,0,0,"2018-01-08 15:47:21","1111.69"
"ceph/ceph-csi","51642c9a3abe2c0c017d305e0b29c7651e0e4242","rootfs","2018-07-21 19:35:03","true","Merge pull request #43 from alvistack/ceph_version-mimic

Update CEPH_VERSION to mimic",5,6,0,0,"2018-01-08 15:47:21","193.16"
"ceph/ceph-csi","b2459574eefc40cf8af52f29a5eb23d529fafbdc","rootfs","2018-11-20 14:45:15","false","switch to centos base image",15,10,0,0,"2018-01-08 15:47:21","311.96"
"ceph/ceph-csi","432787fee2bf99b81558796282071108dc5eda88","Madhu-1","2022-04-22 11:40:44","false","doc: add new hackmd link for meeting minutes

replaced google doc link with new hackmd
link for upstream meetings.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",42,51,1,1,"2018-01-08 15:47:21","1564.83"
"ceph/ceph-csi","42d6130cbcf64c737bc792598f01ac329a8e600e","Madhu-1","2022-01-10 05:05:02","false","e2e: cephfs e2e for bigger size clone,restore pvc

adding E2E to verify the bigger size clone
and restore pvc from a smaller size pvc/snapshot.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",43,48,1,1,"2018-01-08 15:47:21","1462.55"
"ceph/ceph-csi","7d3a18c5b771334c6e0f8277488f9b3ec085c5ac","Madhu-1","2019-08-29 08:06:44","false","Fix e2e failure caused due to mon connection from toolbox

i think now its take time to discover the mon IP
from svc name in tool box, this is a workaround
to fix it.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",86,20,0,1,"2018-01-08 15:47:21","595.93"
"ceph/ceph-csi","136d81b736f59f787c5814a540b2e33474617c42","Madhu-1","2019-09-27 08:20:12","false","Add mergify rule to auto merge backported PR

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",85,20,0,1,"2018-01-08 15:47:21","623.94"
"ceph/ceph-csi","db15458d16149512a3d2c7de84c9bdd5b0e734ff","nixpanic","2020-12-14 10:26:31","false","cleanup: use constant for ""vault"" KMS-type

Signed-off-by: Niels de Vos <ndevos@redhat.com>",77,35,0,1,"2018-01-08 15:47:21","1066.28"
"ceph/ceph-csi","6d5de7458d3f8b5211aac8275473e6b31c4f4fb8","nixpanic","2020-12-08 14:23:35","false","cleanup: standardize error format in util.k8sGetNodeLabels()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,35,0,1,"2018-01-08 15:47:21","1061.44"
"ceph/ceph-csi","82b7904542d14a18b36adaae370ad28b18a4f296","mcronce","2018-12-04 20:08:11","false","deploy/cephfs/kubernetes:  Use CSI 1.x plugin directory",16,11,0,0,"2018-01-08 15:47:21","327.18"
"ceph/ceph-csi","d3f31187fc5d10ab7744cfe3d1d35a2462fb2d1b","idryomov","2020-08-21 15:58:37","false","rbd: rename ndbType parameter

Fix ""ndb"" typo.

Signed-off-by: Ilya Dryomov <idryomov@gmail.com>",119,31,0,0,"2018-01-08 15:47:21","953.51"
"ceph/ceph-csi","bdf8fe7f93e0253b40c7f77afb8ac5dc0d2e2e58","nixpanic","2020-11-26 16:38:31","false","build: use docker.io/ceph/ceph:v15 as BASE_IMAGE

Use a qualified image name, including the registry where it should come
from. This makes it possible to pull the image from the right location,
and consume it in CI jobs without trying to pull again.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",84,34,0,1,"2018-01-08 15:47:21","1048.54"
"ceph/ceph-csi","ab5ca13586af7af4841f1bc28fb2fc05b074a274","nixpanic","2022-04-07 15:26:38","false","e2e: return useful error message when ConfigMap creation fails

In case the toolbox pod is not available, the error message lists that
no Pods are found, but there is no hint about the toolbox. By mentioning
the toolbox in the error message, it suggests a good place to start
troubleshooting the environment.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",44,51,1,1,"2018-01-08 15:47:21","1550.99"
"ceph/ceph-csi","50bbfb5bae39d328af1ff4ade28168b1a19d9b87","rootfs","2018-08-07 18:14:31","true","Merge pull request #56 from nak3/debug-friendly

Logging command and options for debug friendly",8,7,0,0,"2018-01-08 15:47:21","210.1"
"ceph/ceph-csi","8da1371e84e4399b4f0b52f0eb8f5ab84932ad30","rootfs","2018-04-25 12:03:35","true","Merge pull request #36 from bi-shun/readme-fix

Fix README.md",4,4,0,0,"2018-01-08 15:47:21","106.84"
"ceph/ceph-csi","9200bc7a00524fe71cb99712907a24827b7416d5","humblec","2021-12-20 05:49:54","false","rbd: Implement Key Protect KMS integration for Ceph CSI

This commit adds the support for HPCS/Key Protect IBM KMS service
to Ceph CSI service. EncryptDEK() and DecryptDEK() of RBD volumes are
done with the help of key protect KMS server by wrapping and unwrapping
the DEK and by using the DEKStoreMetadata.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",53,47,1,1,"2018-01-08 15:47:21","1437.34"
"ceph/ceph-csi","45ae1c56e444476d775d1a6122ff4be81c8a9c3e","humblec","2019-06-02 09:31:34","false","Promote sidecars to latest available version tags.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",76,17,0,1,"2018-01-08 15:47:21","509.99"
"ceph/ceph-csi","e1cbd90c0b23cda03e18d15ba168d7c43efe721f","humblec","2022-01-28 11:48:56","false","doc: correct typo in hpcs or key protect design

File name is corrected and also a typo in the same

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",40,49,1,1,"2018-01-08 15:47:21","1480.83"
"ceph/ceph-csi","3469dfc753427efcf8f36d0b7ee71672a8d61e43","yati1998","2021-07-10 10:45:11","false","cleanup: resolve errorlint issues

This commit resolves errorlint issues
which checks for the code that will cause
problems with the error wrapping scheme.

Updates: #1586

Signed-off-by: Yati Padia <ypadia@redhat.com>",126,42,0,0,"2018-01-08 15:47:21","1277.54"
"ceph/ceph-csi","8cf1b242f74934b2b700fda09a12295ca3f6a41b","shtripat","2019-02-13 11:31:48","false","Update deploy-rbd.md",26,13,0,0,"2018-01-08 15:47:21","400.07"
"ceph/ceph-csi","891daa937585a96544f6734a79d1ca820836e53b","wilmardo","2019-04-03 08:46:15","false","Replaces the references to the Kubernete Authors with the Ceph-CSI authors",46,15,0,0,"2018-01-08 15:47:21","450.96"
"ceph/ceph-csi","e0cc7740f6db86ba9a5f37e850ec9cd0f614315c","Madhu-1","2020-01-13 04:14:18","false","CSI: run all containers as privileged in daemonset pods

On systems with SELinux enabled, non-privileged containers
can't access data of privileged containers. Since the socket
is exposed by privileged containers, all sidecars must be
privileged too. This is needed only for containers running
in daemonset as we are using bidirectional mounts in daemonset

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",107,24,0,1,"2018-01-08 15:47:21","735.02"
"ceph/ceph-csi","538b8548536405469d9e158d3dba36b3a71ad356","Madhu-1","2020-04-16 07:12:00","false","script: Delete snapshot CRD created by cephcsi in rook

when we deploy rook+cephcsi for E2E, the
external-snapshotter in cephcsi deployed by
rook will create the CRD, we need to delete
the crd created by external-snapshotter.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",102,27,0,1,"2018-01-08 15:47:21","828.14"
"ceph/ceph-csi","a1f5425b8865fbc552eca6ecba70ff2fd0f8df5a","Madhu-1","2020-04-09 05:48:09","false","Update cephcsi secret created by rook

as we need to include the encryption
secret key inside the secret created by the
rook, This PR will add the key and value required
for the encryption inside the secrets.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",107,27,0,1,"2018-01-08 15:47:21","821.08"
"ceph/ceph-csi","13438e836983e9b811004efb1773795ef61a551b","Madhu-1","2020-04-16 06:44:56","false","ci: Update travis functional tests

Updated travis functional tests to
install snapshot-controller for E2E

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",102,27,0,1,"2018-01-08 15:47:21","828.12"
"ceph/ceph-csi","5b461a07876267bf39b7db7e010d0ada0010e4f8","wilmardo","2019-08-06 13:56:17","false","docs: Clarify that Nautilus means >=14.2.2

Signed-off-by: wilmardo <info@wilmardenouden.nl>",83,19,0,0,"2018-01-08 15:47:21","574.17"
"ceph/ceph-csi","ef852cc93d1fb75e59f0e252dbc7634c2ce03d4c","humblec","2021-07-13 05:21:56","false","rbd: Get rid of locking at nodeUnpublish call

Considering kubelet make sure the unstage and unpublish operations
are serialized, we dont need any extra locking in nodeUnpublish

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",124,42,0,1,"2018-01-08 15:47:21","1280.32"
"ceph/ceph-csi","c515a013d3215b44bd74e0e7e04842f61c8abbd5","gman0","2018-08-14 09:19:41","false","cephfs: volumemounter probe

The driver will now probe for either ceph fuse/kernel every time
it's about to mount a cephfs volume.

This also affects CreateVolume/DeleteVolume where the mounting
was hard-coded to ceph kernel client till now - mounter configuration
and probing are now honored.",8,7,0,0,"2018-01-08 15:47:21","215.73"
"ceph/ceph-csi","69c4e7537f86c0e01127bdb69ec7bdece53cb838","humblec","2019-06-04 06:17:45","false","Update coding.md

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",77,17,0,1,"2018-01-08 15:47:21","511.85"
"ceph/ceph-csi","027331c186a839287caea755c00371969080bef3","humblec","2019-06-27 11:48:31","false","Use sidecar which support cloning

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",79,18,0,1,"2018-01-08 15:47:21","534.08"
"ceph/ceph-csi","4a3b1181ce64df86e4e620a45e167b1c9e328248","nixpanic","2021-08-26 11:43:20","false","cleanup: move KMS functionality into its own package

A new ""internal/kms"" package is introduced, it holds the API that can be
consumed by the RBD components.

The KMS providers are currently in the same package as the API. With
later follow-up changes the providers will be placed in their own
sub-package.

Because of the name of the package ""kms"", the types, functions and
structs inside the package should not be prefixed with KMS anymore:

    internal/kms/kms.go:213:6: type name will be used as kms.KMSInitializerArgs by other packages, and that stutters; consider calling this InitializerArgs (golint)

Updates: #852
Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,43,0,1,"2018-01-08 15:47:21","1323.58"
"ceph/ceph-csi","841a53bc3db436132fefaf8ba17c001fcebc8f3d","nixpanic","2021-07-16 13:40:48","false","e2e: retry kubectl commands in case deploying Vault fails

Sometimes it happens that the deployment of Hashicorp Vault fails.
Deployment is one of the 1st steps that are done when starting the e2e
suite, and the Kubernetes cluster may still be a little overloaded while
it is settling down. It should be possible to retry and succeed after a
while.

Fixes: #2288
Signed-off-by: Niels de Vos <ndevos@redhat.com>",124,42,0,1,"2018-01-08 15:47:21","1283.66"
"ceph/ceph-csi","88ca7077ae11d81e8da90b15a997043528888858","gman0","2018-04-13 12:31:46","false","added cephfs/cephuser",2,3,0,0,"2018-01-08 15:47:21","94.86"
"ceph/ceph-csi","aa023ea405cb3535e5ecfc36929e625593c13916","gman0","2018-03-07 13:11:54","false","cephfs: set access mode to MULTI_NODE_MULTI_WRITER; controller (un)publish is not needed",2,2,0,0,"2018-01-08 15:47:21","59.89"
"ceph/ceph-csi","543360ee007c7a04807aaa0e316ce9635a25b077","hswong3i","2020-01-01 14:23:02","false","Upgrade: csi-attacher from v1.2.0 to v2.1.0

See https://github.com/kubernetes-csi/external-attacher/releases/tag/v2.1.0
See https://github.com/kubernetes-csi/external-attacher/blob/v2.1.0/CHANGELOG-2.1.md",103,24,0,0,"2018-01-08 15:47:21","719.19"
"ceph/ceph-csi","9595c89855ff0fe376efe2b639e21cf651ef027d","Madhu-1","2021-12-09 06:32:23","false","ci: install findutils in dockerfile.test

currently getting find command not found
and xargs command not found when we run
the dockerfile.test. installing findutils
to fix it.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",50,47,1,1,"2018-01-08 15:47:21","1426.36"
"ceph/ceph-csi","09ffaee7c3499cc87b283954f881645a33b50e08","Madhu-1","2020-07-12 04:55:14","false","cleanup: rename newVolumeOptionsFromVersion1Context for more clarity

rename newVolumeOptionsFromVersion1Context to newVolumeOptionsFromMonitorList
to provide more clarity to the function readers and also fixed comments.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",114,30,0,1,"2018-01-08 15:47:21","914.05"
"ceph/ceph-csi","ce393c6384878523381ff164e7de2962e3a0466b","sbezverk","2018-02-06 13:41:45","true","Merge pull request #14 from rootfs/deploy

update provisioner/attacher statefulsets",1,1,0,0,"2018-01-08 15:47:21","28.91"
"ceph/ceph-csi","6cf7389d9792830f30c7051ac10a046e4f5ddcc3","Yuggupta27","2020-05-22 05:08:55","false","doc: Add prefix for naming subvolumes and snapshots

Updated storageclass and snapshotclass
to include the name prefix for naming
subvolumes and snapshots.

Fixes: #1087

Signed-off-by: Yug Gupta <ygupta@redhat.com>",107,28,0,0,"2018-01-08 15:47:21","864.06"
"ceph/ceph-csi","dbf2eb3905038f9c384f49d06eea857ccff126fd","Rakshith-R","2021-08-26 10:45:02","false","e2e: ignore lines with 'Warning' in isAlreadyExistsCliError()

Signed-off-by: Rakshith R <rar@redhat.com>",115,43,0,1,"2018-01-08 15:47:21","1323.54"
"ceph/ceph-csi","c19264e996949bc2268ba5b0f1634d13c8323c50","Rakshith-R","2021-11-16 10:36:18","false","rbd: add function (cc *ClusterConnection) GetTaskAdmin()

This function returns new go-ceph TaskAdmin to add
tasks on rbd volumes.

Signed-off-by: Rakshith R <rar@redhat.com>",57,46,0,1,"2018-01-08 15:47:21","1403.53"
"ceph/ceph-csi","886fdccb9b2285059fcd67ec7a2cde6a974ca6b6","gman0","2018-04-13 12:53:17","false","cephfs: added mounter probing and --volumemounter cmd arg",2,3,0,0,"2018-01-08 15:47:21","94.88"
"ceph/ceph-csi","f45ddd7c9d0c1fd4168afa4d48ddabc633c28ae5","gman0","2018-06-12 15:03:45","false","cephfs: cephuser: set config and admin explicitly when creating/deleting users",3,5,0,0,"2018-01-08 15:47:21","153.97"
"ceph/ceph-csi","8f99fe7250fec1c340319b3abce7abeeb76c8377","humblec","2022-06-06 12:54:03","false","helm: update the sidecar mentions in the Chart Description

CephFS chart description didnt have `resizer` in it
and this commit add the same.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",37,53,1,1,"2018-01-08 15:47:21","1609.88"
"ceph/ceph-csi","0d0b224f69e997e0dd5028c8e212605df27969f1","plnordquist","2018-12-10 19:25:34","false","Added Helm chart for RBD plugin

Signed-off-by: Peter Nordquist <peter.nordquist@pnnl.gov>",16,11,0,0,"2018-01-08 15:47:21","332.15"
"ceph/ceph-csi","92190dee5d239fb5cf08d80893ecad59273872ff","nixpanic","2021-02-25 08:20:22","false","ci: use ""devel"" branch instead of ""master""

Signed-off-by: Niels de Vos <ndevos@redhat.com>",90,38,0,1,"2018-01-08 15:47:21","1142.44"
"ceph/ceph-csi","fb065b0f393046b9c349ae33feeea9e9551f77c7","nixpanic","2021-02-22 15:57:44","false","rbd: move openEncryptedDevice() to a method of rbdVolume

Signed-off-by: Niels de Vos <ndevos@redhat.com>",90,37,0,1,"2018-01-08 15:47:21","1139.76"
"ceph/ceph-csi","a04bef4430caf91a44ff5c4e02c37e115b9c3087","Madhu-1","2019-02-20 10:00:18","false","fix misspelled words

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",30,13,0,1,"2018-01-08 15:47:21","407.01"
"ceph/ceph-csi","eeb0859f994badeca23af7da0f7ea328ca0614f8","Madhu-1","2020-08-11 11:54:12","false","util: rename FatalLog to FatalLogMsg for parity

rename FatalLog to FatalLogMsg to keep functions
in parity functions ends with Msg if its only message
logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.34"
"ceph/ceph-csi","43f28af495671f1636b0d532ec416cc5be3b7818","Madhu-1","2020-09-15 13:02:58","false","doc: replace nautilus with master in ceph doc link

refer to master branch of ceph docs instead of nautilus.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",127,32,0,1,"2018-01-08 15:47:21","977.39"
"ceph/ceph-csi","c40872df00420beb81a69a191f0ca2b7965d637e","Madhu-1","2020-12-04 07:56:53","false","rbd: undo reservation incase of errors

If cephcsi encounters any error after
reservation, as a cleanup operation
it should revert back the reservation.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",80,35,0,1,"2018-01-08 15:47:21","1057.17"
"ceph/ceph-csi","d09ffbd6debb5c0fde60195580309b9fd1426c3a","Madhu-1","2020-04-01 07:20:43","false","helm: add helm charts E2E

This PR adds the support for helm
installation, and cephcsi helm charts
deployment and teardown and also runs E2E
on for helm charts.

Add socat to provide port forwadring access for helm

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",116,27,0,1,"2018-01-08 15:47:21","814.15"
"ceph/ceph-csi","6a82baf5d348eb6b2427eba26c1122072145d9b1","Madhu-1","2021-12-20 14:14:10","false","rbd: remove SizeBytes from rbdSnapshot struct

as we are moving the VolSize to rbdImage struct
we should reuse the same instead of maintaining
one more field in rbdSnapshot struct.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",57,47,1,1,"2018-01-08 15:47:21","1437.69"
"ceph/ceph-csi","badcac38d356bbccbbe7b4174d4593fe3533a440","Rakshith-R","2022-04-26 06:38:49","false","e2e: testcase for pvc-pvc clone with different SC & encryption

Signed-off-by: Rakshith R <rar@redhat.com>",38,52,1,1,"2018-01-08 15:47:21","1568.62"
"ceph/ceph-csi","d05fc1e8e5775d19d641d93b74b1779dcda62a6d","Madhu-1","2021-11-17 12:31:28","false","util: add helper to get the cluster ID

added helper function to get the cluster ID.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",57,46,0,1,"2018-01-08 15:47:21","1404.61"
"ceph/ceph-csi","9e4cebe397726b10f4031b29511e814a0786c06b","gman0","2018-03-27 12:19:11","false","README: fixed typos",2,3,0,0,"2018-01-08 15:47:21","78.86"
"ceph/ceph-csi","b93ed21fe8faa752d41ceb61c3025a67e27a056f","ShyamsundarR","2020-01-23 01:47:02","false","Add e2e test case for DeleteVolume success on backend volume deletion

If a backend volume is deleted, DeleteVolume call for the same should
succeed, detecting the image is missing and delete the related OMaps.

This commit adds a test case to ensure this is occuring correctly.

Updates #474

Signed-off-by: ShyamsundarR <srangana@redhat.com>",108,24,0,0,"2018-01-08 15:47:21","744.92"
"ceph/ceph-csi","925bda2881500e6614c89b04a13f6c902ed1c0ec","ShyamsundarR","2019-07-31 16:24:19","false","Move mounting staging instance to a sub-path within staging path

This commit moves the mounting of a block volumes and filesystems
to a sub-file (already the case) or a sub-dir within the staging
path.

This enables using the staging path to store any additional data
regarding the mount. For example, this will be extended in the
future to store the fsid of the cluster, and maybe the pool name
to map unmap requests to the right image.

Also, this fixes the noted hack in the code, to determine in a
common manner if there is a mount on the passed in staging path.

Signed-off-by: ShyamsundarR <srangana@redhat.com>",76,19,0,0,"2018-01-08 15:47:21","568.28"
"ceph/ceph-csi","f021083097dbbe543b17a396c35e67035d83b879","nixpanic","2021-06-17 07:39:54","false","rebase: remove unused vbom.ml/util

Signed-off-by: Niels de Vos <ndevos@redhat.com>",113,41,0,1,"2018-01-08 15:47:21","1254.41"
"ceph/ceph-csi","fb8ee3a4530576db8a6a30a16ef80cc6ab41b562","nixpanic","2021-06-17 07:38:48","false","rebase: remove unused github.com/kubernetes-incubator/external-storage

Signed-off-by: Niels de Vos <ndevos@redhat.com>",112,41,0,1,"2018-01-08 15:47:21","1254.41"
"ceph/ceph-csi","5762da3e9195e394369138a5988a225f38029899","Madhu-1","2021-12-08 13:50:47","false","rebase: update kubernetes to v1.23.0

updating go dependency to latest kubernetes
released version i.e v1.23.0

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",49,47,1,1,"2018-01-08 15:47:21","1426.67"
"ceph/ceph-csi","dde21543bd442abe20fb1c7e33c36e16d4f6e0e6","Madhu-1","2022-08-03 07:19:17","false","cephfs: fix staticcheck comment

getting is unused for linter ""staticcheck""
(nolintlint) error message due to wrong
comment format. this the format now with
`//directive // comment`

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",40,55,1,1,"2018-01-08 15:47:21","1666.65"
"ceph/ceph-csi","8e0e184fdfff5a5baa288e99f31222dabd673855","Madhu-1","2019-01-16 08:24:52","false","update Make clean

remove rbdplugin and cephplugin from _output
directory during make clean.",17,12,0,1,"2018-01-08 15:47:21","372.94"
"ceph/ceph-csi","5e1a074ea3541caa129d549f3b9c64a3340bfd16","Madhu-1","2022-04-22 07:54:11","false","doc: update doc for 3.6.1 release

updated doc for 3.6.1 release, this will
be backported to release-v3.6 branch and
we will make deployment changes and do release.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",42,51,1,1,"2018-01-08 15:47:21","1564.67"
"ceph/ceph-csi","5c1584671e245bc1afad6d4cd5b179933bc9b7ca","nixpanic","2022-05-05 13:31:38","false","e2e: no need to set Namespace for StorageClass

StorageClasses are cluster-wide, and do not need to have a Namespace
set.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",43,52,1,1,"2018-01-08 15:47:21","1578.91"
"ceph/ceph-csi","1dc032e5545cd5296b272e755aeda5d6bf4c9af5","Yuggupta27","2021-08-05 07:06:01","false","doc: update comments in voljournal

Update spell errors and comments in
voljournal.go

Signed-off-by: Yug Gupta <yuggupta27@gmail.com>",121,43,0,0,"2018-01-08 15:47:21","1303.39"
"ceph/ceph-csi","60281fab4039fb2b02829754ccd12357b14901fd","naveensrinivasan","2022-05-19 03:12:36","false","ci: included dependency review

Dependency Review GitHub Action in your repository to enforce dependency
reviews on your pull requests.

Signed-off-by: Naveen <172697+naveensrinivasan@users.noreply.github.com>",38,52,1,0,"2018-01-08 15:47:21","1591.48"
"ceph/ceph-csi","b6c33769613cf76cf19a2d984bd05317e39b1378","rootfs","2018-04-26 12:06:53","true","Merge pull request #37 from q60563/master

Fix CSI plugin pv.yaml file error.",3,4,0,0,"2018-01-08 15:47:21","107.85"
"ceph/ceph-csi","b3a4f510e6a3d834aa86c499c541aba5b04929c3","Madhu-1","2020-07-13 05:28:17","false","rbd: take operation locks before operating on resource

Take operation locks on the resources before operating
on the resouces. This allows us to do parallel operations
for some RPC calls such as Clone and Restore of PVC.
This operations will only be blocked if the image is
expanding or Snapshot and RBD image is getting deleted.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",113,30,0,1,"2018-01-08 15:47:21","915.07"
"ceph/ceph-csi","1f5b84745facc983936ed2004f2bedc802fcec20","humblec","2020-08-17 07:40:05","false","rbd: Bail out from nodeexpansion if its block mode pvc

At CSI spec < 1.2.0, there was no volumecapability in the
expand request. However its available from v1.2+ which allows
us to declare the node operations based on the volume mode.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",120,31,0,1,"2018-01-08 15:47:21","949.16"
"ceph/ceph-csi","020ad61d06dcd9418b05b14d76dee4c4ea744fae","shtripat","2019-02-13 14:17:20","false","Update deploy-cephfs.md",26,13,0,0,"2018-01-08 15:47:21","400.19"
"ceph/ceph-csi","c3400bfb97f63e308c5258edad72e483502c9ec5","humblec","2020-08-04 04:25:28","false","cephfs: add snapshot create and delete functionalilies

It also add helper routines like parsetime,doSnapshot..etc

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","937.03"
"ceph/ceph-csi","04ea2b6f816c6ea82c9070b4b9b1cacbd22562d2","Madhu-1","2020-03-12 07:03:47","false","Fix issue in profile.cov

profile.cov need to be created inside
the _output directory.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",113,26,0,1,"2018-01-08 15:47:21","794.14"
"ceph/ceph-csi","d0abc3f5e616876b146987e1d5bf8e469264e2a1","Madhu-1","2020-04-23 05:04:30","false","Add travis_wait to deploy section

the deploy section is getting timeout to build and push
the images. see https://travis-ci.org/github/ceph/ceph-csi/jobs/678228818#L1617-L1622

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",101,27,0,1,"2018-01-08 15:47:21","835.05"
"ceph/ceph-csi","c30f91eeade1a8d40c9047e49ca621f5db4e56fa","Madhu-1","2020-06-24 07:14:23","false","rbd: implement snapinfo with go-ceph

moved snapinfo function from CLI to go-ceph
for better performance

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",115,29,0,1,"2018-01-08 15:47:21","896.14"
"ceph/ceph-csi","329f510b1f6394c16fd9a408d98fba12caada004","Yuggupta27","2020-09-24 17:14:00","false","ci: Remove upgrade testing stages from travis ci

Since upgrade testing jobs are being transitioned to
centos ci, there is no need run them here.

Signed-off-by: Yug <yuggupta27@gmail.com>",130,32,0,0,"2018-01-08 15:47:21","986.56"
"ceph/ceph-csi","e154029e6ddc24c9b2c7ef7fd539629110e77ab6","humblec","2020-10-13 04:37:17","false","deploy: update csi-attacher to v2.2.0 from v2.1.0

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",77,33,0,1,"2018-01-08 15:47:21","1005.03"
"ceph/ceph-csi","fa631e946227f2eb374c902491d9be4854973351","karthik-us","2023-06-02 07:54:16","false","doc: Corrections to retest-action doc

Fixing a broken link and some readability improvements.

Signed-off-by: karthik-us <ksubrahm@redhat.com>",31,65,1,0,"2018-01-08 15:47:21","1970.92"
"ceph/ceph-csi","e128caddc5772fb97fc643aa1b34cfc1a4908315","Madhu-1","2019-07-18 12:13:24","false","Fix vendor out of sync issue

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",70,18,0,1,"2018-01-08 15:47:21","555.1"
"ceph/ceph-csi","814bf4459a08b737cf37664c83255c9d8b121b00","Madhu-1","2020-12-02 10:28:31","false","cephfs: implement snapshot protect and unprotect to go-ceph

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",80,35,0,1,"2018-01-08 15:47:21","1055.28"
"ceph/ceph-csi","f93730dee7220f17c19af488f9a8b214ff4f32ed","nixpanic","2020-06-25 06:41:35","false","cleanup: use errors.As() to compare errors in cephfs/controllerserver

See-also: https://github.com/golang/go/wiki/ErrorValueFAQ#how-should-i-change-my-error-handling-code-to-work-with-the-new-features
Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,29,0,1,"2018-01-08 15:47:21","897.12"
"ceph/ceph-csi","72e37675945d67d3f88943eedb3fed4d146db42d","Madhu-1","2019-12-16 09:29:04","false","Replace Warningf and Infof with Errorf

incase of err, log as Errorf instead of
warningf and Infof

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",103,23,0,1,"2018-01-08 15:47:21","702.99"
"ceph/ceph-csi","6e941539b5c918dde0fe22d0893c3b56be59809d","Madhu-1","2021-02-11 10:01:38","false","rbd: implement volume replication spec

implemented the volume replication spec
for the rbd mirroring.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",83,37,0,1,"2018-01-08 15:47:21","1128.51"
"ceph/ceph-csi","8c974828d0009465c88cb1e31066afcb78546e3e","gman0","2018-03-27 13:39:18","false","cephfs/main: change import path",2,3,0,0,"2018-01-08 15:47:21","78.91"
"ceph/ceph-csi","e45f87632e39801e11f61cebd9d7d06efcf599b1","gman0","2018-03-21 13:18:01","false","cephfs/Dockerfile: use ceph's package repositories instead",2,2,0,0,"2018-01-08 15:47:21","72.9"
"ceph/ceph-csi","8a581ec6c050cc8ed36e1bbde0863669a375ed41","Madhu-1","2020-08-12 11:28:28","false","rbd: fix build issue for rbd

merging of https://github.com/ceph/ceph-csi/pull/1035
broken the cephcsi building. This commits fixes
the build issue.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",120,31,0,1,"2018-01-08 15:47:21","944.32"
"ceph/ceph-csi","bfde065f9200c82adbfe2eda3118f56a88e15c37","Madhu-1","2020-08-10 06:27:28","false","util: move getMonsAndClusterID to util

as we had duplicate functions in both cephfs
and rbd this commit moves the function to util.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",120,31,0,1,"2018-01-08 15:47:21","942.11"
"ceph/ceph-csi","f0fba1240ad11c3446e381391fbedc9ead783dcf","sngchlko","2018-08-08 11:22:23","false","Revert ""Implement NodeGetInfo for csi spec 3.0""

This reverts commit c93466b00965d832d8fc19c6ef28e9d77aee54c4.",7,7,0,0,"2018-01-08 15:47:21","210.82"
"ceph/ceph-csi","15ed9709d4f2cf596ac1c0faba10ffe1606276e1","Madhu-1","2022-01-21 09:25:33","false","ci: skip new checks in golangci-lint

skipping new checks in golangci-lint as
its much work to addresses new check errors
in this PR.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,48,1,1,"2018-01-08 15:47:21","1473.73"
"ceph/ceph-csi","b2e5e0574bbf0ef2f12e4dd1489cb5f6fd6ec3b9","nixpanic","2021-08-30 10:25:55","false","build: get gomodules.xyz/jsonpatch/v2 from github

The `make containerized-test TARGET=mod-check` jobs fail because the web
service at gomodules.xyz is not behaving correctly at the moment:

    running: go mod verify
    go: sigs.k8s.io/controller-runtime@v0.9.2 requires
    	gomodules.xyz/jsonpatch/v2@v2.2.0: unrecognized import path ""gomodules.xyz/jsonpatch/v2"": reading https://gomodules.xyz/jsonpatch/v2?go-get=1: 404 Not Found

Signed-off-by: Niels de Vos <ndevos@redhat.com>",106,44,0,1,"2018-01-08 15:47:21","1327.53"
"ceph/ceph-csi","b1045364d9e69d69050ed8d19c323b5b66ba72f2","nixpanic","2021-06-16 15:19:55","false","rbd: disable FeatureDeepFlatten when doing DeepCopy()

Not all Linux kernels support the deep-flatten feature. Disabling the
feature makes it possible to map RBD images on older kernels (like what
minikube uses).

Signed-off-by: Niels de Vos <ndevos@redhat.com>",110,41,0,1,"2018-01-08 15:47:21","1253.73"
"ceph/ceph-csi","bc8ef898112169b15b8a749d1f4f6b4d84284680","Madhu-1","2021-12-21 14:01:13","false","ci: strict rule for commit body length

body-max-line-length is added as a warning
even if the commit body is crossing the length
limit of 80 its considered as a warning not an
error. This commit moves the check from warning
to error.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",57,47,1,1,"2018-01-08 15:47:21","1438.68"
"ceph/ceph-csi","69b7c4672fefe73f4c5c0d7d95870b6a05d53407","Madhu-1","2019-09-19 12:19:57","false","Added E2E for rbd nodeplugin restart

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",87,20,0,1,"2018-01-08 15:47:21","616.11"
"ceph/ceph-csi","77135599accec15bfb45a3c98b1d8d5dc32b0d5a","Madhu-1","2021-07-07 05:13:28","false","rbd: make setThickProvisioned as method of rbdImage

isThickProvisioned is already method of the rbdImage
to keep similar thick provisioner related functions
common making isThickProvisioned as method of rbdImage.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",124,42,0,1,"2018-01-08 15:47:21","1275.31"
"ceph/ceph-csi","d5c19954c1c7b586b15ce4b95a3a6344f446a6ba","Madhu-1","2020-08-17 08:37:19","false","e2e: add backend image validation for rbd

validate backend rbd images count in each
E2E test cases. This helps a lot to catch
the issues in each test case.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",121,31,0,1,"2018-01-08 15:47:21","949.2"
"ceph/ceph-csi","849de000f4dc89e3e90de9fdcddeb4f90b629370","Madhu-1","2019-04-04 05:43:16","false","updated helm chat version

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",47,15,0,1,"2018-01-08 15:47:21","451.83"
"ceph/ceph-csi","591cd694ab8425cf1060260ce6d7f11c192c3a88","nixpanic","2022-03-31 12:51:36","false","doc: mark NFS support Alpha state

There is currently no e2e testing, unit-tests or Helm Chart for NFS
support. Until the functionality is confirmed to be working on a regular
basis, support for NFS provisioner volume will be Alpha.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",48,51,1,1,"2018-01-08 15:47:21","1543.88"
"ceph/ceph-csi","4788d279a5caab884f4e06929b88d74d31a0ab9a","irq0","2022-08-12 14:31:08","false","cephfs: fscrypt encryption support

Add Ceph FS fscrypt support, similar to the RBD/ext4 fscrypt
integration. Supports encrypted PVCs, snapshots and clones.

Requires kernel and Ceph MDS support that is currently not in any
stable release.

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",41,55,1,0,"2018-01-08 15:47:21","1674.95"
"ceph/ceph-csi","3f06fedf61dca6ef34bccd01444a48eaf20f71b7","ShyamsundarR","2020-04-05 21:54:30","false","Add unit tests for pkg/util/topology.go file

NOTE: If GetTopologyFromDomainLabels took a k8s client as an
argument, we could use the kubernetes fake client to test this
function in addition. This would though break the layers, exposing
k8s semantics in the code into the higher layers. Hence not
changing the same.

Signed-off-by: ShyamsundarR <srangana@redhat.com>",104,27,0,0,"2018-01-08 15:47:21","818.75"
"ceph/ceph-csi","5c4abf8347fde76376b6eb08741460aba28976b2","ShyamsundarR","2020-01-24 16:26:56","false","Add topology support to ceph-csi

Signed-off-by: ShyamsundarR <srangana@redhat.com>",108,25,0,0,"2018-01-08 15:47:21","746.53"
"ceph/ceph-csi","285028727a8bac2b7d0a2c9ab4df91c30b36ec35","humblec","2020-07-15 12:07:47","false","ci: disable centos ci checks from mergify

CentOS CI outage block PRs to get merged even when it has enough
approvals. Disabling the centos check for now as there is no ETA
on the availability of the setup atm.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",114,30,0,1,"2018-01-08 15:47:21","917.35"
"ceph/ceph-csi","0df8415067a021793dce689c64708c6a0f85c86c","gman0","2018-03-20 14:46:31","false","cephfs: cleaning/renaming",2,2,0,0,"2018-01-08 15:47:21","71.96"
"ceph/ceph-csi","7dc723ebbc03000246b2485b0ff0f761028efd03","ajarr","2019-07-25 21:18:33","false","docs: add special config steps to make CephFS CSI v1.1.0

... work with Ceph v14.2.2 cluster that is not deployed by rook.

Fixes: #486
Signed-off-by: Ramana Raja <rraja@redhat.com>",75,18,0,0,"2018-01-08 15:47:21","562.48"
"ceph/ceph-csi","a195856104741ca985ad03d279cc4d33e42224ee","rootfs","2019-02-08 12:23:13","true","Merge pull request #186 from Madhu-1/remove-glog

Remove glog from Gopkg.toml",24,13,0,0,"2018-01-08 15:47:21","396.11"
"ceph/ceph-csi","13667c013cfeadf1c07d35ccdb59d7cc5bb518b5","yati1998","2021-06-02 09:55:53","false","cleanup: addresses paralleltest linter

The Go linter paralleltest checks that the t.Parallel
gets called for the test method and for the range of
test cases within the test.

Updates: #2025

Signed-off-by: Yati Padia <ypadia@redhat.com>",106,41,0,0,"2018-01-08 15:47:21","1240.51"
"ceph/ceph-csi","eaa911d21d75b00a0b1feececce77db2f0b2066a","Madhu-1","2020-09-09 07:35:39","false","doc: update readme for RBD ROX support

updated readme for RBD ROX support.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",121,32,0,1,"2018-01-08 15:47:21","971.16"
"ceph/ceph-csi","766346868e61db4639d80494cc3f2fb2ed2fc6c2","Madhu-1","2022-04-18 05:57:04","false","util: Add RBD specific options in clusterInfo

As the netNamespaceFilePath can be separate for
both cephfs and rbd adding the netNamespaceFilePath
path for RBD, This will help us to keep RBD and
CephFS specific options separately.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",41,51,1,1,"2018-01-08 15:47:21","1560.59"
"ceph/ceph-csi","f6de345cc95b7f4f41c5fc52a9a4fd9a3b88752c","nixpanic","2020-10-01 11:38:07","false","cleanup: standardize error logs in cephfs/volume.go

Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,33,0,1,"2018-01-08 15:47:21","994.33"
"ceph/ceph-csi","b881ef1eeeda630c1cf511c2f0f8d10277cb503d","nixpanic","2020-08-12 07:41:10","false","ci: prevent Mergify from doing merge commits

Merge commits cause the CentOS CI commitlint job to fail. By configuring
Mergify to not do merge commits, but rebases before final testing, we
can use the CentOS CI commitlint job when the GitHub commitlint App does
not work.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",121,31,0,1,"2018-01-08 15:47:21","944.16"
"ceph/ceph-csi","6929db10e50e4c4ea9f902aab9cd0e73a927bf3e","rootfs","2019-01-28 12:25:13","true","Merge pull request #149 from Madhu-1/snap-yaml

Add snapshot yaml files in CSI-v1.0",22,13,0,0,"2018-01-08 15:47:21","385.11"
"ceph/ceph-csi","e3c3bbf0e38e75dca04a2d82fb638dac601c31c3","Madhu-1","2020-08-11 11:36:42","false","cephfs: replace klog.Warning with util.WarningLog in CreateVolume

replace klog.Warning with util.WarningLog in CreateVolume
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.33"
"ceph/ceph-csi","e861f12a607bced02704dc86614fcef9a818fb92","Madhu-1","2019-02-26 11:09:39","false","Fix review comments

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",31,14,0,1,"2018-01-08 15:47:21","413.06"
"ceph/ceph-csi","1b98106815cd8179c9a640f0bd7f89090002edf4","Madhu-1","2019-02-07 10:22:59","false","add addons to travis

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",26,13,0,1,"2018-01-08 15:47:21","395.02"
"ceph/ceph-csi","c739ce9d5eae9122ccc0b237ec0750b4699196bc","wilmardo","2019-08-06 10:09:25","false","Removes last reference to node-publish-secret

Signed-off-by: wilmardo <info@wilmardenouden.nl>",84,19,0,0,"2018-01-08 15:47:21","574.02"
"ceph/ceph-csi","ea33ccdb1ae99a22d4dbcf6050719c37ac34d60d","Madhu-1","2020-05-06 05:50:13","false","CI: update mergify rules

Updated mergify rules to consider
DCO and commitlint status

Fixes #1016

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",109,28,0,1,"2018-01-08 15:47:21","849.09"
"ceph/ceph-csi","05b8433b89c3583b6c921bd831af19c6de68ec88","Madhu-1","2021-06-15 06:09:01","false","rbd: check stdErr for does not have a parent error

actual error will be present in the stdErr not the error
when we try to add a task to flatten the rbd image. This
commits corrects the error checking when the image does
not have a parent.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",109,41,0,1,"2018-01-08 15:47:21","1252.35"
"ceph/ceph-csi","beb2410a1308de9eabec9092d0d51a4af27636be","Madhu-1","2019-06-04 18:00:10","false","update golangci-lint to latest stable version

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",79,17,0,1,"2018-01-08 15:47:21","512.34"
"ceph/ceph-csi","04872e5ebffac5b263975a08c03628d8f9b1c95f","mcronce","2018-12-04 21:28:37","false","Merge branch 'master' of github.com:ceph/ceph-csi into csi-v1.0.0",16,11,0,0,"2018-01-08 15:47:21","327.24"
"ceph/ceph-csi","9d7faf850f73a80794d53aa253da9f48f084bd8a","nixpanic","2022-04-29 12:58:28","false","nfs: delete the CephFS volume when the export is already removed

In case the NFS-export has already been removed from the NFS-server, but
the CSI Controller was restarted, a retry to remove the NFS-volume will
fail with an error like:

> GRPC error: ....: response status not empty: ""Export does not exist""

When this error is reported, assume the NFS-export was already removed
from the NFS-server configuration, and continue with deleting the
backend volume.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",38,52,1,1,"2018-01-08 15:47:21","1571.88"
"ceph/ceph-csi","12cd05a408ab0eafe8a9de35777558ab817cb849","Rakshith-R","2021-10-05 11:10:51","false","rbd: add EnsureImageCleanup to snapshot deletion

Signed-off-by: Rakshith R <rar@redhat.com>",55,45,0,1,"2018-01-08 15:47:21","1363.56"
"ceph/ceph-csi","73ecf06f97810fbf836d76a5d47244b4fff2aef0","humblec","2021-12-06 10:28:08","false","ci: rename golangci linter github action file to proper name

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",48,47,0,1,"2018-01-08 15:47:21","1424.53"
"ceph/ceph-csi","403cad682ceb6abe55fd1eb170be68f652b43e14","pohly","2018-10-17 12:52:45","false","rbd: protect against concurrent gRPC calls

The timeout value in external-provisioner is fairly low. It's not
uncommon that it times out and retries before the rbdplugin is done
with CreateVolume. rbdplugin has to serialize calls and ensure that
they are idempotent to deal with this.",10,9,0,0,"2018-01-08 15:47:21","278.88"
"ceph/ceph-csi","1eff20590de5d97f08fd9813a3ddcd4418d5ed61","agarwal-mudit","2020-07-29 12:49:27","false","util: restructure tracevol.py function to get_subvol_group()

get_subvol_group() returns empty string if subvolumeGroup is not defined,
changed it to return ""csi"" as default subvolumeGroup.

Signed-off-by: Mudit Agarwal <muagarwa@redhat.com>",118,31,0,0,"2018-01-08 15:47:21","931.38"
"ceph/ceph-csi","6141aabcd23a0f118d5649ab270cc1097acacc4b","humblec","2022-01-24 12:55:42","false","rbd: unexport KeyProtect kms struct

At present the KMS structs are exported and ideally we should be
able to work without exporting the same.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",36,49,1,1,"2018-01-08 15:47:21","1476.88"
"ceph/ceph-csi","0ac5f40d090e662ab769e27895cd44001ae3a5a8","phlogistonjohn","2020-05-15 18:02:51","false","journal: change omap get func to handle multiple keys at once

Taking this appraoch means that any function that must get more than one
key's value from the same oid can be more efficient by calling out to
ceph only once.

To be cautious and avoid missing things we always request ceph return
more keys than we actually expect to be set on the oid. If there are
unexpected keys there, we will not miss the keys we want if we first hit
an unexpected key if we were to limit ourselves to iterating only over
the number of keys we're expecting to be on the object.

Signed-off-by: John Mulligan <jmulligan@redhat.com>",113,28,0,0,"2018-01-08 15:47:21","857.59"
"ceph/ceph-csi","be9195cf320e4495f7061ba1d8c030148b97f114","humblec","2020-10-13 06:48:14","false","rbd: remove false error condition check in checkSnapCloneExists

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",76,33,0,1,"2018-01-08 15:47:21","1005.13"
"ceph/ceph-csi","6ee381db3af323fd2823ff900ce9101e2d59cf70","wilmardo","2019-09-26 09:55:12","false","refactor: Merge 1.13 and 1.14 Helm charts and improve charts

Signed-off-by: wilmardo <info@wilmardenouden.nl>",86,20,0,0,"2018-01-08 15:47:21","623.01"
"ceph/ceph-csi","b1ccdbb1547ef3b29b240a596c82683f109238b2","sngchlko","2018-08-08 05:42:17","false","Support snapshot feature in rbdplugin",7,7,0,0,"2018-01-08 15:47:21","210.58"
"ceph/ceph-csi","c629c3bf52cfaee681c1e0c6b844c9e574b0c5d0","Madhu-1","2020-03-30 09:19:24","false","update base image in Dockerfile

As we have the octopus as the latest
release base image,this PR updates the
base image in Dockerfile

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",115,27,0,1,"2018-01-08 15:47:21","812.23"
"ceph/ceph-csi","79920331567328bbabaaecfeb3f1cec2367fb747","humblec","2020-10-13 06:46:14","false","rbd: remove false error condition check in rbdVol.Exists()

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",76,33,0,1,"2018-01-08 15:47:21","1005.12"
"ceph/ceph-csi","5621f2cfcaed03249097b4fae35f597fcc5a2dce","humblec","2021-10-25 09:17:12","false","rbd: split the parsing and deletion logic to its own functions.

parseAndDeleteMigratedVolume() prviously clubbed the logic of
parsing of migration volume handle and then continued with the
deletion of the volume. however this commit split this
logic into two, ie parsing has been done in parseMigrationVolID()
and DeleteMigratedVolume() deletes the backend volume.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",53,45,0,1,"2018-01-08 15:47:21","1382.48"
"ceph/ceph-csi","3dc8c5b516e81354781d4ad12a1ddc2315a6f4eb","humblec","2021-06-25 11:25:00","false","internal: reformat long lines in internal/journal package to 120 chars

We have many declarations and invocations..etc with long lines which are
very difficult to follow while doing code reading. This address the issues
in 'internal/journal' package to restrict the line length to 120 chars.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",118,41,0,1,"2018-01-08 15:47:21","1262.57"
"ceph/ceph-csi","8c32045c4ecc3da8d17be1f9ed9958568adec50c","Madhu-1","2020-08-11 11:16:09","false","util: use ErrorLog for context based logging

use ErrorLog for context based logging for
more detailed logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.31"
"ceph/ceph-csi","0fd091fa7f1c34ff05af053b1ed83466a939f8f5","Madhu-1","2019-03-04 13:32:10","false","skip errcheck

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",32,14,0,1,"2018-01-08 15:47:21","422.16"
"ceph/ceph-csi","3c1ae4c5c800201f0c351d34be238b35997ec857","Madhu-1","2022-05-24 03:48:18","false","deploy: update snapshotter version to v6

external-snapshotter v6.0.0 is released updating
the snapshotter to v6.0.0

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",35,52,1,1,"2018-01-08 15:47:21","1596.5"
"ceph/ceph-csi","20dbbe54b0b4f5c9b73eb83fa8e8c3256e600b00","Madhu-1","2020-08-11 11:40:36","false","cephfs: replace klog.Warningf with util.WarningLog in deleteSnapshot

replace klog.Warningf with util.WarningLog in deleteSnapshot
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.33"
"ceph/ceph-csi","ab033f85dfd715ea90a4656f0379344be935534d","nixpanic","2020-08-07 07:13:53","false","util: add FatalLog(), ErrorLog() and WarningLog() functions

These functions will always log the message, irrespectively of the
log-level that has been configured.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","940.14"
"ceph/ceph-csi","cc6921fbd3a2008af70d89a137e9fc749d6f3d11","gman0","2018-04-13 12:29:54","false","moved cephfs mounting logic to volumemounter",2,3,0,0,"2018-01-08 15:47:21","94.86"
"ceph/ceph-csi","520ceb6dcbe2004209f62ae4e303818ab2e4c6a7","Madhu-1","2020-01-20 11:28:30","false","Fix allignment issue in shellscript

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",108,24,0,1,"2018-01-08 15:47:21","742.32"
"ceph/ceph-csi","b5320d92735655f64d60bdd574eef321280cc879","Madhu-1","2020-08-10 05:32:10","false","e2e: add backend validation for pvc restore and clone

added backend subvolume validation for cephfs
snapshot restore and pvc to pvc clone.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",120,31,0,1,"2018-01-08 15:47:21","942.07"
"ceph/ceph-csi","fb9ae06b1f06ae510a8fb411624651ff1a474941","nixpanic","2020-08-19 06:23:57","false","ci: mark .commitlintrc.yml as doc-only

Signed-off-by: Niels de Vos <ndevos@redhat.com>",120,31,0,1,"2018-01-08 15:47:21","951.11"
"ceph/ceph-csi","cc5684dbd8442b8fa8cd56ef5b2f1fe43f92870c","nixpanic","2020-12-08 10:44:04","false","util: add support for Hashicorp Vault with Tokens per Tenant

Tenants (Kubernetes Namespaces) can use their own Vault Token to manage
the encryption keys for PVCs. The working is documented in #1743.

See-also: #1743
Closes: #1500
Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,35,0,1,"2018-01-08 15:47:21","1061.29"
"ceph/ceph-csi","8aae7b553c0c3cd2bd2643f2ed1b3811e8417f5c","Madhu-1","2020-07-08 01:58:56","false","ci: update minikube version to latest release

updated minikube to latest release v1.12.0

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",110,30,0,1,"2018-01-08 15:47:21","910.92"
"ceph/ceph-csi","0e610985220b648bbc9e093f2751e6705fd1d397","humblec","2019-06-07 11:33:18","true","Merge pull request #387 from humblec/social

Update readme with contact section",78,17,0,1,"2018-01-08 15:47:21","515.07"
"ceph/ceph-csi","0f626b705ad51b961ae0980f0d1cb50a30c1f927","irq0","2022-07-13 15:59:10","false","e2e: Add helper to run encryption tests on block and file

Add a `By` wrapper to parameterize encryption related test functions
and run them on both block and file encryption

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",41,54,1,0,"2018-01-08 15:47:21","1646.01"
"ceph/ceph-csi","27435100099a0457db4d20d85d7dcf5d1f2db566","nixpanic","2022-03-25 14:16:32","false","doc: example of StorageClass for NFS-provisioning

Signed-off-by: Niels de Vos <ndevos@redhat.com>",44,51,1,1,"2018-01-08 15:47:21","1537.94"
"ceph/ceph-csi","e0ac70f8fba5a93d0759b054af4aae10ed98cb7b","nixpanic","2021-08-03 10:29:04","false","e2e: use official CentOS container location

registry.centos.org is not officially maintained by the CentOS
infrastructure team. The container images on quay.io are the official
once and we should use those instead.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",120,43,0,1,"2018-01-08 15:47:21","1301.53"
"ceph/ceph-csi","23817c1a833dc593343684b1c5c40914df0f7da2","nixpanic","2020-10-26 13:18:48","false","cleanup: do not panic on invalid drivername

When the cephcsi executable receives an error when calling
util.ValidateDriverName(), it panics due to klog.Fatalln(). The error
that util.ValidateDriverName() returns should be understandable enough,
so that users know what to investigate. A Go panic on a user error is
not very userfriendly, and does not provide any additional usefil
information.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,33,0,1,"2018-01-08 15:47:21","1018.4"
"ceph/ceph-csi","def44cac904eb55f5cb62a068ef635101c928b90","Yuggupta27","2020-07-25 16:37:40","false","ci: Add jobs for upgrade testing

Added two jobs for upgrade testing of
cephfs and rbd, with default as upgrade
version as v2.1.2

Signed-off-by: Yug <yuggupta27@gmail.com>",115,30,0,0,"2018-01-08 15:47:21","927.53"
"ceph/ceph-csi","1171111a94a9d24e256b4ee03d68d73b868e2510","humblec","2021-10-01 04:09:47","false","e2e: deletePodWithLabel fails on unparam linter

this commit address the unparam linter error on deletePodWithLabel
function.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",59,45,0,1,"2018-01-08 15:47:21","1359.27"
"ceph/ceph-csi","aba6979d294b5a271d17dc8c56be7bf5fa824cd5","Madhu-1","2022-01-21 09:32:34","false","cleanup: use os.ReadFile to read file

as ioutil.ReadFile is deprecated and
suggestion is to use os.ReadFile as
per https://pkg.go.dev/io/ioutil updating
the same.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,48,1,1,"2018-01-08 15:47:21","1473.74"
"ceph/ceph-csi","04e99ae2e065b92299a7b71aa23ceb999cb6b5b1","Madhu-1","2021-11-08 09:34:40","false","ci: update minikube to v1.24.0

update minikube version to latest
available version i.e 1.24.0

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",56,46,0,1,"2018-01-08 15:47:21","1396.49"
"ceph/ceph-csi","a3d2980311c18a5d7287639b37232a32b7aeb104","Madhu-1","2020-04-15 02:31:15","false","Update Mergify for v2.1.0 backports

Updated Mergify rules for backporting PR's
to release-v2.1 branch and to auto merge the
PR if author is mergify bot

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",104,27,0,1,"2018-01-08 15:47:21","826.95"
"ceph/ceph-csi","f4a0726226c4180c5173dd36b024fabab699c5c8","Madhu-1","2019-02-27 06:45:40","false","Fix rbac issue in rbd plugin

remove unwanted rules and update
rbac to have permission to modify
endpoints and configmaps in the
current namespace.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",31,14,0,1,"2018-01-08 15:47:21","413.87"
"ceph/ceph-csi","e2890a27ffe7c530295c62de3bf159dbdbc8537e","Madhu-1","2019-09-17 10:30:16","false","connect to provisioner socket

Fixes: #619

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",84,20,0,1,"2018-01-08 15:47:21","614.03"
"ceph/ceph-csi","e42e66ff30ba46c8d3d4c8ecb65d28255ef3940c","Madhu-1","2019-01-16 13:17:29","false","user errors.New if error formatting is not required

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",17,12,0,1,"2018-01-08 15:47:21","373.15"
"ceph/ceph-csi","31c7c95fdbabb4e43bcf7551cd0b8a596d94b606","Madhu-1","2020-08-18 02:25:10","false","cephfs: check error output contains Error: ENOENT

execCommandErr returns both error and stderror
message. checking strings.HasPrefix is not helpful
as the stderr will be the first string. its good
to do string comparison and find out that error
is volume not found error.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","949.94"
"ceph/ceph-csi","eb14742874681ebc15e0cafe3e8bf1449df48726","Madhu-1","2019-02-28 08:11:11","false","bump helm chat version from 0.4.0 to  0.5.0

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",31,14,0,1,"2018-01-08 15:47:21","414.93"
"ceph/ceph-csi","76c2f3c109236d8e631bdb277f78c4aecae19f52","Madhu-1","2020-07-12 04:42:19","false","cleanup: re-use flattenTemporaryClonedImages to reduce duplicate code

re-use flattenTemporaryClonedImages to avoid code duplication

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",114,30,0,1,"2018-01-08 15:47:21","914.04"
"ceph/ceph-csi","07effb9499219216b75d7eaf563f850ebbe57710","gman0","2018-12-18 20:10:02","true","Merge pull request #111 from mcronce/v1.0-kube-fixes

v1.0.0 k8s fix",17,11,0,0,"2018-01-08 15:47:21","340.18"
"ceph/ceph-csi","a0be6e27d369e8fd1fadfcc97543f777ab6d54eb","mcronce","2018-12-14 20:16:11","false","deploy/cephfs/kubernetes/csi-cephfsplugin.yaml:  Add /var/lib/kubelet/plugins/kubernetes.io/csi bidirectional mount into plugin container",16,11,0,0,"2018-01-08 15:47:21","336.19"
"ceph/ceph-csi","6256be0ce032ab2efcf6c49d222127d2133dd95e","nixpanic","2021-02-09 12:03:17","false","e2e: increase runtime timeout to 90 minutes

Sometimes testing takes more than 60 minutes. When that is the case, the
60 minute timeout causes a golang panic in the test suite.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",84,37,0,1,"2018-01-08 15:47:21","1126.59"
"ceph/ceph-csi","ecf768ec41499b99c21d057d257136a5e69e250a","Yuggupta27","2020-12-16 11:22:56","false","helm: Add storage class template to ceph-csi-rbd

Deploy storage class when using the helm chart.

Signed-off-by: Yug <yuggupta27@gmail.com>",76,35,0,0,"2018-01-08 15:47:21","1068.32"
"ceph/ceph-csi","fde2a666ef811715ad8433b8cea885a6e9b74b2b","humblec","2019-07-29 08:26:17","true","Merge pull request #506 from Madhu-1/unmap

unmap rbd volume if we fail to get devicepath",77,19,0,1,"2018-01-08 15:47:21","565.94"
"ceph/ceph-csi","0fc7f4513bc1297cb56dcf0606c022e2ed9fc66c","humblec","2019-08-19 04:46:22","false","Snashotter update

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",82,19,0,1,"2018-01-08 15:47:21","585.79"
"ceph/ceph-csi","729e2419efe235d3addf5f6f4a803c62efd55fac","nixpanic","2020-12-08 14:06:48","false","cleanup: return error type in detachRBDImageOrDeviceSpec()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,35,0,1,"2018-01-08 15:47:21","1061.43"
"ceph/ceph-csi","c5762b6b5c2676db0b39297dfe117882ed260ed7","ShyamsundarR","2019-06-01 21:26:42","false","Modify RBD plugin to use a single ID and move the id and key into the secret

RBD plugin needs only a single ID to manage images and operations against a
pool, mentioned in the storage class. The current scheme of 2 IDs is hence not
needed and removed in this commit.

Further, unlike CephFS plugin, the RBD plugin splits the user id and the key
into the storage class and the secret respectively. Also the parameter name
for the key in the secret is noted in the storageclass making it a variant and
hampers usability/comprehension. This is also fixed by moving the id and the key
to the secret and not retaining the same in the storage class, like CephFS.

Fixes #270

Testing done:
- Basic PVC creation and mounting

Signed-off-by: ShyamsundarR <srangana@redhat.com>",76,17,0,0,"2018-01-08 15:47:21","509.49"
"ceph/ceph-csi","d350b13d02e72e69aa219a6486e862a1b3aacf5f","Madhu-1","2019-07-26 10:53:39","false","unmap rbd volume if we fail to get devicepath

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",77,18,0,1,"2018-01-08 15:47:21","563.05"
"ceph/ceph-csi","98e97baa60a4ec8c00b5495c0a20b420980a1d03","Madhu-1","2020-08-11 12:07:45","false","cephfs: replace Errorf with ErrorLog in checkVolExists

replace Errorf with ErrorLog in checkVolExists
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.35"
"ceph/ceph-csi","63b795d1652025ab7843670cadc05e39c0b3995b","Madhu-1","2020-07-08 11:46:31","false","e2e: provide an option to skip rbd and cephfs e2e

Added two new parameters for e2e test to skip
rbd and cephfs tests. This will help us to
run more test in Travis CI.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",110,30,0,1,"2018-01-08 15:47:21","911.33"
"ceph/ceph-csi","4e82384b43478b4f034b41e90760ed1a9d962166","Madhu-1","2020-07-07 07:19:05","false","rbd: check image not found error

during the checkSnapCloneExists we are checking
the image, if the image not found we are deleting
the snapshot on the parent image, This PR corrects
the comparasion. instead of snapshotNotFound we need
to check ImageNotFound error.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",110,30,0,1,"2018-01-08 15:47:21","910.15"
"ceph/ceph-csi","3f8bd3b2a65c36b63e798ce7a3a4139b73017430","Madhu-1","2019-07-12 10:18:00","false","Update driver version during build time

update driver version and add git commit
to the image. This will help us to identify
what latest git commit image contains.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",82,18,0,1,"2018-01-08 15:47:21","549.02"
"ceph/ceph-csi","9d4b49b54b3465d69edccdd3acf6ea14d704a9f2","rootfs","2018-02-20 16:10:59","false","node server: don't persist vol

Signed-off-by: Huamin Chen <hchen@redhat.com>",1,1,0,0,"2018-01-08 15:47:21","42.02"
"ceph/ceph-csi","49f5ce22d306d38ddca16ed259cd1628d567ff65","rootfs","2019-02-27 14:22:54","true","Merge pull request #207 from Madhu-1/remove-dep

move csi-common to ceph-csi",31,14,0,0,"2018-01-08 15:47:21","414.19"
"ceph/ceph-csi","4865061ab9902af0e04002977800edba5e85ad80","Madhu-1","2021-09-01 12:15:33","false","util: create ceph configuration files if not present

create ceph.conf and keyring files if its not
present in the /et/ceph/ path.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",109,44,0,1,"2018-01-08 15:47:21","1329.6"
"ceph/ceph-csi","7bbd2ea2842147f5e9a1c05e721379f9eb99708d","Madhu-1","2021-11-08 10:00:09","false","rbd: use small case of error message

the error message should not start with
the capital letter changing the case as
per the standard.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",56,46,0,1,"2018-01-08 15:47:21","1396.51"
"ceph/ceph-csi","62a9ab6d9fa77f196869930a37f489c6e7884216","Madhu-1","2021-09-17 08:24:02","false","helm: remove securityContext from cephfs provisioner

we dont need securityContext for the cephfs provisioner
pod as its not doing any special operations.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",62,44,0,1,"2018-01-08 15:47:21","1344.44"
"ceph/ceph-csi","e0935a9772f118c71f5e586acee040ab01fc7c37","gman0","2018-03-20 15:21:41","false","added cephfs/secret.yaml",2,2,0,0,"2018-01-08 15:47:21","71.98"
"ceph/ceph-csi","c04b903ecad2b666aa8e4e62ec6d5073b6313d64","Madhu-1","2020-06-25 13:00:31","false","rbd: add listsnapshots function

added listsnapshots function for an
rbd image to list all the snapshots
created from an rbd images, This will
list the snapshots which are in trash also.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",117,29,0,1,"2018-01-08 15:47:21","897.38"
"ceph/ceph-csi","b82d75e8463dc9f46563416f100b14608ca7ccd7","humblec","2019-06-24 15:11:35","false","Revert ""Update README.md""

This reverts commit cf426fff252d53704c6dfbd5634eb05b8ec1c485.",78,17,0,1,"2018-01-08 15:47:21","531.23"
"ceph/ceph-csi","64ce5e0949da0e1684456f56d18f89f5850076b1","Madhu-1","2021-11-30 06:16:34","false","rbd: check local image state during promote operation

rbd mirroring CLI calls are async and it doesn't wait
for the operation to be completed. ex:- `rbd mirror image enable`
it will enable the mirroring on the image but it doesn't
ensure that the image is mirroring enabled and healthy
primary. The same goes for the promote volume also.
This commits adds a check-in PromoteVolume to make sure
the image in a healthy state i.e `up+stopped`.

note:- not considering any intermediate states to make
sure the image is completely healthy before responding
success to the RPC call.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",52,47,0,1,"2018-01-08 15:47:21","1417.35"
"ceph/ceph-csi","6fbde110cded520023cca8afbb78069a100d05e0","Madhu-1","2019-02-18 11:46:59","false","skip redundant error check

correct misspelled  word

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",28,13,0,1,"2018-01-08 15:47:21","405.08"
"ceph/ceph-csi","549bfedc94745e3558f4d2a836631a6b96c3905b","Madhu-1","2021-12-20 15:29:37","false","rbd: remove extra logging from createBackingImage

we are already logging the rbd image details
and the snapshot details after creating the
clone.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",57,47,1,1,"2018-01-08 15:47:21","1437.74"
"ceph/ceph-csi","b71a9bfe4060ed384c43a130c0200a6ee66b8273","Madhu-1","2019-01-25 19:09:46","false","Fix issue with error handling in metadata store

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",23,13,0,1,"2018-01-08 15:47:21","382.39"
"ceph/ceph-csi","9cec05f484b0fbdd6d7b168267128e30ceb344d0","iPraveenParihar","2023-10-30 08:21:28","false","util: added read affinity related functions and unit testcases

This commit adds util functions related to read affinity
and unit testcases for the same.

Signed-off-by: Praveen M <m.praveen@ibm.com>",19,70,1,0,"2018-01-08 15:47:21","2117.94"
"ceph/ceph-csi","55ad4924b33038e2fb05c88e47082879d93a6bd3","Madhu-1","2019-02-22 04:50:17","false","update readme to deploy cephfs in  namespace

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",30,13,0,1,"2018-01-08 15:47:21","408.79"
"ceph/ceph-csi","211d78974e8133caa7c14634ede879e95abd90ed","rootfs","2019-02-04 14:04:14","true","Merge pull request #142 from rootfs/node-reg

cope with latest changes in csi provisioner and deprecations",22,13,0,0,"2018-01-08 15:47:21","392.18"
"ceph/ceph-csi","b1710f4c536297f4eb989be76dd7b69eff698640","Madhu-1","2021-06-28 06:46:25","false","util: add method to get rados connection

New go-ceph admin package api's expects to
pass the rados connection as argument.
added new method called GetRBDAdmin
to get admin connection to administrate
rbd volumes.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",116,42,0,1,"2018-01-08 15:47:21","1265.37"
"ceph/ceph-csi","a1c8942e2b40b94af4e71b543e3217069c9f6d73","Madhu-1","2020-11-30 10:21:00","false","cephfs: remove unused invalidCommand error const

removed unused invalidCommand from cephfs
error const.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",85,35,0,1,"2018-01-08 15:47:21","1052.27"
"ceph/ceph-csi","f134fe5e86d2184893c98e4eb692b9398df0cd35","Madhu-1","2020-05-20 11:39:28","false","ci: Add commitlint to travis CI

Added commitlint tool to travis CI
to test the commit messages.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",111,28,0,1,"2018-01-08 15:47:21","862.33"
"ceph/ceph-csi","074c937a08f95321d6942c6263036bb5e2ba49d1","humblec","2021-04-21 08:56:54","false","cleanup: correct typo in vault_tokens.go

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",85,39,0,1,"2018-01-08 15:47:21","1198.46"
"ceph/ceph-csi","5b537754a73c356f440a920673bbbff92d41f049","humblec","2020-10-19 07:31:11","false","cephfs: replace variable name for builtin `cap` attribute

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",77,33,0,1,"2018-01-08 15:47:21","1011.16"
"ceph/ceph-csi","0e60dabca34abc802e607a5e700395376f624d51","mkimuram","2018-11-07 02:05:19","false","Move resolving bind mount logic from k8s",15,10,0,0,"2018-01-08 15:47:21","299.43"
"ceph/ceph-csi","f0074a3ebf6dc5358138ea34bf282226b4cb5670","yati1998","2022-07-20 06:34:10","false","deploy: enable HonorPVReclaimPolicy feature gate

This commit enables the HonorPVReclaimPolicy feature
gate.

fixes: #3230

Signed-off-by: Yati Padia <ypadia@redhat.com>",40,54,1,0,"2018-01-08 15:47:21","1652.62"
"ceph/ceph-csi","0b29d3b247570b6d7ae8704c3a1119b38469834e","agarwal-mudit","2021-02-08 13:51:25","false","ci: update rook.sh and ceph cluster version

Changes:
1. Add a variable in build.env for rook ceph cluster version.
2. Modify rook.sh so that it can deploy ceph cluster with
   desirable version also rather than the one which rook installs
   by default.
3. Remove the code which is no longer required:
   a. Code which was added to test snapshot feature.
   b. Code which was required because
      https://github.com/rook/rook/pull/5925 was not fixed.

Signed-off-by: Mudit Agarwal <muagarwa@redhat.com>",83,37,0,0,"2018-01-08 15:47:21","1126.67"
"ceph/ceph-csi","029b5004aaeecb50ea89f42eaa24c0c1bbf673d6","Madhu-1","2021-04-20 11:21:24","false","doc: update upgrade doc for v3.3.0

As we have v3.3 as the latest release
updating the upgrade doc in the devel
branch to point to the same.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",86,39,0,1,"2018-01-08 15:47:21","1197.57"
"ceph/ceph-csi","34d0ff0d702abe630dbf4de7209f85b1fea5c157","Madhu-1","2020-12-09 06:01:55","false","cephfs: make purgeVolume method of volumeOptions

converted purgeVolume from function to method
of volumeOptions.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",73,35,0,1,"2018-01-08 15:47:21","1061.09"
"ceph/ceph-csi","8bae51db12ab2d8687fa6fcc72b1fed4452da6e1","Madhu-1","2021-12-09 05:14:45","false","ci: ignore go.sum from codespell check

as go-sum is auto generated, ignore checking
codespell on this file.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",50,47,1,1,"2018-01-08 15:47:21","1426.31"
"ceph/ceph-csi","11a6f6c1dd908bd393590898327eedea8e9d63c8","Madhu-1","2020-07-20 04:33:55","false","rbd: Support data-pool when cloning rbd image

Added support to clone an image in data-pool
during CreateVolume RPC call.

updates #1188

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",116,30,0,1,"2018-01-08 15:47:21","922.03"
"ceph/ceph-csi","9bebd829ab8d5c37dec31bd416cecea86032db46","Madhu-1","2019-03-05 12:16:17","false","update readme for raw block pvc

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",30,14,0,1,"2018-01-08 15:47:21","423.1"
"ceph/ceph-csi","8992e9d321e3108fc5b4b7cd87f4465a4f19892f","Madhu-1","2019-09-10 11:04:35","false","update readme for v1.2.0 release

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",85,20,0,1,"2018-01-08 15:47:21","607.05"
"ceph/ceph-csi","9b518726abc7bf46cdbf0f092eb87665f81fc3d4","Madhu-1","2020-06-24 06:44:02","false","rbd: add hardlimt and softlimit flag

added Hardlimit and Softlimit flags for cephcsi
arguments. When the Softlimit is reached cephcsi
will start a background task to flatten the rbd
image and return success and if the hardlimit
is reached it will start a background task
to flatten the rbd image and return ready
to use as false to make sure that the image
will not be used until it is flatten.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",115,29,0,1,"2018-01-08 15:47:21","896.12"
"ceph/ceph-csi","0166817de493e4dfcf1bb8c95858658ad6f22f63","humblec","2021-04-21 08:04:03","false","cleanup: correct typo in travis scripts

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",85,39,0,1,"2018-01-08 15:47:21","1198.43"
"ceph/ceph-csi","3bc6771df8d1612f296ed79cf3f68c6535d1cf28","humblec","2019-06-24 07:58:39","false","Migrate from framwork.Logf and also use new nsenter interface

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",79,17,0,1,"2018-01-08 15:47:21","530.92"
"ceph/ceph-csi","f69656751714680d395c3e5b7fc25d6708eec0ba","Madhu-1","2020-04-13 07:03:08","false","Update Travis CI to install helm3

Updated CI scripts to install helm3

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",104,27,0,1,"2018-01-08 15:47:21","825.14"
"ceph/ceph-csi","f4d9fd0e89cc792953c58784f039f15e18512b14","Yuggupta27","2021-04-07 10:53:31","false","ci: Updated mergify rules for containerized-tests

Since github actions cover all the tests covered by
the containerized tests, disabling them in upstream
to avoid running repetitive tests and properly utilize
CI instances.
The test will still be available to run locally.

Signed-off-by: Yug <yuggupta27@gmail.com>",88,39,0,0,"2018-01-08 15:47:21","1185.55"
"ceph/ceph-csi","8c53b5eb79611a8de677ade185d6987d687cab1f","gman0","2018-06-12 15:09:44","false","cephfs: Identity Service advertises PluginCapability_Service_CONTROLLER_SERVICE",3,5,0,0,"2018-01-08 15:47:21","153.97"
"ceph/ceph-csi","73e2ffe8b851929d2cd44d9c132c28574454911e","Madhu-1","2021-09-06 12:18:53","false","cleanup: move cephfs csi spec validation to validator

moved the cephfs related validation like
validating the input parameters sent in the
GRPC request to a new file.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",66,44,0,1,"2018-01-08 15:47:21","1334.61"
"ceph/ceph-csi","341a3c9f5939e252105688e41bd92fb738a4c4ae","Madhu-1","2020-07-06 05:52:30","false","journal: replace rados CLI with go-ceph to storeimage id

Moved the implementation of storeImageID from rados
CLI to go-ceph api.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",112,30,0,1,"2018-01-08 15:47:21","909.09"
"ceph/ceph-csi","ae6b77f105eca74d34a5e199ed7ca45d92f2502a","Madhu-1","2020-08-11 11:50:37","false","cephfs: add comment for exported CloneStatus struct

added comment for exported structure.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.34"
"ceph/ceph-csi","78267692fc7ecf8b5d6d73a69476e2b12a7e1785","Madhu-1","2020-05-15 08:25:09","false","CI: Add Rule to auto merge PR

If the PR is having trivial changes or the reviewer is
confident enough that PR doesn't need a second review,
the reviewer can set `ready-to-merge` label on the PR.
The bot will merge the PR if it's having one approval and the
label `ready-to-merge`

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",114,28,0,1,"2018-01-08 15:47:21","857.19"
"ceph/ceph-csi","7c9fee17af7d564bd995f610893ae456ab8799c0","Madhu-1","2020-08-19 10:54:45","false","rbd: replace klog with util logger in snapshot.go

rbd: replace klog with util logger in snapshot.go

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",122,31,0,1,"2018-01-08 15:47:21","951.3"
"ceph/ceph-csi","02367c4a3f301e4c6f729b6318dd84c5c6a6b705","humblec","2020-04-07 16:55:44","false","Cleanup vendor dependencies

 - `go mod {tidy and vendor}.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",103,27,0,1,"2018-01-08 15:47:21","820.55"
"ceph/ceph-csi","af0cd0fd80db35bb3011ca7455a9f5f49e4b2e87","humblec","2022-06-20 10:31:01","false","rebase: use v6.0.1 of snapshot client

eventhough the snapshotter is of 6.0.1 the client libraries
are of 6.0.0 and this commit update the same.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",41,53,1,1,"2018-01-08 15:47:21","1622.78"
"ceph/ceph-csi","5635e99e378c90a2108cec86c329cee2773b94b8","humblec","2021-06-10 11:10:48","false","e2e: correct gosec marker for credentials rule

The marker for hardcoded credentials check was set wrongly
and this patch address the same

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",108,41,0,1,"2018-01-08 15:47:21","1247.56"
"ceph/ceph-csi","306d5b1da0da6d1a8dada42d6d455eeee8e2cf8b","Yuggupta27","2020-06-28 18:01:01","false","ci: add pylint as part of CI

add pylint to catch static issues of python
files in the repo.

User can now run make lint-py for pylint
check on python files.

Signed-off-by: Yug Gupta <ygupta@redhat.com>",116,30,0,0,"2018-01-08 15:47:21","900.59"
"ceph/ceph-csi","e261191f0b5179ce87d88162822e43d4460c003d","nixpanic","2021-03-02 13:26:12","false","e2e: pass namespace once in deletePodWithLabel()

Currently framework.RunKubectl() adds `--namespace=...` 2x to the
kubectl command. Once is sufficient.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",92,38,0,1,"2018-01-08 15:47:21","1150.65"
"ceph/ceph-csi","902d57fb28a196d0000fe40f7e58dbb71ffd6817","kfox1111","2019-02-06 17:28:53","false","Fix package check. Remove extra files.

This fixes the package check on release and
removes some extra files.

Signed-off-by: Kevin Fox <Kevin.Fox@pnnl.gov>",26,13,0,0,"2018-01-08 15:47:21","394.32"
"ceph/ceph-csi","18f4e9d519538012e271322fa23e25fe1b208515","Madhu-1","2020-08-10 06:19:38","false","util: move csiconfigfile to util

as we have csiconfigfile in both cephfs
and rbd moving the configfile path to
util folder.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",120,31,0,1,"2018-01-08 15:47:21","942.11"
"ceph/ceph-csi","9f76f6bd5953411c26b96da1f813d5546cf274d1","Madhu-1","2019-01-17 05:07:59","false","Remove dead code

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",16,12,0,1,"2018-01-08 15:47:21","373.81"
"ceph/ceph-csi","22365ab77f6650f2ba3723829509ef55dbf523a2","Madhu-1","2021-12-15 05:40:50","false","cleanup: add cleanup helper for incorrect thick volume

added a new helper function called cleanupThickClone
to cleanup the snapshot and clone if the thick
provisioning is not fully completed.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",50,47,1,1,"2018-01-08 15:47:21","1432.33"
"ceph/ceph-csi","7d3a6105c79584bae6beda94ee466f62982f97f2","Madhu-1","2019-06-10 07:22:13","false","Fix misspell words

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",79,17,0,1,"2018-01-08 15:47:21","516.9"
"ceph/ceph-csi","32d33a4b88b15fa3ae3b33bca7fa1e4cd7dfe9e9","mcronce","2018-11-23 20:22:17","false","Gopkg.toml:  Updated container-storage-interface/spec version to v1.0.0",16,10,0,0,"2018-01-08 15:47:21","315.19"
"ceph/ceph-csi","c6b288779aa1f04a787edb9fa129759a7cce67f8","Madhu-1","2021-12-20 15:01:11","false","rbd: correct logging for clone

log the rbdVolume and the rbdSnapshot
after creating the clone from snapshot.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",57,47,1,1,"2018-01-08 15:47:21","1437.72"
"ceph/ceph-csi","2de2d348c14553c34bdebc3030cdd0dc2724ba4c","Madhu-1","2020-04-21 13:30:40","false","Add a travis job to build multi arch image

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",101,27,0,1,"2018-01-08 15:47:21","833.41"
"ceph/ceph-csi","e788328750e890b6a2feab6129befba232e8dbee","Madhu-1","2020-02-26 08:11:05","false","Refractor E2E to reduce code duplication

Updated E2E to reduce code duplication
and create resouces in different namespaces.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",107,26,0,1,"2018-01-08 15:47:21","778.18"
"ceph/ceph-csi","ca270015197b99cf90520b9d7a5da3e29cb84f4e","Madhu-1","2019-08-12 05:32:59","false","Fix CI failure in ceph-csi

rook master deploys the ceph-csi
by default now, this will affect the
ceph-csi testing failure, This PR will
remove the ceph-csi resources created rook

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",84,19,0,1,"2018-01-08 15:47:21","578.82"
"ceph/ceph-csi","c245436ec4f89e6801a21782da64aaa0d370070b","Madhu-1","2022-04-14 10:15:11","false","util: fix logging in ExecuteCommandWithNSEnter

log the nsenter and its argument after executing
the command with the nsenter CLI.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",44,51,1,1,"2018-01-08 15:47:21","1556.77"
"ceph/ceph-csi","edf6abce99aecc78241732a7cd54f449cd7d1ebf","Madhu-1","2020-12-04 05:32:12","false","ci: add github workflows for static checks

adding a github workflow to run static checks
inside a container.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",80,35,0,1,"2018-01-08 15:47:21","1057.07"
"ceph/ceph-csi","d4186a688056e492ed0eb9d0fece6a6bd126ba60","Madhu-1","2020-08-04 08:42:16","false","rbd: discard flattening error if the image doesnt have parent

if the image is created without flattening image-feature
the image will get few image-features by default, deep-flatten
is one of them. if the image doesnot have any parent
the rbd image flattening will fail, This commit discards
error message if the image doesnt have any parent.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",117,31,0,1,"2018-01-08 15:47:21","937.2"
"ceph/ceph-csi","2b7aade289f76656dfc7364cdd13e76269d42578","Madhu-1","2020-08-11 12:23:25","false","cephfs: replace Errorf with ErrorLog in getVolumeRootPathCeph

replace Errorf with ErrorLog in getVolumeRootPathCeph
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.36"
"ceph/ceph-csi","a93f3e24ba43760ef6cd310118beff52acb4e068","iPraveenParihar","2023-10-30 08:20:30","false","util: moved GetNodeLabels() under internal/util/k8s

Signed-off-by: Praveen M <m.praveen@ibm.com>",19,70,1,0,"2018-01-08 15:47:21","2117.94"
"ceph/ceph-csi","09e1c856d091dc40053d01b9e386f1e1b9f6db74","phlogistonjohn","2020-06-08 21:14:47","false","journal: do not return errors from remove omap func if omap missing

The previous function used to remove omap keys apparently did not
return errors when removing omap keys from a missing omap (oid).
Mimic that behavior when using the api.

Signed-off-by: John Mulligan <jmulligan@redhat.com>",114,29,0,0,"2018-01-08 15:47:21","880.73"
"ceph/ceph-csi","ce93c02525c2cb1a1893b003b5e7d6425decc12f","Madhu-1","2020-08-17 05:33:14","false","rebase: update golang version to v.1.15

as the  golang v1.15 is released,updated cephcsi
golang version to 1.15

kubernetes 1.19 is going to be built with
golang 1.15 see https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.19.md#api-change
Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","949.07"
"ceph/ceph-csi","d4a67c05f352b0065081d490a2bf9e27aca58421","Madhu-1","2019-09-20 10:45:13","false","Remove nsenter packages from vendor

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",86,20,0,1,"2018-01-08 15:47:21","617.04"
"ceph/ceph-csi","70674565df3e593e5b9127d9700374e598638d5e","Madhu-1","2022-05-04 08:57:18","false","rbd: consider rbd as default mounter if not set

For the default mounter the mounter option
will not be set in the storageclass and as it is
not available in the storageclass same will not
be set in the volume context, Because of this the
mapOptions are getting discarded. If the mounter
is not set assuming it's an rbd mounter.

Note:- If the mounter is not set in the storageclass
we can set it in the volume context explicitly,
Doing this check-in node server to support backward
existing volumes and the check is minimal we are not
altering the volume context.

fixes: #3076

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,52,1,1,"2018-01-08 15:47:21","1577.72"
"ceph/ceph-csi","44da7ffb4e4d8861265f3ecd421cd06dfce9f34a","Madhu-1","2020-05-18 13:07:58","false","e2e: Add testcase of invalid mount option

Added a test case to cover unmap of rbd image
if the mounting fails. if we pass the invalid
mount option the expectation is that mounting
of rbd image to stagingpath fails. as the unmap
happens it should not block the rbd pvc deletion
saying rbd image is in-use.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",117,28,0,1,"2018-01-08 15:47:21","860.39"
"ceph/ceph-csi","f4a1d578a2305ee8a451ef794d73020fd5f02fa8","humblec","2019-02-04 13:41:31","false","Fix build failure

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",22,13,0,1,"2018-01-08 15:47:21","392.16"
"ceph/ceph-csi","c5bc3d38c4eb7cc71091d69edd70b8a17ea707fa","yati1998","2021-04-27 10:53:01","false","ci: update static check tools

This PR updates the static check tools to
the latest version.
Further needs to resolve all the errors after
updating the version.

Updates: #1586

Signed-off-by: Yati Padia <ypadia@redhat.com>",88,40,0,0,"2018-01-08 15:47:21","1204.55"
"ceph/ceph-csi","87dd3622fb73e1a99829f4d6b0f36115860ca403","rootfs","2019-01-09 14:39:11","true","Merge pull request #118 from mickymiek/add-snapshotter-yamls

Added snapshotter deployments files + instuctions to deploy",17,12,0,0,"2018-01-08 15:47:21","366.2"
"ceph/ceph-csi","776821f17fa7fe5ce5c1a9c36c9b1a2e564ca5e9","yati1998","2022-06-15 07:14:49","false","deploy: update csi-provisioner to latest version

This commits updates csi-provisioner sidecar to
latest version i.e., v3.2.0.

fixes: #3184

Signed-off-by: Yati Padia <ypadia@redhat.com>",41,53,1,0,"2018-01-08 15:47:21","1617.64"
"ceph/ceph-csi","7f7a41d23ac47da1d2c190807fd705c0750b57c7","yati1998","2021-06-25 11:19:37","false","cleanup: use %w to format errors

Use %w instead of %v to format errors.

Updates: #1586

Signed-off-by: Yati Padia <ypadia@redhat.com>",118,41,0,0,"2018-01-08 15:47:21","1262.56"
"ceph/ceph-csi","0bd45a5eb172477ea29e3b9c97eb79b654587044","Madhu-1","2020-08-17 05:58:59","false","cephfs: use string const for cli error comparison

we should not return the CLI errors in GRPC errors
we need to return proper readable error messages
to the user for better understanding and better
debugging.

updates #1242

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","949.09"
"ceph/ceph-csi","2808d526bbeff302ba1d90c31d22d127a2c1cf9f","Madhu-1","2020-08-11 14:42:21","false","rebase: update go-ceph to v0.5.0

as go-ceph is 0.5.0 is released updating
the dependency to latest release.
more info about release at
https://github.com/ceph/go-ceph/releases/tag/v0.5.0

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",122,31,0,1,"2018-01-08 15:47:21","943.45"
"ceph/ceph-csi","c15488692620a14f4b1aa10d40ef463673e33975","Madhu-1","2021-09-17 08:35:08","false","helm: remove extra volumes from cephfs plugin PSP

removed extra volume permissions from the cephfs
nodeplugin PSP.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",62,44,0,1,"2018-01-08 15:47:21","1344.45"
"ceph/ceph-csi","68e69502e81ccf36b1a4ca1a1f1eaa95cf05e27d","Madhu-1","2019-02-21 11:35:24","false","remove  secret and key  from logging

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",30,13,0,1,"2018-01-08 15:47:21","408.08"
"ceph/ceph-csi","aeebd5d03bdd35569d10643320e7efd6c9c04b10","humblec","2021-08-30 11:15:41","false","doc: remove upgrade instructions for earlier releases

As we have deprecated earlier versions than v3.3.0, it is not required
to keep the upgrade docs for the same. The upgrade doc for v3.2.0 to
v3.3.0 has been kept intact.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",106,44,0,1,"2018-01-08 15:47:21","1327.56"
"ceph/ceph-csi","edca3188288c0aa9fe9732fb0dd4eed5a19f7543","humblec","2020-08-13 16:07:26","false","rebase: update the CSI Spec to v1.3.0

This spec add the extra capability to  node and controller
volume to report volume condition of a pv..etc.

Refer # https://github.com/ceph/ceph-csi/issues/1356

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",120,31,0,1,"2018-01-08 15:47:21","945.51"
"ceph/ceph-csi","5fa1be586a0e67220ad42dfc023d128530d543f3","agarwal-mudit","2020-07-29 11:11:29","false","cephfs: fix tracevol.py to work with dynamic value of fsname

tracevol.py takes 'myfs' as default fsname, changed it so that it can work with
dynamic values of fsname.

Signed-off-by: Mudit Agarwal <muagarwa@redhat.com>",118,31,0,0,"2018-01-08 15:47:21","931.31"
"ceph/ceph-csi","89b326c896a48393f7d99ab94445857b2bda7006","Madhu-1","2020-09-21 05:38:14","false","cephfs: check ENOTEMPTY when removing subvolume

return a proper error message to the user when
the subvolume has the snapshots and it cannot
be removed until the snapshots on the subvolume
have to be deleted.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",132,32,0,1,"2018-01-08 15:47:21","983.08"
"ceph/ceph-csi","97acd47ae9b95f31738a8326fe720b94129dbdbf","Madhu-1","2020-12-09 07:50:53","false","build: remove ENV_CSI_IMAGE_VERSION from deploy.sh

as we are defining the image version in the
build.env use the same to build images.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",73,35,0,1,"2018-01-08 15:47:21","1061.17"
"ceph/ceph-csi","448be70682ec695149e209a0a5f43678a7b81135","Madhu-1","2021-03-30 04:44:32","false","rbd: early check for disabled,disabling in DisableVolumeReplication

added early check for disabling and disabled
image mirroring state in DisableVolumeReplication

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",91,39,0,1,"2018-01-08 15:47:21","1177.29"
"ceph/ceph-csi","27b46aba0895d2f3b5aca94c01d81d4ce518c24a","Madhu-1","2019-02-21 04:30:21","false","Add helm chat for cephfs

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",30,13,0,1,"2018-01-08 15:47:21","407.78"
"ceph/ceph-csi","420aa9ec577a974fd83c2a7e2b76bc8959d99586","Rakshith-R","2021-11-11 04:32:41","false","rbd: remove redundant rbdVol.getTrashPath() function

This commit removes rbdVol.getTrashPath() function
since it is no longer being used due to introduction
of go-ceph rbd admin task api for deletion.

Signed-off-by: Rakshith R <rar@redhat.com>",57,46,0,1,"2018-01-08 15:47:21","1398.28"
"ceph/ceph-csi","47e12a6b6c37c9f51ac5adf45410c37a335f52f2","dren-dk","2021-01-15 09:41:21","false","doc: explain why certain features are unsupported
Signed-off-by: Flemming Frandsen <dren.dk@gmail.com>",81,36,0,0,"2018-01-08 15:47:21","1102.5"
"ceph/ceph-csi","8cf869471f0a2a120bd89a6fcec682b7beff6c74","gman0","2019-01-25 14:06:06","true","Merge pull request #147 from Madhu-1/fix-snap

Fix snapshot time during snapshot create",24,13,0,0,"2018-01-08 15:47:21","382.18"
"ceph/ceph-csi","753dbc2303da4332231379f744726a3b531e3baf","mkimuram","2018-07-10 16:48:55","false","Fix Cephfs plugin to return false to ValidateVolumeCapabilities if Block volume is specified

Cephfs doesn't have a feature to provide Block Volume, therefore it should return false to ValidateVolumeCapabilities if Block Volume is specified.

Fixes #44",4,6,0,0,"2018-01-08 15:47:21","182.04"
"ceph/ceph-csi","2fa82b47ea275019a0538464472d792d0572acd8","rootfs","2018-08-06 13:12:24","true","Merge pull request #57 from gman0/v0.3.0-vendor

[CSI 0.3.0 1/4] vendor update",7,7,0,0,"2018-01-08 15:47:21","208.89"
"ceph/ceph-csi","b2fb43b335aa7eb05f807deff3030736c06215b6","Madhu-1","2020-12-04 08:27:42","false","cleanup: reduce the code complexity of controller

created a new helper function to getCredentials.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",80,35,0,1,"2018-01-08 15:47:21","1057.19"
"ceph/ceph-csi","6655b876832ce0b7cc2f23cdc1bb489e49e32ee8","gman0","2018-03-09 16:01:42","false","updated .gitignore",2,2,0,0,"2018-01-08 15:47:21","61.01"
"ceph/ceph-csi","ffab37f44f1f0409ebb89ab9d4e9e9d58dc56545","yati1998","2021-07-07 11:41:23","false","cleanup: resolves gocritic linter issues

This commit resolves gocritic linter errors.

Updates: #2250

Signed-off-by: Yati Padia <ypadia@redhat.com>",124,42,0,0,"2018-01-08 15:47:21","1275.58"
"ceph/ceph-csi","0e79135419cf4d600ec1a95dbdd36bc3a9f2fc45","nixpanic","2023-06-05 07:30:41","false","ci: prevent Retest Workflow from running on forked repos

Forked repositories contain the the `.github/workflows/` directory, and
therefore run all the GitHub Workflows located there. Some of the
workflows need additional configuration, like providing access to the
standard `GITHUB_TOKEN`. If the extra configuration is not done, the
GitHub Workflow will fail, and the owner of the forked repository will
receive regular notifications about that.

There is no need to run the ""retest"" workflow on forked repositories, so
it can be skipped by default.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",33,65,1,1,"2018-01-08 15:47:21","1973.91"
"ceph/ceph-csi","57d09895937910280699bceaf5228294b3758216","nixpanic","2020-06-25 06:41:35","false","cleanup: use errors.As() to compare errors in util/cephcmds

See-also: https://github.com/golang/go/wiki/ErrorValueFAQ#how-should-i-change-my-error-handling-code-to-work-with-the-new-features
Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,29,0,1,"2018-01-08 15:47:21","897.12"
"ceph/ceph-csi","e9033989a0b55664488c6d77c54e7e149a64c97b","sbezverk","2018-03-06 22:33:18","false","vendor updates",2,2,0,0,"2018-01-08 15:47:21","59.28"
"ceph/ceph-csi","b8fec4df64c909b906787c9e34afc20878fc8292","nixpanic","2020-12-10 15:49:53","false","doc: fix links for example yaml files

The yaml files for RBD encryption are located in examples/kms/vault, and
not in the examples/rbd directory.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",75,35,0,1,"2018-01-08 15:47:21","1062.5"
"ceph/ceph-csi","47d5b60af8d48574ff6d11ca37dbff5a6f56815b","nixpanic","2020-07-21 11:55:10","false","rbd: disable reflink while creating XFS filesystems

Current versions of the mkfs.xfs binary enable reflink support by
default. This causes problems on systems where the kernel does not
support this feature. When the kernel the feature does not support, but
the filesystem has it enabled, the following error is logged in `dmesg`:

    XFS: Superblock has unknown read-only compatible features (0x4) enabled

Introduce a check to see if mkfs.xfs supports the `-m reflink=` option.
In case it does, pass `-m reflink=0` while creating the filesystem.

The check is executed once during the first XFS filesystem creation. The
result of the check is cached until the nodeserver restarts.

Fixes: #966
Signed-off-by: Niels de Vos <ndevos@redhat.com>",112,30,0,1,"2018-01-08 15:47:21","923.34"
"ceph/ceph-csi","25ea25368a7ccf9b65c10f87c744ea4526c90ed0","nixpanic","2020-05-11 12:51:27","false","doc: add list of valid components to the development guide

The commitlint CI job uses the configuration from .commitlintrc.yaml
which contains the different components that Ceph-CSI uses. A short
description of each component has been added, so that contributors
understand what component to mention in the prefix of the subject in
commit messages.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",108,28,0,1,"2018-01-08 15:47:21","853.38"
"ceph/ceph-csi","f37bdfdd443343bb4fbaf9af169465e3743f6c2c","hswong3i","2020-01-01 14:41:56","false","Upgrade: csi-node-driver-registrar from v1.1.0 to v1.2.0

See https://github.com/kubernetes-csi/node-driver-registrar/releases/tag/v1.2.0
See https://github.com/kubernetes-csi/node-driver-registrar/blob/v1.2.0/CHANGELOG-1.2.md",103,24,0,0,"2018-01-08 15:47:21","719.2"
"ceph/ceph-csi","282c33cb58fce8c1870e12bbda2268138a4fa70e","nixpanic","2022-03-30 08:46:01","false","rebase: use go-ceph version with NFS-Admin API

The NFS-Admin API has been added to go-ceph v0.15.0. As the API can not
be tested in the go-ceph CI, it requires build-tag `ceph_ci_untested`.
This additional build-tag has been added to the `Makefile` and should be
removed when the API does not require the build-tag anymore.

See-also: ceph/go-ceph#655
Signed-off-by: Niels de Vos <ndevos@redhat.com>",48,51,1,1,"2018-01-08 15:47:21","1542.71"
"ceph/ceph-csi","3898ae34a777e8bbcdf91fe2da977b5fad9efc2e","Yuggupta27","2021-03-18 05:55:22","false","rbd: open new ioctx connection

if the parent and child clones are in
different namespaces we need to open a new
ioctx for pools.

Co-authored-by: Madhu Rajanna <madhupr007@gmail.com>
Signed-off-by: Yug <yuggupta27@gmail.com>",84,38,0,0,"2018-01-08 15:47:21","1165.34"
"ceph/ceph-csi","5aca04d540744110aaf160e191b096e5584f9c86","humblec","2021-06-23 08:52:11","false","rebase: upgrade snapshot v1beta1 api and clientset to v1 version

At present e2e snapshot code make use of snapshot v1beta1 api and client
This patch address the same and snapshot api clientset/apis are updated
to v1 version.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",118,41,0,1,"2018-01-08 15:47:21","1260.46"
"ceph/ceph-csi","9c4e5543c9f42044e713ee88e9d6275295a3b6bf","rootfs","2019-02-08 12:21:19","true","Merge pull request #185 from Madhu-1/log-req

Avoid logging secrets in request",24,13,0,0,"2018-01-08 15:47:21","396.11"
"ceph/ceph-csi","0639e00705f18701fa286f0857b98b88f1f7dee6","KingJ","2019-09-07 09:59:32","false","Reorder kernel version checking logic",84,20,0,0,"2018-01-08 15:47:21","605.01"
"ceph/ceph-csi","669dc4536f4d75c8460a24a15f7ef808613ddc09","vasyl-purchel","2020-02-06 16:23:14","false","Reduce encryption KMS configuration SC parameters

 * moves KMS type from StorageClass into KMS configuration itself
 * updates omapval used to identify KMS to only it's ID without the type

why?

1. when using multiple KMS configurations (not currently supported)
automated parsing of kms configuration will be failing because some
entries in configs won't comply with the requested type
2. less options are needed in the StorageClass and less data used to
identify the KMS

Signed-off-by: Vasyl Purchel vasyl.purchel@workday.com
Signed-off-by: Andrea Baglioni andrea.baglioni@workday.com",106,25,0,0,"2018-01-08 15:47:21","759.52"
"ceph/ceph-csi","f35ce3d880cb1d0b6754edaac2738eb6a3a23f0a","yati1998","2021-07-11 06:41:39","false","cleanup: Adds t.Helper() to test helper function

This commit adds t.Helper() to the test helper
function. With this call go test prints correct
lines of code for failed tests. Otherwise,
printed lines will be inside helpers functions.
For more details check: https://github.com/kulti/thelper

Updates: #1586

Signed-off-by: Yati Padia <ypadia@redhat.com>",126,42,0,0,"2018-01-08 15:47:21","1278.37"
"ceph/ceph-csi","cfb6abc06704afb7de2137c246fd53c72f8b5400","yati1998","2020-10-13 05:34:55","false","e2e: update snapshot restore e2e to check data consistency

Currently, in rbd snapshot restore and volume clone E2E we
are not checking any data consistency after doing snapshot
restore or volume clone. Hence, this PR writes the data in
the PVC and checks the checksum of the file and verify it with
the snapshot or cloned PVC.

Signed-off-by: Yati Padia <ypadia@redhat.com>",76,33,0,0,"2018-01-08 15:47:21","1005.07"
"ceph/ceph-csi","c0712db08ada75e3d61171d1ed69a3437a26b277","humblec","2019-02-04 13:05:43","false","migrate util package to klog from glog.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",22,13,0,1,"2018-01-08 15:47:21","392.14"
"ceph/ceph-csi","753f6b7fec96fd89a439b4a8dfc70b4f22e8411a","Yuggupta27","2020-05-20 07:21:01","false","cleanup: fix golint warnings in util, e2e

util: golint warns about exported methods to have a
comment or to unexport them.

e2e: golint warns about package comment to be of the form
""Package e2e ...""

Reported-by: https://goreportcard.com/report/github.com/ceph/ceph-csi

Updates: #975

Signed-off-by: Yug Gupta <ygupta@redhat.com>",112,28,0,0,"2018-01-08 15:47:21","862.15"
"ceph/ceph-csi","e077c1fdf5bbc1e70b6b214ba695ff7f920ce509","yati1998","2021-08-11 05:03:37","false","cleanup: run codespell on containerized testing

This commit adds a new target codespell to the
make containerized-test.

Fixes: #2229

Signed-off-by: Yati Padia <ypadia@redhat.com>",116,43,0,0,"2018-01-08 15:47:21","1308.3"
"ceph/ceph-csi","7599d42f1bf03e0d605d7cf78b5150edcb2cc68e","Madhu-1","2019-05-22 05:50:53","false","Get TravisCI instance of Kube

installing Kube with a script will also
help developers to do local testing.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",77,16,0,1,"2018-01-08 15:47:21","498.84"
"ceph/ceph-csi","8f2941dd47add35a230e66a8c6b5a9a1c9753595","Madhu-1","2019-01-17 05:27:55","false","Remove code complexity

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",16,12,0,1,"2018-01-08 15:47:21","373.82"
"ceph/ceph-csi","e82cd8339c7a8ee32bca319b92fd847327818c5b","Madhu-1","2020-12-09 07:04:58","false","build: add CSI_IMAGE_VERSION to build.env

CSI_IMAGE_VERSION is needed by makefile and
the centos CI to push the image to the minikube vm.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",73,35,0,1,"2018-01-08 15:47:21","1061.14"
"ceph/ceph-csi","5bc8584b024e542117b682d7cdb594b7d12a83dc","nixpanic","2022-04-07 15:42:48","false","e2e: add -is-openshift option to disable certain checks

On OpenShift it is not possible for the Rook toolbox to get the metrics
from Kubelet (without additional configuration). By passing
-is-openshift, the metrics are not checked, and the e2e suite does not
fail on that particular piece.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",44,51,1,1,"2018-01-08 15:47:21","1551"
"ceph/ceph-csi","661b49bd414b4fd28fc372b00996996b91dcf67e","rootfs","2018-02-15 18:27:51","true","Merge pull request #18 from sbezverk/v0.2.0_refactor

V0.2.0 refactor",1,1,0,0,"2018-01-08 15:47:21","37.11"
"ceph/ceph-csi","1849887b40dbb0b84d53cf6852662bdc157c213e","humblec","2021-06-25 12:54:29","false","e2e: reformat long lines in this package to 120 chars

We have many declarations and invocations..etc with long lines which are
very difficult to follow while doing code reading. This address the issues
in 'e2e/pvc.go' file to restrict the line length to 120 chars.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",118,41,0,1,"2018-01-08 15:47:21","1262.63"
"ceph/ceph-csi","69ae19e0cb242c5277cadae4f8a404094d8cb714","Madhu-1","2021-12-15 05:32:13","false","rbd: resize the volume created from snapshot

If the requested volume size is greater than
the snapshot size, resize the cloned volume
after creating a clone from a snapshot.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",50,47,1,1,"2018-01-08 15:47:21","1432.32"
"ceph/ceph-csi","a1ed6207f6b079b33ebed23dee818d6e351c179d","nixpanic","2022-06-21 11:49:13","false","cephfs: report detailed error message on clone failure

go-ceph provides a new GetFailure() method to retrieve details errors
when cloning failed. This is now included in the `cephFSCloneState`
struct, which was a simple string before.

While modifying the `cephFSCloneState` struct, the constants have been
removed, as go-ceph provides them as well.

Fixes: #3140
Signed-off-by: Niels de Vos <ndevos@redhat.com>",42,53,1,1,"2018-01-08 15:47:21","1623.83"
"ceph/ceph-csi","cb36c9e4c8b4e5bf280857c575bdc6557a536e06","gman0","2018-03-26 13:00:28","false","cephfs: code cleaning",2,3,0,0,"2018-01-08 15:47:21","77.88"
"ceph/ceph-csi","fd9fee74dec48042c25d6934e5c166ea0e07e253","nixpanic","2021-06-23 14:44:56","false","e2e: disable iss validation in Hashicorp Vault

Testing encrypted PVCs does not work anymore since Kubernetes v1.21. It
seems that disabling the iss validation in Hashicorp Vault is a
relatively simple workaround that we can use instead of the more complex
securing of the environment like should be done in production
deployments.

Updates: #1963
See-also: external-secrets/kubernetes-external-secrets#721
Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,41,0,1,"2018-01-08 15:47:21","1260.71"
"ceph/ceph-csi","21a400839f7d00bc61dfee8db971593fc3370e6a","yati1998","2021-06-07 12:15:49","false","cleanup: No use of variable validateEncryption

In the function validatePVCSnapshot(...), we don't need
validateEncryption variable as we are passing kms value
which can help us check the value of validateEncryption.
Hence, we can avoid using that.

Signed-off-by: Yati Padia <ypadia@redhat.com>",110,41,0,0,"2018-01-08 15:47:21","1245.6"
"ceph/ceph-csi","562c3dfafa9cad2ffea20324f51a8db644b8eb75","rootfs","2018-02-06 18:30:05","false","update readme and deployment

Signed-off-by: Huamin Chen <hchen@redhat.com>",1,1,0,0,"2018-01-08 15:47:21","29.11"
"ceph/ceph-csi","c1a8c5866cc6e6f753be646bede43bcda5ac8552","rootfs","2018-06-13 16:48:47","true","Merge pull request #41 from malc0lm/fix-rbd-controller-service

rbd: advertises PluginCapability_Service_CONTROLLER_SERVICE",4,5,0,0,"2018-01-08 15:47:21","155.04"
"ceph/ceph-csi","2774109bf6102ed285d4aa0816671ee8f492453c","kfox1111","2019-01-19 01:06:32","false","Update the helm chart for csi 1.0

Signed-off-by: Kevin Fox <Kevin.Fox@pnnl.gov>",18,12,0,0,"2018-01-08 15:47:21","375.64"
"ceph/ceph-csi","95e9595c1fa673e57aed07ab0409182a6e1a4692","Madhu-1","2021-12-22 03:07:25","false","util: add helper ExecCommandWithTimeout function

added ExecCommandWithTimeout helper function
to execute the commands with the timeout option,
if the command does not return any response with
in the timeout time the process will be terminated
and error will be returned back to the user.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",53,47,1,1,"2018-01-08 15:47:21","1439.22"
"ceph/ceph-csi","9c841c83d446e200c6da6a9b2f2c0e8d76d964bb","Madhu-1","2022-01-21 09:42:35","false","cleanup: rename errorPair to pairError

to fix the errname check renaming the
struct.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,48,1,1,"2018-01-08 15:47:21","1473.75"
"ceph/ceph-csi","aa77b677a32dfc5bc4a2048da10f741409b2dcb5","Madhu-1","2021-04-22 05:43:20","false","build: install helm version from build.env

Install the helm package based on the version
specified in the build.env

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",86,39,0,1,"2018-01-08 15:47:21","1199.33"
"ceph/ceph-csi","a4655f7549de98c8d8665de73bc661e2e857df40","Madhu-1","2019-06-07 06:52:58","false","create config map for cephfs
add fs name to storageclass in e2e

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",78,17,0,1,"2018-01-08 15:47:21","514.88"
"ceph/ceph-csi","5562e46d0f5ca1bb7cab492bb77f05873698bb80","Madhu-1","2021-08-12 07:28:13","false","rbd: Cleanup OMAP data for secondary image

If the image is in a secondary state and its
up+replaying means its an healthy secondary
and the image is primary somewhere in the remote cluster
and the local image is getting replayed. Delete the
OMAP data generated as we cannot delete the
secondary image. When the image on the primary
cluster gets deleted/mirroring disabled, the image on
all the remote (secondary) clusters will get
auto-deleted. This helps in garbage collecting
the OMAP, PVC and PV objects after failback operation.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",115,43,0,1,"2018-01-08 15:47:21","1309.4"
"ceph/ceph-csi","842279b811357ce2c21db66e730a9d437b80e26b","Madhu-1","2022-08-16 05:47:42","false","ci: use ubuntu-latest for stale job

Currently, we use the Ubuntu 18.04 actions runner
for stale job. This runner will be deprecated
and removed in the beginning of Dec.
So should change the runner to use latest ubuntu.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",41,55,1,1,"2018-01-08 15:47:21","1678.58"
"ceph/ceph-csi","1fd2f28fee704d6b6200ddd8e2670a934c97e18b","Madhu-1","2021-10-25 10:24:12","false","rbd: check local image state for resyncing

below are the local states of the mirrored image

""unknown""  -> If the image is in an error state
means data is completely synced
""error"" -> If the image is in an error state
means it needs resync
""syncing""
""starting_replay""
""replaying""
""stopping_replay""
""stopped""

If the resync is successfully started which
means the image will be in ""replaying"" state.
we can consider ""replaying"" state to report
resync succesfully going on state.

we are discarding the intermediate states like
""syncing"", ""starting_replay"" and ""stopping_replay"".

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",53,45,0,1,"2018-01-08 15:47:21","1382.53"
"ceph/ceph-csi","15b5b0112e9b0945bbd2ac736107063e2115898b","Madhu-1","2019-01-17 05:46:32","false","rename Id to ID to fix lint issue

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",16,12,0,1,"2018-01-08 15:47:21","373.83"
"ceph/ceph-csi","d236968bf9feb31020fc1ed30f9f77af4045aaed","Bengrunt","2022-02-28 16:00:35","false","helm: remove kube version semver check for CSI cephfs resizer component

It was decided that latest ceph CSI versions would drop support for
older Kubernetes versions, making this check useless. So it was removed.

Removing this version check allows for the deployment of the CephFS
resizer component when using the helm chart on non vanilla kubernetes
clusters whose API server version are in the form of `1.x.y-abc+def-ghi`.

Signed-off-by: Benjamin Guillon <benjamin.guillon@cc.in2p3.fr>",41,50,1,0,"2018-01-08 15:47:21","1511.01"
"ceph/ceph-csi","680bf78ee6a8145eb9f6e7cd61c0915dab40c4e9","humblec","2019-02-06 13:22:55","false","Update readme to reflect kube 1.13 instead of 1.11

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",26,13,0,1,"2018-01-08 15:47:21","394.15"
"ceph/ceph-csi","0e49ea90f304a56928d13b70a9f7d4c29df30087","humblec","2019-06-04 06:36:05","true","Merge pull request #401 from humblec/new-changes

Update coding.md",77,17,0,1,"2018-01-08 15:47:21","511.87"
"ceph/ceph-csi","0e6617e1ffff4dc93e7606bfdf0dcaf60f3c327d","humblec","2019-09-19 17:11:32","false","Format RBD volumes with `nodiscard` formatting options.

Currently rbd CSI plugin uses formatAndMount of
mount.SafeFormatAndMount. This does not allow to pass or use
specific formatting arguments with it. This patch introduce
RBD specific formatting options with both xfs and ext4,
for example: -E no-discard with ext4 and -k option with
XFS to boost formatting performance of RBD device.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",87,20,0,1,"2018-01-08 15:47:21","616.31"
"ceph/ceph-csi","f566b0fc2db7ceeba654fd869087ebc2136c8e06","Madhu-1","2020-08-11 12:29:51","false","cephfs: replace Warningf with WarningLog in unmountVolume

replace Errorf with ErrorLog in unmountVolume
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",120,31,0,1,"2018-01-08 15:47:21","943.36"
"ceph/ceph-csi","375e9c8a513cb75d28c741cf9806d7a09c776c13","humblec","2022-01-06 15:18:04","false","e2e: add rwop validation helper function in pod.go

This commit adds the rwop validation helper for rbd and cephfs tests.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",44,48,1,1,"2018-01-08 15:47:21","1454.73"
"ceph/ceph-csi","c1a269191c9703eaba4d83bb5f56d68a8a691f31","humblec","2020-06-10 06:23:03","false","doc: make sure configmap object referred or documented correctly

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",115,29,0,1,"2018-01-08 15:47:21","882.11"
"ceph/ceph-csi","d28a5a5f2387b231cbccee8e05317397511e4dd7","nixpanic","2020-12-01 08:30:28","false","util: pass map[string]interface{} to initialize KMS

This makes it possible to pass a more complex configuration to the
initialize functions for KMS's. The upcoming VaultTokensKMS can use
overrides for configiration options on a per tenant basis. Without this
change, it would not be possible to consume the JSON configuration file.

See-also: #1743
Signed-off-by: Niels de Vos <ndevos@redhat.com>",83,35,0,1,"2018-01-08 15:47:21","1054.2"
"ceph/ceph-csi","e761d69ce87e48df85eee644e8d106f50fef730d","rootfs","2018-10-09 15:04:45","true","Merge pull request #84 from pohly/delete-idempotency

rbdplugin: idempotent DeleteVolume",9,9,0,0,"2018-01-08 15:47:21","270.97"
"ceph/ceph-csi","3b6d4faec3ff540de8d410f6bd6843323707a07c","rootfs","2019-02-04 15:55:52","true","add support matrix",23,13,0,0,"2018-01-08 15:47:21","392.26"
"ceph/ceph-csi","1354cfbf03f3d2d2de60c7f5b2afccef90d5b999","humblec","2021-11-03 09:58:19","false","e2e: remove 1.16 based test enablement in rbd

considering we are far out of this release and only care about
kubernetes releases from v1.20, there is no need to have this
version check in place for the tests.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",56,46,0,1,"2018-01-08 15:47:21","1391.51"
"ceph/ceph-csi","314fe0e23d7efea0bfb82ee32e1fd48323a4fe0f","humblec","2021-03-31 13:36:08","false","cleanup: correct misspelling in rbd/clone.go

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",90,39,0,1,"2018-01-08 15:47:21","1178.66"
"ceph/ceph-csi","22ff5c0911e274510d8ee5492ba32844fe06da77","humblec","2019-06-24 09:08:09","false","    Migrate from snapClient.VolumesnapshotV1alpha1Client to
    snapClient.SnapshotV1alpha1Client and also update kube dependency

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",79,17,0,1,"2018-01-08 15:47:21","530.97"
"ceph/ceph-csi","47226ccdf7dc8240c773b9df0867945d1c0e1ec7","Yuggupta27","2020-04-28 15:22:24","false","util: fix golint warnings in csiconfig, volid

golint warns about the following statements:

ceph-csi/internal/util/csiconfig.go
Line 49: warning: exported function Mons should have comment or be unexported (golint)

ceph-csi/pkg/util/volid.go :
Line 72: warning: exported method CSIIdentifier.ComposeCSIID should have comment
or be unexported (golint)

Reported-by: https://goreportcard.com/report/github.com/ceph/ceph-csi
Updates: #975

Signed-off-by: Yug Gupta <ygupta@redhat.com>",103,28,0,0,"2018-01-08 15:47:21","840.48"
"ceph/ceph-csi","9e957520aef8bdffa9d2bd05ce7fbdc0314188da","Rakshith-R","2021-03-22 06:17:42","false","e2e: add test case for app deletion with unmounted cephFS volume

Checks app deletion when cephFS volume is already unmounted.
Creates app, pvc and binds them. Unmounts the volume through
umount cmd in cephFS plugin and checks app deletion.

Signed-off-by: Rakshith R <rar@redhat.com>",87,38,0,1,"2018-01-08 15:47:21","1169.35"
"ceph/ceph-csi","08c10c9f940a7ce579c10e11cfde5c2f50ce3802","Rakshith-R","2021-09-06 11:01:26","false","rebase: update minikube to v1.23.0

See-also: https://github.com/kubernetes/minikube/releases/tag/v1.23.0

Signed-off-by: Rakshith R <rar@redhat.com>",66,44,0,1,"2018-01-08 15:47:21","1334.55"
"ceph/ceph-csi","d4cfd7bef929b029353b7ea77ffc088f9eaeabde","Rakshith-R","2021-04-05 04:31:47","false","cleanup: refactor deeply nested if statement in vault_tokens.go

Refactored deeply nested if statement in vault_tokens.go to
reduce cognitive complexity by adding fetchTenantConfig function.

Signed-off-by: Rakshith R <rar@redhat.com>",90,39,0,1,"2018-01-08 15:47:21","1183.28"
"ceph/ceph-csi","37979da5b2e4e2b622b71b0221fcd40e69223a04","Madhu-1","2020-06-16 10:56:14","false","e2e: Add E2E for app readonly options

If the mount option is readonly in app
pod, the pod should not get the write
access to the mounted cephfs subvolume.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",117,29,0,1,"2018-01-08 15:47:21","888.3"
"ceph/ceph-csi","883485b082f57c2adaf8286abf3e4ffa56b4461e","Madhu-1","2020-08-19 10:41:13","false","rbd: replace klog with util logger in driver.go

replace klog with util logger in driver.go

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",121,31,0,1,"2018-01-08 15:47:21","951.29"
"ceph/ceph-csi","a0829e9e936239c95d6c6294e64ee701617b0589","Madhu-1","2021-12-20 14:03:52","false","rbd: remove json tag from rbdVolume struct

as we are no longer supporting the v1.x
version of cephcsi. removing the json tag
used to store rbd volume details in configmap.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",57,47,1,1,"2018-01-08 15:47:21","1437.68"
"ceph/ceph-csi","d300da19b7d6ebd86f2db518f5ff2ca2dd432844","Madhu-1","2019-05-31 09:45:11","false","vendor update for  E2E framework

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",76,17,0,1,"2018-01-08 15:47:21","508"
"ceph/ceph-csi","e9782d86ad0855022b22760b739bd47117b9cb58","Madhu-1","2021-02-03 12:43:50","false","rbd: fix incorrect reading of client cert key

fix incorrect reading of client cert key.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",83,37,0,1,"2018-01-08 15:47:21","1121.62"
"ceph/ceph-csi","3cce629b1dd7a43bd861b2f09e35232e4617ca22","Madhu-1","2022-11-01 13:53:01","false","rebase: update csi-addons spec to latest

https://github.com/csi-addons/spec/pull/47
defines the error messages for the
GetVolumeReplicationInfo RPC call.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,58,1,1,"2018-01-08 15:47:21","1754.92"
"ceph/ceph-csi","be7749c90e9e71924982192c3d41a665e6d4113a","Madhu-1","2021-09-06 12:24:47","false","cleanup: move volumeID to the volumeoptions

volumeID can be moved to the volumeOptions
as most of the volume related helper functions
are available on the volumeoptions.go

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",66,44,0,1,"2018-01-08 15:47:21","1334.61"
"ceph/ceph-csi","85e121ebfe3cf2ee94bf7a8d37ad793ecb43c455","phlogistonjohn","2019-03-20 19:14:20","false","cmd: create a unified cephcsi binary

Create a single binary that can start ceph-csi in either rbd
or cephfs mode.

Signed-off-by: John Mulligan <jmulligan@redhat.com>",38,14,0,0,"2018-01-08 15:47:21","437.39"
"ceph/ceph-csi","b9cd0e18adb8dfc979091f6007e095abceec5cc5","ShyamsundarR","2019-05-28 19:03:18","false","Make CephFS plugin stateless reusing RADOS based journal scheme

This is a part of the stateless set of commits for CephCSI.

This commit removes the dependency on config maps to store cephFS provisioned
volumes, and instead relies on RADOS based objects and keys, and required
CSI VolumeID encoding to detect the provisioned volumes.

Changes:
- Provide backward compatibility to provisioned volumes by older plugin versions (1.0.0 or older)
- Remove Create/Delete support for statically provisioned volumes (fixes #382)
- Added namespace support to RADOS OMaps and used the same to store RADOS CSI objects and keys in the CephFS metadata pool
- Added support to mention fsname for CephFS provisioning (fixes #359)
- Changed field name in CSI Identifier to 'location', to denote a pool or fscid
- Updated mounter cache to use new scheme
- Required Helm manifests are updated
- Required documentation and other manifests are updated
- Made driver option 'metadatastorage' as optional, as fresh installs do not need to specify the same

Testing done:
- Create/Mount/Delete PVC
- Create/Delete 5 PVCs
- Mount version 1.0.0 PVC
- Delete version 1.0.0 PV
- Mount Statically defined PV/PVC/Pod
- Mount Statically defined version 1.0.0 PV/PVC/Pod
- Delete Statically defined version 1.0.0 PV/PVC/Pod
- Node restart when mounted to test mountcache
- Use InstanceID other than 'default'
- RBD basic round of tests, as namespace is added to OMaps
- csitest against ceph-fs plugin
  - NOTE: CephFS plugin still does not detect and address already created
  volumes but of a different size
- Test not providing any value to the metadata storage parameter

Signed-off-by: ShyamsundarR <srangana@redhat.com>",75,17,0,0,"2018-01-08 15:47:21","505.39"
"ceph/ceph-csi","5eb1974e38887b5650d211745a4f4147428c2f16","Madhu-1","2019-01-17 06:49:35","false","Fix vetshadow issues

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",16,12,0,1,"2018-01-08 15:47:21","373.88"
"ceph/ceph-csi","d04bfe890f380898cee2d1e22b81d80bf6839d28","Rakshith-R","2021-05-10 10:46:14","false","helm: fix k8s version string for csidriver crds semverCompare

Current implementation of semvercompare fails against
pre-release versions. This commit fixes it by using
the entire version string at which csidriver api became GA.

s|"">=1.18""|"">=1.18.0-beta.1""

Fixes: #2039

Signed-off-by: Rakshith R <rar@redhat.com>",92,40,0,1,"2018-01-08 15:47:21","1217.54"
"ceph/ceph-csi","774e8e40429b014ccf10ead302745002512b90e1","yati1998","2021-03-25 11:14:46","false","util: enable golang profiling

Add support for golang profiling.
Standard tools like go tool pprof and curl
work. example:
$ go tool pprof http://localhost:8080/debug/pprof/profile
$ go tool pprof http://localhost:8080/debug/pprof/heap
$ curl http://localhost:8080/debug/pprof/heap?debug=1

https://golang.org/pkg/net/http/pprof/ contains
more details about the pprof interface.

Fixes: #1699

Signed-off-by: Yati Padia <ypadia@redhat.com>",88,39,0,0,"2018-01-08 15:47:21","1172.56"
"ceph/ceph-csi","0991cdf498c7d2c402b45925c2c1c930c5899405","madddi","2020-04-29 10:03:08","false","make CephFS SubvolumeGroup configurable

The name of the CephFS SubvolumeGroup for the CSI volumes was hardcoded to ""csi"". To make permission management in multi tenancy environments easier, this commit makes it possible to configure the CSI SubvolumeGroup.

related to #798 and #931",105,28,0,0,"2018-01-08 15:47:21","841.26"
"ceph/ceph-csi","cba6115e30a63be0426bd0e15d7b4236f604e65b","wilmardo","2019-08-08 08:15:13","false","Fix 1.13 charts

Signed-off-by: wilmardo <info@wilmardenouden.nl>",84,19,0,0,"2018-01-08 15:47:21","575.94"
"ceph/ceph-csi","f814bd72e533d5783ed74783e68d9a781a6c0410","nixpanic","2020-01-09 10:31:07","false","rbd/go-ceph: add GetMetadata() and GetMetadata() functions

Signed-off-by: Niels de Vos <ndevos@redhat.com>",105,24,0,1,"2018-01-08 15:47:21","731.28"
"ceph/ceph-csi","50091acd0ca49dcba4b4d2f03237f3174944a695","Madhu-1","2019-02-21 04:30:57","false","update deploy.sh to push cephfs chat

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",30,13,0,1,"2018-01-08 15:47:21","407.78"
"ceph/ceph-csi","0fc294ae5b74c4da281cf99c855ffacbbb9d4833","Madhu-1","2019-02-07 09:58:09","false","update travis to do more static checks

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",26,13,0,1,"2018-01-08 15:47:21","395.01"
"ceph/ceph-csi","08c8272282835c2c4a450ca6c8570b201d8dda92","Madhu-1","2021-06-08 08:44:32","false","build: add shellcheck source=build.env in deploy.sh

added `# shellcheck source=build.env` in deploy.sh
to fix shellcheck SC1090 failure.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",111,41,0,1,"2018-01-08 15:47:21","1246.46"
"ceph/ceph-csi","a52314356e125cf4349a0ab9ae50bdb74b8dbf82","irq0","2022-08-12 15:06:48","false","fscrypt: Determine best supported fscrypt policy on node init

Currently fscrypt supports policies version 1 and 2. 2 is the best
choice and was the only choice prior to this commit. This adds support
for kernels < 5.4, by selecting policy version 1 there.

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",41,55,1,0,"2018-01-08 15:47:21","1674.97"
"ceph/ceph-csi","638f77a95c1faa5b1c77d856b9c143f14c8513b7","irq0","2022-08-19 16:24:40","false","e2e: Deploy vault as part of the Ceph FS suite

Always deploy Vault as part of the the Ceph FS test suite.

Required by:
 - fscrypt tests using any vault KMS type.
 - Configuration in deploy/cephfs/*.yaml via the
   ceph-csi-encryption-kms-config config map created during deployVault()

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",41,55,1,0,"2018-01-08 15:47:21","1682.03"
"ceph/ceph-csi","9df4634fd0a2c691d8eb0ca40f5f420a1f24c5fb","dashjay","2023-04-17 07:45:22","false","deploy: fix bug of ceph-csi-rbd helm chart

fix bug that make provisioner get dup affinities
when deploy helm chart ceph-csi-rbd and ceph-csi-cephfs.

Signed-off-by: DashJay <45532257+dashjay@users.noreply.github.com>",33,63,1,0,"2018-01-08 15:47:21","1924.92"
"ceph/ceph-csi","2fcc252f5c4bf90b5285741474560e3398462c21","gman0","2018-06-12 15:05:42","false","cephfs: pass volume UUIDs where needed",3,5,0,0,"2018-01-08 15:47:21","153.97"
"ceph/ceph-csi","eeb2ad8facb3d71e4bc9fa3c736d790dc3a2ba27","nixpanic","2021-06-14 07:53:35","false","rebase: update minikube to v1.21.0

See-also: https://github.com/kubernetes/minikube/releases/tag/v1.21.0
Signed-off-by: Niels de Vos <ndevos@redhat.com>",110,41,0,1,"2018-01-08 15:47:21","1251.42"
"ceph/ceph-csi","69c9e5ffb1772ee1f5415fed3daf5ce5a11807fa","yati1998","2021-07-11 07:27:41","false","cleanup: resolve parallel test issue

This commit resolves parallel test issues
and also excludes internal/util/conn_pool_test.go
as those test can't run in parallel.

Updates: #1586

Signed-off-by: Yati Padia <ypadia@redhat.com>",126,42,0,0,"2018-01-08 15:47:21","1278.4"
"ceph/ceph-csi","1cf14cd83cf1bf6d989af40a5dd3a45a13328eb8","yati1998","2021-09-20 10:16:55","false","cleanup: rework on naming conventions

This commits replaces cephfs -> cephFS
to maintain consistency throughout the
codebase

Updates: #1465

Signed-off-by: Yati Padia <ypadia@redhat.com>",63,44,0,0,"2018-01-08 15:47:21","1347.52"
"ceph/ceph-csi","157e8f4c756ece2bf1fd26b610782124b6626c7c","wilmardo","2020-01-17 15:44:06","false","util: use MiB and GiB constants from k8s helpers

Signed-off-by: wilmardo <info@wilmardenouden.nl>",107,24,0,0,"2018-01-08 15:47:21","739.5"
"ceph/ceph-csi","db1b5f9c55b52a3c96fcf06543797a50845a3afe","Madhu-1","2020-07-03 08:14:46","false","e2e: move deploy timeout to build.env

moved deploy timeout from travis
scripts to build.env

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",111,30,0,1,"2018-01-08 15:47:21","906.19"
"ceph/ceph-csi","1585c0dd3670343154e7eb1c610968304b2a4c4b","kfox1111","2019-02-06 17:15:19","false","Update wrong repo name

The origional name was wrong. Change it to the correct name.

Signed-off-by: Kevin Fox <Kevin.Fox@pnnl.gov>",26,13,0,0,"2018-01-08 15:47:21","394.31"
"ceph/ceph-csi","7a5e064f5054fa03b1dc774d3b232148b4123eed","Madhu-1","2020-05-15 08:49:38","false","e2e: Add a new function to run commands in toolboxpod

Updated code to use new function execCommandInToolBoxPod
to run commands in toolboxpod.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",114,28,0,1,"2018-01-08 15:47:21","857.21"
"ceph/ceph-csi","eb2fb9233be1871cff43a5eba3b332b1e5e64560","Madhu-1","2020-01-23 08:29:53","false","Add run hostpath to daemonset pods

`/run/mount` need to be share between host and
csi-plugin containers for `/run/mount/utab`

this is required to ensures that the network
is not stopped prior to unmounting the network devices.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",108,24,0,1,"2018-01-08 15:47:21","745.2"
"ceph/ceph-csi","ba8ead6e041251473ed4052699dfc023cd507b8c","agarwal-mudit","2020-12-07 11:10:56","false","doc: add upgrade document for 3.2

Added upgrade document for 3.2 with a separate section on
CSI sidecar containers update.

Signed-off-by: Mudit Agarwal <muagarwa@redhat.com>",76,35,0,0,"2018-01-08 15:47:21","1060.31"
"ceph/ceph-csi","d480eb4bdaea94fa9c3b301dcb9863cad26399eb","agarwal-mudit","2021-02-01 07:44:56","false","cephfs: ignore BytesQuota field in case it is not set.

This can happen when the subvolume is in snapshot-retained state.
We should not return error for such case as it is a valid situation.

Signed-off-by: Mudit Agarwal <muagarwa@redhat.com>",83,37,0,0,"2018-01-08 15:47:21","1119.41"
"ceph/ceph-csi","1b89f86d516b0d0a62572b0ca8eac3b91dbaa109","nixpanic","2020-06-30 10:15:23","false","util: handle Close() errors in pidlimit

A new version of gosec insists on handling errors returned by Close():

    [/go/src/github.com/ceph/ceph-csi/internal/util/pidlimit.go:44] - G307 (CWE-): Deferring unsafe method ""*os.File"" on type ""Close"" (Confidence: HIGH, Severity: MEDIUM)
      > defer cgroup.Close()

    [/go/src/github.com/ceph/ceph-csi/internal/util/pidlimit.go:78] - G307 (CWE-): Deferring unsafe method ""*os.File"" on type ""Close"" (Confidence: HIGH, Severity: MEDIUM)
      > defer f.Close()

    [/go/src/github.com/ceph/ceph-csi/internal/util/pidlimit.go:113] - G307 (CWE-): Deferring unsafe method ""*os.File"" on type ""Close"" (Confidence: HIGH, Severity: MEDIUM)
      > defer f.Close()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,30,0,1,"2018-01-08 15:47:21","902.27"
"ceph/ceph-csi","36e51402cb623177211476c5a2875f9b45e35e23","nixpanic","2022-05-02 08:28:25","false","nfs: support ExpandVolume CSI procedure

There is not much the NFS-provisioner needs to do to expand a volume,
everything is handled by the CephFS components.

NFS does not need a resize on the node, so only ControllerExpandVolume
is required.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",38,52,1,1,"2018-01-08 15:47:21","1575.7"
"ceph/ceph-csi","0a5581b7a0ddf7a385285b7ba38da99385948f33","Madhu-1","2020-08-11 12:14:17","false","cephfs: replace Errorf with ErrorLog in NodeUnPublishVolume

cephfs: replace Errorf with ErrorLog in NodeUnPublishVolume
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.35"
"ceph/ceph-csi","7481786c44544edf7b0c977274766e8de42aa26c","Madhu-1","2020-07-09 07:01:06","false","ci: update kubernetes v1.17 to latest patch release

kubernetes v1.17.8 is released recently,This commit
updates the kubernetes v1.17 to latest patch release

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",110,30,0,1,"2018-01-08 15:47:21","911.13"
"ceph/ceph-csi","3482cb7091b3089d94b5dd3754d6c18e677472d8","Madhu-1","2020-05-14 10:28:14","false","ci: updated shell script to run individual test

Earlier we were running all the linter for non-go
files in one short, this wont be helpful for the
users who want to run particular tests.

now the Makefile as different target to
run separate lint test for different type
of non-go files.

Fixes: #979

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",112,28,0,1,"2018-01-08 15:47:21","856.28"
"ceph/ceph-csi","fb3f7fe202b4356cbc22b4f3dcf794debbbd4f27","Madhu-1","2021-03-18 07:30:57","false","rbd: remove todo for image not found

Incase of resync the image will get deleted, gets
recreated and its a a time consuming operation.
It makes sense to return aborted error instead
of not found as we have omap data only the image
is missing in rbd pool.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",84,38,0,1,"2018-01-08 15:47:21","1165.41"
"ceph/ceph-csi","59fe8c1f2f9995965e8cc13a30a64a90c8631144","Madhu-1","2020-02-25 08:00:23","false","Provide option to skip ceph-csi plugin deployment

To test helm charts in CI we need to skip the ceph-csi
deployment in E2E, This PR provides an option in E2E
to enable/disable cephcsi deployment.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",107,26,0,1,"2018-01-08 15:47:21","777.18"
"ceph/ceph-csi","00d34fdb2d58c79165ae26d88d2bc32622e5607b","Madhu-1","2020-12-02 07:57:02","false","ci: run github work flow only for pull request

currently github action are getting trigerred for
both pull and push request, this commits removes the
action for push  events.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",80,35,0,1,"2018-01-08 15:47:21","1055.17"
"ceph/ceph-csi","10af7e357d67e255379687fc20e5e83c8b289c31","kfox1111","2019-02-07 18:50:37","false","Add readme and notes to the chart

This adds a basic readme file and notes to the helm chart

Signed-off-by: Kevin Fox <Kevin.Fox@pnnl.gov>",26,13,0,0,"2018-01-08 15:47:21","395.38"
"ceph/ceph-csi","0f6c6c15a8d63116ad56f72b7934d2e4592b1689","Madhu-1","2020-05-15 08:32:35","false","e2e: remove explict setting of kind and apiversion

we dont need to explictly set the kind
and apiversion in the snapshot class object
as it is already set in snapshotclass.yaml file

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",114,28,0,1,"2018-01-08 15:47:21","857.2"
"ceph/ceph-csi","e743e06748aebd54a22f7e692e051e7a31ee4457","Madhu-1","2021-12-14 04:16:47","false","ci: install arch specific go in Dockerfile.test

Instead of installing the amd64 on all the
platforms, install architecture specific go
version in test dockerfile.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",50,47,1,1,"2018-01-08 15:47:21","1431.27"
"ceph/ceph-csi","c8e532aa9843673fa10b43bb81358c700110b92b","Madhu-1","2020-07-09 06:59:13","false","ci: Add kube v1.18.5 to E2E testing

Updated travis CI to test cephcsi with
kubernetes v1.18.5

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",110,30,0,1,"2018-01-08 15:47:21","911.13"
"ceph/ceph-csi","afeae030695e5c9a773b499c1c590ee3922e14bf","humblec","2022-02-09 11:14:03","false","ci: fetch sidecar versions from build.env and use it

The sidecar images in minikube deployment will be fetched from
build.env and used/validated accordingly.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",42,49,1,1,"2018-01-08 15:47:21","1491.81"
"ceph/ceph-csi","0c50c8bb1236b3ebfbb695b11906ce3f5d413a96","humblec","2019-07-25 12:45:07","false","Add details about weekly bug triage call in the README

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",77,18,0,1,"2018-01-08 15:47:21","562.12"
"ceph/ceph-csi","e699318accea6a31850da8d77746e3c1bb185b9f","Yuggupta27","2020-12-01 09:42:53","false","rbd: pass parent volume to undoSnapshotCloning function

as we are supporting the creation of clone to a new
pool we need to pass the correct parent volume
to cleanup the snapshot on parent volume.

Co-authored-by: Madhu Rajanna <madhupr007@gmail.com>
Signed-off-by: Yug <yuggupta27@gmail.com>",83,35,0,0,"2018-01-08 15:47:21","1054.25"
"ceph/ceph-csi","3c773b24e5988f4347141407f6fa1a705471ad16","yati1998","2021-05-20 08:46:39","false","e2e: validate encryption keys in KMS

this commit is to validate if the encrypted
keys are created and deleted properly while
pvc-pvc clone images

Updates: #2022

Signed-off-by: Yati Padia <ypadia@redhat.com>",99,40,0,0,"2018-01-08 15:47:21","1227.46"
"ceph/ceph-csi","08728b631b753ef44b7a4bd48d3eba383c497d35","Rakshith-R","2021-07-09 09:03:40","false","rbd: fix vol.VolID in cloneFromSnapshot()

Volume generated from snap using genrateVolFromSnap
already copies volume ID correctly, therefore removing
`vol.VolID = rbdVol.VolID` which wrongly copies parent
Volume ID instead leading to error from copyEncryption()
on parent and clone volume ID being equal.

Signed-off-by: Rakshith R <rar@redhat.com>",123,42,0,1,"2018-01-08 15:47:21","1276.47"
"ceph/ceph-csi","f670c6252615a572eb160a2981a72211be5c1254","Madhu-1","2019-02-08 07:07:03","false","Remove userID and key logging from rbd

Fixes: #171",26,13,0,1,"2018-01-08 15:47:21","395.89"
"ceph/ceph-csi","fa36a4668283fe3bb836c8fb4587ab32c666d898","Madhu-1","2021-05-03 11:22:30","false","e2e: pvc mounting when snap and parent pvc is deleted

Added an E2E test to test below case

* Create PVC
* Create Snapshot from PVC
* Delete PVC
* Create Clone from Snapshot
* Delete Snapshot
* Mount clone to Application
* Delete Application and PVC Clone

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",93,40,0,1,"2018-01-08 15:47:21","1211.57"
"ceph/ceph-csi","8f185bf7b27ff2d3adc8c178473fb4367fefce37","Madhu-1","2021-07-27 06:43:39","false","rbd: use rados namespace for manager command

Currently we have a bug that we are not using rados
namespace when adding ceph manager command to
remove the image from the trash. This commit
adds the missing rados namespace when adding
ceph manager task.

without fix the image will be moved to trash
and no task will be added to remove from the
trash. it will become ceph responsibility to
remove the image from trash when it will cleanup
the trash.

workaroud: manually purge the trash

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",117,43,0,1,"2018-01-08 15:47:21","1294.37"
"ceph/ceph-csi","f0a2a20466378556e28ac0c38b42d3080ee51eb8","Madhu-1","2022-01-20 05:28:38","false","ci: update minikube to latest release

update minikube to latest release i.e
1.25.0

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",41,48,1,1,"2018-01-08 15:47:21","1472.57"
"ceph/ceph-csi","ff935ef2872ca06ee5edd0fe53931a5e6bd34516","rootfs","2019-02-12 15:55:29","true","Update README.md",27,13,0,0,"2018-01-08 15:47:21","399.26"
"ceph/ceph-csi","47d4e44af0ba026923a4bddb7db3ea1cbc1d74d9","humblec","2019-06-10 07:44:20","true","Merge pull request #414 from Madhu-1/fix_335

Use Deployment with leader election instead of StatefulSet",79,17,0,1,"2018-01-08 15:47:21","516.91"
"ceph/ceph-csi","41ecaadc821db56e59b038a3f7396d2b149afafa","humblec","2021-06-25 13:02:50","false","e2e: reformat long lines in this package to 120 chars

We have many declarations and invocations..etc with long lines which are
very difficult to follow while doing code reading. This address the issues
in 'e2e/staticpvc.go' and 'e2e/snapshot.go' files to restrict the line length
to 120 chars.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",118,41,0,1,"2018-01-08 15:47:21","1262.64"
"ceph/ceph-csi","0459c94f1a8ef5bfc40d1e511e20607a2ea66faa","rootfs","2019-01-09 15:20:08","false","fix cache persistent default for cephfs

Signed-off-by: Huamin Chen <hchen@redhat.com>",17,12,0,0,"2018-01-08 15:47:21","366.23"
"ceph/ceph-csi","7c9c7c78a7360504fcf38a55a2b5a396e5879cad","ansiwen","2020-07-10 18:35:35","false","util: add tests for JoinErrors()

Signed-off-by: Sven Anderson <sven@redhat.com>",112,30,0,0,"2018-01-08 15:47:21","912.62"
"ceph/ceph-csi","a4e0c696a9f201ca7ed1459752d2d9c550d3df09","Madhu-1","2023-11-07 09:44:35","false","build: disable ganesha package in Dockerfile

disable ganesha as dnf update is
failing on Reef ceph version.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",4,70,1,1,"2018-01-08 15:47:21","2126"
"ceph/ceph-csi","d816df4f4226d88651cf14e0d8dbe2065437e7b3","Madhu-1","2020-09-09 15:49:01","false","util: add helper to validate ROX request

added a helper function to validate is create
request for ROX is for volume from source.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",121,32,0,1,"2018-01-08 15:47:21","971.5"
"ceph/ceph-csi","369fdb505162f6ee44a40ef874c8db927bfe0b09","Madhu-1","2020-01-17 08:09:17","false","Doc for cephfs expand PVC

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",108,24,0,1,"2018-01-08 15:47:21","739.18"
"ceph/ceph-csi","2036b587d72df7d8d207aaf60bcf3f2edba13068","Madhu-1","2021-08-26 04:40:26","false","ci: add github workflow for stale

added github action to check for the
stale issues and PRs. the action will
get scheduled everydata at 21:00 UTC.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",116,43,0,1,"2018-01-08 15:47:21","1323.29"
"ceph/ceph-csi","b5825de992af22615dbee42bca2cb456bf3dbb79","gman0","2018-04-24 07:29:05","false","cephfs/main: updated import path",3,3,0,0,"2018-01-08 15:47:21","105.65"
"ceph/ceph-csi","989905aa9f59733a7a37c28578dc7cc1b043332a","warmfusion","2021-11-04 21:18:25","false","helm: csiplugin-configmap generates invalid configuation

When generating csiconfiguration from values the config.json key gets merged with cluster-mapping.json
as the config.json toYaml element supresses a newline.

This fixes the situation where configuration is generated as shown;

```
 data:
   config.json: |-
    [{""clusterID"":""...."",""monitors"":[""...""]}]cluster-mapping.json: |-
    []
```

Signed-off-by: Toby Jackson <toby@warmfusion.co.uk>",55,46,0,0,"2018-01-08 15:47:21","1392.98"
"ceph/ceph-csi","1c1b0eab1e8e2281a9cd5b7ba4615af7110fcd10","gman0","2018-03-05 11:59:47","false","WIP cephfs CSI plugin",2,2,0,0,"2018-01-08 15:47:21","57.84"
"ceph/ceph-csi","af7824cafa5f6b1a9a28c90fce0e96bd306684a7","gman0","2018-07-31 09:31:12","false","updated README, added docs",6,7,0,0,"2018-01-08 15:47:21","202.74"
"ceph/ceph-csi","8163552b814b3acd2ac2143ffe097a389d0d3220","Madhu-1","2020-01-20 07:11:40","false","Add doc for rbd static pvc support

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",108,24,0,1,"2018-01-08 15:47:21","742.14"
"ceph/ceph-csi","cc600dab76a60079de86fe11702dfe80d6cc6dd6","Madhu-1","2020-08-11 11:20:31","false","cephfs: replace klog.Error with util.ErrorLog in CreateVolume

replaced klog.Error with util.ErrorLog
in createVolume function.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.31"
"ceph/ceph-csi","7f94a57908a7aa7aa10ba131f49e38c89bf57906","Yuggupta27","2020-07-19 12:21:03","false","cleanup: address godot warnings

Top level comments should end in a period

Signed-off-by: Yug <yuggupta27@gmail.com>",116,30,0,0,"2018-01-08 15:47:21","921.36"
"ceph/ceph-csi","fd4c019aba846f16f744ef50735b1ba7f26253da","Madhu-1","2019-02-19 08:14:10","false","cleanup: remove duplicate code

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",28,13,0,1,"2018-01-08 15:47:21","405.94"
"ceph/ceph-csi","b10ba188e7716887c72b38a5a146ac3e17cf6606","Madhu-1","2019-01-15 18:35:52","false","vendor cleanup: remove unused,non-go and test files",17,12,0,1,"2018-01-08 15:47:21","372.37"
"ceph/ceph-csi","7eefadf1eb3d9ed7d7cefec0d0d32025a349c3ce","Madhu-1","2020-08-11 11:38:51","false","cephfs: replace klog.Warning with util.WarningLog in DeleteVolume

replace klog.Warning with util.WarningLog in DeleteVolume
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.33"
"ceph/ceph-csi","bc39c523b7bc31e0b1300d84858229bbd4b5824e","ShyamsundarR","2019-06-28 01:10:32","false","Fix returning success from DeleteSnapshot for stale requests

Also reduced code duplication in fetching pool list from Ceph.

DeleteSnapshot like DeleteVolume, should return a success when it
detects that the snapshot keys are missing from the RADOS OMaps that
store the snapshot UUID to request name mapping.

This was missing in the code, and is now added.

Signed-off-by: ShyamsundarR <srangana@redhat.com>",80,18,0,0,"2018-01-08 15:47:21","534.64"
"ceph/ceph-csi","9a03d735a2757f428da293f854872e2fc4eae485","ShyamsundarR","2019-05-31 18:43:38","false","Remove redundant pool parameter from snapshot class

The SnapshotClass for RBD requires a pool parameter. This is redundant
as a snapshot is not created on a different pool than the source image
of the snapshot (refer rbd man page).

Further, when a snapshot needs to be created its source CSI VolumeID
is passed to the creation call, and hence the source volumes pool
needs to be reused to create the snapshot.

Similarly to clone a snapshot, the create request would come in with a
SnapshotID to help identify the snapshot pool, and the same create
request parameters would contain the storage class based pool parameter
to create the clone into (as clones can be in different pools as
compared to their parent snapshots).

Thus, the parameter pool seems redundant in the snapshot class and
should be removed to improve ease of use.

Fixes #379

Signed-off-by: ShyamsundarR <srangana@redhat.com>",76,17,0,0,"2018-01-08 15:47:21","508.37"
"ceph/ceph-csi","48b41779494055c49c940f0234bbb63768851380","gman0","2018-03-26 13:02:20","false","cephfs/Makefile: renamed image to quay.io/cephcsi/cephfsplugin",2,3,0,0,"2018-01-08 15:47:21","77.89"
"ceph/ceph-csi","b260bff659c3f2e5a1089c26c5b0cb7768506f3b","gman0","2018-06-12 15:07:20","false","cephfs: CreateVolume() needs ceph config",3,5,0,0,"2018-01-08 15:47:21","153.97"
"ceph/ceph-csi","5cba04c470d259438f8608af9918d5d3ac338d58","alexcern","2021-08-02 14:57:11","false","cephfs: support selinux mount options

- mount host's /etc/selinux in node plugins
- process mount options in all code paths for cephfs volume options

Signed-off-by: Alexandre Lossent <alexandre.lossent@cern.ch>",119,43,0,0,"2018-01-08 15:47:21","1300.72"
"ceph/ceph-csi","39561b967537810cc4d8e9083408ee77221317ce","Madhu-1","2020-05-19 07:46:39","false","e2e: Add E2E to mount rbd PVC as ro in app

Added an E2E to mount rbd PVC as readonly
in application pod and try to create some
file in Readonly PVC,when we try to create
files on RO PVC, we should get error.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",118,28,0,1,"2018-01-08 15:47:21","861.17"
"ceph/ceph-csi","a38986fce004c1b68af0d6236e7b830b9402610d","Madhu-1","2019-06-10 06:48:41","false","Enable all static-checks in golangci-lint

* Enable all static-checks in golangci-lint
* Update golangci-lint version
* Fix issue found in golangci-lint

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",79,17,0,1,"2018-01-08 15:47:21","516.88"
"ceph/ceph-csi","d8f7b38d3dac9718695ff6c33328f5f6cfce2c2f","Madhu-1","2021-03-11 06:28:48","false","rbd: add exclusive-lock and journaling image features for rbd image

Current rbd plugin only supports the layering feature
for rbd image. Add exclusive-lock and journaling image
features for the rbd.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
Signed-off-by: woohhan <woohyung_han@tmax.co.kr>",95,38,0,1,"2018-01-08 15:47:21","1158.36"
"ceph/ceph-csi","fba6a2d0c3755cb7be0be650c6cb47df73e2ed6e","Madhu-1","2021-03-30 05:33:01","false","deploy: add csidriver object for cephfs and rbd

csidriver object can be created on the kubernetes
for below reason.

If a CSI driver creates a CSIDriver object,
Kubernetes users can easily discover the CSI
Drivers installed on their cluster
(simply by issuing kubectl get CSIDriver)

Ref: https://kubernetes-csi.github.io/docs/csi-driver-object.html#what-is-the-csidriver-object

attachRequired is always required to be set to
true to avoid issue on RWO PVC.

more details about it at https://github.com/rook/rook/pull/4332

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",91,39,0,1,"2018-01-08 15:47:21","1177.32"
"ceph/ceph-csi","826f7126cdf18a698b2ac637e0821567c90131d2","Madhu-1","2020-07-03 07:10:45","false","doc: update doc to delete alpha snapshot

updated upgrade documentation to remove
the snapshot created by alpha driver before
upgrade of CSI driver as beta snapshot is not
backward compatible with the alpha snapshot.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",111,30,0,1,"2018-01-08 15:47:21","906.14"
"ceph/ceph-csi","7835609b0602f3dfbb349c8d6dcd91f08f34a505","Madhu-1","2020-05-05 08:28:39","false","set priorityclass on provisioner pods

set system-cluster-critical priorityclass on
provisioner pods. the system-cluster-critical is
having lowest priority compared to node-critical.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",109,28,0,1,"2018-01-08 15:47:21","848.2"
"ceph/ceph-csi","2eebf6b6e0983e7f39236c0f4569ba0f7dcfdd0c","Madhu-1","2021-06-10 06:43:09","false","build: use cephcsi bot token to push helm charts

GITHUB_TOKEN is auto generated for cephcsi repo
and it cannot be used to push helm charts to
different repo. added new secret CEPH_CSI_BOT_TOKEN
to push helm charts.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",108,41,0,1,"2018-01-08 15:47:21","1247.37"
"ceph/ceph-csi","e56621cd669dff43377e53893d8caffdbd1c08ae","Madhu-1","2022-09-07 06:16:22","false","cephfs: fix subvolumegroup creation for multiple fs

In a cluster we can have multiple filesystem
for that we need to have a map of
subvolumegroups to check filesystem is created
nor not.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",38,56,1,1,"2018-01-08 15:47:21","1700.6"
"ceph/ceph-csi","738b5a1f463aa72b4609c62ea2f58f7b22c4d684","Madhu-1","2020-08-12 05:37:08","false","ci: add mergify rules for v3.1 branch

add mergify rules for backport and auto
merge of PR's for release-v3.1 branch.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",121,31,0,1,"2018-01-08 15:47:21","944.08"
"ceph/ceph-csi","d94a7ca7e1213b1f03fe3c16976ab438c5932348","Madhu-1","2021-04-15 11:56:59","false","revert: cleanup: update mergify.yml to use merge_bot_account option

This reverts commit 31634ede3d96b82cff034720bffc469c4de7d3e0.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",87,39,0,1,"2018-01-08 15:47:21","1192.59"
"ceph/ceph-csi","f90408be4d6197ecee3eb5416db3b42fdb23d80c","Madhu-1","2022-03-29 09:52:27","false","rbd: increase force promote timeout to 2 minutes

Increase the timeout to 2 minutes to give enough time
for rollback to complete.
As rollback is performed by the force-promote command it,
at times, may take more than a minute
(based on dirty blocks that need to be rolled
back approximately) to rollback.

The added extra 1 minute is useful though to avoid
multiple calls to complete the rollback and in
extremely corner cases to avoid failures in the
first instance of the call when the mirror watcher
is not yet removed (post scaling down the
RBD mirror instance)

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",47,51,1,1,"2018-01-08 15:47:21","1541.75"
"ceph/ceph-csi","a42c4b5855e4f9bbc6e72fbe302b725c71467e6c","nixpanic","2021-02-15 14:50:12","false","util: convert VAULT_SKIP_VERIFY to ""vaultCAVerify"" KMS option

""VAULT_SKIP_VERIFY"" is a standard Hashicorp Vault environment variable
(a string) that needs to get converted to the ""vaultCAVerify""
configuration option in the Ceph-CSI format.

The value of ""VAULT_SKIP_VERIFY"" means the reverse of ""vaultCAVerify"",
this part was missing in the original conversion too.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",86,37,0,1,"2018-01-08 15:47:21","1132.71"
"ceph/ceph-csi","bd204d7d458a670c5c421650ddc8689664048e5f","ShyamsundarR","2019-06-25 19:29:17","false","Use --keyfile option to pass keys to all Ceph CLIs

Every Ceph CLI that is invoked at present passes the key via the
--key option, and hence is exposed to key being displayed on
the host using a ps command or such means.

This commit addresses this issue by stashing the key in a tmp
file, which is again created on a tmpfs (or empty dir backed by
memory). Further using such tmp files as arguments to the --keyfile
option for every CLI that is invoked.

This prevents the key from being visible as part of the argument list
of the invoked program on the system.

Fixes: #318

Signed-off-by: ShyamsundarR <srangana@redhat.com>",79,17,0,0,"2018-01-08 15:47:21","532.4"
"ceph/ceph-csi","3cc791c7c48a094bd843348b75254fc4da9ff9ae","nixpanic","2020-06-22 14:48:41","false","ci: document TEST_COVERAGE and GO_COVER_DIR in buid.env

Signed-off-by: Niels de Vos <ndevos@redhat.com>",116,29,0,1,"2018-01-08 15:47:21","894.46"
"ceph/ceph-csi","7c580af412bd7faed459f5d2109040aa1cbc1459","nixpanic","2020-11-04 12:58:12","false","cephfs: remove unused Credentials argument from createSnapshot()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",80,34,0,1,"2018-01-08 15:47:21","1027.38"
"ceph/ceph-csi","0da4bd5151f385dfbbdd1f182f5ee1d946d00525","Madhu-1","2019-08-14 06:42:17","false","start controller or node server based on config

if both controller and nodeserver flags are set/unset
cephcsi will start both server,

if only one flag is set, it will start relavent
service.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",79,19,0,1,"2018-01-08 15:47:21","580.87"
"ceph/ceph-csi","cb68b681641aa37bbc47efe9ab7a48792dad4ef4","rootfs","2019-02-25 17:35:44","true","Merge pull request #218 from Madhu-1/cephfs-heml

Add support for cephfs helm chat",31,14,0,0,"2018-01-08 15:47:21","412.33"
"ceph/ceph-csi","a44da1ba5dc51e062d50aabefeb8f3b367a910bf","rootfs","2019-02-06 20:01:01","true","Merge pull request #180 from rootfs/helm

helm init before package",26,13,0,0,"2018-01-08 15:47:21","394.43"
"ceph/ceph-csi","0fb0db185273bc6c1b4b3dfbef397027bc337fdf","rootfs","2019-02-06 18:26:20","true","Merge pull request #178 from kfox1111/csi-v1.0

Push helm packages to repo",26,13,0,0,"2018-01-08 15:47:21","394.36"
"ceph/ceph-csi","e0b876740102266958f06e63d7fa7527581d30f3","gman0","2018-03-20 15:19:31","false","cephfs/Dockerfile: ceph-common package not needed anymore",2,2,0,0,"2018-01-08 15:47:21","71.98"
"ceph/ceph-csi","538e36f7a74a80d5f2f9e1eb087c2ffdea0aeec7","nixpanic","2021-06-07 08:40:26","false","ci: pass GITHUB_BASE_REF when running commitlint

GitHub Actions include a merge commit for the PR, which will defeat the
commitlint checking of all the commits inside the PR (only the merge
commit is checked).

Signed-off-by: Niels de Vos <ndevos@redhat.com>",111,41,0,1,"2018-01-08 15:47:21","1245.45"
"ceph/ceph-csi","b20f4184ba0045f2af9ba96ba268726df35e3dc2","mcronce","2018-12-10 16:06:08","false","deploy.sh:  Exit if branch is not on whitelist",16,11,0,0,"2018-01-08 15:47:21","332.01"
"ceph/ceph-csi","fb60f6617893b7373a8d5f22fd2874be568f4e1d","nixpanic","2020-07-28 14:02:42","false","ci: use the host /sbin/losetup in minikube VM

minikube has /sbin/losetup from Busybox, and that does not work with
raw-block PVCs. Use the losetup executable from the host in the VM
instead.

See-also: kubernetes/minikube#8284
Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,31,0,1,"2018-01-08 15:47:21","930.43"
"ceph/ceph-csi","855f9080d1b3c6fef05e5a36bedaf9c719af3946","nixpanic","2021-07-09 11:49:23","false","e2e: refactor KMS configuration and usage

This adds a new `kmsConfig` interface that can be used to validate
different KMS services and setting. It makes checking for the available
support easier, and fetching the passphrase simpler.

The basicKMS mirrors the current validation of the KMS implementations
that use secrets and metadata. vaultKMS can be used to validate the
passphrase stored in a Vault service.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",125,42,0,1,"2018-01-08 15:47:21","1276.58"
"ceph/ceph-csi","7ed5dfe81a1ef2f27bcb6694432ae26411772a0a","Madhu-1","2020-08-11 11:22:48","false","cephfs: replace klog.Error with util.ErrorLog in DeleteVolume

replaced klog.Error with util.ErrorLog in DeleteVolume
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.32"
"ceph/ceph-csi","a9e8a32a9841b209cfaedeb20db165817f63280d","Madhu-1","2023-11-02 11:12:41","false","e2e: add multiple labels to node

update the e2e code to add multiple
labels to the node at a time.

fixes: #4146

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",20,70,1,1,"2018-01-08 15:47:21","2121.06"
"ceph/ceph-csi","24405dc178a7f88c2f550ca041b192fd3b74137d","Madhu-1","2020-02-25 11:57:12","false","Fix undeclared golangci-lint warnings

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",107,26,0,1,"2018-01-08 15:47:21","777.34"
"ceph/ceph-csi","ef74050af2f11952e301ca38d00c6ee2dc4d55fb","Madhu-1","2019-03-05 12:16:53","false","add examples for raw block pvc
and pod to mount it

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",30,14,0,1,"2018-01-08 15:47:21","423.1"
"ceph/ceph-csi","23a4126aed7c31e861214203ac85d66d924d9f48","mcronce","2018-12-05 02:44:04","false","pkg/rbd/controllerserver.go:  gofmt",16,11,0,0,"2018-01-08 15:47:21","327.46"
"ceph/ceph-csi","ec1a009deed5d148385ae697a4fc7153085894a7","nixpanic","2020-07-02 12:34:28","false","rbd: allow DeleteVolume() to be too complex according to gocyclo

By fixing the golangci-lint runs, this now gets reported as a problem.
Instead of addressing the compexity of the DeleteVolume() method here,
mark it as a TODO.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",111,30,0,1,"2018-01-08 15:47:21","905.37"
"ceph/ceph-csi","ad0b8897bf6aa376267741ff3ba2dadb3eaa6d35","nixpanic","2020-03-24 10:27:01","false","tests: gosec does not support '-mod=vendor'

Signed-off-by: Niels de Vos <ndevos@redhat.com>",114,26,0,1,"2018-01-08 15:47:21","806.28"
"ceph/ceph-csi","b66390ee0667b000ff82798a0421941c4dae9017","nixpanic","2020-08-19 07:03:00","false","ci: do not require commitlint before merging

The GitHub commitlint App does not get triggered for new or updated PRs
since the last days. It is possible to manually start a test in the
CentOS CI for this with `/test commitlint`, but Travis CI already
includes a test (as part of ""static-checks"") too. There is no need to
run the tests 2x, so remove the status check from the Mergify
configuration.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",120,31,0,1,"2018-01-08 15:47:21","951.14"
"ceph/ceph-csi","885ec7049dbfc8590a6289adaabc5c6769f5b322","ShyamsundarR","2019-08-03 22:11:28","false","Update Unstage transaction to undo steps done in Stage

In unstage we now adhere to the transaction (or order of steps)
done in Stage. To enable this we stash the image meta data
into a local file on the staging path for use with unstage
request.

This helps in unmapping a stale map, in case the mount or
other steps in the transaction are complete.

Signed-off-by: ShyamsundarR <srangana@redhat.com>",79,19,0,0,"2018-01-08 15:47:21","571.52"
"ceph/ceph-csi","90fd12629fd49d36db02ce0e10791893cb4411fa","nixpanic","2021-05-05 11:59:06","false","ci: use mergify to add labels to PRs

Adding labels to Pull-Requests can be done by Mergify. It is very useful
to filter PRs on their labels so that experts in certain areas can
identify PRs to review.

Adding labels is currently a complete manual process, this adds some
automation for it. There is no intention of it being complete, this is
mostly for getting started and trying things out.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",96,40,0,1,"2018-01-08 15:47:21","1213.59"
"ceph/ceph-csi","953cfa508a5db8e21edd230e3ec9c6fa1ba5324e","agarwal-mudit","2020-07-07 09:27:56","false","util: fix tracevol.py to work with volumeNamePrefix in storageclass

tarcevol.py works with a fixed volume name prefix ""csi-vol-"", this could be changed by the storageclass
and hence tracevol.py should work with the dynamic value rather than the static.

Signed-off-by: Mudit Agarwal <muagarwa@redhat.com>",110,30,0,0,"2018-01-08 15:47:21","910.24"
"ceph/ceph-csi","436bb54262da874a1174acc585d051b643023ba6","gman0","2018-03-20 14:57:03","false","cephfs/volume: fixed arguments for ceph-fuse; assume volume root and cephx user already exist",2,2,0,0,"2018-01-08 15:47:21","71.97"
"ceph/ceph-csi","31f0ac6e2dc656c092b33386c0196df152324f4c","humblec","2022-12-08 07:08:19","false","deploy: update node-driver-registrar to v2.6.2

This version has a fix for an important bug at kubelet
registration path.
https://github.com/kubernetes-csi/node-driver-registrar/pull/247

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",32,59,1,1,"2018-01-08 15:47:21","1791.64"
"ceph/ceph-csi","4b3ebc171b763a4541ec943d3f8af83943167bfa","sbezverk","2018-03-07 16:40:48","true","Merge pull request #25 from rootfs/node

WIP node server: don't persist vol",2,2,0,0,"2018-01-08 15:47:21","60.04"
"ceph/ceph-csi","86acb9ccd9e2ab37d23cc8f0155e5fd25f714edf","rootfs","2018-02-06 18:41:18","true","Merge pull request #15 from rootfs/rbd-refactoring

update readme and deployment",1,1,0,0,"2018-01-08 15:47:21","29.12"
"ceph/ceph-csi","853d77d7939cd17b3122f6a9b8a585848fe181a8","yati1998","2021-07-01 12:48:19","false","doc: update helm chart documentations

This commit updates the helm chart documentations
with the configurations available while deploying
these helm charts.

Signed-off-by: Yati Padia <ypadia@redhat.com>",121,42,0,0,"2018-01-08 15:47:21","1269.63"
"ceph/ceph-csi","8737d7e0a55a66dca7651f6817fe5385de86bf58","humblec","2022-01-06 15:19:07","false","e2e: add rwop validation tests for rbd filemode and block mode

This commit adds the validation tests for rbd block and filemode
PVCs.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",44,48,1,1,"2018-01-08 15:47:21","1454.73"
"ceph/ceph-csi","a9fa10895998653ceaa17e53d3adf67c0ff03876","humblec","2021-06-10 11:16:42","false","e2e: use proper variable name for rbd mount options

The variable naming for rbd mount options has been changed
to rbdMountOptions to be consistent with other variable naming schema

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",108,41,0,1,"2018-01-08 15:47:21","1247.56"
"ceph/ceph-csi","183c46dd8df25478cc1299243fa86bd47c9d455e","humblec","2019-05-07 08:47:38","false","Add some more details to release process.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",68,16,0,1,"2018-01-08 15:47:21","484.96"
"ceph/ceph-csi","8d3e63a2b24c796c1d3e37b49cb6678e5be0fdf0","humblec","2022-08-18 12:46:59","false","build: remove release 3.5 backport rule

considering we have 3.7 release in place, this commit remove
the release 3.5 backporting based on the labels in the repo.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",41,55,1,1,"2018-01-08 15:47:21","1680.87"
"ceph/ceph-csi","4c16e086e6e1746f75262d0a21a7703e06fc1f88","Yuggupta27","2020-12-16 11:24:54","false","helm: Update values for storage class and secret

Add default values for storage class and secret
templates for helm installation.

Signed-off-by: Yug <yuggupta27@gmail.com>",76,35,0,0,"2018-01-08 15:47:21","1068.32"
"ceph/ceph-csi","984119b30d76b6d6c65453457d87b52894a75089","nixpanic","2022-03-17 09:28:41","false","ci: add ""nfs"" as allowed commit prefix

Signed-off-by: Niels de Vos <ndevos@redhat.com>",43,50,1,1,"2018-01-08 15:47:21","1529.74"
"ceph/ceph-csi","bfef0279a72ed104062dfb6b4f3986706457e201","nixpanic","2022-04-28 08:35:34","false","e2e: retry getting Pods before executing commands

On occasion the Pods have not been (re)started before they get listed.
This can result in an empty list. It can occur during RBD testing where
Pods are restarted before `uname` is executed. In case the Pods are not
available yet, the test will fail with the ""podlist is empty"" error.

By adding a retry when the list of Pods is empty, the tests should
become a little more stable.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",38,52,1,1,"2018-01-08 15:47:21","1570.7"
"ceph/ceph-csi","ff94ba282caaa7d7331b54a000fd742a5ded59c7","nixpanic","2020-07-29 11:22:41","false","ci: deploy rook with mon_warn_on_pool_no_redundancy in ceph.conf

In test environments the default pool size is set to 1, so there is no
redundancy. This causes recent Ceph versions to complain with
HEALTH_WARN as POOL_NO_REDUNDANCY get set.

By disabling the mon_warn_on_pool_no_redundancy option in ceph.conf, the
warning is not reported and the cluster is marked HEALTHY.

See-also: rook/rook#5925
Signed-off-by: Niels de Vos <ndevos@redhat.com>",118,31,0,1,"2018-01-08 15:47:21","931.32"
"ceph/ceph-csi","77f2db88759ac2a786c59b564efdfd077534683f","Yuggupta27","2021-06-23 09:36:57","false","deploy: update csi-resizer sidecar

update csi-resizer sidecar to
the latest available release version.

Signed-off-by: Yug <yuggupta27@gmail.com>",118,41,0,0,"2018-01-08 15:47:21","1260.49"
"ceph/ceph-csi","78cb7af46f284a7dc93d2cdc27ada31ac5a18b90","nixpanic","2021-03-22 16:29:47","false","rebase: vendor pkgs for Amazon KMS support

Signed-off-by: Niels de Vos <ndevos@redhat.com>",87,38,0,1,"2018-01-08 15:47:21","1169.78"
"ceph/ceph-csi","6d5456cc779d22a5829356bcad531a72fa6ec60b","nixpanic","2020-08-18 11:18:08","false","ci: use FETCH_HEAD like ""commitlint --from"" does

After fetching the target branch for the PR, the GIT_SINCE ref in the
git repository may not be set (in CI environments). This causes 'git
rebase' to fail. Use FETCH_HEAD instead, so that the checked out PR gets
rebased correctly.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",119,31,0,1,"2018-01-08 15:47:21","950.31"
"ceph/ceph-csi","eaeee8ac3df26841d4e6a5bfbafe1025e3757cbd","nixpanic","2020-11-23 13:29:59","false","deploy: use docker.io for unqualified image names

Images that have an unqualified name (no explicit registry) come from
Docker Hub. This can be made explicit by adding docker.io as prefix. In
addition, the default :latest tag has been added too.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",82,34,0,1,"2018-01-08 15:47:21","1045.4"
"ceph/ceph-csi","b235c171bac080444d81ac7eddf6668f84e8117b","nixpanic","2022-04-14 08:39:49","false","e2e: retry creation of the RBD StorageClass

On occasion the creation of the StorageClass can fail due to an
etcdserver timeout. If that happens, the creation can be attempted after
a delay.

This has already been done for CephFS StorageClasses, but was missed for
RBD.

See-also: ceph/ceph-csi@8a0377ef02
Signed-off-by: Niels de Vos <ndevos@redhat.com>",44,51,1,1,"2018-01-08 15:47:21","1556.7"
"ceph/ceph-csi","30dc83c3bbaefb1f78c3c56ea81016729c3154bf","nixpanic","2020-06-30 09:34:01","false","util: create ceph.conf with 0600 permissions

The generated ceph.conf does not need readable by the group, there is
only one (system) user consuming the configurations file.

This addresses the following gosec warning:

    [/go/src/github.com/ceph/ceph-csi/internal/util/cephconf.go:52] - G306 (CWE-): Expect WriteFile permissions to be 0600 or less (Confidence: HIGH, Severity: MEDIUM)
      > ioutil.WriteFile(CephConfigPath, cephConfig, 0640)

Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,30,0,1,"2018-01-08 15:47:21","902.24"
"ceph/ceph-csi","b9dd54e2386be5cf251d418bfc5e65fea86dc10c","facchettos","2020-09-28 17:46:10","false","doc: added precisions about snapshotting and cloning

Signed-off-by: Jeremy Facchetti <facchettos@gmail.com>",132,33,0,0,"2018-01-08 15:47:21","990.58"
"ceph/ceph-csi","7c2fb6187a080e4c91564a288a0e341e9852ee29","Madhu-1","2019-08-06 06:46:56","false","remove post validation of rbd device

once we map the rbd image on a node
we will get the device name its mapped
in the map output itself,no need to
check the devicepath post rbd  mapping

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",81,19,0,1,"2018-01-08 15:47:21","573.87"
"ceph/ceph-csi","2d70e250818d879646ca8f7ab6ab07ee5ee48fb7","humblec","2020-10-19 02:24:48","false","util: remove unused CSI server initialization functions

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",78,33,0,1,"2018-01-08 15:47:21","1010.94"
"ceph/ceph-csi","5ba7790b261aaf0a2801ab794ea7731131bc3f4e","humblec","2021-06-23 07:31:36","false","e2e: make use of snapshot v1 api in rbd_helper.go

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",118,41,0,1,"2018-01-08 15:47:21","1260.41"
"ceph/ceph-csi","48fa43270fa779f827f1ecfca0e0574cb1469c05","Yuggupta27","2020-07-13 05:22:16","false","cleanup: address gocritic warnings

Add explanation to nolint directives.

Issue reported:
whyNoLint: include an explanation for nolint directive (gocritic)

Signed-off-by: Yug <yuggupta27@gmail.com>",113,30,0,0,"2018-01-08 15:47:21","915.07"
"ceph/ceph-csi","3e656769b71a3c43d95f6875ed4934c82a8046e7","hswong3i","2020-01-01 14:31:51","false","Update csi-provisioner from v1.3.0 to v1.4.0

See https://github.com/kubernetes-csi/external-provisioner/releases/tag/v1.4.0
See https://github.com/kubernetes-csi/external-provisioner/blob/v1.4.0/CHANGELOG-1.4.md",103,24,0,0,"2018-01-08 15:47:21","719.2"
"ceph/ceph-csi","0c06233f40cc2289111cdbbd48432f55e57f5792","humblec","2022-11-10 07:02:12","false","doc: remove uid/gid mgr issue from the deployment doc

this issue has been already fixed long back and available with
ceph backports. We no longer require this mention in the docs.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",36,58,1,1,"2018-01-08 15:47:21","1762.64"
"ceph/ceph-csi","50a720f13dafc9c37e5fb596211d80abc634483f","mtneug","2021-02-02 12:05:30","false","helm: Fix plugin socket path

PR #1736 made the kubelet path configurable. It also introduced a change in
the path to the CSI socket. By default the path is now
`/var/lib/kubelet/cephfs.csi.ceph.com/csi.sock` instead of
`/var/lib/kubelet/plugins/cephfs.csi.ceph.com/csi.sock`. This PR
restores the old default.

Signed-off-by: Matthias Neugebauer <matthias.neugebauer@uni-muenster.de>",83,37,0,0,"2018-01-08 15:47:21","1120.6"
"ceph/ceph-csi","5867d495fd40bf67f0157a7793353efa243cc988","mkimuram","2018-11-15 02:06:42","false","Change csi rbd to create/delete targetPath for publish/unpublish",15,10,0,0,"2018-01-08 15:47:21","306.43"
"ceph/ceph-csi","0f451ed465ee62352efc8892843a6410870316e4","Madhu-1","2020-12-02 08:27:03","false","cephfs: implement getSnapshotInfo with go-ceph

implement getSnapshotInfo function with go-ceph
to get subvolume information.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",80,35,0,1,"2018-01-08 15:47:21","1055.19"
"ceph/ceph-csi","b383af20b4365882ca07077bc76b7510c60204ca","Madhu-1","2021-08-25 06:46:03","false","cleanup: move cephfs errors to new util package

As part of the refactoring, moving the cephfs errors file to a new
package.

Updates: #852
Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",116,43,0,1,"2018-01-08 15:47:21","1322.37"
"ceph/ceph-csi","1eff2e1490974ae87e3443e95727b18910a31bdd","humblec","2019-05-07 09:44:14","false","Merge branch 'master' of http://github.com/ceph/ceph-csi into csi-v1.0

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",68,16,0,1,"2018-01-08 15:47:21","485"
"ceph/ceph-csi","68bbd58045fe5b7b7f6128a9589bb907b3cc0994","humblec","2021-08-16 08:21:10","false","rebase: update sidecars to latest versions

external-provisioner: v2.3.0
external-attacher: v3.3.0
external-snapshotter: v4.2.0
node-driver-registrar: v2.3.0

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",116,43,0,1,"2018-01-08 15:47:21","1313.44"
"ceph/ceph-csi","2f828cf20cb332830bdd1109c8b4c234a6d670fb","humblec","2020-10-13 05:17:42","false","e2e: update readme for new sidecar repository path

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",76,33,0,1,"2018-01-08 15:47:21","1005.06"
"ceph/ceph-csi","2793b79ad8e04628ade7bce4d16c4954363d8947","humblec","2020-06-10 10:52:52","false","doc: Correct PVC mention in the deployment doc

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",115,29,0,1,"2018-01-08 15:47:21","882.3"
"ceph/ceph-csi","551a5018d0dc2d7d5d377867ce04bf829f8a0805","Madhu-1","2020-10-20 06:49:10","false","helm: make log level configurable

instead of keeping the log level at 5, which
is required only for tracing the errors. this commit
adds an option for users to configure the log level
for all containers.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",77,33,0,1,"2018-01-08 15:47:21","1012.13"
"ceph/ceph-csi","1307327930eea9922cf9f2bbc9bb244871a354b0","arm64b","2018-04-24 09:02:46","false","Fix the ceph csi `rbdplugin` container build issue

This PR is trying to fix the issue #34. We use 'RBD_IMAGE_NAME' and
'RBD_IMAGE_VERSION' instead of the obsolete 'IMAGE_NAME' and 'IMAGE_VERSION'
to address this issue.

Signed-off-by: Dennis Chen <dennis.chen@arm.com>",4,3,0,0,"2018-01-08 15:47:21","105.72"
"ceph/ceph-csi","c6bc84d8477473d4a309abfc93182d3b2e3e98db","Madhu-1","2021-06-15 05:08:38","false","e2e: validate images in trash

when all the PVC and associated images are deleted,
the images should also get deleted from the trash.
This commit adds the validation check for the same.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",109,41,0,1,"2018-01-08 15:47:21","1252.31"
"ceph/ceph-csi","51998a5f4afe85f29a35792f79c75acebf18d8ff","Madhu-1","2021-11-08 09:58:04","false","cleanup: log the image name and pool name

instead of logging the volumeID and the pool
name. log the poolname and image name for better
debugging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",56,46,0,1,"2018-01-08 15:47:21","1396.51"
"ceph/ceph-csi","97d1a231145b5b585979a3b3d0b533cf75caaa83","rootfs","2018-07-19 17:51:14","true","Merge pull request #49 from ceph/m-fix

CSI is alpha in k8s 1.9",6,6,0,0,"2018-01-08 15:47:21","191.09"
"ceph/ceph-csi","af008471ab0256d51b9e69f1beabbc4cff7e1cbd","rootfs","2019-01-17 14:04:59","true","Merge pull request #132 from rootfs/v1-block

support block volume",17,12,0,0,"2018-01-08 15:47:21","374.18"
"ceph/ceph-csi","197c8fcfcc73864061e91be59fb44625d9ea4eeb","KingJ","2019-09-06 20:05:51","false","Consider Kernel >=5.x as sufficent for using the Kernel mounter",83,20,0,0,"2018-01-08 15:47:21","604.43"
"ceph/ceph-csi","aca606ca4234ca9dbfd984bf5da7a0577afddbb0","nixpanic","2020-08-18 08:04:41","false","build: add .test-container-id to .gitignore

Signed-off-by: Niels de Vos <ndevos@redhat.com>",119,31,0,1,"2018-01-08 15:47:21","950.18"
"ceph/ceph-csi","37471c7a5f01d83f66e633829f4186b3a37a631b","nixpanic","2020-12-08 13:21:56","false","cleanup: return error type in ReconcilePersistentVolume.getCredentials()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,35,0,1,"2018-01-08 15:47:21","1061.4"
"ceph/ceph-csi","07862259378e123c31ff03584f3d04cca1c38519","humblec","2019-07-30 06:20:28","false","Implement metrics for RBD plugin

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",75,19,0,1,"2018-01-08 15:47:21","566.86"
"ceph/ceph-csi","3730a462f4f4ce1e4297176f3f5111926768750b","humblec","2021-10-26 06:51:35","false","rbd: add SINGLE_NODE{SINGLE_MULTI}_WRITER capabilities

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",53,45,0,1,"2018-01-08 15:47:21","1383.38"
"ceph/ceph-csi","50ba8ed446a5939832f1bcd952fa7165bc4eb119","Madhu-1","2019-01-29 05:49:16","false","Fix gometalinter issues

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",22,13,0,1,"2018-01-08 15:47:21","385.83"
"ceph/ceph-csi","d1d88cb4d693ea69460eee0bb7157a3ce7f9ea5c","Yuggupta27","2020-09-30 06:37:25","false","e2e: remove UPGRADE_VERSION from build.env

The ceph-csi upgrade version is now present in the
job configuration, this can be removed from here
to avoid redundancy.

Signed-off-by: Yug <yuggupta27@gmail.com>",129,33,0,0,"2018-01-08 15:47:21","992.12"
"ceph/ceph-csi","726dcf4da31cb3d43ebb11903d70e70fcde3bc2d","Yuggupta27","2020-09-30 13:27:33","false","ci: Update cephfs upgrade tests

Add snapshot cloning and pvc cloning test cases for
cephfs upgrade tests.

Signed-off-by: Yug <yuggupta27@gmail.com>",122,33,0,0,"2018-01-08 15:47:21","992.4"
"ceph/ceph-csi","5c079894c76816017f4e435ab26fc870d8379fca","Yuggupta27","2021-06-11 08:06:32","false","doc: correct comment indentation in rbdVolume

correct comment indentation in rbdvolume{}

Signed-off-by: Yug <yuggupta27@gmail.com>",108,41,0,0,"2018-01-08 15:47:21","1248.43"
"ceph/ceph-csi","d77b23e3c199e25b05437b618212001da251a560","Madhu-1","2020-08-20 05:23:41","false","ci: change snapshotter default version to v2.1.1

we cannot depend on the master branch of external-snapshotter
in cephcsi as the master branch can change anytime. its
good to use released tags to our E2E.

fixes: #1416

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",122,31,0,1,"2018-01-08 15:47:21","952.07"
"ceph/ceph-csi","3d124564933dc9a7b1de952c5e46a50f92752039","Madhu-1","2020-08-11 11:35:14","false","util: add WarningLog to log with context

added WarningLog to log with context

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.32"
"ceph/ceph-csi","aa32e8b43b3aad8904d1d8f4d09857311bcd6286","Madhu-1","2019-12-11 06:14:00","false","update E2E testing to 1.15.6 and 1.17.0

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",99,23,0,1,"2018-01-08 15:47:21","697.85"
"ceph/ceph-csi","9dc1f61a34731f0d50f3f5c3b7e2e4cf9da33074","rootfs","2019-02-04 14:06:46","true","Merge pull request #156 from Madhu-1/update-meta

Fix issues found in static check",22,13,0,0,"2018-01-08 15:47:21","392.18"
"ceph/ceph-csi","6e61a8449ba8cba455112f8556171a77254a813d","rootfs","2018-09-19 15:18:39","true","Merge pull request #77 from rootfs/rbd-nbd

set dns policy in csi plugin so storage class can use mons' FQDN",7,8,0,0,"2018-01-08 15:47:21","250.98"
"ceph/ceph-csi","3d3c0294715c9abb9ff01f0f7f96ef61587b1f8d","Rakshith-R","2022-07-26 10:04:57","false","nfs: add nodeserver within cephcsi

This commit adds nfs nodeserver capable of
mounting nfs volumes, even with pod networking
using NSenter design similar to rbd and cephfs.
NodePublish, NodeUnpublish, NodeGetVolumeStats
and NodeGetCapabilities have been implemented.

The nodeserver implementation has been inspired
from https://github.com/kubernetes-csi/csi-driver-nfs,
which was previously used for mounted cephcsi exported
nfs volumes. The current implementation is also
backward compatible for the previously created
PVCs.

Signed-off-by: Rakshith R <rar@redhat.com>",40,54,1,1,"2018-01-08 15:47:21","1658.76"
"ceph/ceph-csi","1f136920008b17f91ef710ef86340584bfaf7ce2","Madhu-1","2020-04-16 07:34:44","false","ci: skip snapshot E2E if kube<1.17+

snapshot beta CRD wont work if the
kubernetes version is less than 1.17.0
as the snapshot CRD wont be installed
we cannot test the snapshot,so disabling
it if the kube version is less than 1.17

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",102,27,0,1,"2018-01-08 15:47:21","828.16"
"ceph/ceph-csi","5b14cc9272a4449878651118b15ce3c7ef559328","Madhu-1","2020-04-15 03:38:16","false","Fix goimports issue in CI

Fix below error in current codebase
File is not `goimports`-ed with -local
github.com/ceph/ceph-csi

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",104,27,0,1,"2018-01-08 15:47:21","826.99"
"ceph/ceph-csi","892d65d387420095e072158a05ee902b91de768f","gman0","2019-02-14 10:36:34","false","added StripSecretInArgs in pkg/util",27,13,0,0,"2018-01-08 15:47:21","401.03"
"ceph/ceph-csi","ec6cc5228364c01962068d1997929f755520c7b0","Madhu-1","2019-01-29 12:47:04","false","remove golint from travis.yml

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",20,13,0,1,"2018-01-08 15:47:21","386.12"
"ceph/ceph-csi","095044fc90484328f4cb5bf67a89a7ec0d111974","rootfs","2018-11-20 14:45:15","false","switch to centos base image",15,10,0,0,"2018-01-08 15:47:21","311.96"
"ceph/ceph-csi","cb346a5f0b7dbc7d3809c2cb6e348599659f5903","rootfs","2019-02-06 14:48:00","true","Merge pull request #174 from humblec/upstream/csi-v0.1

Markdown linter and spelling corrections.",26,13,0,0,"2018-01-08 15:47:21","394.21"
"ceph/ceph-csi","e000dff1ea32add89f678d58aff446a7f9c9ab26","kfox1111","2019-02-08 00:35:47","false","Fix identified issues

Signed-off-by: Kevin Fox <Kevin.Fox@pnnl.gov>",26,13,0,0,"2018-01-08 15:47:21","395.62"
"ceph/ceph-csi","d5c6f889c54eadfa4f172d2248e85c1bd2924fd4","mcronce","2018-12-04 20:08:39","false","deploy/rbd/kubernetes:  Use CSI 1.x plugin directory",16,11,0,0,"2018-01-08 15:47:21","327.18"
"ceph/ceph-csi","3d0395d448f98f5d176c3904a0001f888da7fbc7","nixpanic","2020-05-25 15:32:27","false","ci: require ci/centos/containerized-tests for merging

The ci/centos/containerized-tests status is already set by the Jenkins
job in the CentOS CI. It can now be used to gate the automatic merging
of PRs.

Reduce the load on Travis CI, do not run the containerized-tests job
there any longer.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",110,29,0,1,"2018-01-08 15:47:21","867.49"
"ceph/ceph-csi","da76d8ddaef2cd42bdbf2a9fbde827e3f76d1cde","irq0","2022-08-18 16:07:08","false","kms: Add GetSecret() to KMIP KMS

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",41,55,1,0,"2018-01-08 15:47:21","1681.01"
"ceph/ceph-csi","fc7d3fadf5d12b4ee480dcfcba56cce28428154b","humblec","2021-11-22 06:53:14","false","e2e: reformat error message with consistent formatting

To make the error return consistent across e2e tests we have decided
to remove with error presence from the logs and this commit
does that for e2e/upgrade-cephfs.go.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",55,46,0,1,"2018-01-08 15:47:21","1409.38"
"ceph/ceph-csi","75d800c07e0a4f862941ac9fb3af511c1670aada","yati1998","2020-07-27 05:37:17","false","doc: documentation updates on capabilities

Documents exact capabilities a id requires against a
Ceph cluster for RBD and CephFS plugins.

Signed-off-by: yati1998 <ypadia@redhat.com>",113,31,0,0,"2018-01-08 15:47:21","929.08"
"ceph/ceph-csi","1fbd3e69ded1239ccfbe20ecfc3ca31016323c61","hswong3i","2018-07-04 04:20:56","false","Update CEPH_VERSION to mimic",3,6,0,0,"2018-01-08 15:47:21","176.52"
"ceph/ceph-csi","b7c03d7ad223119334cfa2cf8bef3d793d84d3ef","Madhu-1","2022-05-24 03:46:46","false","build: update snapshotter to v6

updating the snapshotter version to
v6 as v6.0.0 is released.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",35,52,1,1,"2018-01-08 15:47:21","1596.5"
"ceph/ceph-csi","b40d561228d0b742224f62531492c4b3b73e897e","Madhu-1","2020-11-30 09:30:01","false","cephfs: make getVolumeRootPathCeph as a method

getVolumeRootPathCeph is a method of volumeOptions

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",85,35,0,1,"2018-01-08 15:47:21","1052.24"
"ceph/ceph-csi","92b2e08adf30302fe052f6afe4f0c1b44d7abf37","nixpanic","2021-03-15 14:25:01","false","rbd: improve logging in deleteImage()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",85,38,0,1,"2018-01-08 15:47:21","1162.69"
"ceph/ceph-csi","239822f1476af6bbcc195a33b42128fdc33ddf72","Madhu-1","2019-10-11 08:26:10","false","reuse existing code for size Roundoff

This PR addresses the review comments in
https://github.com/ceph/ceph-csi/pull/644

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",87,21,0,1,"2018-01-08 15:47:21","637.94"
"ceph/ceph-csi","6cc37f0a17dd91958569cfd1ced80ae7c7bb2acb","Madhu-1","2021-08-09 09:48:15","false","cleanup: use different file name for testing

For clusterMappingConfigFile using different
file name so that multiple unit test cases can
work without any data race.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",120,43,0,1,"2018-01-08 15:47:21","1306.5"
"ceph/ceph-csi","3ea22bc5a800bd961ed26fa91ae4c99eb1ca4f5a","Madhu-1","2020-09-04 08:37:45","false","ci: update kubernetes version to v1.19.0

updated kubernetes version to latest release
in travis configuration for upgrade testing

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",125,32,0,1,"2018-01-08 15:47:21","967.2"
"ceph/ceph-csi","0dd152928d5b7d11d1ff5b5a8c8d6dd5dbf6e153","Madhu-1","2020-10-28 06:08:11","false","e2e: add option to set retainpolicy for rbd storageclass

added an option to set retain policy for
rbd storageclasses.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",74,34,0,1,"2018-01-08 15:47:21","1020.1"
"ceph/ceph-csi","c03969fa6585c0c90c9a4997f5533a743da03cb6","humblec","2021-11-03 09:55:08","false","e2e: remove 1.17 based test enablement in rbd

considering we are far out of this release and only care about
kubernetes releases from v1.20, there is no need to have this
version check in place for the tests.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",56,46,0,1,"2018-01-08 15:47:21","1391.51"
"ceph/ceph-csi","52cf4aa90260b2f3559007079faee29e69dba2f4","gman0","2019-01-09 15:35:31","true","Merge pull request #121 from rootfs/dev

fix cache persistent default for cephfs",17,12,0,0,"2018-01-08 15:47:21","366.24"
"ceph/ceph-csi","35c55aeb686333f0e18fd11ae645f72b8949b439","vfreex","2019-04-17 03:11:40","false","add missing PV update permission for rbd attacher

PR #290 missed the update permission to persistentvolumes.

Without that permission, you will get the following error when attaching a RBD volume to a pod:

```
Warning  FailedAttachVolume  100s (x11 over 7m52s)  attachdetach-controller  AttachVolume.Attach failed for volume ""pvc-d23f8745-60bb-11e9-bd35-5254001c78d6"" : could not add PersistentVolume finalizer: persistentvolumes ""pvc-d23f8745-60bb-11e9-bd35-5254001c78d6"" is forbidden: User ""system:serviceaccount:kube-system:rbd-csi-provisioner"" cannot update resource ""persistentvolumes"" in API group """" at the cluster scope
```",53,15,0,0,"2018-01-08 15:47:21","463.73"
"ceph/ceph-csi","08835965745b147ae557be8f0aa8c8f90b49f3b3","rootfs","2018-09-19 14:21:21","false","allow image registry override

Signed-off-by: Huamin Chen <hchen@redhat.com>",7,8,0,0,"2018-01-08 15:47:21","250.94"
"ceph/ceph-csi","5d98e0cad4592aa696e20512ad065e06d2976504","humblec","2019-05-08 06:24:39","false","Add PR/Issue/Feature templates

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",68,16,0,1,"2018-01-08 15:47:21","485.86"
"ceph/ceph-csi","dd9fabf747108f402f02cb3eeb7fbb39d7682c1a","Madhu-1","2021-07-28 03:15:43","false","e2e: add isAlreadyExistsCLIError to check known error

added isAlreadyExistsCLIError to check for known error.
if error is already exists we are considering it
as a success.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",118,43,0,1,"2018-01-08 15:47:21","1295.23"
"ceph/ceph-csi","b76d470bf12ddf7a9dac195e0184132b3045f8af","Madhu-1","2020-07-03 08:15:24","false","e2e: increase e2e test timeout

as we are creating more resources
the e2e timeout is not enough we need
to increase the e2e timeout to higher
value for now.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",111,30,0,1,"2018-01-08 15:47:21","906.19"
"ceph/ceph-csi","fabe84d4fe4ff84064d195f5e02c2d91511aba63","Madhu-1","2020-08-12 05:45:21","false","doc: add upgrade documentation for v3.1.0

added upgrade documentation to upgrade from
v3.0.0 to v3.1.0

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",121,31,0,1,"2018-01-08 15:47:21","944.08"
"ceph/ceph-csi","f4c80dec9ab82d0239b2b89c9cb9669dad728f08","Madhu-1","2019-07-03 10:02:36","false","Implement NodeStage and NodeUnstage for rbd

in NodeStage RPC call  we  have to map the
device to the node plugin and make  sure  the
the device will be mounted to  the global path

in  nodeUnstage request unmount the device from
global path and unmap the device

if the volume mode is block  we will be creating
a file inside a stageTargetPath  and it will be
considered  as the global path

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",80,18,0,1,"2018-01-08 15:47:21","541.01"
"ceph/ceph-csi","d79ca5bc901502242f15a5ca3fd2432f9f0406b2","j-griffith","2019-03-18 16:08:24","false","Merge branch 'csi-v1.0' into default_multiwrite_blockmode",33,14,0,0,"2018-01-08 15:47:21","435.26"
"ceph/ceph-csi","5ac3f1e29eca90b6a1feb4845a33f9661316391f","humblec","2020-10-21 07:32:19","false","util: change member `cap` of CSIDriver struct

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",75,33,0,1,"2018-01-08 15:47:21","1013.16"
"ceph/ceph-csi","f193ebfbb1a613088ee7b2d7a3f748ed81051d7b","mnaser","2021-06-05 14:43:04","false","rbd: Add failing test when no features are provided

Signed-off-by: Mohammed Naser <mnaser@vexxhost.com>",109,41,0,0,"2018-01-08 15:47:21","1243.71"
"ceph/ceph-csi","5a71949dcd7eb0933e8e76a6fc27cd8c4d82f635","humblec","2020-08-03 18:53:14","false","cephfs: introduce newSnapshotOptionsFromID to generate volOpt and sid

From provided CSI volume ID this populate volumeOptions and snapshot
identifier after connecting to the snapJournal.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","936.63"
"ceph/ceph-csi","c8a3b9352e0564cf6e350112fa7cdffe1811dc94","humblec","2022-01-24 13:00:25","false","rbd: Unexport SecretsMetadataKMS struct

This commit unexport SecretsMetadataKMS struct from KMS
implementation

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",36,49,1,1,"2018-01-08 15:47:21","1476.88"
"ceph/ceph-csi","0ce2c68454007082059240c8a1a3646af8c9c27e","gman0","2018-08-01 08:16:36","false","vendor: Gopkg.toml: added protobuf override to v1.1.0",6,7,0,0,"2018-01-08 15:47:21","203.69"
"ceph/ceph-csi","824f38daaa1763c676c814d911ddf7a7579ef80c","nixpanic","2020-01-15 13:06:03","false","rbd: use go-ceph to implement getImageInfo()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",106,24,0,1,"2018-01-08 15:47:21","737.39"
"ceph/ceph-csi","032db78d8a64a283efa20fe8e45ceeb5405e66b5","nixpanic","2020-11-04 13:21:22","false","cephfs: make deleteSnapshot() a method of volumeOptions

Signed-off-by: Niels de Vos <ndevos@redhat.com>",80,34,0,1,"2018-01-08 15:47:21","1027.4"
"ceph/ceph-csi","494c9b91cb1d9213b835717826459963e71b406e","Madhu-1","2021-12-16 05:27:46","false","e2e: add e2e for bigger size restore

added e2e for below cases

Normal PVC snapshot restore to a bigger
size PVC (without encryption)

* Filesystem pvc restore to a bigger size
* Block pvc restore to a bigger size

Encrypted PVC snapshot restore to a bigger
size PVC

* Filesystem pvc restore to a bigger size
* Block pvc restore to a bigger size

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",52,47,1,1,"2018-01-08 15:47:21","1433.32"
"ceph/ceph-csi","f69ec085cca70d7b064d50ff6fa5a890feae8db8","Madhu-1","2019-12-18 11:46:17","false","Improve logging while waiting for deployment to complete

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",102,23,0,1,"2018-01-08 15:47:21","705.08"
"ceph/ceph-csi","ca2932855488b9773403d6ad22c1f581c8c8c295","Madhu-1","2021-12-15 05:29:41","false","csi: remove size check when creating volume

remove the  bigger size validation when
creating a volume from a snapshot or when
creation a clone from a volume as we resized
the volume after cloning.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",50,47,1,1,"2018-01-08 15:47:21","1432.32"
"ceph/ceph-csi","03947ebcc57ed9ccbd8fce041a4bf239e51e7dec","Madhu-1","2020-06-16 11:13:33","false","doc: update readme to add ROX support

Updated Readme to add ROX support
for rbd PVC.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",117,29,0,1,"2018-01-08 15:47:21","888.31"
"ceph/ceph-csi","57454cf3791f089ebfbe5e7c1c12e39fb2229ba8","Madhu-1","2020-08-11 12:15:08","false","cephfs: replace Errorf with ErrorLog in nodeUnstageVolume

replace Errorf with ErrorLog in nodeUnstageVolume
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.35"
"ceph/ceph-csi","e34e3c39aa107a4592a02b196fa3a3533ec5ae36","Rakshith-R","2021-04-29 05:53:17","false","helm: update external-snapshotter image to v4.0.0

update external-snapshotter image to v4.0.0.
Updating helm charts was forgotten in #1916.

Signed-off-by: Rakshith R <rar@redhat.com>",94,40,0,1,"2018-01-08 15:47:21","1206.34"
"ceph/ceph-csi","204487383d9a00acd043bb54462e0d0c63e0c500","mehdy","2020-06-02 19:19:57","false","e2e: Add e2e test cases for rbd rados namespace

These test cases are will be executed against a rados namespace.
- Create a PVC and bind it to an app.
- Resize block PVC and check device size.
- Create a PVC clone and bind it to an app.

Signed-off-by: Mehdy Khoshnoody <mehdy.khoshnoody@gmail.com>",110,29,0,0,"2018-01-08 15:47:21","875.65"
"ceph/ceph-csi","3f32dea0471e5505b7c3bd45f9bbaf587c3ccbd8","humblec","2019-08-20 04:58:33","true","Merge pull request #551 from humblec/dockerfile

Fix the vulnarabilities in the image.",82,19,0,1,"2018-01-08 15:47:21","586.8"
"ceph/ceph-csi","e2832fde5bffdd57f323a9d8a0c2790b7e4ffe2a","humblec","2022-11-11 07:15:00","false","deploy: add fsgrouppolicy to the driver yaml

this fsgrouppolicy setting was missing in api/deploy/* which
caused the yamlgen to not pickup this. this commit address the
same.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",36,58,1,1,"2018-01-08 15:47:21","1763.64"
"ceph/ceph-csi","5e23010e2b3aa831c276323b643f3a2b0dd0fcc0","humblec","2022-04-11 11:21:24","false","e2e: remove the release check in clone test validation

we no longer require the kubernetes validation for clone tests in
the e2e tests. This commit remove it for RBD.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",45,51,1,1,"2018-01-08 15:47:21","1553.82"
"ceph/ceph-csi","b64c7583a9733b471b261de1a32f3e65af2d5b5e","humblec","2022-04-11 11:26:21","false","e2e: remove the release check in clone test validation

we no longer require the kubernetes validation for clone tests in
the e2e tests. This commit remove it for CephFS.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",45,51,1,1,"2018-01-08 15:47:21","1553.82"
"ceph/ceph-csi","f7f8e139091ed17705f12f1dbf524a67926870eb","rootfs","2018-02-06 18:33:52","true","Merge pull request #9 from rootfs/rbd-refactoring

rbd plugin refactoring: remove k8s clientSet",1,1,0,0,"2018-01-08 15:47:21","29.12"
"ceph/ceph-csi","128f3fc2cf410209d63966a25b6ffc7f1e1331a3","Madhu-1","2020-02-24 05:29:08","false","check subvolume present in backend

If a CreateVolume call is interrupted,
post creating the required CSI journal entries,
but prior to creating the backing CephFS subvolume,
then a subsequent CreateVolume call will return
a valid response with a VolumeID that has
it's backing image missing. This PR adds a check
for backend image, if image notfound it deletes the
reserved keys in omap.

fixes #839

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",111,25,0,1,"2018-01-08 15:47:21","776.07"
"ceph/ceph-csi","6091490393959b74b114d6b4ae8e72977b5ea3d6","Madhu-1","2020-10-29 09:49:24","false","rbd: improve logging in getCloneDepth

earlier if the depth check fails the
complete vol struct was getting logged,
this commits logs only the pool and image
name.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",76,34,0,1,"2018-01-08 15:47:21","1021.25"
"ceph/ceph-csi","a666d452bf8644705c6d693a2439b83683b312cd","Madhu-1","2021-05-31 06:38:01","false","cephfs: return GRPC error in NodeGetVolumeStats

in case of failure return GRPC error to the caller.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",98,41,0,1,"2018-01-08 15:47:21","1238.37"
"ceph/ceph-csi","57cea727fa98e024701371942ae42769c5a01d26","Madhu-1","2019-03-04 04:28:37","false","Fix yaml lint errors

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",33,14,0,1,"2018-01-08 15:47:21","421.78"
"ceph/ceph-csi","d943fbd265adba5c2626f45864137ea90a5f75fa","Madhu-1","2021-12-01 07:36:53","false","e2e: run generic ephemeral for kubernetes 1.21+

Currently, we are skipping the generic ephemeral
testing if the kubernetes version is less than
1.21 because of this one the who test suite is
getting skipped and e2e is marked as success
in 2 minutes. This commit runs the ephemeral
tests if the kube=>1.21+. If we do this, for
the lower version we can run other tests.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",52,47,0,1,"2018-01-08 15:47:21","1419.41"
"ceph/ceph-csi","fb7dc13dfef64136e8fb63d237c4bae4686daa4f","Madhu-1","2021-06-04 08:59:18","false","rebase: update packages in go.mod to latest releases

updated few packages in go.mod to latest
available release.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",109,41,0,1,"2018-01-08 15:47:21","1242.47"
"ceph/ceph-csi","68adacad36ac510f317ed82e5149c2862fed53a3","Madhu-1","2020-12-09 12:12:14","false","build: update CSI_IMAGE_VERSION in deploy.sh

update deploy.sh to use correct CSI_IMAGE_VERSION
from the build.env.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",73,35,0,1,"2018-01-08 15:47:21","1061.35"
"ceph/ceph-csi","f2d5c2e0df8e2454bccc3c290600452989ebae97","nixpanic","2021-07-30 07:53:27","false","util: add vaultAuthNamespace option for Vault KMS

The new `vaultAuthNamespace` configuration parameter can be set to the
Vault Namespace where the authentication is setup in the service. Some
Hashicorp Vault deployments use sub-namespaces for their users/tenants,
with a 'root' namespace where the authentication is configured. This
requires passing of different Vault namespaces for different operations.

Example:
 - the Kubernetes Auth mechanism is configured for in the Vault
   Namespace called 'devops'
 - a user/tenant has a sub-namespace called 'devops/website' where the
   encryption passphrases can be placed in the key-value store

The configuration for this, then looks like:

    vaultAuthNamespace: devops
    vaultNamespace: devops/homepage

Note that Vault Namespaces are a feature of the Hashicorp Vault
Enterprise product, and not part of the Open Source version. This
prevents adding e2e tests that validate the Vault Namespace
configuration.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",119,43,0,1,"2018-01-08 15:47:21","1297.42"
"ceph/ceph-csi","5cfa6685b07f6b77f0f4db5aa9c72a5c94ff099e","mcronce","2018-12-10 14:25:17","false","deploy.sh:  Select image versions based on $TRAVIS_BRANCH; push images for both master and csi-v1.0",16,11,0,0,"2018-01-08 15:47:21","331.94"
"ceph/ceph-csi","d03b36dd62e07dae62135e5ff2ee1730440a9535","rootfs","2019-02-05 15:17:03","true","Merge pull request #169 from rootfs/no-init

skip klog init",25,13,0,0,"2018-01-08 15:47:21","393.23"
"ceph/ceph-csi","30a5d9a6e7a28cdfadb51d1926d48eb3991fc176","rootfs","2018-09-18 14:09:12","false","add rbd-nbd mounter in storage class

Signed-off-by: Huamin Chen <hchen@redhat.com>",8,8,0,0,"2018-01-08 15:47:21","249.93"
"ceph/ceph-csi","088cfc553802f99fd22b919ff4e24910420dc8ce","rootfs","2018-11-20 14:49:30","true","Merge pull request #100 from rootfs/base-image

switch to centos base image",15,10,0,0,"2018-01-08 15:47:21","311.96"
"ceph/ceph-csi","4c96ad3c85b309478b59d09e01a66756019475bb","humblec","2020-04-14 06:59:04","false","Changes to e2e to accomodate client-go changes and RunKubectlInput

With client-go v1.18.0 there is a change where Signatures on methods
in generated clientsets, dynamic, metadata, and scale clients have been
modified to accept context.Context as a first argument.
Signatures of Create, Update, and Patch methods have been updated to accept
CreateOptions, UpdateOptions and PatchOptions respectively.
Signatures of Delete and DeleteCollection methods now accept DeleteOptions
by value instead of by reference

The framework.RunkubectlInput now accepts namespace as the first parameter
which is also accommodated with this PR.

Signed-off-by: Humble Chirammal hchiramm@redhat.com",105,27,0,1,"2018-01-08 15:47:21","826.13"
"ceph/ceph-csi","f3ea772270b017c58a3165cc8d3bf3c66e7e3f3d","rootfs","2019-01-19 13:00:17","true","Merge pull request #137 from kfox1111/csi-v1.0

Update the helm chart for csi 1.0",18,12,0,0,"2018-01-08 15:47:21","376.13"
"ceph/ceph-csi","a2160e88a72fb99e16f03a5b6c2e58a347287a42","gman0","2018-04-13 12:54:40","false","cephfs/controllerserver: create volume if provisionVolume=true; implemented DeleteVolume",2,3,0,0,"2018-01-08 15:47:21","94.88"
"ceph/ceph-csi","ce3affcc6a16ef8e3a5aaebc689c035f28c9a6e8","gman0","2019-02-25 17:07:28","false","cephfs: DeleteVolume should assume the volume to be already deleted if metadata doesn't exist",31,14,0,0,"2018-01-08 15:47:21","412.31"
"ceph/ceph-csi","d22e7a1bdb01da31633147f5c920879d8a590d5e","Madhu-1","2021-09-01 14:56:15","false","helm: update templates for ceph.conf

updated cephfs and rbd templates to
configure the ceph.conf content.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",109,44,0,1,"2018-01-08 15:47:21","1329.71"
"ceph/ceph-csi","f9257ed1cb6068ff35f8850f43ba179bdf6dc680","humblec","2020-08-04 03:50:13","false","cephfs: add snapshot create/delete capabilities in controllerserver

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","937"
"ceph/ceph-csi","64ca401a5180d6477050a11ced5a621e3cdb5c60","Madhu-1","2019-09-04 04:25:40","false","Fix mon endpoint issue in E2E

in toolbox mon endpoints are not
updated properly, this is causing an issue in E2E
this PR is a workaround to fix this issue.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",87,20,0,1,"2018-01-08 15:47:21","601.78"
"ceph/ceph-csi","d32cef5b9f23989a45bccf5acb64f889fba67480","phlogistonjohn","2020-05-21 20:45:54","false","ci: remove comment referring to a function that no longer exists

Signed-off-by: John Mulligan <jmulligan@redhat.com>",111,28,0,0,"2018-01-08 15:47:21","863.71"
"ceph/ceph-csi","189ec8486d0c6a344c4967dd443f88bad18efc1f","rootfs","2018-09-18 14:48:56","true","Merge pull request #75 from rootfs/rbd-nbd

support rbd-nbd",8,8,0,0,"2018-01-08 15:47:21","249.96"
"ceph/ceph-csi","fe90017a3e68e86615c4f70cc0669cd17a36d152","gman0","2018-03-09 16:00:53","false","Makefile: updated push target",2,2,0,0,"2018-01-08 15:47:21","61.01"
"ceph/ceph-csi","defc676b3de2ffc5558ba451bfdb45040de1c188","gman0","2018-03-22 13:01:10","false","cephfs/volume: added the ability to use either FUSE or ceph kernel client",2,2,0,0,"2018-01-08 15:47:21","73.88"
"ceph/ceph-csi","202a2a72005321e04f7c7c4bd2302a4b1175b7c5","hswong3i","2020-01-01 14:37:14","false","Upgrade: csi-snapshotter from v1.2.1 to v1.2.2

See https://github.com/kubernetes-csi/external-snapshotter/releases/tag/v1.2.2
See https://github.com/kubernetes-csi/external-snapshotter/blob/v1.2.2/CHANGELOG-1.2.md",103,24,0,0,"2018-01-08 15:47:21","719.2"
"ceph/ceph-csi","2abfafdf3f196971e7f235519b03ece5874bca86","irq0","2022-09-06 16:44:00","false","util: Add EncryptionTypeNone and unit tests

Add type none to distinguish disabled encryption (positive result)
from invalid configuration (negative result).

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",38,56,1,0,"2018-01-08 15:47:21","1700.04"
"ceph/ceph-csi","fac3ef01c6bc5796ad86b24469ebfc1b245adf91","nixpanic","2021-11-17 13:41:30","false","build: use golang:1.16 as runtime container for retest action

It seems that building the `retest` action makes it consume shared
libraries that are not part of the `scratch` base container layer. By
using the golang:1.16 container image as a base, all required shared
libraries are available.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",57,46,0,1,"2018-01-08 15:47:21","1404.66"
"ceph/ceph-csi","43fa1cddb779b30fc2312c2f084189152a5a3323","nixpanic","2020-12-01 07:39:15","false","util: use helper function to parse Vault configuration

Signed-off-by: Niels de Vos <ndevos@redhat.com>",83,35,0,1,"2018-01-08 15:47:21","1054.16"
"ceph/ceph-csi","e5dbea15d34afc00b771b56750aeacfe515f4923","gman0","2019-02-25 17:05:20","false","util/cachepersister: check and return CacheEntryNotFound error in Get()",31,14,0,0,"2018-01-08 15:47:21","412.3"
"ceph/ceph-csi","304781bbe5ef23f756af950b200eed207839395a","gman0","2018-04-24 08:00:24","false","updated travis CI",3,3,0,0,"2018-01-08 15:47:21","105.68"
"ceph/ceph-csi","1803a1be97cf4368145eb95a12fa04cc9f09a0ce","gman0","2019-02-14 19:31:26","false","rbd: don't delete volume/snapshot if metadata creation fails",27,13,0,0,"2018-01-08 15:47:21","401.41"
"ceph/ceph-csi","6dcf03a4bc3860a62b685aeb49b54bd7a7c42b0b","humblec","2020-08-03 18:37:44","false","cephfs: add checkContentSource() to validate the data source

checkContentSource() validate the data source in the request
and then populate volumeOptions or snapshotshot identifier in
case of snapshot source. If the data source is volume, then
parentVolumeOption and pvID are populated.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","936.62"
"ceph/ceph-csi","9cd078656915082a1a027c1819ae2259f4f9bcef","gman0","2019-02-12 16:39:54","false","cephfs/volume: fixed incorrect path for unmountAndRemove",26,13,0,0,"2018-01-08 15:47:21","399.29"
"ceph/ceph-csi","2034992607cf51d83f8dfad8ca1c08dc27ac9901","nixpanic","2020-07-28 09:02:01","false","rebase: upgrade to minikube 1.12.1

Signed-off-by: Niels de Vos <ndevos@redhat.com>",114,31,0,1,"2018-01-08 15:47:21","930.22"
"ceph/ceph-csi","3d0c4e0659ee8dd9c5e49a31089de3abb042704e","nixpanic","2022-03-17 09:26:17","false","nfs: enable NFS-provisioner with --type=nfs

Deployments can use --type=nfs to deploy the NFS Controller Server
(provisioner).

Signed-off-by: Niels de Vos <ndevos@redhat.com>",43,50,1,1,"2018-01-08 15:47:21","1529.74"
"ceph/ceph-csi","74cb18bd2862b3ac71dfe00b416980692d673376","hswong3i","2020-01-03 01:55:42","false","Upgrade: csi-resizer from v0.3.0 to v0.4.0

See https://github.com/kubernetes-csi/external-resizer/releases/tag/v0.4.0
See https://github.com/kubernetes-csi/external-resizer/blob/v0.4.0/CHANGELOG-0.4.md",103,24,0,0,"2018-01-08 15:47:21","720.67"
"ceph/ceph-csi","a55d5efade1fe5b29ac23604fb329b081260ed39","Yuggupta27","2020-12-16 11:26:20","false","helm: Add secret template to ceph-csi-cephfs

Deploy cephfs secret when using the ceph-csi-cephfs
helm chart.

Signed-off-by: Yug <yuggupta27@gmail.com>",76,35,0,0,"2018-01-08 15:47:21","1068.32"
"ceph/ceph-csi","9c000add29dade837ac44e2fc7ba8ed3e9bd83af","humblec","2020-08-07 07:07:36","false","cephfs: Change checkVolExist for snapshot and clone workflow

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","940.14"
"ceph/ceph-csi","a86121f756bc91101130764dfd199be8cdc7f029","humblec","2022-01-24 12:54:33","false","rbd: unexport aws kms structs

At present the KMS structs are exported and ideally we should be
able to work without exporting the same.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",36,49,1,1,"2018-01-08 15:47:21","1476.88"
"ceph/ceph-csi","6f73d4e3ca6cf464fd7a28208968f34d054ba0c3","kfox1111","2020-04-10 15:55:21","false","Support externally managed configmap.

https://github.com/ceph/ceph-csi/issues/927

Signed-off-by: Kevin Fox <Kevin.Fox@pnnl.gov>
(cherry picked from commit d4c4954c9d8007e071696e64901b04cb6fa55c65)",105,27,0,0,"2018-01-08 15:47:21","822.51"
"ceph/ceph-csi","c968f6407db7f1c3579c778a115700b547e32ba5","nixpanic","2023-06-02 12:39:58","false","build: address `dupword` warnings

Signed-off-by: Niels de Vos <ndevos@ibm.com>",31,65,1,1,"2018-01-08 15:47:21","1971.12"
"ceph/ceph-csi","0cc1e06beb6d7a01c8b6ebd1897a0947495a6c4b","gman0","2018-06-12 15:08:14","false","cephfs: createCephUser needs admin credentials",3,5,0,0,"2018-01-08 15:47:21","153.97"
"ceph/ceph-csi","ebe5aa00cf8549b829e12b6b7512b1e4dac7344f","hswong3i","2020-04-01 02:34:15","false","Upgrade: csi-node-driver-registrar from v1.2.0 to v1.3.0

See https://github.com/kubernetes-csi/node-driver-registrar/releases/tag/v1.3.0
See https://github.com/kubernetes-csi/node-driver-registrar/blob/v1.3.0/CHANGELOG-1.3.md",117,27,0,0,"2018-01-08 15:47:21","813.95"
"ceph/ceph-csi","82080dcfa9bb6a3f45e70effa871dfee6f4d63ee","Madhu-1","2020-07-06 11:26:51","false","util: update unit testing for deep flatten

updated unit testing for the kernel check
for deep flatten feature for both supported
upstream kernel version (5.1.0+) and RHEL
8.2 backport

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",111,30,0,1,"2018-01-08 15:47:21","909.32"
"ceph/ceph-csi","b6f3ba885eaf952a7e9269561d75f61b9bcd1b07","Madhu-1","2020-11-26 08:25:48","false","cephfs: implement getVolumeRootPathCeph with go-ceph

instead of ceph fs CLI commands using go-ceph library
to get subvolume path.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",83,34,0,1,"2018-01-08 15:47:21","1048.19"
"ceph/ceph-csi","1e037a56c188cea0db9d700d09d2f9903e808e83","Madhu-1","2021-09-08 10:14:53","false","ci: remove minikube workaround for psp

as we are no longer using older (<1.11.1)
version of minikube, removing the
workaround to support the psp with
older minikube versions.
Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",66,44,0,1,"2018-01-08 15:47:21","1336.52"
"ceph/ceph-csi","c32bf718467540f1ea6b6def2f27b25e1aefab85","Madhu-1","2022-01-21 06:10:38","false","deploy: re-alignment of code in rook.sh

currently, rook.sh code is not aligned properly
unside the functions, this commit does
the code alignment.

PS: this is done by vscode for me :)

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",41,48,1,1,"2018-01-08 15:47:21","1473.6"
"ceph/ceph-csi","3dcef096763c8065a0ec79075023d84fdad2259d","Madhu-1","2020-06-24 06:56:39","false","rbd: Use rbd trash commands to delete image

as with snapshot and cloning implementation
the rbd images cannot be deleted with rbd
remove or add a task to delete the rbd image
as it might contains the snapshots and clones.
we need to make use of the rbd mv trask and
add a task to remove the image from trash
once all its clones and snapshots links
are broken and there will no longer any
dependency between parent and child images.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",115,29,0,1,"2018-01-08 15:47:21","896.13"
"ceph/ceph-csi","a882c1194bbbb79c96992844725e33ce5aa94415","Madhu-1","2020-08-11 12:25:49","false","cephfs: replace Errorf with ErrorLog in createVolume

replace Errorf with ErrorLog in createVolume
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.36"
"ceph/ceph-csi","311193d5caf4f90c04c0c5a1e9112f317307f064","Madhu-1","2023-11-02 10:24:51","false","doc: add pending release notes

Keeping track of changes between releases
and fetching that information during
release is difficult, Adding a doc to
keep track of the changes between major
releases which helps during release.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",20,70,1,1,"2018-01-08 15:47:21","2121.03"
"ceph/ceph-csi","f711d15551e9e6d4a5d5e58d06188b87fcbeaa7a","Madhu-1","2020-06-30 15:57:43","false","rbd: store imageID if image is present

Added a check to make sure that the image
ID is stored if the image is already found.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",115,30,0,1,"2018-01-08 15:47:21","902.51"
"ceph/ceph-csi","6ec1196f478ebc07dadc87c351b411f4e028de7f","j-griffith","2019-03-14 00:18:04","false","Rework multi-node-multi-writer feature

This commit reverts the initial implementation of the
multi-node-multi-writer feature:
  commit: b5b8e4646094d0ec1f3dfe96060a183c863d7d1a

It replaces that implementation with a more restrictive version that
only allows multi-node-multi-writer for volumes of type `block`

With this change there are no volume parameters required in the stoarge
class, we also fail any attempt to create a file based device with
multi-node-multi-write being specified, this way a user doesn't have to
wait until they try and do the publish before realizing it doesn't work.",33,14,0,0,"2018-01-08 15:47:21","430.6"
"ceph/ceph-csi","2b19197e2fa09a04490c78aa0f55ba62dbfcab23","Rakshith-R","2021-08-10 12:41:27","false","ci: modify kubectl_retry() to handle NotFound on delete cmd

Signed-off-by: Rakshith R <rar@redhat.com>",118,43,0,1,"2018-01-08 15:47:21","1307.62"
"ceph/ceph-csi","1d49b6a2881bca1270b0fc7fd4beeeb3600b2825","Rakshith-R","2021-08-05 11:58:48","false","e2e: create reusable variable vaultUserSecretPath  = ""user-secret.yaml""

Signed-off-by: Rakshith R <rar@redhat.com>",122,43,0,1,"2018-01-08 15:47:21","1303.59"
"ceph/ceph-csi","784b086ea5ba1f57d14c67d57aecd8b5c2de6ad3","Rakshith-R","2022-04-13 06:13:05","false","nfs: add provisioner & plugin sa to scc.yaml

This commit adds nfs provisioner & plugin sa to
scc.yaml to be used with openshift.

Signed-off-by: Rakshith R <rar@redhat.com>",44,51,1,1,"2018-01-08 15:47:21","1555.6"
"ceph/ceph-csi","09f126691c8304510b9028fc1f564163e714b2ea","Madhu-1","2019-07-03 03:53:11","false","Add nil check for process

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",79,18,0,1,"2018-01-08 15:47:21","540.75"
"ceph/ceph-csi","9f15dded6d91330d9ab46e490dadcc472b634713","Madhu-1","2020-01-20 05:03:42","false","Add support for static rbd volumes

currently its not possible to create
and mount static PVC to a application pod
using rbd csi driver. This PR adds the support
for static PVC in ceph-csi driver for rbd.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",108,24,0,1,"2018-01-08 15:47:21","742.05"
"ceph/ceph-csi","4e292a0f0418341c6578a5529c00b93c75d1e914","Madhu-1","2019-04-17 03:39:40","true","Merge pull request #327 from vfreex/add-rbd-attacher-missing-permission

add missing PV update permission for rbd attacher",53,15,0,1,"2018-01-08 15:47:21","463.74"
"ceph/ceph-csi","fc9b2e5ac5973d726699376fb402b2eec8273df4","Madhu-1","2020-11-17 06:25:30","false","deploy: update deployment template for new controller

updated deployment template for the new controller and
also added `update` configmap RBAC for the controller
as the controller uses the configmap for the leader
election.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",77,34,0,1,"2018-01-08 15:47:21","1039.11"
"ceph/ceph-csi","d12400aa9cfea46fb63a9e93ff326bbad955a255","Madhu-1","2022-11-11 11:45:46","false","rbd: unset metadata if setmetadata is false

We need to unset the metadata on the clone
and restore PVC if the parent PVC was created
when setmetadata was set to true and it was
set to false when restore and clone pvc was
created.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",35,58,1,1,"2018-01-08 15:47:21","1763.83"
"ceph/ceph-csi","0a7a7f4866572f67cb9cb3fccff43b60413b7018","Rakshith-R","2021-09-08 09:37:38","false","util: call WriteCephConfig() in cephcsi.go

This commit calls WriteCephConfig() in cephcsi.go to
create ceph.conf and keyring if it is not mounted to
be used by all cli calls and conn cmds.

Before this change, rbd-controller/omap-generator did not create
ceph.conf on startup.

Signed-off-by: Rakshith R <rar@redhat.com>",66,44,0,1,"2018-01-08 15:47:21","1336.49"
"ceph/ceph-csi","2232067e994bf001a132e660fbb23ac5d02c6bfe","Madhu-1","2020-11-30 10:10:50","false","cephfs: use rados.ErrNotFound in subvolume info

go-ceph rados.ErrNotFound for not found errors,cephcsi
need to check same for not found errors.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",85,35,0,1,"2018-01-08 15:47:21","1052.27"
"ceph/ceph-csi","297b14ed54eb1d958a228051d5e9a0dca1853107","Madhu-1","2022-08-03 06:03:59","false","ci: update minikube to v1.26.1

update minikube to latest patch release.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",40,55,1,1,"2018-01-08 15:47:21","1666.59"
"ceph/ceph-csi","7eae69f10c28909f6f8325540f8d0326277e7fab","nixpanic","2020-12-08 14:05:59","false","cleanup: return error type in rbdGetDeviceList()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,35,0,1,"2018-01-08 15:47:21","1061.43"
"ceph/ceph-csi","890740553f554ec30385975e5b2f5917a116db7f","gman0","2019-02-12 17:02:44","true","Merge pull request #193 from gman0/fix-cephfs-volcleanup

cephfs/volume: fixed incorrect path for unmountAndRemove",25,13,0,0,"2018-01-08 15:47:21","399.3"
"ceph/ceph-csi","1406f29dcddd087dd8209382e8a19a908027e51b","ShyamsundarR","2019-05-14 19:15:01","false","Refactor voljournal to aid reuse with CephFS

and to also inmprove the code reuse in rbd itself.

Signed-off-by: ShyamsundarR <srangana@redhat.com>",72,16,0,0,"2018-01-08 15:47:21","491.39"
"ceph/ceph-csi","172b66f73ff5281e0a4518a784b7e952157981da","yati1998","2021-07-12 10:59:25","false","cleanup: resolves cyclop linter issue

this commit adds `// nolint:cyclop` for the
fucntions whose complexity is above 20

Updates: #1586

Signed-off-by: Yati Padia <ypadia@redhat.com>",125,42,0,0,"2018-01-08 15:47:21","1279.55"
"ceph/ceph-csi","bccfafdfb2d77a6d8bf47a9432c83f7a33a7f7cc","Madhu-1","2019-06-10 07:46:32","false","update helm chart version

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",78,17,0,1,"2018-01-08 15:47:21","516.92"
"ceph/ceph-csi","4d28a981fcd7d9f6c30689eee6731b099da6ab95","Madhu-1","2020-01-02 08:48:30","false","Remove hard-coded UpdateStrategy from templates

Provided an option to specify the UpdateStrategy
in helm  charts.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",103,24,0,1,"2018-01-08 15:47:21","719.96"
"ceph/ceph-csi","5b926ec72caaef358c31e665bcde783bf321e24c","humblec","2019-06-10 15:18:49","true","Merge pull request #417 from Madhu-1/update-helm

update helm chart version",75,17,0,1,"2018-01-08 15:47:21","517.23"
"ceph/ceph-csi","df0901ddd8e7f27f4f9b35e4110624022f56332b","humblec","2021-10-29 09:07:04","false","rbd: add generic ephemeral volume validation

This commit adds the validation of csi RBD driver to work with
ephemeral volume support. With ephemeral volume support a user can
specify ephemeral volumes in its pod spec and tie the lifecycle
of the PVC with the POD.

An example pod spec is also included in this commit.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",55,46,0,1,"2018-01-08 15:47:21","1386.47"
"ceph/ceph-csi","bd03d057769946ba9cfc4ecaeef8f0bb846cac79","ShyamsundarR","2019-03-07 22:03:18","false","Address linter error

Signed-off-by: ShyamsundarR <srangana@redhat.com>",29,14,0,0,"2018-01-08 15:47:21","425.51"
"ceph/ceph-csi","8393fbe40b03e9f28a73960df69b8295576a1901","ansiwen","2020-07-08 23:00:23","false","util: simplify error handling

The sentinel error code had additional fields in the errors, that are
used nowhere.  This leads to unneccesarily complicated code.  This
change replaces the sentinel errors in utils with standard errors
created with errors.New() and adds a simple JoinErrors() function to
be able to combine sentinel errors from different code tiers.

Related: #1203

Signed-off-by: Sven Anderson <sven@redhat.com>",110,30,0,0,"2018-01-08 15:47:21","910.8"
"ceph/ceph-csi","43c2fb8e26b7502d87dd90e482c45892108e6947","gman0","2018-03-20 14:55:45","false","cephfs: CSI 0.2.0 refactoring",2,2,0,0,"2018-01-08 15:47:21","71.96"
"ceph/ceph-csi","4e38bdac102612f4cd0d4905b44d0e048d85763e","irq0","2022-08-12 13:05:02","false","fscrypt: fsync encrypted dir after setting policy [workaround]

Revert once our google/fscrypt dependency is upgraded to a version
that includes https://github.com/google/fscrypt/pull/359 gets accepted

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",41,55,1,0,"2018-01-08 15:47:21","1674.89"
"ceph/ceph-csi","10a75dd4ff418a1ef9a7a451583b125f0f785a93","nixpanic","2021-03-12 12:37:15","false","rbd: introduce rbdImage as base for rbdVolume and rbdSnapshot

Because rbdVolume and rbdSnapshot are very similar, they can be based
off a common struct rbdImage that contains the common attributes and
functions.

This makes it possible to re-use functions for snapshots, and prevents
further duplication or code.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",95,38,0,1,"2018-01-08 15:47:21","1159.62"
"ceph/ceph-csi","cfdf5af08faed801f6825d5878bc6651fd767ce9","yati1998","2021-06-14 05:01:33","false","doc: adds note to replace canary with version tag

This commit adds a note to replace canary with version
tag when deploying in production.

Fixes: #2156

Signed-off-by: Yati Padia <ypadia@redhat.com>",110,41,0,0,"2018-01-08 15:47:21","1251.3"
"ceph/ceph-csi","c0c2d72933e5f08c5ee3a71e851173fe3a22306a","humblec","2022-01-13 12:01:37","false","deploy: update sidecar versions to deploy values.

This commit adds latest versions of the sidecars to the build.env
to pass the latest versions on the deployment

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",39,48,1,1,"2018-01-08 15:47:21","1465.84"
"ceph/ceph-csi","c8800618828101580499c20d5b051d65ad017634","Rakshith-R","2022-04-26 06:49:09","false","ci: use canary csi-provisioner image to test different sc clones

This commit is added to use canary csi-provisioner image
to test different sc pvc-pvc cloning feature, which is not
yet present in released versions.
refer:
https://github.com/kubernetes-csi/external-provisioner/pull/699

Signed-off-by: Rakshith R <rar@redhat.com>",38,52,1,1,"2018-01-08 15:47:21","1568.63"
"ceph/ceph-csi","31696a6ce0ca656ba031210e20689e3562561c6c","Madhu-1","2021-09-06 12:20:55","false","cleanup: move genSnapFromOptions to volumeoptions

moved genSnapFromOptions function to volumeoptions.go
which is more appropriated than util.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",66,44,0,1,"2018-01-08 15:47:21","1334.61"
"ceph/ceph-csi","1197b941499b15bc3a3b659c821b7825c48ff7a2","Madhu-1","2022-05-06 07:04:08","false","e2e: add getPersistentVolume helper function

added getPersistentVolume helper function
to get the PV and also try if there is any API
error to improve the CI.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",41,52,1,1,"2018-01-08 15:47:21","1579.64"
"ceph/ceph-csi","2deabcd2840ce06101c8646927f102ee1aeb947d","Madhu-1","2020-08-17 08:08:57","false","rbd: allow readonly only for volume with contentsource

It doesnot make sense to allow the creation of empty
volumes which is going to be accessed with readonly mode,
this commit allows the creation of volume which is having
readonly capabilities only if the content source is set
for the volume.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",120,31,0,1,"2018-01-08 15:47:21","949.18"
"ceph/ceph-csi","78750b2dd5edf4ba5b449645f257d8533e8ecbd9","mcronce","2018-12-10 16:05:25","false",".travis.yml:  Run deploy.sh on all branches",16,11,0,0,"2018-01-08 15:47:21","332.01"
"ceph/ceph-csi","c029072ef06e23ed3df2e9d79fbe7bcc9cb08fa9","rootfs","2019-01-09 15:18:49","true","Merge pull request #120 from rootfs/dev

fix cache persistent default",18,12,0,0,"2018-01-08 15:47:21","366.23"
"ceph/ceph-csi","3720d95c81c4590aa070b5c6fb86fcc8f6606b1e","rootfs","2018-04-24 12:30:13","true","Merge pull request #35 from arm64b/rbd-plugin-container-build-fixing

Fix the ceph csi `rbdplugin` container build issue",4,3,0,0,"2018-01-08 15:47:21","105.86"
"ceph/ceph-csi","ab15053fef3164bd3c05fdae8f5ccdf29c1f030e","Yuggupta27","2022-01-03 16:46:34","false","ci: add unit test for networkfencing util

Signed-off-by: Yug Gupta <yuggupta27@gmail.com>",47,48,1,0,"2018-01-08 15:47:21","1451.79"
"ceph/ceph-csi","b904c446d6657b3a5ddcd81ec001683d6b6e04b0","humblec","2021-12-20 07:23:03","false","rbd: add kms unit test for key protect server

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",53,47,1,1,"2018-01-08 15:47:21","1437.4"
"ceph/ceph-csi","4fd0294eb78e318473c34acc409af23054fce61d","nixpanic","2020-11-19 11:50:59","false","e2e: pull centos image from registry.centos.org

The BlockVolume PVC tests consume the example files that refer to
""centos:latest"" without registry. This means that the images will get
pulled from Docker Hub, which has rate limits preventing CI jobs from
pulling images.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",83,34,0,1,"2018-01-08 15:47:21","1041.34"
"ceph/ceph-csi","9fefc270d8babd9468a590c46be1daeddd7f1e5d","gman0","2018-03-20 15:15:19","false","cephfs/controllerserver: write ceph.conf",2,2,0,0,"2018-01-08 15:47:21","71.98"
"ceph/ceph-csi","38273f879f07942db3c727275259fb0fd5456568","Madhu-1","2020-08-11 11:55:20","false","cephfs: replace fatal with util.FatalLog in Run

replace fatal with util.FatalLog in Run for
context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.34"
"ceph/ceph-csi","fb0cbef68b2371714de51feb9e83ce04bd6fe0cc","Madhu-1","2019-06-13 09:10:02","false","update travis to run func test against different kube version

updated travis to run functional tests
against different kubernetes versions

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",76,17,0,1,"2018-01-08 15:47:21","519.97"
"ceph/ceph-csi","b0c9b3e7526958507dc80439e94aa94fb9a8ba70","Madhu-1","2021-04-16 05:37:03","false","doc: rename master to devel

renamed master to devel in image
compatibility list.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",87,39,0,1,"2018-01-08 15:47:21","1193.33"
"ceph/ceph-csi","954ac97d229716f8d588df864dc171db291f556d","nixpanic","2020-11-24 16:08:32","false","ci: add more logging during Rook deployment

It seems that the new log_errors() function does not get triggered when
the script hits `exit 1` conditions in functions. The functions should
return a non-0 value, not cause an exit of the script.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",81,34,0,1,"2018-01-08 15:47:21","1046.51"
"ceph/ceph-csi","9fe38708745fb11f3f34234aa26645c1a27e83be","nixpanic","2022-03-17 10:31:00","false","ci: add ""component/nfs"" label with Mergify

""component/nfs"" has been added to the labels in the repository, and
Mergify should be able to add that to PRs.

Updates: #2913
Signed-off-by: Niels de Vos <ndevos@redhat.com>",43,50,1,1,"2018-01-08 15:47:21","1529.78"
"ceph/ceph-csi","3b74bff6b6d099ac517064f9a9dbf58168c3f6b5","rollandf","2019-02-25 15:57:06","false","Add RBD block example",30,14,0,0,"2018-01-08 15:47:21","412.26"
"ceph/ceph-csi","7002da1a6aa494704a14002dec7b0c2c4bdeebb6","Madhu-1","2019-09-20 10:37:53","false","deprecate containerized flag and remove nsenter

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",86,20,0,1,"2018-01-08 15:47:21","617.04"
"ceph/ceph-csi","ac11d71e19acfd46b9b6f157902d35c9dd7f953f","Madhu-1","2021-07-22 10:33:48","false","util: add helper function to read clusterID mapping

added helper function to read the clusterID mapping
from the mounted file.

The clusterID mapping contains below mappings
* ClusterID mappings (to cluster to which we are failingover
and from which cluster failover happened)
* RBD PoolID mapping of between the clusters.
* CephFS FscID mapping between the clusters.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,42,0,1,"2018-01-08 15:47:21","1289.53"
"ceph/ceph-csi","d101cbc888d98d2a4223d5791382254c40486cbe","Madhu-1","2020-08-11 11:27:18","false","cephfs: replace klog.Error with util.ErrorLog in doSnapshot

replace klog.Error with util.ErrorLog in doSnapshot
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.32"
"ceph/ceph-csi","3505731c42c8317265bef0d7201e8f0d5c989e8a","mtneug","2021-04-24 22:05:30","false","Replace deprecated GitVersion with Version

This replaces the deprecated `GitVersion` with `Version`.

See https://github.com/helm/helm/blob/a499b4b179307c267bdf3ec49b880e3dbd2a5591/pkg/chartutil/capabilities.go#L71-L74

Signed-off-by: Matthias Neugebauer <matthias.neugebauer@uni-muenster.de>",86,39,0,0,"2018-01-08 15:47:21","1202.01"
"ceph/ceph-csi","523d813b4eec869c829437388f5ebcca61d699f5","nixpanic","2020-10-28 09:54:56","false","doc: allow in-line HTML in MarkDown documents

The GitHub style for Pull Request and Issue templates add HTML tags for
some advanced usage. The MarkDown linter should not give warnings when
these are used.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",75,34,0,1,"2018-01-08 15:47:21","1020.26"
"ceph/ceph-csi","35d58a7d5ace67b00715984c3845cd9759a56f4d","nixpanic","2021-04-09 08:58:59","false","e2e: only test a single encrypted clone/snapshot

The default number for cloning and snapshot/restore is 10 volumes. This
adds to the time the test suite runs. There is no need to validate 10
copies of the encrypted volume, a single copy is sufficient.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",88,39,0,1,"2018-01-08 15:47:21","1186.47"
"ceph/ceph-csi","8720f4e2f5ba039248b0fd7e6b62487ed5092df4","Madhu-1","2021-02-19 06:03:19","false","cephfs: create subvolume with VolumeNamePrefix

when user provides an option for VolumeNamePrefix
create subvolume with the prefix which will be easy
for user to identify the subvolumes belongs to
the storageclass.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",89,37,0,1,"2018-01-08 15:47:21","1136.34"
"ceph/ceph-csi","080b2518501be02034e14734b68321611b79778f","Madhu-1","2021-07-27 06:45:09","false","e2e: validate images in trash for rados namespace

added validation check to verify stale images in trash
for the rados namespace testing.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",117,43,0,1,"2018-01-08 15:47:21","1294.37"
"ceph/ceph-csi","2d560ba0872569a46f0d890491c8aee702f2e5b6","Madhu-1","2019-05-24 11:03:33","false","update ceph-csi to build and use a single docker image

currently, we have 3 docker files(cephcsi,rbd,cephfs) in the ceph-csi repo.
[commit ](https://github.com/ceph/ceph-csi/commit/85e121ebfe3cf2ee94bf7a8d37ad793ecb43c455)
added by John to build a single image which can act as rbd or
cephfs based on the input configuration.

This PR updates the makefile and kubernetes templates to use
the unified image and also its deletes the other two dockerfiles.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",77,16,0,1,"2018-01-08 15:47:21","501.05"
"ceph/ceph-csi","1a3b07994eb7471e7b396b78ca27724791fc7bdc","Madhu-1","2020-04-16 06:38:51","false","doc: Add Upgrade documentation for snapshot

Added step to identify alpha snapshot CRD.
Added step to delete alpha CRD and link
for installing beta CRD.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",102,27,0,1,"2018-01-08 15:47:21","828.12"
"ceph/ceph-csi","6be0e8cb51338f9b8f685c53f1bc3be831a62aac","StevenReitsma","2021-12-21 13:54:34","false","helm: Fix missing ClusterRoleBinding for nodeplugin ServiceAccount

When topology is disabled, the ClusterRoleBinding is not created in the Helm
chart. However, the nodeplugin needs access to volumeattachments for the volume
healer.

Signed-off-by: Steven Reitsma <steven@properchaos.nl>",57,47,1,0,"2018-01-08 15:47:21","1438.67"
"ceph/ceph-csi","eea97ca0141b8016480bed296c7bb866695b2fc5","nixpanic","2021-03-19 15:21:48","false","util: move GetID() from EncryptionKMS to VolumeEncryption

There is no need for each EncryptionKMS to implement the same GetID()
function. We have a VolumeEncryption type that is more suitable for
keeping track of the KMS-ID that was used to get the configuration of
the KMS.

This does not change any metadata that is stored anywhere.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",86,38,0,1,"2018-01-08 15:47:21","1166.73"
"ceph/ceph-csi","cba466c163db10561470fc27830d96cb894de082","nixpanic","2020-11-03 07:33:15","false","ci: do not run ""make mod-check"" for containerized-tests

An updated CI job will run ""make mod-check"" in parallel with the full
containerized-test and containerized-build targets. This will hopefully
reduced the time that is needed for the whole
ci/centos/containerized-tests job.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",80,34,0,1,"2018-01-08 15:47:21","1026.16"
"ceph/ceph-csi","1fcbbe0fa7680caa44bbfef2896726cb3fc8dbec","nixpanic","2021-03-01 07:46:47","false","build: use ceph-csi-bot account for mergify actions

Mergify does now support a `defaults:` section. It can be used to
configure the `bot_account:` in a single location.

CC: @ceph-csi-bot
Signed-off-by: Niels de Vos <ndevos@redhat.com>",90,38,0,1,"2018-01-08 15:47:21","1149.42"
"ceph/ceph-csi","8eaf1d790d0cddbaded1251cde53e538f77ce484","nixpanic","2022-10-12 16:57:51","false","e2e: log failures while deleting PVC and PV

There are occasions where deleting a PVC (or PV) never succeeds. The
reported status of the deleted object is sometimes empty, which suggests
that the PVC or PV was, in fact, deleted.

To diagnose the incorrect error checking, include the errors for
retrying in the logs.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",39,57,1,1,"2018-01-08 15:47:21","1735.05"
"ceph/ceph-csi","5c59a89b0270c2fb085995a8212b121f9f902661","nixpanic","2021-11-18 07:24:04","false","ci: add actions/retest to dependabot checks

Adding actions/retest to the dependabot configuration makes sure all
vendored packages will get updated when new releases are available.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",55,46,0,1,"2018-01-08 15:47:21","1405.4"
"ceph/ceph-csi","47a7b1ff8e6c43761359aeb16d32ef5db70dc5ae","rootfs","2018-10-26 14:05:23","true","Merge pull request #92 from pohly/concurrency

rbd: protect against concurrent gRPC calls",12,9,0,0,"2018-01-08 15:47:21","287.93"
"ceph/ceph-csi","6f484f92fc98167760bbcf42513a06d9668edf07","rootfs","2018-07-26 14:40:36","true","Merge pull request #52 from nak3/clean-up

Correct cephfsplugin binary path",5,7,0,0,"2018-01-08 15:47:21","197.95"
"ceph/ceph-csi","a3b83fe8a7d6e359fabc4ca6543d51532e5fc18a","humblec","2021-06-25 11:20:31","false","internal: reformat long lines in internal/csi-common package to 120 chars

We have many declarations and invocations..etc with long lines which are
very difficult to follow while doing code reading. This address the issues
in 'internal/csi-common' package to restrict the line length to 120 chars.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",118,41,0,1,"2018-01-08 15:47:21","1262.56"
"ceph/ceph-csi","8ab9189760017dc6d58b58fd545a0e3a361b78f3","agarwal-mudit","2021-02-10 08:10:04","false","build: update rook version to v1.4.9

Updated rook version to v1.4.9

Signed-off-by: Mudit Agarwal <muagarwa@redhat.com>",83,37,0,0,"2018-01-08 15:47:21","1127.43"
"ceph/ceph-csi","1e2a777d67a631b6c7614c9977bfcf96cb96e603","humblec","2022-08-18 04:52:50","false","doc: update documentation for release 3.7.0

This commit add upgrade documentation for release 3.7.0
and also update support matrix for v3.7.0.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",41,55,1,1,"2018-01-08 15:47:21","1680.55"
"ceph/ceph-csi","f7a955872822b7c736a200b62d54d14ec739dec3","Madhu-1","2022-06-07 04:47:16","false","ci: add check for .mgr pool in rook.sh

Rook v1.9.x creates pool with name .mgr
for builtin-mgr CephBlockPool CR.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",37,53,1,1,"2018-01-08 15:47:21","1610.54"
"ceph/ceph-csi","88bb36abdc2c5a581d62eb46de750782cb7818ba","Madhu-1","2019-03-27 11:36:38","false","remove controller publish and unpublish call

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",47,15,0,1,"2018-01-08 15:47:21","444.08"
"ceph/ceph-csi","d8df06e3d830ca0444c9525eeb69c3e79daa4ee3","Madhu-1","2020-08-06 06:15:48","false","ci: update mergify rules for centos ci

Updated mergify rules for auto merging the PR
in master branch.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",116,31,0,1,"2018-01-08 15:47:21","939.1"
"ceph/ceph-csi","52c4d29f65392178e0a7006e317cce5718e38b79","Madhu-1","2019-10-01 08:47:08","false","Remove csi-v0.3 from deploy.sh

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",87,21,0,1,"2018-01-08 15:47:21","628.96"
"ceph/ceph-csi","71a6dc3ba83af1769ff1bcd4ecce466ceb8257fd","Madhu-1","2020-08-11 11:51:37","false","cephfs: replace Errorf with util.ErrorLog in getCloneInfo

replace Errorf with util.ErrorLog in getCloneInfo
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.34"
"ceph/ceph-csi","9a7ef258fce9916b73155652998e8ce722e4327d","rootfs","2018-12-03 14:16:03","true","Merge pull request #103 from gman0/cephfs-zeroquota

cephfs: don't set quotas for zero-sized volumes",16,11,0,0,"2018-01-08 15:47:21","325.94"
"ceph/ceph-csi","49f5d4a54ef8de68cf7597d698718d38b2409e33","gman0","2019-02-14 21:25:32","false","fix lint error",27,13,0,0,"2018-01-08 15:47:21","401.48"
"ceph/ceph-csi","e73921f26818b856f9a0e8b8c33fc91b08c547e2","ShyamsundarR","2020-03-27 18:21:18","false","Add e2e tests for topology based provisioning

- This commit adds tests only for RBD, as CephFS still needs
an enhancement in CephFS subvolume commands to effectively use
topology based provisioning

Signed-off-by: ShyamsundarR <srangana@redhat.com>",114,27,0,0,"2018-01-08 15:47:21","809.61"
"ceph/ceph-csi","6b1285d38bfa3920f9b1426d6cd86e33a7e0612f","nixpanic","2021-01-26 15:47:14","false","rbd: copy passphrase for encrypted clones

When a source volume is encrypted, the passphrase needs to be copied and
stored for the newly cloned volume.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",80,37,0,1,"2018-01-08 15:47:21","1113.75"
"ceph/ceph-csi","06c4477ff9fce02c49439d800f36cce82319f805","losil","2022-04-06 05:16:28","false","helm: allowPrivilegeEscalation: true in containerSecurityContext

When running the kubernetes cluster with one single privileged
PodSecurityPolicy which is allowing everything the nodeplugin
daemonset can fail to start. To be precise the problem is the
defaultAllowPrivilegeEscalation: false configuration in the PSP.
 Containers of the nodeplugin daemonset won't start when they
have privileged: true but no allowPrivilegeEscalation in their
container securityContext.

Kubernetes will not schedule if this mismatch exists cannot set
allowPrivilegeEscalation to false and privileged to true

Signed-off-by: Silvan Loser <silvan.loser@hotmail.ch>
Signed-off-by: Silvan Loser <33911078+losil@users.noreply.github.com>",45,51,1,0,"2018-01-08 15:47:21","1549.56"
"ceph/ceph-csi","5a4517e38e836be1fabaec66eedfbb3befeadcd1","nixpanic","2020-04-24 09:12:25","false","move build-multi-arch-image.sh to scripts/

Signed-off-by: Niels de Vos <ndevos@redhat.com>",105,27,0,1,"2018-01-08 15:47:21","836.23"
"ceph/ceph-csi","306526db97e079f4cba5328dc88bd0dd7afad660","Madhu-1","2019-07-04 09:16:59","false","Replace noexec with debug mountflag for  cephfs

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",79,18,0,1,"2018-01-08 15:47:21","541.98"
"ceph/ceph-csi","8b70e68f659290ba05bbded279469e3948dac1a4","Madhu-1","2020-04-06 08:46:55","false","Fix issue related to http status code in vault

the status code for success should be between
200 to 300.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",104,27,0,1,"2018-01-08 15:47:21","819.21"
"ceph/ceph-csi","b370d9afb6d1fc226bbf5ad34f5a77b9d2c2590d","Madhu-1","2021-02-03 11:19:03","false","rbd: unmarshal the data read from file

if are reading the kms data from the file.
than only we need to unmarshal. If we are reading
from the configmap it already returns the unmarshal
data.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",83,37,0,1,"2018-01-08 15:47:21","1121.56"
"ceph/ceph-csi","095a82f37de76546e0cbd375a9a22106a199e737","yati1998","2021-06-14 10:40:57","false","util: returns actual error instead of ErrPoolNotFound

This commit returns actual error returned by the go-ceph API
to the function GetPoolName(..) instead of just returning
ErrPoolNotFound everytime there is error getting the pool id.
There is a issue reported in which the snapshot creation
takes much more time to reach True state
(i.e., between 2-7 mins) and keeps trying to create with
below error though pool is present:
rpc error: code = NotFound desc = pool not found: pool ID (21)
not found in Ceph cluster.

Since we cannot interpret the actual error for the delay in
snapshot creation, it is required to return the actual error
as well so that we can uderstand the reason.

Signed-off-by: Yati Padia <ypadia@redhat.com>",110,41,0,0,"2018-01-08 15:47:21","1251.54"
"ceph/ceph-csi","0ee0c1202732f0cc88bb1b2d799623cebbad4a35","nixpanic","2021-06-21 13:56:48","false","cleanup: prevent panic in cleanUpSnapshot

While cleaning up snapshots, not all object may exist after a partial
provisioning attempt. In case objects are missing, do not try to delete
them.

Fixes: #2192
Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,41,0,1,"2018-01-08 15:47:21","1258.67"
"ceph/ceph-csi","1e05a0da7c71cc78ea04a171ef0cc7f20fddee9b","Madhu-1","2023-11-03 08:45:30","false","util: remove RadosNamespace from configmap

remove RadosNamespace from the configmap main
section as its already added to the rbd section

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",20,70,1,1,"2018-01-08 15:47:21","2121.96"
"ceph/ceph-csi","9bb79fbe7d3ba41687dbdf4c2bc422d6e01ad53f","Madhu-1","2020-07-06 06:22:34","false","journal: replace getStoredImageId with go-ceph

moved implementation of getStoredImageID to go-ceph
to get better performance.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",112,30,0,1,"2018-01-08 15:47:21","909.11"
"ceph/ceph-csi","118f34525eab180e340bcc454ac3e227631d68e6","Madhu-1","2019-12-11 06:43:31","false","Remove deprecated containerized

As we are moving towards v2.0.0 I think
it's a good time to remove the deprecated flag.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",100,23,0,1,"2018-01-08 15:47:21","697.87"
"ceph/ceph-csi","c0182c5881ead92675b7e47957096b32081c6841","Madhu-1","2019-01-28 12:15:35","false","Add megacheck for gometalinter

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",22,13,0,1,"2018-01-08 15:47:21","385.1"
"ceph/ceph-csi","31e9288f8f76a3f3c999d7837986ea9eda850d81","humblec","2020-08-04 04:19:28","false","cephfs: remove inValidCommmand and errNotFoundString

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","937.02"
"ceph/ceph-csi","d12fdfd40039ac4c1c5094fdb1a63e4db039f6eb","gman0","2019-02-25 17:09:21","false","rbd: fixed metadata idempotency in DeleteVolume; DeleteSnapshot should assume the snapshot to be already deleted if metadata doesn't exist",31,14,0,0,"2018-01-08 15:47:21","412.31"
"ceph/ceph-csi","ca12592d5cb01716a64ecbdb0c7681ec4c213026","Madhu-1","2022-10-12 07:21:16","false","doc: remove nfs daemonset deletion

As we dont need to delete the nfs daemonset
which was present in 3.6.x release in 3.8.x
release as user will upgrade from 3.6.x to
3.7.x and delete the nfs daemonset.

fixes #3324

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",37,57,1,1,"2018-01-08 15:47:21","1734.65"
"ceph/ceph-csi","d4dad7c18921c7b50cc164c670591d728e2e2fc9","nixpanic","2020-06-25 08:35:19","false","cleanup: use errors.As() in rbd.NodeUnstageVolume()

See-also: https://github.com/golang/go/wiki/ErrorValueFAQ#how-should-i-change-my-error-handling-code-to-work-with-the-new-features
Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,29,0,1,"2018-01-08 15:47:21","897.2"
"ceph/ceph-csi","b812ec26df5c7519c400aeba0d23339c618a550b","nixpanic","2019-08-13 07:51:03","false","e2e: do not fail deleting resources when ""resource not found""

Sometimes the tests fail cleaning up due unavailable resources that are
listed in the .yaml files. Deleting the missing resources returns
""resource not found"". By passing --ignore-not-found to kubectl, this
problem should not happen anymore (and possibly makes it more obvious
where tests do go wrong).",84,19,0,1,"2018-01-08 15:47:21","579.92"
"ceph/ceph-csi","894c20f79263ef82ef162bb49c749efbe19b686a","Rakshith-R","2022-05-16 07:23:51","false","nfs: add support for pvc-pvc clone

This commit adds support for pvc-pvc clone.
Only capability needed to be advertised, the
underlying support is already provided by cephfs
backend.

Signed-off-by: Rakshith R <rar@redhat.com>",37,52,1,1,"2018-01-08 15:47:21","1588.65"
"ceph/ceph-csi","8081ac82513c4e9b02dd18d99e0b4a2b3b8334cb","Madhu-1","2021-12-07 05:45:28","false","rbd: add new image features for dummy image

The dummy image will be created with 1Mib size.
during the snapshot transfer operation the 1Mib
will be transferred even if the dummy image doesnot
contains any data. adding the new image features
`fast-diff,layering,obj-map,exclusive-lock`on the
dummy image will ensure that only the diff is
transferred to the remote cluster.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",49,47,1,1,"2018-01-08 15:47:21","1425.33"
"ceph/ceph-csi","bf5c36822f4ee6aaabced5f3b8f2e20b7a5f9032","Madhu-1","2021-02-03 11:24:13","false","rbd: set tenant in kms object

the tenant/namespace is needed to read the certificates,
this commit sets the tenant in kms object.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",83,37,0,1,"2018-01-08 15:47:21","1121.57"
"ceph/ceph-csi","2205145654cdcfd87c8f9695745c02e391b0b540","Madhu-1","2022-04-11 14:24:19","false","e2e: remove claimRef after deleting the PVC

Instead of patching the PV to update
the persistentVolumeReclaimPolicy and
the claimRef before deleting the PVC.
Patch PV persistentVolumeReclaimPolicy to Retain
to retain the PV after deleting the PVC.
Remove the claimRef on the PV after deleting
the PVC so that claim can be attached to a new PVC.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",45,51,1,1,"2018-01-08 15:47:21","1553.94"
"ceph/ceph-csi","c3bae17fcee0413dfb0a15a3524f0e7e0fc8d5d9","Madhu-1","2021-04-26 13:15:18","false","rbd: delete encryption key from KMS

when a Snapshot is encrypted during a CreateSnapshot
operation, the encryption key gets created in the KMS
when we delete the Snapshot the key from the KMS
should also gets deleted.

When we create a volume from snapshot we are copying
required information but we missed to copy the
encryption information, This commit adds the missing
information to delete the encryption key.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",86,40,0,1,"2018-01-08 15:47:21","1203.64"
"ceph/ceph-csi","b085577a4f8b232eb1b48c414138764742e5ddd4","Madhu-1","2020-06-24 08:12:12","false","rbd: add skipForceFlatten flag

added skipForceFlatten flag to skip
the image deptha and skip image flattening.
This will be very useful if the kernel is
not listed in cephcsi which supports deep
flatten fauture.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",115,29,0,1,"2018-01-08 15:47:21","896.18"
"ceph/ceph-csi","44f7b1fe4b2ba3473bb18b8765c8e91f4e407a20","ShyamsundarR","2019-08-01 21:42:33","false","Use ""rbd device list"" to list and find rbd images and their device paths

This change also starts mapping nbd based access using ther rbd CLI
as, it is a prerequisite to get device listing for nbd as well.

Signed-off-by: ShyamsundarR <srangana@redhat.com>",77,19,0,0,"2018-01-08 15:47:21","569.5"
"ceph/ceph-csi","4a69378698f014009932e610e524df6f7598ef35","humblec","2021-10-26 07:49:10","false","rbd: introduce a helper function to detect multi writer,block & rwofile

SINGLE_NODE_WRITER capability ambiguity has been fixed in csi spec v1.5
which allows the SP drivers to declare more granular WRITE capability in form
of SINGLE_NODE_SINGLE_WRITER or SINGLE_NODE_MULTI_WRITER.

These are not really new capabilities rather capabilities introduced to
get the desired functionality from CO side based on the capabilities SP
driver support for various CSI operations, this new capabilities also help
to address new access mode RWOP (readwriteoncepod).

This commit adds a helper function which identity the request is of
multiwriter mode and also validates whether it is filesystem mode or
block mode. Based on the inspection it fails to allow multi write
requests for filesystem mode and only allow multi write request against
block mode.

This commit also adds unit tests for isMultiWriterBlock function which
validates various accesstypes and accessmodes.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",53,45,0,1,"2018-01-08 15:47:21","1383.42"
"ceph/ceph-csi","cb77ff5d8739b5ab78b7395c41ec61b39bde392d","humblec","2019-02-04 13:05:07","false","Migrate rbd package to klog from glog

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",22,13,0,1,"2018-01-08 15:47:21","392.14"
"ceph/ceph-csi","23e0874ebfb111c7763421d406186e0be2403a66","Yuggupta27","2020-08-07 08:25:58","false","deploy: add wrapper function of kubectl

Add retries to prevent ci failure instantly.
Now, the command execution will retry upto
5 times, to avoid failures in some runs.

Signed-off-by: Yug <yuggupta27@gmail.com>",117,31,0,0,"2018-01-08 15:47:21","940.19"
"ceph/ceph-csi","0ce6ad11524b3241e68057a7fb6f9aa7951e70ce","Madhu-1","2021-05-03 11:56:04","false","rbd: fix image details logging

log only the required details of
the image.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",94,40,0,1,"2018-01-08 15:47:21","1211.59"
"ceph/ceph-csi","a688ec7bcf2e9852931b652917d676a44164e40e","humblec","2021-06-28 07:58:54","false","doc: correct typos in driver deployment scripts of external-storage test

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",116,42,0,1,"2018-01-08 15:47:21","1265.42"
"ceph/ceph-csi","c45c426215c8df87cf060f440770af0d7f62a032","Madhu-1","2020-02-25 11:45:54","false","Add cephcsi namespace and rook namespace flag

Added namespace flag to cephcsi to deploy cephcsi
resouces in different namespace.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",108,26,0,1,"2018-01-08 15:47:21","777.33"
"ceph/ceph-csi","be3a78afaf97514cf3c1207c4c514a746add03ab","Madhu-1","2020-09-10 09:46:53","false","e2e: update cephfs ROX test case

updated cephfs ROX test case to create
ROX Clone PVC instead of creating an empty PVC

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",120,32,0,1,"2018-01-08 15:47:21","972.25"
"ceph/ceph-csi","591d097320dfcf84529d4381d78c4e76a76621c4","Madhu-1","2020-11-30 03:38:24","false","ci: update mergify rule for codespell

added codespell as required to auto merge PR.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",84,35,0,1,"2018-01-08 15:47:21","1051.99"
"ceph/ceph-csi","7f00fa66f4934d3a3ecf93f6811fb489490c8617","Madhu-1","2020-08-11 12:16:18","false","cephfs: replace Errorf with ErrorLog in createSnapshot

replace Errorf with ErrorLog in createSnapshot
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.35"
"ceph/ceph-csi","1cedbf0eee6e325da441010f3961289b71b4f8bb","Madhu-1","2019-02-26 13:19:00","false","sort volume ID's for rbd volume list

looping over a map is not guaranteet
to be ordered.
we need to sort the volume ID's for
ListVolume rpc  for rbd plugin.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",31,14,0,1,"2018-01-08 15:47:21","413.15"
"ceph/ceph-csi","778cfb309074103560e493b4c4c6e6e4809b57c3","Madhu-1","2019-07-04 09:49:57","false","provide option to set pluginpath for cephfs

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",79,18,0,1,"2018-01-08 15:47:21","542"
"ceph/ceph-csi","9f9ef0eca50399720fd4885e7c735d332ce65336","Madhu-1","2021-12-09 05:33:34","false","ci: update action go.mod to 1.17

As we are updating the cephcsi main repo
to golang 1.17, updating the action package
to golang 1.17

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",50,47,1,1,"2018-01-08 15:47:21","1426.32"
"ceph/ceph-csi","03d93219d7510c4c9ff578f3bb6c2f2a6d0ce612","Madhu-1","2019-01-29 06:07:03","false","Fix metalinter issue

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",22,13,0,1,"2018-01-08 15:47:21","385.85"
"ceph/ceph-csi","bd57feb26e19a9e6db1ecfa7a8a07521277329eb","Rakshith-R","2022-05-04 11:23:51","false","rbd: use `vaultAuthPath` variable name in error msg

Before the change, the error msg was the following:
```
failed to set VAULT_AUTH_MOUNT_PATH in Vault config: path is empty
```
`vaultAuthPath` is the actual variable name set by the
user. The error message will now be the following:
```
failed to set ""vaultAuthPath"" in vault config: path is empty
```

Signed-off-by: Rakshith R <rar@redhat.com>",39,52,1,1,"2018-01-08 15:47:21","1577.82"
"ceph/ceph-csi","96bf4a98bd11fa592fe747dc8150f0156b4d7524","gman0","2019-02-14 10:48:52","false","cephfs: don't need to store keyrings anymore",27,13,0,0,"2018-01-08 15:47:21","401.04"
"ceph/ceph-csi","77e930c2f39f5f23559a8014d4efccf67fa58739","gman0","2019-02-20 13:00:10","true","Merge pull request #215 from Madhu-1/fix-spell-1

fix misspelled words",29,13,0,0,"2018-01-08 15:47:21","407.13"
"ceph/ceph-csi","70358c8eb7c864609574f409cad1025947120490","humblec","2020-10-19 13:08:07","false","rbd: volJournal.Connect() return wrongly pushed to caller

volJournal.Connect() got the error on err2 variable, however
the return was on variable err which hold the error return of
DecomposeCSIID() which is wrong. This cause the error return wrongly
parsed and pushed from the caller. From now on, we are reusing the
err variable to hold and revert the error of volJournal.Connect().

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",76,33,0,1,"2018-01-08 15:47:21","1011.39"
"ceph/ceph-csi","2f2585dc3c6dbd3437ba041336adb47ceb6cab2a","humblec","2019-11-27 12:14:31","false","Resize RBD CSI volumes on demand of CO resize request

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",94,22,0,1,"2018-01-08 15:47:21","684.1"
"ceph/ceph-csi","cf4d5e5244d878a0651e956f555dc2a8b426da10","Madhu-1","2020-05-05 09:09:20","false","doc: Update github issue template

Added more details about required versions
and what logs need to be included when raising the bug

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",109,28,0,1,"2018-01-08 15:47:21","848.22"
"ceph/ceph-csi","ce7f936551a83740d6b444ee2f1d97440cc30311","Madhu-1","2021-03-31 07:32:09","false","rebase: add replication-lib-utils to go.mod

added github.com/kube-storage/replication-lib-utils
to the vendor directory which is required to avoid
secret logging in GRPC.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",90,39,0,1,"2018-01-08 15:47:21","1178.41"
"ceph/ceph-csi","1849076aab75378ac98750870dc8b4b5577de0b5","Rakshith-R","2021-08-23 11:34:29","false","rbd: add EnsureImageCleanup to ensure image cleanup from trash

After moving moving image to trash, if `trash remove` step fails,
then external-provisioner will issue subsequent requests, in which
image will be absent in pool( will be in trash) and omap cleanup will
be done with stale image left in trash with no `trash remove` step on it.

To avoid this scenario list trash images and find corresponding id for given
image name and add a task to flatten when we encounter a ErrImageNotFound.

Fixes: #1728

Signed-off-by: Rakshith R <rar@redhat.com>",116,43,0,1,"2018-01-08 15:47:21","1320.57"
"ceph/ceph-csi","03cf97c9ff6d0ed2d02d646024fc393434860365","Madhu-1","2023-08-02 14:44:42","false","rebase: update Rook to the latest release

update Rook to the latest v12 release.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",24,67,1,1,"2018-01-08 15:47:21","2031.21"
"ceph/ceph-csi","330995751a5ccaa32a851b478490778002b17ee6","riya-singhal31","2023-07-04 08:04:25","false","e2e: add test for validation of fuseMountOptions

Signed-off-by: riya-singhal31 <rsinghal@redhat.com>",34,66,1,0,"2018-01-08 15:47:21","2002.93"
"ceph/ceph-csi","54fa0284654db57722f6e44d0ef92cfc85f81c92","riya-singhal31","2023-05-16 06:34:59","false","deploy: move cephfs/csidriver to API

Signed-off-by: riya-singhal31 <rsinghal@redhat.com>",29,64,1,0,"2018-01-08 15:47:21","1953.87"
"ceph/ceph-csi","6f54b88b264dffea1a78219d899adde7d716e4f5","riya-singhal31","2023-04-04 12:36:07","false","e2e: remove extra check for snapshot count

snapshot count validation has already done after the deletion
of snapshot

Signed-off-by: riya-singhal31 <rsinghal@redhat.com>",34,63,1,0,"2018-01-08 15:47:21","1913.12"
"ceph/ceph-csi","e8d6dc9faba32463f709dd0e36bd195a9e803e44","riya-singhal31","2023-04-06 11:59:55","false","doc: fix ceph version name in support matrix

Signed-off-by: riya-singhal31 <rsinghal@redhat.com>",35,63,1,0,"2018-01-08 15:47:21","1915.09"
"ceph/ceph-csi","150d1a5ebb3d360adb7efb3e2d22f0855330acad","Madhu-1","2023-02-15 08:20:47","false","build: add check for go list

Added a check for go list to
verify the dependencies

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",36,61,1,1,"2018-01-08 15:47:21","1862.94"
"ceph/ceph-csi","42744213f6848a429b3d3ba48416353e87b5cc9c","irq0","2022-09-08 14:12:56","false","e2e: Add test-cephfs-fscrypt flag

Add flag to default disable Ceph FS fscrypt tests, as they require a
custom minikube ISO

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",38,56,1,0,"2018-01-08 15:47:21","1701.93"
"ceph/ceph-csi","cd42ad67b2a6140d08504d256154d38cc3acf65e","irq0","2022-08-19 14:51:49","false","examples: Ceph FS fscrypt / KMS additions

Add encryption configuration to Ceph FS examples

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",41,55,1,0,"2018-01-08 15:47:21","1681.96"
"ceph/ceph-csi","c5a6d11a8faade46cf9221de31bdbf36dcc9f722","Madhu-1","2022-11-02 12:57:22","false","e2e: correct int format

use %d when formatting the int
value.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",36,58,1,1,"2018-01-08 15:47:21","1755.88"
"ceph/ceph-csi","f12fa3ee56dd0bfafe12a597812d68fd47f52ea4","Madhu-1","2022-10-18 08:39:15","false","rbd: return GRPC error from GRPC method

GRPC methods should only return GRPC errors
if any error occurs.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",40,57,1,1,"2018-01-08 15:47:21","1740.7"
"ceph/ceph-csi","1fc96783429623177e739281cbefd3f22406d833","riya-singhal31","2023-10-05 15:31:58","false","cephfs: expose FenceControllerServer in driver.go to handle the requests

Signed-off-by: Riya Singhal <rsinghal@redhat.com>",21,69,1,0,"2018-01-08 15:47:21","2094.24"
"ceph/ceph-csi","504ac127bed4ca58778f3056c1e09841884b4e3d","nixpanic","2023-06-01 19:28:07","false","build: use Go 1.20

Kubernetes as a main dependency requires Go 1.20 or newer.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",31,65,1,1,"2018-01-08 15:47:21","1970.4"
"ceph/ceph-csi","79cb1b384924c24aeafab0cea19cde9f67196ef0","gman0","2022-04-06 12:05:18","false","e2e: add test for cephfs snapshot-backed volumes

Signed-off-by: Robert Vasek <robert.vasek@cern.ch>",44,51,1,0,"2018-01-08 15:47:21","1549.85"
"ceph/ceph-csi","2da9522fe487697f3b10be930d7aba8c21203235","sbezverk","2018-04-20 14:46:24","true","Merge pull request #30 from gman0/wip-cephfs

cephfs CSI plugin",2,3,0,0,"2018-01-08 15:47:21","101.96"
"ceph/ceph-csi","671d6a77679771bca714c7a2efe2d6799acd7fb8","mnaser","2021-06-05 14:59:50","false","rbd: Backout if image features is empty

In golang world, if you split an empty string that does not contain
the seperator, you get an array with one empty string.  This results
in volumes failing to mount with ""invalid feature "" (note extra space
because it's trying to check if 'empty string' is a valid feature).

This patch checks if the string is empty, and if so, it just decides
to skip the entire validation and returning nothing.

Signed-off-by: Mohammed Naser <mnaser@vexxhost.com>",109,41,0,0,"2018-01-08 15:47:21","1243.72"
"ceph/ceph-csi","649aeb7aaf1030b5f04c6979a6bf61f6ab8a0d40","Madhu-1","2020-04-16 14:47:43","false","rbd: Add support for rbd ROX PVC mounting

if the PVC access mode is ReadOnlyMany
or single node readonly, mounting the rbd
device path to the staging path as readonly
to avoid the write operation.

If the PVC acccess mode is readonly, mapping
rbd images as readonly.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",101,27,0,1,"2018-01-08 15:47:21","828.46"
"ceph/ceph-csi","19e4146fab67cc4840f176e91811bace81e0fd4d","Rakshith-R","2022-08-15 05:23:50","false","rbd: add replication capability & service to csiaddons server

csi-addons server will advertise replication capability and
replication service will run with csi-addons server too.

Signed-off-by: Rakshith R <rar@redhat.com>",41,55,1,1,"2018-01-08 15:47:21","1677.57"
"ceph/ceph-csi","3c3cbc8005bb493d6bfe50ac344f809576b4b730","palvarez89","2022-08-02 15:22:42","false","doc: update relative path to ceph-config.yaml file

Signed-off-by: Pedro Alvarez <pedro.alvarez@softiron.com>",40,55,1,0,"2018-01-08 15:47:21","1665.98"
"ceph/ceph-csi","5aabd4e1d256f4a2f68c0b9930db3e96911ce687","humblec","2022-08-01 16:10:36","false","deploy: remove the snapshot controller installation check

no need to have 1.17 kube version check anymore  before we install
snapshot controller.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",39,55,1,1,"2018-01-08 15:47:21","1665.02"
"ceph/ceph-csi","7a2dd4c3cf5891fc3d7627843b124dcdf4f8abf9","Madhu-1","2022-06-08 14:11:36","false","rbd: create token and use it for vault SA

create the token if kubernetes version in
1.24+ and use it for vault sa.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
Signed-off-by: Rakshith R <rar@redhat.com>",39,53,1,1,"2018-01-08 15:47:21","1611.93"
"ceph/ceph-csi","c55e3466b4c53aadccaf561c05105c36708d74f8","Madhu-1","2022-06-01 09:31:46","false","rebase: update dependencies to latest version

updating all the dependencies to latest
releases.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",37,53,1,1,"2018-01-08 15:47:21","1604.74"
"ceph/ceph-csi","d886ab0d6634bca5a5b055bb7783138a2e3e5ded","Madhu-1","2022-04-11 08:00:08","false","rbd: use leases for leader election

use leases for leader election instead
of the deprecated configmap based leader
election.

This PR is making leases as default leader election
refer https://github.com/kubernetes-sigs/
controller-runtime/pull/1773, default from configmap
to configmap leases was done with
https://github.com/kubernetes-sigs/
controller-runtime/pull/1144.

Release notes https://github.com/kubernetes-sigs/
controller-runtime/releases/tag/v0.7.0

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",45,51,1,1,"2018-01-08 15:47:21","1553.68"
"ceph/ceph-csi","a44a97f3c56426d420fdb790c68d06545c4f1657","humblec","2022-04-11 08:43:21","false","deploy: snapshot deployment is no longer beta

Considering snapshot controllers have been moved to GA since
kube version 1.20, we no longer need to have a mention of beta
version of the same in our deployment.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",45,51,1,1,"2018-01-08 15:47:21","1553.71"
"ceph/ceph-csi","7c966b5a3900e8afb166bd7a5369ee2a34267c38","humblec","2022-03-09 12:27:43","false","doc: correct static pvc mention for cephfs

it was wrongly mentioned RBD PVC in cephfs static pvc section.
This commit removes the same.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",44,50,1,1,"2018-01-08 15:47:21","1521.86"
"ceph/ceph-csi","66e7f3525f9a6187927ba9f04b8377f3eb71bb8e","humblec","2022-03-10 10:11:29","false","cleanup: remove unimplemented controller expand,snapshot RPCs

These RPCs ( controller expand, create and delete snapshots) are
no longer unimplmented and we dont have to declare these as with
`unimplemented` states. This commit remove the same.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",43,50,1,1,"2018-01-08 15:47:21","1522.77"
"ceph/ceph-csi","e9c6fab287e31f895f916d79224a4bfc3e3e9088","gman0","2022-02-23 15:09:42","false","e2e: loadAppDeployment now sets ImagePullPolicy to PullIfNotPresent

Fixes: #2889

Signed-off-by: Robert Vasek <robert.vasek@cern.ch>",41,49,1,0,"2018-01-08 15:47:21","1505.97"
"ceph/ceph-csi","e08084fbb68c49476c224dce54b8e4b642179e40","Madhu-1","2022-01-25 07:53:04","false","e2e: update cephfs data pool name

cephfs data pool name is changed from filesystem-data0
to filesystem-replicated in Rook 1.8. updating
the cephcsi helper functions also to use new
pool names.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",37,49,1,1,"2018-01-08 15:47:21","1477.67"
"ceph/ceph-csi","e5100eacd46ee183a5db0a02e689b9657e9094a6","Madhu-1","2022-01-24 11:38:59","false","deploy: add check for device-health-metrics pool

Rook creates a detault pool with name
device_health_metrics for
device-health-metrics CephBlockPool CR.

device-health-metrics is added to cluster-test.yaml
in Rook 1.8

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",36,49,1,1,"2018-01-08 15:47:21","1476.83"
"ceph/ceph-csi","28fef9b3797e41f277d11d9a3bde11e971994503","Madhu-1","2022-01-25 07:37:15","false","cleanup: remove thick provisioning code

This commit removes the thick provisioning
code as thick provisioning is deprecated in
cephcsi 3.5.0.

fixes: #2795

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",37,49,1,1,"2018-01-08 15:47:21","1477.66"
"ceph/ceph-csi","96f8f2ac5a862a3e0679099913e2f4af11cc17a7","Yuggupta27","2022-01-04 10:05:24","false","cleanup: re-run ""go mod vendor"" with Go 1.17

Signed-off-by: Yug Gupta <yuggupta27@gmail.com>",46,48,1,0,"2018-01-08 15:47:21","1452.51"
"ceph/ceph-csi","bce5c3dc7c461fab2698c0f9ee76ab618bae8ee9","Madhu-1","2022-01-21 17:36:19","false","doc: update upgrade doc for 3.5.1

updating upgrade to to point to 3.5.1
for upgrades a 3.5.1 release is out.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",37,48,1,1,"2018-01-08 15:47:21","1474.08"
"ceph/ceph-csi","6bdeffda59197cf2c344b56c733ec575a7081c92","Madhu-1","2022-01-19 15:32:32","false","build: pull ceph base image from quay.io

pull the ceph image from quay.io instead
of dockerhub.
From ceph doc, the images are available
in both quay and dockerhub
https://docs.ceph.com/en/latest/install/
containers/#official-releases but latest
images are not updated in dockerhub.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",41,48,1,1,"2018-01-08 15:47:21","1471.99"
"ceph/ceph-csi","f82260068940aa4d5c5fe45c8f566ec22ca38028","humblec","2022-01-24 09:09:31","false","rbd: change the keyprotect metadata name to `ibmkeyprotect`

To be consistent with other components and also to explictly
state it belong to `ibm keyprotect` service introducing this
change

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",36,49,1,1,"2018-01-08 15:47:21","1476.72"
"ceph/ceph-csi","f4cfe013b1d6c8a0047ef32684da8af7dc2866c5","nixpanic","2021-11-24 08:07:00","false","rebase: update csi-addons/spec to include Identity Service

Signed-off-by: Niels de Vos <ndevos@redhat.com>",57,46,0,1,"2018-01-08 15:47:21","1411.43"
"ceph/ceph-csi","de57fa1804f4d15a03c4a6962d0672485b22ffa3","humblec","2021-10-15 06:44:10","false","e2e: adjust deletion, filesystem and block  tests for migration volume

this commit create and make use of migration secret in the requests and
validate various csi operations

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",50,45,0,1,"2018-01-08 15:47:21","1372.37"
"ceph/ceph-csi","2017b8c6214d05867f90db89200a3d8b0f19023b","Madhu-1","2021-10-25 11:27:23","false","rbd: log mirror daemon state for replication

log the mirror deamon state in the local and
remote cluster for better debugging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",53,45,0,1,"2018-01-08 15:47:21","1382.57"
"ceph/ceph-csi","9bd9f5e91d7d265b480d1a2a358fbdec4a90567f","nixpanic","2021-10-19 15:00:15","false","rebase: update github.com/hashicorp/vault/sdk to latest

The github.com/hashicorp/vault/sdk was listed in the replace section,
most likely because using a newer version failed. By adding a missing
tagged version to the `exclude` section in go.mod, updating the package
works fine.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",54,45,0,1,"2018-01-08 15:47:21","1376.72"
"ceph/ceph-csi","8374fa929a505e6f6fba8f0c1b0cb2fdb44c7d47","Madhu-1","2021-09-17 08:34:13","false","helm:  reduce the PSP permission for cephfs deployment

cephfs deployment doesnot need extra permission like
privileged,Capabilities and reduce unwanted volumes.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",62,44,0,1,"2018-01-08 15:47:21","1344.45"
"ceph/ceph-csi","9d7a9144f1a491e364ec5c01a143039a55096e31","nixpanic","2022-05-02 08:28:58","false","e2e: add ExpandVolume test for NFS-volumes

Signed-off-by: Niels de Vos <ndevos@redhat.com>",38,52,1,1,"2018-01-08 15:47:21","1575.7"
"ceph/ceph-csi","085a3bdc7339d9b45c2129a7f65649ecaa63e334","nixpanic","2022-04-14 16:27:24","false","doc: use `.nfs` as default pool for NFS-export configs

""nfs-ganesha"" is the default pool for older Ceph versions, recent
versions use "".nfs"" (which can not be changed in the CephNFS resource).

Signed-off-by: Niels de Vos <ndevos@redhat.com>",44,51,1,1,"2018-01-08 15:47:21","1557.03"
"ceph/ceph-csi","bbecb81d4f49f80412c52e9aaa589b2d9187f6bb","nixpanic","2022-05-09 07:16:52","false","ci: add `ci/skip/multi-arch-build` label

If the `ci/skip/multi-arch-build` label is set on a PR, the GitHub
Workflow only builds for the local architecture. This makes it possible
to merge PRs faster.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",40,52,1,1,"2018-01-08 15:47:21","1581.65"
"ceph/ceph-csi","eab2ec42bfcb5a351c028dd4f38b0b753e74715a","nixpanic","2022-04-25 12:23:26","false","e2e: allow `kubectlDelete` to succeed with `NotFound` error

Signed-off-by: Niels de Vos <ndevos@redhat.com>",38,52,1,1,"2018-01-08 15:47:21","1567.86"
"ceph/ceph-csi","c4f79d455fec571db5673f30bfde8d93f4fb7f8a","Madhu-1","2022-05-05 02:47:06","false","rebase: update kubernetes dep to 1.24.0

As kubernetes 1.24.0 is released, updating
kubernetes dependencies to 1.24.0

updates: #3086

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",43,52,1,1,"2018-01-08 15:47:21","1578.46"
"ceph/ceph-csi","0ecfd0e72ca4b8cc846265eb6507e21010cd4c31","agarwal-mudit","2020-11-02 11:55:41","false","rbd: replace go-ceph GetParentInfo() with GetParent()

GetParent() is a newer and better version of
GetParentInfo() in go-ceph.

Signed-off-by: Mudit Agarwal <muagarwa@redhat.com>",80,34,0,0,"2018-01-08 15:47:21","1025.34"
"ceph/ceph-csi","b4693dcffeb4cb6ea69ed2d29bbea0bc1af094ec","Madhu-1","2020-09-03 09:34:29","false","e2e: rework on E2E framework

rework of E2E framework for better code
organization and add more helpful logs for
debugging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",124,32,0,1,"2018-01-08 15:47:21","966.24"
"ceph/ceph-csi","4de1abad5edaa074b9366ac551dd57657fc89d51","agarwal-mudit","2020-08-24 12:45:18","false","rbd: NodeExpandVolume() should use StagingTargetPath

Form kubernetes v1.19 onwards NodeRequest is getting volume path
in StagingTargetPath instead of VolumePath, cephcsi should also
use the same.

Signed-off-by: Mudit Agarwal <muagarwa@redhat.com>",119,31,0,0,"2018-01-08 15:47:21","956.37"
"ceph/ceph-csi","ca2e4752962a45835fff94727780cac3b9817fcd","Madhu-1","2019-01-28 19:55:10","false","Fix gometalinter issues

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",22,13,0,1,"2018-01-08 15:47:21","385.42"
"ceph/ceph-csi","f2edc926cf3c471feb27600b6f62c73957b5c308","Madhu-1","2020-08-24 07:57:29","false","deploy: remove preStop hook from daemonset templates

The lifecycle preStop hook fails on container stop / exit
because /bin/sh is not present in the driver registrar container
image.

the driver-registrar will remove the socket file
before stopping. we dont need to have any preStop hook
to remove the socket as it was not working as expected

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",121,31,0,1,"2018-01-08 15:47:21","956.17"
"ceph/ceph-csi","d9c8b07b840be93cfa663d4c53121d3691f02534","Yuggupta27","2020-08-21 10:10:15","false","doc: Correct title of capabilities doc

Correct capabilities doc with minor nits.

Signed-off-by: Yug <yuggupta27@gmail.com>",119,31,0,0,"2018-01-08 15:47:21","953.27"
"ceph/ceph-csi","22d1476bbaf749f70b78cb708771f8eeb17d7ae9","phlogistonjohn","2020-04-23 18:27:50","false","util: create a NewErrSnapNameConflict function

The NewErrSnapNameConflict will allow packages outside of ""util"" to
create new instances of the ErrSnapNameConflict error.

Signed-off-by: John Mulligan <jmulligan@redhat.com>",101,27,0,0,"2018-01-08 15:47:21","835.61"
"ceph/ceph-csi","2881a8eddeb353ce184f084b599e1dc3923d5015","Madhu-1","2019-02-18 12:21:59","false","update k8s to latest 1.13.3

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",28,13,0,1,"2018-01-08 15:47:21","405.11"
"ceph/ceph-csi","6df71410e3c985a4badab36a227d2fc75e7c6efe","Madhu-1","2022-01-21 17:25:06","false","doc: update readme for 3.5.1 release

updated Readme for 3.5.1 release.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",38,48,1,1,"2018-01-08 15:47:21","1474.07"
"ceph/ceph-csi","52243d0140c9b62225168c8b6faaa75f9f1343a6","Madhu-1","2020-08-19 06:03:35","false","ci: error out for invalid component in commit header

if the commit header is not present in the list of
the component we maintain. the commitlint check should
show error instead of showing the warning.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",120,31,0,1,"2018-01-08 15:47:21","951.09"
"ceph/ceph-csi","9f753889edf436511d81a987157f9796860df980","Madhu-1","2023-11-03 08:47:24","false","rbd: remove deprecated rbdImageRequiresEncryption

remove support for deprecated
rbdImageRequiresEncryption case.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",20,70,1,1,"2018-01-08 15:47:21","2121.96"
"ceph/ceph-csi","7fc553a3a7367708d5d20335fd153589c60d3c35","Rakshith-R","2021-06-15 03:54:54","false","rbd: removing TrimSpace from validateImageFeatures func

`imageFeatures` string containing just whitespace should also
be treated as a invalid feature.

Signed-off-by: Rakshith R <rar@redhat.com>",109,41,0,1,"2018-01-08 15:47:21","1252.26"
"ceph/ceph-csi","6618e2012d98cd8b024a7fd355ad65fb9660fd72","Rakshith-R","2021-05-07 05:30:37","false","cleanup: remove unnecessary calling of .String() when logging

This commit removes calling of .String() when logging
since `%s`,`%v` or `%q` will call an existing .String() function
automatically.

Fixes: #2051

Signed-off-by: Rakshith R <rar@redhat.com>",95,40,0,1,"2018-01-08 15:47:21","1215.32"
"ceph/ceph-csi","3a64ee48c3eed8131ad8eef0a889a89d56ffab17","Rakshith-R","2022-03-03 14:39:21","false","rbd: return unimplemented error for block-mode reclaimspace req

blkdiscard cmd discards all data on the block device which
is not desired. Hence, return unimplemented code if the
volume access mode is block.

Signed-off-by: Rakshith R <rar@redhat.com>",43,50,1,1,"2018-01-08 15:47:21","1516.95"
"ceph/ceph-csi","a8fcf70cb8ffc7151e442f51f68ab90b97cde382","Madhu-1","2021-02-22 11:13:40","false","e2e: make use of ceph users created in e2e

This commit adds support to create and delete
new ceph users to test various functionalities.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",90,37,0,1,"2018-01-08 15:47:21","1139.56"
"ceph/ceph-csi","aaf6b571b8aff4a48cd8fc9c42c8ad867e60d5e3","Madhu-1","2021-03-17 07:27:04","false","rbd: Add ReplicationServer struct for replication operations

added ReplicationServer struct for the replication related
operation it also embed the ControllerServer which
already implements the helper functions like locking/unlocking etc.

removed getVolumeFromID and cleanup functions for better
code readability and easy maintaince.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",85,38,0,1,"2018-01-08 15:47:21","1164.4"
"ceph/ceph-csi","9f5ac5eeaa6662b4e6abccaa758840b8b107bb18","Madhu-1","2019-03-07 12:56:47","false","Fix return error codes

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",29,14,0,1,"2018-01-08 15:47:21","425.13"
"ceph/ceph-csi","f4d5fdf11484fef4e5c0d7ffe7beb8ab9531e8b5","Madhu-1","2021-02-19 06:01:27","false","e2e: add e2e for cephfs VolumeNamePrefix for PVC

when user provides an option for VolumeNamePrefix
create subvolume with the prefix which will be easy
for user to identify the subvolumes belongs to
the storageclass, Added an E2E testing to verify
that the subvolume contains the Prefix what is
provided in the storageclass.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",89,37,0,1,"2018-01-08 15:47:21","1136.34"
"ceph/ceph-csi","1b39b82a851379e301bfef4b1116b477344f3741","Madhu-1","2023-11-02 10:46:57","false","cephfs: avoid variable shadowing

Avoiding variable shadowing as it
becomes hard to debug this kind of
issues in real enviroment.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",20,70,1,1,"2018-01-08 15:47:21","2121.04"
"ceph/ceph-csi","a1de128a818e476b067164ba535b4ac0325f9038","clkao","2018-08-08 15:39:19","false","Log error output for execCommandJson as well.",8,7,0,0,"2018-01-08 15:47:21","210.99"
"ceph/ceph-csi","6bb4ec6715791e4c8bb52340219fc34c164857a1","Rakshith-R","2021-09-15 05:16:38","false","ci: set NUM_DISKS default value to 1 in minikube.sh

Signed-off-by: Rakshith R <rar@redhat.com>",59,44,0,1,"2018-01-08 15:47:21","1342.31"
"ceph/ceph-csi","4d4a2a7814978b12b25d1dfa991c81f8acc30b4c","nixpanic","2021-07-14 06:44:09","false","e2e: prevent re-using empty pvc object

When an error occurs, the pvc object is overwritten in the
PollImmediate() loop. Re-using the pvc.Namespace results in error
messages like

    Error getting pvc in namespace: '': an empty namespace may not be set when a resource name is provided

and prevents the retry by PollImmediate() to never succeed. Storing the
namespace in a local variable prevents this from happening.

Reported-by: Rakshith R <rar@redhat.com>
Signed-off-by: Niels de Vos <ndevos@redhat.com>",122,42,0,1,"2018-01-08 15:47:21","1281.37"
"ceph/ceph-csi","9dc2b1122ddf37f919b7bd842b68bc6d7b7a0489","humblec","2021-04-21 08:59:15","false","doc: correct the keys in certificate secrets

At present the cert keys are not unique which is not correct.
The keys in the secret should be unique and this patch address
the same.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",85,39,0,1,"2018-01-08 15:47:21","1198.47"
"ceph/ceph-csi","d969dada3ef9f563b4a5f7079c60fca5c94d548a","phlogistonjohn","2019-03-20 19:15:51","false","deploy: create a new Dockerfile for unified cephcsi image

Signed-off-by: John Mulligan <jmulligan@redhat.com>",38,14,0,0,"2018-01-08 15:47:21","437.39"
"ceph/ceph-csi","fa54e5ca23c00bfa336d61e23adec0f7e59badcc","rootfs","2019-03-20 01:05:31","true","Merge pull request #261 from j-griffith/default_multiwrite_blockmode

Default multiwrite blockmode",33,14,0,0,"2018-01-08 15:47:21","436.64"
"ceph/ceph-csi","5909597d9e8890be1a9e86c950a359da23c90b1b","gman0","2018-02-20 08:58:33","false","fixed wrong pvc name in kubernetes deployment",1,1,0,0,"2018-01-08 15:47:21","41.72"
"ceph/ceph-csi","f172f089cc4565106bf9dfac740c3d6ed8aaab9c","kfox1111","2019-02-05 21:29:16","false","Update helm chart to match static files

This updates the helm chart to match all the changes that have
been made to the static manifest files.

Signed-off-by: Kevin Fox <Kevin.Fox@pnnl.gov>",27,13,0,0,"2018-01-08 15:47:21","393.49"
"ceph/ceph-csi","cd8381690db521e3acb52c59688529e7ba196ac5","humblec","2019-01-25 10:28:59","false","Update kube dependencies to v1.13.2 from v1.13.0

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",22,13,0,1,"2018-01-08 15:47:21","382.03"
"ceph/ceph-csi","da70ed50dc5ef36c0ec7f162173bbb8363492e15","Madhu-1","2021-09-06 12:23:07","false","cleanup: move execCommandErr to volumemounter

Moved execCommandErr to the volumemounter.go
which is the only caller of this function and
moving the execCommandErr helps in reducing the
util file.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",66,44,0,1,"2018-01-08 15:47:21","1334.61"
"ceph/ceph-csi","5e04be9e1f4a64c1ed9b3e82500ce9fee2ea2337","humblec","2019-06-04 06:00:00","true","Merge pull request #397 from humblec/kube-upgrade

Update minikube to 1.14 and also update container images to latest",77,17,0,1,"2018-01-08 15:47:21","511.84"
"ceph/ceph-csi","37eb94e929b87eb556287fa6c4f765b2eb914693","Madhu-1","2020-06-16 13:40:43","false","e2e: increase e2e timeout

in Travis CI the e2e tests are timing
out, 30 minutes seems less now for E2E
testing, increasing the timeout for 40
minutes.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",117,29,0,1,"2018-01-08 15:47:21","888.41"
"ceph/ceph-csi","60a394b3970441bed2e55b93b2f0d647d2bc2cfd","Madhu-1","2020-04-09 04:07:07","false","Fix helm clean in functional test

there was an issue in helm cleanup
script in functional tests. This Fixes
the same.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",107,27,0,1,"2018-01-08 15:47:21","821.01"
"ceph/ceph-csi","47fb5f2299edbd2c4f0152a618f7cfba880fb555","Madhu-1","2020-06-09 09:21:03","false","e2e: update E2E testing for snapshot

with new implemntation when user creates a snapshot
in backend we are creating rbd image, we need to
validate the total images count in backend when
creating snapshots and clones.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",115,29,0,1,"2018-01-08 15:47:21","881.23"
"ceph/ceph-csi","3e9172ab31e2276888bdab68ba02de9d3f7392e2","Madhu-1","2021-06-29 05:43:53","false","e2e: check isRetryableAPIError during polling

check isRetryableAPIError error when the
function is polling for the resouce.

updates: #1969

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",116,42,0,1,"2018-01-08 15:47:21","1266.33"
"ceph/ceph-csi","1bc39ab3b7ad24501208a6873d53e0dbdb97c4b8","Madhu-1","2019-04-04 08:19:57","true","Merge pull request #300 from wilmardo/fixes-272

Replaces the references to Kubernetes Authors in the copyright",48,15,0,1,"2018-01-08 15:47:21","451.94"
"ceph/ceph-csi","0838845c6a36e6bf5868c276a55fbbbcbd2835ba","Madhu-1","2021-10-26 05:43:46","false","cleanup: remove FIXME from ResyncVolume

as the complexity of ResyncVolume is
reduced removing the FIXME which is not valid
anymore.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",53,45,0,1,"2018-01-08 15:47:21","1383.33"
"ceph/ceph-csi","9ec44792349c1b7770f846d7b1c5bbcf87b414c3","Madhu-1","2020-05-05 10:26:34","false","DOC: Added document for DOC and commit message

Added document on the standard user need to follow
when writting the commit message and to include
sign-off in commit message.

source: https://probot.github.io/apps/dco/

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",109,28,0,1,"2018-01-08 15:47:21","848.28"
"ceph/ceph-csi","c7ba5a6f8b2f6e3c788f64275643ee132d799160","rootfs","2018-02-15 21:06:12","false","enable sudo in travis

Signed-off-by: Huamin Chen <hchen@redhat.com>",1,1,0,0,"2018-01-08 15:47:21","37.22"
"ceph/ceph-csi","4e8033b7625cc0899fc9bed81cebd35bd6869ac4","Rakshith-R","2022-03-17 05:54:09","false","ci: modify retest action to comment `@Mergifyio refresh`

When a test fails, mergifyio kicks that pr out of queue.
Retest action will now comment `@Mergifyio refresh` to
add the pr back into queue, if any test has been restarted.
This makes sure mergifyio rebases the pr automatically
according to the queue.

Signed-off-by: Rakshith R <rar@redhat.com>",43,50,1,1,"2018-01-08 15:47:21","1529.59"
"ceph/ceph-csi","b960e3633a67625b0b08dcb2bb7043fb9a75fc18","Rakshith-R","2021-07-16 09:44:52","false","rbd: extract volumeNamePrefix in RegenerateJournal()

Signed-off-by: Rakshith R <rar@redhat.com>",123,42,0,1,"2018-01-08 15:47:21","1283.5"
"ceph/ceph-csi","3a445cfc36ca9c962b629f5713368e5373ba86ac","Madhu-1","2022-01-24 05:37:46","false","deploy: update resizer to 1.4.0

updating external resizer image version
from 1.3.0 to latest available release i.e
1.4.0

1.4.0 changelog link
https://github.com/kubernetes-csi/
external-resizer/blob/master/CHANGELOG/CHANGELOG-1.4.md

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",37,49,1,1,"2018-01-08 15:47:21","1476.58"
"ceph/ceph-csi","b25923166b3ffffcd2527ca9aa8acb58c12ce315","Madhu-1","2020-10-19 09:27:55","false","ci: remove extra travis CI rule

Travis CI rule is added twice in the mergify,
removed the same.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",76,33,0,1,"2018-01-08 15:47:21","1011.24"
"ceph/ceph-csi","ae4d26983613f187b514dc083665ad3f6447931c","windayski","2020-03-24 09:53:51","false","fix typos",114,26,0,0,"2018-01-08 15:47:21","806.25"
"ceph/ceph-csi","1ec2bc47e3f72f1dd0fc88910e65514b579b4b7e","Madhu-1","2020-01-20 07:11:21","false","Add E2E for rbd static PVC

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",108,24,0,1,"2018-01-08 15:47:21","742.14"
"ceph/ceph-csi","656a1ce9022cb32ac16e4088b9e8a995bc59a632","mcronce","2018-12-10 14:24:04","false",".travis.yml:  Also build csi-v1.0 branch",16,11,0,0,"2018-01-08 15:47:21","331.94"
"ceph/ceph-csi","397825c665dca06cf56aadd7fcebe2af6fca9d22","nixpanic","2020-01-07 13:38:45","false","util: add ConnPool for connection re-use

By using the ConnPool it is not needed to re-connect every time to the
Ceph cluster when (rbd) operations are executed through the go-ceph/rbd
API.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",104,24,0,1,"2018-01-08 15:47:21","725.16"
"ceph/ceph-csi","5596cce8d81bdf7e98933a3e646712a03c9821af","Madhu-1","2020-01-17 08:22:28","false","update Metrics supported version in Readme

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",108,24,0,1,"2018-01-08 15:47:21","739.19"
"ceph/ceph-csi","374e47046ff5a8fc70efd135e04e185c4fe6f9f0","Madhu-1","2019-12-18 10:32:35","false","Move resize E2E to new resize.go file

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",102,23,0,1,"2018-01-08 15:47:21","705.03"
"ceph/ceph-csi","9e0cd4805cf7bcac9b0df2c70a4b69eea65ea9ef","Madhu-1","2019-12-11 06:38:07","false","Update readme to add new ceph-csi releases

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",100,23,0,1,"2018-01-08 15:47:21","697.87"
"ceph/ceph-csi","d5904343745a4bdffacf255b4f29dda81a6ae706","Madhu-1","2019-11-20 11:49:43","false","Delete provisioner deployment deployed by rook

If kube version is == 1.13.x cephfs
and rbd provisioner are deployed as statefulset
and if kube version is > 1.13.x cephfs and
rbd provisioner are deployed as deployment

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",94,22,0,1,"2018-01-08 15:47:21","677.08"
"ceph/ceph-csi","928794899126d22cde4a539380f7170e969ee3bf","Madhu-1","2019-09-25 12:58:14","false","update registration directory name

updated cephfs registration directory
name to match with rbd implementaion

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",86,20,0,1,"2018-01-08 15:47:21","622.13"
"ceph/ceph-csi","18151e9ca8d288fcf80c5ee91a22b683c5178c41","Madhu-1","2019-09-18 11:36:36","false","use rook v1.1.0 in E2E testing

rook master is not good enough to
depend on for E2E testing, swithing to v1.1.0
for E2E

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",86,20,0,1,"2018-01-08 15:47:21","615.08"
"ceph/ceph-csi","ae67534a448161ed0128e0212788d268291abbc8","Madhu-1","2019-08-30 05:06:36","false","Add wait logic to check fsid from toolbox
Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",87,20,0,1,"2018-01-08 15:47:21","596.81"
"ceph/ceph-csi","2b1355061ecf7a5d7a76f49ab3de95465647f8c9","Madhu-1","2019-08-14 04:56:50","false","rename rbd.go to driver.go

to keep code struct similar with cephfs
renamed rbd.go to driver.go

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",79,19,0,1,"2018-01-08 15:47:21","580.8"
"ceph/ceph-csi","6716a19c15fd3f31c3d28a60c9c2c3a700224c05","Madhu-1","2019-06-03 10:06:15","false","Add readme to deploy kubernetes and
to run e2e tests.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",77,17,0,1,"2018-01-08 15:47:21","511.01"
"ceph/ceph-csi","0f1bee84ff7b91aea5f5234a21764bf26bde830d","humblec","2019-07-16 13:32:46","false","Add slack invite to the README

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",81,18,0,1,"2018-01-08 15:47:21","553.16"
"ceph/ceph-csi","94f7ac3d4e2d82c220385f3eb0fc0fc6469b27e9","Madhu-1","2019-03-27 08:46:48","false","update cephfs helm template to deploy attacher sidecar container in provisioner.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",45,15,0,1,"2018-01-08 15:47:21","443.96"
"ceph/ceph-csi","ac9b656d8117b9f08ae8114a5b4c5bee2b7beb4a","leseb","2019-04-04 12:44:05","true","Merge pull request #306 from Madhu-1/update-rep

add go-report card and travis status",50,15,0,0,"2018-01-08 15:47:21","452.12"
"ceph/ceph-csi","6e7373cd38257d6d002ba29b27e9d6206367599d","leseb","2019-01-31 17:03:31","false","add mergify as a merge engine

From now on, each PR will be merged automatically if:

* there is no DNM label on the PR AND
* the PR has at least one approuval AND
* the travis CI successfully passed

Closes: https://github.com/ceph/ceph-csi/issues/154
Signed-off-by: Sébastien Han <seb@redhat.com>",21,13,0,0,"2018-01-08 15:47:21","388.3"
"ceph/ceph-csi","ff7d649c9dc9667baf2f1d27f358193a43cee162","rootfs","2019-03-22 12:42:26","true","Merge pull request #276 from Madhu-1/fix-mergify

Fix yaml lint error in mergify",40,14,0,0,"2018-01-08 15:47:21","439.12"
"ceph/ceph-csi","227dec63e0edcf43c99585dd68840748aa607f11","Madhu-1","2019-01-15 18:26:50","false","Fix golint issues",17,12,0,1,"2018-01-08 15:47:21","372.36"
"ceph/ceph-csi","6ddf98addf1ce54c69719187a7edcf7fbdd8586c","gman0","2018-08-14 14:48:30","false","cephfs: cache available volume mounters",7,7,0,0,"2018-01-08 15:47:21","215.96"
"ceph/ceph-csi","57a4715e95d998399c60235344a8962ea7023d78","rootfs","2018-01-18 19:13:08","false","rbd plugin refactoring: remove k8s clientSet

Signed-off-by: Huamin Chen <hchen@redhat.com>",0,0,0,0,"2018-01-08 15:47:21","10.14"
"ceph/ceph-csi","64732755d83edc0675bb689f8cb52f92089165ea","rootfs","2018-01-10 18:22:32","false","update readme

Signed-off-by: Huamin Chen <hchen@redhat.com>",0,0,0,0,"2018-01-08 15:47:21","2.11"
"ceph/ceph-csi","84adf568a8967ddd2c59253645b4bdb1ee5610ba","rootfs","2018-01-18 20:12:10","false","add examples

Signed-off-by: Huamin Chen <hchen@redhat.com>",0,0,0,0,"2018-01-08 15:47:21","10.18"
"ceph/ceph-csi","887fdb09edb2e5c47593766b8916d8429f45836e","rootfs","2018-01-10 16:12:23","true","Merge pull request #3 from rootfs/license

add Apache License",0,0,0,0,"2018-01-08 15:47:21","2.02"
"ceph/ceph-csi","6fd0c6aac9e6375038772ef1c624f00a3190216f","xiexingguo","2018-01-10 01:13:35","false","README.md: s/Interrface/Interface/

Signed-off-by: xie xingguo <xie.xingguo@zte.com.cn>",0,0,0,0,"2018-01-08 15:47:21","1.39"
"ceph/ceph-csi","268846cf47f4dc446b039a9569e48c3a40a90b58","rootfs","2018-01-08 15:47:21","true","Create README.md",0,0,0,0,"2018-01-08 15:47:21","0"
"ceph/ceph-csi","af1f50ba0420f72b9aa2cc775e8c07018ec49dee","rtsp","2021-07-30 17:15:34","false","deploy: rbd kubernetes manifests

add ability to deploy ceph-csi-rbd on non-default namespace

Signed-off-by: rtsp <git@rtsp.us>",119,43,0,0,"2018-01-08 15:47:21","1297.81"
"ceph/ceph-csi","79e7c6a3e20493cd33db82a2dba6250a8131f495","satoru-takeuchi","2020-10-23 01:53:34","false","doc: remove the description of provisioner statefulset

Provisioners don't use StatefulSet anymore.

Signed-off-by: Satoru Takeuchi <satoru.takeuchi@gmail.com>",74,33,0,0,"2018-01-08 15:47:21","1014.92"
"ceph/ceph-csi","374176c6ce0b8bfeaba1ee25a1841099f5201072","gman0","2018-04-13 12:21:15","false","cephfs/volumeoptions: added fields; validate values

added Pool and ProvisionVolume fields
Mounter is now optional",2,3,0,0,"2018-01-08 15:47:21","94.86"
"ceph/ceph-csi","b1a45909673faea2412ad0618b084555daca1dfe","nixpanic","2023-06-01 17:01:19","false","rebase: update sigs.k8s.io/controller-runtime to current version

There is no release for sigs.k8s.io/controller-runtime that supports
Kubernetes v1.27. The main branch has all the required modifications, so
we can use that for the time being.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",32,65,1,1,"2018-01-08 15:47:21","1970.3"
"ceph/ceph-csi","c2b69d30e0912af305f960e8e925e117fc96d063","rootfs","2018-09-11 11:59:02","true","Merge pull request #74 from mkimuram/pluginwatcher

Add configurations to handle kubelet-plugin-watcher to sample yaml files",9,8,0,0,"2018-01-08 15:47:21","242.84"
"ceph/ceph-csi","7823b360b8fc23731af078aba01b0062e6843223","humblec","2021-06-23 07:35:24","false","e2e: make use of snapshot v1 api in cephfs_helper.go

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",118,41,0,1,"2018-01-08 15:47:21","1260.41"
"ceph/ceph-csi","341a29352647f561d519d46f12c889b38347f10a","rootfs","2018-07-19 18:08:42","true","Merge pull request #50 from ceph/m-fix

consolidate container deploy",6,6,0,0,"2018-01-08 15:47:21","191.1"
"ceph/ceph-csi","c968380134dfe27a7fee4503734694e4ebfb8199","humblec","2020-08-03 18:32:34","false","cephfs: add snapshotlock and operationlock to controllerserver

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","936.61"
"ceph/ceph-csi","299979fc14c9c8099d1e01316e0b16e2b6093c02","yati1998","2021-07-14 12:50:47","false","ci: add unit test for toError()

This commit adds unit test for the
func converting cephFSCloneState to error.

Fixes: #2259

Signed-off-by: Yati Padia <ypadia@redhat.com>",122,42,0,0,"2018-01-08 15:47:21","1281.63"
"ceph/ceph-csi","ffe2816cb5751b713729fd3e0d0aadc58458e1a2","phlogistonjohn","2019-03-20 19:14:20","false","cmd: create a unified cephcsi binary

Create a single binary that can start ceph-csi in either rbd
or cephfs mode.

Signed-off-by: John Mulligan <jmulligan@redhat.com>",38,14,0,0,"2018-01-08 15:47:21","437.39"
"ceph/ceph-csi","96ba1d4799baa32a44316291f8005d77309a05cd","nixpanic","2021-09-02 06:27:59","false","ci: prevent mergify conflict message for dependabot PRs

There is no use in having Mergify posting messages to Dependabot and
asking for resolving of merge conflicts. Dependabot will try to do that
automatically, and posts a message when some other action is needed.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",109,44,0,1,"2018-01-08 15:47:21","1330.36"
"ceph/ceph-csi","93e43d1a0f164e8157bba27a59eb0dbe23eb9cfb","humblec","2021-12-20 12:19:02","false","rebase: IBM key protect integration module dependency update

This commit adds the Key protect client SDK for the Key Protect
KMS integration to the Ceph CSI driver.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",55,47,1,1,"2018-01-08 15:47:21","1437.61"
"ceph/ceph-csi","58bf45a13e06a5876f577f7a73a292bee886e602","humblec","2020-06-17 09:37:06","false","rebase: Make use of latest go ceph library

The go-ceph version 0.4.0 is available now which got some important
library changes required for ceph csi project.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",117,29,0,1,"2018-01-08 15:47:21","889.24"
"ceph/ceph-csi","f0b3cee94a556f788cfdb66da9e6fffde4da6ac7","Madhu-1","2020-05-05 03:53:24","false","e2e: define replicapool as constant

the static check is failing as the replicapool
is used in 3 or more places, we need to define
a variable and use it.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",110,28,0,1,"2018-01-08 15:47:21","848"
"ceph/ceph-csi","6508726276748c5618ee1972bf14f018135be39c","Madhu-1","2021-04-22 05:44:13","false","build: remove helm init from deploy.sh

from helm v3.x version there is no helm init
command. Removing the helm init which was causing
helm chart pushing issue in release and devel
branch.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",86,39,0,1,"2018-01-08 15:47:21","1199.33"
"ceph/ceph-csi","3b608f130aa0ddcb70b08812a54ec19f3ecaca70","Madhu-1","2020-04-23 08:53:11","false","Add grpc 1.27 version require section in go.mod to avoid CI issue

This PR addes GRPC 1.27 to required section in go.mod
file. this is overridden by 1.26 in replace section

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",102,27,0,1,"2018-01-08 15:47:21","835.21"
"ceph/ceph-csi","a7c261a3943e520f6771d079b780308eb833de84","nixpanic","2021-04-01 08:27:21","false","logging: correct formatting when reporting error in createVolumeFromSnapshot()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",90,39,0,1,"2018-01-08 15:47:21","1179.44"
"ceph/ceph-csi","70c709155cbbc3856b90df564396bbdb3e31a609","Madhu-1","2020-01-17 11:03:55","false","Add 13.0.0 Mimic supported version to readme

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",108,24,0,1,"2018-01-08 15:47:21","739.3"
"ceph/ceph-csi","70d49b4e4757014f0aa61844d47c77a44db4d382","Madhu-1","2019-09-20 10:38:40","false","tempate changes for containerized flag removal

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",86,20,0,1,"2018-01-08 15:47:21","617.04"
"ceph/ceph-csi","f2e0fa28fb1a05f4091c666c7648c69b5c1037e2","losil","2022-04-12 05:45:44","false","deploy: allowPrivilegeEscalation: true in containerSecurityContext

When running the kubernetes cluster with one single privileged
PodSecurityPolicy which is allowing everything the nodeplugin
daemonset can fail to start. To be precise the problem is the
defaultAllowPrivilegeEscalation: false configuration in the PSP.
 Containers of the nodeplugin daemonset won't start when they
have privileged: true but no allowPrivilegeEscalation in their
container securityContext.

Kubernetes will not schedule if this mismatch exists cannot set
allowPrivilegeEscalation to false and privileged to true:

Signed-off-by: Silvan Loser <silvan.loser@hotmail.ch>
Signed-off-by: Silvan Loser <33911078+losil@users.noreply.github.com>",44,51,1,0,"2018-01-08 15:47:21","1554.58"
"ceph/ceph-csi","7b5c78ec7c36b98433d19956efba2bf061dc3428","Madhu-1","2021-06-01 11:33:29","false","rbd: fail fast in create volume for missmatch encryption

CreateVolume will fail in below cases

* If the snapshot is encrypted and requested volume
is not encrypted
* If the snapshot is not encrypted and requested
volume is encrypted

* If the parent volume is encrypted and requested volume
is not encrypted
* If the parent volume is not encrypted and requested
volume is encrypted

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",101,41,0,1,"2018-01-08 15:47:21","1239.57"
"ceph/ceph-csi","c4f30c23c1f4b6dc908ae230d87f6a35bc9f2d88","Madhu-1","2020-08-19 10:38:51","false","rbd: replace klog with util logger in clone.go

replace klog with util logger in clone.go

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",121,31,0,1,"2018-01-08 15:47:21","951.29"
"ceph/ceph-csi","860b65c446f2b9c1ddc221c6f378c1d2f71fcbba","Madhu-1","2020-08-17 08:07:14","false","cephfs: allow readonly only for volume with contentsource

It doesnot make sense to allow the creation of empty
volumes with readonly access, this commit allows the
creation of volume which is having readonly capabilities
only if the content source is set for the volume.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",120,31,0,1,"2018-01-08 15:47:21","949.18"
"ceph/ceph-csi","1b895237479a7e0e7680ef17676f5484d0732b5e","rootfs","2018-02-15 19:41:19","false","update image repo

Signed-off-by: Huamin Chen <hchen@redhat.com>",1,1,0,0,"2018-01-08 15:47:21","37.16"
"ceph/ceph-csi","17b0091cba4c286cfc49fca1af21bd3bf682bfcf","humblec","2021-06-11 05:36:59","false","cleanup: fix codespell error in internal/utils package

Codespell checker report below error:
```
Resulting CLI options  --check-filenames --check-hidden --skip .git,./vendor --ignore-words-list ExtraVersion,extraversion,ba
1
Error: ./internal/util/aws_metadata.go:96: Kubenetes ==> Kubernetes
```
This commit address the same.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",108,41,0,1,"2018-01-08 15:47:21","1248.33"
"ceph/ceph-csi","5631b83dd09cdddc29a12a20a0445fe9fad17c06","idryomov","2020-09-22 08:06:52","false","rbd: rename mapOptions and options argument slices

With the new support for passing --options, referring to ExecCommand()
argument slices as mapOptions and options is confusing.

Signed-off-by: Ilya Dryomov <idryomov@gmail.com>",133,32,0,0,"2018-01-08 15:47:21","984.18"
"ceph/ceph-csi","75088aa36d678c8277fdddfa4f17ed4d097629da","phlogistonjohn","2020-06-16 13:40:46","false","util: add doc comments for exported functions in errors.go

A number of exported functions in errors.go were missing doc comments.
Add them.

Signed-off-by: John Mulligan <jmulligan@redhat.com>",117,29,0,0,"2018-01-08 15:47:21","888.41"
"ceph/ceph-csi","e395080cdc1af959e52c85ce902ed4c9e3bf5dcb","Madhu-1","2019-09-11 06:04:07","false","Add req-ID to logging

with this log format we can easily identify
the logs per request

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",81,20,0,1,"2018-01-08 15:47:21","607.84"
"ceph/ceph-csi","8caeb409bb1bf8b63117e2e7ee690169b7066a3f","Madhu-1","2021-09-07 06:33:29","false","cephfs: add comment for validateDeleteVolumeRequest

added function comment for the
validateDeleteVolumeRequest function.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",66,44,0,1,"2018-01-08 15:47:21","1335.37"
"ceph/ceph-csi","c417a5d0ba07927d1c98ba6731a87c38e3f4d50d","Madhu-1","2020-11-09 09:07:47","false","rbd: add support for thick provisioning option

Add an option to the StorageClass to support creating fully allocated
(thick provisioned) RBD images

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
Signed-off-by: Niels de Vos <ndevos@redhat.com>",77,34,0,1,"2018-01-08 15:47:21","1031.22"
"ceph/ceph-csi","8844452453fe03e5cc3743871fe8b528a3530610","gman0","2018-04-13 13:53:43","false","cephfs/nodeserver: create a new user if necessary; updated NodeUnpublishVolume",2,3,0,0,"2018-01-08 15:47:21","94.92"
"ceph/ceph-csi","f47839d73ddb2b279e8da0897fc19e3d9b1f9b33","Rakshith-R","2022-08-24 07:06:31","false","rbd: improve kmip verifyResponse() error message

This commit uses %q instead %v in error messages
and adds result reason and message in kmip
verifyresponse().

Signed-off-by: Rakshith R <rar@redhat.com>",42,55,1,1,"2018-01-08 15:47:21","1686.64"
"ceph/ceph-csi","1818529a4cc6f20653ce7de3db3d4644fd0f1896","nixpanic","2022-04-22 09:50:23","false","deploy: allow hostPort 29653 for NFS node-plugin

This should address the following failure when Pod Security Policies are
enabled:

> FailedCreate: Error creating: pods ""csi-nfs-node-"" is forbidden:
> PodSecurityPolicy: unable to admit pod: spec.containers[2].hostPort:
> Invalid value: 29653: Host port 29653 is not allowed to be used.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",42,51,1,1,"2018-01-08 15:47:21","1564.75"
"ceph/ceph-csi","e8652ee366e8fa46c643373c26fb1d9ed07621ef","humblec","2022-04-20 08:00:00","false","helm: update helm version to v3.8.2

This commit update the helm version to latest available
v3.8.2.

Refer# https://github.com/helm/helm/releases/tag/v3.8.2

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",42,51,1,1,"2018-01-08 15:47:21","1562.68"
"ceph/ceph-csi","1c3baa07222f6435f54d1af95b4d469cc6dd3f58","humblec","2022-02-07 13:58:11","false","rbd: add AAD(additionalAuthData) while unwrapping the DEK

As we are using optional additional auth data while wrapping
the DEK, we have to send the same additionally while unwrapping.

Error:
```
 failed to unwrap the DEK: kp.Error: ..(INVALID_FIELD_ERR)',
 reasons='[INVALID_FIELD_ERR: The field `ciphertext` must be: the
 original base64 encoded ciphertext from the wrap operation
```

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",44,49,1,1,"2018-01-08 15:47:21","1490.92"
"ceph/ceph-csi","cc88d2fa09190c8f7598bf73452a806a84537d31","gman0","2018-06-12 15:02:14","false","cephfs: cephconf: include volume UUID in keyrings/secrets",3,5,0,0,"2018-01-08 15:47:21","153.97"
"ceph/ceph-csi","3243afade52cb33c0128d1e0d7021725127b6af5","Yuggupta27","2021-11-25 13:36:02","false","deploy: add support to deploy ec-pool

add support to deploy ec-pool in minikube
script

Signed-off-by: Yug Gupta <yuggupta27@gmail.com>",57,46,0,0,"2018-01-08 15:47:21","1412.66"
"ceph/ceph-csi","7b2aef0d8120033f232e81204616f1d09df708cd","Madhu-1","2022-03-31 13:29:33","false","util: add support for the nsenter

add support to run rbd map and mount -t
commands with the nsenter.

complete design of pod/multus network
is added here https://github.com/rook/rook/
blob/master/design/ceph/multus-network.md#csi-pods

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",49,51,1,1,"2018-01-08 15:47:21","1543.9"
"ceph/ceph-csi","3767375b6a915a6ea758e7ffbe826cec1ae49eb5","Madhu-1","2019-04-03 05:15:15","false","Add csidriver CRD

if attacher is not enabled, we need to
create the csidriver CRD with spec
to make attachRequired as false to
skip volume attach check in kube.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",46,15,0,1,"2018-01-08 15:47:21","450.81"
"ceph/ceph-csi","49c8fe5d5086dddc450242c7d61ff75050a36ace","Madhu-1","2019-01-17 06:24:10","false","Remove conversion which is not required

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",16,12,0,1,"2018-01-08 15:47:21","373.86"
"ceph/ceph-csi","881f59d142d4143ef05ec514bfcac3c8fe12d4e8","Madhu-1","2020-01-23 08:24:46","false","Add _netdev as default mount options in plugin

This values will be added at both nodestage
and nodepublish for rbd, nbd and ceph kernel client.

As cephfs fuse doesnot support this value,
this is added only during the nodepublish.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",108,24,0,1,"2018-01-08 15:47:21","745.19"
"ceph/ceph-csi","f63ccb0cceaf13bcb293e1ae00bc325706e4314f","Madhu-1","2021-02-03 12:42:17","false","rbd: store VaultCAVerify as a string

storing VaultCAVerify as a string.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",83,37,0,1,"2018-01-08 15:47:21","1121.62"
"ceph/ceph-csi","52397b4dc4d6f5b45b7d0351401d445036d3ad01","Madhu-1","2019-03-18 06:50:06","false","rename socket directory to a common name

as the socket directory will be created
inside the container no need to follow
the plugin name in for the directory
creation, this will also reduce the code
changes if we want to change driver name.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",34,14,0,1,"2018-01-08 15:47:21","434.88"
"ceph/ceph-csi","e32b649648e50c426576ee91eb44f44774e96901","Madhu-1","2019-06-14 09:24:43","false","Add external-snapshotter to ceph-csi

Adding extenal-provisoner will help us to
test snapshot functionality

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",76,17,0,1,"2018-01-08 15:47:21","520.98"
"ceph/ceph-csi","367eb9f7485f9d2a305343587844678027aa2d78","Madhu-1","2021-06-17 06:38:21","false","rbd: correct return error for isCompatibleEncryption

isCompatibleEncryption is used to validate the
requested volume and the existing volume and
the destination volume name wont be generated yet
and logging the destination volume prints the empty
image name with pool name.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",110,41,0,1,"2018-01-08 15:47:21","1254.37"
"ceph/ceph-csi","915437b314d87dbe84ea81f6a8222e5e073dfc30","Rakshith-R","2021-03-22 04:31:25","false","e2e: add listPods()

listPods returns slice of pods matching given ListOptions and
namespace.

Signed-off-by: Rakshith R <rar@redhat.com>",87,38,0,1,"2018-01-08 15:47:21","1169.28"
"ceph/ceph-csi","1748629de2f57010de7a3fbe11e430eabc8138ff","gman0","2019-02-09 19:59:01","false","fixes broken migration to klog",25,13,0,0,"2018-01-08 15:47:21","396.42"
"ceph/ceph-csi","1ff1f8be303662968a864540315572df75e1c9fd","sbezverk","2018-03-06 22:33:57","false","code update",2,2,0,0,"2018-01-08 15:47:21","59.28"
"ceph/ceph-csi","36951153718374a5aacc936f64d35f4d728f9086","humblec","2020-06-30 07:25:24","false","ci: update golang-ci to v1.27

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",115,30,0,1,"2018-01-08 15:47:21","902.15"
"ceph/ceph-csi","f141326d51c82a1b469c2abe6350c5c164880de4","humblec","2022-04-27 06:58:19","false","doc: remove the clusterRole sections from the upgrade guide

As we have removed the clusterrole and binding the subjected
documentation also removed.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",38,52,1,1,"2018-01-08 15:47:21","1569.63"
"ceph/ceph-csi","63be1df343c2a8c6389866a3779c2b9df4f108a3","humblec","2022-05-26 05:56:53","false","e2e: remove snapshot beta CRD mention from the doc

The snapshot CRD is no longer Beta and this commit adjust the same.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",36,53,1,1,"2018-01-08 15:47:21","1598.59"
"ceph/ceph-csi","cd96b3359ba7e312a20c2e11efcd279fbcafe0ed","Madhu-1","2020-12-09 07:50:10","false","build: use CSI_IMAGE_VERSION in makefile

updated makefile to use CSI_IMAGE_VERSION
from build.env
Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",73,35,0,1,"2018-01-08 15:47:21","1061.17"
"ceph/ceph-csi","e6098520d16cadc650ce60b9a2f22c5bc8ae0619","Madhu-1","2021-02-03 15:54:24","false","rbd: add configmap get clusterrole for provisioner

as provisioner need to get the configmap from
different namespace to check tenant configuration.
added the clusterrole get access for the same.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",83,37,0,1,"2018-01-08 15:47:21","1121.75"
"ceph/ceph-csi","5f1e2e1b7cfea703f61790b9d34b0daf8e1c41e1","Madhu-1","2019-02-07 10:56:20","false","update make test in Makefile

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",26,13,0,1,"2018-01-08 15:47:21","395.05"
"ceph/ceph-csi","d8ca56fbe9dfe4d4f5fac43d265b9938f1eda04e","Madhu-1","2020-08-19 10:37:21","false","rbd: replace klog with util in controllerserver.go

replace klog with util in controllerserver.go

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",121,31,0,1,"2018-01-08 15:47:21","951.28"
"ceph/ceph-csi","5524b2d5387e3b5026def9b09c33ab98baff320d","Madhu-1","2021-11-19 04:37:57","false","ci: use 1.8.5 vault for e2e

current latest vault release is 1.9.0 but
with the latest image our E2E is broken.
reverting back the vault version to 1.8.5
till we root cause the issue.

Note:- This is to unblock PR merging

updates: #2657

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",56,46,0,1,"2018-01-08 15:47:21","1406.29"
"ceph/ceph-csi","b3b181f2a52c7078f22ff1950cb0583222a44224","Madhu-1","2019-06-18 09:18:28","false","skip pvc raw block test for travis CI

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",79,17,0,1,"2018-01-08 15:47:21","524.98"
"ceph/ceph-csi","33944323719c220130ff3baec5dcbdcdbd87bf8b","Madhu-1","2019-12-18 08:32:53","false","Fix block resize issue in RBD

For the filesystem resize the stagingPath will
be passed to NodeExpandVolume and for the block
resize the targetpath will be passed.
Added code to handle resize for both block and
file system resize

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",102,23,0,1,"2018-01-08 15:47:21","704.95"
"ceph/ceph-csi","cfc070b169561b514dfa02418d6d1039649da37a","Madhu-1","2021-09-02 04:44:54","false","deploy: remove ceph-conf cm in helm installation

removed the ceph-conf configmap as a workaround
to avoid helm installation issue.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",109,44,0,1,"2018-01-08 15:47:21","1330.29"
"ceph/ceph-csi","9a9637094231048f2a506536d3a50264b83047b5","Madhu-1","2020-12-09 06:29:10","false","cephfs: implement purgeVolume with go-ceph

moved frm  ceph fs CLI to go-ceph for
purgeVolume.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",73,35,0,1,"2018-01-08 15:47:21","1061.11"
"ceph/ceph-csi","99b814fe94288b4f3f8f30df77a037f3ac6fb111","Madhu-1","2021-12-10 05:38:10","false","ci: remove kubernetes 1.20 from condition

as we added kubernetes 1.23 for mergify, removing
older version i.e 1.20 as we will run tests
only on latest 3 kubernetes releases.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",49,47,1,1,"2018-01-08 15:47:21","1427.33"
"ceph/ceph-csi","69662e63ed0eaaaef1d135138b997a45cf6d8793","Madhu-1","2019-06-11 12:40:31","false","change permission of targetpath

setting the permission of  targetpath to 777
will allow non-root user to write to pv.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",76,17,0,1,"2018-01-08 15:47:21","518.12"
"ceph/ceph-csi","2055d791651e85306825a844b43eb2cb72bc4345","nixpanic","2020-06-22 15:08:07","false","build: check if installed Golang has a compatible architecture

For building a arm64 container image on amd64, it is needed to configure
the system specifically for that. In order to prevent including a amd64
executable in a arm64 image, a check has been added.

When running an arm64 executable on a amd64 system, an error should
occur when cross architecture containers are not supported. This can be
triggered when running `make image-cephcsi GO_ARCH=arm64` on a amd64
system.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",116,29,0,1,"2018-01-08 15:47:21","894.47"
"ceph/ceph-csi","8fb5739f21b58d0a388c1af60e05d8033cbd26a4","gman0","2022-02-16 14:10:51","false","build: more flexible handling of go build tags; added ceph_preview

ceph_preview tag is needed to make new go-ceph's RADOS read/write ops available

Signed-off-by: Robert Vasek <robert.vasek@cern.ch>",38,49,1,0,"2018-01-08 15:47:21","1498.93"
"ceph/ceph-csi","9ba501617d26e3042a4902662cbc1767ba65c2f1","Madhu-1","2019-02-04 08:47:01","false","update sidecar images to stable version (v1.0.1)

Fixes: #157

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",21,13,0,1,"2018-01-08 15:47:21","391.96"
"ceph/ceph-csi","3b320ef19e54dc89e04b734d4e04acbe802ee51a","Madhu-1","2019-02-18 08:22:52","false","Add support of RBD list volumes

currently all the created volumes are
stored in the metadata store, so we
can use this information to support
list volumes.

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",28,13,0,1,"2018-01-08 15:47:21","404.94"
"ceph/ceph-csi","61a81d35e8529b6e0d40b9b0e590befc300aa714","Madhu-1","2020-07-01 07:05:07","false","rbd: flatten cloned images to freeup snapshot

flatten cloned images to remove the link
with the snapshot as the parent snapshot can
be removed from the trash.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",114,30,0,1,"2018-01-08 15:47:21","904.14"
"ceph/ceph-csi","18d65ba3f5b83a1612477591b94dfee2a5076495","Madhu-1","2020-08-11 11:49:31","false","cephfs: replace Errorf with ErrorLog in createCloneFromSnapshot

replace Errorf with ErrorLog in createCloneFromSnapshot
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.33"
"ceph/ceph-csi","eaadeec2dc7fe305dca61c90b6bf7ea299b98c18","rootfs","2019-01-23 15:25:17","true","Merge pull request #139 from rootfs/node-reg

switch to node registrar",21,12,0,0,"2018-01-08 15:47:21","380.23"
"ceph/ceph-csi","6dc5bf2b2983b247df43876790913efd135aa762","nixpanic","2021-06-11 10:17:51","false","util: split vaultTenantConnection from VaultTokensKMS

This makes the Tenant configuration for Hashicorp Vault KMS connections
more modular. Additional KMS implementations that use Hashicorp Vault
with per-Tenant options can re-use the new vaultTenantConnection.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",108,41,0,1,"2018-01-08 15:47:21","1248.52"
"ceph/ceph-csi","4606b5042fe62ff086b60bc99a73109fafd12249","Madhu-1","2020-04-16 07:08:47","false","vendor: Vendor changes to add external-snapshotter

Few other depedencies got updated which might
be required for snapshot.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",102,27,0,1,"2018-01-08 15:47:21","828.14"
"ceph/ceph-csi","12e8e46bcf904e90de0b55a6b60779d3c08e8653","Madhu-1","2021-12-21 05:03:41","false","revert: remove explicit size setting of cloned volume

The ceph changes  are done on the both server and the
client side this change is not enough for remove
setting the size of cloned volumes.
this caused the regression like #2719 #2720 #2721 #2722.

This reverts commit 3565a342d5ff2006e61ca1641d788547efac4b53.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",56,47,1,1,"2018-01-08 15:47:21","1438.3"
"ceph/ceph-csi","d2bc9743f751d60c24db88a87f288ca48e945308","Madhu-1","2022-04-18 06:32:31","false","cephfs: add netNamespaceFilePath for CephFS

as same host directory is not shared between
the cephfs and the rbd plugin pod. we need
to keep the netNamespaceFilePath separately
for both cephfs and rbd. CephFS plugin will
use this path to execute mount -t commands.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",41,51,1,1,"2018-01-08 15:47:21","1560.61"
"ceph/ceph-csi","bd8cf1d7f03507b67e9ebbefd47e0925517043fd","rootfs","2019-03-07 13:30:55","true","Merge pull request #247 from Madhu-1/raw-block

update readme for raw-block PVC",29,14,0,0,"2018-01-08 15:47:21","425.16"
"ceph/ceph-csi","cf3855514f8e339cf7ca32bd24ccf9f10149b324","rootfs","2019-01-16 12:14:25","true","Merge pull request #127 from humblec/clean

Remove unwanted else block and add comments about some exported funtions and variables",17,12,0,0,"2018-01-08 15:47:21","373.1"
"ceph/ceph-csi","202845681a71e662fbd0d39b945e58e93c87a686","rootfs","2018-02-15 20:37:08","false","fix travis

Signed-off-by: Huamin Chen <hchen@redhat.com>",1,1,0,0,"2018-01-08 15:47:21","37.2"
"ceph/ceph-csi","7b5b9772eee40d54399ffdc5cce3dbe0b25635a0","rootfs","2019-01-15 20:07:15","true","Merge pull request #124 from Madhu-1/fix-eff

Fix golint issues",17,12,0,0,"2018-01-08 15:47:21","372.43"
"ceph/ceph-csi","3109160fa07f01941f689c4279a3aaaf0499d064","Yuggupta27","2020-12-16 05:52:09","false","deploy: Fix snapshot controller deployment

Replace image from canary to the version mentioned
in build.env

Signed-off-by: Yug <yuggupta27@gmail.com>",77,35,0,0,"2018-01-08 15:47:21","1068.09"
"ceph/ceph-csi","b367de1f387d167bc812a6f69f542dd2c1b7ad88","humblec","2019-07-26 07:47:34","true","Merge pull request #500 from humblec/csi-invite

Update invite link to slack channel",77,18,0,1,"2018-01-08 15:47:21","562.92"
"ceph/ceph-csi","46d3afbe121dbdda57f0390541deda32dbc8dd4c","humblec","2019-08-12 09:47:34","true","Merge pull request #541 from Madhu-1/fix-ci

Fix CI failure in ceph-csi",84,19,0,1,"2018-01-08 15:47:21","579"
"ceph/ceph-csi","c12b155940ecf1a16a88d8474321718694c4a6da","nixpanic","2021-08-31 12:38:09","false","rebase: use latest google.golang.org/grpc version

google.golang.org/grpc was listed in go.mod:replace and updating the
dependency was not possible. There should not be a reason to prevent
updating, commit 5aca04d540 added it but without explanation.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",107,44,0,1,"2018-01-08 15:47:21","1328.62"
"ceph/ceph-csi","718e76d290a45d9ddc5e1346facb2a5f1403d7d5","nixpanic","2020-04-21 13:41:17","false","doc: add description for containerized-test to development-guide

Suggested-by: Wilmar den Ouden <info@wilmardenouden.nl>
Signed-off-by: Niels de Vos <ndevos@redhat.com>",101,27,0,1,"2018-01-08 15:47:21","833.41"
"ceph/ceph-csi","2064e674a4912d12d327c6e4818a1357ecfd95ce","ShyamsundarR","2019-03-07 21:03:33","false","Addressed using k8s client APIs to fetch secrets

Based on the review comments addressed the following,
- Moved away from having to update the pod with volumes
when a new Ceph cluster is added for provisioning via the
CSI driver

- The above now used k8s APIs to fetch secrets
  - TBD: Need to add a watch mechanisim such that these
secrets can be cached and updated when changed

- Folded the Cephc configuration and ID/key config map
and secrets into a single secret

- Provided the ability to read the same config via mapped
or created files within the pod

Tests:
- Ran PV creation/deletion/attach/use using new scheme
StorageClass
- Ran PV creation/deletion/attach/use using older scheme
to ensure nothing is broken
- Did not execute snapshot related tests

Signed-off-by: ShyamsundarR <srangana@redhat.com>",29,14,0,0,"2018-01-08 15:47:21","425.47"
"ceph/ceph-csi","e85c0eedc49c52d8a1e7cbde5aa25ff6f993e713","yati1998","2021-07-10 03:59:23","false","ci: set max-complexity of cyclop as 20

This commit sets the value of max-
complexity of cyclop linter as 20

Signed-off-by: Yati Padia <ypadia@redhat.com>",126,42,0,0,"2018-01-08 15:47:21","1277.26"
"ceph/ceph-csi","585c52099cd9a14cab94d46b12683daad61cc9f3","gman0","2018-04-13 14:00:49","false","updated README",2,3,0,0,"2018-01-08 15:47:21","94.93"
"ceph/ceph-csi","3a0d048186c8a9fce33b2a23ad3b81d1ce358339","gman0","2019-02-26 16:57:24","false","cephfs/volumemounter: unmountVolume now waits till the ceph-fuse daemon exits",31,14,0,0,"2018-01-08 15:47:21","413.3"
"ceph/ceph-csi","75d212e0bef881c5caa84666196393a70296c43b","gman0","2019-02-19 14:30:47","true","Merge pull request #212 from rollandf/doc

Remove requirement for ceph config and keyring  files",28,13,0,0,"2018-01-08 15:47:21","406.2"
"ceph/ceph-csi","aa4130865c5967e0081afbb4bfa4f5a466601a3f","gman0","2018-03-20 15:14:14","false","cephfs/nodeserver: read credentials from Secret",2,2,0,0,"2018-01-08 15:47:21","71.98"
"ceph/ceph-csi","7d105143fc991fe255b4b0ea812f71411e796b65","Rakshith-R","2021-04-04 06:48:03","false","cleanup: refactor deeply nested if statement in cephcsi.go

Refactored deeply nested if statement in cephcsi.go to
reduce cognitive complexity.

Signed-off-by: Rakshith R <rar@redhat.com>",90,39,0,1,"2018-01-08 15:47:21","1182.38"
"ceph/ceph-csi","0b261e2819c056653c320d13bd4b823686a159b2","Madhu-1","2019-09-27 08:31:52","false","if there are changes requested dont merge PR

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",85,20,0,1,"2018-01-08 15:47:21","623.95"
"ceph/ceph-csi","b4ff3884f13a0251ed15e08951f4243ceb6770ef","Madhu-1","2022-05-09 05:08:02","false","ci: remove set-safe-directory from commitlint

Removed set-safe-directory option from the
commitlint.yaml as its not working as expected.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",40,52,1,1,"2018-01-08 15:47:21","1581.56"
"ceph/ceph-csi","8cae0b6c41cc4510c1c6f6ce595add51b151786f","Madhu-1","2019-01-16 12:44:58","false","use dep ensure -vendor-only

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",17,12,0,1,"2018-01-08 15:47:21","373.12"
"ceph/ceph-csi","ee9a200fcc360de02924e8b26be743303a477bf7","Madhu-1","2021-02-11 09:59:47","false","rbd: implement mirroring helpers with go-ceph

mirror.go exposes the helper functions to
perform the mirroring operations.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",83,37,0,1,"2018-01-08 15:47:21","1128.51"
"ceph/ceph-csi","8d7b6ee59f8b2ac6bfb3e096fc4d10732aeeb3ac","Madhu-1","2022-08-08 11:53:35","false","rbd: consider mirror deamon state for ResyncVolume

During ResyncVolume we check if the image
is in an error state, and we resync.
After resync, the image will move to
either the `Error` or the `Resyncing` state.
And if the image is in the above two
conditions, we will return a successful
response and Ready=false so that the
consumer can wait until the volume is
ready to use. If the image is in any
other state we return an error message
to indicate the syncing is not going on.
The whole resync and image state change
depends on the rbd mirror daemon. If the
mirror daemon is not running, the image
can be in Resyncing or Unknown state.
The Ramen marks the volume replication as
secondary, and once the resync starts, it
will delete the volume replication CR as a
cleanup process.

As we dont have a check for the rbd mirror
daemon, we are returning a resync success
response and Ready=false. Due to this false
response Ramen is assuming the resync started
and deleted the volume replication CR, and
because of this, the cluster goes into a bad
state and needs manual intervention.

fixes #3289

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",38,55,1,1,"2018-01-08 15:47:21","1671.84"
"ceph/ceph-csi","4937ee97e9352fb2f81801e790a0f010d31bca3e","Madhu-1","2020-07-27 07:31:13","false","doc: correct upgrade doc

fixed the missing `v` version in upgrade
doc.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",113,31,0,1,"2018-01-08 15:47:21","929.16"
"ceph/ceph-csi","d6f1c938d8e2895c0e82fb42012406f5051b6ee1","Madhu-1","2019-09-04 10:04:30","false","comment yum update from dockerfile

currently we are facing issue in  building
docker image,commenting yum update it fix it

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",86,20,0,1,"2018-01-08 15:47:21","602.01"
"ceph/ceph-csi","0f836c62fadae5b9426b88d209ffbc814d3b9698","Madhu-1","2019-01-16 12:41:54","false","Vendor cleanup

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",17,12,0,1,"2018-01-08 15:47:21","373.12"
"ceph/ceph-csi","eee49a6e0a819539699c81e05875a31e7800ddf0","Madhu-1","2020-11-24 11:41:28","false","ci: add codespell for spell check

adding a github action to check the spelling
mistakes in the code.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",81,34,0,1,"2018-01-08 15:47:21","1046.33"
"ceph/ceph-csi","ad7e5ca301d70ae9b7eb1373a543073edda4ad41","Madhu-1","2019-12-18 10:35:48","false","Add E2E for block PVC resize

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",102,23,0,1,"2018-01-08 15:47:21","705.03"
"ceph/ceph-csi","a4ea40cd156975748edfe25e7e350174085288fe","Madhu-1","2019-04-04 06:49:06","false","add go-report card and travis status

Add link to go-report card and
travis build status in readme file.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",48,15,0,1,"2018-01-08 15:47:21","451.88"
"ceph/ceph-csi","58765e27a0f1c92062e5468cf97cbdb2c444ec9e","Madhu-1","2020-04-06 05:27:12","false","Resizer: Update resizer image version

Recently resizer 0.5.0 has been released.
This PR updated the resizer container from
v0.4.0 to v0.5.0

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",104,27,0,1,"2018-01-08 15:47:21","819.07"
"ceph/ceph-csi","3e2d2787b69e5863d8de83d34c0d9b000bce0078","humblec","2019-06-06 15:06:41","false","Add staging target path validation to nodeserver

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",80,17,0,1,"2018-01-08 15:47:21","514.22"
"ceph/ceph-csi","91ade42a32350b0aa903d17d5313e1164d803a74","nixpanic","2020-06-25 08:35:19","false","cleanup: use errors.As() in journal.Connection methods

See-also: https://github.com/golang/go/wiki/ErrorValueFAQ#how-should-i-change-my-error-handling-code-to-work-with-the-new-features
Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,29,0,1,"2018-01-08 15:47:21","897.2"
"ceph/ceph-csi","45b40661e2fded55f5ee1ff35ac47d72408d31b4","yati1998","2021-07-10 03:57:00","false","ci: disable gomoddirectives linter

This commit disables gomoddirectives
linter as it bans use of replace directive.

Update: #1586

Signed-off-by: Yati Padia <ypadia@redhat.com>",126,42,0,0,"2018-01-08 15:47:21","1277.26"
"ceph/ceph-csi","df2d9548ae7a1ac2756c2dff63e4483229774645","humblec","2021-09-01 06:30:12","false","cephfs: no need to check for zero volume size

At present there is a 'todo' to check for zero volume size
in the createVolume request which in unwanted, ie the pvc
creation with size 0 fail from the kubernetes api validation itself:

For ex:

```
..spec.resources[storage]: Invalid value: ""0"": must be greater than zero```
```
so we dont need any extra check in the controller server

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",109,44,0,1,"2018-01-08 15:47:21","1329.36"
"ceph/ceph-csi","5c6d20055b1e25668b7c08ca11bf835f9f4cccc1","rootfs","2019-03-22 12:42:01","true","Merge pull request #265 from Madhu-1/fix-plugin-dir

rename socket directory to a common name",40,14,0,0,"2018-01-08 15:47:21","439.12"
"ceph/ceph-csi","022a5a4db0c8b7100e07148f45e0a28b1b9b8ccc","rootfs","2018-02-06 18:30:05","false","update readme and deployment

Signed-off-by: Huamin Chen <hchen@redhat.com>",1,1,0,0,"2018-01-08 15:47:21","29.11"
"ceph/ceph-csi","e2910f1c186c9198411cc516659a4ba31d6b50e4","gman0","2018-07-18 14:48:43","false","deployment update for 0.3.0",3,6,0,0,"2018-01-08 15:47:21","189.96"
"ceph/ceph-csi","9c3389d78450820afe8a74ef7704a76708c660c4","gman0","2018-08-28 08:19:28","false","cephfs/util: log execCommandJson; cache mount.New() instance",7,8,0,0,"2018-01-08 15:47:21","229.69"
"ceph/ceph-csi","8732bec369d85544e506e2464072378873d5cbb0","Madhu-1","2021-06-28 11:51:36","false","rebase: add go-ceph rbd admin package to vendor

added go-ceph rbd admin package to vendor. keeping
this as a separate commit which helps in review.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",116,42,0,1,"2018-01-08 15:47:21","1265.59"
"ceph/ceph-csi","2363d2a789dbb24a9342b2178e50dbab06a5fc7f","nixpanic","2021-01-06 09:58:54","false","e2e: add validation for thick-provisioning

Signed-off-by: Niels de Vos <ndevos@redhat.com>",82,36,0,1,"2018-01-08 15:47:21","1089.26"
"ceph/ceph-csi","29bdeb22616a5d50fd07f4fa77854d0f65291507","gman0","2018-12-01 09:39:09","false","cephfs: don't set quotas for zero-sized volumes",16,11,0,0,"2018-01-08 15:47:21","323.74"
"ceph/ceph-csi","5913ed92fe8d115b223c60f091085e3278ff2aeb","nixpanic","2023-06-02 08:58:09","false","ci: update to golangci-lint v1.53.0

Version 1.47.3 of golangci-lint does not support Go 1.20, so we'll need
to use a newer version.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",31,65,1,1,"2018-01-08 15:47:21","1970.97"
"ceph/ceph-csi","43fe5c34cd12546e99657b28e73930d2ba12682a","nixpanic","2022-05-02 12:32:04","false","doc: add Mergify badge to README

We heavily use the service for Open Source communities from Mergify. It
is probably nice to promote them a little in our README.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",38,52,1,1,"2018-01-08 15:47:21","1575.86"
"ceph/ceph-csi","cfea8d756231e7eda5150e33a7f5711cfcf3aafb","irq0","2022-08-12 14:30:35","false","fscrypt: fscrypt integration

Integrate google/fscrypt into Ceph CSI KMS and encryption setup. Adds
dependencies to google/fscrypt and pkg/xattr. Be as generic as
possible to support integration with both RBD and Ceph FS.

Add the following public functions:

InitializeNode: per-node initialization steps. Must be called
before Unlock at least once.

Unlock: All steps necessary to unlock an encrypted directory including
setting it up initially.

IsDirectoryUnlocked: Test if directory is really encrypted

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",41,55,1,0,"2018-01-08 15:47:21","1674.95"
"ceph/ceph-csi","0be24a14c2a42867bf644d99d8acea2bddb0e813","kfox1111","2019-02-06 18:45:33","false","Fix the symlink and add more debuggin

This points the symlink at the right chart.
Also enables more logging in the job.

Signed-off-by: Kevin Fox <Kevin.Fox@pnnl.gov>",26,13,0,0,"2018-01-08 15:47:21","394.37"
"ceph/ceph-csi","f371aa267746fefc28cbfa881cd043049a0f5b06","nixpanic","2023-08-07 11:30:36","false","ci: use `podman` for simple GitHub workflows

`podman` is installed by default on the Ubuntu runners. Podman is
recommended for developers and contributors, as there are no elevated
privileges required to run it. Docker requires extra permissions to
build and or run container images, and contributors to Ceph-CSI should
not need to spend time working with that (several developers run the
`docker` command with `sudo`, which is discouraged).

Only the multi-arch Workflows require Docker, for the time being.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",25,67,1,1,"2018-01-08 15:47:21","2036.07"
"ceph/ceph-csi","dbdb9086d8f81d0d30e55d03beb57f0f96433941","riya-singhal31","2023-06-20 09:44:39","false","rbd: migration of replication controller server

this commit migrates the replication controller server
from internal/rbd and adds it to csi-addons.

Signed-off-by: riya-singhal31 <rsinghal@redhat.com>",32,65,1,0,"2018-01-08 15:47:21","1988"
"ceph/ceph-csi","e92edd09ef40c7ff2bdbce4cdd46a661ff7c628a","riya-singhal31","2023-05-25 10:36:01","false","rbd: add e2e for encryption as false

Signed-off-by: riya-singhal31 <rsinghal@redhat.com>",31,64,1,0,"2018-01-08 15:47:21","1963.03"
"ceph/ceph-csi","014f81495bc3a6fdfee8e2e527b412b8237d9f8c","riya-singhal31","2023-04-12 08:23:43","false","ci: update mergify rules for kubernetes 1.27

Signed-off-by: riya-singhal31 <rsinghal@redhat.com>",35,63,1,0,"2018-01-08 15:47:21","1919.94"
"ceph/ceph-csi","3a200b6976de169b8a1c7e529bd15675be517d2c","nixpanic","2022-07-15 12:13:29","false","rbd: use IsLikelyNotMountPoint() to prevent systemd log messages

Signed-off-by: Niels de Vos <ndevos@redhat.com>",40,54,1,1,"2018-01-08 15:47:21","1647.85"
"ceph/ceph-csi","e393e298d03f2c27c1476d243a83e4cbc3a9ec0b","nixpanic","2020-06-25 11:33:07","false","doc: do not mention ""github.com/pkg/errors""

Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,29,0,1,"2018-01-08 15:47:21","897.32"
"ceph/ceph-csi","e75d308b9cfc86e6e3ace54e2a6ccc7ad901f41c","nixpanic","2021-07-22 07:48:38","false","e2e: isRetryableAPIError() should match any etcdserver timeout

framework.RunKubectl() returns an error that does not end with
""etcdserver: request timed out"", but contains the text somewhere in the
middle:

    error running /usr/bin/kubectl --server=https://192.168.39.57:8443 --kubeconfig=/root/.kube/config --namespace=cephcsi-e2e-a44ec4b4 create -f -:
    Command stdout:

    stderr:
    Error from server: error when creating ""STDIN"": etcdserver: request timed out

    error:
    exit status 1

isRetryableAPIError() should  return `true` for this case as well, so
instead of using HasSuffix(), we'll use Contains().

Signed-off-by: Niels de Vos <ndevos@redhat.com>",119,42,0,1,"2018-01-08 15:47:21","1289.42"
"ceph/ceph-csi","c2493686b77861dbb501a5ee8701bfa2504e9369","idryomov","2020-08-21 17:00:06","false","rbd: introduce appendDeviceTypeAndOptions()

Factor out --device-type and --options formatting.

Signed-off-by: Ilya Dryomov <idryomov@gmail.com>",119,31,0,0,"2018-01-08 15:47:21","953.55"
"ceph/ceph-csi","6359e37a2397e20ceccccf738e449d830f56d0c3","humblec","2020-10-15 13:50:01","false","e2e: add pod yaml which consume block mode clone pvc

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",76,33,0,1,"2018-01-08 15:47:21","1007.42"
"ceph/ceph-csi","c578ab01a7027459a8e22442ca7376a2130366ae","nixpanic","2020-08-05 06:40:58","false","ci: pass HELM_VERSION when installing Helm in test container

Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","938.12"
"ceph/ceph-csi","41b30eb6c2ada5a640c7d6c69504b16a761860dc","mcronce","2018-11-24 18:48:36","false","pkg/cephfs:  Updated for new versions of CSI/Kubernetes dependencies",16,10,0,0,"2018-01-08 15:47:21","316.13"
"ceph/ceph-csi","b3944f31216f3dfdf164313fb26fc91ff6c48a95","gman0","2019-02-14 10:39:07","false","cephfs exec: read stdout and stderr separately",27,13,0,0,"2018-01-08 15:47:21","401.04"
"ceph/ceph-csi","fb56a7595ad0395383a19383bee1f9bd86e71dbc","nixpanic","2020-08-07 07:41:17","false","util: use local ErrorLog() for GetCryptoPassphrase() instead of klog

Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","940.16"
"ceph/ceph-csi","e111f2b613bd7ee3819cfc132a002dbbd5babd1d","phlogistonjohn","2020-06-16 20:00:05","false","scripts: add -mod=vendor to go run in check-env.sh

Without -mod=vendor running go run in this script may take more
resources than needed to execute. This also makes it consistent go build
(and alike) are invoked in the other scripts and the Makefile.

Signed-off-by: John Mulligan <jmulligan@redhat.com>",118,29,0,0,"2018-01-08 15:47:21","888.68"
"ceph/ceph-csi","da40d8e05e52e85914a5210fc0bb4cc6a280b047","nixpanic","2020-06-18 12:07:21","false","rbd: use librbd.FeatureSet for features

go-ceph v0.3 adds constants for ImageFeature values and their names.
Instead of hardcoding ""layering"" in several places, use the constant
given by librbd.

The rbdVolume.ImageFeatures does not seem to be used anywhere after the
conversion. Stashing the image metadata does include the ImageFeatures
as these are retrieved when getting the image information. It is safe to
drop ImageFeatures altogether and only use the imageFeatureSet instead.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",116,29,0,1,"2018-01-08 15:47:21","890.35"
"ceph/ceph-csi","b6aa19eea5d7e45ebde65ac68a58283d922a6c9f","nixpanic","2021-03-15 07:02:54","false","rbd: pass secrets when creating an source rbdVolume for cloning

Without this, the rbdVolume can not connect to the Ceph cluster and
configure the (optional) encryption.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",93,38,0,1,"2018-01-08 15:47:21","1162.39"
"ceph/ceph-csi","84c1fe52c7508cb5e78f9db30b0098c98f9fb021","yati1998","2021-07-05 13:10:53","false","cleanup: resolve exhaustive linter

This commit resolves exhaustive linter
error.

Updates: #2240

Signed-off-by: Yati Padia <ypadia@redhat.com>",125,42,0,0,"2018-01-08 15:47:21","1273.64"
"ceph/ceph-csi","e8ea0aa71355cb8c650226f7c070e5fb7c9f6cd5","gman0","2018-07-18 14:49:15","false","added examples",3,6,0,0,"2018-01-08 15:47:21","189.96"
"ceph/ceph-csi","9e959c45a388c0d4bc3edac24a35d89da5b0a453","Yuggupta27","2020-09-16 13:45:28","false","cephfs: No-Op Unprotect call if ""snapshot-autoprotect"" feature present

The subvolume features consists the list of features, which if includes
""snapshot-autoprotect"", result in query based approach to
detecting the need for protect/unprotect.
If ""snapshot-autoprotect"" feature is present, The UnprotectSnapshot
call should be treated as a no-op

Signed-off-by: Yug <yuggupta27@gmail.com>",129,32,0,0,"2018-01-08 15:47:21","978.42"
"ceph/ceph-csi","680a7bf411b58858d88f56d5a5a045baa2e743bb","lyind","2021-07-06 20:43:04","false","util: more generic kernel version parsing

  * Make kernel version parsing to support more (valid) version strings

  * Put version string parsing into a separate, testable function

  * Fixes #2248 (Kernel Subversion Parsing Failure)

Signed-off-by: Jonas Zeiger <jonas.zeiger@talpidae.net>",123,42,0,0,"2018-01-08 15:47:21","1274.96"
"ceph/ceph-csi","75f385e881ad093933f61ded637333e50a3d4e81","nixpanic","2021-06-30 08:46:49","false","ci: require CI jobs with Kubernetes 1.21 to pass

Closes: #1963
Signed-off-by: Niels de Vos <ndevos@redhat.com>",121,42,0,1,"2018-01-08 15:47:21","1267.46"
"ceph/ceph-csi","f41cd105c46fcb6c9dc5fe3882a91d71f6ce6d0e","nixpanic","2020-09-21 15:03:21","false","e2e: add simple ceph-fuse StorageClass tests

Signed-off-by: Niels de Vos <ndevos@redhat.com>",133,32,0,1,"2018-01-08 15:47:21","983.47"
"ceph/ceph-csi","b036537e1cdc078fb2840c735e3f75d7eedbdc63","nixpanic","2022-04-12 14:17:59","false","doc: add Open Source Security Foundation (OpenSSF) best practices badge

The project is currently at 54% of the best practices. Hopefully this
badge creates some interest in increasing the grade.

See-also: https://bestpractices.coreinfrastructure.org/projects/5940
Signed-off-by: Niels de Vos <ndevos@redhat.com>",44,51,1,1,"2018-01-08 15:47:21","1554.94"
"ceph/ceph-csi","b0e68a52e0e533523cd9bf7e2f06aa894ffeafdc","sngchlko","2018-08-09 13:07:00","false","Refactoring using users",8,7,0,0,"2018-01-08 15:47:21","210.89"
"ceph/ceph-csi","bae289ea0a6a07b908994b66dd6a84664a004aee","humblec","2020-09-02 11:55:50","false","deploy: update sidecar repo paths to new image repository

The image repository has been migrated to k8s.gcr.io/sig-storage from
quay.io/k8scsi.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",124,32,0,1,"2018-01-08 15:47:21","965.34"
"ceph/ceph-csi","d6a4003981cb3068e904bc563529418047c7e6d1","humblec","2021-06-25 13:02:06","false","e2e: reformat long lines in this package to 120 chars

We have many declarations and invocations..etc with long lines which are
very difficult to follow while doing code reading. This address the issues
in 'e2e/utils.go' files to restrict the line length to 120 chars.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",118,41,0,1,"2018-01-08 15:47:21","1262.64"
"ceph/ceph-csi","6d06698672f0ceaa20c8140445445ce34a931bf9","humblec","2022-04-19 16:24:07","false","rbd: change the image registry for sidecars

This commit change the image registry URL for sidecars in the
RBD deployment from `k8s.gcr.io` to `registry.k8s.io` as
the migration is happening from former to the latter.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",41,51,1,1,"2018-01-08 15:47:21","1562.03"
"ceph/ceph-csi","983f28ad2f3f6cb05eca59fbe222ee19bc701e0e","Madhu-1","2019-06-14 09:42:48","false","Revert ""Use Deployment with leader election instead of StatefulSet""

This reverts commit a151bec94b93f0f8ddbe50b572bcbe94e4c344ae.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",76,17,0,1,"2018-01-08 15:47:21","521"
"ceph/ceph-csi","ea5d9dfb5c4663ddc39c2c91007c8053370e7a33","Madhu-1","2019-03-14 11:38:46","false","Fix driver name as per CSI  spec

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",33,14,0,1,"2018-01-08 15:47:21","431.08"
"ceph/ceph-csi","5838b08eddd400da8f59689ebe09743bd603ce2e","Madhu-1","2020-07-03 08:13:08","false","e2e: Move e2e timeout to build.env

Moved e2e test timeout to build.env

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",111,30,0,1,"2018-01-08 15:47:21","906.18"
"ceph/ceph-csi","ceafca6ddfec12ab2e4a316a7aeee651c1281914","Madhu-1","2022-01-12 08:53:40","false","rbd: disallow creating small size volume from snapshot

as per the CSI standard the size is optional parameter,
as we are allowing the restore to a bigger size
today we need to block the restore to a smaller size
as its a have side effects like data corruption.

Note:- Even though this check is present in kubernetes
sidecar as CSI is CO independent adding the check
here.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",41,48,1,1,"2018-01-08 15:47:21","1464.71"
"ceph/ceph-csi","5ff0607360815cd2c9ba8a420ceacbd2ce298ff5","karthik-us","2023-10-11 16:00:47","false","e2e: To test 500MB PVC creation

Adding e2e test to check for successful PVC creation
of 500MB.

Signed-off-by: karthik-us <ksubrahm@redhat.com>",21,69,1,0,"2018-01-08 15:47:21","2099.26"
"ceph/ceph-csi","3a43fb84f8606adabef7f3d3510e02039b10ca30","nixpanic","2023-06-02 10:00:20","false","ci: disable `stylecheck:dot-imports`

The `stylecheck:dot-imports` rule complains about the same problems that
`golint` reports. We only need one `//nolint:golint // ...` comment, not
a second one for stylecheck.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",31,65,1,1,"2018-01-08 15:47:21","1971.01"
"ceph/ceph-csi","53e76fab692750bb74e630ab25bb7052b366b420","Madhu-1","2022-06-28 10:47:02","false","rbd: fix checkHealthyPrimary to consider up+stopped state

we need to check for image should be in up+stopped state
not anyone of the state for that the we need to use
OR check not the AND check.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",44,54,1,1,"2018-01-08 15:47:21","1630.79"
"ceph/ceph-csi","e3d061075c400f182bdf143c8578486537a74e07","nixpanic","2022-04-15 14:27:35","false","e2e: use ResourceDeployer for RBD

Signed-off-by: Niels de Vos <ndevos@redhat.com>",43,51,1,1,"2018-01-08 15:47:21","1557.94"
"ceph/ceph-csi","72fa77a6d73b58680d7d7da2ebfb3d8733d320a2","Madhu-1","2020-12-08 07:02:27","false","ci: add mergify rules for release-v3.2

added mergify rules for backporting and
for auto merging the PR.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",76,35,0,1,"2018-01-08 15:47:21","1061.14"
"ceph/ceph-csi","b2dfcae802053f65723713b8e96607e63ebb5337","Madhu-1","2020-04-01 07:19:40","false","Update configmap if already present

in e2e if the configmap is ready present,
we need to update it to make life simpler
for helm chart e2e.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",116,27,0,1,"2018-01-08 15:47:21","814.15"
"ceph/ceph-csi","2dc0bffc0a3c51ab96da312f103550b7c90548e6","Madhu-1","2020-06-18 08:18:23","false","e2e: Remove arm64 build test from CI

as we are building the cephcsi inside
a container for both amd64 and arm64 we
dont need to have a separate E2E to
test the build on arm64 machine.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",117,29,0,1,"2018-01-08 15:47:21","890.19"
"ceph/ceph-csi","b849b7daaabb63b48715c6f39996869dae687766","Madhu-1","2019-12-17 11:20:37","false","Fix leader election flag in deployment  files

Fixes: https://github.com/ceph/ceph-csi/issues/748

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",104,23,0,1,"2018-01-08 15:47:21","704.06"
"ceph/ceph-csi","f4c87cdc2238adf7570184507935eaf5a91eb858","Yuggupta27","2021-11-25 13:36:31","false","deploy: update help command in rook.sh

Update help command in rook.sh to showcase
functionality to deploy ec-pools

Signed-off-by: Yug Gupta <yuggupta27@gmail.com>",57,46,0,0,"2018-01-08 15:47:21","1412.66"
"ceph/ceph-csi","38ca446d57049fb56314215e487655320b548b7f","rootfs","2019-02-05 14:10:47","true","Update issue templates",24,13,0,0,"2018-01-08 15:47:21","393.18"
"ceph/ceph-csi","4891e534d33b373aa63922e54e51a803b6fb2a74","nixpanic","2022-04-27 09:28:50","false","ci: prevent ERR trap inheritance for kubectl_retry

`bash -E` causes inheritance of the ERR trap into shell functions,
command substitutions, and commands executed in a subshell environment.
Because the `kubectl_retry` function depends on detection an error of a
subshell, the ERR trap is not needed to be executed. The trap contains
extra logging, and exits the script in the `rook.sh` case. The aborting
of the script is not wanted when a retry is expected to be done.

While checking for known failures, the `grep` command may exit with 1,
if there are no matches. That means, the `ret` variable will be set to
0, but there will also be an error exit status. This causes `bash -E` to
abort the function, and call the ERR trap.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",38,52,1,1,"2018-01-08 15:47:21","1569.74"
"ceph/ceph-csi","6099f142f0617cbf11832d4f81b7a036d4995132","gman0","2019-02-12 15:31:55","false","moved klog initialization into pkg/util package",27,13,0,0,"2018-01-08 15:47:21","399.24"
"ceph/ceph-csi","ee0576278f113ddca7e1296c9bf7fe8ec695fb59","Madhu-1","2021-02-08 12:25:18","false","cleanup: move servers to a new struct

For future enhancments like adding more
servers. Moving the list of servers to a
new structure.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",83,37,0,1,"2018-01-08 15:47:21","1126.61"
"ceph/ceph-csi","59d3365d3b13f37a9b914d59d931c71269a21eec","Madhu-1","2019-06-19 09:05:44","false","update statefulset and daemonset api-version

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",78,17,0,1,"2018-01-08 15:47:21","525.97"
"ceph/ceph-csi","8a3fe53e87116663fcce0b2ea20335d482f5fbf9","Madhu-1","2021-12-14 04:14:47","false","ci: install arch specific go in Dockerfile.devel

Instead of installing the amd64 on all the
platforms, install architecture specific go
version for devel dockerfile

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",50,47,1,1,"2018-01-08 15:47:21","1431.27"
"ceph/ceph-csi","eb4bfb73268e6c210e9d112d24e6700db601e0bd","Madhu-1","2022-04-18 06:18:54","false","cleanup: use block comment for ClusterInfo example

Adjusted the mix of tabs and the spaces and also
used block comment for better readability.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",41,51,1,1,"2018-01-08 15:47:21","1560.61"
"ceph/ceph-csi","6aac3990758c350874421488625867fe864340f6","Madhu-1","2019-09-12 04:53:37","false","Change the logic of locking

if any on going opearation is seen,we
have to return Abort error message

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",83,20,0,1,"2018-01-08 15:47:21","608.8"
"ceph/ceph-csi","e45bf03bd87f9b3645b332504fd6fc82052ce2e7","Madhu-1","2021-09-17 08:39:19","false","helm: remove securityContext from cephfs deployment

we dont need securityContext for the cephfs provisioner
pod as its not doing any special operations like mount,
selinux operations etc .

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",62,44,0,1,"2018-01-08 15:47:21","1344.45"
"ceph/ceph-csi","fc0cf957bec769911da5d0108c57ce841c575f0c","ShyamsundarR","2019-03-12 15:57:36","false","Updated code and docs to reflect correct terminology

- Updated instances of fsid with clusterid
- Updated instances of credentials/subject with user/key

Signed-off-by: ShyamsundarR <srangana@redhat.com>",33,14,0,0,"2018-01-08 15:47:21","429.26"
"ceph/ceph-csi","c773097f856f12ae0a6d7cd5059636e9501460cd","humblec","2020-08-07 07:06:45","false","cephfs: add snapshot and clone helper functions

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","940.14"
"ceph/ceph-csi","6e100dde2d32856f420b40086a59a223e589c058","Rakshith-R","2022-08-19 04:44:41","false","ci: skip mutli-arch-build for doc and mergify prs

Signed-off-by: Rakshith R <rar@redhat.com>",42,55,1,1,"2018-01-08 15:47:21","1681.54"
"ceph/ceph-csi","f7ae33c67c450fc3376bccfcef015960a4af70f0","nixpanic","2021-07-13 16:15:37","false","e2e: only call error check functions when err != nil

Signed-off-by: Niels de Vos <ndevos@redhat.com>",122,42,0,1,"2018-01-08 15:47:21","1280.77"
"ceph/ceph-csi","104203ed0357493923bd92cd8cf0f306168db360","nixpanic","2020-08-18 08:10:12","false","ci: pass REBASE=1 to have commitlint rebase the branch

When Mergify adds a merge commit to the branch that is being tested with
commitlint, the tool tries to detect the most recent changes based on
the newly merged commit. This is for most PRs the master branch, and
that contains incorrect commit messages in the history. Because of this,
commitlint will fail.

By adding an option (REBASE=1) to the commitlint make target, CI jobs
can request a rebase so that the history of the PR becomes linear again
and commitlint should be able to detect only the new commits.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",119,31,0,1,"2018-01-08 15:47:21","950.18"
"ceph/ceph-csi","5531c367956b33d70c182578d12ef97a91d09501","humblec","2019-07-12 07:32:44","false","README update for v1.1.0 release

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",82,18,0,1,"2018-01-08 15:47:21","548.91"
"ceph/ceph-csi","558bc6c02a2c1c9896fe9b6ba976906033f7d447","rootfs","2018-01-10 18:30:17","true","Merge pull request #5 from rootfs/readme

update readme",0,0,0,0,"2018-01-08 15:47:21","2.11"
"ceph/ceph-csi","0ba3174bbc28b6b44c213786c696c4d5788b126f","gman0","2018-05-23 08:28:25","false","cephfs/NodePublishVolume: fix error message",3,4,0,0,"2018-01-08 15:47:21","134.7"
"ceph/ceph-csi","7043b3839a7b8c59b7985654b0f6ef0f3cd8067a","Madhu-1","2019-02-07 09:58:38","false","Fix markdown style issue

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",26,13,0,1,"2018-01-08 15:47:21","395.01"
"ceph/ceph-csi","2f7e51076be5ccf246dc2992c718efaa040f617e","Madhu-1","2020-05-18 11:43:15","false","rbd: unmap rbd image if the mounting fails

There is a bug in current code where the devicePath
is always empty and the rbd image unmap never
happens if nodeplugin fails to mount the rbd image
to the stagingpath.
This is a fix to unmap the rbd image if some issue
occurs after rbd image is mapped.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",116,28,0,1,"2018-01-08 15:47:21","860.33"
"ceph/ceph-csi","813f6c30cc6ef79b7797f20c8427fc86036aeb12","Madhu-1","2022-01-21 09:34:41","false","cleanup: use WriteString instead of Write

use WriteString instead of Write  for the temp
files.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,48,1,1,"2018-01-08 15:47:21","1473.74"
"ceph/ceph-csi","c4d775953b1ae7b7c7f00174423a03b530b73f83","rootfs","2018-02-21 14:03:20","true","Merge pull request #28 from gman0/deploy-pvc-fix

fixed wrong pvc name in kubernetes deployment",2,1,0,0,"2018-01-08 15:47:21","42.93"
"ceph/ceph-csi","847b9965014d7b8cdbab0d7acf5d76f09678b7bb","yati1998","2021-05-11 09:28:56","false","cleanup: Modifies Wrapcheck linter

Wrapcheck is a  simple Go linter to check that errors
from external packages are wrapped during return to
help identify the error source during debugging.
This commit addresses the wrapcheck error

Updates:#2025

Signed-off-by: Yati Padia <ypadia@redhat.com>",92,40,0,0,"2018-01-08 15:47:21","1218.49"
"ceph/ceph-csi","0bd1d44dc07bc9ec3762a3f966dd501b4e382262","humblec","2022-01-06 15:20:01","false","e2e: add rwop validation for cephfs volumes

This commit adds the rwop validation tests for cephfs.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",44,48,1,1,"2018-01-08 15:47:21","1454.73"
"ceph/ceph-csi","493db5c18391516c252c006a326fe894869cf190","Madhu-1","2022-01-24 11:32:03","false","deploy: log complete ouput of rook operator

kubectl log with labels will log only
last 10 lines by default adding tail=-1
to log complete output.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",36,49,1,1,"2018-01-08 15:47:21","1476.82"
"ceph/ceph-csi","f471a206c566a1de1894f6327c34543ea6c38027","Madhu-1","2021-06-30 07:50:45","false","e2e: update e2e to validate thick metadata

updated e2e tests to validate the thick
metadata set on the rbd image for thick PVC.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",121,42,0,1,"2018-01-08 15:47:21","1267.42"
"ceph/ceph-csi","b71beb7ad042795612b78b9419e98369d27105cb","Madhu-1","2023-04-25 07:38:03","false","util: set pid limit only for nodeserver

setting pod limit only for nodeserver for below
reasons

* We dont execute any commands  with CLI
anymore in controller service
* Controller deployment is not privileged
enough to set the pid limits.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",32,64,1,1,"2018-01-08 15:47:21","1932.91"
"ceph/ceph-csi","165758e3a7140bd0dd0da3deb124c6c838826268","humblec","2022-11-23 08:59:52","false","rebase: update the kube dependencies to v1.25.4

this commit update the kube dependencies to latest v1.25.4.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",34,58,1,1,"2018-01-08 15:47:21","1775.72"
"ceph/ceph-csi","0078e5c8e77c4d75dd8b2b6f475b6a1a3330c0af","humblec","2022-01-13 12:09:13","false","deploy: update node driver registrar container to v2.4.0

This commit updates the node driver registrar container to latest
version.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",39,48,1,1,"2018-01-08 15:47:21","1465.85"
"ceph/ceph-csi","a585f083abe3ddaf65f8f4d93e99865f6c89dae9","gman0","2018-03-22 15:51:39","false","cephfs/cephfsplugin.yaml: mount hosts's /dev into csi-cephfsplugin container",2,2,0,0,"2018-01-08 15:47:21","74"
"ceph/ceph-csi","68588dc7df8e0255116ec208c6a82dd95a1e3c8e","nixpanic","2021-08-24 15:23:51","false","util: fix unit-test for GetClusterMappingInfo()

Unit-testing often fails due to a race condition while writing the
clusterMappingConfigFile from multiple go-routines at the same time.
Failures from `make containerized-test` look like this:

    === CONT  TestGetClusterMappingInfo/site2-storage_cluster-id_mapping
        cluster_mapping_test.go:153: GetClusterMappingInfo() = <nil>, expected data &[{map[site1-storage:site2-storage] [map[1:3]] [map[11:5]]} {map[site3-storage:site2-storage] [map[8:3]] [map[10:5]]}]
    === CONT  TestGetClusterMappingInfo/site3-storage_cluster-id_mapping
        cluster_mapping_test.go:153: GetClusterMappingInfo() = <nil>, expected data &[{map[site3-storage:site2-storage] [map[8:3]] [map[10:5]]}]
    --- FAIL: TestGetClusterMappingInfo (0.01s)
        --- PASS: TestGetClusterMappingInfo/mapping_file_not_found (0.00s)
        --- PASS: TestGetClusterMappingInfo/mapping_file_found_with_empty_data (0.00s)
        --- PASS: TestGetClusterMappingInfo/cluster-id_mapping_not_found (0.00s)
        --- FAIL: TestGetClusterMappingInfo/site2-storage_cluster-id_mapping (0.00s)
        --- FAIL: TestGetClusterMappingInfo/site3-storage_cluster-id_mapping (0.00s)
        --- PASS: TestGetClusterMappingInfo/site1-storage_cluster-id_mapping (0.00s)

By splitting the public GetClusterMappingInfo() function into an
internal getClusterMappingInfo() that takes a filename, unit-testing can
use different files for each go-routine, and testing becomes more
predictable.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,43,0,1,"2018-01-08 15:47:21","1321.73"
"ceph/ceph-csi","81809500be8dde7760978b3daa2e15bc2740eec1","Rakshith-R","2021-05-17 09:58:15","false","e2e: wait for upgraded pods to be running during upgrade-tests

This commit calls `waitForDaemonSets` and `waitForDeploymentComplete`
after upgrading to wait for csi driver pods to be in running state
for both rbd and cephfs upgrade tests.

Signed-off-by: Rakshith R <rar@redhat.com>",97,40,0,1,"2018-01-08 15:47:21","1224.51"
"ceph/ceph-csi","7a87db39e646e52579fa2be7148adf42048379c0","Madhu-1","2020-07-02 06:45:47","false","rbd: check rbd image status only duing DeleteVolume RPC

currently, various calls to deleteImage does not
need the rbdStatus check. That is only required
when calling from DeleteVolume. This PR optimizes the
rbd image deletion by removing the status check.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",111,30,0,1,"2018-01-08 15:47:21","905.12"
"ceph/ceph-csi","cbb10fd84deda1e0eb217675a3704ae925eadb64","Madhu-1","2021-03-10 05:34:45","false","rbd: add more logging for NodeUnstageVolume

For NodeUnstageVolume its a two step process,
first unmount the volume and than unmap the volume.
Currently, we are logging only after rbd unmapping is done.
sometimes it becomes difficult to debug with above logging
whether more time is spent in unmount or unmap.
This commits adds one more debug log after unmount is done.
with this we can identify where exactly more time is spent
by looking at the logs.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",94,38,0,1,"2018-01-08 15:47:21","1157.32"
"ceph/ceph-csi","6998c0d14100c8d85280254766f660d0ade4e97a","Madhu-1","2020-04-15 02:47:25","false","Fix typo in golangci config file

This PR fixes the typo in golang CI config file

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",104,27,0,1,"2018-01-08 15:47:21","826.96"
"ceph/ceph-csi","d928782ebf0a98f84fda35475e2b1b7e26821e57","Madhu-1","2020-08-25 04:42:19","false","deploy: add missing "" for nodes watch verb

add missing "" for nodes watch verb in
clusterrole binding

fixes #1433

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",121,31,0,1,"2018-01-08 15:47:21","957.04"
"ceph/ceph-csi","abf9dd339fce520daa888490875197d04560a4c2","Madhu-1","2023-11-03 08:43:57","false","ci: remove unwated go-ceph tags

As we are using latest version of go-ceph
which doesnt require any special tags
for the API's cephcsi is consuming.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",20,70,1,1,"2018-01-08 15:47:21","2121.96"
"ceph/ceph-csi","3805c29f36968d97b9e75f3df9d94e9781bb7e83","Madhu-1","2021-08-04 12:21:16","false","build: update commitlint to use latest tag

updaing the commitlint to the latest, so
each time latest release can be installed by
default.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",120,43,0,1,"2018-01-08 15:47:21","1302.61"
"ceph/ceph-csi","5cddfc454eb1284e67071aa9c9028fada5404b2d","Madhu-1","2020-12-07 07:29:24","false","ci: update mergify rules for github actions

as we have added new github actions for the
static checks in #1762. This commits adds
the mergify rules for those github actions.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",77,35,0,1,"2018-01-08 15:47:21","1060.15"
"ceph/ceph-csi","548ff9926de771769315f35fd33fc8c7dc4b6abc","humblec","2019-02-06 06:25:52","false","Markdown linter and spelling corrections.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",27,13,0,1,"2018-01-08 15:47:21","393.86"
"ceph/ceph-csi","d7ea5235404cd977f3962d3c8cd082565e030250","ShyamsundarR","2020-03-18 17:38:40","false","Update Helm charts to support topology

- Added requires chart variables
- Updated templates with required additions based on the
variables
- Re-added older nodeplugin cluster role/rolebinding as needed

Signed-off-by: ShyamsundarR <srangana@redhat.com>",114,26,0,0,"2018-01-08 15:47:21","800.58"
"ceph/ceph-csi","8955eb03bc8c7a2db914a848fac2309feb0f6125","rootfs","2018-09-17 18:12:22","false","support rbd-nbd

Signed-off-by: Huamin Chen <hchen@redhat.com>",8,8,0,0,"2018-01-08 15:47:21","249.1"
"ceph/ceph-csi","d67ad47c45db6f86dfc7f36c9f3ce931ab710ae8","hswong3i","2020-03-23 07:11:03","false","Upgrade: csi-attacher from v2.1.0 to v2.1.1

This PR follow up the missing files from ceph-csi:v2.0.1, besides:

  - deploy/cephfs/kubernetes/csi-cephfsplugin-provisioner.yaml
  - deploy/rbd/kubernetes/csi-rbdplugin-provisioner.yaml

See https://github.com/kubernetes-csi/external-attacher/releases/tag/v2.1.1
See https://github.com/kubernetes-csi/external-attacher/blob/v2.1.1/CHANGELOG-2.1.md",113,26,0,0,"2018-01-08 15:47:21","805.14"
"ceph/ceph-csi","1d7c1ef98c7f573cc7d4919ac0bc8d7848bf1aa5","rootfs","2019-02-06 18:13:56","true","Merge pull request #177 from kfox1111/fixes

Revert release script",26,13,0,0,"2018-01-08 15:47:21","394.35"
"ceph/ceph-csi","bf7ec10fea37f590296f00e5211cacf9e3449708","Madhu-1","2019-02-08 08:21:22","false","Remove glog from Gopkg.toml

replace klog with glog

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",25,13,0,1,"2018-01-08 15:47:21","395.94"
"ceph/ceph-csi","92ad2ceec977f482060544c94f9228cfdcf586cb","Madhu-1","2021-07-22 10:36:39","false","rbd: read clusterID and PoolID from mapping

Whenever Ceph-CSI receives a CSI/Replication
request it will first decode the
volumeHandle and try to get the required
OMAP details if it is not able to
retrieve, receives a `Not Found` error
message and Ceph-CSI will check for the
clusterID mapping. If the old volumeID
`0001-00013-site1-storage-0000000000000001
-b0285c97-a0ce-11eb-8c66-0242ac110002`
contains the `site1-storage` as the clusterID,
now Ceph-CSI will look for the corresponding
clusterID `site2-storage` from the above configmap.
If the clusterID mapping is found now Ceph-CSI
will look for the poolID mapping ie mapping between
`1` and `2`. Example:- pool with name exists on
both the clusters with different ID's Replicapool
with ID `1` on site1 and Replicapool with ID `2`
on site2. After getting the required mapping Ceph-CSI
has the required information to get more details
from the rados OMAP. If we have multiple clusterID mapping
it will loop through all the mapping and checks the
corresponding pool to get the OMAP data. If the clusterID
mapping does not exist Ceph-CSI will return an `Not Found`
error message to the caller.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,42,0,1,"2018-01-08 15:47:21","1289.53"
"ceph/ceph-csi","179084a60a46d8bff60c98b02d459d6ffd737010","Madhu-1","2020-03-19 08:11:22","false","Skip arm64 building in CI

currently we are facing an issue related to
mongodb in arm64 travis CI

updates: #873

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",115,26,0,1,"2018-01-08 15:47:21","801.18"
"ceph/ceph-csi","eaa0e14cb20baafe1884f839f01dd698c7370213","Rakshith-R","2022-08-24 07:00:30","false","rbd: fix bug in kmip kms Decrypt function

This commit fixes a bug in kmip kms Decrypt
function, where emd.DEK was fed in a Nonce
instead of emd.Nonce by mistake.

Signed-off-by: Rakshith R <rar@redhat.com>",42,55,1,1,"2018-01-08 15:47:21","1686.63"
"ceph/ceph-csi","8baae02f8e41f66668953185b049edab663b4300","rootfs","2019-01-31 17:13:22","true","Merge pull request #155 from ceph/add-mergify

add mergify as a merge engine",21,13,0,0,"2018-01-08 15:47:21","388.31"
"ceph/ceph-csi","d0b846772a0d3e7ce4df5fb37728edf85d8d0d1b","humblec","2021-12-23 08:56:15","false","doc: add RWOP support matrix to README.md

This commit add RWOP support matrix to README

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",50,47,1,1,"2018-01-08 15:47:21","1440.46"
"ceph/ceph-csi","7fba62dd47d7573d2840c7df8ee38d13b7d7e21c","Rakshith-R","2021-08-09 06:23:40","false","ci: internally create & delete cephcsi namespace in install-helm.sh

This ensures the kubectl call is retried with kubectl_retry function.

Updates: #2309

Signed-off-by: Rakshith R <rar@redhat.com>",121,43,0,1,"2018-01-08 15:47:21","1306.36"
"ceph/ceph-csi","c21d05a53690d1de0a2440046cadcc894daadc2f","gman0","2018-04-13 12:38:44","false","cephfs/cephconf: added cephFullCapsKeyring",2,3,0,0,"2018-01-08 15:47:21","94.87"
"ceph/ceph-csi","a0283ef7f9894e3d3ed70b3263d7682c8a86de20","Madhu-1","2020-11-30 10:05:39","false","cephfs: use rados.ErrNotFound in getVolumeRootPathCeph

go-ceph rados.ErrNotFound for not found errors,cephcsi
need to check same for not found errors.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",85,35,0,1,"2018-01-08 15:47:21","1052.26"
"ceph/ceph-csi","a0fd805a8bcced7c314bdd1484f2d369af6d3277","Madhu-1","2020-07-07 12:14:19","false","rbd: Add support for smart cloning

Added support for RBD PVC to PVC cloning, below
commands are executed to create a PVC-PVC clone from
RBD side.

* Check the depth(n) of the cloned image if n>=(hard limit -2)
or ((soft limit-2) Add a task to flatten the image and return
about (to avoid image leak) **Note** will try to flatten the
temp clone image in the chain if available
* Reserve the key and values in omap (this will help us to
avoid the leak as it's not reserved earlier as we have returned
ABORT (the request may not come back))
* Create a snapshot of rbd image
* Clone the snapshot (temp clone)
* Delete the snapshot
* Snapshot the temp clone
* Clone the snapshot (final clone)
* Delete the snapshot

```bash
1) check the image depth of the parent image if flatten required
add a task to flatten image and return ABORT to avoid leak
(hardlimit-2 and softlimit-2 check will be done)
2) Reserve omap keys
2) rbd snap create <RBD image for src k8s volume>@<random snap name>
3) rbd clone --rbd-default-clone-format 2 --image-feature
layering,deep-flatten <RBD image for src k8s volume>@<random snap>
<RBD image for temporary snap image>
4) rbd snap rm <RBD image for src k8s volume>@<random snap name>
5) rbd snap create <cloned RBD image created in snapshot process>@<random snap name>
6) rbd clone --rbd-default-clone-format 2 --image-feature <k8s dst vol config>
 <RBD image for temporary snap image>@<random snap name> <RBD image for k8s dst vol>
7)rbd snap rm <RBD image for src k8s volume>@<random snap name>
```

* Delete temporary clone image created as part of clone(delete if present)
* Delete rbd image

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",110,30,0,1,"2018-01-08 15:47:21","910.35"
"ceph/ceph-csi","bdc3292daddf0817068864943395d423924d658c","ShyamsundarR","2019-05-07 11:25:36","false","Update deploy.sh to use the right ENV vars

deploy.sh was using ENV vars to set the image versions
incorrectly. This causes the images to be pushed using
versions already in the Makefile, rather than the overrides
in the deploy script.

This is now fixed by updating the right ENV variables.

Signed-off-by: ShyamsundarR <srangana@redhat.com>",68,16,0,0,"2018-01-08 15:47:21","485.07"
"ceph/ceph-csi","1490daed7e516e7cd6aa9ffe7c5388c644b97bb8","Yuggupta27","2020-07-09 14:48:24","false","cleanup: Avoid usage of numbers

Add seperate functions to handle all
levels and types of logging.

Signed-off-by: Yug <yuggupta27@gmail.com>",112,30,0,0,"2018-01-08 15:47:21","911.46"
"ceph/ceph-csi","624905d60db74281e4a1c98120422145da68752b","irq0","2022-04-29 18:23:24","false","kms: Add basic GetSecret() test

Add rudimentary test to ensure that we can get a valid passphrase from
the GetSecret() feature

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",38,52,1,0,"2018-01-08 15:47:21","1572.11"
"ceph/ceph-csi","ddac66d76bc8e9609d11878d7acd384d239d09d6","nixpanic","2020-07-22 12:11:41","false","util: use context.Context for logging in ExecCommand

All calls to util.ExecCommand() now pass the context.Context. In some
cases this is not possible or needed, and util.ExecCommand() will not
log the command.

This should make debugging easier when command executions fail.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",113,30,0,1,"2018-01-08 15:47:21","924.35"
"ceph/ceph-csi","8e41a8a7eda9651aef5c060257f59b4738e7236d","gman0","2019-02-18 19:45:54","true","Merge pull request #208 from Madhu-1/simplify

skip redundant error check",28,13,0,0,"2018-01-08 15:47:21","405.42"
"ceph/ceph-csi","23145bc1f708e1faf9a29c23df6ded95b6b98500","Rakshith-R","2022-03-14 06:33:32","false","cleanup: fix csi-kms-connection-details.yaml ibmkeyprotect-test ex

The last option in `ibmkeyprotect-test` example had a extra `,`
at the end, which caused parsing to fail. This commit removes
the same.

Signed-off-by: Rakshith R <rar@redhat.com>",44,50,1,1,"2018-01-08 15:47:21","1526.62"
"ceph/ceph-csi","a63b06a6204b083a0e8a022c308c0ff61a2e00c4","gman0","2019-02-13 12:57:16","false","cephfs: specify monitors explicitly",26,13,0,0,"2018-01-08 15:47:21","400.13"
"ceph/ceph-csi","3eeac3d36c64eeddb298660f2f489996779e17ca","nixpanic","2021-12-09 08:07:29","false","rbd: export RunVolumeHealer() so that rbd/driver can start it

The rbd-driver calls rbd.runVolumeHealer() which is not available
outside the rbd package. By moving the rbd-driver into its own package,
RunVolumeHealer() needs to be exported.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",50,47,1,1,"2018-01-08 15:47:21","1426.43"
"ceph/ceph-csi","fb7389f4788bdc2d1beb6af886085a99b8958849","Rakshith-R","2021-04-08 08:54:46","false","cephfs: add stderr to mount function errors

This commit appends stderr to error in both kernel and
ceph-fuse mounter functions to better be able to debug
errors.

Signed-off-by: Rakshith R <rar@redhat.com>",85,39,0,1,"2018-01-08 15:47:21","1186.46"
"ceph/ceph-csi","e1fb708d489335992b490e0a9f8a1edcc8906de0","Madhu-1","2020-08-11 11:46:45","false","cephfs: replace Errorf with util.ErrorLog in createCloneFromSubvolume

replace Errorf with util.ErrorLog in createCloneFromSubvolume
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.33"
"ceph/ceph-csi","2ab1f3e82d97c57fe4e4590cb5109808f05410e0","Madhu-1","2019-02-27 14:02:07","false","add csinodeinfos rules

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",31,14,0,1,"2018-01-08 15:47:21","414.18"
"ceph/ceph-csi","cee9c4f8b21b85c7b1e4b2888dda5fec1b54d895","Madhu-1","2019-02-07 09:59:26","false","Fix yamllint issues

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",26,13,0,1,"2018-01-08 15:47:21","395.01"
"ceph/ceph-csi","8265c431a7a7f99c5d8b5166158bc227d9a9b35c","humblec","2020-03-18 09:05:35","false","Bring attacher controllers to latest version

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",114,26,0,1,"2018-01-08 15:47:21","800.22"
"ceph/ceph-csi","ba37ff73acbfeed64156bf3f766e106126752eee","nixpanic","2023-11-07 14:06:14","false","ci: run `tickgit` after merging a PR in the devel branch

The `tickgit.com` webservice seems to not update itself anymore, but
having a list of TODO's is very useful. Use the tickgit project to
gather the TODO's, bit in a GitHub Workflow.

Developers can also run `make containerized-test TARGET=tickgit` to get
the result locally.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",4,70,1,1,"2018-01-08 15:47:21","2126.18"
"ceph/ceph-csi","84b7e7b11c1449a87c9e1836b916f64d284345dd","nixpanic","2020-08-18 07:34:27","false","build: store detected container-cmd to prevent rebuilds

The 'need-container-cmd' make target is marked as .PHONY which will
cause it to be run every time. That triggers a rebuild of the container
images, even when that is not required.

By removing the 'need-container-cmd' target from .PHONY, and storing the
contents of CONTAINER_CMD in .container-cmd, unneeded rebuilds are
prevented.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",119,31,0,1,"2018-01-08 15:47:21","950.16"
"ceph/ceph-csi","0cba72485cb0fdf709a43e18d665a79b0e790e9f","nixpanic","2022-10-07 15:50:27","false","ci: add support for VM_DRIVER=podman to scripts/minikube.sh

When running on AWE EC2 virtual-machines, we'll use Podman instead of
installing a VM. The ""none"" driver might work as well, but it requires
additional dependencies to be installed, which may change over time with
new minikube or Kubernetes releases. Hopefully the Podman driver is less
affected with changes in dependencies.

Depends-on: #3419
Closes: #3415
Signed-off-by: Niels de Vos <ndevos@redhat.com>",40,57,1,1,"2018-01-08 15:47:21","1731"
"ceph/ceph-csi","6faaf8b5b09ea5f0a6aed00e2e766181742b9dfd","rollandf","2019-02-19 10:09:07","false","Remove requirement for ceph config and keyring  files",28,13,0,0,"2018-01-08 15:47:21","406.02"
"ceph/ceph-csi","5d85f965dff6578897ddfbb93cb5b009e72b8b11","Madhu-1","2019-07-24 13:18:23","false","unmap rbd volume if nodestage fails

if mapping of rbd device is passed and mounting
device to stagingpath fails or if chmod on targetpath fails
,which may leave up stale mapping if
unstage is called

this will be fixed by unmapping if somthing fails

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",76,18,0,1,"2018-01-08 15:47:21","561.15"
"ceph/ceph-csi","1a246f7bf36f5f3e39611ffc0ebf8b4a94ab27de","Madhu-1","2019-01-17 08:01:07","false","simplify the error check

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",16,12,0,1,"2018-01-08 15:47:21","373.93"
"ceph/ceph-csi","d625eb7f54c8ae88897f887fc01782295653cc74","Madhu-1","2019-01-28 11:58:11","false","update travis to add gometalinter static check

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",22,13,0,1,"2018-01-08 15:47:21","385.09"
"ceph/ceph-csi","124281519f0c3ccfcefbb7f401ec8ea3ad91d4ec","Madhu-1","2021-12-20 13:49:35","false","rbd: add RequestedVolSize to rbdVolume struct

when doing the internal operation to get the
latest details the rbd image size is also getting
updated and this will update the volume size also
without actual requested size we cannot do the
resize operation for bigger clones. This commit
adds a new field called RequestedVolSize to rbdVolume
struct to hold the user requested size.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",57,47,1,1,"2018-01-08 15:47:21","1437.67"
"ceph/ceph-csi","8ec5aae932f3ef178740f720294c0ccfbde1be93","Madhu-1","2020-01-17 08:16:23","false","Update readme for resize metrics

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",108,24,0,1,"2018-01-08 15:47:21","739.19"
"ceph/ceph-csi","d631cd6cd9a6f055f0de6effde80f5bbeb4fb191","Madhu-1","2019-08-12 05:17:10","true","Merge pull request #533 from Madhu-1/fix-e2e-dep

Fix issues in E2E cleanup",84,19,0,1,"2018-01-08 15:47:21","578.81"
"ceph/ceph-csi","2587a28112ff6cb35b371c72f0df30bb7fbca576","Madhu-1","2020-12-21 07:30:03","false","rebase: update minikube to latest version

As minikube 1.17.1 is released and updating
the minikube to the latest available version.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",80,35,0,1,"2018-01-08 15:47:21","1073.15"
"ceph/ceph-csi","20b455407dfc8f56bfe868f41c6b6a7a7d74da8d","rootfs","2019-02-11 14:07:06","true","Update README.md",27,13,0,0,"2018-01-08 15:47:21","398.18"
"ceph/ceph-csi","cc6d67a7d673c9a2a20017acb8dc25b1d95b66f9","humblec","2021-06-25 12:15:08","false","internal: reformat long lines in internal/util package to 120 chars

We have many declarations and invocations..etc with long lines which are
very difficult to follow while doing code reading. This address the issues
in 'internal/util' package files to restrict the line length to 120 chars.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",118,41,0,1,"2018-01-08 15:47:21","1262.6"
"ceph/ceph-csi","3170ec455c6b495507ed62b5efe47c99ee013d5f","gman0","2019-01-09 07:49:20","true","Merge pull request #110 from pohly/block-volume-mode-check

rbd: refuse to create block volumes",16,12,0,0,"2018-01-08 15:47:21","365.92"
"ceph/ceph-csi","9cc4862856413350492b36ff3a0d8d3dba6e7ed9","gman0","2018-03-26 13:02:34","false","updated README",2,3,0,0,"2018-01-08 15:47:21","77.89"
"ceph/ceph-csi","ae6a52a84e1ba5cb4aad07818d8dc0658915ae41","Rakshith-R","2021-04-09 05:29:04","false","util: add nil check to default ControllerGetCapabilities()

Currently default ControllerGetCapabilities function is being
used which throws 'runtime error: invalid memory address or
nil pointer dereference' when `--controllerServer=true` is not
set in provisioner deployment args.
This commit adds a check to prevent it.

Fixes: 1925

Signed-off-by: Rakshith R <rar@redhat.com>",85,39,0,1,"2018-01-08 15:47:21","1186.32"
"ceph/ceph-csi","35c021dfc85cf73f82b20111533e57e4865405b3","kfox1111","2019-02-06 18:11:46","false","Revert release script

Turns out, we only want to do this in the csi-v1.0 branch.
Revert the script from master.

Signed-off-by: Kevin Fox <Kevin.Fox@pnnl.gov>",26,13,0,0,"2018-01-08 15:47:21","394.35"
"ceph/ceph-csi","d405c924b470124876b7d3201c79f47372c76e88","Rakshith-R","2022-05-17 08:13:30","false","doc: mention support for nfs snapshot, restore & clone

NFS now supports snapshot, restore and pvc-pvc clone.

Signed-off-by: Rakshith R <rar@redhat.com>",37,52,1,1,"2018-01-08 15:47:21","1589.68"
"ceph/ceph-csi","13e030a8b4cf43f15ead034caf3223d5815daa92","kfox1111","2019-02-06 17:18:44","false","Use rbd subdirectory

Update to use the rbd subdirectory for the package.

Signed-off-by: Kevin Fox <Kevin.Fox@pnnl.gov>",26,13,0,0,"2018-01-08 15:47:21","394.31"
"ceph/ceph-csi","8cba08189dd57fa73414348294bbb07dd9298dfe","nixpanic","2020-08-05 14:31:22","false","cephfs: implement createVolume() with go-ceph

Signed-off-by: Niels de Vos <ndevos@redhat.com>",116,31,0,1,"2018-01-08 15:47:21","938.45"
"ceph/ceph-csi","b9a9840ae57ebb0a1e4e6082072e314a97e224b1","rootfs","2019-01-17 12:20:14","true","Merge pull request #128 from humblec/readme

update readme and correct linter errors.",16,12,0,0,"2018-01-08 15:47:21","374.11"
"ceph/ceph-csi","4d55d5b8ad948d964f8edd663a7428865471eda7","rootfs","2019-02-27 17:29:23","true","Merge pull request #235 from Madhu-1/fix-rbac-cephfs

Add role and rolebinding for cephfs",31,14,0,0,"2018-01-08 15:47:21","414.32"
"ceph/ceph-csi","457d846241e86eaca9f68485244870dd65da4a1a","nixpanic","2020-07-22 08:42:37","false","cephfs: use util.ExecCommand() instead of execCommand()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",112,30,0,1,"2018-01-08 15:47:21","924.21"
"ceph/ceph-csi","2dec4121befe40f1242a344cbb5ab5d1efdd5200","kfox1111","2019-02-06 17:04:58","false","Chart repository

This change pushes updated charts to a helm chart repository

Signed-off-by: Kevin Fox <Kevin.Fox@pnnl.gov>",26,13,0,0,"2018-01-08 15:47:21","394.3"
"ceph/ceph-csi","852b829fa90446576eb1cb9ac868c10f611ddd91","Madhu-1","2023-10-19 08:42:48","false","rebase: update kubernetes to 1.28.3

update kubernetes dependency to 1.28.3
release.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",21,69,1,1,"2018-01-08 15:47:21","2106.96"
"ceph/ceph-csi","0ed7a6419167b868478efdd2ecc1d7a5e17eb723","iPraveenParihar","2023-09-29 03:57:11","false","rbd: update snap RbdImageName in createSnapshot

This PR updates the snapshot RbdImageName in
`createSnapshot` method. This resolves the
incorrect statement logged during snapshot creation.

Signed-off-by: Praveen M <m.praveen@ibm.com>",19,69,1,0,"2018-01-08 15:47:21","2086.76"
"ceph/ceph-csi","90fef919d54e85208d0e0a62de967f2dadb3e567","Madhu-1","2019-08-13 09:40:08","false","Skip snapshot testing  in CI

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",84,19,0,1,"2018-01-08 15:47:21","579.99"
"ceph/ceph-csi","bf9e14d2c9f161d9f3f6b8250b4b6b83fb001326","Rakshith-R","2022-06-24 11:06:16","false","ci: retest only one pr at a time & rebase if necessary

This commit improves retest action by rebasing the pr
if it behind devel branch and adding retests to only one
pr at a time.
refer:
https://docs.github.com/en/graphql/reference/enums#mergestatestatus

Signed-off-by: Rakshith R <rar@redhat.com>",42,53,1,1,"2018-01-08 15:47:21","1626.8"
"ceph/ceph-csi","5a53f53166944fabef1871438b531d0e841816fd","Madhu-1","2021-11-15 06:49:04","false","ci: add retest github action

added source code of github retest
action.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",56,46,0,1,"2018-01-08 15:47:21","1402.38"
"ceph/ceph-csi","94c5c5e1198548db533eadb5b91eee63bdad5e3d","humblec","2021-07-13 15:54:21","false","util: remove deleteLock while we acquire clone operation lock

clone controller make sure there is no delete operation happens
on the source PVC which has been referred as the datasource of
clone PVC, we are safe to operate without looking at delete
operation lock in this case.

Subjected code in the controller:

...
if claim.Spec.DataSource != nil && rc.clone {
		err = p.setCloneFinalizer(ctx, claim)
		...
}

if !checkFinalizer(claim, pvcCloneFinalizer) {
		claim.Finalizers = append(claim.Finalizers, pvcCloneFinalizer)
		_, err := p.client.CoreV1().PersistentVolumeClaims(claim.Namespace).Update(..claim..)
	}

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",122,42,0,1,"2018-01-08 15:47:21","1280.75"
"ceph/ceph-csi","1884e4664267e38fc835f6a6d1fe615b6f428d1c","kshithijiyer","2019-08-08 13:19:44","false","Removing appendix from license.",83,19,0,0,"2018-01-08 15:47:21","576.15"
"ceph/ceph-csi","5d5a6c4d91584a087d765d9f8e596845dc827b72","humblec","2019-07-24 09:11:45","true","Merge pull request #469 from Madhu-1/driver-version

Update driver version during build time",76,18,0,1,"2018-01-08 15:47:21","560.98"
"ceph/ceph-csi","0316ebecbe75ccb2b6fb6cc37262d1154e8420f7","rootfs","2018-12-10 15:28:00","true","Merge pull request #106 from mcronce/csi-1.0-ci

CI for csi-v1.0 branch",16,11,0,0,"2018-01-08 15:47:21","331.99"
"ceph/ceph-csi","5ae81821e44d750e3cdcba872052c181bd3e1361","mcronce","2018-12-14 20:06:42","false","deploy/cephfs/kubernetes/csi-cephfsplugin.yaml:  Made volumeMounts for plugin container slightly more readable",16,11,0,0,"2018-01-08 15:47:21","336.18"
"ceph/ceph-csi","97f8c4b6774346a11124fd3a272c74b1b78e9e6a","ShyamsundarR","2019-03-02 17:29:52","false","Provide options to pass in Ceph cluster-id

This commit provides the option to pass in Ceph cluster-id instead
of a MON list from the storage class.

This helps in moving towards a stateless CSI implementation.

Tested the following,
- PV provisioning and staging using cluster-id in storage class
- PV provisioning and staging using MON list in storage class

Did not test,
- snapshot operations in either forms of the storage class

Signed-off-by: ShyamsundarR <srangana@redhat.com>",31,14,0,0,"2018-01-08 15:47:21","420.32"
"ceph/ceph-csi","20d336fca3d380137940edd4bb2e73c9dc459209","ShyamsundarR","2019-08-06 16:59:40","false","Add support to use ceph manager rbd command to delete an image

Image deletion takes time proportional to the size of the
image. Hence, ceph manager is enhanced to support async
deletion of an image, or rather passing the task of
deleting an image to the ceph manager.

This commit leverages the ceph manager enhancement in the CSI code.

NOTE: This is tested against a ceph cluster that is running
Ceph master version of the code. Once other releases
catch up in terms of the feature, the optimization would be
available to the CSI driver as well.

Fixes: #523
Signed-off-by: ShyamsundarR <srangana@redhat.com>",83,19,0,0,"2018-01-08 15:47:21","574.3"
"ceph/ceph-csi","c4a3675ceca7c911166e63e4add4071ca0993352","ShyamsundarR","2019-06-22 16:43:28","false","Move locks to more granular locking than CPU count based

As detailed in issue #279, current lock scheme has hash
buckets that are count of CPUs. This causes a lot of contention
when parallel requests are made to the CSI plugin. To reduce
lock contention, this commit introduces granular locks per
identifier.

The commit also changes the timeout for gRPC requests to Create
and Delete volumes, as the current timeout is 10s (kubernetes
documentation says 15s but code defaults are 10s). A virtual
setup takes about 12-15s to complete a request at times, that leads
to unwanted retries of the same request, hence the increased
timeout to enable operation completion with minimal retries.

Tests to create PVCs before and after these changes look like so,

Before:
Default master code + sidecar provisioner --timeout option set
to 30 seconds

20 PVCs
Creation: 3 runs, 396/391/400 seconds
Deletion: 3 runs, 218/271/118 seconds
  - Once was stalled for more than 8 minutes and cancelled the run

After:
Current commit + sidecar provisioner --timeout option set to 30 sec
20 PVCs
Creation: 3 runs, 42/59/65 seconds
Deletion: 3 runs, 32/32/31 seconds

Fixes: #279
Signed-off-by: ShyamsundarR <srangana@redhat.com>",79,17,0,0,"2018-01-08 15:47:21","529.29"
"ceph/ceph-csi","9adf908d38e39307285dcb778e8cbcde2ac970b2","rootfs","2018-07-20 22:18:43","true","Merge pull request #51 from sngchlko/support-image-features

support image features for csi-rbdplugin",5,6,0,0,"2018-01-08 15:47:21","192.27"
"ceph/ceph-csi","9e435db454f968d7b2a78bbda012e1c14277545e","Yuggupta27","2020-07-12 13:01:46","false","ci: disable nestif linter

The `nestif` linter reports deeply nested if statements.

Disabled `nestif` as of now to avoid regression and
needs to addressed seperately.
Tracking Issue: #1229

Signed-off-by: Yug <yuggupta27@gmail.com>",114,30,0,0,"2018-01-08 15:47:21","914.39"
"ceph/ceph-csi","5ee0751c311a79024992972df35147274d2bd3fd","rootfs","2019-02-12 16:04:29","true","Merge pull request #188 from gman0/fix-klog

Fixes broken migration to klog",27,13,0,0,"2018-01-08 15:47:21","399.26"
"ceph/ceph-csi","aa52afff09b2a51f36c2236f8dc1d31d1d82553f","nixpanic","2021-03-04 14:55:41","false","cleanup: move SecretsKMS in own file

Prepared for an enhanced API to communicate with a KMS and keep the DEK
storage separate. The crypto.go file is already mixed with different
functions, so moving the KMS part into its own file, just like we have
for Hashicorp Vault KMS's.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",93,38,0,1,"2018-01-08 15:47:21","1152.71"
"ceph/ceph-csi","150de619eeb93cf11274e7b2a34005e98e702e13","nixpanic","2021-05-14 14:41:24","false","ci: have mergify set the component/build label on PRs

Quite a few PRs have the `build:` prefix. It would be good to teach
Mergify to set the label for those.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",96,40,0,1,"2018-01-08 15:47:21","1221.7"
"ceph/ceph-csi","2cc59ca41155b21cfcf30999a17e4b029fc2f26c","humblec","2020-04-07 12:46:49","false","Install go from release tar ball and update to 1.13.9

The current version of go ( 1.12.x) is causing issues
on some method call under errors package. This patch
could help to overcome the same. More details about the failure
is @https://github.com/ceph/ceph-csi/pull/917#issuecomment-609998502

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",101,27,0,1,"2018-01-08 15:47:21","820.37"
"ceph/ceph-csi","04934a40e55e57a7c22d9ea0af7f7a7a4595867b","nixpanic","2020-07-28 07:32:37","false","ci: start minikube with --force to allow running as root

When starting minikube as root with --driver=kvm2, minikube complains
that this is not the right thing to do. However, in the CentOS CI we
really want to run as root, as that makes the scripts simpler.

Add the --force option while starting, so that minikube does not abort
anymore.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",114,31,0,1,"2018-01-08 15:47:21","930.16"
"ceph/ceph-csi","f8ebc6aa3f3a6be9a67a2b40295911f98f28482c","nixpanic","2020-12-08 14:10:58","false","cleanup: return error type in ensureEncryptionMetadataSet()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,35,0,1,"2018-01-08 15:47:21","1061.43"
"ceph/ceph-csi","190504713aa8520e84d4f87ae68be483e9991882","nixpanic","2022-03-25 15:24:25","false","doc: initial/partial instructions for using NFS examples

The README explains some of the requirements and basic configuration for
using the NFS-provisioner. When more deployment artifacts are added, the
README will get extended.

The Rook CephNFS example is included, as it is the easiest to get
started with dynamic provisioning of NFS-volumes.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",44,51,1,1,"2018-01-08 15:47:21","1537.98"
"ceph/ceph-csi","7ec8e68b67c3032140f7b7924ac6f1f937a5818f","nixpanic","2020-01-21 10:01:25","false","examples/rbd-block: use a container image that is supported

Fedora 26 has been End-Of-Life for a long time already, is should not be
used anymore. Instead use the latest CentOS image that gets regular
updates. The Ceph base image used by Ceph-CSI is also based on CentOS,
so uses would be familiar with the available tools.

Also use ""sleep infinity"" instead of a weird 'tail -f /dev/null' hack.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",108,24,0,1,"2018-01-08 15:47:21","743.26"
"ceph/ceph-csi","b40af5d1a5730e1f4e3b17f5815be9370d292d75","humblec","2020-08-03 09:48:08","false","helm: add deployment charts for cephfs csi snapshotter and roles

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",118,31,0,1,"2018-01-08 15:47:21","936.25"
"ceph/ceph-csi","9b6b83f73b73ca55f4343020abd17933cb35aecb","humblec","2021-06-22 09:30:59","false","e2e: remove bootstrapper BeforeEach and AfterEach

The e2e bootstrap does not make use of these or its declared
unwantedly in the same, removing it with this commit.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",115,41,0,1,"2018-01-08 15:47:21","1259.49"
"ceph/ceph-csi","5af29662b235fcacbe10114aab3a800c64cf827a","ajarr","2019-07-25 12:39:52","false","cephfs: set the mode of the FS subvolumes

... and not that of the FS subvolume group `csi`.

There is no reason for setting the mode of FS subvolume group `csi`
(a CephFS subdirectory) as 777. It's default mode is 755. It's
sufficient to set the mode of FS subvolumes within the subvolume group
to `777`.

Signed-off-by: Ramana Raja <rraja@redhat.com>",77,18,0,0,"2018-01-08 15:47:21","562.12"
"ceph/ceph-csi","607c654263d99d94d74d9040f85d6881fbcb4853","Madhu-1","2022-09-02 05:03:48","false","e2e: set privileged as pod security enforcement level

setting privileged as pod security enforcement level
to run test on kubernetes 1.25

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,56,1,1,"2018-01-08 15:47:21","1695.55"
"ceph/ceph-csi","332a47a100ef87f9852d75178da1c11f633e053c","Madhu-1","2021-06-30 05:11:49","false","rbd: deprecate .rbd.csi.ceph.com/thick-provisioned metadata key

As image metadata key starting with '.rbd' will not
be copied when we do clone or mirroring, deprecating
the old key for the same reason use
'csi.ceph.com/thick-provisioned' to set image metadata.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",121,42,0,1,"2018-01-08 15:47:21","1267.31"
"ceph/ceph-csi","21a02fb559158c7de5019c252132f36e8b896dc0","Madhu-1","2019-07-18 12:12:12","false","Add dep check to the Makefile

check vendor directory is out of sync
with Gopkh .lock and .toml file

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",70,18,0,1,"2018-01-08 15:47:21","555.1"
"ceph/ceph-csi","e557438f876ae736eae250dbc53996e0e6274aff","Madhu-1","2019-08-19 05:10:03","false","unmap rbd image if connection timeout.

Sometime rbd images are mapped even if the
connection timeout error occurs, this will
try to unmap if the received error message
is connection timeout.This will fix stale maps
and rbd image deletion issue

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",82,19,0,1,"2018-01-08 15:47:21","585.81"
"ceph/ceph-csi","141b89f514724b45f26ce0f9e74b9d7b5c750782","Madhu-1","2020-08-05 07:35:56","false","e2e: add function to get subvolume list

added a helper function in e2e to list subvolumes
in a filesystem

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",117,31,0,1,"2018-01-08 15:47:21","938.16"
"ceph/ceph-csi","5c9f63badae071ffa5f53bec24b8029bbf1e6d01","Madhu-1","2022-08-03 07:18:03","false","ci: disable nosnakecase static check

All the CSI spec imports are having snakecase
we cannot fix it, instead of disabling all imports
skipping the nosnakecase static check.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",40,55,1,1,"2018-01-08 15:47:21","1666.65"
"ceph/ceph-csi","708800ddc18de5c3fd627c83d3cd0b229aed959b","Madhu-1","2021-07-07 04:52:35","false","rbd: set thick metadata if ThickProvision is set

instead of checking the parent is thick provisioned
or not we can decide based on the rbdVol generated
from the request. If the request is to create a Thick
Image. set metadata without checking the parent.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",124,42,0,1,"2018-01-08 15:47:21","1275.3"
"ceph/ceph-csi","74c1a75828ff7cf18ffd6395dd37090be6274bf9","Madhu-1","2019-05-13 04:47:17","false","Fix error string as per golang standard

Error string should not be capatalized
https://github.com/golang/go/wiki/CodeReviewComments#error-strings

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",72,16,0,1,"2018-01-08 15:47:21","489.79"
"ceph/ceph-csi","c0361c47d67eb138f2475e954175cd48a72d0c67","mehdy","2020-05-28 18:39:44","false","rbd: Add new methods to generate spec strings

Refactor lots of string concatenation using the Stringer
implementation for each type.

Signed-off-by: Mehdy Khoshnoody <mehdy.khoshnoody@gmail.com>",108,29,0,0,"2018-01-08 15:47:21","870.62"
"ceph/ceph-csi","855d09c1cdd1d89e2ee589c9e2fe9bf93802045d","karthik-us","2023-08-29 07:01:01","false","rebase: replace MetricsBindAddress with Metrics

MetricsBindAddress is replaced by Metrics in the
controller-runtime manager options in version 0.16.0
as part of
https://github.com/kubernetes-sigs/controller-runtime/commit/e59161ee8f41b2f24953419533dca84d30262c21
Updating the same here.

Signed-off-by: karthik-us <ksubrahm@redhat.com>",20,68,1,0,"2018-01-08 15:47:21","2056.88"
"ceph/ceph-csi","a57fe08e7df37df99edca712c6035f0905d707dd","nixpanic","2023-08-21 08:55:01","false","ci: run versioned k8s jobs only on selected branches

By using a matrix strategy with excluding certain branches and
Kubernetes versions, the number of CI jobs per PullRequest should stay
limited.

Closes: #4060
Signed-off-by: Niels de Vos <ndevos@ibm.com>",21,67,1,1,"2018-01-08 15:47:21","2048.96"
"ceph/ceph-csi","ecbac2182bf312736a81061ce974634b93ae741b","karthik-us","2023-04-19 14:16:58","false","cleanup: fix the pre-commit-golang repo link

Initialization of pre-commit-golang environment is failing when
using the git://github.com/dnephin/pre-commit-golang repo link.
Changing it to https://github.com/dnephin/pre-commit-golang
fixed the issue.

Signed-off-by: karthik-us <ksubrahm@redhat.com>
Fixes: #3760",34,63,1,0,"2018-01-08 15:47:21","1927.19"
"ceph/ceph-csi","a4678200e5d4e1e567171ea75526e782486d3ca0","nixpanic","2023-02-23 17:07:43","false","rbd: allow setting `mkfsOptions` in the StorageClass

Add `mkfsOptions` to the StorageClass and pass them to the `mkfs`
command while creating the filesystem on the RBD device.

Fixes: #374
Signed-off-by: Niels de Vos <ndevos@ibm.com>",37,61,1,1,"2018-01-08 15:47:21","1871.31"
"ceph/ceph-csi","774beef838f72e6569d6af80825ecc1b43f55876","nixpanic","2022-11-15 17:02:19","false","ci: install `openssl` for Fedora 37 testing image

GitHub Workflows fail installing Helm if the `openssl` package is not
available. Fedora 36 installs `openssl` by default, Fedora 37 does not.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",37,58,1,1,"2018-01-08 15:47:21","1768.05"
"ceph/ceph-csi","b900c9ad5c2506bcbb7a6390984a730c9699c489","rootfs","2018-01-10 18:13:36","false","add travis

Signed-off-by: Huamin Chen <hchen@redhat.com>",0,0,0,0,"2018-01-08 15:47:21","2.1"
"ceph/ceph-csi","85f20475ac6c6f565683a747242c2b361a81f605","rootfs","2018-02-15 20:38:32","true","Merge pull request #21 from rootfs/image-repo

fix travis",1,1,0,0,"2018-01-08 15:47:21","37.2"
"ceph/ceph-csi","1a69957e1d6d841c6d04039f627b6a5d7f4c0e43","Madhu-1","2022-01-21 09:24:56","false","ci: update golangci-lint to 1.43.0

As we have latest golangci-lint 1.43.0
using the same in cephcsi.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,48,1,1,"2018-01-08 15:47:21","1473.73"
"ceph/ceph-csi","d4314021018b69f40133e094e3e5dc11b052e6d0","nixpanic","2020-10-21 09:07:44","false","cephfs: make resizeVolume() a method of volumeOptions

This prepares resizeVolume() so that the volumeOptions.conn can be used
for connecting with go-ceph and use the connection cache.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",74,33,0,1,"2018-01-08 15:47:21","1013.22"
"ceph/ceph-csi","afd6994e197a3e4bcd4dcc9c46d57dbce1edf707","nixpanic","2020-11-02 15:57:19","false","ci: allow passing USE_PULLED_IMAGE=yes to use pre-pulled images

When passing USE_PULLED_IMAGE=yes to the containerized-test or
containerized-build make targets, it is now possible to use pre-pulled
container images. This saves time as the container images will not get
created from scratch.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",80,34,0,1,"2018-01-08 15:47:21","1025.51"
"ceph/ceph-csi","f7f662678a42ac19ab9f36f1a1aa96318a81b449","Madhu-1","2021-12-15 06:30:41","false","rbd: consider ErrImageNotFound during DeleteSnapshot

added a check to consider ErrImageNotFound error
during DeleteSnapshot operation, if the error
is ErrImageNotFound we need to ensure that image
is removed from the trash and also the rados
OMAP data is removed.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",50,47,1,1,"2018-01-08 15:47:21","1432.36"
"ceph/ceph-csi","6cea9e264944595ebbab8287563c05e298836f9b","nixpanic","2020-05-14 13:42:19","false","util: remove unused getPools()

Signed-off-by: Niels de Vos <ndevos@redhat.com>",113,28,0,1,"2018-01-08 15:47:21","856.41"
"ceph/ceph-csi","720ad4afeb8a963756d479023bf6cd8d8aabfd77","pohly","2018-10-17 12:52:45","false","rbd: protect against concurrent gRPC calls

The timeout value in external-provisioner is fairly low. It's not
uncommon that it times out and retries before the rbdplugin is done
with CreateVolume. rbdplugin has to serialize calls and ensure that
they are idempotent to deal with this.",10,9,0,0,"2018-01-08 15:47:21","278.88"
"ceph/ceph-csi","a7ea12eb8ef4c58f15de5aa2fbf622c48429fd89","irq0","2022-08-04 15:15:52","false","rbd: Handle encryption type default at a more meaningful place

Different places have different meaningful fallback. When parsing
from user we should default to block, when parsing stored config we
should default to invalid and handle that as an error.

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",38,55,1,0,"2018-01-08 15:47:21","1667.98"
"ceph/ceph-csi","c851b69160e43f4f238a039f35eabf8fe34962b6","yati1998","2021-06-25 11:37:24","false","cleanup: error is not nil but returns nil

In few places the error is not nil still it
returns nil.

Updates: #1586

Signed-off-by: Yati Padia <ypadia@redhat.com>",118,41,0,0,"2018-01-08 15:47:21","1262.58"
"ceph/ceph-csi","abc993ce252ca1a199d0853bc18d1742b220eb1d","humblec","2021-06-25 12:47:11","false","e2e: reformat long lines in this package to 120 chars

We have many declarations and invocations..etc with long lines which are
very difficult to follow while doing code reading. This address the issues
in 'e2e/deploy_vault.go' file to restrict the line length to 120 chars.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",118,41,0,1,"2018-01-08 15:47:21","1262.62"
"ceph/ceph-csi","f0ea32010411f033f506806955ea1af59aadc0db","humblec","2019-04-04 06:43:48","false","Update readme to point to development and contributing guide.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",47,15,0,1,"2018-01-08 15:47:21","451.87"
"ceph/ceph-csi","561e0bc04ab6e76f03c946503ab53ce39d2d9674","Madhu-1","2023-08-31 08:13:15","false","ci: add ginkgo.v when running e2e tests

Ginkgo is not output the logs when the
tests are running, it logs only after
completing the tests or if the test fails.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",19,68,1,1,"2018-01-08 15:47:21","2058.93"
"ceph/ceph-csi","44191b5a1f773c9f5ca2316b24f3e97f050cb78b","Madhu-1","2020-08-11 09:45:11","false","e2e: update cephcsi upgrade testing version

updated upgrade testing version to 3.0.0
to check the backward compatibility with the
latest release.
Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",117,31,0,1,"2018-01-08 15:47:21","943.25"
"ceph/ceph-csi","119504c0045dee877b4b0298ee3f532d3ca690ec","Madhu-1","2019-02-27 11:14:46","false","Add role and rolebinding for cephfs

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",31,14,0,1,"2018-01-08 15:47:21","414.06"
"ceph/ceph-csi","205be90d742530b31124f42b38aed8f100e2357e","Madhu-1","2019-03-26 06:05:47","false","update travis.yml and deploy.sh

update travis.yaml and deploy.sh
to build v0.3.0 images from csi-v0.3
branch instead of master.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",42,15,0,1,"2018-01-08 15:47:21","442.85"
"ceph/ceph-csi","9305e277972510e130a36f0c4fb4074c331bec55","Madhu-1","2020-08-19 10:53:07","false","rbd: replace klog with util logger in rbd_util.go

rbd: replace klog with util logger in rbd_util.go

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",122,31,0,1,"2018-01-08 15:47:21","951.3"
"ceph/ceph-csi","b4f20e941c3df14c862a6ad372ac6303b0ac9a69","Madhu-1","2019-12-18 08:36:47","false","Enable Block E2E for rbd

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",102,23,0,1,"2018-01-08 15:47:21","704.95"
"ceph/ceph-csi","ddf91de8590d601a7c134473cf4b5854de87513f","Madhu-1","2020-12-02 10:42:56","false","cephfs: implement clonesnapshot with go-ceph

updated ceph fs CLI implementaion of cloning
with go-ceph.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",80,35,0,1,"2018-01-08 15:47:21","1055.29"
"ceph/ceph-csi","4d11490a2b6d9a466aa5da5656c15bfdbb18e0fe","Madhu-1","2020-06-16 07:29:20","false","cephfs: Add support for ROX PVC

cephcsi need to add mount the cephfs subvolume
as the readonly when the PVC type is ROX to
provide only readonly access to the users

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",116,29,0,1,"2018-01-08 15:47:21","888.15"
"ceph/ceph-csi","f9d30a4c68d025e8fa64413660c2dce71f7d1817","MiaoZhou","2019-02-14 10:54:00","false","Merge remote-tracking branch 'ceph/csi-v1.0' into csi-v1.0",27,13,0,0,"2018-01-08 15:47:21","401.05"
"ceph/ceph-csi","d2c4cacb399f0ac4e386224afa2eed9f6970bad1","nixpanic","2021-06-18 09:38:58","false","rbd: restart thick-provisioned PVC snapshot restoring after aborting

In case restoring a snapshot of a thick-PVC failed during DeepCopy(),
the image will exist, but have partial contents. Only when the image has
the thick-provisioned metadata set, it has completed DeepCopy().

When the metadata is missing, the image is deleted, and an error is
returned to the caller. Kubernetes will automatically retry provisioning
on the ABORTED error, and the restoring will get restarted from the
beginning.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,41,0,1,"2018-01-08 15:47:21","1255.49"
"ceph/ceph-csi","476ad18d2e27f8db4be3ca31cf36fc742acb4a2e","nixpanic","2020-11-04 08:10:39","false","cephfs: make getCloneState() a method of volumeOptions

Signed-off-by: Niels de Vos <ndevos@redhat.com>",80,34,0,1,"2018-01-08 15:47:21","1027.18"
"ceph/ceph-csi","8dea42a6240232450a2b8dd5e0574c9ca7445fdc","phlogistonjohn","2020-05-14 18:04:13","false","journal: rename CSIJournal to Config

This better reflects what it actually does now.

Signed-off-by: John Mulligan <jmulligan@redhat.com>",113,28,0,0,"2018-01-08 15:47:21","856.6"
"ceph/ceph-csi","bcd646ee5529767c7352d3731df106445dd265fd","Madhu-1","2020-03-31 05:59:29","false","Deprecate grpc metrics in ceph-csi

As kubernetes CSI sidecar is exposing the
GRPC mertics we can make use of the same in
ceph-csi we dont need to expose our own.

update: #881

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",115,27,0,1,"2018-01-08 15:47:21","813.09"
"ceph/ceph-csi","bc2624ffff5b2838adbf953f0f151fb16352483b","rootfs","2019-04-26 16:38:00","true","Merge pull request #322 from kshlm/aggregated-roles

deploy: Use aggregated ClusterRoles",58,16,0,0,"2018-01-08 15:47:21","473.29"
"ceph/ceph-csi","3f31ca8a3ae80b3f09e9660c154e225d57364c07","humblec","2021-09-02 08:20:26","false","cleanup: introduce populateVolOptions(), to fill rbdVol from stage req

At present the nodeStageVolume() handle many logic of filling rbdvol
struct based on the request received and this method is complex to
follow. with this patch, filling or populating volOptions has been
segregrated and handled hence make the stage functions' job easy.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",109,44,0,1,"2018-01-08 15:47:21","1330.44"
"ceph/ceph-csi","31ca4790efbc7adf82286cad9a8f158ef3d8fd95","Madhu-1","2023-08-17 05:16:43","false","rebase: update kubernetes in api mod file

updating kubernetes to 0.28.0 in the api
go.mod file

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",25,67,1,1,"2018-01-08 15:47:21","2044.81"
"ceph/ceph-csi","fc0d6f6b8b1461ddec596a090719172224856bfe","Madhu-1","2021-08-12 07:05:56","false","rbd: return succuss if image is healthy secondary

If the image is in secondary state and its
up+replaying means its an healthy secondary
and the image is primary somewhere in the remote
cluster and the local image is getting replayed.
Return success for the Disabling mirroring as
we cannot disable the mirroring on the secondary
state, when the image on the remote site gets
disabled the image on all the remote (secondary)
will get auto deleted. This helps in garbage
collecting the volume replication kuberentes
artifacts

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",115,43,0,1,"2018-01-08 15:47:21","1309.39"
"ceph/ceph-csi","38892c3068cfacf1f3b9595b681d30e31722ec2a","Madhu-1","2020-08-19 09:24:27","false","rbd: rearrange the cleanup order incase clone fails

in case of clone failure, we need to first delete
the clone and the snapshot from which we created
the clone, then as part of cleanup we need to remove
the temporary cloned image and the temporary snapshot
created on the parent image.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",120,31,0,1,"2018-01-08 15:47:21","951.23"
"ceph/ceph-csi","36db988f73725665824d890e738544901d77650f","Madhu-1","2021-06-08 05:53:35","false","ci: pushing artifacts using github actions

As Travis CI `https://travis-ci.org/` is getting
shutdown date on June 15th. Either we need to move
to new place https://www.travis-ci.com/ or we can
switch to github action to push image and the helm
charts when a PR is merged.

fixes: #1781

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",110,41,0,1,"2018-01-08 15:47:21","1246.34"
"ceph/ceph-csi","560f917a7841bef3de6f22b6ef557278812532bf","mcronce","2018-11-29 18:16:37","false","README.md:  Updated version to 1.0.0",16,11,0,0,"2018-01-08 15:47:21","321.1"
"ceph/ceph-csi","25899b012313e99985a371dceea06de46bded9fd","nixpanic","2020-08-17 10:41:23","false","ci: do not constantly rebase PRs

It seems the 'rebase' action in Mergify causes each PR to be
automatically rebased once there is a change in the target branch. This
causes a very high load on the CI, which delays other PRs from getting
their test results.

Remove the 'rebase' action, as it does not work as intended. The
expectation was that '@mergifyio rebase' uses the configuration.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",119,31,0,1,"2018-01-08 15:47:21","949.29"
"ceph/ceph-csi","8c5e414d530fd87cb0fb0d0e93749b6028b4178b","Madhu-1","2022-03-15 12:58:02","false","rbd: do not read pvc namespace from volume attributes

Below are the 3 different cases where we need
the PVC namespace for encryption

* CreateVolume:- Read the namespace from the
createVolume parameters and store it in the omap
* NodeStage:- Read the namespace from the omap
not from the volumeContext
* Regenerate:- Read the pvc namespace from the claimRef
not from the volumeAttributes.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",46,50,1,1,"2018-01-08 15:47:21","1527.88"
"ceph/ceph-csi","ea89b26f65d4a3f6f658b5a1653b02967325d38b","nixpanic","2022-02-15 08:25:28","false","e2e: pass --ignore-not-found=true when deleting resources

Signed-off-by: Niels de Vos <ndevos@redhat.com>",40,49,1,1,"2018-01-08 15:47:21","1497.69"
"ceph/ceph-csi","3462cd9bbd3c797de4a012526219da371600818d","humblec","2021-08-12 08:24:12","false","helm: correct the groupVersion of CSIDriver in the chart

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",115,43,0,1,"2018-01-08 15:47:21","1309.44"
"ceph/ceph-csi","9d6ce7c5ddf488dbf7d6e292272e4df41939242d","yati1998","2021-07-10 03:51:00","false","ci: disable forbidigo linter

This commit disables the forbidigo linter as
this linter forbids the use of fmt.Printf
but we need to use it in various part of
our codebase.

Updates: #1586

Signed-off-by: Yati Padia <ypadia@redhat.com>",126,42,0,0,"2018-01-08 15:47:21","1277.25"
"ceph/ceph-csi","28f02cefa2e916d7af58d4fec28abe326d2f8009","Yuggupta27","2020-08-20 07:38:26","false","doc: Add missing keyword in static-pvc doc

The keyword `clusterID` was missing in a
couple sentences; which can be added for
better understanding.

Signed-off-by: Yug <yuggupta27@gmail.com>",121,31,0,0,"2018-01-08 15:47:21","952.16"
"ceph/ceph-csi","296aee72049a5ab0f121ef14bce0c8daa02a2575","humblec","2019-05-28 07:13:10","false","Update readme with contact section

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",75,17,0,1,"2018-01-08 15:47:21","504.89"
"ceph/ceph-csi","77469c83706053d65f9a3584a7bddd559e172401","gman0","2018-04-20 14:24:13","false","cephfs/volumecache: fixed error msg",2,3,0,0,"2018-01-08 15:47:21","101.94"
"ceph/ceph-csi","b7d46c1b791f1b754aaddad8f0afb9b0d0e179db","chenxu1990","2020-04-18 08:57:05","false","Insert backend storage name into volumeAttributes

1. insert ""imageName"" field to pv with storage rbd
2. insert ""subvolumeName"" field to pv with storage cephfs",102,27,0,0,"2018-01-08 15:47:21","830.22"
"ceph/ceph-csi","3436a094f753471f0bd495b4601c0b7ef31f9470","rootfs","2018-10-15 14:59:41","false","support nsmounter when running in containerized mode

Signed-off-by: Huamin Chen <hchen@redhat.com>",10,9,0,0,"2018-01-08 15:47:21","276.97"
"ceph/ceph-csi","e4d830a2c2c605406bd5242577e346161a5cbcc8","Madhu-1","2019-04-02 11:37:49","false","remove extra node rules in provisioner

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",46,15,0,1,"2018-01-08 15:47:21","450.08"
"ceph/ceph-csi","aed7506d886971c4a437d6c6013470e5d26077b8","rootfs","2019-01-15 18:30:59","false","fix merge leftovers; use canary driver-registrar image, as v1.0.0 is not hosted in quay.io

Signed-off-by: Huamin Chen <hchen@redhat.com>",17,12,0,0,"2018-01-08 15:47:21","372.36"
"ceph/ceph-csi","fb1e68964821eee3e3507c5c3d3f4e44fe7e118d","agarwal-mudit","2020-05-14 01:48:09","false","test: add e2e test for cephFS static PV

With the change in https://github.com/ceph/ceph-csi/issues/382, support for static PV for CephFS was added.
This change is to add e2e test case for the same to ensure that we do not regress the functionality.

Issue: https://github.com/ceph/ceph-csi/issues/669

Signed-off-by: Mudit Agarwal <muagarwa@redhat.com>",112,28,0,0,"2018-01-08 15:47:21","855.92"
"ceph/ceph-csi","be4c88f6063310908e64d51c27acab06cb2e84b0","rootfs","2019-01-21 15:54:03","true","Merge pull request #136 from rootfs/cephfs-mon

allow ceph mon stored in secret so when mon changes, cephfs driver can get latest mons and override old ones",18,12,0,0,"2018-01-08 15:47:21","378.25"
"ceph/ceph-csi","5e43e1fefad275b395cfe08ef5b15cf8ac9a7d61","phlogistonjohn","2019-03-13 19:21:48","false","makefile: use a variable to choose ""docker"" command

This change allows the use of alternatives to or wrappers around
the normal docker command for container builds.

Example 1: make image-rbdplugin CONTAINER_CMD=podman
Example 2: CONTAINER_CMD=podman make image-rbdplugin

Signed-off-by: John Mulligan <jmulligan@redhat.com>",33,14,0,0,"2018-01-08 15:47:21","430.4"
"ceph/ceph-csi","10eec1f39c5f0a48043cdec7f8df3d2acf498703","Madhu-1","2020-04-13 07:55:48","false","Create Namespace for E2E

create ns before the helm create to avoid
`Error: create: failed to create: namespaces
""xxx"" not found` issue

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",104,27,0,1,"2018-01-08 15:47:21","825.17"
"ceph/ceph-csi","6838d30affc5f1b082711ab1170c80fe2b9ca731","Madhu-1","2020-07-03 10:03:11","false","e2e: reduce the pod cound and wait time

Reduced the number of pods created
in ROX E2E to save some time in E2E
and changed the waiting time from 2 to 1
min.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",111,30,0,1,"2018-01-08 15:47:21","906.26"
"ceph/ceph-csi","f267d77801c9fb676b4b30fe384c9f75d59c71fa","Madhu-1","2021-09-17 08:38:19","false","helm: remove extra volumes from rbd plugin PSP

removed extra volume permissions from the rbd
nodeplugin PSP

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",62,44,0,1,"2018-01-08 15:47:21","1344.45"
"ceph/ceph-csi","a35a835e9c4c753b73b45db760f1a470f5818a1c","Madhu-1","2020-11-30 05:04:58","false","cephfs: fix logic to call ceph fs resize

clusterAdditionalInfo map is holding a localClusterState
for checking ceph cluster supports resize and subvolumegroup
is created or not, currently we are checking if the key is present
in a map and localClusterStatelocalClusterState.resizeSupported
is set to false to call ceph fs subvolume resize to check command is
supported or not, if a structure is  initialized all its members
are set to default value. so we will never going to check the
ceph fs subvolume  resize command is supported in backend or not, we are
always using ceph fs subvolume create to resize subvolume. in some
ceph version ceph fs subvolume create wont work to resize a subvolume.
This commit changes the resizeSupported from bool to *bool for
proper handling of this scenario.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",85,35,0,1,"2018-01-08 15:47:21","1052.05"
"ceph/ceph-csi","92205c0dc012175f37ec349ce182f840203ba647","sbezverk","2018-01-18 22:02:52","false","Adding attacher and provisioner deployment files",0,0,0,0,"2018-01-08 15:47:21","10.26"
"ceph/ceph-csi","66c16e35e6fd1f5057087d2ba4b30867d2b078a3","gman0","2018-03-13 09:25:50","false","cephfs: refactoring for CSI 0.2.0 part 1",2,2,0,0,"2018-01-08 15:47:21","64.74"
"ceph/ceph-csi","bf89151b8767eb7389aa0dae83006b889c97a8ef","gman0","2018-05-18 16:15:37","false","cephfs: ceph.conf is created in NodePublishVolume instead of CreateVolume",3,4,0,0,"2018-01-08 15:47:21","130.02"
"ceph/ceph-csi","4ebfeaaa75d425f465e67978b89ac751b0eee4b4","Madhu-1","2021-12-07 08:05:31","false","e2e: add e2e testcase of new image features

adding e2e testcase to validate the workflow
of pvc creation and attaching to pod works for
new image features like fast-diff,obj-map,exclusive-lock
and layering.

fixes: #2695

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",49,47,1,1,"2018-01-08 15:47:21","1425.43"
"ceph/ceph-csi","b0c86df9785beb2f29cfc294333ccdb246f844f7","Madhu-1","2019-02-21 05:03:46","false","update yamllint to ignore cephfs helm

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",30,13,0,1,"2018-01-08 15:47:21","407.8"
"ceph/ceph-csi","02bcb5f16ad062fd2b5814d866daad44c7ace738","Madhu-1","2019-07-25 06:49:44","false","Enable leader election in v1.14+

Use Deployment with leader election instead of StatefulSet

Deployment behaves better when a node gets disconnected
from the rest of the cluster - new provisioner leader
is elected in ~15 seconds, while it may take up to
5 minutes for StatefulSet to start a new replica.

Refer: kubernetes-csi/external-provisioner@52d1fbc

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",77,18,0,1,"2018-01-08 15:47:21","561.88"
"ceph/ceph-csi","44863a9d29fcb44e42cf7a0b2d6f08fabfd7dea6","nixpanic","2020-08-07 06:49:57","false","cleanup: move log functions to util/log.go

There is a util/log.go file, so the log functions in util/util.go can be
moved there.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","940.13"
"ceph/ceph-csi","e768c0dfc01c7d19a92189fde7e42a2fdcc963ad","Madhu-1","2020-08-19 10:45:28","false","rbd: replace klog with util logger in nodeserver.go

replace klog with util logger in nodeserver.go

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",121,31,0,1,"2018-01-08 15:47:21","951.29"
"ceph/ceph-csi","d55dc6de9247ad51937739d2e3295eca97a435fd","Madhu-1","2020-05-14 10:45:01","false","ci: Add mergify rule for conflict

Added mergify rules to post a message
when there is conflict on the PR.

ref: https://doc.mergify.io/examples.html#request-for-action

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",112,28,0,1,"2018-01-08 15:47:21","856.29"
"ceph/ceph-csi","210f95de0414c01fa23ab0d146bd5d982b933188","Madhu-1","2021-12-16 06:34:45","false","e2e: add e2e for bigger size clone

added e2e for below cases

Normal PVC clone to a bigger
size PVC (without encryption)

* Filesystem pvc clone to a bigger size
* Block pvc clone to a bigger size

Encrypted PVC clone to a bigger
size PVC

* Filesystem pvc clone to a bigger size
* Block pvc clone to a bigger size

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",52,47,1,1,"2018-01-08 15:47:21","1433.37"
"ceph/ceph-csi","a3b3858a975b881f1ec0f4328023c8b2ae8b155b","Madhu-1","2021-04-15 12:06:04","false","ci: add mergify rules for release 3.3

as we have a new release-v3.3 branch. adding
the mergify rules for auto merge and auto backport
based on backport-to-release-v3.3 label.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",87,39,0,1,"2018-01-08 15:47:21","1192.6"
"ceph/ceph-csi","0837c05be06947b91c6604f4bbb3f4c92f132517","Madhu-1","2021-06-28 11:38:42","false","rbd: set scheduling interval on snapshot mirrored image

Mirror-snapshots can also be automatically created on a
periodic basis if mirror-snapshot schedules are defined.
The mirror-snapshot can be scheduled globally, per-pool,
or per-image levels. Multiple mirror-snapshot schedules
can be defined at any level.

To create a mirror-snapshot schedule with rbd, specify
the mirror snapshot schedule add command along with an
optional pool or image name; interval; and optional start time:

The interval can be specified in days, hours, or minutes
using d, h, m suffix respectively. The optional start-time
can be specified using the ISO 8601 time format. For example:

```
$ rbd --cluster site-a mirror snapshot schedule
  add --pool image-pool --image image1 24h 14:00:00-05:00
```

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",116,42,0,1,"2018-01-08 15:47:21","1265.58"
"ceph/ceph-csi","54fe4158a0355d1e2f3f63f0e67474fab0d0d405","Rakshith-R","2022-08-08 06:38:13","false","deploy: update fsGroupPolicy to File for nfs driver object

NFS volume similar to CephFs volumes can support
fsGroupPolicy as File, now Kubernetes Kubernetes may
use fsGroup to change permissions and ownership of the
volume to match user requested fsGroup in the pod's
SecurityPolicy regardless of fstype or access mode.

Signed-off-by: Rakshith R <rar@redhat.com>",38,55,1,1,"2018-01-08 15:47:21","1671.62"
"ceph/ceph-csi","296f751d085f9553a2d355ec9edb3a9179969331","nixpanic","2021-03-23 07:56:35","false","e2e: verify (non)existence of keys for VaultTokensKMS

Key existence and removal is only checked for the VaultKMS provider. It
should also be done for the VaultTokensKMS provider.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",87,38,0,1,"2018-01-08 15:47:21","1170.42"
"ceph/ceph-csi","44d69502bc715b8485f5d1888320e2558ece06d2","nixpanic","2021-12-09 08:16:32","false","rbd: export HexStringToInteger()

HexStringToInteger() used to return a uint64, but everywhere else uint
is used. Having HexStringToInteger() return a uint as well makes it a
little easier to use when setting it with SetGlobalInt().

Signed-off-by: Niels de Vos <ndevos@redhat.com>",50,47,1,1,"2018-01-08 15:47:21","1426.44"
"ceph/ceph-csi","ea75a9d1629b29dee0d0bdf62f00310980369131","mkimuram","2018-11-15 20:40:19","false","Fix pv deletion issue caused by not dettaching due to wrong mount count",15,10,0,0,"2018-01-08 15:47:21","307.2"
"ceph/ceph-csi","1f1e8cea37bd8b954b2a3f8e9cb359c3d927024a","sbezverk","2018-02-15 13:50:31","false","Updated vednor files",1,1,0,0,"2018-01-08 15:47:21","36.92"
"ceph/ceph-csi","d7838defcf7bf2060f19aba3ffcded4304a1415c","Madhu-1","2021-04-06 05:48:01","false","rbd: return FailedPrecondition error message

In case of the DR the image on the primary site cannot be
demoted as the cluster is down, during failover the image need
to be force promoted. RBD returns `Device or resource busy`
error message if the image cannot be promoted for above reason.
Return FailedPrecondition so that replication operator can send
request to force promote the image.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",90,39,0,1,"2018-01-08 15:47:21","1184.33"
"ceph/ceph-csi","df2680c50bc4e157b2f4f88dcd70ef3bde3e63d9","Madhu-1","2019-07-03 11:45:23","false","support mountflags during nodepublish in rbd
Fixes: #292

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",78,18,0,1,"2018-01-08 15:47:21","541.08"
"ceph/ceph-csi","38ef32a496b7109b8d186e7de79b5b8d6e494647","Madhu-1","2021-08-04 12:10:35","false","ci: trailer-exists to verify sign-off

This commit uses trailer-exists instead
of signed-off-by to verify the sign-off-by
message.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>
Suggested-by: Ade Attwood",120,43,0,1,"2018-01-08 15:47:21","1302.6"
"ceph/ceph-csi","650c522ce016bcff86d590006d120f7b829fb93d","Madhu-1","2023-02-01 17:36:31","false","build: update golang to 1.19.5

kubernetes 1.26.1 requires golang
1.19

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",32,61,1,1,"2018-01-08 15:47:21","1850.33"
"ceph/ceph-csi","28f51aaaf745ce4f687ead7c13d35072305abf4f","Madhu-1","2022-11-02 10:50:16","false","e2e: add snapshot count validation

Add snapshot count validation for cephfs
and nfs to avoid resource leak.

fixes: #3224

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",37,58,1,1,"2018-01-08 15:47:21","1755.79"
"ceph/ceph-csi","0e66c3211a928366239a6429912400a300d4b91a","irq0","2022-08-19 13:25:13","false","deploy: Add KMS configuration to Ceph FS

Adds necessary KMS configuration based on the RBD configuration to use
Ceph FS with fscrypt

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",41,55,1,0,"2018-01-08 15:47:21","1681.9"
"ceph/ceph-csi","a4f2c5617c80cefe90fee34e3bc81ebe367243d9","humblec","2020-08-03 18:51:25","false","cephfs: retrieve NewCSISnapshotJournal with namespace set

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","936.63"
"ceph/ceph-csi","c85d03c79edcd46c0399dbd0fedd6a8be7703a58","humblec","2020-08-03 16:48:55","false","e2e: add/modify deployment files for cephfs snapshot/clone tests

Add snapshot class, snapshot, restore, clone PVC and pod yamls
for e2e test to consume

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",117,31,0,1,"2018-01-08 15:47:21","936.54"
"ceph/ceph-csi","87d112438ff2939c7bc5fa23aaee8e129b2bb609","rootfs","2019-02-06 18:59:23","true","Merge pull request #179 from kfox1111/csi-v1.0

Fix the symlink and add more debuggin",26,13,0,0,"2018-01-08 15:47:21","394.38"
"ceph/ceph-csi","6faff195dc47d3bad12be59fdcfa62a96724c411","kfox1111","2019-02-06 18:22:03","false","Push helm packages to repo

This adds support to the deployment script to
push updated charts to a helm repo.

Signed-off-by: Kevin Fox <Kevin.Fox@pnnl.gov>",26,13,0,0,"2018-01-08 15:47:21","394.36"
"ceph/ceph-csi","b134bf7edafad9a50da82aaeb814f00820d5c812","humblec","2022-11-12 06:38:40","false","build: update golang version to 1.18.8

the latest 1.18 version of go binary is 1.18.8 and this commit
update the package to the latest.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",35,58,1,1,"2018-01-08 15:47:21","1764.62"
"ceph/ceph-csi","aefc258ccddb1d853fa0d408c0b16bd8e01a7814","gman0","2018-03-20 14:51:27","false","cephfs/volumeptions: modified fields, updated validation",2,2,0,0,"2018-01-08 15:47:21","71.96"
"ceph/ceph-csi","916c97b4a87cfc4d9cad9aaaedcc33b0de75a032","Madhu-1","2021-07-12 07:11:00","false","rbd: copy creds when copying the connection

rbd flatten functions is a CLI call and it expects
the creds as the input and copying of creds is
required when we generate the temp clone image.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",125,42,0,1,"2018-01-08 15:47:21","1279.39"
"ceph/ceph-csi","20af5afcabde896d80bb7e8af0a69c3c4faf3a1d","Madhu-1","2019-01-16 13:03:38","false","Fix  golint issues

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",17,12,0,1,"2018-01-08 15:47:21","373.14"
"ceph/ceph-csi","c57189382f2121c6b6195ec6fdf461c418d89f27","Madhu-1","2020-08-11 12:09:10","false","cephfs: replace Errorf with ErrorLog in checkSnapExists

replace Errorf with ErrorLog in checkSnapExists
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.35"
"ceph/ceph-csi","1e5370a1f3aecec5339d44ffea2c9778310d49f0","Madhu-1","2020-07-17 06:37:45","false","cephfs: return volume not found error if volume doesnot exists

In some ceph version if the subvolume is not present, the
ceph returns doesnot exists and in some version not found
error message. This commit fixes issue for both error
checks.

By only checking Error ENOENT: for doesnot exist seems good.
even if some error message changes in ceph ceph-csi wont get
any issue.

```bash
sh-4.2# ceph version
ceph version 14.2.10 (b340acf629a010a74d90da5782a2c5fe0b54ac20) nautilus (stable)

sh-4.2# ceph fs subvolume getpath myfs csi-vol-a24a3d97-c7f4-11ea-8cfc-0242ac110012 --group_name csi
Error ENOENT: subvolume 'csi-vol-a24a3d97-c7f4-11ea-8cfc-0242ac110012' does not exist
```

```bash
sh-4.2# ceph version
ceph version 14.2.4 (75f4de193b3ea58512f204623e6c5a16e6c1e1ba) nautilus (stable)

sh-4.2# ceph fs subvolume getpath myfs testing --group_name=csi
Error ENOENT: Subvolume 'testing' not found
```

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",116,30,0,1,"2018-01-08 15:47:21","919.12"
"ceph/ceph-csi","883ccd1bb109363312651b31812bf65e74a7c9f7","humblec","2019-06-07 10:58:38","true","Merge pull request #409 from humblec/mount-options

Add mount options support in CephFS CSI driver",78,17,0,1,"2018-01-08 15:47:21","515.05"
"ceph/ceph-csi","b4452f078759b316882a01cd83ad71a2847b8807","humblec","2020-10-20 09:55:09","false","e2e: validate the error return instead of object for consitency

If loadPVC() fails, it return error and we expect the PVC object
to be nil too. In many places we check on the error and exit.
However in few places we are looking at PVC object.
This commit make the condition check on `err` instead of `PVC`
object for consistency.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",77,33,0,1,"2018-01-08 15:47:21","1012.26"
"ceph/ceph-csi","6a5d7f57e50cdaf3e90500e797cc1a37d8f423a8","nixpanic","2023-06-01 16:27:22","false","ci: use the ""ceph-csi-bot"" account for commenting on PRs

By default the `GITHUB_TOKEN` is used for the actions, and the name of
the account that comments is ""github-actions[bot]"". It is a nice touch
to use the Ceph-CSI Bot account instead.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",32,65,1,1,"2018-01-08 15:47:21","1970.28"
"ceph/ceph-csi","5e66372e311454552a0f3c477a0c6201f4b00b22","nixpanic","2022-04-11 15:54:53","false","e2e: allow RWOP tests to fail

Signed-off-by: Niels de Vos <ndevos@redhat.com>",45,51,1,1,"2018-01-08 15:47:21","1554.01"
"ceph/ceph-csi","539686329fac5a545f364b56b9f6518beca95241","riya-singhal31","2022-11-09 13:37:26","false","ci: fix mdl related failures

This commit address the issue-
https://github.com/ceph/ceph-csi/issues/3448.

Signed-off-by: riya-singhal31 <rsinghal@redhat.com>",35,58,1,0,"2018-01-08 15:47:21","1761.91"
"ceph/ceph-csi","9b64e0a17019fe34ed0d248b0a70038dd4e86e52","humblec","2022-05-10 09:33:49","false","helm: enable RecoverVolumeExpansionFailure feature gate

This commit enable the mentioned feature gate which helps to
recover from volume expansion failures.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",40,52,1,1,"2018-01-08 15:47:21","1582.74"
"ceph/ceph-csi","0339df2b02c3856106335b32e3c72810464b00de","agarwal-mudit","2021-01-08 10:59:10","false","rebase: update golang version to v1.15.5

To fix math/big CVE, this version of golang has the fix
for this vulnerability.

Signed-off-by: Mudit Agarwal <muagarwa@redhat.com>",81,36,0,0,"2018-01-08 15:47:21","1091.3"
"ceph/ceph-csi","a4e4750fdcb0d666a29b462a34f7082a824006f6","Rakshith-R","2021-05-24 04:58:35","false","deploy: disable mon,mgr and mds liveness probe

This commit disables mon,mgr and mds liveness probe
which on failing caused `crashLoopBackOff` state.

Updates: #2094

Signed-off-by: Rakshith R <rar@redhat.com>",99,40,0,1,"2018-01-08 15:47:21","1231.3"
"ceph/ceph-csi","101b15e4beb48b9235ca3f71ac794a988344a5d9","rootfs","2019-01-07 15:20:38","true","Merge pull request #113 from mickymiek/metadata-cm

Collect metadata in k8s cm",16,12,0,0,"2018-01-08 15:47:21","359.98"
"ceph/ceph-csi","eae5b8029820d4651027ec4c2dda5b20cd07717e","irq0","2022-08-24 08:35:49","false","e2e: Apply formatting to rbd suite and helper

Apply formatting for previous changes separately to make the commit
diffs easier to read.

Signed-off-by: Marcel Lauhoff <marcel.lauhoff@suse.com>",41,55,1,0,"2018-01-08 15:47:21","1686.7"
"ceph/ceph-csi","4ed187eb3f9509e40d4206c8a20f6fdfc7dc80be","Madhu-1","2019-08-07 14:53:39","false","Fix issues in E2E cleanup

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",83,19,0,1,"2018-01-08 15:47:21","575.21"
"ceph/ceph-csi","c25f572ae0d135f27711d19c2e9ddfbfe56bace1","Madhu-1","2023-11-02 10:41:10","false","cephfs: remove subvolume during clone

If any operations like Resize, Deleting
snapshot fails, we need to remove
both snapshot and the clone to avoid
resource leak.

closes: #4218

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",20,70,1,1,"2018-01-08 15:47:21","2121.04"
"ceph/ceph-csi","dd4129590098fc69d5f29a1ccf4a69428fd9f2b4","Madhu-1","2019-03-12 13:07:10","false","store volume size in bytes in configmap

during volume creation we check volume size in
bytes, and even during listing of volumes and
snapshots we need to check size in bytes

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",32,14,0,1,"2018-01-08 15:47:21","429.14"
"ceph/ceph-csi","a190bb44a8c5e098294e23b3bbccb66bf2fa1e2f","robinbraemer","2019-07-22 14:38:43","false","fix README.md markdown and more clear sentence",74,18,0,0,"2018-01-08 15:47:21","559.2"
"ceph/ceph-csi","f9c777d9e6fea0749e5c42bfd7dabcdc6f15dd7a","joedborg","2021-03-01 19:19:44","false","Add `kubectl` to the start of command

Signed-off-by: Joe Borg <joseph.borg@canonical.com>",90,38,0,0,"2018-01-08 15:47:21","1149.9"
"ceph/ceph-csi","0f6bceb662fea2857a729c0444fafb3779032ec7","Madhu-1","2020-03-18 04:36:35","false","Update readme for new releases

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",114,26,0,1,"2018-01-08 15:47:21","800.03"
"ceph/ceph-csi","83559144b10eb9616f13c38cb7042554239d43aa","Madhu-1","2020-12-17 12:28:29","false","rebase: update kubernetes to v1.20.0

updated kubernetes packages to latest
release.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",81,35,0,1,"2018-01-08 15:47:21","1069.36"
"ceph/ceph-csi","051af3b2572784cbb8a4e5ce98d006000601867a","Madhu-1","2021-09-17 08:31:36","false","deploy: reduce the PSP permission for cephfs deployment

cephfs deployment doesnot need extra permission like
privileged,Capabilities and remove unwanted volumes.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",62,44,0,1,"2018-01-08 15:47:21","1344.45"
"ceph/ceph-csi","1a9cd23f6475522cc9c7b33c93e57c31bca06085","Madhu-1","2020-08-19 10:59:25","false","journal: replace klog with util logger in omap.go

replace klog with util logger in omap.go

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",122,31,0,1,"2018-01-08 15:47:21","951.3"
"ceph/ceph-csi","a21d8fad695817066363bbcadad50ff3471e610b","Madhu-1","2020-07-27 03:07:09","false","doc: update upgrade doc for v3.0.0

updated upgrade documentation for upgrade
from v2.1.x to v3.0 .

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",113,31,0,1,"2018-01-08 15:47:21","928.97"
"ceph/ceph-csi","91811c18c5649363864080248825401100037d83","Madhu-1","2020-08-11 12:18:52","false","cephfs: replace Errorf with ErrorLog in protectSnapshot

replace Errorf with ErrorLog in protectSnapshot
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.36"
"ceph/ceph-csi","89d9ec0823bc5220c66143c9b1610d321d99a843","Madhu-1","2022-05-06 06:59:50","false","e2e: add getPersistentVolumeClaim helper function

added getPersistentVolumeClaim helper function
to get the PVC and also try if there is any API
error to improve the CI.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",41,52,1,1,"2018-01-08 15:47:21","1579.63"
"ceph/ceph-csi","cda2abca5d3899a9835b9fb460bc6498d7a86cbb","Madhu-1","2021-10-05 09:50:33","false","rbd: use NewMetricsBlock to get size

instead of lsblk command use NewMetricsBlock
function from the kubernetes package to get
the size.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",55,45,0,1,"2018-01-08 15:47:21","1363.5"
"ceph/ceph-csi","385a751b8e78e72b2e773797f57519c622f8ebc9","Madhu-1","2021-04-06 06:46:35","false","rebase: rename kube-storage to csi-addons

as the org github.com/kube-storage is renamed
to github.com/csi-addons as the name kube-storage
was more generic.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",90,39,0,1,"2018-01-08 15:47:21","1184.37"
"ceph/ceph-csi","9fd51d9bec20a77c443dd6aea9d1ffd0460dc973","Madhu-1","2021-09-07 06:34:55","false","cephfs: add comment for validateCreateVolumeRequest

added function comment for
validateCreateVolumeRequest

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",66,44,0,1,"2018-01-08 15:47:21","1335.37"
"ceph/ceph-csi","c0b53d3ad44238617ec592dc0be5a9f9f7ba91e5","nixpanic","2020-05-28 12:32:38","false","build: add option to compile e2e.test in a container

Run `make containerized-build TARGET=e2e.test` to build the e2e.test
executable in a container. This makes it possible for environments to
only have the dependencies for the runtime installed (most notably Ceph
shared libraries) and, run the e2e tests directly.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",108,29,0,1,"2018-01-08 15:47:21","870.36"
"ceph/ceph-csi","4d3b1fc46f7d381f88e1ec859efb6204011cfd43","nixpanic","2023-10-17 11:55:38","false","util: if FilesystemNodeGetVolumeStats succeeds the volume is healthy

When FilesystemNodeGetVolumeStats() succeeds, the volume must be
healthy. This can be included in the VolumeCondition CSI message by
default.

Checks that detect an abnormal VolumeCondition should prevent calling
FilesystemNodeGetVolumeStats() as it is possible that the function will
hang.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",21,69,1,1,"2018-01-08 15:47:21","2105.09"
"ceph/ceph-csi","39b1f2b4d3b79237ffa956ff16a3459cf21bf63f","Madhu-1","2020-11-24 11:54:29","false","cleanup: fix mispell words

fixed mispell words in the repo.
Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",81,34,0,1,"2018-01-08 15:47:21","1046.34"
"ceph/ceph-csi","69eb6e40dc2ab12cac2cf120f938a7f0e5016ce3","Madhu-1","2022-10-14 12:47:52","false","rbd: return GRPC error message

The error message return from the GRPC
should be of GRPC error messages only
not the normal go errors. This commits
returns GRPC error if setAllMetadata
fails.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,57,1,1,"2018-01-08 15:47:21","1736.88"
"ceph/ceph-csi","c277ed588dbb33288576f129a6e48ba23b7468ba","Madhu-1","2020-07-23 06:34:20","false","doc: correct kubernetes version for snap and clone

Corrected the required kubernetes version for rbd
snapshot and clone in README.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",115,30,0,1,"2018-01-08 15:47:21","925.12"
"ceph/ceph-csi","87f87141be7448a19640fc68bdc50fe0909e2ab9","nixpanic","2022-03-02 08:32:01","false","deploy: add CSIDriver for NFS

The API is extended for generation of the NFS CSIDriver object. The
YAML file under deploy/ was created by `yamlgen`.

The contents of the csidriver.yaml file is heavily based on the upstream
CSIDriver from the Kubernetes csi-driver-nfs project.

Because ./tools/yamlgen uses the API, it gets copied under vendor/ .
This causes two copies of the API to be included in the repository, but
that can not be prevented, it seems.

See-also: https://github.com/kubernetes-csi/csi-driver-nfs/blob/master/deploy/csi-nfs-driverinfo.yaml
Signed-off-by: Niels de Vos <ndevos@redhat.com>",42,50,1,1,"2018-01-08 15:47:21","1515.7"
"ceph/ceph-csi","f04af5742df02332943db8bdaa1d08975127dcf4","wilmardo","2019-12-19 15:35:58","false","refact: Remove Kubernetes 1.13.x support

Signed-off-by: wilmardo <info@wilmardenouden.nl>",104,23,0,0,"2018-01-08 15:47:21","706.24"
"ceph/ceph-csi","3ea540bf0fdb868e910eda4c7cff1c8f14670786","Madhu-1","2023-11-02 12:00:55","false","util: remove deprecated grpc metrics

This commit removes the deprecated
grpc related code from cephcsi.

fixes: #4122

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",20,70,1,1,"2018-01-08 15:47:21","2121.09"
"ceph/ceph-csi","10bec8a002dcaa362eeafe801a45d417ef8de51f","Madhu-1","2023-08-21 09:28:32","false","ci: skip enabling nfs modules in e2e

As we dont need to enable nfs modules
in ceph v16.2.8 onwards skipping this one.

Because of this one we have a regression
in nfs export

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",21,67,1,1,"2018-01-08 15:47:21","2048.99"
"ceph/ceph-csi","54eeac212e1e46ea46e96c3eba446cbb621f6711","Rakshith-R","2023-06-13 09:49:01","false","e2e: add test cases for pv.Spec.MountOptions

Signed-off-by: Rakshith R <rar@redhat.com>",31,65,1,1,"2018-01-08 15:47:21","1981"
"ceph/ceph-csi","745d2ace920dbffd8aa0a0f98dfd28137186d6e6","nixpanic","2023-05-15 07:35:43","false","ci: Mergify copy-labels requires empty string for `labels:`

Instead of leaving the `labels:` empty, pass an empty string `""""`.

Signed-off-by: Niels de Vos <ndevos@ibm.com>",28,64,1,1,"2018-01-08 15:47:21","1952.91"
"ceph/ceph-csi","3a28b0f370a9e7fe319eb218aa8e19ab6b0422bc","nixpanic","2023-02-20 12:45:36","false","ci: add `/api` to dependabot configuration

Signed-off-by: Niels de Vos <ndevos@redhat.com>",37,61,1,1,"2018-01-08 15:47:21","1868.12"
"ceph/ceph-csi","b0b0e083adad39c232d94584606e19e4f8c79477","yati1998","2022-07-05 09:11:59","false","cephfs: add update rbac rule to pv resource

This commit adds the update rbac rule to persistent
volume resource as the ci was failing with below error:
cannot update resource ""persistentvolumes"" in API group
"""" at the cluster scope

Signed-off-by: Yati Padia <ypadia@redhat.com>",38,54,1,0,"2018-01-08 15:47:21","1638.73"
"ceph/ceph-csi","28369702d275381b559f77c7e38adf599128e457","nixpanic","2022-03-30 08:45:07","false","nfs: use go-ceph API for creating/deleting exports

Recent versions of Ceph allow calling the NFS-export management
functions over the go-ceph API.

This seems incompatible with older versions that have been tested with
the `ceph nfs` commands that this commit replaces.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",48,51,1,1,"2018-01-08 15:47:21","1542.71"
"ceph/ceph-csi","ee8fb3f05f98df706cb030c19f9674d9d6361a90","sbskas","2022-01-28 11:08:09","false","rbd: Fix dataPool in createVolumeResponse

Return the dataPool used to create the image instead of the default one
provided by the createVolumeRequest.
In case of topologyConstrainedDataPools, they may differ.
Don't add datapool if it's not present

Signed-off-by: Sébastien Bernard <sebastien.bernard@sfr.com>",41,49,1,0,"2018-01-08 15:47:21","1480.81"
"ceph/ceph-csi","165b82a44cc5a69870e20654ee758279efd8e174","mkimuram","2018-11-01 01:03:03","false","Add block supports to rbd driver",14,10,0,0,"2018-01-08 15:47:21","293.39"
"ceph/ceph-csi","ceef9ff3a581c098cd8236eee8ed81686b8485e3","Madhu-1","2019-09-26 07:40:04","false","Backport PR when label is set

backport PR to release-v1.2.0 branch
from master branch  when label is set
on PR

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",86,20,0,1,"2018-01-08 15:47:21","622.91"
"ceph/ceph-csi","71dbc7dbb45d771e4885efef8535708c76f6a453","Madhu-1","2022-09-05 05:11:37","false","rbd: map only primary image

If the image is mirroring enabled
and primary consider it for mapping,
if the image is mirroring enabled but
not primary yet. return error message
until the image is marked as primary.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",39,56,1,1,"2018-01-08 15:47:21","1698.56"
"ceph/ceph-csi","787ba690894b46b3b270f6683efac2ea33391b91","Madhu-1","2020-08-18 04:52:36","false","cephfs: fix lock release in volumeDelete

currently the lock is not released which is
taken on the request name. this is causing issues
when the subvolume is requested for delete.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","950.05"
"ceph/ceph-csi","b07211739cb3902d55320405f915540fa010ffe1","gman0","2019-03-05 11:12:04","true","Merge pull request #238 from Madhu-1/fix-image-size

Fix image size",31,14,0,0,"2018-01-08 15:47:21","423.06"
"ceph/ceph-csi","99da92cfd781b7a93116041f899400cfb6632936","nixpanic","2021-03-24 08:54:57","false","rbd: move deletion of DEK to deleteImage()

The ControllerServer should not need to care about support for
encryption, ideally it is transparantly handled by the rbdVolume type
and its internal API.

Deleting the DEK was one of the last remainders that was explicitly done
inside the ControllerServer.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",88,38,0,1,"2018-01-08 15:47:21","1171.46"
"ceph/ceph-csi","fa40c1cc58045d71449ea82f3eb87ddde829cf50","Madhu-1","2019-04-04 04:43:00","false","push images to quay.io with canary tag

updated deploy.sh script to push images
to quay.io with canary tag.
Once we merge a PR against master and csi-v0.3
branches we need to build and push the latest
image with canary tag. by doing this we can
avoid the accidental update of the images which
are already deployed with stable tags
(i.e v1.0.0 or v0.3.0).

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",47,15,0,1,"2018-01-08 15:47:21","451.79"
"ceph/ceph-csi","bfa6064b4df9816ec668fd66ed86880cd6bbbeb5","Madhu-1","2020-04-22 12:00:34","false","Read baseimage from the dockerfile

Updated deploy.sh and build scripts
to read base image from the dockerfile

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",102,27,0,1,"2018-01-08 15:47:21","834.34"
"ceph/ceph-csi","c822ad460dc65f1e36b8d3f9fa35918cfec5a554","Madhu-1","2021-03-17 07:50:30","false","rbd: add a check for image mirror disabling state

the rbd mirror state can be in enabled,disabled
or disabling state. If the mirroring is not disabled
yet and still in disabling state. we need to
check for it and return abort error message if
the mirroring is still getting disabled.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",85,38,0,1,"2018-01-08 15:47:21","1164.42"
"ceph/ceph-csi","5b512cd48c5f6fdd65a3e1e7b773039c1acfbfce","Madhu-1","2019-01-25 19:10:20","false","Add snapshot yaml files and volume clone
capabilities to provisioner.

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",23,13,0,1,"2018-01-08 15:47:21","382.39"
"ceph/ceph-csi","a5a89527165af23c12957e6fd1a9c9c7f427ecef","Madhu-1","2021-07-12 05:41:46","false","rbd: fix clone problem

This commit fixes a bug in checkCloneImage() which was caused
by checking cloned image before checking on temp-clone image snap
in a subsequent request which lead to stale images. This was solved
by checking temp-clone image snap and flattening temp-clone if
needed.
This commit also fixes comparison bug in flattenCloneImage().

Signed-off-by: Rakshith R <rar@redhat.com>
Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",125,42,0,1,"2018-01-08 15:47:21","1279.33"
"ceph/ceph-csi","e4e0f397a6095cb322994c273630a36a3c39b3fb","Madhu-1","2021-11-15 06:00:13","false","rbd: run schedule during promote operation

Moved to add scheduling to the promote
operation as scheduling need to be added
when the image is promoted and this is
the correct method of adding the scheduling
to make the scheduling take place.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",56,46,0,1,"2018-01-08 15:47:21","1402.34"
"ceph/ceph-csi","2982fbd79f407e974eb9a3542210b7ad6f939dfd","gman0","2018-09-21 14:18:24","true","Merge pull request #78 from nak3/typo

Fix misspelling of ""successfully""",7,8,0,0,"2018-01-08 15:47:21","252.94"
"ceph/ceph-csi","90235c32f81728807cb85b5d256c4cf2e857058a","Madhu-1","2020-02-11 08:49:53","false","Fix branch name in notes.txt

currently notes.txt container old branch name.
This PR updated the branch name with release

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",107,25,0,1,"2018-01-08 15:47:21","763.21"
"ceph/ceph-csi","96ecb3946d08d593df23c9a1d72919c1d5835dda","Madhu-1","2020-08-06 06:11:10","false","ci: remove e2e testing from travis CI

Remove E2E testing from travis CI as we
are moving to run E2E tests in centos CI.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",116,31,0,1,"2018-01-08 15:47:21","939.1"
"ceph/ceph-csi","84aa1ba392a7f9ce5123b9a3d3d6815f52633cf3","Madhu-1","2020-03-30 05:04:13","false","Use Error instead of Errorf

If the string formatting is not required
use Error.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",114,27,0,1,"2018-01-08 15:47:21","812.05"
"ceph/ceph-csi","6263b9cdb5a473636f133448272652bec4b8db8a","Madhu-1","2019-02-04 05:14:00","false","megacheck is not present in gometalinter v3.0.0

added staticheck option for gometalinter

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",20,13,0,1,"2018-01-08 15:47:21","391.81"
"ceph/ceph-csi","0682f0e50089cb5e5a099aeb866d02694aa3ff60","Yuggupta27","2020-09-16 13:49:10","false","cephfs: Fetch subvolume features in newSnapshotOptionsFromID

Get subvolume features using subvolume info and update the
volume options with Features parameter.

Signed-off-by: Yug <yuggupta27@gmail.com>",129,32,0,0,"2018-01-08 15:47:21","978.42"
"ceph/ceph-csi","eb21d75ef7d4b21ea32c7c88d05d3807ada13557","Rakshith-R","2022-11-11 14:59:39","false","rbd: ignore stdErr for ceph osd blocklist when there is no error

`ceph osd blocklist range add/rm <ip>` cmd is outputting
""blocklisting cidr:10.1.114.75:0/32 until 202..."" messages
incorrectly into stdErr. This commit ignores stdErr when err
is nil.

Signed-off-by: Rakshith R <rar@redhat.com>",35,58,1,1,"2018-01-08 15:47:21","1763.97"
"ceph/ceph-csi","6da96c63275d32a7cdb4d3b0808a078bcb1e810b","Madhu-1","2019-09-11 07:08:55","false","remove support for create image with image-format 1

tried to create an image with image-format=1

```
sh-4.2# rbd create --size=1024 replicapool/test --image-format=1
rbd: image format 1 is deprecated
rbd: create error: (22) Invalid argument
2019-09-11 07:00:54.531 7fb0e40bfb00 -1 librbd: Format 1 image creation unsupported.
```

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",82,20,0,1,"2018-01-08 15:47:21","607.89"
"ceph/ceph-csi","66a0b0953e6b120a68f0a76f246d0aec057d8224","Madhu-1","2020-07-27 03:13:02","false","ci: update mergify rules for v3.0

updated mergify rules for auto backport
and merging for release-v3.0 branch.
Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",113,31,0,1,"2018-01-08 15:47:21","928.98"
"ceph/ceph-csi","0d9fcbc21bab1bd532664ffe25ce40299101677a","Madhu-1","2020-12-09 06:55:37","false","cephfs: remove unused cr Credentials

removed unused cr variable.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",73,35,0,1,"2018-01-08 15:47:21","1061.13"
"ceph/ceph-csi","1aaccd0e5adb35ff094b5ccc868e167cd4a51bb3","Madhu-1","2021-02-09 10:32:40","false","e2e: add validation for subvolumePath

as we are adding the subvolumepath to the
PV spec. this commits adds an E2E testing
to verify it.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",83,37,0,1,"2018-01-08 15:47:21","1126.53"
"ceph/ceph-csi","04f2261e600f804977a80c1a225b714c42d9de2f","Madhu-1","2022-01-21 06:58:52","false","deploy: support rook deployment for v1.8+

In Rook v1.8+ the path for the deployment articafts
are changed from `""cluster/examples/kubernetes/ceph`
to `deploy/examples`.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",41,48,1,1,"2018-01-08 15:47:21","1473.63"
"ceph/ceph-csi","6ba0cd58b9ad75505e5486c41d6af61234d1bae3","Madhu-1","2020-06-24 07:01:06","false","rbd: add code to store/retrieve the image ID

cephcsi need to store and retrieve the rbd image ID
in the omap as we need the image ID to add a
task to remove the image from the Trash.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",115,29,0,1,"2018-01-08 15:47:21","896.13"
"ceph/ceph-csi","e5049879846350e9c7d738bfeeee7dd0a7fce8de","iPraveenParihar","2023-09-27 10:09:11","false","rbd: update snap RbdImageName

This commit updates the snapshot RbdImageName with the clone
RbdImageName before snapshot creation. This will fix the
incorrect log statement.

Signed-off-by: Praveen M <m.praveen@ibm.com>",20,69,1,0,"2018-01-08 15:47:21","2085.02"
"ceph/ceph-csi","ff3e84ad6723dd595ee2fa910381d25d806914ea","Madhu-1","2023-08-17 05:15:28","false","rebase: update kubernetes to 1.28.0 in main

updating kubernetes to 1.28.0
in the main repo.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",25,67,1,1,"2018-01-08 15:47:21","2044.81"
"ceph/ceph-csi","2e2e9044c087fa096d39901516f2bc9690455906","yati1998","2023-06-09 10:42:50","false","rbd: get lastsyncbytes and lastsycduration for volrep

This commit get more information from the description
like lastsyncbytes and lastsyncduration and send them
as a response of getvolumereplicationinfo request.

Signed-off-by: Yati Padia <ypadia@redhat.com>",32,65,1,0,"2018-01-08 15:47:21","1977.04"
"ceph/ceph-csi","b258628b05a69ebc8545da92d5ca5d2cc8c0a4b1","humblec","2022-11-11 05:15:25","false","helm: get rid of storage group enablement based on the version
deploy: remove beta storage group mention from csidriver yaml

the kubernetes version based enablement of storage api group
enablement is no longer requried and its already on v1 for
supported kubernetes versions.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",36,58,1,1,"2018-01-08 15:47:21","1763.56"
"ceph/ceph-csi","29870cdbcc049fe58fa130dc83113138309e357d","humblec","2022-05-17 08:36:20","false","helm: remove topology RBAC section for cephfs deployment

At present CephFS does not support topology aware provisioning and this
commit remove the same.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",37,52,1,1,"2018-01-08 15:47:21","1589.7"
"ceph/ceph-csi","6d83df9cc93f5ebe7132ab01db9f537bd12f70ae","nixpanic","2022-02-25 12:16:15","false","nfs: add basic provisioner with create/delete procedures

These NFS Controller and Identity servers are the base for the new
provisioner. The functionality is currently extremely limited, follow-up
PRs will implement various CSI procedures.

CreateVolume is implemented with the bare minimum. This makes it
possible to create a volume, and mount it with the
kubernetes-csi/csi-driver-nfs NodePlugin.

DeleteVolume unexports the volume from the Ceph managed NFS-Ganesha
service. In case the Ceph cluster provides multiple NFS-Ganesha
deployments, things might not work as expected. This is going to be
addressed in follow-up improvements.

Lots of TODO comments need to be resolved before this can be declared
""production ready"". Unit- and e2e-tests are missing as well.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",42,50,1,1,"2018-01-08 15:47:21","1507.85"
"ceph/ceph-csi","76064d8e34eb40bc9a4f66fd65021052cdaccb35","Madhu-1","2022-09-07 06:20:45","false","cephfs: retry subvolumegroup creation

Incase the  subvolumegroup is deleted
and recreated we need to restart the
cephcsi provisioner pod to clear cache
that cephcsi maintains. With this PR
if cephcsi sees NotFound error duing
subvolume creation it will reset the cache
for that filesystem so that in next RPC
call cephcsi will try to create the
subvolumegroup again

Ref: https://github.com/rook/rook/issues/10623

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",38,56,1,1,"2018-01-08 15:47:21","1700.61"
"ceph/ceph-csi","b7d856e5628ccf761cc17fac4cac923635647b64","gman0","2018-04-13 12:49:49","false","cephfs/volume: added createVolume and purgeVolume",2,3,0,0,"2018-01-08 15:47:21","94.88"
"ceph/ceph-csi","112c545189752aeba5255daa74d65a9dc3067b06","gman0","2019-01-28 10:15:42","true","Merge pull request #151 from Madhu-1/app

Move ceph and rbd main files to app folder",22,13,0,0,"2018-01-08 15:47:21","385.02"
"ceph/ceph-csi","c2cda4909ba653a1c9fb0dd0e8ec62fd52e672ad","humblec","2021-06-25 13:07:12","false","e2e: reformat long lines in this package to 120 chars

We have many declarations and invocations..etc with long lines which are
very difficult to follow while doing code reading. This address the issues
in 'e2e/upgrade_*.go' files to restrict the line length to 120 chars.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",118,41,0,1,"2018-01-08 15:47:21","1262.64"
"ceph/ceph-csi","411ad33641c6bcc968ba1de4b47e98f50d30a2cb","humblec","2022-05-17 08:00:07","false","deploy: update node-driver-registrar to latest version

This commit update the node driver registrar to the latest
available version.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",37,52,1,1,"2018-01-08 15:47:21","1589.68"
"ceph/ceph-csi","de2489ed7d3afb1322c12ad6ec4f5cc57fe38f81","humblec","2022-01-17 12:58:38","false","deploy: update csi-snapshotter sidecar to v5.0.1

This release of snapshotter has a breaking change as mentioned
in the release note:

Refer#
[1]: https://github.com/kubernetes-csi/external-snapshotter/releases/tag/v5.0.0

RBAC rules are also updated with this commit.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",41,48,1,1,"2018-01-08 15:47:21","1469.88"
"ceph/ceph-csi","c533d0125ace99a43518e712f0caf13006612701","Madhu-1","2020-04-16 06:40:14","false","script: Add script to install snapshot-controller

Added script and snapshot-controller PSP
file to install snapshot-controller

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",102,27,0,1,"2018-01-08 15:47:21","828.12"
"ceph/ceph-csi","e7a043271de79b7bc1f5718655605ad6f3774600","Madhu-1","2020-08-11 12:20:19","false","cephfs: replace Errorf with ErrorLog in cloneSnapshot

replace Errorf with ErrorLog in cloneSnapshot
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.36"
"ceph/ceph-csi","7d229c2369e1f0ca4f85d781a4376abf6cefb9ed","Madhu-1","2020-11-19 09:20:59","false","build: update imagepullpolicy for vault

this allows the image to be reused instead of pulling
it again.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",82,34,0,1,"2018-01-08 15:47:21","1041.23"
"ceph/ceph-csi","810e285c5043692348b4e9357958726483ff6800","Madhu-1","2021-12-21 13:40:16","false","rbd: reset dummy image id

dummy image rbdVolume struct is derived
from the actual one rbdVolume of the
volumeID sent in the EnableVolumeReplication
request. and the dummy rbdVolume struct contains
the image id of the actual volume because
of that when we are repairing the dummy
image the image is sent to trash but not
deleted due to the wrong image ID. resetting
the image id will makes sure the image id
is fetching from ceph cluster and same
image id will be used for manager operation.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",57,47,1,1,"2018-01-08 15:47:21","1438.66"
"ceph/ceph-csi","b114a8fdad01412447bef82c83a43cfc71628acc","Madhu-1","2021-12-09 05:39:03","false","ci: install go version specified in build.env

installed the go version specified in build.env
in the test docker image.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",50,47,1,1,"2018-01-08 15:47:21","1426.33"
"ceph/ceph-csi","c8d835e512b1bda16da9b6c256fac9e27ab11734","mcronce","2018-11-29 18:07:47","false","Makefile:  Change image tags from v0.3.0 to v1.0.0 to reflect new CSI version",16,11,0,0,"2018-01-08 15:47:21","321.1"
"ceph/ceph-csi","f59806caff9b10f139c6953def19d94b428a3cc1","gman0","2022-04-06 15:48:27","false","doc: added docs for snapshot-backed CephFS volumes

Signed-off-by: Robert Vasek <robert.vasek@cern.ch>",44,51,1,0,"2018-01-08 15:47:21","1550"
"ceph/ceph-csi","004133d74611ff2a6a1dad1e2a3b0d3833abbd00","nixpanic","2021-06-17 07:34:12","false","rebase: update golang.org/x/sys to latest version

Signed-off-by: Niels de Vos <ndevos@redhat.com>",112,41,0,1,"2018-01-08 15:47:21","1254.41"
"ceph/ceph-csi","2ab3e4036955c8058c46561b7933ae0628df3920","nixpanic","2023-06-02 12:30:51","false","build: address `interfacer` warning

Signed-off-by: Niels de Vos <ndevos@ibm.com>",31,65,1,1,"2018-01-08 15:47:21","1971.11"
"ceph/ceph-csi","07e9dede2cb10ceaa055b9b2486f688edf9008d6","Madhu-1","2022-03-10 11:57:38","false","rbd: check volume details from original volumeID

Checking volume details for the existing volumeID
first. if details like OMAP, RBD Image, Pool doesnot
exists try to use clusterIDMapping to look for the
correct informations.

fixes: #2929

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",44,50,1,1,"2018-01-08 15:47:21","1522.84"
"ceph/ceph-csi","8639015a9f18b98e865aacae768bd4df8320432c","humblec","2021-06-16 06:49:42","false","cleanup: correct initResources() function name typo

This function was wrongly declared with name initResouces() in e2e
utils package and this patch address the typo in the name

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",108,41,0,1,"2018-01-08 15:47:21","1253.38"
"ceph/ceph-csi","07890aace68b35e3d0c1f0b9bb8853c2293a4181","humblec","2020-08-08 07:49:02","false","doc: correct rbd snap-clone doc

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",119,31,0,1,"2018-01-08 15:47:21","941.17"
"ceph/ceph-csi","b3fbcb9c95e8499d2f2e5b7ec40876f66c0f825e","Madhu-1","2020-12-15 10:07:28","false","rbd: read configuration from the configmap

if the kms encryption configmap is not mounted
as a volume to the CSI pods, add the code to
read the configuration from the kubernetes. Later
the code to fetch the configmap will be moved to
the new sidecar which is will talk to respective
CO to fetch the encryption configurations.

The k8s configmap uses the standard vault spefic
names to add the configurations. this will be converted
back to the CSI configurations.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",76,35,0,1,"2018-01-08 15:47:21","1067.26"
"ceph/ceph-csi","f05c8ed2a70d50a9efe3da3cbd8d0f31b9bf8725","Madhu-1","2020-07-06 06:29:58","false","journal: remove unused rados CLI functions

Removed unused rados CLI functions, as rados
CLI is replaced with go-ceph bindings.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",112,30,0,1,"2018-01-08 15:47:21","909.11"
"ceph/ceph-csi","008c82c1e70a099b0ee5723115cfb2f1851b8e7d","Madhu-1","2019-01-28 12:18:19","false","Fix gometalinter issues

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",22,13,0,1,"2018-01-08 15:47:21","385.1"
"ceph/ceph-csi","825211730cce9c6a909e66fb9e7248ea35c17c8e","Rakshith-R","2021-07-22 10:12:19","false","rbd: fix snapshot id idempotency issue

This commit fixes snapshot id idempotency issue by
always returning an error when flattening is in progress
and not using `readyToUse:false` response.

Signed-off-by: Rakshith R <rar@redhat.com>",119,42,0,1,"2018-01-08 15:47:21","1289.52"
"ceph/ceph-csi","1a7b365b9581c864110607efe628b43707b3f39d","gman0","2018-05-18 16:17:37","false","cephfs: ceph config filename is now mixed with volume UUID",3,4,0,0,"2018-01-08 15:47:21","130.02"
"ceph/ceph-csi","02fdf238b0c05eab3ac39fed70029003c669894e","mkimuram","2018-09-10 19:16:17","false","Add configurations to handle kubelet-plugin-watcher to sample yaml files

Fixes: #73",9,8,0,0,"2018-01-08 15:47:21","242.15"
"ceph/ceph-csi","bc354b6fb5613d394a8da7b1cb2467a7a7373edc","humblec","2022-01-10 02:58:51","false","rbd: add BaseURL and tokenURL configuration

This commit adds optional BaseURL and TokenURL configuration to
key protect/hpcs configuration and client connections, if not
provided default values are used.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",43,48,1,1,"2018-01-08 15:47:21","1462.47"
"ceph/ceph-csi","a099834763f020c4d9fa50808f2ab3a4da6c6441","rootfs","2019-01-08 17:14:34","true","Merge pull request #116 from mickymiek/rbac-cm-issue

fix rbac rules for configmaps",17,12,0,0,"2018-01-08 15:47:21","365.31"
"ceph/ceph-csi","c7c682b055c1f52a8b7d8ab39f11904e705308d9","rootfs","2019-01-16 12:17:42","true","Merge pull request #129 from Madhu-1/update-make

update Make clean",17,12,0,0,"2018-01-08 15:47:21","373.1"
"ceph/ceph-csi","10192f9a3ec52fc26c1023b2880cfb71c7cd4e0d","humblec","2019-06-07 10:23:03","true","Merge pull request #410 from Madhu-1/fix-e2e

use filesystem-test.yaml in e2e",78,17,0,1,"2018-01-08 15:47:21","515.02"
"ceph/ceph-csi","a9446c328ec152cc609dbfc31adf7021872cc2f5","humblec","2022-08-18 09:36:52","false","doc: correct e2e documentation formatting

This commit address formatting and alligment issues in e2e README.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",41,55,1,1,"2018-01-08 15:47:21","1680.74"
"ceph/ceph-csi","4a649fe17fd168142c0274a33d7d57accdfbfef9","yati1998","2021-07-08 14:59:34","false","cleanup: resolve godot linter

This commit resolves godot linter issue
which says ""Comment should end in a period (godot)"".

Updates: #1586

Signed-off-by: Yati Padia <ypadia@redhat.com>",124,42,0,0,"2018-01-08 15:47:21","1276.72"
"ceph/ceph-csi","bfda5fa57fe01e387cba2d16ec01f8e41add1017","yati1998","2021-07-13 06:41:49","false","cleanup: resolve revive linter issue

revive linter checks for var-declaration
format.
For example:
""e2e/rbd_helper.go:441:36: var-declaration:
should drop = nil from declaration of
var noPVCValidation; it is the zero value (revive)
var noPVCValidation validateFunc = nil""

Updates: #1586

Signed-off-by: Yati Padia <ypadia@redhat.com>",124,42,0,0,"2018-01-08 15:47:21","1280.37"
"ceph/ceph-csi","4e529e66439fd391e5ac41a6be4d84931f0e5138","Madhu-1","2019-07-25 14:17:22","false","Fix dep check issue in master

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",76,18,0,1,"2018-01-08 15:47:21","562.19"
"ceph/ceph-csi","50d6ea825cb1dc377a79dae7e6b8f3622283aaae","Madhu-1","2021-12-14 09:10:36","false","rbd: remove retrieving volumeHandle from PV annotation

we have added clusterID mapping to identify the volumes
in case of a failover in Disaster recovery in #1946.
with #2314 we are moving to a configuration in
configmap for clusterID and poolID mapping.
and with #2314 we have all the required information
to identify the image mappings.
This commit removes the workaround implementation done
in #1946.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",49,47,1,1,"2018-01-08 15:47:21","1431.47"
"ceph/ceph-csi","f1d61070cf2c69dc21c947d70b57f2964c9f7275","Madhu-1","2019-07-18 15:16:19","false","remove work around for golangci-lint installation

as https://github.com/golangci/golangci-lint/issues/575
is fixed now.removing the workaround in CI

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",70,18,0,1,"2018-01-08 15:47:21","555.23"
"ceph/ceph-csi","e5787f24b07734f85cbb8cb401e97f2f644e0c44","nixpanic","2021-04-19 07:10:06","false","rebase: update minikube to version 1.19.0

See-also: https://github.com/kubernetes/minikube/releases/tag/v1.19.0
Fixes: #1972
Signed-off-by: Niels de Vos <ndevos@redhat.com>",88,39,0,1,"2018-01-08 15:47:21","1196.39"
"ceph/ceph-csi","a92d8d7f2e040eab932b30965f32e798203d2d14","agarwal-mudit","2020-09-30 04:58:08","false","deploy: update csi sidecar images

This PR makes the changes in csi templates and
upgrade documentation required for updating
csi sidecar images.

Signed-off-by: Mudit Agarwal <muagarwa@redhat.com>",129,33,0,0,"2018-01-08 15:47:21","992.05"
"ceph/ceph-csi","353fa5e65c4330cb16422fbe1d1a22b4a34e29d8","Yuggupta27","2020-12-16 11:26:46","false","helm: Update values for storage class and secret

Add values for storage class and secret templates for
ceph-csi-cephfs helm chart.

Signed-off-by: Yug <yuggupta27@gmail.com>",76,35,0,0,"2018-01-08 15:47:21","1068.32"
"ceph/ceph-csi","dd6ce7b44120d9969bc7df1f018b8fa3af58efab","Madhu-1","2021-02-03 12:45:39","false","rbd: fix error check when reading vaultCAFromSecret

check correct error variable when reading
vaultCAFromSecret.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",83,37,0,1,"2018-01-08 15:47:21","1121.62"
"ceph/ceph-csi","81b52b311df18126a351d28439cbf9cb7c0477c8","Madhu-1","2020-08-11 11:24:15","false","cephfs: replace klog.Error with util.ErrorLog in ControllerExpand

replace klog.Error with util.ErrorLog in ControllerExpand
for context based logging.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",119,31,0,1,"2018-01-08 15:47:21","943.32"
"ceph/ceph-csi","294355590422f280953991d6a55553ce1a3db15c","Madhu-1","2022-02-01 05:43:25","false","cephfs: fix omap deletion in DeleteSnapshot

the omap is stored with the requested
snapshot name not with the subvolume
snapshotname. This fix uses the correct
snapshot request name to cleanup the omap
once the subvolume snapshot is deleted.

fixes: #2832

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",43,49,1,1,"2018-01-08 15:47:21","1484.58"
"ceph/ceph-csi","1fa8939e8470fcf3be131939e40f25bc15ecf06f","nixpanic","2021-11-03 08:58:45","false","e2e: retry when a ""transport is closing"" error is hit

There have been occasional CI job failures due to ""transport is closing""
errors. Adding this error to the isRetryableAPIError() function should
make sure to retry the request until the connection is restored.

Fixes: #2613
Signed-off-by: Niels de Vos <ndevos@redhat.com>",55,46,0,1,"2018-01-08 15:47:21","1391.47"
"ceph/ceph-csi","d865670f9749acb95f2487b513479060b8e287a8","Yuggupta27","2021-04-22 06:44:10","false","deploy: pass --namespace flag before passing namespace

Since we parse multiple options from command line in install-helm,
script will not recognize any random string directly as namespace.
To inform script about namespace, `--namespace` flag is used before
passing namespace.

Signed-off-by: Yug <yuggupta27@gmail.com>",87,39,0,0,"2018-01-08 15:47:21","1199.37"
"ceph/ceph-csi","f6f86242591d5550c2cbfc48a1718fd77912453b","gman0","2018-04-13 14:04:26","false","Revert ""vendor: applied https://github.com/kubernetes-csi/drivers/commit/e18c7cf3009fc6c5bb953bf3a80d1ecab148a1de @sbezverk""

This reverts commit 70f954ddc0f2e4459c750ef4d19d033978cf7398.",2,3,0,0,"2018-01-08 15:47:21","94.93"
"ceph/ceph-csi","772fe8d6c8c07a6f11b92f9297efbe24a9236364","Madhu-1","2022-03-15 11:00:32","false","util: add helper function to strip kube parameters

added helper function to strip the kubernetes
specific parameters from the volumeContext as
volumeContext is storaged in the PV volumeAttributes

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",45,50,1,1,"2018-01-08 15:47:21","1527.8"
"ceph/ceph-csi","3c50cb124b78644b4d82cf22509db55978445257","Madhu-1","2019-02-07 09:59:10","false","Fix static check for .sh files

Signed-off-by: Madhu Rajanna <mrajanna@redhat.com>",26,13,0,1,"2018-01-08 15:47:21","395.01"
"ceph/ceph-csi","13b85d09fdfc66032b0a636b35fb65d4f6750c2b","Madhu-1","2021-05-25 09:40:52","false","ci: add wait flag to minikube start

add wait flag to minikube start to wait
for all components to be ready by default.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",100,40,0,1,"2018-01-08 15:47:21","1232.5"
"ceph/ceph-csi","4fcd649fa720b2469242ecdc7203473e1dae3739","Madhu-1","2020-10-28 07:43:52","false","e2e: add testing for controller

This commits adds an E2E testing
to verify the metadata created by controller,
We are not checking the generated omap data,
but we will be verify PVC resize and binding
pvc to application.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",74,34,0,1,"2018-01-08 15:47:21","1020.16"
"ceph/ceph-csi","cb08a63a02e1b011c2682f5db7e4e0308477a482","Madhu-1","2020-02-19 08:37:11","false","Fix flag provided but not defined issue

in go 1.13 we are facing above issue,
This commit fixs by calling testing.Init()

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",108,25,0,1,"2018-01-08 15:47:21","771.2"
"ceph/ceph-csi","677be13b110e83158c68a4162ae7add67e81c597","Madhu-1","2019-09-04 09:44:25","true","Merge pull request #583 from nixpanic/mergify/dismiss_reviews

mergify: Remove approved review when a PR changes",87,20,0,1,"2018-01-08 15:47:21","602"
"ceph/ceph-csi","22a86c568e33495aab58339ab4fd3de2b4ab5ab1","Madhu-1","2020-05-04 10:01:59","false","rbd: default nouuid if the formattype is xfs

The problem happens when multiple PVCs with the
same UUID are attached/mounted on a node. This
can happen after creating a PVC from a snapshot,
or cloning a PVC.

make nouuid as the default mount option if
the format type is xfs to avoid mounting
issues.

updates: #966

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",109,28,0,1,"2018-01-08 15:47:21","847.26"
"ceph/ceph-csi","253858c104238cc48a0dd1ec6b488c89c7f75339","nixpanic","2021-02-25 08:19:23","false","doc: rename ""master"" branch to ""devel""

Signed-off-by: Niels de Vos <ndevos@redhat.com>",90,38,0,1,"2018-01-08 15:47:21","1142.44"
"ceph/ceph-csi","b629b22cf065b05654c8a45f5a43322d74406b29","Madhu-1","2019-02-27 13:59:11","false","Add csinodeinfos rules

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",31,14,0,1,"2018-01-08 15:47:21","414.17"
"ceph/ceph-csi","ad3a3d704af100ea669606504e43acf7a316e749","iPraveenParihar","2023-10-18 08:15:53","false","cephfs: remove snapshot protect/unprotect

This commit eliminates the code for protecting and unprotecting
snapshots, as the functionality to protect and unprotect snapshots
is being deprecated.

Signed-off-by: Praveen M <m.praveen@ibm.com>",21,69,1,0,"2018-01-08 15:47:21","2105.94"
"ceph/ceph-csi","c4856195a2b378fe02d877c2c8184b8e311f9fd3","nixpanic","2021-03-26 14:41:51","false","doc: add description for Amazon KMS provider

Signed-off-by: Niels de Vos <ndevos@redhat.com>",88,39,0,1,"2018-01-08 15:47:21","1173.7"
"ceph/ceph-csi","cf0fd2bfebdb472362cf46a8f2b682276092bcf0","Rakshith-R","2023-05-26 10:10:47","false","ci: fix pull-request-commentor workflow

Fix if condition in workflow to account
for ok-to-test label on newly created prs.

Signed-off-by: Rakshith R <rar@redhat.com>",30,65,1,1,"2018-01-08 15:47:21","1964.02"
"ceph/ceph-csi","d5b7543565026dbe26f5f00d176a7be12d69f5cd","rootfs","2018-09-21 14:38:50","false","allow monitors be embedded in credential secret

Signed-off-by: Huamin Chen <hchen@redhat.com>",7,8,0,0,"2018-01-08 15:47:21","252.95"
"ceph/ceph-csi","d9389445288b927e0f42e5bf75cfaabd186790b7","rootfs","2019-02-27 20:00:28","true","Merge pull request #233 from gman0/fuse-unmount-wait

cephfs: wait for FUSE to exit after unmount",31,14,0,0,"2018-01-08 15:47:21","414.43"
"ceph/ceph-csi","85b5e7ed5103f9959f9123c2dce8f64becd2fee9","rollandf","2019-02-25 13:09:59","false","Remove requirement for ceph config and keyring files",30,14,0,0,"2018-01-08 15:47:21","412.14"
"ceph/ceph-csi","b43108f35bd894a04eb81c411dfc319e8f233a7f","Cynerva","2018-10-12 16:35:34","false","csi-rbdplugin: Install xfsprogs to support fsType: xfs",11,9,0,0,"2018-01-08 15:47:21","274.03"
"ceph/ceph-csi","233ac8f936646ae2776f4aed74fe9ec68c28c0e1","humblec","2022-01-07 08:47:03","false","deploy: adjust minikube deployment for RWOP support

The ReadWriteOncePod feature gate need to be enabled only when we
are operating on kube 1.22 or above cluster. This commit adds the
logic to parse the kubernetes cluster at time of minikube deployment
and if it is above v1.22, enable the RWOP feature gate

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",44,48,1,1,"2018-01-08 15:47:21","1455.46"
"ceph/ceph-csi","b700fa43e6c161a8b05a2c6a9506b78217b78c4c","nixpanic","2021-07-06 08:32:12","false","doc: add example for Tenant ServiceAccount

The ServiceAccount ""ceph-csi-vault-sa"" is expected to be placed in the
Namespace ""tenant"" so that the provisioner and node-plugin fetch the
ServiceAccount from a Namespace where Ceph-CSI is not deployed.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",125,42,0,1,"2018-01-08 15:47:21","1274.45"
"ceph/ceph-csi","eb63e796a878ecb3fd0a96ad2690dcef1a239221","nixpanic","2020-11-19 13:03:48","false","e2e: deleted secrets from Vault are available, but empty

Once the Vault API removed a secret, the contents will have been wiped.
The key is still available, until it gets destroyed. This causes the e2e
test to detect an empty secret, and assume that it has not been deleted
yet.

By requesting the `data` field from the secret, an error is thrown in
case the secret has been wiped. This makes it possible for the e2e test
to detect that the secret has been removed and scheduled for destroying.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",83,34,0,1,"2018-01-08 15:47:21","1041.39"
"ceph/ceph-csi","06f411bbf3aa981469dff4c64b912f950015868c","gman0","2018-03-09 16:05:19","false","cephfs: volumes are now created for separate ceph users with limited access to fs

Uses a slightly modified version of https://github.com/kubernetes-incubator/external-storage/blob/master/ceph/cephfs/cephfs_provisioner/cephfs_provisioner.py
This should be rewritten properly in Go, but for it works for now - for demonstration purposes

TODO:
* readOnly is not taken into account
* controllerServer.DeleteVolume does nothing",2,2,0,0,"2018-01-08 15:47:21","61.01"
"ceph/ceph-csi","069140e74a2a1f47f3395a6fce8a34e91e696e65","gman0","2018-08-08 15:58:52","true","Merge pull request #65 from clkao/execCommandJson-error

Log error output for execCommandJson as well.",7,7,0,0,"2018-01-08 15:47:21","210.01"
"ceph/ceph-csi","3f3489367c546dc28e468abe6fa576fd8c51accb","Rakshith-R","2021-04-08 11:28:02","false","cleanup: correct linter name mnd to gomnd

Signed-off-by: Rakshith R <rar@redhat.com>",85,39,0,1,"2018-01-08 15:47:21","1186.57"
"ceph/ceph-csi","a28a4a4285f90efbdec65197b1eb6fdeb2c7fac5","Madhu-1","2021-12-15 05:44:24","false","rbd: resize the volume created from volume

If the requested volume size is greater than
the parent volume size, resize the cloned volume
after creating a final clone from a parent volume.

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",50,47,1,1,"2018-01-08 15:47:21","1432.33"
"ceph/ceph-csi","9414a76a865f09a3a938da13afa5aa67329baa5a","yati1998","2021-06-30 04:50:55","false","ci: disable exhaustivestruct linter

This commit disables the exhaustivestruct linter
as it is meant to be used only for special cases.
We don't need to enable this for our project.

Fixes: #2224

Signed-off-by: Yati Padia <ypadia@redhat.com>",120,42,0,0,"2018-01-08 15:47:21","1267.29"
"ceph/ceph-csi","3a61f24c1d5ffb47fae9bab3ddedba17f416a55e","Madhu-1","2023-10-19 07:28:42","false","rebase: update csi spec to latest release

updating csi spec to v1.9.0 release

Signed-off-by: Madhu Rajanna <madhupr007@gmail.com>",21,69,1,1,"2018-01-08 15:47:21","2106.9"
"ceph/ceph-csi","b82af7559bdad81d970daea9d9c60c82095d65f8","nixpanic","2022-04-08 11:14:15","false","e2e: add -clusterid=... for selecting a Ceph cluster

The Ceph cluster-id is usually detected with `ceph fsid`. This is not
always correct, as the the Ceph cluster can also be configured by name.
If the -clusterid=... is passed, it will be used instead of trying to
detect it with `ceph fsid`.

Signed-off-by: Niels de Vos <ndevos@redhat.com>",44,51,1,1,"2018-01-08 15:47:21","1551.81"
"ceph/ceph-csi","b28ff63a29bb22a5bd01dc1d09c01dcd300de4f9","nixpanic","2020-10-02 07:57:18","false","cephfs: make getFscID() a method of volumeOptions

Signed-off-by: Niels de Vos <ndevos@redhat.com>",115,33,0,1,"2018-01-08 15:47:21","995.17"
"ceph/ceph-csi","56ac1434506c4cc01e84adc836847509dc08d5ff","humblec","2021-08-12 10:02:52","false","rebase: update go-ceph version to v0.11.0

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",115,43,0,1,"2018-01-08 15:47:21","1309.51"
"ceph/ceph-csi","aef3cc0c3cb757882a677855e6ffbea7969d64b8","humblec","2021-11-03 12:08:32","false","e2e: remove 1.15 based test enablement in cephfs

Considering we are far out of these release and only care about
kubernetes releases from v1.20, there is no need to have this
version check in place for the tests.

Signed-off-by: Humble Chirammal <hchiramm@redhat.com>",56,46,0,1,"2018-01-08 15:47:21","1391.6"
