"name_with_owner","sha","author","date","verified","message","num_issues","commit_month","has_ci"
"thesofproject/sof","6cda26cb2d2493f1ebc096f49fd7d77b73c0839b","btian1","2023-08-03 02:41:07","false","copier-host: remove duplicated frame format assignment

since there is only one dev, there is no need to do
duplicated frame format assignment.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",29,62,1
"thesofproject/sof","07805bfb091a2eb55759d1f863f46796ffe22973","btian1","2023-05-09 01:46:54","false","ipcgtw: split the ipcgtw_free function

Split the ipcgtw_free() function to add a helper function,
ipcgtw_zephyr_free() in preparation for this to be called
from both a ipcgtw device and copier device.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",53,59,1
"thesofproject/sof","5397ea80159b8d2c9ee07554d411760fd7b23dd7","btian1","2023-08-21 05:21:15","false","audio: remove config: CONFIG_COMP_LEGACY_INTERFACE

This config is used for old intel cavs 1.x platform, now, those
platform are removed from sof, this config also need remove,
related code got removed as well.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",24,63,1
"thesofproject/sof","3658341a3f963107f254d8264b7e250b8b64af9d","plbossart","2021-01-28 16:26:38","false","topology: sof-cml/icl-rt700: align DMIC support with HDaudio

Somehow we use different configurations for the DMIC, remove
everything in this file and rely on the same macros.

The only difference with HDaudio is the pipeline and PCM device
numbers.

the old topology names sof-icl-rt700 and sof-cml-rt700 alias to the
same 4ch topology, when the kernel looks for the 2ch or 4ch versions
we can remove it. Make then break.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",67,32,0
"thesofproject/sof","630e988a975025c3f36acc2da5b1266bbf5b2a8e","lrgirdwo","2018-09-28 15:18:13","false","sue: scripts: Add sue creek support into buildall

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",37,4,0
"thesofproject/sof","151c338e2f08361e71bcaaba019008759eeeaffb","plbossart","2019-01-16 05:08:04","false","src/drivers/intel/cavs/sue-ipc.c: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","85896a4c585ae8330acdc267e2a5c3792245b47f","plbossart","2020-02-20 21:26:26","false","kpb: remove useless assignments

Fix cppcheck warnings

[src/audio/kpb.c:202]: (style) Variable 'temp_ca_size' is assigned a
value that is never used.

[src/audio/kpb.c:742]: (style) Variable 'current_time' is assigned a
value that is never used.

[src/audio/kpb.c:946]: (style) Variable 'local_buffered' is assigned a
value that is never used.

[src/audio/kpb.c:948]: (style) Variable 'drain_interval' is assigned a
value that is never used.

[src/audio/kpb.c:954]: (style) Variable 'period_bytes_limit' is
assigned a value that is never used.

[src/audio/kpb.c:984]: (style) Variable 'local_buffered' is assigned a
value that is never used.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",80,21,0
"thesofproject/sof","b9faef1cb63b120bef0e926b4752f8b1a275a071","lrgirdwo","2021-01-27 10:30:33","false","drivers: idc: let users know core boot failure reason.

Trace the result of any secondary core boot failures.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",68,32,0
"thesofproject/sof","9f4af6b0134c0a1e65060496d43e742124df061a","plbossart","2021-08-10 20:22:40","false","topology1: soundwire: fix misleading comment on ALH buffer format

All platforms use s24le for ALH, fix misleading comment.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",117,38,0
"thesofproject/sof","cdd64aa9f64e55a340598a504dbffdd20c511df1","dbaluta","2021-05-04 08:29:07","false","codec_adapter: Remove processing loop

Calling codec_process() multiple times in a loop limits the minimum
pipeline period we can choose.

For example with AAC one codec_process() can take up to 0.7ms which
means that we cannot reliable set pipeline period to 1ms on i.MX where
DSP has only 1 core.

In order to avoid this and to simplify the code remove the processing
loop hence each codec_adapter_copy() call will call exactly once the
codec_process() function.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",81,35,0
"thesofproject/sof","f32a05698e8f4b7c22ccf5c7c5c3475b02498499","dbaluta","2022-04-12 16:35:23","false","codec_adapter: cadence: Only apply config is codec is prepared

Obviously this is a bug, but it works now because parameters are known
before prepare is done.

We will be introducing dynamic codec id set at prepare time, so there
will be a problem if apply config is called before codec is prepared.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",118,46,1
"thesofproject/sof","60112865ccdbb47267116e71af8eedd9dac6c2d5","dragosht","2020-01-07 09:29:02","false","sof: spinlock: Fix placement of spin_try_lock

Enabling CONFIG_DEBUG_LOCKS currently breaks the build for APL as
spin_try_lock is undefined.

src/drivers/intel/cavs/dmic.c:167:8:
error: implicit declaration of function 'spin_try_lock';
did you mean 'arch_try_lock'? [-Werror=implicit-function-declaration]
  ret = spin_try_lock(dai->lock);
        ^~~~~~~~~~~~~

Fix that by making sure spin_try_lock gets defined regardless of
either CONFIG_DEBUG_LOCKS is enabled or not.

Signed-off-by: Dragos Tarcatu <dragos_tarcatu@mentor.com>",71,19,0
"thesofproject/sof","1bf779eef7154c3e62abebb4774b6852fbe3ecc3","jajanusz","2019-07-22 14:43:36","false","test: mux calc_sample_s24le

Unit tests for calc_sample_s24le with up to 8 channels.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",47,14,0
"thesofproject/sof","c6e12d53d84ad6f4af09c36b581bfe16e078717c","jajanusz","2019-06-12 16:44:16","false","scripts: add documentation generator

Process of documentation building and publishing requires
3 repositories. It is troublesome for people that are responsible
f.e. only for documentation publishing. It makes the process
easier by turning some easy to break steps from publisher instructions
into a script.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",48,12,0
"thesofproject/sof","819c023d236ada6adbb8bc1610466e754c15f2ff","tmleman","2022-02-10 08:47:57","false","ipc4: fix pipeline reset

During pipeline reset all components remains in previous state. This
cause issue at pipeline deletion. This patch allowed to propagate state
transition to all pipeline components.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",109,44,1
"thesofproject/sof","964b7afa7454e593301e75806adf1aeeec8e32c5","marc-hb","2021-05-17 22:27:41","false","smex: don't corrupt the build with a bogus .ldc output

This made troubleshooting CMake issues more complicated.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",86,35,0
"thesofproject/sof","906508bd79f2bdd7c580dfc65dfe525ca798bc32","marc-hb","2022-12-15 07:27:33","false","xtensa-build-zephyr.py: checksum deterministic configs.c

.config is not deterministic because it has absolute paths in comments
and its order seems hard to predict. configs.c has the same information
generated in a determistic way.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",92,54,1
"thesofproject/sof","37b5893ee63c33672aff2594608beb53eafd22ac","marc-hb","2020-08-28 18:20:15","false","host-testbench.sh: clean up output files when tests are successful

Make git status great again.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,27,0
"thesofproject/sof","a351d02b6df1c6b65dd52ace43f2750b7f76f340","marc-hb","2022-01-25 01:45:32","false","cmake: simplify add_alsatplg2_command() macro

alsatplg accepts empty definitions -D """" so let's simplify
commit cb80023b229e (""topology2: fix build issues with no command line
definitions""); 10 lines shorter. The less CMake code the better.

Zero change, the build directory is bit for bit identical after this
commit.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",107,44,1
"thesofproject/sof","2fcab330b97dbdb3e54dc1f2ad10552af1fe97bc","marc-hb","2022-12-06 20:37:01","false","xtensa-build-zephyr.py: do not CMake-reconfigure rimage every time

It's pointless and hardcodes the CMake generator.

Also remove wrong comment added in commit
6cba64d2cbe3 (""xtensa-build-zephyr.py: fix a few minor pylint warnings"")
The rimage part of the comment was flat out wrong.
The smex part of the comment is correct but in the wrong place.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",100,54,1
"thesofproject/sof","a11aef245f64fd14100a41094a343430dbbdc311","lyakh","2019-05-02 10:33:08","false","dw-dma: fix regression

Commit e2b994ee0391 (""dw-dma: cleanup the whole driver"") introduced
bugs in bit-field calculations. This patch fixes them.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",47,11,0
"thesofproject/sof","785ebb87c9cfecc25dfe6341d2fb70d07f830823","wenliangwu","2022-12-30 02:01:46","false","drivers: mtk: separate sinegen control from memif

Sinegen control part is platform dependent and optional for debug
purporse. On the other hand, memif control driver which is platform
independent could be reused. As a result, sinegen control driver is
separated from afe-memif.c.

Signed-off-by: Trevor Wu <trevor.wu@mediatek.com>",93,55,1
"thesofproject/sof","ead5afa6c283dda934a5a2cc9aa365ca78c0dab3","cujomalainey","2021-06-02 23:14:26","false","probe: refactor function to decrease indent

following commit fixes a bug but to do the fix we need to allow
ourselves more room to add ifs, so lets pull out this function

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",82,36,0
"thesofproject/sof","53d471b56652bd6751f41452dd72a4d53c22fb62","aborisovich","2023-06-26 21:38:12","false","ipc4: notify Host on the failed IPC Device power transition

During IPC Device power transition errors may be encountered related to
invalid system state or IPC messages waiting to be send.
In this case we are going to send an IPC response to Host bypassing
schedulers. IPC Device will not change power state when errors occur
preventing whole system from the suspend.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",40,61,1
"thesofproject/sof","0b279e06bc1d3922bbfbc2143cd3636ee2d33b79","mrajwa","2019-07-25 19:22:57","false","kpb: move history buffer allocation to prepare

This change moves history buffer allocation
from kpb_new() to kpb_prepare(). This is to
folow the calling convention with kernel.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,14,0
"thesofproject/sof","4f1b438656dace304cdf43b6d05d02c6bb260c3d","mrajwa","2019-07-29 18:50:23","false","kpb: introduce draining intervals

This patch introduces and calulates draining intervals
as well as bytes limit per interval. It is all needed
to synchronize firmware draining speed with host read
speed. Basically in one period we fill half of host
buffer and give host some time (period_interval)
to read the data.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",51,14,0
"thesofproject/sof","053f4f90fee669b936e960839cd8c98ee661e1ad","mrajwa","2019-07-25 21:39:25","false","kpb: add timeout for buffering function

This patch adds timeout to buffering. So now
if we are stuck in buffering due to i.e
pointers corruption we can detect that, log
error message and leave that procedure.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,14,0
"thesofproject/sof","ae7b9119564771cbe0e95353435f5afa94bcc680","mrajwa","2020-07-07 10:37:11","false","topology: fix playback & capture pipelines to be timer driven

This patch fixes several pipelines which are DMA driven by default
but should be driven in timer domain.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",74,25,0
"thesofproject/sof","1e47e35e1235745e2de9a3cd50998c146afaa2a1","ymdatta","2020-02-19 13:12:22","false","audio: eq_fir: Add missing blank line after declaration

This makes code easier to read and fixes checkpatch.pl
warning: ""WARNING: Missing a blank line after
declarations""

Signed-off-by: Mohana Datta Yelugoti <ymdatta.work@gmail.com>",84,21,0
"thesofproject/sof","4cc0556ce360b6b033d645d9db698c19bd100995","keyonjie","2019-01-02 08:59:28","false","dai: only get dma channel at first config

For dais, we don't support change dma channel dynamically, so only get
dma channel at first config, ignore that for  latter dai_config
invokings to avoid dma channel leaking.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",50,7,0
"thesofproject/sof","caa48081863efa92f6fce1ff6df832e7e0fbd6f0","keyonjie","2019-05-14 10:30:29","false","topology: kwd: update detector configure blob to align with default
settings

We should load_mips to be 0, align values with default settings, that
is:

load_mips = 0, load_memory_size = 0, keyphrase_length = 0x780,
activation_shift = 0x3, activation_threshold = 0x3fff.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",65,11,0
"thesofproject/sof","06b8c0e51b3322ee981969158a4e879f8a265eb9","slawblauciak","2018-07-05 13:42:24","false","test: missing header

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",11,1,0
"thesofproject/sof","ab52fdc309c9c0cd97a528e11fe4316f97f09b5c","slawblauciak","2018-12-05 10:45:10","false","dma: ptr trace cleanup

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",42,6,0
"thesofproject/sof","b7a469e88498210144f99be4512f0407e3bd5890","keyonjie","2021-06-22 10:05:42","false","platform: cavs: add config item for IMR restore feature

Add kconfig item CAVS_IMR_D3_PERSISTENT to denote if IMR restore feature
will be used on an Intel cAVS platform.

It will be disabled by default, please only enable it where IMR content
is persistent when DSP in D3, as enabling it means we don't need to
re-downloading firmware binary to DSP SRAM so fast D3->D0 transition
will be supported.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",75,37,0
"thesofproject/sof","79e7a3d20636c9d4dec842c49770af43bd284bc2","slawblauciak","2019-06-19 10:18:59","false","dai: rename soundwire to alh

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",49,13,0
"thesofproject/sof","1e0fe580fa8097094009220bce6e823ded9c9b53","tlauda","2020-01-15 14:15:22","false","ipc: use platform_shared_commit() on msg

Uses platform_shared_commit() function to commit
shared ipc notifications list.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",75,19,0
"thesofproject/sof","54ed3528f6504b5e0afad02e45803dccccf4a1d9","tlauda","2019-06-12 08:32:21","false","dai: remove period_bytes from dai_data

Removes period_bytes from dai_data structure as
it's only needed in dai_params function. No need
to store it globally.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",49,12,0
"thesofproject/sof","f58b83387cf019f3434524e5b4f9f64a0bd7ebee","tlauda","2019-09-12 08:20:13","false","host: use blocking copy for one shot mode

Changes copy method for host working in one shot mode.
Blocking copy replaces interrupt based copy. In an effort
of extracting DMA interrupt based scheduling from DMA
to scheduler we need to minimize number of irq sources
in our flows. This patch also changes the interrupt
based implementation of traces copying through DMA.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",62,15,0
"thesofproject/sof","5721291f0e804a430ee5ca0bae6d81fb75f31d3c","tlauda","2020-01-21 10:57:21","false","component: remove debug trace

Removes debug trace, which has been merged by accident.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",79,20,0
"thesofproject/sof","66f937dd5294eb0c2868856b7280c1f203a37906","tlauda","2019-10-14 14:24:34","false","platform: remove unused MAX_PRELOAD_SIZE

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,16,0
"thesofproject/sof","d973410af9f7654e66e5a4df1d85979ef78a8733","tlauda","2020-02-03 15:55:01","false","idc: implement messages for controlling components

Implements IDC messages for controlling single components
running on slave cores. It will allow to create topologies,
where the whole pipeline is running on one core and some
processing component is running on other core due to
cycles limitation.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",76,20,0
"thesofproject/sof","faf12ac7a7582bdf5b1fdfa94a1076415552287a","tlauda","2019-09-16 11:38:41","false","dw-dma: rename DMA_AGGREGATED_IRQ definition

Renames DMA_AGGREGATED_IRQ to DW_DMA_AGGREGATED_IRQ
definition. This is more appropriate as it's not generic
DMA setting.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",62,15,0
"thesofproject/sof","53070fcf22ff49631074ba78a2eb65a8dd224de4","singalsu","2021-11-10 08:25:04","false","Audio: Mixer: Fix saturate of S24_LE PCM output

This patch adds a 24 bit mixer function. Previously 24 bit was
handled with 32 bit function. It did not properly saturate the
output to 24 bits.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",127,41,1
"thesofproject/sof","7d05389b63bab99a9c6b4ac6755766749f9b4983","singalsu","2022-01-18 17:43:15","false","Tools: Tune: EQ: Add  legend to frequency response plot

This patch adds legend to plot since it was difficult to see to
which play/capture channel which curve corresponded to. In script
selftest case a label called Reference is added to the legend.

Also an indentation issue is fixed in the script.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",113,43,1
"thesofproject/sof","7b8cef02d44a9fcc12262dc8f8a53ef4f46f79cb","singalsu","2022-11-08 09:16:49","false","Audio: SRC: Optimize generic C fir data pointer wrap

There is no need for the if statement since the pointer data
always wraps at this code location if the next loop is executed.
Next FIR calculate will start with new data pointer value, so
potentially wrong pointer value when n2 equals zero does not matter.

This patch saves in CML gcc build 2%, or 2.0 MCPS from 46.2 to 45.3
MCPS in stereo 44.1 kHz to 48 kHz conversion.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",93,53,1
"thesofproject/sof","c3814db96937f1f7b7caa6e764a93af096a7c392","singalsu","2021-06-08 11:02:05","false","Drivers: Intel: DMIC: Change active_fifos_mask to uint32_t

This patch does not change any functionality. The mask is no more
signed value and cache_to_uncache() needs a multiple of 32 bit type.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",79,36,0
"thesofproject/sof","d802fd7471dd11fa29db5e6bae2796ebc9e2cd13","singalsu","2020-09-10 15:36:27","false","Topology: Add TDFB setup m4 data blobs for mic arrays

These are data files created by the example scripts in
tools/tune/tdfb. The generation is time consuming and requires
Octave or Matlab.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",65,27,0
"thesofproject/sof","8ca07591c9786eb4c261d0e802f0ff286d4c8d84","singalsu","2023-10-26 09:15:10","false","Tools: Test: Topology: Avoid dependence to platform/intel/bxt.m4

A simplified copy of previous bxt.m4 is made as local
platform/generic.m4 with SSP and other platform definitions
for test topologies build. It is included to test-all,
test-capture, and test-playback macros definitions.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",7,65,1
"thesofproject/sof","374f8b31d5f695d7eb8f54f2fe6fcaa526f29b9d","singalsu","2018-09-06 09:16:29","false","EQ IIR: Fix just introduced bug in eq_iir_cache()

The component data pointer need to be retrieved after dev data
has been invalidated. If wrong order the cd may be set to garbage.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",31,3,0
"thesofproject/sof","80adcdf36a1d0e0590012fe73c7fd4d593a9b3cd","kv2019i","2022-12-19 14:55:24","false","sof-logger: print error if -u uart option is given with no infile

sof-logger -u 115200 -d /lib/firmware/sof-foo.ldc

Leads to silent failure as a NULL is passed to open(). Add
explicit error handling for this case.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",92,55,1
"thesofproject/sof","159cea157f61fb7dd4a7932b9dfaad0765c1f86b","bkokoszx","2018-11-26 16:08:47","false","tools: logger: removed uapi dependency

Logger now includes uapi directly from FW code.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",41,6,0
"thesofproject/sof","9714e32841cb1b7d16d7c7deb1d34f2a46f58e29","bkokoszx","2019-03-04 11:30:00","false","kbp: add sys_comp_kpb_init to do_task function

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",67,9,0
"thesofproject/sof","576373594bada9ef775c4251ead891b93e4b0c88","kv2019i","2022-10-05 08:49:43","false","zephyr: app: tune logging thread sleep and trigger threshold values

Logging output of SOF is sporadic in nature (unless debug configuration
is used) and it cannot be assumed that a steady flow of log messages
is output at all times. During stable state, there are either no or very
few messages output. When the DSP pipeline state is modified, there is
a flurry of event. Similarly upon errors, a burst of log messages is
output.

For better balance between delay in writing logs, and limiting overhead
of the logging thread, set new defaults to:
  CONFIG_LOG_PROCESS_TRIGGER_THRESHOLD=5
  CONFIG_LOG_PROCESS_THREAD_SLEEP_MS=100

The SLEEP_MS sets an upper bound how long a single log message can
stay in the log frontend buffer.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",98,52,1
"thesofproject/sof","528c7ebce0c1bcb50bcffeb30fc3be8cf549a98d","kv2019i","2023-03-10 12:14:35","false","platform: cannonlake: remove unused file idc.h

Remove one file that was missed in commit ""platform: support for cAVS
1.8 platforms"".

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",54,57,1
"thesofproject/sof","9fe51a4b58d595426747dc508d75e7543f913d6d","bkokoszx","2018-08-09 08:33:22","false","drivers: apl-ssp: code optimization for DSP_A/B

The only difference between DSP_A and DSP_B modes
is FSRT bit in sspsp register and start delay
set to 1 in DSP_A mode.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",18,2,0
"thesofproject/sof","d2fccbdf332b68164a52ed5953859733bbe92dfc","btian1","2023-10-24 07:57:32","false","audio: copier: move copier generic header file to copier folder

This header file is referred by external modules, add relative
path for external module usage.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",8,65,1
"thesofproject/sof","b0abfe5e2078f6e8d8fc347452bc15b3c56dc256","btian1","2023-10-19 08:49:14","false","Topology2: condense tplg audio format for s32 format

Condense src format from s32 to multiple audio format.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",12,65,1
"thesofproject/sof","a4b72010302b34b3c53ebe81ded174b8f21841d6","ktrzcinx","2020-01-24 12:08:30","false","audio_stream: Use enum data type for frame_fmt field

Field frame_fmt is treated as sof_ipc_frame in code so data type
in declaration should be same. Update field comment to be more
appropriate with new data type.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",79,20,0
"thesofproject/sof","01bbc3053d986d0a1d8eebea897af0b24a9a7eab","ktrzcinx","2020-06-02 05:53:59","false","ipc: Remove redundant `sof` struct definition

File with `sof` struct definition is included - `sof/sof.h`,
so this line wasn't needed.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",94,24,0
"thesofproject/sof","d97e9291e11be3323e8369ce7eb9c645723442f8","ktrzcinx","2020-06-22 08:19:04","false","logger: Add possibility to hide timestamps

After removing timestamps it is possible to compare output logs
with tools like diff or similar. Moreover then output logs are
in more compact form.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",72,25,0
"thesofproject/sof","915d67ee8714ba628b43d20c5b171037789ded09","ktrzcinx","2020-07-14 09:29:22","false","dai: Assign dma_stream params

Each stream should have set valid metadata information.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",80,25,0
"thesofproject/sof","b90f4dd044a2fef81057414df59e6f438005b88c","RanderWang","2020-01-14 08:27:15","false","topology: sof-icl-rt711-rt1308-rt715: refine dai index setting

If mono is defined, dai index 3 is not used and DMIC uses index
4. Now sdw machine driver generates dai dynamically with consecutive
dai index. To align with machine driver, refine topology to also use
consecutive index.

Signed-off-by: Rander Wang <rander.wang@intel.com>",77,19,0
"thesofproject/sof","fe5b959adbebaf66ba7c7c087b53412d6bea1f43","RanderWang","2022-11-22 06:12:33","false","rimage: correct module type

Currently some module types are incorrect and it was set by the change
sequence. The module type is used by windows driver not Linux driver.
It is defined in the following enum definition in cavs_ext_manifest.h.

UpDwMix module type is 5, Mux is 6 kpb is 11, and Selector is 12. The
module ASRC, GAIN, PROBE are type of efx (9) according to spec.

enum mod_type {
        ebasefw = 0,
        emixin,
        emixout,
        ecopier,
        epeakvol,
        eupdwmix,
        emux,
        esrc,
        ewov,
        efx,
        eaec,
        ekpb,
        emicselect,
        efxf,   /*i.e.SmartAmp */
        eaudclass,
        efakecopier,
        eiodriver,
        ewhm,
        egdbstub,
        esensing,
        emax,
        einvalid = emax
} ;

Signed-off-by: Rander Wang <rander.wang@intel.com>",96,54,1
"thesofproject/sof","cbf6f5815868d0e880bef55a8deb20fb036f2b51","RanderWang","2021-11-03 06:39:40","false","ipc4: mixer: fix mixin buffer connection

For mixin + mixout case, we use mixer to replace mixout
and skip mixin component. In this case we need to connect
the buffer between mixin and mixout to mixin then it can
be free when mixin is free.

Signed-off-by: Rander Wang <rander.wang@intel.com>",125,41,1
"thesofproject/sof","b8ee1aa8f6953c84eff384fb30dd7f5afa288108","singalsu","2023-05-16 09:58:15","false","Config: Add DRC component to TGL, TGL-H, MTL, LNL

This patch allows to load the DRC component.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",51,59,1
"thesofproject/sof","a4b8d11678e09406e5c891de52445d01a8dca423","ranj063","2021-12-12 05:14:53","false","topology2: pipelines: cavs: Add audio formats for all pipeline modules

Add audio formats and all new attributes for all modules in the
cavs pipelines.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",120,42,1
"thesofproject/sof","e5e5dcc8064bf15e36f99824d53853628f2a4c05","ranj063","2019-03-14 19:13:24","false","topology: merge sof-apl-dmic-2ch and sof-apl-dmic-4ch m4 files

Use the same m4 files to generate both 2ch and 4ch topologies
by defining channels during compilation.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",69,9,0
"thesofproject/sof","4f45c44cabd11441e0adc54f65603da6920be8fd","ranj063","2022-03-23 22:27:30","false","codec_adapter: rename codec_adapter_set_params()

to module_adapter_set_params(). No functional changes.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",109,46,1
"thesofproject/sof","781f003466c4d377da51e7d9852f982497444079","abonislawski","2019-06-18 10:54:50","false","memory: remove unnecessary HEAP BASE defines for APL

This defines are not used anymore

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",45,13,0
"thesofproject/sof","d10b6410836f436af80eaa504df5c91a4dcaa019","ranj063","2023-05-06 16:41:14","false","copier: Use dai_zephyr_params() for multi endpoint DAIs

In preparation for removing the endpoint device and buffers for multiple
endpoint DAI copiers, use dai_zephyr_params() instead of calling the DAI
drv params ops.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",53,59,1
"thesofproject/sof","778095e36cab0f547a71aed5950299919c0bc19f","groncarolonxp","2019-11-07 07:57:50","false","drivers: imx: sai: configure frame_bytes from format

Configure frame_bytes from topology format

Signed-off-by: Guido Roncarolo <guido.roncarolo@nxp.com>",53,17,0
"thesofproject/sof","2845fc8cdec2217b166c8cf3868bc59136387612","ranj063","2022-07-11 19:03:38","false","ipc4: helper: Use get_attribute instead of ipc4_comp_get_base_module_cfg

Add a new component attribute COMP_ATTR_BASE_CONFIG to retrieve the base
config from the modules instead of using  ipc4_comp_get_base_module_cfg().
Also, implement the get_attribute API for all the components that support
IPC4.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",109,49,1
"thesofproject/sof","367e305abc13282450b6ed43a74a5b003f9392a3","ranj063","2022-01-11 06:19:29","false","codec_adapter: waves: Define set_configuration

Define the set_configuration op in the module interface.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,43,1
"thesofproject/sof","f4f9e6541ee7929896bae69a05baf9834f589b0a","aiChaoSONG","2022-03-29 07:39:11","false","sof: replace log calls with zephyr logging api

The log context in zephyr is per file or module.

To use zephyr logging api, LOG_MODULE_REGISTER is used
to register a log context, LOG_MODULE_DECLARE is used
to refer to the registered context.

For function in header file, LOG_MODULE_DECLARE should
be used within that function to avoid context collapse,
a condition one source file have multiple context
registered or declared.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",112,46,1
"thesofproject/sof","9633c3b66ff77f41c5a8b5b070b0ee5fc6ed5798","softwarecki","2023-03-10 15:45:32","false","manifest: Check return value of man_create_modules

The man_create_modules function may return an error that was ignored. Added
check of a return value.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",55,57,1
"thesofproject/sof","5c92bddcf40a1ec72b2eab016b7bdac25ff4ea15","andrula-song","2023-07-31 07:50:52","false","Audio: MFCC: Add HiFi4 implementation of MFCC

Add HiFi4 implementation of MFCC.

Signed-off-by: Andrula Song <andrula.song@intel.com>",32,62,1
"thesofproject/sof","8839f8536be16799a499383a4e87ef20d8844466","plbossart","2021-02-01 22:18:46","false","topology: align device numbers in SoundWire topologies

This patch follows the suggested layout:

PCM0   playback	Jack
PCM1   capture 	Jack
PCM2   playback	Speaker
PCM3   capture	Amplifier Reference (typically based on I/V feedback)
PCM4   capture 	Microphone
PCM5   playback	HDMI 1
PCM6   playback	HDMI 2
PCM7   playback	HDMI 3
PCM8   playback	HDMI 4
PCM9   RESERVED
PCM10  capture	DMIC
PCM11  capture	DMIC16kHz
PCM12  capture 	BufferedMic (aka KPB)
PCM13  playback Bluetooth
PCM14  capture 	Bluetooth

PCM40  playback	Speaker 2 (non-aggregated)

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",69,32,0
"thesofproject/sof","01100e50d368c650cd004dee9e2d49c42b0371f7","plbossart","2018-08-10 21:36:55","false","uapi: ipc: align with kernel

It beats me why changes done one one side are not merged on the other.
We should really require all changes to the IPC files to be distinct
PRs so that they are easier to track.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",20,2,0
"thesofproject/sof","3e49cfea2e37babe83f20b5211b1889074303c96","plbossart","2019-01-16 05:08:04","false","src/drivers/intel/haswell/ipc.c: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","d1dcdfedf6a1bb641a6dddc2dfb3b603169c9a99","plbossart","2019-11-12 00:15:49","false","kmod_scripts: add support for soundwire_generic_allocation

new module added, needs to be listed in sof_remove.sh

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",54,17,0
"thesofproject/sof","16842868d9a5fa75994965544216cb4f0e5d0493","lrgirdwo","2021-04-15 12:03:35","false","cmocka: reduce number of mocked functions and increase test coverage

Reduce the number of functions we mock and use the real functions where
we can. This brings in more runtime code so will increase the test
coverage.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",80,34,0
"thesofproject/sof","c3adfcecc79f14c9af02f19288152e8df7497a8d","lrgirdwo","2022-02-04 17:06:24","false","testbench: add support for mixer

Add mixer support to the testbench

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",106,44,1
"thesofproject/sof","5b39ee1d3fdaadcbd91df86dbec268335e5cbbaf","dbaluta","2020-04-08 19:57:14","false","drivers: imx: sdma: Introduce sdma_enable_channel

sdma_start shouldn't be used to enable channel 0. We will reserve
dma_ops to only work on data channels.

For now introduce sdma_enable_channel that will take care of
starting a channel.

Replace internal usage of sdma_start from sdma_run_c0 with
sdma_enable_channel.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",80,22,0
"thesofproject/sof","1edb31d2d6a3e3f32b6123f5ca2bc43699e43895","jajanusz","2019-04-11 12:09:02","false","rimage: add option to set imr type

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",51,10,0
"thesofproject/sof","ea909bd17be10b7cd5f7c83635941a7cf249b413","jajanusz","2019-06-10 10:51:55","false","cmake: drivers: add DW config

DW folder shouldn't be included by default.
Designware features should be enabled explicitly.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",50,12,0
"thesofproject/sof","82240250c0cf1d9ceaa832a3429b5391bc1314ac","tmleman","2022-01-18 09:06:18","false","dmic: allow to set IPM_SOURCE_MODE from config blob

This bit determines operation mode for all source decimator.
0 = MONO
1 = STEREO

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",114,43,1
"thesofproject/sof","c19fd4e6e51c1f844ebdc93444df39508705cdba","jsarha","2022-06-07 12:33:50","false","probe: Initialize probe_dma_init() config stack variable

Initialize probe_dma_init() config stack variable. Not all used
members are initialized member by member so those members got their
values from what ever there was in the stack.

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",117,48,1
"thesofproject/sof","fd398c9d5ee39898313d47e0d510c57f9c07e739","cujomalainey","2020-09-23 22:37:10","false","cmake: allow testbench to build with clang

We need clang support for the testbench therefore the following changes
are needed

remove -ftree-vectorizer-verbose since its deprecated in gcc and not
supported in clang

remove =3 from -Wimplicit-fallthrough=3 since 3 is the default level
anyways

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",65,28,0
"thesofproject/sof","4b0cb077f73dd4a48afbbd37824080bae050fb83","wenliangwu","2023-10-25 08:57:06","false","platform: mtk: fix memory allocation problem

Because the size of struct comp_buffer has increased, the current heap
layout for the basic use case is not enough.

Some use cases are experiencing out of memory issues,
c0 memory  src/lib/alloc.c:765  ERROR failed to alloc 0x180 bytes zone
0x4 caps 0x1 flags 0x0

To fix this issue, we increase the number of 512-byte heap blocks to 32.

Signed-off-by: Trevor Wu <trevor.wu@mediatek.com>",8,65,1
"thesofproject/sof","1f0efba2c84b8d6464d26b931b2af761f024eb21","lyakh","2021-11-19 10:03:44","false","ll_schedule: schedule with the reference task

Sometimes multiple tasks must be scheduled on the same domain tick.
Use the reference task pointer for such cases.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",129,42,1
"thesofproject/sof","2bc79bfb7453960a08937ca48fa77e6b4f4b9524","lyakh","2020-03-18 16:50:30","false","ll-schedule: fix scheduling start on slave cores

When a task is first scheduled on a slave core the ll-scheduler fails
to enable the newly added slave core and the task misses its first
scheduling turn, it's started only after a re-scheduling takes place.
This leads to intermittent xrun events when starting tasks on slave
cores. Fix the condition to schedule slave cores immediately.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",70,21,0
"thesofproject/sof","d229b1ba21910e9288c7c4c0bb42039a057958ac","lyakh","2019-02-19 10:38:32","false","cavs: don't call known dummy function

platform_interrupt_clear() is a dummy function on cAVS platforms, no
need to call it in cAVS-specific drivers.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",65,8,0
"thesofproject/sof","729427574021a3f5440bf6b9304de47abd981f97","wenliangwu","2022-11-14 09:13:58","false","topology1: add mt8188 related pipelines and components

Add topology files for mt8188 including mt8188.m4 and
sof-mt8188-mt6359.m4.

Signed-off-by: Trevor Wu <trevor.wu@mediatek.com>",95,53,1
"thesofproject/sof","a25f098b72c08e89df51af3d9f09b23e60238e86","lyakh","2023-04-21 12:59:02","false","buffer: use an accessor to read struct audio_stream::valid_sample_fmt

This patch adds audio_stream_get_valid_fmt() to read
struct audio_stream::valid_sample_fmt and converts all users. Apart
from hiding internals of the structure, it also enforces the use of
the __sparse_cache annotation.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,59,1
"thesofproject/sof","8caa0e27a464b468294ced40a33d527c3caf4118","marc-hb","2023-03-22 00:04:22","false","sof/ipc/msg.h: add missing #include <ipc/trace.h>

`msg.h` needs `ipc/trace.h` for `sof_ipc_dma_trace_posn`

Fixes commit b91e253f65cf2f (""include: sof: debug: Split panic.h into
Zephyr and XTOS-specific headers"") that broke `scripts/fuzz.sh` because
it stopped `ipc/msg.h` from accidentally getting `ipc/trace.h` through
`panic.h`.

Fixes:

```
src/include/sof/ipc/msg.h:146:34: warning: declaration of
  'struct sof_ipc_dma_trace_posn' will not be visible outside
  of this function [-Wvisibility]
void ipc_build_trace_posn(struct sof_ipc_dma_trace_posn *posn);
```

```
sof/src/trace/dma-trace.c:160:23: warning: incompatible pointer
types passing 'struct sof_ipc_dma_trace_posn *' to parameter of
type 'struct sof_ipc_dma_trace_posn *' [-Wincompatible-pointer-types]
        ipc_build_trace_posn(&sof->dmat->posn);
                             ^~~~~~~~~~~~~~~~
sof/zephyr/../src/include/sof/ipc/msg.h:146:58: note: passing argument
 to parameter 'posn' here
void ipc_build_trace_posn(struct sof_ipc_dma_trace_posn *posn);
```

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",57,58,1
"thesofproject/sof","e39205cc11d41dc694d9e1d22382625ab33fa9f4","marc-hb","2022-12-06 00:37:45","false","parse_sparse_output.sh: new sparse_errors array

Zero functional change, pure preparation for the next commit.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",102,54,1
"thesofproject/sof","7f45cb7bdef85e56af71cbb31ac8e7b8d65fdec4","marc-hb","2022-01-12 20:37:15","false",".github: add imx8ulp gcc build to pull request tests

Fixes commit b40a2f7d3696 (""docker: Add support for i.MX8ULP platform"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,43,1
"thesofproject/sof","003166440372810819c16372dfffbff01bdbc55b","marc-hb","2022-01-12 18:03:15","false","xtensa-build-all.sh: distinguish default/working platform and WIP

The -a option was recently broken by the addition of platform(s) that
don't have a toolchain available in the Docker image. Every platform can
be built by someone but no one can built -a(ll) platforms right now.

Add a new platform array to make the distinction between default
platforms built by the -a option versus work in progress.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,43,1
"thesofproject/sof","884dad565b0be500fcf028718f3c6289792a94a8","marc-hb","2023-11-03 21:58:41","false","tools/topology1: mass replace codec_master -> codec_provider

This removes a lot of warning noise and may help spot other warnings
like `ALSA lib ops.c:48:(lookup_ops) wrong kcontrol ops value string ''`
and others.

Now that commit 1b1ec6c4920f (""topology/cmake: skip all topologies when
alsatplg < 1.2.5"") enforces alsatplg version >= 1.2.5, it is finally safe
to do this!

I compared the generated .tplg files before/after this commit and
they're bit for bit identical. Tested with both alsatplg v2.6.1 from
Ubuntu 22 and version 1.2.9 from the SOF docker container.

Note this is a much smaller commit than the reverted
commit f50b6fe0adc4 (""topologies: switch all .m4 files to codec_provider
and codec_consumer"") because most topologies v1 have been removed from
the main branch. Most topologies v1 are now only in stable-v2.2 where
the warning spam is still a problem :-(

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",4,65,1
"thesofproject/sof","6fc6940e1c07c99e6cbd00c3a3a5b80de27b8b5c","marc-hb","2022-10-11 18:29:33","false","rimage: update submodule to 542924d70c17, back in sync with west.yml

Fixes commit a3b3c525d1e0 (""west: update to newer rimage baseline"")

542924d70c17 config: tgl-h-cavs: add probe module
5b076f17384c config: tgl-cavs: add probe module
6b4848e25d8a mtl: Add UPDWMIX module to the manifest
d50aefcb6375 manifest max size for loadable modules
d94cfc9cc6dc mtl: add MicSel support
5504179137c5 Add lib_code module type.
12bb32712266 toml: add tgl-h config file for IPC4
452847ddc04e mtl: Add SRC module to the manifest

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",99,52,1
"thesofproject/sof","3bb33ded0aa083c8c3d72283121cdaaefa524bdb","marc-hb","2021-03-08 17:59:19","false",".github: http://github.com -> https://

Avoids the following redirection and warning:

 warning: redirecting to https://github.com/thesofproject/sof/

Fixes: f59bb62e31ab0 ("".github: add shallow checkpatch to Github
Actions"")

Also try to fix the display of one step name in the web UI.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",73,33,0
"thesofproject/sof","b70b13cc1a4760e4223741ea2ed4eeeae7ac8246","marc-hb","2020-07-09 19:27:57","false","dist.cmake: add 'rebuild_cache' warning.

dist.cmake is (for now) the only .cmake file that uses GIT_TAG at _cmake
configure time_. This means even ""make clean"" is not enough for
dist.cmake to take into account some git tag or version change. It's
very confusing because on the other hand ""make check_version_h"" and
everything else always shows up-to-date git information.

""make rebuild_cache"" addresses this situation so mention it in a
warning.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",77,25,0
"thesofproject/sof","d09844ab98cc0f03681d2edbc0395a4f3e1a17ee","marc-hb","2022-04-25 23:30:18","false","zephyr/docker-build.sh: match UID with 'adduser' instead of 'chgrp -R'

This fixes SOF version.cmake which was just broken by a recent git
security update and started to fail like this:

```
  -- SOF version.cmake starting at 2022-04-25T18:14:56Z UTC
  -- /workdir/zephyr/.. is at git commit with parent(s):
  fatal: unsafe repository ('/workdir' is owned by someone else)
  To add an exception for this directory, call:

   git config --global --add safe.directory /workdir
```
(example at https://github.com/thesofproject/sof/runs/6162885265)

chgrp -R was always an ugly hack because it was messing with
(persistent) file permissions on the host, outside the container. This
new adduser solution is unfortunately much more code but it does not
leak any side effect outside the container.

Do not fix scripts/docker-run.sh yet because there is still no UID
mismatch between Github Actions and the SOF container (they're both
1001) but add a warning + TODO.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",113,47,1
"thesofproject/sof","9d9620ae05ca351d53f71f6d0a3a7587cc650e23","PayalKshirsagar","2020-03-24 05:52:29","false","src: drivers: intel: baytrail: replace bit shifting with BIT macro

Change suggested by coccinelle.
Replace bit shifting on 1 with the BIT(x) macro.

Signed-off-by: Payal Kshirsagar <payalskshirsagar1234@gmail.com>",65,22,0
"thesofproject/sof","43a8a187d4339f28527b21388644d799d4be70ea","lenghonglin","2022-06-28 02:20:14","false","zephyr_ll: add task_cancel function state judgement

when call pause and then call stop, it will cause next triger start failed

The reason:

for PAUSE, the state machine:SOF_TASK_STATE_CANCEL—>SOF_TASK_STATE_FREE
call STOP, the state machine:SOF_TASK_STATE_FREE—>SOF_TASK_STATE_CANCEL

Signed-off-by: honglin leng <a909204013@gmail.com>",113,49,1
"thesofproject/sof","c6f83acd0e3c36f2a9126e92d72d9bce93f09dd2","sebcarlucci","2020-03-11 22:34:51","false","tools: tune: Add tools to generate bytes control

This commits adds the scripts to generate the bytes control blob
for the DCB. It also provides some generic scripts to convert
valid binary blob to a csv or binary file (usable by sof-ctl)
or an m4 byte control topology file.

This commit adds two new folders under tools/tune
- dcblock: scripts to generate the blob in Octave
- common: scripts to convert any generic blob to a config file.

Signed-off-by: Sebastiano Carlucci <scarlucci@google.com>",83,21,0
"thesofproject/sof","ec4b726bd1e83eb4ae8b1844d0d7048387a9fb47","lgirdwood","2018-10-05 20:34:07","true","Merge pull request #462 from akloniex/debugability

logging: Move trace class definitions to uapi/logging.h",33,4,0
"thesofproject/sof","cb5da1e7a992b1c1d08aa321fda024d4cce16622","lgirdwood","2018-08-21 08:46:05","true","Merge pull request #237 from tlauda/topic/work_queue_core_context

work: add work_queue to core_context",19,3,0
"thesofproject/sof","a6a11d8e6510d6074467d40e9b513bea543b238b","mrajwa","2020-09-30 16:03:48","false","topology: add C_CONTROL to codec processing topology

This patch extends codec processing topology with C_CONTROLS
which comprises of SETUP configuration for both SoF component
and CADENCE codec.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",66,28,0
"thesofproject/sof","31949d0669923a926ff4c8295f92bb5a0c4a1ae8","mrajwa","2020-07-13 22:05:55","false","detector, kpb: change buffering and draining constants

This fix compensates host wakeup time.
Here we limit max draining request to 2 seconds.
History buffer size if one second bigger than max draining
request allowed.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",78,25,0
"thesofproject/sof","9034b08425a43dcd7b3d804e7376f3d69d9b1b47","mrajwa","2019-05-29 21:26:17","false","kpb: update kpb defines to accept different sampling width

Kpb defines like KPB_MAX_BUFFER_SIZE were calculating
buffer size only for one, fixed sampling width. Now
defines accept a parameter ""sw"" sampling width.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",67,12,0
"thesofproject/sof","a98e3f8b371d19b33c4d6462348aa0a0eb2f4d8f","mrajwa","2019-04-16 15:22:41","false","KPB: change kpb_state naming convention

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",50,10,0
"thesofproject/sof","2897d4029f4f229f14b4ac4cc9c2c3c599331410","andyross","2023-04-25 20:30:38","false","base_fw: No Intel register reads in non-platform code

This was trying to read hardware registers, which obviously doesn't
work on other platforms.  Stub with zeros for now.

Longer term: this whole message (""basefw_mem_state_info"") might want
some rework.  In addition to being heavily hardware-specific, it seems
like a comparatively large block without self-describing data
(e.g. id/val pairs), nor with a struct definition to specify it, nor
with any documentation that I can find.

Signed-off-by: Andy Ross <andyross@google.com>",52,59,1
"thesofproject/sof","efcda780537608ca5157087ee9918d5135827844","keyonjie","2019-06-27 07:05:45","false","sof-ctl: add ctl_data struct for params sharing between functions

Add a globle struct which will store params and be shared among
functions in the later commits, to make the code more readable.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",46,13,0
"thesofproject/sof","a7bd453ed40aebb112007111b05620b6997d7589","keyonjie","2020-06-28 08:59:23","false","component: switch to use UUID for component creation

Switch to use UUID for component creation, if it is provided from the
host, otherwise, use component type for the component driver matching.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>
Signed-off-by: Marc Herbert <marc.herbert@intel.com>",71,25,0
"thesofproject/sof","981524d1975b4c64dd71cdb4dc9f8f08cb3a7346","keyonjie","2021-06-24 10:15:40","false","idc: print out the target_core when timed out

Print out the target_core value when timed out during
idc_wait_in_blocking_mode(), which is useful for debugging.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",74,37,0
"thesofproject/sof","51f0821af0727d6d2a253017d33e3207cf9a65d1","keyonjie","2019-01-28 07:58:55","false","pipeline: pipeline_comp_copy: return once errors happened

We should stop the pipeline copying once errors happened on any
component copying, here fix it.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",57,8,0
"thesofproject/sof","7c8a2a98d1d2d7024d41e02b443d9f3de11c527b","keyonjie","2019-05-05 10:06:22","false","detect-test: reset detect status at .reset()

This will fix the detecting will be triggered at very beginning of the
2nd arecord runs issue.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",47,11,0
"thesofproject/sof","06ca708e34050f0277cc267c28c665e2aec87ac0","keyonjie","2018-11-30 10:52:15","false","ipc: byt: add mask check to make sure ipc handle correctly

We are missing interrupt mask check, which will lead to error handling
IPC message type(e.g. treat an reply message as an new one), Here add
mask check to fix that.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",40,6,0
"thesofproject/sof","5341ca157a0ee71bfa54b17402447bff1d7e5433","tlauda","2019-04-11 11:57:35","false","dw-dma: change dw_dma_stop for byt and cht

Changes implementation of dw_dma_stop function for
baytrail and cherrytrail platforms. On this platforms
we cannot simply disable channel during transfer,
because it will hang DMA. Previously we were waiting
for transfer finish, which could take up to one period
size (1 ms in most cases). This patch uses suspend and
drain FIFO mechanism, which lowers time needed to stop
DMA channel to steady ~0.34 ms.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",51,10,0
"thesofproject/sof","7325dda2919ecb9624b7c91a8a3f1c953323ac28","tlauda","2019-09-10 14:58:24","false","timer: remove unused timesource_data structure

Removes structure timesource_data, which is no longer used.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,15,0
"thesofproject/sof","19e5fa2d7713756862cc8e7df49d833969f006cd","tlauda","2019-02-01 14:00:54","false","work: added priorities

Introduces work queue priorities for future use.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",58,8,0
"thesofproject/sof","bff78e0bde277957f903c78303ae1699899ab60f","tlauda","2019-03-01 12:24:15","false","schedule: remove timer scheduling

Removes timer scheduling as of right now.
It doesn't work correctly and pollutes the
dw-dma code. More generic implementation will
be added in the near future.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,9,0
"thesofproject/sof","cd6f59fb1e5d1008613ea9001436989543c80986","tlauda","2019-01-15 10:07:38","false","pipeline: refactor connect functions

Refactors pipeline connect methods to avoid code duplication.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,7,0
"thesofproject/sof","bebfad80287a0c48bf40f58aa30a382896603804","tlauda","2018-10-08 10:06:29","false","notifier: add notifier to core_context

Adds notifier to core_context, which is the first step
of multicore notifier implementation.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",34,4,0
"thesofproject/sof","606857bca53c1cf3eb3c9c32ad6e81aee9780da2","bardliao","2022-06-08 10:13:43","false","topology2: cavs-passthrough-hdmi: use hdmi-generic.conf

hdmi-generic.conf can be used for all topologies with HDMI
support.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",117,48,1
"thesofproject/sof","7552de76cf5eb5d96c0f52637ba8e4f35aee538a","singalsu","2021-12-09 11:07:25","false","Audio: KPB: Optimize kpb_copy_samples() function

The audio_stream_read/write_frag_s16/s32() functions usage and
sample-by-sample copying are replaced by more efficient block
memcpy() operations.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",122,42,1
"thesofproject/sof","b77c7dc27cf34f8061ce61a85e0540ed5a5cccfa","singalsu","2020-01-08 16:09:08","false","EQ FIR: Add trace verbosity and align with IIR trace output

This patch unifies the configuration blob parsing related traces
with IIR. The low importance trace for response start index is
removed and a note about setting a channel to bypass is added. The
illegal channel map response index is traced with error.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",71,19,0
"thesofproject/sof","e235fbf9be45a394208ee9b83c6ae28a9ad0800e","singalsu","2022-06-28 16:24:15","false","Tools: Tune: Matlab tool for creating configuration blob for MFCC

This patch adds initial version of MFCC setup tool setup_mfcc.m. It
outputs a configuration topology macro file that matches the current
Matlab concept code. The configuration can be tested in testbench
with the supplied scripts run_mfcc.sh and decode_ceps.m.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",113,49,1
"thesofproject/sof","6403e6274aed423cc85c1ffbdbc55a9c7901ec82","singalsu","2023-08-16 12:19:57","false","Audio: Crossover: Fix mistake in check for number of bands

The check needs to be for or, the and condition is never met.
With e.g. num_sinks = 1 the index to function map became -1
that returned an invalid function.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",25,62,1
"thesofproject/sof","c0b9b4057e4dc408c9af5c9695b9d052ab1d3702","singalsu","2020-01-03 15:15:16","false","EQ FIR: Add support for runtime reconfiguration

This patch adds similarly as done for IIR capability to change the
configuration during playback or capture. The previous version
returned an error to driver in such case even with a valid request.
Due to driver logic of caching the controls (no separate handling for
EBUSY) the rejected request caused all successive streaming attempts
to fail.

Support for SOF_CTRL_CMD_ENUM to control preset-EQ is removed since
the driver does not support the feature. The implementation would
need a change anyway so better to remove it now and reintroduce it
if needed later.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",71,19,0
"thesofproject/sof","1cbba6c5e82e56abb93f749187b410d9f040370e","singalsu","2018-10-10 13:43:38","false","EQ: Add tool for acoustical frequency response measurement

This patch adds into SOFT/tune/eq a script mls_freq_resp.m that can
be used as low budget or quick developer tool to measure device frequency
response. The configuration files mls_play_config.txt and
mls_rec_config.txt configure the audio devices for local or remote
ssh aplay/arecord execution.

The MLS measurement with a short time window, e.g. less than 10 ms can
partially achieve the same as anechoic measurement. However this
is not intended to replace usage any professional audio measurement. If
using this use with care!

Note also that as such this script measures the response of a
speaker - microphone system. One response need to be known and
under calibration to get reliable results for other. Even ADC and DAC
responses may impact.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",33,4,0
"thesofproject/sof","7026802227c19ed2a080ac5c6f6491796468d6ea","singalsu","2022-12-20 16:22:08","false","Audio: Mux: Remove unused parameter dev from functions

The comp_dev struct is not used in these functions so it can be
removed.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",90,55,1
"thesofproject/sof","b6208b8b63247634324be09f0d0457ef580b794f","singalsu","2021-06-16 10:17:10","false","Drivers: Intel: DMIC: Code lines cleanup

This patch only removes some unnecessary line feeds for better
readability.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",71,37,0
"thesofproject/sof","4d830c908c814c6fc27d978af1eb022de5ec856b","ranj063","2021-03-19 04:02:15","false","topology2: Add DAI widget class

Add the class definition for DAI widgets. A DAI widget
can be instantiated as follows:
Object.Widget.dai.""playback"" {
	type			SSP
	index			""1""
	period_sink_count	""2""
	period_source_count	""0""
	widget_type		""dai_in""
}

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",72,33,0
"thesofproject/sof","e6140f82003e33b9a94409b6e984da37b3651a77","ranj063","2018-06-14 03:35:20","false","topology: add SAMPLE_RATE token for tone comp and define it in tone definition

Add SAMPLE_RATE token for tone comp.
Include it in tone definition and set it from the test pipeline definition.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",1,0,0
"thesofproject/sof","1fb7c8710371de663b4a51241a2dfc09400129fa","abonislawski","2019-06-14 10:41:29","false","memory: make buffers aligned to HEAP_BUF_ALIGNMENT in ICL

It provides better memory/cache performance since it aligns with memory IO burst size and cache line size

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",47,12,0
"thesofproject/sof","da79c5073b81b611cb927dd18ca0b40e88b0d3e2","ranj063","2021-06-23 06:18:18","false","ipc: ipc3: handler: fix error handling for pm_core_enable

Check and return error if enabling a core fails instead
of overwriting the error with a subsequent successful
core power up.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",74,37,0
"thesofproject/sof","b6d34fb4a837cb39904b4811ae32fc8e33bfd849","ranj063","2023-10-13 23:29:01","false","topology2: Replace audio_format objects

Replace audio_format objects with input_audio_format/output_audio_format
objects in preparation for deprecating the audio_format class.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",10,64,1
"thesofproject/sof","edc80c793f3173cee0450b93093bb2512158c613","kuanhsuncheng","2022-03-14 07:11:57","false","topology1: add sof-mt8195-mt6359-max98390-rt5682 topology

Add sof-mt8195-mt6359-max98390-rt5682 topology

Signed-off-by: YC Hung <yc.hung@mediatek.com>
Signed-off-by: Trevor Wu <trevor.wu@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",108,45,1
"thesofproject/sof","75f6912b3d426a3fcae1b0c3573e01c50480cea1","softwarecki","2022-06-15 12:02:18","false","ipc4: Updated ipc4_fw_registers structure

Updated the ipc4_fw_registers structure to be compatible with ipc4.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",119,48,1
"thesofproject/sof","462f9174a9dfe4117bbc8c261864c633a19bc099","xiulipan","2019-05-30 07:32:15","false","scripts: update build step align with wiki

In SOF WIKI, used another clean up cmd, change here to align with docs.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",67,12,0
"thesofproject/sof","05f92cb37180926f33f86cf862158ea0cad6a172","fredoh9","2023-02-23 22:57:06","false","docker: upgrade to ubuntu 22.04 as a base image

Upgrade Ubuntu to latest LTS version, 22.04.
Permission issue has started when UID didn't match with local UID.
As an solution, created high value UID to unmatch local UID.
sof home doesn't have permission for others, so add o+rx permission to
avoid any permission issue when id does not match.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",56,57,1
"thesofproject/sof","a83df4944675a8dc7d5310fbf87b8b94a12427c2","btian1","2023-09-18 08:16:16","false","audio: volume: enable linear ramp for ipc4 volume

previously, linear ramp is only applicable for ipc3, however,
linear is also applicable for chrome/linux with ipc4, so remove
this ipc3 restriction.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",20,64,1
"thesofproject/sof","51556ddd63b0b7562716a3ba03a7a43b13ebffe5","btian1","2023-08-18 02:03:50","false","audio: sof: remove -fno-inline-functions option for cavs2.5 and ace

remove this build option for sof build cavs2.5 and ace platform
with enable COMPILER_INLINE_FUNCTION_OPTION.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",25,63,1
"thesofproject/sof","a78fdcebc1be64dbdfc14c33f75ad6cc08c58750","joechengxperi","2022-09-15 05:07:25","false","topology1:enable SOF EQ + DTS on AMD renoir

Period has to be 1ms to avoid playback noise issue on Renoir
when SOF EQ + DTS are both enabled.

Signed-off-by: Joe.Cheng <joe.cheng@xperi.com>",104,51,1
"thesofproject/sof","c952c048b2172fce85f5c7f3f9716d9787e706ca","plbossart","2021-06-18 20:34:12","false","topology: sof-cnl-nocodec: change SSP index for APL

Prepare for use on APL to use SSP0,1, 5, all other platforms use SSP0,1,2

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",74,37,0
"thesofproject/sof","e2ad42f0d397dc0141a74e754a1cec767c14064e","pjdobrowolski","2023-03-09 10:42:14","false","loadable module: module api version structure

Building system for iadk modules and for native sof modules has built in
information about used api. That information we use to switch between
two different methods of registering modules.

Signed-off-by: Dobrowolski, PawelX <pawelx.dobrowolski@intel.com>",57,57,1
"thesofproject/sof","bf42529e541d1583009e491a3594c0d1621bc3e1","plbossart","2021-02-11 18:03:49","false","topology: dmic: fix pcm_id/dai_link_id confusion

This problem appeared after renumbering the devices for SoundWire
topologies.

Before this patch, the devices appear as:

pcm=JackIn;id=0;type=playback
pcm=JackOut;id=1;type=capture
pcm=DMIC;id=2;type=capture
pcm=DMIC16kHz;id=3;type=capture
pcm=HDMI 1;id=5;type=playback
pcm=HDMI 2;id=6;type=playback
pcm=HDMI 3;id=7;type=playback

and after:

pcm=JackIn;id=0;type=playback
pcm=JackOut;id=1;type=capture
pcm=HDMI 1;id=5;type=playback
pcm=HDMI 2;id=6;type=playback
pcm=HDMI 3;id=7;type=playback
pcm=DMIC;id=10;type=capture
pcm=DMIC16kHz;id=11;type=capture

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",72,32,0
"thesofproject/sof","d87adcd2dcb087573bd2a1da034ab9f09b233ce4","plbossart","2022-07-18 15:03:56","false","topology1: CMakeLists: add missing APL/GLK support for ES8336 with DMIC.

For some reason we added DMIC-based topologies for all platforms
except GLK and APL.

This should be back-ported to 2.2 stable.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",113,50,1
"thesofproject/sof","36cc8475df9dabeb0ce26dc7f1b60b7bdf5fdcec","lrgirdwo","2021-04-13 15:56:45","false","ipc: move generic code to ipc-common.

ipc_msg_send() and ipc_schedule_process() are IPC generic and hence can
be moved to ipc-common.

No code changes, only moves.


Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",81,34,0
"thesofproject/sof","d8295f4c49d5b7fc57512d88c4b29c2c4760493e","lyakh","2021-06-02 08:50:19","false","ll-scheduler: remove an unused field

The .registered_cores field in struct ll_schedule_domain is never
used, remove it.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",83,36,0
"thesofproject/sof","1d6fae0f653b9ba1e5d5e223471635d1c1ed423b","lyakh","2022-09-28 13:42:54","false","zephyr: edf-schedule: (cosmetic) make two variables static

EDF work queue related variables can be static.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",97,52,1
"thesofproject/sof","5d99a4fb0a9394b147c3b04ab8f490de508d6cf9","lyakh","2020-08-11 12:09:38","false","topology: apl-pcm512x: fix scheduler domain

The conditional definition in sof-apl-pcm512x.m4 is supposed to
select the DMA scheduler if the codec is the bclk source and the
timer scheduler otherwise, but the conditional definition is
broken which leads to the DMA scheduler being selected always.
Fix the definition.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",73,26,0
"thesofproject/sof","0209c464e6f5644ce6edd43428f15afb0537f042","marc-hb","2022-08-31 14:08:51","false",".github/qemu,gcc-build-only: remove byt..icl platforms

Not supported in the main branch anymore, go to stable-v2.3

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",115,51,1
"thesofproject/sof","027be9837173444c6c92d5b331a3c75a0769c7bf","marc-hb","2022-10-06 05:09:31","false","zephyr/docker: move exec_as_sof_uid() to new sudo-cwd.sh

Besides making things more obvious, the important functional change is
that the user switch is now performed for _every_ invoked, command, not
just for the build command.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",98,52,1
"thesofproject/sof","d194fefbca79e1660ebac316a27a7f27a07446b7","marc-hb","2020-09-23 20:42:57","false","rimage: update submodule to e67d68e8e1ea. More warnings fewer crashes

e67d68e8e1ea adsp_config.c: actually check error when parsing ""version""
             array elements
75f96956e05e elf.c: check ELF32-LE magic number instead of crashing
91bd4fe796ee rimage.c: print an error instead of crashing when zero ELF
             argument
82d4767ca577 Stop silently discarding -l option
f4e01789f055 travis: Treat warnings as errors
3b2398a97d73 travis: Add more warnings to make command

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",65,28,0
"thesofproject/sof","27fd46f69f652a5df5cd499a416adf4f6bbf38d6","marc-hb","2021-07-12 06:59:52","false",".github/installer.yml: remove cp -a /usr/bin/tree hack

The docker image has it now thanks to Fred.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",87,37,0
"thesofproject/sof","11b9ca19cb194189a88869ce7bff85a1e83671b9","PayalKshirsagar","2020-03-24 06:40:42","false","DMIC: remove parentheses around the right hand side of assignments

Avoid useless parentheses to the right hand side of an assignment.
Change suggested by coccinelle.

Signed-off-by: Payal Kshirsagar <payalskshirsagar1234@gmail.com>",65,22,0
"thesofproject/sof","9dc85454bedc8029166d5aa9af3dbb78a33e7258","johnylin76","2020-12-01 10:47:25","false","tools: tune: Add tools to generate ctrl bytes for Multiband DRC

This commit adds the tools to generate the control bytes for the
multiband_drc component. To generate the control bytes, run the
example_multiband_drc.m script.

To tweak the parameters modify the values in example_multiband_drc.m
and run it.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",75,30,0
"thesofproject/sof","66234f02c3bf62ca8042c8db9e815461c7667661","cujomalainey","2021-09-11 18:12:35","false","docker: add renoir to docker build

In order to support AMD as part of the docker image and CI we need to
include it in the build list as the overlays are already added to the
overlay repo.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",117,39,0
"thesofproject/sof","8f42ee88cc113a8a270314f228014f93daa0cf0e","cujomalainey","2021-05-03 23:05:26","false","adsp_config: fix out of bounds error

cppcheck find

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",81,35,0
"thesofproject/sof","3ecf438def8542ba2f9df922a9ecdc03c2a51ec7","lgirdwood","2018-08-24 13:00:16","true","Merge pull request #260 from mmaka1/hda-glk

Hda glk",21,3,0
"thesofproject/sof","6da07a9116f14b947b683f6eece4d3c6442e6266","lgirdwood","2018-11-21 15:42:18","true","Merge pull request #137 from keqiaozhang/icl-tplg

topology: add 4-ch dmic topology for ICL",39,6,0
"thesofproject/sof","12ce388775f237ddfb75f3039e819396929c81bd","sathya-nujella","2020-11-16 06:30:41","false","topology: sof-smart-amplifier: update speaker amp ssp DAI configuration

Speaker amp's SSP tdm & clock is configured for 32-bit, accordingly
update DAI configuration to s32_le.

Signed-off-by: Sathyanarayana Nujella <sathyanarayana.nujella@intel.com>",73,29,0
"thesofproject/sof","6027b3e5f75ead0ac8694d227d2b2f8855d216ab","mrajwa","2019-07-25 19:35:37","false","kpb: unregister kpb from notifications at free()

This change unregisters KPB from async
notifications during kpb_free(). Additionally
reset main history buffer pointer.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,14,0
"thesofproject/sof","6eca8c98c9dd3a10bb1e826b4a0bbf3fcd1b4edc","mrajwa","2019-05-21 12:44:17","false","kpb: rename sinks to be more understandable

Kpb rt_sink is confusing and was replaced with
sel_sink which stands for selector sink - the component
to which KPB copies during BUFFERING state. Likewise
the cli_sink was replaced to host_sink clearly stating
that we copy out of DSP.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",60,12,0
"thesofproject/sof","c357561ec93df91fa70628d8338a197bbdfe8e9c","mrajwa","2019-06-18 13:57:08","false","memcpy: fix bug in arch_memcpy_s for xtensa arch

arch_memcpy_s has wrong check condition for
overlapping sections. The copy from adjacent memory
bloks will result in dsp panic while it should be
allowed. This patch fixes the issue for xtensa
architecture.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",46,13,0
"thesofproject/sof","91bb08dd8ce6305bda1649d0171c48456ba75421","lgirdwood","2018-08-07 16:42:47","true","Merge pull request #49 from singalsu/add_eq_tune_proposal

SOFT: Add equalizer tuning scripts and small examples",18,2,0
"thesofproject/sof","37ce03fbd951e200a861d365404af28e5176d56e","markbartonxperi","2021-12-24 09:48:15","false","topology1: mt8195: Remove DTS-specific workaround for period

In a previous commit DTS changed the period of this topology to 1000 when `DTS` was defined. This
commit removes this behaviour as DTS codec now supports the original period for this topology

 Signed-off-by: Mark Barton <mark.barton@xperi.com>",119,43,1
"thesofproject/sof","3dbd1fb597b76c76eb7a072de59425493d8aa88b","slawblauciak","2019-01-25 07:49:22","false","pipeline: add a flag for FW xrun recovery disabling

Add a flag NO_XRUN_RECOVERY to disable the FW internal xrun recovery,
make it to false by default.

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>
Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",56,8,0
"thesofproject/sof","722134ec330a7e869f515f3c01a20f8c771103ee","softwarecki","2022-09-14 17:26:55","false","base_fw: Add support for multiple platforms

This commit defines a new value HW_CFG_VERSION containing
the hardware version of the platform.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",104,51,1
"thesofproject/sof","910f4be6ff139b6681249fde08e908ea1f4567ef","softwarecki","2022-07-01 13:01:10","false","copier: Add processed data counters

Added total processed data counters and function to read it.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",110,49,1
"thesofproject/sof","55a93348b5682dc9745fc2e14980f74b60199609","keyonjie","2020-05-28 08:42:54","false","topology: ch_sel: add uuid token support

Add the uuid token to ch_sel widget for the future use.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",96,24,0
"thesofproject/sof","32a5388c10b5c71514c05dd4623c45a9bfe9c741","softwarecki","2023-03-07 11:18:47","false","file_utils: Add file_error function

Added a generic function that displays a file operation error message.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",56,57,1
"thesofproject/sof","347ee08cb095d789d1a4cd56763a03cdce034cec","tlauda","2019-06-11 13:03:13","false","hda-dma: change preload from blocking to repeating

Changes preload flow for host component using HDA-DMA.
Instead of waiting for DMA status for a limited amount
of time, it's better to just reschedule the pipeline
and check again. At least this time if the status
won't be set, we will know it's rather HW issue than
too small delay.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",50,12,0
"thesofproject/sof","cd6a0c1977c04840ae02af9da9cfb9ea670c3b61","marc-hb","2022-08-15 13:11:32","false","Disable some invalid doxygen comment blocks

Simply replace `/**` with `/*`. This can be very easily reverted if
someone ever fixes the corresponding comment.

We don't build doxygen for .C files in continuous integration, only for
.H files. We don't build doxygen for .C files in continuous integration
because there are way too many errors and no one has time to fix
them. Because we never build doxygen for .C files, people keep adding
untested and invalid doxygen comments or they change the code while
leaving the doxygen out of sync.

I build doxygen for .C files locally. The call graphs are especially
useful (they don't need doxygen comments). I have local hacks to filter
out the most common doxygen errors. The broken doxygen comments disabled
by this commit escaped my local filters.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",115,50,1
"thesofproject/sof","9b1b6158e3d76a02e38240d7b99a78b2ea090134","marc-hb","2020-03-26 04:52:54","false","tplg_parser: fix -Werror=maybe-uninitialized source, sink

Fixes:

tplg_parser.c: In function ‘tplg_load_graph’:
tplg_parser.c:979:2: error: ‘sink’ may be used uninitialized
                     in this function [-Werror=maybe-uninitialized]
  979 |  printf(""loading route %s -> %s\n"", source, sink);
      |  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",64,22,0
"thesofproject/sof","7614351b748c869cea3802c0503865d5d23add33","marc-hb","2021-12-15 01:25:15","false","trace: log ""hidden"" feature turning off adaptive filtering at run-time

Also clarify related Kconfig help strings.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",113,42,1
"thesofproject/sof","473ec05b3bf3c524252924e36df8cd5e76b55268","marc-hb","2022-08-05 09:55:38","false","xtensa-build-zephyr.py: abort immediately on `west build` failure

Stop immediately when `west build` fails. Do no keep going and show a
totally unrelated smex build failure.

Also fix error message when zephyr/ is missing.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",116,50,1
"thesofproject/sof","fade78d89532ccd149a749474531dff4a7768310","singalsu","2023-03-08 09:30:24","false","Drivers: Host: Timer: Add dummy platform_dai_wallclock() function

This avoids tools/oss-fuzz build fail to issue

dai-legacy.c:
(.text.dai_comp_trigger_internal[dai_comp_trigger_internal]+0xaca):
undefined reference to `platform_dai_wallclock'

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",58,57,1
"thesofproject/sof","b2c65e3afca3fbde452159a96724033a8ae13c4b","singalsu","2021-06-03 17:01:57","false","Drivers: Intel: DMIC: Track fifos activity with mask bits

The counter dmic_active_fifos has been a source of many issues. The
use of bits to track active FIFOs is simpler and avoids the risk
of counting to negative or over the actual FIFOs count in various
control scenarios. The incorrect counter value has caused resources
allocate and free and start/stop sequences fails.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",75,36,0
"thesofproject/sof","a91219eb79636cae00337bb1ac6ca403f90031fa","lyakh","2020-11-03 12:47:29","false","zephyr: remove infinite recursion on Broadwell

Broadwell support with Zephyr had only been dry-coded, it has never
been tested, and it contains an infinite recursion bug: functions
platform_timer_get() and arch_timer_get_system() call each other
infinitely. Break the recursion formally, until a proper fix is
available.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",75,29,0
"thesofproject/sof","84298db608d8267034cfd24f59a69284afc118f2","lyakh","2020-08-25 12:40:08","false","byt: use an internal timer for ""cpu_timer""

Using the same hardware timer for both ""cpu_timer"" and
""platform_timer"" doesn't work, switch the ""cpu_timer"" to use
TIMER1 on Baytrail. This also fixes performance counters on
the platform.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",75,27,0
"thesofproject/sof","7a097ad3f5f33dd2d649e20934d58db70c233815","lyakh","2019-06-20 11:29:44","false","SSP: (cosmetic) remove ""inline""

Firstly, it is better to rely on the compiler to decide which
functions to inline, except in some special cases. Secondly,
functions called by reference, cannot be inlined. This patch removes
""inline"" from functions used as .set_config() methods.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",47,13,0
"thesofproject/sof","4dd766a0b5160b75bcb92457d41c7453e780f366","singalsu","2021-07-19 16:33:19","false","Audio: EQ-FIR: Cleanup not used state variables

The processing function selection no more uses these
component struct fields.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",90,38,0
"thesofproject/sof","bec031a7a38f145537362a37d80bc558aa8e5968","marcinszkudlinski","2023-08-16 06:32:28","false","dp: introduce dp_queue

DP queue is a lockless circular buffer
providing safe consumer/producer cached operations cross cores

prerequisites:
 1) incoming and outgoing data rate MUST be the same
 2) Both data consumer and data producer declare
    max chunk sizes they want to use (IBS/OBS)

required Buffer size:
	- 2*MAX(IBS,OBS) if the larger of IBS/OBS
          is multiplication of smaller
	- 3*MAX(IBS,OBS) otherwise

The queue may work in 2 modes
1) local mode
   in case both receiver and sender are located on
   the same core and cache coherency
   does not matter. dp_queue structure is located in cached memory
   In this case DP Queue is a simple ring buffer

2) shared mode
   In this case we need to writeback cache when new data
   arrive and invalidate cache on secondary core.
   dp_queue structure is located in shared memory

dpQueue is a lockless consumer/producer safe buffer.
It is achieved by having only 2 shared variables:

 write_offset - can be modified by data producer only
 read_offset - can be modified by data consumer only

 as 32 bit operations are atomic, it is multi-thread and multi-core save

There some explanation needed how free_space and
available_data are calculated

number of avail data in circular buffer may be calculated as:
	data_avail = write_offset - read_offset
  and check for wrap around
	if (data_avail < 0) data_avail = buffer_size + data_avail

The problem is when write_offset == read_offset,
!!! it may mean either that the buffer is empty
    or the buffer is completely filled !!!

To solve the above issue having only 2 variables mentioned before:
 - allow both offsets to point from 0 to DOUBLE buffer_size
 - when calculating pointers to data, use:
         data_bufer[offset % buffer_size]
 - use double buffer size in wrap around check when calculating
   available data

And now:
  - write_offset == read_offset
		always means ""buffer empty""
  - write_offset == read_offset + buffer_size
		always means ""buffer full""

  - data_avail = write_offset - read_offset
	if (data_avail < 0) data_avail = 2 * buffer_size + data_avail

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",27,62,1
"thesofproject/sof","46d52efdd8cd5297aaaa3091ab4e8c5e3098f6ae","singalsu","2020-12-10 17:59:42","false","Tools: Tune: Add multiple angles and beam off settings add to TDFB blob

This patch essentially adds support for steer_az/steer_el to be
vector instead of scalar. The beam off preset is added by default
automatically for N-channel in N-channel out configurations. Microphone
(x,y,z) coordinates are passed in to blob for direction of arrival
reporting.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",74,30,0
"thesofproject/sof","e76851b9a51a6c0b1a2c2b19bc494369488a11bc","marcinszkudlinski","2022-11-28 14:57:51","false","[ABI] IMRheap preparation - add config and flags

Add
 - a kconfig option enabling a heap in L3
 - a memory capability flag SOF_MEM_CAPS_L3
+ small cleanup in whitespaces

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",99,54,1
"thesofproject/sof","7c83270582e2778818e59153778f5b8d272cae56","singalsu","2021-12-15 14:08:25","false","Audio: Add to audio_stream.h copy between linear and circular

This patch adds inline functions audio_stream_copy_from_linear()
and audio_stream_copy_to_linear(). They are useful for fast
copy from SOF buffer to a linear memory region or vice versa.

Note: memcpy() is used instead of memcpy_s() because this is a
hot path.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",113,42,1
"thesofproject/sof","157e37856d8ec0425d74721ed6f8f1cd56728868","singalsu","2018-08-21 10:18:50","false","Decrease SRC pipeline buffers RAM size and update PCM configuration

This patch decreases pipeline buffers usage from 5x or 4x periods to 3x
to avoid DAI error in APL platform when allocating buffers. The smaller
buffers are sufficient since the test topology pipelines are scheduled
every 1ms (earlier assumption was every 5 ms).

The PCM capability is updated to 8 channels similarly as with low delay
pipeline. The highest sample rate is increased from 96 kHz to 192 kHz.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",19,3,0
"thesofproject/sof","282fe224d83bcb017b95f7cdae7e5ff0b8c51cb1","kv2019i","2021-06-02 18:14:48","false","dmic: fix pause/release error leading to invalid dmic_active_fifos

The 'in_active' parameter of dmic_stop() is used to control whether
the fifo should be released or not. In case of COMP_TRIGGER_PAUSE,
this should be false and the 'dmic_active_fifos' count should not
be modified.

Without this fix:

  PAUSED -> RELEASE -> dmic_start() -> no change on dmic_active_fifos

  ACTIVE -> PAUSE   -> dmic_stop()  -> dmic_active_fifos--

If a test case repeatedly pauses and releases, 'dmic_active_fifos'
will go out-of-sync.

Fix the issue that dmic_stop for PAUSE does not release the fifo
reference.

Fixes: 22731744cb04 (""dmic: don't decrement active FIFO count below 0"")
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",82,36,0
"thesofproject/sof","01b50b58a2fa1a166c03049948ac223038f79854","bkokoszx","2020-10-01 13:24:09","false","timer: check whether handler is set before its invocation

This commit adds check whether timer handler is set
in order to avoid unexpected errors.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",65,28,0
"thesofproject/sof","91fb944956f22906d17bb5d5d932f648b22a1b42","kv2019i","2023-08-17 10:31:18","false","platform: tigerlake: cleanup unused code for IPC3, SPI, GPIO, XTOS

Remove code segments in platform.c that are no longer used
in the tigerlake platform configuration. This includes code related
to IPC3, GPIO, SPI, DMA scheduling domain and XTOS. Additionally interrupt
initialization via platform_interrupt_init() can be removed as it is
a no-op in Zephyr builds.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",25,63,1
"thesofproject/sof","e06e1f0a441f2c3b3ed57ea801f35fc7b1b37c7c","serhiy-katsyuba-intel","2022-12-06 14:46:48","false","ipc4: copier: remove redundant assignment

Removes variable cd->converter[i] assigning to self. This
fixes error reported by static code analyzer.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",100,54,1
"thesofproject/sof","6f0a758f438ef57e7957e8643521c8128759ee35","dabekjakub","2019-08-27 14:28:14","false","pm_runtime: Add core memory pm

Add core memory power management to pm_runtime.
Add turning off cores on platform init.
Add core memory enabling on core enable calls.
Change decreases overall platform power usage.

Signed-off-by: Jakub Dabek <jakub.dabek@intel.com>",55,15,0
"thesofproject/sof","0ca92feb6dba81d46053a19790d5c88e8573a042","cujomalainey","2020-11-20 21:22:41","false","codec_adapter: add missing ifdefs for cadence

If you enable the adapter but disable the cadence codec this will break

Reported-by: Dylan Reid <dgreid@chromium.org>
Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",74,30,0
"thesofproject/sof","c1c68420369748fedf74a6cb2d94e5b19fa3dab1","cujomalainey","2018-11-16 23:22:34","false","Update sof-glk-da7219

Update graph and comments

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",40,5,0
"thesofproject/sof","1a7a36a84cfe31a6f6b40488300d5b6cd709250c","kv2019i","2022-12-21 10:56:20","false","sof-logger: ensure NULL string is not passed to printf/fprintf

Due to allocation failures, or invalid content in dictionary,
""params"" entries in ""struct proc_ldc_entry"" may be NULL.

In print_entry_params(), the NULL entries may be passed
as arguments to fprintf(). While e.g. glibc handles these without
error, this is not guaranteed behaviour and may result in segfault
on some platforms.

Fix the issue by aborting program if allocation fails and
explicitly handling the cases when asprintf_entry_text returns
NULL.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",91,55,1
"thesofproject/sof","b717e0a0a1c4dc55496c4b45d11df00d4b3425a8","mrajwa","2019-10-17 13:18:32","false","host: fix wrong trace value

This patch fixes the trace message which logs always zero
value.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",63,16,0
"thesofproject/sof","8ab452a3383854bc0994573fadb01dd30a86b683","mengdonglin","2022-04-29 04:06:55","false","CMake: pass firmware file micro version to rimage

SOF CMake defines SOF_MAJOR, SOF_MINOR and SOF_MICRO for 3 fields of
firmware file version major.minor.micro. But CMake only passes the major
and minor version to rimage.

Now CMake will also pass the mirco version to rimage, so that rimage can
write it to different firmware manifest headers for cAVS platforms and
then sof_ri_info.py will be able to dump entire file version info from
the firmware binary.

Signed-off-by: Mengdong Lin <mengdong.lin@intel.com>",115,47,1
"thesofproject/sof","aaac08a08251f92ad8d8e356b323ff8803df8302","mbukowsk","2023-02-09 11:15:02","false","cavs: memory bank powerup flow adjustment

Memory banks enablement flow is adjusted to recommended approach.
Power status should  be read twice to ensure ebb readiness

Signed-off-by: Michal Bukowski <michal.bukowski@intel.com>",54,56,1
"thesofproject/sof","966e37bc7568c90c0d05d2496819edb4ec289bcd","keyonjie","2021-04-22 07:22:31","false","platform: apollolake: increase runtime heap 256B count

Increase the count of the runtime heap 256 Bytes block on apollolake to
satisfy the buffer requirement of the new implemented dynamic DAI config
feature.

Fixes: 6c2cdffd0239 (""dai: dai_config refinement"")
Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",91,35,0
"thesofproject/sof","fdb3483724f8e4b2ffd675ac01fffed941e5fecb","ktrzcinx","2020-01-17 09:09:52","false","detect_test: Mark source buffer as const in processing functions

Const keyword is added to explicitly indicate that nothing in given
source buffer can be changed in processing functions - read pointers also.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",79,19,0
"thesofproject/sof","137c90bbc6185b38c16f131e61c00ba4b6a8d2b1","ktrzcinx","2020-10-29 15:28:54","false","buffer: Move functions using trace system to buffer.c

Then trace location in output trace file is correct.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",74,29,0
"thesofproject/sof","bdd0f4fa66b2409e7824fd58b64ebc3eb3ac5a89","tlauda","2019-07-17 12:19:16","false","arch: xtensa: add missing #include <config.h> to debug-vector.S

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",46,14,0
"thesofproject/sof","53f6050a456fa46d7a8b2e97a69b378f88f64795","tlauda","2019-02-25 11:30:45","false","host: change host copy flow

Changes host copy flow by moving playback stream
preload to first copy call. This way we can wait longer
for buffer full and omit second waiting. Further copies
happen in host buffer callback, which guarantees that
DMA will never overwrite our data.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,9,0
"thesofproject/sof","128098799978a178040194ae4134bf12053b2d52","tlauda","2019-09-19 13:23:39","false","topology: use DAI_PERIODS in calculation of DAI buffer size

Uses DAI_PERIODS in calculation of DAI buffer size.
In case the DAI_PERIODS value is undefined, we use
DAI_DEFAULT_PERIOD value of 2.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",61,16,0
"thesofproject/sof","3860b90c9e1d69d1dd95aa2b3a50948b3731f20f","tlauda","2019-07-17 12:17:01","false","config: replace #ifdef with #if for CONFIG_* defines

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",46,14,0
"thesofproject/sof","a513ac7251b16aa9be0f443af091c40f7b8cf084","tlauda","2019-07-19 09:59:46","false","debug: use IS_ENABLED macro instead of defining new one

Uses IS_ENABLED(CONFIG_GDB_DEBUG) instead of defining
new GDB_DEBUG macro.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",51,14,0
"thesofproject/sof","5449dc2a30996cefe35684a62dd258637d74aca8","tlauda","2019-07-25 09:07:30","false","panic: keep interrupts disabled after panic

This patch fixes the issue, where we've reenabled
the interrupts for the DSP, which sometimes caused
immediate DSP exception and overwrite of our dump.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",49,14,0
"thesofproject/sof","7bf3f8e99be31c784e23160c40f2ad601d6ccee5","RDharageswari","2020-09-01 17:49:25","false","topology: smart_amp: Pass uuid token to the smart_amp widget

This patch adds the uuid argument to smart_amp widget, uuid
parameter can be configured by the topology files while
integrating any new component. If not configured, uuid will
be assigned with the UUID of the smart_amp_test component as
default value.

Signed-off-by: Dharageswari R <dharageswari.r@intel.com>",70,27,0
"thesofproject/sof","fb068e6a7a1670d3f15032f27651fbe70851bccb","jlacla","2019-11-07 10:04:12","false","drivers: imx: SAI : don't generate clocks in slave mode

The test determinating the current SAI mode (M/S) was buggy.
As a consequence SAI generated bit clock and FS clock when the codec was
in master mode (which is the default configuration for SAI currently with
SOF). This bug didn't prevent the DAI to function and to have good sound.

Signed-off-by: Jerome Laclavere <jerome.laclavere@nxp.com>
Signed-off-by: Guido Roncarolo <guido.roncarolo@nxp.com>",53,17,0
"thesofproject/sof","550968b169def3f412b981c0aa290a61483603e7","btian1","2023-08-25 02:15:59","false","audio: volume: create ipc3 and ipc4 specific file

create ipc3 and ipc4 specific files and used to cover specific
functions.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",26,63,1
"thesofproject/sof","c6574f9c0d9b56c980db7b74ebc709e19c8c8167","RanderWang","2022-03-23 07:54:50","false","ipc4: use correct log for pipeline state change

Currently error is reported for both active and paused state when
pipeline is set to reset. For ipc4 case, it is good to switch from
pause to reset. The switch from active to reset is not permitted for
both ipc3 and ipc4. This patch uses different log for active and paused
state.

Signed-off-by: Rander Wang <rander.wang@intel.com>",108,46,1
"thesofproject/sof","743e6294df65f9099e355906791624dc1444e6c7","RanderWang","2021-07-16 03:12:13","false","ipc4: add ipc4 message for deleting module instance

Signed-off-by: Rander Wang <rander.wang@intel.com>",92,37,0
"thesofproject/sof","4a7eccb7ba553ba5e8518cfb434626330bcb6192","xiulipan","2018-12-19 08:28:14","false","pipeline: remove duplicated pipeline copy

As task scheduler is refined to accept adding new task while previous
task is running. This duplicated copy should be removed.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",54,7,0
"thesofproject/sof","96b6e6ca393d3532818c5d047f597e77af2190a5","xiulipan","2020-05-08 03:52:00","false","topology: add echo reference with DEMUX for tgl max98357a

Add echo reference pipeline for the tgl speaker max98357a
with demux.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",96,23,0
"thesofproject/sof","4b4b752a149bd7b25c846d4117f58e5ce64bc275","andrula-song","2022-06-29 06:30:39","false","Audio: Copier: optimize the usage of read frag

Optimize the read frags of copier module in function
apply_attenuation. By using the optimized function
audio_stream_samples_without_wrap_s32, we can reduce
the address judgment and save about 60% MCPS.

Signed-off-by: Andrula Song <xiaoyuan.song@intel.com>",113,49,1
"thesofproject/sof","6516a8c89ba0ca165bd353e28667f1b431fb7e77","ranj063","2021-07-21 03:50:50","false","topology1: sof-cavs-nocodec: Add the deep buffer PCMs

We weren't really testing these yet without the PCM devices.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",91,38,0
"thesofproject/sof","e0935332f22290bbd761b3dd438f112bef7827db","ranj063","2022-06-15 22:16:59","false","module_adapter: No need to include data_blob.h

It is not needed.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",120,48,1
"thesofproject/sof","3bcd8669f77d8c3bf21651e137c9da75e6166861","ranj063","2023-07-05 17:19:18","false","audio: copier_dai: Remove unused variable

drv is left over from the previous implementation when a DAI component
was created for each copier. Remove it as it isn't really used anymore.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",32,61,1
"thesofproject/sof","2dd8a85fadaabb95939ae2a920c6fa6ba6743d1d","ranj063","2023-02-02 18:54:56","false","topology2: Intel: Remove hdmi-4th.conf

Use the new feature to conditionally includes conf nodes to add the DAI,
pieplines, PCM and route for HDMI4 in hdmi-generic.conf.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",52,56,1
"thesofproject/sof","6db728dfcf27f218a6cf13bfaa22b5abc4f7a1b4","ranj063","2021-01-27 21:50:26","false","dma/dai: use spin_lock_irq/spin_unlock_irq during get/put

Long run multi pipeline tests fail with dynamic pipeline
setup when trying to enable/disable the DMA and DAI.
Disabling interrupts during get/put addresses this issue.

Suggested-by: Jaska Uimonen <jaska.uimonen@linux.intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",66,32,0
"thesofproject/sof","fadd8e7077df1d09c94288747c0d6c9bb9b31775","abonislawski","2020-09-07 16:20:09","false","tgl: enable WOVCRO clock

This will allow to save significant amount of SOC power
in low power S0ix WoV

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",70,27,0
"thesofproject/sof","764ce675eeddd838ff6d754bd34cbcb6bbba89ca","aiChaoSONG","2022-12-05 07:23:19","false","smart_amp_test: add ipc4 support for smart amp test

Smart amp test module read config from ipc msg and convert ipc4 settings
to ipc3. It is a dummy module used for smart amplifier validation.

Signed-off-by: Chao Song <chao.song@linux.intel.com>
Signed-off-by: Rander Wang <rander.wang@intel.com>",102,54,1
"thesofproject/sof","78619c583fbe8c02c4ddf4bbce2f10b55ccd6cfa","aiChaoSONG","2023-08-18 05:54:09","false","ipc: explicitly get ipc device for component pipeline and buffer

The generic ipc device (struct ipc_comp_dev) assumes
the ID is unique among component, pipeline and buffer,
it is essential for existing ipc_get_comp_by_id()
function to work. This assumption is true for IPC3
but never holds true for IPC4.

The existing IPC4 code uses a trick to make the ID unique,
which also makes the component ID can not comply with
IPC4 primary message. In the IPC4 primary message,
module_id takes the first 16 bits, and instance_id
takes next 8 bits. But the component ID is composed
by 'module_id << 16 | instance_id', we don't see issues
because 'module_id==0' is taken by BringUp and BaseFw
module. So the ID for component doesn't collide with
the ID for pipeline.

In this patch, a new function considering type and
ID is added; four macros for getting component,
buffer and pipeline are added.

This patch prepares for the correction of component ID.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",25,63,1
"thesofproject/sof","bf191f6b67a0b9bc621e34d87504fa6a8f34b68e","aiChaoSONG","2022-02-11 04:51:02","false","audio: force pcm_converter_generic for IPC4 with zephyr

The copier component depends on special pcm conversion
code, which is only implemented in the generic pcm
converter. If we build SOF with IPC4 support with XCC,
the HIFI3 pcm converter is selected automatically, and
causes the issue of
    undefined reference to `pcm_func_vc_count'
    undefined reference to `pcm_func_vc_map'.

This patch forces the use of generic pcm converter
if build SOF with IPC4 and Zephyr.

This patch should be reverted once the HIFI3 pcm converter
counterpart is implemented.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",108,44,1
"thesofproject/sof","4d3bd81c025d42f7f2e3b6d534c89fab0b79eda3","pblaszko","2023-03-07 09:20:13","false","aria: add generic processing functions

Add non-HIFI processing functions for non-Xtensa configurations.

Signed-off-by: Przemyslaw Blaszkowski <przemyslaw.blaszkowski@intel.com>",56,57,1
"thesofproject/sof","1a64c10306d5a398e3a30eeda32ec347e279468d","yongzhi1","2023-02-20 17:45:42","false","topology2: enable EchoRef for sof-mtl-max98357a-rt5682-ssp2-ssp0

Include echo ref pipeline to Rex config.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",57,57,1
"thesofproject/sof","aec3bfdb77f4deb0f75d826ba8dda701911e7470","yongzhi1","2023-08-09 09:25:09","false","topology2: add core id macros for echo ref & EC pipelines

Add macros in preparation to run RTC AEC on secondary core

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",25,62,1
"thesofproject/sof","e1cc8beb199d2e71ca5ab52ec0df4dfe221a6a61","btian1","2023-02-14 07:19:08","false","host-zephyr: Expose common functions for host DMA new/free

Create and expose a couple of functions for host DMA allocation and
free along with struct host_data,these functions will be shared by both
host and copier component.
This is in preparation to remove the creation of host component and
endpoint buffer in create_host().

Below is the preparation work:
1. Add host data structure to copier data structure
Currently, copier call host interface need through ops driver.
However, with dedicated work, all host interface can be called
through host data, this commit add host data into copier data.

2. Add Header file to share host data between copier and host
Data and interaface will be shared through this header file between
host and copier.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",57,56,1
"thesofproject/sof","71553274b5690b672a8955afcf8a0f9bb52f98ee","softwarecki","2023-03-31 11:15:35","false","Switch to new elf reader and module parse functions.

Moved the module information to the new module structure. Used new
functions to parse module.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",56,58,1
"thesofproject/sof","cb235810488ee7b2335df04b08372b6c1cbc0720","plbossart","2021-01-27 22:45:07","false","topology: sof-tgl-rt711-rt1308: align DMIC support with HDaudio

Somehow we use different configurations for the DMIC, remove
everything in this file and rely on the same macros.

The only difference with HDaudio is the pipeline and PCM device numbers

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",66,32,0
"thesofproject/sof","0d0bb9ff6ec2882c69c28a2abc9d956973c0752c","lrgirdwo","2019-04-26 14:10:01","false","agent: agent should run at high priority

The system agent should always run at high priority to ensure other lower
priority tasks run as expected. SA work must be as short as possible
since we dont want to impact other high priority work.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",51,11,0
"thesofproject/sof","70b447b534c774d0067f7938e224af03018743ad","lrgirdwo","2021-02-02 12:01:52","false","cavs: timer: make timer recovery 10uS

This optimises the recovery time and reuses the same value
for overhead. Maybe optimised further, but value seems good
for all DSP clocks on cavs.

Also removes unused code.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",69,32,0
"thesofproject/sof","8c907e903882929df11ee546013aabb442791967","lrgirdwo","2018-07-14 16:34:57","false","configure: host: Host CFLAGS should be strict

Turns all warnings into errors.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",15,1,0
"thesofproject/sof","023292c66b18366112af02ca6a475c0593652c55","plbossart","2020-02-20 21:20:51","false","detect_test: fix strange code pattern

Fix cppcheck warning (ret not modified between two returns).

[src/audio/detect_test.c:700] -> [src/audio/detect_test.c:710]:
(warning) Identical condition 'ret', second condition is always false

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",80,21,0
"thesofproject/sof","ac197ec76e42f4c8e6c6a58f0e7ae1cf30847ec4","lbetlej","2020-03-26 16:12:34","false","cavs: add configuration presets for Chrome based products

As the number of configuration options is increased there is a need
to clearly specify presets that reflect features options. Specifically
the change adds option to enable Low Power Sequencer (LPS) and
Low Power Ring oscillator together.

The approach is based on keeping generic configuration in configs directory
while the override directory contains only incremental delta information.
The compilation flow assumes using make overrideconfig command. In example:

make cannonlake_defconfig
cp ../src/arch/xtensa/configs/override/cannonlake_chrome.config
override.config
make overrideconfig
make bin

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",64,22,0
"thesofproject/sof","f5af31f8ef4e026b856f7c95189283aea04ccf3a","DianaGabriela27","2019-03-06 13:10:23","false","rimage: manifest: Remove braces for single statement blocks

Braces are unnecessary for single statement blocks.

Signed-off-by: Diana Ungureanu <diana-gabriela.ungureanu@nxp.com>",66,9,0
"thesofproject/sof","893c6b94a8443b0210e75d7b2347decc7bb65563","xiulipan","2021-01-27 07:40:23","false","CI: GitHub action: allow action check runs on more branch

allow to run the check on PR and push to release stable branch

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",68,32,0
"thesofproject/sof","64ee297e5ee2ee7cdff11d816fcae6f744772208","lrgirdwo","2018-09-25 13:41:49","false","ci: travis: Add host build to travis.

Make sure we build for host as part of CI.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",37,4,0
"thesofproject/sof","ae8a2be46cd6994518f081e81be61246a6673463","jajanusz","2018-09-19 09:28:52","false","test: pipeline: update mocks

added missing new symbols - schedule_task_cancel

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",35,4,0
"thesofproject/sof","def3e2de5dcc49c85502f4fcb4a7367af9e9e90c","jajanusz","2019-06-11 09:16:46","false","drivers: group DW configs in one Kconfig file

It is better to have company/family related features grouped.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",50,12,0
"thesofproject/sof","c82f759420918858056e5756a4e00748037b054c","jajanusz","2019-01-30 05:52:35","false","rimage: use local elf.h

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",56,8,0
"thesofproject/sof","feeb51f216d3f26a4e00eb1047f2583cd59b16bf","johnylin76","2023-02-12 22:29:04","false","topology1: add PDM1 version for sof-adl-max98360a-rt5682-2way

Adds new topology build based on sof-adl-max98360a-rt5682-2way
with appending arg `-DDMIC_DAI_LINK_16k_PDM=STEREO_PDM1` for existing
ADL-P projects.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",55,56,1
"thesofproject/sof","34507f4f94de87b206302512c1dc803894727260","ktrzcinx","2020-06-05 06:47:17","false","trace: Improve sof/trace/trace.h code formatting

Align escape characters in macros, use tabs instead of spaces
(when possible), use single tab indentation in tracec context
declaration.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",77,24,0
"thesofproject/sof","992b370c8cca4e6ed87fb4be62152dd226c0b889","bzhg","2022-03-25 19:50:43","false","google_rtc_audio_processing: Make control write reliable

Userspace may write the config control repeatedly in quick succession.
Accept the new config in cmd callback to avoid -EBUSY error and ensure
the last successful control write before prepare/copy is applied.

This patch also fixes an edge case during init where the first non-empty
control write happens after prepare. This patch ensures the config is
applied during copy.

Tested:
1) Writes in quick succession
for i in $(seq 1 100); do
    ./sof-ctl -n 92 -t 0 -b -r -s /root/test_blob0.txt &
    ./sof-ctl -n 92 -t 0 -b -r -s /root/test_blob1.txt &
done

2) Large config requiring multiple ipcs
for i in $(seq 1 1000); do
    ./sof-ctl -n 92 -t 0 -b -r -s /root/large_blob.txt
    ./sof-ctl -n 92 -t 0 -b -r -s /root/test_blob1.txt
done

3) Reboot, write before and after arecord starts
4) Suspend/resume

Signed-off-by: Ben Zhang <benzh@chromium.org>",112,46,1
"thesofproject/sof","4b8593322e436db3db30c76165492f5185778f90","ktrzcinx","2020-03-18 13:45:57","false","tools: ext_manifest: Read manifest from sof_ri_info script

This tool must be able to read extended manifest content
and move to next manifest in proper way.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",71,21,0
"thesofproject/sof","9d7a6bda7352aa6cf302c16ebaac669b40f33dd4","lkoenig","2022-03-21 14:32:34","false","google_aec: Use frag_write to write data.

Due to a mistake, I was using the read API to get a pointer to the
place to write data. This commit corrects it.

Signed-off-by: Lionel Koenig <lionelk@google.com>",109,46,1
"thesofproject/sof","bf795c5b249d47da3904f643cb0539b3eb30e513","dcpleung","2019-09-30 04:34:31","false","Move signing key pair from rimage/ up one level

This is in preparation to make rimage as a standalone tool
outside of the SOF source tree.

Signed-off-by: Daniel Leung <daniel.leung@intel.com>",66,16,0
"thesofproject/sof","e862e25a9c9ab161b1055100c1419f0457c264f9","jwrdegoede","2020-12-06 11:45:33","false","topology: Add sof-cht-nau8824 topology file

Add a topology file for Cherry Trail boards with a NAU8824 codec.
These setups work with the standard settings from sof-byt-codec.m4.

This has been tested on the following devices:

Medion E2215T:   stereo speakers, analog mic
Medion E2228T:   stereo speakers, stereo digital mics
Cube iWork8 Air: mono speaker, analog mic

Signed-off-by: Hans de Goede <hdegoede@redhat.com>",71,30,0
"thesofproject/sof","ff1a9814494be63e7073c866e7f5914b04063bd1","ktrzcinx","2020-03-02 13:58:11","false","sof: Separate __packed and __aligned from sof/common.h

This part of source code is frequently used in IPC packets
definitions, so it shouldn't have any platform dependence.
After change this file may be include from mentioned place
without any doubt about ipc message dependances from used
sof build configuration.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",78,21,0
"thesofproject/sof","b2c6dc74252846bc427f5804f0605e4fc5afcce5","mrajwa","2019-07-25 14:35:40","false","detector: verify if format is supported

This patch adds verification if sample width is
supported by detector.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,14,0
"thesofproject/sof","da5b4e6f6ea5770879e0bca22876b301a8fe5a78","lgirdwood","2018-08-07 11:52:54","true","Merge pull request #201 from mwierzbix/unitTest-lib-rstrcmp

test: lib/rstrcmp: Added unit tests for lib/rstrcmp.",18,2,0
"thesofproject/sof","0496ecc1143c3d90cd91d2ba5a11e88d42236984","mrajwa","2019-08-01 21:55:12","false","kpb: fix buffering size during draining

This patch fixes the bug of zero buffering size during
draining.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",53,14,0
"thesofproject/sof","d180cd343fe9054876f73ea49a3a659884e75691","mrajwa","2019-07-29 09:07:53","false","memory: set LPSRAM related defines to zero if LP not configured

This patch sets all LPSRAM related memory defines to
zero if CONFIG_LP_MEMORY_BANKS is not defined.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,14,0
"thesofproject/sof","7112246d4fef43e3a5caffbbd0c1d58f14c02303","tobonex","2023-09-15 17:57:56","false","google_rtc_audio_processing: remove buffer_acquire

remove buffer ops from google_rtc_audio_processing module

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","22be53b98a6011c8aae931938ccaabd304476baa","PayalKshirsagar","2020-03-23 12:40:39","false","test: cmocka: src: avoid NULL comparison

Replace NULL comparison with boolean negation. Issue found using
Coccinelle.

Signed-off-by: Payal Kshirsagar <payalskshirsagar1234@gmail.com>",65,22,0
"thesofproject/sof","bde48586256a789250f0f979e0fde2b63aeea8d9","marc-hb","2022-04-01 21:23:42","false","topologies: docker --env USE_XARGS, NO_PROCESSORS and VERBOSE

Building in parallel is much faster but it makes logs unreadable and
build failures impossible to understand. This is especially true when
building with recent ALSA that produces of deprecation warnings, see
examples below. For test topologies the problem is even worse: its
XARGS parallel build provides no log at all.

To find what actually fails, it is required to fall back on a single
threaded and verbose build and this is achieved with the variables
USE_XARGS, NO_PROCESSORS and VERBOSE. Pass these through docker-run.sh
and CMake.

Examples from #5608
https://github.com/thesofproject/sof/runs/5717553555?check_suite_focus=true
https://sof-ci.01.org/sofpr/PR5608/build12556/build/tools.txt

ALSA pcm.c:1523:(parse_hw_config) deprecated fsync value 'codec_slave',...
ALSA pcm.c:1471:(parse_hw_config) deprecated bclk value 'codec_slave',...
ALSA pcm.c:1523:(parse_hw_config) deprecated fsync value 'codec_slave',...
ALSA pcm.c:1471:(parse_hw_config) deprecated bclk value 'codec_slave',...
ALSA pcm.c:1523:(parse_hw_config) deprecated fsync value 'codec_slave',...

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",110,46,1
"thesofproject/sof","df6b48c8893548b95054e6ed1f921e1e4519c1a1","marc-hb","2022-03-10 23:40:06","false","xtensa-build-zephyr.py: make ""unsupported OS"" actually a warning

Running on a mac crashed with ""undefined xtensa_tools_version_postfix"",
that should not be fatal (there are other toolchains).

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",112,45,1
"thesofproject/sof","9edc5725fdaefe8c44f0167db10db6fabbc5f179","marc-hb","2022-02-18 01:42:16","false",".github: add fail-fast: false to gcc builds and qemu boot tests

We don't want one failure to cancel other platforms.

See unwanted cancellation example in #5386 /
https://github.com/thesofproject/sof/runs/5241344411

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",106,44,1
"thesofproject/sof","c915001ba0bf4850c757b1ffd26cccc0bced0a83","marc-hb","2021-01-07 20:08:23","false","CODEOWNERS -= jajanusz

Left Intel.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",75,31,0
"thesofproject/sof","fd57885599d50df70ef5b484eedbafee600c01db","marc-hb","2023-11-01 00:27:17","false","samples/Kconfig: fix dependency on top-level CONFIG_SAMPLES

Don't be creative with weird ""visible if"" syntax.  Simply don't include
sub-Kconfig when the top-level option is disabled.

This removes ""backdoors"" like:

  -DCONFIG_SAMPLE_SMART_AMP=y -DCONFIG_SAMPLES=n

""In Rome, do as the Romans do""

Fixes commit 03b80eaf4420 (""audio: move test components into the
src/samples/audio dir"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",4,65,1
"thesofproject/sof","f1e2ac936a45cd338d433902fa464d9bdec6a20b","marc-hb","2020-09-16 04:12:00","false","travis: remove sue creek

Sue Creek support was never completed, stop building it as it may give a
wrong impression.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",63,27,0
"thesofproject/sof","0d7f2d4a3428b10cdadd3f30d0bb335a8a2cf824","marc-hb","2021-09-16 22:44:19","false","Do not exit(0) on invalid options or parameters

When some automation script gets some rimage flag wrong then rimage
exits and does not run at all. In such a case we want the build to fail
immediately and see the error at the bottom of the build logs and not
obscured by other, consecutive failures caused by the lack of rimage
output.

Take control of the exit code away from usage() and give it back to
main() where it belongs.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,39,0
"thesofproject/sof","06187791d7ae4a6554c8722f056df22b697db853","marc-hb","2021-10-19 17:56:04","false","sof_ri_info: fix adsp_mft_cse_entry.entry_file_offset

Fixes the adsp_mft_cse_entry Component added by
commit 8885b465df53 (""tools: sof-ri-info: move parsing adsp mft outside
cse mft"").

`adsp_mft_cse_entry.entry_file_offset` did not account for the extended
manifest.

Also fix the large `reader.ext_mft_length + entry_offset`
copy/paste/diverge

That variable did not seem to be used anywhere yet but it's wrong value
was confusing and time-consuming when debugging.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",123,41,1
"thesofproject/sof","f51a95b90dff5ac5718eae6f735c04194f038ee3","marc-hb","2021-07-23 19:04:58","false","xtensa-build-all.sh: link to cmake docs on sof-docs

Link to the CMake section in sof-docs which documents a lot of what this
script does and is probably out of date now. It would be less out of
date if this link had been there and more people had been aware that
this documentation even existed.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",99,38,0
"thesofproject/sof","4311da195d8daefcd6aba816a63d47422785a0c5","marc-hb","2023-04-14 19:49:32","false",".github/zephyr: move zephyr revision in first results matrix position

Recent experience has shown that upstream Zephyr regressions are much
more common than platform-specific failures. So move the Zephyr version
in first position, so this will group zephyr regressions and make them
much more obvious.

Use very short keys for the revisions because the left column in
Github's results ""checks"" tab is very narrow and cannot be resized.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",50,58,1
"thesofproject/sof","5fded96b0db75b310e68293bd69f935c07bd801f","lyakh","2022-08-05 14:29:57","false","hda-dma: replace multiple allocations with a single one

Instead of allocating channel data for each channel separately,
allocate them in a single array.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",118,50,1
"thesofproject/sof","e7f8676497db0584b6c022e81cdc4e8e505ae6e2","lyakh","2022-04-12 13:03:12","false","google-rtc: fix buffer acquisition

Instead of acquiring and releasing buffers locally multiple times,
do that once for .copy() and .prepare() methods.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",118,46,1
"thesofproject/sof","e34a137183e1f049d1126bcc08010f238906acd4","lyakh","2023-01-27 14:38:23","false","platform: switch default to Tiger Lake

Cannon Lake isn't supported any more, switch default to Tiger Lake.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",52,56,1
"thesofproject/sof","97cffa5bd6b57475413e769bc7fcb0ce9d8b146f","lyakh","2021-06-02 09:09:28","false","ll-scheduler: reduce the number of DSP register reads

cpu_get_id() forces a read from a DSP special register. When its
value is reused it's better to force such a read only once.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",83,36,0
"thesofproject/sof","8e3654485ace727bdbad133d64364ef0139bb7c9","lyakh","2022-08-12 14:33:08","false","mixin: (cosmetic) simplify a conditional

No need to check the same condition twice in a row, once is enough.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",116,50,1
"thesofproject/sof","03f4a1704ea03841206bf976dc95a29bc981a1af","lyakh","2020-08-31 15:29:13","false","logger: support kernel-style UUID formats

Implement ""%pUb"", ""%pUB"", ""%pUl"", and ""%pUL"" UUID formats.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",71,27,0
"thesofproject/sof","9c98cfd6113fc97999661cfd633ac5ce670a8782","serhiy-katsyuba-intel","2023-04-28 14:10:19","false","ipc4: Fix Host gtw conversion to/from 24_4LE audio

Fixes audio format conversions on Host gateway between 16/16 and 24/32
(and vice versa) and between 32/32 and 24/32 (and vice versa).

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",54,59,1
"thesofproject/sof","4be98e4dc9a85c0aec9be26964fc283db7e68b70","aborisovich","2022-08-02 06:15:28","false","scripts: xtensa-build-zephyr.py removed calls over symlink

xtensa-build-zephyr.py had been using some execute_command
calls when building rimage and using rimage keys over
symlink from modules/audio/sof. Changed it so that calls are
executed now over normal sof directory and symlink is not needed
for script execution.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",112,50,1
"thesofproject/sof","64f60cdad3cf06fe098badced9d542d5561dd35f","cujomalainey","2019-03-13 20:08:33","false","EQ: GUI: Add remote deployment

Add function to deploy eq automatically to dut at runtime

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",68,9,0
"thesofproject/sof","16e3a6018ea4cf9a8b1ef1a846c7a75a6536305e","jxstelter","2022-08-22 10:09:55","false","Audio: copier: Fix copier params setting

Parameters audio_fmt.depth and audio_fmt.valid_bit_depth are
expressed in bits. Therefore should be divided by 8 when set for params:
params->sample_container_bytes
params->sample_valid_bytes

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",111,51,1
"thesofproject/sof","be6ff59ecb3c5cd2809cb3b8fdb9fcb1e3c3d1f9","iuliana-prodan","2021-04-07 17:53:50","false","src: update coefficients for tiny profile, add 96 kHz support

This patch adds 48 <-> 96 kHz rate conversion for tiny profile.

The tiny coefficients are trimmed down in computational complexity
to just run on some platforms as gcc compiled to allow
debugging and validation of the most complex conversions.

I believe this should also include 48 <-> 96 kHz rate conversion.

The files are generated with Octave, using src_tiny_int16.m and
the instructions from
https://thesofproject.github.io/latest/algos/src/sample_rate_conversion.html

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",79,34,0
"thesofproject/sof","21e38421d7460625ba26b087d1d242775b666634","iuliana-prodan","2021-01-15 10:19:22","false","topology: imx8: add mixer component with wm8960 codec

This topology works on i.MX8QM and i.MX8QXP with wm8960 codec.
When loaded, one will have a sound card with two playback subdevices.
This way, samples pushed to the two subdevices will be mixed and
sent to SAI1 and then to wm8960 codec.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",70,31,0
"thesofproject/sof","9f6c2e1136c1ea0e5bcfe6453da5b5761a46e75d","iuliana-prodan","2021-10-01 15:16:44","false","zephyr: imx8m: enable second level interrupts handling

On i.MX8MP the DMA interrupts are routed via IRQ_STEER.
In order for this to work we need to:
- initialize cascade interrupts before any usage;
- make any second level interrupts handling go
through interrupt-irqsteer.c;

First level interrupt handling is used from
wrapper.c.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",122,40,1
"thesofproject/sof","6157e899e21792885766c018a6c579122eea502d","bkokoszx","2018-09-26 14:53:46","false","logger: added tool for parsing new trace format

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",37,4,0
"thesofproject/sof","afb2d913ca66c57b2b0aab58cf89d23a73f7df6f","kv2019i","2023-03-30 10:09:44","false","sof_ri_info: add ADL-N product key information

Add ability to recognize the ADL-N product key.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",57,58,1
"thesofproject/sof","60141f2074a9911fb0901408e706cd3c5ac4c7f5","ktrzcinx","2020-08-27 05:40:19","false","logger: Fix log level parsing

Usage of strstr for short version of logs level definitions
(for example 'e') leads to invalid level parsing, because first
log level with defined string (or letter) will be returned
(in this example 'verbose').
After change, log level will be returned only when name is
exactly as given one.

Fixes: b1fc9220 (logger: Parse runtime filter levels)

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",74,27,0
"thesofproject/sof","c2974bcb75d34bdef09904991b9f01e5cd715494","RanderWang","2021-11-16 01:14:06","false","ipc4: read linear link position for host driver.

Linear link position is updated in llp register by GP-DMA
hardware. Now it is enabled by SOF FW but not used.

This patch set up a path to read it and update it to host
driver.

Signed-off-by: Rander Wang <rander.wang@intel.com>",127,41,1
"thesofproject/sof","b97fd67ef00f50189c4dc52e55c7504eb2884738","RanderWang","2022-09-16 08:46:55","false","cmocka: add eq_fir unit test

This test uses module interface for eq_fir.

The use of decoded 16 bit FIR blob coefficients decreases a lot
the mismatch between float reference FIR vs. SOF fixed point
implementation.

This patch adds the script tools/tune/eq/cmocka_data_eq_fir.m that
generates the files cmocka_fir_coef_2ch.h and cmocka_fir_ref.h.

The script debug_files_plot.m can be used to visualize the unit
test result and error for data that is generated if macro
DEBUG_FILES is defined.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>
Signed-off-by: Andrula Song <xiaoyuan.song@intel.com>
Signed-off-by: Rander Wang <rander.wang@intel.com>",98,51,1
"thesofproject/sof","2962e2bfaa3c4164bb1b71e2dad611abfcd2c2ec","abonislawski","2019-06-10 14:22:12","false","linker: fix for symbol overwrite in imx8 linker

It will fix symbol overwriting, _system_heap_start was already used in system_heap section

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",50,12,0
"thesofproject/sof","d9e3d4d49bcba166e80df75552534fecef02cda6","abonislawski","2020-05-18 07:37:50","false","cavs: add probes to TGL chrome build

This will enable probes for chrome build

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",99,23,0
"thesofproject/sof","875e6882c521061df9320d63d082f8418ad03c26","ranj063","2021-10-27 16:00:53","false","smart_amp: use buffer_acquire/release

instead of buffer_lock/unlock which will be deprecated.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",128,41,1
"thesofproject/sof","6339cfd5aadcd3401d847906cfcf439bb61c5789","ranj063","2023-04-21 16:59:32","false","topology2: Removed period_sink/source_count attributes

These were added for use with IPC3 but since topology2 is not targeted
for IPC3, there's no need to keep them anymore.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",53,59,1
"thesofproject/sof","4cde04aba6b28f32bc591313a134c8194207f1b8","ranj063","2021-09-07 19:20:20","false","buffer: rename buffer_invalidate/writeback APIs

Rename the buffer_invalidate/writeback APIs to
buffer_stream_invalidate/writeback() to be more
precise.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",119,39,0
"thesofproject/sof","c8b39dc9d671b9c6b0c3a03c07b0d329ce6633f6","ranj063","2019-07-12 04:32:30","false","testbench: Support reuse of topology parser

The topology parser in testbench can be re-used for
the other applications like the fuzzer. In order to
accomplish this, this commit does the following:
1. Separate the topology parser into a separate project
(tplg_parser) which implements the callbacks for parsing
all the components in topology.
2. Add support for parsing new components such as host
pcm, dai and mixer
3. Include the topology parser as an external project
in the testbench.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",43,13,0
"thesofproject/sof","82fee903b7c64cdbd35c7c0ddca443409a537cd7","abonislawski","2020-03-10 08:54:39","false","tgl: L1 init defines

used to init L1 memory in alternate boot for slave cores

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",85,21,0
"thesofproject/sof","8dc72986e742fccb880b0418939c078dc80c97e2","yongzhi1","2023-02-07 22:58:10","false","topology2: speaker-echo-ref: fix hardcoded dai_index

Do not hardcode dai_index to 1.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",55,56,1
"thesofproject/sof","ee6f54b8432d542dce57a4112fe5b50db6c3e741","xiulipan","2018-11-15 06:45:21","false","ci: travis: add test topology

Build tests for travis CI

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",42,5,0
"thesofproject/sof","504ff64cc14d895fe468abec1d900c22d39ec213","xiulipan","2018-09-20 11:08:23","false","alloc: add a error log if pointer not aligned

If a wrong pointer is freed, we may have some memory issues.
Report a error log if pointer is not aligned to the block.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",35,4,0
"thesofproject/sof","dc17f286b96d94b1d5840a30dbfa989007443f61","zhuyingjiang","2018-11-05 08:31:43","false","rimage: manifest: add 1.5 manifest define

add 1.5 manifest structure define, macro define, KBL and
SKL 1.5 manifest defines

Signed-off-by: Zhu Yingjiang <yingjiang.zhu@linux.intel.com>",38,5,0
"thesofproject/sof","9bca4369da67e61e83e553b778ca3ac8ab686c9f","btian1","2023-02-21 06:58:21","false","copier: replace host dev with copier dev

Replace params and copy host dev with copier dev, after this change,
host dev and endpoint buffer are no longer useful for copier, next
step can remove host device and its endpoint buffer.

Simplified host_zephyr_params parameters, since all parameters changed
to copier dev aligned.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",57,57,1
"thesofproject/sof","59c343fcc770a7dce99fa61737c5c36dc67c09c7","btian1","2023-03-29 13:12:01","false","dai-zephyr: Modify the signature of comp_dai_config() op

In order to also use this function from the copier device without an
endpoint DAI device, modify the signature to ass both the dai_data and
the dev pointers. Also, modify the signatures of dai_assign_group() and
dai_init_llp_info() to use the passed pointers.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",58,58,1
"thesofproject/sof","40625f0de30e3746cbf59c9ad317b2666fec1b7e","ujfalusi","2023-05-30 07:33:54","false","ipc4: handler: chain_dma: Handle chain free when the chain_dma is not created

Do not treat as error if the chain dma is asked to be destroyed if it has
not been created yet.

The kernel might send such a request under special circumstances:
the PCM is opened, configured but never started/triggered then just closed,
freed.

This is the same way how pipelines are handled, but in case of pipelines
we use the pipe state.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",47,60,1
"thesofproject/sof","57cc807072408cb0529329fab695a7ff11f9902c","mrajwa","2019-04-16 14:44:51","false","KPB: SET/RESET HOST sink copy mode

This sets HOST copy mode to blocking before
draining starts and resets it back to
normal mode once draining is done.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",50,10,0
"thesofproject/sof","2b0935798d9abcfbf3f076c9792b366c681bab10","keyonjie","2019-06-25 05:05:11","false","detect-test: refine model data management

Add struct model_data to manage model related stuff.

For set_model, re-allocate buffer at the 1st IPC, calculate crc after the
last IPC is handled.

For get_model, output the crc value at the 1st IPC.

Todo: add crc32 value to the struct sof_ipc_ctrl_data may be the next
step, it will require ABI change.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",46,13,0
"thesofproject/sof","a178ef7c024e0ddd222a8d97d9ff5f9112899762","bardliao","2022-12-13 10:30:39","false","topology: hdmi-generic: change HDMI PCM id

Define HDMI_PCM_ID macro so that we can have different pcm id for
different topology. And change the hdmi pcm id of sof-hda-generic.tplg
to align with UCM.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",98,54,1
"thesofproject/sof","0f6cf837c715bf1ad94ad1c4d404f93062a5b26c","bardliao","2023-02-17 01:59:21","false","topology2: use a macro to config if a sdw amplifier support feedback

Not all amplifiers support feedback. We should not add feedback support
on topology to shch amplifiers.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",54,56,1
"thesofproject/sof","b332bee75143d2465e0d934b369546716aeedd87","tlauda","2020-01-07 14:08:28","false","agent: use pointer from sof context

Directly uses agent structure pointer from sof context
instead of global variable.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",71,19,0
"thesofproject/sof","6e95ecefc8aa5cc34c45f6ebd863c9c15ac92998","tlauda","2019-04-05 08:55:43","false","pipeline: trigger pipelines with the same sched comp

Changes pipeline behavior to trigger pipelines with
the same scheduling component. This change allows
for properly triggering topologies with mixer.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",47,10,0
"thesofproject/sof","397c1a0d94eb8dc75b0467cc2642a0a3b4dc0f40","tlauda","2019-08-01 10:48:36","false","pipeline: move check for xrun

Moves xrun check in pipeline_trigger after checking
if this pipeline is running on current core. Only owner
of the pipeline should access its data.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",53,14,0
"thesofproject/sof","7b7e15d67883865ec95f2651493797a9e3bb7a46","tlauda","2019-03-21 09:28:57","false","dai: fix getting DW-DMA copy size for DMA_CB_TYPE_LLIST

Fixes DW-DMA copy size calculations for transfers,
which are not using auto reloadable linked lists.
They require manual linked list reload to update
current position, so it should happen before
call to DMA copy.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,10,0
"thesofproject/sof","bce7f241d293d65d0fd38d280fb577b162621daa","tlauda","2020-01-21 10:08:52","false","dai: change place of setting DAI config

Changes place of setting DAI config from IPC handler to
dai_config operation of DAI audio component. It's much
more cleaner solution in terms of error reporting
and core ownership.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",79,20,0
"thesofproject/sof","dd06b5c7318b092b7a2a6426fb30edb499286bd8","lyakh","2019-02-20 08:05:41","false","init: (cosmetic) add panic.h where needed and remove where not

The SMP version of init.c calls panic(), therefore it needs panic.h,
OTOH the UP version doesn't call panic(), so the header isn't needed
there.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",63,9,0
"thesofproject/sof","fb7bf77c51966958b0abc38d3e6e2d17f4a78ee0","lyakh","2019-02-22 10:45:42","false","interrupt: use the parent IRQ instead of SOF_IRQ_NUMBER()

Where available, use the IRQ number of the parent instead of
extracting it from the child's interrupt, using SOF_IRQ_NUMBER().

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",61,9,0
"thesofproject/sof","bb314fca61df756be0000e21d5cd93ad0a08b7b2","aborisovich","2022-02-16 21:13:18","false","Fix for xtensa-build-zephyr.py. This fixes 1de3ef3

Existing xtensa-build-zephyr.py failed to copy sof logger
executable to staging directory due to missing '.exe' file extension.
This fixes the script.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",105,44,1
"thesofproject/sof","c648a119df6416250702f95cbed93f8f12ff38dd","lgirdwood","2018-11-19 12:55:12","true","Merge pull request #133 from bkokoszx/remove-rmbox

rmbox: removing rmbox",40,6,0
"thesofproject/sof","40c054ab3087466eb69e79165d8020e5470d4dcc","lgirdwood","2018-11-06 19:53:10","true","Merge pull request #514 from mrajwa/icl_work

DMIC: Enable power for DMIC for ICL platform.",39,5,0
"thesofproject/sof","1727cecb0d32b05d45b4d272d8b79f02948e3788","markbartonxperi","2021-12-24 09:42:08","false","audio: codec_adapter: Support for arbitrary periods in DTS Codec

DTS Codec can accommodate topologies containing pipelines with periods other than 1000.

Signed-off-by: Mark Barton <mark.barton@xperi.com>",119,43,1
"thesofproject/sof","d6f86e57ee6e731fd19485927e9f78fc0dd25279","tlauda","2019-10-21 09:31:46","false","dma: remove unused DMA_COPY_PRELOAD flags

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",63,17,0
"thesofproject/sof","1040c35d23134bc3bba8610434f934a008544779","fredoh9","2020-03-11 21:02:10","false","topology: move ifelse conditions to platform files

Move platform specific conditions to each platform file.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",83,21,0
"thesofproject/sof","b15ce3cb26ad26224625e62cc247ab89a529298f","lrgirdwo","2021-03-29 10:36:54","false","pipeline: move XRUN recovery setting to where it's used.

NO_XRUN_RECOVERY is only used by pipeline xrun logic so move it.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",80,34,0
"thesofproject/sof","920917bb7fde771123a6a483021079a4d9c06773","plbossart","2019-01-16 05:08:03","false","src/drivers/intel/baytrail/ssp.c: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","2bb9ebe20dcc912abd90a45ca954ec68fc0a1768","lrgirdwo","2019-06-03 14:44:28","false","ctl: rename sof-eqctl to sof-ctl

This tool is generic and can be used with any binary kcontrol to
send data to/from components at runtime.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",67,12,0
"thesofproject/sof","76b6301e5791c485bd9e13b1e87e8fbab7f30340","ktrzcinx","2020-04-22 11:32:40","false","ext_man: Make extended manifest build optional

Try to build extended manifest only when `e` flag will be set,
to prevent error and warning printing during creating optional
part of formware image.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",72,23,0
"thesofproject/sof","b9190ed3613ba435664793dbb97042df078088c6","RanderWang","2022-04-15 01:51:31","false","ipc4: update pipeline status to ready

Pipeline is ready when it is complete and update
pipeline status in this case.

Signed-off-by: Rander Wang <rander.wang@intel.com>",116,46,1
"thesofproject/sof","9bebdbf384fa06d118fca171692c9cdbdd5ea1ad","RanderWang","2018-11-27 05:22:14","false","link dma: allocate link dma channel at dai_config

Fix capture issue with hda codecs. Now the data captured by
hda codecs is full of zero. It is caused by mismatch of link
dma channel between host and FW.

Now host allocates link dma channel at dai config loading stage,
and sends it to FW to allocate link dma channel at dai_config
function

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",44,6,0
"thesofproject/sof","6ddd6554b9a8fd2386b588cda0c27d649969ca14","RanderWang","2023-07-11 05:27:29","false","west.yml: upgrade Zephyr revision - Restore IDC interrupt on D3 exit

After exiting D3 state if IMR context save is enabled, IDC interrupt
must be re-enabled again for all cores. It fixes multicore CI test
issue.

431108d89e175: intel_adsp: ace: Restore IDC interrupt on D3 exit

Signed-off-by: Rander Wang <rander.wang@intel.com>",31,61,1
"thesofproject/sof","97162cdc093decdcc1393dc67588a367b3a83aef","RanderWang","2021-09-03 05:15:13","false","ipc4: pipeline: set schedule component for ipc4 pipeline

Unlike current ipc3 pipeline,  driver will not set schedule
component for ipc4 pipeline. This patch set the last component
of each pipeline as a schedule component.

Signed-off-by: Rander Wang <rander.wang@intel.com>",119,39,0
"thesofproject/sof","2c4d02df1e952ad234a0ac2d006e152cba6048aa","saisurya-ch","2023-08-18 11:12:22","false","src: arch: xtensa: configs: add ACP_6_3 defconfig

Add defconfig for ACP_6_3 platform.

Signed-off-by: SaiSurya Ch <saisurya.chakkaveeravenkatanaga@amd.com>",24,63,1
"thesofproject/sof","f5bcc4bb06eb363fa77c7bd6778c8690177b37cd","tlauda","2019-12-11 14:41:18","false","init: remove need to access sof struct on slave cores

Moves sof structure initialization to master core to avoid
data being overwritten by slave cores in case of future use.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",73,18,0
"thesofproject/sof","e1876f35b4cfa886eb5adc97ef27052d35d13434","plbossart","2020-05-01 23:11:22","false","topology: add support for rt5682 on link2 in SoundWire mode

The UpExtreme provides access to link2 in 2 of the 3 modes. This is
useful to test rt5682 configurations.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",94,23,0
"thesofproject/sof","ecb73cad2de35493004427c5d639166c3bfb5cbb","jajanusz","2019-04-29 09:54:55","false","cmake: install public headers for host

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",48,11,0
"thesofproject/sof","eb0c038e96249529fe315acdcf41b0c2df12566e","lyakh","2022-12-13 16:48:51","false","selector: make frame formats explicitly cached

audio_stream_fmt_conversion() takes cached aliases of frame formats,
fix selector respectively.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",98,54,1
"thesofproject/sof","4cc9d5418b0e9389a8ebdaf81eda13ea2c1d24e2","lyakh","2023-01-10 17:02:59","false","copier: remove redundant cache invalidation, add comments

No need to invalidate cache again - comp_new() already has done it.
Also document why we don't need to copy config_data[] and use
memcpy() directly instead of mailbox_hostbox_read() - we already have
a pointer and cached have been invalidated already.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,55,1
"thesofproject/sof","cc22442d3836f1859d19ad33dc9e308d158a012d","abonislawski","2019-06-17 12:39:23","false","dma: add missing error handling in dma_trace_start

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",45,13,0
"thesofproject/sof","e0458032e29f5b8caad98af9733b3c33104db79f","ranj063","2022-12-17 19:17:08","false","module_adapter: Fix trigger op for IPC4

The check for status counts for modules with multiple sources is only
applicable for IPC3.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",91,54,1
"thesofproject/sof","5433e371b8bc07fcfccd489f2492c2b10d63dbce","ranj063","2023-05-31 16:04:49","false","module_adapter: Extend the module interface

Add the bind/unbind ops that can be optionally implemented by modules to
perform module-specific actions when other modules are bound/unbound
from them.

These are particularly useful for modules such as the mixers, smart_amp,
copier that can have multiple input/output pins.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",48,60,1
"thesofproject/sof","5ea5d5b3421268ba541e1975a4a4d59c1163b474","lgirdwood","2018-07-24 08:50:46","true","Merge pull request #142 from tlauda/topic/dw_dma_use_done

dw-dma: use done bit for linked list transfers",13,2,0
"thesofproject/sof","1966f64eb63ecb7a66258b9d4cfe86057f0f874d","keyonjie","2021-09-02 02:47:32","false","buffer: remove the unneeded size check

The allocator will return failure if the request size is too big, remove
the unsuitable check here.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",120,39,0
"thesofproject/sof","c55aed4793a0b5fde59b8e3c926e85849b41788a","singalsu","2019-08-16 12:48:43","false","Tune: Update file path for demo EQ responses

This patch fixes the wrong file path to output example EQs and places
an identifier string to high-pass responses used in topology embedded
filter setup. The identifier is needed to correctly refer in topology
to right response when there are several similar type EQs in the
topology e.g. two separate IIR filters.

A new 16 kHz rate high-pass filter export is added into the script to
be used in voice pipelines.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",57,14,0
"thesofproject/sof","f24670b986853fe78cfe91d23da72bfe21f3d6fe","singalsu","2022-06-02 15:54:59","false","Tools: Testbench: Add MFCC component

This patch adds load of MFCC component to testbench.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",115,48,1
"thesofproject/sof","eaaea60b65cb6cadffe2e2951dd3fecb01bc80d1","ranj063","2022-01-14 20:41:34","false","codec_adapter: remove macro CODEC_INTERFACE_ID()

Interface ID has been replaced with UUID. So no need for the unused
macro.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",117,43,1
"thesofproject/sof","8effa4ff3d7cabc12c94c2228727da96a1b455fc","ranj063","2022-01-14 03:03:09","false","codec_adapter: fix panic during reset

If module_prepare() fails, the pipeline will be reset resulting in
module_reset() getting invoked. Just return if the state is <
MODULE_IDLE which indicates that the module was never prepared.
Also, in this case, local_buff is never allocated. So, check if it is
NULL before zeroing it out to avoid DSP panic.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",117,43,1
"thesofproject/sof","56d1fe652c3f23e412bec31ecf0ecfed6cc31823","ranj063","2021-07-22 19:14:17","false","topology1: sof-cavs-nocodec: convert all playback pipelines to mixer-based pipelines

Convert all playback pipelines to have a mixer so adding a deep-buffer
pipeline will be simpler.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",96,38,0
"thesofproject/sof","5958e7cd99d4bb3a975e091ada4edb4b3cb2a2de","ranj063","2022-06-01 18:34:45","false","module_adapter: optimize for modules that produce period_bytes

Optimize the copy() function for modules that have only 1 source/sink
buffer and produce only period bytes every period. There is no need to
allocate intermediate buffers to hold the processed samples. Also, pass
the buffer stream pointers directly so that there no extra copies.

Introduce a new field, simple_copy in struct processing_module that can
be set by modules that do not need deep buffering and produce exactly
period worth of data in every copy().

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,48,1
"thesofproject/sof","b1e201cfb8e6cfaec469722351ca5a75a5a08d91","singalsu","2020-05-13 10:17:25","false","Tools: Topology: Align all IIR pipelines to 1024 bytes control max size

Some of the pipelines but not all contained for IIR the old 304
bytes (single IPC max size) control size. It can be set to 1024
bytes for all IIR instances.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",96,23,0
"thesofproject/sof","5945235b4245d40a7af99482e3d5bed94ff47149","ranj063","2023-10-13 15:55:23","false","topology2: mixout-gain-dai-copier-playback: Replace audio_format objects

Use input_audio_format/output_audio_format explicitly in preparation for
deprecating the audio_format class.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",10,64,1
"thesofproject/sof","236de3f142fe46b81d0d641de866f4c82108e0d7","marc-hb","2022-04-20 22:34:45","false","xtensa-build-zephyr.py: drop check=True, now the default

Commit 475e09f17dc3 (""xtensa-build-zephyr.py: default to
subprocess.run(check=True)"") switched the default value of the
execute_command() function to ""True"". Remove all the ""check=True""
arguments that are now redundant.

Zero functional change.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",115,47,1
"thesofproject/sof","8994a7ff816ee29af1fcd1c9e60b9cfd9eb344e4","mrajwa","2019-07-25 20:16:56","false","kpb: make reset more secure

This patch takes care of secure reset.
Now we check in what state KPB currently is.
If this state involves some ongoing work
like draining or buffering then KPB will
register reset request and terminate this
job gracefully.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,14,0
"thesofproject/sof","3b653135601c5032bbdaaa77c3fa1bfd5281e7a1","serhiy-katsyuba-intel","2022-12-21 15:34:23","false","Revert Audio: Copier: Add missing DMIC DAI index mapping to create_dai()

This reverts commit 8d166a432f68ccd9ee657a58f379ed4f0f22b888.

This restores working DMIC functionality on Windows platform broken
by #6668.

ATTENTION: This will break DMIC1 (DMIC with DAI index 1) functionality
on Linux platform, DMIC0 should still work fine!
Non working DMIC1 should be fixed on Linux driver side, not this firmware.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",93,55,1
"thesofproject/sof","98cbc7269d8a5cac4f3ab2dc0e4a8bd517e88643","aborisovich","2022-11-23 13:14:31","false","workflow: made ""Main Actions"" and ""Zephry"" workflows reusable

Reusable actions may be triggered by other actions in the
repository. Those two actions will be triggered by new
daily testy action at specified time of the day.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",95,54,1
"thesofproject/sof","eb4a9381d33eb54f6a3938c47ce1aade7f626109","aborisovich","2022-02-03 20:52:25","false","Added #ifndef guards in compiler_attributes

Building with GCC on Windows using MSYS caused errors related to
macros redefinition in compile_attributes.h due to GCC using its
standard headers. Added #ifndef guards.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",106,44,1
"thesofproject/sof","099a1874389300d38042d3a3a146c976ae837f3b","lrgirdwo","2020-05-05 18:46:54","false","dma: dw: improve debug for buffer IO.

Trace buffer positions in verbose mode.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",95,23,0
"thesofproject/sof","a0cfe1e231a943bd5e39d1c5f4132fdfda2cd49c","lrgirdwo","2018-12-03 16:57:49","false","abi: ipc: Move mem caps and panics codes to coreect header.

Topology mem capabilities and trace panics codes should be in the
correct header for their users.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",40,6,0
"thesofproject/sof","364ee49c5337b9030580afdf5b5bdd26cfbd9849","keyonjie","2021-04-27 01:53:55","false","ll_schedule: rename num_clients to registered_cores

Rename the 'num_clients' in struct ll_schedule_domain to 'registered_cores'
to reflect the real use of it.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",84,35,0
"thesofproject/sof","e6baebd54b86de59d6fbae7fb93e6242fa3c7953","ShriramShastry","2022-11-23 09:30:48","false","Math: library: Add an exponential function

The 32-bit exponential library function has an accuracy
of 1e-4 and a unit in last place error of 4.5878 for
inputs from -5 to +5 (Q4.28) and outputs from 0.0067379470
to 148.4131591026 (Q9.23).

Signed-off-by: ShriramShastry <malladi.sastry@intel.com>",94,54,1
"thesofproject/sof","5694cfa01234dee8f9e8f311f27cf7a6bf2f9454","marc-hb","2022-09-20 17:48:53","false","scripts: add link to CMake envvars FAQ next to XTENSA_SYSTEM definition

Environment variables like XTENSA_SYSTEM are an absolute CMake
pain. Add a link to the CMake FAQ and a one-line description why.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",96,52,1
"thesofproject/sof","5dfaf0bf80ceb6324e6589b72f08950a9ba2e859","marc-hb","2022-06-17 21:26:04","false","sof_ri_info: memory layout: find 'tgl' in ___/build_tgl_xcc/sof.ri

Extend the search for the platform code in directory names when there is
no sof-tgl.ri match.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",120,49,1
"thesofproject/sof","6833c5d542e4128e67e87b07375eff8a98589a24","marc-hb","2020-06-20 05:31:06","false","xtensa//cpu.c: give void _WindowOverflow4 a type, fixes -Werror

Fixes this -Werror on tgl platform:

.../xtensa/lib/cpu.c:65:38: error: taking address of expression of
  type 'void' [-Werror]
    void *dyn_vec_start_addr = (void *)(&_WindowOverflow4);

While ""void foo;"" is syntactically correct, doing anything with it is
illegal in standard C.  Only the tgl platform was affected because it's
the only one with CONFIG_NO_SLAVE_CORE_ROM right now.

Any C type works, I tried a few and when compiling with xtensa-cnl-elf
they all produce the exact same -g0 binaries than the original without
-Werror. I find that the uint8_t[] type doesn't make _WindowOverflow4
look too different from what it is: assembly code.

This is the only change required to compile with the xtensa-cnl-elf
crosstool-ng toolchain documented in the getting started guide.

Note the build with this xtensa-cnl-elf gcc toolchain has NOT been
tested!  The purpose of this commit is purely to add the gcc build to
CI, avoid future gcc bitrot and catch more warnings and bugs.

Fixes  #2516 / commit be083cf35029d0c (""cpu: unpack dynamic vectors"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",78,25,0
"thesofproject/sof","ce28e09bd33e75b3e4665c7181fae0de8c6459d7","marc-hb","2022-08-03 17:23:39","false","xtensa-build-zephyr.py: west update --depth 5 --narrow

Restore previous optimization. Can easily be undone with
git -C zephyr/ fetch --unshallow.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",110,50,1
"thesofproject/sof","09eae9beb4a6d7d19fa5a7e1a10c918cc9abfe13","marc-hb","2023-10-31 23:58:55","false","Revert ""samples: Fix zephyr config""

This reverts commit fbde1dccf87898372282199328a131c84008b0ff.

Now that CONFIG_SAMPLE_SMART_AMP has a hard, menu dependency on
CONFIG_SAMPLES, we don't need to encode Kconfig dependencies in CMake
any more.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",4,65,1
"thesofproject/sof","4a59133b3d5888d5b14f7e7875566f887bf6efb9","marc-hb","2021-07-08 04:14:04","false","dma: add some NULL pointer checks

These proved useful when debugging Zephyr but they're not Zephyr specific.

Use mtrace_printf() because if we're having DMA issues we probably want
to avoid the DMA trace

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",87,37,0
"thesofproject/sof","932cf4f73ca0444ab86f235e3a30626fae6e2819","lyakh","2023-04-13 15:11:50","false","buffer: use an accessor to read struct audio_stream::size

This patch adds audio_stream_get_size() to read
struct audio_stream::size and converts all users. Apart from hiding
internals of the structure, it also enforces the use of the
__sparse_cache annotation.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",50,58,1
"thesofproject/sof","a06d4b1c2ce1f4e0e52f474b513e6e0739f7eeae","lyakh","2019-02-22 10:30:36","false","trace: make _log_message() derived macros usable as functions

All trace_event() style macros resolve to _log_message() or
__log_message() eventually. This message makes those macros usable
as a function, e.g. within ""if () else"" clauses with or without
curly braces.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",61,9,0
"thesofproject/sof","56ac46a35efc88e14480d8d45674c697535adc67","lyakh","2022-04-06 13:11:14","false","asrc: fix buffer acquisition

Instead of acquiring and releasing buffers locally multiple times,
do that once for .params(), .trigger(), .copy() and .prepare()
methods.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",111,46,1
"thesofproject/sof","bbf81b8d243396f3c5503996712e1851891a72df","lyakh","2022-05-06 10:55:06","false","git: remove ""module"" from .gitignore

We now have a ""module"" directory under
src/audio/module_adapter/module so it shouldn't be ignored by git any
more.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",115,47,1
"thesofproject/sof","0987280f104677a612b6186711355da75aac26f0","lyakh","2021-11-24 13:19:22","false","pipeline: enforce scheduling order of connected pipelines

Connected pipelines have to be scheduled in a specific order,
depending on the direction of the data flow. Use the new
schedule_task_before() / schedule_task_after() API for that.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",129,42,1
"thesofproject/sof","5d871373cbbf2d3f0c079ec78cb1561d0166af68","cujomalainey","2020-10-28 01:08:02","false","host: don't alloc notifier

Both the fuzzer and the testbench call init_system_notifier which
initializes the struct so there is no need for this check (which causes
a double alloc) in the get function.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",75,29,0
"thesofproject/sof","3ca2c6d5214d555b109080fd042340e3520c33ec","cujomalainey","2022-03-09 23:16:57","false","tgl: memory: resize RT_*TIMES more

Due to high demand of memory in this given target scenario, reduce these
memory regions to give more to the buffer region.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>
Signed-off-by: Pin-chih Lin <johnylin@google.com>",113,45,1
"thesofproject/sof","adf6db4d859c8d496f451a949ce30a2a995b8497","cujomalainey","2018-11-16 23:06:45","false","Update sof-byt-rt5645 graph

update graph to represent code

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",40,5,0
"thesofproject/sof","bc6d2f1dd934ccbdc4a6d10f704f98e20c9bc90c","mrajwa","2019-04-24 21:57:26","false","kpb: add more logs

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",50,11,0
"thesofproject/sof","6f83a23a030b1c131285d1564c801f55e30f12c6","mrajwa","2020-01-21 14:00:10","false","kpb: remove unused variable

This patch removes unused variable is_internal_buffer_full

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",78,20,0
"thesofproject/sof","ab0429fdbe563ef6abe499c69b2483e96c4762d0","softwarecki","2023-04-06 13:42:23","false","Fix: Use module manifest from toml as a template for elf modules

Some platforms (eg. tgl) dont have modules configuration in a toml files.
An attempt to use the configuration template ended with a reference to
a null pointer. This commit fixes this issue.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",51,58,1
"thesofproject/sof","d91be6da6755862fa6fbaf13112f83f2aedf6534","jajanusz","2019-01-15 21:16:23","false","buildsystem: remove autotools from sof

This commit doesn't touch tools buildsystem.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",54,7,0
"thesofproject/sof","96b3b06640073d6d536bba110a38cf3f62aa5b92","lyakh","2019-03-05 11:46:02","false","ipc: (cosmetic) simplify a conditional statement

Rearrange a conditional to reduce the number of branches and
eliminate a goto.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",65,9,0
"thesofproject/sof","a62f562378da3b1a2a42f0de1b25fdff3e34203c","singalsu","2019-09-24 13:57:13","false","ASRC: Add topology files

This patch adds all the topology files related parts and two complete
test topologies to test ASRC playback and capture with APL platform.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",65,16,0
"thesofproject/sof","5b4b5532833b25efebfa587a844fa670c1422a31","ktrzcinx","2020-06-01 08:16:08","false","ext_manifest: Add sof_ipc_user_abi_version content

This information known at build time does not need to be
provided in a mailbox.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",97,24,0
"thesofproject/sof","165e68fdaff8bf46aa4e65286259e576a51a6ce2","aiChaoSONG","2023-10-26 07:48:56","false","topology2: Add sof-lnl-rt711-l0-rt1316-l23-rt714-l1 support

This patch adds sof-lnl-rt711-l0-rt1316-l23-rt714-l1.tplg,
which is used to support LNL RVP + AIOC4.1 codec board
combination.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",7,65,1
"thesofproject/sof","9c48a89f2e4c776ff879ca8f636fc1325063439f","iuliana-prodan","2023-05-03 11:50:49","false","topology: imx8: correct comments for compress tplg

Update comments for compress typologies to reflect the correct
flow and the use for each file.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",54,59,1
"thesofproject/sof","f27cd973f15c1e68348d708aeebb46bda4508406","mrajwa","2019-07-25 20:22:31","false","kpb: add function to reset history buffer pointers

This adds function to reset history buffer key
pointers.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,14,0
"thesofproject/sof","ff22d80ac53dce7d3aa009cbd6c796bfa5739902","lgirdwood","2018-07-26 11:45:30","true","Merge pull request #151 from slawblauciak/mixer_ut

test: update mixer ut",13,2,0
"thesofproject/sof","7378b2489a525b5368ba7593d3d97cb80f00b290","keyonjie","2021-09-06 09:11:41","false","Kconfig: use uncached buffer only for debugging

To rule out buffer coherency issue, it is useful to add a debug option
with which selected only coherent/uncached buffer will be used.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",119,39,0
"thesofproject/sof","33c366311491d96b6f2f0db714efc20bc6f6f7b2","keyonjie","2020-06-01 05:07:40","false","topology: pga: add uuid token support

Add the uuid token to volume widget for the future use.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",97,24,0
"thesofproject/sof","4c39ce343366470183dab097c0f326aebc58a74b","maruthi-machani","2022-11-09 05:24:03","false","platform:amd:support for tdm configuration

support for tdm configuration for amd platforms

Signed-off-by: MARUTHI MACHANI <maruthi.machani@amd.com>",92,53,1
"thesofproject/sof","642ac57ed3aa071cdbb5a7b46ee25ccb1252c7b5","RanderWang","2020-05-28 06:28:43","false","topology: tgl-max98373-rt5682: adjust channel usage for sdw DSM support

For original design, there are 4 channels 24bit stream for playback
and 8 channels 24bit IV feedback for capture stream. This requirement
exhausts all resource on single link. Now adjust it to a 2 channels stream
for playback and a 4 channels stream for capture

Signed-off-by: Rander Wang <rander.wang@intel.com>",96,24,0
"thesofproject/sof","8cdf8e1e17276475b4e68acbe890e2098c2b4b98","RanderWang","2022-12-07 13:07:19","false","dai: release llp slot when dai is free

At first llp slot is released by dai_dma_free for dai_free in
ipc4 path. Now dai_dma_free is removed from dai_free, so add
another function dai_release_llp_slot to free llp slot in
dai_free.

Signed-off-by: Rander Wang <rander.wang@intel.com>",101,54,1
"thesofproject/sof","8541d68b507ef28b68a79713634e3b434d9f53bb","pblaszko","2023-03-14 10:15:05","false","ipc4: update comp direction on pipeline complete

Current pipeline implementation assumes that modules are bound one by
one from input to output gateway (Host to DAI or DAI to Host). If
neighbor module does not have direction configured, FW returns error.

This assumption is incorrect. Driver can bind modules that are not yet
bound to any gateway. FW should check connections only when driver
finish binding all modules and set pipeline state.

Signed-off-by: Przemyslaw Blaszkowski <przemyslaw.blaszkowski@intel.com>",55,57,1
"thesofproject/sof","12d660b088f5bdc5c8d02d43e0398f27ab2b74e6","andrula-song","2022-07-05 02:02:40","false","Audio: copier: add hifi version implementation of apply_attenuation

add hifi version implementation of apply_attenuation, using xtensa
instructions can save about 74% cycles than the original one.

Signed-off-by: Andrula Song <xiaoyuan.song@intel.com>",108,49,1
"thesofproject/sof","29787411180686f9dced3f9b31f8d09343abeb05","xiulipan","2020-03-11 07:59:28","false","topology: fix apl-demux-pcm512x HDMI dai id

The HDMI DAI id changed, update the demux topology.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",85,21,0
"thesofproject/sof","3d903b5e3fa07c738ec479ba95e89a5ed60df9bc","xiulipan","2018-07-23 08:12:23","false","topology: Add dai index in DAI SectionBE

DAI_TYPE and DAI_INDEX are both needed to get the dai in FW, add
DAI_INDEX in SectionBE to make sure we can handle multiple type dais.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",13,2,0
"thesofproject/sof","84c52b4e41ce4f3a31ab85086e20822253f54dce","btian1","2023-07-18 06:20:53","false","copier:simplify ipcgtw create parameters

remove duplicate parameters and make function parameters
looks more simple.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",32,62,1
"thesofproject/sof","568f184b49ad0b77e6ba24aa4070dbd1a8966ede","johnylin76","2020-09-15 10:32:12","false","sof: drc: Add DRC component with floating-point calculations

This commit adds Dynamic Range Compression (DRC) to the list of SOF
components. DRC in audio processing is intentional to reduce the
volume of loud sounds and amplify the silent sounds as compressing an
audio signal's dynamic range.

This is the intermediate implementation with floating-point calculations.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",62,27,0
"thesofproject/sof","b793d1ce2bfa1f4b4247906144658338e7e57536","johnylin76","2023-08-16 08:30:13","false","topology1: waves: add definition WAVES_SPK_ONLY

Introduced var WAVES_SPK_ONLY (depend on WAVES) for specifying the
topology requested to apply Waves module on Speaker pipeline only
(not on Heaadphones).

Signed-off-by: Pin-chih Lin <johnylin@google.com>",27,62,1
"thesofproject/sof","52117991334374ce9cc4a8f7ab395cfc95106023","jajanusz","2019-11-06 11:10:25","false","cmake: trigger olddefconfig on kconfig changes

When there are changes made to Kconfig files it's better
to run olddefconfig automatically to prevent undesired behaviour,
like for example depending on added config that has some default value
that is not present because developer didn't run olddefconfig
after pulling changes.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",52,17,0
"thesofproject/sof","c6baa9796c60d414f0ce391de948295283056678","jajanusz","2020-01-09 09:38:25","false","drivers: intel: deduplicate ssp trace macros

Trace macros are already defined in ssp.h.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",74,19,0
"thesofproject/sof","9e2aa3d3acf2ccb81dd2bd9ff9cb742d5193509f","tlauda","2019-08-06 11:47:14","false","alloc: fully synchronize memory map between cores

Adds cache operations to alloc functions to get full
synchronized memory map between different cores.
Memory allocations aren't done so often so we can
afford to go through cache and perform so many
wtb/inv operations. This change allows slave cores
for allocation from runtime heap, buffer heaps etc.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,14,0
"thesofproject/sof","084e7d6e7973f42ffa0470028a630f7066fd79b0","jajanusz","2019-06-14 08:28:30","false","test: add realloc stubs

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",47,12,0
"thesofproject/sof","5ccbab26594badef731ccfddabfe36a253eb8b36","jajanusz","2019-02-17 18:32:37","false","tests: add panic symbols for alloc

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",63,8,0
"thesofproject/sof","376d94fe6b40b44d445a9d3f7be67ca9b8dad7a5","lrgirdwo","2021-04-13 15:04:37","false","ipc: move IPC specific component logic into IPC helper.

comp_new() and dependencies are all specific to the IPC ABI MAJOR,
move them to IPC helper.

No code changes, move only.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",81,34,0
"thesofproject/sof","741af6c58161c10b93f766b4e675da58f826a1b8","plbossart","2019-01-16 05:08:02","false","src/audio/dai.c: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","ec47eefa13cdf9acf3b3c0d190fcf248f9df3fa5","plbossart","2020-06-26 23:12:32","false","topology: sof-byt-codec: connect pipe-host-volume-playback to mixer-dai

remove the low-latency pipeline and pcm-media.

Instead, we use 2 two pipe-host-volume-playback with different periods
connected to the same mixer-dai.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",70,25,0
"thesofproject/sof","7d1c8106d4ecfff9a55c038340d1348d3cfc7213","lrgirdwo","2020-04-15 09:21:10","false","zephyr: cc: use C99 for headers that may be included into Zephyr

Zephyr is built using C99 configuration so we need to make sure that
headers that may be used by files being built into Zephyr also use C99.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",82,22,0
"thesofproject/sof","4fc207e89fcb6607453530d464fb7f84709b5812","lrgirdwo","2020-01-27 14:22:17","false","dma: dw: GCC 9.x packed data alignment fixes

GCC 9.x introduces checks for packed data alignment when being passed or
cast as different types.

Pass LLI by pointer instead of SAR* and DAR* which results in packed
alignment error.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",78,20,0
"thesofproject/sof","69eca98dbd9df73ddf8189be3319db0c8ebc88cb","lrgirdwo","2021-08-16 15:47:58","false","library: testbench: support both LL and EDF scheduler types.

Don't hard code the scheduler type for EDF.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",117,38,0
"thesofproject/sof","f551fdb9fb9c1e6645cd999913f89d040772a3ef","yaochunhung","2022-02-25 02:47:45","false","platform: mt8195: suspend switch clock back to 26M

When DSP enter suspend:
1.Define CLK_SUSPEND_CPU_HZ 26M for DSP suspend frequency and turn
  off adsp pll clock to avoid unexpected behavior after resume.
2.Increase wait for interrupt level to 15 to avoid unexpected interrupts.
3.Remove XT_WAITI_DELAY for LX7.

Signed-off-by: YC Hung <yc.hung@mediatek.com>",110,45,1
"thesofproject/sof","f4900e7dcde2171bd397e6331572458598e4a4db","dbaluta","2019-01-28 12:06:14","false","rimage: Use fw.h instead of duplicating the code

This is very useful when updating one of the types in UAPI
because with the current implementation one needs to be careful
to also update file_format.h

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",59,8,0
"thesofproject/sof","6a70f38b151fc75b2c2f15f898118d5b44a77cb6","dbaluta","2023-07-25 06:45:25","false","imx: memory: Fix mixer going out of memory

Commit 05871a16de0d (""pipeline2.0: add source/sink api to
audio_stream"") added two new fields to `struct audio_stream`:

 struct audio_stream {
+       struct sof_source source_api;
+       struct sof_sink sink_api;

and because `struct audio_stream` is part of `struct comp_buffer`
we see an increase of `struct comp_buffer` size from 256 to 384.

With this modification, i.MX mixer use case goes out of memory:

c0 dma-trace src/lib/alloc.c:765    ERROR failed to alloc 0x180 bytes zone 0x4 caps 0x1 flags 0x0
c0 dma-trace src/audio/buffer.c:51  ERROR buffer_alloc(): could not alloc structure

This is not ideal. Anyhow, it was necessary for new source/sink API.

Fix this by increasing the number of 512-byte heap blocks to 32.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",33,62,1
"thesofproject/sof","ea13eacae20cb492ebe9d791927dd89c056505cc","dbaluta","2020-01-13 20:17:24","false","drivers: imx: interrupt: Add IRQSTEER address for i.MX8M platform

i.MX8M has a different IRQSTEER address. Select the correct
address base on CONFIG_ option.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",77,19,0
"thesofproject/sof","808c4512c5da37d8cfc7f5b5fa45ce2788d13c0c","ranj063","2021-07-22 17:03:33","false","Revert ""topology: cavs-nocodec: Add deepbuffer pipeline to SSP0 and SSP2""

This reverts commit a10b5dcf85294f08d0e9c1eb2634bbff2d529f57.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",96,38,0
"thesofproject/sof","c8e957c0ddd978d096d056c9b035d42e4691deff","abonislawski","2019-06-18 11:32:50","false","memory: reorder heap defines to match order from CNL memory layout

This will make easier to analyse heaps in memory.h

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",45,13,0
"thesofproject/sof","02cf74ae214f682729b7e56a2a8879eb5a79efb7","tinghan-shen","2022-06-28 03:06:26","false","platform: mtk: add mt8188 memory layout and register definitions

Add memory layout and register address for mtk mt8188.

[Cache]
I-Cache: 64KB, 4-way Associativity
D-Cache: 128KB, 4-way Associativity

[Memory]
DRAM: DSP can access DRAM shared with CPU
L2TCM: 512KB DSP SRAM POOL

Signed-off-by: Tinghan Shen <tinghan.shen@mediatek.com>",113,49,1
"thesofproject/sof","55d795489858439561dbaf75c813529f3d0f14a4","abonislawski","2019-06-19 09:57:49","false","rimage: make .static_log_entries optional section

Thats because this section is optional in FW, it will be created only with TRACE enabled

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",49,13,0
"thesofproject/sof","f45bc1e216038f20d142234e4e0417c6bdf01c4f","abonislawski","2021-01-05 16:41:19","false","ssp: try to use the same source clock for BCLK and MCLK

This is recommended flow to avoid glitches

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",73,31,0
"thesofproject/sof","db7a3cfe1b807d29379fa48d918e3da19f59c389","abonislawski","2019-04-03 13:43:15","false","coredump-reader: core header and registers printing separately

To separate them visually for better reading

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",51,10,0
"thesofproject/sof","fbb82566d2eb2a31a06a64ea2dc729af434e216d","ranj063","2022-12-16 22:32:17","false","module_adapter: Fix module_adapter_reset()

When module_reset() returns a non-zero value, print an error if needed
and return immediately.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",91,54,1
"thesofproject/sof","847f9fe580c29e5ce8b5e68438ab1bb202804dd4","ranj063","2022-12-17 03:14:35","false","ipc4: handler: initialize hw_params

Initialize the hw_params to 0 before passing it to the individual
components in the pipeline.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",91,54,1
"thesofproject/sof","efc0a1478ba6c325f839f46bdc2224c9549e0cf4","ranj063","2022-01-31 20:30:36","false","codec_adapter: simplify deep_buffer_bytes calculation

Remove the default buff_periods and the check for period_bytes !=
in_buff_size. buff_periods will evaluate to 2 if period_bytes and
in_buff_size are equal.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",104,44,1
"thesofproject/sof","877079af471dad5ef9329749cbedfa99ea6056bb","softwarecki","2023-09-18 13:08:26","false","smex: elf: Removed unnecessary initialization of local variables

The values assigned when declaring variables were overwritten in the code.
Redundant initialization was removed.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",20,64,1
"thesofproject/sof","125745bcad1742b2bc2aac20096857bb66f704d0","softwarecki","2023-03-07 12:52:42","false","file_utils: Fix error detection in get_file_size function

The fseek function returns -1 to signal an error. Return value was assigned
to a variable without a sign, so the error could not be detected.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",56,57,1
"thesofproject/sof","2238f3da32a40143e131bf9eec43350ac7d8a707","lyakh","2022-04-06 10:02:33","false","tgl: fix single-core building

All TGL-based ADSPs are multicore, but it should also be possible to
build SOF with CONFIG_CORE_COUNT=1.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",111,46,1
"thesofproject/sof","b3a19c45e9e22de8d4abcf3b08d63748ae2fee5c","pjdobrowolski","2022-08-30 13:27:35","false","ipc4: library manager: handling load library function

Adding function responsible for loading library action after IPC4 message.

Signed-off-by: Stelter, Jaroslaw <jaroslaw.stelter@intel.com>
Signed-off-by: Dobrowolski, PawelX <pawelx.dobrowolski@intel.com>",113,51,1
"thesofproject/sof","5eb017512ec0664ab29e00bf4d4c3ce15b99fcee","singalsu","2018-08-07 15:55:19","false","SOFT: Add equalizer tuning scripts and small examples

This patch adds support to SOFT to setup FIR and IIR equalizer types.

The examples scripts for simple FIR loudness effect, IIR loudness effect
and speaker equalization case demonstrate the usage of the tool. The
output "".txt"" files will be possible to apply with alsactl to setup
the equalizers in SOF.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",18,2,0
"thesofproject/sof","715c89433a90f05cf8e3aeec78fa8582a7799f39","singalsu","2021-11-18 16:14:46","false","Audio: TDFB: Track sound direction of arrival

This patch adds sound direction estimation. TDFB component updates
the sound direction control to user space. User space may control
the beam direction towards the source with help of the reported
angle.

Sound direction estimation is based on cross correlation maximums
pattern and match of theoretical propagation delays to measured
pattern. Cross correlation search is triggered by short term
level when it exceeds the estimated background noise level. An
emphasis filter is used to filter out typical low frequency noise.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",128,42,1
"thesofproject/sof","adf8d66cafcd26235277b95c47ba48c15e468df9","singalsu","2019-04-29 11:06:43","false","Volume: Improve coverage of cmocka tests

To help catching overflows this patch exercises the volume
component test with larger absolute value test data, both
positive and negative numbers. A test generator is added for
S24_4LE format.

Since the reference float arithmetic sometimes calculates the
sample with less accuracy than fixed point firmware code the
error is asserted when delta of reference and firmware is larger
than one LSB. The float code is off by one sometimes with negative
samples. To not complicate the test code this simple relaxation is
proposed.

The table of test inputs is commented with numbers to help to quickly
find a failing test case function if such happens from printed output
from cmocka test run.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",48,11,0
"thesofproject/sof","12a553814b49b2344519bc00cc375cc55a80c3df","lyakh","2022-12-21 11:34:01","false","memcpy_s: fix the name of the last parameter

The last parameter of memcpy_s() isn't the size of the source buffer,
it's the actual number of bytes that should be copied.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",91,55,1
"thesofproject/sof","79c647542d41802e74817276d756de98d5911711","singalsu","2021-05-18 15:10:13","false","IPC: Handle ASRC as ASoC component type and not as process type

ASRC new() receives incorrect topology tokens values before this
fix. It occurred as pipeline DAI find fail for capture direction
ASRC.

Fixes #4193

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",87,35,0
"thesofproject/sof","e74e1b3f048583d842006aa0472308aa7df4c5f8","lyakh","2021-11-18 11:17:57","false","pipeline: don't skip a copying scheduling tick

When processing a PAUSE or a STOP trigger in the pipeline task, if
the pipeline aborts processing of the trigger, it has to proceed
executing the copy() flow instead of skipping the tick.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",128,42,1
"thesofproject/sof","c328dd85f65bdaef99fcc8a394e854d4d1cdf00a","singalsu","2019-06-03 14:54:03","false","DMIC: Add support for passing unmute ramp time from topology

The raw capture from digital microphones contain some DC signal
in the beginning. The DC compensation filter is set to be quite slow
to enable capturing lowest audio frequencies. The unmute gain ramp
is used in DMIC driver to conceal the DC signal. The required time
for clean looking start is is microphone model and platform dependent.
Also since not all applications are sensitive to DC waveform it is useful
to specify the ramp length in topology.

This patch adds to DMIC driver feature to define the unmute ramp
length in milliseconds. If the value from IPC is zero the existing
hard coded 400 ms long ramp is used. If the value is non-zero and
within min/max 10ms/1000ms limits the topology defined ramp length is
used.

The code uses the db2lin_fixed() function to convert the dB step
to a linear gain update coefficient. Also the hardcoded ramp definition
is simplified to use dB initial gain value and length in milliseconds
instead of magic looking numbers.

This patch also contains ABI minor version increase to 8.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",67,12,0
"thesofproject/sof","d7b36bf3e4db48567ae29337d2311ca3bc6a82cc","singalsu","2019-03-27 12:41:43","false","FIR EQ: Add support for timer based scheduling

This patch adds to copy() function capability to handle any number
of frames with circular source and sink buffers. The number of
frames to process is retrieved with new helper function
comp_get_copy_limits().

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",58,10,0
"thesofproject/sof","cd3795d69426517f896fcce1ec19c9fa79f127b0","singalsu","2022-01-25 15:15:19","false","Tools: Testbench: Add more errors handling code

This patch adds to defaults of switch statements error prints
and error values returns to properly error non-supported
things.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",104,44,1
"thesofproject/sof","45f29f0bece92f4f938566bc23efd36840c8bce0","lyakh","2019-02-19 12:18:37","false","interrupt: unify interrupt_clear() and interrupt_set() functions

Currently the SOF API in addition to interrupt_clear() and
interrupt_set() functions also has platform_interrupt_clear() and
platform_interrupt_set(). Those functions are partially overlapping
and their choice is confusing. Unify them to only use the former
variant - without the platform_ prefix.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",64,8,0
"thesofproject/sof","c9731f1678e32b8dcef5e1d997dcec1a9f1dd75c","bkokoszx","2018-10-15 09:08:06","false","rmbox: usage function refinement

Refines the output content when displaying the logger usage.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",35,4,0
"thesofproject/sof","a1a8940d4ae85438096214f2f6fb8f43476b30c8","tlauda","2020-01-07 11:24:54","false","ipc: remove dma_trace_data pointer

Removes dma_trace_data pointer from ipc structure.
We shall now use new static getter for DMA traces.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",71,19,0
"thesofproject/sof","2289da9e282e9ff9613ce80089d602cd68c72e77","tlauda","2019-03-11 12:43:46","false","buffer: prevent buffer operation for 0 bytes

Prevents buffer consume and produce operations
if there are no bytes available.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",69,9,0
"thesofproject/sof","a12d58d1708878a4b9243334f4567390ccc61de6","tlauda","2019-10-14 14:38:17","false","platform: rename and move PLATFORM_HOST_DMA_MASK

Renames PLATFORM_HOST_DMA_MASK to PLATFORM_DW_DMA_HOST_MASK
and moves to dw-dma header, where it belongs.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,16,0
"thesofproject/sof","5c473f307c8106aef55dc672eb64b23e3528bf64","tlauda","2019-12-20 09:42:16","false","pm_runtime: remove unnecessary log from pm_runtime_init

Removes unnecessary log from pm_runtime_init.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",71,19,0
"thesofproject/sof","4d715e060dcba1a40d1dd0138e148f717eb109ea","tlauda","2019-02-21 12:33:08","false","volume: copy variable number of bytes

Changes volume_copy implementation to support
variable number of bytes.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",62,9,0
"thesofproject/sof","4bd543c337615bdd630d0fecef0dced06301a8f9","tlauda","2018-11-28 11:35:57","false","rimage: fix possible buffer overflow

Fixes possible buffer overflow with strcpy.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",41,6,0
"thesofproject/sof","7546c0fdeb4fd30cbc9f476e8e0a86b3b95ea6bc","tlauda","2019-06-07 08:05:54","false","hda-dma: add more granular functions for status checking

Extracts more granular functions for buffer full and
buffer empty checking. It improves readability and
removes repeated code.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",55,12,0
"thesofproject/sof","344085d9954f5d10ba9cfd5577a9983aa911359b","tlauda","2018-09-03 11:55:04","false","dai: remove wait on stop

Removes wait on stop, as it's not needed.
Also this change fixes problems with sending IPC as
wait function lowers interrupt level, while IPCs are
now executed on irq task level.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",30,3,0
"thesofproject/sof","39a7be72e55243684e7ee5fb6631c7aa516085ed","kv2019i","2023-01-31 11:46:33","false","topology2: bt-generic: fix PCM stream name definitions

Fix the mechanism to override the stream name in PCM caps.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",51,56,1
"thesofproject/sof","9152ba748aeb4ffa3a6a367e08817d93d71cd2d4","mrajwa","2019-07-30 15:53:44","false","memory: change size of single HP buffer

This patch changes size of single HP buffer block
from 0x180 to 0x100. Smaller blocks scale better
allowing for performance improvements and more
efficient memory usage.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",53,14,0
"thesofproject/sof","d0235a60dd0e2efe7e6e58ac3a03cca19d13efa4","lyakh","2020-09-30 13:34:10","false","zephyr: fix timer-domain scheduling

In case more than one client is using the scheduler, the SOF task
can be scheduled significantly later than requested. In such a
case using the current time as a base for re-scheduling is wrong
and leads to xruns. Use Zephyr work queue API instead to query
work schedule time.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",66,28,0
"thesofproject/sof","fe5886808b4c23dbab8ed3f5eb6321304e54b32c","lyakh","2019-02-22 13:51:10","false","idc: add an irq private data member

Use the platform provided IDC IRQ number only once and save the
number in a private field. This relies on the fact, that the
interrupt number is the same on all cores.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",61,9,0
"thesofproject/sof","1371d479aba900e78bed8090dcf55bd341c56989","marc-hb","2021-03-08 21:02:47","false","installer: add tgl-h

add tgl-h

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",73,33,0
"thesofproject/sof","8bbad9f263f7403682565aa9e9d000d3c50837c9","marc-hb","2023-10-16 20:59:30","false",".github: re-enable rimage workflows

Migrate rimage build and cppcheck workflows from
sof/tools/rimage/.github/workflows/ (where they're ignored) to
sof/.github/workflows/

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",9,64,1
"thesofproject/sof","027bda1fcd4ebd6cc177b24377c8f025f6903da9","marc-hb","2021-01-16 01:17:00","false",".travis.yml: build Sue Creek

Sue Creek is the only platform using the ALIGN() macro in assembly. If
it had been built in CI then we would have avoided the ALIGN()
regression in commit 39266cac81f4 (""core: assure alignment is only done
on power of 2 values""). Building Sue Creek is practically free and finds
bugs so let's build it.

I'm aware Travis isn't the future but it's still running for now and
this is a tiny and totally trivial change that took 1/100 of the time
spent writing this commit message. It's also a reminder not to forget
Sue Creek in whatever will replace Travis.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",69,31,0
"thesofproject/sof","ed7c57ba32000a73f89a74ca1bacc4d4a861b087","marc-hb","2023-04-11 06:56:52","false","zephyr/CMakeLists.txt: remove '..' in include paths

CMake seems to behave differently on Linux and Windows: it generates
different `-I` command line parameters. This results in spurious
`__FILE__` mismatches and non-reproducible builds when using
CONFIG_ASSERT, see example in #7428.

On Windows, '..' seem resolved more often which also seems to convert
forward slashes to backslashes.

They are also less readable and wasting a bit of space. Remove them
using cmake_path(SET ...)

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",50,58,1
"thesofproject/sof","521895e3a07da333ad15650063e3464dd9b09d7e","sebcarlucci","2020-03-27 17:45:40","false","sof: dcblock: Fix unaligned pointer value issue

gcc-9 shows the following issue:
error: taking address of packed member of ‘struct sof_abi_hdr’ may
result in an unaligned pointer value [-Werror=address-of-packed-member]
   225 |   request = (int32_t *)cdata->data->data;
       |                        ^~~~~

This commit fixes the issue. The warning was introduced in GCC-9, and
was therefore not raised by previous compiler versions.

Signed-off-by: Sebastiano Carlucci <scarlucci@google.com>",66,22,0
"thesofproject/sof","01b41286fd305019f4edede42565d0be8c631988","bkokoszx","2020-02-21 09:22:36","false","dai: overwrite hardware frame_fmt parameter with private frame_fmt

Overwrite frame_fmt hardware parameters with DAI private frame_fmt
in dai_comp_get_hw_params() function as DAI component is able to
convert stream with different frame_fmt's

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",80,21,0
"thesofproject/sof","b03e15a7657943095db3189f150020dc3d41bc69","bkokoszx","2019-11-08 09:55:33","false","spinlock: add return value to spin_try_lock macro

Adds return to spin_try_lock() in order to retrieve status
from arch_try_lock() function.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",55,17,0
"thesofproject/sof","997972c558e9a193a2c2f42222cf892f755e9220","kv2019i","2021-08-16 12:15:31","false","xtensa-build-zephyr: clean up XTENSA_TOOLS_ROOT parsing

Remove the unnecessary assumption that Xtensa tools are installed under
'XtDevTools'.

Align indentation to use tabs as is used elsewhere in this file.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",117,38,0
"thesofproject/sof","dc6014f226b8c1a9a11a4245a835693bcb27983d","lrgirdwo","2018-08-16 14:52:03","false","Merge remote-tracking branch 'gh/next' into gp20-alpha-drop-stable",18,2,0
"thesofproject/sof","6f2e09be0aad8759d4ceb7d8ad6c099e7e4082c5","ktrzcinx","2020-04-10 09:09:02","false","trace: Point correct file with TRACE_CLASS in comment near trace_event()

Comment should be aligned with file content.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",82,22,0
"thesofproject/sof","256d02adc3049fb77a48727b0ec666a43ef2f6c4","ktrzcinx","2020-06-05 07:54:14","false","trace: Move _log_message definition to same place for FW and library

The same function implementation should be kept in same place or in
separate implementation files, to easily get which one is used under
what condition.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",77,24,0
"thesofproject/sof","e3b0aa71038c4becabb35bd52c9563eeb3a20e52","ktrzcinx","2020-09-25 14:19:13","false","logger: Fix uuid_dict memory leak

config->uids_dict has never been freed before.
`out` label has been added to perform `uuid_dict`
free before function return.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",64,28,0
"thesofproject/sof","efc71f6c71cfc3609999c20a4c3ba5bb570e49f3","RanderWang","2022-09-21 07:11:18","false","topology2: nocodec: add volume and mixer support

Mixer and volume (gain) are used in nocodec topology.

Signed-off-by: Rander Wang <rander.wang@intel.com>",96,52,1
"thesofproject/sof","9287747f9067a03a08338d49f663808f3b659310","fuyuntsuo","2021-05-07 09:36:28","false","audio: igo_nr: Removed ENUM type get/set of Kcontrol.

ENUM handlers have been removed in igo_nr_cmd_get_value
and igo_nr_cmd_set_value.

Signed-off-by: fy.tsuo <fy.tsuo@intelli-go.com>",80,35,0
"thesofproject/sof","4789d623a93e3c44e1bc6f808c7ef4b1cf5cd6fa","MingJenTai","2022-04-29 05:26:06","false","Add RTNR to MT8195 topology

This commit adds RTNR to MT8195 with MAX98390 topology.

Signed-off-by: Ming Jen Tai <mingjen_tai@realtek.com>",115,47,1
"thesofproject/sof","8d9c5485c40371b5b9e2439d1f4de4fbc1af06ef","chunxu-li","2022-08-25 07:31:16","false","topology1: remove mt8186 unused topologies

Remove mt8186 unused topologies.

We use sof-mt8186 on our demo board, sof-mt8186-mt6366-rt1019-rt5682s
and sof-mt8186-mt6366-da7219-max98357 will no be used anymore.

Signed-off-by: Chunxu Li <chunxu.li@mediatek.com>",112,51,1
"thesofproject/sof","8cb7bf1baf15fdf20ac2cdca28d1349281a05978","ranj063","2023-06-08 00:56:13","false","topology2: cavs-mixin-mixout: Replace audio_format instance

Use the input_audio_format and output_audio_format objects instead
and fix the number of input/output formats to 1.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",46,60,1
"thesofproject/sof","bf7aa048902c86eaf727fff77c438d4710c2e904","ranj063","2022-12-17 03:16:49","false","mixout: Convert component to use the module adapter

Convert the mixout module to use the module adapter. The
bind/unbind/get_attribute ops in the mixout module have been moved to the
module_adapter ops and is functionally the same as with the comp_drv
ops.

The struct mixout_data struct has been simplified to contain 2 fields as
the source info table has been moved to struct processing_module and
rename the consumed_yet_not_produced_frames field in struct mixout_data
to pending_frames.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",91,54,1
"thesofproject/sof","6dfdfe9a02fd7e8ee6ee40c8d075070f0e39efe8","ranj063","2022-11-28 03:07:55","false","ipc4: helper: disable interrupts during module binding

Disable interrupts until the intermediate buffer is connected to both
the source and the sink components during module binding. This is needed
to prevent IPC timeouts caused due to the IPC task getting preempted
when the buffer is only connected to the source and the sink has not
been connected yet. Disabling interrupts is good enough because at the
moment SOF only supports running all connected pipelines on the same
core.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",99,54,1
"thesofproject/sof","e822cfab7ce449b30316ae9c8d25c5e0efe007b6","ranj063","2018-06-28 03:40:18","false","host: allow overriding input and output sample rates through command line args

By default the input and output sample rates for the testbench
will be calculated from the frames_per_sched and deadline. But
this patch makes it possible for it to be overridden in preparation
for support for SRC based pipelines.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",6,1,0
"thesofproject/sof","7668b39b07a4452f99eab2bc731cd4e5645df20a","ranj063","2021-03-19 06:41:52","false","topology2: Add pipeline classes

Add some pipeline classes for volume playback/capture, passthrough
capture and eq capture.
Each of these classes include the pipeline widget objects, connections
between pipeline widgets and pipeline attribute definitions

For ex: A volume playback pipeline can be instanted as follows:
Object.Pipeline.pipeline-volume-playback.""2"" {
	channels	2
	rate		48000
	index		5
	format		""s32le""
}

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",72,33,0
"thesofproject/sof","d0931d3af5ddec96e231ddcd5afb75aa3a40feeb","softwarecki","2023-10-26 14:20:25","false","lmdk: Remove align of .rodata section

The .data and .rodata sections are placed by rimage into one segment of
a resulting firmware image. So aligning the .rodata section to the page
boundary is just a waste of memory.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",7,65,1
"thesofproject/sof","45f6d6fa59e147d126c57ce73740787b6c92f931","yongzhi1","2022-06-16 20:49:32","false","topology2: cavs: hda: add tplg build for mtl

Add the topology for skl_hda_dsp_generic machine.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",120,49,1
"thesofproject/sof","4986e3135d71a317b59dc1c9b89812b84b84c803","yongzhi1","2023-11-03 22:25:27","false","topology2: cavs-mixin-mixout-ssp: Use macros for pipeline IDs

Use macros for pipeline IDs for better maintainability.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",4,65,1
"thesofproject/sof","cd2c44389f2ffc74d32117ad49815026728dd644","fkwasowi","2022-10-17 08:22:45","false","west.yml: upgrade rimage to 3ee717eebc6a2a512a0216363ae77473f94532c1

upgrade rimage to
3ee717eebc6a2a512a0216363ae77473f94532c1

3ee717eebc6a probe: mtl.toml invaliv probe type
1f4a36e21f00 mux: fix module type
dcfd11bc4d5b mux: add mux cfg to list of modules
d957e0368b86 rimage: make ace15 signing to support openssl3
a1b6e6db33ab manifest: add fw_ver_micro to manifest
fb28357912da config: mtl: add probe module

Signed-off-by: Kwasowiec, Fabiola <fabiola.kwasowiec@intel.com>",100,52,1
"thesofproject/sof","2027686f91962487f1f79d1c621ff2a837e1eff2","lgirdwood","2018-09-26 13:07:58","true","Merge pull request #420 from tlauda/topic/extend_text_size

memory: apl: increased SOF_TEXT_SIZE",37,4,0
"thesofproject/sof","dfe7fa919622406515c6644bc6038f60a932be1b","xiulipan","2018-07-06 09:50:51","false","topology: test: set id to 0 for codec topology

For nocodec topology, we need the id to be same with SSP index since
all SSP ports are enabled in nocodec. Codec machine drivers always have
id to 0.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",11,1,0
"thesofproject/sof","947238ded8898ca26cf0a31fbc3ceab3b23fdd68","xiulipan","2019-10-15 07:21:55","false","rimage: keys: add new 3k key

New platforms like TigerLake will need 3k RSA key for signing.
Generate new keys for SOF public key.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",65,16,0
"thesofproject/sof","b27515eb2f72cfb8e447e57f788ced6eddf8300e","andrula-song","2023-07-13 01:53:27","false","Audio: Normalize the 16/16 bit format peak meter to 32 bits.

Shift left the peak meter of 16/16 bit format 16 bits to normalize
this value to 32 bits to meet the CI test requirement.

Signed-off-by: Andrula Song <andrula.song@intel.com>",31,61,1
"thesofproject/sof","d9bbe6edd1a1f4310092c5b5ca8f3e9c62946a82","ujfalusi","2023-01-31 14:06:02","false","include: ipc4: copier: Move struct definitions to base-config.h

Move the ipc4_module_instance_props and it's dependencies since they are
not copier related at all.
ipc4_in_out_gateway and ipc4_cfg_param_id_data is moved also.

The ipc4_base_module_cfg_ext should not be in a copier.h either. It is a
generic base_cfg_ext struct, not copier specific in any way.

With the move drop the priv_param_length from the struct as attaching
binary blobs after the base_cfg_ext is not supported by definition.
Modules should be using MOD_INIT_INSTANCE + LARGE_CONFIG_SET messages to
receive their configurations and parameter blobs.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",51,56,1
"thesofproject/sof","95ba01ebd2af85e719e1506c3d6a0d6a3be5da3c","tlauda","2019-10-10 08:36:19","false","ll_schedule_domain: add synchronous field

Adds new synchronous field to indicate if tasks registered
to this domain should be scheduled synchronously or asynchronously.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",63,16,0
"thesofproject/sof","1d028ab9c1736be9d5675a4cc1ea2ef4113a05ee","cujomalainey","2020-10-28 00:19:22","false","fuzz_ipc: use calloc instead of malloc for ipc region

The memory sanitzer catches uninitialized value errors on the size check
for small data sizes. Therefore lets us calloc so we can assume the
whole region exists without having the sanitizer get upset.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",75,29,0
"thesofproject/sof","f601906d83961820d2a2e9e8702d41edb45e68d0","cujomalainey","2020-09-30 20:29:03","false","host: move drivers and libs out of testbench

In order to support more linux based testing apps lets move the drivers
for the library build into the rest of the source tree so it is easy to
develop additional apps.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",66,28,0
"thesofproject/sof","e430629a1e9e4300bee7584c6b53c5f0412d5bb6","jxstelter","2022-11-22 09:14:12","false","xt-clang: Do not use -std=gnu99 for C++

Option -std=gnu99 applied to C++ files trigerrs warning for xcc
compiler however throws error for xt-clang.
This patch limits usage of this flag to C, ASM code only.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",94,54,1
"thesofproject/sof","fc03df754ca82accb4a4658963c71a7383095f2c","jxstelter","2023-06-15 15:39:52","false","lib_manager: Fix library unload flow

Cache invalidation after memory unmap is not required and
could trigger exceptions depending on memory protection
configuration.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",44,60,1
"thesofproject/sof","2649ec78aa63140491650205379d11e23a239be7","tlauda","2018-11-30 09:07:32","false","test: alloc: fix system heap alloc tests

Fixes system heap alloc tests, which crashed
due to wrong handling of memory freeing.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",40,6,0
"thesofproject/sof","3ae5e6305e43310167147c7f44fac31664ff3e9d","lgirdwood","2018-09-29 14:55:15","true","Merge pull request #438 from tlauda/topic/apl-extend-system-heap

memory: apl: extend system heap",37,4,0
"thesofproject/sof","38399caeb5eb52e71bbcd6b67456f951335bcc27","lgirdwood","2018-06-28 13:06:59","true","Merge pull request #14 from singalsu/topic/fix_dmic_test_capture_topologies_v1

Topic/fix dmic test capture topologies v1",9,1,0
"thesofproject/sof","a2cfd8c5a03da54189d7cb650c77c1ae0cedfdc3","lgirdwood","2018-07-26 14:08:46","true","Merge pull request #155 from slawblauciak/test_fixes

test: unify ut names",13,2,0
"thesofproject/sof","0e1680532d64fedef54bf99d2a185a24a4a5f3a2","lgirdwood","2018-10-15 15:31:37","true","Merge pull request #105 from bkokoszx/sof-logger

rmbox: change binary names of logger and rmbox",34,4,0
"thesofproject/sof","c322398c5abfd78586ad69e514a8b73b0c044c68","lgirdwood","2018-07-20 08:58:11","true","Merge pull request #133 from xiulipan/xtensaexc

xtensa: add exception handler for all exception",13,2,0
"thesofproject/sof","6119126d90f9baf697bd1dda1815905072a21319","mrajwa","2019-06-26 23:18:00","false","ipc: align stream.h with kernel

This change is to align sof_ipc_stream_params with its
kernel equivalent. The change is needed in both kernel
and FW because FW needs to use host_period_bytes which
where previously used to inform host about period IRQ.
Therefore now we introduce new member for it period_irq
and let host_period_bytes keep the proper value.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",45,13,0
"thesofproject/sof","d0ffd4d6981c68c236124a6fc95d53edd4e900bd","lgirdwood","2018-08-24 11:32:37","true","Merge pull request #251 from tlauda/topic/pipeline_cache

pipeline: add pipeline_cache method",21,3,0
"thesofproject/sof","b5f3ed9fa5186e91278eeb2cb77fd105f0a22e00","marc-hb","2023-10-05 00:53:34","false","rimage: move everything down to subdir tools/rimage/, prepare move to sof

Preparation to move everything back into the
https://github.com/thesofproject/sof/ repo, see
https://github.com/thesofproject/sof/issues/8178 for details.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",16,64,1
"thesofproject/sof","041a56c541d5de96aa78239412233728789dc440","lgirdwood","2018-11-19 14:38:00","true","Merge pull request #593 from lbetlej/LDOCTL_access_cleanup

LDO Control - unification of control macros for LDOCTL bits",39,6,0
"thesofproject/sof","c0c858c26a9df9a18ea38dfd72b22d4e471091fb","jajanusz","2019-06-10 10:19:31","false","cmake: install: fix new headers paths

This commit updates paths of installed headers to match
new headers folders structure.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",50,12,0
"thesofproject/sof","e86ba1dcbff296f869402a5cbdd5957e3433c0eb","keyonjie","2019-06-27 10:24:36","false","sof-ctl: add '-o' support to dump ctl data to a specified file

Here add '-o' to support output control data to the specified file, in
binary format.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",46,13,0
"thesofproject/sof","3b81d513c4a1bbfaff4af7e7c2e792a15f519eb3","keyonjie","2021-07-23 11:41:13","false","pipeline-params: add heap debug support.

Show heap status update with every pipeline going to be run, when
CONFIG_DEBUG_HEAP is enabled. This will help to monitor the heap memory
usage status.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",98,38,0
"thesofproject/sof","a52a1f2502ebdce1fa4d28fe48de327aa62607f9","slawblauciak","2019-02-06 11:21:58","false","dma: log host preload timeout

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",54,8,0
"thesofproject/sof","d5840a920073e6712af2022ab3ec89816420e6ae","keyonjie","2021-01-06 11:38:18","false","ssp: move mclk request/release to pre_start and post_stop

For power saving, we should release the mclk when not used, postpone the
requesting to pre_start, and release it at post_stop.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",73,31,0
"thesofproject/sof","7fca812717a7d1aab7f4e2852e18946b5439059e","keyonjie","2018-12-14 16:32:00","false","hda-dma: remove embedded spin_lock usage to avoid dead lock

It has embedded lock to dma->lock in hda_dma_post_copy() and
hda_dma_start() where may lead to dead lock, here remove them.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",49,6,0
"thesofproject/sof","4fa2ad426142bea9eeae0be5213883edc5bda0e7","bardliao","2023-07-04 02:18:01","false","Topology2: sdw-amp-generic: add 2nd amp feedback when SDW_AMP_FEEDBACK
is true

Currently, we add the 2nd sdw amp feedback unconditionally. It will lead
to an issue when aggregated apms don't support feedback function.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",39,61,1
"thesofproject/sof","4e76df522134838650a07f35343651432d7a0bc6","bardliao","2021-07-12 07:34:12","false","topology2: add ALH DAI class

Add ALH DAI class definition, ALH DAI objects can be
instantiated as:

Object.Dai.ALH.""N"" {
 	direction		""capture"" # playback or capture
 	dai_name		""SDW0-Capture""
 	id 			2
 	Object.hw_config.""2"" {
 	}
}

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",87,37,0
"thesofproject/sof","fa2f3a51adcf866e624e2ef3da69417ac9917b7b","singalsu","2019-09-02 15:09:31","false","Tools: Tune: Get SOF ABI header for EQs with sof-ctl

This patch avoids the need to main SOF ABI version information in
Matlab/Octave file eq_get_abi.m for equalizer tools. The ABI
header is fetched via new ""-p"" command line option for sof-ctl.

The BSD 3 clause copyright text is also updated to new short style.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",59,15,0
"thesofproject/sof","85b4cdd6c526af74eef74a361fc0d04efca8fd4a","marcinszkudlinski","2023-04-18 16:07:21","false","kconfig: limit DP scheduler to ACE

DP scheduler is intended to work on MTL and
future platforms only - has not been tested on
any legacy.

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",51,58,1
"thesofproject/sof","86523954902e156deb8fa158515aa832ac1e3fe9","singalsu","2023-05-16 12:45:42","false","Tools: Topology2: Add DRC to sof-hda-efx-generic topologies

This patch adds DRC component to EFX pipeline. The DRC is very
useful for speaker output to enhance loudness and reduce
speaker distortion in loud playback.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",51,59,1
"thesofproject/sof","a6d65ee6dcada94b77e8b40ded12fdf596001196","singalsu","2023-11-03 11:43:02","false","Tools: Topology1: Change ASRC mode to synchronous in pipeline macro

This pipeline PCM -> ASRC -> DAI is used only in testbench test
topologies usage. None of the normal topologies build in SOF
use it. Since testbench can't support without failure the DAI
timestamps, the asynchronous mode is disabled. This allows
to test ASRC objective audio quality similarly as normal SRC.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",4,65,1
"thesofproject/sof","167d0a0667722fa4d954ee29e6bd8e9b21ce65fc","singalsu","2020-04-23 17:44:26","false","Tools: Test: Improve processing components objective quality tests

The main change in this patch is to allow process_test to use
frequency dependent masks for frequency response and THD+N. It
allows tests with pass/fail criteria for components like EQs
and DCblock. SRC test not really changed but the small changes
in passing test controls are updated there as well.

In EQs tests the process test can decode the theoretical response
from setup blob. The measured frequency response is compared to
that.

The test print and plot output look is improved for nicer reports.
The runtime plots opening is disabled for batch mode operation
but the plots now appear to test output directory in png format.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",71,23,0
"thesofproject/sof","089157d4617fd0b6a2d9b18578ebba1fcd28621d","singalsu","2023-06-15 12:27:36","false","Config: Add Aria module to tgl-cavs.toml and tgl-h-cavs.toml

This patch adds Aria module for TGL and TGL-H platforms. The
used configuration data is copy from mtl.toml. This change
allows to use Aria component in topologies.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",44,60,1
"thesofproject/sof","e2d73e236a800e8614f81463c723d36ce37d794d","singalsu","2022-06-02 15:57:08","false","Tools: Topology1: Add MFCC component

This patch adds basic macros needed for MFCC in testbench and in
developmemnt topologies for hda-generic-2ch and up2. The
configuration blob in this matches the reference Matlab code
as configured to match Pytorch default MFCC.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",115,48,1
"thesofproject/sof","81d5bf3b3aa586fa024a94e31151aef76ee34b83","singalsu","2018-08-09 16:43:37","false","EQ IIR: Update IPC to ALSA convention, fix channel bypass, and do cleanup

This patch updates binary IPC to similar style as done previously for FIR
equalizer. The blob size needs to be added as first word in the blob.

The internals of IIR coefficients format is exposed to uapi/eq.h level.
Also the blob parsing code is changed to use the structures instead of
hardcoded word offsets.

The EQ assign or switch to bypass (via -1) is fixed so there is no more
need to define a bypass EQ shape into the blob.

Finally C code style is updated to pass the commit checker scripts.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",19,2,0
"thesofproject/sof","a9fb42836f9f3e63f084b68658fb20e435872ea5","singalsu","2022-01-12 13:13:03","false","Tools: Tune: EQ: Improve robustness of mls_freq_resp script

This patch increases end marker seek length from 3s to 5s to
allow more drift for arecord and aplay timing for test signal.
The captured waveform is now always plotted and when start
and end markers are found the test signal is plotted with green
color.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",117,43,1
"thesofproject/sof","4c59ef3b87ef92fa3303f4206fb7da2cccbfd3f4","tlauda","2019-06-27 12:56:34","false","handler: set host copy to one shot

Sets host copy mode to one shot for platforms
with CONFIG_HOST_PTABLE set. Note: this setting
shouldn't be dependent on CONFIG_HOST_PTABLE,
but rather should be set in platform specific code.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",47,13,0
"thesofproject/sof","85600db50f42c0c9846a4ed40224e761f7bb7c87","tlauda","2020-03-20 08:27:53","false","cpu: don't block interrupts on core power up

There is no need for blocking all the interrupts,
when powering up slave core. Only one path of execution
exists to do that anyway.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",68,22,0
"thesofproject/sof","dec5c62bd1256ac37afb2af02bb076a6f32ca1f5","tlauda","2019-01-25 10:28:17","false","dw-dma: use chan instead of p[chan]

Fixes DMA channel usage.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",56,8,0
"thesofproject/sof","3fc0e27b06c8ea500b3828d8de410e77e1cc0eda","tlauda","2019-10-14 13:34:34","false","topology: sof-icl-rt711-rt1308-rt715-hdmi: use 3 periods for ALH

Changes ICL topology to use 3 periods for buffer connected to ALH DAI.
This topology has been forgotten, when such changes were done.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,16,0
"thesofproject/sof","10495481c98946d4882793123879427c2cfd5159","tlauda","2019-06-03 11:11:40","false","hda-dma: remove double spaces

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",68,12,0
"thesofproject/sof","05d4e190d437da8e6be1478e52bd39c71a15df52","tlauda","2019-05-07 06:51:13","false","apollolake: temporary change gcc hal state defs

Temporary changes xtensa hal state definitions for
gcc builds. Change will be reverted after update
of apollolake overlay.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,11,0
"thesofproject/sof","f9b4411059226e28cca38dcb3f8efe603d099f18","tlauda","2019-04-24 18:48:18","false","dai: reload lli after buffer process if irq disabled

If pipeline is configured to be scheduled on some other source
than DMA interrupt, we should reload linked list item after
DAI buffer processing.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",52,11,0
"thesofproject/sof","e79d5d1f8ee3c51da915ef760fbb87bd6b91a617","lrgirdwo","2021-04-10 16:11:10","false","fuzzer: fix build as with header order and ARRAY_SIZE redefinition

ARRAY_SIZE was being redefined, simplest option is to remove, but I think
this code has to additionally be compiled with external Fuzzer. Fix build.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",81,34,0
"thesofproject/sof","00b4b3fdc26972ed6adfe7277a2f59c31243b3d3","lrgirdwo","2019-04-23 15:05:18","false","spelling: fix some spelling and typos in scheduler and main loop.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",48,11,0
"thesofproject/sof","96be83b0ab7d626ff97348dfe2c7b44d6502b0fe","plbossart","2022-04-04 22:02:29","false","topology1: move sof-hda-generic-kwd to development

We don't support this topology in production and it's not clear if
it's even maintained, move to development.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",110,46,1
"thesofproject/sof","e6e314eaf71972361306015f61a30c17f53e197d","lrgirdwo","2020-04-15 12:35:10","false","gitignore: zephyr: update gitignore for zephyr files.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",82,22,0
"thesofproject/sof","42179929d2f6c515a1322acd9c32c9176dcfb0c9","akloniex","2018-11-07 12:45:56","false","debugability: Refactor dai traces to fully utilize trace_event

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",39,5,0
"thesofproject/sof","07b07f9bfe3a1ecdb6465da68fa5029a06774f87","fredoh9","2023-05-16 22:11:31","false","west.yml: Update rimage revision to 4ce79b15

Pull in following rimage changes:

4ce79b152e23 (HEAD, manifest-rev) kpb: update kpb uuid for lnl
649b0a6790a9 file_simple: Allocate correct buffer size for writing sections out
1ea1327b9cf1 README.md: remove ""install"" target
8f250a99eb27 Config: Change indent for SRCINTC
acd8a2bc1bc0 Config: Change SRCINTC for tgl-cavs.toml and tgl-h-cavs.toml to LL
77d4a2acd751 cmake: remove ""install"" target

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",52,59,1
"thesofproject/sof","5b29dae9c870fed04773706886e31e2963975380","akloniex","2020-08-31 12:15:35","false","logger: Create global convert_config variable to avoid spaghetti code.

Most functions in logger depend on values stored in conver_config struct
which are passed to almost all function calls. This patch moves pointer
to the config to global context and allows each function to derive
necessary values from there. This reduces needless parameters passed
to function calls and allows for more flexible access to data in nested
functions.

Signed-off-by: Artur Kloniecki <arturx.kloniecki@linux.intel.com>",71,27,0
"thesofproject/sof","ccce0999ba18ad66972933d2912ccb7356a8ec89","jajanusz","2019-06-10 13:42:49","false","rimage: ignore sections not used by bootloader

In case of multiple modules, rimage should not expect these sections
in bootloader module: .bss, .static_log_entries .fw_ready.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",50,12,0
"thesofproject/sof","b67c535301976fd94ecaa36abae496ed255da794","jajanusz","2018-08-22 12:13:46","false","drivers: refactor: create <vendor>/<family> filetree

Split files into appropriate folders.
Added makefiles to not break build.
Fixed checkpatch errors in dw-dma and baytrail/ssp.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",19,3,0
"thesofproject/sof","f30cb4b1a3f609f90b2b66b181c6fa2a91f79d54","ranj063","2021-11-02 19:59:01","false","topology2: cavs: passthrough-playback: Add all includes

Include all dependencies to be able to build the conf file individually.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",125,41,1
"thesofproject/sof","4dc194d6a925e08f4d2b70de56c95619ff9618fb","dbaluta","2020-01-21 10:52:32","false","imx8m: Add support for NXP i.MX8M platform

The i.MX 8M Plus family focuses on machine learning and vision,
advanced multimedia, and industrial IoT with high reliability.

This patch adds support for the low power voice accelerator:
Tensilica HiFi4 DSP @ 800 MHz.

Documentation about i.MX8MP can be found here:
https://www.nxp.com/products/processors-and-microcontrollers/arm-processors/i.mx-applications-processors/i.mx-8-processors/i.mx-8m-plus-arm-cortex-a53-machine-learning-vision-multimedia-and-industrial-iot:IMX8MPLUS

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",79,20,0
"thesofproject/sof","78d3afb0ebd006f64fb8b2300550f6895eed35bf","dbaluta","2022-01-12 18:35:52","false","drivers: sai: Start SAI on RELEASE

SAI is stopped at PAUSE and it needs to be started again at RELEASE.

Reported-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>
Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",117,43,1
"thesofproject/sof","c8fe1927c0f7f67f3dc46f4e4f6cb55f7e8c540b","Vamshigopal","2022-04-27 18:01:41","false","topology1: change audio format to 24 bit for rt1019

with changes we have - 3.072MHz bclk, 32-bit slot-width,
24-bit data-width.
rt1019 in auto mode is compatible with rt1015p driver.
By keeping the SSP configuration same as rt1015 will have fewer
configuration.

Signed-off-by: Vamshi Krishna <vamshi.krishna.gopal@intel.com>",114,47,1
"thesofproject/sof","5cbbde7986ba98d6c8d01af916bde90d19b4383d","lyakh","2023-02-28 14:05:07","false","clock: replace per-clock locks with a global one

select_cpu_clock() on cAVS currently takes all the clock locks while
adjusting them. And that function is called from clock_set_freq()
which also takes one of those locks, which leads to a recursive
spin-lock. To fix that remove per-clock spin-locks and use a global
clock lock instead.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",58,57,1
"thesofproject/sof","162dafc288cab281e4d646bbb91856f09b063f36","lyakh","2022-06-30 07:21:16","false","zephyr: add third-party components

Add multiple third-party and optional audio processing components to
the Zephyr cmake and initialisation lists.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",110,49,1
"thesofproject/sof","bcbcec79e5824d04f5eadde2f53d817fce939b19","marc-hb","2021-10-24 08:08:08","false","cmake: drop binutils-specific '-Wl,-EL' option

Fixes clang failure:

  clang: error: -Wl,-EL: 'linker' input unused [-Werror,-Wunused-command-line-argument]

-EL has an effect only when using OUTPUT_FORMAT or --oformat but rimage
uses neither.

The binaries produced by ld version 2.34 are strictly identical before
and after this removal.

It is not clear why -EL was ever added. It was added to src/Makefile.am
by commit 0d33e8743386 and to src/CMakeLists.txt by commit 4e3ead009638
but these commits were initial additions of the entire files and they
did not get into detail.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",125,41,1
"thesofproject/sof","eaf95695f6c3f68a910d24ab364e522eac992666","marc-hb","2022-06-03 21:46:03","false",".github: independent strict and non-strict runs of check patch

This makes the difference between ""strict"" and regular failures very
clear.

Stopping after non-strict failures is misleading, it can give the wrong
impression that there are very few warnings left.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",115,48,1
"thesofproject/sof","e64a6cfd314d7f325e2f35c9210fe1817e32a198","marc-hb","2021-12-15 03:28:18","false","trace.c: rename emit_recent_entry() to emit_suppressed_entry() + comments

This makes much clearer why this function is not called when the burst
is short enough.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",113,42,1
"thesofproject/sof","dccf9c0798d5257e8db5631813dfb0a58aed3f7a","marc-hb","2022-04-26 20:49:19","false",".github/zephyr: download docker image from ghcr.io instead of docker.io

These are Github Actions, so let's use the Github server to increase
performance and reduce external dependencies.

According to https://github.com/zephyrproject-rtos/docker-image there is
no primary or secondary server for that image, they're both equivalent.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",115,47,1
"thesofproject/sof","5acf40a3f9e5b31c4193248b9d207001957c9fe8","mrajwa","2019-04-09 10:21:50","false","KPB: rework of allocation algorithm

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",47,10,0
"thesofproject/sof","6838224286e1b71f2159ec4c3a0d0449234b85e1","marc-hb","2023-03-22 04:57:58","false",".github/zephyr: test new fancy --filter=tree:0 cloning option

Test new, fancy and impressive looking git --filter optimization on
non-critical ""manifest check"". Extend it later to other checks if it
hasn't caused any issue.

https://github.blog/2020-12-21-get-up-to-speed-with-partial-clone-and-shallow-clone/
https://github.com/zephyrproject-rtos/west/issues/638#issuecomment-1478925589

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",55,58,1
"thesofproject/sof","34d750d40bd65601f3ead584c18db5b6044b7fab","jsarha","2022-09-20 18:40:20","false","probe: Drop old IPC3 style probe DMA framing

Drop IPC3 probe DMA framing and use IPC4 framing for IPC3 mode
too. This change simplifies the code quite a bit. After this change
both the SOF firmware and sof-probe demux tool should be updated at
the same time.

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",96,52,1
"thesofproject/sof","19745de6e31667f701f9b9db4f53e93d3a38837e","marc-hb","2020-05-13 22:11:27","false","scripts/testbench: add set -e

Let's stop ignoring build and test failures. Start gradually with the
scripts involved in testbench, more files later.

Follow-up to to bug #2752 ""host-testbench.sh ignores errors"" and commit
ab421466aff826 (""CI: Travis: enable host testbnech again"") and
ab421466aff826~1

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",96,23,0
"thesofproject/sof","08d5cba3d94fb8037d91afac213bdc4cfa34dcd1","tlauda","2019-06-04 09:54:01","false","idc: add missing headers

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,12,0
"thesofproject/sof","f1a73a66e80753d2207030915c4e6eb48a912df0","mrajwa","2019-04-09 11:52:55","false","KPB: add draining task

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",48,10,0
"thesofproject/sof","56c91cca2384b96e502d1e12f2d94f697fb5b5f8","lgirdwood","2018-07-19 12:23:37","true","Merge pull request #127 from zhigang-wu/topic/state-machine-change2

component:refine the state machine for state transform.",13,2,0
"thesofproject/sof","f11e275aaba9f9be53c7e7519a2776a34bfa92eb","aborisovich","2022-02-02 17:35:45","false","Fixed warning W-char-subscripts in sof logger

Newer gcc compilers 9.1+ issue a W-char-subscripts warning when argument
type passed to isspace is not explicitly int. Added cast to int.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",104,44,1
"thesofproject/sof","868feb6f78c3b7d3ed3a92e96e32be3a8636f951","lgirdwood","2018-11-08 08:49:24","true","Merge pull request #549 from libinyang/increase_apl_runtime_memory

memory: apl: increase HEAP_RT_COUNT256 size",42,5,0
"thesofproject/sof","22c0231d04b6819bd428ff0e5fcd9ad9657c1335","tlauda","2020-01-15 14:06:17","false","ipc: make internal ipc data shared

Makes ipc data copied from mailbox shared across cores.
This way we can remove explicit cache operations and
have automatic cache handling of data.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",76,19,0
"thesofproject/sof","0242a5c0f88f76823205afc0396b6cc7102e6adc","mrajwa","2019-09-02 12:22:07","false","pipeline: don't disable IRQs on prepare()

This patch removes the IRQ disable during
pipeline_prepare() as there is no potential
race condition. Also, the disable of IRQs
result in long delays in queued interrupts.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",59,15,0
"thesofproject/sof","2c786e939294ee784ff801ee8daf41d13c7685f3","lgirdwood","2018-06-29 13:27:52","true","Merge pull request #16 from keyonjie/master

Revert ""topology: dai: correct default_hw_conf_id""",9,1,0
"thesofproject/sof","150294b24863a9cb6527c12c280bd0b7ba10c41d","cujomalainey","2019-03-21 23:12:27","false","host: make init function static

Fixes checkpatch error that slipped in

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",66,10,0
"thesofproject/sof","2e5703d7d7b3438189285e7ca00898aa14caac59","saisurya-ch","2023-08-22 12:45:15","false","amd: acp_6_3: add build support for ACP_6_3

Add build support to enable ACP_6_3 platform.

Signed-off-by: SaiSurya Ch <saisurya.chakkaveeravenkatanaga@amd.com>",24,63,1
"thesofproject/sof","3318c07393bab70a729e6a4882b9cf09e186b155","ktrzcinx","2020-02-24 12:30:07","false","ext_manifest: Define extended manifest structures in firmware

Extended manifest is a place to store build time known firmware
metadata, for example firmware version or used compiler description.
Given information is read on host side before firmware startup.
This part of output binary is located as a first structure in binary
file.
Extended manifest should be skipped in firmware loading routine.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",77,21,0
"thesofproject/sof","69b03e4310ee08acc8359bc40f2baf75b534b817","ktrzcinx","2020-02-13 11:12:50","false","ssp: Move conversion from SSCR3 value to RFL to bit description section

This conversion in source code looks quite magic. It should be described
in header file where are registers bits description.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",82,20,0
"thesofproject/sof","24ecd41e29417eba8769e74f13fbf66ab99c0c56","ktrzcinx","2020-03-18 13:27:21","false","tools: Reformat extended manifest parsing

After reformat it will be easier to add new data of supported
extended manifest.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",71,21,0
"thesofproject/sof","fe3dfe4007e700c928ed2c75781ab182e2a938af","ktrzcinx","2020-05-27 06:50:43","false","logger: Fix help message consistency

Before this patch output message was misaligned and one flag
description start from small letter:
sof-logger:      -L                     Hide log location in source code
sof-logger:      -f precision                   set timestamp precision
sof-logger:      -d                     Dump ldc information

After change, it's fixed:
sof-logger:      -L                     Hide log location in source code
sof-logger:      -f precision           Set timestamp precision
sof-logger:      -d                     Dump ldc information

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",96,24,0
"thesofproject/sof","970d7d61ece942b597c8ae71141fd54bf7fe6532","cfriedt","2021-11-10 01:14:18","false","zephyr: update print messages for 64-bit atomics

Atomics will use `long` rather than `int` so that they are 64-bit
on 64-bit builds and 32-bit on 32-bit builds.

Required by zephyrproject-rtos/zephyr#39531

Signed-off-by: Christopher Friedt <chrisfriedt@gmail.com>",127,41,1
"thesofproject/sof","0a4561a9bbb525f5ecb8101d94563350a23f1bf9","ranj063","2021-10-26 03:42:14","false","dai: use buffer acquire/release

instead of buffer_lock/unlock() which will be deprecated.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",127,41,1
"thesofproject/sof","42b1a2e6536032c9e70ada8ca3fa2272a446b63a","ranj063","2018-06-28 02:39:20","false","host: redirect errors to stderr

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",6,1,0
"thesofproject/sof","99ac62566dddf5720b46f6a31cf8ec669002de90","ranj063","2023-07-05 05:09:16","false","audio: module_adapter: Add new fields in struct processing_module

Add a couple of new fields for setting the max number of sources/sinks
supported by each module. Set the max sources/sinks for all modules.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",35,61,1
"thesofproject/sof","db041556ce48b0535d5fa4d77d19d166e2938c05","ranj063","2021-12-06 22:07:24","false","topology1: sof-cml-src-rt5682: remove extra space after values

The string parser in alsa-lib is sensitive to these now. So fix it.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",124,42,1
"thesofproject/sof","318176fc743240ba8ba102075d5f19bb8f3aa90f","lgirdwood","2018-09-06 07:25:09","true","Merge pull request #312 from cujomalainey/master

Move towards modern markdown README",31,3,0
"thesofproject/sof","99dfb388901dd845e3a81f134c34d13a168d0ebc","keyonjie","2021-11-12 09:35:58","false","cavs-ipc: fix the IPC_COUNTERS debug for multi-core scenarios

In multi-core cases, the IPC could be handled by a secondary DSP core,
which means we need to use ipc_processed_counter with coherent access,
otherwise, the counter may be calculated wrongly.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",127,41,1
"thesofproject/sof","d05588e11595044d52cc42699ed9795e4a5c2705","kv2019i","2023-08-25 07:54:00","false","west.yml: Update rimage revision to 4fb9fe00575b

Includes following rimage commits:
4fb9fe00575b config: lnl+mtl: fix length of ADSP.man CSE manifest
c809af816859 Config: Add crossover component for TGL and TGL-H cAVS platforms
8c8440070a08 style: trailing whitespace is the root of all evil
d20f1d8a85e7 actions: remove travis
af9a2fe58f21 Config: Fix comment typo for EQ FIR module
b8ee1aa8f695 Config: Add DRC component to TGL, TGL-H, MTL, LNL

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",26,63,1
"thesofproject/sof","0f06203ca84225fc401a09a21064d7f224c5bec6","singalsu","2018-10-01 12:00:45","false","EQ FIR: memory: Add trace error for alloc fail and add a 1024 size buffer

This patch adds a single 1024 bytes buffer into heap for e.g. rzalloc()
usage. The FIR EQ code didn't trace the allocation failure so it's added
to see better if this happens. The 1k allocation for PCM samples delay
line is quite typical since a 32 bit 100 tap stereo FIR will need 800
bytes.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",37,4,0
"thesofproject/sof","89e50e09ba16833bad107a08ea2c063bdf45f57c","singalsu","2022-03-21 14:47:20","false","Audio: Google RTC Audio Proc: Process copy() without read/write frag

This patch optimizes the copy() function by avoiding the per sample
done circular wrap check. The source, sink, and reference buffers
are read and written in maximum size blocks returned by audio stream
function audio_stream_samples_without_wrap_s16() and
audio_stream_frames_without_wrap().

The saving with mock-up algorithm version is 16 MCPS, from 29 to
13 MCPS in test with stereo 48 kHz 16 bit playback and capture.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",109,46,1
"thesofproject/sof","031fecb3f19e27083b25b1f38fe30ec0cc0a9a3b","singalsu","2023-01-19 17:44:38","false","Audio: EQ FIR: Remove duplicates of module_update_buffer_position()

This can be done once at eq_fir_process() to save code size.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",55,56,1
"thesofproject/sof","e76b92bf18e3a65be9ca679c73b35d6b3204f1bd","singalsu","2022-10-20 10:54:06","false","Audio: SRC: Fix HiFi4 SRC off-by-one frame issue

This patch fixes the FIR compute off-by-one frame bug. The fix
is similar as for generic C except that HiFi4 pointers
arithmetic is in bytes.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",96,53,1
"thesofproject/sof","b804ccb7c4086ee92011c0755226f34f826a76d7","singalsu","2020-10-02 13:47:17","false","Tools: Test: Audio: Add license and help text for TDFB test script

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",65,28,0
"thesofproject/sof","67701e8372575633b579a7189267e271536f9000","singalsu","2019-02-15 09:14:57","false","ABI: Fix version check for COMP_CMD_SET_DATA

An earlier update for ABI major, minor, patch versioning has missed
to update this header that caused the EQ settings to fail with any
version bump.

The ABI version check in components is not needed since it is
done in the comp_cmd() inline function that calls the the component
command handlers.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",64,8,0
"thesofproject/sof","13ddaaef0328da26543d3619d5de4bf84dedb61a","marcinszkudlinski","2022-02-02 16:59:00","false","SRC: compilation fix for src_hifi4.c. This fixes dcb9aeb308a92bc86cc57470a09d6ad0e2934cab

Code has compilation issues when SRC_HIFI4 flag is enabled
src/audio/src/src_hifi4.c:356: warning: implicit declaration of function ‘MIN’

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",104,44,1
"thesofproject/sof","5b89f2944550aaa4e8f29377386fddae5e9e4112","singalsu","2020-01-31 14:42:54","false","Testbench: Add pipeline trigger stop to test end

This patch adds the missing call to end of test run. It prevents
the pipeline reset to print error traces about illegal state
change.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",76,20,0
"thesofproject/sof","4d22a98f6c9c567707c905550b8ebbe5f7f358fd","tlauda","2019-06-04 10:06:40","false","idc: change waiting code to be ms based

Changes waiting code in arch_idc_send_msg to be
milliseconds based instead of DSP cycles based.
This aligns nicely with the rest of waiting functions.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,12,0
"thesofproject/sof","ace6181d4ac83e55d5354e1320507cc2f4aaafe2","lyakh","2021-10-29 12:18:05","false","ipc: (cosmetic) make two functions strongly typed

ipc_platform_complete_cmd() and ipc_platform_do_cmd() aren't called
as callbacks any longer, we can use strong argument types with both.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",127,41,1
"thesofproject/sof","26577b21de91e836098d85321f1ccfbd9bb42e23","lyakh","2021-12-16 10:55:34","false","alloc: don't initialise rballoc() memory

rballoc() doesn't guarantee zero-initialised memory, besides it's
often enough called at run-time and for relatively large buffers, so
performance losses aren't negligible. Remove the bzero() call.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",117,42,1
"thesofproject/sof","cd48b895ebda058e34c31f6439dfdcc213591a93","lyakh","2021-11-19 13:12:46","false","rimage: update to the current tip of ""main""

Update rimage from 9a26e45 to bd51ec1

bd51ec1 (HEAD, origin/main) rimage: add functionality to resign fw image
bcbcec7 cmake: drop binutils-specific '-Wl,-EL' option
ecb9212 cmake: drop '3' from -Wimplicit-fallthrough=3, it's the default value
0c66aa9 (origin/rimage_test) css.c: add __func__  to ""completing manifest"" log
c038d62 README.md: add warning that forks must be created using Github
8960097 Revert ""ext_manifest: Fix incorrect signature""
0d7f2d4 Do not exit(0) on invalid options or parameters
6e22944 README.md: explain how to run SOF tests on new rimage code
a9faf85 remove '-x' option
241af31 ext_manifest: Fix incorrect signature
4823e87 pkcs: quote the name of key file when logging it
dcfcef8 config: Remove unused, platform specific, memory region definitions
fc4d7b8 rimage: Fix error message content after adsp malloc fail
3e20076 config: Return error value in parse_uint32_* functions when key is not found
ada30c1 config: Explicit state return value for error cases in parse_uint32_* functions
de9177b config: Adjust return type with function name
c4a7456 config: Remove machine_id field
916fc2c config: Remove unused adsp structs
9bf46d3 rimage: Add support for mt8195
aea1969 adsp_config: fix potential overflow in strtol()
9716e10 config: Add imx8ulp.toml
b28b993 fixing incorrect data offset in ri_manifest_sign_v1_5
d1553e9 config: add rn toml file to support renoir build
246ea64 config: skl: change image_size to the real SRAM size
9c9e07c config: kbl: change image_size to the real SRAM size
44b37d1 config: sue: change image_size to the real SRAM size
580e4d6 config: tgl-cavs: change image_size to the real SRAM size

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",129,42,1
"thesofproject/sof","b637889efb5e99e9f87f0ed1b081826f6ff992f0","lyakh","2023-01-31 15:29:53","false","platform: remove support for cAVS 2.0 platforms

Remove all support for cAVS 2.0 platformsm including Ice Lake and
Jasper Lake, they aren't supported any more.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",51,56,1
"thesofproject/sof","83638c61a5b03e76aa3db1db185368f7837878fd","plbossart","2021-06-10 15:28:00","false","buffer: demote info messages to dbg

Move to dbg since having zero bytes to produce/consume is not
necessarily a problem.

Fixes: https://github.com/thesofproject/sof/issues/3308
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",81,36,0
"thesofproject/sof","c540305c203671d21b2e7db6193cb53fe77f03be","lrgirdwo","2019-04-26 15:50:07","false","kconfig: cht, byt: Dont include KPB by default on CHT, BYT.

CHT & BYT have limited amount of IRAM so are sensitive to selection of
built in audio components. Disable KBP by default, but this could be
enabled if other components were disabled.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",51,11,0
"thesofproject/sof","39285411d35e0d080516cb42ceba482f96f60298","johnylin76","2021-01-11 08:17:03","false","codec_adapter: Used nested Kconfig of codec adapter codecs

The codec config of codec adapter should be placed under
src/audio/codec_adapter. In the future we might add multiple other
types of libraries. So far we support Cadence and Dummy codecs.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",75,31,0
"thesofproject/sof","ab715d8e347fcbbc253ec5cae1c5295043821727","dbaluta","2022-02-28 12:32:09","false","zephyr: spinlock: Fix compile time warnings

With Zephyr, spinlock.h needs to know `struct k_spinlock`
definition.

Include, Zephyr's <kernel.h> header.

This fixes compile time warnings like this:

z/modules/audio/sof/zephyr/../src/include/sof/schedule/ll_schedule_domain.h:
In function 'domain_init'""
z/modules/audio/sof/zephyr/../src/include/sof/schedule/ll_schedule_domain.h:93:18:
warning: passing argument 1 of 'k_spinlock_init' from incompatible
pointer type [-Wincompatible-pointer-types]

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",113,45,1
"thesofproject/sof","e24d77aa764a65530b929f6764d698cb847ea81d","plbossart","2021-02-01 21:40:28","false","topology: remove sof-tgl-rt5682.m4

This file was used for early enablement of SoundWire on a platform,
before we had support for amplifiers. This is no longer needed, let's
remove it.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",69,32,0
"thesofproject/sof","e174fbddb8c1f0496f9eb27ecd8df8c41d5dda34","mrajwa","2019-05-16 23:45:24","false","detector: set default preamble time to 0

With this patch default preamble is set to zero
meaning KWD is activated from start, no delay.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",62,11,0
"thesofproject/sof","bdc6f4838c97f5581ac42cda3e41508024c1edb1","lgirdwood","2022-01-21 12:01:42","false","Revert ""codec_adapter: dts: remove included header""

This reverts commit 83870122b7990e364949278d6e1829a5bea0342a.",114,44,1
"thesofproject/sof","3472ae1d6e67258bfbebfd9c8dd66b801b4e89f9","iuliana-prodan","2021-04-07 17:47:10","false","tools: update SRC tool for 96 kHz mode, for tiny profile

This patch adds 96 kHz into SRC generator script for tiny
profile.

I've added 96 kHz in src_tiny_int16.m and follow the steps
from https://thesofproject.github.io/latest/algos/src/sample_rate_conversion.html
to generate the coefficients.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",79,34,0
"thesofproject/sof","f60adbbbdae12b88591bef7cbaac912104a4d683","iuliana-prodan","2021-03-04 11:13:27","false","drivers: imx: sai: update start/stop operations

For SAI, we have the synchronous mode enabled: the transmitter is
configured for asynchronous operation and the receiver for
synchronous operation.
In this case, transmitter bit clock and frame sync are used by both
the transmitter and receiver. So, when enabling RX we need to enable TX
(if not already enabled).

Therefore, for a clear start, we first do a software reset for the current
direction, but checking the state of RX and TX.
This will reset the internal transmitter/receiver logic including the FIFO
pointers.

For capture we can disable the receiver data channel, but on playback,
we can disable the transmitter only if the RX has the DMA requests
disabled.
Also, for capture, there's no need to enable the transmit data channel.
It's sufficient to enable only the transmitter, which enables the bit
clock (shared with RX).

On stop, we just need to disable the DMA request, the transmit/receive data
channel, the interrupts and the receiver and/or the transmitter.

Fixes: #3809

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",73,33,0
"thesofproject/sof","619cf4ac922d33d3a6b696b75ee5facee5feefaf","aborisovich","2023-05-10 10:35:34","false","ipc4: fixed possible null dereference

Result of the function call ipc_get_comp_by_id() had been dereferenced
without checking whether the pointer may be null.
Returned pointer may be null when component does not exist on the
list.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",53,59,1
"thesofproject/sof","81f582279c2b50e0640a9079375e0c3ebdcdcb33","CBala21","2023-06-20 10:23:47","false","topology1: adl: add support for Nocodec amp and HDMI-in capture.

Adding support for the alderlake products which doesn't have no ssp
amplifier but need to support HDMI audio playback and HDMI-in capture
via I2S

Signed-off-by: Balamurugan C <balamurugan.c@intel.com>",45,61,1
"thesofproject/sof","b5abe7194bb63708aff293c54838c74da946ae36","keyonjie","2018-06-29 10:05:23","false","topology: initial topology file for UP^2

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",9,1,0
"thesofproject/sof","424beb0f8ff9548efeef8f2bc81baf70e0415e40","keyonjie","2021-07-02 10:54:21","false","memory: apollolake: refine the heap sections size

Reduce the system and system_runtime size, fine tune the size of runtime
and runtime_shared sections.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",85,37,0
"thesofproject/sof","6a9fc3c56e2d409c849d1cce2aedf449a05a5b9c","keyonjie","2019-07-02 11:25:12","false","topology: kwd: add volume component after dmic

We need volume component after dmic for either volume change or format
converting, here add volume component between dmic and kpb.

And after this, our kwd can support all s16_le, s24_4le, and s32_le PCM
capabilities.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",42,13,0
"thesofproject/sof","dd0635c0153548e2350e1166d742ef02a4ccdbd3","keyonjie","2021-06-30 09:11:14","false","ll_schedule: refine the task->state update

Updates the task->state to reflect the real task status and only do
necessary check in schedule_ll_is_pending().

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",86,37,0
"thesofproject/sof","47d9d5465d97f428ebbd8b3e3acfe3c322fc9560","marc-hb","2021-06-10 01:42:18","false","trace.c: put_header(): make sof->timer optional for early tracing

Avoids crashes when trying to use put_header() early. Learned the hard
way because put_header() has also a timestamp argument.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",80,36,0
"thesofproject/sof","21049e31fbb94c0c2f297f2b910ff79d5dc6de5d","keyonjie","2019-03-08 06:28:42","false","topology: tokens: remove subtype for process token

We can use widget type combined with component type to identify specific
process type, the subtype is no need anymore, here remove it.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",67,9,0
"thesofproject/sof","67f56f10f94ca8b1b2ec30470dc2219188cbeda4","slawblauciak","2018-06-19 15:46:47","false","buffer: corrected check in comp_buffer_get_copy_bytes
Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",1,1,0
"thesofproject/sof","97a16bbf4e124564557706204bd7e1174ce8ebcd","slawblauciak","2018-07-26 08:33:01","false","test: update mixer ut

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",11,2,0
"thesofproject/sof","6e4faef8e7fea2e4ec71d9bc012680b446c7f8e5","keyonjie","2019-03-25 16:38:41","false","topology: keyword-detect: change to use DMIC FIFO B

We need use FIFO B for keyword detect DMIC, here change it.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",61,10,0
"thesofproject/sof","70c1778512286fc4dd3f15856ce032ed36628bfa","keyonjie","2020-04-22 07:54:39","false","topology: sof-smart-amplifier: change to use s24_le dai

Looks the usuage of M/N divider with 12.288MHz bclk leading to noise,
change to use s24_le and 9.6MHz bclk, playback works fine on max98373
with it.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",79,23,0
"thesofproject/sof","322839449d9141b6ffc27709d8df2514c34c472e","keyonjie","2020-10-23 02:53:53","false","clk: add helper to get sample ticks for a specific sample rate

Add helper clock_ticks_per_sample() to calculate and return the clock ticks
for a specific sample rate.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",73,29,0
"thesofproject/sof","8a2ae0cdfdd5c00fd02e4d3d2efd41b1ab768853","Potochi","2021-08-03 12:11:58","false","drivers: imx: Compile ESAI support as separate driver

ESAI Digital Audio Interface can be found only on I.MX8 and I.MX8X
so compile it only on this platforms to reduce the code size for the
rest of the platforms

Signed-off-by: Bud Liviu-Alexandru <budliviu@gmail.com>",111,38,0
"thesofproject/sof","fe1f3ba18072ab70697d00648cd110a3131c12b4","lgirdwood","2018-08-09 12:59:44","true","Merge pull request #52 from xiulipan/travisci

ci: travis: enable travis ci for SOFT",19,2,0
"thesofproject/sof","fd6208d65b5c806c496ce85c8ad4d6ec54601e0f","keqiaozhang","2019-07-24 09:36:48","false","topology: sof-cml-demux-rt5682: revise physical link iDisp1 ID
to align with machine driver

The physical link iDisp1 ID for HDMI should be changed to 3,4,5
to align with machine driver. ID 2 is defined for DMIC16k.

Signed-off-by: Zhang Keqiao <keqiao.zhang@linux.intel.com>",49,14,0
"thesofproject/sof","7fdd59844d4ff7869f5bd2ae59f3a3efa414b493","yongzhi1","2022-01-19 23:02:56","false","topology2: cavs-nocodec: remove dai_index for copier widget

When generating the tplg, copier inherits its dai_index
from the parent DAI object, since there is no need to overwrite
dai_index with different value, let's remove them from top level conf.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",113,44,1
"thesofproject/sof","65184ad3004f768e71973681a1f386a9cf3eb7bf","mrajwa","2021-04-26 16:32:51","false","codec_adapter: allow early config apply

This patch allows to apply runtime configuration as soon
as codec got created. This is too avoid high load spikes
which may happen when whole, large config blob is being
applied along side codec processing.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",84,35,0
"thesofproject/sof","d77beaf8bd5260058c00a3fe8f56940eb0962498","lgirdwood","2018-09-07 08:16:49","true","Merge pull request #67 from mengdonglin/topic/yorp

topology: Add 3 HDMI/DP PCMs and backends for GLK",31,3,0
"thesofproject/sof","c833f572d00ee328d48040dace44feaa64488c8b","mrajwa","2019-03-07 13:27:41","false","KPB: search for real time sink

This change allows host to keep real time
sink at any position - not forced to be the
very first sink. Pointer to the sink itself
has been added to component private data
therefore .copy takes slightly less resources.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",67,9,0
"thesofproject/sof","2c1f089d3965c00c33f06a5f9614dee491abb9a1","aborisovich","2022-02-02 17:39:16","false","Added standard headers include path for MSYS

Windows users building with MSYS2 need to provide additional include
path to the POSIX standard headers to build sof-logger with GCC.
Added this include directory when environmental variable
MSYS_INSTALL_DIR is set.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",104,44,1
"thesofproject/sof","5191c0ad262cb9c71d3fb5532fe258397c586ce9","rfredzim","2022-03-30 10:35:24","false","ipc4: dma-trace: trigger log transport only when half of buffer is full

The log buffer status notifications are triggered too frequently on
small buffer chunks causing an unnecessary overhead on dma transfer.
In order to make the dma transport more effective this change
triggers the ipc4 dma transport only when half of the available buffer
is filled with log entries. The ipc3 transport is always triggered.

Signed-off-by: Rafal Redzimski <rafal.f.redzimski@intel.com>",112,46,1
"thesofproject/sof","200dee8cc7aaf82f8b930df0d374dfc883e26364","keyonjie","2019-07-12 06:04:37","false","alloc: fix the heap alloc trace infinite loop issue

The while loop in alloc_trace_runtime_heap() and
alloc_trace_buffer_heap() will always get the first matched heap from
get_heap_from_caps() and the loop will run infinitely.

This patch create a function alloc_trace_heap() which will be passed in
different heap_base and heap_count to fix the issue mentioned, and both
runtime_heap and buffer_heap can reuse this same function for tracing.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",43,13,0
"thesofproject/sof","8d3d16c2520140e4822b73d4c01d18fc9e4fcb9b","aiChaoSONG","2023-02-24 09:37:18","false","module_adapter: use type in abi header as config_id for IPC3

The type member in struct sof_abi_hdr is used for component's
specific blob type for IPC3, some module count on it to know
the blob is for module config or module processing algorithm
model. We should pass it to set_configuration ops.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",57,57,1
"thesofproject/sof","f0e96ac4dfda58695ced4e1fb6b05a5710ecf931","kuanhsuncheng","2021-08-27 06:29:44","false","platform: mtk: add support for mt8195 platform

Add support for platform drivers :
idc, irq, timer, clk dma.

Add mtk mt8195 platform initialization.

1. MT8195 includes one Cadence HiFi-4  DSP,
which support for four 32x32-bit MACs,
some support for 72-bit accumulators,
limited ability to support eight 32x16-bit MACs,
a fourth VLIW slot and the ability to issue two 64-bit loads per cycle.
2. 25 interrupts
3. Clock Rate: DSP can operate at
720 MHz (0P75 V)/540 MHz (0P65 V)/370 MHz (0P6 V)/220 MHz (0P55 V)
4. DRAM: it can access data on DRAM by DMA or by CPU directly (through Cache).
5. 32x32-bit MACs
6. Supports SPM(System Power Manager) to control power sequence

Signed-off-by: YC Hung <yc.hung@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",119,39,0
"thesofproject/sof","40ee1a0e854de0455f18e4288bb3fd6c612d08d5","akloniex","2020-03-18 21:32:52","false","topology: buffer: Add flags field to struct sof_ipc_buffer.

2 flags have been added for use during buffer instantiation:
SOF_BUF_OVERRUN_PERMITTED and SOF_BUF_UNDERRUN_PERMITTED,
along with struct sof_ipc_buffer member fields flags and reserved.
Flags field is supposed to hold the above-mentioned flags to allow
some control over XRUN behaviour, i.e. prevent XRUN on buffers which
are allowed to under/overrun by design.
Also added reserved field to the structure in case it comes in handy
some time in the future.

Signed-off-by: Artur Kloniecki <arturx.kloniecki@linux.intel.com>",70,21,0
"thesofproject/sof","7eb9863cdcd08600bd7f6a4b693064f17216a238","fredoh9","2022-08-15 04:09:22","false","Tools: Testbench: apply common indentation for functions

No functional change. Set common function indentation and add comment
sections for better readability.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",116,50,1
"thesofproject/sof","ee3f7d9737f00246a0ea881624c4335e5e3a5c3a","akloniex","2020-04-02 20:54:48","false","audio stream: Introduce underrun/overrun_permitted fields.

Add underrun_permitted and overrun_permitted fields to audio_stream
structure and initialize them with regard to associated buffer config.
Add audio_stream_get_avail/free functions, which take above-mentioned
fields into account and use them in getter functions within audio_stream.h
instead of avail/free fields directly.

Signed-off-by: Artur Kloniecki <arturx.kloniecki@linux.intel.com>",77,22,0
"thesofproject/sof","d5cb673fa2b04ed501fd268669bc77ad18826f22","fuyuntsuo","2021-06-10 00:49:49","false","audio: igo_nr: reject params for mismatch channel

If source channels != sink channels, simply reject the parameter to avoid
potential bug due to channel mismatch.

Signed-off-by: fy.tsuo <fy.tsuo@intelli-go.com>",80,36,0
"thesofproject/sof","4ed5c1fce12f15a5d1ce849de4b66b85974dca53","RanderWang","2022-03-18 08:24:09","false","ipc4: add volume_params support

Fix fw error found by windows audio setting test.
In ipc3 path, host driver sends ipc_hw_params message
to fw but in ipc4 path fw needs to build component
params from component config.

This patch add params function for volume.

Signed-off-by: Rander Wang <rander.wang@intel.com>",110,45,1
"thesofproject/sof","5b4ea835236890a49d309bb360316b396107f580","RanderWang","2021-10-25 07:36:21","false","ipc4: add multiple pipeline set support

Multiple piplines state can be set in one ipc call.
This patch supports this feature.

Signed-off-by: Rander Wang <rander.wang@intel.com>",124,41,1
"thesofproject/sof","602205f40a5a85dce5a39c3ec12341331bb821b3","lyakh","2023-01-24 15:03:40","false","keyword: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register keyword with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","27a168b29757a4594085b0d481a4d80a66dfd630","plbossart","2019-01-16 05:08:03","false","src/drivers/dw-dma.c: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","a602fcbb867714571cb74bacaa558638b4aafc74","yaochunhung","2021-10-26 11:29:28","false","platform: mtk: modify mt8195 adsp MPU attribute

(1). Separate sram0 and sram1 memory attribute,
     sram0 is used for text/rodata/bss/data and set as XTHAL_AR_RWXrwx
     (read/write/execute),
     sram1 is used for shared buffer/heap/stack and set as XTHAL_AR_RWrw
     (read/write).
(2). Other registers are set as XTHAL_AR_RWrw.
(3). dsp sram is used for text/rodata/bss/data and set as XTHAL_AR_RWXrwx.

Signed-off-by: YC Hung <yc.hung@mediatek.com>",127,41,1
"thesofproject/sof","2861df6cadd5eb9a71aff23334d1dbe1efd0f48e","DianaGabriela27","2019-03-06 12:56:05","false","rimage: Remove multiple blank lines

Signed-off-by: Diana Ungureanu <diana-gabriela.ungureanu@nxp.com>",66,9,0
"thesofproject/sof","7965c563f147bb74f519622a74b387235b68b4af","lrgirdwo","2021-05-17 09:38:29","false","dai: remove extra new lines

Some new lines were not removed during a recent ""sed"" based search and
replace. Remove them now.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",87,35,0
"thesofproject/sof","93540c74eb351d1821e78e38d6d542227108a52c","lrgirdwo","2018-11-21 20:58:45","false","rom: ci: build xtensa ROM images for CI boot testing.

Some platforms like APL, CNL and ICL have a ROM that read the manifest
and loads the boot loader. This builds a simple ROM so that qemu can
boot APL, CNL and ICL firmware images for CI boot testing.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",39,6,0
"thesofproject/sof","713ba7de810b4d38c0d4c424866a928ccdaf74ab","lrgirdwo","2018-11-13 16:32:38","false","hda-dma: validate channels and improve trace output

Validate user supplied data and improve trace output on any errors.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",38,5,0
"thesofproject/sof","bd45a7e15a6cfdd348f3c916ab1e853c97d726b9","lrgirdwo","2023-06-02 11:26:23","false","module_adapter: optimize simple copy

Simple copy does not need full buffer info for every iteration.
Only calculate what we need.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",46,60,1
"thesofproject/sof","d63648297042137e10c682280e9c91aba020f11c","plbossart","2022-04-04 22:22:55","false","topology1: SoundWire: make deep-buffer optional

We don't want to release these topologies to world+dog due to
dependencies on kernel version, so let's make the deep-buffer
optional. The next patch will enable these topologies in the
development/ directory.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",110,46,1
"thesofproject/sof","c2f44b0c3c5101e16e3990fd35a2a7e173e8342f","dbaluta","2020-04-09 19:51:56","false","drivers: imx: sdma: Use temp variable for bd in sdma_prep_desc

This is to reduce line lengths and make code easier to read

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",82,22,0
"thesofproject/sof","57cb19ececb803b4b7e2d6bb5744b7ef8d93aa00","dbaluta","2023-09-14 12:31:39","false","drivers: imx: sai: Fix frame size computation

When I2S-like interface is enabled we must have
2 words in a frame because this is how I2S works (it has 2 channels)!

So, even if the user plays a mono file we must configure 2 words per
slot and the second slot will be masked so the users will get silence
on the second channel.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",20,63,1
"thesofproject/sof","dbb63071b125e5558a110c71c828bc603a173c0a","johnylin76","2022-04-22 09:36:57","false","component: fix comp_perf_info unsigned format

Use %u instead of %d in printf for uint32_t variable.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",114,47,1
"thesofproject/sof","d40cff319f6367fde5c10cd50a5628decf90d5ae","jajanusz","2018-12-20 00:58:32","false","test: disable xtensa-only tests for host

Disables following tests:
Debugability - not designed to be run on host at all
Volume - needs some tuning to not fail
Buffer - needs some fixes to not have segfault

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",51,7,0
"thesofproject/sof","e34a64d16a582d7399f630a0e7110755a39fca4f","jajanusz","2020-03-19 09:22:15","false","pipeline: move pipeline_posn shared data

Like other SHARED_DATA objects, this one should have limited visibility
just to pipeline compilation unit.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",68,21,0
"thesofproject/sof","292347ae1769d4967840760255a3b29c1697cb1d","jajanusz","2019-05-15 12:49:08","false","uapi: header: change stackptr's type to uint32

Types in uapi haders have to use fixed size.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",66,11,0
"thesofproject/sof","11e2da2f1982796fee931998fd0849dd22b911f6","jajanusz","2019-04-25 19:56:19","false","host: build ipc and lib as shared lib

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",48,11,0
"thesofproject/sof","17c929ebf66f7c604fc72bce403446f3d9319826","jajanusz","2018-07-06 11:58:47","false","autotools: replace user variables with automake variables

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",11,1,0
"thesofproject/sof","2728dae14c0e2d05d554e3581ed95f36b1e30e0e","jajanusz","2019-02-02 23:03:40","false","cmake: tools: logger

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",58,8,0
"thesofproject/sof","ab71c889aeaec6383b556f5028eec9645ed93a80","jajanusz","2020-01-02 12:37:04","false","codeowners: add maintainers for default match

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",70,19,0
"thesofproject/sof","e8a6a32de9461d5f0999ac98674ecf6c671c06df","lyakh","2022-06-14 12:22:14","false","module-adapter: simplify logic in module_copy_samples()

Remove a negation and a goto.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",118,48,1
"thesofproject/sof","22731744cb049fdae57be14de30be409ea5b9b85","lyakh","2021-05-10 12:36:40","false","dmic: don't decrement active FIFO count below 0

In case of a spurious DMIC interrupt flood the active FIFO count
will decrement below 0. Prevent it by checking the current DAI state.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",81,35,0
"thesofproject/sof","7e588899ec3aa772d5232dafbce01cb6ce1885de","lyakh","2022-06-01 15:53:13","false","component: fix a function prototype

Sparse annotations must be used consistently in function definitions
and in declarations.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",115,48,1
"thesofproject/sof","78935820e1b22df591071be5ca9b12ae6265c0b2","btian1","2023-05-17 05:46:55","false","copier-host: move copier_host_create/free to copier_host module

Move those host specific code into copier host file.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",52,59,1
"thesofproject/sof","87de994f49b37e385e748e47b769140df43451cf","joechengxperi","2022-09-13 08:42:36","false","topology1:remove runtime config from DTS topologies

Follow PR#5190, remove runtime config from DTS topologies

Signed-off-by: Joe.Cheng <joe.cheng@xperi.com>",104,51,1
"thesofproject/sof","dc9ba281d76519dbed3670fe3691d0a9aedee85a","lyakh","2023-01-31 14:41:41","false","platform: remove support for cAVS 1.8 platforms

Remove all support for cAVS 1.8 platformsm including Cannon Lake,
Comet Lake, Whiskey Lake and Coffee Lake, they aren't supported
any more.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",51,56,1
"thesofproject/sof","5ba541577701943e21ba79e4511feb85b7ec7e98","lyakh","2021-09-28 11:57:28","false","ipc: ipc3: ignore PCM_PARAMS for active pipelines

With IPC3 it is an error to send a PCM_PARAMS IPC on an active
pipeline, but it is a valid use-case with IPC4, ignore such IPCs.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",120,40,0
"thesofproject/sof","4340909978b6b0b6c1df8623cccc3597976f6dd8","lyakh","2022-04-07 11:41:48","false","dcblock: fix buffer acquisition

Instead of acquiring and releasing buffers locally multiple times,
do that once for .copy() and .prepare() methods.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",114,46,1
"thesofproject/sof","d0057a7def011204a0e2c95e0a36cd3b36b60798","lyakh","2022-02-11 07:14:49","false","Revert ""zephyr: add a generic Zephyr platform""

This reverts commits e0ff1b16d808c160c7ac53bf7062ba09ceff43a9,
339e5ac2176c57fb62534847faa1ee180a9486e1 and
09c69b760751941e6677745b959c7a1500de420b. A different approach will
be used for making SOF a platform-agnostic Zephyr application.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",108,44,1
"thesofproject/sof","0eba431d6615bc40ae2946855e04fafb9e9a10f6","lyakh","2021-04-30 14:28:43","false","schedule: edf: use a proper type for schedule_edf()

Now that schedule_edf() is just a static function, use a
proper type for its parameter.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",82,35,0
"thesofproject/sof","b05f9bd3ffeb2f1185f42779db40e9b1c8700209","lyakh","2019-01-07 12:44:44","false","sue: use rimage for image building

Fix bugs in Sue Creek support for rimage:

- use a correct manifest offset
- place the image higher into RAM to avoid overwriting itself when
  copying the SOF proper.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",52,7,0
"thesofproject/sof","256c934375336407bdf56fd073f3bce068859989","lyakh","2020-10-09 08:52:50","false","smp: make MAX_CORE_COUNT an automatic Kconfig parameter

Add a new CONFIG_MAX_CORE_COUNT, set it automatically, depending on
the platform and use it to limit CONFIG_CORE_COUNT.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",68,28,0
"thesofproject/sof","dc3169aa5a5a09a115b9e5efc27ad2585b2addff","tobonex","2023-09-15 18:08:04","false","rtnr: remove buffer_acquire from rtnr.c

remove buffer ops from rtnr.c

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","e995bbb5755090cf867748d2a3a2aa5ec7bb2fbb","marc-hb","2021-03-11 21:31:16","false","Dockerfile: apt-get install tree

Required to remove the copy hack introduced in
commit eb4373cb6143 ("".github: new installer.yml"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,33,0
"thesofproject/sof","4889faecb8ce436ecc33f39bc551a362e7c624c7","marc-hb","2021-06-28 16:41:40","false","ipc_buffer_new: make buffer argument const

'const' documents APIs and catches bugs.

This came while discussing https://github.com/thesofproject/sof/pull/4408/

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",78,37,0
"thesofproject/sof","f3c290f14b91755a441f413aa20a90d0fec3ee88","kv2019i","2023-09-18 15:38:51","false","ipc4: logging: fix builds with mtrace and probes both disabled

If both SOF_PROBES and MTRACE logging backends are disabled at build
time, IPC4 build failed due to undefined ipc4_logging_enable_logs().
Fixes a bug in commit 1721f7042638 (""logging: add logging through
probes"").

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",20,64,1
"thesofproject/sof","977b6b58660c4ee60daa77f4914beea61b11f305","tlauda","2019-12-18 12:59:23","false","alloc: add prepare step for rfree function

Adds platform_rfree_prepare implementations, which are called
right before actual freeing of the buffer. For some of the platforms
there might be a need to manipulate pointer before freeing it e.g.
cAVS platforms are checking for cache aliasing.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",73,18,0
"thesofproject/sof","8f9c68ae57dbeb1958756a9def803fbadf86c8f3","singalsu","2023-09-20 12:25:42","false","Audio: Volume: Handle all volume ramp types

The windows fade, windows no fade, and linear and handled
the switch-case statement change into volume.c.

In IPC4 the ramp can be disabled with zero curve duration or with
no fade type. The ramp duration convert multiplication can be passed
with the no fade type.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",19,64,1
"thesofproject/sof","7462552f126bc5d1c43e0e31caae7621ce6e0510","marcinszkudlinski","2023-04-17 11:28:54","false","pipeline2.0: introduce a sink API

this is a definition of API to sink of audio data

THE SINK is any component that can store data somehow
and provide a buffer to be filled with data at request.
The sink API does not define how the data will be processed/used

 The user - a module - sees this API as a destination
            it must send data to
 The IMPLEMENTATION - audio_stream, DP Queue -
            sees this as a producer that PROVIDES data for processing

Examples of components that should expose SINK api
 - /dev/null
     all the data stored in sink buffer are just simply discarded
 - I2S sender
     Data stored in sink buffer will be sent to the external world
 - a memory ring buffer
     data stored in the buffer will be sent to another module
     (usually using source API, but it does not matter in fact).

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",50,58,1
"thesofproject/sof","002d4a3f666fb689a0fdba21e0689f12f81c6ee4","marcinszkudlinski","2023-04-18 12:38:44","false","Pipeline2.0: change module API to use various data

Target is to make all modules use sink/source API as
data source and destination.
However, current implementation of module adapter
allows 2 other completely different interfaces to be used:

""simple_copy""
  modules receive output_stream_buffer and
  input_stream_buffer table. void * data pointers
  from both structures point to audio_stream
  other fields in the structures are in fact not needed
  but are used

""! simple_copy""
  modules receive output_stream_buffer and
  input_stream_buffer table. void * data pointers
  from both structures point to raw linear data

to make transition smooth and easy, both
legacy ways have been kept, just to make the code
more clear - put at separate module API calls,

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",51,58,1
"thesofproject/sof","1b17974b3bda4a2723246612e294c226e6dea88a","cujomalainey","2020-10-06 22:01:45","false","dai: include list header

dai header uses lists, lets make sure the header is properly included

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",67,28,0
"thesofproject/sof","efd3742cab7709b2ce0b181f11f9dc6fc1d799ca","cujomalainey","2022-03-02 22:10:34","false","topology: add rtnr + google_aec topology files

Add topologies for RTNR and GOOGLE AEC integration

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>
Signed-off-by: Pin-chih <johnylin@google.com>",113,45,1
"thesofproject/sof","324681ec6278509c621ef2ba96b19998f6607eb3","cujomalainey","2020-11-10 00:54:58","false","kpb: fix logging cast issue

We cannot assume the build will always be 32bits, therefore when casting
an int to a ptr use uintptr_t

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",73,29,0
"thesofproject/sof","10656d614c1b8334c73e9b0694b339710a881dc3","cujomalainey","2021-02-08 23:54:06","false","oss-fuzz: add error for incorrect build env and readme

add proper build instructions

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",72,32,0
"thesofproject/sof","4c06d00084c4599d52cf41642569d32aa57569da","iuliana-prodan","2021-06-30 00:23:51","false","zephyr: wrapper: include arch/xtensa/cache.h if CONFIG_KERNEL_COHERENCE not set

When building SOF with Zephyr, for i.MX, we get the following
error: undefined reference to `z_xtensa_cache_inv'.

i.MX has only one DSP core, so CONFIG_KERNEL_COHERENCE is not set.

Therefore include arch/xtensa/cache.h, where z_xtensa_cache_inv
is defined and implemented, in cases when the kernel is not built in
a mode where all shared data is placed in uncached memory.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",84,37,0
"thesofproject/sof","f6bf4b0d72d899861c34e7d08981ec37f5421986","dcpleung","2019-11-12 02:10:47","false","Add files created after running autoreconf

This adds the files created after running `autoreconf -i`.
This allows the project to be 'configure'-d and built.

Signed-off-by: Daniel Leung <danielcp@gmail.com>",55,17,0
"thesofproject/sof","7633c3422409cbf5b505ab2d500710c9fa2e8b9d","ktrzcinx","2020-04-02 12:24:31","false","smex: Add elf modules content validation

After find some error in source elf file, ldc file shouldn't
be generated

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",76,22,0
"thesofproject/sof","985ea1ec0fac7f0ad7181aea038ab2a3a8ff159d","balakishorepati","2022-04-29 13:50:49","false","drivers: amd: renoir: add remove call back function

Add remove callback function for SP and BT dai
drivers in dai ops.

This callbacks definition will resolve the firmware
NULL pointer access during remove sequence from sof core.

Signed-off-by: Balakishorepati <balaKishore.pati@amd.com>",115,47,1
"thesofproject/sof","2d252c965c89d51ffc792a36ac369e587721ee4a","balakishorepati","2022-07-07 16:38:54","false","platform: amd: Add window information

Add sram window structure to update window info
to host.

configure dma descriptor base and count during firmware bootup.

Signed-off-by: Balakishorepati <balaKishore.pati@amd.com>",109,49,1
"thesofproject/sof","19df10fea648a6fb88f6be62bdb3d44a82a275fb","makarukp","2022-12-14 13:54:18","false","hda: enable handler for hw chain dma

HW chain dma support require new logic in handler

Signed-off-by: Piotr Makaruk <piotr.makaruk@intel.com>",96,54,1
"thesofproject/sof","3e6bf7f8a9b5b379b2b0878395358ec9f55f8ca2","abonislawski","2019-06-12 15:50:47","false","memory: remove align to memory bank in APL

Due to small number of memory banks in APL it will be not possible to power down some of them
so there is no point in align to memory banks, this would significantly limit free memory for buffers

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",48,12,0
"thesofproject/sof","2661e1b3808b717594dea00403e481da3e6d7974","ranj063","2021-10-27 15:12:53","false","crossover: use buffer acquire/release

instead of buffer_lock/unlock() which will be deprecated.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",128,41,1
"thesofproject/sof","9c9c4a4b172b9c0410efd4c41a6b7d4ecdd01e03","ranj063","2018-06-14 09:43:21","false","scripts: use xt-xcc for compiling if available

Check ENV XTENSA_TOOLS_ROOT to determain which compiler to use, and set
the PATH and other ENV needed for xt-xcc.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",1,0,0
"thesofproject/sof","90e6925e7c85cbbaf6d95b886478d384caeb21cf","ranj063","2022-01-08 02:20:56","false","codec_adapter: rename comp_get_codec()

to comp_get_module_data(). No functional change.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","236c519253f7a7711a8c435c79bed28b9df14213","stolx","2021-02-09 21:41:22","false","audio: codec_adapter: Waves custom codec

added codec_adapter API implementation for Waves MaxxEffect API

Signed-off-by: Oleksandr Strelchenko <oleksandr.strelchenko@waves.com>",71,32,0
"thesofproject/sof","1c4fb7ce64314b4bed0bd19b7700a51407d828e1","ranj063","2021-11-12 17:49:39","false","topology2: cavs-gain-hda: fix pipelines and PCM instances

Make them unique and incremental.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",127,41,1
"thesofproject/sof","1f4bc9f948e92d79dd22733a1afb1ac8f1e9320b","aiChaoSONG","2023-02-28 07:25:35","false","topology2: wov-detect: correct use of define variables

To refer to a define variable, we should use
""$DEFINE_VAR_NAME"". The $ symbol is required.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",58,57,1
"thesofproject/sof","f092d906fc7adb99f37898f5e5c5c507fdec9b36","mwierzbix","2018-11-08 11:22:05","true","Merge branch 'master' into debugability-macro-metaprog-bugfix-varargcount_0_for_parenthesis",42,5,0
"thesofproject/sof","441bd035449e7962baa410956a4b99fa4a3fb970","kv2019i","2023-02-17 12:54:54","false","CODEOWNERS: add owners for zephyr/ subfolders

Add Kai Vehmanen, Guennadi Liakhovetski, Iulia Prodan and Daniel
Baluta as owners for the 'zephyr/' subfolder.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",55,56,1
"thesofproject/sof","241af313dab49db06d6e6f0af3330f1a916de664","mrajwa","2021-09-11 17:22:25","false","ext_manifest: Fix incorrect signature

This patch changes the incorrect signature of extended manifest
to the correct one ""$AE1""

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",117,39,0
"thesofproject/sof","3fef488d8f2ea4f76f02b0324a289e31ff4c2f13","kv2019i","2023-06-20 15:50:32","false","app: add logging_mipisystcat_overlay.conf overlay config

Add an overlay config to build SOF with MIPI Sys-T Catalog
logging enabled.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",42,61,1
"thesofproject/sof","cef9544f0645fe936abdeae907fc0462d8300cb0","kv2019i","2022-10-10 13:29:45","false","component: add pipeline and component ids to comp_foo() output for Zephyr

The component and pipeline identifiers were direct part of the older
SOF dictionary format. This information was added directly to encoded
output and was not part of the log message. When using Zephyr logging
subsystem, this type of audio specific information has be to put
as part of the log messages like any other log content.

Modify comp_{err,warn,info,dbg} macros to add component pipeline
and component identifiers to all printed log messages.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",99,52,1
"thesofproject/sof","89039c6bff8889a1739f10851fad83d16e57beb2","kv2019i","2022-08-11 12:48:41","false","probe-app: fix handling of buffer-id of zero

Don't assume buffer-id of zero is an invalid value.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",116,50,1
"thesofproject/sof","4095fefd6ca188be43dbddfdbc9ab0e1527432b3","lyakh","2021-08-05 12:49:58","false","dai: (cosmetic) fix function name in trace strings

Trace prints often contain open-coded function names in them. When
functions get renamed or trace prints are moved to other functions,
those strings sometimes are forgotten. Fix two such cases.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",115,38,0
"thesofproject/sof","7ef4ca917595a632f73080cd84a48530c9d2a78c","lgirdwood","2018-11-09 09:46:30","true","Merge pull request #558 from libinyang/increase_runtime_memory_on_more_platforms

memory: increase HEAP_RT_COUNT256 size",41,5,0
"thesofproject/sof","aea19692251b76c66439e50f81853521a915445c","mrajwa","2021-08-25 09:57:41","false","adsp_config: fix potential overflow in strtol()

This patch fixes the potential overflow which may happen during
conversion of signed long. On a platforms where signed long
is only 32 bits the address which is stored in temp_s will experience
overflow.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",121,39,0
"thesofproject/sof","6ee90bb8b9a406b3de5eb2920a1dbad9f106acf8","lgirdwood","2022-01-21 12:01:42","false","Revert ""codec_adapter: waves: remove included header""

This reverts commit ce67a76c51d4c78ffac0043f1912089c44c1ff5a.",114,44,1
"thesofproject/sof","8f6018057b64441f26de6d509ac16514d7347f12","kv2019i","2023-08-14 13:49:13","false","app: enable OUTPUT_DISASSEMBLY for Zephyr builds

With Zephyr commit cc5763344709 (""Build system: disable
`OUTPUT_DISASSEMBLY` by default""), generation of zephyr.lst
is disabled by default.

Enable disassembly generation in SOF configuration as it is expected by
SOF builds rules for reproducible builds.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",28,62,1
"thesofproject/sof","0a5dc9cfab9ac8662e4a11af051c548f32323f41","bkokoszx","2019-02-26 14:19:49","false","power_down: deduplication of power_down headers for cavs

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",67,9,0
"thesofproject/sof","cfeaceb39442c6b526e35603dff53f31577454c4","kv2019i","2023-02-14 13:01:57","false","topology2: use passthrough-capture-be instead of passthrough-be

As the copier can do format conversions, and many pipeline components
can do conversions as well, it is important for the topology to define a
single format to use in the ""dai_out"" copier. This ensures deterministic
behaviour with the driver.

Implement this behaviour by switching topologies to use the
passthrough-capture-be pipeline as template for the backend capture
pipelines.

The previously used passthrough-be template is problematic as
the base class already defines multiple audio formats, with multiple
different sample formats. The new passthrough-capture-be only defines
one sample format by default and is a better starting point as a base
class.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",55,56,1
"thesofproject/sof","0cb5f3509702fe284b4817a1e20ba9488fcf9201","tlauda","2020-04-16 12:01:20","false","list: fix check in list_relink

Fixes check for empty list in list_relink.
list_is_empty(old_list) could be used, but it loads old_list
back into cache, which can lead to unpredictable data flush.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",83,22,0
"thesofproject/sof","bf15c8973be67586f7599a197fe218fb24c2ecad","tlauda","2019-09-16 11:48:07","false","dw-dma: add PLATFORM_DW_DMA_INDEX definition

Adds PLATFORM_DW_DMA_INDEX definition. This allows
to access this value from the generic API.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",62,15,0
"thesofproject/sof","dd3575ab485c022eb09f9b65758f643166096e4a","tlauda","2019-10-30 13:10:15","false","topology: sof-glk-da7219: add volume to DMIC pipeline

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",61,17,0
"thesofproject/sof","96b471765d6f83772142b7005ef6b7564473ad75","tlauda","2020-01-14 12:44:29","false","dma: make dma_info const

Makes dma_info structure constant. Pointer to dma array
should not change during the lifetime of DSP.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",77,19,0
"thesofproject/sof","1a01f7490f7b79834de081f214d329e4ce93442e","tlauda","2020-03-20 08:15:38","false","mailbox: add method for SW REG read

Implements method for software register read from mailbox.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",68,22,0
"thesofproject/sof","3b580ac8363ab35da8f45be049d918d8deda73c6","tlauda","2019-07-17 09:47:12","false","suecreek: remove #include <config.h> from linker script

Removes #include <config.h> from linker script, because it's
not used.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",47,14,0
"thesofproject/sof","297aba354d19256f1fae4807818a250a06ec8330","tlauda","2020-05-26 06:52:49","false","arch: xtensa: configure memory window based on CONFIG_MEM_WND

Uses CONFIG_MEM_WND definition instead of CONFIG_SUECREEK to
decide whether to configure memory window or not.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",97,24,0
"thesofproject/sof","f3925ff1c070da1c86cbb3f704c27a4409e4234e","tlauda","2019-03-06 16:05:56","false","dai: add support for variable data copy

Adds support to dai component for variable
data size copy.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,9,0
"thesofproject/sof","cb5506f0b9f949fafbdb10dbeac36834ecc8df2c","tlauda","2019-10-10 08:08:10","false","pipeline: cleanup header file

Removes unused pipeline_schedule() declaration and
not needed inclusion of task header.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",63,16,0
"thesofproject/sof","932e52a612af73b441ed7c39c93610ad0a091afe","singalsu","2023-01-25 16:29:37","false","Audio: EQ IIR: Changes for IPC4

This patch contains the changes to work in IPC4 firmware.

In process the input_buffers[0].size (frame_count) need to be
checked to skip IIR processing with zero frames.

In prepare() call to eq_iir_params() is added to get sink
buffer parameters from IPC4 base_cfg. Also for EQ initialization
the sink stream channels count can be used instead of source because
it has been just set correctly. Depending on topology the source
stream channels count can be still invalid in component prepare
phase.

The eq_iir_verify_params() is done only in IPC3. Note that the
buffer flags set has no impact any more in prepare phase. The
function is left for possible later fixes since there is no harm
from doing it.

The IIR initialize from blob is moved to a common function for
prepare() and process(). The processing function select difference
in IPC3 and IPC4 is handled there.

The format convert capable IIR copy functions are excluded from
IPC4 build as unused.

In process() to get channels count from source stream. The
mod->stream_params is not availablein IPC4.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",53,56,1
"thesofproject/sof","c3db256ac564fa4cf8585416c05f6a0eda3aec72","ktrzcinx","2020-02-13 10:51:29","false","bit: Upgrade BIT macro to use 1UL instead of 1

In such a solution it is possible to assign BIT(31) to
uint32_t register value without any warning.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",82,20,0
"thesofproject/sof","6a3b2a9f462c4c112d029df19a2e3564ae70f121","singalsu","2020-01-28 11:29:02","false","Tune: Fix help text for SRC generator

This patch corrects the shown parameters orders for help text
and updates the copyright text style.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",76,20,0
"thesofproject/sof","e8e536bb03341a4a16dab7ee5b8bd7ec96730176","singalsu","2021-02-11 18:38:00","false","Topology: Fix handling of PCM ID in intel-generic-dmic.m4

The macro used DAI link ID when it should have used PCM ID

Co-developed-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>
Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",72,32,0
"thesofproject/sof","2a7a94d238a117946acc25607ad0978ea4923d9e","singalsu","2023-05-23 13:11:12","false","Tools: Topology2: Add SRC component to cavs-nocodec.conf topologies

This patch adds 8 - 192 kHz playback and capture SRC to nocodec
topologies such sof-tgl-nocodec.tplg. It enables testing of SRC
component with IPC4 via the SSP loopback in the nocodec topologies

E.g. Play random noise at 44.1 kHz and capture it as 32 kHz. The
SSP loopback runs internally at 48 kHz.

aplay -Dhw:0,2 -f S32_LE -c 2 -r 44100 -d 10 -t raw /dev/random
arecord -Dhw:0,2 -f S16_LE -c 2 -r 32000 -d 10 /tmp/recording.wav

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",55,60,1
"thesofproject/sof","f96e25ffcc8d53db91f8878bd652cb6a24a97cd9","bardliao","2021-07-13 13:30:20","false","topology2: add cavs sdw topology

Add sdw topology for headset which includes one playback and one capture
pcms.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",88,37,0
"thesofproject/sof","6ac8e1f2f8090c1ed39571a1ab2f249338021a9d","ktrzcinx","2020-07-14 09:33:18","false","host: Assign dma_stream params

Each audio_stream should have set valid metadata information.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",80,25,0
"thesofproject/sof","de1b0f7def6fce04fe5b5053c727f6fa8e62b659","ktrzcinx","2020-09-07 15:20:08","false","config: Add configuration file parsing interface

This allow to add new platform with old version of rimage tool.
Default values are easily to define for any fields, so fields
duplication in config files should be reduced.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",70,27,0
"thesofproject/sof","3df1d5b97830bda6384a02a46db3963dcfd693c8","ktrzcinx","2019-10-28 14:04:40","false","trace: Add pipeline id to keyword traces

It will be helpful during debugging components
to see correlated pipeline id.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",68,17,0
"thesofproject/sof","dab973039c36d714b69da37a5e30d198e5e0f1ab","ktrzcinx","2020-09-17 09:32:42","false","toml: Add version information in verbose mode

It allows to assure right version of chosen headers during
reading logs in verbose mode.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",66,28,0
"thesofproject/sof","a37f8f473d3951ff480166fb97f7c9ea3cd57c49","ranj063","2023-04-06 17:42:26","false","topology2: io-gateway: Fix a typo

Fix the typo in the pipeline name

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",51,58,1
"thesofproject/sof","c0bee428aea3dae1d3e00d5460560e9caa98b87b","ranj063","2021-06-16 19:42:11","false","topology: prepare for Topology2.0

In preparation for Topology2.0, move the current topology files
to the topology1 folder and once the 1.0 topologies are
built copy them to the /sof/tools/build-tools/topology folder.

When Topology2.0 topologies come along, they will be built into
the topology2 folder and the 2.0 binaries will be copied over
the 1.0 binaries.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",71,37,0
"thesofproject/sof","e5fe974880795378463712c2cdb2d4361baaa8b3","ranj063","2023-03-17 02:42:32","false","drivers: dw: Poll with timeout after disabling channel

It is recommended to poll with timeout after disabling the channel to
ensure that the channel has been actually disabled.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",56,57,1
"thesofproject/sof","0027521536ba888eb16d5b41151ea2586962a9b8","ranj063","2021-03-19 05:49:37","false","topology2: Add mixer control class

Add the class definition for a mixer control.
A mixer control can be instantiated as follows:
	Object.Control.mixer.""0"" {
		Object.Base.channel.""fr"" {
			shift	0
		}
		Object.Base.channel.""fl"" {}

		Object.Base.tlv.""vtlv_m64s2"" {
			Object.scale.""0"" {
				mute	1
			}
		}

		Object.ops.""ctl"" {
			info	""volsw""
			get	256
			put	256
		}
	}

Also add the other commonly used class definitions that
will be used to instantiate the mixer object such as,
channel, TLV, ops, scale etc.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",72,33,0
"thesofproject/sof","6241f50549a94ca41fcf9d4cee8d64afe0d1c351","ranj063","2022-01-06 18:31:43","false","codec_adapter: remove unnecessary braces

Remove the unnecessary braces in codec_adapter_set_params().

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,43,1
"thesofproject/sof","152686022894f0e69e62fea1d21f8ef4ebf87c12","jajanusz","2019-01-18 10:20:25","false","cmake: vm rom build

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",57,7,0
"thesofproject/sof","b534fc61929dceb3700dacc8911aabbb8c659db1","ranj063","2023-05-16 21:45:32","false","topology2: host-gateway-playback: Use host-copier

Replace the generic copier with host-copier in the class definition and
the instances.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",52,59,1
"thesofproject/sof","77deb27e33e6ddfedb7ed218c6e44c8813a0d8dd","ranj063","2022-01-08 02:03:12","false","codec_adapter: rename codec_allocate/free_memory()

to module_allocate/free_memory(). No functional change.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","2302012fe9fa7ad9b94c11cf0993b813b53c2dfe","abonislawski","2019-03-26 14:49:38","false","coredump-reader: fix fg error when running without colours

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",60,10,0
"thesofproject/sof","39a2b4760e6e78454a2280c29594f7501f0021c8","abonislawski","2019-06-11 12:40:44","false","kconfig: CORE_COUNT config depends on SMP

This will prevent from configuring UP with CORE_COUNT > 1

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",50,12,0
"thesofproject/sof","21587cee71f7151bfe72b7ad8b079a6cae567cb0","ranj063","2022-09-14 23:47:11","false","test: Add test infrastructure for module adapter

Add the test infrastructure for setting up and freeing a module and use
it in the volume unit test.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",104,51,1
"thesofproject/sof","30431a19a96e938999bbf6a982781a693f3a6c61","aiChaoSONG","2022-05-10 04:33:06","false","xtensa-build-zephyr.py: add -o option for overlay

Add -o option for user to specify overlays while
building SOF.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",112,47,1
"thesofproject/sof","998795c38d8dfc9178c8774c3d73dfefc589b8d6","aiChaoSONG","2022-09-16 02:39:59","false","module_adapter: add helper for module config fragment position

This patch adds a helper to convert first_block/last_block
indicator to module_cfg_fragment_position enum, which is more
efficient than if-else test.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",98,51,1
"thesofproject/sof","95cc4613cecfa75a5a8e54539390072e5503f005","aiChaoSONG","2021-07-09 05:28:25","false","topology2: Add cavs passthrough-capture pipeline

Add class definition for cavs passthrough-capture
pipeline, and it can be instantiated as:

    Object.Pipeline.passthrough-capture.""N"" {
	format		""s16le""
	period		1000
	time_domain	""timer""
	channels	2
	rate		48000
    }

Signed-off-by: Chao Song <chao.song@linux.intel.com>",86,37,0
"thesofproject/sof","92645cc53d417e439ef01f95de0175e014cf906c","RanderWang","2021-11-19 08:26:37","false","ipc4: update llp register in memory window 0

Host driver checks llp register data in memory window 0
to update stream position to audio framework.
This patch update this memory location when dma channel
is allocated, released and dma copy is done.

Signed-off-by: Rander Wang <rander.wang@intel.com>",129,42,1
"thesofproject/sof","b5d6af9ca2c492a9e6e1ef4d1483b02e5d950dcd","maruthi-machani","2023-03-24 07:10:44","false","driver:amd:enabling tdm without virtual dai's

Enabling tdm without using virtual dai's.

Signed-off-by: MARUTHI MACHANI <maruthi.machani@amd.com>",56,58,1
"thesofproject/sof","37c485df36bad40f1c0b0f299451e5826b380881","libinyang","2021-04-21 04:31:39","false","topology: sof-tgl-rt711-rt1308: add EXT_AMP option

Some devices are using rt711 only, without amplifiers.
Add the ""EXT_AMP"" option in sof-tgl-rt711-rt1308.

Signed-off-by: Libin Yang <libin.yang@intel.com>",89,35,0
"thesofproject/sof","0eda4302e3496ca5a4743a2466a9ba6835e62bbe","RanderWang","2022-02-11 07:37:27","false","ipc4: add gain module support

Gain works as peak volume except that Gain doesn't
report peak volume to host

Signed-off-by: Rander Wang <rander.wang@intel.com>",108,44,1
"thesofproject/sof","c1be04e64ceaac2617c5678179bc493948c75658","cujomalainey","2019-03-15 00:12:47","false","EQ: GUI: Remove globals

Globals should not exist if they don't have to, they are limiting to
extensibility

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",68,9,0
"thesofproject/sof","f933116807ba43a7b961b4ad88c45b2dbb5fb0ee","xiulipan","2020-02-27 09:46:57","false","scripts: docker: update the qemu branch to sof-v4.2

Update qemu docker branch to sof-v4.2

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",75,21,0
"thesofproject/sof","7488d456aba11375f9c0ffda030b72019440584a","lyakh","2022-04-07 13:40:41","false","selector: fix buffer acquisition

Instead of acquiring and releasing buffers locally multiple times,
do that once for .copy(), .params(), .trigger() and .prepare()
methods.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",114,46,1
"thesofproject/sof","da9344a6ad725f1e41225b025345a742579bf0f4","singalsu","2023-03-02 15:26:15","false","Tools: Testbench/tplg_parser: Check -Wimplicit-fallthrough support

The xt-xcc compiler RG-2017.8 does not support -Wimplicit-fallthrough
option. Add to CMakeLists.txt files check for the option and use it if
it is supported.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",60,57,1
"thesofproject/sof","1a8cea9b6927883c82fb7e5254f269419e3fbed8","ujfalusi","2022-03-29 12:56:43","false","ipc4: handler: Perform platform context save before primary core shutdown

Run the platform_context_save() before we shut down the primary core.
As an implementation detail: the context save implements the code to
prepare for IMR boot on platforms where it is supported.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",112,46,1
"thesofproject/sof","fbab621c9b762b1e2a74c9c8b98fbe847e1b783a","ujfalusi","2022-02-17 12:25:02","false","ipc: ipc3: handler: Fix error handling in ipc_dma_trace_config()

We need to free up the allocated SG in case of a failure after a successful
ipc_process_host_buffer() call, which does the allocation.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",105,44,1
"thesofproject/sof","f485a88e8f4edca4685240d689ce784267fcc5da","marc-hb","2023-11-01 00:38:36","false","Remove samples/smart_amp_test dependency on CAVS || ACE

Fixes commit f06da576cfa3 (""smart_amp: add smart amplifier test
component"") which added its COMP_TEST_SMART_AMP ancestor.

This code can compile without any hardware dependency;
`git show  ___ | grep include` does not show any.

This is useful for fuzzing etc.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",4,65,1
"thesofproject/sof","1f9c91d1747b76703e76fc08042b95902ea8ad4b","marc-hb","2021-03-05 01:39:06","false","spinlock.h: add # else /* CONFIG_... */ comments

Minor readability fix.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",73,33,0
"thesofproject/sof","4dd431715df6898d638139a474e62a1b7f28ffa5","marc-hb","2021-01-28 02:16:47","false","CODEOWNERS += /.github/

Add CODEOWNERS for /.github/

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",66,32,0
"thesofproject/sof","1a79de1c1669fd4002cdb6f82db31e5b71e837c2","marc-hb","2021-04-21 18:14:46","false","logger: warn user about wrapped logs and skipped garbage

Don't sweep logging issues under the rug.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",90,35,0
"thesofproject/sof","f8ca8536fd772e55451f6507242ad9465e94c554","marc-hb","2021-10-13 23:45:28","false","sof_ri_info: add new --erase_vars feature for reproducible builds

   sof_ri_info.py  --erase_vars reproducible.ri sof.ri

replaces variable fields (signature and date right now) by constants.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",123,40,1
"thesofproject/sof","730e861505f5a365dd28c224ff6161461d85d7ed","marc-hb","2022-08-18 14:07:22","false","xtensa-build-zephyr.py: pylint:disable=bad-indentation W0311

There's just too many of them and fixing them would cause a lot of churn
at a wrong time (big migration to west happening now)

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",112,51,1
"thesofproject/sof","f30892d96651808c0a28938e908ea578162ad154","marc-hb","2022-01-29 02:47:30","false","Revert ""zephyr: (cosmetic) make a needlessly global variable static""

This reverts commit 079ce95b988384225d3f1dc2013811d4c41b3d82.

As explained in the comment that it modified, predicted in the #5159
discussion and reproduced in test #5290 /
https://github.com/thesofproject/sof/runs/4988844402, this commit broke
'CONFIG_TRACE=n'. Simple reproduction steps:

 $ rm -rf zephyrproject/build-apl

 $ echo 'CONFIG_TRACE=n' >> \
    boards/xtensa/intel_adsp_cavs15/intel_adsp_cavs15_defconfig

 $ sof/scripts/xtensa-build-zephyr.sh [ -p /path/to/zephyrproject ]  apl

fw abi main version:	3.20.1
fw abi dbg version:	5.3.0
warning: can't find section .static_log_entries in zephyr/zephyr.elf
error: section .static_log_entries can't be found
error: unable to write dictionaries, -22

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",102,44,1
"thesofproject/sof","04dbe42607af311565f840c128c7c49e89dc6245","lyakh","2022-08-05 14:34:41","false","cosmetic: remove two left-over empty lines

Previous commits removed code but left several empty lines behind,
remove two of them.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",118,50,1
"thesofproject/sof","b4edab69ded5297b3dbe2ec511c1eafb9048cc3d","marc-hb","2023-01-05 01:37:30","false","Revert ""cmake: make sure sha1 is computed without filters""

Commit 3315681c6925 (""cmake: make sure sha1 is computed without
filters"") added the `--no-filters` option to the `git hash-object`
invocation used to produce a `src/` checksum embedded in all firmware
binaries and .ldc files.

This fixed a small mismatch for the (very few) people using the
_asymmetric_ `autocrlf = input`. However it created a huge mismatch for
the numerous people using the _symetric_ `autocrlf = true`.

So revert that commit, remove `--no-filters` and replace it with a build
time warning.

`--no-filters` produces a checksum of the files as they are on the
filesystem, as opposed to how they would be input into git after
optional CRLF -> LF conversion.

When `--no-filters` was added, no one was compiling in Windows. Most
developers were not performing any conversion because there is no
`autocrlf` conversion by default on Linux.  Files were identical inside
and outside of git and life was simple.

Simple life except for at least one indomitable Linux developer who had
the _asymmetric_ `autocrlf = input` setting. Also, the SOF git repo
always had two exceptional (and generated) files with CRLF end of lines;
see issue #5917 for details (all other files have LF end of lines). So
for that ""asymmetric"" developer only and these two files only, `autocrlf
= input` converted these 2 files to LF before hashing and this caused a
different checksum. `--no-filters` stopped that conversion and ""solved""
that mismatch.

But now Windows has entered the stage. On Windows, the default is
usually (and unfortunately) the symmetric `autocrlf = true`. It is the
default for Github's Windows runner. This symmetric default converts ALL
other files to CRLF when extracting them out of git. This causes `git
hash-object --no-filters` to produce a _different hash for all but 2
files on Windows_!

The only solution is to:

1. Drop the `--no-filters` to align everything on what is _stored in
   git_. What is stored in git is the only thing we are sure all users have
   in common.

2. Request users to use only _symmetric_ `autocrlf` settings so any
   optional input+output conversion cancels itself out.

3. Convert odd files and make sure they all have LF end of lines.

4. In the future, drop this entire git hash-object technique which is
   flawed in multiple ways and has been causing multiple issues. Much,
   much more work than this very small revert though.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",71,55,1
"thesofproject/sof","a26f83c52f837f634533d72ee73920ffcd2497b0","joechengxperi","2022-11-14 06:22:35","false","module_adapter:dts: support module life cycle change

1. Add a free memory function to support PR#6230 and PR#6331,
   the latest prepare/reset API flow update of module_adapter.
2. This requires DTS library v1.0.7 to support this change.

Signed-off-by: Joe.Cheng <joe.cheng@xperi.com>",95,53,1
"thesofproject/sof","192c1a24d484401820b2c4dc53834e0424719c1b","joechengxperi","2022-11-10 02:42:08","false","topology1:renoir: add DTS + EQ topology

Add a new m4 to support DTS SDK -> EQ processing

Signed-off-by: Joe.Cheng <joe.cheng@xperi.com>",93,53,1
"thesofproject/sof","190babffe8f25a486daa5aee2713e9a71e15767f","btian1","2023-07-11 05:31:50","false","copier: inline host common copy to save one more function call.

Save one more wrapper time for host copier.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",31,61,1
"thesofproject/sof","f772b39e4d5de2e1e5d4500613e65edd4880d99c","lyakh","2023-04-18 06:36:49","false","sparse: use CONFIG_LOG_USE_VLA=n

Sparse output is spammed with ""Variable length array"" warnings from
Zephyr logging system. The use of VLAs there can be disabled via
Kconfig. Do that to avoid exceeding sparse's warning maximum and
losing important warnings.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",51,58,1
"thesofproject/sof","8c62c4457ce4fdbfb8c606540df1059accf6f5cf","lyakh","2019-01-17 09:17:56","false","alloc: improve a jump procision

In _balloc() if no heap was found, no need to jump to a location in
the function, where a potentially successful allocation is still
being processed, jump directly to the unlock-and-return point.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,7,0
"thesofproject/sof","eee146bd023290748a021d59fb0ec835a3905481","lyakh","2023-04-26 06:34:50","false","lib-manager: fix compilation breakage

Fix breakage introduced by 32e4f7e27a57 (""buffer: use an accessor to
read struct audio_stream::end_ptr"") which accidentally wrongly used
audio_stream_get_end_addr() to access the .end_addr member of
struct lib_manager_dma_buf.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",52,59,1
"thesofproject/sof","ba8534bb237881beb281c56f5d03d92fa67eb0ec","lyakh","2022-12-23 15:02:33","false","Fix bitmap according to the IMR type

When the IMR type is set to 4, the default bitmap field #4 must be
0x10.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",92,55,1
"thesofproject/sof","e57883f3c2fda999d13b449b51f1e4d550441dcf","lyakh","2023-04-24 09:49:12","false","buffer: use an accessor to read struct audio_stream::channels

This patch adds audio_stream_get_channels() to read
struct audio_stream::channels and converts all users. Apart from
hiding internals of the structure, it also enforces the use of the
__sparse_cache annotation.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",52,59,1
"thesofproject/sof","b78effe9cd9b87dc116a1ea43dd42b4d311680bb","lyakh","2022-04-13 12:18:03","false","tdfb: fix buffer acquisition

Instead of acquiring and releasing buffers locally multiple times,
do that once for .copy() and .prepare() methods.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",117,46,1
"thesofproject/sof","2f6a6bb4c61f46cfc50f38593b4a046e5f45f815","lyakh","2022-12-21 15:32:51","false","module-adapter: fix address space mismatch

Fix address space mismatch, caused by 133eecb1323d (""module_adapter: Add
APIs for coherent module source info access"").

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",93,55,1
"thesofproject/sof","c8f1edfaa4a9ac90670b71fdab83b1d8d5f133af","lyakh","2019-01-17 09:29:56","false","alloc: fix and improve the block allocation algorithm

The block allocation algorithm, as implemented in _balloc(), is first
trying to find a single free memory block to satisfy the request. If
that fails it is then trying to allocate several blocks in a
sequence. That part is implemented wrongly. It can end up allocating
multiple such block sequences, and not using but leaking them
instead. This patch first simplifies the search for a single suitable
buffer, then fixes the leakage.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,7,0
"thesofproject/sof","c28400baaa383030f0e6860e922365a79e51c31a","marc-hb","2022-10-06 05:15:36","false","scripts/docker-run.sh: fix wrong uid in warning 1001 -> 1000

Fixes commit d09844ab98cc (""zephyr/docker-build.sh: match UID with
'adduser' instead of 'chgrp -R'"")

Also clarify comment and add reference to new sudo-cwd.sh script.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",98,52,1
"thesofproject/sof","0a247928bb3fa31a02d4e4cfa5affe6bea265f17","marc-hb","2020-09-19 21:20:35","false","travis: upgrade distribution to Ubuntu 20.04

The current default Travis default is 16.04 which is obsolete.

From https://github.com/thesofproject/linux/pull/2402

> Everyone uses 20.04, period. SOF CI also uses 20.04.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",66,28,0
"thesofproject/sof","0a4b1d62d5b31b41699b5df60f837bf53326292a","marc-hb","2022-10-06 05:34:38","false","sudo-cwd.sh: drop the all 'sof_' prefixes and references

This script is now generic. This was not done earlier to be gentle on
git blame.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",98,52,1
"thesofproject/sof","512e22eae40fd7864315c7819fb9533d821fe211","marc-hb","2021-10-13 23:19:45","false","installer: comment fix: hsw and sue are not SIGNED

Pure comments, no code change.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",123,40,1
"thesofproject/sof","62d57d699bc74e9a8f590737ca08698a0bf40fdd","marc-hb","2022-01-12 20:36:25","false",".github: reformat platform list for qemu-boot-test

More future-proof. No functional change

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,43,1
"thesofproject/sof","93947f98a4a9faa9b3215f2c16f75f383cf83a37","tmleman","2023-01-26 21:32:56","false","platform: ace: notifying about idle thread readiness

Informing the primary core that the Idle thread on secondary core is
ready. During the D3 exit flow thread is not initialize again, but
restored from previously saved context.

This patch includes also zephyr version update to aba3b12e31 (total 15
commits). Changes related to intel_adsp contain refactor and fixes for
ACE secondary cores power flows.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",52,56,1
"thesofproject/sof","9a1d95fc94f41c7044c54cc86c2ca11544164202","tobonex","2023-09-15 18:09:33","false","tone: remove buffer_acquire from tone.c

remove buffer ops from tone.c

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","9632135d331f941a177840ba92fb349fc3de6a49","tmleman","2023-04-25 15:05:38","false","west.yml: upgrade zephyr to 9028ad5d71

Zepych update: total of 132 commits.

Changes include GP DMA power management changes.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",53,59,1
"thesofproject/sof","4ebcc24bd19f5bd5a3729a789f1d749573a9a165","pjdobrowolski","2022-04-27 10:14:24","false","library manager: initial implementation

Library manager is part of loading external libraries responsible of
handling data and placing it in proper order and places.

This feature is using module adapter API for
loadable native and external libraries.

After receiving IPC4 load library command
 - reads manifest
 - after module_id choses module to load and verify it (WIP)
 - loads manifest
 - allocs proper memory size
 - transfer module from external MEMORY to HPSRAM (WIP)

Signed-off-by: Stelter, Jaroslaw <jaroslaw.stelter@intel.com>
Signed-off-by: Dobrowolski, PawelX <pawelx.dobrowolski@intel.com>",115,47,1
"thesofproject/sof","d50aefcb6375960c58c8f7ef25a05b8eabec9e28","pjdobrowolski","2022-07-20 13:25:25","false","manifest max size for loadable modules

Library manager during loading modules needs manifest max size

Signed-off-by: Dobrowolski, PawelX <pawelx.dobrowolski@intel.com>",113,50,1
"thesofproject/sof","4a9a99aeb24ac7fbcf3cf80973ac8f119a16c6e5","iuliana-prodan","2022-11-22 09:45:03","false","imx: clear general purpose pending interrupt

Clear general purpose pending interrupt
before enabling interrupts between host and DSP.
The GIPn bit, from MU Status Register is cleared
by writing it as “1” in order to de-assert the
interrupt request source at the interrupt controller.

This fixes a fw loading failure after a soft reboot
caused by GIP bit that was 1.
The problem was the MU which triggered endless interrupts
causing timeout on Kernel side, which was waiting for
FW_READY message.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",94,54,1
"thesofproject/sof","6687c298f2645e12249a303bc4fc4091178292ad","iuliana-prodan","2023-04-06 13:29:23","false","topology: imx: Add topology file for i.MX8QM with wm8962 codec

Add new topology file for i.MX8QM with wm8962 codec.

While here, use CODEC variable to differentiate between wm8960
and wm8962.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",51,58,1
"thesofproject/sof","34dd1073006ad6166a308f9f050ca02a60c49109","cujomalainey","2021-04-13 22:13:43","false","kpb: only include variables scope in build

cppcheck complains that these variables are unused based on config flags

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",81,34,0
"thesofproject/sof","6b744bcc6315285918b1b1692f71267864f2dfe9","fredoh9","2022-08-24 08:42:46","false","host-testbench.sh: use process_test.m for 8 components

Expand to more components with process_test. Components for test are
volume, eq-iir, eq-fir, dcblock, drc, multiband-drc, src and tdfb.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",111,51,1
"thesofproject/sof","8bec4078bdfa9f3f3864f155de481499868773c8","rfredzim","2022-04-22 13:46:57","false","ipc4: update request/reply structs and fix extension usage

IPC4 request/reply always consists of primary and extension dwords.
Since the extension is always present it makes no sense to:
- pretend that extension is first dword of payload,
- do tx_size related logic to handle extension,
- dynamically allocate extension along payload.
This patch updates common IPC4 structure definitions and
modifies the usage to get rid off the special treatment of
the extension dword.

Signed-off-by: Rafal Redzimski <rafal.f.redzimski@intel.com>",114,47,1
"thesofproject/sof","bbfd5ebad7ef19a8d56e1e8fa70f060c536a12b7","keyonjie","2021-11-15 08:26:13","false","cavs-ipc: hold ipc->lock in ipc handler to avoid race

For secondary core target IPC, the IPC handling could be completed on a
secondary DSP core, while the primary core may be in handling an reply
message from the host and touching the IPC_DIPCCTL at the same time, so
there is race condition from different DSP cores in this scenario, and
that actually lead to kinds of IPC timeout as setting of bit
IPC_DIPCCTL_IPCTBIE could be ignore and busy interrupt will be disabled
after that.

Simply holding of ipc-lock in the irq handler fixes the issue, according
to stress test with multicore scenarios.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",127,41,1
"thesofproject/sof","f2bd45bac891c4e47263772f7d1efc59c02c3233","cujomalainey","2021-04-20 20:12:25","false","tplg_parser: don't assign unused values

minor style violation

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",89,35,0
"thesofproject/sof","8bfcf59980b7302bc3621dc3b889ac279ad81ae4","cujomalainey","2022-12-15 01:13:05","false","audio: google: remove post processor

Dead code.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",95,54,1
"thesofproject/sof","a9a0c670a8826f905420c5c96942addfb25f64b0","cujomalainey","2019-12-03 22:58:02","false","byt: fix SHIM_SHIM_END copy paste error

It appears that this definition was copied from the haswell definitions
but this register does not actually exist. Therefore we should use the
correct registers depending on the platform.

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",68,18,0
"thesofproject/sof","57b52120ab8da7cbde21dc1f8eb809d45a095f58","lgirdwood","2018-09-25 09:56:45","true","Merge pull request #68 from juimonen/eq_test

[RFC] generic effect type with fir and iir eq",37,4,0
"thesofproject/sof","e697e912aa1f7b1d76836cd705850581fdc685b9","mrajwa","2020-07-14 15:27:32","false","kpb: refactor

This patch changes the variable name history_depth to drain_req
as it is more understandable.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",81,25,0
"thesofproject/sof","a1af7ff4302ddb5d2b8004ddc2f29314a0c54b80","lgirdwood","2018-08-10 11:17:10","true","Merge pull request #219 from tlauda/topic/memory_cache_line_align

cavs: memory: align runtime heap buffers to cache lines",19,2,0
"thesofproject/sof","269659622ba75c3c93511fb15ebef5003351c9e7","lgirdwood","2018-09-10 13:07:01","true","Merge pull request #339 from tlauda/topic/notifier_master_core

notifier: right now reserved only for master core",33,3,0
"thesofproject/sof","d6bb7043b75f95ecfbd4f783f974b7c0fc669ae0","bkokoszx","2018-11-09 16:38:59","false","logger: added Werr and Wall and removed warnings

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",39,5,0
"thesofproject/sof","ba5b755f97276589fd696712e9eeb86e0db97e46","kv2019i","2023-08-16 15:55:27","false","platform: Intel: icelake: remove unused idc.h

Remove unused idc.h header for Intel IceLake platform (no
longer supported in SOF main).

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",24,62,1
"thesofproject/sof","964ff207a754ad9cc3b1109784a0918500abe0e6","tlauda","2019-12-19 13:13:06","false","sof: align sof structure to cache line size

Aligns sof structure to cache line size. It is needed
in order to assure that no data will be randomly overwritten
by cache eviction with multicore access.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",72,19,0
"thesofproject/sof","eb0d309cf9df762efdc2da3eb190f7d52ad05d23","tlauda","2019-09-30 06:08:44","false","task: rename func to run

Renames task's func to run to better show intention of this callback.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,16,0
"thesofproject/sof","0ec0ff73bd2e5438060f6321da95d51170c47da1","tlauda","2019-07-20 08:23:08","false","arch: xtensa: add check for UserFrame's size alignment

Adds assert to verify if UserFrame's size is 16 bytes aligned.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",51,14,0
"thesofproject/sof","84bc15e3dd55dda9ed77a1fe5b2003b81aa0e385","tlauda","2019-12-18 10:44:54","false","cavs: memory: move uncache related macros and defines

Moves uncache related macros and defines to cavs common header.
There is no point in duplicating those across all of the platforms.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",73,18,0
"thesofproject/sof","40cfa6d5f1250d27ecceeea969ddeafcdbb05b5c","ktrzcinx","2020-06-30 06:04:53","false","pipeline: Trace used clock frequency in pipeline_complete

In logs, there should be information about used clock frequency,
to better analyze issues related with performance. On pipeline
complete, clock value should already be settled down.
Another reason of location this log in this place is each
pipeline may work on different core.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",72,25,0
"thesofproject/sof","6f24c82a27815688800569edf9ed4cf3af338ee6","ktrzcinx","2020-01-17 07:41:43","false","mux: Mark source buffer as const in processing functions

Const keyword is added to explicitly indicate that nothing in given
source buffer can be changed in processing functions - read pointers also.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",78,19,0
"thesofproject/sof","7c4c3c86e10912bb0d4d347ca2bfa71db8fa5bf8","ktrzcinx","2020-05-20 06:33:18","false","ext_manifest: Use ext manifest by default in output image

Add extended manifest at the begin of firmware image,
as a firmware metadata description.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",99,23,0
"thesofproject/sof","6b2ab3e5f4ce3a72d14480ea298d1ab14ad48ec0","tlauda","2019-02-01 15:50:29","false","hd-dma: missing COMP_STATE_ACTIVE on start

Adds missing status COMP_STATE_ACTIVE on start.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",59,8,0
"thesofproject/sof","99c16a69e3c82d65b85d09038b9207a37d069e6c","tlauda","2019-10-17 08:14:05","false","ipc: rename ipc_get_comp function

Renames ipc_get_comp function to ipc_get_comp_by_id.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,16,0
"thesofproject/sof","ea546c933bedf64c00d4b5bf38c8ae6700d43f60","saisurya-ch","2023-06-20 10:46:27","false","platform: Add vangogh platform support

Add vangogh platform support

Signed-off-by: SaiSurya, Ch <saisurya.chakkaveeravenkatanaga@amd.com>",45,61,1
"thesofproject/sof","e917018f62abd380e99c64b12f7f2b5299340e5f","singalsu","2021-12-14 12:57:38","false","Audio: Selector: Check config.sel_channel vs. stream channels count

The optimized copy() functions could output data outside source
buffer without this check. The test in params() checked only
channel select parameter vs. max channels count. The changed code
checks it vs. actual stream channels count. There's in params() a
channels count check so this one could be modified.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",112,42,1
"thesofproject/sof","40f7cf7a28d68fe13f5b59c153d6062e025f1b8a","singalsu","2020-01-31 14:30:15","false","Testbench: Initialize system notify

This patch adds the initialization to testbench start code. Without
it the notification from buffer consume/produce causes segfault.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",76,20,0
"thesofproject/sof","29b2f0eeccd9535e1cbc3d0da151dc281485de10","tobonex","2023-09-15 18:11:48","false","probe: remove buffer_acquire from probe.c

remove buffer ops from probe.c

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","98e687edb4dd5447da3f25a7488a5f30a2c631f8","singalsu","2023-10-25 10:03:30","false","Tools: Topology2: Add sof-hda-benchmark-multiband_drc16/24/32-tgl build

This patch adds the multiband-DRC test topologies build.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",8,65,1
"thesofproject/sof","58692116a562c97c0e60fec61d3105d4f1dee90e","singalsu","2023-01-19 17:33:40","false","Audio: EQ FIR: Drop parameter nch from filter processing cores

The channels count need to be retrieved from source buffer. The
mod->stream_params->channels is not available in IPC4. Frame_count
calculation is also simplified.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",55,56,1
"thesofproject/sof","70227d6a8925203d701dd0ebc16b7fa16cfcfa6d","mwierzbix","2018-11-19 15:17:57","false","Coredumper: initial

Added tool to process coredumps, and to feed gdb commands to examine what caused the dump.

Signed-off-by: Michal Jerzy Wierzbicki <michalx.wierzbicki@linux.intel.com>",39,6,0
"thesofproject/sof","bb0ed59ceca91a1e666471609aac2322b6d382ce","ranj063","2021-10-27 15:17:03","false","tone: use buffer acquire/release

instead of buffer lock/unlock which will be deprecated.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",128,41,1
"thesofproject/sof","e38db1a69d608a48daab9a3ff5998f05d96df5c3","ranj063","2019-02-25 23:10:43","false","topology: remove dapm route from PCM dev to host comp

This route is automatically created when the host comp is created
during topology loading. So remove it to avoid duplicating
the connection in the dapm graph.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",65,9,0
"thesofproject/sof","f58a047278cbf6254da2a3500c2dc74ef07e4f3a","ranj063","2018-06-25 07:04:27","false","topology: move ssp related macros to ssp.m4 in platform/common

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",4,1,0
"thesofproject/sof","6c908797c6101994133cfdb5797a0b4b1ea3b2ac","abonislawski","2019-06-19 09:57:49","false","rimage: make .static_log_entries optional section

Thats because this section is optional in FW, it will be created only with TRACE enabled

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",49,13,0
"thesofproject/sof","54f6f623dedd9fa83edb0d022e8e77b9dae46094","ranj063","2022-11-17 18:48:56","false","topology2: remove all pipeline stream_name setting

It is not used at all.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",97,53,1
"thesofproject/sof","142b8de409b568b71a2964a27fdde2b65cb1c436","ranj063","2023-05-05 20:51:07","false","topology2: intel: dmic-generic: Implement passthrough option

Add the host and IO gateway pipelines when the passthrough option is
chosen and connect them.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",53,59,1
"thesofproject/sof","932478abd6b32ed0df0ed4cbcf50e05d647cc100","abonislawski","2020-03-23 09:14:28","false","rimage: show LMA and VMA in section view

Sometimes they will be different and this will make developer
aware of the differences

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",66,22,0
"thesofproject/sof","dad03fc17aa2d8d0def4f377f949d9c0eff80df3","abonislawski","2019-06-19 10:06:46","false","rimage: change error to warning if section not found

Thats because this function is used also to find optional sections so it will be decided later (outside of this func) if this is actually error

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",49,13,0
"thesofproject/sof","b75a94bfd3ac7f2c16113c1a98794fc8c64a9137","yongzhi1","2023-05-17 21:12:49","false","topology2: cavs-nocodec: run DMIC pipelines on core1

There is pinmux on MTL platform to optionally enable DMIC,
add this config to the build and run the pipeline on core 1.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",50,59,1
"thesofproject/sof","e23857b6415d93b8a342bf8b5e8515460c6f64d1","yongzhi1","2023-07-07 14:10:28","false","topology2: nocodec-multicore: test multi-stream capture

Enable more complex pipelines for multi-core use cases.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",31,61,1
"thesofproject/sof","916e31f3da36b5619d2734505d25fdd7bf3c8a92","lrgirdwo","2023-08-01 14:41:25","false","ipc4: more dbg context for pipeline state changes

Give more context for pipeline context changes.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",30,62,1
"thesofproject/sof","7364f0ce889fc028bd7914509f5ddf0e2738f59f","lrgirdwo","2018-08-01 23:52:04","false","ci: travis-ci: add initial travis.ci configuration file.

This file should install a docker image and build all targets using gcc.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",18,2,0
"thesofproject/sof","a5d568edb0c9791f7d9ec8894461b4ccd55f4530","plbossart","2022-03-16 00:12:59","false","topology2: cavs: rename mixout-playback as mixout-gain-dai-copier-playback

Be exhaustive on pipeline contents.

Also remove Windows references and copy/pasted comments

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",107,45,1
"thesofproject/sof","f16e6eef7e81e79912f7d48dc695d862dbb48444","lrgirdwo","2018-12-10 16:37:05","false","gdb: fix configure flag for enable/disable.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",47,6,0
"thesofproject/sof","f4be6ecc64c804056a48f17a2e755fdb9b5ce5b6","dbaluta","2023-01-26 17:19:38","false","Audio: SRC: Make stage buffer_start to be aligned at 8-byte boundary

sbuf length is empirically found and used to compute buffer_start.

buffer_start address is used by some instructions that require
8-byte aligned addresses:

See: src/audio/src/src_hifi4.c:
220	/* Load two data samples from two channels */
221	AE_L32X2F24_XC(d0, dp, inc); /* r0, l0 */

buffer_start = cd->delay_lines + cd->param.sbuf_length

Then we make sure cd->delay_lines is aligned to 8 and we only add
multiple by 8 lenghts.

Suggested-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>
Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",52,56,1
"thesofproject/sof","f97183a8c4963dc50605f09dde269eb9ae8d693d","marc-hb","2023-06-21 18:36:10","false",".github/zephyr: add --cmake-args=-DEXTRA_CXXFLAGS=-Werror

We have C++ code now.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",42,61,1
"thesofproject/sof","5a9233033e7e0c0ab6fab8e08a4f4e53c66e0f89","plbossart","2019-09-25 23:08:24","false","topology: add rt711 to TGL RVP configuration

Now rt711 is in SDW mode and rt1308 is in I2S mode on TGL RVP

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",64,16,0
"thesofproject/sof","4c060fd89f1e582a13b484c8333b2f36be734f6c","plbossart","2019-05-11 20:23:23","false","tools/kmod_scripts: fix module lists

I just wonder how many people run these module/remove tests? Clearly
they have been broken for a while with modules missing from the lists,
so we must have a parallel universe where CI operates.

Fix by adding all the currently supported modules in the SOF kconfig.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",58,11,0
"thesofproject/sof","21f1aec44764b9c43cf1b571b42200925d174300","softwarecki","2023-01-16 14:07:04","false","idc: Add secondary core crashed notification

Added a new notification about the crash of the secondary core. It is
directed to the primary core. Only failure detected by watchdog is
supported at this moment.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",55,55,1
"thesofproject/sof","7c47f6aa55748b05afe267ccb98b2ea36954b35e","gongjun-song","2022-11-04 02:03:47","false","add some missing topologies in v5.19/CMakeLists.txt

Add missing adl SoundWire NOJACK topologies in
v5.19/CMakeLists.txt

Signed-off-by: Gongjun Song <gongjun.song@intel.com>",89,53,1
"thesofproject/sof","2bd8be35d21504bcf69dc99e10e36caecc58343e","softwarecki","2023-02-27 08:41:47","false","hash: New hash functions

Prepared a new set of functions for computing digest with error handling.
The hash context has been placed into a separate structure. This allows
to conveniently pass the calculated digest along with its length and used
algorithm.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",58,57,1
"thesofproject/sof","a60492e8485c538f3398aac3e8e3a9d6fbca6b8c","softwarecki","2023-07-14 12:46:37","false","cmocka: selector: Add default case to handle unsupported formats

The switch supporting various sample formats was missing a default handler,
which caused compilation errors when enabling/adding a new format that is
not supported.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",32,61,1
"thesofproject/sof","c21018335af5d4b501376fa9d5b86187b64284a1","softwarecki","2023-03-21 12:10:49","false","Remove unused 	dram_offset field / config option

There was no dram_offset value in any configuration file. It also wasn't
used anywhere in the code. So the code reading it from the tolm file has
been removed.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",57,58,1
"thesofproject/sof","eafe58e55dd3332a2d45b59a144c476bed0bef26","dbaluta","2020-04-24 09:18:29","false","drivers: imx: sdma: Make sure SDMA is not started yet

MC0PTR is the address of the first control block. Keep this
0 until everything is configured properly.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",72,23,0
"thesofproject/sof","988510b7fd4cec3662181f3041123b3f3e63a69d","dbaluta","2019-10-01 11:46:59","false","ipc: Introduce ESAI IPC parameters definition

ESAI is one of the DAIs found on i.MX8 platforms. Introduce esai_params
used to pass configuration from topology via AP to DSP.

Only MCLK and TDM related params for now.

Because this is a new struct, increment only ABI MINOR version
which makes the SOF FW backward compatible with older kernel versions.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",66,16,0
"thesofproject/sof","738c83ddeb62d6fb64fe5b4ce1c847ade4bd97ef","lrgirdwo","2019-02-07 20:44:17","false","comp: Add initial keyword detector testing component.

This is a testing component acting as a dummy keyword
detector comp. Add the init/free and cmd op so as to be
able to accept switch cmd from userspace.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",58,8,0
"thesofproject/sof","38c676151284b138c634c7bcfb7501e74b6f310a","plbossart","2021-02-12 00:40:13","false","topology: remove commented out code in intel-generic-dmic-kwd.m4

Not sure why this was there in the first place.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",74,32,0
"thesofproject/sof","8a5bcd9df6934b21c7a52a6cc3d9f72399fad0be","lrgirdwo","2021-01-21 10:00:38","false","timer: scheduler: make all timer IO atomic in scheduler

Make all timer IO is atomic in the scheduler by adding a new
platform_timer_get_norq() API that validates 64 bit reads.
ALso make sure there is enough time for setting the new timeout
in the CAVS platforms.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",69,32,0
"thesofproject/sof","ce0879a4327d5ecacd82b71a255e9c625f28f50b","lrgirdwo","2022-08-19 19:40:52","false","header: rtos: use rtos specific version of atomic.h

No runtime functional change. Code can now include <rtos/atomic.h>

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",111,51,1
"thesofproject/sof","51ef2db3d2d46271b04e4ce8b5bf2239c52289ae","jajanusz","2019-04-05 17:43:28","false","test: fix kpb compilation with -Werror

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",48,10,0
"thesofproject/sof","373f33190c76cce50463379bd22e57641e5886fa","jajanusz","2020-01-02 12:43:29","false","codeowners: add @dbaluta as imx folders owner

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",70,19,0
"thesofproject/sof","79d6ea654cd8403eaf21e7d69e466d3fb73e4d87","jajanusz","2020-01-08 11:52:32","false","lib: remove unused cmemcpy

Function cmemcpy is unused, there is no need to keep dead code.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",72,19,0
"thesofproject/sof","4e85dfc95fbb51a06f4acf31fd56f9bb2239c78e","fredoh9","2022-06-06 06:40:25","false","docker: add AMD/Rembrandt gcc toolchain

Add AMD/Rembrandt (rmb) gcc toolchain to thesofproject/sof docker image.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",116,48,1
"thesofproject/sof","779237837ca9d507c7775bbc0edd5c72b6863872","jajanusz","2019-02-12 13:23:32","false","cmake: meu: add option for openssl path

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",59,8,0
"thesofproject/sof","9da1fce2478df1f5b4993228410ecadae35c22bd","jajanusz","2020-03-20 13:54:23","false","test: audio: remove kpb

KPB tests don't work and it's better to remove it,
than keeping here disabled code.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",67,22,0
"thesofproject/sof","f660b66067880821be22e4e2f43e0f5960502bee","Vamshigopal","2022-09-07 06:20:04","false","ghd: Fix build error for ghd

Size parameter is moved from
struct sof_ipc_reply to struct sof_ipc_cmd_hdr.
Added changes accordingly.

Signed-off-by: Vamshi Krishna Gopal <vamshi.krishna.gopal@intel.com>",105,51,1
"thesofproject/sof","39266cac81f4297f78d83cfc6996fcd37aec00c8","lyakh","2020-12-04 17:46:24","false","core: assure alignment is only done on power of 2 values

Alignment should always be done on powers of 2. Enforcing this
rule also allows the use of binary AND for alignment instead of
much slower division. Also add compile-time checks where possible.
At the moment no non-power-of-2 alignment cases are known in SOF,
but a complete verification is difficult, therefore we add
compile- and runtime checks, enabled by default for now. After a
period of time (one or two releases) this verification option can
be converted to an off by default configuration parameter.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",71,30,0
"thesofproject/sof","b8233ce791b6c68c46f25113deabbe783f2d7840","lyakh","2023-04-13 15:49:49","false","buffer: use an accessor to read struct audio_stream::free

This patch adds audio_stream_get_free() to read
struct audio_stream::free and converts all users. Apart from hiding
internals of the structure, it also enforces the use of the
__sparse_cache annotation.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",50,58,1
"thesofproject/sof","292395a503ed9c33f0dbe857cc5a2c5b3b731094","lyakh","2021-10-14 13:18:28","false","Revert ""schedule: add a core index for schedule_data""

This reverts commit a398e92f2ee8891264179abfe05b503c9368a97f.

Schedulers are per-core already, no need to further verify that.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",123,40,1
"thesofproject/sof","76544f5a133350c957acd68c70a160ad826658f5","jajanusz","2020-01-24 13:35:31","false","arch: xtensa: add waiti wakeup hook

On some platforms there is a need to perform tasks after
coming back from waiti.

There is no central interrupts processing function in SOF.
Every interrupt is registered separaterly, so we need to execute
'wake up' functions in xtos interrupts handlers.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",78,20,0
"thesofproject/sof","5e43688bb502012fea3f76df3254269dc130529c","lyakh","2022-08-18 07:46:13","false","dai-zephyr: rename a device pointer to ""dev""

Fix a confusion between device and driver.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",113,51,1
"thesofproject/sof","c3c7b331750ea682f051c33d5cb9df31a540d831","marc-hb","2023-04-10 23:31:19","false","xtensa-build-zephyr.py: change help for -d, just say it like it is

Make sure users do not misinterpret our single `debug_overlay.conf` file
as some kind of complex and elaborate ""debug build"" concept. Also save
users who want to see the file a lot of time by naming it directly in
the --help.

Empty layers of indirection are just spurious obfuscation.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",50,58,1
"thesofproject/sof","567ad2122ec297f20f5d632c6229b0b8b868f091","marc-hb","2022-09-27 07:24:12","false","topology1: prefix custom targets with their subdirectory name

This makes it possible to find stuff in the output of `ninja help`.

Zero effect on the build artefacts.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",97,52,1
"thesofproject/sof","a0743971c90a4a9f06deb949acaa318e3796ed80","marc-hb","2021-06-27 20:20:55","false","check patch: turn off printk warnings

Zephyr's printk does not work like Linuxs printk

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",75,37,0
"thesofproject/sof","ca6e3c3bff38214678045709515518a84ed08543","marc-hb","2021-07-12 06:11:05","false","zephyr: add smex_placeholder()

SMEX cannot do empty dictionaries.

This adds 8 bytes of .bss and 32 bytes of .text

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",87,37,0
"thesofproject/sof","85a91720307a3f6cc7cde5540191251959285874","teburd","2022-03-30 21:59:22","false","notifier: Use coherent memory allocation

The notifier struct contains a spin lock which was located in
incoherent memory. This caused an assert on startup when enabling the
build with CONFIG_ASSERT.

At the very least this fix enables building and running with
SPIN_VALIDATE and ASSERT which could help diagnosing issues such
as the panic_dump being garbled.

Signed-off-by: Tom Burdick <thomas.burdick@intel.com>",112,46,1
"thesofproject/sof","51aa896e7c0e80f43d72e5ba9f057cd2e7141403","marc-hb","2021-01-29 21:13:03","false","CODEOWNERS: /.github/ += @zrombel

As discussed in latest PR #3791

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",67,32,0
"thesofproject/sof","5a7a135f018a484f7aa2a208b4b80c6997c88517","marc-hb","2021-09-27 05:28:28","false","installer: add adl and adl-s links

ADL and ADL-S binaries share FW build configuration with TGL and TGL-H.

See also issue #3491 and commit 15e03fd29729 (""config: intel: use PCH
name for tigerlake"") and the corresponding review in PR #3451.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",119,40,0
"thesofproject/sof","bf4a65f2fa22776a479e467d6ed751ed85302446","lyakh","2021-04-29 15:49:13","false","zephyr: allow multicore builds

Lift the temporary restriction on Zephyr builds: re-enable
multi-core support.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",81,35,0
"thesofproject/sof","c2f035a73b3a1e3d88d00424f3817b773d34dbbb","emilchudzik","2019-02-05 14:25:49","false","ssp: remove unused loopback mode method

Signed-off-by: Emil Chudzik <emil.chudzik@intel.com>",56,8,0
"thesofproject/sof","d7c8ccc62537592362f1207554a1dcc3ca67c8f2","marc-hb","2021-03-30 17:55:00","false",".github/pull-request.yml: watch ""main"" branch instead of master

Will hopefully fix mysterious CI hangs.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",79,34,0
"thesofproject/sof","9300dbb789f48f40283398cc7b19f50a7f2a0196","lyakh","2022-04-07 10:22:59","false","mux: fix buffer acquisition

Instead of acquiring and releasing buffers locally multiple times,
do that once for .copy(), .reset() and .prepare() methods.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",114,46,1
"thesofproject/sof","28039d3024e2ee5752eae7c91cfe4120eaded3ac","lyakh","2019-01-09 09:44:41","false","logger: (cosmetic) fix the return value, use pointers

1. Programs shouldn't exit with negative return values, strictly
   speaking only EXIT_SUCCESS and EXIT_FAILURE should be used,
   however it is also valid to return 0 for success and any number
   from 1 to 125 for a failure.
2. Avoid passing complete structs as function parameters where an
   additional copy of one isn't needed, use const pointers instead.
3. Remove a left-over unused argument.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",56,7,0
"thesofproject/sof","2c4e29187d187cf5c335921c84ca62533389d1f8","lyakh","2022-03-11 13:54:18","false","cache: dai: always use accessors with shared data

Access to objects, defined with a SHARED_DATA attribute should only
be performed, using the platform_shared_get() function at run-time or
using cache_to_uncache_init() at initialisation time.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",114,45,1
"thesofproject/sof","143af6d83209024683760fbcf642147d3be1bb22","lyakh","2020-11-03 11:56:47","false","compile: add missing headers

using irq_local_enable() and irq_local_disable() requires including
interrupt.h

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",75,29,0
"thesofproject/sof","1af90b4ee1a68a58d7c950bfd09789c1356e8b56","lyakh","2019-02-11 15:01:56","false","interrupt: introduce a separate struct for cascading interrupts

Currently each interrupt descriptor has an array of list heads, that
can be used to cascade further interrupts to it. But most interrupts
are simple decide interrupts, that cannot have children. This patch
introduces a separate type for interrupt controllers, that can indeed
have children.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",59,8,0
"thesofproject/sof","dc8679aaca2be15e09fd4557452968812330c3d8","mrajwa","2019-07-29 21:13:48","false","kpb: update kpb_drain_samples() to support 24b samples

This patch updates function kpb_drain_samples() which
copies samples from history buffer to host buffer
to support 24b & 32b samples.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",51,14,0
"thesofproject/sof","cf185625d04ea7297ac6326e153e5e221571c8a0","mrajwa","2019-04-26 20:25:18","false","kpb: stop key phrase detection during draining

Once draining has been started we pause copy to
selector component which therefore also
blocks any consecutive key phrase detection.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",50,11,0
"thesofproject/sof","b2c637f2daf9a904eb1b2b7c785af6410d6d7c99","mrajwa","2019-07-29 20:28:38","false","kpb: add secure reset to draining task

This patch adds a check in draining task for reset
request. If it happened while we were draining then
draining task shall me carefully terminated.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",51,14,0
"thesofproject/sof","6a3526ec6881f5d56f484fe5a55a16fa68acd257","mrajwa","2019-04-09 11:22:19","false","KPB: update kpb reset function

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",48,10,0
"thesofproject/sof","de586a2147e97f215cb2fab45f06e80997c716ea","lgirdwood","2018-08-31 08:45:54","true","Merge pull request #283 from singalsu/fix_host_build_proposal

Host platform library: Fix compilation after git merge from next branch",28,3,0
"thesofproject/sof","968b0c719137806c4b5ee01422e0ee413dffb7ea","lgirdwood","2018-09-03 12:45:18","true","Merge pull request #200 from mwierzbix/unitTest-lib-rstrlen

test: lib/rstrlen: Added unit tests for lib/rstrlen.",30,3,0
"thesofproject/sof","629358cd18f490c0c554101038bf24f9588a51b1","lgirdwood","2018-10-04 13:27:38","true","Merge pull request #460 from tlauda/topic/smp-sys-alloc

alloc: change way of allocation core context for slave cores",34,4,0
"thesofproject/sof","f79d45c95e7fc8b79848193b802145f1d100c36d","lgirdwood","2018-09-20 15:03:06","true","Merge pull request #399 from tlauda/topic/idc_simplify_ppl_trigger

idc: simplify idc_pipeline_trigger",35,4,0
"thesofproject/sof","e2a5d925ba061a3f7a950708546e9cad7495c5d9","kv2019i","2022-08-11 13:24:48","false","probe-app: bail out if opening file fails

Do not blindly call fwrite without checking whether file open
succeeded or not.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",116,50,1
"thesofproject/sof","e2f66c65ab7052f3c596a12f92abcf9e6f67accd","kv2019i","2023-05-23 08:21:19","false","dai-zephyr: fix use-after-free in dai copy

The dd->local_buffer may be freed between calls to copy if
the peer module is unbound. This can only happen if the peer
module is on a different pipeline as runtime changes to
pipeline connections are not allowed while pipeline is active.
It is however allowed to connect the DAI to sink/sources
on another pipeline, so this scenario is still possible. This
issue only affects IPC4 builds using copier.

In current code, disconnection of local_buffer will lead
to heap corruption as dd->local_buffer is freed but DAI keeps
accessing the buffer in its copy calls.

Fix the issue by implementing an explicit DAI unbind and
setting dd->local_buffer to NULL in case the peer module is
disconnected.

This patch does not add support for dynamic reconfiguration
of the DAI to adjust converters and local_buffer to the new
connections. If capture DAI is set up with multiple sinks and
one of them is stopped, the DAI will stop processing data.

Link: https://github.com/thesofproject/sof/issues/7191
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",55,60,1
"thesofproject/sof","db6d9fc3bb14703bc397b02517e3b030d3472533","bkokoszx","2018-11-14 11:02:41","false","pipeline: remove tracing invalid pipe/comp ids

In functions pipeline_buffer_connect and pipeline_comp_connect
I have removed possibility to make log with pipe/comp ids, because
pipeline ptr in struct comp_dev is not initialize until
connect_upstream or connect_downstream invocation.

fixes #562

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",41,5,0
"thesofproject/sof","d24a70323841de988af17ea66ead1b383638f68b","bkokoszx","2020-02-24 22:52:46","false","comp: add dir arg to dai_get_hw_params function in comp_ops

Hardware stream parameters can be different for
PLAYBACK and CAPTURE direction. dai_get_hw_params()
should return parameters corretly depending on
the stream direction.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",77,21,0
"thesofproject/sof","77ecea1626565a02566df1d87674495e0f5c54d8","singalsu","2019-07-10 16:24:28","false","EQ IIR: Add HiFi3 optimized version

This patch adds for HiFi3 xt-xcc compilation for an intrinsics
optimized direct form-II transposed (df2t) filter core version
that executes faster than the generic C version.

Due to HiFi3 instruction set the delay lines are changed from Q3.61
to Q17.47 format. It causes differences in bit-exactness but no
practical audio quality difference to generic C version.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",43,13,0
"thesofproject/sof","59bc4a751b0fff6f961904c1222afab9693a2dd1","marcinszkudlinski","2023-09-11 09:43:38","false","DP: add calculation of EDF to DP scheduling

Earliest deadline first scheduling added, based on module
period

Detailed description in zephyr_dp_schedule.c

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",19,63,1
"thesofproject/sof","594853d3895adaa454ca4a8c808c175d84fa8a32","singalsu","2022-01-25 15:02:46","false","Tools: Testbench: Use in prepare() frame_fmt from stream

The file component new() sets function to s32. It's better to
initialize to default function that just errors if called.

The stream pointer is retrieved from buffer. There is no need to
apply twice list_first_item() function. The sample width is set
with get_sample_bytes(). The switch case for frame_fmt is changed
to use stream. It avoids an error to use 16 bit file write to
consume data from 32 bit buffer. This happens because ipc value is
from topology while stream format is from command line override. Only
the text file output becomes incorrect.

The comp_data struct contained unnecessary fields such as period_bytes,
frame_bytes, and frame_fmt.

The patch also contains some switch-case code cleanup for more compact
code and look.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",104,44,1
"thesofproject/sof","a639604dbb4aaa5f1d59682db50c403a1364ceec","singalsu","2023-02-16 17:14:12","false","Tools: Topology2: Change PGA widget curve_duration to 20 ms

The previous value 10 is only 0.1 us that disables the gain
ramp totally and causes harsh sounding volume transitions.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",53,56,1
"thesofproject/sof","405d48dbeaf7f5ff27fb37cb05558585a4c03264","singalsu","2023-09-25 15:26:23","false","Audio: Module adapter: Fix error message typo sinks -> sources

This patch fixes a confusing error message typo in module_adapter.c.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",20,64,1
"thesofproject/sof","5ef0713b7bb073f47c7ccfb2df01740924fcd910","singalsu","2019-04-16 14:41:23","false","TPLG: Rename a volume scale macro to avoid confusion

The macro in tlv.m4 defines a volume scale from -64 dB with 2 dB
steps for playback pipelines. Hence the name m90s3 is incorrect.
The new name m64s2 is a correct description of the defined volume
scale. It's useful since there's another volume scale defined for
capture pipelines.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",50,10,0
"thesofproject/sof","2841dc93c24a27cd98b55ad300376f58f9b7b6ce","singalsu","2022-10-19 07:43:58","false","[SKIP CI] Tools: Test: Audio: Fix standard low-pass help text

Fix a confusing mistake high-pass -> low_pass and typo. It's
only a user help text change for ""help stdlpf"".

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",98,53,1
"thesofproject/sof","e7adcf5bcaab282043e614d1499835f30d257c1e","bardliao","2020-09-14 00:14:03","false","topoplgy: add tgl rt715-rt711-rt1308 support

Add tgl rt715-rt711-rt1308 support. But keep the PCM order as
Headphone, Headset mic, Speakers, Microphones.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",65,27,0
"thesofproject/sof","01819425f95f7940061f11d1f975f62d265b8080","tlauda","2020-05-28 09:26:13","false","io: add additional variations of reg access functions

Adds additional variations of register access functions:
- 64 bit register write,
- 8 bit register read,
- 8 bit register write,
- 8 bit register update.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",96,24,0
"thesofproject/sof","2095ab0df7d676928f3973535fb801e99daa8c0f","tlauda","2020-01-14 12:38:18","false","dai: make dai_info and dai_type const

Makes dai_info and dai_type structures constant.
Pointer to dai array should not change during the lifetime of DSP.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",77,19,0
"thesofproject/sof","4c5409235ec4d19b0d4cd3a0c54e6666f986bc15","saisurya-ch","2023-10-17 10:09:51","false","rimage: config: add acp_6_3 toml file to support acp_6_3 build

Add acp_6_3 toml file to support sof-acp_6_3.ri binary build

Signed-off-by: SaiSurya Ch <saisurya.chakkaveeravenkatanaga@amd.com>",9,64,1
"thesofproject/sof","34c76fc78fcb2edd0842a8a8cf2ab3642b34ea26","tlauda","2019-07-12 11:25:21","false","math: cleanup includes

Cleanups includes in all math files.
Unused headers has been removed and needed
has beed added.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",43,13,0
"thesofproject/sof","6fa4e4c8aea879d613f400d72dae83075b4e8f66","tlauda","2019-10-15 11:40:26","false","topology: cavs: switch all pipelines to timer scheduling

Switches all pipelines for cAVS platforms to timer scheduling.
This way we limit the number of interrupt levels processed
in the system. Timer, IPC and IDC are already on level 2 and
DMAs are on level 5.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,16,0
"thesofproject/sof","c98a29da14e5f5590eb6bb150bc70fd5b4b990b3","ktrzcinx","2020-10-15 09:15:15","false","toml: Extract version parsing to separate function

This task is fully separatable from adsp_parse_config_fd(),
so should be done in separate function, to improve code readability.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",72,28,0
"thesofproject/sof","ccff986795b62964b92bfbdb152a38bde81170d9","ktrzcinx","2019-10-31 09:12:46","false","trace: Add pipeline id to src traces

It will be helpful during debugging components
to see correlated pipeline id.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",55,17,0
"thesofproject/sof","6f96d0f37eaac19baa87334b99e3f7ded0e3868e","bardliao","2023-04-21 01:58:14","false","topology2: rename NUM_SDW_AMPS to NUM_SDW_AMP_LINKS

NUM_SDW_AMPS refers to how many sdw links are used by the amp pcm.
Rename to NUM_SDW_AMP_LINKS for less confusing.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",54,59,1
"thesofproject/sof","d37107bdc36b30fdeca3d6f97273d49510c4d61e","balakishorepati","2022-07-07 16:03:15","false","drivers:amd: add support to change aclk

Add support to configure aclk based on active stream requests.

Signed-off-by: Balakishorepati <balaKishore.pati@amd.com>",109,49,1
"thesofproject/sof","f35132fed6c49f237755690bda479306dcdcbeb2","lyakh","2023-01-24 14:44:09","false","eq-fir: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register eq-fir with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","a85e06a380ed655a74556a6e763d6a67e93f3aa8","fuyuntsuo","2021-05-22 02:50:10","false","audio: igo_nr: added active channel selection

Use binary to configure active channel index.

Signed-off-by: fy.tsuo <fy.tsuo@intelli-go.com>",84,36,0
"thesofproject/sof","edf5866da7356e81c69434ad2ab94c1b8893ee8d","tmleman","2022-02-28 14:19:01","false","ipc4: setdx: prevent d0 when ppl are active

This patch prevent driver from requesting FW to enter D0 state when
there are still active pipelines.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",111,45,1
"thesofproject/sof","a5fd52ec43f3efe3bea3f3f3a6ee53b71022ad95","MingJenTai","2022-03-15 02:22:29","false","[RTNR] Fix buffer size calculation

The correct frame length should be calculated by
FRAME_LEN = SAMPLING_RATE * PERIODS / 1000000

The macro COMP_PERIOD_FRAMES does the thing.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>
Signed-off-by: Ming Jen Tai <mingjen_tai@realtek.com>",107,45,1
"thesofproject/sof","365658ca5e3de59b8dea54ba320890f70c821f65","abonislawski","2022-09-08 15:21:41","false","aria: LOG_MODULE_REGISTER for zephyr logging

This will fix build with zephyr logging enabled

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",105,51,1
"thesofproject/sof","85f5cec3641cffb8ccd7aa5d3b40c6545ae65c83","cujomalainey","2019-03-21 23:14:17","false","src: make init function static

Fixes checkpatch error that slipped in

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",66,10,0
"thesofproject/sof","16002080e028505c59db5be99fedac1423876bd5","ShriramShastry","2021-10-28 03:23:59","false","math: Add power scalar and base 2 log function

fix point math power function having negative and positive values
of base and exponent as function argument. power_int32() support
only integer base and exponential value and it does not support
fractional values for base and exponent.

fix point math base 2 logarithm function using a short lookup
tables

Signed-off-by: ShriramShastry <malladi.sastry@intel.com>",128,41,1
"thesofproject/sof","df48bfce777fff094c1257965c87c55c5b9ba0ad","jajanusz","2019-05-21 09:16:09","false","cmake: git hooks for non-unix os

Add support for non-unix systems that have bash shell.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",59,12,0
"thesofproject/sof","e13c42e56f33c319c29d3c86b2911d282c71cdb4","marc-hb","2022-12-22 18:54:35","false","README.md: add link to discord.com/zephyr#sof channel

add link to discord.com/zephyr#sof channel

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",92,55,1
"thesofproject/sof","4286bb3ee1860f4dc7efafac9679ec1f201d56e0","marc-hb","2023-04-24 22:37:59","false",".github/zephyr: west update with new, faster git --filter-tree:0

Twice faster than shallow clones without any of the git describe or
other hassle. More info in
https://github.com/zephyrproject-rtos/west/issues/638

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",54,59,1
"thesofproject/sof","367df306b63a9e4766b6ea9b0a8147c544615ee7","marc-hb","2022-10-11 23:22:38","false","sof_ri_info: minor BinReader logging fix to support pathlib

Switch to an f-string which automatically converts the argument to a
string.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",98,52,1
"thesofproject/sof","a5dfa5669e6695834176700af850be38ac755334","marc-hb","2023-01-25 01:35:21","false","xtensa-build-zephyr.py: checksum dsp_basefw.bin

When using --fw-naming AVS the .ri file is renamed to `dsp_basefw.bin`.

Also explain why it's still useful to identify non-deterministic images.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",53,56,1
"thesofproject/sof","6458f48471eb957836760ec29a89ede31e5828d8","marc-hb","2023-10-28 00:08:01","false","scripts/fuzz.sh: fix multiple issues with ""stub"" overlays

Fixes commit deed9a8808eb (""scripts: fuzz: add support for build and
overlays"")

The main issue was the way fuzz.sh was trying to parse the overlay
file. Drop that and just pass it as is to `west` and `cmake` instead,
they know what to do with it.

Also:

- Fix invalid syntax in stub_build_all_ipc4.conf
- Make fuzz.sh shellcheck-clean again. Always use shellcheck.
- Temporarily disable `CONFIG_COMP_SMART_AMP` in
  stub_build_all_ipc3.conf because `smart_amp.c` does not compile (in
  any configuration)

```
sof/src/audio/smart_amp/smart_amp.c:748:9: error:
   no member named 'in_channels' in 'struct smart_amp_data'
   sad->in_channels = audio_stream_get_channels(&source_buffer->stream);
```

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",6,65,1
"thesofproject/sof","23fc4e5bc9947a63d75e41512ac707faf02484fe","lyakh","2021-04-30 10:14:12","false","cavs: (cosmetic) add a comment to clarify function scope

Clarify, that platform_init() only runs on the primary core.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",82,35,0
"thesofproject/sof","d9895174eb8e877cfc57cdaee64bb018283d747f","lyakh","2019-09-06 13:25:39","false","ll-schedule: remove ""inline"" and redundant initialisations

There is usually no need in explicit ""inline"" qualifiers in C, in
most cases the compiler does a good job deciding which functions to
inline. Also remove a redundant variable and simplify a function.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",60,15,0
"thesofproject/sof","e112e0bc0f885e4398fa09f1b14616cf44e6b142","Vamshigopal","2021-05-11 05:11:08","false","topology: sof-tgl-sdw-max98373-rt5682: add support for ADL

For speakers SDW2 link is used.
For Headset SDW0 link is used.
add sof-adl-sdw-max98373-rt5682 topology

Signed-off-by: Vamshi Krishna <vamshi.krishna.gopal@intel.com>",82,35,0
"thesofproject/sof","23f009f830539bad011e5060802f148096b626ea","wenliangwu","2023-07-12 03:46:41","false","buffer: fix DSP panic caused by buffer_attach

When using buffer_attach() on MediaTek platform after commit 3e3d0cde,
invalidating the dcache of a list can result in DSP panic.

To make sure that cached and uncached access is performed correctly on
Intel DSP implementations, invalidating the cache is necessary only for
INTEL platform. Therefore, adding #if CONFIG_INTEL to make the line
specific to INTEL platform.

Signed-off-by: Trevor Wu <trevor.wu@mediatek.com>",31,61,1
"thesofproject/sof","d8ed34b1d19f81f1ad8147af4e33e4e670d65563","lyakh","2021-08-27 12:53:49","false","component: (cosmetic) simplify a function by consolidating code

comp_set_state() always sets the component state to requested
state, which is calculated at the top of the function. Re-use the
variable instead of hard-coding each value again. Also return
immediately in case of errors, which eliminates the need for the
return code variable.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",119,39,0
"thesofproject/sof","367fa7cec5fbafa0b929337903837febcb016cf7","lyakh","2021-05-19 12:27:28","false","zephyr: clean up timer-domain left-overs, fix task cancellation

- Replace several further ""timer"" name domain left-overs with zephyr
  domain counterparts
- Remove useless ""inline"" specifier, the compiler will decide itself
- Remove the unused struct zephyr_domain::arg member
- Add delayable work cancellation when cancelling a task

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",86,35,0
"thesofproject/sof","2cbca2f20e3ab5ddf2283d08a52b7cbdf5f2a749","marc-hb","2022-01-28 18:38:59","false","Use typeof() to make ASSUME_ALIGNED() type safe

Use gcc typeof() to cast the output of ASSUME_ALIGNED() back into the
type of its argument. This lets the compiler report type mismatches.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",102,44,1
"thesofproject/sof","83ff81984a7a446b779141e2f7845932cecb94b5","yongzhi1","2023-05-30 18:11:19","false","topology2: deepbuffer-playback: increase default buffer_size_max

buffer_size_max of PCM cap for deepbuf is configured for 65536.
Quadruple the buffer_size/period_size to allow aplay to use larger
buffer size.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",46,60,1
"thesofproject/sof","e1a757bd19bc8118d0e06cc083b4eb8ce888a453","cujomalainey","2019-03-21 23:14:58","false","tone: make init function static

Fixes checkpatch error that slipped in

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",66,10,0
"thesofproject/sof","789a286aceeee880f4bb6211e95d9b7c79c11151","iuliana-prodan","2021-02-01 17:58:22","false","platform: imx: use DMA_DOMAIN in full synchronous mode

Use the full_sync attribute from dma_domain to schedule
tasks based on period ratio between the registrable
task and the current one.
Do not make it time dependent anymore.

Fixes: #3802

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",68,32,0
"thesofproject/sof","1754bf97ec1fea02668629cfe916a7f2474c5d72","iuliana-prodan","2023-04-08 21:23:33","false","imx: sai: enable transmitter to output MCLK

On i.MX8MP, the SAI MCLK is bound with TX enable bit.
Therefore, in order to enable MCLK, we need to enable
the transmitter.

This fixes a ""wm8962 2-001a: DC servo timed out"" -
a Linux Kernel error with wm8962 codec.

Signed-off-by: Laurentiu Mihalcea <laurentiu.mihalcea@nxp.com>
Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",50,58,1
"thesofproject/sof","2ac6e7af282da5ca83e7f6003a0d4c794b1d183f","iuliana-prodan","2021-08-10 14:04:25","false","imx: select COMPILER_WORKAROUND_CACHE_ATTR

To avoid buggy compiler optimization,
select COMPILER_WORKAROUND_CACHE_ATTR for all i.MX
platforms.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",117,38,0
"thesofproject/sof","12b056600dee5f8de4565159355011ee58488b59","rfredzim","2022-04-22 13:42:51","false","ipc4: update ipc_cmd_hdr to fit largest ABI header

The ipc_cmd_hdr should have size no lesser that largest
of the headers amongst all ipc protocol versions.
The use of smaller type for ipc_cmd_header is unsafe because
of casting pointers between differently sized headers followed by
accessing data through incremented pointer.

Signed-off-by: Rafal Redzimski <rafal.f.redzimski@intel.com>",114,47,1
"thesofproject/sof","a0e55830a0c56958857f99326418345629bab7e8","rfredzim","2022-03-21 11:41:51","false","idc: modify idc payload size and align to cache line size

Modify IDC payload size to be cache aligned and have size of 2 cache
lines.

Signed-off-by: Rafal Redzimski <rafal.f.redzimski@intel.com>
Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",109,46,1
"thesofproject/sof","b50afe03cdb8a5514040d1673312a0ab5c27547a","brentlu","2021-08-17 08:48:53","false","topology: sof-tgl-max98357a-rt5682: add support for max98360a

Add support for max98360a running on ADL boards. We choose SSP1 for
speaker amplifier for BT offload compatibility. Also increase the
sample depth to 32 bits for more dynamic range and avoid using m/n
counter.

We add the flag SSP_CC_BCLK_ES to SSP0 for the compatibility with
CS42L42 in the future.

Signed-off-by: Brent Lu <brent.lu@intel.com>",118,39,0
"thesofproject/sof","afaad99125cdb6b8a34ec8d4c2829a2088ea0ccc","kv2019i","2022-01-04 13:02:42","false","coredump-reader: do not hardcode reset vector address

The gdb script created by coredump-reader has a fixed reset
vector address. This address only works on a subset of supported
SOF platforms and for other platforms, user has to manually fix
the reset address in the gdb script before use.

Modify the script to emit breakpoint for ""_MemErrorVector""
symbol. This is not the reset vector, but the simulation will
still be trapped early. The symbol is part of the firmware
binary, so its address can be looked up at runtime.

Also add a second breakpoint for ""_MemoryExceptionVector_text_start"".
This will cover SOF binaries built with Zephyr as the RTOS.

BugLink: https://github.com/thesofproject/sof/issues/5125
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",115,43,1
"thesofproject/sof","7d5c3238e33d97ca2d1a0de0ea0843578c1a6749","kv2019i","2023-03-21 17:52:38","false","west.yml: upgrade zephyr to e40859f7

Total of 1128 commits, including following related to
dma-dw/intel_adsp/sparse/dmic/xtensa:

e40859f78712 Revert ""dma: dw: Do not program SAR/DAR and CTL_HI/LO when using HW LLI""
7a85983ebcf2 xtensa: remove ELF section address rewriting
b32b321f502a dma: dw: Poll to check for channel disable with timeout
6226f9e6e44f dma: dw: fix the return value check
08d9efb202cc dma: dw: Do not program SAR/DAR and CTL_HI/LO when using HW LLI
045c68673491 dma: dw: Add a debug utility function
bd705e68b048 soc: xtensa: esp32: increase shared memory region
9854c915ffdf intel_adsp: cpu init refactor
9d5c21d58003 dts: xtensa: nxp: remove unused include
68c1cafb411e intel_adsp: dts: ace: lower case 71C00 to fix DTC warning
a8c0123d3c54 intel_adsp: cmake: add_custom_command(.mod) to fix incremental build
b00c63e7640c footprint: ci: Remove audio SOF samples
1efaa94bc64b drivers: audio: dmic_nrfx_pdm: drop -pin support
8ef2cd20d90a Drivers: DAI: Intel: DMIC: Shorten unmute ramp time
eead89e7f22d soc: intel_adsp: cavstool.py: simplify asyncio.run() call
cdae0bb7596e boards: intel_adsp_ace15_mtpm uses xcc-clang toolchain for twister

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",57,58,1
"thesofproject/sof","1b233f68bdee6de24b0447917d8d44c98970efce","balakishorepati","2022-05-09 15:45:52","false","config: add rmb toml file to support rembrandt build

Add rmb toml file to support sof-rmb.ri binary build

Signed-off-by: Balakishorepati <balaKishore.pati@amd.com>",112,47,1
"thesofproject/sof","27c1edcaf5aa981b7aadaba08bdf8bcf92736e53","jajanusz","2019-10-10 11:33:05","false","cannonlake: shim: clock status registers

Add registers for checking clock status.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",61,16,0
"thesofproject/sof","96a544e64036ee6de4db1ccd87df664f62982a9c","tlauda","2019-06-12 10:09:38","false","boot_loader: remove deprecated comment

Removes deprecated comment from boot_loader.
Memory window is enabled by ROM even before
FW is loaded, so there is no need for usage
of additional registers.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",49,12,0
"thesofproject/sof","802543221778fde98c217a093bb76fc877c87fb6","tlauda","2019-08-01 13:43:36","false","schedule: writeback and invalidate tasks

Adds cache operations in task init and schedule functions.
It allows to put tasks' private data in cached memory, which
will be needed in the near future with new EDF implementation.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",53,14,0
"thesofproject/sof","ddd3736634053524c4136058554fb034cf7720c3","caseorum","2020-12-01 20:12:49","false","ipc: Use DMA attribute for min. ptable copy size

This rounds up the page table DMA transfer size to DMA_ATTR_COPY_ALIGNMENT
instead of a hard-coded 4 bytes.

Signed-off-by: Joseph Burt <caseorum@gmail.com>",75,30,0
"thesofproject/sof","e7d7ca0ca09958dcaead38c7106a8a33430890d1","tlauda","2019-06-13 12:54:13","false","host: make host_buffer call a part of set_attribute

Changes host_buffer component ops to be a subtype of
component set_attribute ops. This change allows to
unify host implementation across different types
of DMA.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",48,12,0
"thesofproject/sof","5bf0890f621e612fdc84cfee40da82cda90b311f","tlauda","2019-06-13 12:59:59","false","host: remove period_bytes from host_data

Removes period_bytes field from host_data struct.
This field is only used in host_params, so we
don't need it globally.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",48,12,0
"thesofproject/sof","7b8eec9f4faa59758f0864c7afac483455e92f16","bardliao","2020-07-23 02:23:20","false","topology: add tgl-rt711-rt1316-rt714 support

tgl-rt711-rt1316-rt714 is almost the same as tgl-rt711-rt1308-rt715 and
can use the same topology file.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",77,26,0
"thesofproject/sof","84ecf46a907812c35dcb146ccbc90e325cf80fa4","singalsu","2022-11-17 13:48:30","false","Audio: Simplify volume ramp functions

This patch saves about 15% of processing time or about 0.9 MCPS
during volume ramp.

The volume_ramp() functions are inlined to volume_process() function.
The other use of function in idle is replaced by volume_ramp_check().

In ramp calculation the division in ramp time calculation is
converted to faster multiplication with inverse of sample rate.

The unnecessary checks for vol greater than vol_max or vol_min are
eliminated by ensuring that tvolume[] is limited to vol_min and vol_max.

The clear of ramp_coef[] at ramp finish is unnecessary. It's
internal for linear ramp and is not used by the other ramp type.

The other optimization is to pass to ramp math functions struct
vol_data pointer instead of processing_module pointer to direct
access to needed state variables.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",97,53,1
"thesofproject/sof","1ad7503299d96148606ee9abe7e1fc2d154080a4","singalsu","2020-09-08 16:44:25","false","Tools: Testbench: Add TDFB component UUID information

This patch adds the needed information to testbench to load the
TDFB component.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",66,27,0
"thesofproject/sof","0324516ec35d46a1b92b54137e97e917e1114b8c","singalsu","2019-10-18 12:04:14","false","Testbench: SRC: Relax gain test tolerance

Gain of SRC varies by 1 dB due built-in attenuation in the filter
coefficients. It was added to avoid signal overshoots to distort
with some challenging music content. When a converter consists of
two filters in series the attenuation duplicates. While SRC is
missing the gain compensation the test criteria needs to be relaxed.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",60,17,0
"thesofproject/sof","3bb7cbaabc82db78a93dec54c9feb492c89bce90","singalsu","2021-11-10 09:12:03","false","Audio: Mixer: Optimize sources and sink buffers access

This patch replaces the usage of audio_stream_read/write_frag_sXX()
usage with block processing based on audio_stream_bytes_without_wrap().

There are no processing related changes.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",127,41,1
"thesofproject/sof","5c02bbc2830fe74587afc680f78ae4f89ca1fcd1","ktrzcinx","2020-12-15 15:52:50","false","ext_man: cavs: Always include EXT_MAN_CAVS_CONFIG_LPRO element to manifest

This value should be included to output image with proper value instead
of including only for some configurations. It will reduce dictionary
element counting complexity.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",73,30,0
"thesofproject/sof","9f3f2d7d714908c1f8f3f77baebe9175682f02bc","ktrzcinx","2020-05-13 14:03:34","false","headers: Use full path to header

Path added to include should end at 'include' as usual, then
it is easy to see where specific headers comes from during reading
source code. It is especially important for projects composed from
a few parts, like firmware, driver, build and debug tools in this
project.
Moreover changed """" to <> in include directives because there is
specified full path to file from project include root and to be
aligned with code style from firmware repository,

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",96,23,0
"thesofproject/sof","60b737a7a114484f1fd107b608484d0a77b9f38d","ktrzcinx","2020-07-17 10:35:48","false","sof: Calculate source code hash

It may be used to check FW compatibility with ldc file.
It's much better than comparing DBG_ABI because logs content
may be updated without any DBG_ABI change in opposite to source
code hash value.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",80,26,0
"thesofproject/sof","3a210884447575013b51d06fbfcfaee0b9ba67b9","ktrzcinx","2020-08-27 07:59:24","false","cmake: Rephrase message about git absence during source hash computing

This message shoulddn't be in imperative mode, to follow rules.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",74,27,0
"thesofproject/sof","570622b9b9eb731c588e159242075d57239eb82d","ranj063","2023-05-02 02:59:01","false","copier: Add dai_get_hw_params op

In preparation to remove the DAI device creation for DAI copiers, add
the dai_get_hw_params op and expose dai_zephyr_get_hw_params() for both
dai-zephyr and dai-legacy.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,59,1
"thesofproject/sof","4b58987825a65ecc167b780ebd201a4df63dcf02","ranj063","2023-08-04 23:07:08","false","kernel: tokens: Update tokens for IPC4

Update the tokens needed for IPC4 topologies.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",29,62,1
"thesofproject/sof","d8d79fba9da568c9606a13264f6bf2ee230f4aea","ranj063","2022-01-07 22:22:09","false","codec_adapter: rename codec_config to module_config

Rename struct codec_config to struct module_config. No functional
change.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","efe51fa90a982494b2986336051be1c2e35c744c","RanderWang","2022-11-10 01:53:52","false","ipc4: dai: use llp info to update llp slot in memory window

Don't query llp slot offset in each update function
and get it from llp info.

Signed-off-by: Rander Wang <rander.wang@intel.com>",93,53,1
"thesofproject/sof","79a9c873f80d8a654644189927e6a6cb5cab343f","RanderWang","2022-02-09 07:46:45","false","ipc4: dai: initialized dma position in dai_config

The dma position is only used by ipc4 and host
requires it is initialized when the copier module
is initialized.

Signed-off-by: Rander Wang <rander.wang@intel.com>",108,44,1
"thesofproject/sof","bfa4af45abb916d92aa95ecb0baf1afcee400591","softwarecki","2022-06-15 12:06:01","false","ipc4: Aligned names of fields in ipc4_peak_volume_regs structure

Changed names of peak_meter_, current_volume_ and target_volume_
fields in the ipc4_peak_volume_regs structure to comply with the
convention used in the project - deleted postfix _.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",119,48,1
"thesofproject/sof","5b63f446d2e246a798738d708388ebc53414f573","dbaluta","2022-10-04 15:46:03","false","topology1: Add topology with wm8960/cs42888 for imx8qxp/imx8qm

This topology is used for i.MX8QXP/i.MX8QM with baseboard
to enable both cs42888 and wm8960 codecs.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",96,52,1
"thesofproject/sof","bf397bf9c238eed93f00f8ce54754c229ce97bb0","softwarecki","2023-05-08 14:20:09","false","dmic: Use the correct 24 bit conversion function

The DMIC interface places 24-bit samples on the most significant bits of
a 32-bit container. The correct conversion function for this gateway was
used.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",53,59,1
"thesofproject/sof","57d121238fdfbd2424cf0e86785bb7ee970bf458","plbossart","2021-02-09 19:45:59","false","topology: sof-smart-amplifier: fix error message

Confusion between input and output, and PCM name and pipeline ID.

Copy/paste likely here.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",71,32,0
"thesofproject/sof","c7adc3dae6a4cd613ee9d3eb34ece5cab2c94abc","ranj063","2018-07-23 22:40:23","false","topology: fix BE DAI id to be set to ID (not index)

Previously it was set to be the dai index which works if there's
only one type of BE DAI's.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",13,2,0
"thesofproject/sof","4d6e6a60c2c23d089ba0004b8e9bf1de8ccb0840","abonislawski","2018-11-19 12:27:35","false","Log messages extension for trace_*() calls

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",40,6,0
"thesofproject/sof","14d173b4ae646ff252653d989a06bb9dddd6a397","RanderWang","2022-10-25 08:40:58","false","ipc4: fix fw panic in d0i3 test

pm_runtime_get | put can't be called by ipc
msg directly. According to ipc3 implementation,
pm_runtime_enable | disable are fit for d0i3 msg.

Signed-off-by: Rander Wang <rander.wang@intel.com>",95,53,1
"thesofproject/sof","57874da1c5b3020173fe43b99abec77fd8f93f33","RanderWang","2023-01-10 08:42:03","false","ipc4: google: add ipc4 support for AEC

Add ipc4 config support and hw_params setting

Signed-off-by: Rander Wang <rander.wang@intel.com>",54,55,1
"thesofproject/sof","c1444e994389a83b4ae776685d8a9ee2191e61d1","pblaszko","2022-11-18 20:52:08","false","ipc4: add core_id field in create_pipeline msg

Add core_id field into create_pipeline structure.

In multicore LL pipeline scenario, all pipeline and module data should
be allocated and accessed only by target core.

Current IPC4 create_pipeline IPC does not contain information about
target core. It is required to properly allocate pipeline.

Signed-off-by: Przemyslaw Blaszkowski <przemyslaw.blaszkowski@intel.com>",96,54,1
"thesofproject/sof","1c02611612cd696e78fe417497a93c7f97219995","lrgirdwo","2019-02-01 08:57:10","false","scripst: copy more tools and scripts to target.

Some tools and tests not added until their name prefix is fixed to sof-

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",59,8,0
"thesofproject/sof","0cb4457cad134ed9e1caa197d3d6872d2c5e9187","jajanusz","2019-01-30 06:53:06","false","rimage: use time_t for localtime

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",56,8,0
"thesofproject/sof","a292d45ba1b61664046209d2500978402a9b9e44","lbetlej","2018-07-24 21:12:06","true","Power gate DSP SRAM banks for D0->D3 flow (#135)

Power gate DSP SRAM banks for D0->D3 flow from locked L1$. No DSP context is
preserved. On D0->D3 Driver reinitializes DSP HW.

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",12,2,0
"thesofproject/sof","9b16cb4faf67550cd12149f5cd825dbf6b6564fc","lrgirdwo","2020-06-09 13:05:53","false","zephyr: cavs: disable memory PM for secondary cores.

Zephyr has it's own memory map for secondary cores. Memory
PM isn't implemented on them yet.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",73,24,0
"thesofproject/sof","e0c745bdd55e7cb799681cf066d4ec13e2ad3d50","keyonjie","2020-11-26 10:22:06","false","fft: add initial fft library

Adds initial Fast Fourier Transform library version, now the maximum
supported window size is 1024, only the window size of the power of 2
and samples in Q1.31 format is supported.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",78,30,0
"thesofproject/sof","f5aa594e488d3207e0577378dab83e343ae9756a","keyonjie","2020-11-19 02:47:51","false","ssp: mn: search from index 0 to get a proper one mclk source

The ssp.freq is arranged in ascending sequence, to get the smallest
matched clock, we should search from index 0.

We should not stop the searching if 'mclk < ssp.freq', continue the
searching until we get a larger/proper one or fail if all the items
are iterated.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",74,30,0
"thesofproject/sof","7df367451d0fa638b530c1c92f02d645845dbe53","keyonjie","2021-08-13 05:45:39","false","trace: enable trace after it is ready

If the log tracing (e.g. tr_err()) is called before the trace itself is
available, the FW will crash and FW boot fail happen.

Enable the trace after it is ready, and don't try to perform tracing
when it is unavailable.

We have the empty version of trace_init/on(), so the extra ""#ifdef"" in
primary_core_init() is superfluous.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",116,38,0
"thesofproject/sof","dbd0ab3493c5fc6d04494ed1f9e8e03eb69fd1c5","plbossart","2022-03-16 00:08:23","false","topology2: cavs: remove mixout-gain-playback

there's already a gain in mixout-playback, and mixout-gain-playback is
not used anywhere.

let's reduce the options

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",107,45,1
"thesofproject/sof","9a9fa5d6fbdcd61582761acf2d17aedd332254f9","btian1","2023-10-17 06:24:24","false","audio: eq_iir: move iir header file to its own directory

move header file from include path to its directory path.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",9,64,1
"thesofproject/sof","2cad1764e4c6ef2ca3b498e67acb787d3170d886","joechengxperi","2022-05-11 06:14:32","false","topology1:renoir:add DTS topology

Add topology pipe-dts-codec-playback to support Renoir platform

Signed-off-by: Joe.Cheng <joe.cheng@xperi.com>",113,47,1
"thesofproject/sof","9b2b031da7d9e7a7cc040c800a0cbc56588046cd","slawblauciak","2020-04-27 12:51:02","false","topology: fix pipeline parameters mismatched with hardware configuration

The stream parameters set in the pipeline were mismatched with
the DMIC hardware configuration, which resulted in failures.

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",92,23,0
"thesofproject/sof","b363b3ab169cf494b32b1f0206d2951b1e4cfc94","dbaluta","2020-04-16 18:51:39","false","drivers: imx: Fix free/avail bytes in sdma_get_data_size

When the direction is DMA_DIR_MEM_TO_DEV it means that
we just got rid of some bytes so *free must be reported.

When the direction is DMA_DIR_DEV_TO_MEM it means that
we just received some bytes so *avail must be reported.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",82,22,0
"thesofproject/sof","df5576872fb61aacb77c9876ca931fa1c3bcc8e4","ujfalusi","2023-07-17 10:01:59","false","board: intel_adsp_cavs25: Disable DTRACE

DTRACE is IPC3 only, it is not used anymore.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",32,62,1
"thesofproject/sof","ba6ba3cfc6e835df704e83867ccf68d7e64f72cb","dbaluta","2021-04-13 17:25:54","false","audio: codec_adapter: Make sure local_buff has enough room for processing

We need to make sure that the local buffer has enough room to hold
the output of the processing.

This means that for each type of decoding algorithm we need to know
the maximum possible output size and skip processing if local buffer
size is less than that.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",81,34,0
"thesofproject/sof","43cebe0cb0a64b9fc28b4c2e8bf4552b073a4082","lrgirdwo","2018-09-28 15:00:09","false","sue: clocks: Add clock config for suecreek.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",37,4,0
"thesofproject/sof","52bc39fe73f96c072d41abef510b7c239a8d395c","dbaluta","2021-07-22 13:32:32","false","topology: i.MX: Add topology to demonstrate EQ component

This enables EQ component with IIR filter for i.MX8QM/i.MX8QXP/i.MX8MP
with wm8960 codec.

Users can try various configurations for EQ parameters using sof-ctl tool:

$  amixer -Dhw:1 controls | grep EQ
numid=44,iface=MIXER,name='EQIIR1.0 eqiir_coef_1'

$ ./sof-ctl -Dhw:1 -n 44 -s sof/tools/ctl/eq_iir_bassboost.txt

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",96,38,0
"thesofproject/sof","9bba34caf6ead68b0f298ed496beb79d473e62dd","btian1","2023-06-13 08:06:25","false","copier: convert unbind to module interface

Convert copier unbind to module interface.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",45,60,1
"thesofproject/sof","99283263aa6422cc8b327b1e89a3d99289b117c6","btian1","2023-05-16 06:19:24","false","copier: public functions that will be used in later modules

This is preparation work for split copier to separate host, dai,
ipcgtw, some functions need be public for different module usage,
so public it first for later usage.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",51,59,1
"thesofproject/sof","64c537d893ddbb7c612d73b9d431297cf228caf2","ujfalusi","2023-08-18 06:51:13","false","lib_manager: Add missing _sparse_force in lib_manager_store_library() error case

The fix for the memory leak missed the _sparse_force, causing sparse
warning.

Fixes: 11b9ce23f770 (""lib-manager: Free up memory for the library in case of a store error"")
Reported-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>
Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",25,63,1
"thesofproject/sof","1411dd6607dcc6b79da0a02ca75973d7d9a3001a","ujfalusi","2023-07-17 10:02:09","false","board: intel_adsp_cavs25_tglh: Disable DTRACE

DTRACE is IPC3 only, it is not used anymore.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",32,62,1
"thesofproject/sof","174514834345f39cf95c4c53c4e8b6cff0cbecef","ujfalusi","2021-10-15 06:19:59","false","dma-trace: Cancel the dtrace task before stopping the channel in reconfig

We should stop the task before the dtrace channel is stopped when we
need to re-configure it.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",123,40,1
"thesofproject/sof","e11673258c200fd3f996bbff19a20705a69152bb","ujfalusi","2021-10-15 06:23:43","false","dma-trace: Fix memory leak with buffer allocation on dtrace re-config

Do not attempt to allocate the dtrace buffer again if it has been already
allocated.
This only possible if we are re-configuring the dtrace which implies that
we also must have the DMA channel.

In such case, skip the allocation and do a re-init of the buffer after the
DMA channel has been stopped.

Reported-by: Keyon Jie <yang.jie@linux.intel.com>
Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",123,40,1
"thesofproject/sof","c9343dd4f1ce260f3f6a74334cd59a02db0e3f38","ujfalusi","2023-03-03 07:04:12","false","ipc4: copier: Clarify the log and return value when the dai_copier is not found

We are always returning 0 if the dai_copier is not found and never an error
code. Make it clear by returning 0.

With that out of the way, it is clear that this is not an error, it is
something which can happen.
Firmware log is a proof of that since it is flooded with
<err> copier: comp:X 0xSOMEHEX failed to find dai comp or sink pipeline not running.

prints. Drop the log level to info and add a comment as explanation.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",60,57,1
"thesofproject/sof","9c3452330d73dab7c5dd90ab038b25b0a0d87108","ujfalusi","2022-02-17 12:27:21","false","dma-trace: Fix memory leak of host elem_array on reconfiguration

When the dtrace is disabled (via the SOF_IPC_TRACE_DMA_FREE IPC message) we
need to also free up the allocated dma_sg_elem_array to avoid leaking
memory on the next dtrace start.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",105,44,1
"thesofproject/sof","3a17cde8fc73d447d252f75747671692322ccf29","ujfalusi","2023-07-25 09:49:43","false","board: intel_adsp_cavs25_tglh: Enable support for library loading

Add the needed config options to enable the library loading support.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",34,62,1
"thesofproject/sof","101364dc28bd844bded492a4628c42327f6620c8","akloniex","2020-04-02 21:47:49","false","audio stream: Replace old API usage in clients with new one.

Some components used stream.free/avail fields directly. With introduction
of audio_stream_get_free/avail getter functions, such usage should be
removed.

Signed-off-by: Artur Kloniecki <arturx.kloniecki@linux.intel.com>",77,22,0
"thesofproject/sof","8a7ed10cab8b1cf11ecb14ba884c27ef6998117f","akloniex","2018-11-08 17:42:07","false","Lower size of .text section

Removed 5 parameter trace_event macro implementation.
Removed inline
specifier from __panic function definition.
I've observed, that recent growth of .text section size was caused
by 2 major factors: 2 instances of inlined __panic function
yielding 1.7kB and recent addition of 5 param trace_event
yeilding 0.5kB of used .text. section space.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",41,5,0
"thesofproject/sof","3f86cab70f45d2aa66cf21099868a8a3f520b150","marc-hb","2022-05-07 06:13:28","false","zephyr/docker-build.sh: make failure to symlink the SDK not fatal

When running interactively the symlink may already be there.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",115,47,1
"thesofproject/sof","ab421466aff826215a09255485d8552525097b55","xiulipan","2020-04-17 05:59:12","false","CI: Travis: enable host testbnech again

After fix the host-testbench.sh issues, re-enable the testbench
test in Travis.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",82,22,0
"thesofproject/sof","155e609ed543ec2f9f04be08ae11b6f377f9f2f1","plbossart","2021-02-11 19:13:23","false","topology: sof-tgl-sdw-max98373-rt5682.m4: fix inclusion

Macro needs to be declared before being used

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",72,32,0
"thesofproject/sof","1b934e9d6cfcbdcd7f469d8567e8a7edf21b8bb5","lyakh","2023-02-22 09:59:43","false","IDC: set IDC task priority equal to that of the IPC task

One of the functions of the IDC thread is to execute IPCs on
secondary cores, those have to be executed with the same priority as
when they're run on the primary core, i.e. with the priority of the
IPC thread. Set IDC thread priority equal to the IPC thread.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",57,57,1
"thesofproject/sof","bed0b9f865aee8f70c0eca8eb7c9e3cb053165f8","lyakh","2019-02-26 17:28:33","false","cavs: optimise the interrupt handler

Instead of checking one bit at a time, use ffs() to only handle set
bits in the interrupt status. Also fix the unhandled interrupt
detection logic: complain only if no handler has been found for a
given interrupt.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",68,9,0
"thesofproject/sof","4722cf9314e21bf9c58aebf8e7348e52bff07383","lyakh","2020-03-10 14:12:30","false","topology: remove an unused parameter from dai.m4

The N_DAI_OUT and N_DAI_IN pacros, defined in dai.m4, don't take
parameters, fix their usage.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",84,21,0
"thesofproject/sof","706383854206d1830d8634f53d1074a300330fa2","lyakh","2019-01-15 08:41:34","false","trace: disable DMA tracing on Sue Creek

On Sue Creek tracing is performed over a UART, since no direct DMA
connection to the host is available. Disable DMA tracing on that
platform.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",54,7,0
"thesofproject/sof","6578f5264c4a1e5e88c9de0a765d1704cc10fe22","lyakh","2021-08-04 14:28:22","false","ssp: move initialisation delay to .get_init_delay()

Implement BCLK initialisation delay using the .get_init_delay()
operation.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",113,38,0
"thesofproject/sof","efeb41a8cf65a3c4682617c1646fe484bb565704","lyakh","2019-01-15 15:08:28","false","sue: enable the SPI slave controller

Add platform data and initialisation for the SPI slave controller on
Sue Creek.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",54,7,0
"thesofproject/sof","9ac38d882883de79c96e8070a952c5642834aac3","lyakh","2021-02-01 13:26:51","false","zephyr: fix regression: add platform_timer_get_atomic()

Recently added platform_timer_get_atomic() has to be
implemented for Zephyr too.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",68,32,0
"thesofproject/sof","123081c34f1696806f17277c94947ffbc8cde5b9","marc-hb","2020-07-06 17:26:48","false","xtensa-build-all.sh: log the main cmake and defconfig commands

The main build script has a fairly verbose output by default but not the
most important things it does yet. These commands are useful to ""peel""
the layer of indirection and debug cmake issues; either locally or when
wondering what CI does.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",73,25,0
"thesofproject/sof","35e588080d9c24c543a42397a7d0dec1cde087a2","marc-hb","2022-04-07 22:40:04","false","xtensa-build-zephyr.py: add #pylint:disable=W0312,C0103,C0116

This reduces the number of warnings from about 600 to a more manageable
350.

Disable W0312 because the entire file uses tabs.
Disable C0103 because we have higher priority than naming conventions.
Disable C0116 because the script is small enough, shouldn't require
              pydoc everywhere.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",114,46,1
"thesofproject/sof","b2b4abffb38f51553be347af04b429e3f9ed1657","marc-hb","2020-04-08 05:54:02","false","kpb: fix broken doxygen link to kpbm-state-diagram

As reported by PR #2741:

sof/src/include/sof/audio/kpb.h:46: warning: explicit link request to 'kpbm' could not be resolved

Fixes: 36d4c9f8f635 (""kpb: add new state"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",83,22,0
"thesofproject/sof","a4ece86d4d4d13e072bce325dc3a0f9a55d75cf3","marc-hb","2023-04-26 23:10:17","false","xtensa-build-zephyr.py: drop intermediate build-$platf/sof-$platf.ri

Remove one intermediate and unnecessary .ri file. Simplify the code and
the build directory. Example below with `sof-mtl.ri` for better
readability but this applies the same to `sof-imx8.ri` and every other
`sof-$platf.ri` file.

There were 3 .ri copies before this commit:

```
                build-mtl/zephyr/zephyr.ri
copied to  ->   build-mtl/zephyr/sof-mtl.ri
copied to  ->   build-sof-staging/___/sof-mtl.ri
```

Only 2 left after dropping the second and pointless copy:

```
                build-mtl/zephyr/zephyr.ri
copied to  ->   build-sof-staging/___/sof-mtl.ri
```

Fewer copies means less wondering about what is what, two identical
files in the same directory is at best pointless and at worst misleading.

The `build-mtl/` directory belongs to the zephyr build system
exclusively, this wrapper script has no business interfering with
`build-mtl`. `build-mtl/zephyr/sof-mtl.ri can even be dangerous because
it does not get cleaned. Demonstration:

```
 # Compile successfully
 $ ./scripts/xtensa-build-zephyr.py mtl

 # Write some code and make a mistake.
 # Fail to compile.
 $ echo BROKEN >> ../zephyr/kernel/sched.c
 $ ./scripts/xtensa-build-zephyr.py mtl

 # Obsolete .ri files are still there
 $ find ../build-mtl/ -name *.ri
  ../build-mtl/zephyr/zephyr.ri
  ../build-mtl/zephyr/sof-mtl.ri

 $ ninja -C ../build-mtl clean

 # Obsolete sof-mtl.ri is still there!
 $ find ../build-mtl/ -name *.ri
  ../build-mtl/zephyr/sof-mtl.ri

```

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",52,59,1
"thesofproject/sof","66b7489032a25f9333a7f7fa91c89da86490c2a6","marc-hb","2023-03-12 23:06:29","false","topology2: copy CMakeLists.txt files as is to new tplg-targets.cmake

Decompose the split in the next commit into two steps to maximize git's
similarity index and facilitate git blame, cherry-pick/rebase, merge,
etc.

The new files are unused in this first commit so git bisect is not
affected.

Changing one-character in the source files also helps: compare git show
-C with git show -C -C. It's also a good clue for the reader when not
using -C.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",55,57,1
"thesofproject/sof","61fe7da105348957ed927f1e3695bc7a2157df89","marc-hb","2022-10-25 00:11:23","false","xtensa-build-zephyr.py: fix misleading -i IPC4 help string

-i IPC4 is _not just_ an overlay change, there's an rimage change too.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",96,53,1
"thesofproject/sof","7c0ab36ac3ac51755d44107bbea3a4524db2b7dd","marc-hb","2020-05-21 23:02:45","false","scripts/qemu-check.sh: double-quote ""$vars"" expansion. Zero-change.

As reported by shellcheck SC2086.

Minor usage() fix.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",99,24,0
"thesofproject/sof","1db950e0780cf7d83469d90c4f8a78b430f91dc1","marc-hb","2023-01-19 19:25:42","false",".github/SPDX-README.md: clarify .c/.h difference and applicability

Explain when this file applies and why there is a .c/.h difference.

I still don't understand why .c file don't use /* SPDX */ but I think
it's still worth quoting a tiny bit from the official documentation
anyway.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",55,56,1
"thesofproject/sof","21f4e74dd70992e1d5237648b5f2773908dc2f1c","marc-hb","2021-03-11 02:32:27","false","installer: fix incremental builds

Building ""sof"" does not rebuild the .ri firmware file. Switch to the
""bin"" target which is what ./scripts/xtensa-build-all.sh builds.

Fixes: 479809663e22 (""installer: (re)build firmware, topologies and user
space tools)

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,33,0
"thesofproject/sof","abad20650a4d4e3605ba4e3bddc776f909fe772a","marc-hb","2023-05-25 23:28:50","false",".github: ipc_fuzzer: upload stdout logs

Quoting @andyross in
https://github.com/thesofproject/sof/pull/7668#issuecomment-1561587959

> OK, as it turns out when running native_posix+fuzzing, the fuzzer
> output goes to stderr (and appears here) where the console output goes
> to stdout, and is currently being discarded. For a sanitizer-detected
> failure, that's actually fine as the stack trace will show up in the
> CI logs. But this was just a call to posix_exit(), which is an ""error""
> to the fuzzer but not very informative to us without knowing the
> software state that led to it. Most likely this is a Zephyr
> panic (e.g. an assertion failure -- not a trap like SIGSEGV/SIGILL
> that would be caught by the host OS and thus libfuzzer), because the
> default fatal error handler is to tell the arch layer to do a system
> halt, and native_posix implements this by exiting. And it's certainly
> not unlikely to have been triggered by the fuzzing.

> Basically: @marc-hb if we could arrange to save the stdout of the
> offending fuzz process on failure that would be great. Alas this
> particular incident may have been lost, but there will surely be more.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",51,60,1
"thesofproject/sof","2d3c7eae4f63479a7a48b1ac9f54adb9cbecc597","marc-hb","2023-05-02 04:55:01","false","xtensa-build-zephyr.py: don't extract SOF_BUILD from generated .h file

This replaces and simplifies commit a823958a8d2d3 (""xtensa-build-zephyr:
pass sof build version to rimage"") with a constant 1.

That commit was submitted to avoid a test failure in a broken, internal
test looking for an SOF_BUILD value... hardcoded to 1! (internal FW issue
257, test TestLoadFwExtended::()::test_00_01_load_fw_and_check_version"")

The final goal is for this script to stop extracting anything from
`generated/sof_versions.h` so rimage can be configured _before_ the build
has started. Other commits will deal with other parts of sof_versions.h

SOF_BUILD can be replaced by a constant because it has always been one
when building with Zephyr. The optional BLD_COUNTERS feature - disabled
by default in XTOS since commit 9f8cce152240 (""Disable __TIME__ and the
non-reproducible build counter by default"") for build reproducibility
reasons - has never worked with Zephyr for the following reasons:

- The sof_add_build_counter_rule() invocation is located in the
top-level sof/CMakeLists.txt file which has never been used by the
Zephyr build.

- sof_add_build_counter_rule() registers a POST_BUILD command for the
top-level ""sof"" CMake target but there is no ""sof"" build target in the
Zephyr build.

- Variables like VERSION_BUILD_COUNTER_CMAKE_PATH are not defined in the
Zephyr build for some unknown reason.

- Probably others.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",54,59,1
"thesofproject/sof","1de3ef3675844d53f8a4fc265cf62715e2ecfdc0","aborisovich","2022-02-16 00:03:18","false","Rewritten xtensa-build-zephyr.sh to python

Created new script with similar functionality to allow SOF + Zephyr
builds on both Windows and Linux operating systems.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",106,44,1
"thesofproject/sof","a78a0f4a95fd653ca6ff191129e8ad4c571b6ce9","keqiaozhang","2018-07-02 06:00:40","false","rimage: adding an include for all gcc version build

Signed-off-by: Zhang Keqiao <keqiao.zhang@linux.intel.com>",8,1,0
"thesofproject/sof","9915b803f73e69630a5c11dc4c2218122e1dfc8c","sebcarlucci","2020-04-08 23:48:21","false","audio: dcblock: Fix int overflow issue in dcblocker

This patch fixes an integer overflow issue that can occur in the
dcblocker. The overflow happened when doing x - x_prev. If x_prev
is sufficiently large (positive or negative), it can cause an overflow.

Casting x to a 64 bit int first fixes this issue.

Signed-off-by: Sebastiano Carlucci <scarlucci@google.com>",80,22,0
"thesofproject/sof","3f5c0baba156c217d4344685d30b02789fb40e94","andyross","2023-02-01 22:27:40","false","scripts: Add fuzz test wrapper

Simple script to explain how fuzz testing works

Signed-off-by: Andy Ross <andyross@google.com>",52,56,1
"thesofproject/sof","60dfaa7ee30189c4e23fd392ae5f8f9b7bb21113","keyonjie","2020-10-22 06:24:31","false","ssp: refine the RX FIFO flushing logic

The SSSR_BSY is not necessary for flushing, we need to read out entries
every time the FIFO is not empty. This flushing may need take place
several rounds, and we need to wait 1 sample time between 2 flushing
rounds.

Fixes #3525

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",72,29,0
"thesofproject/sof","2e7a06194aa304cc5d7c42cf81b0f72d0b04ef03","keyonjie","2021-07-02 10:59:23","false","memory: cannonlake: refine the heap sections size

Fine tune the size of runtime and runtime_shared sections, use different
counts for different SRAM size scenarios, to make full use of all the
banks.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",85,37,0
"thesofproject/sof","955c7c9009125ea6ecde456587bce824fa70a4cc","dbaluta","2021-09-28 08:37:16","false","topology1: imx8: Add mixing PCM and Compr stream topology

This topologies are for i.MX8QXP/i.MX8QM, i.MX8MP demonstrating
mixing for 1 PCM stream and 1 Compr stream.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",120,40,0
"thesofproject/sof","bbc9019bdf72a28debf671d2f6940dd52f9bec30","plbossart","2019-01-16 05:08:05","false","src/include/host/topology.h: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","b2c9944ae73ee0d9dd2651e037af6dbdb4c823ba","lrgirdwo","2022-12-12 22:19:46","false","xtos: mailbox: use memcpy for host mailbox_write

Host based mailbox needs to be fixed in another place. It's here
now until rtos partitioning is done.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",103,54,1
"thesofproject/sof","9d37a33335d4a68e0433f6bca6cb5739b06500d5","plbossart","2022-08-05 08:26:31","false","Revert ""TGL: enable CONFIG_INCOHERENT correctly""

This reverts commit e4a53594403d40926b349423045b0f13c252b220.

we need to bring the daily tests back to normal, reverting until the
issue is fixed.

Nothing personal or agenda-based, it's just standard CI practice to
revert what broke the mainline - even more important to do so before
the week-end stress tests.

BugLink: https://github.com/thesofproject/sof/issues/6075
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",115,50,1
"thesofproject/sof","2a66504b292c07a4fca2f709d9439bfd3c4bfe3a","jajanusz","2020-05-11 13:25:05","false","schedule: dma: check irq register result

Check if re-register failed in dma_domain_unregister_owner.
Error reported by clang static analyzer.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",96,23,0
"thesofproject/sof","d1b264c3f0a7099947c7e3f3a0fd4f36309df144","marc-hb","2021-11-04 06:10:47","false","xtensa-build-zephyr: add new -z option to clone any Zephyr version

Default behavior is still to clone the default Zephyr branch (main) but
this could be changed with just one line.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",125,41,1
"thesofproject/sof","b7fc937e049f6c8792e9ae0d601a74929cb0d128","jajanusz","2019-02-11 12:07:37","false","scripts: sof-target-install update for cmake tools

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",59,8,0
"thesofproject/sof","fdbb90e786c962a11db94c8b263abf7c3e5f26e4","johnylin76","2021-01-12 10:37:56","false","tools: topology: Add common Codec Adapter capture pipeline tplg

pipe-codec-adapter-capture.m4 is implemented as a common pipeline
module of a capture codec w/ Codec Adapter API.

For codec developers, a upper-layer tplg file should be provided for
the specified codec with the information of control bytes, schedule
core, and byte-control names.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",74,31,0
"thesofproject/sof","86cd1a9ac45d7f7983bd18692074cf29880e9413","jajanusz","2018-12-27 20:18:49","false","kconfig: add initial Kconfig files

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",49,7,0
"thesofproject/sof","e2743bc39792889eb8ca79969adfdd7ce6673861","jajanusz","2019-09-30 17:28:44","false","rimage: add SHA384 hashing

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",66,16,0
"thesofproject/sof","98933136874c58151637f9acc6f7b832444a0819","jajanusz","2018-06-15 08:46:42","false","test: use AC_CHECK_LIB instead of PKG_CHECK_EXISTS in configure.ac to drop dependency on pkg-config
Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",1,0,0
"thesofproject/sof","d98c9d5a8b50ad07e3d01cbc7bbb88656f95f561","jajanusz","2019-02-06 19:46:38","false","cmake: add olddefconfig target

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",55,8,0
"thesofproject/sof","480d1ad168ebd37759258e386946e8fbae4a5753","lrgirdwo","2022-02-04 17:07:12","false","testbench: improve error messages in topology load

Give users more information when failures occur.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",106,44,1
"thesofproject/sof","2f7b57551a065a862cb75e9339aa7103b4ccd738","lgirdwood","2018-11-09 08:40:14","true","Merge pull request #555 from singalsu/fix_vol_mult_s24_to_s16

Volume: Bug fix for vol_mult_s24_to_s16() function",41,5,0
"thesofproject/sof","748aad9ec222bd28360996bdce140b094f4fa076","lgirdwood","2018-07-18 07:54:19","true","Merge pull request #118 from bkokoszx/test_component_set_state

test: component: change to use 1 assert per test",12,2,0
"thesofproject/sof","9ab0b6d9ae7fe067ee5a7d555eccbfa8314deb31","lgirdwood","2018-11-22 14:02:36","true","Merge pull request #606 from thesofproject/lrg/topic/vm-rom

Build simple ROMs for CI testing of APL etc",39,6,0
"thesofproject/sof","5e3edf8cd1610521fabd8f0dbca2c6348489ce4d","bkokoszx","2020-01-13 12:04:47","false","dai: changes whitespace alignment in dai ops

This commit changes white space alignment in dai
audio component.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",77,19,0
"thesofproject/sof","365ffbd02f7dfe1fe0e96a40a8aad54c90b4ab6f","singalsu","2020-03-31 08:27:05","false","Tools: Tune: Suppress sof-ctl text output when getting ABI header

This patch reduces amount of printed text to screen when Matlab/Octave
EQ tool needs configuration blob header information. The output is
redicted to /dev/null.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",66,22,0
"thesofproject/sof","04aa27103e11322e8ad491f0c249457047c2332c","singalsu","2022-07-27 17:21:08","false","Math: FFT: Switch to script generated twiddle.h

This patch adds script tools/tune/fft/export_twiddle.m. Since
the data in original twiddle.h differs by one LSB in few
items the file is replaced with one generated with the script.

The identifier 32 is added to header name and variables names
as preparation to add 16 bit FFT version.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",111,50,1
"thesofproject/sof","e4999973028ef7dded2389868d1da60f56546bee","tlauda","2018-06-04 11:03:41","false","rimage: add correct FW version to binary

Now correct FW version is included into binary.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",1,0,0
"thesofproject/sof","601b06a0aaf7c95523dab459278d8b740b91c125","tlauda","2018-09-25 10:04:41","false","host: arch: add new trace functions for host

Adds new trace functions for host architecture,
which fixes additional build errors.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",37,4,0
"thesofproject/sof","fe75426a935072722e914f6507c83747ab03aba0","tlauda","2019-04-10 14:21:41","false","host: remove unused variable

Removes unused variable from host component.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",49,10,0
"thesofproject/sof","85e69f8009f281824400d9bfe1bc47727ceace65","tlauda","2020-01-08 13:46:59","false","dai: pass sof context to dai_init

Changes dai_init function's argument list to take
sof context. It will be needed to add dai list pointer
into sof context.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",71,19,0
"thesofproject/sof","506f5a78d92186e7a59efa197270d3bbef34735c","tlauda","2019-02-15 14:15:42","false","arch: move xtos_exc_handler_table to bss

Moves xtos_exc_handler_table to bss for SMP arch.
It's modified at runtime, so shouldn't be kept
in data, which is supposed to be read-only.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",63,8,0
"thesofproject/sof","84e75633d0cf15e4d52462c86b581bfbfec57f64","tlauda","2019-09-24 12:18:27","false","arch: xtensa: verify xtos_active_task offset

Adds STATIC_ASSERT to verify if the XTOS_TASK_CONTEXT_OFFSET
is set to the right value.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",65,16,0
"thesofproject/sof","f724ef10581a93e9524038e218cfd012b56794ba","tlauda","2019-09-23 08:28:03","false","edf_schedule: do not pass sof structure anymore

Changes scheduler_init_edf and task_main_init function
definitions as sof structure is no longer needed. It was
only used to pass agent object to main idle task.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,16,0
"thesofproject/sof","c419fadc3e444a85b24dea9f2ef9fd23d57c3b7a","ktrzcinx","2020-05-22 07:26:43","false","trace: Filter messages in runtime

Ability to change log level per UUID component improve user
experience during debugging firmware. Threshold trace level
defined in log message with value from trace context, where
trece context is related with component instance (local or
global instance).

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",99,24,0
"thesofproject/sof","dd5a56f37b91905bb52cde5a4010c43fcd8023c6","ktrzcinx","2020-09-15 09:11:58","false","rimage: Update to version with toml devices description

This allow to add new platform with old version of rimage tool.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",62,27,0
"thesofproject/sof","60211b3d7003da9de58120f70aaaab24aba5f8ec","ktrzcinx","2020-07-13 09:06:35","false","dai: Remove frame_fmt from private data

This value is one of audio_stream property, so should be
saved in this place to keep data synchronised, and allow
to usage generic function working on audio_stream, like
stream converters.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",75,25,0
"thesofproject/sof","cfe81f5127eb9ba8267e6481b34f686db91d0079","tlauda","2019-09-20 08:18:36","false","topology: cml: cnl: use 3 periods for SSP, DMIC and ALH DAIs

Changes number of SSP, DMIC and ALH DAI periods from 2 to 3.
This way we can support both timer and new single DMA
channel scheduling.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",63,16,0
"thesofproject/sof","14bef5431aba358de9da64abbed384d87c98e16d","tlauda","2018-07-11 14:52:54","false","buffer: do not writeback cache for passthrough ppl

We shouldn't writeback cache for passthrough pipeline
as this causes buffer overwrite for capture and it's
not really needed.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",15,1,0
"thesofproject/sof","be43b4e4ebb9e774a05318c4b54c0445c7938db3","kv2019i","2023-04-20 15:17:24","false","topology1: fix buffer size calculation if period-size >44ms

Calculation of SOF_TKN_BUF_SIZE in COMP_PERIOD_FRAMES() macro
led to incorrect results with large period size values.
For example at 48000Hz sampling rate, period size larger than
44739us would be incorrectly calculated.

This happens as m4 eval does arithmetic in 32bit signed values
and multiplication of period size and sampling rate can easily
exceed 2^31.

Fix the issue by splitting the arithmetic in steps that
fit available value range.

Link: https://github.com/thesofproject/sof/issues/7476
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",53,59,1
"thesofproject/sof","438b310403acd133393c927b3c03d00af1bb83f3","ranj063","2022-01-10 23:57:22","false","module_interface: Change the signature of prepare API

As part of the 3rd part module API changes, change the signature of the
prepare op in the module interface API to pass the pointer to struct
processing_module instead of comp_dev.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","e3f8464dc9ca74afe9236fe9838c7e8435ff5ff8","lrgirdwo","2021-06-14 13:54:13","false","notifier: no need to disable IRQs during registration

Use a spinlock for locking the list instead.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",69,36,0
"thesofproject/sof","bb5f0d96175cbf7217704e877c4a62f3a58d439a","RanderWang","2023-09-05 05:17:38","false","core: set timeout to 400ms for secondary core disabling

The CONFIG_SECONDARY_CORE_DISABLING_TIMEOUT is for FW to do secondary
core disabling check and set to 5000ms by default. Linux driver
set ipc timeout duration to 500ms, but FW wait 5000ms in
cpu_disable_core for SET_DX ipc message. This makes driver stop but fw
is still waiting. Actually the disabling can be successful in far less
than 5000ms and it was first designed for FPGA case. Now change it to
400ms to make debugging easier.

Signed-off-by: Rander Wang <rander.wang@intel.com>",23,63,1
"thesofproject/sof","b42798bc6a3102eb29addc90d7038b6e8d63155c","RanderWang","2021-07-14 08:18:48","false","topolog2: add dai setting for cavs-nocodec

The change is based on dai setting in copier

Signed-off-by: Rander Wang <rander.wang@intel.com>",87,37,0
"thesofproject/sof","ace472f726c830d7f11ce3947aaf538a9e97bae0","libinyang","2023-02-10 09:00:25","false","topology2: wov-detect: set num_xxx_audio_format

Set num_input_audio_formats and num_output_audio_formats for wov widget.

Signed-off-by: Libin Yang <libin.yang@intel.com>",54,56,1
"thesofproject/sof","726e655572e398391d8135d43f4402648c669e65","libinyang","2022-11-18 08:00:39","false","selector: use cfg->init_data in selector_init()

We are using cfg->init_data for the modules initialization and
cfg->data is not ready when selector_init() is called. Using
cfg->data in selector_init() will cause fw crash.

Signed-off-by: Libin Yang <libin.yang@intel.com>",97,54,1
"thesofproject/sof","0767ffaf85f9e10166d38dc80988aeb58dbb0f63","xiulipan","2021-01-12 09:14:45","false","tools: sof_ri_info: fix memory layout match

For sof-tgl.ri and sof-tgl-h.ri the old match function will
always return tgl layout. Add suffix in match to make sure
we always match the right name.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",74,31,0
"thesofproject/sof","8c13fce6e5e4945b5a81b2f7de735a3c6b98f808","xiulipan","2019-02-10 14:07:24","false","[skip ci]scripts: fix a typo in name of targe install scripts

Change the scipts name.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",59,8,0
"thesofproject/sof","76b3f1eaaf8874708b2e8e4396ba8f7c842783d1","xiulipan","2021-01-27 08:44:01","false","README.md: add GitHub action status badge

Add the status badge for GitHub action CI.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",68,32,0
"thesofproject/sof","db88ab49e4f6250967d986060195ffe9153ff023","singalsu","2018-12-21 14:00:36","false","Testbench: Bug fix for s16 file read

This patch removes some obsolete code that caused file
pointer to get out of sync and corrupt all data read.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",50,7,0
"thesofproject/sof","1032fa30ed04787138995a0756fcbb790b55f5f0","RanderWang","2023-07-06 07:42:27","false","platform: cavs: don't program general owner and io registers

These registers are set in power_init() in zephyr layer, so
remove redundant setting and remove hw setting in SOF layer.

Signed-off-by: Rander Wang <rander.wang@intel.com>",31,61,1
"thesofproject/sof","d569859e4b07bb9719bf20be1535d7e7ef3800c9","jajanusz","2019-10-10 11:51:33","false","icelake: shim: clock control registers

Add registers for requesting clocks.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",61,16,0
"thesofproject/sof","1d273c3a9f155624144199e36a14ffafeec345ca","bkokoszx","2020-02-20 13:24:04","false","eq_iir: add supported formats check in verify function

We should check whether we can support frame_fmt conversion
due to source and sink buffer frame_fmt's. If not, we should
overwrite sink (playback) and source (capture) with pcm
frame_fmt and not make any conversion (sink and source
frame_fmt will be equal).

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",84,21,0
"thesofproject/sof","784bce763c0e2951746b62ade1e521c1f1ebd3ed","softwarecki","2022-09-06 13:44:56","false","mtl: Added meteorlake platform to the build system

Added new mtl platform to xtensa-build-zephyr.py.
Added ace directories to cmake files.
Added ACE to kconfig.
Add Meteorlake platform to be built with Zephyr under
CONFIG_ACE_VERSION_1_5 flag.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>
Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>
Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>
Signed-off-by: Konrad Leszczynski <konrad.leszczynski@intel.com>
Signed-off-by: Anas Nashif <anas.nashif@intel.com>
Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>
Signed-off-by: Rafal Redzimski <rafal.f.redzimski@intel.com>
Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",106,51,1
"thesofproject/sof","be3dff2780e10862ec0693879625e70390046a36","XiaoyunWu6666","2021-07-08 02:12:33","false","topology1: sof-tgl-nocodec-ci: use volume capture for PCM0
capture

S32_LE without PGA is not supported in alsabat, switch to use
pipe-volume-capture and unblock the CI alsabat test case.

Signed-off-by: Iris Wu <xiaoyun.wu@intel.com>",87,37,0
"thesofproject/sof","87ccc5cae8f3a9015d7e31a56332ad211ec5ace0","softwarecki","2022-06-30 12:00:01","false","dai: Remove unused fields from dai_data structure

Removed unused dai_pos and dai_pos_blks fields from dai_data
structure. No pointer was assigned to dai_pos.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",110,49,1
"thesofproject/sof","71e3734765461f79f4d5fee85ee35319a8e213a9","kv2019i","2022-11-25 15:31:41","false","ipc4: logging: mtrace: stop throttling notifications

The need to do ratelimitting in the hook function became less important
since ""logging: adsp_mtrace: fix handling of buffer full condition"" was
merged to upstream Zephyr.

Additionally, the rate limiting has led to loss of logs especially in
use-case sequences where system moves from:

  a) pipelines established and running with low rate of logs
     emitted

to

  b) one or more pipelines change state and flurry of IPC
     activity occurs

The IPC notification throttling may be too slow to react,
leading to many lost log messages that cover activity around
system moving to (b) state.

Solve the issue by removing the notification throttling mechanism, which
was added in commit a394d8803910 (""ipc4: logging: throttle notifications
to host"").

Link: https://github.com/thesofproject/sof/issues/6669
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",99,54,1
"thesofproject/sof","9ee974559eed57e1c991ca687b8569379ddee893","bkokoszx","2021-02-17 11:42:25","false","mux/demux: update mux/demux documentation.

This commit adds description of mux/demux config structure
and format.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",73,32,0
"thesofproject/sof","3e7edf4e0292297270cc62f3f4f433758e1bfd5f","singalsu","2020-04-23 16:47:49","false","Tools: Tune: Fix mistake in EQ blob plot function

The case where blob decoding is requested for single frequency,
e.g. 1 kHz the magnitude and group delay vectors did not have
size of one frequency. This patch fixes the issue.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",71,23,0
"thesofproject/sof","c11d99241d710c80e65bdaf703a8eeda46f82f65","singalsu","2022-11-14 11:57:10","false","Tools: Tune: Fix erroneous fprintf() in src_get.m

This fprintf() with missing %d causes in Matlab and octave
messed up console output. This fix prints filter order
if this issue happens. This could be caused by too high
filter specification request that was not possible to reach.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",95,53,1
"thesofproject/sof","079f916c6ad63b5975aa5f9cd3d5e2e584ea2cf7","singalsu","2021-02-19 11:07:15","false","Topology: Move some topologies to development and dsp_enhancement

The main topology directory contains a number of topologies those
are not used directly by Linux kernel machine drivers. Also there
are variant topologies built those are modified versions of the
main topology. The topologies for testing and devolopment are moved to
directory development. The topologies those may be used by end users
to enhance the audios are moved or built to dsp_enhancements directory.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",74,32,0
"thesofproject/sof","9250bfe034ebd199d6c10043642fd227f9d585b0","singalsu","2018-10-15 07:44:42","false","EQ: Update new path into objective quality test functions

This patch fixes the path issue from previous directory structure
maintenance.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",35,4,0
"thesofproject/sof","d30f47dd13ddeca1d07c44943b2dced01a96fbaf","singalsu","2021-07-19 16:46:15","false","Audio: SRC: Cleanup not needed state variables

The source_format and sink_format variables are not needed in
component data. They can be local in prepare().

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",90,38,0
"thesofproject/sof","30a834a9d4d02f7a99101d3814fae0d12621ce34","singalsu","2023-05-19 09:34:32","false","Audio: DRC: Add IPC4 support

This patch adds to component prepare() handling of IPC4 module
init parameters and set of sink parameters with audio format
from there.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",52,59,1
"thesofproject/sof","f269d0c7321d142886658b6684581486aee0894c","singalsu","2020-06-04 17:04:09","false","Topology: Add ASRC capture pipe for WM8804 SPDIF input

This patch adds capture PCM with ASRC for capturing from SPDIF
input of WM8804 codec. This topology is used mainly for testing
of a bi-directional ASRC connected slave-DAI.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",77,24,0
"thesofproject/sof","d8cc1e0d9916df61920774b2e7a040b2ecb00045","tlauda","2018-09-03 09:17:03","false","alloc: fix free_block

Fixes free_block for memory allocated in the last block map.

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",30,3,0
"thesofproject/sof","fffa38db2a0ede9860c075ee6149495992b315cc","bardliao","2021-07-02 05:46:36","false","topology: sof-cavs-nocodec: enable MCLK/BCLK early start

Set clks_control to (SOF_DAI_INTEL_SSP_CLKCTRL_MCLK_ES |
SOF_DAI_INTEL_SSP_CLKCTRL_BCLK_ES) to enable MCLK/BCLK early start
feature.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",85,37,0
"thesofproject/sof","5048eb74b10732a1374718217a7e125987b64504","ranj063","2021-11-05 00:55:54","false","topology2: pcm/pipeline: add instance attribute

Add an instance attribute for all pipeline class definitions and the pcm
class. This will be used to instantiate unique PCM/pipeline instances.

The ID attribute for PCM and the index attribute for pipeline may be the
same as the instance attribute in most cases. But in some cases, the
pipeline ID or the PCM index will be passed from the CMakeLists.txt file
as pre-processor definitions and they will be replaced as needed.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",126,41,1
"thesofproject/sof","4db4d0d86fce95030ff20db3b2048ed37d2b0931","ktrzcinx","2020-08-24 05:38:27","false","logger: Exclude misc functions from convert file

A few, general usage functions where implemented in converter file.
They should be moved to separate file, to make it easily accessible
form any source file. Moreover removing it from converter file, is a
part of this file cleanup.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",75,27,0
"thesofproject/sof","32e4f7e27a57af3f7202ea6d5267e53f2e4bf2ee","lyakh","2023-04-13 12:15:04","false","buffer: use an accessor to read struct audio_stream::end_ptr

This patch adds audio_stream_get_end_ptr() to read
struct audio_stream::end_addr and converts all users. Apart from
hiding internals of the structure, it also enforces the use of the
__sparse_cache annotation.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",50,58,1
"thesofproject/sof","9b5f48b3a350c5812c4c5ad150cc5553915c23ee","ktrzcinx","2020-10-13 14:18:38","false","pipeline: Fix spelling error

Changed `coomponents` to `components`

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",67,28,0
"thesofproject/sof","d4254be1adf03ee78a6b39f4edb0d151dbf0e7bb","ajitkupandey","2021-09-23 06:35:38","false","topology: topology1: Add initial topology for AMD Renoir

Add m4 and headers to support basic topology with passthrough
pipeline for ACPSP and DMIC use cases support on renoir platform.

Signed-off-by: Ajit Kumar Pandey <AjitKumar.Pandey@amd.com>
Signed-off-by: balapati <balakishore.pati@amd.com>",118,40,0
"thesofproject/sof","b6b6fa23ce0fbe944c1df94941c816c497b172cd","kuanhsuncheng","2021-08-27 06:24:56","false","platform: mtk: add memory layout for mt8195

Add memory layout and register address for mtk mt8195

mt8195:
Cache
   I-Cache: 32KB, 4-way Associativity
   D-Cache: 128KB, 4-way Associativity
External Memory
    DRAM: DSP can access DRAM which shared with CPU
    L2TCM: 256KB DSP SRAM POOL

Currently, use
phy addr:0x60000000, size:0x1000000
dma phy addr: 0x61000000, size: 0x0100000

Signed-off-by: YC Hung <yc.hung@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",119,39,0
"thesofproject/sof","65ddcddfcc9a20f5b622cf3ba93dc326387a9d5d","ranj063","2018-06-01 16:35:02","false","host: add missing include directories and library dependencies

This patch adds the missing paths for header files and
libraries required for building the host testbench.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",1,0,0
"thesofproject/sof","584e2f62e5b7dd676c0e865b43f70d6e09d280fc","ranj063","2023-06-12 17:03:11","false","topology2: cavs-nocodec-multicore: Replace audio_format objects

Use the input_audio_format/output_audio_format objects instead.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",47,60,1
"thesofproject/sof","be825a8581716cc580187ae117f22819dc57aa15","ranj063","2023-05-16 20:36:28","false","topology2: host-copier-gain-src-mixin-playback: Use host-copier

Replace the generic copier with host-copier in the class definition and
the instances.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",52,59,1
"thesofproject/sof","a9f2f85c35613569783dce6dab920e289d58b58e","groncarolonxp","2019-11-07 08:02:53","false","topology: imx: sai: correct link name

Link name changed to be.wm8960-hifi align to that
Correct clocks too

Signed-off-by: Guido Roncarolo <guido.roncarolo@nxp.com>",53,17,0
"thesofproject/sof","3629141cbb193852753d08c26b33ee1f96bd30bc","ranj063","2022-02-25 05:36:09","false","topology2: cavs-nocodec: include dmic-generic.conf if needed

Include dmic-generic conditionally based on NUM_DMIC's and add nhlt
build support in CMake variables.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",110,45,1
"thesofproject/sof","3029a0cc38cd71132de8dd8d502d5780c9847edc","plbossart","2023-07-06 08:20:34","false","topology2: cavs-sdw: fix bad index in passthrough mode

When PASSTHROUGH is true, the topology generation throws this error:

ALSA lib dapm.c:247:(tplg_build_routes) undefined source widget/stream
'host-copier.0.playback'

using the pcm_id 2 used for the host copier fixes the issue.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",31,61,1
"thesofproject/sof","0f77541b2687c8cbe85984bbe33f62cfe51f4e53","lrgirdwo","2020-06-09 13:20:47","false","build: elif statement has no conditional.

Looks like was never compiled ?

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",73,24,0
"thesofproject/sof","db52ec9cacea5438f6b879b0599daeaa33c3a048","lrgirdwo","2019-09-13 14:33:42","false","xtensa: add support for platforms with no threadptr register.

Fix the core-isa headers for HSW and BDW.

Provide a virtual threadptr register in the memory map using a linker
area below the stack. This can then be referenced instead of the register
for ISAs that dont support threadptr.

This patch also includes initial vthreadptr support for HSW/BDW platforms.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",60,15,0
"thesofproject/sof","cc5d6efe5338b84e6c9d3c46ac2203dc32dc0d3a","lrgirdwo","2022-01-19 13:26:07","false","ipc4: build: fix GCC11 build warning in mixer.

In file included from /home/lrg/work/sof/sof/src/include/sof/audio/buffer.h:18,
                 from /home/lrg/work/sof/sof/src/audio/mixer.c:8:
/home/lrg/work/sof/sof/src/audio/mixer.c:45:31: error: 'mixin_uuid_ldc' defined but not used [-Werror=unused-const-variable=]
   45 | DECLARE_SOF_RT_UUID(""mix_in"", mixin_uuid, 0x39656eb2, 0x3b71, 0x4049,
      |                               ^~~~~~~~~~
/home/lrg/work/sof/sof/src/include/sof/lib/uuid.h:94:44: note: in definition of macro 'DECLARE_SOF_UUID'
   94 |         static const struct sof_uuid_entry uuid_name ## _ldc = {        \
      |                                            ^~~~~~~~~
/home/lrg/work/sof/sof/src/audio/mixer.c:45:1: note: in expansion of macro 'DECLARE_SOF_RT_UUID'
   45 | DECLARE_SOF_RT_UUID(""mix_in"", mixin_uuid, 0x39656eb2, 0x3b71, 0x4049,
      | ^~~~~~~~~~~~~~~~~~~
/home/lrg/work/sof/sof/src/audio/mixer.c: In function 'mixin_bind':
/home/lrg/work/sof/sof/src/audio/mixer.c:743:17: error: 'sink_buf' may be used uninitialized in this function [-Werror=maybe-uninitialized]
  743 |                 pipeline_connect(dev, sink_buf, PPL_CONN_DIR_BUFFER_TO_COMP);
      |                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
cc1: all warnings being treated as errors
make[2]: *** [CMakeFiles/sof.dir/build.make:786: CMakeFiles/sof.dir/src/audio/mixer.c.o] Error 1
make[1]: *** [CMakeFiles/Makefile2:1970: CMakeFiles/sof.dir/all] Error 2
make: *** [Makefile:136: all] Error 2
""make all"" terminated with exit cod

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
[guennadi.liakhovetski@linux.intel.com: mixin_tr only for IPC4]
Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",113,44,1
"thesofproject/sof","1125fe06bc2440f40a4b87a048ac68a64122af61","ranj063","2023-10-13 15:53:01","false","topology2: gain-copier-capture: Replace use of audio_format objects

Use input_audio_format/output_audio_format explicitly in preparation for
deprecating the audio_format class.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",10,64,1
"thesofproject/sof","735d44368f32f21b45df6d3fe9ad2dbcd4ca5d41","abonislawski","2022-02-11 09:32:21","false","probe: update dma copy method to dma_copy_to_host()

dma_copy_to_host_nowait() no longer exists and needs to be updated

Fixes commit 443b21de4b3f (""dma-trace: Fix potential race issue by using
blocking DMA copy"")

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",108,44,1
"thesofproject/sof","5100d378aa7671425f40045a1ea428692604c0da","dbogdzix","2019-04-25 13:56:57","false","Updated Readme for cht configuration",47,11,0
"thesofproject/sof","46cb40aa070219a6eebcceebb40011f540093941","btian1","2023-01-09 07:38:16","false","dai: remove dai frame format configuration

frame_fmt was later overwritten by ipc_config.framefmt, so
the previous assignment no use anymore.
Removed whole dai_get_hw_params function to avoid misunderstand.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",54,55,1
"thesofproject/sof","df71b4e07326b92512ef72bb084e52299e86d56d","jxstelter","2023-10-30 13:10:03","false","ipc: Add remote component search by pipeline idc

By default ipc_get_comp_by_ppl_id() routine omits component
from core different that the one where pipeline is working.
However with introduction of DP modules such situation can happen.
In some flows we need to find modules that belongs to given pipeline
but are scheduled on different core. This modifications will allow to
select when include such modules in the search.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",5,65,1
"thesofproject/sof","d9a7dfd2316067d6d5d1268d7f7360f4f0cbe81a","stolx","2021-03-29 18:11:46","false","audio: codec_adapter: add Waves api

add Waves MaxxEffect API definition.
API is required to build SOF with Waves codec.

Signed-off-by: Oleksandr Strelchenko <oleksandr.strelchenko@waves.com>",80,34,0
"thesofproject/sof","cc0f713e75371d31eebc54041f1dc5a1e90f047c","abonislawski","2020-06-05 08:47:30","false","ipc: header size validation fix

This patch will deny IPC headers with size 0

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",77,24,0
"thesofproject/sof","b20d86f2cec1bbbbc968aa4e0428536ff74fe67f","keyonjie","2020-11-06 05:52:24","false","host-testbench.sh: update comment for testbench building

The host-build-all.sh is deprecated, update to the recommended
'rebuild-testbench.sh'.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",76,29,0
"thesofproject/sof","9fadef789e80b586c64cb963dad24f909d579afd","keyonjie","2021-07-26 11:04:26","false","trace: Kconfig: disable filtering by default

The trace filtering will suppress useful logs and make debugging
difficult, disable it by default.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",100,38,0
"thesofproject/sof","606b4f0442df7c359664e101b19b92313945302f","dcpleung","2019-09-27 01:00:57","false","Add .gitignore

Signed-off-by: Daniel Leung <danielcp@gmail.com>",66,16,0
"thesofproject/sof","0762095b1bc11d4c15d3477ef0d917e4233cfc9c","lgirdwood","2018-11-09 16:14:24","true","Merge pull request #559 from mrajwa/icl_work

I2S: Not enough padding for 24/32b, 48kHz",39,5,0
"thesofproject/sof","5bce5a9ea5d26d575899a6abb69de879d94bbbc9","mrajwa","2020-01-28 14:34:44","false","kpb: check if allocated buffer matches new host params

This patch fixes the problem with format switch.
The problem was when we allocated history buffer for
smaller format like S16_LE and then dynamically changed
format to some wider one like S24_LE. In this case KPB
was detecting that buffer has already been allocated and
used it what limits the amount of data we can store for
new format.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",76,20,0
"thesofproject/sof","24840b4dcc198e3c4de0696a4ef853c954b78f6a","lgirdwood","2018-11-27 13:58:43","true","Merge pull request #633 from libinyang/host_release_channel

host: release dw-dma channel when pcm free",43,6,0
"thesofproject/sof","d08e7779d599dbe96f24e46d68cf69093539a0b3","mrajwa","2020-12-02 10:43:34","false","trace: fix missing trace variable for CONFIG_TRACEM

This patch adds missing trace variable for CONFIG_TRACEM.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",75,30,0
"thesofproject/sof","d465e93a709dff01dd0bfd0c47dd1d93b3870d9f","mrajwa","2019-05-17 10:10:50","false","kpb: replace draining and copy *memcpy* use with safer method

memcpy function doesn't care about ""wrap-ups""
and sample sizes which are crucial in copy
of audio signals.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",61,11,0
"thesofproject/sof","6c865fc68168bb8018356f72297086a29876ff3b","mrajwa","2019-07-29 19:00:13","false","kpb: log requested draining

This patchs logs requested draining length in
milliseconds in kpb_init_draining() procedure.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",51,14,0
"thesofproject/sof","4547b0b55ef3b9a06165cdac795abc2a0ca199ed","lgirdwood","2018-07-25 15:33:37","true","Merge pull request #146 from slawblauciak/mixer_ut

test: mixer unit tests",12,2,0
"thesofproject/sof","b9246b03869eef096cd941e36c784e4b9a886ff3","lgirdwood","2018-08-23 13:36:00","true","Merge pull request #252 from mmaka1/gp20-l1-dma-fix

dma: fixed writebacks when operating via L1 on dma buffer in L2 mem",19,3,0
"thesofproject/sof","3ce82a15442f70c736a0d4459168754db8222353","mrajwa","2019-09-25 09:20:09","false","kpb: make change state logs verbose

This patch makes logs related to state change in KPB
component verbose.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",65,16,0
"thesofproject/sof","304336ba60bb22c3b21581543ef7807a51be7f2d","mrajwa","2019-04-19 09:34:01","false","CMOCKA-KPB: test and verify internal buffering

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",48,10,0
"thesofproject/sof","916035174967d5eae169e39265f2e04072797926","mrajwa","2020-11-23 19:28:07","false","codec_adapter: rework copy function to use local buffer

This patch refactor codec adapter's .copy() function
so it makes use of local buffer and the deep buffering
feature. Now, whenever deep buffering is needed we perform
processing as usual but store it in local buffer until we
gather enough samples to start copying them down/up the pipeline.
The important new feature, introduced by this commit is zeroes
generator during deep buffering time. This is needed so the next
processing component won't classify our buffering time as an XRUN.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",75,30,0
"thesofproject/sof","a8cf2f90db6b6248d2ed40baa09bfaaa8472ff4b","lgirdwood","2018-08-28 11:54:27","true","Merge pull request #268 from xiulipan/ipcsch

ipc: use scheduler task for IPC process",22,3,0
"thesofproject/sof","f0e5094c4a7cb60f728abf86b5e5d3b30bd52bf0","lyakh","2019-02-26 10:49:39","false","interrupt: switch from bitfields to dynamic interrupt mapping

Currently on cAVS platforms the two kinds of interrupts are treated
differently: the native DSP interrupts and ""level"" interrupts,
multiplexed by cascading interrupt controllers. For the latter
bitfields are used with both the parent DSP interrupt and the child
multiplexed interrupt numbers encoded in them. This is inflexible and
doesn't scale when more cascading interrupt controllers are added.
This patch switches over from using those bitfields to dynamically
mapping cascaded interrupts into a single plain interrupt number
space. Specifically this patch does the following:

- For interrupt conttrollers it adds an .irq_base field, which is the
  base for child interrupts, multiplexed by this controller.

- An interrupt mapping function interrupt_get_irq() is added, which
  uses the name of the cascading interrupt controller and an
  interrupt number on that controller to create a logical interrupt
  number.

- All uses of SOF_IRQ() and SOF_ID_IRQ() and related bitfield-
  manipulation macros are removed.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",67,9,0
"thesofproject/sof","ac6939868c8f2698b2a2e08c1c570404fb6c70e4","lyakh","2021-04-30 15:21:51","false","init: (cosmetic) make primary_core_init() static

primary_core_init() is never called from outside init.c, make
it static.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",82,35,0
"thesofproject/sof","f8e4d693b26fb3c83edd9b418e9ba60ac65c0ad3","lyakh","2023-04-21 13:23:06","false","buffer: use an accessor to read struct audio_stream::rate

This patch adds audio_stream_get_rate() to read
struct audio_stream::rate and converts all users. Apart from
hiding internals of the structure, it also enforces the use of the
__sparse_cache annotation.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,59,1
"thesofproject/sof","a61ff1fe636d870669284dffb70cf160dcda8dc1","lyakh","2022-02-03 16:24:04","false","buffer: use a mutex for locking under Zephyr

Buffers are never handled from atomic context. Use the _thread
variant of the coherent API for them to use a mutex under Zephyr.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",106,44,1
"thesofproject/sof","4538a07b02e3b88d620a1d0507964ec7ef2fb29d","marc-hb","2021-12-11 00:09:43","false","topology: new add_alsatplg_command() CMake macro to reduce duplication

Less copy/paste/diverge => more maintenance.

Zero visible change, pure copy/paste reduction.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",121,42,1
"thesofproject/sof","f41010d3868d579cff7c38551deba65c2979e5b3","brentlu","2021-10-14 06:42:58","false","topology: sof-adl-max98360a-rt5682-2way: add new topology

Add support for four max98360a speaker amplifiers running in TDM mode
which format is 8 slots with 32 bit slot/sample width on ADL boards.

To implement the 2-way woofer/tweeter speaker function in SOF, there
is a demux to create 4-channel audio data with EQ on each channel for
band-split function.

Signed-off-by: Brent Lu <brent.lu@intel.com>",124,40,1
"thesofproject/sof","8dfc008b8b99a1bdbe7707739b62714aaa65abf6","brentlu","2022-06-27 08:51:31","false","intel: ssp: implement mclk always-on feature

In the earliest design, mclk is turned on in set_config() and never
turned off. The behavior is modified in this commit:

d5840a920073 (""ssp: move mclk request/release to pre_start and post_stop"")

Now the mclk is enabled only during audio streaming so some codec may
pop. This commit adds the always-on behavior back as an new feature.

Signed-off-by: Brent Lu <brent.lu@intel.com>",113,49,1
"thesofproject/sof","3f6465dbd33f56da66a346220e508493d67f0bfa","keyonjie","2020-12-04 09:45:23","false","ssp: mn: return -EINVAL if bclk source not found

Use standard errno in find_bclk_source(), return -EINVAL if no matched
bclk source found.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",71,30,0
"thesofproject/sof","8073ea3ef93ce740b3a8a8fa617af9988c990838","keyonjie","2021-07-02 05:48:58","false","config: tgl-h: change image_size to the real SRAM size

We have 30 bank HP and 1 bank LP SRAM on TGL-H, change to toml config file
to reflect that.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",85,37,0
"thesofproject/sof","864e7e8221706499f7a7ae0088b94566c3854c85","keyonjie","2020-04-10 13:53:28","false","topology: add smart amplifier playback pipeline

Add the playback pipeline for smart amplifier use case, it will be used
with the reference capture pipeline together in the upper layer .m4
file.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",82,22,0
"thesofproject/sof","d56d8ab01cdaeb28d37e270cab3284a1e2c2b52b","marc-hb","2021-03-11 01:42:47","false","scripts/build-tools.sh: switch to Ninja because make is too verbose

Make prints a line for every topology that is already up to date and not
rebuilt. It's impossible to see what was done.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,33,0
"thesofproject/sof","f9c461009a1b81a92ad03389e763f2564f6a8d48","marc-hb","2022-04-07 22:34:14","false","xtensa-build-zephyr.py: add for loop to install files into staging

Preparation to copy multiple files. Zero functional change.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",114,46,1
"thesofproject/sof","e3a1301cd6e9602f1496758694a30c8f56baee06","stolx","2021-01-20 12:52:37","false","audio: codec_adapter: increase codec adapter max blob size to 8192 bytes
4096 bytes is not enough to fit startup config of Waves custom codec

Signed-off-by: Oleksandr Strelchenko <strelchenko.oleksandr@gmail.com>",69,32,0
"thesofproject/sof","408433d32e067f71c4c9276bd43654f223520e17","ktrzcinx","2019-10-29 12:57:53","false","trace: Avoid duplication of trace_ definitions

It was needed to define empty implementation of error and verbose
macros in two places what is not compliant with DRY methodology.
It is done by moving trace defs around, outside #if CONFIG_TRACE block.
After changes it is defined in only one place.
Also trace_*_comp should be defined once bacause it may be
independent from CONFIG_TRACE values.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",66,17,0
"thesofproject/sof","85088ff1937cb94c5e4b8394cee7812e0de9db7b","ktrzcinx","2019-11-07 06:57:08","false","kconfig: selector: selective code compilation according to data type

Compile support only for data types selected in configuration.
It may make footprint smaller.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",53,17,0
"thesofproject/sof","4d64893b868297e259f578267a18e18275e538c1","kv2019i","2022-12-19 15:15:36","false","sof-logger: exit with error if malloc fails

In user-space tools, memory allocations can reasonably be expected to
always succeed. Make this assumption explicit by adding error handling
after malloc.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",92,55,1
"thesofproject/sof","998f0a422dd71d9244e38662df4d023d0b4604ad","bkokoszx","2020-06-19 07:58:40","false","comp: return warning instead of error in comp_get_model()

In comp_get_model() function we should return warning in
case not allocated model->data.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",78,25,0
"thesofproject/sof","e94071fb822b98d03b5ee9687bd4e4f3d2d736bb","kv2019i","2023-05-05 12:46:55","false","intel: ssp: do not read data directly if DMA is active

If DMA is active, do not read data directly from the SSP
RX fifo.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",53,59,1
"thesofproject/sof","956a5876635ebd5935edffa64ad6529d6274c3d1","kv2019i","2021-09-15 12:08:41","false","zephyr: reimplement cached heap zone on single Zephyr sys_heap

Implement the cached SOF heap zones using a single sys_heap
object.

Compared to old implementation which used two separate sys_heaps,
this implementation enables dynamic cached/uncached partitioning
of the heap.

To ensure coherency of the Zephyr heap operation, if cached heap
is enabled, all allocations must be aligned to dcache linesize.

Add a Kconfig option CONFIG_SOF_ZEPHYR_HEAP_CACHED to turn on/off
the cached heap logic, with default set to no for all platforms.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",118,39,0
"thesofproject/sof","a1f4029f8ee1b1e88a32b36caea4be28580425f7","bkokoszx","2018-07-31 17:32:22","false","uapi: ipc: add new fields in ssp struct

I've added quirks and frame_pulse_width to sof_ipc_dai_ssp_params
struct. Also I've defined QUIRKS macros.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",18,2,0
"thesofproject/sof","51e793ea0a00c6512c26d7d3623db42b6b4cbc79","bkokoszx","2020-01-08 20:24:57","false","comp: implement component_set_period_frames() function

This patch implements generic component_set_period_frames() function.
It can be utilized in order to set ""frames"" parameter in
comp_dev structure.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",71,19,0
"thesofproject/sof","53c7ea6dd1fc7b25d31bd315d36e5955ce2271c3","singalsu","2020-12-21 16:39:48","false","Tools: Tune: Add frequency response and group delay plots

The plots help to understand beamformer channel filters characteristic.
Frequency response is usually all-pass type and group delays match
the delays need to time-align the waveforms from steer angle.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",72,31,0
"thesofproject/sof","684737cf5dfa45ce6935743a0eace484e9488ce3","singalsu","2018-08-09 14:00:19","false","EQ: Improve Matlab compatibility of equalizer filter design plus cleanup

This patch adds checks into places where Octave and Matlab handle
the used functions differently. In previous version the difference
in bilinear transform caused IIR designs to fail totally in Matlab.

There remains an issue with IIR EQs design with Matlab. In that case
a warning text is printed since the problem with tf2sos() does not happen
with all designs (example_spk_eq is impacted). It will be investigated
and fixed later. The problem does not happen with Octave.

Equalizer defaults had accidentally by default boost of one dB compared
to desired filter scaling. the offset (norm_offs_db) is now restored to
0.

In parametric equalizers design renamed BW to Q for the correct purpose
(peaking filter Q-value).

Fixed bug in filters normalization where loudness based scaling of IIR
filters was using calculated value for the FIR part.

Also cleaned up lot commented out lines and simplified some functions
parameters usage.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",19,2,0
"thesofproject/sof","0d5e731b199b5c30a5362affa811370f9a3d154b","singalsu","2022-03-30 16:28:16","false","Audio: SRC: Add IPC4 full conversions matrix to SRC comp and tools

This patch adds the Kconfig option COMP_SRC_IPC4_FULL_MATRIX and
adds handling to src.c. Testbench build was changed to use this
largest matrix.

The coefficients were generated with script src_ipc4_int32.m. The
new sample rates were added to test script src_test.m.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",112,46,1
"thesofproject/sof","cbc04be53f0c52a3b48cacd4c47e96b6bc3ceefe","marcinszkudlinski","2023-08-30 16:56:44","false","DP: connect dp_queue to processing DP modules

DP components need to work flawlessly when run on a different
core than that of its connected peer modules.

To achieve this, a cross core producer-consumer safe
dp_queue should be used

DP queue can only be connected to modules that use
sink/src interface, so DP modules need to use it
obligatory.

To connect dp_queue into modules chain, double buffering
method is used:
 - in LL task DP module is processed as an LL module, but the
   copy method is copying data from/to audio_streams
   to/from dp_queues
 - the main DP module processing takes place in DP task
   (in separate Zephyr thread). The tread may be bind to
   separate core

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",25,63,1
"thesofproject/sof","56eb603c7401c56f738dc2f3781e3e9d29ab701f","bardliao","2019-02-11 21:52:47","false","topology: add topology for cht with Realtek codecs

This topology is tested on Up board with Realtek rt5682 codec.

Signed-off-by: Bard liao <yung-chuan.liao@linux.intel.com>",59,8,0
"thesofproject/sof","fdc6fba36c73fbcbe7fbb4074bff86f271b717b7","tlauda","2019-10-11 15:04:54","false","dma_multi_chan_domain: add trace logs

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",61,16,0
"thesofproject/sof","9d10e1a92045f5eb6ed69889cb99bf520e9f6089","tlauda","2019-01-15 13:56:27","false","arch: smp: fix exception handlers for SMP arch

Fixes exception handlers for SMP architecture.
Root cause was the wrong section for exc_handler_table.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,7,0
"thesofproject/sof","e01c6963375b9f62343f1b8d1d231b6bcff96812","tlauda","2019-09-13 08:31:11","false","common: add missing include

Adds missing include of stddef.h, which defines offsetof
macro.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",62,15,0
"thesofproject/sof","6cc49466eb02da4e26fcb989c2a92385f14ee5de","tlauda","2018-08-06 12:21:07","false","cavs: memory: fix cAVS platforms memory map

Fixes memory map for cAVS platforms:
- Correct HEAP_BUFFER_SIZE.
- Correct free size for memmap.
- Remove array initialized to 0 elements (HEAP_RT_COUNT1024).

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",17,2,0
"thesofproject/sof","9d5a82e78a7fe953c82014c2bc768b9dba2275e7","tlauda","2019-10-21 14:24:54","false","ll_schedule: fix race condition for multicore scheduling

Fixes race condition in low latency scheduler when multiple cores
are processing tasks on the same scheduling domain. Task's start
time is updated based on last_tick right after the task is finished.
Last_tick can be updated in the meantime by other core in the situation,
where it starts handling interrupt later, but finishes its tasks
earlier.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,17,0
"thesofproject/sof","60e7f304dcd5294963bfcf8de8c92b3efbbf46eb","tlauda","2019-12-17 15:33:30","false","eq_iir: set iir_delay pointer to NULL when freed

Sets iir_delay pointer to NULL when freed to prevent attempts
to free the buffer multiple times.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",70,18,0
"thesofproject/sof","807815f41b17f78a47be0bee3dabdfaf9e45d095","tlauda","2019-07-10 14:54:26","false","include: cleanup inclusions in ipc, kernel and user headers

Cleanups inclusions in ipc, kernel and user headers.
Some of the headers were missing and some weren't needed.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",42,13,0
"thesofproject/sof","b4f41424182698600c989c4e5923af3325e5e37c","tlauda","2019-12-18 11:42:10","false","cavs: memory: do not use uncached memory for UP config

This patch changes platform_shared_get implementation based
on the current number of supported cores. Let's not use
uncached memory for UP configuration.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",73,18,0
"thesofproject/sof","2a7f0c0de43770c3c049b17610fe687c1be41cc9","tlauda","2018-11-28 11:35:57","false","rimage: fix possible buffer overflow

Fixes possible buffer overflow with strcpy.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",41,6,0
"thesofproject/sof","4f9b0ac1147e06561cf9bdb80f4b867703d1d315","tlauda","2019-03-01 14:34:30","false","hda-dma: exit L1 state only for Host DMA

Exits L1 state only for Host DMA and not Link DMA.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,9,0
"thesofproject/sof","20dabd5f1e3f7f77d70d16e15e10160d9c0b1d31","ktrzcinx","2019-11-05 11:59:44","false","kconfig: selector: test only supported by configuration data format

Do not carry test on unsupported data format for a five firmware
version.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",53,17,0
"thesofproject/sof","6c44aefb1f1ac3974eca40ee64fe33550f60a653","ktrzcinx","2021-04-26 10:19:54","false","ext_man: Fix memory leak after manifest build

sec_buffer allocated inside elf_read_section()
was not being freed before and is freed now.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",88,35,0
"thesofproject/sof","994ee247e13ab2d044dae03a83aa7594b4fc6e7c","ktrzcinx","2021-04-26 10:25:20","false","ext_man: Fix code formating

Function parameters should be separated by ', '.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",88,35,0
"thesofproject/sof","d9c1c28fd5f101897cff0660cd91114040087dc3","xun2z","2019-04-08 01:20:04","false","scripts: build-tools: exit immediately when return an error value

fix build-tools script to exit immediately when error occurs.

Signed-off-by: Xun Zhang <xun2.zhang@intel.com>",46,10,0
"thesofproject/sof","e6f677959bf0604ceb527a8e6ee5f24400ce0931","singalsu","2022-02-08 09:20:13","false","Tools: Test: Audio: Fix typos in tools/test/audio/*

This patch fixes the typos in audio test Matlab code.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",106,44,1
"thesofproject/sof","8703937c11f32174007870b49c65184fa8eda452","balakishorepati","2021-07-07 15:09:25","false","Add AMD platform specific changes

Update hd->local_pos instead of wrapping it to zero
for amd/renoir platform.
Update trace dma channel number specific to platform
instead of default channel 0.

Signed-off-by: Basavaraj Hiregoudar <basavaraj.hiregoudar@amd.com>
Signed-off-by: Anup Kulkarni <anup.kulkarni@amd.com>
Signed-off-by: balapati <balakishore.pati@amd.com>",87,37,0
"thesofproject/sof","df82bdb9bcc8b81eb2fc7e96090589ee4284822d","tlauda","2018-07-06 09:30:16","false","interrupt: alloc child irq_desc on runtime heap

Changes allocation of child irq_desc from system heap
to runtime heap, so it can be freed on interrupt unregister.
It also requires changing the number of runtime heap blocks.
1024 size blocks can be disabled for now, as they aren't used.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",11,1,0
"thesofproject/sof","2bd725df02810db5dc1975c0432843c2d2098dad","tlauda","2019-09-13 09:52:52","false","trace: move platform_trace_point to dedicated headers

Moves platform_trace_point macro from platform/platform.h
to platform/trace/trace.h. This way we don't need to
include platform header from generic sof/trace/trace.h.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",62,15,0
"thesofproject/sof","8309e53e6c950b650771736057ecb4c35300c033","tlauda","2019-08-01 14:45:32","false","ll_schedule: decrease code of schedule and reschedule

Decreases code of schedule and reschedule functions by
removing small helper methods, which weren't needed.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",53,14,0
"thesofproject/sof","71d9ee46817632d855d375daa27b63d2ee8073b1","tlauda","2019-09-18 13:32:29","false","platform: cavs: switch to DMA single channel domain

Switches from DMA multi channel domain to single channel
as the scheduling source for one of the low latency schedulers
for cAVS platforms.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,16,0
"thesofproject/sof","0f878a731254837cdde1339b6939031f3395d293","singalsu","2020-04-23 16:45:32","false","Tools: Test: Change IIR and FIR response in playback test topologies

This patch changes the response for both EQ types into loudness
shape (bass boost, mid attenuate, high boost) that is a useful
in validating EQs functionality. The previous flat response does
not exercise thoroughly the processing functions.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",71,23,0
"thesofproject/sof","599e1800bab31883cf1f9e845279d079d4950c58","lgirdwood","2018-06-27 07:04:41","true","Merge pull request #21 from ranj063/temp

host: remove unused variable",6,1,0
"thesofproject/sof","4146968e10a223799776d2c76dbcadacf93af698","mrajwa","2019-08-01 19:23:00","false","kpb: log error and stop pipeline copy if no bytes to copy

This patch checks if ""copy_bytes"" which is the minimum
of sink->free and source->avail is != 0. If so we go
further with copy and internal buffering.
If no we log error message and return from
copy function.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",53,14,0
"thesofproject/sof","411b9377c85e07afacf6c63db11b88b0ee3aa53a","mrajwa","2020-01-30 14:17:41","false","boot_loader: fix lp_sram_init

This patch fixes LP_SRAM_INIT - this
procedure was reading wrong register.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",75,20,0
"thesofproject/sof","04b1ce4883ea06ccc0487b00ab995ee134368b7c","lgirdwood","2018-10-29 16:50:22","true","Merge pull request #517 from mmaka1/hda-size-fixed

dma: hda: Free size computation fixed",27,5,0
"thesofproject/sof","44137fad6c4a8e5dbf4ae8a959885086f3a81748","mrajwa","2020-11-23 16:50:34","false","codec_adapter: add local buffer

This patch adds local buffer to codec adapter. The aim of
this buffer is to damp any irregularity between pipeline
and codec. The difference in buffer sizes is one of the
examples here - thanks to additional local buffer we can
call codec processing several times during one period or
we can store several pipeline periods in local buffer and
process them once.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",75,30,0
"thesofproject/sof","9459cc05347dce93eb9e4c2079461ec34d1f4128","lgirdwood","2018-06-21 07:09:57","true","Merge branch 'master' into cavs_common",1,1,0
"thesofproject/sof","c07ba31fb942cd07663c2aea427b5ad1f5e57794","lgirdwood","2018-07-06 10:43:05","true","Merge pull request #65 from tlauda/topic/free_core_structs

arch: free core specific structs",11,1,0
"thesofproject/sof","fa287e637b8ea4f8bd54ce54d1a2efa47b23ec0d","RanderWang","2022-02-09 08:01:04","false","dw-dma: disable linear link position when releasing dma channel

The linear link position is only used by windows driver for
computing present position. When doing pause-resume operation
only zero data is reported by linear link position register.

Currently when stream is resumed after paused, dw-dma will
be first stopped and then started and the value of link position
register is cleared when it is disabled.

This patch will disable linear link position when the dma channel
is released

Signed-off-by: Rander Wang <rander.wang@intel.com>",108,44,1
"thesofproject/sof","1e7220e4d0497e5ca0409af8993dcb4d62479847","RanderWang","2022-05-11 06:11:04","false","ipc4: return ipc4 error status instead of posix error

Convert posix error to ipc4 error and return ipc4 error for
functions in ipc4 directory.

Signed-off-by: Rander Wang <rander.wang@intel.com>",113,47,1
"thesofproject/sof","9ebd1bce8849b85401d1d333d0efa23f7a080b8f","RanderWang","2018-09-03 07:21:03","false","dw-dma: refine dw_dma_stop to clear done bit in all lli

The initialization of lli should be out of loop

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",28,3,0
"thesofproject/sof","2584500c35544d2d833c330e3bd8bf185b4a9dec","libinyang","2022-12-11 11:51:39","false","topology2: add dmic-wov.conf

The dmic-wov.conf file implements the WOV feature. The connection is

DMIC ------> KPB ------------------------------> host_copier
              |                                    ^
              |                                    |
              |----> micsel ----> wov ------> virtual_widget

The DMIC and KPB is on DAI ppl.
The host_copier is on Host ppl.
The micsel, wov and virtual is on wov ppl.

The connection between host_copier and virtual_widget is a
virtual connection. The virtual_widget doesn't exist in the FW.

Signed-off-by: Libin Yang <libin.yang@intel.com>",103,54,1
"thesofproject/sof","250a17c449fc24df50de407e6eb60cbd66f4dff9","andrula-song","2023-04-26 05:09:52","false","Smart_amp: Split dummy smart_amp to IPC3/IPC4 version

Split smart_amp_test.c to IPC3 version smart_amp_test_ipc3.c
and IPC4 version smart_amp_test_ipc4.c

Signed-off-by: Andrula Song <andrula.song@intel.com>",52,59,1
"thesofproject/sof","01447692297184964a18f3c7687f7a9e053d9d8b","gongjun-song","2022-12-14 13:26:22","false","topology1: add sof-rpl-rt711-l2-rt1316-l01

Add sof-rpl-rt711-l2-rt1316-l01. This tplg doesn't include any
local MICs.

Signed-off-by: Gongjun Song <gongjun.song@intel.com>",96,54,1
"thesofproject/sof","734281116897767c8b57eef8f1c3196940f82e29","jajanusz","2019-01-28 12:25:32","false","cmake: make CI builds verbose

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",59,8,0
"thesofproject/sof","1c1243b8900905138021649cfde1e7559f3aa2af","ujfalusi","2021-10-07 11:49:31","false","lib: dai: Drop temporary variable use from dai.h

The use of temporary variables in the header was introduced by
commit 1bb78a5caba70 (""dma: use platform_shared_commit()"")

When the platform_shared_commit() use is removed by
commit 580b9cf005952 (""memory: remove platform_shared_commit() as it's a NOP on all platforms."")

The temporary variables remained for no reason.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",121,40,1
"thesofproject/sof","2474fb48c685f50e3b923fece19d672c8f5a9757","ujfalusi","2022-09-23 05:40:04","false","topology2: Revert the conditional topology2 building for CAVS/ACE

The MTL support added conditional build for topology2 based on CONFIG_CAVS
or CONFIG_ACE.
This is wrong for several reasons:
There is not ace directory present
The Kconfig system is not used when building topologies, so we are ending
up not building topology2 files at all.

There is no reason why CAVS and ACE topologies should be exclusive.

Fixes: 784bce763c0e (""mtl: Added meteorlake platform to the build system"")
Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",97,52,1
"thesofproject/sof","38c84de7479f242c9a7b5c779ce8a5ac1910ddc6","jajanusz","2020-01-10 00:04:03","false","trace: add mn class

Add trace class for M/N divider.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",75,19,0
"thesofproject/sof","b4f2e2a964784a2da885e4a92ae159bf42aeed2e","jajanusz","2019-06-08 11:29:29","false","byt: ssp: add quirks support

Enables SSP quirks supported by BYT and checks
for unsupported quirks requests.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",54,12,0
"thesofproject/sof","6af9fc5cfe505ce7f0788ab5378678f48bb98490","johnylin76","2021-07-26 06:02:55","false","multiband_drc: Clean up source_format on component reset

Clean up all contents in component data on reset().

Signed-off-by: Pin-chih Lin <johnylin@google.com>",99,38,0
"thesofproject/sof","cdf734bd2b0579539e87d01941ab365c6900a158","johnylin76","2020-10-07 07:47:00","false","sof: drc: Implement delay only when DRC disabled

Delay the input sample only and don't do other processing. This is used when
the DRC is disabled. We want to do this to match the processing delay of other
bands in multi-band DRC kernel case.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",67,28,0
"thesofproject/sof","b2254b34b0eac9d01e56409d0e02bf6487c3a96d","dbaluta","2020-03-03 13:40:49","false","drivers: sai: Make indentation consistent

Always use one tab between a macro name and its definition.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",78,21,0
"thesofproject/sof","987d34aa985e4e8b3f640963be7c09bb74c09024","dbaluta","2019-05-20 11:31:09","false","xtensa: exception: Some xtensa configs don't have level 6 IRQ

Similar with: commit 52e25dc81432 (""xtensa: exception: Some xtensa.."")
we need this patch because imx8 config does not have level 6 IRQ and
we hit a compilation error.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",58,11,0
"thesofproject/sof","05e1c26166bec568067fe863fd510f8aa8e585b6","plbossart","2018-06-18 19:27:32","false","byt-ssp: fixes for DSP modes

For some reason SSCR3 fixes prevent DSP_A and DSP_B from working:
DMAs don't start and an IPC error is eventually thrown.

Fall back to reset value (recommended in data sheet), this fix
lets DMA go on in DSP_a and DSP_B modes.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",1,1,0
"thesofproject/sof","7b64a5fde81fd2ba2db5c52a4ef4bfa2b3d60854","lrgirdwo","2018-09-28 15:07:37","false","sue: dmic: Add support for sue creek.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",37,4,0
"thesofproject/sof","18673780c3a5bf38bb29a665ea7a780aa312dcf3","lbetlej","2019-03-07 18:07:08","false","test: selector: add support for binary configuration data

Channel selector component supports configuration get/set using
COMP_CMD_GET_DATA & COMP_CMD_SET_DATA commands
of SOF_CTRL_CMD_BINARY type

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",67,9,0
"thesofproject/sof","2802204754a74882d8e032a9c658ed099676f4fe","lrgirdwo","2018-12-20 14:01:45","false","pm: handler mask all IRQ sources.

Interrupt mask is 32bits so make sure we mask it all.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",53,7,0
"thesofproject/sof","3dfa1335741a08e06bc78f4ed2d3b8cb46694160","plbossart","2019-01-16 05:08:05","false","src/include/sof/audio/pipeline.h: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","15d5a9545b2bb0b7f74f524a7b6260d05050cad9","lrgirdwo","2018-09-28 14:48:29","false","rimage: add initial support for sue creek.

Build tested.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",37,4,0
"thesofproject/sof","15065eb01c620f7fcb46440a4a6d54576b272511","jajanusz","2019-08-09 11:05:10","false","cmake: add sof_add_static_library utility function

Adding static libraries properly may be troublesome for developers
that are not familiar with CMake, so function that makes it easier
should be useful.

Usually developer will just add sources directly to the target.
Using static libraries should be limited just to closed / precompiled
3rd party components.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",54,14,0
"thesofproject/sof","2865cc2bb2e24156b83c48f2d6b34574abc92729","lrgirdwo","2022-08-24 20:05:47","false","testbench: cmake: parser does not use CONFIG_LIBRARY cmake variable

Not used by parser cmakefile so delete.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",111,51,1
"thesofproject/sof","1a643ca4b0bb4244a8a564526242cc076b1c4c06","btian1","2023-05-25 09:09:47","false","copier: refactor copier new for host, dai and gateway case

Move more code from copier to its component function.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",52,60,1
"thesofproject/sof","5257bd2dab9aed498e517c9be734ecf8ee3617bb","jajanusz","2020-06-09 12:49:45","false","cavs: timer: set logical_irq for arch timers

All timers should have logical_irq properly set up.
In case of arch timers logical_irq is equal to irq.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",73,24,0
"thesofproject/sof","36114685aa921e5a4caaf64d695afd7153d8c77f","lrgirdwo","2020-04-15 12:07:05","false","scripts: cmake: set command dir for git commands

The git commands to get version strings need to run in the SOF source
directory. This is not automatically set when building for Zephyr so
fix it.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",82,22,0
"thesofproject/sof","ef8df6f95c1318467c95733201105b835cbef3b7","lrgirdwo","2019-01-11 15:54:40","false","heap: buffers: Increase buffer heap size by least used large blocks.

Trace show large blocks infrequently used. Decrease usage count so we
can increase buffer heap.

TODO: Large block could be completely removed and we could be allocated
from buffer heap instead.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",55,7,0
"thesofproject/sof","a38e40057f887fa7dd3cd7e385cbd7dd6fbca9dd","dbaluta","2019-02-01 22:23:45","false","rimage: Add support for imx8

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",59,8,0
"thesofproject/sof","ade9145e7c8415ebc7d398dae74414a23d2c3240","dbaluta","2020-02-26 08:17:18","false","CI: travis: Add boot test for i.MX8

imx8 is now supported in qemu up to boot. So, add
it to boottest list.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",76,21,0
"thesofproject/sof","7ca9a2eb8aedce1720408772a9d4ef5db3bc36d4","dbaluta","2023-09-11 10:39:48","false","driver: imx: Add PDM MICFIL driver

The Pulse Density Modulated Microphone Interface (MICFIL) is a popular
way to deliver audio from microphones to the processor in several
applications, such as mobile telephones. However, current digital-audio
systems use multibit audio signal (also known as multibit PCM) to
represent the signal. This block implements the required digital
interface to provide a 24-bits audio signal from a PDM microphone
bitstream in a configurable output sampling rate.

This patch adds initial support for PDM MICFIL IP found on i.MX8MP
board.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",19,63,1
"thesofproject/sof","fb545a36841977b5ab644a2054776fdf144cebdd","dbaluta","2019-02-11 10:50:19","false","task: Allow conditional compilation for low priority tasks

On i.MX we have only two software interrupts available. One is used
as PLATFORM_SCHEDULER_IRQ and the other one for PLATFORM_IRQ_TASK_HIGH.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",59,8,0
"thesofproject/sof","66fd8cefbac39d02a23cb8ff43372f4d1d3c0c57","PayalKshirsagar","2020-03-23 12:58:16","false","tools: logger: avoid NULL comparison

Change suggested by coccinelle.
Avoid NULL comparison, compare using boolean operator.

Signed-off-by: Payal Kshirsagar <payalskshirsagar1234@gmail.com>",65,22,0
"thesofproject/sof","0573f9ad519d702da18a41ebc9afab8b4cff0a62","btian1","2023-08-31 03:41:36","false","audio: volume: move peak volume header to volume folder

move peak volume header from ipc4 include path to volume folder.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",23,63,1
"thesofproject/sof","1ef9979c7327296fe619ea206daad11682bced7c","plbossart","2022-03-16 01:39:30","false","topology2/cavs/cavs-mixin-mixout-hda: remove pipeline object from widget

The pipeline stream_name is not used at all, and as a consequence we
can remove the pipeline from the Widget objects

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",107,45,1
"thesofproject/sof","ef307ba6844d81928d5d3918dc2f3f416cc1bbbf","plbossart","2018-08-08 01:02:46","false","kmod_scripts: filter out DMA trace overflow

The occurrence of DMA trace overflows has become so bad I need to
filter out these error messages to test module load/unload. Sad but
what can I say.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",18,2,0
"thesofproject/sof","0cc0ab6061917f96b7744f59f6bf2cb685f3c0c9","lbetlej","2018-11-21 18:23:55","false","Fixes for macros used for bit masks creation.

Bit mask setting macros for for specific parameters were expanded
in a way that was causing unexpected compiler behaviour. Specifically:
literal 1 was treated as 32bit integer ((1 << ((b_hi)-(b_lo) + 1)) -1)
was expanded to shift the 32bit integer by 32. ((1 << (31 - 0 + 1)) -1)
Macro MASK() was was missing left shift.

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",39,6,0
"thesofproject/sof","c22b862c28d17082d6461d5acdb5addac14a4c77","lrgirdwo","2021-10-06 13:01:50","false","testbench: library: make C library malloc info a debug output

The malloc output is useful for debug only otherwise it can add more
noise to the trace output.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",121,40,1
"thesofproject/sof","c1f8001069aeeabe7bee2be9887198ded51e2161","lrgirdwo","2019-01-09 21:43:10","false","gp-dma: Fix link position counter register block sizes

Register block size is 0x10

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",57,7,0
"thesofproject/sof","04b229d2b3f1f4fddc44c9bf27c93990dd1867cc","dbaluta","2019-12-03 12:36:24","false","kconfig: Move WAITI_DELAY outside of CAVS menu

WAITI_DELAY is selected for LX6 Xtensa platforms one of which being
i.MX8 Hifi4 DSP.

Also, remove the input prompt because the actual WAITI_DELAY cannot
be set at compile time it is automatically selected based on arhitecture.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",68,18,0
"thesofproject/sof","b37ed9049db6a8bcf162806e3996140a08e7a187","dbaluta","2019-11-08 08:56:20","false","include: ipc: Update comment for type field of sof_ipc_comp_process

We need this in order to match the exact comment from the
similar file in the Linux kernel.

sof_ipc_effect_type was the old name of the component no longer
used now.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",54,17,0
"thesofproject/sof","68871b05cab2edef42a158556ef9fa38ef4f9019","brentlu","2022-04-13 12:17:48","false","topology: sof-adl-cs35l41: support cs35l41 speaker amplifier

Add a topology sof-adl-cs35l41 which supports four Cirrus Logic
CS35L41/CS35L53 speaker amplifiers running in TDM mode without
headphone codec on ADL platform.

Two compile options are added to support the board configuration:
'NO_HEADPHONE' removes headphone pipelines from the topology while
'SSP_AMP_LINK_ORDER' uses the DAI Link order in sof_ssp_amp.c machine
driver instead of sof_rt5682.c.

Signed-off-by: Brent Lu <brent.lu@intel.com>",117,46,1
"thesofproject/sof","9b8bb275c1feb447af6353816434d6782e630802","keyonjie","2021-05-24 11:49:21","false","dw-dma: allocate RUNTIME_SHARED for dw_chan

The DMA channels need to be shared among pipelines and DSP cores,
allocate buffer for it in RUNTIME_SHARED area.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",84,36,0
"thesofproject/sof","af9e22013af48e63e82d439a55986c1ec7a57eda","jajanusz","2019-05-24 11:20:53","false","alloc: add types for DEBUG_BLOCK_FREE values

Change symbols to be more explicit.
There are different sizes of the same pattern, so they
should indicate which one has what size.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",64,12,0
"thesofproject/sof","931013502052a9ce3b2e2025a90015e32dcee4a2","jajanusz","2019-03-22 13:30:45","false","include: add header for unit testing

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",66,10,0
"thesofproject/sof","2150974ade417f54ffc73093ee3d5c804d56bd58","mrajwa","2019-05-16 06:50:25","false","detector: fix bug of incorrect amount of samples in detecting function

This patch solves the issue with wrong number of bytes
being passed to detecting function therefore causing a loss
of recorded data.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",66,11,0
"thesofproject/sof","a1c498e7d1c8ef7c6cf08589e8c945151fde96ea","mrajwa","2019-10-30 14:20:09","false","kpb: rework of validate_host_params() function

This patch slightly reworks validate_host_params()
function to check how big is host buffer. If it is
big enough to store all data from history buffer we
can skip further validation.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",59,17,0
"thesofproject/sof","9f1106d8a5e1321cc0de8ba48c99f9fb6a27c07a","ymdatta","2020-07-22 12:05:29","false","testbench: add null pointer check for function argument

tb_pipeline_params() function takes an argument called ipc_pipe,
which is a pointer and is derefernced in the function to access
a member of structure that pointer is pointing to.

If this pointer is NULL, this leads to Segmentation fault. A
null pointer check is added before the argument is dereferenced.

Signed-off-by: Mohana Datta Yelugoti <ymdatta.work@gmail.com>",76,26,0
"thesofproject/sof","ae8b2e0730ddc7d24f17bf65bdd2155d2857100a","cujomalainey","2021-09-21 23:31:46","false","crossover: fix return type

Can't return a negative error if we are returning an unsigned type.
C is great right? No reason to ever use something like rust...

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",117,40,0
"thesofproject/sof","e584701a0170aff5dd9ca291bc91566f114a4d18","kfrydryx","2022-11-28 07:55:01","false","ipc4: basefw: Handle kcps related IPCs

Handle register_kcps, resource_allocation_request for kcps,
power_state_info_get.

Signed-off-by: Krzysztof Frydryk <krzysztofx.frydryk@intel.com>",99,54,1
"thesofproject/sof","4f8a70dd2311c9606577088188d2788db739e9eb","ranj063","2022-03-18 02:59:13","false","codec_adapter: Copy from all output buffers

Modify all codec implementations to copy the produced samples to the
output_buffer. Copy the produced samples from all output buffers in the
sink_buffer_list. Remove local_buff from struct processing_module as it
is no longer needed.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",110,45,1
"thesofproject/sof","ebc222dab56868ea3cb0d5abec5057990eae6bb9","ranj063","2022-06-01 17:19:11","false","testbench: fix UUID declaration for file

Use DECLARE_SOF_RT_UUID and fix the uuid name in the comp_drv for the
file component.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,48,1
"thesofproject/sof","bd84f96cb9c3abf3cbd2a0e930c3e635d1516fb8","RanderWang","2018-08-08 03:01:56","false","trace: refine reschedule time for dma trace

It is a simple fix for trace buffer overflowing at the boot
up time or debug mode FW. At boot up time, there are many trace
events for topology loading in very short time, the trace buffer
needs to be scheduled ASAP. 5us is the shortest time works on
every platforms.

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",18,2,0
"thesofproject/sof","15e891202f848e595540e5d43a31f97f8fa2d365","RanderWang","2018-12-04 07:59:38","false","topology: hda: refine dai setting for hda

This refinement follows commit on WHL

topology: whl: refine topology for hda on whl

    Fix the issue that ipc timeout when simutalously playback
    and capture. Now in FW, playback and capture are supported
    by different dai. So dai index should be different for playback
    and capture in the same be dai, or playback would use the same
    dai as capture

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",41,6,0
"thesofproject/sof","3b2cfd80f9c340bf5e81e4682e8e114da2633414","xiulipan","2019-01-03 09:09:12","false","scripts: remove all soft related stuff

soft is now sof/tools remove all outdated things.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",49,7,0
"thesofproject/sof","a2646979612efbc9e27277d7ab608ede4e6a4813","dcpleung","2020-03-25 17:16:03","false","Use CMake to build rimage

This adds the necessary bits to allow building rimage
with CMake with similar configure options as the just
removed autotools files.

Also update README.md for new build instructions.

Signed-off-by: Daniel Leung <danielcp@gmail.com>",65,22,0
"thesofproject/sof","e8c34fd62ea5d15edd960fece177c42c3e17fd93","softwarecki","2022-07-01 20:51:03","false","component: New function comp_get_base_module_cfg

Created new function comp_get_base_module_cfg which allows
to get component's base configuration. This function is still
access a component's private data in ugly way but it allows
solve this issue easier in the future.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",110,49,1
"thesofproject/sof","cc0d9f09e4f309e9e70b9a47067c937ff26391d1","johnylin76","2023-01-10 09:00:41","false","topology1: define SPK_PLAYBACK_CORE for Speakers running core

Defines the target core ID for Speakers and Echo Reference pipelines
explicitly. When GOOGLE_RTC_PROCESSING is defined, it will be set to
the same ID as DMIC48K pipeline.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",54,55,1
"thesofproject/sof","c620922703feec9ebcbca092d5c5297aefc3a8ec","tlauda","2018-06-14 09:02:24","false","volume: add HiFi3 implementation

This patch adds HiFi3 implementation of volume component.
Implementation was splitted into generic and HiFi 3 specific.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",1,0,0
"thesofproject/sof","2b17a8605dba93872033e76354a91e474967c36a","mrajwa","2020-11-27 13:53:04","false","topology: add missing C_CONTROLBYTES for post processing

This patch adds C_CONTROLBYTES for runtime parameters of
post processing topology.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",78,30,0
"thesofproject/sof","dfc0f671948d1714771ebf801e3490c03b3979ab","lgirdwood","2018-06-27 18:54:51","true","Merge pull request #10 from singalsu/topic/fix_src_playback_pipe_buffers_v1

SOFT: Increase SRC playback topology buffer size",6,1,0
"thesofproject/sof","2b9be99f0d9c8e65ff1d0d5c0df584bf20824eab","lgirdwood","2018-08-20 08:18:32","true","Merge pull request #234 from RanderWang/apl_fw_ipc

apl: check host status before sending ipc msg in fw",18,3,0
"thesofproject/sof","f18a895aec7610da51f78c72cb7b220fb21d18ac","cujomalainey","2018-11-16 23:08:11","false","Update sof-byt-rt5651

Correct graph

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",40,5,0
"thesofproject/sof","5436fec004bfc13ff67c73677e9c9f06c8e5ef78","cujomalainey","2021-04-20 20:33:01","false","tplg_parser: don't use unsigned types with signed math

cppcheck is (legitmately) upset that we are doing signed math size_t

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",89,35,0
"thesofproject/sof","149addaef6532c1f4e6b2bb9f1ad6205ce287437","cujomalainey","2020-09-30 00:09:18","false","host: remove Wl flag as it upsets clang

remove this flag as clang-12 considers it unused

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",67,28,0
"thesofproject/sof","0a57440a350e700848d8b4546b06be43d0249975","keqiaozhang","2019-01-08 07:02:49","false","test: add a script for multiplex pipeline stress test

This script is used for simultaneous playback/capture test on
arbitrary multiple pipelines.

Signed-off-by: Zhang Keqiao <keqiao.zhang@linux.intel.com>",53,7,0
"thesofproject/sof","093f6b70daf705f3441d61ecac16f3a8086ea038","keqiaozhang","2018-11-21 08:06:21","false","topology: add 4-ch dmic topology for ICL

Signed-off-by: Zhang Keqiao <keqiao.zhang@linux.intel.com>",39,6,0
"thesofproject/sof","69a7cf556a55f11e547d925b436763f72c660d2d","mwierzbix","2018-08-07 10:33:28","false","test: lib/rstrcmp: Added unit tests for lib/rstrcmp.

Signed-off-by: Michal Jerzy Wierzbicki <michalx.wierzbicki@linux.intel.com>",18,2,0
"thesofproject/sof","d01f1629beb54ac74aec481764c5bf533024e628","ranj063","2019-10-22 15:35:59","false","topology:cml/glk: name the graphs appropriately

Fix the copy/paste errors in naming the keyword-detect
pipeline connections for CML and GLK.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",66,17,0
"thesofproject/sof","8d5e624d03477a1fd825f318584f2af635875674","ranj063","2023-06-08 01:03:37","false","topology2: intel: hdmi-generic: Replace audio_format objects

Use the input_audio_format and output_audio_format objects instead.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",46,60,1
"thesofproject/sof","f1fe78367a91a5ded6c08ad3e9805beab92c62d2","abonislawski","2019-05-28 09:43:50","false","memory: new memory layout for APL, ICL, CNL and SUE

This will optimize memory usage and introduces two significant optimizations:

> Separate the memory (heaps, stack) by cores so if we will turn off a specific core we can also turn off all memory of this core.
> Remove fixed defines and gaps, previously stack was at fixed position: end of memory and buffer heap was everything between stack and fw. Now everything will be packed at sof_fw memory segment and takes only this memory which is really needed, everything else we can turn off.

Changelog:
BSS section now includes heaps and stack
Removed many heap fixed position defines
Removed gap before fw text section
memmap init is using real linker positions for heaps
Temporary stack for boot_ldr placed in heap_hp_buffer (safe)
sof fw max_size and segment limited to memory configured by memory banks count

Using new macro to stack init per core
Stack is no longer a one big block for all cores (core_count*stack_size)
System_runtime_heap and system_heap are no longer a one big block for all cores

For suecreek memory it will also introduce similar changes previously introduced
in other platforms
(One shared memory block SOF_FW for SOF_TEXT, SOF_DATA and SOF_BSS sections
Moved fw_ready near to .rodata and .data)

Memory layout for every slave core aligned to hw memory bank:
--align to memory bank--
system_heap
system_runtime_heap
stack
--align to memory bank--
next slave core..

Similar layout applies to master core

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",63,12,0
"thesofproject/sof","e4c1651b3609decde51b908cc43433f882c0a532","ranj063","2019-04-23 04:38:14","false","topology: glk: add more virtual widgets

Add some more virtual widgets to suppress the machine
driver errors.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",47,11,0
"thesofproject/sof","d523e67e6e13dd783e7450a32afa29a18607da56","ranj063","2021-12-12 05:01:19","false","topology2: tokens: Add additional tokens needed for cavs topologies

Add all tokens required for cavs topologies.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",120,42,1
"thesofproject/sof","c9af1b69663e5f065441f4e95d30c64269d343e1","keyonjie","2020-05-29 06:15:43","false","lib: add memcmp for memory comparing

Add function memcmp for comparing two length-limited memory.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",97,24,0
"thesofproject/sof","692299f2a65fc4ab3ef1654a08be21dce7b9e4a9","ranj063","2022-01-19 17:44:44","false","codec_adapter: Remove setup config from module data

Remove the setup cfg from struct module_datai and have one just common
config. The config sent during module init should be saved a set up config
within the module's private data if the module needs it. Modify the
cadence_codec_data and the waves_codec_data to add the setup config to
save the initial config that can be applied during prepare when it is
invoked during the reset.

Remove enum module_cfg_type and struct ca_config as they are no longer
needed.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",113,44,1
"thesofproject/sof","762f63bf8b4b8c63e7611cdcfbe2fc72c67e08ab","XiaoyunWu6666","2022-06-28 16:17:48","false","xtensa-build-zephyr: add option to build FW in cavs naming style

Add argument option --fw-naming for specifying FW output with its
filename set with AVS style(filename as dsp_basefw.bin specifically)
OR SOF style(filename as sof-{platform}.ri). SOF style is by default.

This will be useful when building SOF+Zephyr IPC4 FW, because
dsp_basefw.bin will be loaded by default when snd_sof_pci parameter
ipc_type is set to 1 (which indicates running IPC4 mode).

Signed-off-by: Iris Wu <xiaoyun.wu@intel.com>",113,49,1
"thesofproject/sof","1bda0c52541ee64132ff005ac5ed333fe7126080","softwarecki","2023-03-29 16:30:05","false","manifest_module: Add is_bootloader field

A is_bootloader field has been added to determine whether a module is
a bootloader. This is clearer than checking the module index and the number
of modules in different places in the program.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",58,58,1
"thesofproject/sof","0c2069c2c301dca2ce4b4dc7f28a617e4435dd28","softwarecki","2023-10-26 14:51:11","false","lmdk: Remove content of the .module section from final module image

The .module section contains the module manifest read by rimage. It should
not be included in the final loadable module image. Flags of this section
are now modified using objcopy to ignore it by rimage.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",7,65,1
"thesofproject/sof","d20916066e1a8226ac3a0b91bb10781ac2219fad","softwarecki","2023-03-07 14:28:12","false","misc_utils: Added functions to print enum and flags value

Added name_val structure representing name/value tuple. Added function
print_enum which displays the name of the enum corresponding to a given
value. Added print_flags function which display names of flags constituting
a given value.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",57,57,1
"thesofproject/sof","96496f7f7dfdd9f06e632dbea8ea4a8ede682d3c","cristinailie","2021-03-17 20:33:02","false","kwd demo: implement getters & setters in detection_test to expose variables necessary to other modules

Expose sample_valid_bytes, detected & drain_req
variables from detect_test component necessary
to other detection modules

Signed-off-by: Cristina Feies (ilie) <cristina.ilie@nxp.com>",72,33,0
"thesofproject/sof","4c3aafea4cdb88a72c3b60f502cf9b61b4dee77a","RanderWang","2021-10-18 08:05:48","false","ipc4: add set_large_config support in copier module

Currently copier only supports setting sink format and
auttenuation in set_large_config ops, not in cmd ops.
We will add other features step by step.

Signed-off-by: Rander Wang <rander.wang@intel.com>",122,41,1
"thesofproject/sof","c4f6b3dfc5da3025553b9b21efcc46f001a31ec6","RanderWang","2022-09-22 03:13:53","false","topology2: sdw: share the deep buffer conf setting

Deep buffer is mixed with Jack out.

Signed-off-by: Rander Wang <rander.wang@intel.com>",97,52,1
"thesofproject/sof","196f86cde45118eeca84fac926d2f6a9ac6d7191","RanderWang","2023-08-18 07:21:47","false","topology2: change the sample type for Linux audio system

At first the sample type is set to MSB_INTEGER to follow windows
settings, but actually we use LSB_INTERGER type such as S24_4LE.
Now change the default sample type to LSB_INTERGER to align with
FW usage. For DAI copier we need to use MSB_INTERGER for hardware
requirement. Currently sample type only affect s24/c32 case, so only
change sample type in dai for this format config.

FW will use sample type to choose correct format conversion
function and can deal with Windows audio stream correctly with MSB
s24/c32 format.

out_fmt_cfg is redefined for a alsa-lib bug. Alsa-lib will first process
out_fmt_cfg = '$[($out_channels | ($out_valid_bit_depth * 256)) |
($out_sample_type * 65536)]' in base class and then deal with
out_sample_type, so error is reported. Now first define out_sample_type
and then out_fmt_cfg, everything works.

Signed-off-by: Rander Wang <rander.wang@intel.com>",25,63,1
"thesofproject/sof","eb9b04a20549b020ea2a4b0a3567af44d4a222ba","ranj063","2021-05-14 21:02:00","false","drivers: Intel: DMIC: make DMIC prm and active fifo count shared

When the DMIC pipeline is moved to a core other than the
primary core, the DMIC params and dmic_active_fifos are
not valid. Modify them to be shared data and handle
cache management when accessing/modifying them.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",86,35,0
"thesofproject/sof","e9d87f4c4c4f96b5268da8a9bab765a601b2624e","ranj063","2022-01-08 01:46:44","false","codec_adapter: rename codec_init() to module_init()

Rename the codec_init() function to module_init(). No functional change.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","9da71a87084b635dae085bf34fff9dc283cae818","ranj063","2023-05-02 17:53:05","false","dai-zephyr/dai-legacy: split the dai_prepare() function

Split the dai_prepare() function and add a new helper,
dai_zephyr_prepare() that can also be invoked from the copier device.
Also modify the dai_config_prepare() function to pass the dai_data and
device separately for use with the copier device.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,59,1
"thesofproject/sof","f983cb0c557c363f2c975782df614af865724a01","balakishorepati","2021-09-14 15:53:06","false","drivers: amd: renoir: fix for ipc timeout issues

This patch fixes the ipc timeout issues by avoiding
the acquiring of ipc lock in platform ipc driver, which
was already hold by ipc core thread during ipc complete command.

Signed-off-by: balapati <balakishore.pati@amd.com>",117,39,0
"thesofproject/sof","e525c177b5dda8fc4c19b422026fa5f90d913522","singalsu","2019-12-05 09:54:07","false","Volume: Fix for gain ramp step macro value

This patch fixes the calculation of macro VOL_RAMP_STEP_CONST
that is used in linear step size calculation. The previous version
calculated incorrectly the value as inverse. However with used ramp
update rate of 1000 us there were no issues seen because the value
and inverse were both 1.0. The bug would have triggered with with
a faster or slower ramp update rate.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",69,18,0
"thesofproject/sof","20e1c1f6e967b837e2de19982a739164f40a7a28","singalsu","2018-08-28 10:32:27","false","SRC: Prevent downstream pipeline xruns with sink buffer pre-fill

This patch adds a feature to pre-fill in some SRC conversions sink
buffer with a number of samples that ensures clean start of the pipeline.
The pre-fill happens for modes where minimum output block size is less
than default sink period length. This impacts e.g. 44.1 -> 48 kHz
conversion. Simple conversion like 32 -> 48 kHz do use this.

The bad SRC playback pipe quality is fixed only partially with this
patch (a high rate rattle sound). There is a remaining buffer corruption
seen (at lower rate) that is not impacted by this fix.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",22,3,0
"thesofproject/sof","7522a7b6fc8408dcd5c855e7545a347187bd4bd5","singalsu","2021-04-26 14:23:35","false","Audio: ASRC: Move DAI timestamping setup request to trigger start

The asrc_dai_configure_timestamp() caused a DSP panic when called from
asrc_prepare(). The reason is that DAI prepare now happens after ASRC
prepare. Call from trigger start is after pipeline prepare so it
avoids this problem.

Fixes: #4068

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",84,35,0
"thesofproject/sof","6d6637d608278f4a571125ff6afb3b22b5d397d7","singalsu","2023-10-25 10:05:51","false","Tools: Topology2: Add sof-hda-benchmark-gain16/24/32-tgl build

This patch adds test topologies build for gain component. Testing
of gain can be done with all supported s16/s24/s32 source and sink
formats. The topologies normally use only the s32 format
internally.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",8,65,1
"thesofproject/sof","c5a9234712f4c85aaa57993fbfa03e94125601eb","iganakov","2022-11-17 17:21:21","false","mtl: enable KPB module

Enable building KPB module on MTL platform

Signed-off-by: Ievgen Ganakov <ievgen.ganakov@intel.com>",97,53,1
"thesofproject/sof","8d2542f5015210b4e4caef2f5b056f9898f1fce1","kv2019i","2022-11-16 17:31:46","false","init: enable more accurate log timestamps in Zephyr builds

Use the log_set_timestamp_func() interface to configure
the logging subsystem to utilize maximum granularity of the hardware
clock when printing out log timestamps. By default log_core_init()
will set granularity to 1ms, which is too coarse for SOF logs given
typical 1ms tick rate for the low-latency scheduler.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",97,53,1
"thesofproject/sof","9ce91cbf745eb6603c7e4234821cfe475c137acb","marc-hb","2021-12-18 05:14:25","false","logger: rename verify_fw_ver() to verify_ldc_checksum(), fix -h help

Fixes commit 901f991eee82 (""logger: Validate by src_hash instead of abi
version from fw_ready"") that changed the feature without updating the
name.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,42,1
"thesofproject/sof","1b95f4c7b3be5ae5fbab61538aaf858afac241b7","marc-hb","2023-03-22 04:26:53","false",".github/zephyr.yml: add a temporary submodules/west consistency check

Real-world experience has proved again that big READMEs are not enough,
not even when they're only a couple lines away as the one added in
commit 8fd351ea9aa6 (""west.yml: add warning to keep git submodules in
sync""). Only some failure / red color stand a chance.

It also seems some people rarely use ""git status"". This was discovered
in commit d9eb16aa6655 (""cmake: add warning when git submodule changes
are found"") but is still surprising.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",55,58,1
"thesofproject/sof","dfaf9b8f2849e3624053a4888cb28c7476efd695","marc-hb","2022-08-03 18:02:04","false","west.yml: clarify warning about ignored zephyr/west.yml changes

Fixes commit 2c9772d5adab (""Add west.yml configuring zephyr
dependencies from sof"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",110,50,1
"thesofproject/sof","23284780d7cb78a33779a43a1c7fc9815ef84916","marc-hb","2023-08-29 03:14:46","false",".github/zephyr.yml: fix tags missing from `git -C zephyr/ describe`

Fixes commit 4286bb3ee186 ("".github/zephyr: west update with new, faster
git --filter-tree:0"") that accidentally dropped git tags from `git
describe` in Zephyr since April and made the build different from
everyone else.

See detailed explanation added to the source.

To find the output of `git -C zephyr/ describe`, search for
`generated/version.h` in the build logs.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",25,63,1
"thesofproject/sof","842794af200777de0718b889476d526f0e74f810","afq984","2022-05-09 11:02:53","false","mux: Annotate packed for structs that require a predictable layout

struct sof_mux_config and struct mux_stream_data are used to
load binary data from userspace. Add packed attribute to ensure
it has a stable and platform-independent layout.

Signed-off-by: Li-Yu Yu <aaronyu@google.com>",112,47,1
"thesofproject/sof","73378e269f78a7825b7cd28da432cc3359cbe198","marc-hb","2021-04-17 05:50:17","false","trace.c: don't split mbox events over the buffer's end and lose them

Don't try to pack the ring buffer to the very last byte so we don't
split (and lose!) trace events across the end and start of the
buffer. The logger on the receive side does not support such
re-assembly.

Note this was never noticed because the logger tends to silently (!)
discard garbage like this, addressed in other commit(s).

Also switch to memset() and memcpy_s()

Fixes commit 271c75aa7192 (""debugability: Fix potential buffer overflow
in mbox traces"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",82,34,0
"thesofproject/sof","16bf62c2cc4007459973bba7ea403eec803b2079","lyakh","2023-01-24 15:09:56","false","host: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register host with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","ce847e44919b6ab8f1df0359a5d914c75f97692c","lyakh","2019-01-10 09:59:26","false","sue: fix platform name

Fix a copy-paste name in the Sue Creek boot-loader linker script.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",56,7,0
"thesofproject/sof","98e8016de02ceb8637857148a348ab4ab42bfe7e","lyakh","2021-07-09 11:50:42","false","ipc: let secondary cores acknowledge IPC messages

Currently when an IPC message arrives, the primary core receives the
interrupt, schedules a task and begins processing the message. If it
identifies, that the message is for another core, it sends an IDC
message to it and waits in a busy loop until the other core completes
processing the message and writes a response into the mailbox. After
that the primary core notifies the host about completing the
processing. This patch lets the processing secondary core notify the
host directly, which also frees the primary core to handle other
tasks instead of waiting in a busy loop.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",86,37,0
"thesofproject/sof","8b49743a20aac1f9ca023adfe0b2ea909fbd02c9","fredoh9","2020-04-02 18:06:49","false","topology: add macro to support eq filters for sof-cml-rt5682

The patch shows a proposal how to propagate pipeline filter
coefficients data definition at topology top level. It is an
useful way to avoid to create different new pipeline macros for
different filter. Define filter coefficients data with macro
DEF_EQFIR_PRIV and DEF_EQFIR_COEF, which will be replaced
unique name by adding PIPELINE number. For IIR filter, equivalent macro
is DEF_EQIIR_PRIV and DEF_EQIIR_COEF.

Makefile define each pipeline processing HSEARPROC, HSMICRPOC, SPKPROC,
DMICPROC etc. Each variable should support default value to minimize
current topologies. When new filter blob is required, define
PIPELINE_FILTERx in makefile. This method provides more flexible way
to support variable number of filters in the pipeline.

The other clean up for topology macros include definions for unique
volume tokens and unique filter coefficient definitions.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",77,22,0
"thesofproject/sof","a652aad6e1fc3c338d31bd8ecf37a4f52506f56f","lyakh","2020-11-19 13:19:10","false","trace: provide a dummy trace_point() implementation for CONFIG_LIBRARY

trace_point() is only used in platform code and in init/init.c. None of
those are build for ordinary CONFIG_LIBRARY builds. However, when built
under Zephyr, init.c is included in the build. therefore a dummy
implementation of trace_point() is needed.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",74,30,0
"thesofproject/sof","fbde1dccf87898372282199328a131c84008b0ff","cujomalainey","2023-07-20 23:26:49","false","samples: Fix zephyr config

Samples should not be built without the kconfig option

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",32,62,1
"thesofproject/sof","c5a0cf0d27803e312c24814e5009545622724bbe","cujomalainey","2020-10-06 21:54:17","false","host: move edf_schedule to platform

move to allow other programs to use the scheduler

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",67,28,0
"thesofproject/sof","414d8804295c63ffd0923c52a5f9faa1490f611a","jxstelter","2023-10-30 13:29:00","false","ipc: ipcv4: Add remote free of components

For delete pipeline operation this patch adds deletion of
modules added to given pipeline but executed on different
core. This case could appear only for DP processing modules.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",5,65,1
"thesofproject/sof","afe5bb76f78ce6f902bc7da761d4bdbd85625ec0","iuliana-prodan","2023-08-16 16:10:02","false","topology: imx: Add compress and PCM mixer topology file for boards with wm8962 codec

Generate compress and PCM mixer topology file for i.MX8 and i.MX8MP
with wm8962 codec based on sof-imx8-compr-wm8960-mixer.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",24,62,1
"thesofproject/sof","b7858e8af17828e97a071610a750d0652466aec0","RanderWang","2023-09-12 07:56:00","false","zephyr: cavs: add secondary core context save support

Register pm_state_notifier to set ready_flag for secondary core when it
is powered up for second time after first fw boot. We can remove
CONFIG_ADSP_IMR_CONTEXT_SAVE check for cavs platform for this feature.

Signed-off-by: Rander Wang <rander.wang@intel.com>",19,63,1
"thesofproject/sof","b531898f6dd88d1a68d8482d9a96bb8b5c4364bd","iuliana-prodan","2021-08-27 09:48:15","false","zephyr: wrapper: make sof_heap global again

sof_heap variable is used by all platform, with or
without ENABLE_CACHED_HEAP.

Without this fix, on i.MX with Zephyr we get:
error: 'sof_heap' undeclared (first use in this function);

Fixes: fed69b6a34ce (""zephyr: wrapper: disable cached heap on Intel platforms"")
Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",119,39,0
"thesofproject/sof","d1dd69822e912e7d1d5229c306e0169a23f2be5e","wenliangwu","2022-12-30 03:15:08","false","drivers: mtk: move afe drivers to common folder

Move afe driver to afe folder so that platform independent drivers could
be reused. There are platform folder inside afe folder which are
reserved for platform independent driver.

Signed-off-by: Trevor Wu <trevor.wu@mediatek.com>",93,55,1
"thesofproject/sof","d082758cbca925029cf2940f42080a357dad84a9","abonislawski","2019-05-28 09:05:37","false","stack: new macro to setup stack per core

This will add new macro to setup stack with a new memory layout when memory is separated by core

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",63,12,0
"thesofproject/sof","d0c3965808a7457d7861195076d2edd1ad624a21","ranj063","2021-12-12 05:09:46","false","topology2: cavs: Add some commonly used definitions for cavs topologies

Used for setting audio format attributes and copier attributes.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",120,42,1
"thesofproject/sof","6ffb0526910e0d3410f3a9dd5b68457d359cc8f4","ranj063","2023-05-15 17:59:31","false","copier: Remove DAI device drv trigger

Use dai_zephyr_trigger() instead. Remove the state modification in
dai_zephyr_trigger() and handle it in the copier_comp_trigger().

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",50,59,1
"thesofproject/sof","7b06921b6b45958668366d6c9f41820f7010b73f","ranj063","2021-06-23 06:32:01","false","pipeline_graph: no need to free pipeline components during pipeline_free()

Pipeline components will be freed by the host before the
pipeline widget itself is freed. No need to walk the pipeline
and free anything during pipeline_free().
Fix the unit tests to remove the tests that are not relevant anymore.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",74,37,0
"thesofproject/sof","9a09b97c286431395c7e373f6adf89b9c5486604","kuanhsuncheng","2021-09-09 11:20:27","false","scripts: Add mt8195 to build script

Add mt8195 to build script.

Signed-off-by: YC Hung <yc.hung@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",118,39,0
"thesofproject/sof","aadbfa0a3b75f3d7be680499a845b14c88c3404d","marc-hb","2023-10-11 21:51:20","false","tools/rimage/README.md: update following transfer to sof.git

We still have tomlc99 as a git submodule for now.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",11,64,1
"thesofproject/sof","ca64ccf7a9ff23e8ade2d6d61965f527fde97794","marc-hb","2021-12-21 01:21:59","false","math/trig.c: remove bogus \CORDIC doxygen command

Fixes warnings:

sof/src/math/trig.c:42: warning: Found unknown command '\CORDIC'
sof/src/math/trig.c:103: warning: Found unknown command '\CORDIC'
sof/src/math/trig.c:183: warning: Found unknown command '\CORDIC'
sof/src/math/trig.c:42: warning: Found unknown command '\CORDIC'
sof/src/math/trig.c:103: warning: Found unknown command '\CORDIC'
sof/src/math/trig.c:183: warning: Found unknown command '\CORDIC'

etc.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",121,43,1
"thesofproject/sof","041c2ef6de3ec9d46a079d60564f49a78d37d3d5","marc-hb","2021-03-23 00:03:13","false","version.cmake: add --dirty to git describe command

For at least two reasons:
  - exposes sneaky change(s) performed by automation if/when any
  - solves the mystery of the Source content hash (printed on the next
    line) changing while the git version does not.

Example, at https://sof-ci.01.org/sofpr/PR3941/build8429/build/bdw_gcc.txt

 -- Found Git: /usr/bin/git (found version ""2.17.1"")
 -- GIT_TAG / GIT_LOG_HASH : v1.7-rc1-151-g023c4abacde1 / 023c4abac
 -- Source content hash: 91f261ea

whereas at https://github.com/thesofproject/sof/runs/2166298087,
  xtensa-build-all:

 -- Found Git: /usr/bin/git (found version ""2.17.1"")
 -- GIT_TAG / GIT_LOG_HASH : v1.7-rc1-151-g023c4abacde1 / 023c4abac
 -- Source content hash: 67f31697

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",73,34,0
"thesofproject/sof","dfd2336bb2e7c7d4da4e5126c594ba24baf65e93","marc-hb","2020-09-17 19:40:32","false","cmake: empty MEU_OPENSSL param is now the same as not defined

For convenience, let users pass the location of their MEU_OPENSSL tool
even when they don't use it. Silence the corresponding warning.

See https://cmake.org/pipermail/cmake/2011-February/042933.html for the
rationale.

Note this may fail if you install openssl in a relative directory called
""FALSE"". Don't do that.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",64,28,0
"thesofproject/sof","b40568b1ab2d5c59b0dafe1833a37555246651b8","marc-hb","2022-12-22 18:46:28","false","README.md: fix Github status badges

- Remove Travis badge (about time!)
- Remove badge that shows the status of the last, random PR that was
  submitted.
- Add status of the new Daily Actions as recently implemented by Andrey.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",92,55,1
"thesofproject/sof","1e64b7e83c24f3397dbce678278912712eb91e23","marc-hb","2021-05-11 00:36:26","false","logger: fix relative timestamp when re-opening the trace after EOF

Need to reset the (now global) entry number.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",82,35,0
"thesofproject/sof","a053e04d7ee1863cfcf26881002a50d390d45ffe","marc-hb","2022-01-14 06:19:17","false","trace: add Zephyr git version to the initial FW ABI banner

Add Zephyr git version in the initial FW ABI banner. Sample output:

SHM: FW ABI 0x3014000 DBG ABI 0x5003000 tags \
SOF:v2.0-rc1-245-g4be53bca4ab5-dirty zephyr:v2.7.99-3167-g8a8abd69228d \
src hash 0xb8098c48 (ldc hash 0xb8098c48)

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,43,1
"thesofproject/sof","56cb4f08f6dc020ba9c944d2daaef3cc74e044f3","lyakh","2021-05-19 08:38:46","false","schedule: (cosmetic) remove three redundant variable initialisations

Remove redundant ret initialisation in two versions of
schedule_task_init_edf() and in schedule_task_init_ll().

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",87,35,0
"thesofproject/sof","675a255e113265c971defd79fa2c47cab5cf8ac5","cujomalainey","2021-09-21 23:57:20","false","ipc: don't shadow functions with variables

ipc_free is a function, we should avoid shadowing in the event we tried
to use the function here.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",117,40,0
"thesofproject/sof","eca1aff7cab177134771dea6871c0a164d18622a","lyakh","2022-03-10 09:14:29","false","cache: use the .shared_data section with single core too

Shared objects are placed into a separate section to make sure they
don't share cache lines with core-local data. This must also be done
in single-core configurations because those configurations perform
uncached access and manage cache manually too.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",113,45,1
"thesofproject/sof","7f91296cc142245d09795adc92f8c4e33421e9fe","keqiaozhang","2019-02-28 01:13:53","false","kmod_scripts: add da7219 codec support for GLK

Signed-off-by: Zhang Keqiao <keqiao.zhang@linux.intel.com>",67,9,0
"thesofproject/sof","5642e6ab2692d298d77456fa9b88a522167317c4","finikorg","2020-07-07 12:04:35","false","zephyr: haswell: Split initialization

Split initialization for haswell zephyr support similar to CAVS.

Signed-off-by: Andrei Emeltchenko <andrei.emeltchenko@intel.com>",74,25,0
"thesofproject/sof","8753a9e162f75e27f72fe4ae8f38243cd80da07d","ktrzcinx","2022-01-13 12:12:34","false","Remove unused declaration of global platform specific manifests

Such a global variables does not exists, so should not be declared.
It has been deprecated since:
2965908 (manifest: Remove -m option)

Signed-off-by: Trzcinski, Karol <karol.trzcinski@intel.com>",117,43,1
"thesofproject/sof","d5864a78b9ab8683be59586d2992a493e76d4661","tlauda","2019-12-16 11:11:41","false","ipc: remove argument from ipc_platform_send_msg

Removes argument from ipc_platform_send_msg function in order
to use static _ipc instance. It will allow for removal of not needed
function in future commits.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",74,18,0
"thesofproject/sof","1db434afe4e76f62b228205661d40fc2a9f8e78e","tlauda","2019-05-31 13:18:22","false","dma-trace: move dropped_entries to common struct

Moves static variable dropped_entries to common
dma_trace_data structure. This structure is
accessed through uncached memory region, so
all the cores don't need any additional
synchronization.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",74,12,0
"thesofproject/sof","09b612e4634f975f5e9e7124a7200f0b0a568906","tlauda","2019-02-13 15:19:21","false","dai: change error to info in dai_params

Check for prepare state in dai_params. It allows for
configuring multiple host pipelines connected to one
dai pipeline e.g. mixer topology.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,8,0
"thesofproject/sof","a88530a11cdf9617a1a527aecd76333afc20fb92","tlauda","2018-06-04 11:03:38","false","ipc: remove duplicated sof_ipc_hdr from sof_ipc_dai_ssp_params

We don't need duplicated sof_ipc_hdr.
This change also requires change in kernel.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",1,0,0
"thesofproject/sof","4ca20db1610550d394fb6e477b5a6ffd560db3ca","tlauda","2020-01-08 14:40:13","false","dma: moves dma_info structure to header

Moves dma_info structure to header, so it will become
available to other multiple modules.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",71,19,0
"thesofproject/sof","1af651ac5a844da20f2346344fea1580f11d6070","tlauda","2020-01-08 11:36:16","false","notifier: pass sof context to init_system_notify

Passes sof context pointer to init_system_notify.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",72,19,0
"thesofproject/sof","50e9b3069f56bd066f9c698bee17cea7cf0d2bf7","kv2019i","2022-09-08 17:15:25","false","coherent: fix building with CONFIG_ASSERT=y

arch_is_in_isr() is not an exported function. Use k_is_in_isr()
instead.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",105,51,1
"thesofproject/sof","b6e31d1185b829abf162916cffa18d9b1587dcfb","bkokoszx","2020-08-28 12:47:41","false","comp: add comp_get_status() helper function

This commit adds comp_get_status() helper function, which
takes two arguments: requesting component and component from
which user wants to read status. In case when both components
are on the different cores function additionally invokes
comp_invalidate().

This commit also fixes issue in smart_amp_copy() function, where
we always invoke comp_invalidate(sad->feedback_buf->source) whether
or not both components (smart amp and sad->feedback_buf->source)
are on different cores. In case when both components are on
the same core, we can invalidate data not previously writebacked.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",74,27,0
"thesofproject/sof","c27c5df676680e5cd2b56827476db2670ea3ffec","pblaszko","2023-03-20 09:28:07","false","aria: fix buffer size calculation in init

For calculating sample group size, sample container size should be
taken instead of valid bit depth.

Signed-off-by: Przemyslaw Blaszkowski <przemyslaw.blaszkowski@intel.com>",55,58,1
"thesofproject/sof","878f15b34a514f834d18c0b7be2aa06b77e6005a","ktrzcinx","2020-09-15 14:34:33","false","dai: Add warning about possible glitch

DMA should be loaded at least with data for one period
otherwise glitches are supposed to appear. Such a kind of
problem is quite difficult to track, because it may be related
with scheduling in runtime, DSP load, or used buffers size,
so log message pointing such a problem is useful.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",62,27,0
"thesofproject/sof","4624b3d7bd35c1cfd9dab03298d2d45947c96d0f","wenliangwu","2023-10-25 08:24:13","false","audio: module adapter: fix redefinition problem

When I was using xtensa to build mt8188 platform, I encountered an error:
'redefinition of i'. To fix the problem, I removed the declaration in
the for loop.

Signed-off-by: Trevor Wu <trevor.wu@mediatek.com>",8,65,1
"thesofproject/sof","10261ef8d4ab941c89a6e9d6a271771bdf00667c","tlauda","2020-01-14 11:29:22","false","platform: remove unused global platform_timer

Removes unused global platform_timer pointers. They have been
moved to sof context.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",77,19,0
"thesofproject/sof","cf43cb16047a43777c459ddb3e0657c88a991021","singalsu","2022-02-09 16:57:57","false","Tools: Topology: Add long FIR EQ topology for sof-hda-generic

The topology is useful for testing long binary control IPC and to
test equalization of headset and speaker in sof-hda-generic devices.
It adds a flat IIR and a generic FIR that creates a mild loudness
effect.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",109,44,1
"thesofproject/sof","c399624fcfb7dfaf75d69671bc2a91ec9812a6ad","singalsu","2022-12-20 16:48:10","false","Audio: Mux: Convert mux and demux to module adapter

This patch converts the components from legacy interface to
module adapter.

The binary control is also changed to use model handler.
The config is changed to be a pointer instead of a struct
inside component data.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",90,55,1
"thesofproject/sof","5af59eb5cc872b632286de394cc0aa39563516a9","singalsu","2023-05-12 10:20:07","false","Tools: Tplg_parser: Add include of <linux/types.h>

These headers include alsa/sound/asoc.h and some versions of the
headers have this conditional include of types.h:

	#if defined(__linux__)
	#include <linux/types.h>
	#endif

To ensure types __le64, __le32, __le16, __u8 are defined explicitly
include types.h becore including asoc.h.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",50,59,1
"thesofproject/sof","457142ea1e37e47f830b793e73194472291357cb","macchian","2023-10-16 09:06:21","false","mtl: add dts-codec support

Signed-off-by: Mac Chiang <mac.chiang@intel.com>",9,64,1
"thesofproject/sof","9f36a5dc11683a57ad2c448ba6125c070f4b08f2","softwarecki","2023-09-18 13:26:37","false","logger: convert: Added error handling for file operation functions.

Added checking of value returned by file operation functions. In case of an
error, message is printed and error code is returned.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",20,64,1
"thesofproject/sof","a44ddbe777df8b1167fe6a3c332653a25f6b6dab","iuliana-prodan","2023-10-05 08:54:51","false","ipc: don't propagate commands across pipelines for IPC4

When IPC4_MOD_ID was introduced it returned a non-zero
module ID under IPC4 and 0 under IPC3.
After commit ""45ca3d430 (include: ipc4: module: fix component ID macros)"",
the IPC4_MOD_ID, under IPC3, is not 0 anymore.
Therefore, in order to not propagate the commands across
pipelines for IPC4, define IPC4_MOD_ID always to 0 for IPC3.

This fixes playback with mixer.
Without this patch, with IPC3, we get:
src/audio/component.c:130  ERROR comp_set_state(): wrong state = 1, COMP_TRIGGER_PRE_START
../pipeline-stream.c:436  ERROR pipeline_trigger_run(): ret = -22, host->comp.id = 12, cmd = 7
src/ipc/ipc3/handler.c:540  ERROR ipc: comp 12 trigger 0x40000 failed -22

That's because, at some point, the trigger command is not propagated
across pipeline and the component state remains unmodified

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",16,64,1
"thesofproject/sof","11e57f50309dbaec3a665dde951b38e219e9f762","andyross","2023-05-23 16:36:42","false","tools: Remove older fuzz framework

Fuzzing via the new framework is now integrated at oss-fuzz upstream,
so there's no point to keep this in SOF anymore.  The github workflow
has bitrot vs. the newer build.sh, and that docker build is very
heavyweight vs. the newer fuzz.sh smoke test that runs in the regular
build container anyway.

Signed-off-by: Andy Ross <andyross@google.com>",55,60,1
"thesofproject/sof","68553688f7f9365eb686c733c5e5c614bbd0b6aa","johnylin76","2020-09-22 10:21:24","false","tools: tune: Add tools to generate ctrl bytes for DRC

This commit adds the tools to generate the control bytes for the
drc component. To generate the control bytes, run the example_drc.m
script.

To tweak the parameters modify the values in example_drc.m and run it.

This is still WIP. A fixed set of coefficients is temporarily used in
drc_generate_config.m

Signed-off-by: Pin-chih Lin <johnylin@google.com>",66,28,0
"thesofproject/sof","69b32abda173f88e290a7862349501d81178c0c1","jajanusz","2019-06-01 20:16:34","false","checkpatch: add spdx identifier

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",72,12,0
"thesofproject/sof","adc6cbe1be2c3450ba687893b2344fd0b81174a9","jajanusz","2019-04-05 17:45:24","false","test: component: add missing header

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",48,10,0
"thesofproject/sof","46a38ce4f120ebbdbd6206a29b02138f174cecbd","jajanusz","2019-01-30 05:43:09","false","rimage: import elf.h

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",56,8,0
"thesofproject/sof","bdf5346cc67eda7f830c79139c79145544087974","DianaGabriela27","2019-03-06 13:09:02","false","rimage: Align block comments on each line

Signed-off-by: Diana Ungureanu <diana-gabriela.ungureanu@nxp.com>",66,9,0
"thesofproject/sof","643652e7965053ce7e76efa6f5fb587a25557704","lgirdwood","2018-08-21 09:49:06","true","Merge pull request #239 from tlauda/topic/idc_refactor_msg

idc: refactor IDC message template",19,3,0
"thesofproject/sof","454fdf5b2b4a005f8e7b3c07998a32a5a3bce758","mrajwa","2019-07-30 20:58:19","false","kpb: add current state log to reset function

This patch improves kpb_reset() log message by adding the
state from which we start resetting.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",53,14,0
"thesofproject/sof","693377438c9a5e25bb59f11f9bf12d20b23a4919","mrajwa","2019-05-16 11:16:53","false","detector: remove unused notification data

Remove history_begin and history_end members from
kpb as they are not used anywhere.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",63,11,0
"thesofproject/sof","d9712ef6711fbe2930c46ea36f0987bc2d292833","ymdatta","2020-08-14 16:24:03","false","testbench: topology:check array size mismatch in filewrite component

This patch uses the functionality added by the c9e090ccf37 commit
to check for array size mismatch in components.

Since, the components are in places other than tplg_parser, the
function which checks for the mismatch has been made an external
function from a static one. The function declaration has been
added to the tplg_parser header files, so that the function can
be used by any code which needs array size checks in components.

Signed-off-by: Mohana Datta Yelugoti <ymdatta.work@gmail.com>",75,26,0
"thesofproject/sof","8397e064da070cd32ecd5abe6e64d00506ad4b26","dbaluta","2021-05-05 16:05:02","false","topology: Allow overriding DAI_PERIODS

This will allow topologies to use different size dai periods.

Fixes: 128098799978a1 (""topology: use DAI_PERIODS in calculation of DAI buffer size"")
Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",81,35,0
"thesofproject/sof","2bd247f77d04ca6341f9305d176ddea7a16ff4fe","dbaluta","2020-04-07 16:56:35","false","platform: imx8m: dma: Add SDMA3 specific data

On i.MX8MP the DSP can make use of two SDMA controllers.
SDMA2 info was already added. This commit adds info for SDMA3.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",91,22,0
"thesofproject/sof","c66b87283e6426b16b221f999c2a12df9e156165","slawblauciak","2019-07-15 10:42:01","false","dai: ALH hardware params

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>
Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",44,13,0
"thesofproject/sof","25f61384f9f9446bf6a833754197c11753c20670","brentlu","2021-12-11 02:50:23","false","topology: sof-adl-max98360a-rt5682-2way: rename macro

The macro 2_WAY_SPK is renamed 2CH_2WAY to specify it's a L/R 2-way
system.

Signed-off-by: Brent Lu <brent.lu@intel.com>",121,42,1
"thesofproject/sof","aee22b07c1d03a63452a3b1fdbc94dcc7cb61e57","keyonjie","2021-03-23 10:46:42","false","topology: pipe-codec-adapter-playback: fix the blob size

The size of the fallback CA_SETUP_CONTROLBYTES is 20 (0x14), not 0x20,
here correct it.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",74,34,0
"thesofproject/sof","789aa98c284a557f9b282b046e16d745c94b7da6","keyonjie","2019-04-24 06:48:11","false","abi: ipc: topology: remove unused structures

For selector and kpb, we have switched to use byte kcontrols, so no ipc
structures needed to align b/w FW and driver, here remove them to align
with driver side.

The sof_ipc_process_type enum is not needed, remove it also.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",50,11,0
"thesofproject/sof","b0cb1595bed0affa5ff7cf1877f945a34c7a141c","keyonjie","2021-10-18 08:39:41","false","timer_domain: bring the timer_domain_unregister() back

This partially revert the below commit, to bring the regitser/unregister
symmetry back with restore the timer_domain_unregister() implementation:

commit d4fd1b3eb696 (""timer_domain: don't unregister interrupt handler from itself"")

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",122,41,1
"thesofproject/sof","5f640a4d3fc38734b73f300e06967431deca8839","crazoes","2020-04-18 15:43:40","false","scripts: qemu-check.sh: Use switch case

Use switch case for testing strings instead of if statements for each
case.

Signed-off-by: Shreeya Patel <shreeya.patel23498@gmail.com>",92,22,0
"thesofproject/sof","4f405e23e7b63c26880e2f033d3cee5470252a71","cujomalainey","2022-02-25 01:18:52","false","mux: collapse params function

There is no reason to have a function just call another function that is
used no where else.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",110,45,1
"thesofproject/sof","f25db96012e22fe4d523fdf843e7e181a96ad90a","cujomalainey","2019-03-21 23:11:55","false","eq: iir: make init function static

Fixes checkpatch error that slipped in

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",66,10,0
"thesofproject/sof","46a78b20b8da5abc7365993b15799dd720be137c","cujomalainey","2023-07-13 01:21:05","false","audio: waves: fix header include pathing

Now that waves headers are published they should not be trying to
include local headers or modifying the global scope. Fixup headers so
they include like the rest of public headers.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",31,61,1
"thesofproject/sof","fe988ea1619ed589a996aae8157f33dfb5d8a6a2","ujfalusi","2023-08-28 11:16:17","false","ipc4: idc: Handle the phase parameter in idc_ppl_state()

Execute the requested phases of the pipeline state change specified by
the phase parameter.
If no phase has been specified then run both phases as oneshot.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",25,63,1
"thesofproject/sof","04130acffc04d857264e7390b24cf1b56de0af9e","joechengxperi","2023-10-17 03:30:52","false","topology2: dts: move playback pipeline to independent topology

In order to adopt more different playback pipelines, refer to
sof-hda-generic.conf and move playback pipeline in cavs-rt5682.conf to
cavs-mixin-mixout-ssp.conf.

Co-developed-by: Mac Chiang <mac.chiang@intel.com>
Signed-off-by: Mac Chiang <mac.chiang@intel.com>
Signed-off-by: Joe Cheng <joe.cheng@xperi.com>",9,64,1
"thesofproject/sof","50d8646a64df5d16e5dea0b9ad8e48436fb15cc0","crazoes","2020-04-06 14:11:36","false","scripts: xtensa-build-all.sh: Exit if unknown platform specified

Exits if an unknown platform is specified. Currently, there are no
warnings or errors.

Signed-off-by: Shreeya Patel <shreeya.patel23498@gmail.com>",80,22,0
"thesofproject/sof","030c81c75bd03682da08af12f16e40a29b5774c1","keyonjie","2019-03-21 12:14:33","false","topology: keyword-detect: add bytes control for detector

Add bytes control and initial value for detector component.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",65,10,0
"thesofproject/sof","41e56b336de33bd0f52ab3047281f4421432e42f","brentlu","2022-06-27 09:07:52","false","topology: sof-jsl-rt5682: enable mclk always-on feature

Enable the always-on feature for pop.

Signed-off-by: Brent Lu <brent.lu@intel.com>",113,49,1
"thesofproject/sof","01d2fd0a7afdc444f8bf5b5715be1eac720ab7fa","btian1","2023-08-18 01:55:14","false","audio: add a config to sof and zephyr code

this config will be used to add or remove -fno-inline-functions
into compiler build option.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",25,63,1
"thesofproject/sof","489cfb5f0f20d5715be773b63c88bed4cf8bb0f1","lrgirdwo","2018-09-28 15:01:29","false","sue: dw-dma: Add support for suecreek

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",37,4,0
"thesofproject/sof","1737993a1fc074e87ef5f9be77d47ef50fdcea41","plbossart","2019-01-16 05:08:04","false","src/drivers/intel/pmc-ipc.c: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","446e415f6a538cce0155b625a3601f9991ba36bb","plbossart","2018-07-16 20:22:29","false","kmod_scripts: clean-up and add pcm512x support

Update module names, only unload what is loaded and add pcm512x
support for Up^2 board.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",11,2,0
"thesofproject/sof","f1456e00db6f5af2080275f4c74af82332fda502","lrgirdwo","2018-06-14 15:16:39","false","scripts: xtensa-build-all.sh. Fix bash error.

make[1]: Leaving directory '/home/lrg/source/reef/sof.git'
./scripts/xtensa-build-all.sh: line 123: [: ==: unary operator expected

Fix, set variable to ""none"" if xcc not found.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",1,0,0
"thesofproject/sof","26468a7756e242d0494a84657e778064c016f5a8","keyonjie","2020-04-10 13:45:40","false","topology: sof-tgl-max98373-rt5682: add smart amplifier support

Add initial smart amplifier support to tgl + maxim98373 amplifier.

Todo: to refine the demux channel map to get the correct feedback and
capture them to user space.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",82,22,0
"thesofproject/sof","d2e5c6a78a66f824439da0c90c922c41535f6860","keyonjie","2019-07-01 04:07:10","false","sof-ctl: split and move ctl_setup out of main()

Move ctl_elem pointers and buffer initialization out of main(), and
replace calling alloca APIs with malloc ones to make they are shareable
between different functions.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",41,13,0
"thesofproject/sof","d0ddef6c0d4d79f2c8425071aeb0cf7a618a36b0","plbossart","2019-01-16 05:08:06","false","src/include/sof/dma-trace.h: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","4da2c9659c3b0c867d1355f561e91e66a586b89b","jajanusz","2020-02-27 13:39:52","false","xtensa: cmake: clang scan build support

Add support for compiling FW with settings acceptable for clang,
in order to let it perform static analysis on the code.

Clang works mostly on ASTs made out of C code, so there is
no need to build complete signed binary for it.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",76,21,0
"thesofproject/sof","6f549a6f5cebf3470274c035f4dd4831facc630c","dragosht","2019-12-16 16:33:06","false","gdb: ringbuffer: Fix void pointer arithmetic

If CONFIG_GDB_DEBUG is set, the build is currently failing
because of these void pointer arithmentic operations.
This patch fixes that.

Signed-off-by: Dragos Tarcatu <dragos_tarcatu@mentor.com>",73,18,0
"thesofproject/sof","85a7e1883f49255ba29197562d5ef5393a817971","ymdatta","2020-02-19 13:31:54","false","include: ipc: control: Remove trailing whitespace

This patch fixes ""ERROR: trailing whitespace"" generated
by checkpatch.pl by removing trailing whitespace in the
file.

Signed-off-by: Mohana Datta Yelugoti <ymdatta.work@gmail.com>",84,21,0
"thesofproject/sof","b4165baeb37dbfb5195cdbeff31ea36b09b75346","iuliana-prodan","2021-08-05 16:24:42","false","refactor is_cached() to avoid buggy compiler optimization

For imx, is_cached() is implemented based on _memmap_cacheattr_reset.
This keeps the attributes for a 512MB region, therefore
we have the following address ranges:
 Address range       - hex digit
 0        - 1FFFFFFF - 0
 20000000 - 3FFFFFFF - 1
 40000000 - 5FFFFFFF - 2
 60000000 - 7FFFFFFF - 3
 80000000 - 9FFFFFFF - 4
 A0000000 - BFFFFFFF - 5
 C0000000 - DFFFFFFF - 6
 E0000000 - FFFFFFFF - 7

While testing on i.MX8ULP we discovered that addresses from
(0 – 1FFFFFFF) range where not correctly marked as cacheable,
because the compiler is optimizing the code incorrectly.

With macros, is_cached(address) expands to
(((((uint32_t)(&_memmap_cacheattr_reset_8ulp)) >> \
 ((((((uintptr_t)((void *)address) >> 29) & 0x7)) << 2))) \
 & 0xF) == 1)
When using _memmap_cacheattr_reset_8ulp = 0x22222221
and address = 0x1A801000 is_cached(0x1A801000)
should be true, but instead is false.

We want to avoid this buggy compiler optimization.
So we replaced the macros from cache.h with functions.

To make this generic, I created a cache_attr.c file in
src/arch/xtensa/drivers/ and a config option
- COMPILER_WORKAROUND_CACHE_ATTR, which must be selected
if the workaround is needed.

Also, we replaced the call to glb_addr_attr() from glb_is_cached()
with a function pointer that is initialized in
src/arch/xtensa/drivers/cache_attr.c.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",115,38,0
"thesofproject/sof","34f7952ee5675e5f361b0155071e8422727050fb","lgirdwood","2018-10-01 15:09:42","true","Merge pull request #446 from mmaka1/pm-runtime-ext

pm: pm_runtime interface extended",36,4,0
"thesofproject/sof","02ef4d5392cda00de92926639d1e73ba56ead562","mrajwa","2019-02-12 19:04:26","false","GDB: fix ""step"" followed by ""continue"" issue

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",59,8,0
"thesofproject/sof","73475e3fbb3e29ce9f0c26e317ae8191f9827688","lgirdwood","2018-11-12 19:32:12","true","Merge pull request #564 from akloniex/mtrace-event

debugability: Fix potential buffer overflow in mbox traces",40,5,0
"thesofproject/sof","477c8b08717402edf3978e98c3322cda7b136d2b","mrajwa","2020-03-18 14:37:30","false","memory: decrease HEAP buffer block size

This change decreases heap buffer block size from 0x180
to 0x100 bytes. This improves memory usage as often single
block of 0x180 bytes exceeds allocation needs.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",70,21,0
"thesofproject/sof","4ce79b152e23c7b3937a09ef57cdd69d125a9214","jxstelter","2023-05-19 13:25:37","false","kpb: update kpb uuid for lnl

Change of uuid
regarding Windows compatibility

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",53,59,1
"thesofproject/sof","3f95f6a600a918963742c55d058e82ee4c82efd2","ranj063","2022-01-11 06:16:53","false","module_interface: Add a common helper for set_configuration

This will be used to assemble all the fragments of the configuration
data and load it.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,43,1
"thesofproject/sof","a145313efc604a967d057843d7c27c1aee7add7f","abonislawski","2022-05-12 06:56:23","false","dma: cavs: use Zephyr DW-DMA & HDA drivers

Get device binding for DW-DMA & HDA drivers using Zephyr API

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",113,47,1
"thesofproject/sof","303a3ccac2597221ee6c6486755e5470820cde49","ranj063","2018-06-13 05:04:04","false","ipc: remove dmac id and dmac chan members from host and dai ipc comp def

The new dma_get() API does not use the dmac id and dmac chan info
from topology anymore. So remove these members from the host/dai
ipc comp def.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",1,0,0
"thesofproject/sof","c6892be67e57585db458ee4327bac48478d10291","ranj063","2022-01-11 06:18:02","false","codec_adapter: cadence: Define set_configuration

Define the set_configuration op in the module interface.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,43,1
"thesofproject/sof","863318ea9b795601c8b44df4cdfe46c69c73998d","ranj063","2021-09-28 18:36:18","false","lib: dma: make pause/release ops optional

Not all DMA's need a pause/release.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",121,40,0
"thesofproject/sof","7cf738ef5119f596d8d9704862be2dc9bea0331a","abonislawski","2019-02-04 11:45:42","false","Kconfig: make volume and src components a config option

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",57,8,0
"thesofproject/sof","67ab80466a8896d07ef7f8421b7b5f2df14034f2","ranj063","2022-03-23 22:22:54","false","codec_adapter: rename codec_adapter_params()

to module_adapter_params(). No functional change.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",109,46,1
"thesofproject/sof","55f4a29f2477e8d2bf797c0b28b386ec8ac2ca5b","abonislawski","2022-09-02 14:23:15","false","dai-zephyr: fix dai_get_fifo_depth

This will fix dai_get_fifo_depth() and return correct value

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",118,51,1
"thesofproject/sof","2f83e4909558bc6e648c2361e895e22446f97137","ranj063","2022-01-11 06:09:54","false","module_interface: Introduce enum for config fragment position

This will be used to classify the fragments when sending/retrieving
configuration data.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,43,1
"thesofproject/sof","487363fb1b0aa315cbf1aef672c204cafd43d699","aiChaoSONG","2022-02-11 01:46:24","false","zephyr: add copier and base_fw components

The two components copier and base_fw are
essential to IPC4 support on SOF on Zephyr.

This patch integrates the build of the two
components to SOF build with zephyr RTOS.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",108,44,1
"thesofproject/sof","fc1ddf95d4a759fa64e060730a0f0bef9b11ff92","aiChaoSONG","2023-07-18 06:52:17","false","topology2: fix conditional inclusion of DMIC snippets for nocodec

DMIC now is controlled by two variables, PASSHTHROUGH
and NUM_DMICS, we should consider the values for both
variables to decide the inclusion of DMIC pipelines,
routes, widgets, etc.

Fixes: #7931

Signed-off-by: Chao Song <chao.song@linux.intel.com>",32,62,1
"thesofproject/sof","5afc494671450459be73d62a41b8da2930cc5a35","jsarha","2022-02-08 13:45:56","false","drivers: Intel: hda-dma: DMA buffer address should be correctly aligned

Add check for DMA buffer address alignment to hda_dma_set_config().
Wrongly aligned DMA buffer does not work correctly.

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",107,44,1
"thesofproject/sof","5a9b8e7ee95edc8b78bbaaf842af5279ca720c39","lyakh","2019-01-17 09:13:55","false","alloc: fix two potential NULL dereferences

bzero() doesn't check its pointer argument for NULL, the caller has
to avoid such calls.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,7,0
"thesofproject/sof","c8ae78ab0e4ecacefe5e1313a79181b7b3bc9daa","lyakh","2020-11-12 09:49:35","false","zephyr: fix a path to a header, build LPS conditionally

Use a correct path to the cAVS memory.h header, build cAVS LPS
only when the respective Kconfig option is selected.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",72,29,0
"thesofproject/sof","6f2475b086ce1336a405fea0f9d46429f166b11b","Vamshigopal","2023-08-24 14:14:31","false","topology1: Use DYNAMIC for ADL and RPL topologies

use dynamic for all the adl and rpl topologies except 3p(waves,DTS),
excluded Dell sdw topologies which are not tested.

Signed-off-by: Vamshi Krishna Gopal <vamshi.krishna.gopal@intel.com>",26,63,1
"thesofproject/sof","abc1673d59b104cdceda67df522e584bda452a19","lyakh","2022-01-05 14:17:24","false","memory: include memory.h explicitly, where needed

Several files use symbols, defined in memory.h, add explicit includes
for it.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",116,43,1
"thesofproject/sof","969f370a360a6048b5f676664b9b73d7f9a338a4","marc-hb","2021-03-05 02:31:31","false","installer: add missing mkdir staging/* dep. for symlinks

Fixes:

 rm -rf staging ; make aliases
 ln: failed to create symbolic link 'staging/sof/sof-glk.ri': No such
 file or directory

This also happens on a brand new checkout when building in parallel with
make -j because symbolic links don't have any dependency. Example at:

  https://github.com/marc-hb/sof/runs/2036288013

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",73,33,0
"thesofproject/sof","791efe209468f072a628ddee9396d85d5b9f75c5","marc-hb","2022-04-01 21:36:11","false",".github: build again single-threaded and verbose on failure

Building in parallel is much faster but it makes logs unreadable and
build failures impossible to understand. This is especially true when
building with recent ALSA that produces of deprecation warnings.

To show what actually fails, try to build again with a single thread.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",110,46,1
"thesofproject/sof","2156dcb00d2eb05a83f351feb88e55e09bfb27fe","marc-hb","2020-06-16 05:28:40","false","rimage.c: add assert(image.adsp->write_firmware[_meu])

This makes the write_firmware NULL pointer added by commit
dd77445f018c and corresponding crash more user-friendly.
Before:

  Program received signal SIGSEGV, Segmentation fault.

After:

  rimage: src/rimage.c:197: main: Assertion `image.adsp->write_firmware'
  failed.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,25,0
"thesofproject/sof","13a9c2558de670b0d7055455f8e80a4bf4c91b3c","marc-hb","2023-10-16 20:40:28","false","Delete inherited rimage/.github/ workflows yamllint and checkpatch

We already have these checks in sof.git so they don't need to be
migrated.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",9,64,1
"thesofproject/sof","989a13c94c260445fe47a0d17a204f45db601044","tobonex","2023-09-15 18:00:25","false","mfcc: remove buffer_acquire from mfcc

remove buffer ops from mfcc modules

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","65bd630f96376eab458f9003b3a2e2403a179465","btian1","2023-05-09 02:12:03","false","ipcgtw: split the ipcgtw_reset function

Split the ipcgtw_reset() function and add a new helper,
ipcgtw_zephyr_reset() that can also be invoked from the copier device.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",53,59,1
"thesofproject/sof","12107e56dba876bbab6551931f5d7c05c341b60d","dbaluta","2020-04-27 13:49:53","false","drivers: imx: sai: Fix standalone capture

We run TX in asynchronous mode and RX in synchronous mode with
transmitter. Anyhow, in this mode when starting RX we also need
to enable TX (if it wasn't previously enabled).

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",92,23,0
"thesofproject/sof","1a8c1235117c1031fc46a79c83fcb01e51761dee","plbossart","2020-06-27 19:11:18","false","topology: cht-rt5682: align with byt-codec topology

Same parameters, so let's use the same template

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",70,25,0
"thesofproject/sof","620142bdccc036d40d6f77c187da36a04e1ca522","lrgirdwo","2021-12-04 16:25:51","false","cmakefile: audio: enable vectorisation

Enable autovectorisation for audio processing modules for GCC on x86.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",125,42,1
"thesofproject/sof","baf28066267f22a2e1a0d501db198f33b4b7a2f2","lrgirdwo","2018-11-17 15:11:06","false","scripts: xtensa-build-all: Add support for > 1 makefile job

Add -j option to allow setting Makefile jobs.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>
Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",40,5,0
"thesofproject/sof","a824c1fc7e018c74e5895ba84e1136048df9814a","lrgirdwo","2021-11-23 15:10:59","false","arch: string.h: use memset_s for all bzero uses.

Safer and fixes the following GCC11 warning

In file included from /home/lrg/work/sof/sof/src/include/sof/string.h:11,
                 from /home/lrg/work/sof/sof/src/include/sof/debug/debug.h:17,
                 from /home/lrg/work/sof/sof/src/platform/baytrail/platform.c:9:
/home/lrg/work/sof/sof/src/platform/baytrail/platform.c: In function 'platform_init':
/home/lrg/work/sof/sof/src/arch/xtensa/include/arch/string.h:22:9: error: 'memset' offset [0, 4095] is out of the bounds [0, 0] [-Werror=array-bounds]
   22 |         memset(ptr, 0, size)
      |         ^~~~~~~~~~~~~~~~~~~~
/home/lrg/work/sof/sof/src/include/sof/lib/alloc.h:160:9: note: in expansion of macro 'arch_bzero'
  160 |         arch_bzero(ptr, size)
      |         ^~~~~~~~~~
/home/lrg/work/sof/sof/src/platform/baytrail/platform.c:198:9: note: in expansion of macro 'bzero'
  198 |         bzero((void *)MAILBOX_BASE, MAILBOX_SIZE);
      |         ^~~~~

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",129,42,1
"thesofproject/sof","b749cd0fabb51c080f202ad2369dfd7da0bc8c5d","jajanusz","2019-01-22 17:30:00","false","[skip ci] github: add @jajanusz as cmake owner

+ scripts related to CMake and Kconfig

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",56,8,0
"thesofproject/sof","56cda383c2dc6705a900d1ca34749eb11ed9c906","jajanusz","2018-08-23 08:50:51","false","drivers: refactor: move timer from platform to drivers

+ Indents for 'CHECK: Alignment should match open parenthesis'

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",19,3,0
"thesofproject/sof","e771e65125a95a8a49894e97c79341d1fe86698b","jajanusz","2019-01-30 06:47:10","false","rimage: cast size_t to correct format types

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",56,8,0
"thesofproject/sof","c52e59d18aff29a2022e11018c32376b86b4db5d","jajanusz","2020-01-09 02:22:29","false","github: fix link to bug tracking docs

Update bug form to point to new location of the document.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",74,19,0
"thesofproject/sof","fdd8ec03b56c104eb7d739a3a4ad8d3fe5b7f773","plbossart","2021-06-18 20:39:41","false","topology: sof-cnl-nocodec: prepare for different multicore configurations

Not all devices have 4 cores, some only have 2 and even APL/GLK is
currently limited to a single core.

For now we still use a single core for all topologies, we will enable
multi-core in a follow-up patch.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",74,37,0
"thesofproject/sof","71a594df7bbee5e1f51281f85ebf6a063d4f236c","plbossart","2019-01-16 05:08:04","false","src/drivers/intel/cavs/timer.c: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","6a18e5a8c95d4583162ad42cadc3585ad9434b3d","yaochunhung","2021-12-28 12:05:54","false","audio: host: update position every period to improve precision

The position is currently updated by the host component when a
period was consumed. The granularity of this position is too large,
applications relying on timer-based scheduling may query the
position at any time and conformance test suites fail.

This patch introduce another field ""cont_update_posn"" in
sof_ipc_stream_params which suggests a more precise position
reporting, by storing the latest position in a memory window
when the host component completes a transfer. This will increase
the traffic to memory windows, but allow for a much smaller
granularity in position updates.

In hindsight, this solution should have been the default behavior
but to avoid backwards compatibility issues is added as a new
capability controlled by an ABI check. Only with a recent-enough
Linux kernel will this behavior be enabled.

Signed-off-by: YC Hung <yc.hung@mediatek.com>",116,43,1
"thesofproject/sof","bb7b7e32346ff713ded6126220e21af2ab17c607","dbaluta","2022-02-25 06:35:31","false","drivers: imx: esai/sai: Add .remove callback

With dynamic pipeline feature, pipelines are destroyed
when SOF device enters suspend and .remove callback is called in order
to free memory.

SAI/ESAI are missing this callback and the FW crashes. Fix this by
adding .remove callback.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",110,45,1
"thesofproject/sof","de7173fbc3efb03df5b37cdc346d69d496e080e6","dbaluta","2019-02-01 15:48:59","false","rimage: Describe memory as an array of zones

Use new block types added to describe memory for
a platform as an array of zones. The block type
will be an index into the array.

A memory zone is described by (base, size, host_offset).

With this map we can now easily find for a given section
in which memory zone it belongs.

Because we have 10 zones reserved this patch will allocate
extra 12 * 10 = 120 bytes that are not used yet.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",59,8,0
"thesofproject/sof","debe638c97b462fc45ff2a93cd6efcc00145f746","lgirdwood","2018-09-26 14:55:25","true","Merge pull request #424 from xiulipan/bytfix

byt: enlarge system heap size",37,4,0
"thesofproject/sof","299ccbce583bc839e21b8c396bd6f067ea26e364","lgirdwood","2018-09-27 15:51:14","true","Merge pull request #430 from tlauda/topic/fix_host_free

host: don't free empty buffer list",37,4,0
"thesofproject/sof","94b235c164d2c77c3edc55aec9903f17b6120852","mrajwa","2020-04-01 13:21:17","false","topology: update min host buffer size for KWD

This updates the minimal host buffer size to the
minimum value which enables sefe draining for all
pcm parameters.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",72,22,0
"thesofproject/sof","425facee00b925878167fd324de0ccd35ac57c59","mrajwa","2019-04-09 10:33:51","false","KPB: rework of buffering algorithm

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",47,10,0
"thesofproject/sof","7d9c1b408004b7d0c53f0717e62a08040aab7f2d","lgirdwood","2018-09-10 15:56:05","true","Merge pull request #325 from tlauda/topic/mem_window_3_change

platform: cavs: let trace manager to clear mem window",33,3,0
"thesofproject/sof","7811c963f51f0bfdd2395527467b9b94fdd2629a","keyonjie","2020-05-09 03:55:05","false","topology: tokens: add token for component UUID

Add the definition SOF_TKN_COMP_UUID for the component UUID token, this
could be used for process components as subtype/flavor soon.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",96,23,0
"thesofproject/sof","5de89ad8c111149b5595836989296ff8be9ba968","keyonjie","2019-06-27 10:08:54","false","sof-ctl: add functions for buffer allocate and free

Split buffer allocating and freeing part from main(), add separated
functions and call them from main().

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",46,13,0
"thesofproject/sof","cba12f12a8ec5a8cb72c66314e14d0d57b0871bd","slawblauciak","2019-04-08 08:48:09","false","soundwire: initial work

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",44,10,0
"thesofproject/sof","3dd17dc01d4bf61465276b2ed0296881c63b6bc6","keqiaozhang","2018-07-19 05:37:29","false","dist: fix make dist for topology M4

Signed-off-by: Zhang Keqiao <keqiao.zhang@linux.intel.com>",12,2,0
"thesofproject/sof","2d0759dd02b97181b45a7f6ab449f87715658f87","keqiaozhang","2019-07-30 02:27:21","false","topology: add demux pipeline to CML max98357a tplg

This topology will add a mux pipeline to support echo reference for CML.

Signed-off-by: Zhang Keqiao <keqiao.zhang@linux.intel.com>",51,14,0
"thesofproject/sof","94cf6677d88fe51ed7327ae638f98663783976d1","cujomalainey","2019-03-21 23:13:13","false","mixer: make init function static

Fixes checkpatch error that slipped in

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",66,10,0
"thesofproject/sof","c304613744981fe0ea385ed1efa234ac2f42786e","cujomalainey","2018-11-16 23:17:45","false","Update sof-cnl-rt274

Update graph to represent actual layout

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",40,5,0
"thesofproject/sof","5548b0a7bb4a3c9edf1c2ffc195613288d613185","ktrzcinx","2019-12-09 11:36:03","false","sof: Add compiler version macros

Unify calls for compiler version and name for XCC and GCC.
Separate conversion of optimization level from Kconfig settings
to compiler flags to separate cmake function, because of usage
in two places.
Read XCC_TOOLS_VERSION from compiler.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",73,18,0
"thesofproject/sof","126060ae633b502bc0fc55239530d372659eb461","ktrzcinx","2020-05-29 12:55:06","false","logger: Send parsed runtime log levels to FW via debugFS

""/sys/kernel/debug/sof/filter"" file is responsible for updating
trace log levels. IPC message contain list of new trace threshold,
it is represented as single line in file where entries are separated
with "";"". Single entry has form of:
""<uuid_id> <pipe_id> <comp_id> <log_level>""

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",97,24,0
"thesofproject/sof","304dfd792eee936afe3e9334acee866141484290","singalsu","2023-11-06 16:29:46","false","Tools: Topology2: Remove bytes control from cavs-nocodec-rtcaec.conf

It was confirmed that the IPC4 version of Google RTC AEC
is not using the bytes control, so it can be safely removed
from topology.

This fixes topologies build error:

ALSA lib conf.c:838:(get_char_skip_comments)
Cannot access file include/components/google-rtc-aec/rtc-aec-blob.conf

Fixes: 	64fcebbd64bf8e8be4ec7098215d7281fa6a4791
	(""Tools: Topology2: Add nocodec topology to test google-rtc-aec"")

Fixes:	#8357

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",2,65,1
"thesofproject/sof","2fb0c1d8110eb1ccf643c2e020c62237ebc89d4d","singalsu","2023-06-16 10:57:25","false","Tools: Topology2: Add a development HDA generic MCPS benchmark topology

This patch builds new development topologies
sof-hda-benchmark-generic-<tgl/mtl/lnl>.tplg to evaluate performance
of a set of playback components.

The topology for PCM0P playback is

host-copier.0 --> gain.1.1 --> mixin.1.1 -->
	mixout.2.1 --> aria.2.1 --> gain.2.1  --> mixin
	mixout.3.1 --> dai-copier.HDA

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",46,61,1
"thesofproject/sof","32f3b31345f4842e2cef382392f4253edd52f53b","singalsu","2020-03-30 14:08:04","false","Tools: Tune: Cleanup for example speaker EQ script

This patch updates the generated file names and locations. The
private data names for topology are changed to DEF_EQIIR_PRIV
and DEF_EQFIR_PRIV to work with updated private date naming scheme.

The copyright text is updated to short BSD-3-Clause text version.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",67,22,0
"thesofproject/sof","dd8cfda311803ec1dacbda219ee794434025ede0","singalsu","2018-12-18 15:52:39","false","EQ: Update ABI version number in configuration to match current version

This patch updates the provided example responses as data for
sof-eqctl and in the include files for topologies. The updates into
Matlab scripts are included also. The FIR and IIR example script is
updated to contain all examples.

The patch includes also a bug fix into IPC handler where the check
against SOF_IPC_MSG_MAX_SIZE is off by one and caused it to reject
all set data commands (to the EQs).

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",52,6,0
"thesofproject/sof","3d1275dc0deb8149f8efe3b54bf35771f26502d0","singalsu","2023-08-09 14:02:43","false","Tools: Tune: Multiband-DRC: Add support for tplg2 config files generation

This patch re-structures function example_multiband_drc() to
let it generate multiple differentiated configurations. The
computation of blob is moved to new function export_multiband_drc().
The script now generates default (same as before) and pass-through
blobs.

Inside the function the paths for tplg1 and tplg2 are updated as
well as locations of data blobs for sof-ctl. The run of export
function creates blobs for both tplg1 and tplg2 with SOF IPC
versions three and four.

check_create_dir() common function is added to avoid error with
missing directory for export and for warning message about
already existing directory that just using mkdir() would do.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",26,62,1
"thesofproject/sof","0235673845f3f6e7f9b0f7d2193df4cda4d85435","bardliao","2023-01-05 05:30:39","false","topology2: add sof-adl-rt711-l0-rt1316-l12-rt714-l3 support

sof-adl-rt711-l0-rt1316-l12-rt714-l3.tplg is the same as
sof-tgl-rt711-rt1316-rt714.tplg

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",71,55,1
"thesofproject/sof","2d16db19de8fa73dc826e7b243ddb0ab56f43a7d","tlauda","2019-08-01 15:08:39","false","ll_schedule: keep task period in private data

Adds new period field to task private data to keep
period set during schedule. Tasks shouldn't change
their period dynamically and in fact there is no
such task.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",53,14,0
"thesofproject/sof","6c300e4aedfaefe5f25c41b9b1bde28b44da8c93","tlauda","2020-01-21 11:56:33","false","mn: share M/N dividers across SMP code

Marks mn structure as SHARED_DATA, so it could be accessed
by all the cores.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",79,20,0
"thesofproject/sof","992f0811361f1f52d75bb31b7823412ecbd33cdc","tlauda","2018-09-03 11:19:29","false","ssp: cavs: make sure that SSP FIFO is empty

This patch implements delay before SSP stop
to make sure, that for transmitting the FIFO is empty
and for receiving the FIFO provides the real status.
Also it clears transmit underrun.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",30,3,0
"thesofproject/sof","03181b4537cbf4eee4b82f353b29832cd8f6496d","tlauda","2019-06-07 07:50:15","false","pipeline: add missing check for PPL_STATUS_PATH_STOP

Adds missing check in pipeline_comp_copy for
PPL_STATUS_PATH_STOP. It fixes the issue, where
playback pipeline hasn't been able to stop copying
even with component returning such status.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",56,12,0
"thesofproject/sof","06cfb2921bdff7bbe731cd06ab26d7e0842b6804","bkokoszx","2020-10-12 13:42:27","false","perf_cnt: cast timer value to uint32_t type

In order to get proper perf counters peaks values
we should cast arch timer value to uint32_t.

Arch timers API allows user to get uint64_t value.
In fact arch timer consits two parts. 32 bits (MSB)
software part and 32 bits (LSB) hardware timer.
The 32 bits (MSB) software part is incremented only
during hardware timer rollover when timer interrupts
are enabled. If interrupts are not enabled (perf_cnt
case), incrementation will never appear.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",67,28,0
"thesofproject/sof","36fc4d62480ac20795b1853530b3685c4fc9a53a","kv2019i","2023-04-17 16:43:40","false","smart_amp_test: fix unbind implementation

Code in unbind is looking at wrong field for queue-id. This works
some of the time, but in some cases leads to access to freed
heap data and later to heap corruption.

Link: https://github.com/thesofproject/sof/issues/7191
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",50,58,1
"thesofproject/sof","c3807ae4a7617314b753ae7713200e3ae918e039","kv2019i","2023-01-20 11:56:06","false","topology2: avs-tplg: disable USE_CHAIN_DMA

The pipeline-free chain DMA implementation has multiple
issues, so disable it by default in Intel cAVS topologies.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",56,56,1
"thesofproject/sof","d932982dfcfa3e90d5868b5155634bfe91fd8fd1","kakulesza","2018-06-08 16:42:50","false","arch: xtensa: set SRAM window error codes during bootloader

Set status (0x05) and error (0x00) code in Memory Window 0 when the bootloader starts.
boot_entry.S - set status (0x05) and error (0x00) code before wnd0 reprogram
platform/memory.h - increase bootloader size

Signed-off-by: Kamil Kulesza <kamil.kulesza@linux.intel.com>",1,0,0
"thesofproject/sof","0b2876b2794ce3c97c1ab8c4ce4b9e4832846615","xiulipan","2021-01-26 08:49:27","false","cavs: pm: poll for IPC_DIPCIDR_BUSY to be clear before powerdown hpsram

If IPC_DIPCIDR_BUSY is set, DSP is sending IPC to HOST and HOST will
try to read from mailbox on hpsram.
polling for IPC_DIPCIDR_BUSY is cleared before power offer hpsram to
avoid HOST read fail.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",68,32,0
"thesofproject/sof","19666007e1b59830b8d724640f4fbbf74cacbbeb","fuyuntsuo","2021-05-07 09:36:54","false","audio: igo_nr: Added a new line.

A new line is missing after variable declaration.

Signed-off-by: fy.tsuo <fy.tsuo@intelli-go.com>",80,35,0
"thesofproject/sof","384403dfaf745eb9c45bda7e9279d3808923355c","ujfalusi","2021-10-15 06:16:00","false","dma-trace: Use mtrace_printf() if dtrace buffer allocation fails

Printing the error via dtrace is not going to work when the memory for
the dtrace is not allocated.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",123,40,1
"thesofproject/sof","7daaa518c6abe6919c9d69fd9c8726f727d069da","abonislawski","2021-01-15 11:24:17","false","config: byt: remove tone comp

Remove tone from the byt defconfig to reduxe code size.

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",70,31,0
"thesofproject/sof","e240b41ea946ee8fc1ab1c837c4569da40b6277b","ranj063","2022-01-07 22:22:58","false","codec_adapter: fix typo in comment

It's struct codec_param not codec_config.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","aeecf5a74136ebb60544b98187f07bd840875764","ranj063","2022-01-07 21:05:58","false","codec_adapter: dts: check for !cd->ca_source instead of == NULL

Make checkpatch happy

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","eb96d21caffe279ede802942fae31a310f79c7e9","ranj063","2021-12-12 05:11:09","false","topology2: gain: Add new attributes for gain

Add audio format objects and num_audio_formats attribute for gain.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",120,42,1
"thesofproject/sof","88ead250376a2ad7efcffaa70453330acc2ed82d","ranj063","2023-05-05 20:50:02","false","topology2: intel: dmic-generic: Make processing pipelines optional

In preparation for adding copier-copier pipeline, make the processing
pipelines conditional. There is no change in functionality or
definitions. This is purely to make it easier to exclude the
pipelines/pcms/routes from the final topology.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",53,59,1
"thesofproject/sof","26b48aa221cef3a670bd6c099b8341c3059bcde1","abonislawski","2022-09-07 14:42:47","false","probes: enable by default

This will enable probes by default for CAVS platforms

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",106,51,1
"thesofproject/sof","5cfc37040bbe7c21491eb2c2a6762e3b617f1c4e","afq984","2022-04-28 09:18:56","false","sof-ctl: Fix -Wformat,-Wsometimes-uninitialized

* Use %z specifier for size types to avoid format
  specifier warnings on arm32
* in ctl_dump(), size_t n may be used uninitialized
  if ctl_data->out_fd > 0 and !ctl_data->binary.

Signed-off-by: Li-Yu Yu <aaronyu@google.com>",114,47,1
"thesofproject/sof","2cdf38c47e7d23770161767dd5314ba52b0386b1","pjdobrowolski","2023-07-04 12:01:34","false","module_adapter: native_system_agent: Introduce call and interface

This is part of fw which helps loaded module in communication with adsp
Also it provides basic operations for creation of component driver
Common part for native loadable modules and iadk is put together and
remade into native API. That way system services are using generic
methods defined in native system service.

Signed-off-by: Dobrowolski, PawelX <pawelx.dobrowolski@intel.com>",39,61,1
"thesofproject/sof","81bcc8999f58d6bfe495b39270a6e5b26230bf97","wenliangwu","2023-01-19 02:20:17","false","platform: mtk: move extern declaration to common header

There is a checkpatch warning shown as below.
""WARNING: externs should be avoided in .c files""

Move extern declaration to afe-memif.h, so that the warning won't be
seen in the follow-up project.

Signed-off-by: Trevor Wu <trevor.wu@mediatek.com>",55,56,1
"thesofproject/sof","322d2cc08f5f6418986d38256133ee22951298ee","marc-hb","2023-04-12 18:29:04","false","xtensa-build-zephyr.py: log environment changes only for `west build`

As recommended by Andrey in #7364, reduce the noise and log the
environment only for the `west build` command - unless the log level is
increased with `-v`, then log for every command.

Also fix a very unlikely corner case where the caller would invoke
execute_command() with `check=None` and get the opposite effect.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",51,58,1
"thesofproject/sof","0f365400ebe9cf32683fe069121a87b683677fcc","marc-hb","2022-06-17 21:14:17","false","sof_ri_info: explain why memory layout is empty

It was not obvious at all that the expected memory layout is inferred
from the filename.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",120,49,1
"thesofproject/sof","907f8691c2b91e8c66871652342fc6a15d174cee","marc-hb","2021-03-04 17:48:06","false","installer: TOOLCHAIN default value depends on XTENSA_TOOLS_ROOT

XTENSA_TOOLS_ROOT is required by xtensa-build-all.sh anyway, so don't
force the user to say twice that they want xcc.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",73,33,0
"thesofproject/sof","41d244c48cb4aa0c475b14b55d1d16360fe51078","marc-hb","2021-09-22 00:18:33","false","Add new scripts/test-repro-build.sh

See https://reproducible-builds.org/

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,40,0
"thesofproject/sof","6297dc165b00b4428872596b653f9f4b8753a399","marc-hb","2021-04-14 07:06:44","false","Revert ""installer: change default destination to /lib/firmware/updates""

This reverts the main change in commit
65ade5a4f973f021918955fefb16e95943e7a66f.

There are too many test changes required first, see a tentative list in
https://github.com/thesofproject/sof-test/pull/645

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",80,34,0
"thesofproject/sof","fa0888991c017ee2b1c217a0e714b8f1a7b1a818","marc-hb","2021-11-04 05:06:06","false","xtensa-build-zephyr: cosmetic rename of two functions

Zero functional change.

Rename clone() to west_init_update() and build_all() to
build_platforms(). Also expand description of the west_init_update()
feature in the usage message and add a direct SHA1 fetch example.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",125,41,1
"thesofproject/sof","a64436c1e7810c68b242db499c0632f12ffdf1da","marc-hb","2022-07-18 22:58:14","false","doc/CMakeLists.txt: build by default

Add missing `ALL` keyword so a bare `make` or `ninja` without any
argument runs doxygen by default instead of doing nothing at all. There
is a single target so really no reason not to build it. It's not
required anymore to know the secret word `make doc`.

Note this CMakeLists.txt is not included by any other CMakeLists.txt

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",113,50,1
"thesofproject/sof","5a9dc8a0b503e627cf7c7b044e18cbb8b76ca8ff","marc-hb","2023-06-08 22:45:43","false","scripts/fuzz.sh: add -DCONFIG_ZEPHYR_POSIX

Don't rely on some semi-random default value.

The final `zephyr/.config` and binaries are strictly identical.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",46,60,1
"thesofproject/sof","d641558ef008b31c9e657f3a7850a7f4fbf4dd2c","marc-hb","2021-05-26 02:58:02","false","logger: print the value of a negative DELTA when there is one

Because why not.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",84,36,0
"thesofproject/sof","3fefbf55f916fdd702fefa62d34363d19ba662ba","lyakh","2021-04-30 13:31:35","false","zephyr: notifier: per-core notifier support

Notifier data has to be per-core and its allocation is
performed in init_system_notify(), no need to also do it in
architecture code.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",82,35,0
"thesofproject/sof","a1c5183aa9896ed8867e562f73d3fd7a66792cb2","lyakh","2021-06-25 13:59:27","false","zephyr: ll_schedule: support no-return in domain_unregister()

Under Zephyr LL scheduling is implemented by per-core threads. They
are spawned when the first task on that core is scheduled. When the
last task on that core is completed, the thread is terminated, which
can happen in context of that very thread. This patch adapts the
generic LL scheduler code and the Zephyr LL domain scheduler for
that by making sure to call thread termination in a consistent state.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",75,37,0
"thesofproject/sof","e1f901def531dd45a8066b3b6b5de99d4f8e77fb","lyakh","2019-03-05 16:16:10","false","dmic: fix a pointer arithmetic bug

Adding N to a pointer is like jumping N array elements forward, not
like adding N bytes to the pointer.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",65,9,0
"thesofproject/sof","2babc0b8da900751e9c33d794c8186bb922cafe1","lyakh","2022-10-20 15:57:01","false","module-adapter: fix .get_attribute() functionality

.get_attribute() can be called any time after component
initialisation, mailbox data isn't available at that time any more.
Save a copy of IPC4 base module configuration instead.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",96,53,1
"thesofproject/sof","3ce32d3076a30d266c9c8b7be55163ae180d1e19","lyakh","2020-03-24 16:55:10","false","pipeline: (cosmetic) remove redundant code

Remove redundant initialisations and an empty ""default"" case.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",64,22,0
"thesofproject/sof","689e06d78b6e821dce776deb6ed4abea2f24bc2d","lyakh","2021-11-03 14:42:53","false","ll_schedule: remove an unused structure field

struct ll_schedule_domain::registered[] is only used inside
ll_schedule_domain.h and only to update itself, it's exclusively
self-serving. Remove it.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",125,41,1
"thesofproject/sof","7bc69845ccefed35526a5487acf613d4db68eb87","lyakh","2023-04-12 15:19:39","false","buffer: use an accessor to read struct audio_stream::w_ptr

This patch adds audio_stream_get_wptr() to read
struct audio_stream::w_ptr and converts all users. Apart from hiding
internals of the structure, it also enforces the use of the
__sparse_cache annotation.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",51,58,1
"thesofproject/sof","0c7e4c32555a5f11ef971b3c8f04bb5f75ebf205","lyakh","2021-04-29 15:44:52","false","init: (cosmetic) simplify a function

Simplify a function by removing a redundant variable.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",81,35,0
"thesofproject/sof","6bed0f0bdb7192bd9d902d12a91dfd1ef977d77c","btian1","2023-09-01 02:28:12","false","audio: host: remove duplicated calculation for sample bytes

in parameter, dma sample bytes already was calculated and assigned
to dma config, during copy, this can be directly used, cycle saving
is quite remarkable, 452 to 425, previous target is 420, we already
meet with this patch.

note: test platform is tgl board with sof debug build.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",24,63,1
"thesofproject/sof","df9421836e08e7e5fd24480a0a5d19fcffd87a57","btian1","2023-05-08 08:32:10","false","copier: replace ipcgtw trigger and prepare with direct calling

for ipcgtw case, there is nothing to do for it, except for set
ipcgtw device state, so directly set state for prepare and trigger
instead of through ops driver, this part of code will be removed
since ipcgtw device will be removed eventually.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",53,59,1
"thesofproject/sof","4c28f08ecefbe02924ffcd98d4b5576b0404e54d","joechengxperi","2022-11-18 04:27:19","false","config:mt8186:add DTS config

Enable EQ + DTS SDK

Signed-off-by: Joe.Cheng <joe.cheng@xperi.com>",97,53,1
"thesofproject/sof","b77dbc3c88ef03639b689546c43abf0ec157c44e","btian1","2023-04-19 07:32:46","false","dai-zephyr: remove not used pointer and its assignment

buffer_ptr is no longer valid in dai-zephyr.c, remove it.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",51,58,1
"thesofproject/sof","56dae244aeeb96a0a6b175248e040179c34bc149","btian1","2023-09-22 12:50:13","false","audio: perf: enable dsp clock for performance measurement

previously, performance measurement based on platform clock, source
clock is 38.4mhz, for better align with CPC calculation, change
clock to dsp clock, this will be done through enable config:
CONFIG_TIMING_FUNCTIONS, and this config only be used with perf_cnt
header file, so this change only have impact on performance build.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",21,64,1
"thesofproject/sof","bcc14074cd2b80d2e2a4803932daf6a961b3cb0a","ujfalusi","2023-01-31 15:06:06","false","smart_amp_test: Split the module config and blob receiving for IPC4

During the component create (module init) we are not receiving the blob
containing the sof_smart_amp_config, only the base_cfg and base_cfg_ext is
received.
The sof_smart_amp_config content will be sent via large_config_set at a
later time.

Introduce a new IPC4 only struct to store the base and pin configurations
and handle the IPC3 / IPC4 init differently.

The blob received via large_config_set must be the same format as the blob
with IPC3.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",51,56,1
"thesofproject/sof","7c4a53f802016c6fdca1448ad76e68f0765ffc76","marc-hb","2022-05-12 00:41:11","false","checkpatch: add __sparse_cache and __sparse_force attributes

These attributes were added to Zephyr's include/zephyr/debug/sparse.h by
commit 17eb313a1b15 (""sparse: add an address space and a __sparse_force
annotation"")

This gets rid of dozens of warnings in
https://github.com/thesofproject/sof/runs/6387526478

```
ERROR: need consistent spacing around '*' (ctx:WxV)
+	struct comp_buffer __sparse_cache *buffer_c, *sink_c;
 	                                  ^

ERROR: need consistent spacing around '*' (ctx:WxV)
+	struct comp_buffer __sparse_cache *source_c;
 	                                  ^
```

etc.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",113,47,1
"thesofproject/sof","1a7c0056a221cfa486b1cf70e2afdf889d166de9","marc-hb","2021-05-27 00:12:11","false","dma-trace.c: use new mtrace_printf() to add some error handling

Replace some tr_err() too.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",84,36,0
"thesofproject/sof","646e5623990871b4c1beb142974d42ae06332462","marc-hb","2020-09-15 19:13:33","false","travis: remove duplicate and deprecated host-build-all.sh

We already build _and_ run the testbench in the next stage, with the
newer script. No need to build the same thing twice.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",63,27,0
"thesofproject/sof","ce2291470ee9b49205da616d10fbd4155921d3fc","lyakh","2020-03-31 15:02:05","false","topology: add a ""core"" parameter to the W_SELECTOR() macro

This places all SectionWidget.SELECTOR* topology widgets, created by
the W_SELECTOR() macro on the same core, on which the respective
pipeline is scheduled.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",69,22,0
"thesofproject/sof","90955de93e8ffa3633093af5861a0778ce5f6237","lyakh","2020-10-27 11:29:19","false","hal: remove unused files

Prevent unused Xtensa XTOS files from building but keep them in the tree
until migration to Zephyr completes.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",75,29,0
"thesofproject/sof","d5e97949a27718a1f486f97624ce4d04664277bc","lyakh","2022-12-20 13:25:46","false","selector: avoid array overflow

Check source and sink channels to avoid accessing beyond array
boundaries.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",90,55,1
"thesofproject/sof","aa767fd5cecb63ad917e393ba0f245d080b61120","lyakh","2021-12-17 14:26:50","false","zephyr: remove non-existent directories from CMakeLists.txt

Two directories for cAVS 2.0 and 2.5 in Zephyr CMakeLists.txt don't
exist. They're safely ignored, but remove them to avoid confusion.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",117,42,1
"thesofproject/sof","114bbcec9c412b9f8f3cb42c42d6b5b9efa6cca0","lyakh","2020-09-02 17:02:19","false","trace: use proper pointer formats

The PP_NARG() macro can only handle integer type arguments, use
META_COUNT_VARAGS_BEFORE_COMPILE() instead to avoid having to cast
pointer types to integers.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",71,27,0
"thesofproject/sof","360343e8de2102fea284a63e148e839ad97b4c0c","lyakh","2022-04-07 14:13:36","false","dai: always acquire buffers for access

Buffers must always be acquired before access.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",114,46,1
"thesofproject/sof","c1ba0949f7a9bad529cce53096a1d87ec93baaf3","btian1","2023-10-19 02:54:03","false","audio: eq_iir: move iir structure definition to header file

this structure is common for both ipc3 and ipc4, move it
to header file.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",12,65,1
"thesofproject/sof","3d5958f78b3c048b7c0acc1d505978053a4169e7","tlauda","2018-09-27 09:39:09","false","ut: include missing headers

Includes missing headers.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",38,4,0
"thesofproject/sof","df8dc168549732efdac56bca794cb643d8ba3c1a","tlauda","2019-03-29 14:05:04","false","hda-dma: remove HDA_STATE_INIT

Removes HDA_STATE_INIT state as it's no longer
needed and does nothing.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",51,10,0
"thesofproject/sof","f14a8a7049e9a2a79aef1a96c6f6b9cb1113d4f5","tlauda","2019-08-01 11:38:06","false","ipc: access _ipc through uncached memory region during ipc send

Function responsible for putting FW notifications into the
queue is shared between all cores. In this function we should
access _ipc object only through uncached memory region to not cause
random data overwrite.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",53,14,0
"thesofproject/sof","6a8a3d02f1813d2f9bd8de6f01191635cc31e207","tlauda","2019-12-17 09:34:42","false","alloc: extract flags to separate argument

Extracts flags from zone to use them as a separate argument
during allocations. It allows for addition of new zones and
also is more clear this way.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",69,18,0
"thesofproject/sof","93ecfe671a79852594f29f59a54eb4a3a30836da","tlauda","2019-09-10 14:39:13","false","agent: use PLATFORM_DEFAULT_CLOCK

Changes clock used by agent to PLATFORM_DEFAULT_CLOCK.
Previously used PLATFORM_WORKQ_CLOCK also has value of
PLATFORM_DEFAULT_CLOCK.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,15,0
"thesofproject/sof","d27d0682451bb13c6c6d7c112958e58602c2c1a5","singalsu","2023-10-02 08:34:49","false","Tools: Topology2: Add support for ALSA enum control

This patch adds to definitions in common.conf a new class ""text""
to support the enum control values.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",16,64,1
"thesofproject/sof","65687d0c6b50d8c38eaa338ed4862e00df1a60cf","singalsu","2022-08-26 15:59:18","false","Test: cmocka: Add unit tests for matrix library

This patch adds four unit tests for 16 bit matrix multiplication.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",113,51,1
"thesofproject/sof","9ca2f7655e85ab313c264aafb7fd9dceab947a4f","singalsu","2022-01-18 13:07:51","false","Audio: Buffer: Remove too verbose buffer debug traces for CONFIG_LIBRARY

This patch leaves out low value debug traces with CONFIG_LIBRARY for
comp_update_buffer_produce() and comp_update_buffer_consume(). They
are too far too verbose and slow down testbench runs, and cause
massive size data files if traces are captured to files.

The change is done by defining bug_dbg() macro as empty. The variable
addr needed to be eliminated because it is used only for trace.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",113,43,1
"thesofproject/sof","487033271988fd093cc7b2642aebe84778acbc4e","singalsu","2019-07-11 16:13:06","false","Topology: Updates for single EQ pipeline definitions

This patch provides needed maintenance. The pipelines
missed the volume ramp tokens and caused topology build fail for
topologies those would use the pipeline macros
pipe-eq-fir-volume-playback.m4 and pipe-eq-iir-volume-playback.m4.

The embedded filter coefficients in these pipelines were replaced
by included default FIR and IIR filter coefficients to fix ABI
incompatibility in the configuration blobs and ease future
maintenance of these pipelines.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",43,13,0
"thesofproject/sof","8024351dae32a27263fc448530c83c4322b26c37","singalsu","2022-04-01 18:17:38","false","Audio: SRC: Allow SRC to not process in copy()

The zero consumed and produced is not an error for SRC
it can happen with some low sample rates those have
a larger internal block size than source or sink period.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",110,46,1
"thesofproject/sof","83897cc92a6b304d4dec40bf396e4837f313828f","singalsu","2021-07-20 11:26:14","false","Audio: TDFB: Clear input and output buffers in reset()

The component should reset to default state so these
buffers need to be cleared.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",91,38,0
"thesofproject/sof","48bf7af183a133f84aa1f60ea39c63f077a9f436","singalsu","2022-11-29 17:51:33","false","Tools: Test: Prevent in src_test.m unnecessary window open

This speeds up src_test.m with no plot window opening for rate
that is not supported in the conversions matrix. No output file
returns failure -1.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",102,54,1
"thesofproject/sof","8d01ad69a7b618203ec104cd3493969bb580160a","singalsu","2023-08-16 14:37:25","false","Kconfig: Enable crossover and multiband-DRC by default

This patch enables for TGL and MTL platforms as default
to enable CI build tests, etc.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",25,62,1
"thesofproject/sof","05be213d46d4755ff039fe8703a16293738e226f","tinghan-shen","2021-11-30 03:01:00","false","config: Add mt8186.toml

Add mt8186.toml to support sof-mt8186.ri binary build

Signed-off-by: Allen-KH Cheng <Allen-KH.Cheng@mediatek.com>
Signed-off-by: Tinghan Shen <tinghan.shen@mediatek.com>",131,42,1
"thesofproject/sof","97b34a18692c31cc45e6ce2c821727074ebe16d2","kv2019i","2022-06-17 09:15:29","false","zephyr: panic: switch to __ASSERT_NO_MSG() for assert()

Continue the changes done in commit bc39c0e91284 (""Make Zephyr build
compatible with optional assert() with __unused"") and switch
to use __ASSERT_NO_MSG() as implementation of assert() when SOF
is build with Zephyr.

This allows for build time control of asserts with standard
CONFIG_ASSERT option(s) and ensures same policy is used for asserts in
both Zephyr and SOF code.

This effectively disables assert checks in the default build for Zephyr,
improves performance of a typical single ll scheduled audio component by
0.08 MCPS. Performance was tested with the Intel Tiger Lake system,
build with XCC 12.0.8 as defined in sof/scripts/xtensa-build-zephyr.py.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",119,49,1
"thesofproject/sof","6071fb8dbf07f35db398b645ca4ceaf98779f071","bkokoszx","2019-11-08 09:48:30","false","dmic: add missing schedule_task_cancel() in dmic_stop()

After trigger stop we should cancel dmic task
from low latency scheduler.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",55,17,0
"thesofproject/sof","7801540dbafe3d231935c6232f8144b08a6bca5d","mh12gx2825","2020-04-20 20:34:40","false","sof: audio: free memory before returning in error

Memory allocated for new KPB component should be released before
returning NULL in when one of sampling width or number of channels or
sampling frequency are set to unexpected values.

Signed-off-by: Deepak R Varma <mh12gx2825@gmail.com>",86,23,0
"thesofproject/sof","bf11710734c9dd12145f994d20ac82352850d81b","dabekjakub","2019-10-21 11:23:26","false","memory: Fix DEBUG_HEAP build

Unify function naming to fix DEBUG_HEAP build

Signed-off-by: Jakub Dabek <jakub.dabek@intel.com>",64,17,0
"thesofproject/sof","56a135216394a85cfe9d6f8474ee511335241ff4","softwarecki","2023-09-18 13:37:12","false","logger: convert: Code quality improvements

The precision check condition has been simplified, the unsigned value
cannot be negative. Added definitions containing an error message instead
of using a constant variable.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",20,64,1
"thesofproject/sof","8038fad532746bde5e705ff1c36e20f4c6e4c274","softwarecki","2023-05-30 17:00:41","false","host: zephyr: Subtract partial_size from dma avail/free size.

When the host component detects use of deep buffering it decreases
frequency of dma reloading. The number of processed data is summed up in
the partial_size variable and they are acknowledged in larger packets.
However, the size of processed data was not subtracted from the number of
available data, which could lead to a buffer underrun/overrun.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",46,60,1
"thesofproject/sof","0703228ec27a58e17569370c2a3c72d94bb7f97b","andrula-song","2023-03-02 07:05:47","false","Audio: Dcblock: Avoid division by using frame aligned API

Using frame aligned API to avoid the division in
audio_stream_avail_frames() function, which is called by
dcblock processing function every time.

Signed-off-by: Andrula Song <andrula.song@intel.com>",61,57,1
"thesofproject/sof","b787bead93ed91d250f96beab9684676e118f1aa","andrula-song","2023-05-31 03:27:38","false","Audio: Peak volume: Add Kconfig to select the period of reporting
peak meter value

Add kconfig to select the period of reporting peak meter value.
The default value is reporting peak meter every 10 ms.

Signed-off-by: Andrula Song <andrula.song@intel.com>",47,60,1
"thesofproject/sof","41ca1d8827eaad20b72ec5fe1e92fb33314c7a7b","xiulipan","2020-07-29 05:35:00","false","topology: add keyword detect pipeline into sof-tgl-nocodec-ci

Add KPB pipeline into the sof-tgl-nocodec-ci topology.
This topology will be a reference test topology for all features used
on TGL.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",79,26,0
"thesofproject/sof","7cba6e3f47c197b5b486d7804633dc792b7198d9","xiulipan","2018-06-22 09:01:09","false","scripts: xtensa-build: fix ROOT var alais for BXT/APL gcc

Need to change ROOT as well as HOST target.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",3,1,0
"thesofproject/sof","c08f030d536e5474cb0d2e4c463bc50b438f18f9","rosschisholm-xperi","2021-04-20 16:39:52","false","topology: fixing comments in jsl-rt1015 topology

Corrected comments relating to s32le (was s24le)

Signed-off-by: Ross Chisholm <ross.chisholm@xperi.com>",88,35,0
"thesofproject/sof","40d625db38947b1a9fa7cb0b1b2c70a8636e415e","RanderWang","2021-12-14 08:02:03","false","ipc4: return correct ipc status to host

Currently some of pipeline setting ipc messages are
scheduled in another thread, both ipc thread and the
schedule thread may return the status. It is work for
IPC3, but for IPC4 a batch of pipelines will be set
by single ipc message and they will be scheduled in
multiple threads, then multiple ipc messages will be
repied to host. This is invalid.

In this case error may occur in both ipc thread and
schedule thread. To update err status simple, schedule
thread will only return error to ipc thread which will
maintain error status and reply to host.

Signed-off-by: Rander Wang <rander.wang@intel.com>",112,42,1
"thesofproject/sof","db4d0810404fe8df91c124d6a89e572884b74fe7","RanderWang","2022-01-21 02:35:39","false","ipc4: fix a regression issue on windows

The issue was found when testing 44.1khz stream on windows.
We should use input format of copier to set source buffer fmt,
not output fmt which may be dai output fmt and different from
source fmt.

According to spec, copier only support one input source and
four output sinks, so we don't need to check source list.

Tested on windows.

Signed-off-by: Rander Wang <rander.wang@intel.com>",113,44,1
"thesofproject/sof","896f73d36ada4d24d2348c4009b6df6171de5887","RanderWang","2019-03-29 02:07:11","false","topology: dmic: add dmic support in generic hda topology

Now sof kernel driver supports two dmic dai links: DMIC01 PIN,
which supports rate of 48k, and DMIC16k Pin, which supports rate
of 16k. And if four channels dmic is used, we only support one dmic
dai link. CHANNELS would check in intel-generic-dmic to generate
the correct topology file.

Tested on whiskylake & icelake & apollolake up2

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",52,10,0
"thesofproject/sof","dda9d0f9fc4b5f0419169974072f0772574e537c","MingJenTai","2021-11-19 02:55:24","false","Add RTNR support in intel-generic-dmic-kwd.m4.

Signed-off-by: Ming Jen Tai <mingjen_tai@realtek.com>",128,42,1
"thesofproject/sof","b7bb801f0e8d3b967824292a0263d0d94c66c20a","ktrzcinx","2020-07-08 05:41:19","false","atomic: ll_scheduler: Fix atomic implementation, return old value

Return value should be aligned with compiler builtins implementations,
see https://gcc.gnu.org/onlinedocs/gcc-4.1.1/gcc/Atomic-Builtins.html

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",73,25,0
"thesofproject/sof","b42234247b9b020352e0fcbf7a62ca3816ed5119","tlauda","2020-03-30 08:00:43","false","notifier: handle new aggregate flag

Implements handling of new notifier aggregate flag.
With this flag set the notifier will automatically use
existing handle instead of creating a new one. It's helpful
when we want to register only once for an event, but it's
very hard to explicitly keep track of number of registrations.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",67,22,0
"thesofproject/sof","0856a115ce9bc5cd78eb348e2e6561f9cee78ab1","tlauda","2018-08-21 10:13:39","false","component: add cache ops

Adds cache operation for every component.
This method allows performing cache operation on
current execution core based on selected cache command.
It's required in order to allow pipeline task switching to
slave cores. Master core will handle IPC to create and
configure pipeline, but later the whole pipeline with
components needs to be flushed to SRAM for other cores
to properly read it.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",19,3,0
"thesofproject/sof","79dfc19a4b4098967515def050d44ee91e6ad5bd","tlauda","2019-08-05 13:31:56","false","cpu: add cpu_is_slave method

Implements cpu_is_slave helper method, which checks
whether the provided core is slave.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,14,0
"thesofproject/sof","19b23cc505152c440813ac69cee2e9a418155d5c","tlauda","2019-10-30 13:06:47","false","topology: sof-tgl-rt711-rt1308: add volume to DMIC pipelines

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",61,17,0
"thesofproject/sof","6a754bb5da45bcd5ec51817681a98190e468990e","tlauda","2020-02-07 15:29:35","false","component: change comp_get_copy_limits implementation

Changes implementation of comp_get_copy_limits function.
It now takes source and sink buffers, so they can be
available outside of the function. It will matter with
inter-core buffers, when synchronization will need to be kept.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",79,20,0
"thesofproject/sof","6275d18ce2a58e85a5f77bcbdf133fcdc6722216","barry-waves","2022-12-13 08:36:09","false","module_adapter: free memory resource

Since module-specific prepare API will be called every time on prepare
 of module_adapter (stream start trigger), the reset API should
free all memory that was allocated during the prepare API.

Signed-off-by: barry.jan <barry.jan@waves.com>",98,54,1
"thesofproject/sof","2b4b40587c30c5a270387ae9e6a569b5b889a872","bardliao","2019-09-20 10:26:48","false","topology: fix hdmi topology issue for SdW projects

Somehow there is an extra ""48"" in  DAI_ADD() and it uses wrong
pipeline in PCM_PLAYBACK_ADD().

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",63,16,0
"thesofproject/sof","62e358231ea27deb9b9e16a827d4092a1306a904","marcinszkudlinski","2023-02-14 15:30:58","false","kconfig: add DP_SCHEDULER kconfig def

some platforms don't use Zephyr, therefore they can't
use DP scheduler. Add a config option

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",55,56,1
"thesofproject/sof","6cadf5b084fc34ee4d9181699738a26719c57a43","singalsu","2018-08-30 13:02:39","false","Host platform library: Fix compilation after git merge from next branch

Most of the errors are due to missing macros and header files. This
patch adds a number of minimal new header files into
src/arch/host/include/arch and src/library/include/platform.

The testbench ipc init is updated with previous changes of removed ipc
struct fields.

The testbench memory freeing code is updated with ipc struct change to
access comp_list.

The FIR EQ allocated pointer address tracing is removed since it is not
critical to trace. The pointer casting caused a compilation error for
host.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",29,3,0
"thesofproject/sof","068ba4b23070660110c9b89e2c9d8ee19ec3f9b0","singalsu","2022-05-04 12:31:37","false","Audio: EQ FIR: Convert assert to normal fail

This patch changes the assert to check of FIR processing function
and fail with -EINVAL if function is not set.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>
Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",115,47,1
"thesofproject/sof","92b23fa8560afc68833548e135d486ecd6496a2d","singalsu","2019-09-06 09:09:45","false","Tools: EQ: Don't force upper case EQ response name

The existing IIR response names are not all upper case. This patch
removes the conversion to upper case to be able to automatically
generate the topology m4 syntax example equalizers.

Without this patch run of example_iir_eq.m script causes successive
topologies build to fail.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",60,15,0
"thesofproject/sof","53e8b71f69c4cf43d32a5277183204a16e4e03a7","singalsu","2023-05-16 13:27:36","false","Tools: Topology2: Remove 24 bit formats from EFX pipeline

This patch makes similar change to pipeline as done earlier
for mixout-gain-dai-copier-playback.conf. The 24/32 bit formats
are deleted as unnecessacy. The audio format definition for
DRC is changed to similar style as for copier and gain.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",51,59,1
"thesofproject/sof","ef90ee9a400ba88d1031e602bb230114e2805532","singalsu","2022-08-10 13:06:47","false","Test: cmocka: Always build FFt unit tests

There seems to be no reason to avoid add_subdirectory(fft).

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",110,50,1
"thesofproject/sof","0526077c87701623d034dbd47ab972de93807326","singalsu","2018-12-12 14:30:04","false","Tools: Update SRC tool for 50 kHz modes, SRC testbench, add topology

This patch adds 50 kHz into SRC generator script for std and tiny
profiles. The src generator script is cleaned up and the default
conversion matrix is moved into caller script for easier maintenance.
The plots appearance is improved and the generated coefficients code
look is improved to pass the git pre- and post-commit script
requirements.

The SRC test bench scripts are updated for changed locations. A SRC
playback topology is used for test bench and real device usage.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",45,6,0
"thesofproject/sof","726dd545d62d2a6be040dd8e0d80a59849ce537a","marc-hb","2020-03-19 21:45:08","false","cmocka/cmake: don't re-fetch (and change) cmocka.git on every build

Add ""UPDATE_DISCONNECTED True"" property in ExternalProject_Add() so:

- Unit tests can be rebuilt without a network connection
- The code can't change from one build to the next without the developer
  being aware.

Found by chance thanks to some network issue.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",68,21,0
"thesofproject/sof","64af017dff3b6646f87387c76f9e94ecb9a06392","tobonex","2023-09-15 18:08:35","false","selector: remove buffer_acquire from selector.c

remove buffer ops from selector.c

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","7f74440c514ca469e73781709d4c8fe01cf8c749","sathya-nujella","2020-09-14 17:41:38","false","topology: Update tplg file name for tgl system with max98373-rt5682

Changed the tplg file name in kernel driver according to Maintainers
feedback. So, topology file name here needs the corresponding change.

Signed-off-by: Sathyanarayana Nujella <sathyanarayana.nujella@intel.com>",64,27,0
"thesofproject/sof","492821a9f765a46811f01128cbfa2b196308b629","chunxu-li","2022-03-03 09:52:44","false","platform: mtk: add platform dai build support for mt8186

Add platform dai build support
Add platform dai_init

Signed-off-by: Chunxu Li <chunxu.li@mediatek.com>",113,45,1
"thesofproject/sof","c60529663652019a815a22253844efbf026addea","RanderWang","2023-04-25 13:57:52","false","topology2: add multicore support for CI test

create another topology to test multicore since Currently we have done
too much work in cavs-nocodec and CI test will be failed for main branch
is not ready for multicore feature.

Signed-off-by: Rander Wang <rander.wang@intel.com>",53,59,1
"thesofproject/sof","d53466ad7e6a2e716858e48d2d220866760bc4e2","RanderWang","2019-01-24 07:02:40","false","IPC: port PM D3 entry fixes to CNL, WHL & CML

On CNL, we need to set two registers: IPC_DIPCTDR and IPC_DIPCTDA

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",55,8,0
"thesofproject/sof","871e01d238997a5f480ad5bc72811119dda25532","RanderWang","2019-02-18 07:32:28","false","dw-dma: BDW: fix noise issue on BDW

When setting sar & dar registers in GP DMA, src address
and dest address should be masked for DMA engine to
identify memory space.

On BDW, the memory address in dsp is composed by 6 hex-number
like 0xABCDEF, and the address on BYT is a style of 0xFFABCDEF.
So it is correct on BYT even without mask.

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",63,8,0
"thesofproject/sof","216be694c27e70f360c73d6b3c3ca29475f2ff65","marc-hb","2023-11-03 18:44:30","false","samples: change smart_amp_test prefix `smart_amp_` to `smart_amp_test_`

Avoids conflicts with the ""real"" smart_amp.c when the ""stub"" compilation
check enables everything and compiles everything.

Also makes `git grep smart_thing` a bit more convenient in some cases.

Only the IPC3 sample clashed because the real code does not use
MODULE_ADAPTER(). Pre-emptively rename the IPC4 sample too for
consistency and in case the real code changes its mind later.

Only global symbols are renamed; no need to git churn private symbols.

Fixes commit ba2cfe3daa55 (""app/stub*.conf: add
CONFIG_SAMPLE_SMART_AMP=y"") which clashed with commit
d4d0a0ca134f (""smart_amp: fix code and re-enable it on stub builds"")

CI did not detect the clash because these two commits were merged at the
same time.

In case anyone is interested, the CI ""fix"" to prevent this type of race
is a GitHub feature called ""merge queue"" (resp. ""merge train"" in Gitlab,
""commit queue"" in the older Chrome infrastructure, etc.)  It would be a
heavy lift, overkill for the small size and concurrency of the sof git
repo and how rarely these accidents happen (a couple times/year)

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",4,65,1
"thesofproject/sof","9d84c1510c39526776933cca624add5d9f1c71d9","marc-hb","2021-07-01 21:01:23","false","pm_runtime.c: explain the opposition between ""enable"" and ""active""

Pure comments, no code change. Follow-up to commit 8633d5fd6d3a (""cavs:
pm: improve PM_RUNTIME_HOST_DMA_L1 documentation"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",85,37,0
"thesofproject/sof","e9c83cf009cbc2ae51e63b167e22f8af8c0d1f1f","marc-hb","2020-07-06 18:21:58","false","version.cmake: add ""--match v*"" to fix git describe

Before this fix, any random, later git tag like for instance
""releases/jsl/v3.0-rc1"" would be picked up and then immediately
discarded and replaced with v0000 because it didn't start with 'v*'

Also log all the versions always and not just when there is already a
.tarball-version file.

Increase --abbrev=12 because --abbrev=4 doesn't seem to make sense.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",73,25,0
"thesofproject/sof","d722ee15b153848ec4677949927d7a3c53806faf","marc-hb","2022-01-18 20:02:28","false","version.cmake: --no-abbrev-commit cause github has allowAnySHA1InWant

Some git servers like Github allow fetching by full length SHA so this
useful information to share.

(Others forbid this entirely, see last page of `git help fetch-pack`)

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",113,43,1
"thesofproject/sof","9abc285574ffa0aaf8ec6154e98bd60bc48503f6","lyakh","2022-01-11 13:36:24","false","build: add missing headers

common.h calls panic() and uses SOF_IPC_PANIC_ASSERT, add missing
headers.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",115,43,1
"thesofproject/sof","7687ab53fda001bafe49cd7a143676565029ef95","ranj063","2021-10-27 16:25:42","false","buffer: deprecate buffer_lock/unlock

all users replaced with buffer_acquire/release

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",128,41,1
"thesofproject/sof","5b076f17384c51a0fbe4ed86fa19cbcbab33b7b6","abonislawski","2022-08-30 07:20:34","false","config: tgl-cavs: add probe module

Add probe module to tgl-cavs config

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",114,51,1
"thesofproject/sof","5598a1c0b8ab928b640909648b2672eb6298d9e6","abonislawski","2020-03-10 08:32:02","false","tgl: add dynamic vectors size

needed for alternate boot for slave cores

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",85,21,0
"thesofproject/sof","89764c048f28a560c5582f80223108f02668d5ca","ranj063","2023-05-02 18:11:19","false","dai-zephyr/dai-legacy: Split up dai_comp_trigger()

Add a new helper function dai_zephyr_trigger() that can also be used by
a copier device. Also, modify the signature of the
dai_comp_trigger_internal() to pass the dai_data and device pointer.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,59,1
"thesofproject/sof","3120b7c4c9e5db97a413eeffebaf46f031a98dd9","ranj063","2022-02-10 21:09:29","false","topology2: gain: remove default audio formats

Remove the default audio formats from the gain class definition.
They should be added depending on the number of formats based on the
pipeline. Fix the gain-playback and gain-capture pipelines to add the
audio formats for the gain widgets.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",108,44,1
"thesofproject/sof","2e9669c249794b405291d9dbfbf45d85655aa67f","ranj063","2021-10-27 15:14:49","false","google_hotword_detec: use buffer acquire/release

instead of buffer_lock/unlock which will be deprecated.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",128,41,1
"thesofproject/sof","f64a424bfd5def42d83d2312cf50f05ef22c5ce2","ranj063","2023-05-16 20:28:46","false","topology2: components: Add a new class definition for the host copier gateway

This will replace the generic copier for the host gateway.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",52,59,1
"thesofproject/sof","8e916d510bbb7bb33aa670a2d5c451a2ed4a31ac","aiChaoSONG","2023-02-18 05:05:55","false","selector: extend selector module to use base config extension

This patch extend the selector module to use base
config extension for module init, which ensures only
base_cfg and base_cfg_ext is received in module init
on linux side and align the init blob format with
other modules.

However, on Windows side, the payload base config with
output format style payload is still used, this payload
should be supported before Windows doing the payload
format migration.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",55,56,1
"thesofproject/sof","499d0ee310951f17b21daab5e9664f21cd91e115","lyakh","2021-06-11 14:44:36","false","zephyr: ll-schedule: remove work queue left-over

Remove work-queue implementation left-over code.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",71,36,0
"thesofproject/sof","6ce323750963d204f04b184f9686a554517e9da6","lyakh","2021-10-07 08:10:18","false","zephyr: apl: re-enable building with XCC

Zephyr XCC builds for Apollolake can be re-enabled now after the RAM
footprint has been reduced.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",121,40,1
"thesofproject/sof","19117f620e42571a018d574d07c149356f04ff5e","lyakh","2021-05-31 15:21:45","false","zephyr: ll-scheduler: convert Zephyr scheduling domain to timer API

Instead of re-calculating the next scheduling event every time use
the Zephyr timer API for the LL-scheduler Zephyr scheduling domain
in a simple periodic mode.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",83,36,0
"thesofproject/sof","54455d592f7bc49af2302bd7e7361fcaad38b449","lyakh","2022-10-13 14:14:18","false","ipc4: (cosmetic) convert several if-else chains to switch-case

Where applicable, switch-case provides better readability than
chained if-else, replace several such cases.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",97,52,1
"thesofproject/sof","8bb6321c6ea792e2fc2d2f40dc8942d62bd07841","lyakh","2023-01-25 13:19:54","false","tdfb: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register tdfb with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","4e0f0dec1febaf40b0ec6d222d12b557a7e97795","lyakh","2022-09-08 12:01:48","false","volume: fix cache invalidation in volume_set_config()

With IPC4 volume_set_config() is called from
module_set_large_config() with the host mailbox used as a
configuration source. Data there is written by the host, therefore
any DSP cache contents for that area is invalid. volume_set_config()
does invalidate local cache for that area but it's doing it too late
- after calling module_set_configuration() which already reads the
data. This leads to sporadic wrong configuration readings. Move cache
invalidation before module_set_configuration() to fix that.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",105,51,1
"thesofproject/sof","ae7f90c468f3d6d69f6ba5d9d7afd688b699c019","lyakh","2020-12-31 07:03:57","false","common: make common.h invisible to linker scripts

common.h defines an ALIGN() macro, which would conflict with the
identically named linker builtin function. At the moment
common.h isn't included in linker scripts, but it might get
included via a different header.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",72,31,0
"thesofproject/sof","b60b77d0042cc42195cfc7bda369b8a0dfc6c45a","lyakh","2021-10-08 15:09:18","false","pipeline: stop recursing if requested by a component

When recursing pipeline components, using pipeline_for_each_comp(),
each component's .comp_func() method is called. Those methods can
return 0 for success, a negative error code or PPL_STATUS_PATH_STOP
if recursing should stop. However, the latter code is ignored by
pipeline_for_each_comp(). Add a check for that code and terminate
recursion if detected.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",121,40,1
"thesofproject/sof","7282958c4a4028be176bfcabd457b76c1e66ad96","lyakh","2020-03-10 13:43:04","false","topology: add a ""core"" parameter to the W_DAI_OUT() macro

This places all SectionWidget.<DAI type><DAI index>.OUT topology
widgets, created by the W_DAI_OUT() macro on the same core, on which
the respective pipeline is scheduled.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",84,21,0
"thesofproject/sof","529d0cbfc60ad5205141d3e6db9c82635208afa2","lyakh","2022-04-11 10:19:29","false","waves: fix building with gcc

gcc implements COMPILER_FALLTHROUGH with an __attribute__ so there
must be a semicolon after it. Also remove unused variables.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",115,46,1
"thesofproject/sof","d0bc72290a914934cd01a82f300fc896545da976","marc-hb","2022-09-01 21:49:50","false","test/tplg-build.sh: remove spurious xargs -n1 option

The xargs option `-I/--replace` hardcodes max lines `-L 1`. In other
words, it always splits the input line by line and ignores whitespace
delimiters inside each line. Initial xargs commit
d0f4aba9340d9 (""topology: speed up topology build"") used `--replace`
after `-n/--max-args=1` which was silently ignored by xargs version
4.7.0. Now xargs 4.8.0 prints the following warning:

  xargs: warning: options --max-args and --replace/-I/-i are mutually
        exclusive, ignoring previous --max-args value

Remove the ignored `-n 1` to remove the warning.

I compared the outputs before and after this commit and they're exactly
the same.

There's an extra twist. The same xargs command also uses the
`-d/--delimiter=,` option which makes xargs ignore newlines and
""translates"" any max-line `-L` option to `--max-args`; including the `-L
1` max implied by `--replace`. This twist does not make a difference:
any max-line or max-args is always overridden by `--replace` whether
`--delimiter` is used or not.

Of course this entire xargs script is re-inventing (C)Make/ninja that
provide build parallelism for free and much more... I digress.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",118,51,1
"thesofproject/sof","55025f6343b28b170fb4b0e26182a20f98fc927b","marc-hb","2021-05-12 18:06:52","false","zephyr/docker-build.sh: remove apt update / install libssl-dev

The Zephyr image has been updated in
https://github.com/zephyrproject-rtos/docker-image/pull/58

This will save some time and even better avoid llvm.org
glitches like this one:

https://github.com/thesofproject/sof/pull/4089/checks?check_run_id=2554961695

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",85,35,0
"thesofproject/sof","1a5fc0f188d04c9fc3df0aec5a446cf4e54d32ef","dbaluta","2020-04-24 10:43:38","false","licence: Include NXP Copyright

This is the standard recommended NXP license copyright.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",72,23,0
"thesofproject/sof","9bc69c7544cb6b6abccf1d633cbc10ac7bead874","dbaluta","2022-02-17 11:37:03","false","codec_adapter: Fix trace format mismatches

Two comp_err calls have mismatching formats and arguments. When built
with zephyr, comp_err() translates to printk which has better format
checks.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",105,44,1
"thesofproject/sof","12fdd638de8821163b458108689abc6104812cc5","dbaluta","2020-10-27 14:56:06","false","drivers: imx: sdma: Fix SDMA watermark

After experiments I found that current SDMA watermark
causes SDMA to miss SAI DMA requests.

The empirical value was chosen so that watermark is a
divisor of min(bd_count, fifo watermark).

Of course this needs to be revisited, but for now ""it just works"" (tm).

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",75,29,0
"thesofproject/sof","b65618612b1904548de76bf8564f9d27d5686f0a","dbaluta","2019-02-01 15:15:40","false","rimage: Refine sof fw blk type

Change the name of the enums to reflect the type
of memory where the given block will be loaded.

DATA section is mapped to DRAM, TEXT section is mapped to
SRAM. No ABI breakage.

We also reserve several slots for future use.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",58,8,0
"thesofproject/sof","1adc257ff7793e5bd201fb71f58dcd1934d9d545","dbaluta","2019-10-01 11:18:06","false","topology: Extend DAI_CONFIG to allow ESAI DAI

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",66,16,0
"thesofproject/sof","0277eb8c2d4bb4be0f8f2470cbe9865e09ed64ec","dbaluta","2021-03-30 14:26:25","false","codec_adapter: Update consumed bytes

After commit ed027d045be5 (""codec_adapter: Differentiate between consumed/produced bytes"")
the codec adapter expects codecs to update consumed / produced bytes separately.

This fixes passthrough and waves codecs.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",79,34,0
"thesofproject/sof","a90cee23786798dc992d4f4d539fc9b3194f4a62","DianaGabriela27","2019-03-06 11:23:00","false","rimage: Remove blank lines before/after braces

Blank lines aren't necessary after/before open or closed
braces.

Signed-off-by: Diana Ungureanu <diana-gabriela.ungureanu@nxp.com>",66,9,0
"thesofproject/sof","cfcdce9550f0fc926d5d68808f608e05f960f894","plbossart","2019-02-07 01:16:49","false","kmod_scripts: improve list of devices

HDaudio support was missing, along with a slew of codecs
Also add a log on module insertion

Tested on Up2 with HDMI&PCM512x, and CHT w/ rt5645

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",54,8,0
"thesofproject/sof","304c4b065f71ada0ba4f67ee6a100c734054dbf2","lrgirdwo","2020-04-15 09:58:17","false","zephyr: lib: Zephjyr has it's own memcpy and memset

Use Zephyr memset and memcpy when using Zephyr as RTOS.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",82,22,0
"thesofproject/sof","d4300912597453aec31ab80856da7760eb056439","plbossart","2021-05-10 20:39:24","false","topology: add missing configuration for byt-max99080

Somehow we only support this configuration for BYT, but there are
Baytrail devices using the same codec.

BugLink: https://github.com/thesofproject/sof/issues/4160
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",82,35,0
"thesofproject/sof","25c8990d39101e6dfe7e3b5375a5703777ff68ab","lrgirdwo","2019-09-14 13:36:38","false","fuzzer: add BSW platform and fix fw_ready for CHT.

CHT was missing fw_ready callback. Add BSW platform.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",60,15,0
"thesofproject/sof","898fefa6a6d5b8e9d56c88091460a9d26abb66d7","lrgirdwo","2019-04-20 10:40:25","false","cavs: irq: Add check for IRQ storms where a device will not clear.

Tell the user if any device continually interrupts the level 2 handler
and cannot be cleared.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",47,11,0
"thesofproject/sof","1629a1f72c7b4c9f203dabbb83d361fbf2b5b9c5","lrgirdwo","2022-08-19 13:10:56","false","header: rtos: decouple headers into rtos specific directories.

No functional runtime change, but changes to rtos partitioning and the
layout of headers .

This patch creates RTOS specifc header paths and updates spinlock.h
and kernel.h to show the new usage. Other headers will incrementally follow.
It reuses the current zephyr topleve directory and creates a new
toplevel xtos directory for xtos specific files.

Due to the mixing of RTOS, driver and library headers at the top level include
directory it was necessary to create rtos specific header directories i.e.

src/include/rtos-xtos
src/include/rtos-zephyr

These RTOS include directories will eventually contain RTOS specific headers
whilst common logic and structures will be placed in non RTOS directories.

This will also mean

""#include <sof/spinlock.h>""

will become

""#include <rtos/spinlock.h>""

and will allow easier visualisation of where and why RTOS headers are being used.
This will help to eliminate cross usage of headers between RTOSes.

Subsequqnt patches will move more headers and rtos specific wrppaer
source files into rtos specific locations.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",111,51,1
"thesofproject/sof","b55a2168f294afdce01e613d24d8903fb969874e","markbartonxperi","2022-03-28 15:18:26","false","audio: codec adapter: remove unused variable from dts codec

Enables dts codec to compile cleanly

Signed-off-by: Mark Barton <mark.barton@xperi.com>",112,46,1
"thesofproject/sof","c9553af9cbfcb800484dafe95c0744e2fade08ef","lyakh","2019-01-07 12:44:44","false","sue: use rimage for image building

Fix bugs in Sue Creek support for rimage:

- use a correct manifest offset
- place the image higher into RAM to avoid overwriting itself when
  copying the SOF proper.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",52,7,0
"thesofproject/sof","c323efee44e5d6350963290d5b0ba77d72933d51","lyakh","2022-06-30 07:53:22","false","drc: fix buffer acquisition

Instead of acquiring and releasing buffers locally multiple times,
do that once for .copy() and .prepare() methods.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",110,49,1
"thesofproject/sof","cff23f5c4e169c8d17b8aac86ab256990f610ca6","serhiy-katsyuba-intel","2023-07-27 15:34:34","false","Fix panic upon cancelling not scheduled task

Calling zephyr_ll_task_cancel() for a task which was actually never
scheduled results later in panic in zephyr_ll_task_done().

The fix makes zephyr_ll_task_cancel() do nothing for tasks which were
only initialized but never scheduled.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",31,62,1
"thesofproject/sof","1f4395f8057eed7c10b738866f1209e7d2052549","ShriramShastry","2021-05-25 14:43:22","false","Math: Trignometry: Add arc sine, cosine, cexp fun

Added cordic based approximation of arcsine,arc cosine and
complex exponential function to math trigonometry.

Signed-off-by: ShriramShastry <malladi.sastry@intel.com>",83,36,0
"thesofproject/sof","7a646c9dbd97408c49e33f0839a7b6c99ec9fbe5","PayalKshirsagar","2020-03-24 10:39:38","false","testbench: remove unneeded variable

Remove unneeded temporary local variable, its declaration and newlines.

Signed-off-by: Payal Kshirsagar <payalskshirsagar1234@gmail.com>",64,22,0
"thesofproject/sof","86e6e4e5b04f2602cc2ebb5359f21a07823d7e88","fredoh9","2022-08-15 03:42:35","false","Tools: Testbench: fix typo in copyright year

Obvious typo in copyright year, it is 2022.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",116,50,1
"thesofproject/sof","8d408eb2e6b6612f05aa35749b3c162fd719590a","jajanusz","2019-02-05 11:41:25","false","cmake: add dist target

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",58,8,0
"thesofproject/sof","0bf3ca6a8b8eb2176a9e737749f0813a3de7c012","jajanusz","2020-08-04 10:37:20","false","ll: set initial value for num_clients

Value for 'num_clients' has to be set, otherwise it may
have undefined value in later ifs.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",77,26,0
"thesofproject/sof","443319a7186b47b8e51fad4ee481b57bcabf476d","jajanusz","2020-07-13 13:50:05","false","idc: set budget for IDC task

IDC task may be time consuming and has high priority,
what may make other tasks stall. To prevent this it should
have limited cycles budget per systick.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",78,25,0
"thesofproject/sof","982307ebdc74fcb373675ab7af5d85833c8fb076","jajanusz","2019-04-29 10:58:59","false","scripts: build testbench for host

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",48,11,0
"thesofproject/sof","d963e513794f94e0927e9831eafb5e10180c1412","lgirdwood","2018-11-26 14:53:54","true","Merge pull request #624 from cujomalainey/soft-merge

Soft merge",41,6,0
"thesofproject/sof","20204a9cd7e4d89fc27008da7af3846c0c5b4015","lgirdwood","2018-07-16 18:46:22","true","Merge pull request #110 from jajanusz/ut-makefile-fix

configure: fix flags for unit tests",11,2,0
"thesofproject/sof","0a8c933873308154e11c2e4a464ea529cde69023","mrajwa","2019-04-08 19:06:33","false","KPB: move private data container from header file to source file.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",45,10,0
"thesofproject/sof","0df9dc1398ad5bc0f02114ebf1b94939570358a4","lgirdwood","2022-01-21 12:01:42","false","Revert ""topology1: remove setup config info from all codec_adapter topologies""

This reverts commit 5062a8bf79a8ed2cb634294712b53249d3e1eb03.",114,44,1
"thesofproject/sof","2ed30b5b04beedc554166317670795075cb67f8a","lgirdwood","2018-08-10 11:12:54","true","Merge pull request #213 from singalsu/eq_fir_blob_handling_fix_proposal

EQ FIR: Improve robustness with configuration blobs",19,2,0
"thesofproject/sof","408d7350686e0ec630696c5d2be2cae11b470fb4","sebcarlucci","2020-04-17 00:09:32","false","tools: tune: Add tools to generate ctrl bytes for Crossover

This commit adds the tools to generate the control bytes for the
crossover component. To generate the control bytes, run the
example_crossover.m script.

The parameters of the crossover components are:
- number of outputs
- sink assignments (routing crossover output to different pipelines)
- frequency cutoffs

To tweak the parameters modify the values in example_crossover.m and run
it.

Refer to sof/src/include/user/crossover.h for more information on how
the crossover config is structured and how sink assignments are done.

Signed-off-by: Sebastiano Carlucci <scarlucci@google.com>",82,22,0
"thesofproject/sof","3bea8a7b3ef3acb83e541b37b7479982f4a0ea3b","sebcarlucci","2020-04-16 21:37:25","false","tools: topology: Add crossover topology files

This commit adds the topology files for the crossover component.
The control bytes are generated by the tools in tune/crossover.

Signed-off-by: Sebastiano Carlucci <scarlucci@google.com>",82,22,0
"thesofproject/sof","ad2f035c068ef29876a6b6a423ab3909827da897","johnylin76","2023-08-15 03:00:00","false","smart amp : Do not use DYNAMIC topology with DTS

Follows after:
    214f98378 (""smart amp : Do not use DYNAMIC topology"")

which makes DYNAMIC undefined during smart amp tplg pipeline pcm/dai config due
to the use of volatile Kcontrols.

This commit applies the same on sof-eq-iir-dts-codec-smart-amplifier.m4 which
is used for (DTS + smart amp) projects.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",27,62,1
"thesofproject/sof","b3106c396e540c260bba3b08c218f6598ea74726","johnylin76","2022-08-18 20:14:18","false","module_adapter: get the actual period_bytes

At present module_adapter, period_bytes is calculated assuming the schedule
period is 1ms, which could be arbitrary in practice determined by the
topology.

This commit replaces the calculation code by audio_stream_period_bytes().
In addition, the timing for getting period_bytes is moved to the beginning
of prepare() (prior to the module prepare). At that moment it is guaranteed
that all parameters in components/buffers are settled through the pipeline.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",112,51,1
"thesofproject/sof","489bff14e199787ecd1b63360fdda5a1f70ce08d","ktrzcinx","2020-09-24 16:20:07","false","alloc: Handle operations on shared heap

New memory zone needs dedicated heap routines.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",64,28,0
"thesofproject/sof","63fe935dce104ecde3dddec0efadca5a7533cd05","ktrzcinx","2020-09-10 04:45:47","false","trace: Limit META_RECURSE depth level to 8

There is any user in source code who need deeper recursion level,
reducing it allow to prevent compiler error message flood during
working with META_RECURSE clients (eg. trace system).

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",66,27,0
"thesofproject/sof","0fa22ac38c1aa3e592e48daee9febab25e7c9d95","ktrzcinx","2020-04-22 06:57:50","false","ext_man: elf: Split module and section searching

Such a solution improve code hermentization and flexibility.
Also such a solution is more relevant because of focus on particular
module during section reading, so there won't be possibility to
implicity scan section 'A' from first module and section 'B' from
second one.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",79,23,0
"thesofproject/sof","492f947083b42909507abe3ada2256c8afce7267","singalsu","2021-08-19 14:43:54","false","Audio: Fix sink buffer size check in several processing components

This patch fixes the check in crossover, dcblock, drc, eq, mixer,
multiband drc, selector, and volume components. The check should
be for 1 period of data.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",119,39,0
"thesofproject/sof","90a6efd154515c07b0342659caaa2844e5c7fd1b","singalsu","2019-04-16 14:34:09","false","TPLG: Change volume capture pipeline gain range to -50 .. +30 dB

This patch replaces the -64 to 0 dB volume scale for capture with
more practical -50 to +30 dB gain. The step is 1 dB. It allows to
compensate for different microphone model sensitivities when constant
acoustical decibels to digital decibels level is needed in a
microphone capture application.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",50,10,0
"thesofproject/sof","a08ef17936e0ecfb41171f9ec94cfb2981ce0d49","singalsu","2022-10-19 07:07:00","false","Audio: SRC: Balance THD+N performance of IPC4 conversions matrix

This patch provides for sample rate conversion a set of coefficients
that provides -90 to -105 dB THD+N for fractional ratios. Previous
variation was -76 to -103 dB. The better than target -90 dB
conversions happen when the same fraction filter is reused with
other rates. The less critical conversions will get then higher
performance.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",98,53,1
"thesofproject/sof","91afe67ae52b42fc8ee40abef614551c26371810","singalsu","2022-04-21 13:55:48","false","Tools: Tune: SRC: Add line break between structs in generated code

This patch helps to pass the code style check in generated header
file src_<profile>_<data type>_table.h. The error was:

CHECK: Please use a blank line after function/struct/union/enum
declarations

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",114,47,1
"thesofproject/sof","4a0a17814d945da27da13110b0050488b6014b4d","singalsu","2020-01-02 16:36:58","false","EQ FIR: Process in copy() only even number of frames

This patch fixes audio corruption problem by removing odd and single
frame or sample processing capability. The Xtensa optimized filter
core depends on 64 bit loads from the filter internal 32 bit delay
line. The two sample at time capable algorithm core needs such
data alignment and fixing single frame capability would have created
unnecessary complexity from additional pointed address based filter
core selection.

The odd frames number capable FIR version also creates double
processing load and use of two filters would cause load variation
depending on how many samples available for processing when scheduled.
This simple fix is the best option since there is no requirement for
processing one frame at time.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",70,19,0
"thesofproject/sof","17ccaf51e5c969c3c0f2212133603c2cc9e15334","singalsu","2023-08-23 12:52:58","false","Audio: Crossover: Adjust error message for pin index usage in config

In IPC4 system the output sinks of crossover are not defined by
pipeline identifiers but by pin indices. The error message is
updated to be IPC version agnostic to avoid confusion.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",26,63,1
"thesofproject/sof","3b52f29425f82227e380b5b30cd9425d55b28b7b","singalsu","2018-09-04 08:20:34","false","EQ IIR: Allow run the EQ in bypass mode when not configured

This patch changes the behaviour in prepare() such that we do not
return an error if the IIR coefficients have not been set. It's
better to start in bypass mode since this is valid usage for EQ
when transducer EQ or effect does not need to be activated.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",30,3,0
"thesofproject/sof","8cec7d3ef1b4b3b76c90827de874196d11064bb3","singalsu","2021-06-01 15:34:19","false","Topology: Allow 8 - 192 kHz rates for Media Playback PCM

The pipeline was limited to 48 kHz min and max that is not
useful for running and testing SRC component.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",82,36,0
"thesofproject/sof","bc11c6e7c8da87874b998273e4d1517d1b067d2b","singalsu","2022-02-01 09:06:11","false","Audio: Volume: Replace read/write frag buffers in generic C version

This patch replaces the non efficient per sample fragment functions
with audio_stream_bytes_without_wrap() aided block processing.

The volume component MCPS is optimized from 24 MCPS to 8 MCPS. The
saving is similar in all s16, s24, s32 volume copy() functions.
The test was done in TGL-H platform with HiFi3 code version disabled
and with xt-xcc compiler.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",104,44,1
"thesofproject/sof","e5c71007d4e4763be9cdc056a92e9e9bb726dd2b","tlauda","2020-05-26 07:21:00","false","pm_runtime: hide platform specific structure

Hides platform specific structure in cAVS platform header.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",97,24,0
"thesofproject/sof","60b0622e0ac2b028501698ff28c57806c83d503f","tlauda","2018-12-11 08:14:06","false","alloc: change heap order for broadwell

Changes heap order in linker script for broadwell.",47,6,0
"thesofproject/sof","078c3c1a71390c8c69ae22d3854956891e8fb5fd","tlauda","2019-10-28 09:54:03","false","topology: kwd: remove volume from pipeline

Removes volume component from KWD pipeline. It was only required to perform
pcm conversion, but since DAI is now capable of doing that, usage of
volume is deprecated.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,17,0
"thesofproject/sof","8566b3101c17ecc1829b3526a19b78da4d7ba49e","tlauda","2019-10-29 14:41:54","false","host: use copy functions from pcm_converter

Uses pcm_converter to choose the right processing function.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",65,17,0
"thesofproject/sof","1e9cae26b80b5d5fb3e24048ac68193f998a06b0","tlauda","2018-07-06 09:13:57","false","cache: change in cache functions definition

Makes cache functions available based on XCHAL_DCACHE_SIZE
and XCHAL_ICACHE_SIZE rather than specific platform.
Also fixes those definitions for BYT and CHT.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",11,1,0
"thesofproject/sof","b1ff2b303c11f876a6aaa9ca0338dc3e3ab0d7da","bkokoszx","2021-12-20 07:58:12","false","ll_schedule: unregister domain in free function with IRQ_ONLY_FLAG

scheduler_free_ll() function should invoke domain_unregister()
in case when SOF_SCHEDULER_FREE_IRQ_ONLY flag is used, because
in timer domain case, timer_domain_unregister() function
unregisters timer interrupts.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",120,43,1
"thesofproject/sof","6009e78b32a36c5ca2ed74448baf3218696da997","tlauda","2018-07-18 10:17:35","false","dai: do not initialize pointer every trigger start

Buffer pointer connected to DAI should be initialized only
after DAI creation, prepare and reset. Otherwise it will
almost always generate xrun after stop - start sequence.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",13,2,0
"thesofproject/sof","5c016bc9e78b8cef0f6e755ad66e17107feb10d7","softwarecki","2023-09-18 13:11:09","false","smex: elf: elf_find_section: Check function input data

String terminator was added to the buffer with a list of section names
in the elf file. Added check to the section name index to make sure it
doesn't go beyond the buffer size.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",20,64,1
"thesofproject/sof","59c9338337ff7e0ad53b192d7d53be1205e13a5b","xiulipan","2019-10-30 04:41:25","false","CI: travis: add JSL build check

Enable JSL build check in travis.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",64,17,0
"thesofproject/sof","4a438b962b7201d15a87840cc330cda96bf0f608","MingJenTai","2022-10-25 05:33:00","false","rtnr: refine set/get component data procedure

This commit refines the following procedures to
make it more stable on different platforms.

1.  The initial data( not config ) defined in the topology
is empty. On some platforms rtnr_get_comp_data
might be called with the size equals 0 during
initialization. We only do the memcpy_s when the size
is valid.

2. There are 3 control widgets in RTNR topology. During
initialization, the initial data could be received via IPC
in the form of config+data+switch or config only. In
either case we now just copy the preceding portion
of the data since it has the required config.

Signed-off-by: Ming Jen Tai <mingjen_tai@realtek.com>",96,53,1
"thesofproject/sof","4cd8e68ebd49c050b7ce6b826560f4860f840b3a","libinyang","2018-12-05 01:01:42","false","github: add libinyang as lib owner

Add Libin as src/lib owner.

Signed-off-by: Libin Yang <libin.yang@intel.com>",41,6,0
"thesofproject/sof","46d718e6c81bd1a4010ed984956c606b69014de3","RanderWang","2022-01-18 01:19:52","false","ipc4: add pcm conversion support for link dma & alh

For HDA gateway, 24bits sample will be in high 24bits with
32 bits container case. Alh requires 32 bits container and
all sample bits starting from bit 31 to bit 0.

Signed-off-by: Rander Wang <rander.wang@intel.com>",116,43,1
"thesofproject/sof","a7b2b29cc649bee7d4b86c686db98632346c497b","RanderWang","2022-05-24 11:41:13","false","ipc4: set component direction if it is not set

FW doesn't set component direction if the component is
for gateway. Now check the component direction and
skip set it if it is set. Only the direction of gateway
module is figured out based on gateway type so
only copier module supports get_attribute of direction.

The original method can't deal with a corner case that
gateway module has both input & output.

Signed-off-by: Rander Wang <rander.wang@intel.com>",116,48,1
"thesofproject/sof","ecf557a19e05a0568d6910a6c26142c63bf09e86","RanderWang","2022-02-09 13:12:02","false","ipc4: copier: add stream_start|end_offset support

host driver uses DMA link counter to calculate stream position for
playback, but it is not fit for the following 3 cases:
 (1) dai is enabled before host since they are in different pipelines
 (2) multiple stream are mixed into one dai
 (3) one stream is paused but the dai is still working with other stream

 host uses stream_start_offset & stream_end_offset to deal with such cases:
 if (stream_start_offset) {
	position = DMA counter - stream_start_offset
	if (stream_stop_offset)
		position = stream_stop_offset -stream_start_offset;
 } else {
	position = 0;
}
When host component is started  stream_start_offset is set to DMA counter
plus the latency from host to dai since the accurate DMA counter should be
used when the data arrives dai from host.

When pipeline is paused, stream_end_offset will save current DMA counter
for resume case

When pipeline is resumed, calculate stream_start_offset based on current
DMA counter and stream_end_offset

Signed-off-by: Rander Wang <rander.wang@intel.com>",108,44,1
"thesofproject/sof","03e5f29ef0d8583f50ec5f270647d372ac82613b","RanderWang","2021-11-16 07:27:02","false","ipc4: handler: add break for unsupported message

Missed break for unsupported SOF_IPC4_MOD_CONFIG_SET & GET

Signed-off-by: Rander Wang <rander.wang@intel.com>",127,41,1
"thesofproject/sof","23c0839e4af6c69c3577b2a6e3cf51c89a5b659d","RanderWang","2021-07-16 02:28:03","false","ipc: share some utility functions for ipc4 path

Ipc3 & Ipc4 will share some component operations.

Signed-off-by: Rander Wang <rander.wang@intel.com>",92,37,0
"thesofproject/sof","ff3c8fec987e8333d9a60752b1ee0dee6cb63928","fuyuntsuo","2021-05-07 09:36:09","false","audio: igo_nr: Removed NULL assignment of cd.

The NULL initialization of cd is not necessary.

Signed-off-by: fy.tsuo <fy.tsuo@intelli-go.com>",80,35,0
"thesofproject/sof","cb9c880b6e8d74c32b8fbfc2a0a6ff2b030df0e9","libinyang","2023-01-29 06:19:41","false","config: tgl-cavs: add kpb, selector and kd support

Add KPB, Selector and KD module config

Signed-off-by: Libin Yang <libin.yang@intel.com>",52,56,1
"thesofproject/sof","bc7d49dcfc154996599586fffc366a7147ec804e","aiChaoSONG","2023-02-01 05:04:30","false","config: align module_type with mtl for tgl and tgl-h

The module_type member in module config should be assigned
according to the mod_type enum. Previously, for tgl and tgl-h,
it is assigned in an incremental way, which is wrong. MTL assigns
module_type in the correct way, so align the module_type with
mtl for tgl and tgl-h in this patch.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",52,56,1
"thesofproject/sof","e687345a2703615886181b252ca8549eea6d0059","nashif","2022-08-08 22:38:50","false","kconfig: remove undefined kconfig NUMBERS_GCD

NUMBERS_GCD was removed in commit 9611d126ba5. We should not be
selecting or buildign with an undefined Kconfig.

Signed-off-by: Anas Nashif <anas.nashif@intel.com>",111,50,1
"thesofproject/sof","4fa38d9b5395ba9dc58dc0a630aad96da9ea7a58","aiChaoSONG","2023-03-10 03:04:25","false","topology2: add cpc value for gain

The missing cpc in gain component results in wrong
calculation for clock selection, and causes capture
issues.

Link: https://github.com/thesofproject/sof/issues/7228
Link: https://github.com/thesofproject/sof/issues/7230

Signed-off-by: Chao Song <chao.song@linux.intel.com>",56,57,1
"thesofproject/sof","f27cc8e60ce918ba299a5d3528c5ba3bf1b60795","ranj063","2022-11-17 15:59:12","false","host-zephyr: Fix the error message

hd->chan should be NULL at this point. The actual problem is that the
channel requested is already taken.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",97,53,1
"thesofproject/sof","7383cbec13f939045f6c12357a4b290cdd1aa199","makarukp","2023-01-25 09:05:56","false","hda: chain transition states fix

Require maintenance in logic to handle multiple start/pause requests by
one chain instance.

Signed-off-by: Piotr Makaruk <piotr.makaruk@intel.com>",53,56,1
"thesofproject/sof","83373eb9708a02da0cb55d3f560f5b978e1a2343","abonislawski","2022-01-13 14:14:02","false","ipc4: report dsp properties to host driver

Host driver checks dsp properties

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",117,43,1
"thesofproject/sof","4a36634db6122393003b9489aedfbd236c6ca501","abonislawski","2023-05-18 07:36:22","false","mtl: fill in cps and cpc data for EQIIR module

Fill in measured cps consumption data for EQIIR module

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",50,59,1
"thesofproject/sof","72553fa5e5c3bc1858284cc2d0db3cc19ea9c382","ranj063","2023-09-19 16:04:52","false","ipc4: handler: Add compier fallthrough to prevent compilation error

Add the fallthrough to prevent the error seen with shared
library build:
""handler.c:312:20: error: this statement may fall through
[-Werror=implicit-fallthrough=]""

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",20,64,1
"thesofproject/sof","1358afacc9eb3363e8898cca9db6c5ced83f87e7","ranj063","2023-08-16 05:05:54","false","audio: mux: Remove unused variable

valid_bit_depth isn't used anywhere.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",27,62,1
"thesofproject/sof","b74c26b52cac327d07d96efb44a765abb9089bfa","ranj063","2023-04-06 18:27:10","false","topology2: Rename passthrough-capture.conf

Rename it to host-gateway-capture to align it with the documentation.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",51,58,1
"thesofproject/sof","d37da44c39d6c52d6dee42c03830deac1cfecc3d","ranj063","2023-05-05 19:22:04","false","topology2: cavs-nocodec: Make io-gateway for SSP1 capture conditional

It should be added only if SSP1 is enabled

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",53,59,1
"thesofproject/sof","9e18603636dd532d2f3930d0dbd99e91f9dcf87e","edersondisouza","2022-04-05 23:16:33","false","zephyr: Use type compatible with Zephyr linker declarations

`_end` and `_heap_sentry` linker symbols are used to infer heap size. In
Zephyr, `_end` is referenced as `char []` while in SOF as `uint8_t`.
This may ""conflicting types"", should those declarations be built
together.

This patch changes the Zephyr wrapper to also use `char []`, thus
avoiding this issue.

Signed-off-by: Ederson de Souza <ederson.desouza@intel.com>",110,46,1
"thesofproject/sof","352a46575990e3790732dbdba0cb7c2de729d7f9","tobonex","2023-09-15 18:00:04","false","igo_nr: remove buffer_acquire from igo_nr

remove buffer ops from igo_nr module

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","27d494ef5042910e590cdc2f363960faa9e06ba7","lyakh","2021-10-27 13:15:11","false","ipc: fix a race with slow IPC completion

The IPC EDF task, running on the primary core can race with a
secondary core, processing the IPC. If the secondary core completes
IPC processing and sends a reply to the host before the primary core
completes its IPC EDF task, a new IPC interrupt from the host can
arrive and try to schedule the EDF task again, while it's still
running.

To fix that introduce a bit mask of all contexts, possibly trying to
complete the IPC. Only when that mask is 0, when all contexts
completed their processing, only then we can reply to the host.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",128,41,1
"thesofproject/sof","d516a66c08a7bac3eb3bd61d7f33c7516cf2c8d5","lyakh","2019-09-06 12:48:46","false","xtensa: remove superfluous initialisation of static data

Static data is always zeroed in C, no need for an explicit
initialisation.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",60,15,0
"thesofproject/sof","a5cc6f47b5a17eabdc270a3bf1cf78e9ee1c9c90","lyakh","2021-05-14 06:21:48","false","ll-scheduler: fix the wrong use of atomic operations

A sequence of atomic_sub(); atomic_read() breaks atomicity. A single
atomic_sub() should be used instead.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",85,35,0
"thesofproject/sof","d677781974842a0990cde3438950993fd02060ba","lyakh","2019-06-20 11:25:28","false","Sue Creek: fix a regression: restore original SSP clock frequencies

Commit f5e78430ff3d (""cavs: ssp: generic ssp mclk configuration for
cavs"" made Sue Creek unstable, IPC communication with it would often
fail. The reason for this is, that the Sue Creek uses the SSP clock
as its platform clock. This patch restores the original values.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",47,13,0
"thesofproject/sof","7d7fa49ea0f9adf54eec06706aa827919fd5a94a","lyakh","2019-09-06 13:29:49","false","schedule: remove redundant initialisations

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",60,15,0
"thesofproject/sof","73df64444b75283bfc0e4f7d78309d15e07e5e39","marc-hb","2021-05-31 20:00:52","false","logger: prefix and pad ""task add 0xbe05ba30 <bad uid ptr 0x00000000>""

Before:
 WARN task add 0xbe05ba30 <bad uid ptr 0>

After:
 WARN task add 0xbe05ba30 <bad uid ptr 0x00000000>

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",83,36,0
"thesofproject/sof","e31afb36519fb2d779a1cf4776d203a5f37167f2","marc-hb","2021-02-19 23:58:17","false","xtensa-build-all.sh: make it runnable from anywhere

Fix $pwd confusion and remove bogus ../local/bin PATH that does not
exist.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,33,0
"thesofproject/sof","742cbb8af6d224cc55d93ad928dd9aaefd7ca5dc","marc-hb","2020-09-11 03:25:54","false","logger: use __attribute__((format(printf, 1, 2))) in misc.h

Also works with clang.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",65,27,0
"thesofproject/sof","edb98071f8bd80dc80b42ec1ef278169d2798076","marc-hb","2022-11-17 18:31:17","false",".github: move sparse job to a separate workflow

Zero code change, pure move to a new file.

Similarity is not a very strong reason for the sparse job to be in the same
file as regular Zephyr compilation.

Unlike plain Zephyr compilation, the sparse job is very much a ""work in
progress"" which is currently failing all the time. Moving it to a
different file/workflow provides more configuration flexibility.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",97,53,1
"thesofproject/sof","532642bb32767afd1c6394b3d84e9df5434e0506","marc-hb","2021-06-18 00:30:11","false","timer.h: add platform_safe_get_time(timer) and use it in trace.c

Returns a small constant instead of crashing platform_timer_get() when
timer is NULL.

This is required to restore early tracing before sof->timer is
initialized.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",72,37,0
"thesofproject/sof","dda2b385f03b7fec3ece6e5729ff72089d130108","marc-hb","2021-11-18 07:03:08","false","zephyr/atomic.h: add a no-op cast: (long)atomic_read()

Zephyr commit 174cb7f9f183 switched 'atomic_t' from 'int' to
'long' and broke SOF compilation as shown below.

Recent SOF commit 970d7d61ece9 (""zephyr: update print messages for
64-bit atomics"") switched all atomic_read() logs to ""%ld"" instead of
""%d"" which fixed compilation with Zephyr after the switch but broke it
with Zephyr _before_ the switch.

This no-op (long) cast makes SOF compatible with Zephyr both before and
after the switch.

Note the sof-logger does not make any difference between %ld and %d and
does not care.

Sample failure:

src/lib/dma.c: In function 'dma_get': sof/src/include/sof/trace/trace.h:290
 error: format '%d' expects argument of type 'int', but
 argument 5 has type 'atomic_val_t' {aka 'long int'} [-Werror=format=]

 290 |   printk(""%llu "" format ""\n"", platform_timer_get(NULL), \
     |                 ^~~~~~~

sof/src/lib/dma.c:119:2: note: in expansion of macro 'tr_info'

 119 |  tr_info(&dma_tr, ""..., busy channels = %d"", atomic_read(...))

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",128,42,1
"thesofproject/sof","b339ca95e9c9c374e761cd02ee4cd3561dbea84d","marc-hb","2022-01-06 22:05:42","false","Remove scripts/host-build-all.sh

scripts/host-build-all.sh has been replaced and deprecated for more
than a year.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",115,43,1
"thesofproject/sof","e0722f493ad5295353aa557e5d61b3346a12b1ac","marc-hb","2022-10-26 00:02:30","false","xtensa-build-zephyr.py: de-hardcode mode=511 in mkdir()

These hardcoded 511 permissions came with the initial commit
1de3ef367584 (""Rewritten xtensa-build-zephyr.sh to python"") without any
particular explanation.

On Unix, permissions of new files and directories are a user preference
set with the `umask`, different applications are not supposed to create
directories differently.

On Windows/NTFS it's not clear what 511 maps to.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",94,53,1
"thesofproject/sof","02c21c25ba339ef715bc28836b5f83e54aa355c9","marc-hb","2021-06-23 02:47:15","false","dma-trace.c: use new mtrace_printf() to demote FW ABI banner to INFO

... down from ERROR. It was never an error, this was a hack to be
duplicated to both trace and etrace. This will make it easier to search
for actual errors.

Also make the banners slightly different between etrace and trace thanks
to new SHM: and DMA: prefixes. This makes identification of log files
easier.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,37,0
"thesofproject/sof","954614b5fb9a093c2b4ff4b514615a227e45a95c","mwasko","2022-01-11 12:11:49","false","codeowner: add Marcin to review ipc changes

Marcin is responsible for ipc4 enabling in SOF
and integration with Windows drivers.

Signed-off-by: Michal Wasko <michal.wasko@intel.com>",115,43,1
"thesofproject/sof","aa589343fdd29144e85e167268fb3913e12a79e0","johnylin76","2022-10-27 10:19:37","false","topology: waves: remove deprecated kcontrol widget and data

Fix aligned to pipe-waves-codec-playback.m4 due to module_adapter
design change.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",94,53,1
"thesofproject/sof","ba7d875086c30e7a65ff152a18935bfcb6ab7a95","jajanusz","2019-02-06 19:42:34","false","cmake: refactor kconfig targets

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",55,8,0
"thesofproject/sof","48e6fb29fb256fdd19b14960a0c34f420ede6c3e","jajanusz","2019-04-05 11:31:44","false","test: xtensa: share flags for ut and fw

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",48,10,0
"thesofproject/sof","611374e3ff70bd0d3bb2ed09eb6605fc98329ba8","btian1","2023-09-06 06:47:48","false","audio: src: move src header file to source folder

previously, these headers are located in include directory.
Now, move it to src/audio/src/ directory, since these headers
are only used by src module.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",22,63,1
"thesofproject/sof","1ce4a401b088993c169726911069b0e9b8c1a400","btian1","2023-07-12 07:55:57","false","mux: simplify set mux parameters

use helper function to update stream parameters for mux buffers.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",31,61,1
"thesofproject/sof","4f0b4c483c0ca93cd0f7367394e2e3aa792b5b16","btian1","2023-06-09 06:33:57","false","copier: change copier new with module interface

Set dev private as module interface, create new copier_init
to meet module interface requirement, and change all copier_data
related code.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",47,60,1
"thesofproject/sof","0ef4dfe15a383de5bf106bce27a16d4b0711dfdc","btian1","2023-10-23 07:48:26","false","Audio: aria: move aria header to aria module folder

There are two headers for aria, below action is taken:
1. move header file from include path to module path.
2. combine two headers to one header file.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",8,65,1
"thesofproject/sof","80afbacaa01d3021679de43f16185bdf8e319d91","ujfalusi","2023-07-28 09:28:56","false","lib-manager: Cleanup LOAD_LIBRARY message handling debug and error prints

Simplify and unify the way info and errors are printed in the library
loading path.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",31,62,1
"thesofproject/sof","18c171b43d84b7cd7c0268dbd8f34f19074ec0c4","slawblauciak","2018-07-25 07:30:11","false","test: mixer unit tests

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",12,2,0
"thesofproject/sof","739554defaea0c06ce73f2c4dff2c263d1ff196c","keyonjie","2020-09-21 09:34:50","false","topology: sof-tgl-nocodec-ci: remove KWD pipelines as not available

We can't test KWD on nocodec machines due to the DAPM issues reported
here: https://github.com/thesofproject/linux/issues/1987

Remove KWD pipelines from sof-tgl-nocodec-ci to avoid performing invalid
test on it.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",66,28,0
"thesofproject/sof","38af37a84316be3180404c8316b66c2e9c780cbd","crazoes","2020-04-04 10:01:29","false",".travis.yml: Fix incorrect usage of -j option

xtensa-build-all.sh expects number of cores to be used when -j option is
specified. By default, it uses all the cores available which is what we
want, hence, omitting the option altogether.

Signed-off-by: Shreeya Patel <shreeya.patel23498@gmail.com>",80,22,0
"thesofproject/sof","6925c940ba92a6c0a83bc54eb4909b9adeccb27d","crazoes","2020-04-06 14:22:23","false","scripts: xtensa-build-all.sh: Derive $ROOT from $HOST

Derive $ROOT from $HOST instead of explicit assignments.

Signed-off-by: Shreeya Patel <shreeya.patel23498@gmail.com>",80,22,0
"thesofproject/sof","e9ae9e07cad0bd10e1f0636462e41fb3320406e9","kuanhsuncheng","2021-08-27 08:38:19","false","topology1: add afe.m4

Add afe.m4 for afe related define

Signed-off-by: YC Hung <yc.hung@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",119,39,0
"thesofproject/sof","500e96b6ac4f8089a6b00bcd797f7e07ad75b805","ranj063","2021-10-04 23:28:38","false","lib: dai: expose and rename dai_config_reset()

Move the function dai_config_reset to the common DAI code so it can be
reused. Also, rename it to dai_dma_release as it does not really reset the
DAI config but rather releases the DMA channel.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",122,40,1
"thesofproject/sof","716bc4bdd80ba1bc603dbf84d2234a2f59e84e24","abonislawski","2019-08-27 07:57:46","false","probes: initial implementation, kconfig and IPC params

Probes are a feature that will allow user to extract and inject data
from/into buffers at runtime.

Basic flow is as follows:
1. Initialization of probes subsystem, allowing for simultaneous
   configuration of DMA for extraction. If extraction DMA is not setup
   during init, extraction probes will be disabled.
2. Configuration of probe points, preceded by DMA configuration in case
   of injection probes.
3. Probes are now in operation and will send single multiplexed stream from
   extraction probe points and inject data into specified buffers.
4. State of probes and associated DMAs may be retrieved via INFO functions.
5. Removal of probe points.
6. Removal of injection DMAs.
7. Deinitialization of probes subsystem.

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>
Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",55,15,0
"thesofproject/sof","d7da25fc2537627e16082c0e72e9a9246c92e682","abonislawski","2023-02-13 16:45:11","false","platform: ace: enable Zephyr counter drivers

This will allow to build and enable ace art and rtc
counter drivers

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",56,56,1
"thesofproject/sof","55afcf549604ca05698e73e949b29f5cafa6303a","ranj063","2019-12-13 16:12:00","false","topology: graph: Add PIPELINE_ID to graph name

Add the PIPELINE_ID to the graph section name to
make them unique for the playback and capture pipelines
that are associated with the same SSP. Also fix the
comment while we're at it.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",74,18,0
"thesofproject/sof","ada2595b041d7136871e9feaf9a92d25ed0729dd","ranj063","2021-08-27 00:16:15","false","multicore: coherent: Add APIs for coherent access to shared objects

Certain data structures such as buffers, pipelines, comp_dev's
are used across cores and cache boundaries. Introduce APIs
to handle cached access to such objects by stipulating that
the lock is held during access and releasing the lock after.

For example:

/* uncached work */
if (buffer->flag == somevalue)
    do this;

/* cached work */
buffer = coherent_acquire(buffer);

buffer->state = true;

/* back to uncached */
buffer = coherent_release(buffer);

Also, add a new kconfig INCOHERENT which will need to ibe set for platforms that
need software-managed coherency.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",119,39,0
"thesofproject/sof","81eae8886a9349becef144cc3b336cf6274308e1","ranj063","2018-09-19 16:51:54","false","ipc: set flag to disable memory banks before entering D3

This could potentially lead to power savings when the system
is suspended.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",36,4,0
"thesofproject/sof","2757a2ccd6e465d44b0416cd0e0f0de900f801d3","ranj063","2018-06-27 21:26:19","false","host: update header files for host library build

Fix some missing definitions and add atomic.h to fix host library
compilation errors.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",6,1,0
"thesofproject/sof","3b48da9cf58fe9ab522614d63690f2bcde6ddcff","lkoenig","2022-01-05 14:59:12","false","platform: allow primary core stack size config.

Allow to set the primary core stack size using the Kconfig mechanism.

Signed-off-by: Lionel Koenig <lionelk@google.com>",116,43,1
"thesofproject/sof","fa0456e5a8996dcdfee97f1e7142891cc3dd90ae","tmleman","2022-12-19 17:51:28","false","audio: dai-zephyr/host-zephyr: stop dma only once

Until now, one dma channel could be stopped multiple times without any
problems. From commit af6d827b64 on zephyr it is required that the start
and stop calls be perfectly balanced.

Zephyr device power manager stores an internal counter. Counter is
incremented if device is used and decremented on device release. In this
case when we call dma_start() and dma_stop().

If dma_stop() is called more times than dma_start() power manager will
reaport a error -EALREADY.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",92,55,1
"thesofproject/sof","6d2352a107d9cbc325e71142a8c73e608d683607","tmleman","2023-09-28 11:30:29","false","west.yml: update zephyr to 3.5.0-rc1

Zepych update: total of 853 commits.

Changes include:

i8c4eec7ac6 intel_adsp: boot_complete must be done PRE_KERNEL_1
1fc16e6565 release: Zephyr 3.5.0-rc1
c910dc81a6 sys_clock: header: minor cleanup and doxygenization
b9f8b91692 kernel: sys_clock: remove stray z_enable_sys_clock prototype
cc2a558707 kernel: move more internal smp calls into internal domain
a1c7bfbc63 kernel: remove unused z_init_thread_base from kernel.h
209ff606be kernel: move internal smp calls to a internal header
e19f21cb27 kernel: move z_is_thread_essential out of public kernel header
f0c7fbf0f1 kernel: move sched_priq.h to internal/ folder
e6f1090553 kernel: Integrate object core statistics
1d5d674e0d kernel: Add initial k_obj_core_stats infrastructure
6df8efe354 kernel: Integrate object cores into kernel
55db86e512 kernel: Add initial obj_core infrastructure
eb1e5a161d kernel: FIFO and LIFO have their own sections
9bedfd82a2 kernel: Refactor CPU usage
baea37aeb4 kernel: Re-factor sys_mem_blocks definition
2f003e59e4 kernel: Re-factor k_mem_slab definition
41e0a4a371 llext: Linkable loadable extensions
4289359eb2 modules: mcux: fix HAS_CMSIS_CORE selection
1194a35aa2 xtensa: cast char* to void* during stack dump with %p
fcf22e59b8 xtensa: mark arch_switch ALWAYS_INLINE
b2f7ea0523 soc: xtensa/intel_adsp/ace: fix _end location
e560bd6b8c boards: intel_adsp: fix board compatible
b4998c357e mm_drv: tlb: Fix compile time warning
759e07bebe intel_adsp: move memory window setup to PRE_KERNEL_1

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",19,64,1
"thesofproject/sof","6a0db473386a2f87c12209446d7373c311837ce4","fkwasowi","2023-04-03 12:34:07","false","kpb: update uuid in rimage

Change of uuid
regarding Windows compatibility

Signed-off-by: Kwasowiec, Fabiola <fabiola.kwasowiec@intel.com>",52,58,1
"thesofproject/sof","458272942242691dcfffe439c8499982f94139d3","zhuyingjiang","2018-10-15 05:47:08","false","rimage: rename the old css_header and fw_image_manifest

rename css_header to css_header_v1_8
rename fw_image_manifest to fw_image_manifest_v1_8

Signed-off-by: Zhu Yingjiang <yingjiang.zhu@linux.intel.com>",35,4,0
"thesofproject/sof","aecc0b51d03717d74720d84cc413e82b7dd8bea0","xiulipan","2020-04-17 06:14:54","false","CI: Travis: init build test for rimage

Enable simple build test for rimage.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",82,22,0
"thesofproject/sof","ee4629baf15f92f44037387afed6ff77be1eeb8b","andrula-song","2022-12-09 06:23:09","false","Audio: Math: Add HiFi3 version implementation of FFT

Add HiFi3 version implementation of FFT. Test with xtensa
simulator, we can save about 52.7% cycles for 16bit processing
and 58.1% for 32bit processing.

Signed-off-by: Andrula Song <andrula.song@intel.com>",102,54,1
"thesofproject/sof","ed5ac2ff483e42dbb9d10391220ea873e8a7b94f","ktrzcinx","2020-05-12 13:00:19","false","trace: buffer: Use trace context in buffer logs

Each trace function should refer to trace context, where are
stored information like uuid and runtime editable logs level,
to unify trace API and allow trace filtering in future.
Remove buf_cl_* functions, as no longer supported.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",95,23,0
"thesofproject/sof","2c6cf95c730720404b71106493a2da73b298f012","ktrzcinx","2020-06-02 13:30:24","false","component: Use UUID value stored in SRAM memory in component driver

It allows to comparison this full UUID value with value in IPC message,
what is important step to create new component from topology by their
UUID value.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",94,24,0
"thesofproject/sof","59a7e2819f64dfcf11a6918f50194f814f097c21","ktrzcinx","2019-11-07 09:33:56","false","kconfig: volume: test only supported data format

Do not run unit tests on unsupported by configuration
data types. See CONFIG_FORMAT_* macro.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",53,17,0
"thesofproject/sof","a2375afef25602a049584eee15aa9415d4301b24","mrajwa","2019-07-30 20:55:16","false","kpb: improve timeout handling in kpb_buffer_data

This patch changes the datatype of timeout variable and
adds more information into error log message. Also
we set up timeout limit right before we enter the while loop.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",53,14,0
"thesofproject/sof","5a4ba0a35597aa7d1156120a4d0650556cbcf486","lgirdwood","2018-09-10 12:44:06","true","Merge pull request #332 from bardliao/bard/master

ipc: add missing schedule_task_init/config",33,3,0
"thesofproject/sof","2530814a0a09108eca93e3cfd3e51cc311b67231","lgirdwood","2018-08-13 10:18:35","true","Merge pull request #218 from tlauda/topic/cpu_is_core_enabled

cpu: implement cpu_is_core_enabled function",18,2,0
"thesofproject/sof","7c4764cfa46fc45595ec693586e473a2b7bd090d","mrajwa","2019-07-25 20:25:55","false","kpb: block KPB prepare() if reset is not done

This patch checks if reset request has been
completed before KPB can be prepared again.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,14,0
"thesofproject/sof","531c9b54dd99cea7a7580e5223cd85404421cda9","lgirdwood","2018-10-01 19:57:44","true","Merge pull request #449 from thesofproject/revert-445-eq_fir_heap_rt_1k_proposal

Revert ""EQ FIR: memory: Add trace error for alloc fail and add a 1024 size buffer""",34,4,0
"thesofproject/sof","7f604fb63f1e9a520a966be49c88da044933e429","cujomalainey","2021-04-30 22:07:28","false","mux: conditionally compile format specific functions

we are building unused functions if we only enable specific formats,
lets put them with the functions that use them

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",81,35,0
"thesofproject/sof","015488b4e1261b3751e5a432a4fd753bd8f9daed","aborisovich","2023-02-08 12:36:38","false","ipc4: added D3 support using Zephyr Power Manager API

Added IPC4 callbacks 'suspend_handler' and 'resume_handler'
to control Zephyr IPC driver.

Co-developed-by: Tomasz Leman <tomasz.m.leman@intel.com>
Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>
Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",55,56,1
"thesofproject/sof","98167ceac7b3a9eb54d9e3f024a0552ce017820c","cujomalainey","2021-02-19 22:37:03","false","trace: remove unused code based on build

The current version of the code effectively relies on the compiler to
optimize out the loop, this both trusts the compiler, annoys
cppcheck which also not being entirely clear to the reader. Solution is
to use the compile switch to remove all relevant code.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",74,33,0
"thesofproject/sof","82886c6b41232025562ef3e268b5726cf9d2d503","balakishorepati","2021-09-28 09:56:12","false","drivers: amd: renoir: Fix 16K sample rate for dmic

Fix dmic sample rate to 16000 as default sample rate.

Signed-off-by: balapati <balakishore.pati@amd.com>",120,40,0
"thesofproject/sof","f69240a2796dcfa2ba93cd30ec3b747a733c6c6b","ktrzcinx","2020-06-22 06:42:18","false","pipe: Trace with pipe component instead of class less method

Whenever it is possible, trace function with reference to pipe
component should be used instead of class less method. It allows
to print pipeline id in output logs and filter logs by this value.
In pipeline_new() moved trace context and ipc_pipe copy, to allow
tracing with context in earlier stages of this function.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",77,25,0
"thesofproject/sof","cd4b08a48e3f514e2f3402e726d905e2089cfe32","ktrzcinx","2020-06-05 06:14:50","false","trace: Add condition name near #endif and #else

It's quite easy to get lost when long, multi level #if/#endif are
used, pointing corresponding condition name near #else and #endif
helps to keep context during reading.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",77,24,0
"thesofproject/sof","e59374e0fca97c17fd02a3f777a5cf0659baf78d","ktrzcinx","2019-11-05 09:06:13","false","buffer: trace: remove void pointer arithmetic

remove void pointer arithmetic in comp_update_buffer_produce function

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",53,17,0
"thesofproject/sof","ed1ad919a6a7a32f32db27633ef6af53b36c91cc","singalsu","2021-09-09 15:32:30","false","Drivers: Intel: DMIC: Add flexibility to parse less common blobs

This patch fixes the DMIC blob parser for cases where channel_ctrl_mask
and pdm_ctrl_mask differ from usual values 0x3. If channel_ctrl defines
only single FIFO with value 0x1 or 0x2 the appropriate FIFO0 or FIFO1
gets the configuration. Similarly if pdm_ctrl_value is 0x2 the blob
contains configuration data only for PDM1.

Previously such blobs caused incorrect DMIC HW configuration. Since the
appropriate HW resource programming is achieved by looping all controllers
in HW the data structures for non-defined remain NULL. Some checks against
null pointer reference need to be added to prevent corrupt blob from
causing FW panic.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",118,39,0
"thesofproject/sof","4c4d91ddbe7c916e21fadab51f84dbbb0a65aee8","singalsu","2019-12-20 16:52:02","false","ASRC: Add DAI skew tracking and control loop

This patch adds the DAI skew tracking and filtering to fine
adjust the conversion factor of the ASRC. The ASRC finds the
pipeline DAI from downstream in push mode (playback) and from
upstream in pull mode (capture).

To avoid code hang to infinite loop the modification to asrc_farrow.c
adds a safe bail out if skew factor related number of samples to
compute exceeds buffer space. The streaming continues but there
can be a glitch in audio if the skew is bad enough to exceed the
buffer margin. The error trace helps to see if such can happen in
real use cases.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",71,19,0
"thesofproject/sof","cf6e2cd6a3718489095c24ff2cbeac79bd02e510","tlauda","2020-02-13 10:51:41","false","component: call copy for own components

Component copy function should be called only if
component is owned by current core.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",82,20,0
"thesofproject/sof","6a0dcb3a109f906a7382ff1c7c3b10c45a8e2fb4","tlauda","2019-03-14 16:49:33","false","topology: update all HDA pipelines to use timer

Updates all HDA pipelines in topologies to use
timer as a scheduling source.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",69,9,0
"thesofproject/sof","de0d11c8768ed167267411b7baf7101fe11f8620","tlauda","2020-03-20 08:38:00","false","idc: wait for core to power up

Implements new IDC sending mode dedicated to powering up
the cores. Master core should wait until slave core reports
that is ready for further operations. Without such confirmation
there is a race possibility, where next IPC should be processed
by slave core, but it's not yet powered up.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",68,22,0
"thesofproject/sof","67e954668e8205a034ce992a6dff84a77f9acb78","tlauda","2019-06-03 11:15:44","false","format: add missing #include <stdint.h>

Adds missing stdint header, since we are using types
defined in that file. Right now format.h compiles
by accident.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",68,12,0
"thesofproject/sof","e2b994ee03916edef0f9269f1b4c9310dfab43f9","tlauda","2019-04-16 16:31:21","false","dw-dma: cleanup the whole driver

Cleanups the whole DW-DMA driver:
- Move platform register defines to proper headers.
- Make driver independent of platform.
- Use the same accepted style of trace logs.
- Other minor tweaks.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",50,10,0
"thesofproject/sof","0a4a70a7d9820d99ebc07a3445f33b87d18c57f9","tlauda","2018-08-10 09:03:42","false","arch: apply cache attributes to slave cores

Applies defined cache attributes to slave cores.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",19,2,0
"thesofproject/sof","ea233be4a7e16718be6036b6f20737a617892d60","saisurya-ch","2023-07-05 06:41:40","false","tools: topology: add vangogh topology support

Add vangogh platform topology for nau8821,max988388.

Signed-off-by: SaiSurya Ch <saisurya.chakkaveeravenkatanaga@amd.com>",33,61,1
"thesofproject/sof","04c9ac9bf47444ce5c87d279a28a19ae309d8a05","tlauda","2020-01-09 08:04:32","false","ipc: add structure getter

Adds getter to easily retrieve ipc structure
through one point of access.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",74,19,0
"thesofproject/sof","08ed1b4d9a7eec47ef1051331f504092f26d73c0","tlauda","2018-09-10 08:34:55","false","agent: switch from us to ms

We should switch from microseconds to milliseconds as
difference in cycles for current timeout is 150000.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",33,3,0
"thesofproject/sof","6b250ff8a9d283657f0b63375f9a8383dac825a2","bkokoszx","2020-02-27 15:06:33","false","mux: move fetching proc function from prepare() to set_values()

This commit moves fetching mux/demux processing functions from
mux_prepare() to mux_set_values(). It insures us against
situation when we fetch proc_func in mux_prepare() and
after that comes mux_set_values() with new mux config.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",76,21,0
"thesofproject/sof","85986e1f4f5fd33114a3640c0031e31be122daab","bkokoszx","2020-11-04 10:51:12","false","demux: add demux_prepare_active_look_up() function

This commit adds demux_prepare_active_look_up()
function. It contains channel parameter checking.
Look up table should not include elements referring
to channels higher than those actually set in
source/sink buffers.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",75,29,0
"thesofproject/sof","68499a08baf2c335549e2eadb2036310f756c331","yongzhi1","2021-05-06 19:59:22","false","topology: sof-tgl-rt711-rt1308: add BT offload for ADL

Add pipelines for Bluetooth offload support:

PCM14 <---> passthrough (pipe 13, 14) <---> SSP2 BT offload

Signed-off-by: Yong Zhi <yong.zhi@intel.com>
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",80,35,0
"thesofproject/sof","7b1820d51d14f0379e412537f2251497e61bd37a","fkwasowi","2023-08-25 11:54:52","false","host_common_params: adjust the values to the format 24/24

Currently DMA buffer size is aligned to 32. It should be:
rec_buff_size = ROUND_UP(rec_buff_size, min_buffer_size);
rec_buff_size = ROUND_UP(rec_buff_size, round_up_size);

Period_bytes should also not be aligned to 32 for 24/24 format

Change resolves timeout problem during offload
of playback with 44.1 format

Signed-off-by: Kwasowiec, Fabiola <fabiola.kwasowiec@intel.com>",26,63,1
"thesofproject/sof","497acc82a9c34d6c62575c080e897dc2fe77ab6b","xiulipan","2018-09-29 03:55:03","false","logger: change include filename for uapi

Did not include header in a absolute path.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",37,4,0
"thesofproject/sof","34312c08395cc821534275fe3bffebcd29a6a707","xiulipan","2018-09-26 07:55:44","false","clk: add missing header

clk will use timer function, add timer.h include for it.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",37,4,0
"thesofproject/sof","ce67a76c51d4c78ffac0043f1912089c44c1ff5a","ranj063","2022-01-14 21:32:08","false","codec_adapter: waves: remove included header

waves.h has been deleted

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",117,43,1
"thesofproject/sof","7c6186acb6ba77d5c6b9674a0b4dfaba24cd92d0","RanderWang","2021-12-06 06:56:27","false","ipc4: handler: add module power setting support

There are two types of power setting ops: set_d0ix and
set_dx. set_d0ix will disable power gating on core 0 and
set_dx will power up the specific core.

Signed-off-by: Rander Wang <rander.wang@intel.com>",123,42,1
"thesofproject/sof","3aa8b5668c3c684a70bd1c4f17b35f23f4c6edca","RanderWang","2020-05-11 01:25:22","false","topology: sof-smart-amplifier: add smart amplifier support on sdw platforms

This patch is based on smart amplifier support on I2S platform and the
differences are pipeline layout and DAI config. On sdw platforms, the
pipeline layout is:

 PCMX ----> smart_amp ----> ALH0xX02 (Speaker -max98373)
              ^
              |
              |
 PCM(X+1) <---- demux  <----- ALH0xX03 (Speaker -max98373)

Signed-off-by: randerwang <rander.wang@linux.intel.com>",96,23,0
"thesofproject/sof","cbb4c277e5b008f61dfffd6d1da9e16b52e29ea1","libinyang","2023-02-10 05:36:07","false","topology2: wov-detect: set the virtual widget name

Set the virtual widget name.

Signed-off-by: Libin Yang <libin.yang@intel.com>",55,56,1
"thesofproject/sof","d77331fce1aa2a7056f310712a3fc3372ec405b1","MingJenTai","2022-10-11 01:54:45","false","rtnr: Set 5ms period for RTNR on MT8195

With the  release of RTNR version 20220728,
period for capturing pipeline requires at least 5ms.

This commit set 5ms period for RTNR in
MT8195 topology.

Signed-off-by: Ming Jen Tai <mingjen_tai@realtek.com>",97,52,1
"thesofproject/sof","1afa304641edf7f16d7743b626a4cebd2a224c25","ranj063","2019-02-13 03:52:29","false","ipc: tplg: de-duplicate effect/process component loading

Merge sof_ipc_comp_eq_fir and sof_comp_eq_iir into sof_ipc_comp_process,
the former two eq structs were the same fields with differentiation
done in the bespoke data section. Same applies to the new generic
sof_ipc_comp_process structure.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",60,8,0
"thesofproject/sof","ddcdadb68f3ec70faa5ff71240f3bd1d9ac3e40c","ranj063","2022-01-20 14:34:25","false","codec_adapter: cadence: Do not free codec data during reset

During reset, it is only important to free the memory associated with
the runtime params, so that they can be reallocated during prepare. So
move the allocation of the cadence_codec_data to use rballoc, so that
module_free_all_memory() doesn't end up freeing it. It will be freed
during cadence_free() when the device is freed.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",113,44,1
"thesofproject/sof","39150a93016929476e89d765d9f826b09d933ab6","ranj063","2022-01-08 01:53:28","false","codec_adapter: rename codec_prepare() to module_prepare()

Rename codec_prepare() to module_prepare(). No functional change.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","3f2f149b9c4afdda60198b5a62cef1a5a20eaf02","ranj063","2022-01-11 00:45:06","false","codec_adapter: waves: modify the signatures of a couple of functions

Modify the signatures of waves_effect_allocate() and
waves_effect_buffers() to pass the pointer to struct processing_module
as input.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","56b477388463e7e0ddb144319dd75c4609a5f933","ranj063","2022-10-27 02:55:24","false","pipeline: set buffer comp to NULL during disconnect

Set the buffer comp to NULL after the component has been disconnected
from it.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",94,53,1
"thesofproject/sof","16fb3f7a72f737dfe98ddb4aceae417e345d50e0","ranj063","2021-10-27 16:01:57","false","detect_test: use buffer acquire/release

instead of buffer_lock/unlock which will be deprecated

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",128,41,1
"thesofproject/sof","6aef5b913425b18046dcfb5141320c1d4fbfd367","abonislawski","2020-03-24 14:33:59","false","probe: show correct dma in probe point info

This patch will ignore provided stream tag for extraction probe point.
It is used only for checking probe point info by the user and now for
all extraction points it will show the same and valid stream tag.

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",64,22,0
"thesofproject/sof","3fc308a6bcd2eac60c3da154748dfdb7c1d50c54","ranj063","2022-03-23 22:18:58","false","codec_adapter: rename codec_adapter_prepare()

to module_adapter_prepare(). No functional changes.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",109,46,1
"thesofproject/sof","ad0d4fb3f8990212ccd341b457b87aa3dcb012ec","jsarha","2022-03-09 22:00:47","false","data_blob: Add single buffer mode to save memory with big configurations

The single blob mode keeps only one configuration blob available at
one time and saves the memory otherwise consumed by the second
blob. The down side of this behaviour is that the audio pipeline must
be stopped for the configuration to be updated.

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",113,45,1
"thesofproject/sof","241eea8a70e3fb452c70d68733a3366b6fef0084","lyakh","2019-07-12 11:19:07","false","cavs: fix wrong interrupt masking

To mask an interrupt ILMXSD has to be written, not ILXMCD.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",43,13,0
"thesofproject/sof","9ead82e1b8d52d82f7836440181a5fab398e1465","lyakh","2022-04-27 10:23:13","false","buffer: fix cache-handling during initialisation

Buffer control structures are accessed at run-time via their cached
aliases. But buffer enumeration involves accessing list headers,
embedded in those control structures. To be able to use the standard
list traversal routines that access is performed via uncached
aliases. Therefore the life-cycle of a buffer control object looks as
follows:

- initialisation
 1. allocate memory
 2. obtain a cached alias
 3. use cached access to initialise the audio stream
 4. release cached access
 5. initialise some fields, using the uncached alias
- linking
 6. add to the list
 7. obtain a cached alias
 8. bind to a component
 9. release cached access
- run-time
10. scan buffer list
11. obtain a cached alias
12. use the buffer
13. release cached access

This patch fixes buffer object initialisation and linking to ensure
data consistency between cached and uncached accesses.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",115,47,1
"thesofproject/sof","6ab8c11136d485f233f147ba05f18bf9b69b155d","lyakh","2022-01-24 12:45:30","false","ipc4: fix trace format mismatches

Two tr_err() calls in src/ipc/ipc4/handler.c have mismatching formats
and arguments. When built with Zephyr, tr_err() translates to
printk() which then checks arguments. This allows an easy detection
of such errors.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",109,44,1
"thesofproject/sof","fe66007d4d64d542f80f4eb0cee405b61c5ea573","lyakh","2020-11-20 07:27:13","false","testbench: file.c calls free(), it must include stdlib.h

Add the missing stdlib.h include to file.c.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",74,30,0
"thesofproject/sof","e27cb456639bda124d20526aaec65d5554de96e2","marc-hb","2021-04-30 18:30:40","false",".github: add scant_fuzzer.yml build

This is NOT how to properly compile the fuzzer, this is only to detect
earlier and faster problems like
https://github.com/thesofproject/sof/pull/3824 (288e228) and
https://github.com/thesofproject/sof/pull/4118 (758e7be)

In other words, when reverting the oss-fuzz parts of either of these
commits this build fails as desired.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",81,35,0
"thesofproject/sof","77d4a2acd7512ca2fe2d6147ea30ce34a2ca505e","marc-hb","2023-04-18 17:57:07","false","cmake: remove ""install"" target

The deleted ""install"" target copied only the rimage executable and
left the config files behind. This gave the wrong impression that the
executable is useful without config files.

""Installing"" also gave the wrong impression that rimage versions are
somewhat stable and relatively independent of SOF versions: they're
not. In fact there is no such thing as an rimage ""version"": everyone
should always use the exact rimage _git commit_ from the west manifest
or git submodule. There are no rimage ""releases"" and no semantic
versioning or anything like it, rimage is effectively part of the SOF
source and build and run directly from its build directory by
practically every SOF developer and SOF CI thanks to

  sof/src/arch/xtensa/CMakeLists.txt#ExternalProject_Add(rimage_ep ...
  sof/scripts/xtensa-build-zephyr.py#def build_rimage()
  sof/zephyr/CMakeLists.txt#set(RIMAGE_CONFIG_PATH ...

etc.

Providing an ""install"" target greatly increases the chances of
different people and CIs using different rimage versions which is the
last thing we want considering the many significant rimage changes
happening right now, examples:

- https://github.com/zephyrproject-rtos/zephyr/pull/56099
- https://github.com/zephyrproject-rtos/zephyr/pull/54700
- https://github.com/thesofproject/sof/issues/7270
- https://github.com/thesofproject/sof/issues/7304
- https://github.com/thesofproject/sof/pull/7320
- https://github.com/thesofproject/rimage/pull/155

While it's useful for multiple files (e.g.: config files), a CMake
target was always overkill to copy a single file. Someone or some
script who really wants to copy the rimage binary to some other place
that the build directory for some (discouraged) reason _can still do
so_ with a much more basic, simpler and more transparent file copy
command.

Finally, the default ""bin"" DESTINATION required root access which
is otherwise totally unncessary to build SOF.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",51,58,1
"thesofproject/sof","d4b8a01f206ca7a9338dcc52422cdb98c2ea6dd8","marc-hb","2021-11-18 08:57:22","false","xtensa-build-zephyr: temporarily exclude ICL

Because ICL fails to build, .noinit/.cached section overlap since
revert https://github.com/zephyrproject-rtos/zephyr/pull/40319

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",128,42,1
"thesofproject/sof","9622079d2f28758accfae44fcfe53153c616bea6","marc-hb","2021-04-30 00:54:20","false","Remove all function calls in arguments to MIN() and MAX() macros

For consistency with Zephyr, MIN and MAX macros are ""downgraded"" to the
basic, compile-time, standard compliant and unsafe implementation that
Zephyr uses. ""Unsafe"" because it can evaluate its arguments twice which
is obviously not desired when the argument has side-effects:
https://wiki.sei.cmu.edu/confluence/display/c/PRE31-C.+Avoid+side+effects+in+arguments+to+unsafe+macros

I reviewed every single invocation of MIN() and MAX() and found no
increment or assignment but I found a number of function calls in their
arguments. This commit removes them all. Note I did _not_ check for
volatile variables.

Most of these functions do not appear to have side-effects _but_ it's
much simpler and faster for the reader or static analyzer not to even
have to wonder about the possibility of side-effects and it's also more
future-proof; no risk of a function accidentally gaining side effects.

Note the following files are not compiled in the default configurations
and the changes in them were NOT compile-tested locally:

src/audio/codec_adapter/codec_adapter.c
src/audio/drc/drc_generic.c

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",81,35,0
"thesofproject/sof","7e19dfb5faa24b9598b9a57052196328c3f8a6af","marc-hb","2023-04-04 01:24:13","false","xtensa-build-zephyr.py: move one-time cmake arguments check later

No functional change, pure preparation for the next commit.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",52,58,1
"thesofproject/sof","ee58fef9212f75b0270af32c1c27b8dd30217e54","marc-hb","2023-05-18 17:28:28","false","smex/cmake: move -Wl,EL option to target_linker_options() for clang

-Wl,EL is a linker option, not a compiler option and clang does not
like it at compilation time; it fails like this:
```
cd smex
cmake -B build -DCMAKE_C_COMPILER=clang
make -C build

clang-15: error: -Wl,-EL: 'linker' input unused
          [-Werror,-Wunused-command-line-argument]
```

Reported by @andyross in https://github.com/google/oss-fuzz/pull/10342

oss-fuzz does not need smex at all but this one-line fix is just
faster and simpler than a bigger CMake re-architecture just for
oss-fuzz.

Also simplify this for clang compatibility:
```
error: unknown warning option '-Wimplicit-fallthrough=3'; did you mean
     '-Wimplicit-fallthrough'? [-Werror,-Wunknown-warning-option]
```

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",50,59,1
"thesofproject/sof","cf85f21d08c2b083626c9c2bb081dbc02c2d0c51","marc-hb","2021-04-30 01:06:34","false","numbers.h: downgrade MIN() and MAX() to unsafe versions

For compatibility with Zephyr, MIN and MAX macros are downgraded to the
basic, compile-time, standard compliant and unsafe implementation.

This means the code will now be the same whether it's compiled with Zephyr
versus not.

Fixes https://github.com/zephyrproject-rtos/zephyr/issues/33567 which
means it's now possible to use MIN() or MAX() in either Zephyr's
BUILD_ASSERT() or in SOF's equivalent STATIC_ASSERT() or in C11's
_Static_assert()

This implementation is unsafe because it can evaluate its arguments
twice which is obviously not desired when the argument has side-effects:

https://wiki.sei.cmu.edu/confluence/display/c/PRE31-C.+Avoid+side+effects+in+arguments+to+unsafe+macros

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",81,35,0
"thesofproject/sof","a951579bb27e7f8556824ffe4e88705ccee0d024","ujfalusi","2023-10-25 11:52:08","false","sof_ri_info: Decode the Signed package info extension

Print out some information from the Signed package info extension, the most
important information being is the partition_usage which is used to select
key slot to be used for verification.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",8,65,1
"thesofproject/sof","cfed61eaec771793d329432d7ecebf8abd35c99e","ujfalusi","2023-08-11 08:46:20","false","lib-manager: Fix compilation if INTEL_MODULES are not selected

The lib_manager_register_module() is basically a NOP if the INTEL_MODULES
is not enabled and in this case there is a compiler warning as well:

src/library_manager/lib_manager.c: In function 'lib_manager_register_module':
src/library_manager/lib_manager.c:362:26: warning: unused variable 'uid' [-Wunused-variable]
  362 |         struct sof_uuid *uid = (struct sof_uuid *)&mod->uuid[0];
      |                          ^~~

Instead of playing with inline ifdefs, provide a reduced function to just
print the error for this case.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",28,62,1
"thesofproject/sof","6ae25ed09041462a91c4cd40e31d78e60205c33f","akloniex","2019-02-04 09:41:52","false","PM: Properly power down CNL/WHL/CML HPSRAM during D0/D3 transition

hpsram_mask passed to power_down procedure was improperly initialized
on CNL which lead to infinite loop waiting to power gate hpsram banks
that were not present.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",57,8,0
"thesofproject/sof","ce104012fd7b956f359f9c6abaf49be37c78987a","jajanusz","2019-05-24 10:13:41","false","kconfig: move DEBUG to the top of debug menu

It's better to have general options earlier in menuconfig
and specific options later.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",64,12,0
"thesofproject/sof","d7ad0c134d29c5555d8ed3226ed98ef4219acea5","jajanusz","2020-04-02 11:37:33","false","tools: sof_ri_info: make executable

Script is meant to be used as standalone tool,
so it should have executable file attribute.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",76,22,0
"thesofproject/sof","f0c085a4045c9f172397fe89047404f6220f7670","jajanusz","2019-05-24 11:30:45","false","alloc: move DEBUG_BLOCK_FREE to kconfig

We already have CONFIG_DEBUG* symbols in Kconfig,
this one is still defined in code, so it should be
moved also to Kconfig.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",64,12,0
"thesofproject/sof","b5654b851f658021c128511f83e763014d8ba62d","jajanusz","2019-07-22 09:56:16","false","test: demux_copy

Unit tests for demux copy with 1 source, 4 sinks and 8 channels.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",48,14,0
"thesofproject/sof","0887c10ed8ad9831e9d6caed5e5483068c501802","jajanusz","2020-09-03 12:24:11","false","github: remove @tlauda from CODEOWNERS

@tlauda is no longer a maintainer in SOF project.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",70,27,0
"thesofproject/sof","e6e17b00d18aecc84f63e722ecc4d80f32f0531a","dbaluta","2020-01-12 15:47:47","false","drivers: imx: Add separate config option for IMX drivers

Future i.MX platforms will use this config option
to compile NXP specific drivers.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",77,19,0
"thesofproject/sof","376d0520f85da4695311d9727c4a75ce726575d4","dbaluta","2022-09-26 08:42:19","false","module: cadence: Support params for more than 1 codec

We want to be able to play different compress stream types
using the same topology:

e.g

$ cplay -I MP3 -d 0 -c 0 sample.mp3
[ end of playback ]
$ cplay -I AAC -d 0 -c 0 sample.aac

Some static parameters for compress streams are set up in
topology bytes in the form:

[0:3]: param ID
[4:7]: size in bytes
[8:n-1]: data[]

We need now a way to specify codec ID, so we borrow 2 bytes from param
ID, like this:

[0:3]: (param ID, codec ID)
[4:7]: size in bytes
[8:n-1]: data[]

Using 0 for codec ID means 'dont care'. Topologies supporting just 1
codec are not affected and need not to be changed.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",97,52,1
"thesofproject/sof","9ef3826a05a00ac3468988645a8f3ec85bc1fdbd","lrgirdwo","2018-11-21 08:54:03","false","sue-creek: remove irrelevant for SUE Creek definitions

memory.h for the SUE Creek platform currently contains several
definitions, copied over from other platforms, having a direct
memory-based connection between the host CPU and the DSP, that
aren't relevant for the SUE Creek. Remove those definitions.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",39,6,0
"thesofproject/sof","03b4f30129d2208420a980ff92e959e00ca26763","lrgirdwo","2022-07-13 17:03:29","false","testbench: include stdlib.h

Newer GCC version complain about free() not being defined.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",110,49,1
"thesofproject/sof","f4aea9c9ba442f1b44993d72d84d871657664ee5","plbossart","2019-01-16 05:08:03","false","src/drivers/intel/cavs/dmic.c: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","a1e292b082884754e44fd9eaaaa787e33f1f2389","lrgirdwo","2018-12-17 16:54:04","false","scheduler: check task state prior to completion

High priority IRQ handlers can potentially reschedule tasks prior to task
completion. i.e.

1. Task runs and unmasks high priority IRQ prior to completion.
2. High priority IRQ prempts task context and reschedules task (changing
   task->state).
3. Initial task resumes and then completes (clobbering task->state in 2).

Make sure this flow is supported for high priority IRQ scheduling.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",48,6,0
"thesofproject/sof","e09354a5b5a82024a6ce83e5fcd7d3c7fbf3ef2a","dcpleung","2020-04-05 08:45:45","false","Update rimage to remove ldc generation ability

This reflects the changes on SOF project commit
b3c16790cd6fae9b4ce901d7ef36b47223f96dd7.

Signed-off-by: Daniel Leung <danielcp@gmail.com>",80,22,0
"thesofproject/sof","0adacd5ac25a9ab3956602fcb8e601348567668d","dcpleung","2020-03-25 17:40:55","false","Update source files from main SOF repo

Update source files from main SOF repository
@ commit 4e87899f25b0c859169c1dfd4dd9f9fd65d48ad2.

Signed-off-by: Daniel Leung <danielcp@gmail.com>",65,22,0
"thesofproject/sof","10757a1d3699e79e5da4c49d8317a1f1bf01f78c","mrajwa","2020-01-30 14:31:40","false","shim: remove unused, wrong offset

This patch removes unused and wrong offset
to SHIM register for CNL platform.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",75,20,0
"thesofproject/sof","60f4f9baa9a0c6567c4ce61577ee39506622f591","mrajwa","2019-07-26 12:47:22","false","kpb: change input parameter to kpb_buffer_data()

Due to secure reset procedure this function needs
a pointer to component device now.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,14,0
"thesofproject/sof","009447234cf01cbc31ae28841d7a9f702afbc2ff","lgirdwood","2018-09-19 07:43:00","true","Merge pull request #383 from mmaka1/smp-heap

memory: heap reorg for smp",38,4,0
"thesofproject/sof","b5eb15516c1f37ac9fb7f3fcb75967ae0101b06e","lgirdwood","2018-10-26 10:35:57","true","Merge pull request #116 from bkokoszx/logger-rejecting-trace-address

logger: refinement handling invalid trace address",29,5,0
"thesofproject/sof","090dd6ca3e79e32f1d1d04d52524d7b13d78e500","PayalKshirsagar","2020-03-23 13:16:26","false","src: platform: avoid NULL comparison

Replace NULL comparison with boolean negation.

Signed-off-by: Payal Kshirsagar <payalskshirsagar1234@gmail.com>",65,22,0
"thesofproject/sof","2638cdc4ca52c0e9c3ee433c06846a74fbaeb57c","keyonjie","2020-11-19 09:24:41","false","ssp: mn: add helper to get SSP clock index

Add a helper to get SSP clock index from the clock source encoded index
for cAVS platforms.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",74,30,0
"thesofproject/sof","9fcbd3e16aaef0d224cecac94a08c29ce8e3b084","keyonjie","2019-08-01 09:19:21","false","topology: add token for low power PCM.

Add stream token SOF_TKN_STREAM_PLAYBACK_COMPATIBLE_D0I3 and
SOF_TKN_STREAM_CAPTURE_COMPATIBLE_D0I3 to denote if the stream can run
at low power d0i3 status or not.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",53,14,0
"thesofproject/sof","47d223c09ff5da56073f3590d14a64bde513358d","keyonjie","2021-04-13 08:27:35","false","topology: sof-tgl-nocodec-ci: change to run smart_amp on core 1

Change to run smart_amp pipelines on DSP core 1, this will help reduce
the core 0 usage and add multi-core to the CI coverage.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",81,34,0
"thesofproject/sof","1fa1001e24a8bc8db419e8ff97aaf591ae8ceee5","iuliana-prodan","2021-02-16 10:38:40","false","dai: correct the order for DAI and DMA start/stop

To stop/suspend an active DMA channel:
1. Stop the DMA service request at the peripheral first (stop the DAI);
2. Disable the hardware service request on the appropriate DMA channel.

For start/resume:
1. Enable the DMA service request on the appropriate channel;
2. Enable the DMA service request at the peripheral (enable DAI).

When the start/stop order for DMA and DAI is different, on multiple
start/stop runs for playback or record or combined, we get an
underrun/overflow.
That's because the DAI makes a DMA request, before the DMA channel is
enabled.

Some platforms cannot just simple disable DMA channel during
the transfer, because it will hang the whole DMA controller.
Therefore, for DMA_SUSPEND_DRAIN, stop the DMA first
and let the DAI drain the FIFO in order to stop the channel
as soon as possible.

Fixes: #3809

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",74,32,0
"thesofproject/sof","4366f00249d2ffd8cb89360ad633259a54ee78b5","cujomalainey","2021-09-14 23:05:20","false","pipeline: remove pipeline_schedule_config return type

The function cannot fail, so lets remove the extraneous logic

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",117,39,0
"thesofproject/sof","d4afff0112647ae99c30249579dd94a569a048d4","cujomalainey","2023-07-13 00:13:27","false","audio: Kconfig: Add toplevel stub switch

Now that we have the ability to do a posix builds we can start working
towards a ""make allyesconfig"" equivalent. One limitation though is that
we cannot build what we don't have, in this case 3P blocks. This commit
adds a toplevel config for 3P adapters to switch to a stub file so they
can still have their builds validated. These will also be eventually
enabled in the fuzzers.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",31,61,1
"thesofproject/sof","df36d2564eccea86322a526a0d426f2a091ec1b9","cujomalainey","2022-05-27 22:12:47","false","OWNERS: move google files to team reference

Now we won't need code changes to update reviewers when we have
additions or departures.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",115,48,1
"thesofproject/sof","3b8ef3a791107d91daa639300fe94b1b8574b69f","cujomalainey","2023-01-10 19:20:13","false","owners: fix google audio component path

Forgot to update this after moving our components to a folder

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",53,55,1
"thesofproject/sof","044077cb86d38fe349ba44318c6c7aaf99716e33","mwierzbix","2018-11-20 11:10:46","false","shell-scripts: human-readable preprocessor output

Added script I used to read preprocessor output during preprocessor metaprogramming development. Normally it is highly unreadable, this tool makes things a wee bit easier.

Signed-off-by: Michal Jerzy Wierzbicki <michalx.wierzbicki@linux.intel.com>",39,6,0
"thesofproject/sof","adc8cc22cc9dbf8517a127c55a510bf8372b5131","ktrzcinx","2020-07-01 06:55:00","false","sof: Unify hex dixplay style

Consistency should be kept so usage the same HEX case throughout the FW
is advised.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",71,25,0
"thesofproject/sof","278bfc7cf3ef33c537344b00931102ea087291d8","ktrzcinx","2020-07-15 09:27:28","false","platform: intel: cpu: Fix slave cores objects allocation

This was missed changes after commit
""fedec980: cpu: Export mask with enabled cores"".
Without it, edited condition is always false.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",82,25,0
"thesofproject/sof","1535738355318c1619d06974dce8335002adda69","ktrzcinx","2020-05-22 08:33:34","false","logger: Move optstring from getopt function to separate variable

Such a change is provoked by getting close to maximal line length
in line with getopt line call. Moving format string to separate
variable is more logical solution than splitting function arguments
on separate lines.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",99,24,0
"thesofproject/sof","0de401f0745e0f4f636f4396f652c160c32e9c06","ktrzcinx","2020-06-05 06:35:17","false","trace: Remove unused structures

Unused parts of code only makes maintanace harder.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",77,24,0
"thesofproject/sof","a8aa7c30d694462c7289e710886b6a2842e8f0de","singalsu","2022-11-11 16:07:49","false","Audio: SRC: Delete unused function parameter fir_delay_length

It is not used so it can be deleted. There is no measurable
performance impact from this change.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",96,53,1
"thesofproject/sof","3540310eea01247bc6cf86165c3ece01094674a5","singalsu","2018-06-28 10:26:11","false","SOFT: Extend PCM parameters range in passtrough capture pipelines for DMIC

This patch extends the allowed sample rate range to 8 - 192 kHz, and
channels count to 1 - 16. Previously only 48 kHz and 2 - 4 channels was
allowed.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",6,1,0
"thesofproject/sof","8d83e5b099503a39b5bf45c06e77394da21042d2","singalsu","2023-05-19 10:24:56","false","Audio: DRC: Sort header files include statements

The includes are sorted to level 4, 3, 2, 1 and
alphabetic sort order.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",52,59,1
"thesofproject/sof","d80ed447903fec7a371cd601e7b01cca907ee048","singalsu","2019-11-11 09:35:01","false","EQ IIR: Add support for response reconfigure during streaming

This patch adds capability to equalizer to switch response during
audio playback or capture. The glitches are minimized by check
and apply of the filter configuration before each copy()
operation.

The existing only halfway implemented SOF_CTRL_CMD_ENUM for quick
stored presets switching during streaming is removed for now
since there is no driver support.

The internal code cleanup includes extract of two functions from
eq_iir_setup() for check and initialize of coefficients and
initialize of filter delay lines. It helps to better understand
the setup flow.

The extrapolation of channels to response assign map is changed
to use previous channel response instead of first if the stream
contains more channels than the response definition. The
procedure was changed to avoid a code static analysis issue. The
behavior is not specified so this simpler way was chosen.

To minimize number of duplicated functions in generic and HiFi3
version a new module iir_generic.c is created for the filter
core. After the change iir.c contains only the common code for
both implementations.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",56,17,0
"thesofproject/sof","bede56972c15d19485e203c55a75fff6b69fa179","singalsu","2020-10-26 16:22:39","false","Tools: Tune: TDFB: Updates for array geometry helpers and add 3D array

This patch adds the missing XYZ 3D array helper and does minor fixes
for two others. The L-shape microphones orientation is made similar as
in rectangular array by inverting the y-axis. The missing centering
of rectangular array is added.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",74,29,0
"thesofproject/sof","5bcbcf19f7e111af50008a6cb758cfecb9d5ff8a","singalsu","2023-06-19 10:44:40","false","Audio: Crossover: Convert to module adapter

This patch contains the changes to run crossover component as
module adapter client in IPC3 and IPC4 systems. The largest change
is to use pin indices in IPC4 instead of pipeline IDs to identify
sink streams. Pipeline IDs on firmware side are temporary in IPC4.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",45,61,1
"thesofproject/sof","15201664ca08b02929f1fc809090621138efa948","tlauda","2019-10-26 09:50:25","false","dai: refactor xrun checking

Refactors code for underrun and overrun detection. We should report
an xrun only if DMA get data size or DMA copy fails. In other case
even 0 available copy bytes doesn't mean anything, because we are always
copying as much as possible. Buffer could potentially be filled up front.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",67,17,0
"thesofproject/sof","311aa132499ae18beede47f82c6fca113335311c","tlauda","2018-07-02 16:53:51","false","arch: core_context implementation

Adds core_context implementation, which allows
irq_tasks and schedule_data to be allocated per core.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",7,1,0
"thesofproject/sof","54d4d01d645e9b389bd16804da834f55cdcdadbf","tlauda","2019-07-17 08:47:38","false","sof: move c files to dedicated directories

Moves c files to dedicated directories.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",46,14,0
"thesofproject/sof","27592104ee81fd5b35148395637d8dcdd68dc40c","tlauda","2020-01-21 12:05:07","false","cpu: writeback pointer to sof context

Writebacks pointer to sof context instead of the whole bss.
Every call to global structures is now going through this pointer
and static global data is implicitly shared.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",79,20,0
"thesofproject/sof","dc5e32cc304a006885092b4cc8a0b78c7e75dd45","tlauda","2018-08-02 15:13:42","false","interrupt: arch_interrupt_get_level

Adds possibility to retrieve current irq level.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",14,2,0
"thesofproject/sof","0b1eb91f105ce8445f376db3b104e21e86fba089","tlauda","2019-09-11 12:57:46","false","dma: add interrupt operation

Adds interrupt operation and operation type to DMA API.
This is the first step in excluding DMA interrupt handling
to schedule layer.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",59,15,0
"thesofproject/sof","d29ebe8fe64e4719fe8b3054391f8d568078fdfe","tlauda","2020-04-07 12:35:39","false","pipeline: atomic schedule of connected pipelines

Implements atomic scheduling of connected pipelines that
supposed to be triggered at the same time. If the trigger
is propagated to the connected pipelines, then the expectation
is that they should be started at the same system tick.
Otherwise it might potentially lead to losing some samples
at the beginning for one of the pipes.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",92,22,0
"thesofproject/sof","e20384eb6a17461c31d05943c2cb2bf2b48d6d11","kv2019i","2022-02-03 18:12:50","false","testbench: add option to override CPU core mapping

Add option to override how a core id, specified in SOF topology, is
mapped to host core. This allows to map a multithreaded pipeline
execution to specific range of host CPUs.

Implement the option via environment variable ""SOF_HOST_CORE0"", which is
understood by the CONFIG_LIBRARY implementation of ll-scheduler.

Document the usage to testbench help. mapping of DSP core ids specified
SOF_HOST_CORE

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",106,44,1
"thesofproject/sof","03d68261cfab182d7d239274c8a1d876c604d542","bkokoszx","2019-09-13 14:20:11","false","alloc: fix first free update in alloc_cont_blocks()

In alloc_cont_blocks() function after allocation we should
check whether new first_free block has been already used.
If it was used, we should find first not used block.

fixes #1714

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",60,15,0
"thesofproject/sof","7ad81766345e9eb8c2b885a942b21f15a2f0cca0","kv2019i","2022-08-08 09:09:25","false","probe: fix compiler warning on uninitialized data in probe_gen_format()

Compiler emits a warning about possibly uninitialized use of valid_bytes
and container_bytes. Add an explicit return that covers this case.
The code has a ""assert(false)"" statement already, but this is not
sufficient and the compiler rightly warns about this.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",116,50,1
"thesofproject/sof","85a2d1ebc9f54afecbb16fc2c47713c6156e521b","iganakov","2022-11-08 07:57:10","false","config: mtl: add kd module

Add KD module config

Signed-off-by: Ievgen Ganakov <ievgen.ganakov@intel.com>",93,53,1
"thesofproject/sof","6f488686b954a331036d5a91ec77ce34b5756158","softwarecki","2022-10-26 15:37:23","false","dma: Use dma_get_attribute from Zephyr

Use Zephyrs dma_get_attribute when using Zephyr native drivers.

After switching to dma_get_attribute from Zephyr,
local copy of get_attribute function for dw and alh
in ace platform is no longer necessary.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",93,53,1
"thesofproject/sof","79252d6c466f20bb8c3965fb3e075d2d752a4d1f","cujomalainey","2018-11-16 02:19:57","false","Fix sof-apl-nocodec comments

Follow graph convention in other files as well as fix typos and comments

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",39,5,0
"thesofproject/sof","0b10a1e526dd91b5362fd983a25fc39572ae61fc","cujomalainey","2022-01-12 01:33:35","false","ipc4: initialize return var

cppcheck is complaining that in theory we could return an uninitialized
value, which is true assuming bad IPC data.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",114,43,1
"thesofproject/sof","141493604af59eac5db94c0f75adf061c840c021","cujomalainey","2018-11-16 23:02:58","false","Update sof-byt-rt5640 graph

correct graph

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",40,5,0
"thesofproject/sof","115157070158b19066e37d1bdf30caab4a51fc32","tlauda","2018-07-20 13:58:12","false","dw-dma: use ll_current on dma start

On starting GPDMA we should use current link list item.
That way every start will continue from the right buffer,
not causing data corruption due to writing to the same
period as Host DMA.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",13,2,0
"thesofproject/sof","fcfbb496ce9420cb9995e8e5ddb7128f871becb6","tlauda","2020-01-15 14:41:00","false","ipc: use platform_shared_commit() on ipc_comp_dev

Uses new platform_shared_commit() function to commit
shared ipc component data.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",75,19,0
"thesofproject/sof","51c7667709186e6bc1af2202e80fbce304923165","tlauda","2019-09-18 13:42:22","false","arch: xtensa: fix exception in case of spurious interrupt

We need to switch stacks before check for spurious interrupt,
because otherwise we will jump and try to restore stack pointer
from the wrong location.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,16,0
"thesofproject/sof","e076e55ccff06fe701cbd765c91623d83e96c529","tlauda","2020-01-14 15:14:35","false","dai: use platform_shared_commit()

Uses new platform_shared_commit() function to commit
shared dai data.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",77,19,0
"thesofproject/sof","370f672cd2b6db344196ff5daaa50cf6d951f1ed","tlauda","2020-01-08 14:16:10","false","dma: move dmac_init to common header

Moves dmac_init function from platform to common header.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",71,19,0
"thesofproject/sof","d383adf03210f80a59bcd26f0be205b53a67a7f3","tlauda","2019-01-09 15:23:25","false","dw-dma: change work trace to verbose (again)

Changes trace call in dw_dma_work to verbose.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",56,7,0
"thesofproject/sof","e787f67209819639848526713e723f965a55d426","tlauda","2019-04-30 03:16:05","false","alloc: writeback the whole memmap after init

Writebacks the whole memory map structure after
its initialization.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",47,11,0
"thesofproject/sof","22ecaa41e159016716871420e444de68c6c7d1ed","singalsu","2019-03-27 11:12:27","false","Component: Add comp_get_copy_limits() function for copy() preparations

This patch adds into component.c/h an utility function and
a data structure to simplify audio component's copy() method code.

The do-nothing function pipeline_xrun() is added to avoid cmocka test
fail due to adding function comp_get_copy_limits().

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",58,10,0
"thesofproject/sof","c838ad082d01afd7da3663c202a5994bae3f7b05","singalsu","2019-03-15 13:43:30","false","Volume: Improve PCM format handling in params and prepare

This patch removes from params function the setting of component's
own stored frame_fmt since the variable cd->sink_format was not set.

In prepare function the frame_fmt is stored based on stream
direction. In playback it's set from source and in capture from sink.
This way the format matches the host component side of stream.

These changes help other components in the pipeline to operate with
correct PCM format.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",68,9,0
"thesofproject/sof","145d9aa09f256b6e9ab1ddef9626b6cf1b03cd92","singalsu","2020-05-28 09:22:01","false","Tools: Tune: Improve robustness of remote audio measure

Frequency response measure script mls_freq_resp.m could fail due to
network or ssh execution delays. This patch increases the recording
time by 3 seconds to ensure that remote device playback via ssh for
the relevant parts is within the local capture window.

Also the start marker search is done for first 5 seconds of captured
test signal. The script exits cleanly if the start and end markers
were not found and the captured waveform is shown to help understand
the possible network delays caused issue.

The BSD-3-Clause text is updated to short version.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",96,24,0
"thesofproject/sof","b3221684388e57f8031af6186172ea83b4f1edd2","singalsu","2018-06-04 08:02:00","false","SOFT: Add SRC coefficients generate tool

This patch adds the scripts src_std_int32.m and src_tiny_int16.m those
were used to create the conversions matrices for the default and tiny
profiles. The scripts call the included src_generate function that
does the task with help from the filter design and coefficients
export utilities.

The quality and resources consumption of SRC can be customized with
this tool.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",1,0,0
"thesofproject/sof","e4342324c0581038466cebcd31a92fa1d2082412","singalsu","2023-05-17 12:27:22","false","Tools: Test: Audio: Add test for level dependent gain

This patch adds to process_test.m test with amplitude sweep
to determine level dependent logarithmic gain.

Currently there is no test pass/fail criteria. But the test result
plot can be examined from directory plots. E.g. first full test
for DRC with ""process_test('drc', 32, 32, 48000, 1);"".

The view the plots from shell with ""eog plots/ldlg_drc_*.png"". Or
examine the plots directory with a file maneger GUI.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",51,59,1
"thesofproject/sof","4a036999118cfa7e491cbefc8eb6b737f50b7e33","marcinszkudlinski","2023-08-08 08:29:05","false","buf: remove coherent.h from struct comp_buffer

This commit removes coherent.h from struct comp_buffer

As sharing status of a buffer is known at creation time, it is
enough to create a buffer in shared (not cached mem alias)
when it will be used by several cores

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",29,62,1
"thesofproject/sof","24c2c15f9f40dae48b6ee8bfcf6c527669482acc","singalsu","2020-09-30 08:31:09","false","Tools: Test: Fix for dBFS level measure for muted audio

The log() function returns -Inf for level measure for stream of
digital zeros. It is correct but requires extra handling in the
upper level functions to avoid unnecessary tests fails. Adding of
offset 1e-20 results to -196.99 dBFS be the smallest possible
reported value. The function remains sufficient for all audio
measurements with 16 - 32 bit formats.

The license text is also updated to current version.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",66,28,0
"thesofproject/sof","305f8a2088aa4bcd1a2d8db7d9b652155e0291a6","marcinszkudlinski","2023-04-17 13:41:00","false","pipeline2.0: introduce sink/source utilities

There are many operations on sink/source that may be put into a
common library. This is the place for it.

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",50,58,1
"thesofproject/sof","7f617947f017770b9cc0574382fa7a2de0a9597f","singalsu","2019-03-27 12:00:02","false","IIR EQ: Add support for timer based scheduling

This patch adds to copy() function capability to handle any number
of frames with circular source and sink buffers. The number of
frames to process is retrieved with new helper function
comp_get_copy_limits().

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",58,10,0
"thesofproject/sof","02a9995c994c0cf90d8b7c1d92021588a60a417b","lgirdwood","2018-07-18 08:07:37","true","Merge pull request #32 from plbossart/debug/apl-nocodec

topology: sof-apl-nocodec: enable all 6 SSPs",13,2,0
"thesofproject/sof","7f36f833332b5365903f3cded5e43f2eb3ccf7b4","andrula-song","2022-11-17 03:04:03","false","Audio: Mixin_mixout: Optimize the mixin processing functions

Use audio_stream_samples_without_wrap_sx to replace the complicated
boundary detection for every sample and separate the mix functions to
normal mode and remap mode.

Normal mode (the default mode) can save at least 55.5% cycles for C
version and at least 76.7% for HiFi3 version.

Signed-off-by: Andrula Song <xiaoyuan.song@intel.com>",97,53,1
"thesofproject/sof","b76776ba8c965a99fb3be7272125924377b3718c","lgirdwood","2018-10-15 11:39:55","true","Merge pull request #106 from singalsu/eq_path_change_updates

EQ: Update new path into objective quality test functions",34,4,0
"thesofproject/sof","0b8d02216e4e10459db83af3fed37b799bc8a26a","mrajwa","2019-04-24 21:40:40","false","kpb: fix wrong size calculation in clearing function

This patch fixes wrong buffer size calculation in
kpb_clear_history_buffer() function.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",50,11,0
"thesofproject/sof","b25470fc449998a7f1bd62f5ee42fe0a2f87fe49","gongjun-song","2022-11-25 06:33:39","false","src: fix sink rate setting error of SRC ipc4

The commit that caused this bug is 1ec9fc1fbfd3616cd. Added the sink_c
parameter, but did not set sink_c in src.c.

This commit will set sink_c to solve the issue of wrong sink rate.

Signed-off-by: Gongjun Song <gongjun.song@intel.com>",97,54,1
"thesofproject/sof","33ec780df2158474bd31440891f1dc1648862bee","abonislawski","2022-01-11 11:54:04","false","ipc4: add updwmix module support

Up Down Mixer module
Conversions supported:
Up/Downmixing for stereo output:
	1, 2, 2.1, 3.0, 3.1, Quatro, 4.0, 5.0, 5.1, 7.1 -> 2
Upmixing for multichannel output:
	1, 2 -> 5.1
	2 -> 7.1
Downmixing for mono output:
	4.0, Quatro, 3.1,
	2 -> 1
At initial release only hifi3 version is supported.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>
Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",115,43,1
"thesofproject/sof","82b7f6869fc76371db76462508117a77160544f5","aiChaoSONG","2023-08-28 08:07:46","false","topology2: align benchmark hda topology with other hda topology

In this patch, audio_format is deprecated, and use
input_audio_format/output_audio_format instead.

Correct the IIR control bytes naming, and make it the
same with other HDA topology.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",25,63,1
"thesofproject/sof","aaf354fc8daca0b783dc0e1f05caf89d6485fdaf","tlauda","2018-09-26 08:25:47","false","ipc: add support for comp cmd on slave cores

Adds support for executing component command
on pipelines executed on slave cores.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",37,4,0
"thesofproject/sof","71b4f1d8c1f5fa7d587707ff3a8c805e223c9f67","tlauda","2019-02-07 12:27:44","false","volume: refactor volume to support variable processing sizes

Refactors generic and HiFi3 volume processing implementations
to support variable processing sizes. The volume_copy method
will also be refactored in the near future to take advantage
of this feature.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",55,8,0
"thesofproject/sof","5a31460e77e42d644c9431ea755d6f17b971cc2d","tlauda","2018-12-10 12:40:39","false","alloc: make system runtime heap core specific

Extracts system runtime heap from common runtime heaps
and makes it core specific.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",47,6,0
"thesofproject/sof","eff2f46415f04a1f47049a3f3e3b1c48d857f4f9","tlauda","2019-07-17 10:17:31","false","memory: make HEAP_BUF_ALIGNMENT macro to use PLATFORM_DCACHE_ALIGN

It adds another abstraction layer, so we don't need to directly use
xtos define.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",46,14,0
"thesofproject/sof","ceb35857b6294668ff4f68af577ba48ef6e21d85","tlauda","2019-07-10 13:22:21","false","arch: unify include guards naming

Unifies include guards naming in arch headers.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",42,13,0
"thesofproject/sof","5d42e0fdf0ffed2931dcfac7a93c9d91713bf987","tlauda","2019-06-04 13:56:16","false","cavs: ssp: add delay after start

Adds delay after starting SSP interface.
It allows for SSP in slave mode to nicely
synchronize with clock and frame inputs.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,12,0
"thesofproject/sof","3f079f9c0f9fa74124a35bf76922ba31c680ef3e","tlauda","2020-06-04 09:02:19","false","ssp: use default clock for platforms without M/N dividers

Uses default SSP source clock for platforms without support
for M/N dividers.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",93,24,0
"thesofproject/sof","7d7f2ae051bce6ec96888404ec76b3ba3d22bd13","tlauda","2019-08-06 13:40:11","false","arch: xtensa: add dedicated stacks for interrupt handlers

Defines and adds dedicated stacks for interrupt handlers
to core data. They are required to implement the execution
context switching, which is useful for any preemptive scheduler.
EDF is the first scheduler for which they will be used.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,14,0
"thesofproject/sof","90ddae9ebe6abbb331a1833a9eacb2d0505865f8","tlauda","2020-05-26 08:36:11","false","arch: xtensa: move bootloader to cAVS platform files

Bootloader is something cAVS specific and uses many platform specific
definitions and procedures. With new platform family in the future
it will be hard to maintain it in the architecture directory.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",97,24,0
"thesofproject/sof","1065e12a63c387b7324e22728fce5d7d155892eb","tlauda","2020-01-08 08:58:30","false","memory: add memory map to sof context

Adds memory map to sof main context. Also implements
getter to easily retrieve it through one point of access.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",72,19,0
"thesofproject/sof","119746d206b8bbc10a1521ae6e97aec6062aa8cd","tlauda","2019-07-10 11:25:08","false","common: replace __attribute__((packed)) with __packed

Replaces all occurrences of __attribute__((packed)) with
__packed macro.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",42,13,0
"thesofproject/sof","e548d2ddf001577dc82b65b4f262586d460083fa","tlauda","2018-08-21 08:40:06","false","idc: refactor IDC message template

Refactors IDC message template to better distinguish
message type, header and extension.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",19,3,0
"thesofproject/sof","872a04779e5002290f459f8d4812b8c5f99225f7","tlauda","2019-03-27 15:15:50","false","debug: add assert macro

Adds assert macro to easily locate wrong
parameters. If condition is not met we
will panic.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",56,10,0
"thesofproject/sof","ac487e09ca5bb34a2eebd2f3d1cfeb9e792c501a","singalsu","2023-10-02 07:38:00","false","Congfig: Add TDFB to TGL, TGL-H, MTL, and LNL

This patch enables load the of Time domain fixed beamformer (TDFB).

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",16,64,1
"thesofproject/sof","213fbf974021b5c2f5920564b516264b0c79d1df","singalsu","2022-08-09 08:12:45","false","Test: cmocka: Add unit tests for 16 bit FFT and IFFT

This patch adds tests for 16-bit FFT library version. The test SNR
is improved by using sine frequency that matches with length of FFT.
It allows to get highest SNR in transform without need for window
functions in test and attenuation in the signal.

The 32 bit FFT tests are updated to use the same signal generator.
With this criteria the minimum SNRs for 32 bit to pass could be
increased to 95 - 132 dB.

Also tests were added for 512 size FFT in addition to 256 and 1024.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",111,50,1
"thesofproject/sof","f976333a811ef98f4b72b2ee58163d017a7eefe4","singalsu","2021-11-18 15:55:14","false","Tools: Tune: TDFB: Updates to design scripts for sound direction estimate

This patch contains improvements to TDFB setup scripts and examples
those are related to sound direction estimation. The changes are add
of 15 degree angle spacing to enum control, add of rotated noise sound
create for sound direction testing in simulated acoustics.

The example line, circular, and xyz array scripts are updated for single
dual mono beam that is controllable in 15 degree or 30 degree steps. All
the two beam design examples are moved into example_two_beams.m.

The patch also contains noise field covariance matrix diagonal load
increase to -40 dB. I noticed uneven frequency response in some
designs due to numerical instability. The increased diagonal load makes
the automatic design procedure more robust at minimal hit in noise
suppression performance.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",128,42,1
"thesofproject/sof","efbfa2c4ddff0a1600b164035b24754b7e772533","singalsu","2020-05-19 14:25:23","false","Tools: Tune: Add generation for SRC profile small int32

This patch adds script src_small_int32.m to generate the intermediate
size SRC coefficients set. The export functions are updated for
short BSD copyright and to output licence text and needed header
files inclusions.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",99,23,0
"thesofproject/sof","22b193f3fa3a1ca1251da0e41ac35f951a223497","singalsu","2020-03-20 15:23:32","false","DMIC: Fix a typo in header file comment text

This patch fixes the topo in word ""microphone"".

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",66,22,0
"thesofproject/sof","0f0fc0788f1d5f4fb7939836e1b1de8b9c5eee90","singalsu","2019-04-05 15:08:46","false","Testbench: Update for file component new()

This patch updates the IPC check, allocation and copy for new()
to similar as in normal SOF components. The previous code caused
pipeline_comp_params() in pipeline.c to get uninitialized data.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",48,10,0
"thesofproject/sof","a8ee62a15c12c1db5519e96c4f3cb88b0b5ddca4","singalsu","2023-10-02 08:25:16","false","Audio: TDFB: Update component for IPC4

This patch updates the Time domain fixed beamformer (TDFB)
module prepare() to set in tdfb_params() IPC4 sink and source
parameters from initialization IPC. The notifications send to
user space for sound direction of arrival is updated to work
with IPC4 ALSA notifications.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",16,64,1
"thesofproject/sof","0bd34f5486a35c66dfbb1d0b1423d9d214a81c7f","IulianOlaru249","2020-02-22 09:42:34","false","math: Make binary gcd work with negatives

This patch makes the binary gcd algorithm work for negative
numbers by turning them into positive ones. Works since
gcd(a, b) = gcd(-a, -b) = gcd(-a, b) = gcd(a, -b)

Signed-off-by: Iulian Olaru <iulianolaru249@yahoo.com>",80,21,0
"thesofproject/sof","41996216af6f0d86561d10c5e6f6cb24e71cc019","andrula-song","2023-06-12 11:47:53","false","Audio: Aria: optimize the implementation of aria processing

Remove the internal linear buffer to get/store data from source
and sink. And use the index table to reduce the mod operation.

Signed-off-by: Andrula Song <andrula.song@intel.com>",47,60,1
"thesofproject/sof","1068079a4c56657236945237f8d33b6fc47a5e65","tinghan-shen","2022-11-02 12:11:44","false","platform: mt8186: Init ADSP PLL and ADSP bus clock

Initialize the mt8186 ADSP PLL before change ADSP core
to high frequency because the clock source of high
frequency is coming from ADSP PLL.

Because the ADSP bus source switches to the EMI clock,
the ADSP local bus clock should switch to 26M.

Signed-off-by: Tinghan Shen <tinghan.shen@mediatek.com>",89,53,1
"thesofproject/sof","364f52b74f746c5bd56e569b30baf4f2473d1c5d","ranj063","2019-01-17 05:14:25","false","topology: cml: update macros for HDA DAI's

HDA_DAI_CONFIG has been replaced to re-use DAI_CONFIG.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",55,7,0
"thesofproject/sof","2e63ee21447b3e22a6528a35c6a23f79227d22f6","abonislawski","2019-04-03 12:28:17","false","coredump-reader: make columncount dependent on verbose option in help

This is to notice user that columncount option will work only with verbose

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",53,10,0
"thesofproject/sof","7615eced49be86fc2258d07f1a9f1dc19e5b1d54","ranj063","2022-01-10 22:26:58","false","codec_adapter: remove some unnecessary else's

No need for an else after returns or gotos.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","6853616cfc782aeccbbffb1e7ed43bca208e84d2","dbaluta","2022-09-29 14:02:43","false","Revert ""xtensa: configs: Enable comp legacy on i.MX platforms""

This reverts commit 1044e004e4ecbaf9a6ff53a2aa253e9072d8f535.

On i.MX platforms we noticed a bug were playback followed by
capture would cause capture to fail.

This issue was later fixed by:
commit b9889d52d0e1b (""module_adapter: Modify reset API"")

so we can get rid of CONFIG_LEGACY_INTERFACE.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",98,52,1
"thesofproject/sof","84834803817632a0eed86fc1402cae83597e0c16","wwittbrx","2019-02-07 14:37:55","false","owners: add members of FW val team to uapi code
Signed-off-by: WojciechX Wittbrodt <wojciechx.wittbrodt@intel.com>",58,8,0
"thesofproject/sof","208af04724e269e4ea85f73788535917ca8e9a2c","macchian","2021-03-18 07:41:36","false","Topology: Add support for MAX98390 echo reference capture

codec chip playback loopback to capture stream.

Signed-off-by: Mac Chiang <mac.chiang@intel.com>",72,33,0
"thesofproject/sof","4ba8399e128d432b1d2c4bbf1db867488b22b14b","lrgirdwo","2018-11-13 21:17:42","false","hda-dma: trace: further improvements to HDA DMA trace output.

Further improvements and correction to HDA DMA trace output.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",38,5,0
"thesofproject/sof","3127503a600e5e796be6dbdfdbe0d7c4f27e9538","dbaluta","2021-04-08 07:07:40","false","LICENSE: Add Cadence license

We already have cadence license snippet in SOF project LICENSE
file but this one has new Copyright years.

// Copyright (c) 2003-2014 Cadence Design Systems, Inc.

vs

// Copyright (c) 2006-2020 Cadence Design Systems, Inc.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",79,34,0
"thesofproject/sof","7835669c92428dc44b46a7f01ac3a5f7240cfc5b","libinyang","2021-11-15 04:59:10","false","topology2: cavs-nocodec: fix dmic compile failure

The current topology2 requires to set id in PCM.pcm and to set index in Pipeline.

Signed-off-by: Libin Yang <libin.yang@intel.com>",127,41,1
"thesofproject/sof","8d68de8db5b37536ccfe47db9788b9261ad1ded9","RanderWang","2021-07-19 06:34:13","false","ipc4: add ipc4 dai configuration support

Dai configuration is generated based on gateway config in copier module

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Rander Wang <rander.wang@intel.com>",90,38,0
"thesofproject/sof","9d62c12823446731e3c7a22f51ccaf647314c719","RanderWang","2018-10-24 07:15:44","false","hda: set correct link dma channel

host dma and link dma work in decouple mode for SOF + HDA codec.
Now allocate host dma and link dma channel in host and set them
in FW individually.

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",27,5,0
"thesofproject/sof","1ff4a9df32844b7ef58007ee83ef1759ffe43ae2","RanderWang","2018-09-10 04:55:36","false","playback: kill a infinite loop in pcm_param

Don't delete item with list_for_item. with list_for_item, a item
is deleted from list but the next of this item is used to visit
the list.

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",34,3,0
"thesofproject/sof","1f641729cd389cbf90a6f1aca0bfc9c30ce5726c","RanderWang","2021-07-16 06:42:15","false","ipc4: add ipc4 message support

There are two types of ipc4 message: global message and module message.
Ipc message is first decoded in handler.c and processed with the help
of helper.c to deal with pipeline message and module message.
Pipeline and Module messages are converted to sof pipeline and
component message.

Ipc4 pipeline message <------> ipc3 pipeline message
RUNNING       <------->   TRIGGER START
INIT + PAUSED <------->   PIPELINE COMPLETE
PAUSED        <------->   TRIGER_PAUSE
RESET         <------->   TRIGER_STOP + RESET
EOS           <------->   TRIGER_RELEASE

Ipc4 Module message <------> ipc3 module message
init module             <------->   create component
bind modules            <------->   connect components
module set_large_config <------->   component cmd
delete module           <------->   free component

There is no buffer module in ipc4 design and FW manages buffer for each
module while buffer component is defined by topology and create by ipc
message for ipc3 design. For ipc4 path, FW will create buffer when two
modules are bound since the buffer format can be gathered from source
& sink modules and the buffer can be connected to both modules.

Currently only part of ipc4 messages are processed and others will be done
in future.

Signed-off-by: Rander Wang <rander.wang@intel.com>",92,37,0
"thesofproject/sof","d92d3e98830c1d4e16d58a29c165b02a5c5aa8b4","marc-hb","2020-04-08 00:02:15","false","CI: travis: add doxygen stage

Before this new stage, doxygen was run only in a completely different
repo (sof-docs). So it was possible to submit totally broken doxygen
changes and get no doxygen feedback at all from CI before merge.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",89,22,0
"thesofproject/sof","7d9aa8e04bcbd498976c8576f526884dd51f4ab0","marc-hb","2022-02-17 06:26:49","false","xtensa-build-zephyr.py: switch to RawTextHelpFormatter and """"""

We need control to format add_argument(help=...) strings manually too.

Zero functional change.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",105,44,1
"thesofproject/sof","edb2c600542c785ec353928656dc26c7c7735871","marc-hb","2020-04-09 16:36:27","false","CI: Travis: disable host-testbench as long as it ignores errors

See https://github.com/thesofproject/sof/issues/2752

host-testbench.sh exits with success 0 when tests fail. Random, recent, all
green example in PR #2751:

https://travis-ci.org/github/thesofproject/sof/jobs/672996210 is green but:

  eqiir test failed!

I didn't even have to spend time to search for this example, I only
looked at the most recent PR.

Ignoring failures is the very worst type of validation issue because it
makes everyone think everything is OK when it's not. Hides regressions.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",82,22,0
"thesofproject/sof","f50b6fe0adc440a5b0d93054372adec74f0a013f","marc-hb","2022-01-06 23:26:58","false","topologies: switch all .m4 files to codec_provider and codec_consumer

All .tplg output files have been compared and are strictly identical
after the change.

The deprecation warnings were added more than one year ago in
https://github.com/alsa-project/alsa-lib/commits//706192341d1d0bbb906

Now that we just upgraded our Docker image to ALSA 1.2.6
(https://hub.docker.com/r/thesofproject/sof/tags) so #5153 can enable
topology v2, the volume of warnings has became unbearable.  For instance
good luck trying to find the actual error messages for the build
failures of #5155 - they're totally drowned in these deprecation
warnings.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",115,43,1
"thesofproject/sof","33617197acc56d4ea658a0c50f561cb24ecc9137","emilchudzik","2019-02-01 12:01:55","false","ssp: add LBM quirk

Signed-off-by: Emil Chudzik <emil.chudzik@intel.com>",60,8,0
"thesofproject/sof","fa5eee246334ac58ad85aa332952adc40d507ef9","lyakh","2020-09-14 14:11:29","false","zephyr: fix iir and fir file renaming

Two recent commits moved and renamed some of eq-iir and eq-fir files,
without updating zephyr cmake files.

fixes ab4a608198dc (""Audio: Move FIR core to math library"")
fixes baa43558f663 (""sof: math: move iir_df2t function to src/math"")
Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",64,27,0
"thesofproject/sof","a95ea9bfb1f84e6aae348255834247856422b3a3","lyakh","2022-12-12 13:15:56","false","buffer: move linking and unlinking code to functions

We want to re-use the code, used to synchronise caches when linking
and unlinking buffers, move it to two new functions.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",103,54,1
"thesofproject/sof","cdb8cd46a306263a342633a00301436528cca187","lyakh","2022-10-18 12:17:31","false","iadk: don't store the IPC data pointer permanently

IADK modules obtain a pointer to IPC data for their initialisation in
system_agent_start()'s last parameter. No need to also store it as
module's private data - it doesn't belong to the module and its
contents can change. Store a pointer to the module itself instead.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",99,53,1
"thesofproject/sof","e21be99ce678feb9a7a8b5360762cdf7586205fb","jsarha","2022-09-23 13:11:47","false","tools/probe: Drop sync_word_at(), a simple == condition will do

The sync_word_at() only checks for two things, if the len parameter is
greater than sizeof(uint32_t) and if the memory pointed p parameter
holds PROBE_EXTRACT_SYNC_WORD value. Now that the available bytes is
checked just before sync_word_at() call, the whole function starts to
look a bit pointless.

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",97,52,1
"thesofproject/sof","ba3a241e935c50d463f06c70bb87e04fbdc10141","lrgirdwo","2021-03-29 09:59:05","false","pipeline: split out trace APIs int a separate header

Split out the trace APIs from the core pipeline APIs.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",80,34,0
"thesofproject/sof","a2054ae60d9d950ac7b88e5918562bec39a99ef3","plbossart","2018-08-07 21:12:59","false","dai: fix error handling when DMA is stuck

When the DMA is stuck, e.g. in slave mode when the external clock is
not active, the Linux kernel will trigger a stop after a
timeout. Since the DMA will never complete, the current code returns
an IPC error on stop (DMA completion fails) and will not reset DMA
channel status and reference counts.

Force the DMA and DAI to be stopped to solve the problem. We probably
need to look at all error handling since it's likely to be a recurring
issue.

Also simplify the Xrun code, no need for an extra return.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",17,2,0
"thesofproject/sof","f837e57b6e05c5386fd3fb43a4a6374d94475d47","jajanusz","2019-07-22 14:51:05","false","test: mux calc_sample_s16le

Unit tests for calc_sample_s16le with up to 8 channels.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",47,14,0
"thesofproject/sof","1f047fed43483645f7decb120495d0bb7c25e51c","ujfalusi","2023-08-18 09:53:44","false","Revert ""lib-manager: Kconfig: Make LIBRARY_MANAGER depend on MM_DRV""

This reverts commit b0da357b3ab91a58cbc6250ed9a70645fb0c2a62.

The lib_manager now can be compiled without MM_DRV, there is no
need to keep the option to depend on it anymore.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",24,63,1
"thesofproject/sof","5693934983e3e782df589b50eb1413bb73ddcbf1","ujfalusi","2022-07-06 07:24:20","false","volume: Update outdated function parameter documentation

With the module conversion the parameter 'dev' of most function changed to
'mod', update the doxygen comment to generate correct information.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",109,49,1
"thesofproject/sof","4735864abebb96fad4669a8661fa4e22c9875ac5","btian1","2023-07-12 08:22:27","false","smart_amp: simplify smart amp parameters

use helper function to update stream parameters.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",31,61,1
"thesofproject/sof","ce6ec18fcb53423c1a6b77cf4c856619595f7bd3","btian1","2023-05-09 06:09:54","false","copier: remove ipcgtw device creation and its usage

After all ipcgtw expose new interface to copier, copier does not
depend on ipcgtw device anymore, remove it to align with host and
dai optimization.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",53,59,1
"thesofproject/sof","8e50a510c3281db06619382ee1f0a3357a12bec9","plbossart","2018-08-01 04:21:52","false","topology: add APL and GLK Chromebook support

The APL and GLK topologies are identical except for a swap of SSPs and MCLKs.
Tested on Reef and GLK

TODO:

1. there is currently a kernel bug where only duplex pipelines can be
assigned to the same PCM number. For now mark DMIC as device 99 to
track this is a work-around to be modified in the near future

2. Edit the Virtual routes/widgets to remove kernel warnings (no
functional impact)

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",18,2,0
"thesofproject/sof","058e6571a5a36dd8eaef37981ea39606f1527c9c","plbossart","2023-06-01 15:59:40","false","topology1: add support for Dell SKU 0934

Yet another permutation. This needs to be back-ported to 2.2 releases

Closes: https://github.com/thesofproject/linux/issues/4399
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",49,60,1
"thesofproject/sof","21573f449a2b3ebf497cba60a65f8157bdb7aa51","keyonjie","2020-07-29 10:12:30","false","cAVS: pm_runtime: change to use bool flag to denote the DSP target state

Remove the usage of refcount dsp_d0_sref, and use bool flag dsp_d0 to
denote is the DSP target state is D0 or D0ix (Low power mode).

This will simplify the logic of use of LPS and clock switching.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",80,26,0
"thesofproject/sof","8a2ea0044dcfd71da952ecd3ca8662c4b25dab43","keyonjie","2021-07-02 09:43:46","false","config: cnl: change image_size to the real SRAM size

We have 47 bank HP and 1 bank LP SRAM on CNL, change to toml config file
to reflect that.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",85,37,0
"thesofproject/sof","ebe28dd06ba25e251d3d9913d78d47c8e03f54de","keyonjie","2021-02-23 06:27:00","false","cavs: clk: do TGL specific HW recommended flow unconditionally

We need to follow TGL specific HW recommended flow to get/put
PM_RUNTIME_DSP, even for not release_unused clocks requirement.

This will address the PM_GATE IPC failure issue:
https://github.com/thesofproject/sof/issues/3823

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",75,33,0
"thesofproject/sof","192d1dfc5fbf1be811d2400f327db76574cdb49b","andyross","2023-06-22 18:51:59","false","ipc: Fix typo in error checking

Found a oss-fuzz error I thought I'd fixed being reported again.
Turns out the fix had a typo and only fixed half the problem space.
Need to check source and sink, not source and source!

Signed-off-by: Andy Ross <andyross@google.com>",42,61,1
"thesofproject/sof","91893750f708ee9112d16fe4784e08bffad50d22","ranj063","2022-01-11 06:44:09","false","module_interface: remove the apply_config op

The set_configuration op replaces this one.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,43,1
"thesofproject/sof","6c17eba7e22d2662b509eb7e3e444a8d99521290","abonislawski","2021-08-30 11:25:56","false","buffer: alloc main buffer struct in the runtime shared zone

Buffers can be shared between cores and it is crucial to have access
to not only proper buffer data but also description data of this buffer

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",118,39,0
"thesofproject/sof","9fa5d722b461eaccba12bbd4a62afe660def2b6e","ranj063","2023-04-20 02:17:18","false","topology2: Remove 24-bit audio formats in mixin/mixout

The 24-bit formats defined in topologies will never be used because the
mixin/mixout only support 32-bit format. So remove these audio formats
from the component and pipelines audio format definitions.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",51,58,1
"thesofproject/sof","45e4cc484dd27639ea35c239f8947ffbd6fce00c","ranj063","2023-02-09 00:19:53","false","topology2: Move to using arrays for defining objects

Where there more than 1 object of the same type defined at the same node
level, use arrays to define the object. For example, we can define 2
routes as follows:
Object.Base.route [
	{
		source	""smart_amp.2.1""
		sink	""copier.SSP.2.1""
	}
	{
		source	""mixin.1.1""
		sink	""mixout.2.1""
	}
]

This allows us to merge 2 arrays from different conf files without
needing to make their instance ID's unique.

Assume we add another route in a separate conf file like below:
Object.Base.route [
        {
                source  ""gain.5.1""
                sink    ""copier.5.1""
        }
]

The alsatplg compiler will merge them as follows resulting in 3 route
objects.

Object.Base.route [
        {
                source  ""smart_amp.2.1""
                sink    ""copier.SSP.2.1""
        }
        {
                source  ""mixin.1.1""
                sink    ""mixout.2.1""
        }
	{
                source  ""gain.5.1""
                sink    ""copier.5.1""
        }
]

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",55,56,1
"thesofproject/sof","87a8dfecb694bb653aecc0e2a3e312d0485759f8","cujomalainey","2021-02-11 01:30:44","false","codec_adapter: stop leaking memory on prepare

we should free before we clear the pointer

found via cppcheck

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",72,32,0
"thesofproject/sof","090208a481392ae7420de67f02c6675c3fa0d2a0","bkokoszx","2019-03-21 12:56:17","false","edf: using specific schedule_edf() instead of schedule()

I've changed scheduler invocation in schedule_edf_task_normal()
from generic schedule() to specific schedule_edf() for optimization
(there is no need to use generic functions in specific scheduler
implementation).

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",65,10,0
"thesofproject/sof","cf04ada3236b11fe9568f5318f0c85e0ead2ff00","bkokoszx","2021-12-13 16:04:28","false","volume: merge volume (ipc3) and peakvol (ipc4) component

Merge peakvol component into already existing volume component.
The main differences:
- curve duration format is in hundred of ns (ipc4) and ms (ip3);
- volume format sent by driver: Q1.31 (ipc4) and Q8.16 (ipc3);
In ipc4 case volume format is converted into Q1.23 inside firmware.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",110,42,1
"thesofproject/sof","8afb35436add5a804b7d2879edf70be901cd6614","ranj063","2021-10-06 17:46:38","false","audio: DAI: handle two-step stop and pause

If the two_step_stop flag is set for a DAI, DMA reset will be skipped
during DAI reset and it will be done when the DAI_CONFIG IPC is sent
during hw_free. Also, for the pause push case, the DAI_CONFIG IPC will
be sent with the flag SOF_DAI_CONFIG_FLAGS_2_STEP_STOP_PAUSE which
call dma_reset to stop the DMA.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",121,40,1
"thesofproject/sof","542924d70c1715671ad8213440f01dc6dadb52e4","abonislawski","2022-08-30 07:24:42","false","config: tgl-h-cavs: add probe module

Add probe module to tgl-h-cavs config

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",114,51,1
"thesofproject/sof","6ecfdbf8101cf0fff783a3c0ed5586f91f3770d0","abonislawski","2022-01-18 07:52:32","false","ipc4: report correct value for hw core count

MAX_CORE_COUNT was removed in:
commit 2bd41aaf265e (""platform: remove MAX_CORE_COUNT"")

CONFIG_CORE_COUNT should be used instead of CONFIG_MAX_CORE_COUNT

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",116,43,1
"thesofproject/sof","ddc104c66d4f297cef9544fd7a987d5300ed9ab3","nashif","2022-09-15 20:41:29","false","zephyr: both BDW and BYT are not supported in zephyr

Both Broadwell and Baytrail are not supported in zephyr and those
Kconfigs are not defined anywhere, neither in SOF nor in zephyr.

Signed-off-by: Anas Nashif <anas.nashif@intel.com>",98,51,1
"thesofproject/sof","9555b976652729dfb247a2166c9666307bae39ab","RDharageswari","2020-07-06 20:39:19","false","tgl: Fix the MEU offset for MEU version less than 15.0.0.0

This patch fixes the MEU offset value to 1088 for the
MEU version less than 15.0.0.0.

Signed-off-by: Dharageswari R <dharageswari.r@intel.com>",73,25,0
"thesofproject/sof","28f8bd8df1d234fa54790ff228cbc6314ffdca90","ktrzcinx","2020-01-17 09:52:30","false","volume: Mark input device pointer as const in processing functions

Const keyword is added to explicitly indicate that nothing in given
input devices buffer can be changed in processing functions -
- read pointers also.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",79,19,0
"thesofproject/sof","c4c177069ee26bf27e04922a1d9f72c33ce3152a","ktrzcinx","2020-09-02 10:45:37","false","alloc: Add possibility to read memory usage in runtime

Such a function may be used to monitor memory leaks and system
utilization.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",70,27,0
"thesofproject/sof","0e1176d9434a4139e31528cd4a55dcdb095b8d8d","ktrzcinx","2020-05-22 07:20:40","false","trace: Update trace level after ipc message

Update process must be splited into two parts - updating global
components, which have trace contect saved in dedicated section
and updating ipc components, where trace contect is part of
particular instance and data.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",99,24,0
"thesofproject/sof","0aa3e4b4ca3de3b0dce4f8cb688148de00a02a28","ktrzcinx","2020-09-29 12:14:26","false","ipc: debug: Add KConfig to conditionally compile memory scan feature

This feature is not needed to get functional firmware,
so may be disabled for platforms with low memory space,
like baytrail and cherrytrail.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",66,28,0
"thesofproject/sof","5fb1d45562b1977e22d62f5c2c3177fa899c68a6","kv2019i","2022-08-04 09:19:55","false","west: update to newer Zephyr baseline

Update zephyr to commit 8e55e59c5917 ('arch: introduce config DCLS').

Fixes build errors due to missing core-isa.h with tgl Intel target with
gcc build chain.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",111,50,1
"thesofproject/sof","a55fbfabd9a13b38d2559ef8da3cbb016e56b8e1","kv2019i","2023-02-07 17:06:47","false","ipc: add ipc_msg_send_direct support

For emergency like FW panic event, we need to send notification IPC
message to host directly without inserting this message in msg_list
since at this time the system is not stable now and it is very possible
that the normal message processing logic can't work.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>
Signed-off-by: Rander Wang <rander.wang@intel.com>
Co-developed-by: Rander Wang <rander.wang@intel.com>",55,56,1
"thesofproject/sof","22354d61e1d7eae6790379aebd9155bb8869113a","bkokoszx","2018-11-15 09:38:06","false","logger: kw: fix logger klockwork issues

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",42,5,0
"thesofproject/sof","d0f427c06fa60467aff23a72c26ce0b21fd46240","kakulesza","2018-07-17 14:53:00","false","volume: Set max volume value from sof_ipc_comp_volume IPC for volume module

Set volume minimum/maximum level from IPC. If IPC max_value = 0 or
IPC max_value < min_value then max_volume = VOL_ZERO_DB (default value).

Signed-off-by: Kamil Kulesza <kamil.kulesza@linux.intel.com>",13,2,0
"thesofproject/sof","5c8c80476680f89c043cf584578d4912485577e0","tlauda","2019-06-04 13:58:17","false","dai: change starting sequence

Changes starting sequence of DAI. Now IO interface is
started before DMA. The purpose of this change is to
allow slave interfaces to prepare their FIFOs before
DMA starts transferring to them.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,12,0
"thesofproject/sof","9a376372a42ea79abba78abc0eb7c71dd88dcd34","tlauda","2018-07-09 09:30:38","false","hda-dma: wait for buffer full after starting render

Host DMA should wait for buffer full after starting render
to avoid empty samples at the beginning. Temporary solution
until DMA unified flow will be implemented.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",12,1,0
"thesofproject/sof","f7abaf7b3346e5917436a8b4dd264688a471dd89","tlauda","2019-08-03 08:48:34","false","spinlock: allocate spinlocks in uncached memory

Spinlocks need to be allocated in uncached memory region
in order to work properly and allow synchronization between
multiple cores. Atomic instructions used in xtensa implementation
don't go through cache automatically.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,14,0
"thesofproject/sof","68f27263c88c7f0270bf0fd4c503ee00312a74fc","tlauda","2019-04-09 15:08:20","false","topology: increase number of periods for low latency pipeline

Increases number of periods for low latency playback pipeline
from 1 to 2 for volume and mixer components. 1 period
is not good enough to have continuous DMA transfer across
the whole pipeline, especially with the new copy flow,
which requires playback pipeline preload.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",48,10,0
"thesofproject/sof","cb5ab2ba2c60f207a8fe8f2de6d70a7b0cdd7c4a","tlauda","2020-03-17 12:33:04","false","kpb: fix potential exception while freeing buffer

Fixes potential exception while freeing history buffer.
Not all buffers in the linked list are always allocated.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",77,21,0
"thesofproject/sof","76563333a6a3ce4476de666733ae1933cb3341cd","tlauda","2019-12-16 16:00:56","false","ipc: remove ipc_process_msg_queue function

Removes ipc_process_msg_queue function as it's no longer needed.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",73,18,0
"thesofproject/sof","7d0a0c673f94fe59fbe9b7586f841434ac2569b4","singalsu","2023-03-29 10:35:04","false","Audio: Module adapter: Pass entire cdata to clients for all controls

This patch unifies all the control types (bytes, enum, switch).
Previously for binary control the fragment pointed to
cdata->data[0].data while for other control types the cdata
was passed via fragment. If fragment always points to cdata
the module adapter client can reliably check the control type
from cdata->cmd and handle other than binary control types.

Since the client components with binary control pass the
data to comp_data_blob_set() in data_blob.c the restore of
pointer fragment to cdata->data[0].data can be done there.

A check for SOF_CTRL_CMD_BINARY is added to comp_data_blob_set()
and comp_data_blob_get_cmd() to avoid wrong usage of controls.

With IPC4 in comp_data_blob_set() the use of
struct sof_ipc_ctrl_data pointer step is not done but the
fragment is treated as raw data payload without the header.
The generic support for other than binary control will be
solved later for IPC4.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",58,58,1
"thesofproject/sof","5eb7304f61b9f0d036edb429b5e9388b4cebe47f","singalsu","2022-02-16 14:41:30","false","Math: FIR: Add more efficient generic C function fir_32x16_2x()

This patch adds FIR function that computes two samples per call
it reduces the coefficients and PCM data accesses. Saving from
original FIR is 34 MCPS from 134 MCPS to 100 MCPS.

The samples include constrain of FIR coefficients length to
be multiple of four and add two into delay line length to have
room for two input samples while keeping the length even.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",106,44,1
"thesofproject/sof","e0ec195bcdd66b85db8efc448350ef9077edfc1f","singalsu","2022-01-11 13:34:49","false","Test: Audio: Fix stdnotch_get() function issue in Matlab

The path append of current directory (.) is not correct for
the signal processing package function iirnotch. The issue does
not happen with Octave since it has pei_tseng_notch().

The standard notch function is used in all THD+N tests so this
issue has caused fail of nearly all tests with Matlab.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",115,43,1
"thesofproject/sof","92ec08dad5df25c756d6d958d48b7f3035e960a6","singalsu","2019-09-02 15:14:37","false","Tools: Tune: Fix file paths for example FIR script

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",59,15,0
"thesofproject/sof","b38b7466073b02c4b4bcf75d9af53a78ab83699e","singalsu","2022-02-08 09:00:05","false","Audio: Fix spelling typos in src/audio/*

This patch addresses the typos in audio processing components.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",106,44,1
"thesofproject/sof","ddc383e9ef44a3d12e5dfa59bbc673332d43bd9a","singalsu","2019-03-27 12:03:18","false","FIR EQ: Fix for pipeline PCM format handling plus code cleanup

This patch determines the frame format for component depending on
stream direction. In playback it is determined from source buffer
and in capture from sink buffer. The errors handling in prepare()
is improved.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",58,10,0
"thesofproject/sof","ee5c3e1deb1436a6e52b653bb523b594511cf330","aborisovich","2022-01-26 09:52:36","false","Added handling of OpenSSL on Windows with MSYS2

Added new MSYS_INSTALL_DIR variable that points to MSYS2 installation
for Windows users. It is used to include POSIX native headers from
/usr/include also required openssl headers.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",104,44,1
"thesofproject/sof","071ba084a64ef08f49ce0f854b3c7ce27ad26b1f","serhiy-katsyuba-intel","2023-07-14 15:52:19","false","Add remote get_attribute for cross core connection

To support pipelines connection between cores, ipc4_create_buffer()
must be able to create buffer shared between source and sink
components created on different cores. ipc4_create_buffer() requires
source component obs size. When both source and sink components
created on same core, ipc4_create_buffer() is executed on that core,
otherwise it is executed of core 0 (IPC processing core). So for the
case when source and sink components are created on different cores
comp_get_attribute_remote() is used to receive source obs size.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",32,61,1
"thesofproject/sof","f7d0d89f9eed7fd59c0ad382e7b0bb3ed3732441","stolx","2021-03-02 05:32:40","false","fix norm_int32 implementation

New implementation does not rely on left shift of signed value and
has no code duplication. Output is the same as original.
found by cppcheck

Signed-off-by: Oleksandr Strelchenko <oleksandr.strelchenko@waves.com>",73,33,0
"thesofproject/sof","60fc7300031162d2487360262a4600a419db7c9f","sebcarlucci","2020-03-17 00:06:47","false","tools: testbench: Include dcblock in testbench

This commit adds support for running test for dc blocker.

Signed-off-by: Sebastiano Carlucci <scarlucci@google.com>",80,21,0
"thesofproject/sof","66e8496a80e7b678197403ec27597dcab31e9fac","abonislawski","2020-09-15 14:02:58","false","clk: add LOWEST_FREQ_IDX to make clock switching more flexible

It will allow to define cpu lowest clock per platform
instead of fixed one (LPRO)

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",62,27,0
"thesofproject/sof","dbe657c506bd033218ace957f55543cb0c0612d6","abonislawski","2020-05-19 13:53:23","false","tgl: HEAP_LP_* cleanup

This will delete unnecessary heap lp defines

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",99,23,0
"thesofproject/sof","3c20133263d5588de2769c0e9f87a1266daaceb9","lyakh","2020-12-31 07:09:36","false","common: use DIV_ROUND_UP() instead of open-coding

Replace two instances of open-coded rounding-up division with
DIV_ROUND_UP() calls.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",72,31,0
"thesofproject/sof","8fa5ff579351faff0cadaff2274709e87c42ff41","lyakh","2021-08-31 13:15:23","false","ssp: only delay start for the first stream

The initialisation delay in SSP start-up sequence is only needed when
the first stream initialises the SSP. If an SSP port is used for both
playback and capture, the second stream doesn't need to delay start
up again.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",118,39,0
"thesofproject/sof","499cb7dbc1f296c116ace7cfcff359516c0cf2ce","lyakh","2021-08-04 05:56:01","false","dai: pass PRE_START and PRE_RELEASE down to DAI drivers

Some DAI drivers have to perform additional preparatory operations
before START and RELEASE triggers, pass PRE_* triggers down to
them for that purpose.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",113,38,0
"thesofproject/sof","986b16495c56ebe1215ecf50a3a56894cc511185","lyakh","2022-01-11 13:34:56","false","build: add a missing RELATIVE_FILE definition

base_module and boot_module are separate targets, they need
RELATIVE_FILE defined for them too.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",115,43,1
"thesofproject/sof","674aed94c2a9fe62604cb1370152dc390e0ba925","lyakh","2023-01-24 14:08:55","false","selector: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register selector with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","b039018d0adcfe347119094ac29f0fc12b671187","marc-hb","2021-10-05 16:20:02","false","drivers: imx: sdma: use %p to print dma_base(dma)

Use %p so the higher 32 bits are not quietly lost if dma_base ever
becomes 64 bits.

Fixes commit be69f41befae (""drivers: imx: sdma: fix warning"")

Issue found by chance in unrelated PR #4837

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",121,40,1
"thesofproject/sof","2ac64cf16b86e25d4f16c36d8fd6ec5359f503bb","marc-hb","2023-05-12 00:11:35","false","xtensa-build-zephyr.py: change rimage_options() to return tuples

Zero functional change. This will allow excluding some options.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",49,59,1
"thesofproject/sof","ef03e727dbd8e1c5fb248d7e8758b7d02aa6ba07","marc-hb","2021-07-06 03:07:39","false","smex: un-hardcode ""-O2 -g"", use CMAKE_BUILD_TYPE, default to Debug

Anyone having a performance issue can use the standard
-DCMAKE_BUILD_TYPE=Release. Crashes seem more common.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",84,37,0
"thesofproject/sof","fd497c906a41322ecbbb6f8ecb13f5fdd668729c","marc-hb","2023-10-11 14:16:37","true","Merge e330fb4ec727c3a060ad6b1fb6e8c21a4afe7357 into 5b5566f534941c842489c68eb888a05a5e5c4837",13,64,1
"thesofproject/sof","04d37beb5522bcfb160962eafbf77048fa870909","tobonex","2023-09-15 18:02:30","false","host: remove buffer_acquire from host legacy/zephyr

remove buffer ops from  host-legacy, host-zephyr

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","3f05c792c3d0cafbfac71dc3a62429548124d17a","tmleman","2022-12-15 11:25:24","false","zephyr: ipc: refactor of pg prevent

Preventing d0i3 state during IPC processing in case if a host previously
allowed for power state transitions. Transition can occur only in the
Idle thread and this lock acts as a safeguard in case of the remaining
threads to be non active (e.g. waiting for a semaphore).

The advantage of this solution is that we do not risk bypassing the
prevent. PM state lock (get and put) require that their calls be
balanced. One more put or get will result with hard to debug error. For
example we can end up with permanent prevent on power gating.

Original code introduced here: ae4e037b0

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",91,54,1
"thesofproject/sof","bae469d8cbc88b898cf38d9bbaed4d43a32d98e9","dbaluta","2020-10-26 15:47:23","false","drivers: imx: sdma: Enable channel after a BD was processed

Host platform sets HSTART_HE bit to activate the corresponding channel
and the DSP will clear the HE bit when done.

In order, for the channel to be rescheduled we need to start again the
HSTART_HE after we got an interrupt that a BD was processed.

This is done in sdma_copy using sdma_enable_channel.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",74,29,0
"thesofproject/sof","ee6449be8330d7830ce0e8913da67c1076b98b31","dbaluta","2020-01-22 09:17:20","false","platform: imx8m: Set cpu_timer in global sof context

After commit 8dcf0a7c899a3 (""timer: add cpu timer to sof global
context"") cpu timer is also stored in sof context for later use.

Initial support for i.MX8M didn't set cpu_timer field of sof global
context, so set it now.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",78,20,0
"thesofproject/sof","c03f120d642be53645befc6449a9fd61b4b92f3a","lrgirdwo","2018-09-28 15:16:02","false","sue: Add initial support for suecreek IPC.

IPC will be via SPI on Suecreek.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",37,4,0
"thesofproject/sof","97ec5bac809ab55d5659d128167b83dd9f28a153","DianaGabriela27","2019-03-06 11:09:42","false","rimage: Remove explicit comparisons to NULL in the rimage/*.c files

Comparisons to NULL are now implicit as the checkpatch.pl requires.

Signed-off-by: Diana Ungureanu <diana-gabriela.ungureanu@nxp.com>",66,9,0
"thesofproject/sof","25a3fde242003270a88abf0da552fa8a675eadfe","lrgirdwo","2021-05-19 13:51:51","false","kpb: validate data size passed in by IPC new.

Make sure IPC data fits.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",86,35,0
"thesofproject/sof","03bbec652b402359c934dbf38a5dde1196fa2350","lrgirdwo","2020-04-15 09:17:27","false","init: removed unused header

sof/drivers/interrupt.h not used so remove.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",82,22,0
"thesofproject/sof","07353fda88330eac3d48c6d6536b5ad082ff011f","plbossart","2019-08-07 21:06:45","false","kmod_scripts: handle max98090 codec

This is required for Cherrytrail/Baytrail Chromebooks.

Note that the driver still has problems but the scripts are fine.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",53,14,0
"thesofproject/sof","8d064e9ca38a8d914051a3666decfdd76edcc224","jajanusz","2019-02-12 12:45:33","false","cmake: do not use stdin for ld script

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",59,8,0
"thesofproject/sof","dc74c6cb343ffedc0fd46ff83626dc9034f70a9b","akloniex","2018-09-28 10:58:36","false","debugability: optimization: change declaration of buffer allocation on stack

Due to compiler inability to determine compile-time constant value
of a variable, that was used to determine buffer array size,
compiler dynamically allocated memory on stack, which is far from optimal.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",37,4,0
"thesofproject/sof","f21b6bd064abe66f015526d18431b6f761f95a02","akloniex","2018-10-04 12:39:36","false","logging: Move trace class definitions to uapi/logging.h

Move definitions into header that would be shared between SOF and SOFT.
Paste SOF_ABI_VERSION into FW ready message.
Also remove unused code from uapi/logging.h.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",34,4,0
"thesofproject/sof","dc409cdf3adb21420e242b52f72831ee2eddc78b","ujfalusi","2023-07-25 09:35:24","false","lib-manager: Use kcps_adjust around the library loading

Make sure that we have the needed core frequency for the library loading.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",34,62,1
"thesofproject/sof","262c2a689356a6d3a2bfd49dbb245c0ef9953cac","btian1","2023-03-31 03:41:08","false","copier: remove endpoint DAI device creation for single endpoint DAIs

Remove the creation or the endpoint DAI device when a copier have only a
single endpoint. Replace the usage of the endpoint device with the
copier device and remove the endpoint buffer. Amend the copier_params()
to pass the appropriate params for the DMA buffer and set the correct
processing function in the case where the valid bits and the container
size do not match.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",57,58,1
"thesofproject/sof","c06669e1e5ebacfefc2cf6b0486048101930db10","brentlu","2022-12-28 01:14:03","false","Audio: fix compile error for COMP_CROSSOVER

Linker fails to link iir_df2t() function when COMP_CROSSOVER is
enabled. Need to select MATH_IIR_DF2T in Kconfig to build the
iir_df2t() function as well.

Signed-off-by: Brent Lu <brent.lu@intel.com>",92,55,1
"thesofproject/sof","caf3e19a28b3c4830d13404f1d3b75d7abc0fb46","keyonjie","2021-02-04 05:08:54","false","ll_schedule: _tasks_run() refining

At interrupt handling & tasks_run(): run each pending task of the core,
e.g. for period tasks:
previously: update task->start based on last_tick(asynchronized), if the
last_tick was delayed, the delay will be accumulated to the subsequent
periods!
new: update task->start based on last task->start, to try to make the
task's running follow the pipeline requirement as more as possible.

Add lock/unlock for domain accessing and updating while keep task can
run simultaneously on multiple cores.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",70,32,0
"thesofproject/sof","ac1a09afdbf4d93231d25a74863130cb5441abd7","marc-hb","2022-01-13 19:02:10","false","xtensa-build-zephyr: de-dup. first vs incremental west invocation

Passing spurious --board and source directory arguments to an already
build directory does not help but it does not hurt either and it
simplifies the code. It also provides a more consistent west command in
the set -x ""logs"", one that can be re-used in any circumstance.

The only restriction is to make sure CMAKE_ARGS is empty on all but the
first invocation but that's not new and unchanged here.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,43,1
"thesofproject/sof","46ddb38159668f243498eaff9b76de96fb2375d4","marc-hb","2021-07-06 03:20:24","false","smex: use strerror()

Before:

  error: unable to open sof.elf for reading: 2

After:

  error: unable to open sof.elf for reading: No such file or directory

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",84,37,0
"thesofproject/sof","96a474897a02b2af93e42894773e8e35c7632e9a","ymdatta","2020-08-15 11:40:50","false","tools: testbench: check for array size mismatch for components

This patch uses the functionality added by the c9e090ccf37 commit
to check for array size mismatch in various components.

Not doing so may result in cases, where we try to write into the
space not allocated leading to segmentation fault.

Signed-off-by: Mohana Datta Yelugoti <ymdatta.work@gmail.com>",75,26,0
"thesofproject/sof","dcf34164459bd72ea4f22ce55712f11816854db4","lgirdwood","2022-01-21 12:01:42","false","Revert ""codec_adapter: fix panic during reset""

This reverts commit fc3e4b32b956821f18c90dc10d9cc67c123648fc.",114,44,1
"thesofproject/sof","30f8f76288712f67169ad5a472f888566815c596","lgirdwood","2018-09-21 07:24:57","true","Merge pull request #400 from tlauda/topic/irq_manual_unmask

interrupt: add possibility for manual irq unmasking",35,4,0
"thesofproject/sof","afbb2a6f53192234d2d3de0ba2e229490d516e3b","mrajwa","2019-06-18 14:06:22","false","memcpy: fix bug in memcpy_s for cmocka

memcpy_s has wrong check condition for
overlapping sections. The copy from adjacent memory
bloks will result in dsp panic while it should be
allowed. This patch fixes the issue for cmocka
tests.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",46,13,0
"thesofproject/sof","4893e7018f5792367e159204f4509c4e5d7fd8f7","sathya-nujella","2020-09-16 02:19:08","false","topology: Update number of feeback reference channel on max98373

This patch modifies the number of reference feedback channels from the
Demux component to the host capture stream in sof-tgl-max98373-rt5682.

Signed-off-by: Dharageswari R <dharageswari.r@intel.com>",63,27,0
"thesofproject/sof","e94452934f0c7aece4981c7d7657a5bc04d2c00c","dcpleung","2019-09-26 20:22:02","false","Do not include version.h

The #define in version.h will be passed as command line
argument instead, as the tool has to build on its own.

Signed-off-by: Daniel Leung <danielcp@gmail.com>",66,16,0
"thesofproject/sof","8324cf488f8624c152b88b9e1b614200b867ec1e","ktrzcinx","2020-01-17 10:06:47","false","dma: Mark source buffer as const in processing functions

Const keyword is added to explicitly indicate that nothing in given
source buffer can be changed in processing functions - read pointers also.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",79,19,0
"thesofproject/sof","9bacb24725bc3bc8aba53816da407d7bdf8ba409","keyonjie","2019-07-12 06:46:00","false","alloc: allocate real continuous blocks in alloc_cont_blocks()

When a block is used, we need reset the searching, to get the real
continuous blocks as required, here fix it.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",43,13,0
"thesofproject/sof","0a1029c2a2966438ffa2a5fa2d14d202e5a74ba4","cujomalainey","2021-05-03 22:34:37","false","actions: consolidate yamlint

Lets not trust that everyone remembers to lint themselves or that they
fetch the repo in order to execute their job.

Also rename workflow file to be a bit more generic

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",81,35,0
"thesofproject/sof","338e87f7e1fad0d85bacc9a19e382be85da752a8","jxstelter","2023-10-24 11:29:18","false","mtl: Fix KD topology tests failure

KD topology tests fail on MTL due to insufficient size of
heap memory. During creation of KD topologies with
4ch audio format, FW fails on memory allocation.
The patch increases HEAPMEM size.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",8,65,1
"thesofproject/sof","cd0c1f99c293c80d7e45e681699b2ff2973b317b","rfredzim","2022-03-15 08:27:02","false","ipc4: fix the compound ipc wait timeout

The number of retries is too small to successfully handle some
compound IPC messages (in particular setting pipeline state to running
in case of multi-core distributed pipeline).

Signed-off-by: Rafal Redzimski <rafal.f.redzimski@intel.com>",107,45,1
"thesofproject/sof","9d7aea477bcdb6f5a5fc8fe653a5e99e81025e35","jajanusz","2019-07-23 06:53:24","false","testbench: add missing trace classes

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",47,14,0
"thesofproject/sof","8b2359b2109febea005e0780ba6cb6ee43485663","finikorg","2020-04-21 16:59:08","false","zephyr: Update README to add instruction for debug loggin on qmeu

Mention using LOG_BACKEND_XTENSA_SIM backend for console.

Signed-off-by: Andrei Emeltchenko <andrei.emeltchenko@intel.com>",84,23,0
"thesofproject/sof","1bca97ad4cf4e8eb45bd4ce6ca3ac87b499914ee","balakishorepati","2022-09-15 05:43:41","false","drivers:amd: Fix aclk issue in standalone dmic usecase

Change aclk to max or minimum during playback,capture
usecases start and stop based on dmic status.

Signed-off-by: Balakishorepati <balaKishore.pati@amd.com>",103,51,1
"thesofproject/sof","b66a6d5c103708223340ea3c643752fc8c8cab03","bkokoszx","2019-07-10 07:24:39","false","dai: use periods from sof_ipc_comp_config in dai_params()

In dai_playback_params() and dai_capture_params()
functions we do not have to take period values
from adjacent component. We can retrieve it from
dai component sof_ipc_comp_config struct.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",42,13,0
"thesofproject/sof","3fdf92c37ba85c4abe625f156a35bd024f1f1664","kv2019i","2022-04-01 13:46:42","false","mixer: remove unused code from mixer_trigger_common()

Function returns ""ret"" in any case, so the additional
check on direction is not needed.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",110,46,1
"thesofproject/sof","b51e67f263b1f877869087259e5bf7bdeb328c86","ktrzcinx","2020-02-25 10:39:59","false","ext_manifest: Include probe support information

This is information is known during compilation time,
so it should be passed by extended manifest.
Reuse sof_ipc_probe_support struct to make parsing function
from host side as much universal as possible.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",77,21,0
"thesofproject/sof","2821e8cc61e7473e259448fc804b0bf988d2a11e","tlauda","2020-01-20 12:15:06","false","ipc: component: add core id to sof_ipc_comp

Adds core id to sof_ipc_comp. The intention of this change
is to incorporate full SMP flow in DSP for IPC handling.
Right now all components and buffers are created on master core
and cache is synchronized between cores, when pipeline is supposed
to run on slave core. With this change we can detect on which core
particular component is supposed to be running and let that core
do the work of handling IPC.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",80,20,0
"thesofproject/sof","bc246b5da8111d0f715ae71fba53ba53e656cba2","tlauda","2019-12-18 09:42:16","false","alloc: remove zone argument from balloc functions

Removes zone argument from balloc related functions.
They always use RZONE_BUFFER, so passing something else
is very misleading, especially it changes nothing.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",73,18,0
"thesofproject/sof","b4397a6dc526878edb36e8fd0374c03416580acb","tlauda","2018-08-28 12:03:03","false","pipeline: trigger ppl on different core

Implements function, which allows to trigger pipeline
on different core than master. Core id is chosen
via pipeline IPC message.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",21,3,0
"thesofproject/sof","4100fa0ac3578da532f64d26a5ce60bd379e6de8","tlauda","2019-08-02 09:11:58","false","schedule: make schedule functions return task state

Instead of returning next period, schedule functions should return
state of the executed task. Period of the tasks is set during
initialization and doesn't change dynamically, so it doesn't make
sense to return it. With the new added SOF_TASK_STATE_RESCHEDULE
we can easily decide if the task is completed or maybe need to
be run once again.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,14,0
"thesofproject/sof","8ef4d51e686106e9d8090cb8c428f16651b5ab3a","bardliao","2023-05-24 10:07:30","false","topology2: sdw-jack-generic: add SDW_JACK_CAPTURE_CH macro

Adding SDW_JACK_CAPTURE_CH macro to specify sdw jack channels.
The default value is 2.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",56,60,1
"thesofproject/sof","3eeda96c0c2b3090cb2af1380b671a5e1ea9875b","singalsu","2021-10-22 09:08:09","false","Test: Add cmocka test case for IIR equalizer

This patch adds for the IIR equalized component a test with
comparison 100 ms of Octave generated output to output of the
component. The test signal is a full scale chirp signal. The
IIR response is both amplifying and attenuating to trigger as
much as possible issues with internal overflows.

All test data was generated by Octave script
cmocka_data_eq_iir.m. Re-run of script updates the used header
files the in cmocka tests directory.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",124,41,1
"thesofproject/sof","5683382872997abebb5a4366bd5d8e6ec68debad","singalsu","2022-04-21 13:53:04","false","Tools: Tune: SRC: Avoid flood of plot windows with large SRC matrix

This patch forces open of every plot to the same picture window.
Earlier version could open hundreds of windows and freeze the
computer.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",114,47,1
"thesofproject/sof","5856042024ea2927ce9f1fac15bb0e2a1bf496be","singalsu","2023-05-15 15:42:05","false","Audio: DRC: Convert component to module adapter API

This patch replaces legacy component API with new module adapter
API. There are no changes to functionality.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",50,59,1
"thesofproject/sof","4a8e8f9467c65fef4a9ddb0c14635fc92002ff54","pblaszko","2023-03-01 12:47:27","false","volume: add attenuation adjustment for peakmeter

Add peak-meter attenuation adjustment to PeakVol processing functions.

Note: attentuation supported only for 32 bit container audio formats.

Signed-off-by: Przemyslaw Blaszkowski <przemyslaw.blaszkowski@intel.com>",61,57,1
"thesofproject/sof","2e7329685b9e31a99fe9e154c2e86464250afd1b","softwarecki","2022-07-13 09:24:40","false","ipc_get_ppl_comp: Prefer returning a dai component

Before the introduced optimization in
commit <95f6f88be705> ipc: Simplication of the ipc_get_ppl_comp function
this function first walks a list of components looking for dai,
then it again walks the list looking for a component which
connecting two pipelines. Optimization changed the behavior,
and the first matching dai or connector was returned. This
patch reverts to the previous behavior. Pipelines connector
is only returned if no dai is found.

Fixes #6003

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",110,49,1
"thesofproject/sof","59f5fb7e5ff815d80163a9dab6d37bd72b55872b","abonislawski","2019-03-14 12:47:42","false","Trace: change trace_event to the correct one for tracev_event_atomic_with_ids

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",68,9,0
"thesofproject/sof","b9c075a9adfb2be4e39ad70f8c168f8a009b2a85","ranj063","2022-06-15 22:18:18","false","eq_iir: Use the new module interface

Use the module interface instead of the comp drv interface for the
EQ IIR component.

In processing functions the dev structure is changed to the new mod
structure.

In filter initialize functions the mod structure provides the
configuration.

The eq_iir_init() function is converted to follow the module init
conventions.

The params() and cmd() functions are removed since they are done
in module adapter. The set/get config functions are added to handle
the binary blob set/get.

The copy() function is changed to module adapter eq_iir_process()
form. Data is processed from input_buffers[0] to output_buffers[0].

The eq_iir_prepare() is changed to set the frame and byte alignment
for module adapter. The sink streams size check is removed since
it is done in module adapter.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",120,48,1
"thesofproject/sof","a60df96c7dcd1e6f9fe47d8b13c72c2389867ca3","ranj063","2022-01-20 14:34:25","false","codec_adapter: cadence: Do not free codec data during reset

During reset, it is only important to free the memory associated with
the runtime params, so that they can be reallocated during prepare. So
move the allocation of the cadence_codec_data to use rballoc, so that
module_free_all_memory() doesn't end up freeing it. It will be freed
during cadence_free() when the device is freed.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",113,44,1
"thesofproject/sof","94e32ebf3c0016211ee43f27f9d5caf435c683fb","ranj063","2023-05-06 16:28:03","false","copier: refactor copier_params()

Multiple endpoints are only applicable for DAI copiers. So move the
params update for this case into the SOF_COMP_DAI case.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",53,59,1
"thesofproject/sof","fb0441760d8706f375ad93a381b8eb0895aa3ff7","ranj063","2023-05-02 18:52:19","false","dai: Modify the signature of ipc_dai_data_config()

To pass both the dai_data and dev pointer and make it usable for both
the DAI device and the copier device.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,59,1
"thesofproject/sof","a3159ead0c2c956106917b3ac4f310f4c152f84c","dnikodem","2022-09-22 08:57:14","false","init: update abi version in memory windows

Driver expects correct IPC4 layout version in memory windows.

Signed-off-by: Damian Nikodem <damian.nikodem@intel.com>",97,52,1
"thesofproject/sof","954149cdfb5b9c621cac600521359e026cf7987a","kuanhsuncheng","2021-09-09 06:32:24","false","drivers: mtk: remove superfluous variable for mt8195

For GCC compile error,
error: variable 'ret' set but not use

Signed-off-by: YC Hung <yc.hung@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",118,39,0
"thesofproject/sof","2d02dd0ed5c775ab4a0551b25e8a91d8fc8a310c","RanderWang","2023-07-10 06:42:23","false","cavs: remove CONFIG_CAVS_LPRO_ONLY and clean up the code

CONFIG_CAVS_LPRO_ONLY is only for CoffeeLake and is not fit for current IPC4
main branch, so remove it to make code clean.

Signed-off-by: Rander Wang <rander.wang@intel.com>",29,61,1
"thesofproject/sof","0db7e4877fc4c64bf87b7654d7d2c29348c493f6","RanderWang","2018-08-20 07:19:19","false","apl: check host status before sending ipc msg in fw

The busy bit of DIPCI register is cleared when host is ready.
So fw could send ipc msgs to host when the value of busy bit
is zero

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>
Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",18,3,0
"thesofproject/sof","884322bfb9102079708780a65c104a6e59651509","libinyang","2022-05-24 13:08:54","false","topology2: add wov support

Add the wov module support. The keyword of the wov is the sound
of clap.

Signed-off-by: Libin Yang <libin.yang@intel.com>",116,48,1
"thesofproject/sof","3e36f6cf1ad0e9b67a17d8c2b39371759e59c965","fuyuntsuo","2021-05-12 09:41:27","false","config: override: chrome: Added tigerlake_chrome_igonr.config.

Added igonr override config for tigerlake_chrome.

Signed-off-by: fy.tsuo <fy.tsuo@intelli-go.com>",85,35,0
"thesofproject/sof","45ca3d430d9c7ae8b552c2af60874bd1cbbdf294","aiChaoSONG","2023-08-17 04:23:59","false","include: ipc4: module: fix component ID macros

The existing component ID is composed with
'module_id << 16 | instance_id', it doesn't
comply to the initial instance IPC structure:

struct {
    uint32_t module_id   : 16;
    uint32_t instance_id : 8;
    ...
};

When the ID is logged through mtrace, it is
hard to use the ID to find the related linux
kernel message.

This patch fixes component ID composition macros,
thus helps to eliminate component ID inconsistency
between firmware and linux kernel.

Link: https://github.com/thesofproject/sof/issues/8051

Signed-off-by: Chao Song <chao.song@linux.intel.com>",25,63,1
"thesofproject/sof","f0e5e484a6e7fe0162d87203643be0f28406aa74","mrajwa","2019-07-29 09:06:09","false","kconfig: enable LPSRAM by default for CNL

This patch enables LPSRAM memory by default on
all APL platforms.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,14,0
"thesofproject/sof","2051f0f412abe55340086a07e84d78658c4e65bd","mrajwa","2019-12-09 13:00:40","false","kpb: refactor kpb->hb_buffer_size

This patch changes name of the variable to be more
meaningful

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",73,18,0
"thesofproject/sof","7b5365f776c73abff76390bec9020dce1b552f24","mrajwa","2020-09-18 11:21:13","false","dai: add warning when we skip .copy

This patch logs warning message when we skip dai .copy() method.
Also the condition has been changed, there is no need to compare
positions - if there is nothing to copy we should terminate this
procedure regardless of positions.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",66,28,0
"thesofproject/sof","6556933e83e315acc68fd8903d7602bddbcd1674","iuliana-prodan","2021-07-26 14:28:10","false","xtensa-build-zephyr: add imx8 platform

Add imx8 platform for local testing.

TODO: Update xtensa-build-zephyr.sh when Zephyr repo
is updated with imx8 support.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",100,38,0
"thesofproject/sof","73f6171bb3c8c5b1d0963883014508022445b997","cujomalainey","2022-12-12 21:53:17","false","audio: move google components to a subfolder

just some minor house cleaning

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",103,54,1
"thesofproject/sof","b65fe8e02163a98c5462f44d7a7cbbd0ed8f0843","cujomalainey","2018-11-16 02:10:22","false","Fix sof-apl-eq-dmic comments

Fix copy paste comment errors

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",39,5,0
"thesofproject/sof","deed9a8808eb2120754e082a7d5368f28181a8ff","cujomalainey","2023-07-21 00:27:16","false","scripts: fuzz: add support for build and overlays

Add support to specify an overlay file to use with the fuzz script and
another flag to build without fuzzing

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",32,62,1
"thesofproject/sof","42e9bd979df72f6220995cc52e7011960d72b4bb","cujomalainey","2018-11-16 02:15:46","false","Fix sof-apl-eq-pcm512x comments

Fix copy paste errors

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",39,5,0
"thesofproject/sof","770215762e313dbd60f0c234175a5b67f1e80be2","ktrzcinx","2020-06-22 15:01:23","false","smart_amp: Properly handle buffer data invalidation and writeback

It's important to keep data synchronised, otherwise cashed values
may by used instead corred values.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",72,25,0
"thesofproject/sof","d486a9ff989610697254b6338214d5e987b005fa","nashif","2021-08-03 22:40:58","false","kconfig: allow SOF Kconfig to be included in other projects

When the SOF Kconfig is included in other projects, the main menu should
not be that of SOF, rather it should be of the project including SOF.

Signed-off-by: Anas Nashif <anas.nashif@intel.com>",112,38,0
"thesofproject/sof","3342311c8e114a3290608d5fac2b999d3f08010c","kuanhsuncheng","2021-08-27 08:45:46","false","topology1: add afe config

Add afe config for mt8195

Signed-off-by: YC Hung <yc.hung@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",119,39,0
"thesofproject/sof","6db472f429386a61836e52a0ba71bebb32048d61","iganakov","2022-11-28 17:58:55","false","west.yml: update rimage to 65f345a52

Update rimage to
65f345a52e06a084192124364c563d8133d834c2v

65f345a rimage: add src support
fe5b959 rimage: correct module type
f51ff46 rimage: remove incorrect module order check
6623073 config: mtl: add kpb module
85a2d1e config: mtl: add kd module

Signed-off-by: Ievgen Ganakov <ievgen.ganakov@intel.com>",100,54,1
"thesofproject/sof","5311f61037483dd6df752d35e427eb1b4d508703","marc-hb","2022-11-22 18:18:42","false","zephyr/cmake: fix target_compile_options() comments. No code change

Add reference to -fno-inline-functions issue
https://github.com/thesofproject/sof/issues/5212

Add examples of compilation failures without gnu99.

Fixes commit e430629a1e9e (""xt-clang: Do not use -std=gnu99 for C++"")
that separated the comment from its code.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",94,54,1
"thesofproject/sof","7aa1b28070162317a600839acd3e286f06061bdd","marc-hb","2021-12-08 08:27:16","false","sof_ri_info: assert Python version is 3.6 or above.

As reported by Bartosz, Python 3.5.2 fails with the relatively cryptic
TypeError: invalid file: PosixPath('sof-tgl.ri'). Make this failure much
less cryptic.

As of December 2021 Python 3.5 is completely out of support and 3.6 will
be soon https://www.python.org/downloads/

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",123,42,1
"thesofproject/sof","8fee9e13062d9e0586edd93505492966dd8f1f7c","marc-hb","2022-08-31 13:00:39","false","xtensa-build-all.sh: remove byt..jsl platforms from '-a'

These platforms are not supported in the main branch anymore.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",115,51,1
"thesofproject/sof","2a9473a17be4764b55b7392a6104561f6f2f4da8","marc-hb","2023-09-23 08:54:09","false","app/prj.conf: disable PICOLIBC with CONFIG_MINIMAL_LIBC=y

Starting from Zephyr commit f0daf904bb02, CONFIG_PICOLIBC is on by
default.

PICOLIBC does not seem compatible with sparse yet:
https://github.com/zephyrproject-rtos/zephyr/issues/63003

Even if it were compatible with sparse, it seems like a pretty big
change that we should not immediately and blindly accept.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",22,64,1
"thesofproject/sof","cdee91d01e0b062f46bf70cd02bae76e967ad81a","marc-hb","2021-01-28 02:24:55","false",".github: rename workflow from ""Github Action CI"" to ""Github Actions""

The singular ""Action"" makes it look like our workflow is an action. The
plural ""Github Actions"" is at least the name of the product; so it's
vague enough.

A technically acccurate name would be ""Main workflow"" but we have only
one so it would be useless plus we're next to ""Jenkins"" and others and
want to stay consistent with them.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",66,32,0
"thesofproject/sof","eb712a40db3dae1be73acda772b2e62dd73a92a1","lyakh","2022-10-25 13:19:22","false","volume: don't modify read-only mailbox data

Fix a case of dropping the `const` modifier and overwriting read-only
data in the mailbox in volume_set_config().

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",94,53,1
"thesofproject/sof","d8a19a4d2062cde129f2a18e414b07ce9ab31c73","plbossart","2021-09-20 19:25:48","false","Revert ""trace: Kconfig: disable filtering by default""

This reverts commit 9fadef789e80b586c64cb963dad24f909d579afd.

After multiple trials on a CometLake SoundWire device, this revert to
bring the trace back to what it was seems to be the only solution, the
suggested PR https://github.com/thesofproject/linux/pull/3166 does not
help on this SoundWire device.

We had similar issues with SD offset timeouts and a similar revert
with https://github.com/thesofproject/sof/pull/4578 at the end of
July, there's something that we are missing on what the trace does and
how it impacts the DMA handling.

BugLink: https://github.com/thesofproject/sof/issues/4779
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",118,40,0
"thesofproject/sof","0b0733749c55b39c9e8699538b77c65f0c322397","lrgirdwo","2021-04-03 19:26:16","false","ipc: cavs: dont send IPC ABI reply specific en IPC driver

The IPC handler does this for us already on any IPC failure.
Redundant code so remove it.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",79,34,0
"thesofproject/sof","24f30e1517c1951c4b65f204304b47371bb95eba","lrgirdwo","2018-11-02 16:38:42","false","uapi: abi: Use semantic ABI versioning.

Use semantic ABI versioning with major, minor and patch versioning
according to https://semver.org/

Also make sure micro version is included in ABI version.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",30,5,0
"thesofproject/sof","bcff695554b8d2a7f20ce1d77c96ea94c548c9d4","lrgirdwo","2021-03-29 11:06:03","false","pipeline: move mailbox metadata lookup table from header.

The pipeline position metadata lookup table is only used by the graph
code so move it there.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",80,34,0
"thesofproject/sof","606cd44bc893151afc271de8e7059b8e3a4c6023","yaochunhung","2022-01-03 04:48:23","false","topology1: mt8195: support 1ms pipeline playback period

1. Default support 1ms period playback pipeline to update host position
more precisely.
2. Revise pcm node number description

Signed-off-by: YC Hung <yc.hung@mediatek.com>",115,43,1
"thesofproject/sof","a5dcd86251be6c741a0b3e44df6800cac795b96e","dbaluta","2023-06-20 14:47:05","false",".github: Use mimx93_a55_evk board

We no longer use synthetic mimx93_a55_evk_sof board but
rather we customize already existing proper mimx93_a55_evk board.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",42,61,1
"thesofproject/sof","55e4c4097e2891d2fac20c220394f69ee9cc5156","dbaluta","2019-01-13 12:32:29","false","ipc: Rename *-ipc.c to just ipc.c

After commit 77dccad986 (""ipc: moving src/ipc/*-ipc.c files to drivers
dir"") there is no need to use byt or hsw prefix because the file is
already in the platform specific directory.

Signed-off-by: Daniel Baluta <daniel.baluta@gmail.com>",55,7,0
"thesofproject/sof","04d14eeaca954e83ab2c8a73da439cca9bc234c8","dbaluta","2020-10-26 14:00:15","false","drivers: imx: sdma: Cleanup sdma_set_event

Do not touch overrides values in sdma_set_event as they are properly
set at config time.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",74,29,0
"thesofproject/sof","d4c0a52f1543118738884fa3768c4a70860f4de3","dbaluta","2020-02-26 13:58:33","false","platform: dai: Use index 3 for SAI3

This is no real requirement from SOF to match the index of DAI
with the ""real"" index in hardware.

Anyhow, it looks like topology concatenates the index to form names
so would be weird to see e.g DAICONFIG.SAI0_data for SAI3.

In order to avoid this confusion we use index 3 for SAI3.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",76,21,0
"thesofproject/sof","d5f8cb9eab49a22d6fe17fc8f12c932d36d75022","joechengxperi","2022-06-21 08:32:32","false","module_adapter:dts:return zero when param is invalid

Avoid DTS loads fail if param is invalid.

Signed-off-by: Joe.Cheng <joe.cheng@xperi.com>",111,49,1
"thesofproject/sof","cbba56a121f4375faea52a2c3970675e8f23c4f7","btian1","2023-05-25 09:11:58","false","copier: move free multiple endpoint buffer to dai

Only dai have multiendpoint case, so move it to dai component.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",52,60,1
"thesofproject/sof","2de0b86ac32b9b5a7cc2c467b87de78fe65badad","fredoh9","2023-03-30 00:45:52","false","topology2: cavs-nocodec: set dmic 4 channels for MTL

MTL nocodec devices have been configured with DMIC 4 channels.
The topology should be aligned with it.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",58,58,1
"thesofproject/sof","890398a6455ac54336be794063db7aca9e0956a4","fredoh9","2020-03-13 05:44:40","false","topology: add equalizer to cml rt1011 rt5682 topology

Add EQIIR and EQFIR to first playback pipeline. This help to expand more
equalizer testing across platforms.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",83,21,0
"thesofproject/sof","f66a81678b8ef38ea210f388ad0c6748418b7ad0","jsarha","2022-06-10 13:46:15","false","probe: revert back to use of dma_copy_to_host_nowait()

It appears that the probes do not work too well with the BLOCKING
flag, so let's go back to the resurrected the dma_copy_to_host_nowait()-
function.

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",115,48,1
"thesofproject/sof","479c7942abb4d759fe20d83fe02e13aac7bc7960","pjdobrowolski","2023-04-14 12:13:23","false","iadk_modules refactor

Both native sof loadable modules and IADK are using same:
 - loading flow
 - registering
 - module API
That is why iadk prefix is removed from common parts.

Signed-off-by: Dobrowolski, PawelX <pawelx.dobrowolski@intel.com>",50,58,1
"thesofproject/sof","5104f5e02df5a720f2896d8403a880cde286f657","keyonjie","2021-02-04 02:44:12","false","timer_domain: refine the timer_domain_set() logic

Do timer_domain refining as below:

Use unified LL_TIMER_SET_OVERHEAD_TICKS=1000 which denote the max
overhead that the timer_domain_set() will take, and remove the
definition from each platforms.

Don't add any overhead if no needed(e.g. if the start > current +
overhead). This will help to schedule the task ASAP, and make the
catching up (of the previous delay) possible.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",70,32,0
"thesofproject/sof","d02f12faf65416be1da6e0ac585bdd63bc9f8bdd","keyonjie","2021-05-27 10:07:31","false","memory: add cache/uncache macros for all platforms

For Intel byt/hsw, NXP imx8/imx8m, add missing cache/uncache related
macros.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",84,36,0
"thesofproject/sof","0da78d723653b4fcf1c5a4276722db6b6c50b683","keyonjie","2019-03-14 14:34:17","false","topology: refine scheduling period and add time domain for pipelines

Rename 'deadline' to 'period' to indicate pipeline scheduling period,
and add time domain to indicate the pipeline scheduling domain (e.g. DMA
interrupt, timer interrupt).

Please be noticed that this might introduce an abi change so consequent
abi changes in both FW and driver side are needed.

Haven't set the flag in topology/sof/sof-xxx.m4 yet, that means it will
use io/interrupt scheduling for those topologies/pipelines at the
moment, if wanna to change them, please change them specific there.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>
Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",69,9,0
"thesofproject/sof","8434f81d941d1df08528e1fc9c106b197b949db2","keyonjie","2021-10-12 06:06:33","false","topology1: sof-adl-nocodec: change to support multi-core

Add multi-core coverage for adl-nocodec platforms, the initial DSP core
assignment as below:

DMIC48k: Core 1
SSP0: Core 2
SSP1: Core 3
DMIC16k, SSP2: Core0

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",123,40,1
"thesofproject/sof","cbce6fef381f8fa42c48fa94dcfd154e372fd32b","lrgirdwo","2020-05-03 09:10:08","false","ipc: handler: Message trace data is hex not decimal.

Make sure we see hex message in the log.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",94,23,0
"thesofproject/sof","ab19407e093fe084af63dd5be70a1ae5c57ed188","lrgirdwo","2018-12-13 21:24:32","false","alloc: Add debug option to debug heap allocations

Add debug to show heap allocation failures and display remaining heap
total free/used alongside free/used blocks of each size.

The heap status is also dumped at the end of of pipeline load and platform
boot if option is enabled.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",46,6,0
"thesofproject/sof","d9aed376d59b8b0f065c0d9818fedb703395d365","dbaluta","2022-11-10 09:33:51","false","zephyr: rtos: Add __vec_memcpy / __vec_memset

libc used by Zephyr does not provide implementation for
__vec_memcpy / __vec_memset so add them here.

Fixes c90055f2f51e (""header: rtos: use rtos specific version of string.h"")
Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",95,53,1
"thesofproject/sof","d38d5892f6d623f49b7f66c065b8a88b88cce00f","johnylin76","2020-07-24 05:59:57","false","tools: testbench: Support multiple output files

In order to run multi-output component playback by testbench, this patch
supports multiple output file mode on running testbench. Argument ""-o"" is
modified to accept specifying up to 4 filenames delimited by comma,
e.g. ""-o output1,output2,...""

Moreover, debug messages in tplg_parser/tplg_parser.c is refined for
demonstrating multiple pipelines better.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",77,26,0
"thesofproject/sof","365b132e1470f6ec4af24c90ae125b69bd1fac85","jajanusz","2019-01-29 14:00:19","false","github: fix codeowners glob for @jajanusz

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",57,8,0
"thesofproject/sof","f587974dde6ddaf9f01ecb8a63bfda6c72d28a37","btian1","2023-02-15 07:27:48","false","host-zephyr: Expose common functions for host DMA parameters

Create and expose a couple of functions for host DMA parameters
along with struct host_data,these functions will be shared by both
host and copier component.
This is in preparation to remove the creation of host component and
endpoint buffer in create_host().

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",56,56,1
"thesofproject/sof","405b6034d3f3e345e68e6b90bf8435efb8bf0a07","ktrzcinx","2019-11-07 16:28:17","false","kconfig: mixer: selective build by CONFIG_FORMAT

Include in footprint only support for selected
data formats. It may make footprint lighter.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",53,17,0
"thesofproject/sof","0a597d57a795b438977c357dc0a7d564db1b25be","RDharageswari","2020-08-13 01:19:04","false","topology: Allow set parameters at runtime in smart_amplifier component

Kcontrol interface is needed to set the smart_amplifier algorithm
parameters at runtime for tuning purpose. This patch allows the
user to set parameters using byte kcontrol.

Signed-off-by: Dharageswari R <dharageswari.r@intel.com>",73,26,0
"thesofproject/sof","85a4c56d92c593019bd9f321e917610e95089425","mengdonglin","2022-06-02 06:06:32","false","xtensa-build-zephyr.py: add option to specify key type subdir for output

Add argument option --key-type-subdir <key_type> to choose the output
subdirectory name based on the type of rimage signing key.

User can choose subdirectory name from 'community','dbgkey' and 'none'.
The default one is 'community', the type of default rimage signing key.
We can extend the list later.

When the key type is 'community' or 'dbgkey', the layout of SOF output
directory will be like:
build-sof-staging
├── sof
│   ├── sof-platform1.ldc
│   ├── sof-platform2.ldc
│   ├── ...
│   └── <key_type>
│       ├── sof-platform1.ri
│       ├── sof-platform2.ri
│       └── ...
└── tools
    ├── sof-logger
    └── cavstool.py

When the key type is 'none', there will be no key type subdirectory:
build-sof-staging
├── sof
│   ├── sof-platform1.ldc
│   ├── sof-platform1.ri
│   ├── sof-platform2.ldc
│   ├── sof-platform2.ri
│   └── ...
└── tools
    ├── sof-logger
    └── cavstool.py

Signed-off-by: mengdonglin <mengdong.lin@intel.com>",115,48,1
"thesofproject/sof","be065e55a87b5a7b4a731856b4e7d6419de7f60e","kv2019i","2021-04-15 15:37:48","false","topology: ssp: fix a bug in passing SSP_MULTI_CONFIG_DATA args

The m4 ifelse parameters using defn() are not working as expected.
If more than 3 parameters are passed to SSP_MULTI_CONFIG_DATA(),
the values are not correctly passed.

Fix this by removing defn() and correctly quoting the whole
ifelse section.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",80,34,0
"thesofproject/sof","0e75d84b4982b5e73a5d8e31bb2bff030c3697ab","kv2019i","2023-06-12 07:03:19","false","rimage: align west.yml and rimage submodule

The rimage submodule was accidentally changed to a difference
version. Change back to the version in west.yml.

Fixes: 7511a1da15336 (""kpb: Don't assert on memcpy overruns"")
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",48,60,1
"thesofproject/sof","b81f1309e843ece412fb5c8852962af2cf807a90","kv2019i","2023-08-23 13:12:35","false","west.yml: update Zephyr to ef6486170786

Contains 2211 commits, including following directly affecting
SOF targets:

ab0ed577111b mm: intel_adsp_tlb: Handle address space conversion warnings
823e6b70d240 arch: xtensa: Implement arch_float_enable&disable
be779f2a6195 intel_adsp: hda: fix usage of FIFORDY bit
498f294b2720 west: update sof ref in manifest
42ca64d60cd2 tests: dma_sg: intel_adsp_ace15 specific config
0e373019d65e dma: intel_adsp_gpdma: Unmask interrupt on ACE
6e66efa08871 soc: intel_adsp_ace15: Include stdint.h
250748bfe671 intel_adsp: Add option about switch off hpsram
b4293ec026c4 dts: xtensa: nxp: add nodes for IPC
1295283a8a72 soc: xtensa: nxp: add resource_table section in linker script
e6d89268572d xtensa: set no optimization for arch_cpu_idle() with xt-clang
a458d0443a91 xtensa: allow arch-specific arch_spin_relax() with more NOPs
f60306193844 soc: xtensa: intel_adsp: cavs: fix PM hooks guards
385ad46a39ca boards/xtensa: Skip cleaning intermediate binaries up
1c0c2a095b48 drivers: intel_adsp_gpdma: Fix release ownership
e55fb88bcbe7 soc: intel_adsp/ace: update clock rate
35e8e6fa03fa soc/xtensa/nxp_adsp/CMakeLists.txt: use new WEST_SIGN_OPTS variable
c35d97534fd1 include: util_internal: add Z_SPARSE_LIST_{ODD|EVEN}_NUMBERS
25c6553edde5 soc: intel_adsp/ace: use functions to do CPU power control
3764814831a7 intel_adsp: boot: d3: hp sram reinit

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",26,63,1
"thesofproject/sof","a209cbd31f9a1a85c21568d12566c4220d573c00","kv2019i","2023-06-12 12:24:25","false","audio: buffer: do not mix cached and non-cached access in buffer_alloc

No reason to mix cached and noncached operations when
initializing the buffer in buffer_alloc(). We take a cached
reference, so let's use that to initialize the object.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",47,60,1
"thesofproject/sof","638d79bd0b651712d38dd3ecad6cd2e792ed1102","keyonjie","2018-11-28 06:28:01","false","dw-dma: fix several trace formats issues

Here fix several trace format issues, and one dma_start confusing logged
to 'put' issue.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",43,6,0
"thesofproject/sof","50c31718530ad487633cedc49aff567f675a2ec1","lgirdwood","2018-08-04 17:28:40","true","Merge pull request #121 from jajanusz/platforms-refactor

platform: refactor: deduplicate code for APL&CNL",16,2,0
"thesofproject/sof","e94c951bcee4da425a5df3507b30ca8e3c536716","lgirdwood","2018-08-21 14:30:45","true","Merge pull request #221 from tlauda/topic/workq_def_cores

work: add queue timesources per core",19,3,0
"thesofproject/sof","8aff3de2ac5bbd6c14a0351b56db797f92684375","lgirdwood","2018-10-10 15:01:17","true","Merge pull request #476 from jajanusz/fix-hda-dgbwp-typo

hda-dma: fix typo - read DGBWP",33,4,0
"thesofproject/sof","102b7ad1e8f209854101f9f472dc2f6ca6b70b58","lgirdwood","2018-09-18 12:14:36","true","Merge pull request #386 from xiulipan/merge12_3

Merge stable 1.2 (part 3) scheduler and BYT part into master",37,4,0
"thesofproject/sof","c4a9cca0a94969fbf1ecb42d660c0e40279d9ffa","lgirdwood","2018-07-15 09:58:17","true","Merge pull request #105 from thesofproject/lrg/gcc-fixes

gcc build fixes for configure/libtool",15,1,0
"thesofproject/sof","d9fea08a2497303bc4852a0efd14336790436f0e","ymdatta","2020-07-24 16:26:06","false","tools: testbench: check if pointer is null before accessing it

Check if a pointer is NULL before accessing it, else, it leads
to segmentation fault.

Signed-off-by: Mohana Datta Yelugoti <ymdatta.work@gmail.com>",78,26,0
"thesofproject/sof","5b5888ce075d3ab6e72f38be3a0bde4c0040b378","cujomalainey","2018-11-25 07:24:36","false","Move SOFT into sub folder for SOF merge

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",40,6,0
"thesofproject/sof","844df3dde306b80e77416d706db257562125f7ba","iuliana-prodan","2021-05-12 16:10:57","false","platform: imx: add info for linker script variable

Added information for linker script variable that
contains the cache attributes.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",85,35,0
"thesofproject/sof","e7db11b6afa8666d96ff83e6f3f81ffec8e4d5eb","mrajwa","2019-07-30 14:32:01","false","kpb: fix states at prepare time

This patch switches KPB into RUN state after
prepare. This is expected state once KPB
was properly initialized.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",52,14,0
"thesofproject/sof","513c47fd8c25b2830260baf4129b5f328e059a32","keqiaozhang","2018-07-02 06:00:40","false","rimage: adding an include for all gcc version build

Signed-off-by: Zhang Keqiao <keqiao.zhang@linux.intel.com>",8,1,0
"thesofproject/sof","6de576c9d74d34d1fa6cdfcc02ce619bb18342bc","tlauda","2019-10-10 10:47:56","false","topology: fix connected pipelines' priorities

Fixes pipelines' priorities in multipipe topologies.
The highest priority is 0.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",63,16,0
"thesofproject/sof","c542db34666ab942a5258871ce62ec40486c13ee","andyross","2023-04-25 16:47:20","false","ipc4: Clean up Intel/rimage dependencies

The component model for IPC4 seems to be based on an array of manifest
headers at the start of the firmware image.  Those are rimage data,
and not all platforms (in particular the fuzzer) are packing their
output with rimage.

Just stub this for now.  In the source tree as it exists, there don't
seem to be any extra components to build, nor is there any support I
can see at the linker/rimage level to get them included anyway.

Signed-off-by: Andy Ross <andyross@google.com>",52,59,1
"thesofproject/sof","ff3dec2f4130481b99059aa93278bee40d8d74c7","markbartonxperi","2021-10-20 11:17:35","false","audio: codec_adapter: Add DTS Codec to mt8195 topology

The DTS Codec can be conditionally added to the sof-mt8195-mt6359-rt1019-rt5682 topology on those pipelines intended for headphone and speaker output.

To enable processing and configure settings, additional bytes must be sent to the control via ALSA TLV. The intention is that endusers will use ALSA UCM to achieve this.

Signed-off-by: Mark Barton <mark.barton@xperi.com>",123,41,1
"thesofproject/sof","8b059f656611a6e2c315ad56e35c66a0b4765e91","mrajwa","2019-10-18 10:42:03","false","kpb: make draining algorithm more secure

This patch slightly modifies draining speed algorithm.
Instead of copying half the buffer each period we
copy two periods. This slightly decreases draining
speed but avoids XRUNs in rare cases.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",60,17,0
"thesofproject/sof","8866f3b5938fd992db49d77b1f313ce961b62c64","mrajwa","2020-03-30 21:19:52","false","kpb: change history buffer struct name

This patch changes the name of the ""hb"" struct to
more meaningfull ""history_buffer"". Therefore
code is more readable.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",67,22,0
"thesofproject/sof","1ad0269f5d5bf1f7cbb652b645280ad970fcdf33","ktrzcinx","2020-10-19 15:32:48","false","logger: Fix log_err usage at early stages of sof-logger run

This function could fail when called before convert()

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",74,29,0
"thesofproject/sof","0d9a0c112c7424da3de05f79ede1d839fe3a13e2","kv2019i","2021-08-18 11:01:53","false","xtensa-build-zephyr: disable XCC build for Intel APL

The BSS usage exceeds available memory when building for
APL/cavs15 hardware with XCC, so disable it for now. Issue
tracked as https://github.com/thesofproject/sof/issues/4645

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",117,39,0
"thesofproject/sof","82ae105de9e20d3a8c27805d971e1d78eeabfa7f","kv2019i","2023-03-14 11:59:31","false","dai-zephyr: possible division-by-zero if max_block_count is zero

If the max_block_count attribute is zero, this may lead to
division by zero error. Handle this explicitly but reporting
error if max_block_count is zero.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",56,57,1
"thesofproject/sof","7b100fc356fa0dcc1aabed3757e67021f71e30fd","kv2019i","2023-01-11 16:28:12","false","dai-zephyr: fix crash in dai_reset

It is not guaranteed that 'dd->z_config' is set when dai_reset() is
called. E.g. if the requested runtime parameters are not supported by
the hardware, the parameter setup will not be completed. When
dai_reset() is called in this state, a FW crash is hit due to NULL
dereference.

Fix the issue by checking dd->z_config value before use.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",55,55,1
"thesofproject/sof","ff6ca2b78fcf82bfd17cae8126c02a6378e49837","marcinszkudlinski","2023-04-17 11:11:56","false","pipeline2.0: introduce a source API

this is a definition of API to source of audio data

THE SOURCE is any component in the system that have data
stored somehow and can give the data outside at request.
The source API does not define who and how has produced
the data
  The user - a module - sees this as a producer that
             PROVIDES data for processing
  The IMPLEMENTATION - audio_stream, DP Queue - sees
             this API as a destination it must send data to

Examples of components that should expose source API:
  - DMIC. Data are coming from the outside world,
          stores in tmp buffer and can be presented
	  to the rest of the system using source_api
  - a memory ring buffer
	Data are coming from other module
        (usually using sink_api, but it does not matter in fact)

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",50,58,1
"thesofproject/sof","74fcc02ff5e08011705b0c212a656d08fc1f9c17","singalsu","2022-02-09 16:29:57","false","Tools: Test, Tune: Improve Matlab scripts for EQ testing

The test scripts missed test component keyword change from e.g.
eqiir to eq-iir. Due to this the process_test() failed for IIR and
FIR for gain and frequency response due to wrong result expect.

The expected result is retrieved with the blob decode function. It
can be also used manually to check the filters defined in the
blob. The help texts in the decode functions needed fix. Also some
usage examples were added.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",108,44,1
"thesofproject/sof","cb924991a58fcce5109bbc543347c3282a74119e","singalsu","2021-01-28 10:12:42","false","Topology: HDA Generic: Headset filters configuration from CMakeLists.txt

This patch eases the definition of headset post processing filters
blobs. First, the macro name PPROC is changed to HSPROC to indicate
the processing targets headset endpoint.

The CMakeLists.txt for topologies is edited to add build of topology
sof-hda-generic-eq.tplg that does not include DMIC endpoints for
devices without such. Previously there was no variant without
DMIC enable.

The main macro sof-hda-generic.m4 is enhanced to define HSPROC as
volume to use pipeline pipe-volume-playback.m4 when it has not been
defined in CMakeLists.txt.

The definitions for PIPELINE_FILTERx are copied from endpoint specific
HSPROC_FILTERx if they were defined. If they were left undefined
the pipeline will apply default processing configuration (e.g.
for EQs pass-through).

In the example the EQs are left to pass-through. The topology
sof-hda-generic-eq.tplg shows an example of explicitly setting
the filter coefficients at the top level. The FILTER1 is impacts the
first algorithm in pipeline (IIR) and FILTER2 the second algorithm
algorithm (FIR) in the used HSPROC definition eq-iir-eq-fir-volume.
In this case volume does not support such but for future there could
be FILTER3, FILTER4, ... added if need. The current m4 macros support
now only HSPROC_FILTER1 and HSPROC_FILTER2.

The patch adds undefine to PIPELINE_FILTERx in intel-generic-dmic.m4 to
make sure the macro is not set by other than DMICPROC_FILTERx. The
same is done for 16 kHz DMIC capture. Currently there were no issues
caused by it.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",66,32,0
"thesofproject/sof","abb35a2f01574f1edc1f414289824d3d66341445","singalsu","2022-04-01 18:23:00","false","Audio: SRC: Remove redundant trace

There's same information traced just after this.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",110,46,1
"thesofproject/sof","68da4d70249175ed2ed05ee32d90b441ffb0fd06","singalsu","2020-05-19 10:49:53","false","Topology: HDA-generic: Use +20 dB EQ gain for DMIC capture pipelines

This patch replaces the default EQ 0 dB gain with +20 dB gain in
DMIC pipelines in hda-generic based topologies. It fixes the issues with
too silent capture level.

The gain was changed to 0 dB in a recent change to let UCM set it.
However this change remains needed for a while since the UCM initial gain
patch and remaining development of ALSA/ASoC 4ch capture for devices with
more than two microphones will take longer time to become available.

The impacted topologies are:

sof-hda-generic-2ch.tplg
sof-hda-generic-4ch.tplg
sof-hda-generic-eq-2ch.tplg
sof-hda-generic-eq-4ch.tplg
sof-hda-generic-idisp-2ch.tplg
sof-hda-generic-idisp-4ch.tplg

Note: The 0 dB high-pass version is preferred after all the needed
development is available.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",98,23,0
"thesofproject/sof","ada31dbd1b14830c2ad178b7022fa72e81400fbc","marcinszkudlinski","2023-02-28 16:40:55","false","IPC4: Workaround: Lock DP modules to same core as pipeline

This commit prevents DP modueles from run on different cores than
the pipleine LL modules. This limitation is enforced because of
possible cache races in pipeline_for_each_comp()
To be removed till safe implementation is ready

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",58,57,1
"thesofproject/sof","5c5ff38ab2f599f6b329da5ac17cb6d43c61a7dd","bardliao","2018-12-01 23:01:10","false","[skip ci]github: add bardliao as uapi and ipc owner

Add bardliao as uapi and ipc owner

Signed-off-by: Bard liao <yung-chuan.liao@linux.intel.com>",40,6,0
"thesofproject/sof","0c30369f985865050483a915bebcbe18782d4d68","jajanusz","2019-05-15 12:09:04","false","uapi: xtensa: remove stack field

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",66,11,0
"thesofproject/sof","c57fe274fc6244802d1a06fbb181067121adabe6","tlauda","2020-04-16 12:09:28","false","component: fix comp_make_shared

Fixes comp_make_shared function by flushing data from cache
before accessing it using shared interface. Also additional
invalidation is no longer needed. It should be handled
automatically by platform_shared_get.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",83,22,0
"thesofproject/sof","32bd57dcccc7a1e7dc6ecf4fa65064b67902e25e","tlauda","2018-09-21 08:40:12","false","idc: process IDC message as task

Processes IDC messages as scheduled tasks.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",35,4,0
"thesofproject/sof","2e2f669176f43d9981a709a66bcdf1c6f36bad49","tlauda","2018-06-19 15:30:16","false","platform: extract number of available cores

Extracts number of available cores to platform/platcfg.h.
This header is asm friendly and can be easily used in xtos.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",1,1,0
"thesofproject/sof","7332fb2f65a31aca7c08d8232a575ac598081b18","tlauda","2019-12-13 12:13:33","false","ipc: remove callback

Removes callback from ipc structure. It's not used and
if it's going to be needed in the future, the new notification
system should be used anyway.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",75,18,0
"thesofproject/sof","3de68444979825f83d08b772fc04d897417e52d2","tlauda","2019-10-10 09:02:07","false","task: add pipeline_task

Adds definition of pipeline_task. It's a task type registered
by pipelines and used in DMA scheduling domains.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",63,16,0
"thesofproject/sof","51a44aadb60132f9b0de038293c959b8444dcc37","saisurya-ch","2023-10-09 09:32:24","false","Enable PLL clock for the platform ACP_6_3

Enable PLL clock for the platform ACP_6_3.

Signed-off-by: SaiSurya Ch <saisurya.chakkaveeravenkatanaga@amd.com>",13,64,1
"thesofproject/sof","dad48e1f1064f0f3735737b35d6f55ad12d30480","tlauda","2019-03-06 15:58:06","false","host: add support for variable data copy

Adds support to host component for variable
data size copy.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,9,0
"thesofproject/sof","87a4bed002cda4d86c02a9006d947d6235bc089c","tlauda","2019-10-21 13:17:25","false","dai: call dma_copy even if there is no data

Changes flow of dai_copy to call dma_copy even if there is no data
available. This way we make sure that all DMA needed procedures are
executed, since buffers pointers won't be changed anyway.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,17,0
"thesofproject/sof","771bcd5fbb3f1c0c4ec66cb98d9743ca56540ad8","xiulipan","2019-01-11 06:06:20","false","CI: travis: add more QEMU boot test

Enable more platform's qemu boot test

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",56,7,0
"thesofproject/sof","5a59eca380043b3bec534be29dfc517cc6010350","xiulipan","2018-06-04 02:43:10","false","topology: test: Fix tplb-build.sh when did no use XARGS

Miss TFILE when not using XARGS.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",1,0,0
"thesofproject/sof","8f9b35071bf5e9a2bf88c05f33285659a07d6351","xiulipan","2018-09-29 03:56:44","false","logger: run dos2unix for some format issues

Change some dos format to unix

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",37,4,0
"thesofproject/sof","114692728a1e08247cbe4d8583a6f2607d0140c5","jlacla","2019-09-10 08:57:00","false","host: remove empty new line

Make code easier to read. Found using checkpatch.

Signed-off-by: Jerome Laclavere <jerome.laclavere@nxp.com>",60,15,0
"thesofproject/sof","e502f2286d768f990ae6b086f9504ffdc1089bb0","jajanusz","2019-02-22 09:43:54","false","tools: readme fix for cmake 3.10

Argument -B<builddir> is not supported in minimum version of CMake
required by our project (3.10).

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",61,9,0
"thesofproject/sof","66b0a0f0b845f647c6e33dbfd742aa34f09c5a40","dabekjakub","2019-08-08 13:14:56","false","memory: Add alignment option for allocation

Add alignment option for memory requests.
Fix alloc definitions for UT.
Function definitions were using defines in their body
which blocked usage of const values in said defines.

Signed-off-by: Jakub Dabek <jakub.dabek@intel.com>",53,14,0
"thesofproject/sof","4aacac3460f21a65b335cbada8857f1c452947ad","softwarecki","2023-03-07 12:37:43","false","Use file_error function to print file related errors

Added error handling where it was missing. According to the documentation,
the fseek function returns a non-zero value on error. The conditions for
checking this value have been corrected.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",56,57,1
"thesofproject/sof","2c0d875df1bd7cf359d401e8987139c4ec6550f7","aiChaoSONG","2022-02-23 06:46:29","false","topology1: move capture dai to another pipeline for echo ref

The explanation takes sof-adl-max98357a-rt5682 as an example:

During pipeline_complete(), we search for the source widget
for a pipeline from a list and the ipc_get_ppl_comp() returns
the first widget from the list of source widgets for a pipeline.

With SSP2.IN on pipeline 1, which is the same pipeline ID as the
ECHO_REF playback pipeline for PCM0P, pipeline_complete() for
pipeline 1 ends up not walking the rest of widgets in pipeline 1.

This Echo Ref feature works in chrome kernel today by accident,
because we set up the widgets in the reverse order after resuming
from runtime suspend and the source widget happens to be PCM0P.

To fix this, create a new pipeline for the capture dai widget SSP2.IN,
so that it doesn't pollute the widget list for pipeline 1.

Fixes: #5395

Signed-off-by: Chao Song <chao.song@linux.intel.com>",107,45,1
"thesofproject/sof","0673877881fff7f5568dce9efd38b8375a1482f7","aiChaoSONG","2021-08-11 02:08:01","false","github actions: update zephyr docker image to 0.18.1

The recent zephyr code add restriction to the SDK,
and requires the SDK version >= 0.13, we have to
update the docker image for zephyr SOF building.

As the default SDK version in docker image 0.18.1
is still 0.12.4, and the alternative SDK is 0.13.0,
we need to specify the SDK location with env.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",117,38,0
"thesofproject/sof","7b5aa7281370c287a16600c7b010279c3fd81def","chunxu-li","2022-03-30 09:46:45","false","drivers: mtk: refine afe_remove return value

the afe_remove return value is no used, so
change afe_remove return value from int to void

Signed-off-by: Chunxu Li <chunxu.li@mediatek.com>",112,46,1
"thesofproject/sof","a1037c9c4d6af062852a1a40aae35162ee81e6df","softwarecki","2022-11-22 09:03:52","false","dai: host: Get period count from dma_plat_data

Since zephyr does not support reading the period count
attribute from dma. Now dai-zephyr and host-zephyr read
this value from dma_plat_data.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",94,54,1
"thesofproject/sof","8f217e240c18fb7065cbb4e0bb867035f79ec751","gongjun-song","2022-11-28 06:52:29","false","src: move some functions positions to fit the module adapter

Due to add module adapter feature, some functions need to be moved
to new locations to fit it.

Signed-off-by: Gongjun Song <gongjun.song@intel.com>",99,54,1
"thesofproject/sof","ae0e7fb774e2130e313a79dd3f921e2d3c0ac3c4","ranj063","2022-01-08 01:56:37","false","codec_adapter: rename codec_process() to module_process()

No functional change.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","86c9a037e212f7bfdf7350859d0e22fe761143ab","ranj063","2021-06-13 03:08:28","false","topology: utils: remove DAPM routes for virtual widgets

Remove the addition of DAPM routes for virtual widgets.
These are not needed for suppressing errors with legacy
machine drivers. Just adding the virtual widget is enough.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",71,36,0
"thesofproject/sof","487d514b9d0c9428583831e19dfd32e2d04a6334","ranj063","2022-02-24 17:39:02","false","topology2: cavs: gain-pipelines: change the input/output bit depths

The DAI copiers only support 32-bit format. Change the gain-playback and
gain-capture to set the input/output bit-depth to match the DAI copier
requirement.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",110,45,1
"thesofproject/sof","dbc3ba5e3ea2ce43cd852874bf1d6da4685707c1","ranj063","2021-11-02 19:57:43","false","topology2: eq-iir-volume-capture: Add all includes

Include all dependencies to be able to build the conf file individually.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",125,41,1
"thesofproject/sof","10a5bdb82955126dc7404098387afbfa6f27e39f","RanderWang","2022-01-18 01:19:52","false","ipc4: change frame_fmt and valid_sample_fmt for gateway

First we reused ipc3 pcm conversion function by by setting
frame_fmt to S24_4LE, but later found that we need different
conversion for copier with gateways support.

Now frame_fmt will be set by default config.

Signed-off-by: Rander Wang <rander.wang@intel.com>",116,43,1
"thesofproject/sof","3cddbd60144745e9427187dd7a7ed163a6476a5e","RanderWang","2018-06-27 09:01:27","false","DMA-Trace: fix dma-trace overflow issue

Refine trace log in pm module. There are too many
put|get events, so use verbose trace. And atomic
trace is for low frequency and fast trace messages

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",5,1,0
"thesofproject/sof","e853541670046dfe17803206a35e760dc20389cc","RanderWang","2021-10-25 05:33:57","false","ipc4: fix ipc4 build failure

Add dai_dma_release definition for ipc4

Signed-off-by: Rander Wang <rander.wang@intel.com>",125,41,1
"thesofproject/sof","e9fd746d70023ddeab640e1f9eeb501f93b63bb4","RanderWang","2020-02-14 08:44:05","false","Revert ""topology: sof-icl-rt711-rt1308-rt715: refine dai index setting""

This reverts commit b90f4dd044a2fef81057414df59e6f438005b88c.
The device id of rt715 and HDMI will be dynamic with this PR. This is
not friendly to UCM design. Let's deal with the id hole in machine
driver.

Signed-off-by: Rander Wang <rander.wang@intel.com>",85,20,0
"thesofproject/sof","659088e7209d70593904ec4bbb6d1dda27afa1b2","tobonex","2023-09-15 17:45:40","false","drc: remove buffer_acquire from drc

remove buffer ops from drc module

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","05628c9c48e416696328011cab6c46583768c2f1","ranj063","2023-05-20 18:12:38","false","topology2: Use the new ALH dai copier class

Replace the use of the generic dai-copier class with the ALH specific
DAI copier and pipeline class.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",53,59,1
"thesofproject/sof","74f324641a6c7f7420758d9b214b239b0f9deb78","ranj063","2023-04-28 18:29:56","false","topology2: cavs-nocodec: add a module copier to SSP 0 capture pipeline

Add a module copier between the DAI copier and gain in preparation for
optimizing the single endpoint DAI copiers. This optimization will
temporarily make multiple sinks unsupported with DAI copiers. This
feature will be re-introduced in a follow up PR and the module copier
will be removed then.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,59,1
"thesofproject/sof","151c48138e24927138ac6b0524106ad62c2409cb","ranj063","2022-01-27 17:47:57","false","codec_adapter: cadence: clear init_done flag at reset

Clear the init_done flag at reset to fix the problem with failure with a
subsequent playback.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",103,44,1
"thesofproject/sof","a09982e0935aa00a15fc15295fdb2dfc2b651869","ranj063","2023-05-05 18:38:01","false","lib: dma: Add a new DMA buffer copy function

Add a new DMA copy function, dma_buffer_copy_from_no_consume(), that can
be used to copy from the DMA buffer to the sink without modifying the
read pointer in the DMA buffer. This will be used when the DMA data
needs to be copied to multiple sink buffers. The DMA buffer pointer
should be updated at the end of all copies in this case.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",53,59,1
"thesofproject/sof","e5b29d1a9dbbe5cd982423f8174d42f0b7396c0d","ranj063","2022-06-30 04:14:55","false","pipeline: Add a pending flag to the pipeline trigger

When the host pipeline and DAI pipelines have the same scheduling
period, the host pipeline will be prioritized over the DAI pipeline when
the scheduler picks a task to execute after receiving a pipeline trigger
IPC.

But in the case that the host pipeline's scheduling period is larger
than that of DAI pipeline, the DAI pipeline task will likely get
executed before the host pipeline gets the chance to execute the trigger
command. And when this happens, the state of the aborted flag is
insufficient to determine if the pipeline task should be kept running or
completed. For example, consider the mixer based pipelines in the
nocodec topology:

 PCM0 (pipeline 11, 1ms period) ---> Volume -----|
                                     V
                                   Mixer (Pipeline 1, 1ms)----> SSP0
                                    ^
 PCM3 (pipeline 7, 10ms period ) ---> Volume -----|

When PCM 3 is started and the START trigger completes, the aborted flag
for pipelines 7 iand pipeline 1 will be reset. And when PCM 3 is paused,
the PAUSE trigger is scheduled for both the pipelines 7 and 1. But since
pipeline 1 has a lower latency requirement than pipeline 7, it gets
scheduled first and because it is not the host pipeline, the trigger is
not executed and the aborted flag is not set, the task gets completed and
a subsequent release for PCM 3 ends up in an IPC timeout.

To fix this, add a new flag called pending to the pipeline trigger that
can be set when a pipeline trigger is scheduled for a pipeline. This flag
must be cleared when the first component in the pipeline executes it's
trigger op. This flag combined with the aborted flag are sufficient to
prevent the IPC timeouts for the cases where the DAI pipeline task executes
ahead of the host pipeline when the trigger has not been executed yet.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",110,49,1
"thesofproject/sof","52358064fe5672a2fbe6ec38622f43fbc66293b7","lkoenig","2022-02-03 15:59:39","false","topology: Run spk pipelines on same core as AEC

In order to avoid inter core communication while running
GOOGLE_RTC_AUDIO_PROCESSING, this change ensure that the speaker
processing and the amplifier feedbacks are running on the same core as
the AEC.

Signed-off-by: Lionel Koenig <lionelk@google.com>",106,44,1
"thesofproject/sof","2e3823ac34667593b0844f66b1d0bc815b1fcd98","dbaluta","2022-05-11 12:26:19","false","zephyr: Fix compile error after switching to module_adapter naming

There are few left paths and config names after switching from
codec_adapter to module_adapter.

Without this building codec modules fails

Fixes: b4591ca8f464 (""codec_adapter: rename it to module_adapter and fix all includes"")
Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",113,47,1
"thesofproject/sof","5d5d676813e1f8cd070f451fc7336219ed40abcc","dbaluta","2020-05-06 07:51:09","false","topology: Introduce COMPR_PLAYBACK_ADD

This allows PCM card to support compressed data API. In order
to do this we need to set ""compress"" property to true. Thus,
the .conf topology file should look like this:

SectionPCM {
	/* ... */
	compress ""true""
}

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",95,23,0
"thesofproject/sof","a8ec8bf8c6e053db324557bf440537c77efa986a","dbaluta","2020-06-11 13:05:37","false",".travis.yml: add IRC notifications

SOF has #sof dedicated channel on irc.freenode.net server.
This will enable travis ci to send notifications to the IRC
channel each time a build is finished (either successful or not).

We will see how this works and refine it later if it is too spammy.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",72,24,0
"thesofproject/sof","95a6e304cc297f19bb13bd001ff17ed3ccc4e699","lrgirdwo","2018-09-28 15:10:27","false","sue: Add SSP defs for Sue Creek

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",37,4,0
"thesofproject/sof","43dacdc016d4ca4fc8fc97410a2cade57b190ca2","plbossart","2021-08-06 19:29:51","false","topology1: soundwire: split headphone pipe in host- and dai-parts

Prepare for the introduction of deep buffer support

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",116,38,0
"thesofproject/sof","67ae353bfbb7afde841ee5f313a166cb0d681319","lrgirdwo","2022-08-20 12:56:50","false","tplg_parser: support building as static or shared library.

Allow the tplg_parser to built as either static or shared library.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",111,51,1
"thesofproject/sof","7981197f6de000b8278276903504cf93ea4c0f61","yaochunhung","2021-12-23 07:57:08","false","platform: mt8195: implement dsp clock function

Implement set_freq callback function to set dsp clock, dsp clock source
can be 26M(13/26M) or ADSPPLL(370/540/720M) for different use cases,
default support is 720MHz.

Signed-off-by: YC Hung <yc.hung@mediatek.com>",121,43,1
"thesofproject/sof","7d4fca98026d68a0bc1246508f2e47b11b36fb35","lrgirdwo","2021-08-16 16:14:45","false","testbench: only enable EDF scheduler once.

EDF enabled twice with testbench. Fix it.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",117,38,0
"thesofproject/sof","0bbe40dad52eae1f2af5ceecfa655136daa4ee21","plbossart","2019-11-14 22:44:14","false","topology: add support for BYT-CR and additional CHT configurations

The BYT-CR package only exposes SSP0 and SSP1, with SSP0 typically
used instead of SSP2 for the audio codec connection. Since it's proven
nearly impossible to patch the topology on the fly in the kernel,
let's brute-force generate topologies for all known BYT-CR platforms
using macros for the SSP number. The BE stream name remains constant
at SSP2-Codec since it's not modified by the kernel.

While we are at it, do the same for CHT platforms.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",58,17,0
"thesofproject/sof","f039b9eda1fb436528a501f255ad3fe2d38d5553","fredoh9","2022-03-09 20:01:25","false","topology2: common: fix to add '$' for SAMPLE_TYPE_LSB_INTEGER

$ and S are hard to tell in text editor. Without '$' final value are
much different.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",113,45,1
"thesofproject/sof","8d03efe701f5cc973f69e677d4a478ace54a7a9b","fredoh9","2020-03-31 23:57:43","false","topology: apl: share asymmetrical dmic pipe setting

apl dmic asymmetrical topologies are shared most of common codes. Share
one m4 macro for all.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",69,22,0
"thesofproject/sof","109148d9c7bf80dcc10107de7e5cbac9805f5087","keyonjie","2021-02-25 03:20:09","false","Kconfig: update the description of SYSTICK_PERIOD

The SYSTICK_PERIOD is used for system agent only now, remove the
schedule part from the description.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",76,33,0
"thesofproject/sof","03adf55bed585fc5be2f2f47aa573e83513ab930","brentlu","2021-12-20 08:48:21","false","topology: sof-adl-max98357a-rt5682-4ch: add new topology

Add support for four max98357a speaker amplifiers running in TDM mode
which format is 8 slots with 32 bit slot/sample width on ADL boards.
The only difference between this one and sof-adl-max98360a-rt5682-4ch
is the SSP port for speaker amplifiers; this one is using SSP2 while
max98360a's topology is using SSP1.

This topology implements a 4-channel pipeline directly to speaker
amplifiers so audio effects need to be done in user space.

Signed-off-by: Brent Lu <brent.lu@intel.com>",120,43,1
"thesofproject/sof","de6690f104fcfbb25d24bed4793fc247646a1ea1","marc-hb","2023-04-28 01:42:32","false",".github: upgrade most runners to latest Ubuntu 22.04

Let's not fall behind.

Ubuntu 22.04 is the latest runner offered by Github:
https://docs.github.com/en/actions/using-github-hosted-runners/about-github-hosted-runners

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",52,59,1
"thesofproject/sof","e986bc66d0b1479423217ea8bdf0ee20daf4e455","marc-hb","2022-02-23 23:36:54","false","Restore Zephyr version in banner, fix 'zephyr:BUILD_VERSION'

This fixes the banner which was recently added by SOF commit
a053e04d7ee1 (""trace: add Zephyr git version to the initial FW ABI
banner"")

  SHM: FW ABI ... tags SOF:v1.2.3 zephyr:zephyr-v3.0.0-346-g1470228eb10

... but was broken very soon after by Zephyr commit 91709778a487 (""cmake:
version.h generation performed at build time"")

  SHM: FW ABI ... tags SOF:v1.2.3 zephyr:BUILD_VERSION

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",107,45,1
"thesofproject/sof","831bb3755bd9704d690c17dede0af4d89261942f","marc-hb","2021-04-28 22:13:47","false","xtensa-build-zephyr: fix ""die()"" function

It still looks smart but the \n addition compared to the original
version in xtensa-build-all.sh broke it for more advanced cases:

die '%s %d' str 5
-bash ERROR: -bash: printf: 5\n: invalid number

As reported by shellcheck. shellcheck saves lives.

In scripts/xtensa-build-zephyr.sh line 22:
	>&2 printf ""$@\n""
                       ^-- SC2145: Argument mixes string and array.
                        Use * or separate argument.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",81,35,0
"thesofproject/sof","3674c0f1135d2f40e69308ec4fd69081a6085c8d","marc-hb","2021-06-19 01:17:47","false","trace.c: mtrace_event: fix memcpy_s( dest_size ) argument

Found by chance while looking for something else.

This makes no difference right now because we checked the ""length"" in
the line immediately before but let's do the right thing anyway, at the
very least it's more readable.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,37,0
"thesofproject/sof","e879e954adeab975e86ebdbb036737015024e2c2","lyakh","2021-07-09 14:11:53","false","pipeline: (cosmetic) simplify pipeline_task_init()

pipeline_task_init() is always called with pipeline_task as its last
parameter. Remove the parameter and use the function explicitly.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",87,37,0
"thesofproject/sof","047f08f20ec1fd8238ff357b98e9e92f799f453e","lyakh","2020-09-03 12:07:28","false","uuid: use a pointer instead of casting it to an integer

UUID objects are represented by struct sof_uuid_entry instances in SOF.
Instead of casting pointers to them to integers for passing around,
carry them as pointers until they have to be cast to integers for
packing into data structures. This also fixes printing UUID, using a
""%pU"" format.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",70,27,0
"thesofproject/sof","aa69b492cfcd0e2747e9c3ff115f0b6e3305546a","lyakh","2023-01-16 11:38:38","false","dai: (cosmetic) remove a duplicate header

rtos/interrupt.h is included twice in dai-zephyr.c, remove one copy.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,55,1
"thesofproject/sof","0e80be7d52dd5cf472f2dd4e7cfbf41354dd3dac","lyakh","2019-02-18 10:28:33","false","xtensa: only enable interrupts after allocating context

Enabling interrupts before allocating context for them can at least
in theory lead to such an interrupt being triggered and then
attempting to access the context. Fix the order for task interrupts.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",63,8,0
"thesofproject/sof","f1f5abab0de8a7e1ef4c79a2eddb3a1e57758a81","lyakh","2021-05-10 15:03:04","false","zephyr: split timer domain

timer_domain.c contains a lot of Zephyr- and XTOS-specific code and
relatively little common code. Aplit it into two files instead of
using a large number of #ifdef instructions.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",81,35,0
"thesofproject/sof","3ce3bc9ccb9398a36da047213b68a12983d980dc","lyakh","2022-08-02 08:08:32","false","rtnr: fix a bad commit

Commit b832e96b664c (""rtnr: fix buffer acquisition"") got damaged
during a rebase, re-add the dropped part, fixing buffer acquisition
in rtnr_prepare().

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",112,50,1
"thesofproject/sof","b7881f260f54336f54bed7fbd68af197b61b688b","ktrzcinx","2020-07-14 11:40:39","false","dai: Always overwrite hw frame_fmt in dai_comp_get_hw_params

This value is always set in dai_new() function, value 0 represents
SOF_IPC_FRAME_S16_LE so such an check doesn't give any value.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",80,25,0
"thesofproject/sof","30cd56fa56594f8dba9513e7fc7be893a8027ef4","mrajwa","2020-01-31 13:07:24","false","apl: fix LSPGCTL register define

This patch fixes wrong define to LSPGCTL
register.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",76,20,0
"thesofproject/sof","70928de4832b7150cfc747f4483c6a83cdfef97d","lgirdwood","2018-11-28 14:46:11","true","Merge pull request #639 from mrajwa/gdb_support

GDB: Initial commit - added debug vector and init code.",40,6,0
"thesofproject/sof","8ae4535fc94351d03b8ac86778c2882b543d8626","lgirdwood","2018-07-16 14:32:11","true","Merge pull request #112 from tlauda/topic/volume_ut_fix

test: fix volume cmocka tests",13,2,0
"thesofproject/sof","bb9254fd279e8dacf4cef4ff08524c9c00f762d1","mrajwa","2020-10-07 16:59:57","false","codec_adapter: add cadence codecs support

This implements ops for cadence codecs.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",67,28,0
"thesofproject/sof","1852036454ee249f36eac5d4fadb83167545a383","mrajwa","2019-06-26 23:18:00","false","ipc: align stream.h with kernel

This change is to align sof_ipc_stream_params with its
kernel equivalent. In this patch no_stream_position
parameter is added to relax host_period_bytes from
storing information about the need of stream position
update.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",45,13,0
"thesofproject/sof","41861aac373eb1f6978bfdb0bbe97cd882b1785a","lgirdwood","2018-08-23 09:59:32","true","Merge pull request #58 from plbossart/topic/wm8804

topology: add support for wm8804",19,3,0
"thesofproject/sof","bfc7e467f7b283d0b7db5dff7321c8c5ec400980","lgirdwood","2018-08-13 10:17:24","true","Merge pull request #214 from bkokoszx/ssp_slot_padding

drivers: apl-ssp: handle tdm mode in ssp",18,2,0
"thesofproject/sof","bb8d6baf45e012b500a8558cac859340af97cef9","iuliana-prodan","2023-10-10 22:32:48","false","Revert ""module_adapter: avoid module init crash in case of ipc data invalid""

This reverts 'commit e847c8b27015 (""module_adapter: avoid module
init crash in case of ipc data invalid"")'.

No data is not an invalid case for mixer, for example.

Fixes: #8265
Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",13,64,1
"thesofproject/sof","effa56f51871777d4a0a7a78d0a48c7f2779bb78","bkokoszx","2018-08-01 09:53:54","false","apl-ssp: setting additional bits in ssp registers

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",19,2,0
"thesofproject/sof","a73c4f63ca41dcc77f90d435d9da4f5dfe1e6ecf","bkokoszx","2018-10-24 13:17:33","false","logger: add firmware verification capability

I've added two logger flags for firmware version verification:
-e		- enables checking fw version with default file
-v ver_file	- enables checking fw version with ver_file file

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",27,5,0
"thesofproject/sof","8f3a78dc6a1f9874d91f13901f4b674fc085617e","kv2019i","2022-03-11 10:48:38","false","xtensa-build-zephyr.sh: fix shellsheck warning

In scripts/xtensa-build-zephyr.sh line 199:

  if test $platform = tgl-h ; then
           ^-------^ SC2086: Double quote to prevent globbing
			     and word splitting.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",113,45,1
"thesofproject/sof","9faf7e4e449ef5f423cd08c7494bc576d04a4e01","singalsu","2020-12-10 16:32:11","false","Testbench: Fix for multiple controls parsing for process components

This patch prevents topology parse failure when there are multiple
controls, e.g. enum controls.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",74,30,0
"thesofproject/sof","95d8e941cf8acf2d535e9146166692a809bb0011","singalsu","2022-01-18 13:10:40","false","Testbench: Enable verbose traces

Some useful algorithms internal traces are output with debug traces.
This patch enables the verbose trace (CONFIG_TRACEV) for library build.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",113,43,1
"thesofproject/sof","869666061bcedb0031c2712acbd09a0fdf54c414","singalsu","2023-06-06 08:28:45","false","Tools: Test: Audio: Fix syntax error in test_run.m

The fprintf() command prints only ""#!/bin/sh"". For some reason
this has been ignored by interpreter but as clear error it is
better to fix.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",45,60,1
"thesofproject/sof","e1e727febdcc1ea2fecc85377adee2454b45b82d","singalsu","2018-11-14 15:03:28","false","EQ: Remove redundant binary configuration data check code

This patch removes from FIR and IIR EQs the check if array data pointer
is null. Since it is an array the test evaluates as true and the check is
unnecessary.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",44,5,0
"thesofproject/sof","43923e1fc9af223ae7f79ea6c4b73000e05143da","singalsu","2020-10-02 13:45:19","false","Tools: Test: Audio: Add exist check for array configuration files

The added check and print helps the user to generate the array
configuration data and other beam pattern test related binary files
to carry out this test for TDFB (beamformer) component.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",65,28,0
"thesofproject/sof","e2265794f6c29ae822ba03c89d38b7b29c60ae14","singalsu","2023-01-19 17:52:13","false","Audio: EQ FIR: Change frame align to 2

The FIR processing cores are computing multiple of two frames
sizes so the align constraint can be set to prevent EQ process
to be called with odd frame counts.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",55,56,1
"thesofproject/sof","922cb6af7cd2a43e326138ae45112c070a4dd806","singalsu","2021-04-12 12:54:29","false","Drivers: Intel: DMIC: Move driver code to subdirectory dmic

In preparation for more functionality the module is moved
to own directory similarly as other DAI drivers.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",81,34,0
"thesofproject/sof","15f1559c93844192b1cc7bd966e787e856cfc678","singalsu","2020-03-26 16:21:10","false","ASRC: Fail params() if sink stream rate is zero

This patch prevents a firmware crash due to divide by zero. It can
happen with DAI types those do not return actual values in pipeline
walk with e.g. hda_get_hw_params().

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",64,22,0
"thesofproject/sof","be4bf561697d734c5be230cfa6c4958754fe2f27","singalsu","2018-06-20 16:07:58","false","DMIC: Set DAI parameters from topology parameters instead of hardwired

This patch enables the 1, 2, and 4ch topologies usage with S32_LE and
S16_LE sample formats. The DMA burst length is also changed to maximum
(8) to fully utilize the DMIC FIFO.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",1,1,0
"thesofproject/sof","6863eda16832279706224dbe47b6bcf9bdc16621","bardliao","2023-05-30 07:53:37","false","topology2: add sof-mtl-rt712-l0-rt1712-l3.tplg

For MTL + rt712

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",47,60,1
"thesofproject/sof","92ccbe2bfb75867622be810114e7aa375d81beca","xiulipan","2020-01-11 06:05:50","false","tools: test: remove qa test cases

test cases used by CI and QA is now in sof-test
https://github.com/thesofproject/sof-test

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",76,19,0
"thesofproject/sof","a45f4d1a1c60f4ce0001aab013ba63629693263b","xiulipan","2019-01-31 06:58:52","false","tools: remove unused travis yml

now we have uplever travis.yml to cover the tools test, the tools level
file is not needed.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",59,8,0
"thesofproject/sof","05ca4ebd0636e553192b12cf0167ae5335fb8545","zhuyingjiang","2018-11-30 02:35:55","false","topology: fix kcontrol name by topology

the kcontrol item name doesn't follow the SOURCE:DIRECTION:FUNCTION, and
can't separate playback and capture when display in alsamixer.
This fix is to move the pipeline id from the end of the name to the
head, this will make alsamixer to serperate playback and capture when
press F3 F4.

Signed-off-by: Zhu Yingjiang <yingjiang.zhu@linux.intel.com>",41,6,0
"thesofproject/sof","0317a7bce55386c40b5e9fda46a2a80cce616460","tlauda","2019-07-11 12:31:19","false","sof: change approach to including platform headers

Right now we have headers spread across main sof include
directory, arch include directory and platform include
directory. The same header e.g. cpu needs to be included
from sof, arch and platform. This creates long inclusion
lists and often we are missing many headers, but since
they are already included in some other headers, we don't
see the issue. This patch changes the approach to including
platform headers. It allows for inclusion only from main
header e.g. sof/cpu.h will include arch/cpu.h and platform/cpu.h.
If we want to use some cpu functionality we only need to include
sof/cpu.h and don't worry about the rest. If we have platform
header, which is only used inside of platform code, then
it can be directly accessed within.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",42,13,0
"thesofproject/sof","ee0affb2f47a18e9cab8dfcf4b89c5d82df73435","tlauda","2019-06-04 09:56:08","false","idc: add arguments to trace_idc function

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,12,0
"thesofproject/sof","7f23b259c055692da857344ee82056b9e0c52b99","tlauda","2019-09-30 09:53:43","false","ipc: remove host_pending as it not needed

Removes host_pending from ipc structure, because it's no
longer needed. Scheduler will automatically throw an error,
when we'll try to run not completed task.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,16,0
"thesofproject/sof","b104a5dfdf7964086319a342273e26d0c5f96205","tlauda","2018-08-20 10:08:31","false","dw-dma: refactor interrupt registration and unregistration

Changes flow of dw-dma interrupt registration and unregistration:
Now it is possible for slave cores to register for dw-dma handler.
Also registration happens before start and not on FW load
during probing. This way we are not wasting runtime heap memory
and also it will allow us to dynamically change execution core
for certain pipelines.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",18,3,0
"thesofproject/sof","c33687544fc6b36dd950fb515cb7bb1a52e693c4","tlauda","2019-07-10 12:23:41","false","sof: unify include guards naming

Unifies include guards naming in ipc, kernel, sof
and user headers.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",42,13,0
"thesofproject/sof","6c34f6785a30906c0b02f55f79faf83e8a9dec58","tlauda","2019-06-04 10:11:43","false","idc: refactor sending in blocking mode

Refactors IDC sending in blocking mode to
utilize DONE interrupt instead of manually
polling for DONE bit. It allows for removal
of spinlock, which prevented longer IDC
timeouts.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,12,0
"thesofproject/sof","9bf88f355fc029c2c53a1a3feaa62e86152aa600","tlauda","2018-10-22 12:34:35","false","memory: align stack space between xtensa smp and up

Aligns stack space, so that xtensa smp implementation
matches xtensa up implementation. It also fixes
problem with stack dump on smp architecture.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",29,5,0
"thesofproject/sof","92d52f24fee3687b4d189b251d0de235544bff0a","tlauda","2019-11-29 11:37:06","false","edf_schedule: improve algorithm to use dynamic deadlines

Improves EDF scheduling algorithm to use dynamically calculated
deadlines instead of static ones. It also simplifies the way
it chooses the next task to be executed and is first step for
further simplifications.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",67,18,0
"thesofproject/sof","7791303c316e36cbd26a8ab9f4d03ad33f6946b5","tlauda","2019-08-22 14:25:24","false","icl: memory: set correct LP heap address and size

Changes Low Power heap address and size to the correct
values for the Icelake platform.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",55,15,0
"thesofproject/sof","d1ede217e8b1caed6c2f5444f6e6ffa7e6e73cbb","tlauda","2019-08-09 13:11:56","false","test: alloc: remove tests which don't test anything

Removes two tests which don't really test anything
and are based on magic numbers. Changing memory map
can easily break them.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,14,0
"thesofproject/sof","1c2f3c0ce5538dc9b1d4472a3114397162ef7e10","tlauda","2020-04-09 11:18:13","false","schedule: return status of operations

Changes schedule operations to return error in case
chosen scheduler is not found or scheduler doesn't
support mandatory operation.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",81,22,0
"thesofproject/sof","c6f1609c51399c371405e781f67092d58e88e510","tlauda","2020-05-28 09:45:33","false","mn: cleanup definitions

Cleanups MCLK and MN related functionality. Moves some defines
from ssp to mn header. Also hides some definitions in platform
specific headers.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",96,24,0
"thesofproject/sof","b9656477f8a2c28a71cbd346c704140356ce94e1","ranj063","2021-09-30 17:16:13","false","component: do no modify blob data size until new data is ready

If new blob data arrives while the component is active and using
the current blob data, we should not modify the current blob size
with the new size until the new data has been applied. So,
introduce a new field, new_data-size, that will hold the size
of the new blob until the new blob is applied.

While we're at this, also clean up setting the data_ready flag.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",121,40,1
"thesofproject/sof","a25cdbb90b67be1f08c81e8de1641b7cefdf5fd5","ranj063","2023-07-07 02:03:29","false","audio: module_adapter: Update stream params

Update the pipeline params based on the base config.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",31,61,1
"thesofproject/sof","4bc054faa6f56a5712c0136d779e9ca2c386d51b","abonislawski","2020-04-23 11:02:40","false","trace: fix platform include

Platform tracepoints are used in IDC power_up check so it needs
to be included even with traces disabled

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",71,23,0
"thesofproject/sof","eb013c738b6a5ff6222c71f99abe0c334b9c8126","ranj063","2021-12-12 05:02:17","false","topology2: copier: Add extra attributes

Add some new attributes along with math expression to calculate the
attribute ""is_pages"".

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",120,42,1
"thesofproject/sof","764a065193aa40c5b43837b8a1e1855518abe06e","ranj063","2021-07-22 19:38:09","false","topology1: sof-cavs-nocodec: Add deep buffer playback pipeline

on SSP5 for BXT and SSP0 for all others.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",96,38,0
"thesofproject/sof","03ababfb1c0baf6ad2de1996c60d11366815f062","ranj063","2019-01-17 03:12:11","false","scripts: modify sof_bootone.sh to exit if sof_remove failed

Exit if sof_remove fails. This avoids running into further issues.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",55,7,0
"thesofproject/sof","2c9ad7caf54b8c630e9f7e11dc0ba2c6ff3068b1","makarukp","2023-05-09 10:46:32","false","cadence: enable processing with ipc4 protocol

Maintain codec configuration initialization for ipc4 protocol in cadence
module by separation critical functions into ipc3/ipc4 versions

Changes affect:
- different size of init/runtime config allocation
- resolving codec id from configuration from configuration params for ipc4

Signed-off-by: Piotr Makaruk <piotr.makaruk@intel.com>",53,59,1
"thesofproject/sof","352f01fee4ba0b1282091bb41dd08c51c353d79a","kfrydryx","2023-02-27 19:16:34","false","mtl: fill in subsequent measured cps and mcps data

Fill in measured cps consumption data for: mixin, mixout, copier,
peakvol, gain, src, updwnmixer for a range of supported formats.

Signed-off-by: Krzysztof Frydryk <krzysztofx.frydryk@intel.com>",59,57,1
"thesofproject/sof","aa6c0f2ad11fd4909fdeef375078b8bce3dc0aad","marc-hb","2020-03-28 04:19:20","false","topology: cmake: silence super chatty alsatplg unless VERBOSE=1

Successfully tested with both Make and Ninja on Linux.

Non-portable but approved by @jajanusz in former PR #2626

With this commit:

$                  make -C tools/build_tools/ | wc -l
    770

$ VERBOSE=anything make -C tools/build_tools/ | wc -l
  10387

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",66,22,0
"thesofproject/sof","5dea5aead900c2846f72e99409e33f208694fce7","marc-hb","2021-02-22 06:54:00","false","installer: add checktree target

Simple check of the ""tree"" output

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,33,0
"thesofproject/sof","05969a0e34dad0c0efc081c8eb30a5cf165abfc8","marc-hb","2022-04-26 20:55:34","false",".github: IPC4: build supported TGL platforms first

When the build fails we don't want to waste time wondering whether TGL
is affected or not. Other, unsupported platforms are only providing some
nice to have ""randconfig"" coverage (#5364), they're not important.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",115,47,1
"thesofproject/sof","60be65b567670b994bcdb252be6e34d7e165b15e","marc-hb","2021-12-01 20:06:06","false","check patch: allow C99 comments

This is a logical revert of eb45907

Based on recently merged #4941, C99 comments are now OK. I never found
any rationale or even written down coding style for excluding them in
the first place.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",130,42,1
"thesofproject/sof","ff69d28210bb75510a353dc2f0c64be166056165","marc-hb","2021-06-01 05:09:11","false","dma-trace.c: remove misunderstood trace_flush() after FW ABI banner

Fixes commit 6c14e76c0d983 (""trace: Log FW ABI and hash numbers"").

In June 2020, PR #3195 added a tr_info() ""banner"" immediately after to
make sure tracing works.

That commit included a likely misunderstood trace_flush() call
immediately after the tr_info(). The very poorly named trace_flush()
function sounds like earlier scheduling of something that would the same
later anyway but that's absolutely not what it does. Instead it copies
pending DMA traces to the shared mailbox.

This was most likely why the FW ABI banner is randomly duplicated in the
etrace from time to time, see for instance:
https://sof-ci.01.org/linuxpr/PR2954/build5823/devicetest/?model=BYT_MB_NOCODEC&testcase=test-speaker
https://sof-ci.01.org/softestpr/PR666/build721/devicetest/?model=TGLH_RVP_HDA&testcase=check-sof-logger

Note this test failure is unrelated. For now this CI does not read
etrace unless there's a failure.

In August 2020, commit 67a0a6937c87 (""trace: Trace initial message as
error logs"") upgraded this banner from tr_info() to tr_err(). That made
sure it gets to both the mailbox and the DMA trace but it didn't remove
the trace_flush(). Remove it now.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",83,36,0
"thesofproject/sof","4593e60b822adcc5d3dbfdc3e076d93c4d241c20","lyakh","2019-01-10 13:31:18","false","sue: fix several alignment issues

Fix several indentation violations in memory.h

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",57,7,0
"thesofproject/sof","b15a0418d47ed32a3e284909395664854e3b077b","lyakh","2022-08-02 10:37:27","false","component: delete stale pointers when freeing components

Freeing components and buffers is performed one by one from IPC
commands, sent by the host. When a component is freed, buffers,
connected to it might still exist and keep pointers to the component,
that is being freed. Then, for example if such a buffer is also
connected to a mixer from a different pipeline, that other pipeline
might still be active. Then the mixer might walk its connected
pipelines and come across the no longer existing component. Remove
those stale pointers to avoid such issues.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",112,50,1
"thesofproject/sof","193f9118e8f097d057c211644fa4df1423469959","lyakh","2022-05-31 12:27:11","false","dai: let DAI drivers access the underlying component object

DAI drivers sometimes need to access the underlying component object.
Make this possible by adding a pointer to struct dai_data into struct
dai and to struct comp_dev into struct dai_data and by assigning
those pointers accordingly.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",113,48,1
"thesofproject/sof","6b3050918aec1e7e7dfd22e0ade78b5eed6bab5b","lyakh","2023-01-25 13:36:48","false","probe: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register probe with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","72ad230056002c8122650e872d433002fc8704be","lyakh","2022-09-30 14:34:23","false","ipc4: print incoming IPC messages

Similar to IPC3, seeing all IPC messages in the log is very useful
for debugging, e.g. when matching kernel and firmware logs. Use a
format similar to IPC3.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",98,52,1
"thesofproject/sof","27fbd8c5ec8e82e5456c152b4706342281811805","lyakh","2019-02-13 14:10:51","false","idc: move code from a header to a .c file

src/arch/xtensa/smp/include/arch/idc.h has way too much code for a
header, it is included by platform/idc.h on various platforms, and
that header in turn is included by bultiple .c files, which builds
the code multiple times into the firmware. Move it to a C file.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",60,8,0
"thesofproject/sof","37ad90ba1c61daedd459a59b4d900e4ce14883cd","udaymb","2021-12-29 13:03:37","false","topology2: cavs-nocodec: support for the remaining 2 devices for nocodec

Current cavs-nocodec support only 1 playback device
This is to support 2 playback/capture devices.
Due to this, DMIC is moved PCM from 1 to 3

Signed-off-by: Uday M Bhat <uday.m.bhat@intel.com>",115,43,1
"thesofproject/sof","25c50fd4436759bd0542081a3d46a0bb5da835b7","mrajwa","2019-06-14 09:45:30","false","memcpy: fix bug in arch_memcpy_s for host arch

arch_memcpy_s has wrong check condition for
overlapping sections. The copy from adjacent memory
bloks will result in dsp panic while it should be
allowed. This patch fixes the issue for host
architecture.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",47,12,0
"thesofproject/sof","7a2f8c20777caac678b53810da37875bea3ac2fe","lgirdwood","2018-07-21 13:41:01","true","Merge pull request #138 from ranj063/ctx-restore

ipc: fix ipc reply for CTX_RESTORE",13,2,0
"thesofproject/sof","b1dec44124d09e741a6705a94d67bc01959c30c7","ymdatta","2020-07-23 14:31:46","false","tools: testbench: initialize pointer before freeing it

When we try to free a pointer which is not initialized, we are
using a value in the program which is undefined. So, initialize
the pointer variable, so that in future, when we free the pointer
it won't cause a problem.

Signed-off-by: Mohana Datta Yelugoti <ymdatta.work@gmail.com>",77,26,0
"thesofproject/sof","2cbdf84480c9d62a93810ffc6028ce0486513867","jajanusz","2019-12-17 10:04:34","false","Revert ""kpb: move validation of host params to prepare()""

This reverts commit 2796310f89a59e6c3c7c5e68f639ebe33dc398cb.",69,18,0
"thesofproject/sof","ce78753e8a9d4b6d9c21dd6fcbaa40bb1efb64e8","tmleman","2023-07-19 08:46:39","false","component: comment code style fix

Comment style correction after adding a new field in the structure.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",32,62,1
"thesofproject/sof","826e361e7a0c0d41cdf200ce16a62d734370b49e","plbossart","2019-04-09 19:51:37","false","CMake/rimage: add option to use out-of-tree private key

On specific Intel platforms, we have to use a private key which is not
shared with the rest of the world.

Extend xtensa-build-all.sh with an option, and pass the key path
explicitly to cmake if needed.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",48,10,0
"thesofproject/sof","28c3fd742800ebf2577a8f688378a9ccb2337fd6","plbossart","2020-07-28 15:12:47","false","Revert ""idc: set budget for IDC task""

This reverts commit 443319a7186b47b8e51fad4ee481b57bcabf476d.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",79,26,0
"thesofproject/sof","9836a62bd9e90b9bd17f0f567c63f8df9e8e0fcc","lrgirdwo","2021-04-25 20:09:28","false","ipc: abstraction: add support for other ABI major versions

Add a generic header type and update the mailbox and command handler
logic to accept generic headers. Generic header type should also support
the existing compact message API and expand it to other platforms.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",88,35,0
"thesofproject/sof","4ad833098ba7cd80dac02c457a757d5f5d1735ff","dbaluta","2022-03-28 11:36:38","false","LICENCE: Add clarification for dual license files

We often need to include interface files from other projects. When the
projects are dual licensed we always go for the more permissive license.

Suggested-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",112,46,1
"thesofproject/sof","77904bacf905f9d8739672eab5b49344ed95cd2e","btian1","2023-05-09 02:16:24","false","ipcgtw: split the ipcgtw_params function

Split the ipcgtw_params() function and add a new helper,
ipcgtw_zephyr_params() that can also be invoked from the copier device.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",53,59,1
"thesofproject/sof","e11a6074b27183f88c4ec2e829cf1e1349e978dd","akloniex","2019-08-22 21:52:14","false","dma: Change dma_channel_get interface to return struct dma_chan_data*

Expose dma_chan_data as handle for dma channel operations, instead of
integer index.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",55,15,0
"thesofproject/sof","cc717a539ee1c644eee99c9552a8612df0373bcc","keyonjie","2019-06-27 10:15:52","false","sof-ctl: add separated function for control set/get

Add a separated function ctl_set_get() for tlv set/get, and call it from
main().

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",46,13,0
"thesofproject/sof","7764a8bd3162e35f8ca231373620775e164c88ed","cujomalainey","2021-05-03 23:38:14","false","manifest: close file on error

found via cppcheck

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",81,35,0
"thesofproject/sof","83343c51bb8703ba8fd2d5233dc8a74fc1443dce","jxstelter","2023-07-06 10:37:06","false","lnl: app: Fix configuration for D3 flow

LNL configuration must be updated to fix D3 flow
on ACE 2.0 platform.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",31,61,1
"thesofproject/sof","4269b7226afa2c918410e59f95035be56bcd131e","cujomalainey","2023-02-16 21:28:02","false","arch: xtensa: add core-isa to compiler_info

We need this as part of a generic compiler_info so we can handle HiFi
flags in a generic arch include

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",53,56,1
"thesofproject/sof","98e6c6625f455b6d322468ba5513ef48d2e9ec30","andyross","2023-06-22 19:00:39","false","audio/selector: Don't assert on input-controllable memcpy_s failure

The size argument to the memcpy_s() here is under the control of
external data and can fail on garbage.  That needs to be a runtime
failure, not an assertion.

Signed-off-by: Andy Ross <andyross@google.com>",42,61,1
"thesofproject/sof","77dad39cc4c2dde25ec24908dcc9f1a31ab19668","andyross","2023-05-23 19:20:26","false","github/workflows: Remove old fuzzing check

This has bitrotten vs. the newer code upstream at oss-fuzz, involves
an expensive docker container build, and provides little value vs. the
newer fuzz.sh script that runs in the regular CI containers.

Let oss-fuzz handle the deep validation.  We should be using fuzzing
as a smoke test via the existing scripts.

Signed-off-by: Andy Ross <andyross@google.com>",55,60,1
"thesofproject/sof","de100b7d2823e0496a0cad055625063204d0d585","jajanusz","2018-07-10 13:25:33","false","test: fix CFLAGS and LDFLAGS warnings

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",14,1,0
"thesofproject/sof","a8d33b2d3678e7834d1e083a7246f6f59e5bbf2b","jajanusz","2019-01-30 06:47:10","false","rimage: cast size_t to correct format types

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",56,8,0
"thesofproject/sof","79bbca113daf3ab08b18dd47d3fbb98652d73fb5","jajanusz","2020-01-07 11:11:30","false","platform: remove unused mn functions

These functions are unused and can be deleted.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",71,19,0
"thesofproject/sof","41dfc80e484a7d4e3b5c4c2cd8cfb7c9df29a8aa","wenliangwu","2022-11-11 07:34:00","false","platform: mtk: add afe-platform support for mt8188

Add mt8188 AFE common header and register header files.
Add AFE platform for mt8188 audio.

Signed-off-by: Trevor Wu <trevor.wu@mediatek.com>",97,53,1
"thesofproject/sof","0bf3d3aa10737bf91195d6d6c038a34fae8abdae","lyakh","2022-04-12 06:38:54","false","waves: fix a typo

This fixes an ""undefined variable"" compilation failure.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",117,46,1
"thesofproject/sof","5a5d82eeb3ae4be57e94211a90a00970da0d65cb","lyakh","2021-04-30 15:25:36","false","cavs: (cosmetic) remove superfluous parentheses

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",82,35,0
"thesofproject/sof","084b851e33069dbff3a8b9440f5a0c92fac81a69","lyakh","2021-04-30 12:20:28","false","zephyr: fix multicore booting and status management

sof_main() doesn't run on secondary cores. Instead we provide
a new function, that initialises a dummy thread, runs SOF
initialisation by calling secondary_core_init() and switches
over to the dummy thread.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",82,35,0
"thesofproject/sof","2aa9527d0a81901b8b21b317ccdc90de5434ebbf","marc-hb","2022-12-06 00:12:12","false",".github/sparse: use --pristine

--pristine makes no difference for github but it's a good for anyone
trying to reproduce results and copying the command.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",102,54,1
"thesofproject/sof","c14a052534c430f9892723a640d21afb1e91f413","softwarecki","2022-12-29 14:43:48","false","zephyr: ll: watchdog: Add watchdog support in ll domain

Added a new LL_WATCHDOG option to the platform Kconfig. Created library
header for watchdog in ll. Added watchdog support to zephyrs ll scheduler
domain.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",93,55,1
"thesofproject/sof","0c7db9a58ea69d88ac571114ac923bef296c7e1c","marc-hb","2023-04-25 17:47:37","false","Revert ""scripts/docker-run.sh: run with sudo-cwd.sh""

This reverts commit 80e9c3454a0a048704f863a52443b536a27a2410.

This was merged too early, there are still build issues and failures
to solve first, notably issues caused by the now missing
xtensa-cnl-elf-gcc

https://github.com/thesofproject/sof/actions/runs/4789961860/jobs/8518459642
https://github.com/thesofproject/sof/actions/runs/4789961859/jobs/8518459155
etc.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",52,59,1
"thesofproject/sof","78f4fd7de90774df80999848bb66afc5222b4490","marc-hb","2022-04-21 23:52:35","false","tools: stop copying v2 topologies to the v1 directory

STOP copying all files
 from dir: sof/tools/build_tools/topology/topology2/cavs/
 to dir:   sof/tools/build_tools/topology/

The original plan discussed in the reviews of commit c0bee428aea3da
(""topology: prepare for Topology2.0"") and commit 308a24a92b44
(""topology2: Add build support"") and more recently
mentioned in #4611 was to overwrite in place some v1 topologies with
newer v2 topologies in order to ""force"" users to upgrade without them
realizing it. This original plan is now being abandoned. v2 topologies
will never overwrite v1 topologies and if ever then certainly not ""en
masse"". Moreover, v2 topologies will be placed in a new /lib/firmware/
subdirectory. So, partial revert the aforementioned commits. More
specifically. stop installing v2 topologies into the same directory as
v1 topologies.

Note there had never been any actual overwrite of any v1 topology yet
because there had never been any v2 topology of the same name.

At this point in time this gets rid of the following copies:

tools/build_tools/topology: abi.conf
tools/build_tools/topology: cavs-mixin-mixout-hda-2ch-cnl.conf
tools/build_tools/topology: cavs-mixin-mixout-hda-2ch-cnl.tplg
tools/build_tools/topology: cavs-mixin-mixout-hda-2ch-tgl.conf
tools/build_tools/topology: cavs-mixin-mixout-hda-2ch-tgl.tplg
tools/build_tools/topology: cavs-mixin-mixout-hda-4ch-cnl.conf
tools/build_tools/topology: cavs-mixin-mixout-hda-4ch-cnl.tplg
tools/build_tools/topology: cavs-mixin-mixout-hda-4ch-tgl.conf
tools/build_tools/topology: cavs-mixin-mixout-hda-4ch-tgl.tplg
tools/build_tools/topology: cavs-mixin-mixout-hda.conf
tools/build_tools/topology: cavs-mixin-mixout-hda.tplg
tools/build_tools/topology: cavs-passthrough-hdmi.conf
tools/build_tools/topology: cavs-passthrough-hdmi.tplg
tools/build_tools/topology: cavs-sdw.conf
tools/build_tools/topology: cavs-sdw.tplg
tools/build_tools/topology: cavs-tgl-nocodec.conf
tools/build_tools/topology: cavs-tgl-nocodec.tplg
tools/build_tools/topology: nhlt-ace-mtl-nocodec.bin
tools/build_tools/topology: nhlt.bin
tools/build_tools/topology: nhlt-cavs-tgl-nocodec.bin
tools/build_tools/topology: sof-mtl-nocodec.conf
tools/build_tools/topology: sof-mtl-nocodec.tplg

From an ""installer/"" and sof-bin release perspective, this removes the
following topology that was just added by commit
ba26eeff9df6 (""topology2: cavs-nocodec: Add support for MTL nocodec
topology""). Installing v2 topologies into a new /lib/firmware/
subdirectory has not been implemented yet.

No other change besides dropping these copies, everything else is the
same.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",114,47,1
"thesofproject/sof","52223eba2d45707ca54bc513df0b99cdd866661d","marc-hb","2022-12-22 19:20:54","false",".github/zephyr: docker pull in a separate step

This saves a lot of scrolling in the next, most popular build step.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",92,55,1
"thesofproject/sof","e1d6b9a08a1510ca8ae622503eb870293ecb8d0e","marc-hb","2022-08-17 19:59:39","false","topology2: build only when alsatplg is v1.2.7 or greater

Fixes: #5323

The v1.2.6 requirement was a lie the whole time because alsatplg v1.2.6
does not have any `-I` option. The truth was: un-released alsa-utils
from git was required. The check for v1.2.6 was an approximation good
enough for many users but not for everyone, see for instance #5323.

Now that alsa-utils v1.2.7 has been released we can stop lying:
 https://github.com/alsa-project/alsa-utils/commit/7d934f3142549

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",113,51,1
"thesofproject/sof","8b7cefedb5694235a224b066b5318c236d90ab96","xiulipan","2020-01-16 10:16:26","false","CI: travis: add IMX8X build check

Enable imx8x build check in travis.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",76,19,0
"thesofproject/sof","bd205292a339d29a5208ac60d8c7c0c800cea627","andrula-song","2022-07-19 06:57:50","false","Audio: Pcm_converter: Optimize the signed type converter functions

Deprecate the usage of circular buffer check while doing convert, and
use 2-way and 4-way xtensa instructions first to optimize the converter
functions, and process the left samples one by one to avoid potential
risk of memory access overrun. Here are the results:
Optimize pcm_convert_s16_to_s24 and save about 38% cycles;
Optimize pcm_convert_s24_to_s16 and save about 25% cycles;
Optimize pcm_convert_s16_to_s32 and save about 39% cycles;
Optimize pcm_convert_s32_to_s16 and save about 40% cycles;
Optimize pcm_convert_s32_to_s24 and save about 38% cycles;
Optimize pcm_convert_s24_to_s32 and save about 47% cycles;

Signed-off-by: Andrula Song <xiaoyuan.song@intel.com>",115,50,1
"thesofproject/sof","12e11b7693f04c1658b7e3280d4e1d9ff9d4d551","xiulipan","2018-12-03 08:02:54","false","scripts: enable tools test build

When pass -t, we will run make tests to build test topology.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",39,6,0
"thesofproject/sof","6c84639bb36353230ce87d913571102d94282933","tlauda","2020-01-20 15:00:34","false","ipc: add new fields to ipc_comp_dev

Adds new fields to ipc_comp_dev structure: core and id.
ipc_comp_dev instances are shared among cores, so the data
from here can be easily accessed by SMP code.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",80,20,0
"thesofproject/sof","b49080c78443a03e3d62f30d8b4bdd7e25024efa","tlauda","2020-06-26 06:41:39","false","mixer: reset additional check is only needed for playback

Limits additional check in mixer_reset to playback streams only.
For mixer in capture streams the request will always come from downstream,
which means that source components will always be in state >
COMP_STATE_READY. Checking sink component also doesn't make,
because it's the source of the request. The logic is now similar
to the mixer_trigger, where for capture streams we also don't require
additional checks.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",70,25,0
"thesofproject/sof","bd6467b7077bc07f680d77be3e9bd1062d3def3d","tlauda","2020-01-21 11:38:03","false","mn: put static variables into common struct

Puts all used static variables into common mn struct.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",79,20,0
"thesofproject/sof","d2b0823daa3e316bafe4f76a017211aa6f899029","tlauda","2019-12-18 11:26:35","false","alloc: add method for getting shared memory

Adds platform implementations for getting shared memory.
Uncached tranformations are not very generic, since not all
platforms have such memory region.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",73,18,0
"thesofproject/sof","63eda919d3fd5f40d097804bdd13c25fb3ac24ac","kv2019i","2021-08-10 13:40:24","false","zephyr: unify CTX_SAVE handling for Zephyr

Clean up the ifdefs for ipc_pm_context_save(). By implementing
platform_timer_stop() in the Zephyr wrapper, the original context
save sequence can be used also for Zephyr builds.

By doing this, we can fix issues with IPC timeout on CTX_SAVE.
Disabling all interrupts before the IPC reply is needed also on
Zephyr.

BugLink: https://github.com/thesofproject/sof/issues/4507
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",117,38,0
"thesofproject/sof","6eb79af18c7c8d6cefa4b8c80781fdeafd40adbb","tlauda","2019-05-07 16:41:15","false","ipc: fill timestamp resolution in sof_ipc_stream_posn

Fills timestamp resolution in sof_ipc_stream_posn structure.
This field has been never set before.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",55,11,0
"thesofproject/sof","95b896b08484d5625d9603fad6b135a1e3b2331a","tlauda","2019-04-05 13:19:54","false","smp: remove dedicated stacks for medium lvl interrupts

Removes dedicated stacks for medium lvl interrupts
as switching between different levels of irq doesn't
work correctly and requires more complicated
context switch implementation. We already have stack
per core used for runtime and level 1 interrupts and
currently its size is enough to also support other
irq levels (see UP arch).

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",48,10,0
"thesofproject/sof","63a552992caa833ef9ac106037ca0106eab75fb8","tlauda","2019-10-14 14:07:09","false","topology: revert media pipes to 4000 scheduling period

Reverts all changed media pipelines to again have 4000 ms
scheduling period. Change was introduced in order to workaround
firmware scheduling limitation, but with pipelines scheduled
separately we can revert it back.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,16,0
"thesofproject/sof","c504315f6f9b032e4402cd86247b884be09d8ac0","tlauda","2020-01-17 09:38:55","false","cavs: make cpu timer shared

Makes cpu timer shared. It can be used by multiple cores.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",79,19,0
"thesofproject/sof","dcc41ffac6548e4be1c76a001ce04693cfa28679","marcinszkudlinski","2023-09-07 10:02:18","false","comp: remove buffer_acquire from component.h

remove 2 inline functions
comp_get_copy_limits_with_lock
comp_get_copy_limits_with_lock_frame_aligned

this is a continuation of changes
from commit 4a036999118cfa7e491cbefc8eb6b737f50b7e33

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",21,63,1
"thesofproject/sof","bd6db82eebc06d3e9287fc272b810269b6b8b8a6","singalsu","2021-07-07 11:54:24","false","Tools: Tune: TDFB: Do not include plot figures to saved .mat files

This saves disk space from unnecessary data.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",88,37,0
"thesofproject/sof","e6c3decd38fdaa773e0c06db61a0b8dee2850fb2","marcinszkudlinski","2023-09-15 12:32:48","false","dp_queue: buf calculation size, add list, cosmetic changes

buf calculation size has been changed to be always 2xmax(IBS,OBS)
to allow free read/write in various data chunk sizes
and execution periods (of course in/out data rates must be same)

detailed examples in dp_queue.h file

method and fields allowing connection dp_queues to a list added

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",20,63,1
"thesofproject/sof","d371135a630eaf63520f7dcb62b74448d52e2bcc","singalsu","2023-02-21 13:15:18","false","Tools: Topology2: Add IIR high-pass with gain to DMIC capture

This patch replaces in DMIC0 capture the gain.N.1 component with IIR
high-pass. The gain has been a placeholder
dai-copier-gain-module-copier-capture.conf while the EQ component has
not been available. The pipeline is replaced by
otherwise similar dai-copier-eqiir-module-copier-capture.conf.

The dmic-default.conf sets the default IIR response to 40 Hz
high-pass with 0 dB gain. The topologies will get only the high-pass
filter but no amplification.  The default is changed in
sof-hda-generic.conf to 20 dB gain to address the too silent capture
because these topologies for generic Linux end users do not contain
any other capture enhancements.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",56,57,1
"thesofproject/sof","53f90d9c6a49b466a6689e83413b92195b6961c7","singalsu","2018-10-04 13:57:11","false","Topology: DMIC: Reduce PCM capabilities to DMIC configuration

This patch impacts topologies sof-apl-nocodec, sof-apl-da7219, and
sof-glk-da7219 those use the pipe-passthrough-capture macro for DMIC.

The PCM saple rate is limited to 48 kHz (was 8 - 192 kHz). The capture
channels count can be only PIPELINE_CHANNELS (was 1 - PIPELINE_CHANNELS).
This prevents corrupted audio capture that happens when DMIC topology
parameters and capture parameters differ. It happens because DMIC FIFOs
drop samples or add unwanted samples when the configuration does not match.

In sof-apl-nocodec topology the PIPELINE_CHANNELS is set to 2 that
matches the configuration.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",34,4,0
"thesofproject/sof","a716056c4bdbbec011b8027e9e813a23859146d2","bkokoszx","2020-04-08 08:01:32","false","tgl: use additional CHANNEL define in rt711 + rts1308 tplg

This commit adds CHANNELS define in sof-tgl-rt711-i2s-rt1308.m4
topology in order to properly set pipeline pcm channels and dmic
configuration (STEREO_PDM0 or FOUR_CH_PDM0_PDM1 mode).

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",83,22,0
"thesofproject/sof","ae0113287a2c536cb7ac5ac4c2f7953935f47f6d","balakishorepati","2021-09-15 07:33:34","false","platform: amd: renoir: Add debug support for renoir

Add panic code to dump required info during
firmware exceptions.

This patch enables to dump the call stack, debug info
and inform host driver for exceptions in firmware.

Signed-off-by: balapati <balakishore.pati@amd.com>",117,39,0
"thesofproject/sof","4f66db1ca6758a65115d0b09993093896adbde44","ktrzcinx","2019-11-07 08:02:14","false","kconfig: src: selective build by CONFIG_FORMAT

Include in footprint only support for selected
data formats. It may make footprint lighter.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",53,17,0
"thesofproject/sof","354ff5ccf9189d338200de98dca3d304e0583bfd","ktrzcinx","2020-03-23 06:15:45","false","tools: logger: Skip double error logs to stdout

When out_fd points standard output then error message shouldn't be
duplicated - duplicated messages only make logger output more messy.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",66,22,0
"thesofproject/sof","f1ceb6305bb90a15addf4eb9024ee730913ed5fd","ktrzcinx","2020-06-22 12:00:37","false","component: Writeback cache after status change

Component like mux checks component state in every copy_call,
so when running mux and connected component on another cores,
then status writeback is needed.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",73,25,0
"thesofproject/sof","e087ed7aa4c77edab33a48132fd950f2a6502456","ktrzcinx","2020-03-25 06:40:45","false","tools: logger: Align logs header to content

Double space in formatting string led to little mismatch between header
and content in output logger file.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",65,22,0
"thesofproject/sof","4d13fdf43e94de03002a1d81112e65e24f67798b","cujomalainey","2020-03-29 03:15:31","false","Add CODEOWNERS for DCBlocker

Add Google owners as owners of imported code

Signed-off-by: Curtis Malainey <curtis@malainey.com>",66,22,0
"thesofproject/sof","db09bb8058f85f6cd451c6393cbb12f5e2e7469b","cujomalainey","2020-09-22 00:06:39","false","dcblock: fix reset handler

Reset state when reset trigger happens and use memset to do it

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",67,28,0
"thesofproject/sof","d660742d410cb69755b9a2f48b73a1826d2a7a96","iuliana-prodan","2021-04-07 18:13:06","false","topology: imx8: add src component with cs42888 codec

This topology works on i.MX8QM and i.MX8QXP with cs42888 codec.
It adds the Sample Rate Converter component for both playback
and capture.

The SRC topology can be used for test bench and real device usage.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",79,34,0
"thesofproject/sof","f574b71f5581dcfab1f784a33bc13ad130c298c9","lgirdwood","2018-10-01 19:39:02","true","Merge pull request #448 from tlauda/topic/smp-fix-ut

ut: fix tests on xtensa-smp",34,4,0
"thesofproject/sof","f9e6adfd9c58d789bbf148b83e004e5fdd4b97f9","lgirdwood","2018-07-09 21:48:33","true","Merge pull request #73 from tlauda/topic/hda-bf

hda-dma: wait for buffer full after starting render",13,1,0
"thesofproject/sof","69d109e489410a09e034ad426aeea468ec208aee","lgirdwood","2018-11-21 15:40:27","true","Merge pull request #136 from mengdonglin/topic/rm-apl-hdmi-only-m4

topology: Remove sof-apl-hdmi.m4",39,6,0
"thesofproject/sof","3366b8daf622a31afa6e006ff9087a752f4514fb","lgirdwood","2018-09-19 19:31:35","true","Merge pull request #393 from jajanusz/tests-pipeline-fix

test: pipeline: update mocks",36,4,0
"thesofproject/sof","240b067d0d08203529279ecf5638ed153e47ce8f","mrajwa","2020-04-01 08:53:03","false","kpb: change the name of draining data structure

This patch changes the name of ""dd"" structure to
more meaningful ""draining_data"". Therefore code
is more readable.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",71,22,0
"thesofproject/sof","3f3d7c04735e71dcfb5eb8f643e5aa5c8f02d86f","lgirdwood","2018-10-25 15:43:06","true","Merge pull request #505 from RanderWang/link-dma-id

hda: set correct link dma channel",27,5,0
"thesofproject/sof","ec2d1cd52d1986fbd552f242f3879400097b18ca","mrajwa","2020-04-01 09:58:10","false","kpb: add condition for buffering

This patch adds the condition that if we are
in draining or init draining state and
pipeline_copy() appeared before we actually
started the draining, plus the amount of new data
can overwrite the data staged for draining then
we should postpone buffering procedure for next
period. At that time we assume draining task will have
already drained some samples therefore making a space
for new ones.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",71,22,0
"thesofproject/sof","9f746c01c068b00ca889db440685e9d8300eb85e","mrajwa","2019-07-25 20:10:25","false","kpb: extend internal states

This commit adds more detailed states into KPB

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,14,0
"thesofproject/sof","ea04cb816e40a8cacf241a0ead8fc56d6a5529bb","dcpleung","2020-04-05 09:03:14","false","Remove cmake option SOF_SOURCE_DIR

Since both fw.h and manifest.h are being used in the main SOF
repo and also here in the standalone rimage repo, to prevent
them getting out of sync, the SOF main repo is going to use
the ones coming from the rimage repo. So there is no need for
the option anymore.

Signed-off-by: Daniel Leung <danielcp@gmail.com>",80,22,0
"thesofproject/sof","9b9f8f9521d0880a3529a86ea63f09be5f7b35c1","keyonjie","2018-11-30 10:58:46","false","ipc: apl: add mask check to make sure ipc handle correctly

We have already add interrupt mask check for new message from host,
let's add the symmetric check for reply message also.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",40,6,0
"thesofproject/sof","f29234fba8ac13ad45951a9c8f85f718b8ae0b48","ranj063","2021-11-02 19:51:14","false","topology2: volume-demux-playback: Add all includes

Include all dependencies to be able to build the conf file individually.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",125,41,1
"thesofproject/sof","c9c1b225e30304e2af418c20dcae96932058ecc4","marc-hb","2020-05-30 04:14:08","false","Kconfig: use relative 'rsource' paths so SOF can be a Zephyr module

As documented in https://docs.zephyrproject.org/2.2.0/guides/modules.html,
Zephyr and Kconfiglib support merging Kconfig menus across multiple git
repos. This requires relative inclusion paths.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",97,24,0
"thesofproject/sof","d6906d3aebd1f028203e29bd2192411353f5db8e","marc-hb","2022-08-03 09:05:46","false","installer: add rpl and rpl-s aliases to tgl and tgl-h

rpl firmware is tgl but signed with a different key

This commit adds the following files and links below

$ tree installer/staging/sof |
     grep -e tgl  -e rpl -e community |
     grep -v -e adl -e ehl

├── community
│   ├── sof-rpl.ri -> sof-tgl.ri
│   ├── sof-rpl-s.ri -> sof-tgl-h.ri
│   ├── sof-tgl-h.ri
│   └── sof-tgl.ri
├── sof-rpl.ldc -> sof-tgl.ldc
├── sof-rpl.ri -> intel-signed/sof-rpl.ri
├── sof-rpl-s.ldc -> sof-tgl-h.ldc
├── sof-rpl-s.ri -> intel-signed/sof-rpl-s.ri
├── sof-tgl-h.ldc
├── sof-tgl-h.ri -> intel-signed/sof-tgl-h.ri
├── sof-tgl.ldc
└── sof-tgl.ri -> intel-signed/sof-tgl.ri

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",110,50,1
"thesofproject/sof","cb4cb1d0a2738811c0eaaabe23d7a9d22005c5bd","marc-hb","2023-01-12 20:09:36","false","CODEOWNERS: search/replace @mrajwa -> @abonislawski

Dumb search/replace per @mwasko's request in #6933.

Urgently required because the @mrawja account does not exist anymore and
Github complains.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",55,55,1
"thesofproject/sof","428804e1cb564161d36feb20f98c8a9a6512048d","marc-hb","2020-05-22 00:51:21","false","scripts/qemu-check.sh: add set -e

qemu always times out and fails, ignore that.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",99,24,0
"thesofproject/sof","10251c5037467babe835dcdb5305cd89c21b4e7e","lyakh","2022-12-20 07:06:51","false","data-blob: fix a NULL dereference

If the main context variable is NULL, it cannot be used to print an
error message. Since this actually should never happen, use an
assertion similar to other similar cases in the file.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",92,55,1
"thesofproject/sof","a85dbaf592cdc2cc1c6ce1910b958b0ee424fa18","lyakh","2022-02-09 11:58:05","false","sparse: add __sparse_cache annotations to buffer locking functions

buffer_acquire() and buffer_release() convert between cached and
uncached addresses. Add the sparse __sparse_cache annotation to them to
track down any API misuses.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",108,44,1
"thesofproject/sof","80eadcd3c0c563ae6d4b2b199efa89c45e073a8d","lyakh","2021-02-01 13:18:52","false","timer: rename platform_timer_get_noirq to platform_timer_get_atomic

The ""noirq"" suffix in function names is often used to signify,
that when this function runs, interrupts will not occur. See
e.g. suspend_noirq and other similar methods in the Linux kernel.
Use ""atomic"" to indicate, that the function itself will run
atomically.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",68,32,0
"thesofproject/sof","1e4ff1ed5bad51f227c726996615080621489579","lyakh","2021-04-30 10:28:34","false","perf: (cosmetic) use a high level API function

Call timer_get_system() instead of arch_timer_get_system().

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",82,35,0
"thesofproject/sof","f141b6017e9c5344f77d70bed2e3e02902da6c64","lyakh","2023-02-16 14:07:43","false","module-adapter: simplify buffer counting

num_input_buffers in module_single_sink_setup() and
num_output_buffers in module_single_source_setup() don't have to be
incremented inside the loop together with the loop counter i. Just
assign them after the loops.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","f59bb62e31ab04f7fd677325303350575599d608","marc-hb","2021-03-04 19:21:22","false",".github: add shallow checkpatch to Github Actions

Let's try to run checkpatch in an open-source and fast way while
leveraging Github's very good user interface.

Run checkpatch both with and without --strict; this has been a source of
confusion in the past, see
https://github.com/thesofproject/linux/pull/1988

Note this attempt does not rely on git merge-bases which has been found
to be not compatible with shallow cloning:
https://github.com/thesofproject/linux/issues/2556

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",73,33,0
"thesofproject/sof","1002899b95e28f7ff45ef738d32f703151f17e0a","marc-hb","2020-06-12 05:47:37","false","Use '-imacros config.h' instead of explicit #include <config.h>

Using -imacros on the compiler command line instead of explicitly
including config.h is not just less tedious in the future:
- it also makes sure configuration always comes first and is never
  accidentally missed by an earlier #include
- it makes sure all translation units get the (same) configuration
- it lets parent projects like Zephyr override the config.h name

To test this I ran ./scripts/xtensa-build-all.sh -a -r, compared
binaries before and after this change and found no output difference.

Full disclosure: this required a few unrelated tricks not submitted here
like a .tarball-version file, commenting out __DATE__ and __TIME__ in a
few places, running strip-determinism on the .a files because our
crosstool-ng reference is not cutting-edge, etc.

As Tigerlake is not built by default it required a couple more hacks to
compile.

Blank lines are left instead of the former #include lines so even debug
objects are the same.

Only defconfigs were tested. On the other hand, this commit was _not_
performed by a script but by changing the name of the generated file and
clicking on and fixing every build failure. This proves that every
removed #include was actually required by one or more tested defconfigs
and that the added -imacros flag does affect the compilation of all the
modified files.

There is no #include config.h left: they were all in use in at least
one _defconfig.

I think comparing all binaries produced by ./scripts/xtensa-build-all.sh
-r -a provides extensive enough coverage but note this was tested only
with the crosstool-ng toolchain described in the SOF documentation.

The obsolete[*] xt-xcc front-end is gcc-based and the newer xt-clang
front-end is (surprise) clang-based. clang (copies many gcc options and)
does support -imacros so I don't expect any issue with either xt-xcc or
xt-clang. In the worst case, I do not expect any compiler front end to
_silently_ discard any unknown command line flag nor to ignore a missing
or misnamed config.h file.

[*] https://github.com/zephyrproject-rtos/zephyr/issues/3165

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",72,24,0
"thesofproject/sof","225d8e3b86e6c9067a4af97b439742bb98f620d3","bkokoszx","2021-10-20 14:25:10","false","idc: allow idc_free() to disable only irqs

This commit:
- adds flags argument to idc_free() function;
- adds IDC_FREE_IRQ_ONLY flags, which allows
  idc_free() to disable only interrupts.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",123,41,1
"thesofproject/sof","010f60184cac18422f91fab653f4b4037b41f8c7","bkokoszx","2019-10-29 14:04:58","false","dma: remove spinlock_init() in dw_dma_probe()

Remove spinlock_init() in dw_dma_probe() function
in order to avoid memory leaks. spinlock_init() is
invoked in dmac_init() platform/*/lib/dma.c
files.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",65,17,0
"thesofproject/sof","19970d51d548474d2a66700f44ccbd06664347c5","kv2019i","2022-10-05 08:44:32","false","zephyr: app: explicitly use DEFERRED log mode

Calls to log messages are done in many places in SOF code,
including latency sensitive low-latency code paths. To minimize
the cost to low-latency path, use CONFIG_LOG_MODE_DEFERRED=y
by default for all SOF Zephyr builds. This will offload log
processing and output to a separate low priority thread.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",98,52,1
"thesofproject/sof","7b66c3026361a71bd80b89c87b623d0f1ed53b75","bardliao","2023-03-16 08:02:32","false","topology2: cavs-sdw: set capture host in_valid_bit_depth = 32

For some reason the input valid bit depth was 16. But the output
valid bit depth of the previous widget is 32. Fix it to 32 now.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",56,57,1
"thesofproject/sof","a4c663fbd77b3991d02b4b0e7c26077e5b65b978","singalsu","2020-02-21 17:35:32","false","Tools: Fix build of fuzzer due to testbench topology parser updates

This patch updates the load_aif_in_out(), load_dai_in_out(),
and load_pipeline() calls similarly as done for testbench to
prevent the Fuzzer build fail.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",80,21,0
"thesofproject/sof","ab8c150b9384e4c74b342fc9b77f086d9d6d2615","singalsu","2022-10-14 16:21:30","false","[SKIP CI] Tools: Test: Fix upper band limit in THD+N SRC test

This patch fixes the upper frequency for distortion plus noise
measurement. The min(fs1, fs2) leaves part of upper band unmeasured
and gives a too good looking THD+N performance figure when output
rate is higher than input rate. The proper way is to measure the
(near) full output rate bandwidth.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",99,52,1
"thesofproject/sof","6e2084ee8e78242dc0fc75cdb8975f7e234fe358","singalsu","2022-01-12 13:30:39","false","Tools: Tune: EQ: In mls_freq_resp wait longer for capture to end

The 3s wait was not enough long time to wait for recording to complete
before copy for analysis so the wait is increased to 5s. The total
recording lengths were variable and not same 7s for a completed
recording.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",117,43,1
"thesofproject/sof","0110241b0d41d3c009bead41a72ed61fd3b94bea","singalsu","2020-03-02 13:27:04","false","SRC: Remove non-used local variables updates

This patch removes redundant code. The local variables update were
remains of executing the changed if statements as while loop. Since
it is no more done the code can be simplified.

Reported-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>
Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",78,21,0
"thesofproject/sof","920dc98f95b5bbe3fc382b82390b2bc4ac63be0f","singalsu","2018-08-03 11:46:33","false","EQ FIR: HiFiEP optimized version

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",16,2,0
"thesofproject/sof","e82392e2461d260b777ecd78256bb828b11be858","singalsu","2021-07-22 15:07:54","false","Audio: Volume: Add state clear to reset() operation

This patch adds clear of all component data in reset() component
operation except state variables those are set by control
commands.

Note: If a new stream starts after reset() without free() and
new(), the clear of all component data would result to wrong
gain and wrong mute state. The driver commands are not re-sent
in such case.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",96,38,0
"thesofproject/sof","3f2ebb81d0aa1f086d77a4ec5ee13eb90421b3ae","singalsu","2023-10-02 07:55:48","false","Tools: Tune: TDFB: Add support for IPC4 and tplg2 blobs

This patch adds generation of.conf format blobs for tplg2
with IPC4 format blob. The blob ABI header retrieving is
changed to common helper functions path those already have
the support.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",16,64,1
"thesofproject/sof","671f79819d2560781105d29691ee49f506fa2049","andrula-song","2023-02-02 05:04:41","false","Audio: Mixer: Use frame aligned API

Use frame aligned API to reduce the division calculation in mixer
process function.

Signed-off-by: Andrula Song <andrula.song@intel.com>",52,56,1
"thesofproject/sof","98a911ed5320c1023c93dab0d8d1e71d1be634ad","singalsu","2022-09-05 11:33:01","false","Audio: TDFB: Fix suspicious looking Q_MULTSR_32X32 macro usage

This patch adds to header file sof/audio/format.h two new macros
for 16 * 16 fractional multiply. It's identical to 32 bit but the
name suggests that operands are 16 bit where case to int32_t is
sufficient for the product.

- The calculation of cd->max_frames is changed use Q_MULTSR_16X16()
- Max_lag calculation is added type cast to int64_t though it does
  not overflow with 48 kHz. But it could overflow with 96 kHz rate.
- A comment about 64 bit type is added to calculation of thr
- src_x and src_y calculation is done with Q_MULTSR_16X16()
- az_slow calculation is done with Q_MULTSR_16X16
- deg calculation is done with Q_MULTSR_16X16

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",118,51,1
"thesofproject/sof","917e64b8c5e6059d797ae3358cfd94abb8e3a0ad","tlauda","2019-06-12 11:05:50","false","component: remove min_bytes argument from comp_xrun methods

Removes min_bytes argument from comp_underrun and comp_overrun
methods. With the current way of copying as much data as possible
min_bytes doesn't say anything

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",49,12,0
"thesofproject/sof","4cd2af27bbb2fd989d065b3070b4b8094cc4bbd2","tlauda","2020-05-29 08:38:05","false","boot_loader: use existing memory power gating functions

Removes from bootloader duplicated memory power gating functions
and uses existing implementations from pm_memory.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",97,24,0
"thesofproject/sof","b73b9a64213240630d55e7b29ec19169727bd159","tlauda","2019-05-10 12:09:29","false","xtensa: fix check for XCC compilation

Fixes check for XCC compilation.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",58,11,0
"thesofproject/sof","ac3d83aeba729172d6ce14ece7b0824f12b65a8a","tlauda","2019-08-07 16:39:26","false","dma: fix DMA_ACCESS_EXCLUSIVE

Fixes DMA_ACCESS_EXCLUSIVE flag for getting DMA.
We should rely on number of DMA users rather than
number of DMA channels. DMA channels are incremented
during DAI config, so it can potentially happen long
after DAI creation.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",53,14,0
"thesofproject/sof","e6e886a9425c294930a1b599b214ddd54bf5bf73","tlauda","2019-10-30 12:48:17","false","kmod_scripts: add support for snd_soc_rt1011

Adds support for inserting and removing snd_soc_rt1011 codec
in kmod_scripts.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",62,17,0
"thesofproject/sof","9c732d4d5ccd8e3343b6191f3df6185421b3b4f4","tlauda","2018-08-28 09:26:43","false","alloc: byt: fix compilation error

Fixes compilation error on BYT.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",22,3,0
"thesofproject/sof","19db14e55f762f96ead263ab8c600b85fa3d5fbd","tlauda","2019-10-16 11:07:42","false","platform: remove PLATFORM_SCHED_CLOCK

Removes PLATFORM_SCHED_CLOCK definition as it's the same
as PLATFORM_DEFAULT_CLOCK.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,16,0
"thesofproject/sof","0a82b71a5b0381216394fad2bcad34018bdc1be1","tlauda","2020-04-08 11:43:10","false","volume: implement functions for getting zero crossing frame

Implements functions for getting nearest zero crossing frame.
They will be used to reduce zipper noise during volume ramping
by updating ramp only on such frames. In the current implementation
average value of all channels is used to check sample sign change.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",83,22,0
"thesofproject/sof","a3e01c805a747be1ee76b35195a7a99c30c656d1","tlauda","2020-01-20 11:50:08","false","test: don't use shared section and uncache for unit tests

SHARED_DATA macros doesn't put shared data into separate section
when unit tests are built and uncached memory region is not used.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",80,20,0
"thesofproject/sof","29f817ec747cb0bee36daa65857f9be25730e342","tlauda","2019-05-07 16:24:11","false","clk: rename clock_get_freq function

Renames clock_get_freq function to clock_get_nearest_freq_idx.
Previous name was confusing.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",55,11,0
"thesofproject/sof","9662439b8e6a2af7c7e262818f03e545dd7e593b","constantinraducanu","2020-03-04 14:57:52","false","alloc: Remove the unnecessaries spaces after casts

This commit removes the unnecessaries spaces after casts, fixing
the checkpatch error: ""No space is necessary after a cast"".

Signed-off-by: Constantin Raducanu <raducanu.costi@gmail.com>",79,21,0
"thesofproject/sof","114cd6f4c4677e263935439c4498444e20075933","softwarecki","2023-07-10 07:48:47","false","hifi3: aria: peakvol: Remove unused variables

Removed unused variables in aria_algo_get_data_even_channel and
vol_passthrough_s24_to_s24_s32.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",29,61,1
"thesofproject/sof","82e05a6d615d947a131c302b1b3f794351ace2d6","nashif","2023-10-18 11:22:27","false","platform: INTEL_HDA does not exist in the kconfig namespace

INTEL_HDA was removed in 59028ad3d136d1ff5030009e9727295363d1db9f

Signed-off-by: Anas Nashif <anas.nashif@intel.com>",12,65,1
"thesofproject/sof","428c654f62cf7cff9fc92c813538485e96557f1f","ranj063","2021-11-12 01:14:35","false","topology2: cavs-gain-hda: fix routes

Fix the typos in the routes to fix the DAPM graphs.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",127,41,1
"thesofproject/sof","40f2e2f7e456abececa0a059c7419aa6d1c0c9dd","ranj063","2022-01-11 00:41:04","false","codec_adapter: dts: change the memory allocation context

To pass the pointer to struct processing_module.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","457113a275ab6ba7cd9325e34eb12876a058a26e","ranj063","2023-05-20 17:21:57","false","topology2: components: Introduce a new class definition for ALH DAI copiers

Create a new class for ALH because they are different from the other DAI
types with DAI index being irrelevant. So, it would need a new naming
scheme that's more meaningful. For ex: dai-copier-ALH.SDW1-Playback.0

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",53,59,1
"thesofproject/sof","5e60b3721e157edabc2e25e8e27c6d41a01ca1b4","ranj063","2023-05-03 06:13:38","false","dai-zephyr: Support multiple sink buffers with single endpoint copier DAIs

Add support for single endpoint DAI copiers with multiple sinks by copying
from the DMA to all the sink buffers in a loop while using the right PCM
converter function. Modify the signature of dai_zephyr_copy() to pass the
array of converter functions to be used while copying from the DMA.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,59,1
"thesofproject/sof","863eb0a072da5f3bd8325ac4ae1ebbee643170ea","abonislawski","2020-04-23 13:02:43","false","cmake: merge BUILD_LIBRARY and CONFIG_LIBRARY

There is only one valid CONFIG_LIBRARY which can be
configured via kconfig

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",71,23,0
"thesofproject/sof","6a00221722178b77b26908b145fc354057b49960","ranj063","2023-02-01 00:05:26","false","topology2: common: Add new class definitions for input/output audio formats

The existing class definition for audio_format works only for widgets
with exactly 1 input pin (Pin index 0) and 1 output pin (Pin index 0).

Add two new classes that can be used to define the audio formats for any
pin. These classes use the same tokens are the existing audio_format
class and therefore can be used alongside the existing audio_format
instances with non-zero pin indices.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",51,56,1
"thesofproject/sof","0d542ae87e9663b647481d921f4c0bc399d2c5c1","ranj063","2021-11-12 01:26:57","false","topology2: cavs-gain-hda: clean up routes

Add the host<->gain route in the gain-playback/gain-capture
pipeline and keep only the top-level routes in the top-level topology
file.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",127,41,1
"thesofproject/sof","c5ac4a44b9cc1e8431852afcec9c13dfc0ad1257","marc-hb","2021-09-02 22:04:31","false","xtensa-build-zephyr: add tgl

Almost no difference with tgl-h for now but will grow later.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",119,39,0
"thesofproject/sof","9ec745b1de3e297236bfe34af0877b8db1f59aeb","RanderWang","2022-09-22 01:45:59","false","topology2: add common deep buffer support

It will be shared by I2S, HDA and SDW platforms

Signed-off-by: Rander Wang <rander.wang@intel.com>",96,52,1
"thesofproject/sof","a9c5a1bb78eb04ac0deb2bd5e94fef93797d701f","lyakh","2022-08-17 13:30:19","false","module_adapter: mark data buffers as cached

Module adapter code uses struct input_stream_buffer and
struct output_stream_buffer to pass generic data to individual
modules for processing. Further, modules implementing the
.simple_copy option pass a cached pointer to struct audio_stream
which is already acquired at the generic code level. That means,
that in those cases .data contains cached memory aliases. This
patch marks the .data pointer as cached.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",113,51,1
"thesofproject/sof","1ef769dd87618eba93c7ca07f0613c346ecd4922","lyakh","2021-10-20 14:23:39","false","zephyr: apl: further reduce heap size

Recent changes increased the size of various sections, breaking
linkage again. We need to make the linker calculate the heap size
automatically but until that is ready, reduce the heap size further
to fix the current breakage.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",123,41,1
"thesofproject/sof","0d4bfb386f4528223c09b1df73f226be5082bf45","lyakh","2019-02-20 08:03:33","false","idc: add a missing preamble

Add a missing preamble in a recently created idc.c

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",63,9,0
"thesofproject/sof","820fadae3930d1335bc22fda98633cc08c49b22d","marc-hb","2023-06-08 23:05:57","false","xtensa/CMakeLists.txt: simplify CONFIG_RENOIR/REMBRANDT logic

Use get_filename_component() to get the basename and remove the
$platform_folder special case for CONFIG_RENOIR and
CONFIG_REMBRANDT. Zero change, binaries are identical.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",46,60,1
"thesofproject/sof","0dba230832122da32bc10c8267658a0544bc41d1","marc-hb","2020-12-17 01:55:10","false","pkcs_v1_5_sign_man_v2_5(): add ""salt length"" comment

This comment is meant for ""git grep salt"", that's its main purpose.

Much more obvious timestamps aside, this new code is the only
non-deterministic part of rimage - learned the very hard way
(OpenSSL ""documentation"" calls it ""sLen""...)

A/B testing of build system changes is much, much easier when
locally and temporarily making the build 100% deterministic.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",73,30,0
"thesofproject/sof","277985e687870de4e61a7545703a18d9131c34c2","marc-hb","2022-08-25 22:29:39","false","tools: delete obsolete tools/.gitignore

We moved to CMake and out-of-source builds years ago.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",112,51,1
"thesofproject/sof","92fa7952d057dc41ac3c4ec952503a335468bae5","marc-hb","2023-10-20 22:53:35","false",".github/zephyr: time some fetch commands

GitHub conveniently times each step but to reduce step proliferation we
sometimes have multiple commands in a single step and lose the ability
to time download commands. Prefix them with `time` to restore the data.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",12,65,1
"thesofproject/sof","b63b8e992b0a902a04c9047dc2dd75b0cf9567aa","marc-hb","2021-07-25 00:51:38","false",".github: run unit tests with -DBUILD_UNIT_TESTS_HOST=ON

Because we can.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",99,38,0
"thesofproject/sof","a03e5386dc49f824264c86a4a27a6d398c505d04","marc-hb","2021-07-16 09:25:23","false","trace: add _log_nodict() and enable DMA trace for Zephyr

As of July 2021 we support (too) many tracing options and this
duplication is unfortunately the only way I found to support them all
while giving the compiler the opportunity to optimize away as many
strings as possible.

Supported configurations:

- Systems with limited memory and zero space for full strings, must use
  SOF dictionary only.
- Systems with enough space for all strings to be in memory.
- Anything in between

- Support to duplicate only important message to both the DMA and the
  mailbox (the default)
- CONFIG_TRACEM: supports duplicating ALL messages to both the DMA and
  the mailbox
- CONFIG_TRACEV: supports deleting verbose statements at compile time to
  save space
- CONFIG_TRACE: support turning off all traces at compile-time

- SOF dict trace de-duplication a.k.a. ""adaptive filtering""

- Dynamic log levels per component

- Redirection to Zephyr's shared memory tracing that requires full strings.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",92,37,0
"thesofproject/sof","6e98d9dde423c68d65471a17d1a01691d2780847","marc-hb","2020-08-10 19:01:58","false","CODEOWNERS: really add marc-hb to scripts

Fixes commit 757b13c123b1 (""CODEOWNERS: scripts/ += marc-hb"")

Also add *.bash which we don't use yet but should considering how
not portable is the vast majority of our scripts.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",75,26,0
"thesofproject/sof","6c70f1a92981abd3795011b620b1197c90e165c6","jajanusz","2019-01-30 20:25:53","false","cmake: tests: support prebuilt Cmocka

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",58,8,0
"thesofproject/sof","de41202f8fea84a6d454543d7d182d2f3e7e6d15","lrgirdwo","2020-04-15 12:23:35","false","zephyr: build: Add initial build support for SOF application.

Builds an initial Zephyr SOF audio module. This will be the starting
point for the porting work.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",82,22,0
"thesofproject/sof","a97804f9e9138c6d6587dcf8c2088194ccab4adb","DianaGabriela27","2019-03-06 12:45:39","false","rimage: Split lines over 80 characters

Change long lines so they don't exceed 80 characters.

Signed-off-by: Diana Ungureanu <diana-gabriela.ungureanu@nxp.com>",66,9,0
"thesofproject/sof","b0da357b3ab91a58cbc6250ed9a70645fb0c2a62","ujfalusi","2023-08-11 09:15:00","false","lib-manager: Kconfig: Make LIBRARY_MANAGER depend on MM_DRV

The lib_mananger.c does not compile without MM_DRV enabled

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",28,62,1
"thesofproject/sof","5e9a012a134642ec90d337bc48cf65db6ee0585d","btian1","2023-06-13 01:35:58","false","copier: change prepare and parameter to module interface

Use module parameter instead of device parameters.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",45,60,1
"thesofproject/sof","17eba5b1907b3db1d67f6b44ef4233693df9cf81","dbogdzix","2019-05-15 12:15:47","false","test: add rballoc tests

Rballoc tests check if the current heap is full
the succeeding one would be taken

Signed-off-by: Daniel Bogdzia <danielx.bogdzia@linux.intel.com>",66,11,0
"thesofproject/sof","a363e882ea57221bf55cfb5d9b179756fc60f9a2","jxstelter","2022-09-05 12:39:25","false","zephyr: rtos: Allow memory operations to be called from cpp code

The memcpy_s() function is called from CPP code in IADK modules.
Declare it as extern ""C"" when header included in CPP code.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",118,51,1
"thesofproject/sof","496bdd7cf0ebed267c1ee3f5b976c17ffd7ac426","slawblauciak","2020-05-05 08:48:00","false","dai: atomic trigger operations

This change adds support for atomic trigger operations,
by grouping DAIs together with a common 'group_id' in
the configuration of each DAI.

When DAIs are in the same group and in the same DSP core,
they will process triggers atomically, i.e. wait for all
the other DAIs to receive the trigger command and pospone
the final, actual trigger operation.

This functionality might be required in case of stream aggregation,
where one stream is fed into multiple physical links.

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",94,23,0
"thesofproject/sof","d2bcb65d6962a38bf372d76e23affa7bca7be8ef","keyonjie","2021-09-13 08:49:57","false","library: memory: (cosmetic) add comment about HP_SRAM_SIZE

Add a comment about the HP_SRAM_SIZE calculation.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",118,39,0
"thesofproject/sof","ceabe95d6b3bfb32b074136ce8b45637d22edd62","fredoh9","2020-11-16 20:47:54","false","topology: icl-nocodec: enable more SSP and DMIC pipelines

Previously sof-icl-nocodec topology only enabled SSP0. To effectively test
more test cases, this enables more playback and capture pipelines with
SSP1, SSP2 and DMIC3.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",72,29,0
"thesofproject/sof","8be15f5469c09d334b2b7c4ca00bd612a53cdd72","jxstelter","2023-10-24 11:27:11","false","lnl: Fix KD topology tests failure

KD topology tests fail on LNL due to insufficient size of
heap memory. During creation of KD topologies with
4ch audio format, FW fails on memory allocation.
The patch increases HEAPMEM size.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",8,65,1
"thesofproject/sof","1f9005bf5e23b2866ad0568923c77268fee6c10b","marcinszkudlinski","2023-01-26 12:53:30","false","IPC: modify comp_new to accept IPC4 structures at entry

There's no need to translate ipc4_module_init_instance struct
to leagacy sof_ipc_comp before calling comp_new
More important - IPC4 contains different set of information,
like proc_domain (LL/DP), not included in IPC3

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",53,56,1
"thesofproject/sof","ae6e44612f8c8947f732c881df49a6acc303e8d9","lgirdwood","2018-08-24 14:39:52","true","Merge pull request #262 from tlauda/topic/idc_ppl_trigger

idc: IDC_MSG_PPL_TRIGGER message implementation",21,3,0
"thesofproject/sof","25c9e3fcc02283d8035335de4b8c6be39930fe8e","tlauda","2020-01-21 13:30:55","false","idc: remove unnecessary IDCs and change order

Removes no longer implemented IDCs and changes order
of the one left.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",78,20,0
"thesofproject/sof","925bf9adce7b8e410e1ba4541f94ff0fb3417905","tlauda","2020-01-16 11:56:16","false","interrupt: use platform_shared_commit() for irq_desc

Uses new platform_shared_commit() function to commit
shared irq desc data.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",78,19,0
"thesofproject/sof","a990c611c4c72f58726750f99b55e54ea6698a87","tlauda","2019-07-11 13:42:41","false","sof: change approach to including arch headers

Further work, but now it's done for remaining arch headers.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",42,13,0
"thesofproject/sof","58d3774948dd26663c214a9879e13afc937309eb","tlauda","2019-07-10 13:11:24","false","platform: unify include guards naming

Unifies include guards naming in platform headers.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",42,13,0
"thesofproject/sof","8dfb717645cf8291aad99250acc4324b8847fd46","tlauda","2019-12-06 10:38:31","false","alloc: invalidate uncached memory

Invalidates memory regions, which are requested to be uncached.
This way we can make sure we won't overwrite data by accident.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",71,18,0
"thesofproject/sof","fe131dc7df53af598c6cfe1e1c56d98f2f020678","marcinszkudlinski","2023-08-24 13:27:30","false","Revert ""copier: adjust valid format based on sample type""

This reverts commit 5e1a9c05b5753c26792cf06f4a7278a469e26a32.",26,63,1
"thesofproject/sof","34d0db94be706f416424b9bd4261eebab099edf6","singalsu","2019-07-08 12:28:07","false","Cmocka: Volume: Increase test coverage for S24_LE output format

This patch adds check for sample to not exceed S24_LE range that
could happen in int32_t type storage. The existing check for
abs(delta) > 1 does not cover such case if e.g. the reference
volume code would output e.g. INT24_MAX and the FW component
INT24_MAX + 1.

Similar check is added for every reference volume function that
outputs S24_LE format.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",41,13,0
"thesofproject/sof","0a4f809a7b02d0cf6f8ac814bef7df8adacbf8ac","singalsu","2020-01-14 15:06:50","false","ASRC: Fix xt-xcc build for non-HiFi3 platforms

This patch enables the generic C version code when xt-xcc compiler
is used for e.g. HiFi2EP platform like BYT. The intrinsics in
HiFi3 version are not compatible with the elder xtensa architecture
and cause build fail.

There will be need for update here for architectures after HiFi3 where
HiFi3 version might be as such applicable while a dedicated optimized
version is missing but it will be done later.

The patch includes some comments additions/changes to help follow
the nested #if #else #endifs.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",77,19,0
"thesofproject/sof","78a8ec53fd432dadcc7f78c927609a8cc1f8f225","singalsu","2020-03-26 16:22:42","false","SRC: Fail params() if sink stream rate is zero

This patch prevents a firmware crash due to divide by zero. It can
happen with DAI types those do not return actual values in pipeline
walk with e.g. hda_get_hw_params().

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",64,22,0
"thesofproject/sof","5da045646568706842716763605bde247e435573","singalsu","2018-08-31 13:09:05","false","EQ FIR: Bug fix SOF_CTRL_CMD_BINARY handling in fir_cmd_get_data()

This patch fixes the messed up code to properly return back the
equalizer configuration binary. The previous version looked more
like a mix of set_data() and get_data() also contained a null pointer
use risk.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",27,3,0
"thesofproject/sof","b90ae24a88fad31ef9379197c1fcb4382eaf219c","singalsu","2023-10-23 13:06:20","false","Tools: Tune: TDFB: Use more silent command line options

These command line options for Octave and Matlab are the
most silent with no graphical plot windows opening during
batch job.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",8,65,1
"thesofproject/sof","d8288601dbc1d34a8b31fd7c117ef4c56a13c0bf","singalsu","2021-12-09 11:02:56","false","Audio: KPB: Optimize kpb_drain_samples() function

The audio_stream_write_frag_s16/s32() functions usage and
sample-by-sample copying are replaced by block memcpy()
operations.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",122,42,1
"thesofproject/sof","7e5823d8b08c447a96e2ffbfb3a274ee137f1344","lgirdwood","2018-08-07 16:39:40","true","Merge pull request #199 from mwierzbix/rstrcmp_nullTerminatorCheck

lib: rstrcmp: null terminator check",18,2,0
"thesofproject/sof","528870ac94f043bdce1863c09cde2b1ab2ef67fd","lgirdwood","2018-11-06 14:18:22","true","Merge pull request #528 from singalsu/fix_volume_generic_overflow

Volume: Fix overflow in s16 and s24 output conversions",39,5,0
"thesofproject/sof","7029fb7b015912e9459f7146c2b23153281e98af","iganakov","2022-08-31 13:44:21","false","detect_test: add ipc4 support

Add ipc4 support for KD module keeping ipc3
backward compatibility. Add ipc4 model blob
handler based on large_config_set architecture

Signed-off-by: Ievgen Ganakov <ievgen.ganakov@intel.com>",115,51,1
"thesofproject/sof","c517d01d5a7d307315527bbf1689c5325a31935f","bkokoszx","2018-11-16 11:19:37","false","trace: dma: dma oveflow fix

Case when w_ptr and r_ptr of dma buffer are equal, means
that buffer is empty. During adding traces to buffer, we
should't lead to that equality.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",40,5,0
"thesofproject/sof","32e490229b42a5b8cc08cd1d5666ddc6daaa585c","singalsu","2018-08-03 11:45:37","false","EQ FIR: Updates to generic C filter core

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",16,2,0
"thesofproject/sof","343bd7d4a104041c931531fd10e421852c34b38d","balakishorepati","2022-11-15 12:14:10","false","topology1: CMakeLists: fix topology typo name

Add proper topology name for rembrandt platform.

Signed-off-by: Balakishorepati <balaKishore.pati@amd.com>",95,53,1
"thesofproject/sof","8be523eb793026c0133de431b77748bd861a1e00","balakishorepati","2022-03-10 16:24:35","false","topology1: Set Dmic samplerate to 48000Hz

Set default samplerate for DMIC to 48000Hz for
amd platforms.

Signed-off-by: Balakishorepati <balaKishore.pati@amd.com>",113,45,1
"thesofproject/sof","9d552d532bb9f57c05a9dae0944057b2aaf0ec9b","lgirdwood","2018-09-02 14:53:07","true","Merge pull request #290 from jajanusz/icelake-initial

icelake: initial configuration",28,3,0
"thesofproject/sof","d6b9f1f7954150339056287a6e26b42574b7f955","keyonjie","2021-01-05 09:23:37","false","smart_amp_maxim_dsm: log warning for zero frame copy

Change to comp_warn() when zero fram is copied, which really requires
attention on.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",73,31,0
"thesofproject/sof","179a6d184238f09d3d86d888e2f30473ac4cdefe","keyonjie","2020-06-01 04:15:47","false","topology: eq_iir: add uuid token support

Add the uuid token to eq_iir widget for the future use.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",97,24,0
"thesofproject/sof","472c3a4a392ddc572164b2b7b9fa7d84ebe4a566","keyonjie","2021-05-27 04:26:35","false","alloc: add handle to free a buffer with uncached pointer

For multi-core support, the caller might ask for freeing buffer with
pointer to uncached buffer while the allocation happened at cached one,
add a try to match and handle the freeing of this kind of buffer.

This will help to address error like this:

src/lib/alloc.c:462  ERROR free_block(): invalid heap = 0x9e062080, cpu = 1

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",84,36,0
"thesofproject/sof","8da8060ea9dd54a4b8d568fc9a772328b6e71824","keyonjie","2021-05-12 01:05:11","false","mux: remove the wrong error message

A wrong error message was added in helper get_stream_index(), remove to
fix it.

Fixes: 80666b7cc7a9 (""ipc: component: abstract the component creation API"")
Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",84,35,0
"thesofproject/sof","52e82f4c66c9efad0a9c8d3fa3cea78787d0b8ab","ktrzcinx","2020-09-25 06:42:39","false","logger: Refactor fread() error check in logger_read()

fread() returns number of readed blocks, 0 when nothing read.
Comparison fread return value with ""!ret"" is quite misleading -
may suggests that negative value is returrned after fail.

Swapping if content makes flow easier, then first is error check,
and eventyally return statement, next try to reopen file.
It allows to check error condition only in one place, so there
won't be possibility to use different error checks in subsequent
stages (like ferror() and errno).

in_file alignment with trace entry size check has been added,
to warn about corrupted file.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",65,28,0
"thesofproject/sof","92c6bb4087843bcf2bf4a248c5b073343dd48b0a","ktrzcinx","2020-01-17 10:00:37","false","dma: Define processing function typedef

To keep code clean and consistent create processing function
interface outside comp_data function definition to omit
duplicated definitions.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",79,19,0
"thesofproject/sof","7003c1fb4ef956215e60f67670883ebd40a1b5d7","ktrzcinx","2019-11-07 16:22:47","false","kconfig: keyword: selective build by CONFIG_FORMAT

Include in footprint only support for selected
data formats. It may make footprint lighter.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",53,17,0
"thesofproject/sof","4d4a9d729907473391ba5e3908e856aff4c4f1ab","akloniex","2020-11-06 08:28:37","false","trace: Allow bursts of messages pass through flood filter.

Introduce TRACE_BURST_COUNT Kconfig setting, which allows to define amount
of messages that are allowed to pass through the filter before suppression
kicks in.

Signed-off-by: Artur Kloniecki <arturx.kloniecki@linux.intel.com>",76,29,0
"thesofproject/sof","773bfc0aed453b6b12fba04e81cf0eae96d5c881","cujomalainey","2022-01-12 01:25:41","false","copier: fix unlikely uninitialized use

cppcheck is complaining if the foreach loop doesn't run what would
happen.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",114,43,1
"thesofproject/sof","b34cb8bfbbda611568eed7048c2a5162351c0fd9","aborisovich","2022-12-19 12:01:12","false","xtensa-build-zephyr.py: change install tree print to ASCII style

During testing of Windows CI workflow on windows-latest turned out
that github action console has issues rendering python
anytree.RenderTree graph with default style of
anytree.render.ContStyle (continuous vertical and horizontal lines).
Tests on local machines in cmd, pwershell and msys shells
proves, that all shells can render the graph (while powershell
does not do this correctly and graph is malformed).
Changing graph style to ASCII resolves the issue with Github actions.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",92,55,1
"thesofproject/sof","a97cd4f0832c5faf39737c2544a5539c77c250a4","lgirdwood","2018-09-28 14:18:40","true","Merge pull request #437 from tlauda/topic/ipc-fix-notifications-again

ipc: fix position notifications (overwritten by merge)",37,4,0
"thesofproject/sof","e2122e79ff201f47e0a18def5099db535456fc64","mrajwa","2019-05-16 09:58:13","false","topology: provide default config for new detector params

This patch provides default parameters for newly added
detect_preamble and history_depth. Both by default are
set to max buffering time of KPB.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",63,11,0
"thesofproject/sof","fd55d5f7d869e3fef92f579fcce19b52f6aa4f57","lgirdwood","2018-07-18 12:28:48","true","Merge pull request #125 from tlauda/topic/xrun_allow_recovery

pipeline: allow render pipeline to recover from xrun",13,2,0
"thesofproject/sof","b3692cd78ac60c5bfb62b068b83bf0c2da4861f2","lgirdwood","2018-12-03 13:49:33","true","Merge pull request #658 from bardliao/master

[skip ci]github: add bardliao as uapi and ipc owner",40,6,0
"thesofproject/sof","35ed394a26a4ec70bc3b47970c7f9c00a57d113b","lgirdwood","2018-08-31 12:57:59","true","Merge pull request #285 from jajanusz/drivers-refactor

platform: refactor: move clock, interrupt and timer to drivers",27,3,0
"thesofproject/sof","c4adc8700f8922341ab909d571fed8d91de9f408","lgirdwood","2018-10-01 19:36:13","true","Merge pull request #442 from thesofproject/topic/suecreek

Add initial support for Intel S1000 aka Suecreek",34,4,0
"thesofproject/sof","1a8fc68709b74757c106b442ed63bffb328eba22","mrajwa","2019-02-27 21:18:29","false","KPB: add event for client registration

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",67,9,0
"thesofproject/sof","7e7829d26f11aa77ca7c368939b138e42b705902","ktrzcinx","2020-05-22 07:54:12","false","logger: Extract function for conversion between UUID value and UUID key

This conversion should be done in function, because of future usage
in different places, outside converter.c file.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",99,24,0
"thesofproject/sof","c037800d7a4e6107d3cc0b7cb54a3159e88d5fec","ktrzcinx","2020-10-06 11:02:38","false","ipc: Remove sram_window from mailbox

This information is already provided by extended manifest,
so there is no need to double it in runtime code.
It allows to save 400 bytes from data .DATA and 64 bytes from .TEXT
for cnl platform.
EXT_MAP_PORT() macro is no longer needed.
Created __unused macro in compiler_attributes.h as compiler
attributes shouldn't be used directly, to allow easy compiler change.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",66,28,0
"thesofproject/sof","31a3aacc1afc9599b32c054ce17fcc8e2bd66c47","ktrzcinx","2020-08-27 05:53:12","false","logger: Terminate parsed log levels with new line

Text saved to FILTER_KERNEL_PATH should be terminated with
new line, to indicate end of input and mark it redy to send
to FW in IPC message.

Fixes: 126060ae (logger: Send parsed runtime log levels to FW via debugFS)

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",74,27,0
"thesofproject/sof","e4a9f86a4b31a72060530fb8828772ccf4fdd514","bkokoszx","2019-04-26 14:29:59","false","arch: memcpy: using memcpy instead of __vec_memcpy

Using simple memcpy function in arch_memcpy_s() since
preemption of __vec_memcpy() causes wrong memory reading.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",51,11,0
"thesofproject/sof","4943aaa8907149cf6c02e9046e2ef5d40ba72d74","kv2019i","2022-11-28 15:24:06","false","ipc4: use IMR_BOOT_LDR_MANIFEST_BASE definition from adsp_memory.h

Start migrating to use Zephyr definitions for the memory layout.
As we cannot move all users of legacy memory.h, selectively mark
the definitions that have already moved to make.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",99,54,1
"thesofproject/sof","2f5bf3cc92cb1fface1aeb25bd2149e869f274d6","bkokoszx","2020-07-15 10:30:27","false","pipeline: change pipe reset propagation condition

This commit allows propagating pipeline reset to adjacent pipelines
assuming that they have the same schedule component.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",83,25,0
"thesofproject/sof","e68dcc9be452e1f12e4645dd9875475f7e199aad","iganakov","2022-11-04 14:51:49","false","ipc4: add phrase detected notification

Add PHRASE_DETECTED notification structure.
This notification is reported by Detector
module upon keyphrase detection.

Signed-off-by: Ievgen Ganakov <ievgen.ganakov@intel.com>",90,53,1
"thesofproject/sof","f89a4a541828f9f4365380eb51fe5a10246d2236","zhuyingjiang","2018-11-05 08:19:49","false","rimage: manifest: rename old manifest to 1.8

rename old API and comments print info to 1.8, as for add
1.5 manifest.

Signed-off-by: Zhu Yingjiang <yingjiang.zhu@linux.intel.com>",38,5,0
"thesofproject/sof","a848c5c5209619ad3fa34a0eac851c6aa1c4c874","xiulipan","2018-09-26 07:53:27","false","alloc: fix some build issues in alloc

Include dma.h in alloc.h will cause some error, remove the unneeded
dma.h and add some need header after remove it.
Also move some helper function into alloc.c to avoid some warnings.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",37,4,0
"thesofproject/sof","b0affc18c3068225e766190aa81cad1ddb082457","xiulipan","2018-06-12 09:12:39","false","scripts: docker: remove sudo command

miss some sudo command, remove all sudo command.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",1,0,0
"thesofproject/sof","d30538396df7cb77d441f1f96394147b786441be","jgunn0262","2019-04-24 21:18:08","false","kconfig: dma: Make DW DMA a Kconfig build option.

Not all hardware will have a DW DMAC so make it optional.

Signed-off-by: John Gunn <jgunn0262@gmail.com>",52,11,0
"thesofproject/sof","d54c0385cf48b70167f55747eec063eeacb28be5","gongjun-song","2021-09-24 03:07:20","false","topology1: Add sof-adl-rt711-l2-rt1316-l01-rt714-l3

Support SKU 0B29 product, the audio hardware configuration is rt711
on link2, two rt1316s on link0 and link1, rt714 on link3.

Signed-off-by: Gongjun Song <gongjun.song@intel.com>",118,40,0
"thesofproject/sof","4be5a29275a9cf80464555ed961da5cddc457f03","aiChaoSONG","2021-07-09 02:36:13","false","topology2: Add FE DAI class

Add FE DAI class definition, the FE DAI object can be
instantiated as:

    Object.Base.fe_dai.""NAME"" {
	id  0
    }

Signed-off-by: Ranjani Sridharan <ranjani.sidharan@linux.intel.com>
Signed-off-by: Chao Song <chao.song@linux.intel.com>",86,37,0
"thesofproject/sof","34ea694a83301accf3f123688728148782e0c0de","aiChaoSONG","2023-03-16 02:53:16","false","schedule: fix address space mismatches

Fix below sparse warnings:

zephyr_dp_schedule.c:134:20: warning: incorrect type in argument 1
(different address spaces)

zephyr_dp_schedule.c:348:36: warning: incorrect type in assignment
(different address spaces)

introduced by 3ee1d787

Signed-off-by: Chao Song <chao.song@linux.intel.com>",56,57,1
"thesofproject/sof","6e82ddf9b11230eb858995d9cf2c04d45d76c33b","ranj063","2019-05-24 03:12:55","false","host: remove duplicate dma_stop()

Remove the duplicate dma_stop() during host_reset().
DMA should already be stopped when the host comp gets
the STOP trigger. This fixes the following error seen
during host reset:
intel/cavs/hda-dma.c:639 hda-dmac: 5 invalid channel -1

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",63,12,0
"thesofproject/sof","855cdd9301af3298cd1e391e71355233339299b2","ranj063","2021-03-19 06:26:41","false","topology2: Add class for DAPM route

Add a route class that will be used for creating DAPM routes
between widgets. A route can be between 2 widgets or between a
widget and pipeline endpoint as follows:
	Object.Base.route.""N"" {
		source	""dai.SSP.1.dai.capture""
		sink	""buffer.0.1""
	}

	Object.Base.route.""N"" {
		source	""buffer.2.1""
		sink	""pga.2.0""
	}

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",72,33,0
"thesofproject/sof","0b693844734422be90cb5006fe0ff0fb0902cde3","ranj063","2022-10-19 15:23:57","false","ipc4: handler: skip trigger if pipeline is already paused

This will avoid the pipeline walk and all the NOP's in each module
trigger when the pipeline is already paused.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",97,53,1
"thesofproject/sof","c958d6fa6fab9e046e907d490f43c2e840c6a74e","ranj063","2021-10-27 02:35:36","false","Revert ""pipeline: (cosmetic) fix function names in trace text""

This reverts commit b6f26b0f90f9e7fbf6414605b7874b0a1a81f8a8.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",127,41,1
"thesofproject/sof","22fba69dfbde47bad02a7d7b352dc305cea0c26d","ranj063","2018-11-01 05:31:08","false","topology: glk: fix channel count for dmic stereo recording

Fix the channel count to 2 for stereo dmic recording.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",27,5,0
"thesofproject/sof","115ffbc1bcea2e8c9fff30b2d0fdc184119537ab","ranj063","2022-01-11 00:22:54","false","codec_adapter: dts: Make interface ops static

and remove dts.h.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","eaf49e26b4bb545f6d46316987edcdef10017c4b","abonislawski","2020-06-22 08:24:11","false","mailbox: unify sram fw regs

This patch will move all sram fw regs offsets (only offsets) to a commpon
mailbox.h

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",72,25,0
"thesofproject/sof","0b6d4a75762c58f9722e19aee84a9880ecbe8747","ranj063","2023-03-31 19:22:45","false","topology2: mixout-gain-efx-dai-copier-playback: Do not set default node_type

It should be set based on DAI type.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",56,58,1
"thesofproject/sof","3cae0f7088cc84ba523ab4868910daa1b20b35cc","ranj063","2018-06-16 04:36:14","false","tone: fix default frequency and gain to match AES17 requirement

Fix frequenyc to 997Hz and gain to -20dB to match AES17 single
tone test case requirement

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",1,1,0
"thesofproject/sof","700197d49f7f61fd753fbc6bb36adb71d865e7fa","ranj063","2018-06-12 03:37:14","false","dma: Introduce new API for dma_get()

This patch introduces a new API for allocating DMAC's by taking into
account the dma dev type, copy direction, capabilities and access
control requested by the user. It also updates also users to use
the new API.

It also consolidates the new API in a common file for all platforms.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",1,0,0
"thesofproject/sof","5f6f22d25e3a74eca84ca01ba79949d3ebbce960","ranj063","2023-07-04 04:57:35","false","audio: module_adapter: Prepare to convert copier to use module interface

Add the dai endpoint ops to the module adapter in preparation for
converting the copier module to use the module interface.
Also, modify the module_adapter ops to handle the HOST/DAI components
are a special case.

In the case of module_adapter_prepare(), there's no need to compute the
period_bytes for the HOST/DAI because these are computed by the copier
module prepare op. In the case of copy, HOST/DAI components are handled
separately as well as these components deal with the DMA buffers.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",39,61,1
"thesofproject/sof","da5edbdf7d1f73bfaccca0bfc2e19fe46097b0d0","piotrkmx","2022-10-11 09:29:11","false","ace_v1x: host system time set and get

Base firmware functionality for setting and getting host system time.

Signed-off-by: Piotr Kmiecik <piotrx.kmiecik@intel.com>",98,52,1
"thesofproject/sof","94203a22ffc09948f834c6f6991add39153db8e9","plbossart","2022-04-04 22:44:44","false","topology1: sof-hda-generic: make deep-buffer optional

We don't want to release these topologies to world+dog due to
dependencies on kernel version, so let's make the deep-buffer
optional. The next patch will enable these topologies in the
development/ directory.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",110,46,1
"thesofproject/sof","317a4164041b4a945ba326d23713df34660289d4","johnylin76","2020-12-24 04:55:02","false","sof: multiband_drc: fix testbench build error

Fixed the build error of multiband_drc_find_proc_func_pass and
multiband_drc_find_proc_func defined but not used.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",73,31,0
"thesofproject/sof","3b3c133822bfe4b4c481da64ab2be0f7c195f904","jajanusz","2019-04-25 19:59:37","false","library: add sof_audio_core into sof shared lib

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",48,11,0
"thesofproject/sof","919e6463c652dd4ae9fe53c9e4991a519b59fceb","jsarha","2022-05-02 16:12:47","false","ipc: ipc4: Use Zephyr API k_sleep() instead of obsolete wait_delay()

Use Zephyr API k_sleep() instead of obsolete wait_delay(). In XTOS
build the k_sleep() is implemented in xtos-wrapper/include/kernel.h
and it actually calls the same old wait_delay().

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",115,47,1
"thesofproject/sof","15a7774626bbdf23cdab513da353e11030f76e19","marc-hb","2022-01-12 01:43:56","false","Revert ""topologies: switch all .m4 files to codec_provider and codec_consumer""

This reverts commit f50b6fe0adc440a5b0d93054372adec74f0a013f.

I discovered the hard way that this change causes alsatplg version
1.2.2 (the default version in the current LTS Ubuntu) to corrupt just
a few bytes in .tplg output in an incredibly discrete and
time-consuming way: no error message at build time and same file size.
See example at https://github.com/thesofproject/sof/pull/5162.

We could/should just require a minimum alsatplg version at the CMake
level but at this moment we don't even know which minimum version is
needed and we would also need to take some time to test a few alsatplg
versions. If version 1.2.2 would just fail with an decent error
message that can be searched and discussed then everything would be
fine but silent corruption is really not OK.

So users of recent versions will unfortunately have to live with the
huge number of warnings for now.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",114,43,1
"thesofproject/sof","d910206bcf31198e0531332c3d0bc71e0e3a4831","marc-hb","2021-09-02 22:02:14","false","xtensa-build-zephyr: split SUPPORTED_PLATFORMS on multiple lines

... to minimize future conflicts.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",119,39,0
"thesofproject/sof","a8c333b606152cd3ac4f6d59d4f9974bc794bfae","marc-hb","2021-12-08 09:07:46","false","xtensa-build-zephyr: add deterministic sha256sum of final .ri file

Checksumming the final binary is useful to compare before/after some
configuration change or to compare builds across different people /
systems.

Because rimage is not deterministic, ask sof_ri_info to do this.

Sample output:

Firmware file size 0x55000 page count 79
 pkcs_v1_5_sign_man_v1_8: signing with key
               'modules/audio/sof/keys/otc_private_key.pem'
 pkcs: RSA private key is valid.
 pkcs: digest for manifest is 5b52ac0b8809503c817a96dac7c5124dba5a90d...
Firmware manifest and signing completed !
Extended manifest found module, type: 0x0001 size: 0x01A0 ( 416) offset:
Extended manifest found module, type: 0x0005 size: 0x0020 (  32) offset:
Extended manifest found module, type: 0x0004 size: 0x0020 (  32) offset:
Extended manifest found module, type: 0x0003 size: 0x0030 (  48) offset:
Extended manifest found module, type: 0x0002 size: 0x0070 ( 112) offset:
Extended manifest found module, type: 0x0000 size: 0x0050 (  80) offset:
Extended manifest saved zephyr/zephyr.ri.xman size 0x02E0 (736) bytes

SOF Binary build-apl/zephyr/zephyr.ri size 0x4f2e0

  Extended Manifest ver 1.0.0 length 736

  cavs0015 (ADSP Manifest) file offset 0x22e0 name ADSPFW build ver
             0.0.0.0 feature mask 0xffff image flags 0x0
    HW buffers base address 0x0 length 0x0
    Load offset 0x2000

sha256sum build-apl/zephyr/reproducible.ri
46f3404e3b674ed....120c2173d6050bde35b build-apl/zephyr/reproducible.ri

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",123,42,1
"thesofproject/sof","4c6ecb217200cce186bfed375f59e97072efd0a9","marc-hb","2021-11-20 01:00:29","false","xtensa-build-zephyr: guess CMake successes and failures better

Recent commit b9fcc4156e5e (""xtensa-build-zephyr: fix incremental build,
pass CMAKE_ARGS only once"") fixed incremental builds. For this it first
needs to guess whether the most recent CMake configuration step failed
or succeeded so it knows what is the current ""checkpoint"" and what is
the next west command to run. Merely testing whether the build directory
already exists is a very bad guess because that directory could have
been created by some other person or script, or - much worse - it could
have been created by a failed CMake configuration step!

The latter situation makes debugging CMake failures very tedious because
it requires manually deleting the build directory after each CMake
configuration failure.

Fix this by not merely looking for a build directory but by looking
whether there is either a build.ninja or a Makefile is found in that
directory. This is a much better indication that the CMake configuration
succeeded.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",129,42,1
"thesofproject/sof","ffedf5be56dfc45c4c2e5947c1e291b71f45eb40","marc-hb","2020-03-25 04:22:07","false","scripts: build-all: postpone VERBOSE decision to ""make"" time

CMAKE_VERBOSE_MAKE was sometimes ""hardcoding"" the decision in CMake's
cache. Move that decision to the make invocation.

After running xtensa-build-all.sh [-v], it's now possible to choose
again whether ""make -C build_apl_gcc/"" should be VERBOSE or not without
starting from scratch and with the exact same configuration.

Before this commit it was possible for make to decide again after a
non-verbose xtensa-build-all.sh but not possible to decide again after a
verbose xtensa-build-all.sh... very confusing.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",65,22,0
"thesofproject/sof","da1d1b041ebd85da18b3153d33a596015da61338","marc-hb","2022-01-12 18:09:24","false","xtensa-build-all.sh: rn: remove odd ARCH=xtensa definition

No one else has it.

Gets rid of the only shellcheck warning.

Fixes commit 7453e3d57139 (""scripts: add renoir support"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,43,1
"thesofproject/sof","d54a9281f8840d7d6338caa9735409ca5c2291e7","marc-hb","2021-04-16 03:34:49","false","logger: print a separator when the timestamp goes back in time

This makes the display of the mailbox ring buffer log much less
confusing. It should not happen with the DMA trace but will behave the
same in case something goes wrong.

Before this commit the only clue that wrapping had happened was a NaN in
the delta column (instead of the negative value).

The ""other?"" is because the start of the mailbox is sometimes corrupted,
or the timestamp goes sometimes back at boot for no obvious reason. In
other words this new separator is useful to highlight bugs too.

Absolute mode -e 0 with this commit:

    TIMESTAMP         DELTA C# COMPONENT          LOCATION

[22598174808] (        11) c0 ipc                  src/ipc/....
[22598174824] (        15) c0 ipc                  src/ipc/....
[22598443257] (    268433) c0 dma-trace             src/trace/....
[22598443271] (        14) c0 dma-trace             src/trace/....
[22598443286] (        14) c0 dma-trace             src/trace/....
[22598943257] (    499971) c0 dma-trace             src/trace/....

		 --- negative DELTA: wrap, IPC_TRACE, other? ---

[22430943257] (         0) c0 dma-trace             src/trace/....
[22530943257] ( 100000000) c0 dma-trace             src/trace/....
[22542943257] (  12000000) c0 dma-trace             src/trace/....
[22542943271] (        14) c0 dma-trace             src/trace/....
[22542943285] (        14) c0 dma-trace             src/trace/....

Relative mode -e 1 with this commit:

    TIMESTAMP         DELTA C# COMPONENT          LOCATION

[  3080783.6] (       11.4) c0 ipc                  src/ipc/....
[  3080799.1] (       15.5) c0 ipc                  src/ipc/....
[  3349232.5] (   268433.4) c0 dma-trace             src/trace/....
[  3349246.8] (       14.3) c0 dma-trace             src/trace/....
[  3349261.2] (       14.4) c0 dma-trace             src/trace/....
[  3849232.4] (   499971.2) c0 dma-trace             src/trace/....

		 --- negative DELTA: wrap, IPC_TRACE, other? ---

[22430943257.0] (      0.0) c0 dma-trace             src/trace/....
[100000000.0] (100000000.0) c0 dma-trace             src/trace/....
[111999999.5] ( 12000000.0) c0 dma-trace             src/trace/....
[112000013.9] (       14.4) c0 dma-trace             src/trace/....
[112000028.2] (       14.3) c0 dma-trace             src/trace/....

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",80,34,0
"thesofproject/sof","f748461ffce8cf36c525b9a2ce74ab4aea34f3e0","lyakh","2022-10-18 12:27:59","false","volume: don't modify IPC data

In volume_init() use a temporary local array instead of modifying
IPC data, that can be stored in a host IPC memory window.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",99,53,1
"thesofproject/sof","a1b9f35cc92a2e8e6dadec0077db358864c45d9e","lyakh","2022-03-11 13:16:55","false","cache: dma: always use accessors with shared data

Access to objects, defined with a SHARED_DATA attribute should only
be performed, using the platform_shared_get() function at run-time or
using cache_to_uncache_init() at initialisation time.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",114,45,1
"thesofproject/sof","c55d011d553cddc18644dd3746aa1ff56854b09d","lyakh","2022-12-21 12:04:50","false","ipc: ipc4: protect memcpy_s() against human error

Add error checking to all calls to memcpy_s() in handler.c.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",91,55,1
"thesofproject/sof","b516172a4147ca6198b3a7acb1b16beecb5bc977","lyakh","2022-12-20 07:13:36","false","probe: simplify ipc4_get_buffer()

Use a local variable in ipc4_get_buffer() to simplify it and remove
redundant code.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",92,55,1
"thesofproject/sof","3f416a3e0272e38a9dcb6ab2f7cab4e814fa8edb","lyakh","2019-02-25 17:08:48","false","interrupt: call the interrupt handler only for enabled descriptors

When multiple interrupt handlers share the same interrupt, only
those, that enabled the interrupt on a specific CPU, have to be
called on that CPU.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",65,9,0
"thesofproject/sof","01c2196ec254f6ebb068f8884a936d5d3278f5bb","lyakh","2022-04-13 08:18:49","false","igo_nr: fix buffer acquisition

Instead of acquiring and releasing buffers locally multiple times,
do that once for .copy() and .params() methods.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",117,46,1
"thesofproject/sof","7eb36a4f2d6614febac5af152799329695e340bf","libinyang","2018-11-09 02:12:39","false","memory: increase HEAP_RT_COUNT256 size

This patch increases HEAP_RT_COUNT256 size from 64 to 80 on
cannonlake, icelake and suecreek.

Signed-off-by: Libin Yang <libin.yang@intel.com>",41,5,0
"thesofproject/sof","2283996192d493487b6f9b8b2ae91e1cd2cf7015","RanderWang","2022-10-19 03:26:16","false","ipc4: dai: allocated unused llp slot to each stream

Current llp slot is allocated based on virtual index
in node id which is incorrect since different dai may
use the same virtual index. Now find the first unused
llp slot and assign it to stream and save the slot info
to avoid querying it for each update

Signed-off-by: Rander Wang <rander.wang@intel.com>",99,53,1
"thesofproject/sof","9742cf3ae67dfb10db51d295c803a2cd08d8adcc","ranj063","2021-05-28 01:09:19","false","topology: clean up graph list name for all pipelines

No functional change. Graph names are not used anywhere.
But matching the name with the pipeline name will help
make it easy to convert 1.0 topologies to the 2.0 syntax.
Also remove the -PIPELINE_ID suffix from all the name as the
P_GRAPH macro adds it already.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",82,36,0
"thesofproject/sof","e98847bf6e0ee8a4d56835cca8d995d171abc011","ranj063","2021-11-02 19:45:40","false","topology2: volume-playback: Add all includes

Include add dependencies so that this conf file can be built
individually.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",125,41,1
"thesofproject/sof","03067c6c77099b7347a5dca3845e3a3af1447eb0","ranj063","2018-06-27 22:09:25","false","host: set up shared library table

Update testbench with a table containing the shared library handles
for all components. Currently, we support only volume and src
components. More component support will be added in future.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",6,1,0
"thesofproject/sof","545ab19ff5f8b4760c2ef79ebd25fd1299cebca9","ranj063","2023-09-19 01:56:19","false","ipc4: logging: fix library build

Fix build with CONFIG_LIBRARY.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",21,64,1
"thesofproject/sof","a12145431d3c3b780e201c00b91882d412ceda71","aiChaoSONG","2021-08-23 08:51:36","false",".github/zephyr.yml: update docker for cmake requirement

The latest zephyr requires CMake version >= 3.20,
we have to update the docker image to meet the
requirement.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",121,39,0
"thesofproject/sof","a94460350290b8fa5ef9b2e00daf7ca8d6cb7489","kuanhsuncheng","2021-09-09 11:23:26","false","build: remove unused files from build system

Removes the files added to build system by mistake.

Signed-off-by: YC Hung <yc.hung@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",118,39,0
"thesofproject/sof","e3fc9c1c8e79b6b0e545f8aa20c34b10a6359671","macchian","2023-10-05 02:56:50","false","topology2: add rt713_rt1316, no sdw_dmic config

This is additional HW board: No SDW_DMIC connection

SDW0: rt713 Jack codec
SDW1: rt1316 smart amp l
SDW2: rt1316 smart amp r

Signed-off-by: Mac Chiang <mac.chiang@intel.com>",16,64,1
"thesofproject/sof","63cd5a52a3f6e127829f9914a978503ca6d6cd46","xiulipan","2019-10-25 08:57:19","false","CI: travis: disable agent for QEMU test

QEMU boot test will random fail with agent. Disable it to make sure
QEMU boot test will not fail.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",64,17,0
"thesofproject/sof","3e24390a62f3d16075a13bb7789db2f6dfd69846","bkokoszx","2019-05-27 09:22:04","false","buffer: enhance trace message in comp_update_buffer_consume

Using hex %x format in comp_update_buffer_consume for tracing
addresses and bitfields is more readible than decimal
format.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",63,12,0
"thesofproject/sof","f0a010052bd0216348e0906c7f84c5798bb8351d","bardliao","2022-11-14 09:00:27","false","topology2: cavs-sdw: group route and pipeline index

A topology may be constructed by some .conf files. We may use a
duplicated route index or pipeline index by accident. This commit
suggests a rule to assign route and pipeline index.
We have a consistent pcm id. For example,
Jack out: 0
Jack in: 1
Speaker: 2
Microphone: 4

We can use a simple formula to assign the route and pipeline index
for each pcm.
The formula this commit suppests is pcm id * 10 ~ pcm id * 10 + 9.
That is 0 ~ 9 for pcm 0, 10 ~ 19 for pcm 1, and so on.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",95,53,1
"thesofproject/sof","fc167f5e56c26e65106e84a63e2dbe1d4cc281ab","singalsu","2020-02-21 17:06:04","false","Tools: Test: Clean up test topologies build and update pipeline macros

This patch updates the tplg-build.sh script by omitting DMIC capture
test topologies generation, tone topolgies generation due to no
use and no maintenance. They can be fixed later.

The all DAI permutations are generated only for volume pipeline. The
src is removed. Instead a new algorithms topologies generation loop
is added for UP2 (APL) compatible topologies. The algorithms are
ASRC, FIR, IIR, and SRC.

The test-all, capture, playback macros are updated to use
PIPELINE_PCM_ADD and set up DAI for SCHEDULE_TIME_DOMAIN_TIMER. The
duplication of TEST_DAI_PORT in macro call is replaced by 0 to
prevent topology load fail on device.

The test-equalizer-playback-ssp.m4 is removed as obsolete.

Pipelines are added for FIR and IIR playback and capture. SRC playback
pipeline is improved by making tokens instance specific. The SRC
capture pipeline macro is only cosmetically improved.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",80,21,0
"thesofproject/sof","f6b8b0e4854a1fbc9fd08224a80855c3e40757ff","singalsu","2022-11-30 13:16:50","false","Tools: Test: In src_test.m do quick test without specify in/out rates

If the rates are an empty vector [] the default rates are used. This
allows test command ""src_test(32, 32, [], [], 0, 0);"" to do a quick
test without plots with default 8 - 192 kHz in/out matrix.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",101,54,1
"thesofproject/sof","f117b18c7caefb9bee84fe3c06b751aa35ec8181","singalsu","2021-07-15 09:55:16","false","arch: xtensa: APL: De-select beamformer and tone components to save RAM

This patch helps to avoid the build fail due to running out of .bss
section in Apollo Lake platforms.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",91,37,0
"thesofproject/sof","bdf4bc487e18613ea944934cd827c0f47f20d1aa","tlauda","2019-10-26 09:35:52","false","hda-dma: implement proper xrun checking

Implements proper overrun and underrun detection flow.
We should return error in case HDA-DMA link detects one.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",67,17,0
"thesofproject/sof","e4e409b8a17a52d65d8acd5966b8997cac6ada6a","tlauda","2018-07-17 11:59:04","false","dai: capture buffer should also be flushed from cache

Writes back capture dma buffer from cache to sram.
We stopped to invalidate buffer shared between DMAs,
so this change is needed to avoid glitches due to
the potential data eviction during cache miss.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",13,2,0
"thesofproject/sof","9fbd0a4822f0d5c5876749a0a0b73484975c8734","tlauda","2018-07-16 12:11:06","false","test: fix volume cmocka tests

Fixes volume cmocka tests.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",12,2,0
"thesofproject/sof","564a18a1afba3501f72aa4004b916169b2cdf20c","tlauda","2019-09-26 12:47:50","false","interrupt: cavs: run cascaded irq handler in non atomic ctx

Runs interrupt handlers for cascaded interrupts in non atomic
context. Otherwise we are blocking other cores during execution,
which is not needed, since we only need to protect integrity of
the list.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,16,0
"thesofproject/sof","3e0bcaa78a62518b7a1b9890dac7bc64b72e4640","tlauda","2018-08-28 11:03:32","false","idc: move definitions into include/sof/idc.h

Moves generic IDC definitions into include/sof/idc.h.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",22,3,0
"thesofproject/sof","b1683ec1d6efb6c922ea66c03668f965d4626740","saisurya-ch","2023-06-20 08:24:18","false","amd: vangogh: add build support for vangogh

Add build support to enable vangogh platform.

Signed-off-by: SaiSurya, Ch <saisurya.chakkaveeravenkatanaga@amd.com>",46,61,1
"thesofproject/sof","4777f261e158798363dcba8cd9ab4bf4c9cc42cb","tlauda","2019-09-16 14:55:05","false","dw-dma: cleanup and remove irq related code

Cleanups DW-DMA driver and removes any code related
to interrupt handling.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",62,15,0
"thesofproject/sof","7824be5d78be8fbce5d44f0db06d88f1b07a79cd","ranj063","2018-06-14 03:01:32","false","ipc: add sample_rate member to ipc tone comp def

add sample_rate memeber in tone ipc comp def to read in
the value from topology.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",1,0,0
"thesofproject/sof","25e6cb70b97392431dbdfe8e4b6d60020281da4e","abonislawski","2019-06-05 12:17:51","false","sof: add default ALIGN macro

This will add default ALIGN macro so defines which are using ALIGN
can work in main code and linker scripts using linker definition for ALIGN

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",62,12,0
"thesofproject/sof","426d7816e2652130efe060bbe5a12d01cef082c1","ranj063","2021-05-12 18:31:41","false","topology: nocodec: switch to dynamic pipelines

Switch the APL/CNL/ICL/JSL/TGL nocodec topologies to use dynamic
pipelines.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",85,35,0
"thesofproject/sof","24d1b1a01276d628a42f8c42e32fd29299090d4e","ranj063","2022-02-15 22:40:14","false","topology2: cavs: hda: remove unwanted topologies

We only want the mixin/mixout based HDA and passthrough HDMI topologies.
Delete everything else.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",106,44,1
"thesofproject/sof","0b7b3a5c7ee71e1c9b6acaa56a3d07d2bd0b03dd","ranj063","2022-10-19 19:45:44","false","ipc4: helper: Fix module free

When 2 modules are bound together, they are bound with a buffer between
them with the connection like this : source_module->buffer->sink_module.

So, what this means is that there is only one connection going from a
module to the buffer. So, calling pipeline_disconnect() from the same
module to the same buffer in both directions makes no sense.

Consider the following pipeline:
host_copier->gain->mixin

With the current logic, while iterating through the list of modules, if
mixin goes first for freeing, we'd end up freeing the buffer between the
mixin and gain before it is disconnected from the gain.

The right way to free a module would be first disconnect the module from
the sink buffer, then check if the sink buffer has been disconnected
from its sink module. If so, the buffer should be freed. Otherwise the
buffer will be freed whenever the sink module is disconnected from it.
The same thing must be repeated for the module's source buffer as well.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",96,53,1
"thesofproject/sof","106ea58d7d63a3e10b89b4518e288493568e4e69","abonislawski","2019-06-03 12:17:27","false","linker: fix for symbol overwrite in hsw linker

It will fix symbol overwriting, _system_heap_start was already used in system_heap section

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",68,12,0
"thesofproject/sof","1adb92ab2e39969d6e8e7f43e7d4e71e37ffcfb1","ranj063","2018-06-25 05:03:16","false","topology: dai: rename sample_bits macro to config_data

Rename SAMPLE_BITS macro to a more generic CONFIG_DATA macro for SSP
to also include the mclk id.

Also modify users of the macro with the new name.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",4,1,0
"thesofproject/sof","810ce398e6c558ec41b422cd12fc33cc201a245c","ranj063","2022-01-13 03:24:11","false","codec_adapter: modify the signature of codec_adapter_copy_from_source_to_module()

Modify the signature of codec_adapter_copy_from_source_to_module() to pass
the buffer pointer and buffer size. Also, clarify the comments to make it
more easier to follow.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",117,43,1
"thesofproject/sof","421f3b6006daaad81969c5f1a1a0a65fb1b5b5be","RanderWang","2022-03-23 08:26:39","false","ipc4: mixer: refine path stop logic for ipc4

In ipc4 pipeline can't be reset when the source
and current component is in the same pipeline
and it is active. This is different with ipc3.

Signed-off-by: Rander Wang <rander.wang@intel.com>",108,46,1
"thesofproject/sof","72ba42654c8f2da1833c590b75e5b137dfb6b6f8","RanderWang","2022-04-14 01:19:53","false","ipc4: copier: add multiple gateway support

There are some usage cases that multiple gateways are
used, such as two alh dais to support single stream on
some productions with two codecs to support two speakers.
In this case two dais config are included by one copier.

This patch enables multiple gateway support in one
copier and creates corresponding dai for these gateways.

Signed-off-by: Rander Wang <rander.wang@intel.com>",117,46,1
"thesofproject/sof","4bb686380e89f7e2db66543c705d77ab6b560e55","libinyang","2022-02-16 05:56:51","false","topology1: sof-icl-rt711-rt1308-rt715-hdmi: correct the link description

The links are dynamically assigned. The descriptions should
be changed correspondingly.

Signed-off-by: Libin Yang <libin.yang@intel.com>",105,44,1
"thesofproject/sof","d4d0a0ca134f92834412865d60c4b86a10cd5b4a","johnylin76","2023-11-01 00:48:47","false","smart_amp: fix code and re-enable it on stub builds

Removes the misplaced code in smart_amp.c for the fix, then
re-enables CONFIG_COMP_SMART_AMP on building stub images.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",4,65,1
"thesofproject/sof","bcf7e66f7d827906615e84ec785b03eb3747bbbf","jajanusz","2019-06-01 15:44:07","false","rimage: add spdx identifier for elf.h

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",72,12,0
"thesofproject/sof","cf903a87b16896936c25e3c6ab3b7a321c5164ab","libinyang","2022-07-19 02:45:31","false","ipc4: Fix wrong condition statement in set_pipeline_state

The condition statement is wrong in set_pipeline_state() when handling
SOF_IPC4_PIPELINE_STATE_RESET cmd.

Signed-off-by: Libin Yang <libin.yang@intel.com>",115,50,1
"thesofproject/sof","5d75b0f30969fa347040d7b11d851fb12ae8989e","ranj063","2022-04-12 20:22:19","false","topology2: cavs: passthrough: Add 4ch audio formats

Add the audio formats for 4ch in passthrough-be and passthrough-capture
pipelines.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",117,46,1
"thesofproject/sof","16fd76668a61467d1810d4eabfa05b57f25a6f63","ranj063","2022-05-03 16:35:04","false","module_adapter: Add support for SET_VALUE/GET_VALUE control commands

In preparation for modifying the volume component to use the new
module API, add support for SET_VALUE/GET_VALUE control commands.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,47,1
"thesofproject/sof","0943b4da2d9f5b05f6f56ff8dc86798d2b841137","ranj063","2022-01-11 00:17:15","false","module_interface: Change the signature of free API

As part of the 3rd part module API changes, change the signature of the
free op in the module interface API to pass the pointer to struct
processing_module instead of comp_dev. Also. modify the signature of the
module_free_all_memory() to pass struct processing_module pointer as
input.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","28fdfdc4e00683acd25f363251c974909aa0728e","ranj063","2022-03-01 06:13:23","false","codec_adapter: Add a sink_buffer_list to struct processing_module

Add a sink_buffer_list to struct processing_module to support multiple
output buffers for modules. Allocate sink buffers for all sinks during
prepare and copy the produced samples from the output_buffers into the
respective sink buffers during copy.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",112,45,1
"thesofproject/sof","a71aed42102d723c5ef4c0d78baf58eb6a2409e8","abonislawski","2019-06-18 11:26:04","false","memory: reorder heap defines to match order from ICL memory layout

This will make easier to analyse heaps in memory.h

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",45,13,0
"thesofproject/sof","d03dcda88f056f2d16683a6d9aa453831691a4e5","ranj063","2023-06-02 18:29:30","false","audio: aria: Add set_large_config op

This patch is needed to make the module work with linux and avoid
firmware crash. This patch sets the attenuation parameters with the
bytes control since the setup parameters can't be passed in init()
as in Windows OS.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",45,60,1
"thesofproject/sof","e5d95d1dd3b336f3c465c137187d820e427c00b4","singalsu","2022-02-08 14:20:14","false","Tools: Topology: Change playback volume ramp to 20 us

The topologies sof-hda-generic were earlier fixed to use short
20 ms ramp because of nearly inaudible UI blip tones with 250 us
ramp. Some changes to topologies build m4 macros have brought
back the long ramp.

This patch fixes the playback ramps to use 20 ms long transitions.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",108,44,1
"thesofproject/sof","dea1f82b2a07ff10ca5007323c3f453d069656d1","singalsu","2019-05-10 14:32:25","false","Testbench: Update SRC run script

This patch updates the testbench binary path into current default
install location when built with scripts/host-build-all.sh.

The path to test topologies is updated also.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",58,11,0
"thesofproject/sof","86c12c8630b323d1aca82b5ef5bb95ae5b35a44a","singalsu","2022-09-09 16:10:35","false","Math: Auditory: Fix the use of bitshift parameter

This patch fixes a mistake in compensating linear spectrum bitshift
gain into logarithmic power spectrum. The bitshift done for linear
spectrum as needs to be squared for power spectrum. Due to
calculating in logarithmic domain the square converts to multiply
by two.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",106,51,1
"thesofproject/sof","ba079694f4f5ecf1b5d2f3953cf0d530e47440fc","singalsu","2023-09-01 09:17:41","false","ipc4: header: Add support for ALSA switch and enum control handling

The structs sof_ipc4_control_msg_payload and sof_ipc4_ctrl_value_chan
match the similar structures in Linux kernel SOF IPC4 driver.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",24,63,1
"thesofproject/sof","97b03853fceedf71cf205bcf235178e96177e986","singalsu","2020-03-30 12:52:22","false","Tools: Topology: Fix IIR high-pass coefficient blobs with wrong gain

This patch fixes the high-pass coefficients those produce 0 dB gain
instead of the intended +20 dB. Fortunately none of these have
been used in topology builds.

The 50 Hz +20 dB coefficient blobs those are used in some DMIC
capture pipelines did not have this issue due to being generated
before these and not modified when these were introduced.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",67,22,0
"thesofproject/sof","0b63fde14dc9952ff9634f0d9a0c78b31f8491af","bkokoszx","2019-02-21 15:41:19","false","memmap: init memmap in runtime for cavs platforms

This commit adds:
1. memmap struct initialization for cavs in run-time.
2. setting proper .caps for all cores for system runtime memory.
3. add generic defines for heaps.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",62,9,0
"thesofproject/sof","ba4406e2b735d31e1f0dd54664b30b3b9237165d","kv2019i","2021-10-11 14:37:08","false","zephyr: align non-cached allocs to PLATFORM_DCACHE_ALIGN

The XTOS allocator aligns non-cachec allocations to the platform
cacheline size. Test results indicate some SOF application code
relies on this behaviour, so align Zephyr's rmalloc implementation
to match the behaviour.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",123,40,1
"thesofproject/sof","d648016b83cd716c0f5c66f660cb3dc62beae49e","cujomalainey","2021-08-26 23:39:06","false","multiband_drc: fix null pointer check

cppcheck pointed out that either our nullpointer check was not needed or
that we are failing to do it before using the pointer. The check looks
valid so lets fix the lookup.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",119,39,0
"thesofproject/sof","960a2242a1acff694fe86a1274e4310baed694ed","cujomalainey","2020-05-20 19:48:18","false","Readme: add gitter badge

Add badge to make finding the chat room a bit easier

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",99,23,0
"thesofproject/sof","06ee0fef11fbda946a0671c59e92c8e4fde64ac7","cujomalainey","2022-03-19 00:33:05","false","pipeline: params: don't use uninitialized hw_params

pipeline_comp_hw_params does 2 things, it fetches the hw_params from the
DAI and writes those parameters to buffers. The issue here is that we
walk from host to DAI, so any buffer we see along the way gets set with
uninitialized hw_params as we don't get the params till the end of the
walk. Typically this is not an issue in most pipelines that are linear
as the following call to pipeline_comp_params will overwrite any bad
values in the buffer params. Not good practice but not harmful. The
problem arises when components such as the demux or SRC which pass flags
into comp_verify_params receive these bad values. There are edge cases
as a result where the values are not cleared and the buffers end up with
bad data. The result is usually an xrun, in the case of identifying this
bug, the uncleared buffer had 4.6k channels.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",109,45,1
"thesofproject/sof","fa760e742088c66ba72aafdd4d714918e7102054","cujomalainey","2021-01-15 22:40:19","false","smart_amp_test: fix redundent check and double free

not sure how this happened but this check is pointless and also results
in a double free, found by cppcheck

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",69,31,0
"thesofproject/sof","b2073f1f2676cf54ce9600c7b8c283823730af25","aborisovich","2023-02-23 02:55:27","false","west.yml: upgrade Zephyr to e3ae110a05d

Includes:
- rename of xcc-clang compiler to xt-clang
- updates in C++ headers in zephyr/sys/util.h that require C++14
standard now.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",56,57,1
"thesofproject/sof","ad7f0e52b87a219bb0630afb44947ff55af5f82a","brentlu","2021-05-27 02:06:34","false","topology: sof-glk-da7219/cs42l42: enable bclk control

Enable the bclk clock control for SSP2.

Note that this impacts existing GLK-based chromebooks as well as newer
hardware.

Signed-off-by: Brent Lu <brent.lu@intel.com>
Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",84,36,0
"thesofproject/sof","7fb6d5f0f3416943a9c8d8e7109e92ffb9fa1038","keyonjie","2020-12-15 11:17:30","false","topology: smart_amp: make the DSP core configurable

Define SMART_AMP_CORE configurable, configure to run DSM pipelines on
DSP core0 if it is not set.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",73,30,0
"thesofproject/sof","f5f40be12d87bd7aa348d305647d81c557bc9966","fkwasowi","2022-12-13 06:15:06","false","kpb: add support for 1-6 channels

FW infrastructure shall support buffering
of historic data from 1ch up to 6 channels

Signed-off-by: Kwasowiec, Fabiola <fabiola.kwasowiec@intel.com>",97,54,1
"thesofproject/sof","e81c25eab7f3bb0fcfa064512f24f305144fc8c3","yongzhi1","2021-03-29 22:09:29","false","topology: Add CHANNELS_MIN macro for passthrough pipeline

Add macro to restrict channel number of PCM capabilities, this will
allow channels_min to be configurable. The default behavior is
not changed with this patch.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",79,34,0
"thesofproject/sof","80687014754055bf216865be758e1015a8776dff","pblaszko","2022-11-17 13:32:53","false","ipc4: idc: fix ipc response when pass msg to target core

When forwarding IPC to secondary core in a non-blocking mode,
skip ipc response step in cmd handler on primary core.
Response will be prepared by secondary core.

Signed-off-by: Przemyslaw Blaszkowski <przemyslaw.blaszkowski@intel.com>",97,53,1
"thesofproject/sof","8ae0aff2c59236032e172ada0f656844e31847b9","akloniex","2020-05-06 16:24:35","false","pipeline: return -ENODATA on trigger for PCM pipelines with no data.

As part of dependent PCMs feature we need to properly inform userspace
when trigger start/release is called on a pipeline, that depends on
another to provide that data, as in Echo Reference usecase.

Signed-off-by: Artur Kloniecki <arturx.kloniecki@linux.intel.com>",96,23,0
"thesofproject/sof","074ea8b93d225f39d738bb912cf91272ce9b98cb","xiulipan","2019-10-30 04:40:31","false","scripts: add build for JSL

Add build scripts for JSL with gcc and xcc support.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",64,17,0
"thesofproject/sof","24ad7ea0fa2ea33687c2ef3f7eb85efe75430c60","plbossart","2021-07-30 13:21:08","false","topology: sof-glk-es8336: initial support

This topology is used on GLK and TGL. variations include:
- DMIC supported on TGL and not on GLK
- TGL uses SSP0 instead of SSP2

APL support was added only based on user reports. This assumes the
same topology as GLK but was not tested.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",108,38,0
"thesofproject/sof","04df9161cbfd5a667ff46c8b7ae9375ac4f47b46","plbossart","2022-07-05 17:23:31","false","topology1: sof-tgl-rt711-rt1308: make BT_OFFLOAD a CMakeFiles parameter

Somehow we assumed that all ADL platforms support BT_OFFLOAD. Wrong,
this is only valid for Chromebooks and needs to be set externally in
the CMakeFiles definitions.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",109,49,1
"thesofproject/sof","d8f529c830be3d700b59e365e1e5198ff57542ad","plbossart","2019-01-16 05:08:05","false","src/include/sof/dai.h: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","7cb9a0368cd853596b02de3b920b3c73ae6932db","tlauda","2019-02-25 11:48:03","false","dw-dma: add missing preprocessor conditions

Adds missing preprocessor conditions for
linked list block processing.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,9,0
"thesofproject/sof","80f3d47215c67afb0036b09b849a12799e584254","tlauda","2018-06-05 16:25:37","false","apl: core: enable boot loader path for Apollolake

This patch:
- Enables APL boot via SRAM,
- Disables L2 cache for APL,
- Reshapes linker scripts for APL and CNL.
- Adds support for using external xtensa headers for xt-xcc.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",1,0,0
"thesofproject/sof","b4fc677c709dab7edba9cc28ac360134e000b7ed","tlauda","2019-07-01 12:45:43","false","dw-dma: change behavior for preload

Changes behavior for DMA_COPY_PRELOAD flag.
DW-DMA should just start transfer the same way
as for DMA_COPY_ONE_SHOT. It fixes playback
for platforms using DW-DMA for host transfers.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",42,13,0
"thesofproject/sof","4da92a9e904030b3d4ed0b18d25a7711b02f7fcb","tlauda","2019-04-30 03:17:28","false","memory: set separate sys runtime heaps for every slave core

Sets separate system runtime heap structures for every slave core.
Previously it only allocated one structure per all the slave cores,
which caused wrong allocations.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",47,11,0
"thesofproject/sof","1f8df21549148492e472e4fea0cea738ad47ee6f","tlauda","2019-12-11 14:50:36","false","schedule: make ops constant

Makes schedulers and scheduling domains ops constant and effectively
puts them in rodata segment.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",73,18,0
"thesofproject/sof","b56e6acf99e22b9230660702d684b84e987a1008","tlauda","2018-07-11 09:40:57","false","volume: fix processing size in HiFi3 implementation

HiFi3 implementation for volume used wrong buffer size,
which caused buffer overflow.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",15,1,0
"thesofproject/sof","fe321d65f8f1034a31d81289599dc281f3d44ef1","tlauda","2019-10-30 11:54:18","false","host: dai: handle dma buffer in cache functions

Adds missing writebacks and invalidations of DMA buffer in
host and dai components.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",62,17,0
"thesofproject/sof","6f26cfd8c4c8463f4538e252401f1347d9922777","tlauda","2019-10-15 07:47:51","false","dai: verify if DMA channel exists in dai_prepare

Checks if DMA channel exists in dai_prepare. This way we will
avoid exception in case DAI config hasn't been called before.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",65,16,0
"thesofproject/sof","1dfac3546166d7868e70f7771219478820fc8588","tlauda","2018-08-10 10:01:24","false","work: add queue timesources per core

Adds additional work queue timesources for slave cores.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",19,2,0
"thesofproject/sof","eaa0ad01f3f0d8bb6d9664a9822d0affb4101394","tlauda","2019-10-18 09:12:08","false","buffer: implement buffer copy functions

Implements simple buffer copy functions for 16 and 32 bit data.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,17,0
"thesofproject/sof","048145fe6006f89017c2f4e2d638e3db7e3a0de1","tlauda","2019-10-21 09:21:05","false","pipeline: remove code related to preload

Removes code related to preload as with separate DMA
buffers we no longer need it.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",63,17,0
"thesofproject/sof","1a2afeb55298cfe1c2eaeea482420595412ef167","johnylin76","2021-01-08 09:07:54","false","tools: topology: Add common Codec Adapter playback pipeline tplg

pipe-codec-adapter-playback.m4 is implemented as a common pipeline
module of a playback codec w/ Codec Adapter API.

For codec developers, a upper-layer tplg file should be provided for
the specified codec with the information of control bytes, schedule
core, and byte-control names.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",75,31,0
"thesofproject/sof","acebe4b8a9dd20d24f9ee76e5549f29d0b637ce5","lbetlej","2020-03-26 14:54:36","false","cavs: set HP ring oscillator clock as a default

The change is provided to address issues reported by users who try
to execute workloads that exceed computing capacity provided by
LP RO clock.

On the other hand motivation to have a canary settings to check
FW pipelines utilization is diminished as infrastructure improvements
to measure compute utilization per component are introduced.

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",64,22,0
"thesofproject/sof","5668576429f33f736f01df56c2edb94841cad525","lrgirdwo","2023-08-28 21:21:56","false","host: trace: decouple the testbench from host build

Host build should not depend on testbench symbols. Also add timestamp to
the trace log.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",25,63,1
"thesofproject/sof","6c4f3ea42f0d04e9a421dd8325cdbc9be31056bf","dbaluta","2022-05-11 08:35:00","false","module_adapter: Don't use config->type to identify component

We need to use UUID in order to identify a component. For now
we only support module_adapter components so just skip checking
config->type.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",113,47,1
"thesofproject/sof","656b36967a2fa35e9569aeaa3923f8228b310cbd","singalsu","2020-06-30 11:38:29","false","Audio: ASRC: Track skew min/max values and trace them in asrc_reset()

This patch adds useful trace to help solve possible issues with slave
DAI rate stability. If there are quality issues with ASRC, it is
useful to check the reported values. Skew values are Q2.30 fractional
integers.

E.g. at skew of 1073518174 the measured DAI sample rate is
48000*2^30/1073518174 = 48010 Hz when nominal rate is 48 kHz.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",72,25,0
"thesofproject/sof","91467d092433bed93f798ea1030346b3ff19944f","bzhg","2020-07-14 16:46:27","false","cmake: Link TGL Google hotword library

libc and libm are provided by the xcc toolchain.
They are not available from the gcc toolchain.
To build with gcc, libc and libm should be provided
under third_party_libraries.

Signed-off-by: Ben Zhang <benzh@chromium.org>",81,25,0
"thesofproject/sof","332dd4a10fadeaddab33dd8dbfef2a4eba4fe0e3","pblaszko","2023-03-15 11:21:19","false","aria: configure stream params

Configure in/out buffer stream params.
In Windows scenarios, unconfigured values were causing zero-division
exception in audio_stream_get_avail_frames.

Signed-off-by: Przemyslaw Blaszkowski <przemyslaw.blaszkowski@intel.com>",56,57,1
"thesofproject/sof","1fc1d2858425f214628cc9365b075f59801331ea","RanderWang","2023-10-12 05:18:08","false","topology2: clean up audio format

Separate the input & output audio format.

Signed-off-by: Rander Wang <rander.wang@intel.com>",11,64,1
"thesofproject/sof","c991dd070a0c57f54ae3426fca53a18f7520e708","RanderWang","2022-05-23 01:09:51","false","ipc4: use buffer_free to free buffer

Fix memory leak in stress test. Buffer_release is for cache
operation not for memory free. And buffer_free can free memory
and also release buffer.

Signed-off-by: Rander Wang <rander.wang@intel.com>",117,48,1
"thesofproject/sof","0fefcc8bdfc65a868d2df91bbbf2c110de422771","RanderWang","2021-08-25 02:49:39","false","topology2: ipc4: add mixin & mixout support

Also add a simple pipeline used by windows. A normal
playback pipeline is : copier -> mixin -> mixout -> gain -> copier

Signed-off-by: Rander Wang <rander.wang@intel.com>",121,39,0
"thesofproject/sof","a938cec8ba2222bd0f40264096a12b3d1f931192","RanderWang","2021-09-16 05:01:52","false","ipc4: add get/set large config support in component ops

Get/set large config are natively supported by ipc4 component,
so add these two ops.

Signed-off-by: Rander Wang <rander.wang@intel.com>",117,39,0
"thesofproject/sof","dde9d8714877554a7e3152e81c8bdff86b0561a5","jajanusz","2019-04-25 18:52:40","false","host: make testbench headers private

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",48,11,0
"thesofproject/sof","c5d01530af4a89e5b616bb57e1a115d8066dab08","jajanusz","2019-02-13 20:16:22","false","tests: fix idc for smp

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",60,8,0
"thesofproject/sof","fb46b5cbae2822ea95112a4ec57100bbd98c69f2","lrgirdwo","2021-10-25 10:43:31","false","ipc: common: log any failure when freeing compdev

Let the user know if we have any failures freeing a compdev.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",124,41,1
"thesofproject/sof","767702f320f1ccb75ab2fbe85c8345e26105ff11","lrgirdwo","2023-08-01 14:45:15","false","ipc4: ipc atomic state should be reset after timeout.

reset the atomic ipc4 message delay state after any timeout error.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",30,62,1
"thesofproject/sof","99c53d90f9748158012d725e27de1490e524c445","tmleman","2023-09-14 12:22:57","false","base_fw: get fw config

This patch is changing value of slow clock in response for FwConfigGet
from LP clock to the lowest clock is section ""slow clock"".

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",20,63,1
"thesofproject/sof","f09f3ae00b1366bd654441c1dd404a2a80ca692a","marc-hb","2023-03-22 00:43:31","false","scripts/fuzz.sh: various cosmetic fixes

- Create new setup() function
- Separate export for set -e compatibility
- Don't use the generic `build` directory but a more specific
 `build-fuzz` instead.
- De-hardcode zephyr path thanks to west
- shellcheck clean

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",57,58,1
"thesofproject/sof","b19cd3f0806ef2ad23394e28b83dac45f0476c65","marc-hb","2022-09-16 23:45:20","false","xtensa-build-zephyr.py: don't complain about cmake_args when pristine

Don't ask the user to delete the build directory when they are using the
option that deletes the build directory.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",98,51,1
"thesofproject/sof","e17b90d9b2d66a5c61dc79c4310d9e6cf4e1dbb5","marc-hb","2021-01-14 02:12:39","false","scripts: replace ""make"" with ""cmake --build""

This makes it possible to switch to Ninja with a single line change
which can be useful to test build changes and issues.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",72,31,0
"thesofproject/sof","9dc763f782abd681905c59038a50db8e9ac40a36","marc-hb","2021-01-14 02:14:49","false","testbench/cmake: don't hardcode the BUILD_COMMAND

ExternalProject() preserves the existing BUILD_COMMAND

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",72,31,0
"thesofproject/sof","453c686fd12dbd36bda4f2b602167338ee97f6f3","marc-hb","2021-02-26 19:19:23","false","installer/README.md: no need to build manually anymore

Doc update missing from the most recent pull request.

Also warn against `make -jN stage rsync`

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,33,0
"thesofproject/sof","4348e2a2bd6a8396a3f35bf1bf48f2662e3e73e0","marc-hb","2020-06-16 04:59:30","false","cmake: use CMAKE_BUILD_TYPE and default to Debug

Unlike hardcoded target_compile_options(-g) can be overriden from the
command line, from the parent ExternalProject_Add(CMAKE_ARGS) (tested)
or from a CMake GUI (not tested).

Default to Debug because the time spent running rimage is negligible
compared to building the image to sign and because the time saved
learning CMake when it crashes can be huge for some people.

BTW -O2 -g is rarely ever useful.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,25,0
"thesofproject/sof","a0a7952b585f736d7dfbf5bdd93bbbd87201ff7e","lyakh","2023-01-16 11:29:41","false","dai: protect common properties objects

Some DAI types share properties objects between playback and capture
directions and write to them and read from them with no locking. Add
a DAI spinlock to protect them.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,55,1
"thesofproject/sof","df576da380de79605c141737d63725dd814ea8ab","lyakh","2022-04-07 14:53:52","false","host: always acquire buffers for access

Buffers must always be acquired before access.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",114,46,1
"thesofproject/sof","a971f85c1a5c51c7dde1ea80811bac5219a0b1b0","lyakh","2021-06-22 14:42:10","false","zephyr: ll-domain: fix domain unregistration

When the .domain_unregister() method is called, .total_num_tasks is
still positive, it will only become 0 for the last task after
.domain_unregister() returns. When cleaning up also set the user
pointer to NULL.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",74,37,0
"thesofproject/sof","7de17445018f5452a90df970943e1799dc4c9c6f","ShriramShastry","2021-05-20 06:16:10","false","Math: Trignometry: Cordic sine() and cos()

Add static inline for math sin() and cos()
functions.This PR is just moving existing code to
improve runtime performance due to less function calls

Signed-off-by: ShriramShastry <malladi.sastry@intel.com>",85,35,0
"thesofproject/sof","e963c54f0de6247b72f406806c5865e9a97565d7","ktrzcinx","2020-06-19 07:41:32","false","smart_amp: Set rate in feedback channel

Each audio stream should have assigned valid data description,
like channel number, data format and data rate. It's especially
important for audio streams used to connect two arbitrary
components together, because of them may need this information,
what leads to unpredicted errors.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",78,25,0
"thesofproject/sof","f8d596562c53ddc2e8867cc38ef2b1ee595364f5","ktrzcinx","2020-01-08 13:43:50","false","pcm_converter: Properly handle CONFIG_FORMAT_CONVERT_HIFI3

Include config.h in header where this define is used

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",71,19,0
"thesofproject/sof","724617f282a44db1172a9b5d64cc9fdf425dadb0","ktrzcinx","2019-11-06 20:51:24","false","kconfig: fir: selective build by CONFIG_FORMAT

Include in footprint only support for selected
data formats. It may make footprint lighter.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",52,17,0
"thesofproject/sof","1ffeda5499beffb21ee2ce6b3a9e6bcfd2bae2ac","ktrzcinx","2020-01-23 11:03:47","false","pcm_converter: audio_stream: Pass offset to first sample to function call

During working with algorithms on special data types there may be need
to convert and store input samples before algorithm run in temporary
buffer. Same situation may happen on the algorithm output.
Size of this buffer may be big enougth to always convert source
data stream in one pass and converter interface doesn't need to be
changed but then capacity of this buffer must be same as source stream
(in samples). In this scenario memory management is very inefficient,
espially with grow of number of components with such a need.

There are also a few solution to use smaller buffers instead.
It can by achieved by:
1) manually moving r_ptr in source stream in component copy() routine,
   what shouldn't happen in such a place
2) calling buffer_consume() after each portion of samples, what leads
   to data fragmentation and performance issues
3) introducing offset argument in converter interface

As we can see, solution number 3 is best one.
Moreover introducing data offset for processing function is common
technique and doesn't introduce visible performance issues.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",79,20,0
"thesofproject/sof","b1d0fd7e6420283490e5dd77bd27831d61790b7a","ktrzcinx","2020-10-12 07:43:03","false","trace: ipc: pipeline: Make error logs more detailed in ipc_pipeline_new()

It's not obvious that icd refers to pipeline scheduling component,
so added this information to log message. By the way, scheduling
component id has been printed.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",68,28,0
"thesofproject/sof","3600cf0eea7d2027ac2e00585f648d176941c654","ktrzcinx","2019-10-25 06:36:50","false","ipc: Break ipc_comp_dai_config after first error

Added break statement after error, as it was before refactoring
this part of code in commit <89ef0af07612c0bcf1a85fec3871d0c31e60087b>
(""ipc: Refactor ipc_comp_dai_config function"").
While at it, also removed additional parenthesis around trace_ipc_error.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",67,17,0
"thesofproject/sof","c3177294777f5cf7266ce19e7a0ad4e441ae9d96","ktrzcinx","2020-05-29 08:26:34","false","trace: buf: Add trace context for each buffer instance

Each buffer instance should use own trace context to allow
setting different log level per buffer.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",97,24,0
"thesofproject/sof","2f8fb814959ff2df07ab685709b6c43edf44c53e","ktrzcinx","2019-11-07 20:45:40","false","kconfig: kpb: selective build by CONFIG_FORMAT

Include in footprint only support for selected
data formats. It may make footprint lighter.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",53,17,0
"thesofproject/sof","bf26cd9ca77a070fc7e9aaecd6667fe9f37a19c2","lgirdwood","2018-09-06 08:46:00","true","Merge pull request #317 from singalsu/eq_iir_simplify_init_dcache_invalidate_proposal

EQ IIR: Increase IPC length, simplify initilialization, and dcache invalidate code",31,3,0
"thesofproject/sof","52e378c3fb1766c96cc50a14463084156d5e1ef8","softwarecki","2023-01-17 11:02:04","false","samples: detect_test: Don't include ipc4 structures when using ipc3

Despite using ipc3 some ipc4 header files were still included. Added #if to
solve this problem.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",54,55,1
"thesofproject/sof","44374e7e3a6e6f793209d88eefaf346120adeeea","btian1","2023-04-30 20:24:28","false","dai-zephyr: Expose dai_zephyr_copy()

Expose and use the function for the single endpoint DAI coper case in
preparation to remove the creation of the DAI device.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,59,1
"thesofproject/sof","8eb6a7861dfa45866376dedb3f14131f8f531ac4","jajanusz","2019-06-12 08:52:21","false","testbench: move README from doc to tools

All tools-related programs should be in tools README.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",49,12,0
"thesofproject/sof","cd7f96fdbc0ead78db029d39a966d184577f3e22","jajanusz","2019-04-04 09:26:06","false","cmake: host: enable traces

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",50,10,0
"thesofproject/sof","141da0793f45f714b9eda90e896c4c8bb952fc82","johnylin76","2022-05-05 08:26:48","false","scripts: update xtensa core name and version for renoir

Update xtensa core to RI-2019.1 for AMD platform Renoir

Signed-off-by: Pin-chih Lin <johnylin@google.com>",115,47,1
"thesofproject/sof","590b55d8b3fe2962a750490f07397e8e24a3f164","plbossart","2019-06-25 07:47:25","false","config: make ALH part of default config for ICL and CNL

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>
Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",46,13,0
"thesofproject/sof","6d8940ce86feabb90cd1043b19aed774e8e65f73","lbetlej","2020-01-29 13:43:36","false","cnl: make boot loader code more readable

Boot loader code was modified to more readable by renaming functions that
are used to actually power up memory banks during memory initialization
routine.

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",77,20,0
"thesofproject/sof","556c114f47063b950f7c6eeb1b39becea9d77669","plbossart","2021-06-18 19:10:35","false","topology: sof-cnl-nocodec: add macros for SSP cores

Prepare for reuse across all platforms. For now this still uses
single-core.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",74,37,0
"thesofproject/sof","e4b04290d496b03838918652c95e5814cc40d5c2","lrgirdwo","2021-08-16 16:00:11","false","testbench: fix help formatting and indentation.

Easier to read now and comprehend.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",117,38,0
"thesofproject/sof","5cc75be44b2671bcb1f720a00b5284fadc2bee09","plbossart","2021-02-11 23:59:19","false","topology: use fatal_error instead of errprint

errprint does not stop the compilation as intended, it just prints a
message which is removed by the makefile.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",74,32,0
"thesofproject/sof","1f68cabafac851ca03d9409f235660ac31046498","johnylin76","2021-05-11 14:10:54","false","topology: add drc-eq-volume-demux playback pipeline and default coefs

Adds pipe-drc-eq-volume-demux-playback.m4 for locating Multiband DRC and EQ
IIR on the path of the internal speaker.

This pipeline will be used by Eldrid first for Audio DRC/EQ offloading
purpose.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",85,35,0
"thesofproject/sof","94fc66d5d3cd583f547829644f36f467edd0899d","jgunn0262","2019-04-24 20:29:21","false","headers: remove unused header from IPC handler and audio core.

The Intel shim header is specific to Intel hardware and not used by IPC
handler or audio core.

Signed-off-by: John Gunn <jgunn0262@gmail.com>",52,11,0
"thesofproject/sof","38dfb9e011d0b1f3e36314cf03f85482ac1c710b","xiulipan","2021-02-01 05:30:26","false","cavs: pm: change the timeout value to 2ms for HOST IPC handler

With a recent test result:

[ 9435.941365] sof-audio-pci 0000:00:1f.3: ipc rx: 0x90020000: GLB_TRACE_MSG
[ 9435.941392] sof-audio-pci 0000:00:1f.3: ipc tx: 0x40010000: GLB_PM_MSG: CTX_SAVE
[ 9435.942023] sof-audio-pci 0000:00:1f.3: error: DSP trace buffer overflow 4294967295 bytes. Total messages -1
[ 9435.942030] sof-audio-pci 0000:00:1f.3: ipc rx done: 0x90020000: GLB_TRACE_MSG
[ 9435.942118] sof-audio-pci 0000:00:1f.3: ipc tx succeeded: 0x40010000: GLB_PM_MSG: CTX_SAVE

IF a DSP sent IPC just arrived before IPC CTX_SAVE sent, the HOST IPC
handler may be delayed anda use about 1ms. Change the timeout value
to 2ms will be safer

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",67,32,0
"thesofproject/sof","5b5936fba647e356d4c9ad3e0fb69fb4a0554cbf","kuanhsuncheng","2021-08-27 11:32:32","false","platform: mt8195: add afe-platform support

Add memif data for afe
Add common and regs header for afe
Add afe platform for mt8195 audio/dsp

AFE: the abbreviation for Audio Front End

Signed-off-by: YC Hung <yc.hung@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",119,39,0
"thesofproject/sof","fa2fc61fe6d38d0c82db0e73b4a70e894a84a956","bardliao","2018-12-23 17:26:51","false","rimage: make block divisible by 4

Add pandding to each block if the block size is not divisible by 4.
Which can avoid unaligned memory accesses.

Signed-off-by: Bard liao <yung-chuan.liao@linux.intel.com>",50,7,0
"thesofproject/sof","9ba1814d1d94c4217507ecd28f5a82c65794563d","mrajwa","2019-07-26 13:16:57","false","kpb: change draining copy type to normal

This change dma-copy type from blocking to
normal. This is because blocking mode slows down
draining considerably and from safety standpoint
we cover it by period-interval now.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,14,0
"thesofproject/sof","8eedfe48364f1a8b3a958c70321a517707c7bfbe","marc-hb","2023-09-22 18:21:31","false",".github: build-windows: choco install ninja

Ninja seems to have just mysteriously disappeared from
https://github.com/actions/runner-images/blob/win22/20230918.1/images/win/Windows2022-Readme.md
See #8250 for more details.

Let's try to install it explicitly.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",22,64,1
"thesofproject/sof","d313bcf9fccd6ccaebce5030b6dc4cd39098c4c1","ktrzcinx","2020-02-04 14:19:08","false","ssp: Use register name instead of bit value

Introduce SSTSA_TXEN and SSRSA_RXEN macro to define bit value in
header file instead of usage raw value in source code.
Moreover use SET_BITS to set Rx/Tx slot value.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",77,20,0
"thesofproject/sof","29ed0da494841c01f03ea1b65c7c13af63cac589","ktrzcinx","2020-09-04 11:29:17","false","toml: Add TOML parsing library as git submodule

TOML aims to be a minimal configuration file format that's easy to read
due to obvious semantics. TOML is designed to map unambiguously to a hash table.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",70,27,0
"thesofproject/sof","678cf3f655be73becc937878ac79236f2a07f456","lgirdwood","2018-08-28 15:53:49","true","Merge pull request #271 from mmaka1/hda-clk-drift-fix

Hda clk drift fix",21,3,0
"thesofproject/sof","e08be9c2d799d1d1e4cbc8d7095e7a531c898167","iuliana-prodan","2023-05-03 15:26:26","false","topology: imx: Combine SRC topology files for i.MX8MP and i.MX8

Combine SRC topology files for i.MX8MP and i.MX8 using different
variables like RATE, SAI_INDEX, CODEC.

Based on CODEC use the proper DAI_CONFIG or STREAM_NAME.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",54,59,1
"thesofproject/sof","54b3245b25c5268432dddf41aeb8f686c8f93114","cujomalainey","2020-10-06 22:02:24","false","host: add dai to build

this is needed to expose the ipc handler

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",67,28,0
"thesofproject/sof","48620f7a907c0070880ac48e18ebb5d3021d6de1","cujomalainey","2023-07-13 20:05:06","false","audio: dts: Fix header pathing

DTS headers have been publish, don't use local includes and don't modify
include paths for no reason.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",32,61,1
"thesofproject/sof","ccab5cd8a38f280d35e270338ce8553577c66644","cujomalainey","2022-01-12 01:28:42","false","ipc: fix signed int overflow in macro

shifting anything into the sign bit location is technically undefined,
add unsigned marker to satisfy cppcheck

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",114,43,1
"thesofproject/sof","f8e3b126e1a8e0e738b27c17db2c332280c05c0e","cujomalainey","2018-11-25 07:30:33","false","Adjust tools build script for new path

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",40,6,0
"thesofproject/sof","e08ea66bd17201fe695a1836bf8261cbb2be6af1","keqiaozhang","2018-07-19 13:20:55","false","kmod_scripts: add rt274 and tdf8532 support

Signed-off-by: Zhang Keqiao <keqiao.zhang@linux.intel.com>",13,2,0
"thesofproject/sof","81936774c86edb989da8260f22b2ceea8c5af489","akloniex","2019-10-30 09:43:26","false","notifier: Add traces for notifier.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",64,17,0
"thesofproject/sof","88dee77ed3d5c065cd59188ee6a879b845999b34","lrgirdwo","2018-12-03 21:11:57","false","abi: ipc: Allow ABI to grow with MINOR/PATCH updates.

This patch allows ABI changes to incrementally grow certain IPC
structure and sub structures without changing MAJOR and keeping
backwards compatability.

Adds some helper IPC copier and validation macros that should be used
when handling external IPC structures. These ensure IPC changes are
handled correctly without causing errors or failures.

IPC size should be the first item in each structure to make it as easy
as possible to manage MINOR and PATCH ABI updates without unnecessary
replacement of FW or kernel.

This patch also makes size first in the IPC command header and introduces
a new header for internal IPC sub structures. The sub structure size
can be used to validate IPC and also be used to grow tail IPC command
sub structures as MINOR/PATCH ABI changes.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",41,6,0
"thesofproject/sof","7189916c53c10ca241ec65ed6d27b980e00d4734","plbossart","2020-06-27 17:47:09","false","topology: introduce pipe-host-volume-playback

Add a new pipeline definition to avoid mucking with either
pipe-low-latency or pipe-media.

The code is 90% similar to pipeline-volume-playback but includes a
scheduling component.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",70,25,0
"thesofproject/sof","adee39984b609142d88e0316855d03fcfb94b219","lrgirdwo","2018-09-26 13:52:03","false","host: fix build again...

Missing platform clock. Now added.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",37,4,0
"thesofproject/sof","d1c6cf168a424524586198f5eb92426878ce3f2d","lrgirdwo","2021-04-12 19:12:17","false","ipc: move compact message processing to handler logic.

IPC compact messages are ABI specific. Move to ABI handler.
No code changes.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",81,34,0
"thesofproject/sof","753a76bbfa937b2f8ff5be1a851e2b35b96055da","plbossart","2019-08-07 21:09:14","false","kmod_scripts: handle rt700/soundwire machine driver

In theory we wouldn't need to explicitly load the rt700 driver but
doing so solves a race condition we will have to fix in the kernel at
some point.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",53,14,0
"thesofproject/sof","e4e23d47ec312438ed30e55bcbfff6b3120a866a","MingJenTai","2021-08-25 01:30:43","false","Integrate RTNR into sof-adl-max98357a-rt5682

Signed-off-by: Ming Jen Tai <mingjen_tai@realtek.com>",120,39,0
"thesofproject/sof","9d21f9ecf2cb2c26e6072426b181bdb689c8b646","bzhg","2021-05-20 00:51:28","false","topology: Add a tgl-max98357a-rt5682 tplg with DMIC16k on PDM1

There are TGL devices using either PDM0 or PDM1 port for the DMIC16k
DAI for hotword detection. This patch adds the DMIC_DAI_LINK_16k_PDM
parameter and builds both versions.

Signed-off-by: Ben Zhang <benzh@chromium.org>",85,35,0
"thesofproject/sof","3baddf338e03f3bbd53a302da17ca3855eb5cca3","lrgirdwo","2018-12-22 14:05:01","false","prefctl: sml: make sure prefctl settings match UP settings.

SMP prefctl setting should be the same as UP prefctl settings. Fix this.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",50,7,0
"thesofproject/sof","c99ae6fd873224dc7be23c2e8bdb2ddf14b934dd","lrgirdwo","2021-11-23 15:02:17","false","cht: align gcc defconfig with xcc config

Don't build TONE and optimise for size.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",129,42,1
"thesofproject/sof","8d1af8e3972e87dc6c8c5ebd46e127ac42e62d05","plbossart","2019-01-16 05:08:03","false","src/audio/volume.c: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","0570315cd952c032322292e62dc36beea8214305","yongzhi1","2021-08-20 17:39:40","false","topology: pipe-volume-demux-playback: fix pipeline comments

Update the comments to match the P_GRAPH definition.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",120,39,0
"thesofproject/sof","03fb524f1569e4c31b573638e129ab4d51e46b33","lyakh","2022-01-07 13:50:40","false","heap: remove unused mm_pm_context_{save,restore}()

mm_pm_context_save() and mm_pm_context_restore() are never used,
remove them.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",116,43,1
"thesofproject/sof","0658767b7246baa31c62e5d6643c8b9a8effb48a","marc-hb","2022-12-22 19:20:54","false",".github/sparse-zephyr: docker pull in a separate step

This saves a lot of scrolling in the next, most popular build step.

Missed in previous commit 52223eba2d45 ("".github/zephyr: docker pull in
a separate step"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",92,55,1
"thesofproject/sof","0cad7a04fbffc1e17c26460d9e701abdff59510b","kuanhsuncheng","2021-08-27 06:21:40","false","drivers: mtk: add drivers for mt8195

Add irq, ipc and timer drivers for mtk mt8195

About mt8195:
Two domains of IRQ:
IRQ_EXT_DOMAIN0 and IRQ_EXT_DOMAIN1

IRQ num: 25 interrupts
IPC: use mbx0 and mbx1 to transfer ipc msg

Signed-off-by: YC Hung <yc.hung@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",119,39,0
"thesofproject/sof","b14dc2e2fd939827469197fe5c2d698e9a76fd81","saisurya-ch","2023-06-26 06:42:45","false","driver: amd: introducing initial silence in DMIC path to
remove the popping noise

Initial silence in DMIC path to remove the popping noise
during the start of DMIC.

Signed-off-by: SaiSurya Ch <saisurya.chakkaveeravenkatanaga@amd.com>",40,61,1
"thesofproject/sof","ecae65c92deebb8cf7b981a30dfa5c3cb42db6f8","tlauda","2019-09-13 13:02:09","false","pipeline: add preload_task

Adds preload_task to pipeline. This task is only
allocated and initialized, when pipeline needs to be
preloaded with data e.g. render pipe scheduled on DMA irq.
It's always an EDF task, so we make sure it's get scheduled
no matter if interrupt was triggered or not.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,15,0
"thesofproject/sof","2ab6bc9afe7d1cfa8f5627559653e397575d620c","tlauda","2019-09-16 11:23:59","false","dma: extract dma array

Extracts dma array to be accessible from the generic API.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",61,15,0
"thesofproject/sof","a3eaaf8b2d1a2c0ad8c03cc8658b2ff43cd36b03","tlauda","2019-02-07 09:07:44","false","buffer: add helper function for processing wrapped buffer

Adds helper function for easier processing of wrapped buffer.
Processing modules should switch to this function instead of
directly using read and write pointers of buffer.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,8,0
"thesofproject/sof","3f3698f461c9e74e1e7e1da88d07d1370ca12a8e","tlauda","2019-12-13 12:18:58","false","pipeline: refactor posn_offset calculation

Refactors pipeline's posn_offset calculation to include
pipeline_id rather than static map of calculated offsets.
This way we can remove posn_map from ipc structure.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",75,18,0
"thesofproject/sof","4563f2c12ddfebd9fbae1d9a41e2229ccf7e7718","tlauda","2019-08-05 13:01:06","false","pipeline: add function for checking pipe execution core

Extracts check whether the pipeline should be executed
on the current core to separate method.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,14,0
"thesofproject/sof","2451c59f38db7373c4b0ca6f99011d1ac5e73ae2","tlauda","2019-12-17 12:29:14","false","ll_schedule: fix task insertion

Fixes low latency task insertion into the priority list.
Tasks should be inserted into the list from the highest to
the lowest priority. Tasks with the same priority should be
served on a first-come-first-serve basis. Note that the
list_item_append method, which is used to insert task into
the list is a bit misleading, since it normally should work
on list's head instead of any element from the list.
This piece of code should be revisited in the future and
proper list_item_insert method should be implemented and used.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",70,18,0
"thesofproject/sof","5120b99721c40457db4e0322f2a761d3cb5144b0","tlauda","2020-02-21 15:14:00","false","detect_test: guarantee sending detection notification to host

This patch guarantees detection notification message sending
by preallocating message structure and sending this particular
IPC instead of sending first message from the queue.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",80,21,0
"thesofproject/sof","f430addec75218043df022fec49a76c62742ad06","singalsu","2020-08-27 14:13:21","false","Tools: Fuzzer: Do not use illegal BUILD_COMMAND in CMakeLists.txt

This patch removes the incorrect usage of BUILD_COMMAND. Having it set
to ""cmake"" caused the cmake usage help text output to be shown only and
caused the ExternalProject_Add command to believe the
libsof_tplg_parser.so was built. The build for the library happened only
because the next install step performed the compilation. With this fix
the default build command is used instead. There's no need to define
it here.

Fixes #2656

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>
Signed-off-by: Marc Herbert <marc.herbert@intel.com>",73,27,0
"thesofproject/sof","1966065ae9b9f64280da1abf1ff8d1afb760844b","bkokoszx","2020-02-24 16:20:23","false","dai: ssp: refines ssp get_hw_params functions

FOR ssp channels parameter can be different for
PLAYBACK and CAPTURE and it depends on tx_slots and
rx_slots config variables. This commit utilizes those
variables in get_hw_params() function in order to
return hardware stream parameters correctly.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",77,21,0
"thesofproject/sof","d477a83aaa4934b9d0a53b93d2e440d435d498a9","bkokoszx","2020-09-23 07:52:26","false","pipeline: adds missing buffer locks/unlocks

In case of changing specific values in buffer structure,
we should use buffer locks an unlocks macros in order
to retain multicore coherence.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",67,28,0
"thesofproject/sof","4f3f93d92992c2b5afa3898d597001ab43f8b9f3","bkokoszx","2020-03-01 14:44:24","false","comp: remove output_rate field from comp_dev struct

This commit removes unused output_rate field from
comp_dev struct. If needed, component can retrieve
rate parameter from sink/source buffers.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",73,21,0
"thesofproject/sof","e6f2b1fb35dad982c0d63099f858cf88549e1eca","bkokoszx","2019-03-19 10:53:09","false","trace: add traces defines to kconfig.

Add TRACE, TRACEV, TRACEE, TRACEM to Kconfig.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",64,9,0
"thesofproject/sof","0db8f3d1dbccc62c7ba9a590ac4e2cac2ad1dc60","lgirdwood","2018-11-20 19:52:05","true","Merge pull request #597 from zhuyingjiang/topic/sof-dev-fix-version-number

scripts: add local version number file",39,6,0
"thesofproject/sof","0b77e12395eacb0e70ecae9fbf5828df9e30edc8","mrajwa","2019-06-05 20:50:45","false","kpb: remove redundant pause of selector in kpb_init_draining()

After detection of keyword we shall stop further copy to selector
pipeline. We do this in regular copy() function so there is no need
to do it also in init_draining() function.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",60,12,0
"thesofproject/sof","4d9e3e9134ff6def2078814eee6c78463488d0b1","mrajwa","2019-04-25 12:21:09","false","kpb: initialize buffer data to zero

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",47,11,0
"thesofproject/sof","156d9462107011896925153dc2e33cb75ffc3b5e","lgirdwood","2018-07-05 18:55:46","true","Merge pull request #56 from mmaka1/make-doc

scripts: doc: enabled quick makefile generation for make doc",11,1,0
"thesofproject/sof","8998135f77b42c3168320b9fc562630154b07a93","lgirdwood","2018-10-24 08:49:10","true","Merge pull request #501 from tlauda/topic/smp-stack

memory: align stack space between xtensa smp and up",26,5,0
"thesofproject/sof","27a9e918345f308ae9909fcc39a84137eb5d6f38","dcpleung","2019-11-12 17:27:14","false","Rename rimage to src and move headers into src/include/rimage

This renames the rimage directory to ""src"". This also moves
the header files into src/include/rimage. This is in
preparation to allow rimage to be built outside of SOF tree,
and it requires some SOF header files. Moving headers under
src/include/rimage makes it obvious that these headers are
for rimage.

Signed-off-by: Daniel Leung <danielcp@gmail.com>",54,17,0
"thesofproject/sof","d0062122a8d966f9f9edd3d99e8d99db742fbcf0","marc-hb","2022-01-26 02:51:41","false","Fix confusion in headers between uint8_t arrays and strings

Strings are null terminated, byte arrays not always.

Fixes garbage in debug output issue #86

Add new parse_printable_key() function that takes a uint8_t * argument
instead of char *. Casting the argument on almost every call was a clear
indication of the problem.

Add new DUMP_PRINTABLE_BYTES() to printf uint8_t arrays _and_ their
_optional_ padding.

No change to the .ri output, bit for bit identical.

Here's an example of how the -v output is fixed:

```diff
    mem_zone.host_offset: 0x0

 cse
-         partition_name: 'ADSPADSP.man'
+         partition_name: ADSP
          header_version: 1
           entry_version: 1
              nb_entries: 3
-             entry.name: 'ADSP.man'
+             entry.name: ADSP.man\x00\x00\x00\x00
            entry.offset: 0x58
            entry.length: 0x378
-             entry.name: 'cavs0015.met'
+             entry.name: cavs0015.met
            entry.offset: 0x400
            entry.length: 0x60
-             entry.name: 'cavs0015'
+             entry.name: cavs0015\x00\x00\x00\x00
            entry.offset: 0x480
            entry.length: 0x0

@@ -140,7 +132,7 @@
           exponent_size: 1

 signed_pkg
-                   name: 'ADSP'
+                   name: ADSP
                     vcn: 0
                     svn: 0
                 fw_type: 0
@@ -161,17 +153,17 @@
                  bitmap: 0
                  bitmap: 0
                  bitmap: 0
-              meta.name: 'cavs0015.met^C^B '
+              meta.name: cavs0015.met
               meta.type: 0x3
          meta.hash_algo: 0x2
          meta.hash_size: 0x20
          meta.meta_size: 96

 partition_info
-                   name: 'ADSP'
+                   name: ADSP
            part_version: 0x10000000
             instance_id: 1
-            module.name: 'cavs0015.met^C'
+            module.name: cavs0015.met
        module.meta_size: 0x60
             module.type: 0x3

@@ -186,7 +178,7 @@

 fw_desc.header
               header_id: '$AM1'
-                   name: 'ADSPFW'
+                   name: ADSPFW\x00\x00
      preload_page_count: 0
          fw_image_flags: 0x0
            feature_mask: 0xffff
```

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",104,44,1
"thesofproject/sof","8059b8f9fde3749c718dbc60f9f8a06324a101a4","marc-hb","2021-07-22 02:19:02","false","xtensa-build-zephyr: better help and error message when -p is required

-p is required when the real (not symbolic) directories are not nested
in one another.

The documentation gap was clearly demonstrated by me getting confused
even though _I_ implemented this logic some time back.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",95,38,0
"thesofproject/sof","53bda51b99377200988785206bc27c8554fc5910","marc-hb","2020-09-15 01:45:36","false","logger: fix uninitialized FILE *out_fd in filter_update_firmware()

Reported by VERBOSE=1 CMAKE_BUILD_TYPE=Release ./scripts/build-tools.sh -l
and gcc version 9.3.0-10ubuntu2.

out_fd is not initialized on the first ""goto err:"" and this can result in
trying to close a random file descriptor.

Fixes commit 126060ae633b (""logger: Send parsed runtime log levels to FW
via debugFS"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",65,27,0
"thesofproject/sof","d19009ab8cc2928c70e63aac4f5737a53e1add4c","marc-hb","2022-05-11 22:00:41","false","checkpatch: do not combine if (!$SOF) with other ifs

Use a separate if(!$SOF) to minimize differences with upstream.

Also remove some spurious whitespace differences with upstream.

Zero functional change.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",113,47,1
"thesofproject/sof","16817f413e8cd5031237d26f6153395327bd0e11","marc-hb","2021-08-23 12:13:23","false","smex/ldc.h: stop including rimage/sof/kernel/fw.h

If the -Werr build does not fail then it's not needed.

The very first `#include fw.h` in `smex/ldc.h` was added in April 2020
in giant commit 36929ae1b7c63 (""smex: Create new tool to build ldc
file"") so there is no trace of why that `fw.h` dependency was ever
needed.

Because `fw.h` was then moved to rimage, this is indirectly making the
entire `tools/` directory depending on `rimage` - fixed in the next
commit.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",121,39,0
"thesofproject/sof","be7bed9ddf4e5218f81f4763a7fa9caef92cafe4","marc-hb","2021-05-10 23:14:05","false","logger: don't ""return"" when failing in the main loop, break instead

Set the error code in ""ret"" and only exit the loop so we don't lose the
optional warnings at the end of the loop.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",82,35,0
"thesofproject/sof","3d90a4548e53019163ad61758ecb485ce4e726aa","RanderWang","2021-07-15 08:06:26","false","ipc4: add bind & unbind ops for ipc4 module

In ipc4 each module will be bound to its sink module by pipeline.
This patch add new ops bind & unbind to dispatch these events to
related modules.

Signed-off-by: Rander Wang <rander.wang@intel.com>",91,37,0
"thesofproject/sof","35bc64467a943c402022f1962e9e63a9be8f7f61","RanderWang","2023-03-06 02:01:24","false","mtl: add eq-iir and fir support

Port from tgl-cavs.toml

Signed-off-by: Rander Wang <rander.wang@intel.com>",59,57,1
"thesofproject/sof","99d03de968f8cd2feec92a543fef67644019f7ff","jajanusz","2020-04-03 11:05:22","false","cmake: add *_overridedefconfig targets

Add targets that are meant to be used after defconfig,
to apply configs from <arch>/configs/override on top of defconfigs.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",81,22,0
"thesofproject/sof","d59cedbe612a9f1245e645f123b4d021a99b1d42","jajanusz","2019-06-01 15:13:03","false","test: include: add license

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",72,12,0
"thesofproject/sof","67597453ec4e554908c7da848eabd50b5d3aa9eb","jajanusz","2019-02-03 02:07:47","false","tools: tplg-build custom output dir

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",58,8,0
"thesofproject/sof","92761cf7bcaa3a9536dce2939ed51a1a3bb7e8d6","johnylin76","2020-07-31 05:48:06","false","tools: tplg_parser: Add Crossover component

Add Crossover component for tplg_parser.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",80,26,0
"thesofproject/sof","e973f5245e79123904e0cb2d6ecc60afff6f65bd","tmleman","2022-10-25 22:52:13","false","zephyr: cpu: moving outside of the wrapper

Moving core management code out of the wrapper for solutions builded
with zephyr.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",94,53,1
"thesofproject/sof","8367bd8bb4296b98e51904c86545961a050c660a","RanderWang","2021-07-15 02:36:25","false","ipc4: add header file for error code definition of ipc4

Ipc4 error code will be used in ipc4 interface layer and
current sof error code in framework or components will be
translated to ipc4 error code in this layer.

Signed-off-by: Rander Wang <rander.wang@intel.com>",88,37,0
"thesofproject/sof","4c7b69b1c4862a57a5c4b78932441bb66e869d14","dbaluta","2023-10-13 12:18:36","false","drivers: sdma: Set watermark level for PDM

In order to enable PDM we need to use Multi-fifo support
and mcu_2_sai RAM script.

This script defines watermark level as follows:

r7 = Watermark
    bit0~11: watermark level(wml*fifo_number)
    bit15~12: to do-fifo number
    bit16~19: fifo offset
    bit27~24: sw done selector
    bit28~31: # audio channels in one frame, 0: 1 channel,1: 2 channels
    bit23: sw done enabled

Configuration parameters should come from DAI (PDM in our specific case)
but there is no easy way to forward such information so we just make
use of some default configuration, 4 fifos, 1 channel per fifo, sw done
enabled.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",10,64,1
"thesofproject/sof","f305790e51f9cacda99056c65a98ba54f13f1ae5","dbaluta","2021-03-16 07:34:35","false","platform: imx8: Fix clock frequency for i.MX8X

Looking at the timestamps from sof-logger it looks like
the DSP core frequency on i.MX8X is wrong.

Documentation confirms this. It should be 640Mhz.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",72,33,0
"thesofproject/sof","691c4e0587d8ef80a36e5baf56af24254916be97","oleh-titov","2021-08-11 13:51:11","false","topology: Add Waves codec to JSL topology
Modify sof-jsl-rt5682 topology so Waves codec can be added
to playback in case 'WAVES' is defined.
Small refactoring

Signed-off-by: Oleh Titov <Otitov@waves.com>",117,38,0
"thesofproject/sof","92d53023ea1c532f13a8ef661a5b5d407fc75e42","xiulipan","2019-03-08 16:58:38","false","scripts: add clean up for host-build-all.sh

re-run the script will have no error now

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",67,9,0
"thesofproject/sof","0ac3b7a4705bd1987c7b217f2d312e690becdde0","fuyuntsuo","2021-05-24 15:02:48","false","audio: igo_nr: code refactor

Isolated debug code with CONFIG_DEBUG and renamed a function.

Signed-off-by: fy.tsuo <fy.tsuo@intelli-go.com>",83,36,0
"thesofproject/sof","f9e07679b9980a4684e39145355202a2561a03c5","lyakh","2021-06-17 10:41:11","false","schedule: remove an unused ""period"" parameter

When registering scheduling domains period is never used, remove it.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",71,37,0
"thesofproject/sof","e1141669830f448a63176945e0a8555c9bcfe6e3","marc-hb","2023-10-19 20:00:30","false","Delete inherited tools/rimage/.gitignore

rimage is not so special that it needs its personalized .gitignore

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",12,65,1
"thesofproject/sof","3ac890609757ccc97970f4565a601ec221154d5c","marc-hb","2021-07-24 21:41:55","false","unit tests: skip 'alloc' test when compiled on host

It is failing and skipped only when compiled on the host, runs fine with
xt-run.

This is temporarily needed to add host-based unit tests to CI now and
catch any regression in any other test now.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",99,38,0
"thesofproject/sof","8ceef9d46071d8e0b2974224ad590b3fe8205543","marc-hb","2020-06-27 05:20:38","false","qemu-check.sh: make $ROM a quoted bash array ""${ROM[@]}""

Removes shellcheck warning and could allow directory names with
whitespace in a very distant future.

Silence printf ""$@"" shellcheck warning in die() function.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",70,25,0
"thesofproject/sof","a5b3c8e36b0cfa73b8713e522370e0663e40b007","marc-hb","2021-05-18 22:37:21","false","logger: increase time_fmt[] size to avoid a gcc warning.

gcc does not know that we already filtered unreasonable precision
values.

Increase the size of the temporary string from 32 bytes to 64
bytes. We're running on the host, memory is cheap.

Fixes commit d6f6a456c11a5 (""logger: fix column and header alignments"")
For some reason CMake uses -Werror=format-truncation only in Release
mode.

Avoids the following warning:

```
sof/tools/logger/convert.c: In function ‘fetch_entry’:
sof/tools/logger/convert.c:514:27: error: ‘%d’ directive output may be
  truncated writing between 1 and 10 bytes into a region of size
  between 0 and 18 [-Werror=format-truncation=]

  514 |      ""%%s[%%%d.%df] (%%%d.%df)%%s "",
      |                           ^~

sof/tools/logger/convert.c:514:6: note: directive argument in the
       range [0, 2147483647]
  514 |      ""%%s[%%%d.%df] (%%%d.%df)%%s "",
      |      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

In file included from /usr/include/stdio.h:867,
                 from sof/tools/logger/convert.h:13,
                 from sof/tools/logger/convert.c:21:
/usr/include/x86_64-linux-gnu/bits/stdio2.h:67:10:

   note: ‘__builtin___snprintf_chk’ output between 21 and 59 bytes into
   a destination of size 32

   67 | return __builtin___snprintf_chk (__s, __n, __USE_FORTIFY_LEVEL - 1,
      |        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
   68 |      __bos (__s), __fmt, __va_arg_pack ());
      |      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

cc1: all warnings being treated as errors
```

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",87,35,0
"thesofproject/sof","24a6159cb204ec5e80a4fd2d4c09b70cdf1c739d","marc-hb","2021-06-23 23:40:29","false","apollolake/memory.h: sort regions table comment by address

This makes it possible to match the table with the definitions.

Pure comment change, no code change.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,37,0
"thesofproject/sof","4c9e3ddaf3e27f7bae6f203be30fc4f0238e6690","mengdonglin","2018-09-05 01:10:35","false","topology: Add 3 HDMI/DP PCMs and backends for GLK

Define 3 new PCMs and backends for HDMI/DP playback on GLK platform.

Here are the updated pipelines in sof-glk-da7219.m4:
PCM0  ----> volume (pipe 1)   ---> SSP1 (speaker - maxim98357a, BE link 0)
PCM1  <---> volume (pipe 2,3) <--> SSP2 (headset - da7219, BE link 1)
PCM99 <---- volume (pipe 4)   <--- DMIC0 (dmic capture, BE link 2)
PCM5  ----> volume (pipe 5)   ---> iDisp1 (HDMI/DP playback, BE link 3)
PCM6  ----> Volume (pipe 6)   ---> iDisp2 (HDMI/DP playback, BE link 4)
PCM7  ----> volume (pipe 7)   ---> iDisp3 (HDMI/DP playback, BE link 5)

There is also support for changing HDMI/DP pipelines to pass-through for
validation purpose, which is commented off by default.

Pleaes note that 3 virtual widgets hifi1~3 are removed, because they'll
be created by HDMI codec driver. This m4 was verified on GLK platform.",30,3,0
"thesofproject/sof","49bfc5aeb83d4a4f7d903c562929c985916b318b","ranj063","2022-11-09 23:57:54","false","copier: Don't block reset during xruns

When an xrun happens, the pipeline is reset to allow for a clean D3
entry. So remove the check for state in copier_reset() to allow the
copier component to be reset during xruns.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",93,53,1
"thesofproject/sof","2e9c5c5636b5fa65904e500d48daeffd073caf09","bkokoszx","2019-10-30 14:12:19","false","kpb: kpb task initialization displacement

Moves kpb task initialization from kpb_prepare()
to kpb_new() (kpb_prepare() can be invoked several times
for one kpb instance). Adds schedule_task_free() to
kpb_free() in order to avoid memory leaks.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",59,17,0
"thesofproject/sof","b8860be215ff2d7e004fe5e7613b9001c77c2172","ktrzcinx","2020-04-28 06:17:36","false","pcm_converter: Add float support in generic pcm_converter implementation

Implement set of functions to convert any data type with float,
in both directions, in common tool - pcm_converter.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",94,23,0
"thesofproject/sof","737bdb877f82ed3331dfb0daafb608ecac84a4fc","ktrzcinx","2020-10-06 10:25:43","false","ipc: Remove cc_version from mailbox

This information is already provided by extended manifest,
so there is no need to double it in runtime code.
It allows to save 92 bytes from .DATA and 128 bytes from .TEXT
for cnl platform.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",67,28,0
"thesofproject/sof","173206494d5b19b198b5c6f1bc482a6b90d6d99e","ktrzcinx","2020-07-10 13:17:38","false","dai: host: dma: Check returned value in dma_buffer_copy_* clients

After error in lower layers, this issue should be traced in
proper context.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",73,25,0
"thesofproject/sof","d25572ac28e31326ef78bf0b1f1442848741162f","lgirdwood","2018-07-18 11:04:10","true","Merge pull request #123 from zhigang-wu/topic/state-machine-change1

[RFC]host:remove the useless state set.",13,2,0
"thesofproject/sof","796663bdca855260ddb3524881ac84bf7713bebb","lgirdwood","2018-09-04 10:54:18","true","Merge pull request #64 from mengdonglin/topic/hda-v3

v3 topology: Add suppport for HDA links",30,3,0
"thesofproject/sof","b6b10af036162336fe46d81fb0d8836645305c95","serhiy-katsyuba-intel","2022-09-21 11:05:54","false","ipc4: block mixin pipeline if no active sink

In case mixin pipeline is running but mixout pipeline
is not -- do not discard source data but block source
pipeline until at least one sink (mixout) started.

A typical topology is to have mixin and mixout in separate
pipelines. Often, mixout pipeline is started a few milliseconds
later after mixin pipeline. In such case mixin pipeline should
be blocked until mixout pipeline started to do not loose any
audio periods.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",96,52,1
"thesofproject/sof","bcc263be6603fb4c20271228fd1b9f494b6df7ed","btian1","2023-08-24 14:18:04","false","audio: volume: add volume_uuid header file

this header file used to move out volume uuid.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",26,63,1
"thesofproject/sof","ff717aec463e2c61e442af1c4efdd19b718e2d71","btian1","2023-06-08 07:04:18","false","mixin_mixout: remove all related code for remap function

remove remap code since there is no requirement for this.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",46,60,1
"thesofproject/sof","cc8ec1a00b23fc75770ecd95c4e37aabf59736e3","btian1","2023-02-15 05:35:06","false","host-zephyr: Expose common functions for host DMA prepare/reset

Create and expose a couple of functions for host DMA prepare and
reset along with struct host_data,these functions will be shared by both
host and copier component.
This is in preparation to remove the creation of host component and
endpoint buffer in create_host().

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",56,56,1
"thesofproject/sof","22563ad029dd70e7a4ee486cc6bb9730cc10c779","tmleman","2022-02-23 16:09:28","false","ipc4: setdx: clean handler

Using copies of module_id and instance_id, otherwise they are unnecessary.
Removing unnecessary log, it has no useful information. Any value different
that 0 will be printed in error.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>
Signed-off-by: Rafal Redzimski <rafal.f.redzimski@intel.com>",107,45,1
"thesofproject/sof","9a83f05d97ddfff8cad9de1062c20dd3b6a234c9","andrula-song","2023-03-01 02:47:02","false","Audio: Fix the pointer update errors while volume ramp enabled

while enable volume ramp, we may need to run the while loop in
volume_process function several times, but we only update the
read/write pointers of in/output streams in module_adapter copy
function after the whole volume_process function finished. Then
we would always get and store data from wrong address and lead to
discontinuity waveform.

Signed-off-by: Andrula Song <andrula.song@intel.com>",58,57,1
"thesofproject/sof","26528f6313d95d33aa67dcc4eef89292523b6372","xiulipan","2019-01-04 04:54:57","false","scripts: default to have local rimage install

rimage will default to be build and install to local folder to avoid
ABI changes issues.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",50,7,0
"thesofproject/sof","2e29db45230c52291a8399dc549eb8e7d3b46de1","xiulipan","2020-12-04 04:05:58","false","config: merge icl and jsl toml file

ICL and JSL is same DSP with differnt HW config.
They can share same toml file

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",71,30,0
"thesofproject/sof","399bc38d8cf4f174067e6bccd7f7148e8369e0aa","andrula-song","2023-11-08 02:00:04","false","Audio: Module adapter: Add trigger ops

Add trigger ops in module_interface.

Signed-off-by: Andrula Song <andrula.song@intel.com>",2,65,1
"thesofproject/sof","f706843697887c94608b8e3fecf66cddfcf3a5ed","rosschisholm-xperi","2021-05-06 08:22:32","false","topology: adding IIR component on max98373-rt5682 topology

Builds a configuration of the max98373-rt5682 topology with AMP_SSP=2
defined and includes the IIR component

Signed-off-by: Ross Chisholm <ross.chisholm@xperi.com>",81,35,0
"thesofproject/sof","1289b33e9c44042a976638ffac586f633617b701","johnylin76","2021-05-24 06:37:10","false","drc: Make DRC_MAX_PRE_DELAY_FRAMES as kconfig

DRC_MAX_PRE_DELAY_FRAMES determines the length of pre-delay frame
buffers which are allocated runtime on DRC setup.

Use rballoc instead of rzalloc to allocate frame buffers.

The default value 512 is suggested by inference to avoid memory waste
and provide reasonable length for pre-delay frames.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",84,36,0
"thesofproject/sof","b12ce507124d5907750c7dea35838232bca27294","singalsu","2021-04-26 14:47:34","false","Topology: Add build of topology to run ASRC in cml-rt1011-rt5682

This patch adds development topology to run ASRC playback and
capture via SSP port to headset plug. We don't have many topologies
to test ASRC in current development devices so this is useful

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",84,35,0
"thesofproject/sof","84df70aabf781bde9e2fbf015fe0909da6196fbc","singalsu","2022-09-02 09:43:12","false","Math: Add DCT transform library

This patch adds library for discrete cosine transform (DCT)
computation. The DCT initialize functions returns a matrix
and the actual DCT transform is matrix multiply operation.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",118,51,1
"thesofproject/sof","db8ee55b528a71ae0f6825803d967ea13e2a3769","singalsu","2021-08-10 15:22:56","false","Drivers: Intel: DMIC: Add blob support for Sue Creek and add checks

This patch adds the missing NHLT blob support for Sue Creek type
of DMIC HW (v2). Previously the HW v1 type decoding of the blob
would have returned wrong DAI parameters and streaming fail.

Checks are added to verify correct usage of bitfields in OUTCONTROL,
CIC_CONTROL, and FIR_CONTROL. These registers are different in HW v1
and v2.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",117,38,0
"thesofproject/sof","6b8b1cee16bca65ca2a786998ba3bd0f5c231b20","plbossart","2022-01-13 00:17:06","false","topology: add all possible permutations for ES8336-based platforms

So far we support apl, glk, cml, jsl, tgl.

SSP0 or SSP2 can be used.

DMICS may or may not be present, the simplifying assumption is that we
have 0, 2 or 4channels.

the existing topology names are kept but will not be used with kernel
updates, the -ssp<N> and -dmic<N> ch suffixes will be added based on
NHLT information to avoid a need to override topology files.

A better solution would be a DAI index that can be overridden in a
topology file, but we have no interface to do so at the moment, so
brute-force combinatorial handling of all possible solutions it is.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",117,43,1
"thesofproject/sof","5f52ab91996891b7aaf013a3113ea99d093b237e","dbaluta","2022-03-23 10:42:35","false","include: ipc: Add compress_params interface file

This file is copied 'as is' from the Linux kernel repo
and will be used to have a common interface for passing
compressed stream params.

Notice that Doxygen doesn't recognize markup style for structure
commenting so we had to escape @ symbols.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",108,46,1
"thesofproject/sof","98862784fbddeb5eaffe73fd987a4432056fc316","dbaluta","2022-03-23 11:30:20","false","codec_adapter: cadence: Introduce cadence_codec_post_init

This new function encapsulates all Cadence API calls at init time. We
introduce this new function because the init API calls need to be
done after we figure out cadence codec api id.

Right now cadence codec api id is hardcoded to DEFAULT_CODEC_ID but
later it will be needed to be determined dyncamically at runtime.

It will be sent from host via sof_ipc_stream_params.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",108,46,1
"thesofproject/sof","89f7aa0abd0a4f438102295faf9983a2d6c65133","lyakh","2023-01-27 15:34:40","false","platform: remove support for Baytrail and Cherrytrail

Remove all support for Baytrail and Cherrytrail platforms, they
aren't supported on the ""main"" branch any more. To build SOF for them
use the ""table-v2.2"" branch.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",52,56,1
"thesofproject/sof","a036799103eebab87994a40ad8f2a3a87862be4f","Vamshigopal","2022-11-16 07:06:21","false","topology: Change Speaker period size to 10 ms for RPL and ADL-N Chrome designs

with 10ms period size we have seen power improvements.
We are working to move all topologies of Chrome to 10 ms.
Starting with current RPL and ADL-N topologies.

With many topologies already using GOOGLE_RTC_PROCESSING
flag to set 10ms, making a simpler flag to be used across
to set required SPEAKER PERIOD. This helps to scale later
to all designs.

Signed-off-by: Sathya Prakash M R <sathya.prakash.m.r@intel.com>
Signed-off-by: Vamshi Krishna Gopal <vamshi.krishna.gopal@intel.com>",95,53,1
"thesofproject/sof","3e3d0cdeab7aded526fea237290f38e471dfd30d","lyakh","2023-06-15 13:40:43","false","buffer: prevent cache corruption

Recent research discovered a set of potential issues related with
cache prefetch. Specifically it seems like uncached access to memory
can cause cache prefetch. This can cause problems in buffer_attach()
and buffer_detach() where buffers are added to or removed from lists
respectively via uncached addresses, after which they can be used via
cached addresses. Add proper cache synchronisation and interrupt
locking to protect against such memory corruption.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",44,60,1
"thesofproject/sof","6b9c3caac81ca1dcb1d4dd399804ff171fd0696d","lyakh","2023-01-25 13:43:03","false","zephyr: remove unused module initialisation

All SOF modules are now initialised using native Zephyr APIs, no need
any more in a dedicated ELF section. TODO: remove from linker scripts
once this is merged.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","c9f2ac7c264836d735cc3e66659a83e036aabd77","lyakh","2022-03-11 11:55:47","false","cache: idc: always use platform_shared_get() with shared data

Access to objects, defined with a SHARED_DATA attribute should only
be performed, using the platform_shared_get() function.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",113,45,1
"thesofproject/sof","2cc0d1f9c614d8b18f1557b5cf957fd5cd801cbc","singalsu","2018-06-29 14:05:40","false","SOFT: Improve audio test synchronization code

The audio tests signals contain a start and end marker to extract the
test output to analyze from in-between the markers.

This patch fixes a fail in SRC tests that was caused by incorrect
synchronization to output data. The chirp upper frequency is limited
to 0.99 x Nyquist frequency since the Nyquist frequency in the end
aliased and caused a visible artefact to spectral plot and it triggered
a resampler filter impulse response that had some correlation with
start/end marker chirps. The cosine chirp initialization to start from
90 degrees (zero PCM code instead of max.) also cleaned the start impulse
and improved the look of spectrogram plot.

The syncronization was limited to seek from one measured channel only. The
sync finder also didn't handle properly multi-channel input.

The output file start marker scan length was reduced to be
idle+marker length. And the scan time for end was reduced to be
2xidle+marker length

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",9,1,0
"thesofproject/sof","f4e4ca752a749545cf278d3c8463adfe875d44c8","nashif","2021-02-10 14:58:48","false","Revert ""zephyr: fixed cached rimage path""

This reverts commit f4c9c28bc55242c4dcf71a6aa987e764671d6ea3.

This is no longer needed as we removed local copy of rimage from
zephyr/ext.

Signed-off-by: Anas Nashif <anas.nashif@intel.com>",71,32,0
"thesofproject/sof","998f8248260568ada32b3d5997979e35d30e0870","nashif","2023-08-07 16:42:49","false","platform: kconfig: remove undefined CAVS_LPRO_ONLY

This kconfig was removed in 2d02dd0ed5c775ab4a0551b25e8a91d8fc8a310c, do
not depend on it.

Signed-off-by: Anas Nashif <anas.nashif@intel.com>",29,62,1
"thesofproject/sof","543af70462cef6a1c89d9f678b263273f5623152","singalsu","2020-11-05 16:48:26","false","Drivers: Intel: Updates to DMIC for runtime instantiate and remove DAI

This patch separates from function configure_registers() the write
of FIFO A, FIFO B, and common functions initialization. The change
allows the DMIC DAI type to be instantiated when the streaming starts
and removed after streaming ends. The driver for was designed to
configure the HW in firmware initialization. It didn't support DAI
initialization at streaming start and remove at end. The start of second
DAI stopped the first. Also the decimation factors selection made
choices those prevented the second DAI to find suitable integer
decimation factors.

The key change is that common functions like CIC are programmed for
first instantiating. The FIR A and the FIFO are set up for FIFO A
connected DAI and FIR B related for FIFO B connected DAI.

The dmic_remove() is changed to pass the common resources stop and
free if there's still a running FIFO left.

The traced registers configuration are changed to 32 bit hex for easier
manual decode of bit fields when debugging.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",75,29,0
"thesofproject/sof","e0a9afe6a759e7d1f141435a05f7a12bd78bc7a6","singalsu","2019-11-19 11:34:05","false","Topology: Apply high-pass for HDA capture streams

This patch replaces in topology sof-hda-generic.m4 the use of macro
pipe-volume-capture.m4 usage with a new macro pipe-highpass-capture.m4.
The used 40 Hz cut-off is sufficient to suppress the DC pulse in the
beginning of capture from headset with minimal impact to other
applications such as recording music.

The capture volume ramp length is changed from 250 ms to 400 ms. The
longer ramp is feasible because the microphone path seems to open
at 500 ms from capture. It helps to attenuate the remaining noises
in the beginning of capture.

The patch also adds additional high-pass responses macros for
topology with different 20-50 Hz cut-off frequencies into
SOF/tools/topology/m4.

The changes for Matlab/Octave script example_iir_eq.m that
generated the filter coefficients are included here as well.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",58,18,0
"thesofproject/sof","ac9bbedecb24cbc975d0e8d84cf0759837b6f034","lgirdwood","2018-10-15 20:20:50","true","Merge pull request #491 from tlauda/topic/idc-comp-cmd-fix

ipc: fix condition for slave core comp cmd",34,4,0
"thesofproject/sof","d32db50b6104968e61adb2eb206f0b31e1682c18","pblaszko","2023-03-06 13:05:57","false","mtl: add Aria module to extended manifest

Add ARIA module to MTL extended manifest.

Signed-off-by: Przemyslaw Blaszkowski <przemyslaw.blaszkowski@intel.com>",55,57,1
"thesofproject/sof","f846f7ef2cd1775ae3e77a1eb9628ddf906fccef","tlauda","2019-04-25 23:54:12","false","mailbox: fix dst size of mailbox write functions

Fixes destination size used by mailbox write functions.
Subtraction of the base address shouldn't be part
of this size calculation.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",48,11,0
"thesofproject/sof","9815f99d04f9ff112bf110d6f0bc5761a3689541","tlauda","2018-09-21 10:11:05","false","timer: different handling of TIMER3 for cAVS

Different handling of TIMER3 for cAVS platforms.
Now we are operating on irq masks on core level,
not on the timer level. It gives us opportunity
to implement multicore work queue.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",35,4,0
"thesofproject/sof","df6017f950edddc57df8ecc0d3d36a0c8ea6d671","tlauda","2019-10-17 12:23:01","false","buffer: add and init id, pipeline_id and caps fields

Adds and initializes id, pipeline_id and caps fields in buffer struct.
This is the only data needed after buffer creation. It allows us to
remove the whole sof_ipc_buffer struct from the buffers.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",63,16,0
"thesofproject/sof","7d5842f300918962cfa62827e7f23a99dbf5ba2e","tlauda","2019-09-09 13:40:19","false","ll_schedule: use ll_schedule_domain in ll_schedule

Refactors ll scheduler in order to incorporate the usage
of ll scheduling domain. Functionally it stays the same.
Now we use data shared in ll_schedule_domain instead
of allocating shared ll context.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",58,15,0
"thesofproject/sof","7161c668982ea66333d15a2692f8f7bb5e4e54b1","tlauda","2020-05-26 06:42:51","false","arch: xtensa: remove unused macro

Removes macro that is no longer used.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",97,24,0
"thesofproject/sof","4b86f2429b73b2db420e9aec00c139688b14241a","kv2019i","2021-08-11 15:12:38","false","xtensa-build-zephyr: add support to build with xtensa XCC

Add support to build with XCC compiler by setting XTENSA_TOOLS_ROOT
env variable. The interface follows xtensa-build-all.sh, so existing
CI scripts for SOF builds can easily update to build with XCC.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",117,38,0
"thesofproject/sof","835d876b905e61977144eb0adff2a4130b047068","bkokoszx","2019-11-06 12:39:44","false","component: add min_sink/source_bytes to comp_dev struct

Add two parameters to comp_dev struct in order to allow
configuration of the component processing variable frames.
Added parameters are:
- min_sink_bytes - min free sink buffer size measure in bytes
  required to run component's processing;
- min_source_bytes - amount of data measured in bytes
  available at source buffer required to component's
  processing.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",52,17,0
"thesofproject/sof","cc37017565182513efc931361bed49c4a6118881","cujomalainey","2021-09-20 23:59:30","false","ipc4: add return value to case

without this we return an uninitialized value

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",118,40,0
"thesofproject/sof","fdcf636530f572b62b0208f75ec6f97c81986914","cujomalainey","2021-06-16 20:59:31","false","readme: remove IRC link

freenode management has banned IRCcloud.

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",71,37,0
"thesofproject/sof","9cf8e0c777e6b4f4073bff5591bde51640eeb148","cujomalainey","2022-04-01 22:34:39","false","m4: add RO bytecontrol

Sometimes we want to load a binary block of data without letting
userspace interact with the underlying control. An RO control will do
this exactly by loading the data and providing no write access.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",110,46,1
"thesofproject/sof","b72d3c2446b945db10458055356168c253974fbc","cujomalainey","2021-09-21 23:19:22","false","dmic: change condition to satisfy cppcheck

cppcheck for some reason doesn't understand that j > 1 has nothing to do
with the indexing itself and this the check is pointless, so switch to
!= so it doesn't flag the issue anymore.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",117,40,0
"thesofproject/sof","f5b28cc151d9c157f6721af57bc9d9fc4916d035","iuliana-prodan","2021-01-19 12:16:07","false","topology: imx8: add mixer component with cs42888 codec

This topology works on i.MX8QM and i.MX8QXP with cs42888 codec.
When loaded, one will have a sound card with two playback subdevices.
This way, samples pushed to the two subdevices will be mixed and
sent to ESAI0 and then to cs42888 codec.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",69,32,0
"thesofproject/sof","34bb9b7282683be9fb22c356ef7518c259969e61","iuliana-prodan","2021-05-19 14:19:52","false","zephyr: wrapper: build SOF with Zephyr for imx

When building SOF with Zephyr for i.MX the following
additional adjustments, to the wrapper, are required:
1. include heapmem variable in .heap_mem section,
otherwise the HEAP_SIZE is duplicated in two sections and
the sdram0 region overflows;
2. no need to split heap into shared and unshared since
we only have 1 DSP core; In this case, the kernel will
never be built in a mode where all shared data is placed
in multiprocessor-coherent (generally ""uncached"") memory.
3. use simple interrupt_get_irq() to get the Linux interrupt
and later pass it to irq_steer;
4. use Xtensa timer, as we do now with SOF and XTOS.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",86,35,0
"thesofproject/sof","828b167c34bfd4479e049578f046fe72e3277be2","keyonjie","2021-11-08 09:50:57","false","ll_schedule: only check tasks asked for rescheduling

In schedule_ll_client_reschedule(), we only need to check those tasks
who ask for rescheduling, for others (e.g. _COMPLETED ones), we should
not take them into account for next_tick calculation.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",127,41,1
"thesofproject/sof","6b590cc42dc1d57fe7985149c8c49721e8eb79d8","keyonjie","2021-01-20 02:39:59","false","pipeline: add helper to retrieve the pipeline id

Add inline helper pipeline_id() to retrieve the pipeline_id from a
pipeline pointer.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",69,32,0
"thesofproject/sof","09b416bb5a97d3f83be8e5122df258d2a187a006","keyonjie","2019-07-10 08:50:26","false","topology: sof-cml-rt5682-max98357a: switch to use kwd pipelines

Switch to use sof-cml-rt5682-kwd.m4 which can support Keyword Detect
feature.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",42,13,0
"thesofproject/sof","4beb748c23eea83ea0318e0fb02f106363410d2b","ranj063","2021-07-21 04:41:29","false","mixer: use separate flags for source/sink buffer locking

Fix xruns caused because of using the same flags for locking
both the sink and source buffer.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",91,38,0
"thesofproject/sof","ee1e677afcd80c25ae6fe1b60acb451208d205f8","ujfalusi","2023-07-26 09:42:56","false","lib-manager: Remove struct lib_manager_dma_buf

Only the addr of the struct is used, no need to keep it around to
complicate things.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",34,62,1
"thesofproject/sof","38a49fe36dbd0d14c031553db3236f16668a3806","jajanusz","2019-04-25 12:52:31","false","library: move to platform

Library folder is just set of some mock platform definitions, so it
should be handled as another (abstract) platform.
It's better to have all platform definitions in platform folder
instead of adding some artifical platform to the src root.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",47,11,0
"thesofproject/sof","ccc929649843b4d5238cf5f71c04654e0d74c60d","jajanusz","2018-09-24 13:39:37","false","test: fix: add log memory section

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",36,4,0
"thesofproject/sof","6cba64d2cbe32333deae7da2bc48698f52e7bc9e","marc-hb","2022-10-18 00:19:36","false","xtensa-build-zephyr.py: fix a few minor pylint warnings

Declare globals at the top level.
Stop shadowing globals.
Replace `== or ==` with `in [ ]`.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",101,53,1
"thesofproject/sof","62c5684ed6ac66ad829398a3a9ac32ca81224b91","lrgirdwo","2018-10-29 16:24:52","false","allocator: Improve rfree() debug and trace

System heap is one time allocate only meant for init and not for freeing.
Panic if someone attempts to free system heap.

Provide pointers and cpu core ID for any failures in trace .

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",28,5,0
"thesofproject/sof","649d75d410d81e054cc2ea20c9d92e5a619e02c4","lrgirdwo","2018-12-07 12:30:55","false","irq: check return value of interrupt_register()

interrupt_register(0 allocates memory so we need to check return value
and complain if it fails.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",45,6,0
"thesofproject/sof","95d9fc90420781fcc22eb5e00c7eb4c669495cb7","tlauda","2019-06-05 10:51:25","false","trace: fix indentation

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",62,12,0
"thesofproject/sof","19efb461097703f05b3cf9d5fd4b1851ffd87aa8","tlauda","2019-06-27 13:28:34","false","dw-dma: change release handling for non HW_LLI

Changes DW-DMA release handling for configurations
not using hardware linked list support. We should
not make any additional copies in such case.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",47,13,0
"thesofproject/sof","5f539d94485f4ac97ef39cf77787e95c013b5fea","tlauda","2019-10-15 11:02:48","false","dai: fix rare case of xrun on release

Adds new start_position field based on which we assess whether
we should throw an xrun. It fixes rare cases of xruns on release
with timer scheduled pipelines.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,16,0
"thesofproject/sof","a73c01f0f8181a9657019134e8bb8e695f988da5","tlauda","2019-11-20 13:27:08","false","src: use buffer_copy function

Uses buffer_copy function for bypass mode to avoid code duplication.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,18,0
"thesofproject/sof","978abac46e9c5553906e1543f1225d1a3519f2ae","tlauda","2020-03-24 10:41:04","false","idc: wait for message receival using registers

Changes method of waiting for blocking IDC messages to
use appropriate IDC registers. This way we no longer
need additional boolean status variables and also
we don't need to enable IDC DONE interrupts.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,22,0
"thesofproject/sof","ff8eb10b1877bb0fac8adf0124c36762a5f912fd","lgirdwood","2018-07-06 10:54:20","true","Merge pull request #19 from xiulipan/tplgfix

topology fix for UP2",11,1,0
"thesofproject/sof","2bfe9c48c471d3b6951ea77c5981f1d23b4cd7b7","mrajwa","2019-07-25 14:18:37","false","detector: update ABI to support 24 and 32 bit samples

This patch updates header file to support 24/32 bit samples
and also adds new default config.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,14,0
"thesofproject/sof","ef4fc532c59d3bad59e64ef2e1b89459511039a9","lgirdwood","2018-08-02 03:44:48","true","Merge pull request #170 from xiulipan/hostfix

host: remove reset in stop to keep status",15,2,0
"thesofproject/sof","c65d73397cc04da4600e02b7d91ac0423dc55ece","lgirdwood","2018-07-24 08:52:46","true","Merge pull request #143 from tlauda/topic/dai_capture_xrun

dai: ignore data on capture stop",13,2,0
"thesofproject/sof","937032fb5f209a0afa87c989777c4582c9458ef1","lgirdwood","2018-11-01 10:07:21","true","Merge pull request #119 from ranj063/glk_dmic

topology: glk: fix channel count for dmic stereo recording",29,5,0
"thesofproject/sof","d5081da8fe13f8274e4abecde672e6e049a172dd","lyakh","2019-03-06 12:19:50","false","interrupt: reduce the use of the container_of() macro

Instead of passing a pointer to the interrupt descriptor, embedded in
a cascading interrupt object and then using container_of() to get
back to the cascading interrupt, pass a pointer to it directly to
functions.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",66,9,0
"thesofproject/sof","7abb55fe722c9a180aa36ad8ed9c8ca906fcc829","lgirdwood","2018-09-07 13:45:05","true","Merge pull request #324 from tlauda/topic/trace_smp

trace: implement multicore traces",31,3,0
"thesofproject/sof","6e187c7112c13b6529ae6e8b7ffe0444d57827c4","lgirdwood","2018-11-13 20:18:32","true","Merge pull request #569 from thesofproject/topic/dma-validate

DMA channel validation",37,5,0
"thesofproject/sof","3ce2d070f3e4f463735873984a4899fc8b9891f0","lgirdwood","2018-11-21 16:28:02","true","Merge pull request #604 from thesofproject/lrg/topic/github

github: Add initial github owners/reviewers file.",39,6,0
"thesofproject/sof","26a6541b1bdb5cc09ebed3ebd14972e60343d878","mrajwa","2019-01-23 20:43:54","false","GDB: Initialized from IPC handler + generalized debug addresses.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",55,8,0
"thesofproject/sof","8357dcf793f4d9937aff78773d5b84d1543ce8da","iuliana-prodan","2021-05-20 15:43:29","false","zephyr: trace: use zephyr utilities when enabled

Use the Zephyr sys/printk.h when Zephyr RTOS is used.

Suggested-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>
Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",85,35,0
"thesofproject/sof","7550fb7e35d77554fa1577250e394bcdbc674a8e","iuliana-prodan","2023-04-06 13:38:53","false","topology: imx: Combine topology files for i.MX8MP with different options

Combine topology files for i.MX8MP with different codecs and rate, by
using CODEC and RATE variables.
Based on CODEC use the proper DAI_CONFIG.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",51,58,1
"thesofproject/sof","65f345a52e06a084192124364c563d8133d834c2","gongjun-song","2022-10-17 11:01:40","false","rimage: add src support

Add src's params to rimage

Signed-off-by: Gongjun Song <gongjun.song@intel.com>",101,52,1
"thesofproject/sof","cbd5b297a9a8541079326d162e5e4df95e620087","mrajwa","2019-02-05 13:31:50","false","GDB: Added support for insert breakpoint.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",58,8,0
"thesofproject/sof","81887c9f3add154a11df554bc67d6b09e6050cca","mrajwa","2019-04-20 16:42:41","false","edf_scheduler: add idle task scheduler

Idle tasks are invoked only on passive level
and after all prioritized task are done.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",47,11,0
"thesofproject/sof","a7d16d0bee0048dd7505c3e2f9eeebe9e35c5bc0","mrajwa","2019-10-30 14:20:09","false","kpb: rework of validate_host_params() function

This patch slightly reworks validate_host_params()
function to check how big is host buffer. If it is
big enough to store all data from history buffer we
can skip further validation.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",59,17,0
"thesofproject/sof","4e726e62bccf5add5df22119352d1b9f5b8d71d7","lgirdwood","2018-08-14 19:02:20","true","Merge pull request #226 from tlauda/topic/system_mem_master_core

alloc: system memory reserved for master core",17,2,0
"thesofproject/sof","720cdcda675f778dc232aa5def986a4b477aaa71","keyonjie","2019-07-16 03:21:22","false","sof-ctl: fix ABI dumping doesn't work issue

For dumping to output file without '-r', we need to dump ABI header,
here fix it.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",45,13,0
"thesofproject/sof","236a055041ea998ef75e1f0401b35da1778b397d","keyonjie","2020-06-01 03:59:25","false","topology: dai: add uuid token support

Add the uuid token to dai widget for the future use.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",97,24,0
"thesofproject/sof","639154e35b7a5ba2576d72d792aaea6349cfe2d9","keyonjie","2020-07-17 12:04:44","false","testbench: topology: initial the sof_ipc_comp_file with 0s

Initial the struct sof_ipc_comp_file to make sure all no updated flags
are 0s.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",80,26,0
"thesofproject/sof","4681db38daae07464034488dd0ea8f8493cd1c6d","keyonjie","2021-09-10 11:10:15","false","alloc: add support of coherent buffer allocation

Ask for coherent/uncached pointer while allocating buffer from the
buffer zone with flag SOF_MEM_FLAG_COHERENT specified.

When freeing buffer blocks, try both cached and uncached address if
needed, to make sure the freeing will succeed.

Zeroing buffer for new allocated one, to make sure it can replace the
use scenario of rzalloc().

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",117,39,0
"thesofproject/sof","0ced257b3699165b72545301517680b8143a0f40","keyonjie","2021-10-25 02:29:03","false","topology1: sof-tgl-nocodec: change to support multi-core

Add multi-core coverage for tgl-nocodec platforms, the initial DSP core
assignment as below:

DMIC48k: Core 1
SSP0: Core 2
SSP1: Core 3
DMIC16k, SSP2: Core0

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",125,41,1
"thesofproject/sof","8064f7c929d0297270580fa02e7a0f562db7f65f","keyonjie","2018-10-18 10:25:12","false","platform: fix dma_get() of ipc fail issue for byt/hsw/cavs

We need to call ipc_init() after dmac_init(), otherwise will faild
at getting dmac for ipc page table tranferring and error happends
as below:

CORE LEVEL COMP_ID TIMESTAMP DELTA FILE_NAME CONTENT
0 1 DMA 85943.645833 85943.648438 dma.c:59 No DMAs installed

Here correct and fix it.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",33,5,0
"thesofproject/sof","627e29f2878b9b20a99171ed7a95f5d3c24120f9","aborisovich","2022-07-22 10:27:48","false","scripts: xtensa-build-zephyr.py west reinitialization

Added new flag for non-interactive mode that should be used
when script is invoked programmatically.
In default (interactive) mode user is asked using a prompt whether to
reinitialize west manifest if it is initialized to manifest other
than SOFs.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",112,50,1
"thesofproject/sof","b2ac05f04dbb7fec744ea3b48b10719ec35d1f40","aiChaoSONG","2023-03-14 02:01:32","false","smart_amp_test: fix wrong config size in config get

The config to get for smart_amp_test module is
struct sof_smart_amp_config, instead of the bigger
wrapper struct smart_amp_data, so the config size
should be the size of struct sof_smart_amp_config.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",55,57,1
"thesofproject/sof","a68b1af80d1ab35cccdcb581a4722e1578b0c122","ranj063","2021-03-19 05:48:49","false","topology2: Add pga class

Add the class definition for PGA widget. It can be
instantiated as follows:
        Object.Widget.pga.""N"" {
                format	     s24le
                index        0
		period_sink_count 2
		period_source_count 2
        }

Where N is the unique instance number for pga widget in the same
alsaconf node.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",72,33,0
"thesofproject/sof","c46186be23102348f6d547fca0718e8d9ccbe865","tinghan-shen","2022-01-11 06:37:17","false","platform: mtk: Add support for mt8186 platform

mt8186 platform integrates a single-core HIFI5 DSP.

The DSP operates at different highest clock frequencies with corresponding
voltage, 800MHz(0.8v)/400MHz(0.7v)/300MHz(0.65v)/26MHz(0.6v).

The DSP core and DMA in DSP subsys both can access DRAM directly.

Signed-off-by: Tinghan Shen <tinghan.shen@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",115,43,1
"thesofproject/sof","f8bbef335749390fd661145853c5e13099c44a9e","ranj063","2022-06-29 21:07:13","false","pipeline-schedule: clear aborted flag for non-host connected pipelines

Consider the mixer-based pipeline in the nocodec topologies:
  PCM0 (pipeline 11) ---> Volume -----|
				      V
                                    Mixer (Pipeline 1)----> SSP0
				     ^
  PCM3 (pipeline 7) ---> Volume -----|

When PCM0 is started it triggers pipelines 7 and 1. When PCM3 is
started followed by PCM0, it will trigger pipelines 11 and 1. But since
pipeline 1 is already is started, it's aborted flag will be set.
But the aborted flag is never cleared for pipeline 1 because it is
not the host pipeline.

Fix this, by clearing the aborted flag for non-host pipelines in
pipeline_task_cmd()

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",110,49,1
"thesofproject/sof","61b0b58865b30d97e329439eb377b4462381545a","groncarolonxp","2019-10-16 14:57:08","false","drivers: imx: edma: avoid accessing register for non ready channels

avoid accessing registers for EDMA channels that are not
started to prevent crash

Signed-off-by: Guido Roncarolo <guido.roncarolo@nxp.com>
Signed-off-by: Jerome Laclavere <jerome.laclavere@nxp.com>",65,16,0
"thesofproject/sof","4bf4860af90eb499f52d39d40b82787e3c3952de","ranj063","2018-06-27 02:59:40","false","host: remove unused variable

fixes compilation error

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",5,1,0
"thesofproject/sof","6f4084b4d9e2f37bdd36b2880b7a65d74a52916d","abonislawski","2023-03-07 14:02:11","false","probe: add support for zephyr native drivers

This patch ports probe component to use zephyr native drivers.

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>
Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",56,57,1
"thesofproject/sof","d9ce1cb48f92278ce92873a17fdc277adefd4d4c","yongzhi1","2020-09-29 16:56:59","false","tools: sof-ri-info: define memory layout for JSL platform

Add jsl entry to DSP_MEM_SPACE_EXT[].

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",67,28,0
"thesofproject/sof","c30f2fc22b9d97489498e5bfc44d2da90e46ed3b","mrajwa","2019-01-21 19:36:22","false","GDB: Adjusted to new build system.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",56,8,0
"thesofproject/sof","75533a65b5cf39fbe9f28e6080696b30e99ba2b6","zhuyingjiang","2018-11-05 08:31:43","false","rimage: manifest: add 1.5 manifest define

add 1.5 manifest structure define, macro define, KBL and
SKL 1.5 manifest defines

Signed-off-by: Zhu Yingjiang <yingjiang.zhu@linux.intel.com>",38,5,0
"thesofproject/sof","6c83df81866dc955da7b79caa1b5671d6e0346f9","xiulipan","2020-02-19 06:13:30","false","topology: fix ID typo in kfbm pipeline

The PCM ID should use PCM_ID instead for PIPELINE_ID

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",85,20,0
"thesofproject/sof","fe6e88c8717b4a0c5510e02589eab69f1a48e346","xiulipan","2020-08-12 06:33:53","false","topology: intel: make dmic dai name configurable

Add default dai name for dmic dai, we can override them in
if dai name in machine driver is different.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",73,26,0
"thesofproject/sof","ea9aebfa7a44139c59f39a9d6a4424b587b1c68d","IulianOlaru249","2020-02-13 11:10:49","false","math: Replace the gcd algorithm

This patch replaces the former gcd algorithm which was implemented with
repetitive divisions with Stein's algorithm, whitch is a faster gcd
algorithm. All operations are arithmetic shifts, comparisons and
subtractions.

Signed-off-by: Iulian Olaru <iulianolaru249@yahoo.com>",82,20,0
"thesofproject/sof","3eada7c188a773ef7c5cfd884ea7329437ce3116","bardliao","2023-09-14 09:47:08","false","topology1: add sof-rpl-rt711-l0-rt1316-l12.tplg support

Adding sof-rpl-rt711-l0-rt1316-l12.tplg. The topology is the same
as sof-rpl-rt711-l0-rt1316-l12-rt714-l3, but without local mic (rt714).

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",20,63,1
"thesofproject/sof","cfd694a07b9c1a622e4abcb3597cc46dce07a42a","singalsu","2019-05-10 14:28:50","false","Testbench: Cleanup traces printing

This patch adds newline after trace print to make them more readable.
Previously there were no newlines used in testbench output.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",58,11,0
"thesofproject/sof","0b4a796f72a259778b5a8aeb5f8507cb0ac62368","singalsu","2022-01-26 11:56:02","false","Tools: Test: Audio: Delete only regular files in test begin

This patch adds test for to-be-deleted trace output file or
simulation output PCM data file. Doing delete only for regular
files allows to use e.g. /dev/null to redirect trace to
be not shown when not needed. Or run test in debugger without
need for output file.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",104,44,1
"thesofproject/sof","7ca691dd2445a6843a2c78e08578a4dcd76712ed","marcinszkudlinski","2023-09-07 10:05:06","false","ipc: remove buffer_acquire from ipc helpers

remove buffer_acquire / release from ipc helpers

this is a continuation of changes
from commit 4a036999118cfa7e491cbefc8eb6b737f50b7e33

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",21,63,1
"thesofproject/sof","6d127964e52a201bef89680f0f942046e71dafce","singalsu","2023-06-02 09:49:21","false","Coherent: Do not calculate cache_to_uncache for non-shared

The address translation is needed only for shared in functions
coherent_release() and coherent_release_thread().

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",48,60,1
"thesofproject/sof","72b91631b587155ae90dddcf372a4b8cce6a0fd2","singalsu","2020-05-11 16:38:37","false","Tools: Test: Create TDFB component test topologies

The patch adds the playback and capture test pipelines. The
configuration is set to `tdfb_coef_line2_50mm_pm90deg_16khz.m4'.

A mistake in PIPELINE_FILTERx macro defining is fixed for IIR and
FIR. The pipeline macros expect it to contain an include file or
no macro defined at all. Defining it for empty string caused fail
in topologies build when PIPELINE_FILTER1 is used for TDFB.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",96,23,0
"thesofproject/sof","9e36c5c985beddf522281bd47349517873828f14","tlauda","2020-02-28 08:16:33","false","ipc: add helper methods for notification allocation

Adds helper methods for IPC notifications allocation and free.
This way we can allocate only the size we need without preallocating
the maximum size. Free operation automatically handles synchronization.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",74,21,0
"thesofproject/sof","6524cc89c1c36abcf0e4e2ebcca8c0d5201501b6","tlauda","2019-12-19 13:25:39","false","sof: add getter for sof main context

Adds getter function for acquiring pointer to sof main context.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",72,19,0
"thesofproject/sof","346a522cbf67a5cf3064b47fb94dd4fc4fa4d914","tlauda","2019-05-14 12:15:07","false","topology: fix sof-glk-da7219-kwd topology

This patch fixes two things:
- Configures HDA pipelines to be timer driven.
- Moves definition of pipe-kfbm-capture to avoid overwrite
of deadline and frames for other pipelines.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,11,0
"thesofproject/sof","1019bd6a0b5e9ea958f207323dc43933b9ad4237","balakishorepati","2021-05-26 08:40:56","false","platform: Add build support for amd renoir platform

Add CMakefile and Kconfig for amd renoir platform
to build.

Signed-off-by: Basavaraj Hiregoudar <basavaraj.hiregoudar@amd.com>
Signed-off-by: Anup Kulkarni <anup.kulkarni@amd.com>
Signed-off-by: balapati <balakishore.pati@amd.com>",85,36,0
"thesofproject/sof","82f2a7974e1224c8e9b7b8c0e4865ab63e8931a8","rfredzim","2022-04-22 13:23:22","false","ipc4: update specific ipc4 command fields names

For every IPC4 command the header consists of two dwords.
First of which is primary and the second being extension.
This patch renames the ipc4 header fields for specific ipc4 command
structures to reflect that.

Signed-off-by: Rafal Redzimski <rafal.f.redzimski@intel.com>",114,47,1
"thesofproject/sof","5ffdc575bdebd5b95e12cb8ea71c2ce7c7892ae5","cujomalainey","2021-09-21 00:08:34","false","ipc4: add missing header

irq_local_disable has no definition without it

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",118,40,0
"thesofproject/sof","9d51b5c10f6011d12a61781113c38200f033c80e","cujomalainey","2023-07-13 00:35:33","false","audio: delete switch component

mostly not implemented and hasn't been meaningfully touched in > 3 yr.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",31,61,1
"thesofproject/sof","1cca9bf01d11f7c9d2a46ead774e939c6dc94add","cujomalainey","2021-05-03 23:27:58","false","ext_manifest: cppcheck: refactor to silence false positive

memory clearly has exit path through argument, factor out temporary
variable to silence cppcheck

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",81,35,0
"thesofproject/sof","aa3b18ed7189eedda00a5ba2b16ac62b9f6342fc","cujomalainey","2019-09-19 20:12:11","false","topology: sof-cht-max98090 move DAI definition above media pipeline

The DAI definition needs to come first otherwise the media pipeline with
be parsed incorrectly resulting in a failure to load the topology

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",62,16,0
"thesofproject/sof","27c09a94932527a2539022cbcb9e7d37b93e2dc7","lrgirdwo","2018-12-21 14:33:33","false","rom: sue: remove log PHDR and fix entry point

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",50,7,0
"thesofproject/sof","29a9b9d529fc625b9fef08d1c20f5d7697ee394e","lrgirdwo","2019-09-14 13:42:16","false","fuzzer: add more logging and cleanup printf

provide more detail to the user and print to stdout.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",60,15,0
"thesofproject/sof","48b57cd1b85fdae1dffd1af0376e452b9a373b8d","jsarha","2022-05-11 20:19:10","false","xtos-wrapper: Add Zephyr k_sleep() API to XTOS using wait_delay()

Add k_sleep() and a minimum set of related typedefs and macros needed
to make the API usable. The implementation calls wait_delay(). Commit
adds also safeguard not to let Zephyr build include the file.

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",113,47,1
"thesofproject/sof","1782676acff046409d72df8dddfd047ace7a13d7","lrgirdwo","2019-06-04 12:33:58","false","tools: ctl: dump header information from CSV and DSP data

Dump the ABI header from source CSV or DSP data. This will make it
obvious if there are any ABI differences.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",64,12,0
"thesofproject/sof","42f70ecffebdf2e7c43997a58c7f7bf5c605326f","lrgirdwo","2021-10-25 10:44:50","false","testbench: log any errors freeing components.

let the user know if we fail to free a buffer, component or pipeline.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",124,41,1
"thesofproject/sof","c7edd736d9c634e0583af932681044263ac56d58","lrgirdwo","2018-06-14 15:34:08","false","scripts: xtensa-build-all.sh: Support BXT/APL compiler alias

BXT/APL compiler is the same but can be have either apl or bxt suffix.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",1,0,0
"thesofproject/sof","4843516ab868caf7a904bea9b8d98c83696a1796","lrgirdwo","2022-09-02 16:42:05","false","header: rtos: use rtos specific version of alloc.h

Code can now include <rtos/alloc.h> and uses thinly wrapped Zephyr
native for most uses. Wrapping can be removed over time.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",118,51,1
"thesofproject/sof","620d68f292b4ebded2f0a1a9da4e589e85814643","lrgirdwo","2020-04-20 13:29:03","false","zephyr: readme: add qemu instructions.

Add instructions for running on qemu.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",86,23,0
"thesofproject/sof","dfc6b46e1d52624fa95e9ecb630be9a8843b36b0","marc-hb","2022-09-01 16:40:08","false","scripts/docker-run.sh: fix wrong ""id -n"" command -> ""id -u""

Fixes commit d09844ab98cc (""zephyr/docker-build.sh: match UID with
'adduser' instead of 'chgrp -R'"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",118,51,1
"thesofproject/sof","53202aaf18d9ac54a6fa349ca87688f74e324837","bkokoszx","2020-10-07 12:06:50","false","arch_timer: check for rollover in arch_timer_set

In case when new timeout requires timer rollover
we should set ccompare value to 1 in order to
increment timer->hitime properly in timer_64_handler().

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",67,28,0
"thesofproject/sof","de73e60a8c627debeb93f040d7aa3d1cfc2b04aa","bkokoszx","2020-01-08 20:52:42","false","pipeline: improve parameter propagation within pipeline

Add additional recursive graph walk (in pipeline_comp_hw_params())
from DAI endpoint to other endpoints in order to set hardware DAI
parameters which were set during dai_set_config(). There is new
get_hw_params function in dai_driver ops in order to fetch hardware
dai parameters. Components could overwrite stream parameters due to
their processing capabilities.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",71,19,0
"thesofproject/sof","9524b6900d0b1d80dbc628957d1374ef27a7803c","bkokoszx","2018-07-20 08:49:39","false","test: component: change comp_set_state test cases

Update comp_set_state test cases due to refinement the component's
state machine in commit 5198517.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",13,2,0
"thesofproject/sof","bb7ba30f450260647aa917bc23c008d7c952e3ac","ktrzcinx","2020-06-05 07:55:55","false","trace: Keep only single _DECLARE_LOG_ENTRY definition

This definition is unusefull in LIBRARY build.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",77,24,0
"thesofproject/sof","1c605d3275354270f38feb7df517fbb4a0f142dd","ktrzcinx","2020-07-08 10:25:52","false","pm_runtime: Log context and index value in verbose traces

It's important to know which pm_runtime_context is related with
given call to pm_runtime* function.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",78,25,0
"thesofproject/sof","692cfa93056c3348fe859f00023910f3b4736950","lyakh","2020-08-11 10:51:57","false","scheduler: fix deregistering domain owner

When a DMA scheduling domain owner is deregistered, if there's still
another DMA channel active in the same domain, the ownership has to
be transferred. In this case even briefly disabling and re-enabling
DMA can cause over- or underruns. Avoid this by transferring domain
ownership transparently.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",73,26,0
"thesofproject/sof","72121fb06c0f059cf0977d02596adb9cc0e6b12c","stolx","2021-03-29 14:54:03","false","topology: Add topology for Waves codec

Add pipe for Waves codec playback
Add pipe for Waves codec demux playback
Modify sof-tgl-max98357a-rt5682 topology so Waves codec can be added
to playback and headphones in case 'WAVES' is defined

Signed-off-by: Oleksandr Strelchenko <oleksandr.strelchenko@waves.com>",80,34,0
"thesofproject/sof","9f403d683ec80fc292c871594c3765f534daa440","keyonjie","2019-01-02 09:33:37","false","host: reset dma channel to invalid by default

This will be helpful for error reporting at host dma channel management.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",50,7,0
"thesofproject/sof","dde3db52c3454e0069ed6cce7c254304c3836c01","serhiy-katsyuba-intel","2022-09-07 09:15:23","false","ipc4: fix memory corruption when running unbinded copier

Running a pipeline with unbinded copier leads to memory
corruption. Normally pipeline should not be started with
unbinded components, however, this still can happen due to
a bug in test or driver.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",106,51,1
"thesofproject/sof","39d508b199e877ac68ad7d46d4fb65ad24536a7b","crazoes","2020-04-12 12:03:58","false","scripts: xtensa-build-all.sh: Make PLATFORMS a proper array

`PLATFORMS` variable was used as an array while it is actually a string
used incorrectly making it work accidentally.

Signed-off-by: Shreeya Patel <shreeya.patel23498@gmail.com>",82,22,0
"thesofproject/sof","f8e111eb27923f30404a98505b616c296a15ebda","aborisovich","2022-08-16 00:35:22","false","intel: drivers: dmic refactor - move DMIC_HW_IOCLK to Kconfig

Moved hardcoded cycles values for DMIC IO from dmic.h header
to per-platform configuration file (defconfig files for
non-Zephyr builds and app/boards for Zephyr builds).
Added new entry to intel drivers Kconfig - CONFIG_DMIC_HW_IOCLK.
Modification of this clock value may be used for testing purposes
like building firmware for FPGA or simulator.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",114,50,1
"thesofproject/sof","b4d292d75f4467f4935c79abd3621be09c546e91","lgirdwood","2019-05-28 12:20:34","false","gh: update issue templates

Add section for reproduction rate in bug report template",63,12,0
"thesofproject/sof","cf96e76ce001e33301351050bf44a01696fb1828","akloniex","2020-03-17 20:21:11","false","formatting: Reformat trace messages in src/ipc/ipc.c.

Our guidelines encourage pasting whole quoted string of trace messages
in one line, rather than splitting it across multiple lines, when it
exceeds the regular 80 chars per line limit.

Signed-off-by: Artur Kloniecki <arturx.kloniecki@linux.intel.com>",72,21,0
"thesofproject/sof","9ccb8181d8813e56eb4a1d7cdfbbc3e9ae7feee3","akloniex","2019-05-07 10:00:35","false","pipeline: Limit propagation of params, prepare and reset.

In order to handle complex topologies, we need more precise control
over connected pipelines behaviour and propagation of events.
Better control is accomplished by limiting propagation of events in
case of mismatch between starting and desination pipelines that are
connected, for example when propagating from playback pipeline to branch
which endpoint is Host component, or reversely, when propagating from
capture pipeline to one with Dai endpoint.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",54,11,0
"thesofproject/sof","30719babb4cfba4fa5945c5929d941a3a48844f2","cujomalainey","2021-04-21 00:59:51","false","testbench: print error on failure to prepare

We are capturing the error, we should log it, thank cppcheck for the
find.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",89,35,0
"thesofproject/sof","a29806d9c7da460b6a72e5c8db63d88a03672dec","cujomalainey","2021-06-15 22:44:13","false","topology: remove default google hotword

hotword is not public and therefore should not be on by default

Signed-off-by: Curtis Malainey <curtis@malainey.com>",71,36,0
"thesofproject/sof","35fe98f4d99ad1aaef19f222ebd2e3f20c685fea","cujomalainey","2023-07-18 20:22:56","false","audio: dsm: remove dependency on CAVS

If there is a compat issue it will show up at build time, also it blocks
stubbing out the library, so remove it.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",32,62,1
"thesofproject/sof","87574da19ed7b81e3d7b8e24049622fb8b2c3c9e","ktrzcinx","2020-07-09 17:02:46","false","dma: Remove redundant sink/source bytes parameter from dma_buffer_copy*

This value is strictly correlated with given samples number,
passing sink/source bytes number as separate parameter may
lead to data desynchronization.
Temporary number of samples and sink_bytes is calculated in
dma_buffer_copy_*() function, but it should be removed in
future. 'process' should be modified to take only number of
bytes to process from source stream and return number of
output bytes in sink stream, to allow easily handling of
compressed audio streams.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",77,25,0
"thesofproject/sof","638a11ee9957d3a3081bb87acf4c8a6a4feb3c64","ktrzcinx","2020-01-17 08:54:02","false","DAI: Simplify dai_dma_cb by adding temporary sink_bytes variables

This value was calculated in two calls in dma_buffer_copy_*.
While those functions has long list of arguments, introducing
new variable makes code little more readable and avoid possible
error of making some patch on calculating sink_bytes in only
one place instead of both.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",79,19,0
"thesofproject/sof","ed3919a1b15bb75082f4f184db8c055af3b59582","ktrzcinx","2020-02-18 08:38:00","false","dw_dma: Align argument list

Keep code style consistent.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",86,20,0
"thesofproject/sof","2eebc5d69ff8712b17c8bf0cdbad5238096a1670","RanderWang","2022-02-11 02:22:24","false","volume: Check ramp_func if ramp is initialized

Fix error when ramp is not enabled on windows.
ramp can be disabled on windows

Signed-off-by: Rander Wang <rander.wang@intel.com>",108,44,1
"thesofproject/sof","33f27d3477be9f00719220e0c1a53bc4ef05d931","marc-hb","2022-07-08 19:19:04","false","xtensa-build-zephyr.py: speed up thanks to an _actually_ shallow clone

This will significantly speed up CI in some cases.

Fixes commit ffdf001eeeba (""xtensa-build-zephyr.py: clone zephyr with
--depth 5"")

When I added --depth 5 to git clone in that commit I naively assumed git
fetch would ""inherit"" that. I think it does but only when fetching an
_existing_ (and shallow) branch, not when fetching something new.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",109,49,1
"thesofproject/sof","0929af4f8c0dbfd3090d896b989f2f16f7fb50ff","marc-hb","2023-01-11 22:03:40","false",".github/zephyr: replace ""TODO: cache docker pull"" comment with a link

Caching `docker pull` does not work for size and other reasons, add a
link to the failed experiment.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",54,55,1
"thesofproject/sof","59a5bc74486c14f7eb2f474b2c46779f89ccef21","marc-hb","2023-10-25 00:24:39","false","rebuild-testbench.sh: explain BUILD_TYPE=native in usage()

Explain what happens when running the script without any argument.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",8,65,1
"thesofproject/sof","8e8d1060f54b9ec3f4740197924968a7725b3ac1","marc-hb","2021-12-23 19:56:54","false","logger: move ""log_entry_address x not in dictionary range"" to stderr

Make DMA trace corruption #5120 a bit more visible in the logs.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",121,43,1
"thesofproject/sof","4dad5c2d5c56bd19cd90034ce2110317edfa250e","RanderWang","2023-10-11 07:44:57","false","topolog2: nocodec: set output_pin number

The num_output_pins was set for pass-through path but missed in normal
path. Without it Linux kernel driver wouldn't set second output pin
format for dai copier which connects smart amp and gain module.

Signed-off-by: Rander Wang <rander.wang@intel.com>",13,64,1
"thesofproject/sof","b70e9151cbf9df2ac67ee7b456d29be9887a3eea","sathyap-chrome","2019-03-18 12:10:06","false","topology: Add CML topology support for rt5682+max98357a variant

Add max98357a speaker on top of sof-rt5682 CML Audio topology

Signed-off-by: Sathya Prakash M R <sathya.prakash.m.r@intel.com>",65,9,0
"thesofproject/sof","3bd9991121b24d558dc48b69c7409fc144092a4f","softwarecki","2023-10-10 07:28:25","false","lmdk: Instruct linker to keep .buildinfo section

At the beginning of the .text section there must be a structure containing
information about the version of the api used by the library. It's absence
will cause sof to interpret a random literal as a version and incorrectly
load a library.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",13,64,1
"thesofproject/sof","3cf3c9bb845533e2ae02d150bf2f16536ddff957","softwarecki","2023-04-06 12:10:03","false","rimage: Update rimage revision to ab0429f

Changed rimage submodule revision to:
ab0429fdbe563ef6abe499c69b2483e96c4762d0

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",51,58,1
"thesofproject/sof","46a1db20a870986af35b7b5f2290303f4d3c75e8","tlauda","2020-02-05 14:42:00","false","component: add operations for remote components

Implements remote operations for params, prepare, trigger
and reset calls. If the target component is running on
different core, we should send IDC in order to execute
appropriate operation.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",77,20,0
"thesofproject/sof","88aa5542a41b974f1cd79e2f4d436032496034cd","tlauda","2019-02-19 12:22:23","false","ipc: fix getting source component

Fixes getting source component, when it's the one
connected to the other pipeline.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,8,0
"thesofproject/sof","a5a0255a64c9c37266d62977107cbf07e8785c8b","iganakov","2023-04-12 14:50:27","false","ams: add kpd message

Add ""Key Phrase Detected"" message uuid

Signed-off-by: Ievgen Ganakov <ievgen.ganakov@intel.com>",51,58,1
"thesofproject/sof","fea2b7e49141b7a6325d10ef008fa0cc49491090","ktrzcinx","2019-10-28 13:49:16","false","trace: Reformat trace_dai macro

Trace verbose and trace error macros positions
is swapped to be more consistent with rest of files

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",68,17,0
"thesofproject/sof","d39d8ee417e33ecd33d338bc20c124eda6ed70a7","lgirdwood","2018-07-10 21:10:19","true","Merge pull request #66 from tlauda/topic/cpu_enable_core

cpu: enabling and disabling slave cores",13,1,0
"thesofproject/sof","68c2cf87e240500810d73c453a3a11be0a1f0148","mrajwa","2019-07-29 21:00:55","false","kpb: change kpb buffer if at the end od draining r_ptr == buff->end_addr

This patch takes care of changing kpb buffer if last
drained size made read pointer equal to buffer
end address. This is important since in slow draining
cases we might need to update history size by real
time stream and therefore continue draining.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",51,14,0
"thesofproject/sof","7334d63fd43dd5111634c81729eb5e83bbfafa82","dragosht","2019-10-31 10:22:30","false","tools: logger: (cosmetic) Improve usage text

Improve the sof-logger usage description text a little bit.
Specifically the -s argument is pretty confusing right now as
it says nothing about having an additional argument for the state
name.

Signed-off-by: Dragos Tarcatu <dragos_tarcatu@mentor.com>",54,17,0
"thesofproject/sof","50caa7dc1a5cf45dd9380e3e6d88e4dd9515513a","jsarha","2022-09-21 14:24:47","false","tools/probe: Several fixes and restructuring for demuxcode

Several fixes and restructuring for demuxcode to make it work with sub
32-bit word granularity.

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",96,52,1
"thesofproject/sof","e9e6db4299ce027921e76ad8212f401be21feeeb","kuanhsuncheng","2022-01-07 02:44:50","false","arch: xtensa: fix unaligned pointer in irq dispatcher

In 8186 mtk dsp (hifi5), we meet a system exception when irq is rasied.
The panic is LoadStoreAlignmentCause.
We found the problem is in int-xxx-dispatcher.S

mov a11, a1
addi a11, a11, UEXC_cp1
xchal_cp1_store a11, a12, a13, a14, a15

In xchal_cp1_store macro, ptr must a certain byte aligned address
In the 8186 mtk dsp Xtensa header, we have

/*
 *  Macro to store the state of TIE coprocessor AudioEngineLX.
 *  Required parameters:
 *      ptr         Save area pointer address register (clobbered)
 *                  (register must contain a 16 byte aligned address).
 *      at1..at4    Four temporary address registers (first XCHAL_CP1_NUM_ATMPS
 *                  registers are clobbered, the remaining are unused).
 *  Optional parameters are the same as for xchal_ncp_store.
 */

.macro xchal_cp1_store ptr at1 at2 at3 at4 continue=0 ofs=-1 select=XTHAL_SAS_ALL alloc=0

In xtruntime-frames.h, the UEXC_cp1 macro is
STRUCT_AFIELD (long,4,UEXC_,cp1, XCHAL_CP1_SA_SIZE / 4)

I have checked history and found the original UEXC_cp1 define is using STRUCT_AFIELD.
(After 3e1eebe)
In 8186 mtk dsp, we need 16 aligned address in xchal_cp1_store using STRUCT_AFIELD_A
with XCHAL_TOTAL_SA_ALIGN.",115,43,1
"thesofproject/sof","c7a527e4bda2f68f6d95f4870bd2db6b51c963f2","fredoh9","2021-05-11 18:14:31","false","Dockerfile: remove apt.conf dependency

There was a assumption /etc/apt/apt.conf has apt proxy settings for
the system. This workaround is not required.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",84,35,0
"thesofproject/sof","27cdfbdb4024417da3e1ec8d5e305522a28ae926","jajanusz","2019-07-03 11:15:24","false","m4: support for ssp bclk_delay token

BCLK delay is optional last value (after quirks),
in SSP_CONFIG_DATA.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",40,13,0
"thesofproject/sof","da9ab07085f2790d8723fdb5d3b4714ca3ff8921","jajanusz","2018-12-19 12:36:52","false","test: fix _zalloc ut

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",52,7,0
"thesofproject/sof","3d44dead6fd750e308ee160ab8da34f48f55feeb","jajanusz","2019-12-17 10:04:34","false","Revert ""kpb: refactor some of KPBs macros""

This reverts commit 0eabf51c9d135ac1761b6c248a9ff58ea502139a.",69,18,0
"thesofproject/sof","56228b0221dce37c03e47ed9803063dd2481542c","jajanusz","2019-04-29 10:16:05","false","cmake: host: separate testbench build

Testbench is user-space application that should just consume
SOF library, so it should be moved out from fw buildsystem.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",48,11,0
"thesofproject/sof","4fe398e85bfc32b07b9545753d0b60ce6bdf35fc","jajanusz","2020-05-11 09:38:36","false","xtensa: ADL-S defconfig

Add default config for Alderlake-S platform.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",96,23,0
"thesofproject/sof","bdb9af48d830d99c35ecaac3fdb45060b6cca25f","johnylin76","2021-02-26 05:27:02","false","sof: drc: sat_int32 after left-shift to avoid overflow

Q_SHIFT_LEFT doesn't check overflow itself. We should do saturation
after left shifts to avoid erroreous value after left shifts.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",77,33,0
"thesofproject/sof","c70b5cb4ddc04949488e05526f127a02b796dbe4","dbaluta","2022-03-23 10:31:25","false","codec_adapter: Dynamically allocate stream_params

This prepares sof_ipc_stream_params structure to have some
extended data appended at the end.

For this reason we no longer can use the sof_ipc_stream_params
object inside processing_module, but we need a pointer.

stream_params is allocated at codec_adapter_params().

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",108,46,1
"thesofproject/sof","36452f444b3b23bfab1bc3f3fe848d85df300f8c","lrgirdwo","2021-08-06 15:57:56","false","testbench: increase the testbench mailbox size to support larger tplgs

Testbench should be able to support ALL DSP based topologies.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",116,38,0
"thesofproject/sof","7288d52ab63d2eaa07f2314922fafd556dd29aa6","lrgirdwo","2022-08-28 11:14:47","false","testbench: cleanup the logging to use printf.

No point in doing a sprintf to a local buffer.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",113,51,1
"thesofproject/sof","218ab6d071d39b4aeda4dde6c11378f40b989eec","lrgirdwo","2021-11-23 15:02:06","false","byt: align gcc defconfig with xcc config

Don't build TONE and optimise for size.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",129,42,1
"thesofproject/sof","1f5a965711466158105ae7d4fc5be96241017f72","lrgirdwo","2018-11-24 20:19:30","false","platform: skl: Add memory map for SKL/KBL platforms

Add memory map and linker script adjustments for SKL and KBL platforms.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",40,6,0
"thesofproject/sof","2183aede833580c8b8da2c3eeb590379420fe873","lrgirdwo","2018-11-15 20:34:51","false","ipc: Fix false positive IPC dropped messages.

On receiving an IPC IRQ the handler currently does not check the
IRQ mask. This means notification received ACKs (i.e. for trace updates)
from the host may be reported as duplicate host command IPCs.

Fix this by checking IPC IRQ mask.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",39,5,0
"thesofproject/sof","890037740b27900da08cb6c0271241d58ddf90d6","wenliangwu","2022-11-14 01:55:18","false","platform: mtk: add platform dai support for mt8188

Add platform dai_init() to platform_init().
Add platform dai to build list.

Signed-off-by: Trevor Wu <trevor.wu@mediatek.com>",96,53,1
"thesofproject/sof","2ff1c6f1083066f106ce895241e7f1a998f4b75f","lyakh","2022-04-11 10:02:35","false","codec-adapter: always acquire buffers for access

Buffers must always be acquired before access.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",115,46,1
"thesofproject/sof","b617910feb35d83d01a128773dc76c03f2cc9d4f","lyakh","2021-04-26 14:35:39","false","zephyr: fix logging build breakage

The use of Zephyr LOG_*() API in SOF is breaking compilation.
Replace it with with the native trace logging until a proper
fix is available.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",84,35,0
"thesofproject/sof","7dbcd7ee338bd6e82e553411091169a1afc60463","marc-hb","2021-04-27 21:31:46","false","logger: add ktime and date in header

Every log file should have a date.

ktime can be related to the TIMESTAMP column. It is especially useful to
spot logs delayed or stuck.

Some logs use ktime while others use a date and it can be sometimes
difficult to connect them with one another. This header can help.

Before:

TIMESTAMP (us) DELTA C# COMPONENT CONTENT

[  5120116529] (  0) c0 dma-trace ERROR FW ABI 0x3012001 ...

After:

TIMESTAMP (us) DELTA C# COMPONENT \
                   CONTENT ktime=5132.663s @ 2021-04-27 14:36:09 -0700 PDT

[  5120116529] (  0) c0 dma-trace ERROR FW ABI 0x3012001 ...

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",85,35,0
"thesofproject/sof","8f3f2d6f4b6d39664b7da608502994ad20ec33b0","marc-hb","2021-12-24 08:09:36","false","Revert ""topology: redirection to workaround hardcoded alsatplg permissions""

This reverts commit eb344375228b15529838d6e4992bc7572650ab5e.

Fixes #5113

The `alsatplg -o -` feature is incompatible with `-v` and basically
buggy because it happily sends .tplg output and debug statements to
the same place without a care. To reproduce the bug, simply run:

   VERBOSE=1 ./scripts/build-tools.sh -T

... then observe .tplg output files like this:

B0x003d3b/015675 - pcm 'DMIC': write 912 bytes
B0x0040cb/016587 - pcm 'HDMI1': write 912 bytes
B0x00445b/017499 - pcm 'HDMI2': write 912 bytes
B0x0047eb/018411 - pcm 'HDMI3': write 912 bytes
B0x004b7b/019323 - pcm 'DMIC16kHz': write 912 bytes
B0x004f0b/020235 - block size for type be (11:10) is 0x2ad4/10964
B0x004f0b/020235 - header index 0CoSA^E^@^@^@^@^@^@^@^H^@^@^@$^@^@
^@^@^@^@^@s^@^@^@^@^@^@^@^A^@^@^@p^@^@^@ ^@^@^@.^@^@^@ ^@^@^@^F^@^
@^@^F^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^
@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^
@^@^@^@^@^@^@^@^@^...

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",120,43,1
"thesofproject/sof","1c6930e29f992286be66d912b8d5e2fff5e830b7","marc-hb","2020-09-15 04:27:01","false","docker-run.sh: fix quoting issues

As reported by shellcheck

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",65,27,0
"thesofproject/sof","501204c684a4984f55308f1035f3fb39ead473c8","marc-hb","2022-12-09 08:38:58","false","xtensa-build-zephyr.py: objcopy --remove-section .comment zephyr.strip

Make stripped ELF files compiled by XCC identical across different
machines.

Some Xtensa compilers (ab?)use the .ident / .comment
section and append the typically absolute and not
reproducible /path/to/the.c file after the usual
compiler ID.

https://sourceware.org/binutils/docs/as/Ident.html

strip --strip-all does not remove the .comment section.
Remove ourselves like some gcc test scripts do:

 https://gcc.gnu.org/git/?p=gcc.git;a=commit;h=c7046906c3ae

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",102,54,1
"thesofproject/sof","b58e5357f85b8db856e922a5e0b59adbf056cc53","lyakh","2023-06-30 15:30:07","false","lib-manager: eliminate repeated memory allocations

No need to dynamically allocate memory for DMA block configuration,
it can be placed on stack.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",37,61,1
"thesofproject/sof","39a373500d6c2499b1edb601907d6282a891005c","RanderWang","2019-05-08 06:40:50","false","topology: add virtual widgets for hda_idisp

Add some more virtual widgets to suppress the machine driver errors.

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",57,11,0
"thesofproject/sof","9f8d4b37247565cfc36b8be9032bee1c7bb7fd61","RanderWang","2020-05-11 01:25:22","false","topology: tgl-max98373-rt5682: add support for 98373 & 5682 in sdw mode

On sdw platforms the pipeline layout is:

 PCM0 <---> volume <----> playback (Headset - ALC5682)
 PCM1 <---> volume <----> capture  (Headset - ALC5682)
 PCM2 ----> smart_amp ----> ALH0x102 (Speaker -max98373)
              ^
              |
 PCM3 <---- demux  <----- ALH0x103 (Speaker -max98373)
 PCM4 <---- volume <---- DMIC01
 PCM5 <---- volume <---- DMIC16k
 PCM6 ----> volume -----> iDisp1
 PCM7 ----> volume -----> iDisp2
 PCM8 ----> volume -----> iDisp3
 PCM9 ----> volume -----> iDisp4

Signed-off-by: randerwang <rander.wang@linux.intel.com>",96,23,0
"thesofproject/sof","905bad42525b44e2d6fb781848df099c5638ce98","keyonjie","2019-01-23 10:19:00","false","scripts: xtensa-build-all: Add support to force build UP Arch

Add -u option to allow force building xtensa(up) ARCH on platforms which
usually building xtensa-smp by default.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",57,8,0
"thesofproject/sof","bb305328d6a862edfb36d30d0c7eac90862a725a","ranj063","2022-01-10 22:04:03","false","codec_adapter: Add pointer to comp_dev in struct processing_module

Add a pointer to comp_dev in struct processing_module. This is a
temporary change that is needed for trace messages in the module
implementation. This should be removed when the trace API is updated to
not need the dev pointer.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","820ef37c82a16f4f9401c7d72406574ad8f7bc8a","ranj063","2022-01-10 22:30:16","false","codec_adapter: generic: remove unnecessary goto's

Return ret in case of error.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","3bee3c25fc471bedde04da8429f5c1b3021ded0f","ranj063","2023-05-16 21:03:46","false","topology2: gain-playback: Use host-copier

Replace the generic copier with host-copier in the class definition.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",52,59,1
"thesofproject/sof","01a9662d211d17e0a702fca6e5f7aaa101432db4","ranj063","2021-10-27 02:36:00","false","Revert ""pipeline: move STOP / PAUSE trigger to the pipeline task""

This reverts commit 756f47afc9cd7c9995516e6cb719c6039dc7d607.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",127,41,1
"thesofproject/sof","89f36491c7b480e5e0fffa825a34d370776ec914","andrula-song","2022-04-07 02:54:00","false","audio: volume: initialize variables before using

initialize the variables for xtensa intrinsics.

Signed-off-by: Andrula Song <xiaoyuan.song@intel.com>",111,46,1
"thesofproject/sof","ef39318ee4b9480a6577029433f4c5cdbae491c8","abonislawski","2022-06-29 15:54:16","false","dai-zephyr: add a DAI COPY trigger

Add a DAI COPY trigger to be called before dma_copy

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",112,49,1
"thesofproject/sof","8d0ac8e2daf47a6c11ac3f9e6f7072de1687e83d","ranj063","2022-02-16 18:28:19","false","topology2: cavs: Add DMIC generic topology

Add the topology for 48k DMIC pipeline. 16K support will be added later.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",105,44,1
"thesofproject/sof","08c0db49f14811084c151da9f707e215faff5f54","ranj063","2019-03-14 20:49:26","false","topology: merge all byt codec topologies into one m4 file

BYT with RT5645, RT5640, RT5651 and DA7213 all have similar
topologies with the only difference in codec name. Merge
them all into a single m4 file and set the codec name
using the macro defined during compilation.

This will also take care of adding the virtual widgets
for all the BYT topologies for compatibility with the
machine drivers.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",69,9,0
"thesofproject/sof","547824b54e81bf5e831c818099b7af9df7aa933e","tlauda","2018-09-28 12:37:34","false","ipc: fix position notifications (overwritten by merge)

Fixes notification data for position and xrun notifications.
Data sent to host was invalid.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",37,4,0
"thesofproject/sof","f6ffa556213070857ffa37675c6cae7a11ec17f0","tlauda","2019-09-16 10:30:43","false","dw-dma: add PLATFORM_NUM_DW_DMACS definition

Adds PLATFORM_NUM_DW_DMACS definition. This way generic
API can access this information.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",61,15,0
"thesofproject/sof","b734091d638080a311c2f44745d431374fc43fd5","tlauda","2019-10-10 08:17:09","false","ll_schedule_domain: pass task during unregistration

Changes domain_unregister operation to also receive task
being unregistered.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",63,16,0
"thesofproject/sof","844526abdf4428932b6f0ca260b5e164b05a2899","tlauda","2019-10-16 09:38:24","false","ipc: return an error on dai not found

Returns an error, when there is no DAI component
connected to the DAI index specified by DAI config
IPC.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,16,0
"thesofproject/sof","75b10a1cc8706124027606802b6e67081f633b60","singalsu","2019-06-03 14:30:19","false","Math: Add functions to convert decibels to linear

This patch adds two functions: db2lin_fixed() and exp_fixed().
The first can convert fractional format dB values to linear within
range -100..+66 dB. The latter is a more generic fractional e^x
function. See the code comments for used Qx.y fractional formats
and limitations.

The implementation for exp(x) core function is based on first 11 terms
of Taylor series approximation for |x| < 2. The larger values of x
are computed with help of rule exp(x) = exp(x/2) * exp(x/2). It
achieves sufficient accuracy for volume control type of applications.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",67,12,0
"thesofproject/sof","24bbea3ef2e7f88e4729c17f2fb9e7fb2c20ee94","singalsu","2020-01-31 14:48:16","false","Testbench: Force scheduler to EDF

This patch adds force of scheduler type to EDF since it is the
only simplified scheduler version that is included to testbench.
The schedule_task_init_ll() stub is updated to call schedule_task_init()
to prevent a check for NULL run operation to fail. The patch also
changes the memory allocation to calloc() to clear the reserved data
to value NULL for similarity with rzalloc() in SOF.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",76,20,0
"thesofproject/sof","1fbc078b78aaf059eed604dfad6f280fb7a87eb6","singalsu","2019-10-28 16:44:29","false","Topology: Use SCHEDULE_TIME_DOMAIN_DMA with the WM8804 default topology

The topology for UP2 + HiFiBerry Digi+ Pro sound card needs to
use for the pipeline host - volume - DAI the DMA interrupts
synchronized scheduling since the DAI is configured as I2S slave.
The timer based scheduling is applicable for this interface only
with ASRC that is not used by this simple topology.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",68,17,0
"thesofproject/sof","52b17106c91d3b6e0c0073337ac5f9f5a7d011cb","bardliao","2018-12-23 17:26:51","false","rimage: make block divisible by 4

Add pandding to each block if the block size is not divisible by 4.
Which can avoid unaligned memory accesses.

Signed-off-by: Bard liao <yung-chuan.liao@linux.intel.com>",50,7,0
"thesofproject/sof","949d1f4d69f21018a44a6d1d8dae84c525da3f8a","cujomalainey","2022-02-17 03:18:58","false","smart_amp: copy ipc config

It appears in the conversion of the IPC API the copy in the smart amp
code was missed and as a result the component loses its ID which results
in the graph being broken and a crash on trigger.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",105,44,1
"thesofproject/sof","74fa3c0a09830f298a559e1c1df29a1a5776e0d0","ktrzcinx","2020-03-19 10:58:21","false","tools: logger: Create log_err function

Error during conversion should be logged to stderr and to
output file by default. Such a approach will speed up debugging
process when some error with conversion occur in CI.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",68,21,0
"thesofproject/sof","a94e12d7d65371a008ac269d473f371a08a80944","ktrzcinx","2020-09-16 10:34:46","false","toml: Add platform configuration files

Given config files may be used as template for new platforms.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",64,27,0
"thesofproject/sof","b9ecb0072d5dc39e6e7fcf3c5b3a92c00da2a84b","softwarecki","2023-03-29 14:19:14","false","rimage: adsp_config: Create new memory_config structure.

Moved mem_zone field from adsp structure to the new memory_config structure

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",58,58,1
"thesofproject/sof","5f7d4e268f75071b9f3cba0a5321822d5904db29","dbaluta","2020-04-07 19:07:34","false","drivers: imx: irqsteer: Fix computation of status

status of an output irqsteer line is a 64bit variable
composed of 2 x 32 bit registers.

Because first 64 output irqsteer lines only holds status for
IRQ in[0] we have a different formula for getting the status
compared to the existing implementation done for i.MX8QXP/i.MX8QM.

Mapping for status register is as follows:

line 0 -> [0 | chan0]
line 1 -> [chan2 | chan1]
line 3 -> [chan4 | chan 3]

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",90,22,0
"thesofproject/sof","1e3adabd198da7322f847440a2087a63f978b006","johnylin76","2020-11-12 07:08:33","false","sof: crossover/drc: Expose algorithm functions

Some algorithm functions of crossover and drc are exposed to share the
usage from other components, e.g. a multi-band drc which includes
crossover and drc inside.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",72,29,0
"thesofproject/sof","9e0a56074674cd971c91210992d20a9d3ea90054","johnylin76","2020-11-12 07:14:20","false","sof: multiband_drc: Add Multiband DRC component

Multiband DRC is a single-source-single-sink compound component which
consists of 4 stages: Emphasis Equalizer, Crossover Filter (from 1-band to
4-band), DRC (per band), and Deemphasis Equalizer of summed stream.

The following graph illustrates a 3-band Multiband DRC component:

                                 low
                                o----> DRC0 ----o
                                |               |
                      3-WAY     |mid            |
x(n) --> EQ EMP --> CROSSOVER --o----> DRC1 ---(+)--> EQ DEEMP --> y(n)
                                |               |
                                |high           |
                                o----> DRC2 ----o

Signed-off-by: Pin-chih Lin <johnylin@google.com>",72,29,0
"thesofproject/sof","f797ff5b75aff0e06a919f5143551f77186c6fc8","johnylin76","2021-04-23 08:15:51","false","drc: move constant if-else check out of while loop

Moved the constant is_2byte if-else check out of while loop. We then have 2
while loops and the constant becomes to be checked once.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",90,35,0
"thesofproject/sof","009cd7c8d5fce45ed35f7947fb3f9fa9bcd2cbbb","dbaluta","2019-05-27 13:01:36","false","reset: xtos: Introduce HAVE_RESET_VECTOR_ROM config option

Apollolake+/i.MX have reset vector in ROM. So far we have
used platform config symbols to tell which platforms have
the reset vector in ROM.

Anyhow, things are starting to get ugly here with more
platforms to come so we add an internal config symbol
which will be set by each each platform when needed.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",64,12,0
"thesofproject/sof","0a1587ba76f9bff8c8b0983ce63e44a2e5ce0b53","lgirdwood","2018-07-30 07:17:15","true","Merge pull request #158 from ranj063/dai_config

[RFT]dai: set config only if the config dai_index matches comp dai_index",14,2,0
"thesofproject/sof","a0dcaeba35d10d8d8c1946c12380f9dc46130322","dnikodem","2022-09-22 09:26:54","false","platform/cavs: remove platform_trace_point functionality for IPC4

The platform_trace_point is not supported with IPC4 fw_reg layout.

Signed-off-by: Damian Nikodem <damian.nikodem@intel.com>",97,52,1
"thesofproject/sof","c8bda49042c2c803ad69fe7a2ada6191672c2f39","slawblauciak","2019-06-19 10:19:23","false","dai: add alh to dai list and initialize it

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",49,13,0
"thesofproject/sof","cd2444adbf8821d33e098b071b40dab2931d6a8e","keyonjie","2021-04-13 08:27:35","false","topology: sof-tgl-nocodec-ci: change to run smart_amp on core 1

Change to run smart_amp pipelines on DSP core 1, this will help reduce
the core 0 usage and add multi-core to the CI coverage.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",81,34,0
"thesofproject/sof","b50d49695895e70110f61987ce2f2bd3177c21c8","keyonjie","2021-01-06 10:20:33","false","topology: sof-tgl-max98373-rt5682: use 32bit dai and 24.576MHz mclk

To align with maxim 98373 12.288MHz bclk requirement, change rt5682 to
32bit with BCLK 3.072MHz.

To follow the rule that the MCLK should use the same clock source with
BCLK, change the mclk to 24.576MHz.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",73,31,0
"thesofproject/sof","624faa9dd54b74db5f1aad3fedcf818535fd6711","keyonjie","2020-06-01 05:16:42","false","topology: tone: add uuid token support

Add the uuid token to tone widget for the future use.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",97,24,0
"thesofproject/sof","f9640aa1703a1ad8737316337015876c9246328e","slawblauciak","2019-01-09 12:55:36","false","dma: link tx timeout

This is to prevent FW from getting stuck in case of anomalous
situations such as DMA taking too long to copy the data.

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",56,7,0
"thesofproject/sof","c630c8ec774edb3e181190a6fb94fa5bfb7234d1","ujfalusi","2023-02-06 11:19:00","false","include: kernel:  Update ABI definition for IPC4 support

With IPC4 the sof_abi_hdr is only used between user space and the kernel,
it is not sent to the firmware.
The magic number for IPC3 and IPC4 also differs to avoid mixing blobs
created for different IPC versions.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",54,56,1
"thesofproject/sof","1479462824f32f75953d80780a5f375e9bfa5121","kv2019i","2023-09-18 12:54:17","false","topology1: remove Intel CML and EHL topologies

These topologies are no longer supported by mainline firmware
code for these platforms. The stable-v2.2 branch continues to
support these targets.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",20,64,1
"thesofproject/sof","89eea6c5a96200a48a4a2df2e87672825605dc93","lyakh","2021-04-30 15:24:01","false","cavs: register number is always 32-bit

Even when addressing 16-bit data the register number remains
the same - 32-bit.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",82,35,0
"thesofproject/sof","b0b15e66b3b08679584d57cd2e2a2316e24f2ebb","lyakh","2022-07-19 09:12:04","false","buffer: (cosmetic) remove a goto

Use a switch-case clause to remove a goto.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",115,50,1
"thesofproject/sof","5fee08996c0d72c24490ce50dac80e49ce2d93cf","lyakh","2022-07-26 08:46:11","false","cache: remove wrong component cache synchronisation

Current component object cache synchronisation is wrong. Firstly
component objects are always allocated with uncached addresses, so no
cached access ever takes place. Secondly cache manipution should be
performed via cached addresses. Thirdly if we decide to access
component objects via cached addresses we'll likely use the coferent
API to do this. Remove wrong cache manipulation to fix cases with
componentson different cores within a single pipeline.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",111,50,1
"thesofproject/sof","ca3f44f2d73217b22901cd755a648a59f92bc4a9","btian1","2023-09-06 02:07:12","false","audio: src: move out src component data out from src source

move component data out of source file to avoid ipc3 and ipc4
usage in src source file.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",22,63,1
"thesofproject/sof","b19c8e1862a5522757b41ddfd2789a4971d9076d","joechengxperi","2023-05-19 03:37:17","false","dts: handle zero config size case in apply_config instead of set_configuration

To handle zero config size case in set_configuration would let
dts_codec_apply_config never be called due to early return when checking
if md->new_config_size is zero. This causes the problem that DTS
tuning parameter would never be set. Instead, check the config size in
dts_codec_apply_config() could resolve the zero config case and let the
tuning parameter could be set successfully.

Signed-off-by: Joe.Cheng <joe.cheng@xperi.com>",50,59,1
"thesofproject/sof","96f5e739a56d9ac831e6b931c287758d50e9a01d","ujfalusi","2021-12-13 09:38:20","false","Audio: Volume: Drop unused hvol support (host mmap volume)

The cd->hvol always remain NULL, there is no code path which would
configure it which makes the mapped volume unusable and unused.

The kernel does not use this feature either.

Remove all related code to this non supported feature.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",111,42,1
"thesofproject/sof","71625344989fbf8bdca3d7586e5d88310ef499a2","lkoenig","2022-01-12 08:26:02","false","topology: define PIPELINE_FORMAT from DAI_ADD

Pipeline extects PIPELINE_FORMAT to be defined. When including a
pipeline using DAI_ADD, DAI_FORMAT is defined but no PIPELINE_FORMAT.
Prior c687815, the last previously defined PIPELINE_FORMAT was used.
This change ensure the requested DAI_FORMAT is used in the pipeline.

This addresses bug #5193.

Signed-off-by: Lionel Koenig <lionelk@google.com>",115,43,1
"thesofproject/sof","7438070eec9785baae4c1c928a8c692058cbc4f8","jsarha","2022-09-28 19:07:18","false","tools/probe: Split the demuxer and offline command to separate files

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",97,52,1
"thesofproject/sof","71dff859e346a7e07427397999094382a5ea8d7e","ranj063","2018-06-26 17:30:12","false","topology: add test topologies with mclk id 1

Add some test topologies with mclk id 1

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",5,1,0
"thesofproject/sof","e101aadcd1dc98c828a4f308cf0931f1409059dc","ranj063","2022-04-27 16:15:40","false","module_adapter: drop the comp_get_module_data() macro

Change all functions to accept a pointer to struct processing_module
as a parameter and use mod->priv to access the module data.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",114,47,1
"thesofproject/sof","1c085d1f8e29499f4dc61685523359ece56e2e34","ranj063","2018-06-12 03:37:11","false","platform: dma: move dmac initialization

This patch proposes to move the platform DMAC initialization
code to the dmac_init() routine.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",1,0,0
"thesofproject/sof","c75d794913c9c546c5a40a24056b358827ca0dac","ranj063","2022-01-13 18:16:48","false","codec_adapter: remove printing the error with -ENOSPC

The error message should be skipped for -ENOSPC in module_process().

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",117,43,1
"thesofproject/sof","4a64defa9467b8ec4dfa18c18904410c5864d1b1","ranj063","2023-06-12 17:02:41","false","topology2: cavs-rt5682: Replace audio_format objects

Use the input_audio_format/output_audio_format objects instead.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",47,60,1
"thesofproject/sof","506e994dc4983d929c31ea3f2b49a8464c5c135e","makarukp","2022-10-19 16:25:40","false","hda: enable chain dma pipeline start

Maintain flow by enabling pipeline trigger to start

Signed-off-by: Piotr Makaruk <piotr.makaruk@intel.com>",95,53,1
"thesofproject/sof","d57286ba18899b0962cad4b67a3651c8ce1f5515","RanderWang","2021-09-09 08:55:31","false","ipc4: pipeline: apply new pipeline status to ipc4

New pipeline status PRE_START and PRE_RELEASE made
ipc4 pipeline failed. Now integrate the patch to ipc4.
Since ipc3 & ipc4 have different msg reply method,
this reply method will be implemented on each version.

We can't reuse ipc->delayed_response since ipc msg
should be response immediately for ipc4 and fw will
send a fw ipc msg to reply the status of the last msg.

Signed-off-by: Rander Wang <rander.wang@intel.com>",118,39,0
"thesofproject/sof","a226f0b01292bcc4449b8f28c1f0c20a9b86c0c9","MingJenTai","2021-08-25 01:23:00","false","Reset sink_format at rtnr_reset()

Signed-off-by: Ming Jen Tai <mingjen_tai@realtek.com>",120,39,0
"thesofproject/sof","449b25a865d1a2eb9d6251ef5ede9621a334bda4","softwarecki","2022-10-03 14:31:17","false","mtl: memory: Get memory windows configuration from DT

The sizes and locations of the memory windows are taken
from the device tree.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",96,52,1
"thesofproject/sof","30a2855d48c87aa039d77c7618bb5d97ee5cbaae","softwarecki","2023-09-18 13:35:11","false","logger: convert: read_entry_from_ldc_file: Make sure string null terminated

Added a null string terminator to be sure that strings read from a file are
terminated correctly.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",20,64,1
"thesofproject/sof","8ebb7478b8734a4ec1132296b48e2258ce640ee0","XiaoyunWu6666","2022-03-18 07:08:13","false","overlays:tgl: Configure format converter for IPC4

Enable format converters when building tgl firmware with Zephyr
and IPC4.

Signed-off-by: Iris Wu <xiaoyun.wu@intel.com>",110,45,1
"thesofproject/sof","db728a7c1186fa145b1987f71c6b957f8fd0b875","libinyang","2018-11-07 06:17:12","false","memory: apl: increase HEAP_RT_COUNT256 size

This patch fixes the memory allocation error for nocodec platform
by increasing HEAP_RT_COUNT256 size

Signed-off-by: Libin Yang <libin.yang@intel.com>",39,5,0
"thesofproject/sof","91b917916fa3aa7cb447b54b0656b0d4c7b72263","zhuyingjiang","2018-11-05 08:43:16","false","rimage: manifest: add manifest APIs

add the 1.5 manifest operation APIs

Signed-off-by: Zhu Yingjiang <yingjiang.zhu@linux.intel.com>",38,5,0
"thesofproject/sof","6a0cf6740f705e216a3d132c8b05b84d2f8d0bad","bkokoszx","2019-11-08 10:09:51","false","dmic: change spin_lock to spin_try_lock in dmic_work()

In order to avoid dead locks in dmic_work I've replaced
spin_lock() with spin_try_lock(). In case when
spin_try_lock() fails we reschedule dmic work.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",55,17,0
"thesofproject/sof","bd9168f6768d5dee14477fd38b494e6527306d5a","kv2019i","2022-08-12 07:04:11","false","probe-app: support non-word aligned probe data streams

Modify code to correctly handle probe streams where sync word
can occur at any byte boundary, and where probe packet size may
not be aligned to 32bit word size.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",116,50,1
"thesofproject/sof","bc5f3a6cde0e253a8141f5b53571192c40d69818","naveen-manohar","2020-03-04 16:16:35","false","topology: add rt5682-sdw to TGL volteer configuration

Enable RT5682 located at SNDW LINK0, DMIC & HDMI Audio

Signed-off-by: Naveen Manohar <naveen.m@intel.com>",79,21,0
"thesofproject/sof","f704d361e1f975883dc759b010caa224acbd1617","cujomalainey","2018-11-16 02:09:34","false","Fix pipe-eq-capture comments

Fix copy paste comment errors

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",39,5,0
"thesofproject/sof","177473c3867ff7994dfbaad5e248309dc0814331","cujomalainey","2020-10-09 00:02:31","false","host: conditionally build trace module

Only build trace when its needed

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",68,28,0
"thesofproject/sof","ae0869fe2dc0e92599df68b5f5819d2896e76076","iuliana-prodan","2023-04-06 13:53:21","false","topology: imx: Add topology file for i.MX8MP with wm8962 codec

Add new topology file for i.MX8MP with wm8962 codec.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",51,58,1
"thesofproject/sof","7511a1da153364c0e6ba2f990d43a272889af96e","andyross","2023-06-06 15:01:53","false","kpb: Don't assert on memcpy overruns

The config block for the component gets provided externally and is
copied directly in using a byte count likewise provided by the host.
The use of memcpy_s() prevents overruns, but the error that was
detected was being reported via assert().  To fuzzing, that assertion
is a fatal error, when clearly this needs to be a runtime failure as
it's due to external input and not a local code bug.

Signed-off-by: Andy Ross <andyross@google.com>",45,60,1
"thesofproject/sof","4a4d8d261907bd900c91d0e64d7458bdb32e4cb3","kv2019i","2023-05-05 12:37:22","false","intel: ssp: drain RX fifo when starting

If DMA transaction is ongoing when RX is enabled, this can lead
to stuck communication between DMA and SSP (DMA service request
not seen by the DMA).

To avoid this, flush the RX fifo before enabling SSP RX.

Link: https://github.com/thesofproject/sof/issues/7548
Suggested-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",53,59,1
"thesofproject/sof","ae2b0a4603e0702b4f6c0ee1a7c550e896b88230","ranj063","2019-04-22 21:15:50","false","topology: pipeline: add scheduling comp argument to PIPELINE_PCM_ADD

Add the scheduling comp argument to PIPELINE_PCM_ADD that
will be used to pass the name of the scheduling comp
when the pipeline is created.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",47,11,0
"thesofproject/sof","17cb6d9e3a7ca06be911b0e78bfa2f9a778b1122","tmleman","2023-08-08 13:39:07","false","mtl: copier-host: fix build issue

After commit f639fc8e888b (""copier: rename parent_dev to dev"") FW for MTL
platform is not building. This should be detected as merge conflict but it
went unnoticed.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",28,62,1
"thesofproject/sof","508881687fba7abe8594c020a20b8799abca1ed8","iganakov","2023-05-22 16:47:36","false","kconfig: limit AMS to IPC4

Add IPC4 dependency for AMS

Signed-off-by: Ievgen Ganakov <ievgen.ganakov@intel.com>",55,60,1
"thesofproject/sof","38d92effc4044200bb4ddfd0b48e2b940ad6160f","kv2019i","2022-09-08 12:01:03","false","ipc4: use delayed work queue for IPC resends

Continue changes in commit c194125b83c2 (""zephyr: add
notifier_register(ipc_send_queued_msg) in task_main_start()"") and
implement the delayed IPC msg sending in Zephyr work queue.

The old implementation did not cover cases where IPC needed to be resent
when no active LL scheduler tasks were active.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",105,51,1
"thesofproject/sof","fe4ef2843c143355c6ee580e3ba9fba8d646cb61","tlauda","2019-08-02 12:38:39","false","interrupt: add irq_local_enable and irq_local_disable macros

Adds irq_local_enable and irq_local_disable macros to disable
and enable all IRQ sources for current core.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,14,0
"thesofproject/sof","ffa13fcc4d98eee70c3b22ae098cca2c53fe0516","tlauda","2018-09-20 15:00:35","false","interrupt: add possibility for manual irq unmasking

Adds possibility for interrupt handler to decide,
whether it wants to manually handle unmasking irq
or have it done automatically.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",35,4,0
"thesofproject/sof","c5ce41f2ab89fb79dfa5e72d7e1ee5997606d01a","tlauda","2018-08-14 16:21:15","false","alloc: align memmap to cache line size

Aligns memmap related structs to cache line size.
This is getting us closer to have memory allocator
fully shared between cores.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",17,2,0
"thesofproject/sof","cd0044e6868348a608384f66e72ebcabd67ff684","tlauda","2018-06-11 18:27:34","false","test: unit tests for list.h

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",1,0,0
"thesofproject/sof","57b6c22e57a1f6c038d1e21a4dad5770f5926eda","tlauda","2019-03-12 16:01:13","false","host: remove need of host buffer alignment

Removes the check for host buffer period size alignment
for Host DMA Gateways. It isn't required for this type
of DMA.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",69,9,0
"thesofproject/sof","761bbac5aca60cbbbd59a230ad436f2e9ed28d0f","tlauda","2020-04-14 10:40:55","false","host: dai: limit number of bytes copied to one period

This patch limits number of bytes copied from DMA source
to maximum of one period size per one copy. This does not
change anything for DMA driven pipelines, but only for
timer driven. This limitation is to avoid high peak of MCPS
during copy, especially first one, where we usually have
two periods of data ready. Having some demanding processing
component on the pipe can end up in xrun if the MCPS limit
is exceeded.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",83,22,0
"thesofproject/sof","9e0b2e5726ac6e23836e59128da1520ef742db6c","tlauda","2020-02-21 14:32:42","false","ipc: extract method for sending chosen message

Extracts ipc method for sending chosen notification message.
Standard function takes first message from the queue,
but we would also like to send notification of our choice.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",80,21,0
"thesofproject/sof","5a2e7b866f9a11ad5af7d1c238b2c87391f16780","tlauda","2019-01-14 15:19:06","false","cache: exclude cache defines to separate header

Moves cache operation defines to generic cache header.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",55,7,0
"thesofproject/sof","3e1eebe92c2f535c9905721d1f4ce074372ae1e4","tlauda","2019-07-22 09:33:23","false","arch: xtensa: extend UserFrame

Extends UserFrame in order to support full
context switch in the future, which will allow
to preempt tasks on the same irq level. Also this
patch adds additional 8-byte alignment fields to
automatically support coprocessors requirements.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",48,14,0
"thesofproject/sof","dcf722f826a405e4ae87b0d3ad87df1f5f0eeeb5","singalsu","2019-12-05 12:23:28","false","Volume: Simplify ramp calculation and provide constant rate on/off

The earlier version of ramp step calculation was more complex than
necessary and there was no way to ensure the max. topology defined
ramp time happens in beginning of streaming so the step equation
was rewritten. The step value is rounded for better match with
topology defined ramp length.

Normally the ramp is constant rate type where the topology define
time happens for vol min-max transition. A smaller transition is
completed in less time.

The constant rate mode is not used for the first copy() triggered
ramp to ensure the ramp from vol min to used volume takes the
entire topology defined time. This mode is also as earlier used
for legacy kernels where the vol min/max information is not passed.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",70,18,0
"thesofproject/sof","9359f578084a952d4977458083e0a2e4019dc2f8","marcinszkudlinski","2023-08-24 13:27:30","false","Revert ""audio: add fixup for S24_3LE""

This reverts commit 6efab4a7ab3f666b4a36c9d0f60e83003b69906b.",26,63,1
"thesofproject/sof","b634aebad79c11fbf955ff189d83083f51ba8c93","singalsu","2021-06-08 16:40:05","false","Drivers: Intel: DMIC: Spinlocks notes add

This patch adds comments to code parts about spinlocks applied
elsewhere to avoid confusion.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",80,36,0
"thesofproject/sof","40046a2d2546bb5cdf3446b8ea035d92c72bc272","singalsu","2021-12-17 13:45:15","false","Audio: Move audio stream copy inline functions to component.c

This patch moves functions audio_stream_copy(),
audio_stream_copy_from_linear(), and audio_stream_copy_to_linear()
into component.c. The functions are not changed.

There is no measurable code execution time
increase. In a test build this change saved about 800 bytes.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",117,42,1
"thesofproject/sof","0cb752d362a5669b0aaefacb4ed01deddea10274","singalsu","2023-05-31 16:01:05","false","Tools: Test: Audio: Valgrind run related fixes

The changes to scripts/host-testbench.sh and earlier to process_test.m
have unintentionally dropped valgrind run from test.

This patch enables valgrind for process_test.m runs and fixes
issue in test run octave side function to silently ignore
error about failed shell command. Normally test fail when there
is no data or incorrect data, but a valgrind failure with correct
test output was passed.

Valgrind output becomes visible if testbench run trace stderr
redirection to file is disabled. If not done valgrind error would
stop the test but the analysis would not be printed to console.

Fixes: 6b744bcc63 (""host-testbench.sh: use process_test.m for 8 components"")

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",48,60,1
"thesofproject/sof","bccd08a9b6480a063121b6ee9a5e86f853f27efc","RanderWang","2018-12-04 05:44:18","false","task: remove medium task level on BDW & HSW

There are only two interrupt pins to support task levels, so
only low level and high level are supported on BDW or HSW.

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",41,6,0
"thesofproject/sof","29b30334841db91bed6651ea971a13998ea5423a","marc-hb","2023-08-29 15:41:23","false",".github/zephyr.yml: remove spurious `zephyr_revsion` matrix variable

Fixes commit 6f9f2ee28ecf ("".github/zephyr: build with the debug overlay
and CONFIG_ASSERT"")

Remove misspelled `zephyr_revsion` matrix variable. It was a hasty
copy/paste in that commit.

It's a harmless no-op because build-windows does not play any git tricks
and always builds from the manifest. However it makes the list of
configurations confusing in the Github interface.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",25,63,1
"thesofproject/sof","a0dc1c5aa75155b5ab66a27ba277d82a881a2911","marc-hb","2022-10-04 18:58:03","false","Revert ""topology2: nocodec: add volume and mixer support""

This reverts commit e31c7abeeb59051c4bc529f77488feaa9585a7d5.

This caused most tests to fail on sh-tglu-rvp-nocodec-ci-02
in daily run 15919, see some more errors in logs shared in
initial PR #6318 and new issue #6367

  FW reported error: 113 - Invalid destination queue (pin) ID provided
  ipc error for msg 0x45000004|0x6
  sof_ipc4_route_setup: failed to bind modules copier.SSP.8.1 -> gain.7.1

I don't know why this failed and I did NOT test this revert, however:
- This topology change is apparently the only thing that changed
  compared to the day before.
- The error message seems very much related.
- Other people seem to agree.
- According to Ranjani, this feature is not urgent.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",97,52,1
"thesofproject/sof","dc0ab8a449d6aea470f787a8aac8067d9c547ec2","marc-hb","2021-04-16 23:28:19","false","logger: fix precision bug introduced by new -e option

Add missing ""break"" so the -e option stops spilling on the -f precision
option. Fixes commit 53ce8b9d9f82 (""logger: new relative timestamps
option, relative to first entry seen""). Since that commit the -e option
was wrongly assigned to the precision too.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",82,34,0
"thesofproject/sof","81b21c33b6ddf112c442e2ad49e6f62cecb2331e","marc-hb","2020-09-15 19:08:54","false","travis: remove deprecated 'sudo: required'

As reported by travis lint:

 [x] [warn] on root: deprecated key: sudo
         (The key `sudo` has no effect anymore.)

Also copy to the top of the file well-tested .travis.yml tips from
sof/linux/.travis.yml

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",63,27,0
"thesofproject/sof","bc394916d0827d3c4ef072696cc4f3fe801c820b","marc-hb","2022-12-15 07:24:54","false","xtensa-build-zephyr.py: switch type of InstFile() names to pathlib

Make sure any forward slashes in strings are immediately converted to
OS-dependent directory separators.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",92,54,1
"thesofproject/sof","11441d85409d1525de4eaede085649e3c99aa650","marc-hb","2023-03-13 04:04:52","false","zephyr/docker-run.sh: hardcode zephyr-build img to Zephyr SDK 0.15.2

Windows has always been hardcoded to 0.15.2 in .github Actions.

Fixes the compare-linux-windows check that just started to fail in daily
build https://github.com/thesofproject/sof/actions/runs/4400264770

The "":latest"" zephyr-build image was just upgraded to the Zephyr SDK
0.16.0-rc1
https://hub.docker.com/layers/zephyrprojectrtos/zephyr-build/latest/images/sha256-91ef9e556aa2a6b5ee5397536e6c441b87fbaef82b9dfc0d12287c39d884d0af?context=explore

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",55,57,1
"thesofproject/sof","ab7c1a2c7b8391056aa42b59ffcacabd3223e872","marc-hb","2022-10-18 04:45:20","false","xtensa-build-zephyr.py: de-interleave signing and installation code

Very minor, zero-change re-ordering to make the next commit easier to
review. Fixes commit 762f63bf8b4b (""xtensa-build-zephyr: add option to
build FW in cavs naming style"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",101,53,1
"thesofproject/sof","c33c7bd0d6b1dd219c0e2daf1c6df269404693f3","lyakh","2019-01-24 10:47:02","false","rballoc: fix misleading zone names

rballoc() always allocates memory from the BUFFER zone, in fact the
""zone"" argument for that function is redundant. Using any other zone
name with it is misleading. In fact all current calls to rballoc() use
the RUNTIME zone. Replace all uses with RZONE_BUFFER.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,8,0
"thesofproject/sof","488bc759c92f9aa01277310952524cd09a751ea6","lyakh","2018-11-21 10:36:03","false","sue: enable booting by loading over SPI

This patch enables creation of an SOF image, that can be loaded over
SPI and run on Sue Creek platforms. With this patch an image still has
to be manually created by padding the boot loader and concatenating it
with the SOF proper rimage (see comments in memory.h). It also contains
a hard-coded 9KiB offset to the beginning of the manifest. More work is
required to fully automate image creation.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",39,6,0
"thesofproject/sof","e4a53594403d40926b349423045b0f13c252b220","lyakh","2022-02-03 16:30:18","false","TGL: enable CONFIG_INCOHERENT correctly

Kconfig options with no description cannot be selected from
defconfig. They can only be selected from other Kconfig options.
This means, that CONFIG_INCOHERENT doesn't get selected on TGL. Move
it to Kconfig to fix this.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",106,44,1
"thesofproject/sof","084f8ccc42f5b190ac9641ab7d05e502da275831","lyakh","2022-04-07 14:26:18","false","dma: dma_buffer_copy_*() functions should use cached buffer objects

dma_buffer_copy_to() and dma_buffer_copy_from() should be called on
properly acquired buffer objects.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",114,46,1
"thesofproject/sof","64c5f3a46b15f7ae82c0cddd41a3135b1b095a5e","keyonjie","2021-06-09 04:54:18","false","topology: sof-tgl-nocodec-ci: fix DMIC16KHz PCM

Correct the wrong PCM name and pipeline number.

Fixes: 7c62a65ac6aa (""topology: sof-tgl-nocodec-ci: add dmic16k coverage"")
Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",81,36,0
"thesofproject/sof","b90315f0f0dfaadf672adedc5901156a4a9297cc","keyonjie","2021-01-06 11:31:46","false","ssp: mn: clean up the mclk part

We have 2 mclks in total for cAVS platforms, they share the same clock
source, but have separated dividers.

SSP ports can use either of the 2 mclks, add a ref count to manage the
mclk usage, and release it when not used.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",73,31,0
"thesofproject/sof","81b3e879242576f192b834046235fd736ef0d541","keyonjie","2020-06-17 03:57:52","false","ipc: topology: add definition of the extended data

Initial the definition of struct sof_ipc_comp_new_ext, which will be
used to align the extended data between FW and the SW, add UUID array to
it.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>
Signed-off-by: Marc Herbert <marc.herbert@intel.com>",76,25,0
"thesofproject/sof","72d4854efa06f497aa6fa108710b9f6d9722518b","aiChaoSONG","2023-04-04 02:17:12","false","smart_amp_test: process same frames from all inputs

The smart amp test module will first process feedback if
presents, and then process main input to its output.

However, minimum available frames from main input and
feedback is used in processing feedback, while available
frames from main input is used in processing main input.
The different frames of audio data could be processed from
main input buffer and feedback buffer.

This patch make sure the same number of frames are processed
from main input and feedback buffers.

Fixes: #7184

Signed-off-by: Chao Song <chao.song@linux.intel.com>",52,58,1
"thesofproject/sof","1e8feb2cf37d06e63b0ba9f97761b3a829a8ec4c","kuanhsuncheng","2021-09-08 06:34:16","false","xtensa: add mt8195 MPU setup

Override the default MPU setup.
This table matches the mt8195 memory map

Add xtensa/mpuasm.h, for mpu_write_map opcode

Signed-off-by: YC Hung <yc.hung@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",118,39,0
"thesofproject/sof","1303c1a23313f5d73ed21bf044fee3120d8d2f4b","ranj063","2022-02-07 19:34:48","false","topology2: cavs-gain-hda: Add 32-bit support

Add 32-bit support in PCM capabilities.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",106,44,1
"thesofproject/sof","4c57e2b51fedd134283bfbf60f767c6ef73fd2d1","ranj063","2018-10-11 05:27:02","false","comp: new function to set frame_fmt and period bytes based on source/sink

Add new function to update dev frame format based on source/sink
format. Update volume_prepare() with the new function.

Please note that the new function changes the handling of default
case while setting the frame format. The frame format should be
set to config format only in the case of DAI source/sink type.
For all other cases, it should be set to the dev params frame fmt.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",33,4,0
"thesofproject/sof","fc13cff773817c49cb9597400b88e0770e2e30a3","abonislawski","2019-04-03 13:44:37","false","coredump-reader: unnecessary comments removed

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",51,10,0
"thesofproject/sof","8c005ef6a909acbc8c886db578ea2499ce8677d9","ranj063","2023-05-12 17:37:38","false","topology2: sof-lnl-nocodec-fpga: Add 2ch DMIC topologies

Build the 2ch topologies with either PDM0 or PDM1 enabled.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",51,59,1
"thesofproject/sof","5444cd20972cf0bd25c9719539cb4c126a5ee6ce","ranj063","2022-11-14 18:35:42","false","topology2: build the topologies in the right folder

The CAVS topologies need to be in the avs-tplg folder and the MTL
topologies need to be in sof-ace-tplg folder. Also, change the output
file names to the names expected by the kernel and the NHLT binary files
to match the topology file names.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",94,53,1
"thesofproject/sof","18595e9cd3ab78e0b83633bc6ae45cd64a67e4a4","ranj063","2023-08-25 21:58:29","false","topology2: speaker-echo-ref: Remove the echo ref PCM

The echo-ref pipeline ie the DAI capture pipeline involving the speaker
codec is already part of the list of pipelines that gets set up and
triggered when the DMIC capture starts. Therefore, there's no need for
the echo-ref PCM to explicitly start the reference capture. So, remove
it and connect the codec DAI to the google-rts-aec module directly.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",25,63,1
"thesofproject/sof","b0f70598001ba14dc73a1f608e5830c39e5c040b","abonislawski","2019-06-17 10:41:40","false","memory: add static assert for heap_buf_alignment value

This will check if heap buffers alignment is valid

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",46,13,0
"thesofproject/sof","9ce1cc89881a06ae013a35f5b01799aa1812e27f","softwarecki","2023-03-01 15:40:54","false","ext_manifest: Fix fw_ext_man_cavs_header version

The version fields in the fw_ext_man_cavs_header structure describe version
of the structure itself, not the image. The correct version number has been
set.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",61,57,1
"thesofproject/sof","f510435a253373c806c49fbc32d876287bcbe801","aiChaoSONG","2021-05-17 08:28:01","false","topology: sof-tgl-nocodec-ci: run pipelines on different cores

This patch moves DMIC pipeline to run on DSP core 2,
and SSP1 pipelines to run on DSP core 3 for multi-core
verification.

Signed-off-by: Chao Song <chao.song@linux.intel.com>
Signed-off-by: Zhang Keqiao <keqiao.zhang@linux.intel.com>
Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",86,35,0
"thesofproject/sof","f9c3cfccfe3d56f1da92e5e4ddafe5d4574b27ac","andrula-song","2023-02-02 06:52:26","false","Audio: Mixer: Remove the prime operations for unaligned samples

Remove the unliaged operations since we use the frame aligned API
in mixer process function while get the available frames. Simplify
the code and get better performance for 16/24 bit process(save about
18% cycles) for HiFi version.

Signed-off-by: Andrula Song <andrula.song@intel.com>",52,56,1
"thesofproject/sof","66e5c2cead84aa65f61f3c61864ea5af60107cf5","singalsu","2023-10-23 11:16:32","false","Tools: Tune: TDFB: Add howto instructions to generated tplg blobs

Set field export_howto to instruction that was used to create
the blob. The tplg2 .conf and tplg1 .m4 files will contain the
command in the beginning of file.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",8,65,1
"thesofproject/sof","912158e1f4117ed4a347d7b2ffb40152a41485da","tlauda","2019-06-27 12:07:51","false","component: make copy type extendable

Changes component's copy attribute from bool to
enum, which makes it extendable. Now we can add
additional copy types and implement each component's
functionality based on selected type.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",47,13,0
"thesofproject/sof","e57f8f0e92bcfd25462c6d50c47cd75e82303668","tlauda","2020-01-08 15:09:03","false","dma: add DMA info to sof context

Adds DMA info to sof main context. Also implements
getter to easily retrieve the info through one point
of access.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",71,19,0
"thesofproject/sof","514857912e1d32ef059e737ac365a7477585c404","cujomalainey","2019-08-31 00:28:42","false","topology: sof-cht-max98090: fix media pipeline

Need to add the SCHED_COMP name so pipeline will properly load

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",60,15,0
"thesofproject/sof","889f0143a13b6886d9330f2ad15e12fc8d267e3f","tlauda","2019-09-27 07:16:32","false","interrupt: imx: run cascaded irq handler in non atomic ctx

Runs interrupt handlers for cascaded interrupts in non atomic
context. Otherwise we are blocking other cores during execution,
which is not needed, since we only need to protect integrity of
the list.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,16,0
"thesofproject/sof","b193c04d1c3ed5f8849fb0e711483e1bab37d6cf","tlauda","2019-07-12 12:22:13","false","ipc: cleanup includes

Cleanups includes in all ipc files.
Unused headers has been removed and needed
has beed added.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",43,13,0
"thesofproject/sof","4e8743f76f8278b897fc6f4af2751b8d2964fe62","iuliana-prodan","2021-05-19 12:18:14","false","zephyr: imx: split initialization

Zephyr already uses main() and has already performed
a lot of initialization before entering SOF.
Split initialization, for i.MX platforms, to make sure
no operation is repeated.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",86,35,0
"thesofproject/sof","dad8a0c399274317def4190bfa3659fc01443bd4","rfredzim","2022-03-30 10:33:31","false","ipc4: dma-trace: use the already initialized ipc msg size instead of sizeof

Use the size which is already initialized in posn.rhdr.hdr instead of
using sizeof(posn) which is incompatible with ipc4.

Signed-off-by: Rafal Redzimski <rafal.f.redzimski@intel.com>",112,46,1
"thesofproject/sof","aeda0158b0df86cc66e1e41da1e343d45c349d12","keyonjie","2021-08-17 12:08:15","false","dw-dma: set LLI alignment to platform specific

It is observed that on different platforms, the LLI need to be aligned
different, e.g. it is 128 Bytes on TGL, otherwise, the LLI struct might
be clobbered and the DMA channel might get unexpected stopped, which
will eventually lead to Xrun.

Here make the LLI alignment to platform specific and use 128 Bytes for
TGL.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",118,39,0
"thesofproject/sof","6a6cdf71a351ead5f079bb5dcadcb256bba6badd","slawblauciak","2018-07-25 07:56:58","false","drivers: i2s frame clock slave mode

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",12,2,0
"thesofproject/sof","f78d759f89fe8e1a55f6fcd5757b1857ef6bd4de","fabiobaltieri","2023-08-28 18:42:38","false","zephyr: edf-schedule: fix CONTAINER_OF type

The z_delayed_work field in struct task is a delayed work, so to go from
k_work to it safely there's an extra step. Add a
k_work_delayable_from_work to fix that.

This is harmless right now because k_work is the first field in
k_work_delayable but the extra step is the safe way of doing it.

Signed-off-by: Fabio Baltieri <fabiobaltieri@google.com>",25,63,1
"thesofproject/sof","7996f1ac10b8a8c14c87a3752d3e0dbe94d09709","lgirdwood","2018-10-10 15:16:03","true","Merge pull request #471 from akloniex/redefine-abi-version

abi: Redefine SOF_ABI_VERSION to allow for backward compatibility",33,4,0
"thesofproject/sof","61e689c9f014e19df781ad9345ede7cdeadb414b","lgirdwood","2018-10-25 09:34:22","true","Merge pull request #498 from bkokoszx/dma-buffer-overflow

dma-trace: handling dma trace buffer overflow",27,5,0
"thesofproject/sof","57744b874292ffa6d425126e7dccbe0ce87d89a7","lgirdwood","2018-10-03 14:39:09","true","Merge pull request #453 from tlauda/topic/smp-waiti-fix

cpu: fix panic at core power down",34,4,0
"thesofproject/sof","8051fe393c88a3a541e102f83fd9135f6d3dca22","jajanusz","2019-01-23 16:59:51","false","readme: update for cmake

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",56,8,0
"thesofproject/sof","308cf3d140fe66d648ed384cb67a4f9718418d8c","lgirdwood","2018-06-26 11:19:29","true","Merge pull request #4 from ranj063/dai_changes

DAI updates - topology changes",4,1,0
"thesofproject/sof","c0a881a3b7f925beaeff8e64b728b088f349d625","lgirdwood","2018-10-14 21:41:17","true","Merge pull request #101 from juimonen/test_pr

tests: add qa tests and rearrange other tests under one directory",35,4,0
"thesofproject/sof","1dd1939f05ef1ab4fdaa651d27164117006abdcb","btian1","2023-05-17 08:34:02","false","copier-dai: Add copier_dai_prepare in copier dai source file

Add this function to integrate copier dai prepare code.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",51,59,1
"thesofproject/sof","c488851defb2cf791a4ca11575010994919ab8a0","btian1","2023-02-16 01:44:26","false","host-zephyr: Expose common functions for host DMA copy

Create and expose a couple of functions for host DMA copy
along with struct host_data,these functions will be shared by both
host and copier component.
This is in preparation to remove the creation of a host component and
endpoint buffer in create_host().

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",53,56,1
"thesofproject/sof","56bc7efb91fc5d6f8974fdd42251ca464fc1e380","btian1","2022-10-12 13:42:07","false","performance profiling enable: add conf file for profiling enabling

After add this file, with -o app/perf_overlay.conf in build command
line, profiling functionality will be enabled and mtrace/sof log will
have performance data for further analysis.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",99,52,1
"thesofproject/sof","b8c52ecaf7f58956d7c3f0727e072401d05ef2c5","btian1","2023-10-19 08:30:13","false","Topology2: condense output format in tplg file

Condense src 48k to other audio format with combined array format.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",12,65,1
"thesofproject/sof","fd60858a4cbf478deb7abd200fd3f2f5752c4026","ujfalusi","2023-08-28 10:34:34","false","idc: Add pipeline ID mask definition to IDC_MSG_PPL_STATE extension

In preparation to share the extension with an action, first introduce a
mask so that the idc code is prepared for a shared use of the extension.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",25,63,1
"thesofproject/sof","c95d801a99d4534ba94e955336b3bc123dc8db6b","marc-hb","2022-08-31 22:29:08","false","Revert ""github/zephyr.yml: use Zephyr docker-image v0.24.2""

This reverts commit e29572bb2d00b00549af9dfd447d0c03e9cd0384.

The Zephyr SDK 0.15.0 was exceptionally backwards-incompatible, which
meant the docker image could not have it ahead of time as usual, which
caused some CI failures. More details in
https://github.com/zephyrproject-rtos/zephyr/pull/49496

These CI failures were not a bug, they were a ""feature"": they drew our
attention to how unusual 0.15.0 was and they let us inform developers
before they hit the issue. Continuous Integration at its best; we want
more of that.

Before this unusual 0.15.0 event we had been using ""latest"" for many
months without any issue.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",116,51,1
"thesofproject/sof","a1c43ef855c7c5df43ab166fa053276bb90be2cd","marc-hb","2021-06-01 07:21:04","false","dma-trace: new dma_trace_initialized() function

Avoids duplication and potential divergence.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",83,36,0
"thesofproject/sof","7322c023493a2b3fe96fce16438d7dcea17f2212","marc-hb","2020-10-15 07:03:10","false","manifest.c: assert buffer overflow in man_copy_sram()

Does not solve https://github.com/thesofproject/sof/issues/3423 but
converts a buffer overflow and crash into a more usable assert.

Buffer overflow found by running rimage with valgrind and the binaries
provided by @singalsu

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",72,28,0
"thesofproject/sof","a43cf1aff071c2751419d6c37d300cd59abc31d9","marc-hb","2021-10-19 18:31:41","false","sof_ri_info: pylint: disable=invalid-name, missing-function-docstring

Add:

... to reduce pylint warnings to a usable amount.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",123,41,1
"thesofproject/sof","6fbe4a95893dc82815c7ebb137d207efc2c6b747","mrajwa","2019-07-26 13:14:31","false","kpb: don't allow draining if KPB is in wrong state

This patch checks if KPB is in proper state beforeinitialize draining.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,14,0
"thesofproject/sof","31c637a285c882ed29eba705bedc9adf18be342e","lyakh","2023-01-10 14:20:31","false","copier: fix a wrong DAI device pointer

With IPC4 the top level component that receives trigger events is a
copier and not the associated with it DAI. We need to retrieve the
DAI device pointer for its timing parameters.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,55,1
"thesofproject/sof","c66ed3eaef3594576278929d840032b2f048b2bf","pjdobrowolski","2023-01-31 08:34:16","false","iadk_modules: module_init: checking type of module

In manifest is information about version of API and
depending on it we load IADK or SOF module.
Flag is showing if module is loadable. According to this information
different api is being used in loading module.

Signed-off-by: Dobrowolski, PawelX <pawelx.dobrowolski@intel.com>",52,56,1
"thesofproject/sof","e80af3330f33b00d14107428d132f48013c3519d","tmleman","2023-07-05 09:45:34","false","header: sof: add header with tlv struct

Adding a header file containing definitions of the TLV structure and
related functions.

Most of the code is a copy of the functionality added for the BaseFw
module in the 3efd78048d commit. The only difference are the names change
of the base structure, functions and field in the structure.

A new feature is a function that allows to find TLV value of the
indicated type.

Co-developed-by: Rander Wang <rander.wang@intel.com>
Signed-off-by: Rander Wang <rander.wang@intel.com>
Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",33,61,1
"thesofproject/sof","f76b24ba0a368681dd567e530ae02729bbffbdd5","akloniex","2018-10-29 11:55:23","false","rimage: debugability: include fw_version in .ldc file

Extract fw_version from fw_ready section of elf and include it in
header of .ldc file to allow verification by sof-logger.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",28,5,0
"thesofproject/sof","19416908dde073320b2ac59081c244735a0e8515","fkwasowi","2022-12-16 13:56:06","false","selector: remove return error when input buffer is 0

A pipeline that contains a selector cannot be run before the pipeline
that is connected to the selector because an error is returned.
The order of the run pipelines should not matter for functionality.

Signed-off-by: Kwasowiec, Fabiola <fabiola.kwasowiec@intel.com>",91,54,1
"thesofproject/sof","ac5d1740253259638fd0f93b8d6d01fec65d7f6e","ktrzcinx","2019-10-28 13:17:17","false","trace: Add pipeline id to eq_iir traces

It will be helpful during debugging components
to see correlated pipeline id.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",68,17,0
"thesofproject/sof","b1fc922079dea6a3f9a67a8b40ea0ff1953733b7","ktrzcinx","2020-05-29 12:41:30","false","logger: Parse runtime filter levels

Parse arguments given in -F flag, in form where each -F argument
is given as separate line. Format of single -F entry is
`<log_level>=<component_list>`. <log_level> must corresponds with
.name field from log_level_dict. List of component are build from
elements separated with `,` and single element may have one of the
following forms:
""<name> <pipe_id>.<comp_id>"" - single component instance
""<name> <pipe_id>.*"" - components with given name on piepeline with pipe_id
""<name>*"" - each component instance with given name or global component
""<name>"" - as above
""* <pipe_id>.<comp_id>"" - component on selected pipe_id with given comp_id
""* <pipe_id>.*"" - each component on pipeline with pipe_id
""*"" - each component in firmware
<name> must correspond values of uuid entries from ldc file.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",97,24,0
"thesofproject/sof","7650398d01423743073309e93d818fca89413e88","ktrzcinx","2020-08-19 11:25:30","false","logger: Add option to disable firmware compatibility check

It may be needed for situation when user have firmware after
small fixes without updated ldc file or fw_ready file is not
accessible. Option dedicated for advanced users.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",75,27,0
"thesofproject/sof","d50fa6f9201ac7b961797243b75befe91c932f3c","RanderWang","2019-05-08 06:39:03","false","topology: correct widget type for HDA

It should be type of input for capture widgets

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",57,11,0
"thesofproject/sof","2b0249373fd1b351a9c69286dae93501fc40ebd4","xiulipan","2019-01-23 09:28:47","false","scripts: change names for binary in qemu-check

Use back old style name.
Modify the build folder as gcc and xcc prefix added.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",57,8,0
"thesofproject/sof","21b637e16ac7c90ee20ae3c2b6140327f1aa553f","andrula-song","2023-07-13 03:01:30","false","Audio: Volume: Fix the HiFi4 version peak meter update error

Fix the HiFi4 version of volume processing peak meter update
error.

Signed-off-by: Andrula Song <andrula.song@intel.com>",31,61,1
"thesofproject/sof","4d1cbd32c762a93564407ca975d9f0acd2add398","xiulipan","2020-03-27 05:10:08","false","topology: add hda generic kwd pipeline

Add KWD pipeline with kfpm only for HDA generic topology.
DMIC 48K have PCM 6
DMIC 16K have PCM 7

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",65,22,0
"thesofproject/sof","d0cd2e0eaccb35c056ea18ab7deee961ec5c27df","crazoes","2020-04-13 13:44:27","false","scripts: xtensa-build-all.sh: Ignore set -e the right way

Currently, ""set -e"" is being ignored for type command using redirections
and ""A && true"". ""A && true"" is a no-op and a peculiar case where
""set -e"" ignores the exit code of A.

Exit code of the ""type"" command is used in an if statement which is
exactly what the function of ""if"" command is. Also, ""set -e"" ignores
exit codes of commands used in if statements.

Signed-off-by: Shreeya Patel <shreeya.patel23498@gmail.com>",83,22,0
"thesofproject/sof","572a08ea2cfd16c4e48b0e82d2cbf4bcf2799e74","andyross","2022-12-01 23:52:19","false","dma_trace: Add missing initialization check

It's possible to reach dma_trace_on() from IPC handlers based on host
state before DMA trace has been initialized (found this via fuzzing,
so the precise circumstances are a little opaque).  When that happens,
the schedule_task() call ends up putting a delayed work queue item
into the Zephyr queue which has a NULL callback.  This eventually
blows up later when the timeout expires.

Check for initialization state before doing anything.

Signed-off-by: Andy Ross <andyross@google.com>",101,54,1
"thesofproject/sof","880857b3f7d144e8aaa3e01b5a271b028d59b56f","maruthi-machani","2022-11-09 05:34:12","false","dai: support for amd specific virtual dai id

support for amd specific virtual dai

Signed-off-by: MARUTHI MACHANI <maruthi.machani@amd.com>",92,53,1
"thesofproject/sof","605c6662712655adc2ca417b639c1a1523468920","MingJenTai","2022-05-20 06:13:36","false","rtnr: passthrough audio by stream copy

This commit passthrough multi channels audio from microphone using
stream copy outside RTNR, instead of using the bypass function provided
by RTNR.

Signed-off-by: Ming Jen Tai <mingjen_tai@realtek.com>",116,47,1
"thesofproject/sof","8496d585d1cf1ce75a84680de91a9fed92bcf1b6","MingJenTai","2022-08-05 02:42:28","false","Modify periods setting for RTNR capturing pipeline

With the  release of RTNR version 20220728, period for capturing pipeline requires at least 5ms.

Periods setting for 16KHz capturing pipeline is also removed since RTNR is currently running in 48KHz capturing pipeline only.

Signed-off-by: Ming Jen Tai <mingjen_tai@realtek.com>",113,50,1
"thesofproject/sof","01b1de7f833e540d9dc921b543101e5809348537","RanderWang","2022-04-15 02:23:00","false","ipc4: mixer: improve bind support

This issue is found by CI capture test with Linux ipc4 driver.
For a pipeline like module A <-> mixin <-> mixout, mixin is
first bound to mixout then bound to module A in CI test. The
original code assume that module A is first bound to mixin
since windows driver always bind module from data source to
data sink.

This patch adds support for bind sequence in CI test.

Signed-off-by: Rander Wang <rander.wang@intel.com>",116,46,1
"thesofproject/sof","87fd87abb9a881119f49f24d4ca27f0866eb1bbb","RanderWang","2021-11-16 06:00:08","false","ipc4: copier: add get_large_config support

Copier will support llp reading in get_large_config.

Signed-off-by: Rander Wang <rander.wang@intel.com>",127,41,1
"thesofproject/sof","b407a1aab9e40fc060a6b6ec826df9c61512dc8b","bardliao","2023-02-17 01:26:12","false","topology2: follow the same rule as pipeline and route id to assign ALH
index

We use the ""pcm id * 10 + N"" formula where N is from 0 to 9 to assign
pipeline and route id in f0a010052bd0 (""topology2: cavs-sdw: group route
and pipeline index""). Now apply to ALH dai index.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",54,56,1
"thesofproject/sof","227f70103be254c928eb5cb5b78bfc46f09654f4","singalsu","2020-05-13 10:13:29","false","Audio: EQ IIR: Change error trace to information trace

The information about setting EQ to bypass configuration is not an
error. The comp_cl_info() is a suitable trace type to use for it.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",96,23,0
"thesofproject/sof","3538b2e06c926116c1f8e9856da186f31924a94a","marcinszkudlinski","2023-07-28 13:47:44","false","sink_api: add ibs parameter to source structure

Input Buffer Size, the amount of data required for
processing is declared by module in IPC init_instance

This IBS value is kept in module structure, however, there
may be a module that have different IBS per each input.

There's a single source structure per connection to the module,
so it looks like a good place to store IBS there

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",31,62,1
"thesofproject/sof","aa3e72400c26a4195a251dde09e82c88cff20e47","singalsu","2018-06-27 10:48:07","false","SOFT: Add SRC component test scripts

This patch provides tests for sample rate converter (SRC) SOF component.
The tests are executed via the SOF host (x86) version test executable and
the SRC component library.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",5,1,0
"thesofproject/sof","24ee04393822a34be6a3b053bf1ed3c87fc7cfd7","singalsu","2018-06-19 15:14:51","false","DMIC: Rename HW version 2 bitfield to follow specification

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",1,1,0
"thesofproject/sof","b732c4fb130cd4a18c04b98a0265156edb3ee14c","iuliana-prodan","2021-02-01 15:36:34","false","schedule: dma_multi_chan: do not skip tasks for dma_domain scheduler

Add a full_sync attribute to ll_schedule domain.
This is set to true, for a full synchronous dma_domain
scheduler, which is not time dependent.
By default, it is false.

In full_sync case we use the ratio between the task period
and the registrable task period to do the scheduling, not
the task.start time.

We do this because for the DMA_DOMAIN there are no guarantees
for the accuracy of the period of the registrable task
which drives the entire scheduling.

An example is the mixer topology where we have 3 pipelines
for playback scenario:
- 1 pipeline for pcm1.0 (task 0);
- 1 pipeline for pcm1.1 (task 1);
- 1 pipeline for DAI (task 2).
Task 2 is the registrable task and this is always scheduled.
The other tasks (task 0 and task 1) are scheduled based on task->start.

The problem is that, at some point, the DMA transfer from DAI is
finished earlier than task->start for one of the task 0 or task 1
and this is not scheduled anymore.
And, task 2 ends up depleting one of the source buffers,
thus blocking the entire data flow.

Fixes: #3802

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",68,32,0
"thesofproject/sof","f6bc279da6423dc7f5938a0296f5c545d47f6eb9","keqiaozhang","2021-09-13 08:22:43","false","topology1: add a test topology sof-adl-nocodec-ci build support

We plan to test the CI test topology on ADL-P nocodec device, so
add the topology build support in cmake list.

Signed-off-by: Zhang Keqiao <keqiao.zhang@intel.com>",118,39,0
"thesofproject/sof","edda342d6ae810e9549703bbfd4e0f54a7bab7a1","eurofun","2023-05-24 17:09:24","false","topology1: fix sai.m4 clock inversion

A misplaced ) prevented the optional 'inverted'
flag from working as intended.

Signed-off-by: Alexander Boehm <aboehm@eurofunk.com>",55,60,1
"thesofproject/sof","6024a26c90c79df857fea77e561f3207bfb5e356","btian1","2023-05-17 01:53:59","false","copier-host: add new file copier_host.c to copier folder

This new file is used to maintain host related code that used
by copier.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",52,59,1
"thesofproject/sof","98a16b8d3f1ee4a13c1d153577d54527e72f423e","btian1","2023-06-12 13:21:05","false","copier: change free and reset to module interface

Add new function to implement free and reset module interface.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",47,60,1
"thesofproject/sof","650423feb197896c40e6051796bbcaf284ca9ef2","ranj063","2023-04-04 21:51:19","false","topology2: Move the hw_config class definition

Move and rename the hw_config class to
platform/intel/hw_config_cardinal_clk.conf.
This hw_config is specific to Intel SSP DAI that use the cardinal clock
for the mclk frequency.

Ideally, this class should have immutable mclk_frequency and link clock
source. But because the alsatplg compiler expects the name of the hw
config class to be ""hw_config"" without any extensions, it is left as
modifiable for now. Once the topology compiler is modified, this will be
made immutable in a follow up PR.

Also, introduce a new hw_config_simple.conf file that contains the
hw_config definition for the HDA/DMIC/SDW type DAIs with only the ID and
name attributes.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",51,58,1
"thesofproject/sof","351fe7e3efa66e4d468290938eb018459a508029","ranj063","2023-08-31 17:19:58","false","topology2: google-rtc-aec: Add 4ch audio formats

The DMIC capture path should support both 4ch and 2ch audio formats.
Also, since the Google AEC module only support 16-bit input format,
modify the output of the refeence capture DAI accordingly.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",23,63,1
"thesofproject/sof","fdb644317d6f02a9eba650ba6782ba4ab7b67303","abonislawski","2022-07-13 17:00:38","false","trace: fix build with zephyr logging

Add several missing LOG_MODULE_DECLARE()
Fix volume

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",110,49,1
"thesofproject/sof","d1b5ad601475665ffc032f6a69858b65add719c4","ranj063","2022-03-16 17:34:47","false","codec_adapter: no need to init ret

remove init for ret.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",108,45,1
"thesofproject/sof","abc0d2fc6ac01d98cb5ec06a2d6997a20d73fbe4","ranj063","2019-02-14 21:44:44","false","topology: cml: change SSP port num for rt5682

The CML board has the rt5682 connected to SSP0 and the
machine driver defines the dai link for the headset
with the name ""SSP0-codec"" too. So change the topology
file accordingly.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",60,8,0
"thesofproject/sof","06684c930834fadf26a297511517537ab36c1d7e","ranj063","2021-11-02 19:53:38","false","topology2: passthrough-capture: Add all includes

Include all dependencies to be able to build the conf file individually.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",125,41,1
"thesofproject/sof","b0fbf3acfbc7f21eae8ac29ba24383f57c104eb9","tmleman","2022-10-26 13:01:28","false","ace: power: handling d0i3 prevent

This patch adds functions that allow to set/unset prevent on dynamic
power gating.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",93,53,1
"thesofproject/sof","3dd843a46defd5234a517991a7c0049c66233b1d","dianacretu","2020-03-23 07:01:16","false","scripts: qemu: Add qemu check for i.MX8M platform

Enable checks to i.MX8M platform of QEMU now.

Signed-off-by: Diana Cretu <dianacretu2806@gmail.com>",66,22,0
"thesofproject/sof","de7016edd4322e1ca74377f99122f37fe2f002ef","aiChaoSONG","2022-03-02 04:54:19","false","platforms: tgl: renamme tgl_ipc4_overlay.conf

Rename tgl_ipc4_overlay.conf to ipc4_overlay.conf,
because it is under tgl folder.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",112,45,1
"thesofproject/sof","b2177e55856279f3a0f381327c73b61bc6221c5c","softwarecki","2023-03-07 12:40:21","false","elf: Add header guard to elf.h

Added header guard in elf.h file to allow safe include this header by
multiple units.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",56,57,1
"thesofproject/sof","36c0c907698aed6db3b4317ec997eb9efe3d8045","softwarecki","2023-02-22 17:30:59","false","elf: Use the get_file_size function

Simplified retrieval of file size by using the function get_file_size.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",56,57,1
"thesofproject/sof","b141daee34aafb108c474c1eaf946eceb48f5621","bkokoszx","2018-11-09 14:03:18","false","logger: string overflow warning fix

fixes #124

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",38,5,0
"thesofproject/sof","b3391900c457b93ab364d86e0e5daa26cc39345d","kv2019i","2022-08-29 19:39:27","false","audio: copier: fix always-true comparison in copier_comp_trigger

Fix compiler error related to endpoint field:

src/audio/copier/copier.c:662:13: error: the comparison will always
evaluate as 'true' for the address of 'endpoint' will never be
NULL [-Werror=address]

  662 |         if (cd->endpoint) {
      |             ^~

src/include/ipc4/copier.h:325:26: note: 'endpoint' declared here
  325 |         struct comp_dev *endpoint[IPC4_COPIER_MODULE_OUTPUT_PINS_COUNT];

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",112,51,1
"thesofproject/sof","eae1d3a31cde5a485f335d77552a5aff9d91b3cb","bkokoszx","2019-02-27 10:51:27","false","mailbox: deduplication of mailbox headers for cavs

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",69,9,0
"thesofproject/sof","f7809a2ee39b0ee8423fcb050bd98e3ad59ec6ad","bkokoszx","2019-07-25 14:02:59","false","alloc: fix blocks update in alloc_cont_blocks()

Add proper stop condition during block hdr update
in alloc_cont_blocks() function.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",49,14,0
"thesofproject/sof","7ae382ddbbcd47d5be1102550e870f3a11264768","iganakov","2023-04-13 09:12:00","false","ams: add helper functions

Every module which needs AMS for notifications uses the same flow when
configuring itself as a consumer or producer for such notifications.

Add AMS helper functions to avoid code repetition.

Signed-off-by: Ievgen Ganakov <ievgen.ganakov@intel.com>",50,58,1
"thesofproject/sof","ae53aebcff72dde2ea51f04624f3697e4befecb0","bardliao","2020-03-11 07:30:59","false","topology: sof-icl-rt711-rt1308-rt715-hdmi: define NO_AGGREGATION mode

We will create individual PCM for each speaker when NO_AGGREGATION
is defined

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",85,21,0
"thesofproject/sof","80f27b2f7e11f32f4fa86c556293f5eb82a1982f","aborisovich","2023-05-24 18:22:30","false","board: intel_adsp_ace15_mtpm: disabled CONFIG_PM_DEVICE_RUNTIME_EXCLUSIVE

Zephyr turns on by default CONFIG_PM_DEVICE_RUNTIME_EXCLUSIVE option
what causes Devices using Zephyr Device System Power Manager to
be ignored during SoC power transition. Disabled this option so we
can use default Zephyr kernel behavior to shut down Devices.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",55,60,1
"thesofproject/sof","5fa9cb6be4cb0648293fee7fcc2939fec83668d6","apoorvintel","2023-05-04 05:09:56","false","topology1: CMakeLists: add RPLP CRB support for SoundWire

Added RPLP CRB support for SoundWire0 and SoundWire2

Signed-off-by: apoorv <apoorv@intel.com>",54,59,1
"thesofproject/sof","9e4b18d19f3aec198e67962bcd7a92df84fa51e8","plbossart","2021-10-28 16:55:28","false","drivers: Intel: hda-dma: only check DGCS_BUSY with delayed stop

When an older kernel is used, we use the immediate stop. On some
platforms, we see an -EBUSY error that prevents the trigger stop from
working.

This patch adds a check to be 'bug-compatible' with previous releases
and older kernels. An additional fix would be to insert a poll timeout
to make sure the BUSY bit is cleared.

BugLink: https://github.com/thesofproject/sof/issues/4919
Fixes: 7e54f456e ('drivers: Intel: hda-dma: ensure DMA channel is idle after stop')
Suggested-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",127,41,1
"thesofproject/sof","eac223d4b9bc772c96cb935e5fd3c286bba8fa2f","dbaluta","2023-07-10 14:32:12","false","audio: mixer: Set correct number of sources

After commit 867ada28f we only allocate 1 buffer for mixer even if there
could be 2 input sources.

So, set correct number of sources for mixer.

Fixes 867ada28f (""audio: module_adapter: Allocate max number of input/output buffers"")
Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",29,61,1
"thesofproject/sof","1d19cf43eaefb08ea978a846ba83175f28b192c3","dbaluta","2020-10-26 13:30:40","false","drivers: imx: sdma: Set dma channel index

Without this index will always be 0 and we cannot differentiate
between channels for various function calls.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",74,29,0
"thesofproject/sof","c26dfff3bf77c07e9e927e3f23749dc1ac07a641","dbaluta","2021-08-03 07:09:00","false","topology1: imx8ulp: Set min_channels to 1

On i.MX8ULP SAI5 is connected to BT interface that only supports 1
channel.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",110,38,0
"thesofproject/sof","03b1fba732f810ac37a8f3ef65a39402470e442c","johnylin76","2020-10-15 08:37:30","false","sof: drc: More fixed-point approximative functions

Implemented the following fixed-point functions for the approximation of
math calculations in drc_math_generic.c. fpminimax of Sollya is used for
generating a good polynomial approximation of wanted functions.

logf(x)
 - Input is Q6.26: max 32.0
 - Output range ~ (-inf, 3.4657); regulated to Q6.26: (-32.0, 32.0)

linear_to_decibels(x)
 - Input is Q6.26: max 32.0
 - Output range ~ (-inf, 30.1030); regulated to Q11.21: (-1024.0, 1024.0)

asinf(x)
 - Use two-step polynomial approximation among [0, 1] whose pivot point is
   1/sqrt(2)
 - Input is Q2.30: (-2.0, 2.0)
 - Output range: [-1.0, 1.0]; regulated to Q2.30: (-2.0, 2.0)

powf(x, y)
 - Input x is Q6.26: (-32.0, 32.0); y is Q2.30: (-2.0, 2.0)
 - Output is Q12.20: max 2048.0

Signed-off-by: Pin-chih Lin <johnylin@google.com>",72,28,0
"thesofproject/sof","3cbc289c0c5e26c3b783145d2396ab0f9e452123","dragosht","2019-10-31 13:06:58","false","tools: README: Drop bash syntax for usage snippets

Signed-off-by: Dragos Tarcatu <dragos_tarcatu@mentor.com>",55,17,0
"thesofproject/sof","a4606425faf0e5540ff18fad09d5560b6252e63f","ujfalusi","2021-11-04 11:05:26","false","tone: Validate the type of data in cdata before accessing to it

The data via cdata->chanv is only valid if:
cdata->type == SOF_CTRL_TYPE_VALUE_CHAN_*

Likewise, the data is only valid via cdata->compv if:
cdata->type == SOF_CTRL_TYPE_VALUE_COMP_*

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",125,41,1
"thesofproject/sof","a675edf8e7eacff48699d3c4daec99963f19f868","aborisovich","2023-05-04 13:02:17","false","LMDK: fixed rimage and key paths and discovery

Path to rimage and private key had been failing to be used while
provided in form of relative path using dots.
Changed how rimage is discovered in the scripts:
* rimage is searched for using find_program with paths and hints provided
* changed RIMAGE_COMMAND to RIMAGE_INSTALL_DIR so end-user may specify
directory where rimage executable is placed. It will be used by
find_program.
* If RIMAGE_INSTALL_DIR is not provided, find_program will try to
search for rimage in the directory where SOF project installs it
(west_dir/build-rimage).
* Updated README.md with instructions on how to build:
  - simplified configure and build commands
  - updated explanations on how to use RIMAGE_INSTALL_DIR
  - added information on how to use toolchain file
* private key path was parsed incorrectly when provided windows path
style using backslashes. It was passed to rimage as is resulting in the
invalid path as the last slash was made by rimage as forward slash.
Added path normalization what fixed the problem.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",53,59,1
"thesofproject/sof","f5b7dea1105abbb0145fb11d5461b337e3c6c008","kv2019i","2023-01-31 11:55:31","false","topology2: bt-generic: allow override PCM name

Do not hardcode PCM name to ""Port2"".

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",51,56,1
"thesofproject/sof","2ebf92f2793a85750b639136c052c1b9829ffc32","marc-hb","2022-01-14 06:05:56","false","trace: new macro to de-duplicate the common part of the FW ABI banner

There was no need to copy/paste; fixes commit02c21c25ba33 (""dma-trace.c:
use new mtrace_printf() to demote FW ABI banner to INFO"")

Zero observable change.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,43,1
"thesofproject/sof","bdae0ee127fb8f1cdc0ef0053e131b5bcdbf4c79","marc-hb","2021-07-12 05:09:34","false","xtensa-build-zephyr: run smex and install to new staging area

Ready to be transferred to the remote system. Sample output:

build-sof-staging
├── sof
│   ├── community
│   │   ├── sof-apl.ri
│   │   └── sof-tgl-h.ri
│   ├── sof-apl.ldc
│   └── sof-tgl-h.ldc
└── tools
    └── sof-logger

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",87,37,0
"thesofproject/sof","9a3a518644b601a07da1c261488737d71914016c","marc-hb","2022-10-19 21:28:27","false","xtensa-build-zephyr.py: pass -j option to west -> ninja

This is especially useful when compiling each C file requires a
network round-trip to a license server

Also stop overriding the ninja default when building rimage.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",96,53,1
"thesofproject/sof","a01016f945e67900313c85ca3ba16dc6feb84e78","lgirdwood","2019-11-11 13:50:00","true","Initial commit",54,17,0
"thesofproject/sof","e76540d88325aaac18d4ca6418c9a7ad2fff5c03","lyakh","2021-05-18 12:11:21","false","cavs: zephyr: fix power_down

power_down is an assembly function that powers down memory banks.
Before that it locks the execution code and data into cache for
obvious reasons. However, for this cacheable address aliases have to
be used. Under Zephyr this code executes in a thread with a
dynamically allocated stack, which currently means, that it uses
uncached memory aliases. This leads to a memory access exception.
This patch fixes it by using a cached alias of the data.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",87,35,0
"thesofproject/sof","e1e5fd0e7be2663068195681a080ad3b92b16c26","lyakh","2023-03-03 15:44:49","false","pipeline: handle failed latency calculation

copier_comp_trigger() calls pipeline_get_dai_comp_latency() for
playback pipelines to obtain the pipeline DAI copier, if there is
one, and to calculate the pipeline latency. The latency is
calculated using the .get_total_data_processed() component
operation, but that operation is only available for DAI, host and
copier components. SOF pipelines often have other components at one
of the pipeline ends, so the latency calculation fails. However, that
shouldn't prevent pipeline_get_dai_comp_latency() from finding the
DAI component.
This fixes the notorious ""failed to find dai comp or sink pipeline
not running."" error message.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",59,57,1
"thesofproject/sof","70dc03dc65cf7f7c90f4a1201da21e1f0d8a9738","lyakh","2022-04-06 12:34:52","false","buffer: add cached consume and produce update versions

comp_update_buffer_produce() and comp_update_buffer_consume() acquire
and release buffers internally. We need versions of those functions,
that take already acquired cached buffer objects as arguments, we
will switch over to them completely gradually. This patch adds such
functions.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",111,46,1
"thesofproject/sof","56b8776c2ace20cd0881c820ccecca810c80be12","tlauda","2019-05-20 14:45:36","false","memcpy: replace all occurrences with memcpy_s

Replaces all occurrences of memcpy with memcpy_s.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",59,11,0
"thesofproject/sof","b46af7b3db6ece1933e0ee71be0d8a727ea9ce11","tlauda","2018-10-03 13:58:29","false","schedule: implement timer driven scheduling

Implements timer driven scheduling by processing
DW DMA data in tasks added to work queue instead
of registering for DW DMA interrupt. Data processing
by default will happen every 1 ms.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",34,4,0
"thesofproject/sof","375a46d176ca13b6c1c527485540bea63144767d","lyakh","2020-11-03 12:42:38","false","zephyr: only build trace support if enabled in the configuration

Files under src/trace should only be built if CONFIG_TRACE is selected
in configuration.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",75,29,0
"thesofproject/sof","87b90c79cde2273d7320c01809824e62ce024a17","lyakh","2019-01-15 09:37:33","false","sue: add SPI to DMA supported devices

On Sue Creek the DW SSI / SPI controller can use DMA, add it to the
DMA controller #0.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",54,7,0
"thesofproject/sof","e50613385e745931bbd69e646ba999ad2e7646ea","lyakh","2021-12-14 14:20:47","false","zephyr: ll-scheduler: implement ordered scheduling

Add .schedule_task_before and .schedule_task_after hooks.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",112,42,1
"thesofproject/sof","49f019fe1a36783de7d10b8fdcf5ff728a195704","lyakh","2022-03-07 13:14:07","false","dma: make DMA platform data static

Each platform defines a list of DMA controllers and related objects
in their lib/dma.c files. All of them are needlessly defined as
global. Make them all static.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",114,45,1
"thesofproject/sof","92510c938e3107d184d7a7cd0578b42b090cbf9a","lyakh","2021-11-04 11:21:47","false","ll_schedule: don't rely on schedule_task_cancel()

Currently there are two ways to stop scheduling an LL task: by
cancelling it from outside and by returning SOF_TASK_STATE_COMPLETED
from the task .run() function. In both cases the task will stop being
rescheduled, but in the latter case it will stay on the list of the
tasks, waiting to be cancelled. This means that even for those tasks
schedule_task_cancel() still has to be called. This is however
inconvenient because in some cases there is no suitable context to
cancel that task from. E.g. this will be the case with pipeline tasks
when we switch them over to handling STOP and PAUSE commands from the
task itself.

This patch restores the original behaviour when tasks are removed
from the list after completion, without waiting for cancellation.
For this we extend the calling convention of domain_unregister() to
be used with the task parameter equal to NULL when freeing the
scheduler. DMA domains preserve their current behaviour: they ignore
calls with task == NULL. The timer domain however now uses this call
to release the timer interrupt.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",125,41,1
"thesofproject/sof","6c94904f3d130bae67f4f4897a4a7e2a9196c4b5","lyakh","2022-04-13 10:19:57","false","smart_amp: fix buffer acquisition

Instead of acquiring and releasing buffers locally multiple times,
do that once for .copy(), .trigger() and .prepare() methods.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",117,46,1
"thesofproject/sof","ad7de3f572a37ad037482b456012e74168292da7","lyakh","2020-12-31 11:31:40","false","alloc: reduce the scope of a variable

temp_bytes is only used if CONFIG_DEBUG_BLOCK_FREE is
defined. Limit its scope to only such configurations.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",72,31,0
"thesofproject/sof","bdc83167689228ad7741840468fc34a37a48f030","tobonex","2023-09-15 18:06:12","false","cadence: remove buffer_acquire from cadence.c

remove buffer ops from cadence.c

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","32fa4ed037f4252e9e32f9235f821ad52cd436fe","singalsu","2023-01-19 17:49:23","false","Audio: EQ FIR: Remove unused FIR processing functions

The unused single frame processing functions can be removed
to save code size.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",55,56,1
"thesofproject/sof","0d0e5b73d28026edcb673644e78ecdcc8837ce06","tlauda","2020-03-11 12:09:58","false","idc: fix payload getter

Fixes payload getter to use passed core instead of current core.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",81,21,0
"thesofproject/sof","d189651d28dbc3eef9b3afba7e1c9a3e902c1db4","lgirdwood","2018-11-29 08:36:12","true","Merge pull request #646 from tlauda/topic/fix-257

rimage: fix possible buffer overflow",41,6,0
"thesofproject/sof","bf1e3b7f5b0704327b85ca25c99c9961fd50ed5a","MingJenTai","2021-10-18 02:28:25","false","Support both 48kHz and 16kHz recording

Add 48kHz recording support to RTNR
Signed-off-by: Ming Jen Tai <mingjen_tai@realtek.com>",122,41,1
"thesofproject/sof","35e5b23f7fdf06d04b123245cadffb7409ee4a09","jairaj-arava","2020-03-13 20:26:00","false","topology: add TGL tplg for Max98373 amp and ALC5682 Headset codec

This patch adds TGL topology for the DUT which has the
following audio configuration:
	Max98373 speaker (I2S), ALC5682 headset codec (I2S),
	DMIC, 4 HDMI devices.

Signed-off-by: Jairaj Arava <jairaj.arava@intel.com>
Signed-off-by: Sathyanarayana Nujella <sathyanarayana.nujella@intel.com>",81,21,0
"thesofproject/sof","089ddcc2b2c48d4782f3a521e31302f92a6a2d0b","dabekjakub","2019-10-17 10:34:27","false","memory: fix DEBUG_HEAP build

Fixed issue with DEBUG_HEAP configuration not building correctly.

Signed-off-by: Jakub Dabek <jakub.dabek@intel.com>",64,16,0
"thesofproject/sof","f69f4a839ffd773c060f046a14e71d69c8c61497","tlauda","2019-09-16 15:29:48","false","host: remove not needed set of DMA_CB_STATUS_END

Next has this status set by default, so there is no need
to set it explicitly.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",62,15,0
"thesofproject/sof","29de310834688c7dd6442581f1f11529233fce72","tlauda","2020-01-15 13:19:25","false","ipc: merge ipc_shared_context

Removes shared_ctx from ipc structure and add its members
directly to struct ipc. From now on ipc struct needs to
be shared to support SMP. It's done in order to eliminate
possible wrong pointer to shared_ctx, since it was a part
of cached data.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",76,19,0
"thesofproject/sof","73f4f86d7336f6fb8b2bf19569f08640e08e1eab","bardliao","2022-06-30 03:36:03","false","topology2: remove pipeline format parameter

The ""format"" parameter is never used by IPC4. And it should not be
mandatory.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",110,49,1
"thesofproject/sof","a33b9a208a24549e85bd3a9141579a560a31870a","RanderWang","2020-03-18 08:45:34","false","dai: dma_buffer: fix pop noise issue when start playback

The pop noise is generated by invalid data in dma buffer.
Since all buffers are cleared by pipeline_comp_prepare except
dma buffer, so clear it to zero to avoid pop noise.

Signed-off-by: randerwang <rander.wang@linux.intel.com>",75,21,0
"thesofproject/sof","55decbf67af4cfe5dc3bbf0d3b5001e72d8e940b","RanderWang","2021-10-25 03:13:26","false","ipc4: refine pipeline state setting

Add ipc4 pipeline state machine description.

Signed-off-by: Rander Wang <rander.wang@intel.com>",125,41,1
"thesofproject/sof","3362f9b3395b9d9aa09aab0c5730109ef786f0d2","libinyang","2018-11-27 01:58:06","false","host: release dw-dma channel when pcm free

On byt-like platform, sof should release dw-dma channel which is got
in set_params(). And in host_free(), it should not release any channel
as host doesn't get any channel in host_new()

Signed-off-by: Libin Yang <libin.yang@intel.com>",44,6,0
"thesofproject/sof","f76d9828aa9b8fa5888ba10f0f93a07492826f92","marcinszkudlinski","2023-10-31 13:34:41","false","idc: bugfix - exit code was not passed to the caller

When executing a blocking operation on a remote core
it is expected that an exit code of the operation is
passed to the caller as if the operation was on the
same core

In fact, a result of message passing was returned,
so in most cases result was success, no matter what
operation result was

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",4,65,1
"thesofproject/sof","23c7e4739c301cc0dbc625aaf3f8e86042891565","singalsu","2021-08-25 12:24:04","false","Topology: Add development example of demux and EQ band-split pipeline

This patch adds topologies sof-apl-nocodec-demux-eq-2ch4ch.tplg and
sof-apl-nocodec-demux-eq-4ch4ch.tplg. Playback of 2ch creates 4ch
output in format L_lo, L_hi, R_lo, and R_hi. An example band-split
at 2 kHz is configured for EQ processing. The low band contains
an additional 80 Hz high-pass.

The pipeline was tested in UP2 device. The nocodec topology enables
an useful SPP loopback mode. The capture PCM is connected to DAI
loopback so this pipeline can be tested with simultaneous 2ch aplay
and 4ch arecord.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",122,39,0
"thesofproject/sof","cac593f890336b30740895a00c07160c7684a772","singalsu","2018-09-04 08:22:59","false","EQ IIR: Harmonize trace texts with other components

The trace codes those start with an e get also highlighted with red
color to mark them as errors visually so better to avoid that since
these events are for normal operation.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",30,3,0
"thesofproject/sof","51b64f460a3720805094cd2d3c2c76dedd49f0db","singalsu","2020-12-10 13:44:43","false","Tools: Tune: Add variable initialize to EQ blobs plotter

This fix adds initialization and declaration of variable f_single
to avoid a previously overlooked error when accessing it in the
end of script. It produces the plot but with a warning print.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",74,30,0
"thesofproject/sof","cc6c76f1de30cf2d63682e7ad132c62ba7d0bf22","singalsu","2018-11-29 16:56:00","false","Tools: Tune: Update EQ tools for new user ABI plus other cleanup

This patch adds into filter tools retrieving of ABI version from a
single function (a quick solution) and updates all configuration
data tools to apply the user ABI header.

The confusing platform_max_channels struct field is renamed to
channels_in_config (the EQ channel map) that creates many updates. The
EQ response plot title is fixed.

Finally new functions to decode IIR and FIR settings blobs is added.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",40,6,0
"thesofproject/sof","a48ceddc82b6dc2cfd64a622f5c32fc80293692d","lgirdwood","2018-07-09 22:40:53","true","Merge pull request #67 from jajanusz/extraflags

autotools: replace user variables with automake variables",13,1,0
"thesofproject/sof","eab6a6d8f17c9364b9b3dfab541b4eefab7baca7","lgirdwood","2018-08-23 13:12:16","true","Merge pull request #250 from tlauda/topic/ll_runtime_heap

dw-dma: allocate lli on runtime heap",19,3,0
"thesofproject/sof","66bd59b0801b8d9650c339a424b0ec4a373b341c","lgirdwood","2018-10-30 19:27:52","true","Merge pull request #518 from thesofproject/topic/lrg/allocator-fixes

allocator: Improve rfree() debug and trace",27,5,0
"thesofproject/sof","873185d14e50fb3f9368bd4fea49ce80c0f7fbae","lgirdwood","2018-08-24 10:50:52","true","Merge pull request #256 from dabekjakub/pipeline_complete

tests: pipeline_complete",21,3,0
"thesofproject/sof","e3e4442c34b96e4d0244ed1198bb725ff307ef32","lgirdwood","2018-11-13 14:58:42","true","Merge pull request #566 from libinyang/coverity_error_handling

host: fix coverity check issue of error handling",38,5,0
"thesofproject/sof","63b0d80562efc5e816b03305caded0f083a7803b","fredoh9","2022-08-10 19:21:33","false",".github: add rmb to gcc build only platform

SOF Docker image supports AMD/Rembrandt gcc toolchain from tag 20220809,
which is latest as of now.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",113,50,1
"thesofproject/sof","05de1a6c4faf524bcd5119ed685bf632c2d12cc2","ujfalusi","2023-08-17 11:52:35","false","lib_manager: Fix compilation if MM_DRV is not enabled

The module allocate/free uses APIs from MM_DRV but it does not declare
dependency on it.
Make the code compile in the case when MM_DRV is not selected by only
providing a reduced allocate/free functions with a print only.

Use a local define (PAGE_SZ) to store the page size to be used in the
library manager code and in case of !MM_DRV set it to a default 4096 which
is also used by the rimage when creating the manifest for the libraries.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",25,63,1
"thesofproject/sof","58ce6e68608fdbec49a9835dfb8b76e0fa848187","ujfalusi","2022-02-22 10:36:23","false","dma-trace: Preserve logs while dtrace is disabled

When the dma-trace is enabled (or re-enabled) the DMA channel is
re-initialized, configured.
The DMA will start reading data from the local buffer from the start (!!)
it can not be configured to start reading from the point it is left off.

Because of this, if the dtrace is disabled and re-enabled, the DMA will
copy old log entries starting from the beginning of the local buffer.

To be able to preserve the logs while the dtrace is disable we need to
reset both read and write pointers on the local buffer and when the dtrace
is again enabled we can transfer the logs from this point, without
misaligned or missed logs.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",105,45,1
"thesofproject/sof","6137beed1ecf922dfe93d985a6624ac8c355b7f6","lgirdwood","2018-09-11 12:42:11","true","Merge pull request #350 from jajanusz/gcc-optional-implicit-fallthrough

autoconf: optional implicit-fallthrough",43,3,0
"thesofproject/sof","b5abf6c8f3e4035515e73501f741e3601694d37d","marc-hb","2022-10-17 23:49:33","false","xtensa-build-zephyr: disable pylint bad-whitespace, module-doc, global

Also re-organize the header.

Absolutely zero functional change.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",101,53,1
"thesofproject/sof","75f96956e05e8fe3da305e22f5b27d5bd5e5d1c5","marc-hb","2020-09-23 04:57:25","false","elf.c: check ELF32-LE magic number instead of crashing

Passing a 64 bits ELF file by accident (for instance: '/usr/bin/openssl'
while messing up the command line options) caused an interesting cascade
of errors and memory corruption which are all caught in this commit.

This doesn't make rimage fuzz-proof far from it; only fool-proof which
is still useful.

In passing add some quotes so the error message when failing to find the
SHT_NULL section with an empty name is a little bit more readable.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",67,28,0
"thesofproject/sof","168de3924fe035cf37ac357eea4f5abcd24403fb","RanderWang","2021-09-03 05:11:42","false","ipc4: dai: fix ssp loop-back issue when mixer is enabled

DMA buffer size is in fixed format of 32bit in IPC4 case.

Signed-off-by: Rander Wang <rander.wang@intel.com>",119,39,0
"thesofproject/sof","e7e29b61e22107d201afe32410253fa2ddf500b0","RanderWang","2023-01-12 13:24:07","false","ipc4: increase max pipeline count to 32

Now each stream is built with at least two pipelines and this can't
support more than 8 streams, 6 streams in normal. This results to CI
test failure since it will tests all streams although current topology
is simple.

Now increase it to 32 for future enhancement.

Signed-off-by: Rander Wang <rander.wang@intel.com>",55,55,1
"thesofproject/sof","99b4bdffd279a6f9f62c8300b129cbdfd67b175d","tinghan-shen","2022-02-07 11:42:12","false","drivers: mediatek: interrupt: fix build error of spinlock API

Fix the build error by using the new SOF spinlock API.

Signed-off-by: Tinghan Shen <tinghan.shen@mediatek.com>",106,44,1
"thesofproject/sof","528a973fe69174f9d474077f3a1f03a0dd2b4160","ranj063","2023-08-04 23:24:17","false","tplg_parser: process: Update the ipc4 builder

Add support for parsing the effect type widget in IPC4 topologies.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",29,62,1
"thesofproject/sof","846f49eb114f144a48a80a3c25ff2373ff560566","mrajwa","2019-10-30 14:59:25","false","kpb: check if draining speed should be controlled

This patch checks if draining should be controlled
in terms of speed. Such condition may be necessary
if host buffer is smaller than KPB's history buffer.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",59,17,0
"thesofproject/sof","abaed3ee3afb6cf65a5d0a767e6152a7aff54fad","lgirdwood","2018-08-01 14:57:55","true","Merge pull request #176 from zhigang-wu/topic/fw-panic

Revert ""dai: ignore data on capture stop""",19,2,0
"thesofproject/sof","444effac9ccb278bb987d497d0a6f37e93ede8fb","mrajwa","2019-07-26 12:08:18","false","kpb: pass component device in events

This patch passes comp device pointer to buffering
and draining function as this pointer is needed to
finish reset requests.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,14,0
"thesofproject/sof","58acbefc8ed704c9b6a93877b6986c7f4d3cd904","dcpleung","2020-03-25 17:51:27","false","Remove autotools files

CMake is to be used instead of autotools. So remove the autotools
files.

This revert commit f6bf4b0d72d899861c34e7d08981ec37f5421986 and
commit 0d33e87433865cdc84d249b5cb6633b24cf6ecfb

Signed-off-by: Daniel Leung <danielcp@gmail.com>",65,22,0
"thesofproject/sof","071ff05835588a27cc7a57fe2682813c3539d883","plbossart","2021-09-28 17:18:38","false","ipc4: dai: fix return values

src/ipc/ipc4/dai.c:142:10: style: Variable 'ret' is assigned a value
that is never used. [unreadVariable]

 int ret = 0;
         ^

The init is not necessary, and in addition there's a missing return
when memcpy_s fails.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",122,40,0
"thesofproject/sof","864cc7ef4d4b4a879de157155949f75434837bfd","zhuyingjiang","2018-11-08 10:30:03","false","change the 1.8 and 1.5 header defines

add comments and change the 1.5 1.8 header defines

Signed-off-by: Zhu Yingjiang <yingjiang.zhu@linux.intel.com>",42,5,0
"thesofproject/sof","7322e29f8e23df1f59f58df3bea7c44495ef7d4b","tlauda","2018-09-04 09:11:35","false","interrupt: mask child interrupt immediately

Masks child interrupt as soon as it's disabled.
We shouldn't wait for the parent to have no children.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",30,3,0
"thesofproject/sof","b20191b362a6d14a44eead247ae677edd90ff6dd","tlauda","2020-03-16 15:56:22","false","pipeline: implement proper position offset retrieval

Implements proper position offset retrieval in order to
update current stream position in mailbox. Previous one
was using pipeline_id in calculations, which has been
failing for bigger values. Lack of error handling has
also been a problem. This new solution uses predefined
list of available offsets and picks the first free from
the list. This way it will fail only if we exceed the
maximum number of simultaneously supported offsets.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",79,21,0
"thesofproject/sof","0df02ca8fb2ec8d13b899ee4a683b1305d3e872a","tlauda","2018-08-27 10:13:35","false","ipc: add ipc_shared_context

Implements ipc_shared_context struct, which allocates
notification related fields in uncached memory. This
way slave cores can add to queue stream notifications.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",22,3,0
"thesofproject/sof","17f2de5599615bc324095c8066d689869d4529d3","tlauda","2019-09-24 10:18:28","false","arch: xtensa: fix stack dump for exceptions in irq handlers

Fixes stack dump procedure for exceptions happening in interrupt
handlers. Stack base and size haven't been set to the interrupt's
one in current task context, so when exception happened during
interrupt processing we've got SOF_IPC_PANIC_STACK cause instead
of the real one.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",65,16,0
"thesofproject/sof","b593e33af6b9a594616a0ad0578da51c1939c13a","saisurya-ch","2023-08-18 10:58:18","false","scripts: add support for ACP_6_3 platform

Add support for ACP_6_3 in build scripts.

Signed-off-by: SaiSurya Ch <saisurya.chakkaveeravenkatanaga@amd.com>",24,63,1
"thesofproject/sof","9d453321f892b7ec3f0c74d3382eaa4e674a6e6a","mengdonglin","2022-05-04 10:25:47","false","Write firmware file micro version to manifest for cAVS platforms

SOF CMake can extract FW file version from latest git tag and defines
SOF_MAJOR, SOF_MINOR and SOF_MICRO for 3 version fields. But rimage only
gets major and minor version from SOF CMake and writes them into the
standard firmware manifest header of cAVS platforms.

This patch make rimage also get the micro version from SOF CMake, and
write it to the unused hotfix_version field of manifest header.

This update will enable sof_ri_info.py to dump entire file version from
a FW binary for cAVS platforms. So we can check if a FW release candidate
is built from the correct git tag.

Signed-off-by: mengdonglin <mengdong.lin@intel.com>

update",115,47,1
"thesofproject/sof","5cd351c82d69f9030aa9bcfde549e01af413726f","ktrzcinx","2020-06-30 11:44:04","false","cpu: Export mask with enabled cores

Core enable/disable is related with power management and maintenance
of clock trees, so such an mask should be possible to read.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",72,25,0
"thesofproject/sof","9b15b2f52e1bc58b66b34c028826dda47d8db19f","andrula-song","2022-05-31 06:31:37","false","Audio: Dcblock: Optimize dcblock read/write frags

Optimize the read/write frags of dcblock processingg functions.
By using audio_stream_bytes_without_wrap, this optimization can
decrease about 14% MCPS.

Signed-off-by: Andrula Song <xiaoyuan.song@intel.com>",113,48,1
"thesofproject/sof","54ab3c3e86023182017b1a98eb1ce435755fb577","andrula-song","2022-07-25 02:02:43","false","Audio: copier: Fix the potential risk of memory overrun

Fix the memory overrun risk of odd samples to be processed.
Since the 2-way xtensa instruction would always process 2
samples and there would be risk of memory overrun at the
boundary of buffer.

Signed-off-by: Andrula Song <xiaoyuan.song@intel.com>",112,50,1
"thesofproject/sof","b0bb5a33c8ae1f8c31a267b265975828bc05d638","xiulipan","2019-09-19 09:27:46","false","scripts: qemu: fix qemu check for BDW and HSW

The qemu for BDW and HSW removed shm mbox and moved it into dram.
Change the scripts to the new version.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",61,16,0
"thesofproject/sof","6d9ce240e25ac8ee6a7cc5aeb2aa0ab34cd89bc6","cujomalainey","2021-02-19 22:39:56","false","trace: suppress cppcheck comparison error

Cppcheck check doesn't understand the relationship between trace section
start and end so it is giving a false positive because it thinks they
are two separate objects, not two pointers to the same region.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",74,33,0
"thesofproject/sof","cdb115f58e38d74efceb6f82ef337ddfa8d0db70","cujomalainey","2023-07-14 00:11:33","false","audio: rtnr: fix function arg attributes

constify RO params

Fixes: 10f6dd0d7b (""module-adapter: add a constant data pointer"")
Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",32,61,1
"thesofproject/sof","a281224e152145572dad1047a71b41ab7a3dbe91","btian1","2023-03-13 06:59:38","false","dai-zephyr/dai-legacy: Expose dai_zephyr_reset()

Expose dai_zephyr_reset() and use in the copier device for the single
endpoint case in preparation for removing the creation of DAI component.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",55,57,1
"thesofproject/sof","237f5bcb808e634a6cac691432e4982c4b277b2c","mrajwa","2019-02-12 20:57:27","false","GDB: move Xtensa specific stuff into arch/xtensa/gdb/*

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",60,8,0
"thesofproject/sof","2edea177a567989e93dfa29cb32d1da2bce5f721","btian1","2023-02-17 02:21:33","false","copier: change DMA callback register from host to copier

Current host dma call back register on host device,
With this optimization, move this call back function from host
to copier device, create a new copier_dma_cb for copier usage.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",54,56,1
"thesofproject/sof","066e7d70f45a5aa700043e628fddac686d0af412","btian1","2023-03-13 13:45:17","false","dai-zephyr/dai-legacy: Expose dai_zephyr_trigger()

Expose and use the function in the single endpoint DAI case in the
copier device in preparation to remove the creation of DAI component.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",55,57,1
"thesofproject/sof","a3d9b029be9cddf1952a643dac5b5e348e97ccd4","lyakh","2022-02-03 11:48:39","false","kpb: use a mutex under Zephyr

KPB is using a lock to protect its buffers. That lock is taken in two
contexts: in the KPB draining task and in the pipeline task, that it
notifying KPB to drain buffers. Under Zephyr both these contexts
are running in thread context. This allows us to use a mutex under
Zephyr for this lock.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",105,44,1
"thesofproject/sof","d1d3cfdeaf3618d3685420571415e858aa680ea0","lyakh","2023-01-24 14:25:13","false","tone: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register tone with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","27865524789b53b41e7c1df449c5956c8b7089e5","keyonjie","2019-04-24 06:38:27","false","abi: ipc: topology: align header definition with driver

No abi bump is needed, as driver already run with this header for weeks,
here it is only to fix the gap b/w FW and driver.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",50,11,0
"thesofproject/sof","a2ce9d7f38f43bd99ff5807821a8b7adcb1c7adc","lyakh","2020-12-21 16:06:20","false","tgl: fix a compilation warning

lp_sram_unpack() is currently only built for Tigerlake targets, it
contains a wrong type cast from ""uintptr_t *"" to ""uint32_t *"" and a
superfluous cast from ""uint32_t"" to itself. Fix both.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",72,31,0
"thesofproject/sof","e5131e66bf409d1b6d5dd0a3a7e818326bcd5a1d","lyakh","2022-06-14 10:01:45","false","audio-stream: add __sparse_cache annotation to two more functions

Two new functions audio_stream_avail_frames_aligned() and
audio_stream_init_alignment_constants() should also use
__sparse_cache for struct audio_stream pointers.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",118,48,1
"thesofproject/sof","53c6bac4b8b1a00a368c5399a7553855ca6d7aef","lyakh","2023-03-03 16:05:44","false","host: fix processed data reporting

In component's .get_total_data_processed() method the ""input""
parameter means ""calculate the direction where I am input."" I.e. if
it's true, the method should return processed data on its output, and
if false - on its input. Since the host has only one direction, it
should only return data when the direction matches, i.e. when input
== true for playback and false for capture. The current
implementation has that check inverted. Fix both Zephyr and legacy
versions.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",59,57,1
"thesofproject/sof","afc39d10a5ca0dbd81e90a3fb0c1206815fab847","kuanhsuncheng","2021-08-27 08:28:24","false","topology1: add mt8195.m4

Add mt8195 pipelines and components

Signed-off-by: YC Hung <yc.hung@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",119,39,0
"thesofproject/sof","7eda2d509e29a2912ceac20bb75d290dead4fe47","kuanhsuncheng","2021-08-27 08:46:48","false","topology1: add sof-mt8195-mt6359-rt1019-rt5682 topology

Add sof-mt8195-mt6359-rt1019-rt5682 topology

Signed-off-by: YC Hung <yc.hung@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",119,39,0
"thesofproject/sof","0485e5dbadeab60509d76994374ddaddd49d3a41","ranj063","2022-01-07 23:51:08","false","codec_adapter: rename struct codec_param to module_param

Rename codec_param to module_params. No functional change.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","b5ea5da52b6ec99222296dbc89e38c4c213b3ef1","abonislawski","2019-04-04 14:23:31","false","coredump: add stack ptr + rewind_frames offset to plat header

+ coredump-reader changes to use new variable
+ moved dump_stack before arch_dump_regs in panic

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",51,10,0
"thesofproject/sof","7266a73cbfb6fddb3d303336dd5e68963ddb4256","ranj063","2023-09-19 19:42:21","false","tplg_parser: topology: Introduce new structures and update existing ones for IPC4

Update the struct tplg_comp_info to add some new fields needed for
parsing module information for IPC4. Also, introduce a couple of new
structures to save the pipeline info and fix the path to the peak_volum
header.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",20,64,1
"thesofproject/sof","fc501b1cb020128bec34d53f5c09f77a6369146d","makarukp","2023-01-25 08:56:58","false","hda: chain transition states fix prepare

Rearrange functions order.

Signed-off-by: Piotr Makaruk <piotr.makaruk@intel.com>",53,56,1
"thesofproject/sof","ef8b2d6ddf4d776676cfe6b055a9b9bb8a4ad14f","abonislawski","2019-03-05 12:05:30","false","rimage: make a ""Module reading"" view similar to ""Module writing"" view

Size column in both cases instread of Bytes and Size
Hex view in both cases instead of Dec and Hex

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",66,9,0
"thesofproject/sof","f0efa204211dd89626dfe750b08d5154e3c64752","ranj063","2022-01-11 00:11:45","false","module_interface: Change the signature of reset API

As part of the 3rd part module API changes, change the signature of the
reset op in the module interface API to pass the pointer to struct
processing_module instead of comp_dev.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","b66e79dc3d458c1ab4059deb67cdff186efa0f72","gmarull","2023-09-05 08:27:24","false","zephyr: lib: alloc: s/device.h/init.h

Module is using Zephyr SYS_INIT API, defined in init.h, not device.h.
Code relied on indirect includes.

Signed-off-by: Gerard Marull-Paretas <gerard.marull@nordicsemi.no>",23,63,1
"thesofproject/sof","5340225a7c8b93cfdccb2f57fefce1cf3a1fa6fa","yongzhi1","2019-04-10 03:14:27","false","topology: Add JSL da7219+max98373 support

Add topology support for max98373 and da7219
codec for JasperLake platform.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",48,10,0
"thesofproject/sof","99195d2ee6a7eeb926b6dd75be9a7ac23d6859fa","softwarecki","2023-03-29 15:00:36","false","rimage: manifest: Rename struct module to manifest_module

Changing the name of the structure type is a prelude to separating
information about the elf file from the information used during creation
of a manifest.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",58,58,1
"thesofproject/sof","581cfdf3cc37eced6e19e66c0d2daa6bd979ecdd","softwarecki","2023-10-26 13:06:14","false","lmdk: Enable linking with standard libraries

Changed linker options to enable linking with libgcc and libc. This change
is required to allow use compiler builtins functions (like __divdi3) and
dynamic memory allocation functions.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",7,65,1
"thesofproject/sof","2fb2d8cb5b032b458ea9496d8995c059793c5b76","softwarecki","2022-05-12 10:24:18","false","ipc4: dai: host: Add support for setting DMA buffer size

The gateway configuration structure in ipc4 can specify the size of a dma
buffer, what a interface should use. This patch adds support for it in dai
and host interfaces.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",111,47,1
"thesofproject/sof","51f2b1fe8ea68e8baa4d5a03622e1e048af899c8","plbossart","2022-03-16 01:43:15","false","topology2: cavs: cavs-mixin-mixout-hda: use macro for DAI name

The copier 'stream_name' and dai 'name' need to match, use macro to
enforce consistency.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",107,45,1
"thesofproject/sof","c1f0f7068eab8667b0731012bf7d7c25f1cf02be","lrgirdwo","2021-06-24 12:26:01","false","pipeline: add heap trace to pipeline_new()

Balance the heap status with the existing pipeline_free() heap debug.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",74,37,0
"thesofproject/sof","b1d88a88455ce2a623ecc4bada772cb257611b0d","plbossart","2021-09-28 17:27:32","false","amd: renoir: add error check

cppcheck warning:

Checking src/platform/amd/renoir/platform.c ...
src/platform/amd/renoir/platform.c:97:6: style: Variable 'ret' is
reassigned a value before the old one has been
used. [redundantAssignment]
 ret = dai_init(sof);
     ^
src/platform/amd/renoir/platform.c:89:6: note: ret is assigned
 ret = acp_dma_init(sof);
     ^
src/platform/amd/renoir/platform.c:97:6: note: ret is overwritten
 ret = dai_init(sof);
     ^

Also fix two typos while we're at it.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",122,40,0
"thesofproject/sof","b971f2b75378f5702b9a907b9001bb018add17c2","plbossart","2020-06-26 23:11:21","false","topology: add pipe-mixer-dai-playback

Add separate pipeline starting with a mixer (similar to Baytrail
switch matrix and SKL closed-source firmware)

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",70,25,0
"thesofproject/sof","2b06e80a84c4df92018ae7720dc2ec8646f2507c","dbaluta","2021-03-30 07:01:27","false","codec_adapter: Add init_process callback

commit e50ae6be8c7d (""codec_adapter: Initialize processing"") uses
the generic function codec_init_process which in turns needs a callback
for each type of codec.

Thus waves and passthrough are broken because there is no .init_process
callback provided. Fix this now.

Notice that the callback is mostly empty, the only thing that needs
to be done is to set codec->cpd.init_done to true.

Fixes: e50ae6be8c7d (""codec_adapter: Initialize processing"")
Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",79,34,0
"thesofproject/sof","cfc78646e687fff22d2a69f36a5ee0cbd12008dc","jajanusz","2019-04-05 17:40:23","false","test: fix  mixer compilation with -Werror

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",48,10,0
"thesofproject/sof","b164895386b789a40a46f9d9b717e351a249f904","jajanusz","2018-08-22 13:50:57","false","drivers: refactor: move clk from platform to drivers

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",19,3,0
"thesofproject/sof","308436906489e29e499f750fcface785fd65211b","jajanusz","2019-09-30 17:16:31","false","rimage: rename ri_hash

We are going to have more hashing function,
so they should be named after hashing algorithms.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",66,16,0
"thesofproject/sof","90f7ac47b25fdc235fc4be164a60ca95afb8425b","johnylin76","2021-02-04 09:42:58","false","sof: drc: fix drc_inv_fixed function

Used ABS(x) instead of x for comparing to ONE_OVERT_SQRT2(~0.707)
because x could be a negative value and here we want to transfrom x
from range (-1, -0.5];[0.5, 1) to (-1, -0.707];[0.707, 1)

And revised code line 233~237 to be easier to understand.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",71,32,0
"thesofproject/sof","5e4995f99521aa5b2d20ba63dca99893d93320b1","akloniex","2018-10-08 12:18:08","false","logger: Implement possibility to read log data from stdin

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",34,4,0
"thesofproject/sof","fa8570d22d30737cc65894c6a04f400ed10439bd","libinyang","2022-06-01 01:25:24","false","topology1: sof-icl-rt711-rt1308-rt715-hdmi: fix typo

Signed-off-by: Libin Yang <libin.yang@intel.com>",112,48,1
"thesofproject/sof","932f09f0c200c7f9c3bc5892991b7124c46e09c0","akloniex","2018-10-10 07:17:54","false","logger: Fix formatting of line number value.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",32,4,0
"thesofproject/sof","b5d762290f1aed7bb02b60dd5139169ccea09e4f","ranj063","2023-02-08 18:05:51","false","config: tgl-cavs: set init_config for smart test

Smart amp needs the base config extension during init.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",55,56,1
"thesofproject/sof","f645b36cc8f50c237e3212a96b3a437b6a34fcee","aiChaoSONG","2022-03-02 04:58:34","false","xtensa-build-zephyr.py: use string path for rimage_desc

PosixPath doesn't convert to string automatically, and
it is not acceptable in sign_cmd, convert it to string
explicitly.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",112,45,1
"thesofproject/sof","daf985b082780370983584f30e08da8fdd0c4fbe","aiChaoSONG","2022-01-20 02:42:53","false","configs: add ipc4 override config for tgl

The override config can be used to build tgl
and tgl-h firmware with IPC4 configuration.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",113,44,1
"thesofproject/sof","1704bfcb95e079033c8478f1104cd6e5d14881f0","jajanusz","2019-02-03 02:08:24","false","cmake: tools: test

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",58,8,0
"thesofproject/sof","1f9da7ea0f4d2778382ef07508d5a948eddd594f","softwarecki","2022-11-21 12:03:58","false","Update zephyr revision

Updated zephyr to the latest version with
the necessary patches

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",96,54,1
"thesofproject/sof","6781f0dd4155809367d8d2d9428102b02feb944b","keyonjie","2021-02-05 03:23:19","false","topology: sof-tgl-nocodec-ci: use 38.4MHz MCLK

Define to use 38.4MHz MCLK for DSM, to align with other SSP ports.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",72,32,0
"thesofproject/sof","02fb00d6282c795d5c1a0035bff57519d3824653","keyonjie","2020-03-16 04:54:12","false","topology: add amplifier reference capture pipeline

This is for smart amplifier use case only, to get the amplifier
reference samples captured to the host user space.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",81,21,0
"thesofproject/sof","24432ec281511c4de23ad2a69789f4872830cb2c","keyonjie","2021-07-02 11:02:14","false","memory: icelake: refine the heap sections size

Fine tune the size of runtime and runtime_shared sections, use different
counts for different SRAM size scenarios, to make full use of all the

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",85,37,0
"thesofproject/sof","65400959ca569ca7043949fa81617b91ad1863f1","keyonjie","2021-03-30 09:42:26","false","ll_schedule: add logs about the scheduling point

Add some useful information logs about the task scheduling point with
ll_scheduler, which will help to capture logs once we hit scheduling
issue on some specific task.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",79,34,0
"thesofproject/sof","a22e9fddcca11695f86f505fe6ae36b9986245c2","keyonjie","2019-02-20 08:43:37","false","topology: add support for key phrase buffer manager component in topology

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",63,9,0
"thesofproject/sof","e859a51edb2951cf7ea19d51fcf75d7b6799f67b","slawblauciak","2019-06-27 09:23:29","false","platform: set alh configuration ownership to host

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",46,13,0
"thesofproject/sof","782d4ce3fdddbcf80905c1bf0f869bd148fae5fc","ymdatta","2020-08-14 17:09:49","false","testbench: check array size mismatch while loading topology buffer

This patch uses the functionality added by the c9e090c commit
to check for array size mismatch while loading topology
buffer.

Signed-off-by: Mohana Datta Yelugoti <ymdatta.work@gmail.com>",75,26,0
"thesofproject/sof","5d7c535a215ba566dd1d50fc1bc3b88d4703bc17","lgirdwood","2018-10-24 09:18:42","true","Merge pull request #112 from singalsu/add_dmic_2ch_4ch_topologies

Topology: Add 2ch and 4ch raw DMIC capture topologies for APL",26,5,0
"thesofproject/sof","8555c3b18d96b19ad9b454ab0769b9a81de802a7","lgirdwood","2018-07-17 10:29:37","true","Merge pull request #30 from plbossart/debug/modules

kmod_scripts: clean-up and add pcm512x support",13,2,0
"thesofproject/sof","bea5ab378456baf06b378a0f66d54963ca9845bc","mrajwa","2019-06-10 11:09:20","false","platform: include clk.h in platform.h for imx8 target.

The CLK_CPU macro is undefined for imx8 platform therefore
shall be added.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",50,12,0
"thesofproject/sof","2317e879c7f5c0b5067f2b3e3b30fba0fa876ea4","lyakh","2022-01-07 14:08:48","false","DAI: join identical trigger handling flows

All SSP drivers handle COMP_TRIGGER_RELEASE and COMP_TRIGGER_START in
the same way. Similarly sai.c handles COMP_TRIGGER_PAUSE and
COMP_TRIGGER_STOP identically. This patch joins those flows.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",116,43,1
"thesofproject/sof","104c63547f054d3350068dec6c1f59fd4a4324e2","lyakh","2022-04-14 14:33:27","false","waves: always acquire buffers for access

Buffers must always be acquired before access.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",117,46,1
"thesofproject/sof","2512698098ed2e2cdd671404f39380e4d50a7883","marc-hb","2023-04-14 18:57:58","false","numbers.sh: do not (re)define ROUND_DOWN() if __ZEPHYR__

Move the ROUND_DOWN() definition to the nearby #ifndef __ZEPHYR__ block.

The previous `#ifndef ROUND_DOWN` logic depends on the #include order,
so it fails sometimes.

Fixes commit a6f8daec2acb (""kpb: add micselection function"")

Fixes XCC compilation failure with
```
./scripts/xtensa-build-zephyr.py  mtl --cmake-args='-DEXTRA_CFLAGS=-Werror'

 - In file included from sof/src/audio/src/src_hifi4.c:22:
zephyr/include/zephyr/sys/util.h:238:9: warning:
         'ROUND_DOWN' macro redefined [-Wmacro-redefined]
        ^
sof/zephyr/../src/include/sof/math/numbers.h:33:9:
         note: previous definition is here
```

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",50,58,1
"thesofproject/sof","464fb0e2803a51dad8de932bbe40738aeeb6d15e","marc-hb","2022-05-07 06:11:39","false","xtensa-build-zephyr.py: make sure that west can find SOF

This can fail for various reasons listed in a comment.

Remove now redundant `west topdir` check.

Without this check, a not found SOF fails with very cryptic Kconfig
errors:

zephyr/samples/subsys/audio/sof/prj.conf:5:
  warning: attempt to assign the value 'n' to undefined symbol HAVE_AGENT

zephyr/samples/subsys/audio/sof/prj.conf:8:
  warning: attempt to assign the value 'n' to undefined symbol
  DEBUG_MEMORY_USAGE_SCAN

zephyr/samples/subsys/audio/sof/boards/intel_adsp_cavs15.conf:1:
 warning: attempt to assign the value 'y' to undefined symbol APOLLOLAKE

etc.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",115,47,1
"thesofproject/sof","7c0f0322665eb24446cbc5b4e8e595938d465288","marc-hb","2021-10-15 02:43:51","false","xtensa-build-zephyr: extract new download_missing_submodules() function

This makes testing submodule issues easier.

Absolutely zero functional change.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",123,40,1
"thesofproject/sof","80c482815bd130f2a912cbae7b57b905705207a9","marc-hb","2021-04-30 02:07:04","false","xtensa-build-all.sh: replace ""type xtensa-bxt-elf-gcc"" with ""command -v""

... because the latter does not print on stderr when not found; so IDEs
and CIs don't display this as a warning.

Also remove the ""... and ignore set -e"" comment that made sense at the
time of commit cad86dc34044 (""scripts: xtensa-build: fix alias detection
for bxt/apl gcc"") but not anymore.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",81,35,0
"thesofproject/sof","08c6b7992e0f51de356a47d68c05271a14ac536b","tobonex","2023-09-15 18:08:53","false","smart_amp: remove buffer_acquire from smart_amp

remove buffer ops from smart_amp module

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","f31dbc907525d90521170312121bbb5d1a9d9280","pjdobrowolski","2022-08-30 13:20:50","false","ipc4: library manager communication layer

Commit adds ipc which contains information need to load external
libraries from HOST and required actions to make it possible
using library manager functionality.

Signed-off-by: Stelter, Jaroslaw <jaroslaw.stelter@intel.com>
Signed-off-by: Dobrowolski, PawelX <pawelx.dobrowolski@intel.com>",113,51,1
"thesofproject/sof","b8d6760600d75f35e81785a070faef89a7ee48e9","lrgirdwo","2021-06-26 12:35:04","false","testbench: fix crash when file has no . extension

Testbench crashed when a in/out file has not . extension. Fix this.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",75,37,0
"thesofproject/sof","9d3c0df7bfe78e5f6efb0b00eb6a820ed9422928","lrgirdwo","2018-08-29 12:18:53","false","Merge remote-tracking branch 'gh/glk-003-drop-stable' into next-master2",24,3,0
"thesofproject/sof","d0358609d86c4dfa2a9c89ff47bdb4ecf1e59d67","lrgirdwo","2019-04-23 15:07:02","false","schedule: edf: let the user know if we fail to schedule a task

Also use the correct trace macro for a current trace item.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",48,11,0
"thesofproject/sof","4405cd4721d27e59c44c80f44b93975ec2450c61","akloniex","2019-01-23 08:30:11","false","GPDMA: Fix per-channel IRQ handling of GPDMA for non-APL platforms.

Fixed non-APL specific handling of per-channel IRQs from GPDMA.
APL has per-channel IRQs handled by xtos, so similar functionality
was implemented for other platforms. Bitmask for tracking usage of
IRQs was added to dma structure, for non-APL only.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",57,8,0
"thesofproject/sof","f3b91f60e8bc94fa02ce70cb311a0805f6fc7ae9","ujfalusi","2021-11-04 07:58:54","false","Audio: TDFB: Use correct type for the IPC message sent on change

The tdfb is sending the direction information via the ctrl_data->chanv[]
which is valid in case of SOF_CTRL_TYPE_VALUE_CHAN_GET type.

Correct the message initialization to make sure that the message is
correctly parsed by the receiver.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",125,41,1
"thesofproject/sof","f599f6131139d068fd74da13a8fcb18ef2ed6386","ujfalusi","2023-04-26 06:42:29","false","audio: mixin_mixout_generic: normal_mix: Update src/dst after each copy

The copying part of the functions need to update the src/dst buffer
pointers after each iteration to correctly account for the possible wrap
of the buffer.

This was discovered while doing pause - 1sec_wait - resume - 3sec_wait
cycles and around the 10th iteration audio became 'metallic' sounding.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",52,59,1
"thesofproject/sof","4290e2d52a33d97e4875524a4f88c586f480815c","lyakh","2019-02-14 13:34:26","false","wait: move most functions from the header to a new .c file

Move large functions from src/include/sof/wait.h to src/lib/wait.c to
avoid building them multiple times.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",60,8,0
"thesofproject/sof","b65f05006cd5b26d8d7ec532f7a651b0237a72b1","lyakh","2019-09-24 12:30:18","false","mixer: fix mixer for capture pipelines

When triggering a pipeline, containing a mixer in the playback
direction, all input pipelines have to be considered. However, this
isn't applicable if the mixer is used in the capture direction. This
patch adds the missing check to mixer_trigger().

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",65,16,0
"thesofproject/sof","a31308a1ab4230d9f115d35c65353e363107a386","lyakh","2020-03-10 12:03:03","false","topology: add a ""core"" parameter to the W_PGA() macro

This places all SectionWidget.PGA* topology widgets, created by
the W_PGA() macro on the same core, on which the respective pipeline
is scheduled.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",85,21,0
"thesofproject/sof","b4993016e6fc13ec90888eaacd72dc29b3eea245","ranj063","2022-01-13 18:16:48","false","codec_adapter: remove printing the error with -ENOSPC

The error message should be skipped for -ENOSPC in module_process().

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",117,43,1
"thesofproject/sof","2f9b43bac0565aa424b25f12a5a62c828e29f6d3","ranj063","2019-07-15 05:23:13","false","tools: fuzzer: Introducing ingredients for fuzzing in SOF

This commit introduces the ingredients required for adding
fuzzing support in SOF. The main ingredients are as follows:

QEMU bridge: This creates the IO bridge to communicate with
the QEMU DSP

Core IA host support for BYT/CHT platforms: Provides the host
support for intializing the platform and communicating with
the QEMU DSP

Main application: The fuzzing application that sets up the
platform and initializes the communication with the QEMU DSP

Currently, running the fuzzer application only sets up the
platform IO bridge for communicating with the QEMU DSP,
boots the FW, parses the topology file and sets up the components
and connections in topology by sending the IPC messages to
the QEMU DSP. The next step is to add the fuzzing component
which will be responsible for sending fuzzed IPC messages
and monitoring the status.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",44,13,0
"thesofproject/sof","6d59eacbce051d357a0b49557ca015b0b593f157","ranj063","2018-12-13 18:57:47","false","scheduler: allow RUNNING tasks to be re-scheduled in the future.

Because of a race condition between when the DONE interrupt
is sent to the host and when the previous ipc task's
state is updated to COMPLETED, new ipc's from the host
could end up not being scheduled. This leads to ipc
time outs on the host.

In order to prevent this, this patch introduces a new task state
called PENDING which is assigned to the task when it is picked
as the next task to be run. The state is then updated to running
when the task function is executed. This way when a ipc task
comes in, a RUNNING task could get scheduled again and assigned
the PENDING state to ensure that it doesnt get missed.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",46,6,0
"thesofproject/sof","27641bf9fe323c299374228f6228b11ae1232f40","makarukp","2023-03-06 08:53:18","false","dai: host: add fast mode

Add fast mode which enables to support unlimited transfer size (more than
ibs/obs) between a dma buffer and the copier. Enable it to satisfy
specific module requirements to guarantee enough data size to decoders or
from encoders since the pcm audio period size does not apply to variable
size frame.

Signed-off-by: Piotr Makaruk <piotr.makaruk@intel.com>",58,57,1
"thesofproject/sof","aa981cc7a4e1a47faaf01c9d22251595dbf133cd","ranj063","2023-09-19 19:17:01","false","arch: host: configs: Add config for alsa plugin

Add the deconfig file for building the SOF ALSA plugin with IPC4.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",20,64,1
"thesofproject/sof","6001e44241da76dcf20ffb0559afbd35c3317fd2","ranj063","2022-02-16 04:50:43","false","topology1: remove redundant kcontrol for codec adapter pipelines

The codec adapter component only uses a single config now. So remove the
runtime config kcontrol as the same kcontrol can be used for runtime
config as well.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",105,44,1
"thesofproject/sof","34be14f64467f22c8946ffac473fe7a62780db8f","abonislawski","2021-12-02 16:05:55","false","ipc4: add Aria module support for ipc4

Automatic Regressive Input Amplifier Module
ARIA applies variable gain into incoming signal.
Applied gain is in range <1, 2 power attenuation>
Currently ARIA introduces gain transition and
algorithmic latency equal to 1 ms.
At initial release only hifi3 version is supported

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",127,42,1
"thesofproject/sof","46b7cc9af4a68b3caff49d34b70a1ac833bb6ada","ranj063","2018-11-26 04:03:39","false","github: add ranj063 as owner of src/host

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",41,6,0
"thesofproject/sof","b332dfa01b663b8e52d3270fa0c885e4841ccec2","ranj063","2021-09-11 17:26:51","false","APL: increase the size of 256 bytes heap

With the addition of struct coherent member in struct buffer,
the size of the struct exceeds 128 bytes. Increase the
256 block heap size and reduce the 128 block size to fix
out of memory issues when running multiple-pipeline-all test.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",117,39,0
"thesofproject/sof","ff3ea5f1c1281882fe5475eb290076845f30cf17","lrgirdwo","2020-04-15 10:05:46","false","zephyr: macros: manage macro redefinition between SOF and Zephyr

Some common macros are defined both in SOF and Zephyr. Temporarily undef
local copies if they are already defined in Zephyr. This will be removed
once Zephyr integration is complete as Zephyr copies will be used
directly.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",82,22,0
"thesofproject/sof","76309dafe364c9cc98148bc4aa96ab46810faa70","jgunn0262","2019-04-24 20:56:46","false","audio: Kconfig: Fix indentation.

Signed-off-by: John Gunn <jgunn0262@gmail.com>",52,11,0
"thesofproject/sof","1fbd4c6605294b07a5a79e6c8e54562ef26812c1","softwarecki","2023-01-11 17:59:31","false","zephyr: ace: pm_runtime: Use new register name & update zephyr revision

DFDSPBRCP register have been renamed to DSPCS in Zephyrs commit
21f278c04bc258eb344ac5b2123b49d760b5b71d. This commit changes the
references from old to new name.

Changed zephyr revision to d9c4ec31fc49e7eef3c8c3b0d07827cc04e6efee

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",54,55,1
"thesofproject/sof","c4aa4c176bd337a3b1e3b0f4e95a920802e8f6e7","caseorum","2020-09-23 19:55:51","false","bdw: fix SSP0 channel inversion

This fixes SSP0 swapping channels after capture on BDW

Signed-off-by: Joseph Burt <caseorum@gmail.com>",65,28,0
"thesofproject/sof","8121d3e555bd571c0ff6aa928d55d20060795986","tlauda","2020-01-17 10:30:36","false","component: add new comp_driver_info structure

Adds new structure named comp_driver_info. It keeps constant
pointer to component driver. It's the shared part of component
driver, so it can be safely accessed by SMP code.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",79,19,0
"thesofproject/sof","29f7387b989cb630dad80bc7f61b039ad00d4226","tlauda","2019-12-02 10:53:57","false","task: describe structures

Describes task structures.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",67,18,0
"thesofproject/sof","edfbf0d3c29546eddc70766ae9d217fb70ef0615","ktrzcinx","2020-06-23 11:43:37","false","volume: Rename UUID component name to PGA

PGA name is used in topology files and names between topology
and UUID dictionary (used by logger) should be aligned to omit
ambiguity.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",69,25,0
"thesofproject/sof","84e15e721a0d4aa3b6427cf08c220883ccee6c43","lgirdwood","2018-09-13 07:04:08","true","Merge pull request #363 from jajanusz/apl-cleanup-merge-del-platform-c

apl: remove duplicated platform.c file",42,3,0
"thesofproject/sof","4758413fda552e8382eafd9dfd56fbbeb59d99da","ymdatta","2020-08-11 21:11:47","false","testbench: check array size in component parsing

There may be a situation where size of all elements of the
snd_tplg_vendor_array is greater than the private data size.

If we take a look at array structure
struct snd_soc_tplg_vendor_array {
	__le32 size;	/* size in bytes of the array, including all elements */
	__le32 type;	/* SND_SOC_TPLG_TUPLE_TYPE_ */
	__le32 num_elems;	/* number of elements in array */
	union {
		struct snd_soc_tplg_vendor_uuid_elem uuid[0];
		struct snd_soc_tplg_vendor_value_elem value[0];
		struct snd_soc_tplg_vendor_string_elem string[0];
	};
} __attribute__((packed));

and assume of private data size is size.

If num_elems * sizeof(..._elem) > size occurs, this is bad
because, we first try to allocate _size_ bytes via malloc to array
pointer. Since the num_elems * sizeof(..._elem) is greater than
size, we get a segmentation fault when we try to memcpy the
remaining size in the subsequent functions (read tplg_read_array()).

We fix this problem by checking for whether array size falls
within the bounds of private data size.

Signed-off-by: Mohana Datta Yelugoti <ymdatta.work@gmail.com>",73,26,0
"thesofproject/sof","30b456826a6a75f5fec0d9ca409441526fc119d7","DianaGabriela27","2019-03-06 13:10:23","false","rimage: manifest: Remove braces for single statement blocks

Braces are unnecessary for single statement blocks.

Signed-off-by: Diana Ungureanu <diana-gabriela.ungureanu@nxp.com>",66,9,0
"thesofproject/sof","30c9eed3cbd2b40c453e5fdf421122a033409234","dbaluta","2020-10-26 12:26:54","false","drivers: imx: sdma: Always manually start a channel

A channel is scheduled when the following condition is true:

(HE[i] or HO[i]) and (EP[i] or EO[i])

In order to strictly control a channel's behavior we allow it to run
only after the users has started the channel in sdma_start and an
event arrives.

For this reason we need to set host override and event override to 0.
This is already done at config time.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",74,29,0
"thesofproject/sof","bb0641c789dd05f5bb0022fd232c38de0a76101e","a1batross","2022-02-02 12:37:43","false","topology1: Add sample topology for i.MX8MP boards with wm8904 codec

Tested to work on Variscite Symphony-Board v1.3 with VAR-SOM-MX8M-PLUS

Signed-off-by: Alibek Omarov <a1ba.omarov@gmail.com>",104,44,1
"thesofproject/sof","5d210ccb695ad53bfd672f7f7223d1316f4e62a3","btian1","2023-02-22 03:15:25","false","host-zephyr: limit copy bytes to one period for capture pipeline

Limit copy bytes to period bytes for both playback and capture
to avoid high load spike.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",55,57,1
"thesofproject/sof","809f5cf4dff58b962d45e3163345972bb629e33c","ujfalusi","2022-04-20 09:09:03","false","Revert ""ipc4: setdx: skip sending ipc response""

This reverts commit 9b3715fc168aa547495917001735a3ced76b3419.

The commit causes the following error:
[  146.052617] sof-audio-pci-intel-tgl 0000:00:1f.3: ipc tx      : 0x47000000|0x0: MOD_SET_DX [data size: 8]
[  146.556588] sof-audio-pci-intel-tgl 0000:00:1f.3: ipc timed out for 0x47000000|0x0
[  146.556596] sof-audio-pci-intel-tgl 0000:00:1f.3: ctx_save IPC error: -110, proceeding with suspend

The reason is that for IPC4 the reply format is different compared to what
IPC3 is using and also the signaling is different.

If we skip sending the reply, there will be no reply going to be sent to
the host.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",114,46,1
"thesofproject/sof","3bc70b6251d139fc5d23587b28afa0bb0a6fdc48","ujfalusi","2023-02-07 13:30:11","false","sof-ctl: Add initial support for handling blobs for IPC4

For IPC4 we are re-using the sof_abi_hdr to encapsulate the blob from/to
user space with minor deviation from IPC3:
- ABI magic is different
- the type is used as param_id in IPC4 (it carries the same functionality)

The IPC type can be specified with -i and defaults to 3 (IPC3).

-p is added as a new option for param_id, but -t and -p will do the same
thing.

After reading a blob, print a message for unexpected ABI magic number, but
do not block the execution.

To generate a header for 100 bytes payload:

For IPC3:
sof-ctl -g 100 -t 2
sof-ctl -i 3 -g 100 -t 2

For IPC4:
sof-ctl -i 4 -g 100 -p 2

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",55,56,1
"thesofproject/sof","cd7e3d3e4006e9d975ecd399ab2e7e54104f6cfd","tobonex","2023-09-15 17:47:21","false","kpb: remove buffer_acquire from kpb

remove buffer ops from kpb module

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","bd01f6fad4fba72e1c663a9fedfc077fc631679c","marc-hb","2021-09-17 05:35:21","false","cmake: add the -Irimage #include path only for the modules that need it

Fixes 177d9bd073f (""cmake: defer the rimage build until it's actually
needed."") that corrected the rimage dependency but forgot about the
include.

This allows building the testbench without fetching rimage.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",118,39,0
"thesofproject/sof","588574c000a06516411141aca359fd04b9fbcee6","marc-hb","2021-03-22 19:24:18","false","ll_schedule.c: fix ""uninitialized task_take"" warning in CONFIG_TRACEV

Looks like no one ever uses tr_dbg()?

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",73,34,0
"thesofproject/sof","08c332c8885a698f576c630c6f8d5e36aabb1ac4","marc-hb","2020-07-09 18:57:14","false",".gitignore: remove .tarball-version

There are two .tarball-version files. The one generated by the build is
in the build directory so it doesn't need to be in .gitignore. The
other, input one in the source directory lets some (rare) users override
the default values and these users likely don't want to forget about
that override.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",77,25,0
"thesofproject/sof","53ebd8abd0bc16a995626bfba8542b457d11f58f","marc-hb","2021-07-06 03:25:52","false","smex: fix crash in elf_free_module() when input file not found

fclose() seems to require a valid argument.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",84,37,0
"thesofproject/sof","69985365c6dda69cab0b55521f49d9d4051a6922","marc-hb","2021-03-05 01:40:56","false","buffer.h: silences warning ""flags may be used uninitialized""

buffer_unlock() does not use flags.

Silences this gcc 8.1.0 (and valid) warning in
src/audio/pipeline.c#pipeline_for_each_comp(). For some strange reason
it shows up only with CONFIG_OPTIMIZE_FOR_DEBUG=y. Heuristics?

In file included from sof/src/include/sof/audio/pipeline.h:16,
                 from sof/src/include/sof/audio/buffer.h:12,
                 from sof/src/audio/pipeline.c:8:
src/audio/pipeline.c: In function 'pipeline_for_each_comp':
src/include/sof/spinlock.h:200:38: error: 'flags' may be used uninitialized in this function [-Werror=maybe-uninitialized]
src/audio/pipeline.c:182:11: note: 'flags' was declared here
  uint32_t flags;
           ^~~~~

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",73,33,0
"thesofproject/sof","42dd33fb06b956e2ba5bcaedde3592da5ce34475","marc-hb","2022-09-01 17:28:57","false","zephyr/docker-run.sh: add comments about image versions

Explain how to use this script with a different image version.

Docker image versions and tags tend to confuse new users.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",118,51,1
"thesofproject/sof","70b9d3041439ffd3061582fe44cf7104932d785b","marc-hb","2021-03-30 21:46:17","false","trace: add Kconfig and trace.h comments

Trying to reduce trial and error.

Pure comments, no functional change.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",79,34,0
"thesofproject/sof","6f50f856332fbb56a6162f519e7a3229c4596104","lyakh","2022-01-24 10:58:03","false","mixer: prevent NULL dereference

User IPC can provide an invalid component ID, this shouldn't lead to
a NULL dereference.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",109,44,1
"thesofproject/sof","560d29ddaf8e08c8bcd805c2685fff7ece5170ad","lyakh","2021-05-14 12:49:06","false","zephyr: rename functions and objects in zephyr_domain.c

Mostly a result of s/timer_domain/zephyr_domain/g

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",85,35,0
"thesofproject/sof","5bded4fb1c6a273e48558e45676e4665ddeb0042","lyakh","2019-01-14 14:14:54","false","drivers: add a simple driver for the Sue Creek IOMUX controller

This driver has only one function: it can configure a pin for the
GPIO role.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,7,0
"thesofproject/sof","e7dc749abb64826e9c4fb4e06dd4ca948455c34c","lyakh","2021-08-04 14:14:18","false","dai: add support for initialisation delay

Some DAI devices need a delay between their PRE_START and START
trigger commands, and similarly between PRE_RELEASE and RELEASE.
Add a DAI driver operation to get that delay time and use it between
the two commands.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",113,38,0
"thesofproject/sof","4c7b97e95d29ddffbc6632e64b098eb3c5689b5e","lyakh","2022-08-17 10:08:41","false","buffer: make buffer_release() return void

buffer_release() currently returns the original pointer that was used
for buffer acquisition, which is never used and shouldn't be needed
either. Remove it and make the function return void instead.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",113,51,1
"thesofproject/sof","2446e236e721e15890509dd82115262880a6629a","ranj063","2023-07-07 01:08:49","false","ipc4: base-config: Expose ipc4_base_module_cfg_to_stream_params()

It will be needed by other modules.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",31,61,1
"thesofproject/sof","2c69afc5fdebc87ea091b7c76c35860ea256f4da","ranj063","2021-04-01 22:29:11","false","topology: Switch HDA topologies to use dynamic pipelines

Let's start testing dynamic pipelines.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",79,34,0
"thesofproject/sof","c3fdf30364127366d03208ecbd4881a8ba43100d","ranj063","2021-11-16 22:12:06","false","topology2: pipelines: Add the other mixin/mixout pipelines

Add all the missing mixin/mixout pipelines.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",127,41,1
"thesofproject/sof","9ba96e2c4a69b3365b51fd8f6526cd0cdfb159dd","ranj063","2022-01-10 21:56:32","false","codec_adapter: remove validate_setup_config()

It has not been implemented and can be introduced later when needed.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","437ed181723e843eea3fe61b7306c514e0c46a3f","ranj063","2022-03-23 22:38:34","false","codec_adapter: rename codec_adapter_free()

to module_adapter_free(). No functional changes.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",109,46,1
"thesofproject/sof","897fee7d780891e7b6509837541265efbc138d84","ranj063","2023-05-02 18:57:38","false","dai-zephyr/dai-legacy: Split up dai_params()

Add a new helper, dai_zephyr_params() to make it usable from the copier
device. Also modify the signatures of dai_playback_params() and
dai_capture_params() to use the passed dai_data and dev pointer.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,59,1
"thesofproject/sof","6b22503e548475dec34c9df808d1bd346c9520f0","tlauda","2019-10-17 08:23:32","false","ipc: check whether pipeline id is already taken

When new pipeline is created we need to also verify whether
given pipeline id is already taken.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,16,0
"thesofproject/sof","a388d68d4f23c3d0c09786f32fc51b6ac68b103f","tlauda","2020-01-17 10:09:29","false","component: move comp_data to header and rename

Moves comp_data struct to component header, so it can be
accessed by rest of the modules. Also renames it to
comp_driver_list.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",79,19,0
"thesofproject/sof","8a70f62846955b47786e0cd797dc779b2066638d","johnylin76","2020-10-22 03:34:39","false","sof: drc: component implemented by fixed-point calculations

In drc_generic.c and drc_math_generic.c, all floating-point math functions
are removed, and all float vaiables are replaced by fixed-point (int32_t)
variables with the appropriate precisions. It is verified that the
fixed-point replacement only lead to quite insignificant MSE errors among
all test patterns.

 - Multiplications are replaced by Q_MULTSR_32X32 with the appropriate
   precisions.

 - Divisions (x/y) are replaced by Q_MULTSR_32X32(x, inv(y)), where inv(y)
   is approximated 1/y by polynomial functions generated by fpminimax of
   Sollya with rexp optimization.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",72,29,0
"thesofproject/sof","b0bb21dc0ee6f2625f0094fb9d88e4acb3daf047","dbaluta","2021-10-28 13:09:44","false","topology1: Fix codec adapter pipeline

Commit 771db86de29 (""topology1: codec_adapter: Add 'codec_adapter' pipeline configuration"")
in an attempt to support PCM + compr mixer scenarios broke simple codec adapter
pipelines.

So, similar with PCM case (see sof/pipe-host-volume-playback.m4 vs
sof/pipe-volume-playback.m4) we introduce two separate configuration
files.

One for Passthrough codec-adapter pipeline and one standalone Host +
codec-adapter pipeline that can be independently scheduled in a scenario
with a mixer for example.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",127,41,1
"thesofproject/sof","bf6b875bd022c19ddf5749855b09ffcdde317c99","btian1","2023-05-18 06:25:09","false","ipcgtw: merge ipcgtw.h to ipcgtw_copier.h header file

No need to keep separate ipcgtw.h header file, merge it to
ipcgtw_copier.h.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",50,59,1
"thesofproject/sof","1b3403a4a90eef75ae8437af72e5ce4ccbd2512e","softwarecki","2023-10-26 11:43:39","false","lmdk: Update rimage include path

As rimage was moved to sof repository it is necessary to update path to
rimage include directory in lmdk build system.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",7,65,1
"thesofproject/sof","f1fb5d380777a553baa3d6f6675ce6e42f140e61","tlauda","2019-09-16 15:06:44","false","dma: remove unused DMA_CB_STATUS_SPLIT

Removes unused DMA_CB_STATUS_SPLIT and related code.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",62,15,0
"thesofproject/sof","acc022b4c42d12f66eb3f023c5a00caf85c32ad5","bkokoszx","2020-11-04 10:48:53","false","mux: add channels check in mux_prepare_active_look_up()

This commit adds channel parameter checking in
mux_prepare_active_look_up() function. Look up
table should not include elements referring to
channels higher than those actually set in
source/sink buffers.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",75,29,0
"thesofproject/sof","af745b2e48a83930cb3bd534829d8571706698be","kv2019i","2023-09-04 16:49:35","false","west.yml: update Zephyr to 2f90ef488a4e

Contains 75+ commits, including following directly affecting
SOF targets:

f0fd9f171342 drivers: hda: insert an empty "";"" statement before switch() labels

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",23,63,1
"thesofproject/sof","f1e3c934f0dc07f3901b907e692a6c8f32dc5ace","kv2019i","2022-01-31 21:47:38","false","zephyr: use z_init_cpu() if Zephyr 3.0.99 or newer

Use the new interface to initialize non-primary cores before
enabling them with arch_start_cpu(). This interface is not
available in Zephyr 3.0.0, but is mandatory in later release.

Depends on Zephyr commit 2b210cb3db05 (""kernel: Refactor SMP cpu
initialization a bit"").

BugLink: https://github.com/thesofproject/sof/issues/5456
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",104,44,1
"thesofproject/sof","176aec773cde803cec9b1dc275b2d4f64a0107d7","singalsu","2023-08-25 10:40:04","false","Tools: Tune: DRC: Export ascii and binary IPC4 blobs for sof-ctl

The passthrough and enabled blobs are exported to tools/ctl/ipc4/drc.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",26,63,1
"thesofproject/sof","acd8a2bc1bc05f0c38e0bd1b1e7142f09d0b7d04","singalsu","2023-04-18 11:15:06","false","Config: Change SRCINTC for tgl-cavs.toml and tgl-h-cavs.toml to LL

The SRC should be a normal LL component, it can process 1 ms blocks
of audio in real-time. The domain_types = ""1"" is for DP scheduling
that is not enabled currently in Zephyr configuration. It causes a
pipeline prepare fail when a topology contains SRC.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",51,58,1
"thesofproject/sof","2006297ee20d37652556f84ba105283a29b82c8c","singalsu","2023-10-24 12:28:58","false","Scripts: Testbench: Add xt-testbench build for MTL with xt-clang

Build for MTL needs other compiler xt-clang, so the COMPILER is
set by default to xt-xcc and changed for MTL in set_xtensa_params.sh
where also core and tools version is defined.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",8,65,1
"thesofproject/sof","68fd2b817d566c6ac36807aaf16a9925541e5818","singalsu","2019-07-12 13:27:37","false","EQ FIR: Bug fix for HiFi3 optimized implementation

This patch fixes two similar mistakes from all the s16/s24/s32 dual
sample computing FIR core that was introduced in a previous update.
The FIR processing frames count processed double amount of samples
in buffer that corrupted FIR delay line and also the output write
to component sink buffer swapped two successive samples within one
channel.

The filter cores for s16 and s24 were simplified a bit since they can
use single output write pointer.

The FIR header file used wrong xtensa header file for HiFi2 while
it should have been for hifi3. Though no issues were observed due to
this mistake.

A check for frames count greater than zero was added into the copy()
function for extra safety. Also the return value from
comp_get_copy_limits() is not checked since the function always
returns zero.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",43,13,0
"thesofproject/sof","0bce9e4f36815a67232e11b1d1c8081be1f84a26","singalsu","2020-02-21 17:27:03","false","Testbench: Instantiate file component as host or DAI and other updates

This patch fixes the fail to execute tests due to recent pipeline
updates. Now the fileread and filewrite component is instantiated
as host or DAI depending on stream direction. The DAI file component
is added the capability to report HW stream parameters. In testbench
case the stream parameters originate from command line parameters.

The file params() handling is updated to be similar as in other
components to successfully propagate the parameters.

The added capture pipelines support is not fully functional and will
be fixed later.

The testbench cleanup includes elimination of global variables for
certain component ids. The needed misc parameters were added to
testbench parameters struct that is passed through most topology
parsing functions.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",80,21,0
"thesofproject/sof","6d8a3978523478cb98a0df838eb5caff985cd2fe","singalsu","2018-09-06 08:13:05","false","EQ IIR: Change initialization and simplify dcache invalididate function

This patch changes equalizer initialization to store the allocated
delay lines buffers address in a single pointer and size component
data. This simplifies the dcache invalidate code avoids knowledge of
filter internals that may change for future intrinsic optimized
version.

The EQ reconfigure and responses switching is by this patch changed to
happen in prepare() to avoid doing unnecessary allocation and free
operations in typical component life cycle. Prior to to prepare sent
configuration is just stored but not initialized into equalizers.
On-the-fly response switching can be enabled later with some work for
the component.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",31,3,0
"thesofproject/sof","a5fc4a643f5ceca0000a7e7135af047923742d45","singalsu","2021-07-06 11:24:43","false","Tools: Tune: Update TDFB topology include files location

Topologies 1.0 location has been changed. This update allows the
tool to create the files into correct path.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",84,37,0
"thesofproject/sof","1069fce47fcd4177deb7d7eb3eba9e50307fbeeb","plbossart","2021-09-28 16:21:38","false","ipc4: copier: fix return value on comp_trigger

cppcheck warning:

src/audio/copier.c:410:7: style: Variable 'ret' is assigned a value
that is never used. [unreadVariable]
  ret = cd->endpoint->drv->ops.trigger(cd->endpoint, cmd);
      ^

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",120,40,0
"thesofproject/sof","e31ef3b96a9567f34ab4391967fe4d17d3441039","lrgirdwo","2019-01-30 19:51:56","false","topology: keyword: Add keyword detection topology for APL

Add initial pipeline for keyword detection on APL platform.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",58,8,0
"thesofproject/sof","f6e12130f580d3c8d3a0b17740360554d510577e","RanderWang","2021-07-15 02:41:14","false","ipc4: add header file for notification definition of ipc4

Signed-off-by: Rander Wang <rander.wang@intel.com>",88,37,0
"thesofproject/sof","6c11a94055642ee2a3c69ec10f5ef48e034a69d9","xiulipan","2020-08-06 07:11:24","false","trace: fix error trace missing issue

For trace message with LOG_LEVEL_CRITICAL, we should always show
them into mailbox.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",79,26,0
"thesofproject/sof","d2d0eba43ad6abfb5090a4139672134ff82628bd","tlauda","2019-09-16 15:03:19","false","dma: remove unused DMA_CB_STATUS_IGNORE

Removes DMA_CB_STATUS_IGNORE, which is no longer used.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",62,15,0
"thesofproject/sof","11265e3e4fe167ed6684c391e900027e149dfc78","tlauda","2020-05-29 08:05:16","false","pm_memory: add functionality to handle also LP SRAM

Refactors pm_memory in order to add functionality to also
power gate LP SRAM in a similar fashion.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",97,24,0
"thesofproject/sof","1bf447c8c2992b53c6028ea38165babe5640128b","kv2019i","2023-03-30 10:48:54","false","config: tgl-h-cavs: align modules to tgl-cavs config

Update the list of modules to match that of ""tgl-cavs"".

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",57,58,1
"thesofproject/sof","10c641d3078f551e33590f2a5826969c1a0c12e4","kv2019i","2019-03-27 16:17:29","false","topology: add param check to VIRTUAL_WIDGET()

Abort build if not all mandatory arguments are passed to the
macro.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",56,10,0
"thesofproject/sof","e51df282a4a1e0d265773be83b333f20dda7d3c4","kv2019i","2020-07-08 12:27:39","false","ipc: extend IPC documentation

Add a brief overview of the IPC protocol, message syntax,
byte encoding and command replies. Clarify text in ABI
compatibility section.

Avoid using subsections in group documentation as these are
not included in generated Sphinx output (with Breathe
4.14.1).

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",78,25,0
"thesofproject/sof","fed69b6a34ce427997a7e52ddba979a3fbc69237","kv2019i","2021-08-24 09:55:07","false","zephyr: wrapper: disable cached heap on Intel platforms

Tests with dynamic-pipeline topologies increase the complexity
of alloc/free patterns for heap and these tests have uncovered
new issues with heap corruption. Tests are reporting failed
allocs although heap still has free space. Running same test
with cached heap disabled shows no failures.

The cached heap is already disabled for IMX targets, so build on
this code and add a local ENABLE_CACHED_HEAP define to toggle
the cached heap.

BugLink: https://github.com/thesofproject/sof/issues/4494
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",120,39,0
"thesofproject/sof","71d9dbe62bb0c508544fe34280385ebc1b2ca08d","singalsu","2020-01-31 14:40:42","false","Testbench: Force core to zero to be able run the pipeline

This patch sets in topology parsing core to zero for file reader,
file writer, and buffer since it was left uninitialized and caused
the core check in pipeline run to fail.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",76,20,0
"thesofproject/sof","9cbd085c07d6c67225b9a82b7c2b21c09e8db883","singalsu","2020-02-26 14:44:29","false","ASRC: Let ASRC access all available frames on the variable rate side

The previous copy() function frames computation code contained
a mistake that unnecessarily prevented the filter core to access
more than nominal amount of samples from source buffer in pull mode.
It have corrupted occasionally input PCM samples and possibly
could have stalled the algorithm with an impossible processing amount
constraint.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",76,21,0
"thesofproject/sof","9aadd197ab882ca4510fddd90dc178094c12a0b1","singalsu","2023-10-13 11:29:43","false","Tools: Topology2: Change gain default curve type to linear

This change can drop in TGL platform 2ch 48 kHz gain component
peak load e.g. from 16.7 to 7.09 MCPS CPU_PEAK(MAX) reported by
sof_perf_analyzer.py. The peak varies a bit time. If several
gain instances ramp simulatenously in stream start, the peak
MCPS consumption could be source for xruns and glitches if overall
load is high.

The change with linear curve is barely audible. The
computationally heavier Windows fade exponential curve is required
only with Windows OS. Since Windows is not using ALSA topologies
this change does not impact it.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",10,64,1
"thesofproject/sof","833a558b8d343ee7fe95dea4223008e5b04e6846","singalsu","2023-08-30 13:47:47","false","Audio: Multiband-DRC: Add switch control for IPC4

This patch adds switch control handling into multiband_drc_set_config()
operation. The switch control is a set large config with
param_id set to SOF_IPC4_SWITCH_CONTROL_PARAM_ID.

The patch changes config_id to param_id in this function. The
config_id name was confusing.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",25,63,1
"thesofproject/sof","51233fe16d0dd935ec6707aeaf327e852d3014eb","singalsu","2018-08-08 13:45:56","false","EQ FIR: Improve robustness with configuration blobs

This patch prevents an error if the EQ responses to channels mapping
table in the configuration blob contains less channels than current
number of channels in firmware. Without this check the lookup from blob
can go past the table. Reporting an error depended on successive blob
content to detect corrupt blob and was not guaranteed.

The situation is not changed to stop to error but instead extrapolate
the table by applying 1st channel EQ for additional channels. It e.g.
helps to duplicate mono effect EQ to all channels without need to make
blobs with mapping to match max. channels count of SOF. The used response
index for each channel can be seen from trace.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",19,2,0
"thesofproject/sof","9af711c76146224d6fb271ceb920620adbc34b5e","jajanusz","2019-01-11 20:07:45","false","rimage: remove config.h dependency

man_* files don't need it
pkcs can use PEM_KEY_PREFIX from passed in defines

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",55,7,0
"thesofproject/sof","f8107edba0659e437f964bbb24cce8bd63e0ad76","lrgirdwo","2021-03-29 10:30:26","false","pipeline: move some static APIs to where they are used.

Certain static inline APIs are only used in one place so move them there.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",80,34,0
"thesofproject/sof","29e46af073a304cd54353e472e4e35c8a1776545","plbossart","2021-09-10 23:49:54","false","topology1: pipe-eq-iir-eq-fir-volume-playback: remove duplicate volume

The same volume information is present twice, remove the one that
seems out of place in the pipeline.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",117,39,0
"thesofproject/sof","6c290043f7ea77fbf935904ee767989c6a07fcdc","lrgirdwo","2021-05-31 19:17:47","false","ipc: abstraction: Add initial IPC4 support.

This patch adds the initial IPC4 messaging structures as used by existing
host middle ware. These are mapped onto existing pipeline APIs to support
creation of certain pipeline elements using IPC4.

This patch only upstream the interfaces, the IPC handler is to follow.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",83,36,0
"thesofproject/sof","82220c823c1a3783e1a21eb5e02fb9058a64ed94","marc-hb","2023-01-10 20:02:37","false","github: add new SPDX-README.md and show it when checkpatch fails

Pleasing checkpatch is hard when adding new files.

This is tricky and comes up every time someone adds new files, examples
in #6284, #6796, #6931 , etc.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",53,55,1
"thesofproject/sof","65a68b7c313ed4fea266902c8f6945c3d4079293","marc-hb","2023-05-02 20:21:55","false",".github: upgrade all checkout actions to v3

Search and replace checkout@v2 with checkout@v3.

This finally gets rid of all warnings ""Node.js 12 actions are
deprecated"".

We've been using v3 in a few other places and never met any backwards
compatibility issue.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",54,59,1
"thesofproject/sof","571cc290a43cd177d900c1d3285dc58cfb8ee131","marc-hb","2021-05-17 23:06:03","false","xtensa/cmake: fix !CONFIG_TRACE

Looks like no one ever !CONFIG_TRACE

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",86,35,0
"thesofproject/sof","5a80db78af20d495435d49854d49ff1bea758d49","marc-hb","2022-03-10 23:08:52","false","xtensa-build-zephyr.py: give -z option a long form --zephyr-ref

This makes the code more readable and other scripts possibly too.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",112,45,1
"thesofproject/sof","16fbd5f0810d66afe1de41eb74fafdca1c0940d0","singalsu","2022-11-29 15:49:49","false","Audio: SRC: Increase stage buffer size and change copy() run condition

This patch increases the buffer between stage 1 and stage 2 by
factor 1/8. It prevents a freeze that happens with conversion
from 11025 to 8000 Hz.

Also the SRC is let run if stage 1 can consume samples or stage 2
can produce samples. There is no need to prevent run if both can't
happen.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",102,54,1
"thesofproject/sof","6f54150eae4ef401a3a087861e994c8ffe6bda1d","singalsu","2021-03-05 15:36:44","false","Drivers: DMIC: Fix FW panic when stopping both paused FIFO streams

The error can be replicated with two interactive mode arecord commands.
After launch press space key to pause both captures and then ctrl-c to
stop both. E.g.

arecord -i -Dhw:0,6 -f S16_LE -c 4 -r 48000 rec06.wav
arecord -i -Dhw:0,7 -f S16_LE -c 4 -r 16000 rec07.wav

The error happened due to no handling for pause state in DMIC DAI type.
The device was set to prepared state instead of pause that conflicted
with power management when resumed. The patch updates dmic_start() to
properly track the active FIFOs count with check of dmic->state before
setting it to COMP_STATE_ACTIVE. Start for active DMIC should no increase
it.

The dmic_stop() is updated to handle pause by removal of state setting.
The set of state is moved to dmic_trigger() to be able to use same stop
function. The dmic_irq_handler() FIFO stop is edit to set prepared
state for stopping it.

The patch alters the external PDM bus function when paused. The
clocks as feature of this patch remain active. Previously stop and
pause were the same. Since the pause is not used for capture so the
small additional power consumption of active microphone is no issue.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",73,33,0
"thesofproject/sof","3d6b7c57302f8834573f6bf7a7a8153f0b8670de","singalsu","2021-12-17 13:35:15","false","Audio: Improvements for audio_stream_copy() function

The changes are:

- Prevent the inner MIN() from being evaluated twice. Due to
macro implementation the inner MIN() is evaluated first in
comparison and second time if latter parameter for MIN() is
selected.

- memcpy() instead of memcpy_s() and no assert check is faster in
hot path. The MIN() operations before data copy ensure that
bytes_copied is within limits of sink. In a component copy speed
test this saved 1 MCPS.

- The void pointer type casts are avoided with uint8_t type. The
pointer arithmetic lines are also made more compact.

- The internal variables for byte size are changed to size_t for
similarity with other copy functions.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",117,42,1
"thesofproject/sof","c23c8ac5d387bf0c0b2f944e505f79a7ea6790aa","singalsu","2022-08-31 15:32:17","false","Drivers: DMIC: Fix risk for overflow in unmute ramp calculation

This patch adds cast to int64_t for the multiplication and adds 32 bit
saturation to ensure overflow of the product is not possible.

This function is used to calculate ramp time in IPC4 NHLT blob mode
where the time is not passed from topology. Currently rates up to
48 kHz remain under product int32_t range, so normally there is no
issue. However 96 kHz rate would always result to incorrect
LOGRAMP_TIME_MIN_MS (10 ms).

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",116,51,1
"thesofproject/sof","cada9501dd897e33d1d6f5b4b439d508fa740463","singalsu","2023-10-06 07:55:33","false","Arch: Host: Fix testbench xt build fail

This patch adds ""-std=c99 -std=gnu99 -fgnu89-inline options""
to host architecture build to prevent error with
""scripts/rebuild-testbench -p tgl"".

    src/audio/module_adapter/module_adapter.c:
    In function ‘module_adapter_reset’:

    src/audio/module_adapter/module_adapter.c:1582:
    error: ‘for’ loop initial declaration used outside C99 mode

    src/audio/module_adapter/module_adapter.c:1584: error:
    redefinition of ‘i’

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",15,64,1
"thesofproject/sof","333036f097cad04d8c4514eb736d95fc81bf27b0","RDharageswari","2020-08-13 00:49:31","false","topology: Add support for RO_volatile, WO and RW_volatile byte kcontrol

This patch adds the support for read-only volatile byte kcontrol with
access type as read and volatile to read the actual values from DSP,
write-only byte kcontrol with access type as just write and read-write
volatile byte control with access type as read, write and volatile.

Signed-off-by: Dharageswari R <dharageswari.r@intel.com>",73,26,0
"thesofproject/sof","7de934a7e795c25327bfeebfc6809cffb73c8ac2","ktrzcinx","2019-10-28 13:09:47","false","trace: Add pipeline id to volume traces

It will be helpful during debugging components
to see correlated pipeline id.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",68,17,0
"thesofproject/sof","6cfd3e5a5e439183a73c49024bd1c806c900c09c","ktrzcinx","2020-05-20 13:50:43","false","logger: Increment uuid name during ldc dump

Name and UUID value of component should be aligned with their address.

Output before change:
           ADDRESS                                    UUID NAME
        0x1FFFA000  <8b9d100c-6d78-418f-90a3-e0e805d0852b> host
        0x1FFFA01C  <8b9d100c-6d78-418f-90a3-e0e805d0852b> host
        0x1FFFA03C  <8b9d100c-6d78-418f-90a3-e0e805d0852b> host
and after:
           ADDRESS                                    UUID NAME
        0x1FFFA000  <8b9d100c-6d78-418f-90a3-e0e805d0852b> host
        0x1FFFA01C  <f11818eb-e92e-4082-82a3-dc54c604ebb3> pipe-task
        0x1FFFA03C  <34dc0385-fc2f-4f7f-82d2-6cee444533e0> volume-task
        0x1FFFA05C  <b77e677e-5ff4-4188-af14-fba8bdbf8682> volume

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",99,23,0
"thesofproject/sof","061c94e7c23e6e8a6d3f641cb733a8f2981451a3","mrajwa","2020-04-21 10:19:47","false","kpb: fix race condition in draining task

This patch fixes the race condition in the draining
task in which KPB was waiting for sink component to
free space in its input buffer while this component
was waiting for KPB to call its .copy() method
again. This problem has deeper underlying cause,
namely the lack of DMA IRQ which should signal the
end of transaction.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",84,23,0
"thesofproject/sof","9c660ec6a67f3c47388b63eee2f14d05f0bb98f7","mrajwa","2020-11-23 16:21:04","false","codec_adapter: move runtime params to codec_data

The runtime_params keeps configuration of codec therefore
codec_data structure is a better place to store it.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",75,30,0
"thesofproject/sof","ae7036dce224d40eb01f7abb8e73193572907da8","ranj063","2023-03-31 17:39:55","false","topology2: io-gateway: Do not set copier node_type

It is wrong to set a default value when creating widgets objects within
pipelines and these must be set at the top-level based on the DAI type.
So remove the default value in be-dai.conf and set the node_type
whenever the pipeline is initialized.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",56,58,1
"thesofproject/sof","5ea630dbef58d1b0c1e202d99209deac8a0b7d9d","ranj063","2023-05-05 19:42:05","false","topology2: cavs-nocodec: Make the processing pipelines optional

In preparation for generating simple copier->copier pipelines, add an
option to make the processing pipelines conditional. There is no change
in functionality or definitions. This is purely to make it easier to
exclude these pipelines/pcms/routes from the final topology.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",53,59,1
"thesofproject/sof","ef5358474a457a9fa1a2a0f0eb74c23fdd2d6103","ranj063","2021-11-02 20:03:23","false","topology2: cavs: gain-playback/capture: Add all includes

Include all dependencies to be able to build the conf file individually.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",125,41,1
"thesofproject/sof","cbab7fa0d8687d2eb355617d928aaf07e16dff07","ranj063","2022-06-21 16:12:33","false","volume: free volume config data during free

Free the memory allocated for volume config data in the free op.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",111,49,1
"thesofproject/sof","21d22a6d4ea6c1631a23c6d7e910e92e9a918270","abonislawski","2022-06-05 16:59:04","false","ipc: dai: extend Zephyr native drivers api to ipc/dai.c

This patch will extend Zephyr native drivers api
to ipc dai files and full flow with dma release will be supported

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",115,48,1
"thesofproject/sof","afc05fcb352ff344aad1e270295e18f15f262367","ranj063","2021-10-05 18:39:27","false","drivers: Intel: hda-dma: Add documentation for HDA DMA programming sequence

Spell out the HD-Audio DMA programming sequence to make it
easier to follow.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",121,40,1
"thesofproject/sof","82996c24a52cc5993953d3f88e56924f89766480","ranj063","2018-06-26 18:35:22","false","topology: add pre-defined PDM controller configs

Add some pre-defined PDM controller configs that sets the
number of active controllers and the corresponding
pdm tuples.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",5,1,0
"thesofproject/sof","252e7e75593cb5aa5f09d84aee607d31f3afd682","maruthi-machani","2022-10-19 06:59:14","false","topology1: support for dmic with 4 channels

Topology support to configure dmic with
four channels for amd platforms.

Signed-off-by: MARUTHI MACHANI <maruthi.machani@amd.com>",98,53,1
"thesofproject/sof","4d353a31a1feb802ac4b4a0ed696bcbcc034c734","pblaszko","2022-11-10 15:01:22","false","ipc4: idc: fix hdr data passed to idc_ipc msg

Fix header data passed via idc_ipc command to ipc_cmd on secondary
core.

In IPC3 handler, IPC msg header is stored in ipc->comp_data.
ipc->comp_data passed to ipc_cmd() is valid for both cases:
- when calling ipc_cmd from ipc_platform_do_cmd for IPC handling
- when calling ipc_cmd from idc_ipc for IDC handling

In IPC4 handler, ipc->comp_data is not used to store IPC msg header.
There is global structure msg_data instead. For IPC4, ipc_cmd() may be
called in two cases:
- from ipc_platform_do_cmd for IPC handling: in this case,
  msg_data.msg_in is passed via ipc_compact_read_msg to handle IPC. This
  path is correct.
- from idc_ipc to handle IDC: in this case, still ipc->comp_data is
  passed, which does not contain valid IPC header. It passes invalid
  data to secondary core.

idc_ipc function is generic for all drivers, so changing it seems to be
not recommended.
ipc_cmd function has common header for all drivers, so removing argument
is also not a solution.

Fix problem by ignoring input argument for ipc_cmd in IPC4 handler and
reading header from global msg_data struct.

Signed-off-by: Przemyslaw Blaszkowski <przemyslaw.blaszkowski@intel.com>",96,53,1
"thesofproject/sof","cdcbdae705a42578dc99d6bf54f275c699afbc81","ajye-huang","2022-12-11 07:08:52","false","topology: sof-adl-nau8825: add variant with nau8318 amplifier

Adding support for nau8318 Amplifier.

sof-adl-nau8318-nau8825:
    nau8825 headphone connects SSP0 link.
    nau8318 Amp speakers connects SSP1 link.
    bluetooth offload uses SSP2 link.

Signed-off-by: Ajye Huang <ajye_huang@compal.corp-partner.google.com>",103,54,1
"thesofproject/sof","9ca0a14b3e22026908b0143d4e799664d43c2a69","wwittbrx","2019-11-28 09:25:37","false","Topology: Fix DAI_ADD function call in sof-cml-rt1011-rt5682 topology

This patch fixes DAI_ADD function call for speaker pipeline.
The function call had incorrect number of agruments passed
which was causing issues with playback.

Signed-off-by: WojciechX Wittbrodt <wojciechx.wittbrodt@intel.com>",69,18,0
"thesofproject/sof","69db1ee0cab9d574c1be7cd0783ed68318240392","aborisovich","2023-05-18 16:00:58","false","workflows: Zephyr build-windows upgrade Zephyr SDK to 0.16.1

Zephyr main branch requires new Zephyr SDK.
Upgraded version of Zephyr SDK to newest available v0.16.1 in the
build-windows job. New SDK is backward compatible with old Zephyr
revisions so the upgrade is applied to all CI.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",50,59,1
"thesofproject/sof","7058c85fac1aee751381467319d69cd8ac5097ff","cujomalainey","2020-11-23 21:49:41","false","codeowners: add codeowners for dcblock/drc/crossover

Add google code owners for google contributed processing code

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",75,30,0
"thesofproject/sof","e1457b4071f857bd97769caef5ba291c4f57e1a0","cujomalainey","2022-01-19 20:40:52","false","ghd: update creation process

It looks like a change to the ipc creation was landed in parallel to the
hotword wrapper as the hotword wrapper is authored before, but comes after
in the relation chain. Solution is to update the hotword lib wrapper.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",113,44,1
"thesofproject/sof","1cc4a1f31ebd84e21da7e4c408e57f8560a47f8b","marc-hb","2023-05-24 23:03:15","false",".github: add LNL compilation

Because now we can.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",55,60,1
"thesofproject/sof","004b26aed98be83e9e07e99aeee01ee1479d4cd6","cujomalainey","2021-07-19 20:14:29","false","host: remove duplicate clear

pointers should have been clear on reset step which is called between
prepare and hd is allocated with rzalloc so its already 0 on first call.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",90,38,0
"thesofproject/sof","f40222a1eaae027f2f0f651d66088db6d9cc62e5","iuliana-prodan","2021-02-11 17:07:39","false","drivers: imx: esai: use rate from topology

So far we only used topologies with rate set
to 48 000Hz. This might change in the future.
So use rate from parameters passed from kernel.

While here, align sof_ipc_dai_esai_params struct
with the one from kernel.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",72,32,0
"thesofproject/sof","294a4b94b118ce20eb0b193aa2a9e2210a119a09","softwarecki","2023-10-26 11:35:33","false","lmdk: Switch to a clang compiler

Changed the compiler used to build loadable modules to clang. It has been
used for a long time to build sof. The latest xtensa toolchain no longer
has xcc compiler.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",7,65,1
"thesofproject/sof","dbd9a0e688efa968ab91f6cd1cb3c0b4e748a662","lyakh","2022-03-11 12:00:12","false","cache: platform: always use platform_shared_get() with shared data

Access to objects, defined with a SHARED_DATA attribute should only
be performed, using the platform_shared_get() function.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",113,45,1
"thesofproject/sof","bd4f0e1ac4c411b6052f701119c366fd4cdada28","lyakh","2022-04-05 15:39:40","false","coherence: convert buffer and audio-stream APIs to use __sparse_cache

To properly use buffer-locking functions many buffer and
audio-stream API functions have to use the __sparse_cache annotation too.
Note, that we don't convert comp_update_buffer_consume() and
comp_update_buffer_produce() yet. They will be converted together
with all the buffer API users to also move buffer acquisition out of
those functions into the caller scope.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",110,46,1
"thesofproject/sof","5796bf7eeba5628f50f27483263e271d4a9ec2cc","lyakh","2021-07-02 12:42:00","false","zephyr: switch LL scheduler to native timing API

Use the native Zephyr timing API for LL scheduling.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",85,37,0
"thesofproject/sof","fd2d94dd7982dddce065abeda1062ec27be08b52","cujomalainey","2021-01-15 22:56:35","false","pipeline: fix data structure linking

cppcheck was being confused as we were passing in hw_param_ctx which has
linking in the following order hw_param_ctx->data->hw_params.

Cppcheck was being confused as it failed to realize that hw_params was a
writeback method and to be honest the way it was written they way the
structures were linked was hard to see as well. Lets do all the linking
upfront so its easier to read. Cppcheck doesn't seem to complain about
this method so lets use it.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",69,31,0
"thesofproject/sof","e9baf1e60747501e72918441b5cda1d07d6a4bb3","RanderWang","2023-02-16 03:15:45","false","ipc4: copier: use a helper function to update format

Use helper function to update buffer format and avoid code duplication

Signed-off-by: Rander Wang <rander.wang@intel.com>",53,56,1
"thesofproject/sof","547132bc5d4b0aec6ec669678bd353d72971f1df","RanderWang","2023-09-21 07:12:33","false","topology2: merge multi-core test into nocodec topology

The multi-core topology was created since multi-core feature had a few
bugs at that time so it was for validation test. Now this feature works
fine so merge it into nocodec topology then it will be tested by
github CI. And we don't need to maintain a dedicated multi-core topology.

Signed-off-by: Rander Wang <rander.wang@intel.com>",21,64,1
"thesofproject/sof","17902fcbf00ef9491868ee7eebbe0395e04e90a0","aiChaoSONG","2021-07-09 03:11:26","false","topology2: Add SSP DAI class

Add SSP DAI class definition, SSP DAI objects can be
instantiated as:

Object.Dai.SSP.""N"" {
    direction		""duplex""
    dai_name		""NoCodec-0""
    id 			0
    quirks		""lbm_mode""
    sample_bits		24
    Object.hw_config.""0"" {
	    mclk_freq	24000000
	    bclk_freq	4800000
	    tdm_slot_width	25
    }
    Object.dai.""playback"" {
	    period_source_count	2
	    period_sink_count	0
    }
    Object.dai.""capture"" {
	    period_source_count	0
	    period_sink_count	2
    }
}

Signed-off-by: Ranjani Sridharan <ranjani.sidharan@linux.intel.com>
Signed-off-by: Chao Song <chao.song@linux.intel.com>",86,37,0
"thesofproject/sof","58a13cefac9021974866633d11884af6f4a9fae4","ranj063","2021-09-25 00:12:22","false","pipeline: prevent trigger IPC timeout with xruns

START/RELEASE trigger IPC responses are now sent
from the pipeline task. When one of the connected
pipelines runs into an xrun even before the current
pipeline has a chance to run, the trigger IPC
will time out eventually. Fix this by returning
an error response. There is no need to trigger
the pipeline in this case as the pipeline
will be stopped by the host anyway.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",118,40,0
"thesofproject/sof","7ed22a0d9bcc75efb0fc2f7211a98090d20cdc64","ranj063","2021-10-27 02:35:35","false","Revert ""pipeline: (cosmetic) move a function""

This reverts commit b5506edeeaad84fa50a77aca58f792a0a99c706d.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",127,41,1
"thesofproject/sof","838d00139095d9455c2de7564a838eae77fa4ddd","kv2019i","2022-10-10 13:53:45","false","pipeline: add pipeline and component ids to pipe_foo() output for Zephyr

The component and pipeline identifiers were direct part of the older
SOF dictionary format. This information was added directly to encoded
output and was not part of the log message. When using Zephyr logging
subsystem, this type of audio specific information has be to put
as part of the log messages like any other log content.

Modify pipe_{err,warn,info,dbg} macros to add pipeline and component
identifiers to all printed log messages.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",99,52,1
"thesofproject/sof","4d9244f08041a8f3d0a8940b37c7b7510bc0c73e","bkokoszx","2020-05-04 14:59:58","false","detector: replace private data model functions with generic ones

This commit replaces private detector component functions with
generic ones in order to remove code duplication.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",94,23,0
"thesofproject/sof","03b80eaf44209b7d62a2fbdbd3d606ae0b87a68c","bkokoszx","2020-07-29 07:57:37","false","audio: move test components into the src/samples/audio dir

This commit moves all of the template components into
src/samples/audio directory in order to avoid confusion
during 3rd part IP integration process.

Building samples are set by default only from chrome
configs.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",80,26,0
"thesofproject/sof","9f2d19d30cd9adad203f116e888af2c27a777531","kv2019i","2023-10-02 11:43:18","false","vmh_free: cosmetic changes to local variable

The_very_long_variable names make it hard to modify
the code and keep to under-100-characters coding
guidelines of the codebase.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",16,64,1
"thesofproject/sof","a3cb46d8c0c4b2f081ea9251c54652842f8db295","bardliao","2023-05-02 01:45:50","false","topology2: cavs-sdw: make jack optional

We assume sdw jack is always there in a sdw topology. This commit
makes it be optional to deal with the sdw amp only case.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",54,59,1
"thesofproject/sof","1b9681e00f5135072ec196119ab34d331593ac68","singalsu","2023-11-03 12:44:54","false","Tools: Test: Audio: Add possibility to test ASRC with src_test.m

The same tests can be applied for ASRC in sychronous mode. This
patch allows to pass component name as last argument. Use it
this way:

src_test(32, 32, 44100, 48000, 0, 1, 'asrc');

or

src_test(32, 32, 44100, 48000, 0, 1, 'src');
src_test(32, 32, 44100, 48000, 0, 1);

To run ASRC or SRC. See ""help src_test"" output for all
test options.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",4,65,1
"thesofproject/sof","37cd893d2502d551343420c402a7d8471f46fd1e","singalsu","2021-11-10 11:26:23","false","Audio: Optimize saturation inline functions in format.h

This patch adds two included header files format_generic.h and
format_hifi3.h. The latter contains intrinsics operations
optimized versions of 16, 24, and 32 bit saturations. Generic
header contains the previous C versions those will be used
for anything else but xt-xcc HiFi3 compatible build.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",127,41,1
"thesofproject/sof","15896419037114106b8989a096229bd0198d34ec","aborisovich","2022-01-26 09:48:20","false","Fixed warning of wrong variable type in fprintf

Fixed warning where variable passed to fprintf was of type size_t and
fprintf expected format of long int.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",104,44,1
"thesofproject/sof","68232067617000d8a69d6d98505565c4b047b005","cujomalainey","2020-12-10 02:28:24","false","oss-fuzz: add seed corpus

There are simply a dump of a series of messages from the kernel of
messages sent to the firmware. This will be used by the fuzzer to infer
inputs to tests against the the firmware.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",73,30,0
"thesofproject/sof","68da12b195e08101b6e4475a99d810f3fb8da6f4","iuliana-prodan","2023-04-28 02:05:25","false","ASRC: Update parameter type to match the header

Update parameter type for asrc_initialise() to match those
from header file.

This fixes ""error: conflicting types for 'asrc_initialise'"".

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",52,59,1
"thesofproject/sof","b96077cde05cb512ab0cfc1fa8ccf933e5f25b25","iuliana-prodan","2021-07-23 14:18:07","false","zephyr: intel: remove zephyr_ll from mandatory files

Remove zephyr_ll.c from mandatory files for building
SOF with Zephyr and include it where necessary: in CAVS 1.5,
CAVS 1.8, CAVS 2.0 and CAVS 2.5.

While here, add ll_schedule for BROADWELL and BAYTRAIL
when building SOF with Zephyr.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",98,38,0
"thesofproject/sof","ea4cd1fbd4211db318663128acd03850f7feed76","cujomalainey","2018-09-05 21:57:37","false","Add link to unit testing documentation

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",31,3,0
"thesofproject/sof","3e06a3569a468d5bbea6855eb58f6e1b8d45e4a5","mrajwa","2019-06-12 21:20:15","false","Kconfig: add option to enable CONFIG_LP_SRAM

Choose to power ON LPSRAM banks in Kconfig menu.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",48,12,0
"thesofproject/sof","50d707c3ce83e7d849117415fe8b090949bb4d9c","lgirdwood","2018-09-04 10:52:35","true","Merge pull request #305 from singalsu/eq_iir_enable_nonconfigured_proposal

EQ IIR: Enable non-configured usage plus clean up traces texts",30,3,0
"thesofproject/sof","09dadff771309c7988401fc170ad151e60e14d82","mrajwa","2020-09-30 15:49:24","false","topology: add codec_adapter component

This patch adds codec_adapter component in the topology
of SoF.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",66,28,0
"thesofproject/sof","ace76bc6ec803f0a7fb902bffe38c4656b8f8098","lgirdwood","2018-11-22 11:05:37","true","Merge pull request #607 from xiulipan/pr/etracefix

trace: increase trace pos for each event",40,6,0
"thesofproject/sof","f756455e90156f5b4965e8ab2751d26619dff9e0","lgirdwood","2018-06-26 19:23:45","true","Merge pull request #6 from ranj063/test_topology

Add more test topologies",5,1,0
"thesofproject/sof","70406a0db069aecc615f744f8c26a51aab24bf79","aborisovich","2022-08-01 12:33:05","false","scripts: added versioning to xtensa-build-zephyr.py and west manifest

Added versioning to scripts/xtensa-build-zephyr.py to get version
information when incompatible changes are done to the script.
Added yml schema version number to west.yml manifest.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",111,50,1
"thesofproject/sof","85a2e6dd9ec220bbd66382b12acfc861d0d663f3","andyross","2023-03-16 02:30:59","false","platform: mt8195: Support C++ linkage with native/vendor xcc

At least some versions of the Cadence toolchain for this platform are
built with a slightly variant libc (vs. the newlib build which seems
more common for other SOF devices).  That's fine in principle, SOF
doesn't call anything out of the libc anyway.  But when linking with
the C++ standard libraries, it pulls symbols out that need to go in
otherwise-unrecognized linker sections.  And it wants to see an
_unlink_r() function (the reentrant worker underneath unlink())
defined for reasons that completely escape me.

Signed-off-by: Andy Ross <andyross@google.com>",56,57,1
"thesofproject/sof","d40fb8fc99352e9b631fba83ba9384747366ccb7","RanderWang","2022-08-24 07:32:31","false","topology2: add stream token in topology2

Add stream d0i3 token

Signed-off-by: Rander Wang <rander.wang@intel.com>",111,51,1
"thesofproject/sof","ba0393726453b239b4cfbdc900decf1e8b4cc500","RanderWang","2022-08-30 05:13:08","false","topolog2: add deep buffer support on HDA platforms

Deep buffer uses large 100ms dma buffer size and
it also enables lp mode.

Signed-off-by: Rander Wang <rander.wang@intel.com>",114,51,1
"thesofproject/sof","751d0a967e765ac193e7e75b38c30b11bbc37c51","RanderWang","2022-02-11 03:23:21","false","ipc4: add set|get large config support

ipc4 driver uses set|get large config to control volume

Signed-off-by: Rander Wang <rander.wang@intel.com>",108,44,1
"thesofproject/sof","4fb9fe00575bc2e9f14570803d811987fb27f010","kv2019i","2023-08-24 16:22:29","false","config: lnl+mtl: fix length of ADSP.man CSE manifest

The ADSP.man contents is different for ACE_V1_5 layout
compared to CAVS_V2_5 layout. so the ADSP.man length should
be adjusted accordingly.

With this fix, sof_ri_info.py can be used to analyze
LNL and MTL firmware images created with rimage.

Closes: https://github.com/thesofproject/sof/issues/8073
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",26,63,1
"thesofproject/sof","c7674e85e91b0afeb0a930034b53426ef3720c97","kv2019i","2022-10-05 16:12:34","false","audio: buffer: fix crash with IPC4 build and DBG log level

A null dereference is hit when comp_update_buffer_produce() or
comp_update_buffer_consume() is called with either a NULL
buffer->sink or buffer->source. This condition happens
regularly in IPC4 builds.

Issue is limited to SOF builds with logging at DEBUG level.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",98,52,1
"thesofproject/sof","434466e373197c9c3ca3b4751987ecf97284caf8","kv2019i","2023-08-29 11:42:09","false","ipc4: helper: adhere to cached/uncached interface

source_set_ibs() and source_set_obs() take a cached pointer.
Fix code in ipc_comp_connect() to adhere to the prototype.

Fixes sparse warnings:

ipc4/helper.c:389:49: warning: incorrect type in argument 1 (different address spaces)
ipc4/helper.c:390:45: warning: incorrect type in argument 1 (different address spaces)

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",25,63,1
"thesofproject/sof","88b609ed07305538bec876500cfa49f203eb3099","serhiy-katsyuba-intel","2023-10-12 15:20:35","false","ipc4: Add cross-core binding support

Implements binding of two pipelines from different cores so stream could
travel cross-core.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",10,64,1
"thesofproject/sof","e393b3361981d8677e6784a4cb92b99fdfc805a2","lgirdwood","2018-06-26 11:12:42","true","Merge pull request #1 from ranj063/topic/tone

Tone related changes in topology",4,1,0
"thesofproject/sof","e902549070c6eed1f84eb8a8f2599e8f025a7ff2","lgirdwood","2018-07-24 08:53:42","true","Merge pull request #139 from RanderWang/ipc_4bytes

ipc: Refine some IPC data structures to make its size 4bytes aligned",13,2,0
"thesofproject/sof","7d6dc96cca7fe4753318cb79b430b3b0fa4c440f","slawblauciak","2018-10-23 12:34:00","false","Sync DAI HDA DMA start with the internal work queue

The internal work queue runs independently at a steady rate,
which caused the first DMA copy to be late in relation to DMA start.

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",27,5,0
"thesofproject/sof","8ca92a4b3f040e3b0a8250e9eed94a632fb7aade","keyonjie","2019-05-17 02:18:48","false","topology: sof-glk-da7219-kwd: add virtual widgets for driver

Add virtual widgets to remove error warnings in kernel dmesg logs, this
is also aligned to sof-glk-da7219 topology file.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",61,11,0
"thesofproject/sof","418fa649a2574a9ff8723615de095ae8341d0eab","keyonjie","2020-07-17 09:01:25","false","platform: rename CONFIG_CAVS_LPRO to CONFIG_CAVS_LPRO_ONLY

Today how we are using CONFIG_CAVS_LPRO is actually using LPRO only,
rename to make the naming accurate.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",80,26,0
"thesofproject/sof","c2098a1225475f5ba03ba808a726eedf6cc46570","keyonjie","2020-06-01 05:02:37","false","topology: pcm: add uuid token support

Add the uuid token to host widget for the future use.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",97,24,0
"thesofproject/sof","7ff529055478d56c2277514133b361baac5add4e","plbossart","2021-06-01 21:35:06","false","ipc: dai: add flags for DAI_CONFIG IPC

The DAI_CONFIG IPC is currently used both for hw_params and
hw_free. For some DAIs, there are hacky ways with e.g. invalid DMA
channels to indicate a hw_free. Rather than adding a new IPC for
hw_params and hw_free, let's add a flag that indicates if the
DAI_CONFIG is really applied during a hw_params or hw_free stage.

This is tagged as a ABI 3.19 change.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",82,36,0
"thesofproject/sof","676bf603c9b90994fab4d3a2c82c409bdafeda7d","plbossart","2020-08-31 18:55:37","false","dai: use inclusive language for bclk and fsync

Mirror changes in alsa-lib, use codec_provider (CP) and
codec_consumer (CM)

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",71,27,0
"thesofproject/sof","73dce1cef5c6a7bf0f63534d7d20024fcc09324f","plbossart","2020-02-20 21:30:35","false","kpb: fix unused variable warning

Fix cppcheck warning

[src/audio/kpb.c:1233]: (style) Unused variable: dst
[src/audio/kpb.c:1376]: (style) Unused variable: dst
[src/audio/kpb.c:1377]: (style) Unused variable: src

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",80,21,0
"thesofproject/sof","7b212e6a54fde3f4fec5a5efece2291dcb57192f","mrajwa","2019-02-11 23:18:13","false","KPB: add component key phrase buffer

The key phrase buffer component skeleton. This component enables
to copy real time data stream from source to sink and in the same
time buffers this data into its own internal ""history buffer"".
Data from internal buffer can be drained later on specific event.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",59,8,0
"thesofproject/sof","2b073d06d145a044170b5acbf4d898133f02cb48","lgirdwood","2018-07-03 09:08:24","true","Merge pull request #38 from tlauda/topic/unneeded_boot_sec_core

boot_loader: remove function for secondary core",7,1,0
"thesofproject/sof","aeb18eefd9a4a7b03b6159bca3427031e254db01","lgirdwood","2018-10-06 21:27:35","true","Merge pull request #459 from tlauda/topic/timer-driven-scheduling

schedule: implement timer driven scheduling",33,4,0
"thesofproject/sof","708dc5275c069964a2d52fc23786359377fe5758","lgirdwood","2018-07-03 09:07:02","true","Merge pull request #37 from tlauda/topic/cpu_read_threadptr

cpu: cpu_read_threadptr",7,1,0
"thesofproject/sof","824b68b7854565b56acde6a75c6a647dbd969002","mrajwa","2020-07-09 01:07:07","false","kpb: update kpb HB free size during RT copies

This patch decreases history buffer free size during
real time copies therefore we avoid history data overwrite
when draining is delayed.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",78,25,0
"thesofproject/sof","d696d8f8bad1490575a8293e0982786300eb52db","lgirdwood","2018-07-19 12:24:36","true","Merge pull request #104 from zhigang-wu/topic/platform-stable1

pipeline:make the IPC API atomic.",13,2,0
"thesofproject/sof","ffb4d7b3c7ee02c8c03083765476f9f09c2f4f96","lgirdwood","2018-08-01 14:58:54","true","Merge pull request #179 from tlauda/topic/dai_dma_release_not_needed

dai: dma_release is no longer needed",19,2,0
"thesofproject/sof","0682b6e923fa655b576ec71f03f696d6fd7f81ee","jajanusz","2019-01-18 10:22:44","false","cmake: debug build support

Change DEBUG_BUILD define to use Kconfig's CONFIG_DEBUG

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",57,7,0
"thesofproject/sof","e4136a4e0ea4a3f7812a8d65428829b85d554aa6","jxstelter","2023-09-22 10:58:20","false","lnl: memory: expand HEAPMEM_SIZE

FW infrastructure shall support buffering of historic data
from 1ch up to 6 channels 24bit samples in 24bit container.
For this reason, the heap should be extended.Increase HEAPMEM_SIZE
by 0x90000 because for audio format 16000Hz/6ch/24bit
history_buffer_size = 16 * 6 * 3 * 2100s = 604800 bytes (0x93A80)

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",21,64,1
"thesofproject/sof","4f78c3b053013860614c23fa4903fc125c017ff0","cujomalainey","2021-09-21 00:15:44","false","library: add missing header for ipc4

This header is needed for building IPC4 code

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",118,40,0
"thesofproject/sof","f28dc601cb5003f5bfe794490f296aa0a8469ce6","tinghan-shen","2022-12-13 03:38:06","false","platform: Add mt8188 to Kconfig

Add mt8188 to Kconfig.

Signed-off-by: Tinghan Shen <tinghan.shen@mediatek.com>",97,54,1
"thesofproject/sof","92ff6b3aff6241a938deecf5b72f7858feafc9d9","ranj063","2022-01-07 21:02:44","false","codec_adapter: rename struct comp_data to struct processing_module

Rename struct comp_data to processing_module. No functional change.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","5f4be328228351cad7f2e00e56e4c91ca882e7ab","ranj063","2023-05-14 00:25:59","false","copier: Optimize the DAI copy for multiple endpoint DAIs

Currently copying from the multiple endpoint buffer to the DMA involves
2 copies, first from the multi_endpoint_buffer to the endpoint_buffer
and then from the endpoint_buffer to the DMA buffer. Remove the
intermediate buffer copy so that demux and copy can be performed directly
from the multi_endpoint_buffer to the DMA buffer. Similarly, for the
capture case, remove the intermediate copy to the endpoint buffer from
the DMA buffer.

Add a couple of fields in struct copier_data to save the channel map and
channel count for multiple endpoint DAIs. Also remove the
copy_single_channel field as this is set directly in the process
callback in the dai_data now.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",51,59,1
"thesofproject/sof","3b8e2e41139c1cfaf800e4a3fca0a24e4fa43b6a","tinghan-shen","2022-06-28 03:19:22","false","config: Add default config for mt8188

Add default config for mt8188 platform.

Signed-off-by: Tinghan Shen <tinghan.shen@mediatek.com>",113,49,1
"thesofproject/sof","328e1650d8b403822a334f3bebb90d86e7f0eff6","ranj063","2021-11-02 20:02:07","false","topology2: cavs: mixin-playback: Add all includes

Include all dependencies to be able to build the conf file individually.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",125,41,1
"thesofproject/sof","317f80b4f26815da51c48bd6f93b70a72c5b1c1c","ranj063","2022-01-11 00:24:20","false","codec_adapter: waves: make interface ops static

and remove waves.h

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","5ac79eae01fbd355ab3d2817816dab45747cdfe1","RanderWang","2022-12-15 07:11:23","false","mutex: add mutex support in XTOS

It uses spin lock to support mutex.

Suggested-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Suggested-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>
Signed-off-by: Rander Wang <rander.wang@intel.com>",92,54,1
"thesofproject/sof","1394832fd701128268cd662dc7e45831e0eecdbb","RanderWang","2022-09-07 07:39:43","false","topology2: add more audio formats support for deep buffer pipeline

Add 32bits/32bits support for deep buffer.

Signed-off-by: Rander Wang <rander.wang@intel.com>",106,51,1
"thesofproject/sof","1d6f12cfb52bafffedd98d531f75a07cd6b1d083","xiulipan","2018-10-12 05:07:17","false","scripts: add script for qemu check

usage: run this script in the qemu folder

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",33,4,0
"thesofproject/sof","408d9358f674c8eff12a15822ee113a24a3c20cd","xiulipan","2018-06-10 07:32:24","false","configure: Change install prefix for bin and keys

Install prefix will not influce PEM install path. Add the check to let
PEM can install with the prefix.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",1,0,0
"thesofproject/sof","bfa8bf7ba1f6f18b42966d2ba25ca0264f6a4b8e","xiulipan","2020-03-20 05:30:48","false","scripts: make verbose build into an option

Disable verbose build by default in build script.
It would be too annoying if we do not need to debug
with make systems.

Use -v option to enable verbose log if need.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",68,22,0
"thesofproject/sof","adb7b14793b718e08d3e3a7d995e3dd117d92eb0","fkwasowi","2023-05-08 06:55:33","false","Peakvol: correct volume processing function

When calculating the out_sample value,
the AE_SLAI32S function is used,
which rounds the result to the value 1/(-1),
resulting in a rectangular signal.

Signed-off-by: Kwasowiec, Fabiola <fabiola.kwasowiec@intel.com>",53,59,1
"thesofproject/sof","4c895a56eb97845211aba1be95d4c7c69a237994","marcinszkudlinski","2023-09-07 10:14:03","false","mod: remove buffer_acquire from module_adapter

This change removes all buffer_acquire/buffer_release
from module adapter

The change does not contain any optimalizations that now may
be easy to do. They will be introduced in separate PR

this is a continuation of changes
from commit 4a036999118cfa7e491cbefc8eb6b737f50b7e33

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",21,63,1
"thesofproject/sof","30241d0d2034194ef7bef61f7c9f38afd95489f3","tlauda","2019-09-16 09:54:20","false","dma: add PLATFORM_MAX_DMA_CHAN definition

Adds PLATFORM_MAX_DMA_CHAN definition to every platform.
This way generic API can retrieve this information.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",61,15,0
"thesofproject/sof","332aac8f3b3d6241b78d947408f79b7e76de66d7","tlauda","2018-08-10 09:51:33","false","idc: allow to send blocking messages to cores

Adds functionality of sending blocking IDC messages
to other cores.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",19,2,0
"thesofproject/sof","dca94d5da8fecf76c993badbd16cf19c9f51dbae","ktrzcinx","2019-11-07 09:30:42","false","kconfig: volume: selective build by CONFIG_FORMAT

Include in footprint only support for selected
data formats. It may make footprint lighter.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",53,17,0
"thesofproject/sof","5eb9c492589b2bc39866f2a7b4d9b7b20e718ee3","ktrzcinx","2020-09-24 11:35:10","false","logger: Log fread error only when it happened

fread may return 0 when some error occurred or nothig has been reded.
Moreover errno may not be set on Windows plaform, use ferror
instead. See:
https://www.gnu.org/software/gnulib/manual/html_node/fread.html

Fixes: 337afc4f3809: (""logger: add error message when reading sof/etrace instead of sof/trace"")

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",66,28,0
"thesofproject/sof","4194dae527d628efde6394ab40c19f373b862230","cujomalainey","2018-11-16 23:27:33","false","Update sof-hsw-rt5640

Update comments and graph

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",40,5,0
"thesofproject/sof","89ec377cb55de04270dd6fa2bd8672c3dea3e83d","keyonjie","2021-08-25 02:54:35","false","dma-trace: add check to avoid dereference from NULL

The DMA trace is not necessary enabled so the trace_data could be NULL,
add check to avoid dereference from NULL pointer and panics.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",121,39,0
"thesofproject/sof","8a438296ed055d281033407ec0be77d1ab62f9ea","keyonjie","2020-06-01 04:19:12","false","topology: mixer: add uuid token support

Add the uuid token to mixer widget for the future use.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",97,24,0
"thesofproject/sof","8a90be118c08d9ee82b491e64137aa0d5c04cdde","crazoes","2020-06-18 06:14:48","false","scripts: build-tools.sh: Make tools individually buildable

More control over which tools should be built, instead of building
everything every time.

Note: All the build files will be removed every time this script is ran
since tools are not independent of each other.

Signed-off-by: Shreeya Patel <shreeya.patel23498@gmail.com>",77,25,0
"thesofproject/sof","fccf52133104987d9a532e6a9c332ba5c7a1bd91","ktrzcinx","2020-09-22 08:49:43","false","travis: Scan patch codestyle

Checkpatch is a tool which checks patch code style
alignment with Linux kernel code.
By the way print short graphs of used commits, to
show whats under test.
Checkpatch call is precede by `set -x`, to show used
arguments values, especially checked commits range.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",67,28,0
"thesofproject/sof","3bc040271d45f423b846ff69aa5b3b5ceb26dd08","xiulipan","2019-01-30 07:51:02","false","scripts: replace alsa-lib with sof mirror

Use local version that still in review stage that we can have test
before final merge in upstream.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",57,8,0
"thesofproject/sof","a571fdb8e9125477fe5cb67b3ca5db9dd7ee78d7","xiulipan","2021-01-12 09:14:02","false","tools: sof_ri_info: add EHL support

Add EHL prod key
Add EHL memory layout

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",74,31,0
"thesofproject/sof","323f255a5b7625cb2b8b038153d69e060fef2db6","xiulipan","2019-01-17 10:57:04","false","CI: travis: add QEMU boot test for skl, kbl, cnl

Add QEMU boot test to remaining unsupported SKL, KBL, CNL.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",56,7,0
"thesofproject/sof","6c7a1512c6bc645718da68abd889ec44e99ea3d2","softwarecki","2023-02-27 09:52:58","false","hash: Remove old hash functions

Removed currently unused functions.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",58,57,1
"thesofproject/sof","b91af845b73e5b188e2b448955f21396f016c884","gongjun-song","2022-10-29 07:46:01","false","topology1: Add sof-rpl-rt711-l0-rt1318-l12-rt714-l3

Audio hardware configuration of SKU 0C11 product is rt711 on link0,
two rt1318s on link1 and link2, rt714 on link3

Signed-off-by: Gongjun Song <gongjun.song@intel.com>",93,53,1
"thesofproject/sof","ebdb41a759205c97a58abb0301216a3a11ad832a","fkwasowi","2023-03-29 07:57:53","false","kpb: update UUID

uuid distinction for IPC4 and IPC3
regarding Windows compatibility

Signed-off-by: Kwasowiec, Fabiola <fabiola.kwasowiec@intel.com>",58,58,1
"thesofproject/sof","20e39758f018ed80ac716b56255d7aa63b887f5b","iganakov","2022-12-12 18:48:38","false","module_adapter: fix large blob processing

Use correct IPC4 mailbox size. Correct
calculation of fragment_size.

Signed-off-by: Ievgen Ganakov <ievgen.ganakov@intel.com>",103,54,1
"thesofproject/sof","d1554013434215a5d04e91092c02758ce1ede6ee","singalsu","2022-01-25 15:16:49","false","Tools: Testbench: Fix long line

The line with multiband_drc library was too long for
checkpatch.pl check.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",104,44,1
"thesofproject/sof","961e4a645df6748e693d94165321932e5e8004d2","singalsu","2023-05-04 13:52:15","false","Tools: Topology2: Use more specific src format .conf files

This patch replaces src_format.conf and src_passthrough_format.conf
with more specific formats definitions for host copiers,
pass-through components, playback src, and capture src.

The DSP internal pipelines are 32 bits, so src_s32_passthrough.conf
is used for components like gain those pass the 8 - 192 kHz
rates with s32 format.

The formats in src_format_sxx_to_s32_convert.conf is for use for
for playback host copier. Input formats are s16/24/32 and the only
output format is s32. Similarly the  src_format_s32_to_sxx_convert.conf
is for capture host copier.

The formats for playback SRC are in src_format_s32_convert_to_48k.conf,
and the formats for capture are in src_format_s32_convert_from_48k.conf.

The new formats definitions use the input_audio_format and
output_audio_format objects instead of audio_format. The unnecessary
word lengths are removed to minimize the formats count in every
component.

The pipelines host-copier-gain-src-mixin-playback.conf and
src-gain-mixin-playback.conf those used the previous format definitions
are updated with these changes.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",53,59,1
"thesofproject/sof","311c03026f1569f77f38788a995e6b6fe2940b84","singalsu","2023-09-05 10:37:38","false","Tools: Topology2: Add sof-hda-benchmark-eqiir16/24/32-tgl generate

This patch adds IIR EQ topologies build.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",24,63,1
"thesofproject/sof","274049c5a22b0909ef8d8c3e1383531dfaeb8114","singalsu","2020-02-11 10:28:29","false","Testbench: Add packed attribute to file component IPC struct

This patch fixes build fail of testbench. The packed attribute
is added similarly as in IPC structs of other components. The
reported error with gcc 9.2.1 is:

sof/tools/testbench/file.c:408:11: error: converting a packed
‘struct sof_ipc_comp’ pointer (alignment 1) to a
‘struct sof_ipc_comp_file’ pointer (alignment 8) may result in
an unaligned pointer value [-Werror=address-of-packed-member]
408 | (struct sof_ipc_comp_file *)comp;

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",79,20,0
"thesofproject/sof","2c9bb6372e5a3a103bf604977859c72cbd83a081","tlauda","2020-04-29 11:56:10","false","cavs: platform: fix debug region size in FW ready

Fixes debug region size passed in FW ready message.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",93,23,0
"thesofproject/sof","1b57609a1ef9a0e5599dee8566939171178b0572","tlauda","2020-03-26 16:48:03","false","volume: do not schedule ramping as separate task

We should not be scheduling ramping as a separate task.
This patch makes it a part of copy function, which allows
for removal of entire schedule related code.
Ramping is done in maximum of 1 ms chunks by using functions
for retrieval of nearest zero crossing frame.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,22,0
"thesofproject/sof","73c216a098ca5f42d188d1867aafb5d0e826101f","tlauda","2019-12-16 11:50:44","false","alloc: use dedicated trace_mem_error macros

Uses dedicated trace_mem_error macros instead of usual
trace_error calls.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",74,18,0
"thesofproject/sof","c2fce8fd1c7f54ff8ea8cf7733c3417e44d540da","tlauda","2018-09-21 13:09:06","false","clk: remove clock microseconds handling

Removes clock microseconds handling for scheduling
and work queue. In case of some clocks it is causing
too much of a drift in cycles. We still pass every
delay in microseconds, but handle it as milliseconds.
Microseconds are needed to get delays less then 1 ms.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",35,4,0
"thesofproject/sof","cf774d14e2fbba8983e11174e5c92beda2f65ade","tlauda","2020-02-10 08:24:20","false","buffer: extract invalidate and writeback functions

Extracts buffer content invalidation and writeback functions.
They are always used for DMA buffers and also need to be used
for inter-core buffers.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",80,20,0
"thesofproject/sof","fe9f9a1f363ff06c2c1763ad54e2656d61c7da56","tlauda","2019-08-09 09:08:47","false","apl: increase HP Buffer Heap and Runtime Sys Heap sizes

Increases HP Buffer Heap and Runtime System Heap sizes in order to
fit all the pipeline buffers.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",53,14,0
"thesofproject/sof","8d79b82a77f36dfc47ba851b357a71ac7fcd06ae","tlauda","2019-12-19 12:42:03","false","cavs: interrupt: move irq names to cavs header

Moves interrupt controller names to cavs platform header.
They are only used by cAVS platforms and shouldn't be
generic to xtensa architecture.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",72,19,0
"thesofproject/sof","a53d982e1675238cce9db2ced6b8c00873799879","jajanusz","2018-08-31 13:05:55","false","rimage: change feature mask from 0x1f to 0xff for ICL and later

Icelake needs FF to work, it doesn't look to break it for older platforms,
so there is no need for some ifdefs, we can make it 0xff for all.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",27,3,0
"thesofproject/sof","8a24a326aca668260f1846ae81ba452d9ecbcce0","lrgirdwo","2022-01-24 12:57:28","false","ipc4: eliminate a superfluous initialization

The err variable in ipc_cmd() doesn't have to be initialized, it is
always assigned a value.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",109,44,1
"thesofproject/sof","30aeff54933cb5ec5b570f281281ec57e4ea4511","lrgirdwo","2022-01-19 13:28:02","false","ipc4: build: fix GCC11 build warning in copier

/home/lrg/work/sof/sof/src/audio/copier.c: In function 'copier_reset':
/home/lrg/work/sof/sof/src/audio/copier.c:519:29: error: argument to 'sizeof' in 'memset' call is the same expression as the destination; did you mean to dereference it? [-Werror=sizeof-pointer-memaccess]
  519 |         memset(cd, 0, sizeof(cd));
      |                             ^
cc1: all warnings being treated as errors
make[2]: *** [CMakeFiles/sof.dir/build.make:996: CMakeFiles/sof.dir/src/audio/copier.c.o] Error 1
make[1]: *** [CMakeFiles/Makefile2:1970: CMakeFiles/sof.dir/all] Error 2
make: *** [Makefile:136: all] Error 2
""make all"" terminated with exit code 2. Build might be incomplete.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",113,44,1
"thesofproject/sof","aeaef068c1be44a0e55828474d9a59f7420efd47","jajanusz","2019-01-30 19:27:41","false","licence: update for kconfig and elf.h

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",58,8,0
"thesofproject/sof","3a65b78f5fff84bf2a75ff5048b62ec3eebd51fd","jajanusz","2019-04-25 13:05:56","false","host: replace CONFIG_HOST and CONFIG_LIB with CONFIG_LIBRARY

We don't need 3 symbols - they all are used in the same case.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",47,11,0
"thesofproject/sof","72c546366d10434c5dc654bb4bc4a9a36fed31c8","plbossart","2019-01-16 04:48:59","false","scripts/checkpatch.pl: remove trace format warnings

remove multi-line quoted strings and use of __func__

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","e69b42fccb8537e04314f5cb149b37e1912a2fca","bkokoszx","2018-11-07 15:36:56","false","host: trace: revert host traces to fprintf

Host doesn't use trace mechanism - I've reverted
all host traces to simple fprintf.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",39,5,0
"thesofproject/sof","dd09f02cd514a9e7928edf4830cbc48d650b5a9f","bkokoszx","2020-02-20 13:49:51","false","eq_fir: remove unnecessary code in prepare() function

We do not have to rewrite source/sink frame_fmt. It has been
set in eq_fir_verify_params() function.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",84,21,0
"thesofproject/sof","44d555b8e593eb834c265368defb8b2f4b777508","kv2019i","2022-08-30 13:34:15","false","selector: fix compiler warnings on unused 'dev'

comp_dbg() statements may be compiled out, so having a 'dev'
variable just for debugs is not useful and just ends up with
compiler warnings on unused variables.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",113,51,1
"thesofproject/sof","8b4cc887afb52fc2c003328eec5e4c384712c78b","bkokoszx","2019-04-15 15:54:37","false","schedule: task priority levels reversal

I've reverted level of priority tasks. Now tasks
levels are as follows:
- level 0 - highest priority;
- level 9 - lowest priority.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",49,10,0
"thesofproject/sof","3f3055adfeeeca7f53e5780e073199386fee3c0a","lgirdwood","2018-08-20 10:25:44","true","Merge pull request #236 from tlauda/topic/dw_dma_irq_refactor

dw-dma: refactor interrupt registration and unregistration",18,3,0
"thesofproject/sof","20752b7a9bf723760c017afdfa793ddb1579538b","lgirdwood","2018-08-08 09:10:02","true","Merge pull request #194 from singalsu/eq_fir_optimize_proposal

EQ FIR optimize proposal",19,2,0
"thesofproject/sof","43da16962d6478125410ddef3e68299eb2898630","lgirdwood","2018-10-31 18:38:30","true","Merge pull request #519 from ranj063/dmic_prm

dmic: fix mem alloc for dmic params",27,5,0
"thesofproject/sof","690481ae699050c85398f8f9aa41486a9bc52917","keyonjie","2021-07-05 06:31:22","false","ll_schedule: refine to remove the dependency among DSP COREs

We don't need to wait until tasks on all DSP COREs finished, before we
can configure the next interrupt to trigger the next scheduling. Imagine
scenarios that one of the CORE is taking long time to finish a high MCPS
task, we should keep tasks on other COREs freed to be scheduled during
that period.

Calculate and re-configure the interrupt at finish of each CORE, and
re-enable domain on each CORE separately.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",84,37,0
"thesofproject/sof","504ec438a90931b3ebe0889fef5ccabeca14d22b","keyonjie","2020-04-10 14:07:55","false","topology: add sample platform .m4 file for smart amplifier usage

Add an example platform usage for smart amplifier feature, where it will
use nocodec SSP LBM(Looback Mode) for data verification.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",82,22,0
"thesofproject/sof","aeea2b0935bae0f6b0f44bec900cf2d5b682c752","keyonjie","2020-11-10 02:24:46","false","topology: smart_amp: restrict channel number of PCM capabilities

Both the playback and capture PCMs should be restricted to the
corresponding SMART_PB_CH_NUM and SMART_REF_CH_NUM, as running them with
other channel numbers will not work correctly.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",73,29,0
"thesofproject/sof","e2b4a58e85bf9ff97fa65044eac5c8392193715d","kv2019i","2023-01-16 17:34:59","false","ipc4: dai: remove S32_LE hardcode for SSP DAIs

The limitation that SSP sample format is always S32_LE
does not hold. There can be I2S codecs where 16bit sample
width is used and SSP FIFO will expect 16bit samples from
DMA.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",55,55,1
"thesofproject/sof","3bb42ed67996952513e475011d0758bcd9c53a5c","mrajwa","2019-04-25 12:13:24","false","kpb: fix issue with memory deallocation

KPB entered infinite loop during memory dealocation.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",47,11,0
"thesofproject/sof","74683c43e6d388a9db6620c494c4f42d43651b65","lgirdwood","2018-07-24 08:49:12","true","Merge pull request #144 from RanderWang/exception

exception: fix ipc timeout issue on bdw",13,2,0
"thesofproject/sof","f3accb09cb23bcfcd2f58494e06681d42cd042af","mrajwa","2018-08-16 16:55:14","false","volume: Fix for min/max parameters of the volume component.

This fix solves the problem in which volume
attributes min/max were assigned to
VOL_ZERO_DB instead of parameters from IPC.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",18,2,0
"thesofproject/sof","d2721194f7a36a4586b670e259c9f696cf4688be","lgirdwood","2018-09-04 20:55:56","true","Merge pull request #66 from juimonen/testtarget

topology: make building tests into a separate target",30,3,0
"thesofproject/sof","4779aa7397d93e7b93a42cd7dfe0c79c239e5763","ranj063","2023-07-07 03:11:16","false","ipc4: Expose ipc4_update_buffer_format()

It will be needed by other modules as well.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",31,61,1
"thesofproject/sof","b92ba5557a5d5740fa0c0ea391e0ae607f2c4fc7","ranj063","2023-07-06 03:38:45","false","audio: asrc: Clean up the timestamp functions

Remove the ret variable in all functions.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",31,61,1
"thesofproject/sof","15ea48177a2b4cb93eaa9858e90a4da89f9f84b1","ranj063","2023-02-08 18:02:55","false","src: adsp_config: Use reserved bits for module init config

Use some of the reserved bits to add a new field, init_config, in struct
sof_man_module_type. This will be used to specify the type of payload
that the module expects. For now, the 2 options are to have the base
config only or the base config with an extension that contains the pin
formats. This can be extended in the future to support additional
options for modules that need more than the base config or base config +
extension.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",55,56,1
"thesofproject/sof","1071076be17acb1fa959c0ed1a6ddd8fe12e2d45","abonislawski","2019-04-04 12:49:05","false","coredump: enhancement of example file

To make it more user-friendly by getting rid of empty prompts in output

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",51,10,0
"thesofproject/sof","83870122b7990e364949278d6e1829a5bea0342a","ranj063","2022-01-14 21:30:51","false","codec_adapter: dts: remove included header

dts.h has been deleted.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",117,43,1
"thesofproject/sof","6ff198df7c9e08e5c1b2f8b29e63b91e7cf9ce6f","ranj063","2018-11-27 08:09:43","false","topology: glk: fix virtual widget warnings

Modify hard-coded virtual widgets to prevent kernel
warnings generated by the machine driver. No need to
add virtual_dapm_routes. Just adding the required virtual
widgets suffices to suppress the warnings.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",42,6,0
"thesofproject/sof","36a490414c66386d79b23f429253b5c5e079525b","ranj063","2023-05-15 22:54:33","false","copier: Save the endpoint channel map

Modify copier_set_alh_multi_gtw_channel_map() to save the channel map and
channel count for each gateway. Since the endpoint buffer is not used for
DAI copiers, there is no need to set the channel map in this case.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",51,59,1
"thesofproject/sof","88b69cc2e5ca003e2674bf104387690d27604c24","ranj063","2020-07-11 02:46:13","false","scripts: xtensa-build-all: Add support for building TGL and signing with MEU

Add support for building TGL FW and signing with MEU tool. Signing
with rimage is not supported atm.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",73,25,0
"thesofproject/sof","9983ab67a9fee68684665682dc9669250c285bc7","ranj063","2022-02-09 17:06:56","false","topology2: cavs-gain: Add PGA to control names

This is needed for sof-test to identify the controls.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",109,44,1
"thesofproject/sof","f214520b82142e2942dbcbd42c6b729c58664573","ranj063","2023-06-05 16:48:23","false","audio:mixin_mixout: Fix max sinks check

Allow up to the max sinks count.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",45,60,1
"thesofproject/sof","86497b46bf8fb4f48a63f2b7c3b20172ff262279","abonislawski","2023-10-25 12:28:24","false","rimage: mtl/lnl: fix key slot setup based on imr type

Clean cherry-picks of two commits from separate rimage repo
https://github.com/thesofproject/rimage/commits/stable-v2.7

This will properly setup partition_usage field
and remove fixed 0x23 value from MTL toml

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>
(cherry picked from commit fbea59358d06ffa86645cdf4ce0996e352742eb5)

Second, squashed LNL commit:

config/lnl.toml: drop now invalid signed_pkg.partition_usage

Fixes commit fbea59358d06 (""rimage: mtl: fix key slot setup based on imr
type"") which broke LNL compilation like this:

```
error: 1 unparsed keys left in 'signed_pkg'
error: key 'signed_pkg' parsing error
```

This commit does not change the final image (compared to before rimage
commit fbea59358d06) because the default value is now 0x20 + IMR type.

Fixes are normally submitted to the main branch first and then cherry
picked to stable branches. However MTL fbea59358d06 has been made in
stable-v2.7 first so the LNL change was also in stable-v2.7 first for
consistency.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>
(cherry picked from commit 469102a8f6052ce6a374b870ea945a84d04c3b1a)",8,65,1
"thesofproject/sof","419ee3e9ec2991b649a92e76200e4641a9232d55","ranj063","2022-07-07 01:12:21","false","volume: fix get_processing_function for IPC4

Since volume component uses the module interface, vol_data should be
accessed module_get_private_data() instead of comp_get_drvdata().

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",110,49,1
"thesofproject/sof","f10937e645bee0c748eecbdb057cb049260df153","ranj063","2022-11-17 16:02:32","false","ipc4: handler: Clarify the comment on compound messages

It isn't about multiple IPC messages but more about the delayed tasks
that are scheduled by the same IPC message.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",97,53,1
"thesofproject/sof","162c3988b88cfd0372b1f088dd62d19af8d042f1","abonislawski","2020-03-10 10:03:58","false","tgl: enable slave core boot with alternate reset vector

disable CONFIG_NO_SLAVE_CORE_ROM for tgl to use alternate reset vector

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",85,21,0
"thesofproject/sof","496ce8c5a445f36f9b674761cf02eac8a1c102d9","ranj063","2022-10-27 03:56:19","false","copier: Only copy if sink comp is active

When a copier is connected to multiple output components, the processed
data should be copied to the output  buffer only if the sink component
is also active.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",94,53,1
"thesofproject/sof","d850d94b0c657c3e492870f00bd45cd0e79ab933","makarukp","2023-01-25 08:25:36","false","hda: enable xrun handling in chain dma

Enable detection of under/overruns and report it by sending notification.

Signed-off-by: Piotr Makaruk <piotr.makaruk@intel.com>",53,56,1
"thesofproject/sof","6d9ad7a5053394dd19cd84e266e6774857296649","ranj063","2018-06-25 04:41:22","false","tokens: move SAMPLE_BITS to ssp tokens

SAMPLE_BITS is SSP specific. So move it to be part of the
ssp tokens.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",4,1,0
"thesofproject/sof","d6e3ffcc40c1b6bf2efa8a83f06181454880e742","abonislawski","2020-11-18 08:00:25","false","audio_stream: add function writing zeros

This will allow to write zeros to the buffer without
reference to a source buffer

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",73,30,0
"thesofproject/sof","ac1a63a5a0057b21e63e66ce700cf7acd5c0b9ab","singalsu","2022-12-20 16:50:12","false","Audio: Build testbench audio modules library for mux

This allows to run mux and demux components in testbench.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",90,55,1
"thesofproject/sof","cc9638558918b095ebe1297b6f269703748d2c58","singalsu","2020-01-08 16:02:29","false","EQ FIR: Extrapolate channels response map with last valid

Response channel map extrapolation uses now last valid channel
response instead of first response when there are more stream
channels than channel map on configuration blob. The change is
done for similarity with IIR. It prevents a false issue report
from static code analysis.

The extrapolation behavior is not critical and in effect type of
usage where it is common to apply the single defined response for
every channel so in that case there is no change.

In transducer equalization the blob needs to define usually a different
for every channel so also in that case extrapolation is not feasible
to let happen and a full length channel map need to be defined anyway.

The firmware trace shows which response # gets applied for channel. So
when unsure the parsing of configuration blob can be quickly checked.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",71,19,0
"thesofproject/sof","c70bd3cae52d041a0ebf658ed659d1836b6a4fe5","singalsu","2023-08-28 11:28:27","false","Audio: DC block: Convert to module API

This patch converts the component to module API. The configuration
blob handling is also changed to model handler.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",25,63,1
"thesofproject/sof","3f2096c6b958344bb3ad80f55981a726ea9d36e4","singalsu","2023-10-25 13:47:54","false","Tools: Testbench: Avoid warning about fallthrough and fix return code

The build of testbench fails at /* fallthrough */ with xt-clang
build for MTL since warnings are treated in tesbench build as
errors. The re-arrange of default and 'h' fixes also return
of -EINVAL in default case for unknown option.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",8,65,1
"thesofproject/sof","ccaff5c87e5bb2ba29fc804abde0f47bd93cebea","lgirdwood","2018-10-08 15:38:10","true","Merge pull request #458 from thesofproject/topic/sgl-array

dma: SG elem lists replaced with arrays",34,4,0
"thesofproject/sof","4e3ead009638bbba2eea801cd6c8f77e908c7eed","jajanusz","2019-01-11 20:24:02","false","cmake: add rimage build

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",55,7,0
"thesofproject/sof","1571af188b121060a45fcfe91cbf5d1d93f14d87","cujomalainey","2019-09-18 22:02:29","false","topology: cht-max98090 add missing virtual widgets

Topology will fail to probe without these widgets

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",60,16,0
"thesofproject/sof","ab7961ccbc8fba5db962f2cd69805f240f972bb1","cujomalainey","2021-05-23 18:24:45","false","ipc: check pipeline validity

We have some commands that fail to check the component's pipeline
pointer before running the command which results in various null pointer
dereferences across the codebase. Solution is to copy existing checks
and patch the code paths.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",84,36,0
"thesofproject/sof","e68f88dc609c96300996314544d551480e5c0954","iuliana-prodan","2021-05-25 17:48:26","false","init: define secondary_core_init() only on MULTICORE

Define function secondary_core_init() only on MULTICORE.
This fixes:
warning: 'secondary_core_init' defined but not used
while building SOF with Zephyr for i.MX which has only one
DSP core.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",83,36,0
"thesofproject/sof","a573a2cd07fa20574fd04a6fe060ba863a1bcef4","ktrzcinx","2020-02-10 07:44:26","false","cc_version: Align up struct size with flex array

Structures with flex array also should have size aligned to 4 bytes
at least to omit misalignment access in following data.
As long as CC_DESC is null terminated, padding data doesn't have
any impact on functionality.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",80,20,0
"thesofproject/sof","e104f84d95abdc558b396e579e0cf579ba034989","marc-hb","2021-09-28 02:22:46","false",".github/zephyr: switch the container back to the :latest version

Tired of fixing Zephyr breakages all the time (latest in
https://github.com/zephyrproject-rtos/zephyr/pull/38733)

Also unhardcode ZEPHYR_SDK_INSTALL_DIR thanks to the previous commit.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",120,40,0
"thesofproject/sof","57ee04f2d9312968a8e11fd916195bbacd667180","marc-hb","2021-07-16 09:25:23","false","trace: add _log_nodict() and enable DMA trace for Zephyr

As of July 2021 we support (too) many tracing options and this
duplication is unfortunately the only way I found to support them all
while giving the compiler the opportunity to optimize away as many
strings as possible.

Supported configurations:

- Systems with limited memory and zero space for full strings, must use
  SOF dictionary only.
- Systems with enough space for all strings to be in memory.
- Anything in between

- Support to duplicate only important message to both the DMA and the
  mailbox (the default)
- CONFIG_TRACEM: supports duplicating ALL messages to both the DMA and
  the mailbox
- CONFIG_TRACEV: supports deleting verbose statements at compile time to
  save space
- CONFIG_TRACE: support turning off all traces at compile-time

- SOF dict trace de-duplication a.k.a. ""adaptive filtering""

- Dynamic log levels per component

- Redirection to Zephyr's shared memory tracing that requires full strings.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",92,37,0
"thesofproject/sof","f0fa6616eac86c2385a330a4cc97411f966e57a2","marc-hb","2020-11-13 19:20:22","false","README: install is optional and missed ""sudo"". CMake 3.13 -B option.

Also show useful ""make help"" that lists all targets.

Show -B option of CMake that avoids changing the current directory to
the build directory: especially inconvenient considering the
recommended, CMake way to clean is to delete this directory and the
recommended way to build multiple configurations is to use multiple
build directories.

-B was introduced in CMake 3.13 which has been released two years ago
now and CMake spoils its users with a choice of ways to upgrade:

https://cmake.org/download/
 https://apt.kitware.com/
 https://pypi.org/project/cmake/

This does _not_ imply CMakeLists.txt should drop backward compatibility
with CMake < 3.13. I only think a README.md file should not keep the
majority of users in the dark only for the convenience of a minority of
obsolete CMake users.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",73,29,0
"thesofproject/sof","5f04af9f10cc0aa579dcd3c056dac9c5ff665af8","marc-hb","2022-04-23 01:04:42","false","installer: add IPC_VERSION

One-line change + new test set

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",114,47,1
"thesofproject/sof","31b3a3920220fde1ab90db39b208deb47b5c8e77","marc-hb","2021-10-13 23:39:57","false","sof_ri_info: print error messages on stderr

stderr is often highlighted with a different color.
This also makes the usual >/dev/null redirection possible.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",123,40,1
"thesofproject/sof","83f86defa4da7cd1c6a94ac0ec73b38b6c8f187e","lyakh","2021-06-25 14:44:05","false","zephyr: ll-domain: make semaphore per-core

Currently a global semaphore is used to signal all schedulers on all
cores, waiting for the next timer period. A more reliable solution is
using a per-core semaphore. This patch switched over to that
approach.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",75,37,0
"thesofproject/sof","ce5ed2d32225e973e92829a8ac80d16f1c1fe6be","lyakh","2020-03-31 15:42:57","false","topology: add a ""core"" parameter to the W_MIXER() macro

This places all SectionWidget.MIXER* topology widgets, created by
the W_MIXER() macro on the same core, on which the respective
pipeline is scheduled.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",69,22,0
"thesofproject/sof","95f7b8e68e553d0814cb00e020e128f77b64df0c","lyakh","2022-01-07 13:15:55","false","ipc: remove two unused trigger commands

COMP_TRIGGER_SUSPEND and COMP_TRIGGER_RESUME are never issues, remove
them.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",116,43,1
"thesofproject/sof","71f35296cbecaaa4a4ee8fa1fd2ec9027fb23c8b","tlauda","2019-06-07 08:22:48","false","pipeline: set preload only for playback streams

Sets preload flag only for playback streams.
Capture streams scheduled on timer no longer need
this, because new xrun handling in dai allows
for valid ppl path stop, when data is not yet
available on first timer tick.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",55,12,0
"thesofproject/sof","164d68651a667db0a2ab6771b918901e2808cb1a","tlauda","2018-06-14 08:34:35","false","ipc: add parameters validation

This patch adds parameters validation for ipc.
It uses generic macros.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",1,0,0
"thesofproject/sof","92b04717e9479f2cd3b46382e35195b3d672d4ea","balakishorepati","2021-05-26 11:52:29","false","renoir: Add support for AMD renoir platform

Add renoir platform support to build fw image.
Add renoir_defconfig for renoir platform.

Signed-off-by: Basavaraj Hiregoudar <basavaraj.hiregoudar@amd.com>
Signed-off-by: Anup Kulkarni <anup.kulkarni@amd.com>
Signed-off-by: balapati <balakishore.pati@amd.com>",86,36,0
"thesofproject/sof","3ec8e72997cff5974aeba544c869ea0404941699","lgirdwood","2018-08-23 13:15:55","true","Merge pull request #255 from tlauda/topic/dma_trace_buffer_alloc

dma-trace: allocate trace buffer only after enabling traces",19,3,0
"thesofproject/sof","fb111cdebe9744cbd458f35d608e95f028ff876e","mrajwa","2019-06-11 08:26:13","false","cmocka: update KPB tests for new dependencies

KPB source code started to use timer related features
therefore cmocka tests need to include these
dependencies.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",50,12,0
"thesofproject/sof","941dfcccb035157ec952bb07ffcafa8fa347bbc8","crazoes","2020-04-06 14:20:53","false","scripts: xtensa-build-all.sh: Use switch case

Use switch case for testing strings instead of if statements for each
case.

Signed-off-by: Shreeya Patel <shreeya.patel23498@gmail.com>",80,22,0
"thesofproject/sof","fe7fe7874a6840de68716aaad53cbcae16066577","lyakh","2019-01-16 12:18:31","false","dw-dma: fix peripheral handle field in CFG_HI

On some versions of the DesignWare DMA controller IP the peripheral
ID field in CFG_HI is split into two parts. Fix this for Sue Creek,
other platforms will have to verify that field too.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,7,0
"thesofproject/sof","9aa2c13356ca2f6b699afd8961574a2a5f85bdf3","lyakh","2023-03-21 09:02:21","false","build: upgrade to the current rimage upstream

Upgrade to the present rimage upstream version to fix tgl building
with Zephyr main branch head.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",57,58,1
"thesofproject/sof","90dd7909c7ae649602c50c0f57b7fef20aba43cf","lyakh","2020-03-31 15:32:30","false","topology: add a ""core"" parameter to the W_KPBM() macro

This places all SectionWidget.KPBM* topology widgets, created by
the W_KPBM() macro on the same core, on which the respective pipeline
is scheduled.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",69,22,0
"thesofproject/sof","44aa1193e7fb279ead728cdcd582a844520f3e53","lyakh","2019-01-10 10:31:10","false","dw-dma: (cosmetic) remove superfluous type-casts

In C casts between ""void *"" and any other pointers aren't needed.
Remove several occurrances.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",57,7,0
"thesofproject/sof","f2f75740f5934ad2018c6dc750d62e0989e0a101","lyakh","2021-05-06 14:36:20","false","ll_scheduler: (cosmetic) simplify pointer dereferencing

Replace sch->domain with a local domain pointer variable on many
occasions.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",80,35,0
"thesofproject/sof","d7cef08f05038facb8033a4c2aed62f9529c18a5","lyakh","2023-03-16 10:46:01","false","iadk: (cosmetic) use an existing pointer

iadk_modules_init() already has a pointer for mod->priv, use it.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",56,57,1
"thesofproject/sof","413c69acc891e824f834c7e7e6f465e4781f2c2f","lyakh","2019-09-06 13:03:59","false","notify: remove meaningless action

notify->list is a list head, no need to do a list-remove on it.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",60,15,0
"thesofproject/sof","e34183b0aba63d9f32043be04966c2a916b39019","lyakh","2023-01-24 15:18:12","false","kpb: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register kpb with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","5b34b81cb1d6da846a20dce690b8bf8baa944940","marc-hb","2021-03-05 04:02:02","false","xtensa-buid-all.sh: prepends $OVERRIDE_CONFIG with $SOF_TOP

commit e31afb36519f (""xtensa-build-all.sh: make it runnable from
anywhere"") missed this.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",73,33,0
"thesofproject/sof","40c9bb2e304d0cc618bc335a966478f95673ea1e","marc-hb","2021-05-12 18:23:30","false",".github: switch docker image from ':latest' to ':v0.17.3'

Even though ""latest"" is being referenced by the current
https://github.com/zephyrproject-rtos/docker-image/tree/072880b3#readme
I've been told it's too ""bleeding edge"" to be used in CI.

v0.17.3 also has libssl-dev which was the only thing we were missing.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",85,35,0
"thesofproject/sof","425a5b55777f614a7e3210b75c1ba87f17717013","marc-hb","2022-06-01 18:25:26","false",".github: add mt8186 and mt8195

Thanks to Tinghan Shen and Fred Oh for making this happen.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",115,48,1
"thesofproject/sof","c40749b9817f8d995dc504f471b97403b5acfca7","marc-hb","2020-08-10 18:59:29","false","CODEOWNERS: fix path to dmic.

Fixes commit f545e3e832ec (""dmic: move dmic driver out of the cavs
specific directory"")'

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",75,26,0
"thesofproject/sof","44a5200c87625588f0028aa08d560e68f2b8dc82","marc-hb","2022-08-18 14:16:33","false","xtensa-build-zephyr: fix pylint ""Redefine 'platform' from outer scope""

Fixes pylint warning `scripts/xtensa-build-zephyr.py:426:5: W0621:
Redefining name 'platform' from outer scope (line 14)
(redefined-outer-name)` and reduce ""grep confusion"": the script uses
`platform` A LOT.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",112,51,1
"thesofproject/sof","5faacc0cff647379cd0b0b57098f030ac39b90c7","kfrydryx","2022-11-22 12:07:18","false","platform: ace: Enable zephyr native clock control

Enable zephyr clk driver allowing for cpu clock source change

Signed-off-by: Krzysztof Frydryk <krzysztofx.frydryk@intel.com>",94,54,1
"thesofproject/sof","5e1a9c05b5753c26792cf06f4a7278a469e26a32","RanderWang","2023-08-21 02:07:23","false","copier: adjust valid format based on sample type

Adjust valid format in copier for some types of dai gateway which
need to use MSB type.

Currently sample type only affect the copier module so we don't do
it in audio_stream_fmt_conversion.

Signed-off-by: Rander Wang <rander.wang@intel.com>",24,63,1
"thesofproject/sof","1c805dbec959ee8daef8f1cd254ba6dece7e51da","nashif","2021-05-07 20:26:52","false","zephyr: move to new workq APIs

Convert remaining work queue APIs and remove to be deprecated calls.

Signed-off-by: Anas Nashif <anas.nashif@intel.com>",80,35,0
"thesofproject/sof","db3979a54543379672537511d46421ab78491e34","kuanhsuncheng","2021-09-03 10:16:56","false","mt8195: add compile support for mt8195

Add mt8195 driver and platform compile support.

Signed-off-by: YC Hung <yc.hung@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",119,39,0
"thesofproject/sof","c0062f98c7ec8d9bc03f6bfd7ff46d8fbe08a5cd","mengdonglin","2018-08-02 21:13:19","false","topology: Create HDMI only m4 file for APL

This patch creates sof_apl_hdmi.m4 to define topology for 3 playback
pipelines, FE and BE links for HDMI/DisplayPort(DP) audio. This can be
a reference to verify audio over HDMI/DP on APL platforms.

The HDMI/DP frontends are named as HDMIx, to reuse the generic HDA DSP
machine driver which checks the link names and will do extra
initialization on HDMI/DP frontends if ""HDMI"" is found in the link name.

This m4 does't include topology for using external HD-A analog codecs. We
will create another m4 file to include both HDA display and analog audio.

Signed-off-by: Mengdong Lin <mengdong.lin@linux.intel.com>",14,2,0
"thesofproject/sof","0292060f44b86c117f43c4d20cc4e00d8184fc23","ktrzcinx","2020-01-17 09:44:44","false","src: Mark input device pointer as const in processing functions

Const keyword is added to explicitly indicate that nothing in given
input devices buffer can be changed in processing functions -
- read pointers also.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",79,19,0
"thesofproject/sof","897152daca09e08fcef77e5e93214109fb0b8f4e","ktrzcinx","2020-09-07 10:40:51","false","ipc: Rename function handling SOF_IPC_GLB_TRACE_MSG

Function name should correspond IPC name.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",70,27,0
"thesofproject/sof","0297c671fc90c2e4aaa15fe8f050d6115cb5b124","ktrzcinx","2021-05-05 06:57:04","false","config: Fix 'module' parsing error messages

'key' argument must describe 'key' which triggered error message
to keep stderr output helpful.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",81,35,0
"thesofproject/sof","fd98e4b3ca7dfd53d92612c831bedae27d01130d","tlauda","2019-11-29 10:39:31","false","task: add get_deadline operation

Adds new get_deadline operation to task. It is used by EDF scheduler
to support dynamic task deadlines. With static deadline we cannot
truly support almost full DSP utilization.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",67,18,0
"thesofproject/sof","cfa339feced2fcf01b6757ed3ef697e7efab1457","jajanusz","2019-07-22 10:17:32","false","test: mux_prepare

Unit tests for mux prepare with valid and invalid formats.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",48,14,0
"thesofproject/sof","162ca407ebeb186111617febb166000f68da93ad","jajanusz","2020-03-19 09:05:58","false","test: fix pipeline tests

Initialize global objects that are required by pipelines
logic - pipeline_posn.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",68,21,0
"thesofproject/sof","1ff2760500cd5bbdbdae1fe749c427f19184067b","jajanusz","2020-02-27 14:16:00","false","panic: ignore asm in scan build

Clang cannot compile some xtensa-specific ASM, so it
has to be ignored when running static analysis.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",76,21,0
"thesofproject/sof","d0a46c26e73be76a3a8931308320dccc01795119","jajanusz","2019-04-04 15:38:18","false","host: schedule: check task_init op before calling

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",49,10,0
"thesofproject/sof","cdceac7a79756e4044a4903b89f13e86478d0855","jajanusz","2019-04-25 20:11:09","false","testbench: simplify build to use 1 target

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",48,11,0
"thesofproject/sof","64b3b1036b4d7c3b87ce51b92dce0ac80b1eb68b","dbaluta","2022-04-19 14:07:07","false","platform: Rename module_init section

.module_init sections is used to keep all components constructor
functions.

Zephyr uses -ffunction-sections option which will create a section for
each function. Unfortunately, this creates a section named .module_init
for the function module_init() used to initialize the processing module
generic layer.

Thus, places module_init() in the constructor area named .module_init
which is wrong.

To avoid this we rename .module_init section for constructors to
.initcall.

Fixes: https://github.com/thesofproject/sof/issues/5662
Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",114,46,1
"thesofproject/sof","2888212d964b1878540b02fd59783e32c4513912","dbaluta","2021-03-25 15:56:02","false","audio: codec_adapter: Fix local_buffer size computation

local buffer is used to store the output of processing function.
So, we need to compute its size based on codec_adapter output buffer
not input buffer.

For non-compressed processing the current code works because input
and output buffer have equal sizes.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",77,34,0
"thesofproject/sof","878d08831c5a43d8a05097255ac03aefb784ba3b","lgirdwood","2018-10-10 15:40:34","true","Merge pull request #98 from akloniex/trace-improvements

logger: Add support for 4 parameters passed to log message.",33,4,0
"thesofproject/sof","1024e946a487771f52796bcd75adca9aeffc7133","lgirdwood","2018-10-14 19:26:14","true","Merge pull request #482 from tlauda/topic/idc-notify

notifier: support for multicore notifications",35,4,0
"thesofproject/sof","62bae33296b0f80497a03d2d0661c6332d31069d","lgirdwood","2018-09-05 14:13:08","true","Merge pull request #311 from dabekjakub/pipeline_deref_fix

pipeline: fixed possible null dereference",31,3,0
"thesofproject/sof","e9b8c94879da9dfa214a31ee9fb8948af38f7ee6","mrajwa","2019-06-13 00:41:33","false","kpb: fix wrong trace message

Correct trace message in kpb_clear_history_buffer().

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",48,12,0
"thesofproject/sof","3507eb2d0835dab4b19cbb80f6d6ab0c1b0ef3e3","lgirdwood","2018-06-22 14:22:33","true","Merge pull request #12 from tlauda/issue-7

cavs: pm_runtime: scale down host dma l1 exit times",4,1,0
"thesofproject/sof","efe26a26c1188758447417c5b3f4060abe44fb47","mrajwa","2021-05-29 18:00:25","false","codec_adapter: generic: simplify reset procedure

After the reset codec should not need to be prepared again.
We want reset procedure to just set all the parameters to their
default values.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",83,36,0
"thesofproject/sof","7c8491e4e5aa4f835eae42af61c165bba9602ce5","mrajwa","2020-07-14 13:49:21","false","memory: add TGL HPSRAM LDOCTL missing settings

TGL introduces new LDO control register bits - HS2 which
is responsible of LDO2 control. This patch adds this missing
LDO2 settings for TGL HPSRAM memory banks.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",81,25,0
"thesofproject/sof","7a7934332f31910075f014e27629bc0b1cfad1d3","lgirdwood","2018-11-21 17:15:30","true","Merge pull request #605 from thesofproject/revert-597-topic/sof-dev-fix-version-number

Revert ""scripts: add local version number file""",39,6,0
"thesofproject/sof","1b45cdf81ac521b945cb4e4d5f8ae6411a2c78cd","lgirdwood","2018-09-26 14:12:34","true","Merge pull request #421 from tlauda/topic/workq_shared

work: shared work queue implementation",37,4,0
"thesofproject/sof","50ee7c5b5ecf77bd10f24438e18b25a646282353","lgirdwood","2018-07-06 10:57:24","true","Merge pull request #61 from tlauda/topic/cache_byt_cht

cache: change in cache functions definition",11,1,0
"thesofproject/sof","9266614004d018d987db03cac2312fb22dead2ab","fuyuntsuo","2021-05-17 12:49:24","false","audio: igo_nr: igo_nr support 48k

To roll back SSP clock setting to original one.

igo_nr now support 48k-in-48-out and the entire pipeline

DMIC_PIPELINE_48k is reverted back to 48k too.

Signed-off-by: fy.tsuo <fy.tsuo@intelli-go.com>",87,35,0
"thesofproject/sof","a0d9a4e4acf776cebba1b857fecda253e970d20f","kv2019i","2022-11-04 19:05:34","false","west.yml: upgrade Zephyr to 2e66fac6d3ff

Total of 946 commits, including following related to
intel_adsp/sparse/dmic/xtensa:

728506df6f45 soc: intel_adsp/ace: wait for lpsram power up
7e0c1a81cb54 soc: intel_adsp/ace: remove z_delay from hpsram init
e3e24b266d2d soc: xtensa: intel_adsp: ace: Fix build when CONFIG_MP_NUM_CPUS=1
dbc366918d8f tests: Enable qemu_xtensa logging tests
2dc9257ae1ae drivers: dmic: remove invalid assert on dmic->created
a574957c7457 soc: xtensa: intel_adsp: ace: set number of cpus at boot
7ffc6c31b555 samples/boards: Add intel_adsp/code_relocation sample
e98a748ad24e soc/xtensa/intel_adsp/cavs: Support for code relocation
06990e69d676 soc/xtensa/intel_adsp/cavs: Expose linker script on include
8ac6f74a7de5 arch/xtensa: Enable code relocation
fb26f18ae1c3 soc/xtensa/sample_controller: Expose linker script on include
d7f46136e013 soc/xtensa: Use standard __data_start/__data_end markers
f5dc229bc5df drivers: wifi: esp32: add softap config
dd1c88d54862 dts: xtensa: intel: fix alh base addr for cavs25
1f6d6deaef44 sparse: fix sparse warnings found in sof compilation
af5fb91a6c1f soc: intel_adsp: ipc: Do not send message until previous one is acked
0a7c25e649d1 drivers: timer: intel_adsp: Update driver to use dts Kconfig symbol
b953ff1418d2 drivers: dmic: enable dmic mono configuration
bedc2e7ab436 drivers: dmic: remove soft_reset from dmic init flow
39c2007b04ec drivers: dmic: update dmic flow initialization
ba0617417a1d tests: intel_adsp: smoke: Convert CONFIG_MP_NUM_CPUS handling
f8fba49a4102 soc: xtensa: intel_adsp: Convert CONFIG_MP_NUM_CPUS handling
0ce0f43b36bd soc: xtensa: esp32: Convert CONFIG_MP_NUM_CPUS handling
9387d8689b32 soc: xtensa: esp32: Add CONFIG_SMP protection
ad05e795986f intel_adsp: mem_window: fix definition of memory windows
f09a3a1bd675 linker: intel_adsp: discard GNU-stack notes
5760fcc8ab42 soc: xtensa: esp32_net:
b09973c460e3 soc: intel_adsp/common: remove reference to hp_sram_pm_banks
a2cb4a7ce3b9 soc: intel_adsp/ace: always inline funcs to get memory bank cnt
3ffe2654268a soc: intel_adsp/common: only memcpy segment if needed
195db14400f2 soc: intel_adsp/ace: zero out memory at ram init

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",90,53,1
"thesofproject/sof","1a34ce73dd097c5f5a7d19cc4f4fb38745cf992f","bardliao","2023-01-12 03:01:42","false","topology2: remove HDMI from topologies for MTL

There is no HDMI support on MTL RVP for now.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",54,55,1
"thesofproject/sof","e05fbff7c6cff3c3c2cac91ffd31a23e0a4b2950","mrajwa","2021-06-09 08:40:17","false","codec_adapter: cadence: get init_done status on prepare

This patch adds init_done status check at the very end of
cadence_codec_prepare() function. This is needed to know if
codec is fully prepared for the processing or not. Note we don't
do anything with the value read at prepare, we postpone final
verification until copy/process time since some codec variants
require input in order to finish its initialization.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",80,36,0
"thesofproject/sof","94db5c7b2fc066d5a7c586438ae823cd699693a8","mrajwa","2021-09-01 11:56:48","false","toolschain: update header files to support newer toolschain

This patch updates XTENSA toolschain from version RG-2017.7
to RI-2020.5.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",120,39,0
"thesofproject/sof","d542a6eff6bafcd94462e57671eeb0f48c7c3cb2","lgirdwood","2018-07-24 09:00:46","true","Merge pull request #40 from xiulipan/daiindex

dai index alignment",13,2,0
"thesofproject/sof","1236f9d8f18aecb77583d079a7fe8ce308f753c3","andyross","2023-05-02 17:09:48","false","IPC4: Handle duplicate component IDs

In the SOF scheme, component IDs are allocated by the host driver.  So
they need to be validated before use when modifying the global
component list to prevent duplicate entries from being inserted.

IPC3 was doing this already.  IPC4 had copied the form of the code in
one spot, but had missed that the ID is global across types and was
only checking for duplicate pipelines.

Signed-off-by: Andy Ross <andyross@google.com>",54,59,1
"thesofproject/sof","a25f4b0b02b51d186d2a9c6d73c8126784a61997","lgirdwood","2018-07-19 13:47:06","true","Merge pull request #36 from keqiaozhang/modules

kmod_scripts: add rt274 and tdf8532 support",13,2,0
"thesofproject/sof","2abe83886cb467e54486105412752263a82f2579","mrajwa","2019-07-29 21:09:10","false","kpb: take care of real time stream during draining

This patch checks if real time stream provided new data
while we were draining. If so we need to continue
draining that new data which are wainiting in history
buffer.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",51,14,0
"thesofproject/sof","11f27aca1cb977e7439fe36193b6397ebf1296e0","lgirdwood","2018-11-08 11:35:26","true","Merge pull request #540 from zhuyingjiang/topic/add-manifest-1.5

[RFC]Topic/add 1.5 manifest and rimage",42,5,0
"thesofproject/sof","007e5a2560555a5a8a42d19d117d9714231acbd3","mrajwa","2020-11-23 14:43:07","false","codec_adapter: check if deep buffering is needed

This patch introduces deep buffering for codec adapter.
This is needed when codec input buffer is not a natural multiple
of pipeline buffer. In such situation codec adapter won't be able
to produce samples every n period. Hence we ""deep buffer"" samples
during startup (typically few periods, depending on the difference
between pipeline buff and codec buff) so once we gathered enough
samples to regularly produce output we start processing.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",75,30,0
"thesofproject/sof","a5b1d51b8017f9b01d3615bdb7e7e9e614011d26","akloniex","2020-08-12 08:53:13","false","test: selector: Utilize real buffer implementation instead of mocking.

Currently selector unit tests mock audio_stream by hand, which
adds maintenance overhead in case of changes in audio_stream
implementation, which are under way.

Signed-off-by: Artur Kloniecki <arturx.kloniecki@linux.intel.com>",74,26,0
"thesofproject/sof","9db16c146dbc4c33befd831b2e66e61c7858b020","lrgirdwo","2021-01-25 17:09:19","false","align: linker: need alignment macro for the linker.

Fixes build for platforms where linker offsets are aligned.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",68,32,0
"thesofproject/sof","0f1f3d1222932b745c48a0d0a79d7fcaae2df898","tlauda","2019-09-10 14:34:04","false","platform: remove unused PLATFORM_LINK_DMA_TIMEOUT define

Removes unused define PLATFORM_LINK_DMA_TIMEOUT.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,15,0
"thesofproject/sof","ec0570483d600062c779dba2ec1afcd99f6194a9","tlauda","2019-09-10 14:52:36","false","platform: remove unused PLATFORM_WORKQ_CLOCK define

Removes unused define PLATFORM_WORKQ_CLOCK.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,15,0
"thesofproject/sof","f42ddc06fd61aecf9e06e2f0e25be80a3a52758d","tlauda","2019-10-10 09:55:06","false","ll_schedule_domain: use pipeline_task in DMA domains

Uses pipeline_task in DMA domains to check, if tasks should be even
registered on interrupts. Non registrable tasks are the one,
whose pipelines are not the owners of scheduling component e.g.
host pipelines connected to mixer pipeline. Such tasks are still
added to the scheduler's list and executed, but they are driven
by the pipelines with scheduling component.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",63,16,0
"thesofproject/sof","47917c1f3dd0cb522851bf47fa775198467274e1","tlauda","2020-01-17 10:21:11","false","component: pass sof context to sys_comp_init()

Passes sof context pointer to sys_comp_init() function.
It will be needed in order to add comp_driver_list to
sof context.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",79,19,0
"thesofproject/sof","4c376680f55bf9264afec7b229a259852920bb6f","singalsu","2021-07-20 15:03:02","false","Tools: Fix topology1 path in Matlab language scripts

The change for topology1 was missing from various tuning
and testing scripts those access binary blob data from
topology m4 directories.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",91,38,0
"thesofproject/sof","71b475160081f57905594452f2678c64f361fa8b","lyakh","2020-12-31 07:23:15","false","cavs: add a missing sanity check in a mask calculation

cavs_pm_memory_hp_sram_mask_get() checks starting and ending
bank indices against the requested segment range incompletely.
Add the missing end segment check.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",72,31,0
"thesofproject/sof","097a633995efd69834b693be41af628b4f4253a0","lyakh","2022-06-01 16:10:28","false","pcm_converter: fix mismatching function types

pcm_converter_func and dma_process_func are used interchangeably,
they must be identical.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",115,48,1
"thesofproject/sof","388098abebc05d60e4609c32604e9fa456c86fce","lyakh","2023-01-25 13:14:27","false","igo-nr: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register igo-nr with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","b5308ee8e6eff51b0a2fea5a39a88d0de10edcfd","singalsu","2018-10-01 12:00:45","false","EQ FIR: memory: Add trace error for alloc fail and add a 1024 size buffer

This patch adds a single 1024 bytes buffer into heap for e.g. rzalloc()
usage. The FIR EQ code didn't trace the allocation failure so it's added
to see better if this happens. The 1k allocation for PCM samples delay
line is quite typical since a 32 bit 100 tap stereo FIR will need 800
bytes.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",37,4,0
"thesofproject/sof","f4049bb7d6dfee2925da372956f1e757d6a8c1e4","singalsu","2018-11-08 16:36:06","false","Volume: Bug fix for vol_mult_s24_to_s16() function

The previous commit introduced a bug in this volume function. The input
parameter for s24 PCM samples must be int32_t. The bug causes for s24 to
s16 converted audio very low signal level and noise due to overflows.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",41,5,0
"thesofproject/sof","2c0008098717e478a04a9dc0cb8ab5c015e17867","bardliao","2020-03-23 03:54:12","false","Topology: sof-icl-rt711-rt1308-rt715-hdmi: Use demux for platforms with multiple speakers

We only need demux for two speaker dais case.

Fixes: 5e8de9fd52e6 ""topology: sof-icl-rt711-rt1308-rt715-hdmi: Merge
two pipeline with demux""

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",66,22,0
"thesofproject/sof","8685b2cafd86fd871cd6744d30336feabcabaac7","mrajwa","2019-12-09 13:00:40","false","kpb: refactor kpb->hb_buffer_size

This patch changes name of the variable to be more
meaningful

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",73,18,0
"thesofproject/sof","7b1906e7fabe0c24733dddbbd75ca4fc184f2318","serhiy-katsyuba-intel","2022-08-30 14:15:34","false","ipc4: fix for copier supported topologies

This fix replaces the previous copier_copy() implementation there
some required input/output combinations were not supported.

TODO: multichannel ALH case when single stream is produced/consumed
by multiple gateways is NOT IMPLEMENTED by this fix. However,
it was not (properly) implemented in the code being replaced.
So the fix does not bring any loss here.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",113,51,1
"thesofproject/sof","6a7861181f5a9fdb44d922ae691aeb119801aebe","RanderWang","2022-02-11 05:29:51","false","ipc4: volume: add none-fade type for ipc4

The default fade type is SOF_VOLUME_LINEAR if fade
type is not set and this results unexpected ramp operation
and fw panic

Signed-off-by: Rander Wang <rander.wang@intel.com>",108,44,1
"thesofproject/sof","8454f7a1b79e59e2315b8e19190eda79344c003a","xiulipan","2020-03-27 05:08:41","false","topology: intel: add generic dmic key word dection

Add generic dmic kwd template.
Need to define flowing variable to make it work:
CHANNELS: channel for the DMIC

KFBM_TYPE: kfpm or vol-kfpm

DMIC_PCM_48K_ID: PCM ID for 48K DMIC
DMIC_PIPELINE_48k_ID: pipeline ID for 48K DMIC
DMIC_DAI_LINK_48K_ID: dai link ID in machine dirver for
48K DMIC

DMIC_PCM_16k_ID: PCM ID for KWD 16K DMIC
DMIC_PIPELINE_16k_ID: pipeline ID for 16K DMIC
DMIC_PIPELINE_KWD_ID: pipeline ID for KWD
DMIC_DAI_LINK_16k_ID: dai link ID in machine driver
for 16K DMIC

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",65,22,0
"thesofproject/sof","cc4850df19ef2932c0c927cf66c42650a0466d73","xiulipan","2018-06-11 16:01:49","false","scripts: docker: change to Ubuntu 18.04

Ubuntu 18.04 use gcc-7 as default, use it to reduce alternative gcc
installation layer.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",1,0,0
"thesofproject/sof","df9897997a4bc14146cb4f8d8d4116628f8d055c","finikorg","2019-08-22 12:24:09","false","cavs: ssp: Fix trace error printing

Fixes compiler error building SSP.

Signed-off-by: Andrei Emeltchenko <andrei.emeltchenko@intel.com>",55,15,0
"thesofproject/sof","af31c12080a3cf08f384881fe71d47d9370c0c68","plbossart","2019-01-16 05:08:05","false","src/host/schedule.c: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","9ad987e7fdbc0b68c7eb29b5334a27fbe1a22497","lrgirdwo","2022-02-04 17:01:14","false","testbench: return error up the stack.

Dont exit() but return the error up the stack for proper handling.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",106,44,1
"thesofproject/sof","8902341a347d2e10268a002bfbd3bf9c70f950be","DianaGabriela27","2019-03-06 13:02:48","false","rimage: file_simple: Move open brace to next line

Open brace '{' following function declaration get_mem_zone_type
goes on the next line.

Signed-off-by: Diana Ungureanu <diana-gabriela.ungureanu@nxp.com>",66,9,0
"thesofproject/sof","2798398f5c898003d36ea9c3e558f5263ca951a8","lrgirdwo","2022-06-03 11:04:53","false","cht: defconfig: trim fat and remove unused options.

Not used on CHT so remove.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",115,48,1
"thesofproject/sof","4b88635cfde0c37e482770b98160af24f495c172","plbossart","2020-08-25 20:34:46","false","audio: align error messages when sink buffer is insufficient

Align to provide same information for all audio processing, no reason
to be creative here.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",75,27,0
"thesofproject/sof","8937929b4ec9b2cd584dc6ef19c19c51098d4365","btian1","2023-07-03 06:49:51","false","copier: remove do_endpoint_copy function

This is 1ms function calling, remove one more layer to get
better performance.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",38,61,1
"thesofproject/sof","ecb6a6693212ff8733f927e780a1d0e767183dac","aborisovich","2022-01-20 14:24:06","false","Update to C99 standard to match SOF. Silenced warning generated by newest GCC compiler related to int cast of char typed values that may result in negative values. Syntax fix in linkage of crypto library to more generic approach.",113,44,1
"thesofproject/sof","20fbbe77e47421dae04418b9b572699305d53ffd","keyonjie","2020-09-21 09:57:23","false","topology: pipe-amp-ref-capture: correct the setting of ref channels

The naming should be SMART_REF_CH_NUM and value should be 4 for 4
speakers, correct it.

Fixes: 399b97afe6 (""topology: Modify init params for the Demux Config"")
Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",67,28,0
"thesofproject/sof","341286796e9a5b782ce19f36bb24d5a424a67362","keyonjie","2020-04-10 14:00:04","false","topology: add smart amplifier unified implementation

This is the unified implementation for smart amplifier feature,
including both playback and capture pipelines.

The upper layer platform topology should include this unified
implementation and define specific macros to use it.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",82,22,0
"thesofproject/sof","3936516cdd68836f55ca0ae1fcf9f7ba987810c3","slawblauciak","2018-06-19 16:04:29","false","test: incorrect param for one of norm_int32 tests
Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",1,1,0
"thesofproject/sof","4d005a05549adfc9b26a968db6a8313e2aac732e","udaymb","2020-06-09 14:04:09","false","topology: Add jsl+ MX98360a amp with ALC5682 Headset codec

Topology is modified to include another JSL+ product variant with
MX98360a AMP + ALC5682 Headset codec. Created a platform specific
for RT1015, included this and already existing MX98360a in
sof-jsl-rt5682.m4

Signed-off-by: Uday M Bhat <uday.m.bhat@intel.com>",73,24,0
"thesofproject/sof","0bed38788e785db919a7cdc57c91f2cfb6d9c175","tlauda","2019-09-11 11:30:44","false","timer: remove unused core field

Removes unused core field from timer structure.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,15,0
"thesofproject/sof","d53778f3729799cd2f18dcd52d5e0bd52b55ef9c","dcpleung","2020-04-05 09:19:44","false","cmake: update git submodules when cmake is run

This adds the necessary bits to update git submodules when
cmake is run, with the option to turn this behavior off if
needed. This is in preparation to use fw.h and manifest.h
from the rimage repo to prevent having two copies of each
file in two different repos. Obviously, the files in
the submodules must exist before building the firmware,
so run git submodule update to checkout the files.

Signed-off-by: Daniel Leung <daniel.leung@intel.com>",80,22,0
"thesofproject/sof","c979ecbc8dd242c528ec0beeb8eaf3f2db0ecd71","keyonjie","2021-06-02 09:06:10","false","memory: apollolake: enlarge the heap runtime size

Increase the count of the 64 Bytes block to 160 to address the heap
runtime memory used up issue.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",83,36,0
"thesofproject/sof","db1bf135972ac333ca9d2e1c8d7ae7fd461464ea","crazoes","2020-03-28 08:04:28","false","scripts: build-tools.sh: Use getopts, breakdown script to functions

Breakdown script to functions, use local variables, and a main function.

Use getopts to parse the arguments instead of manual parsing to leave no
room for errors, bugs, and inconsistent conventions introduced by custom
implementation.

Signed-off-by: Shreeya Patel <shreeya.patel23498@gmail.com>",66,22,0
"thesofproject/sof","b42bbcaed73c741fc0915479a8aadd4205f57b3c","ujfalusi","2023-07-25 09:48:33","false","board: intel_adsp_cavs25: Enable support for library loading

Add the needed config options to enable the library loading support.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",34,62,1
"thesofproject/sof","ab9dc9da76ca41fe94044963b679fb55b2b16939","lrgirdwo","2020-07-24 12:40:30","false","smart amp: fix alignment warning of data passed in

Fix GGc warning on aligned packed data.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",78,26,0
"thesofproject/sof","202c655364bf60232fd3df5be24ac8dfdf6fa3a8","akloniex","2018-09-25 13:19:25","false","debugability: rimage: extract .static_log_entries from elf

.static_log_entries section is extracted to logs dictionary
to remove xtensa toolchain dependency from logs parser.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",37,4,0
"thesofproject/sof","238cd1457d90ffd0d5a8959f82caa78d81fd70f1","akloniex","2020-07-22 13:07:40","false","treewide: Remove references to .free and .avail members of audio_stream.

All audio_stream clients should use provided audio_stream_get_avail*/free*
API, instead of directly accessing .avail and .free member fields.

Signed-off-by: Artur Kloniecki <arturx.kloniecki@linux.intel.com>",76,26,0
"thesofproject/sof","3e3f1d0cae814a218c4ccd28012f2de94cc03a25","akloniex","2019-05-31 19:43:36","false","Logger: Update license info in sof-looger files.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",73,12,0
"thesofproject/sof","9e0f7eecec85519c978c562d2df9c688564205d4","btian1","2023-10-19 03:59:24","false","audio: eq_iir: create generic/ipc3/ipc4 source files for eq_iir

Create generic ipc3 ipc4 source files and move related code
into these source files.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",12,65,1
"thesofproject/sof","a03e9f6f3d0f48c6d6aa40f41be72eb636bdeeac","btian1","2023-05-17 14:01:39","false","copier-dai: change function name for better understanding

Change function name from: dai_zephyr_get_hw_params to
dai_common_get_hw_params, due to this name also exist in
dai-legacy.c, need align both legacy and zephyr part to avoid
misunderstanding.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",51,59,1
"thesofproject/sof","537255bdd0c08cb0f5792bfe3ebd0648697d96bd","ktrzcinx","2020-04-24 11:26:54","false","ext_man: Remove redundant variable assign

ret variable is always set in elf_read_section(), to initial value
is not important.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",72,23,0
"thesofproject/sof","7e6bdb6963093c6ad9ec99e92568a667fd837eb8","cujomalainey","2021-02-19 22:53:35","false","math: clarify order of operations with ternary

minor cppcheck style violation

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",74,33,0
"thesofproject/sof","c4666dc27d5852c179274a892f84d89f5f2f30af","cujomalainey","2021-06-25 20:15:11","false","OWNERS: replace dgried with chiang831

Dylan is transitioning, replace his spot with Jimmy for FYI on PRs.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",75,37,0
"thesofproject/sof","592e79403ecf6c7e883e82441d7ac8fc3dd0283a","abonislawski","2021-01-19 08:11:36","false","clk: do not release clock only for LPRO->HPRO transition

This will allow to switch to HPRO much faster when needed in s0

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",69,32,0
"thesofproject/sof","75310940507610b3a94260e5495e6d12617450c8","aborisovich","2022-12-19 10:44:42","false",".github/workflows: zephyr workflow windows-build uploads artifacts

Github allows to store build artifacts for 90 days after the build.
Somebody might want to examine the output of the build, now can
easily download everything that job produces.
In example, compile_commands.json file contains all compilation
commands in verbose that are not visible in the build log
by default.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",92,55,1
"thesofproject/sof","17ebe860f0c677adc1cb544d7cf8a4f97f87f2f3","abonislawski","2021-09-21 07:48:57","false","init: secondary_core_restore possibility on boot

In some multicore scenarios dsp can try to restore secondary core state
if all memory is still powered up and there was no external request
for a core shutdown before

For example multicore case with d0ix sleep where secondary core will be
put to sleep along with primary core and after wakeup there will be
a possibility to restore it

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>
Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",118,40,0
"thesofproject/sof","1ed4f7780453d4ec555be37bcd0ff77476e3960d","andyross","2022-12-06 18:44:23","false","ipc3: Check component type for stream commands

Not all ipc_comp_dev structs contain a comp_dev pointer, it's unioned
based on the ""type"" field.  Since the object ID is part of an IPC
command and under the control of external software, and since there
can be valid non-stream components stored in the list, we need to
check this type before accessing the invalid data belonging to the
other union types.

Signed-off-by: Andy Ross <andyross@google.com>",100,54,1
"thesofproject/sof","36f4578c50c12cc205b5990cfe9e61915417a515","brentlu","2022-05-13 10:25:13","false","topology: sof-adl-max98360a-rt5682-4ch: enable BT offload

Enable compile option ""BT_OFFLOAD"" to enable pipeline for Bluetooth
Offload.

Signed-off-by: Brent Lu <brent.lu@intel.com>",111,47,1
"thesofproject/sof","2843b43f946531b893d938a9f90ddcd5f53658e3","jajanusz","2019-01-18 13:04:12","false","cmake: update qemu-check.sh

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",57,7,0
"thesofproject/sof","221cdfaf8a3be422ce3ab556384df3c3270d47ef","jajanusz","2019-02-06 19:50:09","false","cmake: add alldefconfig target

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",55,8,0
"thesofproject/sof","39c4b3bab778058593ba64bcbf3e316cfe3ff589","jajanusz","2019-01-09 14:14:09","false","broadwell: remove broadwell.x.in, use haswell.x.in

broadwell and haswell linker scripts are identical, by removing
broadwell-specific file for linker script we have cleaner buildsystem
where all linker scripts have names just like platform folder names

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",56,7,0
"thesofproject/sof","0c298e82b0655fa67224284fb46eb624432345f7","pblaszko","2023-06-13 07:42:29","false","aria: remove internal buffer writeback

Removing writebacks of internal buffers: buf_in and buf_out.
Aria instance has exclusive access to this memory, so they are always
used at the same core.

Signed-off-by: Przemyslaw Blaszkowski <przemyslaw.blaszkowski@intel.com>",45,60,1
"thesofproject/sof","b9dc0f1bb95620dd67a75eb6880edfc19b0ec24d","kfrydryx","2022-09-02 14:14:23","false","library manager: fix outdated include path

Fix spinlock.h include path as in 1629a1f72c7b4c9f203dabbb83d361fbf2b5b9c5

Signed-off-by: Krzysztof Frydryk <krzysztofx.frydryk@intel.com>",118,51,1
"thesofproject/sof","ba209af7b6ac8a71e25a04f6b22f899564fe29ce","kfrydryx","2022-11-30 10:58:24","false","platform: ace: Enable fast clock on platform init

Uze zephyr clock controller to set fastest CPU clock on platform init.

Signed-off-by: Krzysztof Frydryk <krzysztofx.frydryk@intel.com>",101,54,1
"thesofproject/sof","459b1f519e1d633e48559c8f9a46d583ef6f5161","coolstar","2023-01-20 07:16:45","false","Apollo Lake needs MCLK 1 for working da7219

Headphone output requires MCLK_ID to be set to 1

Signed-off-by: CoolStar <coolstarorganization@gmail.com>",56,56,1
"thesofproject/sof","2ff3056a92aac04c8f094b09569edb46357dd9c8","abonislawski","2020-03-09 11:24:59","false","kconfig: add CONFIG_NO_SLAVE_CORE_ROM

Add CONFIG_NO_SLAVE_CORE_ROM to determine how to boot slave cores

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",85,21,0
"thesofproject/sof","2741645f11f5a7ef7c44e1b6d93234df553d9b2a","abonislawski","2019-06-14 10:37:59","false","memory: make buffers aligned to HEAP_BUF_ALIGNMENT in CNL

It provides better memory/cache performance since it aligns with memory IO burst size and cache line size

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",47,12,0
"thesofproject/sof","1329ad748ff4b82ce22e67de0d9c0ca47d28ff83","ranj063","2019-04-28 19:49:46","false","buffer: remove redundant assignment after creating new buffer

ipc_buffer member in the new buffer is already populated
when the contents of the ""desc"" argument are copied
into it. So remove the redundant assignment to ipc_buffer
after the memcpy.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",48,11,0
"thesofproject/sof","ee969eb1b34b738c28ff6dd441365b5254d78687","ranj063","2022-12-16 21:12:14","false","module_adapter: Add bind/unbind ops for IPC4

Define the bind/unbind comp driver ops for the module_adapter which will
be used to update the source device pointers in the source_info table.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",91,54,1
"thesofproject/sof","80ef5bb5e0c85b90f7b9a83dd8fb0101a1beb8e0","ranj063","2022-01-11 06:14:40","false","module_interface: Introduce get_configuration and set_configuration ops

These ops will be used to set or retrieve the module configuration.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,43,1
"thesofproject/sof","9ccfbc4e39bbfd09c68476f20789c2ab0879ad76","ranj063","2023-09-07 00:05:34","false","sof-glk-nocodec: disable pipelines when disabling SSPs

When we added the flags to disable SSP0 and SSP1 on the UP2, we took the
shortcut of just removing the PCMs in topology but left the pipelines
and widgets in the topology in. While this works in practice to prevent
us from testing those SSPs, the right way is to also remove those
pipelines also when the SSPs are disabled.

This stops tplgtool2.py from complaining constantly about this
inconsistency since https://github.com/thesofproject/sof-test/pull/1079
which made the sof-test verify-tplg-binary.sh fail every time:

```
tplgtool2.py sof-glk-nocodec.tplg

ERROR: No pcm id=0 for widget=PCM0C
ERROR: No pcm id=1 for widget=PCM1C
ERROR: No pcm id=0 for widget=PCM0P
ERROR: No pcm id=1 for widget=PCM1P
ERROR: tplgtool2.py returned 4
```

This change affects only sof-apl-nocodec and sof-glk-nocodec.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",20,63,1
"thesofproject/sof","e9d2595577f4a779bbfa68194fce416f6e22627c","ranj063","2021-10-06 17:42:53","false","lib: dma: Add stop_delayed op

Add a new optional op for DMA that can be used to stop the DMA after the
pipeline has been reset.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",121,40,1
"thesofproject/sof","9200231e0ed3eebd8b2fdc6ede5f0de17b4252ec","ranj063","2022-10-21 03:02:58","false","topology2: cavs-passthrough-hdmi: remove the option for HDA passthrough only

cavs-passthrough-hda.conf doesn't exist anymore.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",97,53,1
"thesofproject/sof","ba1eb0d69ea26aea07c204f2af9771a38ee26e7b","kuanhsuncheng","2021-09-23 07:12:22","false","timer: mtk: use mtk systimer for mt8195

For driver timer,
use mtk systimer instead of xtensa internal timer.

(xtensa timer clk will affect by dsp clock rate.)

mtk systimer runs at clk at 26M.

Signed-off-by: YC Hung <yc.hung@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",118,40,0
"thesofproject/sof","131f0d4f1767f824ae6016d5c104c3ac6af39ff1","ktrzcinx","2020-07-10 08:35:00","false","dma: Use generic function to update read/write pointers in stream

Usage of function from audio_stream component updates avail/free
fields. Moreover using generic function helps in maintaining code.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",74,25,0
"thesofproject/sof","8549c9c628d13e1eaf8f284d260d225e34b16b11","lyakh","2021-10-15 12:06:36","false","multicore: (cosmetic) replace cpu_is_secondary() with cpu_is_primary()

cpu_is_primary() can be easier to parse than !cpu_is_secondary(), make
the swap.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",124,40,1
"thesofproject/sof","0ae3b13a48b2998ef7fe481a1550d31496bbfb33","lyakh","2021-07-06 10:45:47","false","Revert ""pipeline: dont disable IRQs around pipeline scheduling.""

This reverts commit af6655e7fac3c56847251553699f354df74bf6a9.
That commit removed disabling interrupts in
pipeline_schedule_triggered() which is usually fine, except if an
xrun happens during pipeline_schedule_copy() which then removes the
task from the scheduler list, it then leads to a DSP exception in
pipeline_schedule_copy() is called for the next pipeline in the list.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",84,37,0
"thesofproject/sof","ff1edf2b6f4c54720a19cdf13139061ed9ab6c81","lyakh","2020-11-18 15:53:50","false","compile: make inclusion of $(ARCH)/Kconfig optional

SOF can be built with Zephyr for arbitrary unsupported architectures.
In such cases ARCH can be equal to x86_64 or arm or something else, so
respective $(ARCH)/Kconfig files don't exist. Make inclusion of those
files optional.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",74,30,0
"thesofproject/sof","1a249e84217f1fc720122a85e222874799628da9","lyakh","2021-05-17 10:06:48","false","ll-schedule: (cosmetic) simplify a conditional

If one of the ""if"" branches contains a jump instruction like ""goto,""
""return,"" ""break"" etc. usually making that the only ""if"" branch
simplifies the code. Fix one such case in schedule_ll_task().

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",87,35,0
"thesofproject/sof","a0256007e6a60d46691641a3a613fe6a2da0277b","tobonex","2023-09-15 18:00:40","false","mixer: remove buffer_acquire from mixer

remove buffer ops from mixer modules

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","475e09f17dc3c86c414cbf021b8798e1de2a8a0b","marc-hb","2022-04-07 22:57:39","false","xtensa-build-zephyr.py: default to subprocess.run(check=True)

The default value is wrong, change it. See pylint warning W1510

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",114,46,1
"thesofproject/sof","9915d1e1fd314bdc81c98538dba5bda2517e3afc","marc-hb","2022-08-30 23:24:37","false","cmake: stop sneakily downloading missing submodules at build time

Note this change does NOT affect Zephyr builds in any shape or form as
Zephyr builds simply don't use the CMake files changed by this commit.

Downloading missing submodules at build time was never a good idea;
always a hack. Downloading and building should always be kept separate
from each other for version control and bill of materials reasons and to
support ""off-line"" builds; build inputs should always be available.

Now that Zephyr builds have just moved away from git submodules
(replaced by west), stop sneakily downloading missing submodules at
build time while the user cannot notice, overwhelmed by the volume of
build logs. Someone building XTOS first and Zephyr second could
unknowningly end up in a ""hybrid"" and undesired situation where git
submodules and west would be BOTH pointing at the same rimage clone.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",112,51,1
"thesofproject/sof","40e6c1ddc061e04687a5d48e38dc02c37ace0703","lyakh","2022-12-20 07:10:35","false","ipc: ipc4: fix an uninitialised variable

This is a theoretical case of an invalid pipeline status, handle it
correctly.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",92,55,1
"thesofproject/sof","781a2f14a91229458d33ead70146f9274110d56b","lyakh","2023-01-24 15:26:07","false","asrc: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register asrc with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","94ed4ca3258e4b52ebddc9ee42277f23b146025f","lyakh","2020-09-30 13:52:21","false","zephyr: remote the platform_timer_set() wrapper

platform_timer_set() isn't called from Zephyr any more, remote it.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",66,28,0
"thesofproject/sof","559266e7e907aa535a8eddef8e3f05646549ea3f","lyakh","2022-04-05 15:37:13","false","common: add an attribute-preserving version of container_of()

With some compiler versions container_of() loses any type attributes
which then leads to compilation issues. Add an attribute-preserving
version of the macro.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",110,46,1
"thesofproject/sof","252381238b559793049ea9375e5887c732fa1125","tobonex","2023-09-15 18:06:30","false","dts: remove buffer_acquire from dts.c

remove buffer ops from dts.c

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","9fdbf1c398184d715a68c5a49367221f4d2fec7b","btian1","2023-09-06 03:28:56","false","audio: src: split src ipc3 and ipc4 specific file

create new files to cover ipc3 and ipc4 specific code.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",22,63,1
"thesofproject/sof","e6845e69e58257df6867ef20d7103c6cba1ab546","iuliana-prodan","2023-03-02 13:52:41","false","imx: fix GIP bits clear method

mx_mu_xsr_rmw() doesn't work correctly for w1c bits
because it reads the register and writes it back fully.
So, use imx_mu_write to clear pending interrupts from MU,
instead of imx_mu_xsr_rmw.

Using imx_mu_xsr_rmw might clear a pending interrupt that
was triggered while handling the current interrupt.

This fixes the case when fw boot confirmation and first
command are sent, from kernel, close to each other and
the command is missed.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>
Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",60,57,1
"thesofproject/sof","ef028f634a0607d7706149b9248824b43664f9fc","aborisovich","2022-07-18 09:40:08","false","Removed obsolete xtensa-build-zephyr.sh

This script had been rewritten to python xtensa-build-zephyr.py
script and is no longer used in CI.
Due to changes to sof processes related to Zephyr integration
this script will no longer be maintained.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",112,50,1
"thesofproject/sof","068363525221f48055fe7901c8da4a8193594a76","mrajwa","2019-07-25 21:56:19","false","kpb: record history buffer update while draining

This patch enables draining task to know how
much data was buffered since draining task
has been started.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,14,0
"thesofproject/sof","38866c444a5c73a6482c4e888f1ab778c819dcc7","mrajwa","2019-07-31 10:53:18","false","kpb: add history of state changes to some crucial logs

This patch adds history of status changes into some
important error logs. Thanks to this, in case of some
serious failure we can check how KPB was changing its state
prior to failure.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",53,14,0
"thesofproject/sof","b480595ba6e23405a55d717811783383cf7d5e89","lgirdwood","2018-08-04 17:21:44","true","Merge pull request #190 from tlauda/topic/interrupt_get_level

interrupt: arch_interrupt_get_level",16,2,0
"thesofproject/sof","3fcdb15fb784a35c92107abe2f42c0123fdd7a05","lgirdwood","2018-10-16 11:55:49","true","Merge pull request #492 from mmaka1/hda-header

dai: hda: added the header for the driver",34,4,0
"thesofproject/sof","1b11cd0aa236d23f34a37432ba453ba134f8824b","mrajwa","2019-04-24 21:43:59","false","kpb: schedule draining task

Add draining task into scheduler.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",50,11,0
"thesofproject/sof","049411519ee1969cc92747fb347638c954fb5afe","lrgirdwo","2019-09-12 13:27:30","false","linker: Make sure config.h is used by all linker scripts and memory.h.

This was partially used in some scripts. Fix it so all scripts can use
config.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",62,15,0
"thesofproject/sof","bb2663653d542ea18333d2e9bb7473d10a40da2f","lbetlej","2018-11-23 13:51:05","false","Power up only subset of HP SRAM banks on FW init (CannonLake)

In order to reduce power consumption in runtime only subset of HP SRAM
banks have to be powered. The PR covers 2 aspects:
1. Changed memory map to move stack up by 21 memory banks. Buffer heap
size was reduced from ~2.3MB to ~0.9MB.
2. Changed HP SRAM initialization to power up only needed banks and
properly check HW response.

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",40,6,0
"thesofproject/sof","f9556455f168dcc3d74e3dec7264215f019b5c74","DianaGabriela27","2019-03-06 12:52:19","false","rimage: elf: Break down multiple assignment

Multiple assignment should be avoided.

Signed-off-by: Diana Ungureanu <diana-gabriela.ungureanu@nxp.com>",66,9,0
"thesofproject/sof","ac8df75466646c90ce7737fb8ff9222c419577fe","plbossart","2021-06-18 19:36:24","false","topology: sof-cnl-nocodec: make SSP clocks parameters

use platform name to infer root clocks

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",74,37,0
"thesofproject/sof","eb7310859ec2d839f6375643e0445936ad4d4a20","abonislawski","2019-02-11 14:05:44","false","Kconfig: make Switch component a config option

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",59,8,0
"thesofproject/sof","f4344e6f13e2a2b4bbccf6b4cbb5ad113af42492","plbossart","2020-08-31 19:02:45","false","dai: use inclusive language for mclk

the term 'master clock' is misleading, a 'master clock' can have a
direction per ALSA definitions.

This patch suggests the use of the 'main clock' term instead.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",71,27,0
"thesofproject/sof","ce37e802f4bb59897acbba1e75967a9e880c97be","lrgirdwo","2022-12-12 21:53:49","false","tools: tplg_parser: parse topology in memory and not in file.

Reduce complexity by parsing all topology objects in memory rather than
by seeking file, reading into allocated memory and then freeing memory.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",103,54,1
"thesofproject/sof","39ff32336c0feeca19309d785840ca8667a47a62","dbaluta","2020-10-26 13:31:51","false","drivers: imx: sdma: Do not override events

A channel will be scheduled when both an event has occurred
and the users have enabled the channel.

This allows us to strictly control channel scheduling.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",74,29,0
"thesofproject/sof","d176d09529551bd37a19da9edfe087dbae383e18","eurofun","2023-05-24 16:56:18","false","topology1: add imx8mp dual SAI topology, 8ch each

Use btsco driver to output and capture 8ch on SAI2 and 8ch on SAI3

Signed-off-by: Alexander Boehm <aboehm@eurofunk.com>",55,60,1
"thesofproject/sof","b4004e899218b3269341b1916970ba5c7b06b7ae","tlauda","2018-07-06 11:41:44","false","cpu: enabling and disabling slave cores

Implements full flow for enabling and disabling
slave cores. Core power operations availability
based on architecture.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",11,1,0
"thesofproject/sof","e50f8a07387f8e5ac917b0cdc6cfa066b14c7bc8","tlauda","2019-12-12 09:06:39","false","clk: improve ticks calculation precision

Improves ticks calculation in platform_timer_set_delta function
by doing only 64-bit operations instead of 32-bit and 64-bit.
It improves precision and saves us some time.

Suggested-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>
Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",75,18,0
"thesofproject/sof","8fa4c0013c7824c25be25360952630377c42310d","tlauda","2019-09-05 13:30:20","false","schedule: add timer_domain

Adds first ll scheduler domain, which is timer.
Timer domain implementation is functionally the same,
as the implementation already used in ll_schedule.
It will replace the original ll_schedule one.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",62,15,0
"thesofproject/sof","643c2300a4d65cf300a048b5f294131d14bddbbd","tlauda","2020-05-26 06:58:40","false","arch: xtensa: fix master_core_data initialization

Fixes master_core_data initialization in case PLATFORM_MASTER_CORE_ID
is not zero.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",97,24,0
"thesofproject/sof","a2db8e52cf489c53cac7f6f709a70eca88b760ae","tlauda","2020-04-09 13:06:03","false","schedule: dox: complete api documentation

Cleans up existing documentation and adds missing one.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",81,22,0
"thesofproject/sof","0348a51f62a81a8216929ffeddda9454368da1cf","singalsu","2020-05-13 10:11:47","false","Audio: EQ IIR: Add support for large configuration IPC

This patch adds the missing multiple parts configuration data IPC to
iir_cmd_set_data() and iir_cmd_get_data(). Without this this support
an attempt by kernel driver to send such IPC to a processing component
leaves the EQ to failed state.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",96,23,0
"thesofproject/sof","4d35480c6451c9db10d9a653fa39cdc94e671565","singalsu","2022-11-14 13:54:25","false","Tools: Tune: SRC: Change the SRC gain to 0 dB

This change aligns the gains in all other conversions sets
with IPC4 that already has the same setting. The max gain of a
converter is 0 dB. It also avoids the issue of 1 dB lower gain
in 2-stage vs. 1-stage conversions.

This changes only the generate scripts. The coefficients need a
separate patch.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",95,53,1
"thesofproject/sof","8b68c2bf7843465537312bdc35d30b21437ad5a0","akloniex","2018-10-23 09:45:01","false","abi: Update abi.h header to accommodate for changes done in krenel repository

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",27,5,0
"thesofproject/sof","0f3f9c08070ec804615cb971c4e57e8945d422d0","akloniex","2018-10-29 11:55:23","false","rimage: debugability: include fw_version in .ldc file

Extract fw_version from fw_ready section of elf and include it in
header of .ldc file to allow verification by sof-logger.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",28,5,0
"thesofproject/sof","7a7198dfd3fba6d09efde24ee97f2c9daaf40f67","ShriramShastry","2023-05-17 13:45:10","false","Math: Library: Add the hifi4 exponential function

This patch adds a single h-file include and other cosmetic
blanks/tabs changes.

Signed-off-by: ShriramShastry <malladi.sastry@intel.com>",51,59,1
"thesofproject/sof","fb2727536af5050b81bfa202e367e1637120cdb9","tobonex","2023-08-02 18:34:34","false","ipc4: Add Vendor Config Set

Add Vendor Config Set, a special case of Large Config Set. Large Config Set
handling now checks for this case and extracts extended param_id from ipc
payload as param_id and handles the rest of the payload as usual. KPB now
uses extended param_id. Necessary for fast mode task configuration in KPB.

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",29,62,1
"thesofproject/sof","522ce1526b2974aa67e6449c9baa97430ad8fac5","cujomalainey","2020-11-10 00:32:10","false","pcm_converter: fix type mismatch

the extern and the actual variable should have the same types

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",73,29,0
"thesofproject/sof","888260a768ef65652f0b821cbd66fe315a423669","cujomalainey","2018-11-16 02:37:51","false","Update comments for sof-bdw-rt286

Update header to reflect code

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",39,5,0
"thesofproject/sof","601cbc061d5a71fa548d8e3948d239c9ebbbe9e3","kv2019i","2021-11-02 10:08:34","false","topology1: sof-cavs-nocodec: fix documentation

Fix the documentation to match actual topology definition. The comments
did not include addition of mixers nor the capture PCMs. Also many
comments reflect a fixed core id that is no longer accurate.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",125,41,1
"thesofproject/sof","322fe24e95b35bcd2f29e94ab2683b2eed059057","kv2019i","2019-03-26 15:34:38","false","topology: add param checks to PCM macros

Abort build if not all mandatory arguments are passed to
the macros. This should help to catch invalid usage.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",60,10,0
"thesofproject/sof","655d077f72c4ce6e0a74f55bd032cffe833151b3","bkokoszx","2019-11-14 15:01:36","false","spinlock: spin_try_lock refinement

Use block expression instead of do {} while(0) macro
in spin_try_lock in order to return its value in a
safer way.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",58,17,0
"thesofproject/sof","da34969bfc808618037e2de76191ef07b1977e58","pblaszko","2022-11-23 11:18:19","false","ipc4: idc: add ipc4 wrapper to ipc_process_on_core

Add wrapper that translates POSIX error codes from generic
ipc_process_on_core function to IPC4 status.

Signed-off-by: Przemyslaw Blaszkowski <przemyslaw.blaszkowski@intel.com>",94,54,1
"thesofproject/sof","aa20048e92dce1a198f9331e2ff9d50aaa9cc191","marc-hb","2020-09-19 21:29:06","false","travis: fold long lines; fixes the last yamllint warnings

yamllint clean.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",66,28,0
"thesofproject/sof","98ee39f44cad36e582d53d50babb5890f5802196","marc-hb","2023-10-03 23:38:36","false","cmake: switch XTOS build to sof/tools/rimage

Switch away from the independent rimage submodule. Long story in
https://github.com/thesofproject/sof/issues/8178 and others.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",16,64,1
"thesofproject/sof","58e7028346629abdf3a866974c7d84d1c08d1bbc","marc-hb","2021-07-11 06:46:19","false","zephyr/module.yml: add URL, name: and comment out default values

Add URL to documentation for convenience.

Our module name should not depend on the folder name.

Comment out default values to show that we use the defaults.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",87,37,0
"thesofproject/sof","4c1f41a91b92cba729f68c0d2e3a33b290ef075b","marc-hb","2021-03-09 05:33:30","false","cmake: add some MEU-related comments

Notably:
- Log error and default MEU_OFFSET when meu -ver is not found.
- Explain rimage -s option

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",73,33,0
"thesofproject/sof","0ea32291aefb69de2ae5dd7dc55bc0982c566dc6","marc-hb","2021-07-25 05:50:59","false","qemu-check: document magic values, better logging and err. handling

Thanks Ranjani for finding most of these magic values.

Also move READY_MSG closer to the only place where it's used so it does
not look like a ""global"" anymore.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",99,38,0
"thesofproject/sof","160953e2aeb2afd821d58f55cd5f7c28d1f9f64b","lyakh","2022-08-23 12:53:38","false","mixin: fix a NULL dereference

In mixout_prepare() mixin->pipeline can be NULL, check it before
dereferencing.

BugLink: https://github.com/thesofproject/sof/issues/6118
Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",111,51,1
"thesofproject/sof","3ab21638cf0a8da20e80568fa1893212cebe1956","lyakh","2023-04-20 15:25:15","false","buffer: remove cache annotations from audio_stream_fmt_conversion()

audio_stream_fmt_conversion() is used both directly with fields from
acquired buffers in its arguments and ordinary local variables. In
the former case the arguments should have cache annotations, in the
latter case it isn't compulsory. A choice has been made to enforce
cache annotations in both cases, which however now becomes an
inconvenience. Revert that by using temporary variables instead of
buffer fields directly.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,59,1
"thesofproject/sof","1ab68bfc005e80509f5deb2c5a1fefb8b9ab4135","lrgirdwo","2021-06-24 14:52:24","false","mocks: enable allocator tests in host mocks with valgrind

This enables support for running the allocator mocks with valgrind by
building the allocator for the host library target using a similar
heap map to Intel CAVS targets (memory.c is almost identical copy of CAVS
version).

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",74,37,0
"thesofproject/sof","58bd5a66fd6ad381dbc26a84fd446d2ae0d127fc","dbaluta","2023-04-28 15:24:58","false","module_adapter: Don't print an error if reset path stops

When md->ops->reset() returns PPL_STATUS_PATH_STOP this means that
reset is not propagated along the pipeline. This is a normal condition.

So do not print an error.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",54,59,1
"thesofproject/sof","e003afe582e41c4a8a52b21d45dbc83c166021a5","jajanusz","2020-06-05 18:33:47","false","schedule: edf: cycles budget

Add possibility to set budget for EDF tasks.
It's needed to ensure that some long running task will
not stall other tasks.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",75,24,0
"thesofproject/sof","82d234466a0048efcd59ab9f0e2d0f3a287cc8ca","jajanusz","2019-01-11 19:58:24","false","cmake: version script

Replace version.sh with cmake script.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",55,7,0
"thesofproject/sof","207382150b87087c211354a902f61b0dd5575e29","jajanusz","2019-05-13 11:47:12","false","cmake: meu: support extra meu flags

Meu flags can be extended with MEU_EXTRA_FLAGS variable.
These flags are added after default arguments.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",61,11,0
"thesofproject/sof","1240a8bea3d85ebf944d2f7360813903de1506a6","marc-hb","2020-09-15 01:24:14","false","logger: stop ignoring return value of ‘freopen’

Reported by VERBOSE=1 CMAKE_BUILD_TYPE=Release ./scripts/build-tools.sh -l
and gcc version 9.3.0-10ubuntu2:

 tools/logger/convert.c:630:5: error: ignoring return value of ‘freopen’,
   declared with attribute warn_unused_result [-Werror=unused-result]

Tested with sof-test/test-case/check-suspend-resume-with-audio.sh

Fixes commit 6a84b4e945e4308 (""sof: logger: reopen trace file upon EOF"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",65,27,0
"thesofproject/sof","9f5173ce6e06ffb8454c3c351c4d3ba79800efa6","keyonjie","2020-05-09 03:57:52","false","topology: muxdemux: add uuid token support

Add the uuid token to muxdemux widgets for the future use.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",96,23,0
"thesofproject/sof","f26b2703466a26ecc6dbe0766485f16ff3836c58","keyonjie","2021-11-12 01:58:18","false","Revert ""dw-dma: set LLI alignment to platform specific""

This reverts commit aeda0158b0df86cc66e1e41da1e343d45c349d12.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",127,41,1
"thesofproject/sof","2c902ec2c0deb1f73a64a14c3460d7bd67470654","gongjun-song","2022-09-06 01:49:13","false","fix function name error

Correct the function name ""volume_ctrl_set_cmd()"" to
""volume_set_config()"".

Signed-off-by: Gongjun Song <gongjun.song@intel.com>",107,51,1
"thesofproject/sof","d258ea23fc4d7f5e82553c2c800a7c019c0cf75e","softwarecki","2023-02-27 08:42:01","false","manifest: pkcs1_5: Use new hash functions

Switched to use new hash functions. The parameter list for the rimage_sign
and rimage_verify functions has been simplified. The necessary information
is now included in the hash_context structure. In addition, code fragments
that may be common to different versions of the manifest have been
separated.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",58,57,1
"thesofproject/sof","fa93c111de02719a319e6e44db10da2d80b3a072","balakishorepati","2021-07-07 14:00:04","false","drivers: amd: renoir: Add SP driver support

Add drivers for:
	* SP DAI, for Audio interface
	* SP I2S DMA, controller
Dai changes for sp mode to register to platform.

Signed-off-by: Basavaraj Hiregoudar <basavaraj.hiregoudar@amd.com>
Signed-off-by: Anup Kulkarni <anup.kulkarni@amd.com>
Signed-off-by: balapati <balakishore.pati@amd.com>",88,37,0
"thesofproject/sof","07d56ef92049602a5969273b237b2197742edd45","ktrzcinx","2020-09-07 13:00:17","false","trace: Validate input arguments size

Trace system support arguments no larger that uint32_t,
so this condition should be checked for each trace.
Create separate CT_ASSERT, because of need to have
multiple instances of assertions with the same error
message, what is not possible for STATIC_ASSERT.
STATIC_ASSERT has better message printing, so
it's not replaced by new version.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",70,27,0
"thesofproject/sof","b12a6626c5ade0a2d102d5a8a4f0147eefea813a","ktrzcinx","2020-04-10 09:36:28","false","trace: Remove metaprogramming from trace implementation

Functions written with metaprogramming are hard to read and debug,
so newly introduced version should be easier to understand for
new developers. Moreover introduced version is more generic and
compact because of usage single logging function implementation
regardless of given parameters number and usage of atomic or
mbox version.
There is no longer a need to heavy test logging function under
UT with different number of arguments, because of it singular
implementation.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",82,22,0
"thesofproject/sof","7722365264c2d75ddbca9d6deeb57f48859d9b9d","ktrzcinx","2020-09-15 06:30:56","false","logger: Fix memory leak at first filter append

For first run, allocated memory pointer has been written twice to
config->filter_config but freed only once - memory leak.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",65,27,0
"thesofproject/sof","5fca99ef587d64d4f8391f8615d0fdc2c924cdab","tlauda","2018-08-10 09:25:19","false","cpu: implement cpu_is_core_enabled function

Adds cpu_is_core_enabled function to check for active cores.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",19,2,0
"thesofproject/sof","7de74bd47cf8d83b1c6d1db888e2b565f8a3e8aa","tlauda","2018-07-03 13:45:00","false","idc: refactor arch_idc_send_msg method

Changes arch_idc_send_msg method to accept idc_msg instead of idc.
This way it's more flexible for external components to send messages
without even knowing about internal idc implementation.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",7,1,0
"thesofproject/sof","7d8d44da0551371c10a3018a975747373251eff8","tlauda","2019-06-07 08:49:00","false","hda-dma: remove not needed check

Removes not needed check for DMA_CB_STATUS_END
in hda_dma_post_copy. HD-DMA is not driven using
interrupts, so there is no need to asynchronously
stop the transfer.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",55,12,0
"thesofproject/sof","80eeda47f4269f9790fd2553fcf05eef2c8692c0","mrajwa","2019-10-30 15:11:25","false","kpb: move validation of host params to prepare()

This patch moves the validation of host params to
prepare() method. Therefore we can tell user right
away something is wrong with his params instead of
waiting till draining.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",59,17,0
"thesofproject/sof","54d191e82b2e4fac89040319520e41d188a7ad1f","lgirdwood","2018-10-02 07:32:38","true","Merge pull request #87 from ranj063/eqctl

eqctl: do not process invalid input file name",34,4,0
"thesofproject/sof","2d92796072856e530c3a1bce4f0a9ce2c74692d4","lgirdwood","2018-07-12 20:04:39","true","Merge pull request #87 from keyonjie/master

buffer: refine write-back and invalidate logic for produce/consume",12,1,0
"thesofproject/sof","8db46b410431e568bf60b42926b1559aaa160680","lgirdwood","2018-10-25 10:18:32","true","Merge pull request #500 from lbetlej/ldo_off_on_power_down

Set SRAM LDO off on power down - additional power gating on D0->D3 path.",27,5,0
"thesofproject/sof","6a259b9a085acfb484162748f6d8e86197ac5d2c","ranj063","2022-01-12 19:33:28","false","codec_adapter: cadence: set default API ID

Add a new field to struct cadence_codec_data to save the API ID and
set its default value to be that associated with CADENCE_CODEC_WRAPPER_ID.
If needed, this can be overwritten from userspace at runtime.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",117,43,1
"thesofproject/sof","6ed84e4a169c51016259df76ee638da59ec47498","ranj063","2021-11-14 17:20:57","false","topology2: cavs-gain-hda: Add option to build HDMI only topology

Add an argument to specify if we want to build the HDMI only topology.
To build the HDMI only topology, use the following command:

alsatplg -p -c cavs-gain-hdmi.conf -o cavs-gain-hdmi.tplg

To build the HDA topology use the following command:

alsatplg -D HDA_CONFIG=""gain"" -p -c cavs-gain-hdami.conf -o
cavs-gain-hda.tplg

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",127,41,1
"thesofproject/sof","34518568f72f4d80a633493295e5a9fed80a149f","ranj063","2023-08-08 19:24:58","false","tplg_parser: Add support for parsing and saving route

Add an option to parse and save the routes from topology so that the
IPCs can be sent at a later time.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",27,62,1
"thesofproject/sof","fc73578be774001ef0e9aafdfbc1b4f054cd93d4","ranj063","2021-07-07 22:56:20","false","drivers: Intel: SSP: ignore config when SSP is already configured

When two streams are started one after the other, 2 DAI_CONFIG
IPC's will be sent before the START trigger. This ends up
configuring the SSP when the first one has already just
configured it and ends up with xruns.

The root cause is that the ssp_set_config() function configures
a set of variables, writes those variables into SSP registers,
and later on does a read-modify-write operation on the TSRE,
RSRE and SSE bits.

If the ssp_set_config is executed more than once, this will
temporarily clear all three bitfields, and temporarily disable
DMA transfers and SSP clocks. Avoid this by checking if the
current state is > COMP_STATE_READY before configuring the
SSP, so that the ssp_set_config() function only modifies SSP
registers once.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",87,37,0
"thesofproject/sof","0a0a106df0c5480ebed71ac9a279db413b08ce82","ranj063","2018-06-12 03:37:15","false","dma:trace: dma_copy_new() does not need DMAC ID anymore

Update dma_copy_new() to be compatible with dma_get(). Remove the DMAC
ID argument and the corresponding PLATFORM_TRACE_DMAC definitions.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",1,0,0
"thesofproject/sof","722d86301a42d8d836a792b758983cbe8bd53909","softwarecki","2023-07-14 12:46:58","false","cmocka: volume: Add default case to handle unsupported formats

The switch supporting various sample formats was missing a default handler,
which caused compilation errors when enabling/adding a new format that is
not supported.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",32,61,1
"thesofproject/sof","8dd0adcd336401c34dfcc83e81bb7b363a2f8ddd","ranj063","2023-05-02 18:36:53","false","ipc4: dai: Split up dai_position()

And add a new helper, dai_zephyr_position() that can also be used by the
copier device.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,59,1
"thesofproject/sof","1e6f4e0618e8d1b81d83a0ab7062429e716d448c","macchian","2023-06-27 08:34:26","false","topology2: cavs-rt5682: make BT offload as option

Consider the variant projects with/without bt offload feature
so include BT_OFFLOAD pipelines as an option if needed

Signed-off-by: Mac Chiang <mac.chiang@intel.com>",40,61,1
"thesofproject/sof","cd8e75df5dde63301764a179402e2e839e28f51e","tinghan-shen","2022-06-28 03:18:19","false","platform: mtk: Add support for mt8188 platform

mt8188 platform integrates a single-core HIFI5 DSP.

The highest DSP operation frequency is 800MHz which requires
0.75v working voltage. otherwise, it should switch to 26M which
can operate at the lowest working voltage 0.55v.

Signed-off-by: Tinghan Shen <tinghan.shen@mediatek.com>",113,49,1
"thesofproject/sof","0f1434504b952a2920ff054ff7b34d1b08e8bd98","perahgren","2022-12-07 23:47:02","false","Correct build error in the GoogleRtcAudioProcessing component

Correct a typo that causes a build error in the GoogleRtcAudioProcessing component.

Signed-off-by: Per Åhgren <peah@google.com>",101,54,1
"thesofproject/sof","fe2d9c197f93cbf2023eb3e07dbe769c95614e9f","cujomalainey","2019-03-13 19:54:15","false","EQ: Handle edge case in peaking filter

Handle div by 0 case for gui

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",68,9,0
"thesofproject/sof","d604a3242da09391bfc3ae002119f8f5844f81c0","lyakh","2023-04-21 15:19:47","false","src: drop wrong type-casts to match cache annotations

No need for type-casting: void * is compatible with any pointers and
both pointers already have the __sparse_cache annotation. Dropping it
causes sparse warnings.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,59,1
"thesofproject/sof","1eabb71264c4e7eda4bb9b8d90e055cceadc75ce","lyakh","2021-06-11 10:11:57","false","zephyr: fix a race in LL-scheduler

If a timer interrupt happens before the scheduler thread suspends,
it will be missed. Use a semaphore to count interrupts as they occur.

BugLink: https://github.com/thesofproject/sof/issues/4306
Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",72,36,0
"thesofproject/sof","cfeb248275c133a64047faabe3f6feb3a06df1d1","lyakh","2023-01-25 13:27:30","false","google-hotword: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register google-hotword with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","dd15443129ba0de553627d42d4fc9dc4735cfad3","softwarecki","2023-03-07 11:16:25","false","file_utils: Removed duplicated function descriptions

Functions are already described in the header file.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",56,57,1
"thesofproject/sof","f8c89ed211d5a7aba268daba06092d69eb328228","abonislawski","2022-08-28 18:20:58","false","ipc4: invalidate cache for set large config message

Cache issue can occur when several set large config messages
were sent one after another

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",113,51,1
"thesofproject/sof","dfe52aac14f71295e3398972ad3b49976c67e74e","ranj063","2023-04-27 15:04:30","false","Tools: Topology2: SRC format fixes

This patch avoids with development topology sof-hda-src-generic.tplg
the playback start failure and error seen in trace
""buffer: buffer_alloc(): new size = 0 is invalid"".

The kernel selects in case of multiple output formats defined the
format that matches the input. It then caused the obs to become zero.
When the SRC is used in the mixin-based playback pipeline, its output
format is limited to 32-bits format only. So replace the multiple
output formats with a single 48K, 2ch 32-bit format.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",52,59,1
"thesofproject/sof","3bc52f8a4859b1f75df7af44147fa6cb2ad60ef1","johnylin76","2021-02-19 07:21:57","false","sof: drc: replace int type by int32_t

In order to make the algorithm portable to non-xtensa arch.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",74,32,0
"thesofproject/sof","acafb867b87c1eac371617ee9718c2a7ccfa2070","singalsu","2020-01-23 11:54:34","false","ASRC: Add asrc prefix to function names

While the functions were unused I missed to name them properly. With
the prefix the names are consistent with push mode functions.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",79,20,0
"thesofproject/sof","40b6c80f18b4e4f173a0b6ebc2376d4b9bfc2e7a","singalsu","2022-04-04 17:22:40","false","Audio: SRC: Fix incorrect and insufficient buffer size check

This patch checks in prepare() buffers for nominal frames count
(sample rate times schedule period) plus internal input and output
block size constraint. With this size check passed the SRC is able to
process a single block of data per copy() if upstream and downstream
components operate with reasonably small block constraints.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",110,46,1
"thesofproject/sof","d77a98e08137442d733f39e6973b01f06e5ede89","singalsu","2018-07-25 13:43:30","false","Mixer: Remove attenuation and apply saturation to mixed audio

This patch removes the down scaling of inputs to preserve the signal level
non-modified in mixing. The 64 bit mix is saturated (clamp) to prevent
overflow.

It is recommended to instead use in topology volume components with safe
gain set in the inputs of mixer (-6/-9.5/-12 dB for 2/3/4 inputs) if
saturation in mixing must be prevented.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",12,2,0
"thesofproject/sof","d013fbc6d7be0ee6e4c72ac25a228d2ebaa22467","singalsu","2019-09-02 14:11:09","false","Tools: Add current sof_abi_hdr struct print capability to sof-ctl

This patch adds command line option ""-g"" to generate and with help
of options ""-o <file>"" to store the current ABI version header data
into file. Use ""-b"" to change the default CSV format to binary.

It is used by external tools to create configuration data blobs for
SOF audio processing components.

The parameter for size is the configuration data payload size with
the size of sof_abi_hdr struct excluded. It does not impact the
the length of printed header. It just places the length into the
correct location in the header.

This patch also fixes the permissions of file output. The mode
need to be provided for open() to avoid having no access to
created file and allow overwrite of existing file.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",59,15,0
"thesofproject/sof","5aa9a9e48488ec88bd08980310a465c4a482372d","singalsu","2023-01-24 09:25:20","false","Tools: Tune: EQ: Matlab compatibility fix for parametric EQ

Every endif is changed to end. The endif works only in Octave.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",55,56,1
"thesofproject/sof","73e6a6fab19eaf84214670d89ea8ea5879d2ec75","singalsu","2021-06-04 11:49:28","false","Driver: Intel: DMIC: Remove state check from active FIFO mask update

The mask does not over/undercount events so no need to protect
from multiple start() or stop() calls.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",74,36,0
"thesofproject/sof","590044522f0ce15326a4d89066b2f1edfbd1cc30","singalsu","2018-09-12 09:41:09","false","EQ IIR: Prevent reconfigure during playback and add traces

This patch prevents the not supported reconfiguration during playback or
capture. The request is not returned as error because then the kernel
driver will automatically apply the binary command in next idle and the
new response is configured and activated.

Some traces are added to help debugging the driver. The configuration
size is traced and and trace code ""eis"" is added if the received
configuration has zero length.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",42,3,0
"thesofproject/sof","f886d3d6d395c90409b7abcedd9dd5fa4f395363","singalsu","2018-06-19 15:14:50","false","DMIC: Set TH and BFTH bit fields via the variables in HW version 2 code

This aligns the HW versions 1 and 2 code and avoids a build error about
unused variables.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",1,1,0
"thesofproject/sof","242cc0ebcb999750b9bb89967ef166d229a44b03","singalsu","2020-09-03 15:49:36","false","Topology: Add support for DMICPROC macro to intel-generic-dmic.m4

This patch adds support to define from CMakeLists.txt or a
higher level platform topology file the definition of DMICPROC and
DMIC16KPROC to select desired capture processing algorithms pipeline
from pipe-x-capture.m4 and pipe-x-capture-16khz.m4 macros instead
of hard coded processing eq-iir-volume. It is preparation to add
support for beamformer processing for microphones.

The impacted platforms are sof-hda-generic, sof-cml-rt5682, and
sof-apl-pcm512x. This patch does not change built topologies.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",70,27,0
"thesofproject/sof","ee5c247c579636bbb76fb63d3ffb644c5a1ddb9e","singalsu","2019-03-01 18:53:46","false","SRC: Add attenuation of -1 dB into processing to avoid saturation

This patch replaces all the filter coefficients to avoid the
unpleasant effect of samples saturation that the previous 0 dB max.
gain scaled coefficients could cause. The saturation of transients
may still happen but it should be more rare.

The filter coefficients scaling is changed from fixed pass band peak
align (to 0 dB) into DC gain controllable via new parameter gain in
src_param.m.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",66,9,0
"thesofproject/sof","914c415eed214d413a30640181bb1dab04bc0445","singalsu","2022-04-01 18:15:31","false","Audio: SRC fix bug in detecting pass-through condition

If the SRC rates matrix is non-symmetric, the indexes to
in and out sample rates matrix can't be compared. Compare
instead the rates.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",110,46,1
"thesofproject/sof","6a84b4e945e430886980093465ee2f4a310d68fc","kv2019i","2019-04-24 13:46:21","false","sof: logger: reopen trace file upon EOF

If logger reads an end-of-file from trace node, reopen the file
to ensure trace read position is in sync between host and DSP.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",52,11,0
"thesofproject/sof","c687815185948d49350e4b58d59e786ac16339e1","lkoenig","2021-12-15 11:28:27","false","topology1: Undefine after in DAI & PIPELINE macros

In order to ease comprehension and avoid side-effect of constants being
defined after calling a macro, this change undefined the locally define
constants for pipelines and dai macros.

Signed-off-by: Lionel Koenig <lionelk@google.com>",113,42,1
"thesofproject/sof","20d4eadc4855b3af248b8b737fb83581684eb684","RanderWang","2021-11-03 06:35:20","false","ipc4: copier: fix a typo

In & out are container size and should be compared for
conversion function.

Signed-off-by: Rander Wang <rander.wang@intel.com>",125,41,1
"thesofproject/sof","76d2e10fa859b62038d5a52562be17ba64fa5d45","xiulipan","2021-01-27 08:21:51","false","CI: GitHub action: change name shows on PR status

change name for the GitHub actions to make the status context name
show in PR check looks nicer

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",68,32,0
"thesofproject/sof","6b650bd95fe003cc8f13715aa53feb293e629b70","iuliana-prodan","2021-08-30 11:16:59","false","xtensa-build-zephyr: add imx8 as supported platform

Add imx8 platform to be tested with Zephyr.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",118,39,0
"thesofproject/sof","181777dea12e5b2d839aa7807dd2c9e68ffa62b1","iuliana-prodan","2023-05-03 15:37:22","false","topology: imx: Add SRC topology file for i.MX8 and i.MX8MP with wm8962 codec

Generate SRC topology file for i.MX8 and i.MX8MP with wm8962 codec
based on sof-imx8-src-wm8960.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",54,59,1
"thesofproject/sof","9d9c28848def697a6124acde0baf1607a804834d","plbossart","2022-07-06 16:02:50","false","topology1: generate new sof-hda-generic version for 2ch PDM1

Generate 2 files for 1 and 2ch cases.

These topologies can be used by setting

options snd-sof-pci tplg_filename=<file>

in /etc/modprobe.d/alsa-base.conf

BugLink: https://github.com/thesofproject/sof/issues/5989
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",110,49,1
"thesofproject/sof","1ea7b575e2c7ea2f608c69d701df75d4a18326a0","lrgirdwo","2018-09-28 14:56:50","false","xtensa: boot loader: sue creek has no IMR so use different base address

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",37,4,0
"thesofproject/sof","ba4054bc3ca5dcb6dcd53f8e426a36da2aaecaa6","lrgirdwo","2018-12-07 20:53:57","false","lib: dma: simplify DMAC search and fix users to max channels

Currently the dai user only increments the DMA channel usage count on
channel start and decrements on stop. This doesn't align with the current
DMAC allocator so ensure that the DMAC allocator cannot over subscribe
a DMAC with more users than channels. i.e. DAI config will try and allocate
a channel and fail if over subscribed.

This needs to be revisisted with changes to DAI to allow over subscription.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",45,6,0
"thesofproject/sof","c4960e7451d851e153e0fc2a9f8c928c6a538b43","lrgirdwo","2018-11-24 15:56:44","false","xtos: prefctl: Set correctly for skl and kbl.

Todo look at SMP version settings.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",40,6,0
"thesofproject/sof","c90055f2f51e2b122ebed412e0053232b88e01c7","lrgirdwo","2022-08-29 11:15:05","false","header: rtos: use rtos specific version of string.h

No runtime semantic change. Use C library when RTOS uses
C library otherwise use own C library calls.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",114,51,1
"thesofproject/sof","93c57421719a19dc1ce0433bd2bb3f8caeabd97a","jajanusz","2019-01-30 06:33:30","false","rimage: fix for gcc8.1 -Wstringop-truncation

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",56,8,0
"thesofproject/sof","df3c87ce0119eeb6cf2b0a2c5a9a2fe8b053ea20","jajanusz","2020-09-03 14:05:19","false","config: rename FIRMWARE_SHORT_NAME to RIMAGE_SIGNING_SCHEMA

Old name was misleading, because this config is not used just as name.
It is used to decide how to build and sign FW image.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",70,27,0
"thesofproject/sof","9840ecbbfe41ce0cc53b5d0215c64c9f87557d39","jajanusz","2019-01-18 11:03:29","false","cmake: update xtensa-build-all.sh

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",57,7,0
"thesofproject/sof","6d80a5565b74b5ee49d4497c3308ebda8e6c4640","johnylin76","2022-12-08 18:57:13","false","src: avoid restless warn messages from comp_get_data_blob()

At present codes of rtnr and google-rtc-audio-processing, a
reconfigure() function is called per copy() routine to dynamically
update config blob in COMP_STATE_ACTIVE state. The logic has no
problem in practice.

However, if there are cases that config blob is always empty or
arrived late, hundreds of warning message lines per second will be
produced by comp_get_data_blob() called from reconfigure(),
restlessly complaining that data blob is not set.

This commit adds a pre-check for early-return under such cases to skip
comp_get_data_blob() calls with warn messages.

Signed-off-by: Pin-chih Lin <johnylin@googele.com>",101,54,1
"thesofproject/sof","bb847b76398d9f63dd56ae36e8f41ede0724fd4b","yongzhi1","2021-11-03 21:55:24","false","topology2: nocodec: remove index initialization from DMIC instance

The DMIC DAI does not have index attribute, so remove it.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",125,41,1
"thesofproject/sof","87caf973ebacdcfcf28e4a2adc2ba46256d0351e","RanderWang","2022-04-08 06:43:30","false","ipc4: src: set param before param validation

In ipc4 path there is no ipc param message from host and
each module needs to build param from module config.

It does not affect ipc3 since the function does nothing
in ipc3 path.

Signed-off-by: Rander Wang <rander.wang@intel.com>",114,46,1
"thesofproject/sof","beddfb360a5f5a90a8c4d6e6cd9c686ca18bbe97","RanderWang","2023-09-25 06:10:52","false","topology2: Add 4ch audio formats for gain-capture pipeline

Add support in gain-capture pipeline to support 4ch DMIC stream.

Signed-off-by: Rander Wang <rander.wang@intel.com>",22,64,1
"thesofproject/sof","f73332eafedf5443f01bf26027fde2578e847ced","RanderWang","2019-12-18 08:44:37","false","dai: ALH set burst_elems

The burst length of GP-DMA should align to DMAT setting
in Audio Link Hub, or XRUN will happen. We don't change
DMAT setting since it is also used by cAVS FW.

Signed-off-by: Rander Wang <rander.wang@intel.com>
Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",72,18,0
"thesofproject/sof","6053a4ffefbc0a7fe3c74a63fead0bf7a3e915db","aiChaoSONG","2021-07-07 05:53:54","false","topology2: add copier class

Add class definition for copier widget, it can be
instantiated as:
    Object.Widget.copier.""N"" {
	copier_type	""host""
	cpc	100000
    }

Signed-off-by: Chao Song <chao.song@linux.intel.com>",87,37,0
"thesofproject/sof","a97d166121212f17b532e1e4dee4de077fe368ec","nashif","2020-11-27 18:00:26","false","zephyr: reference local Kconfig

Reference Kconfig in zephyr module file which is evaluated by Zephyr
directly. This will eliminate the need for including the SOF Kconfig
directly.

Signed-off-by: Anas Nashif <anas.nashif@intel.com>",78,30,0
"thesofproject/sof","55f6116bbf2751f8c5b0c6f030685cc08c724042","ranj063","2021-06-16 01:16:28","false","topology2: Add pipeline widget class definition

The pipeline widget can be instantiated within a pipeline class as:
	Object.Widget.pipeline.""N"" {
		index		1
		time_domain	""timer""
		period		1000
	}

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",71,37,0
"thesofproject/sof","b787fbaaa3811972544156f833ccc0c9d4bb876b","lyakh","2022-10-18 13:19:05","false","dai: make special configuration in dai_config() const

DAI special configuration can be delivered from an IPC buffer,
make it const to catch any inadvertent modifications.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",99,53,1
"thesofproject/sof","6749a36c3c33bf617eed980dbcb8727c62276444","akloniex","2020-03-17 20:32:33","false","ipc: buffer: Properly free buffer using buffer_free instead of rfree.

In case of lack of memory to allocate control struct for newly created
buffer, pointer to that buffer was rfree'd instead of proper buffer_free
call, which would have resulted in memory leak. This patch is to address
this issue.

Signed-off-by: Artur Kloniecki <arturx.kloniecki@linux.intel.com>",72,21,0
"thesofproject/sof","a9157a7d924c95f4ef415ccded0b53035447d0dc","xiulipan","2018-11-22 10:25:25","false","host: fix wrong usage of dma_channel_get

Need not to use stream tag for dw_dma as the comment said

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",40,6,0
"thesofproject/sof","a0fc1de51576041a50d89864c1a53a169bf26e78","xiulipan","2020-08-17 04:00:03","false","topology: add development folder for test and validation

Add development folder for topologies that not for production.
First add sof-tgl-nocodec-ci as a validation topology.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",75,27,0
"thesofproject/sof","7b75314dfb29251d0e0367d6300fe72d63c499c4","xiulipan","2019-11-04 08:32:39","false","kmod_scripts: add support for common hdmi

The HDMI codec may also use snd_hda_codec_hdmi

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",56,17,0
"thesofproject/sof","30dbbb999aa4ffce6c6d6dd8840ddebb158495d9","makarukp","2022-10-19 13:29:15","false","mtl: hda: add additional link inputs

Define more link inputs for mtl platform

Signed-off-by: Piotr Makaruk <piotr.makaruk@intel.com>",98,53,1
"thesofproject/sof","f1fa3be9804f0a51e4b80b1f1c28a00973844e54","abonislawski","2020-03-16 17:18:11","false","probes-app: add allocation check

This will check if the allocation succeeded

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",79,21,0
"thesofproject/sof","17064d4f22bf275e449cee05f3cfbd0d326d2e84","ranj063","2022-01-11 17:52:47","false","module_interface: remove the id field

It is never used.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",114,43,1
"thesofproject/sof","09ec53876c2da5247b0d73a9f7b14f5f1910d08a","ranj063","2022-03-22 16:21:55","false","codec_adapter: return if copy_bytes is 0

Return is copy_bytes is 0 before calling copy/writeback which will do
nothing anyway.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",108,46,1
"thesofproject/sof","96474cd0f7a52e15d44100d1b1c80405187c10d0","abonislawski","2020-09-25 14:56:01","false","ext_man: prevent removal of cavs-specific element

This patch will allow to keep cavs-specific elements

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",64,28,0
"thesofproject/sof","4123f95353fec40f255675db98dc2ea7486ab14b","ranj063","2023-05-05 20:57:11","false","topology2: cavs-nocodec: Build LNL nocodec topology

Build LNL nocodec topology with simple copier-copier pipelines.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",53,59,1
"thesofproject/sof","27e0450e363a2d1b99ee0a309da04dd2be5b2b94","abonislawski","2020-03-02 11:19:40","false","tgl: allow to include interrupt.h in asm

It will allow to use TGL IRQ defines in asm

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",77,21,0
"thesofproject/sof","d7ed871ac027e6cbe7b5960b9174b1b62bd60aac","ranj063","2022-11-06 03:04:13","false","lib: dma: free dma channels when ref count is 0

Free the memory allocated for DMA channels when the ref count is 0 when
using native zephyr drivers.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",90,53,1
"thesofproject/sof","2dba175d6175ee5ab597758c62865755f4a016a3","ranj063","2022-01-11 19:55:43","false","module_interface: remove module_id

Remove the module ID fields from struct processing_module and struct
ca_config. The comp ID is unique across all components in topology and
can be reused to identify the modules as well.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",114,43,1
"thesofproject/sof","5ce0d2b43f2eae5216552530b730432425e91287","ranj063","2021-12-20 17:20:34","false","topology2: gain: fix dB scale min and step values

It is not intuitive for the end-ser to set linear values for
minimum gain. Set the dB gain min value to -90dB and steps to 2dB.
Also, modify the max to 45 to allow the volume gain range -90dB to 0dB.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",121,43,1
"thesofproject/sof","972c7f15457240b81f3d847e59788abe7d41cb8b","ranj063","2023-05-02 19:18:29","false","dai-zephyr/dai-legacy: Split up dai_copy()

Add a helper function, dai_zephyr_copy() that can also be called from a
copier device.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,59,1
"thesofproject/sof","a1f80afe44dce34faaa31871afe739248376370a","groncarolonxp","2019-10-08 11:43:23","false","drivers: imx: Add SAI support

The SAI is a hardware DAI on the i.MX platform. This commit brings
the initial support for the SAI.

Current limitations:
 -> Hardware FIFO watermark is hardcoded to HALF FIFO size
 -> current codec only support stereo channels
 -> slot size hardcoded to 32 bit
 -> clock divider is set to 8

Signed-off-by: Guido Roncarolo <guido.roncarolo@nxp.com>
Signed-off-by: Jerome Laclavere <jerome.laclavere@nxp.com>",62,16,0
"thesofproject/sof","5abdf3778be8294b308a46f771cb15cb2bb23109","ranj063","2020-09-22 19:38:02","false","volume: fix get_cmd() for SWITCH command

Switch controls can only have 0/1 for values. Fix the get_cmd() callback
to return the channel mute status for SWITCH commands instead
of the current volume gain.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",67,28,0
"thesofproject/sof","3018193d3a83b0e420d54b83cc415326b359e8e8","ranj063","2021-06-12 23:41:47","false","topology: eq pipelines: remove duplicate SectionData

Remove the duplicate SectionData when multiple EQ's use the
same filter coefficients. There is no change in the topology
binary generated with just one SectionData instead of multiple
ones.

But this will help clean up the conf file so that converting to
topology2.0 will become easier as the name tells me which
coefficients to include.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",71,36,0
"thesofproject/sof","b5754f6e2af0ac36422e822863d75aa2248560d7","ranj063","2018-06-14 03:02:25","false","tone: set sample rate from topology

set the sample rate from the value set in topology.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",1,0,0
"thesofproject/sof","fcec2f78b92fa95c872c3f5c7fe9f2d0565425d3","ranj063","2022-10-19 17:18:06","false","ipc4: (cosmetic) Fix typos

Purely cosmetic. No change in code.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",95,53,1
"thesofproject/sof","b9fffdc0ddfa1e99aefdb8f846845f7e4d079a5e","ranj063","2022-03-23 22:09:27","false","codec_adapter: Fix doxygen comment for file

No functional change.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",109,46,1
"thesofproject/sof","6bbf6b0d3cfae5d7e3d646d56b10775c12a66466","ranj063","2021-06-28 05:29:36","false","Revert ""dai: only process DAI config for comps on cores that enabled""

If the core is not up, the comp exist in the comp_list.
So no need to check if the core is up.
This reverts commit bccecb1a8eed84a0737fdf2878204adfb6cf845d.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",76,37,0
"thesofproject/sof","5194eabf4f95f949479496db0bb6a4b79761a85c","fredoh9","2019-03-19 20:40:57","false","topology: ssp: add quirks parameter in SSP_CONFIG_DATA

Support quirks setting from topology. quirk are used to set
ssc1/ssc2 registers according to its bit value.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",65,9,0
"thesofproject/sof","976b9d647a643d8be508f70c63c9ae11d2d2bab5","tlauda","2019-08-05 14:17:26","false","timer: cavs: add missing labels for TIMER4

Adds missing switch labels for TIMER4.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,14,0
"thesofproject/sof","0648828b2b3c46f6cc2f549130aa5cf6030140df","tlauda","2019-07-10 14:21:34","false","cavs: allow for header inclusion only from platform code

Adds preprocessor check in cavs headers and throws error,
when they are included from outside of equivalent platform
headers.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",42,13,0
"thesofproject/sof","82b8d08a28e31cc30d012d15b07f92d1e59ee031","tlauda","2020-01-10 13:09:10","false","memory: add platform_shared_commit function

Adds platform_shared_commit function for keeping shared data
synchronized. It's used after usage of data shared by different
cores. Such data is either statically marked with SHARED_DATA
or dynamically allocated with SOF_MEM_FLAG_SHARED flag.
cAVS platforms use uncached memory region, so no additional
synchronization is needed, but for SMP platforms without
uncache this function should writeback and invalidate data.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",76,19,0
"thesofproject/sof","05d07bb1b3faf72abfacd46fb9e9619bf2315497","lgirdwood","2018-07-26 14:08:09","true","Merge pull request #147 from slawblauciak/slave_fix

drivers: i2s frame clock slave mode",13,2,0
"thesofproject/sof","53a63eac1484f052ff5e49635c61e8f620117bd9","mrajwa","2019-02-19 22:51:46","false","KPB: add cmocka test cases for real time copy and internal buffering

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",63,9,0
"thesofproject/sof","e3420cffc94cdf8dc2eb49787acb0eb6d9c3e427","lgirdwood","2018-07-30 06:45:18","true","Merge pull request #145 from zhigang-wu/topic/test

define the ssp fifo depth macro to be generic",14,2,0
"thesofproject/sof","75440af68a915aa1973863d3c876b6daedd805be","lgirdwood","2018-06-26 14:37:03","true","Merge pull request #5 from keyonjie/master

multiple SSPs/BEs support for SOF--SOFT Part",5,1,0
"thesofproject/sof","07d401af9d35d10f6fae38adaad758671038e73d","maruthi-machani","2022-10-19 11:11:32","false","drivers:amd:four channel dmic configurations

configurations to support dmic for four channels for amd
platforms.

Signed-off-by: MARUTHI MACHANI <maruthi.machani@amd.com>",98,53,1
"thesofproject/sof","426542d17f18d2981c3b5230e319c60ae5be9557","dbaluta","2022-03-24 15:01:27","false","codec_adapter: cadence: Resolve api_id at runtime

Linux host will send codec_id at runtime via sof_ipc_stream_params
as part of extended data appended at the end.

When ext_data_length is non-zero this means that the kernel wants us
the use dynamic codec id. When ext_data_length is zero, use backward
use default codec id which means we keep compatibility with older
kernels.

The codec_id is sent using compress API interface. We need to convert
that to internal cadence numbering scheme.

And final step, in order to use the dynamic id we need to move
cadence_codec_post_init() from init() function to prepare() in order
to be sure that the kernel already sent us the parameters.

We need to this operation atomically in one patch in order to avoid
breaking the functionality between patches.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",111,46,1
"thesofproject/sof","b040f2bf2b36f4a7d01e670fec459f01e5ccdf6c","dbaluta","2020-05-30 08:30:08","false","drivers: imx: Disable FIFO warning DMA flag

FIFO warning flag signals if SAI FIFO is empty (for transmitter)
or full (for receiver) and it is cleared automatically if the condition
is removed.

We already use FIFO request flag to signal DMA for data availability
so there is no need to enable FIFO warning DMA flag.

This aligns SAI firmware driver with SAI Linux kernel driver.

Also, this mitigates a problem in the SDMA driver where multiple
starting and stopping aplay in a loop results in an I/O error
after some time.
Investigation should continue to fix the SDMA driver.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",97,24,0
"thesofproject/sof","22de787f1f46c0901389a7d1e466ba4742ceff62","dbaluta","2020-02-20 14:46:20","false","scripts: update sof_builder docker with imx8m support

Add imx8m cross compiler in sof_builder docker build file.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",83,21,0
"thesofproject/sof","f8bdef3baaa7e964aa12e49db7db32a953ac5ba3","ranj063","2023-01-04 18:06:07","false","module_adapter: produce/consume only from the active buffers

In the simple_copy case, source/sink modules that aren't active are
skipped when passing the buffers to the process callback. So,
produce/consume from only the active buffers that were passed to the
process callback as well.

Reported-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",71,55,1
"thesofproject/sof","1da08478c0cc533096c42f83cb0d7553f9c61814","ranj063","2019-02-12 23:58:02","false","topology: Add kpbm capture pipeline

Add support for generic capture pipeline with a KPBM between PCM and
other pipelines. This can be used for Keyword detection use case.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",60,8,0
"thesofproject/sof","9cd7f38973ff8e83f325dd8f5aa593eba8ec12bd","ranj063","2023-05-02 19:17:33","false","dai: Modify the signature of dai_dma_position_update()

Pass both the dai_data and the dev pointers so that it can also be used
from the copier device.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,59,1
"thesofproject/sof","ef4c467df62703b2ce102ece9247a044435b9bf2","ranj063","2023-05-15 00:55:35","false","copier: Remove usage of endpoint device for multiple endpoint DAIs

Remove the usage of the endpoint device for params, prepare, trigger
and reset.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",51,59,1
"thesofproject/sof","a992ce7f4ced35bcde7d75d86de15d6c1a24b36c","ranj063","2022-01-12 01:31:19","false","codec_adapter: Introduce new enum for processing modes

This will be used to set the processing mode for the modules.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",114,43,1
"thesofproject/sof","33d11ad659c344e3a8306e9439e8b471bcbb6c72","ktrzcinx","2019-11-07 09:19:44","false","kconfig: volume: group functions by supported data type

It will be helpful during next step - conditional code
compilation depending on configuration

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",53,17,0
"thesofproject/sof","b7c92f18e6148969a6b4c0f30630e84757e73558","ktrzcinx","2020-01-21 11:01:51","false","test: Rename universal_mocks.c to common_mocks.c

Old name was quite misleading, new one better describes file content

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",79,20,0
"thesofproject/sof","9453183cbecdfb1429248ee1b8e3800ed29fe0df","aborisovich","2023-02-01 21:41:49","false","Fixed warnings issued by new xt-clang compiler

New Xtensa xt-clang driver issues new warnings that were not
present before when using xt-xcc driver.

Fixed warnings related to enum cast to other enum by removing
""frame_fmt"" local variable assignment in the selector.c file.
Assignment was not needed in the build_config function body, as the
variable ""frame_fmt"" is passed in the next line to
audio_stream_fmt_conversion function, that writes to this variable as
output.

Silenced warnings related to C/C++ interoperability.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",52,56,1
"thesofproject/sof","1529fe52fbf78d80cf06ae6636b8a1ce32661c39","lyakh","2022-04-14 12:06:19","false","buffer: restore original comp_update_buffer_* names

Previously we temporarily added two functions
comp_update_buffer_cached_produce() and
comp_update_buffer_cached_consume() to be able to migrate users of
comp_update_buffer_produce() and comp_update_buffer_consume() to them
respectively. Now that all users have been migrated we can remove
original implementations and restore original names.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",117,46,1
"thesofproject/sof","cbd17c43ea7eb1738c59ef89b0b12cea051461af","marc-hb","2022-08-05 10:53:15","false",".github/zephyr.yml: cosmetic matrix re-ordering

No functional change, this is a pure re-ordering of the matrix
parameters to put the shorter ones first which helps see more in narrow
columns like when looking as build logs on github.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",116,50,1
"thesofproject/sof","c74c29f9204c4943492ef43264de6df980c0b849","marc-hb","2020-07-23 22:02:47","false","README.md: remove misleading ""Prerequisites"" and ""Build Instructions""

The ""Prerequisites"" and ""Build Instructions"" sections are dangerously
incomplete: they don't say a word about toolchains. Someone on gitter
just wondered why they don't work. sof-docs is the reference now and
lucky us that's already the first thing at the top of the file so keep
that. Remove these two sections so their build commands stop tempting
readers to skip the link to the unfortunately longer but necessary
sof-docs instructions.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",77,26,0
"thesofproject/sof","e3494f5662c877383565606570718ea5abe8d416","marc-hb","2021-09-13 19:28:49","false","xtensa-build-zephyr: make ""tree"" optional

""tree"" is very useful but it's not critical, not worth failing the build
for.

Also remove a single quote from the help message as it breaks parsing
in one simple editor I use (jed) and possibly others.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,39,0
"thesofproject/sof","e848406ec7c03d03feec46dfaeb3192f603cb785","tobonex","2023-09-15 18:06:45","false","waves: remove buffer_acquire from waves.c

remove buffer ops from waves.c

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","29fa4e1a9c949439f0b96ab367fb4e3211fd8784","ShriramShastry","2021-11-26 16:14:42","false","math : Add square root function using lookup table

fix point math square function having positive number y as input and
return the positive number x multiplied by itself (squared)

Signed-off-by: Shriram Shastry <malladi.sastry@intel.com>",129,42,1
"thesofproject/sof","d3038f5af6e95154bc9a4004906b29447ac7e35c","lyakh","2019-06-03 08:24:49","false","HDA: (cosmetic) fix indentation

Fix indentation in hda_link_dma_ops and hda_host_dma_ops.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",68,12,0
"thesofproject/sof","0a03bef10e58ebc20132c86d7771bd1983ff739a","chunxu-li","2022-03-03 07:42:15","false","drivers: mtk: add afe driver for mt8186

Add AFE driver for memif/sinegen
Add afe-dai.c/afe-drv.c/afe-memif.c for AFE common driver

AFE: Audio Front End

The audio front-end essentially consists of voice and audio data paths.

frontend (memory interface):
 UL (uplink for capture)
 DL (downlink for playback)
backend:
 I2S In/Out etc
interconn:
 inter-connection, connect frontends and backends as DSP path

Note:
TEST_SGEN macro define is just for test

Signed-off-by: Chunxu Li <chunxu.li@mediatek.com>",113,45,1
"thesofproject/sof","90045619d3df85fcf9b90ae64a2ad9221af2113a","lyakh","2021-05-19 08:46:12","false","ll-scheduler: only modify the task if it is valid

schedule_ll_task_cancel() looks for a task on the list to cancel it.
However, if it doesn't find the task on the list it still sets its
status and deletes it from the list. Currently this doesn't cause
any problems, but it's potentially dangerous. This function can be
called for completed tasks, which are no longer on the list. So
list_item_del() will be called for the second time for it. Currently
this isn't a problem because SOF implementation of that function
also initialises the list head, but not all doubly-linked list
implementations do that. E.g. Zephyr's sys_dlist_remove() nullifies
both .next and .prev, so, a repeated call to it would cause a
NULL dereference. In general it's safer to only modify an element
when it has been verified to be valid.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",87,35,0
"thesofproject/sof","ca45e75244a752ecf8158b19d41ad4b0e5e89388","tlauda","2019-08-01 12:23:06","false","ll_schedule: zero queue by default

Changes ll_schedule_data allocation function from malloc
to rzalloc. It should be zeroed out in order to prevent
usage of any garbage data after slave core reenable
sequence.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",53,14,0
"thesofproject/sof","b3bf1ca306ab5b19ebe7ca63ca7efa7f3735c87f","tlauda","2018-12-04 13:03:56","false","alloc: add system runtime heap

Adds system runtime heap, which should contain
runtime objects created by the kernel part of the code
(drivers, devices etc.) If there will be a need to
separate ring 0 access, this allows us to easily do it
by adding access rights.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",41,6,0
"thesofproject/sof","600e2692bd336bb3c1ac9154f3bdb60833ffc96b","lgirdwood","2018-07-04 12:20:15","true","Merge pull request #18 from RanderWang/master

SOFT: fix this topology failed to be loaded",9,1,0
"thesofproject/sof","79ef8a1683b7a19ca99f73264c1f30a1fe57ae5b","lgirdwood","2018-08-07 12:07:10","true","Merge pull request #197 from tlauda/topic/cavs_memmap

cavs: memory: fix cAVS platforms memory map",18,2,0
"thesofproject/sof","4c9498a8ac1a9382d442d08f168ff70bf8295fdc","lgirdwood","2018-09-29 20:00:01","true","Merge pull request #86 from xiulipan/pr/loggerfix

Some optimization to logger",37,4,0
"thesofproject/sof","9818410347b23e48acb4ca6c18eb1ce806222a45","marc-hb","2021-10-13 23:30:48","false","cmake: use new --erase_vars feature and test new 'reproducible.ri'

Update the scripts/test-repro-build.sh test accordingly.

Finally, different people and CI systems can make sure they're building
the same firmware.

reproducible.ri is sof.ri with variable parts removed.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",123,40,1
"thesofproject/sof","842c39fb0f691d8c7462b8baf68675eeeda6e697","marc-hb","2022-10-26 19:11:27","false","xtensa-build-zephyr.py: add missing RI_INFO_UNSUPPORTED platforms.

Copy the entire list of UNSIGNED_RI platforms from
src/arch/xtensa/CMakeLists.txt, adding the ones that don't use Zephyr
yet.

Also rename NO_RIMAGE_PLATFORMS to RI_INFO_UNSUPPORTED not to give the
wrong impression that imx8* don't use rimage.

Fixes commit 3a9413eebd82 (""xtensa-build-zephyr.py: restore lost
reproducible .ri checksum"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",93,53,1
"thesofproject/sof","deb0e7340ef97b7a9516e96fef1e2ac514ef5e81","marc-hb","2022-01-13 23:56:15","false","Rename generated version.h to sof_versions.h

Zephyr also a version.h too so the situation was a buggy #include mess
that (among others) dropped the SOF git version from the SOF banner when
using Zephyr. It's absolutely impossible to fix this mess while keeping
two .h files both named exactly the same and even included with the
exact same '#include version.h' line, I mean no sof/version.h or other
prefix.

As a bonus, this rename also reduces the XTOS-only confusion between
""version.h"" and cavs/version.h"".

Generating a file in the source tree is a serious bug (to be fixed
later), it means this file is never cleaned. Do not hide this bug with a
.gitignore rule.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,43,1
"thesofproject/sof","845c278ed66025275abe1df9ee0fc26246508e12","ShriramShastry","2021-04-19 12:58:45","false","Math: Trignometry: Added cordic sin cos function

Cordic sin cos input value range is [-2*pi to 2*pi]
and output range is [-1 to +1]

This is common function to calculate trignometric sine
and cosine using separate lookup table size for speeds
and accuracy calculation.

For 32bit sine and cosine
Error (max = 0.000000011175871), THD+N  = -170.152933

For 16bit sine and cosine
Error (max = 0.000061), THD+N  = -91.518584

Signed-off-by: ShriramShastry <malladi.sastry@intel.com>",89,34,0
"thesofproject/sof","5cdabe5b76bd16b4969a6f01a245f7f2b31a99ad","ujfalusi","2022-03-28 06:20:40","false","ipc4: base_fw: Fix firmware version type in basefw_config IPC

The firmware version numbers should use u16 type, not u32.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",112,46,1
"thesofproject/sof","5e11467ea58c3fb045eddc8d56c9b5ad018f98e9","marc-hb","2021-04-01 00:38:41","false","xtensa/CMakeLists.txt: split very long CFLAGS line

Will also make git commands (blame, merge, revert, rebase,
cherry-pick,...) much less likely to fail.

Also more readable and more obvious that -imacros is not nested.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",79,34,0
"thesofproject/sof","d0f59a7cb32855727ed747c6af5636ae96bb8575","marc-hb","2023-06-08 19:43:02","false",".github: add first LP64 compilation

A ton of (valid!) warnings but this will make sure the code at least
compiles.

For more context see #7192

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",46,60,1
"thesofproject/sof","55e862c92ec66191d12229519f6293d78437a95d","marc-hb","2022-01-06 22:50:54","false","docker-run.sh: switch from ""sof"" shortcut to full ""thesoftproject/sof""

It's super annoying and time-consuming to update the image and wonder
why the previous one is still used. Shortcuts are nice in interactive
use but pointless in scripts.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",115,43,1
"thesofproject/sof","0fe263de6f540196dbd1e69b6e203c6dc98bcd6c","lyakh","2021-09-07 13:27:57","false","pipeline: (cosmetic) move a block of code to a function

Improve readability by moving a block of code into a function.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",119,39,0
"thesofproject/sof","f3b87b400fa046637afae58edfbeaceb3a76b7a3","lyakh","2021-01-22 11:23:06","false","byt: fix sporadic channel swap

Commit 05e1c26166 (""byt-ssp: fixes for DSP modes"") removed a
work-around for known hardware bugs, causing channel swapping
in I2S mode. Restore the work-around but make sure it's only
enabled in I2S and LEFT_J modes.

Fixes: #3699, #3520

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",69,32,0
"thesofproject/sof","a07e69076c4921eb63d644881519996c25bc4e36","lyakh","2023-01-25 11:52:44","false","basefw: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register basefw with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","1f79acd74c79cc0788952a5758e4e84c18340eb7","lyakh","2019-02-20 09:03:48","false","math: replace MIN() and MAX() macros with safer versions

Using macro arguments multiple times within the macro definition body
can lead to repeated expressioon evaluation. To avoid that replace
MIN() and MAX() macros with safer versions.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",63,9,0
"thesofproject/sof","4f54914cebbb270e5d5f16cb7305741f44aef297","yongzhi1","2021-11-09 21:34:43","false","topology2: add dmic pipeline to nocodec topology

With dmic definition already in, add pipeline to make use of the pcm.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",127,41,1
"thesofproject/sof","794cf7a7077b44bc603e640b95d59d1ce4869b9c","xiulipan","2018-07-06 09:53:06","false","topology: fix id for sof_apl_pcm512x topology

SSP5 id should be kept to 0 and new added DMIC goes to 1 to keep old
machine driver work with both old topology and this topology.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",11,1,0
"thesofproject/sof","8530a952244c1427838c5b54e21ac340dccaee2a","dbaluta","2021-04-05 09:23:11","false","topology: codec_adapter: Prepare switching to shimmed CA interface

Each codec family is now having its own UUID. We keep the old
codec_adapter UUID to be used with Cadence family codecs.

All other codec families (e.g passthrough, waves) needs to use new
uuids.

The topology files will just need to define CA_UID macro.

e.g for waves codec, topology file should contain:

DECLARE_SOF_RT_UUID(""Waves codec"", waves_codec_uuid, 0xd944281a, 0xafe9,
		0x4695, 0xa0, 0x43, 0xd7, 0xf6, 0x2b, 0x89, 0x53, 0x8e);

define(`CA_UUID', cadence_codec_uuid)

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",79,34,0
"thesofproject/sof","4176f56ff3b9bfbb426f0afc5f62f8472f8eeaf2","keyonjie","2021-07-02 06:37:35","false","alloc: add more coverage to log all details of the allocation

Add coverage to log out details during memory allocation, including
successful allocation, and all zone types heap.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",85,37,0
"thesofproject/sof","e388ab5651ad3bb2eb97a3275a7b3cd2c29aedc5","slawblauciak","2020-04-14 12:49:01","false","alh: fix incorrect trace message

The old trace message contained an SSP-specific string,
which is not correct for ALH.

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",83,22,0
"thesofproject/sof","d2cfa10f50094b432dc1efb8de03a5ad68fc96ae","keyonjie","2020-12-28 09:50:15","false","cmocka: add cmocka unit test for fft library

Add cmocka unit test for FFT library, including fft with size 1024/256,
fft + ifft with SNR test, fft for 2 channels.

Implement helpers to accept samples put in comp_buffer for both real and
complex FFT, the helper fft_real_2() is implemented to speed up the FFT
for dual channels inputs up to two times. All theses helpers should be
used for unit test only.

Suggested-by: Amery Song <chao.song@intel.com>
Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",75,31,0
"thesofproject/sof","66316d35bef61422549428a9ad4545e8d68ffab5","keyonjie","2020-07-23 05:09:50","false","host-dma: only do DMA L1 exit when data is copied

Exiting the DMA L1 state, e.g. on a timer tick when there is no data to
copy, prevents the system from staying in S0ix power states. To extend
S0ix residency, this L1 exit needs to happen only after data copied.

Register host DMA usage when there is real data to be copied, for both
timer scheduled and DMA interrupt scheduled cases.

Add a l1_exit_needed field to hda_chan_data, to indicate if L1 exit is
needed at LL scheduler post run. Release the host DMA usage at the post
run notifier callback, to perform the DMA L1 exit when needed.

With these changes applied, the S0ix residency will be extended, and
only performing the DMA L1 exit at LL scheduler post run will preserve
the optimization of the low MCPS usage at the same time.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",77,26,0
"thesofproject/sof","6b94226b81efc8a71cc01d962f460fa5a7fa850d","lgirdwood","2018-07-11 15:32:20","true","Merge pull request #35 from zhigang-wu/topic/capture-resume-failure

capture pause/release failure when play/capture work at same time",15,1,0
"thesofproject/sof","3256781a7437b8e2e8f0f55e9c8dbee00c8223be","lgirdwood","2018-11-08 08:47:56","true","Merge pull request #541 from libinyang/init_heap_in_right_way

alloc: fix memory heap initialization",42,5,0
"thesofproject/sof","504c2ccd7ff0ddf7d368109ee3682263cf6eac98","lgirdwood","2018-09-18 11:53:51","true","Merge pull request #385 from zhigang-wu/topic/master-typo-err

sof: fix the spelling error",37,4,0
"thesofproject/sof","1f1c9ed2e59316d62d5da9d0059f5b630a3243be","lgirdwood","2018-07-18 12:30:00","true","Merge pull request #108 from zhigang-wu/topic/remove-useless-code1

component: state check should be ahead of state set.",13,2,0
"thesofproject/sof","a984b93df92e45285977757eaf1991994dbd8724","lgirdwood","2018-08-21 08:26:29","true","Merge pull request #53 from singalsu/update_eq_tune_scripts_proposal

Update EQ tune scripts",18,3,0
"thesofproject/sof","4869b097179ce0adafe52f9694697754d895d6b0","singalsu","2022-01-25 15:10:53","false","Tools: Testbench: Copy in file max dev->frames amount of frames

This patch limits file read from reading more than e.g. 48 frames
at time when scheduled every 1 ms for 48 kHz audio. It helps
the testbench to execute copy() operations similarly as in real
firmware and not process multiple periods of data in the same
pipeline copy. Some components contain internal limiting for data
processing amount but most do not.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",104,44,1
"thesofproject/sof","1abae16a111ff4ca116f7b2704da276aaea2860a","singalsu","2018-06-27 10:50:49","false","SOFT: Add various utility scripts for audio component tests

This patch provides the non-standard based utilities to help to execute
the tests.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",5,1,0
"thesofproject/sof","796b99cf0b4d6bee4cff49a0acf9e4f700d82def","singalsu","2019-05-10 14:26:29","false","Testbench: Fix file read/write component to work with pipelines

This patch fixes the freeze problem when running pipeline in
testbench. The file read/write component needs to use similar
logic to determine number of frames to process as the the
components under test those have been updated to work with timer
based scheduling.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",58,11,0
"thesofproject/sof","fa77edf9a47ed186fc30a9692f141a434e26369f","marcinszkudlinski","2023-06-12 10:55:29","false","pipeline2.0: change module prepare API to use sink/src.c

Module prepare is an operation that needs to set up sink
and source according to needs.
Therefore it must have access to sink/source handlers
This commit adds handlers to API. In case the module uses
legacy audio stream sink/source pointers will be NULLs
and number of sinks/sources will be zero

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",47,60,1
"thesofproject/sof","1a1e1268eedb818eb8ef0358669816727b718c31","singalsu","2018-09-24 16:01:39","false","EQ: Add equalizer control tool eqctl

This patch adds a simple control tool to setup during runtime (idle)
the IIR or FIR equalizer with new coefficients configuration. It is
useful in tuning of the equalizers. The tool also has capability to read
the EQ configuration from DSP.

Run ""sof-eqctl -h"" to see usage. The directory SOFT/tune/eq contains tool
to create EQ setup data.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",36,4,0
"thesofproject/sof","43b08c62b523f1d17cfb318a0c649a7ebafde913","singalsu","2023-05-04 12:31:26","false","Tools: Test: Audio: Convert tabs to spaces in comp_run.sh

No script changes, just unify shell script style to be
with indents with spaces instead of both tabs and spaces.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",53,59,1
"thesofproject/sof","2ad89eb0d39a20cdb0c50c3114aebe47e45a8c90","RanderWang","2022-08-30 05:36:11","false","topology2: add deep buffer support on sdw platforms

Sdw platforms will support deep buffer

Signed-off-by: Rander Wang <rander.wang@intel.com>",114,51,1
"thesofproject/sof","0ced5ed0f3f7ab93b385cc3561c7f3da82aa3b31","RanderWang","2021-12-15 07:38:09","false","ipc4: set pipeline ready after reset.

Currently pipeline reset is used by ipc3 for pipeline
free and pcm param error. It is used by ipc4 to
reinitialize pipeline, so it suitable to set pipeline
to default ready status

Signed-off-by: Rander Wang <rander.wang@intel.com>",113,42,1
"thesofproject/sof","880f9d72ba1186d41fcf825eac972f4531a4fcad","RanderWang","2022-10-24 02:43:34","false","eq-fir unit test: add ext_data_length for eq-fir

Eq-fir is a process component and use ext_data_length
with module adapter.

Signed-off-by: Rander Wang <rander.wang@intel.com>",99,53,1
"thesofproject/sof","912408822cc21fd2e6308f55864b7ca91bf8f07c","RanderWang","2023-03-03 08:35:20","false","topology2: add google-rtc-aec-reference

Top topology can include this conf file to enable google rtc aec

Signed-off-by: Rander Wang <rander.wang@intel.com>",59,57,1
"thesofproject/sof","f6cdefa177f7cf203fb072b7ffbe766c4884da94","libinyang","2023-01-03 09:54:05","false","topology2: use parameter DMIC0_PCM_ID for DMIC0 pcm id setting

Different platforms are using the same dmic-generic.conf.
But the DMIC0 PCM ID are different for different platforms. So
let's use parameter DMIC0_PCM_ID for the DMIC0 pcm id setting.

Signed-off-by: Libin Yang <libin.yang@intel.com>",72,55,1
"thesofproject/sof","a5c0c49707309b54e20ac987586de69d9ba1f45e","mengdonglin","2023-06-09 03:51:11","false","topology2: add development tplg to test playback with 2 cores

This is to allow CI to test a simple multicore playback case on
MTL/TGL/ADL: SSP0 playback on core 0 and SSP2 playback on core 1.

Capture uses core 0 only atm. More multicore usage will be
introduced later.

Signed-off-by: Mengdong Lin <mengdong.lin@intel.com>",47,60,1
"thesofproject/sof","7453e3d5713935a8349e7ea91ac8abc78f8b7629","balakishorepati","2021-05-26 12:15:03","false","scripts: add renoir support

Add renoir build support.

Signed-off-by: Basavaraj Hiregoudar <basavaraj.hiregoudar@amd.com>
Signed-off-by: Anup Kulkarni <anup.kulkarni@amd.com>
Signed-off-by: balapati <balakishore.pati@amd.com>",86,36,0
"thesofproject/sof","080363ece967ad61e1ab5bda6d9f2941440e9354","bardliao","2022-11-29 02:54:28","false","topology2: add sdw spk feedback pcm

This commit create a PCM that can pass amplifier feedback to user space.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",102,54,1
"thesofproject/sof","c43666d6f05bf920de5326489073adbcc60a88cc","singalsu","2018-09-19 13:36:22","false","EQ FIR: Add check and removal for trailing zeros in filter coefficients

This patch adds removing of extra zeros in the FIR coefficients. The
zeros can happen in some responses due to fixed point quantization of
very small values. The zero taps consume DSP resources for nothing so
better to clean them out for EQ configuration data.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",36,4,0
"thesofproject/sof","a4cc6066e9d71ee38e6e06da472c96ddf4c1ad67","marcinszkudlinski","2023-07-25 08:52:05","false","sink_src: add cache operations to audio_stream sink/src

Audio_stream is not making cache operations on data
buffer itself, it requires that the module to
call data invalidation/writeback

Sink/source interface works differently, it removes any
responsibility from the module providing a ready to
use pointers in cached memory

this commit adds cache operations to audio_stream
sink/src implementation

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",34,62,1
"thesofproject/sof","1daef9e576f8d86b803cdeb6e9918e8c0ad608c8","kv2019i","2022-08-24 08:59:03","false","app: overlays: move to mtrace for logging for IPC4 overlays

Enable the Zephyr based mtrace backend for all Intel IPC4 platforms.
Also enable routing SOF logs to Zephyr and bump the default
logging level to INFO.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",111,51,1
"thesofproject/sof","3b35639198514839784109110cebd8eec9de03b3","tmleman","2022-11-09 11:47:50","false","zephyr: cpu: secondary cores wake-up

Secondary cores can be in idle state and wait for next timer interrupt.
Because of that pm_state_force will not have immediate effects.

Function arch_sched_ipi will broadcast an interrupt to all CPUs.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",92,53,1
"thesofproject/sof","00fce8bd20f48021588b49cc9b35c3a69f74c2d6","tmleman","2022-02-25 13:45:47","false","fix: ipc4: setdx: infinity loop

This patch refactors the SetDX handler to avoid entering infinity loop.

Secondary cores are enabled/disabled in loop iterating from 1 to
CONFIG_CORE_COUNT. Primary core is disabled at the end, because it's
required that all secondary cores to be already disabled. If all
conditions are met, FW can enter the D3 state.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",111,45,1
"thesofproject/sof","15ee662fc8bf2a8343001158b5127548e70b9659","ranj063","2021-10-27 15:21:18","false","kpb: use buffer_acquire/release

instead of buffer_lock/unlock which will be deprecated

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",128,41,1
"thesofproject/sof","5a0484dc72a4db954258bd4c9d9aaf9e4bd67b29","lyakh","2022-04-14 10:46:50","false","google_hotword_detect: fix buffer acquisition

Instead of acquiring and releasing buffers locally multiple times,
do that once for .copy() and .params() methods.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",117,46,1
"thesofproject/sof","566415e6422863bdad6cfbabcc7c19008f8b8de9","lyakh","2022-08-01 08:33:08","false","ipc: fix buffer cache handling during freeing

Both IPC3 and IPC4 stream termination paths use uncached buffer
addresses, which can contain stale data with core-local buffers. Fix
both to use cached buffer aliases.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",111,50,1
"thesofproject/sof","286da916eafeb3d6efb55a185683bbb166d12391","btian1","2023-03-22 05:47:44","false","dai-zephyr: Expose dai_zephyr_params()

Expose and use it in the single endpoint DAI case in the copier device
in preparation to remove the creation of dai component.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",55,58,1
"thesofproject/sof","bee27fe258db10e3cebb27178288625a76198ae5","iuliana-prodan","2021-08-04 09:28:24","false","topology1: i.MX: Add topology with DRC component

Dynamic range compression (DRC) or simply compression is an
audio signal processing operation that reduces the volume of
loud sounds or amplifies quiet sounds, thus reducing or
compressing an audio signal's dynamic range.

This enables the DRC component for i.MX8QM/i.MX8QXP/i.MX8MP
with wm8960 codec.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",113,38,0
"thesofproject/sof","0b1d10b099454ff9c5d2ea9e012520b88ba5561b","iuliana-prodan","2023-04-06 12:51:49","false","topology: imx: Rearrange topologies based on platform

Rearrange topologies based on platform type: imx8,
imx8mp and imx8ulp.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",51,58,1
"thesofproject/sof","751cc6ddf824bcd3216af7a89ec537252afe69d8","cujomalainey","2021-09-21 22:57:25","false","numbers: fix signed int overflow

if we shift 1 left 31 times we will overflow the signed bit. Assuming
the intent is correct lets make this unsigned so cppcheck won't
complain.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",117,40,0
"thesofproject/sof","c5f00bfde746ba938b86e67dd163803bec29bff8","cujomalainey","2023-07-18 20:26:11","false","audio: dsm: add stub for maxim dsm

Add a stub for the library so fuzzers and CI can compile the adapter

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",32,62,1
"thesofproject/sof","1012cea3d6088793910ab2a8b2851c551b0ed51a","btian1","2023-09-14 07:51:24","false","audio: volume: remove one space in volume code

remove space to align with coding standard.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",20,63,1
"thesofproject/sof","9158bab370f7c443d7c4e022ecb3142f48422bd3","btian1","2023-05-24 10:41:46","false","copier: move some common functions to generic file

Move some functions from copier.c to copier_generic.c.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",56,60,1
"thesofproject/sof","2130f8654b3ab4c5e0ae75dd36ee62c3f4e4ff23","btian1","2023-07-12 08:11:44","false","selector: simplify selector parameters

use helper function to update stream parameters selector buffers.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",31,61,1
"thesofproject/sof","651af68384cb872676ac8c14f4bcdf1df7c4ff0f","softwarecki","2023-09-18 13:42:56","false","tools: logger: Use a safe variant of the string manipulation functions

Used string manipulation functions that check the size of the available
buffer.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",20,64,1
"thesofproject/sof","0bb995a7a6c8f0a8e00b6dbc7b607edfb08e60c5","libinyang","2022-02-16 06:25:03","false","topology1: sof-icl-rt711-rt1308-rt715-hdmi: add NO_LOCAL_MIC & NOAMP support

add sof-icl-rt711-rt1308-rt715-hdmi NO_LOCAL_MIC & NOAMP support

Signed-off-by: Libin Yang <libin.yang@intel.com>",105,44,1
"thesofproject/sof","2f65d96833f101542983fedaa0227be69c4b26f0","RanderWang","2018-09-29 02:22:30","false","hda: add virtual widgets to kill error message in kernel log

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",37,4,0
"thesofproject/sof","e603bf04af73ec6021e2696f65aa64de45e9587a","RanderWang","2019-02-18 08:20:50","false","ssp: bdw: refine ssp setting for bdw

(1) set PSP according to APL
(2) we don't need to decrease one for TFT&RFT because
   SSCR1_TFT and SSCR1_RFT do this.

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",63,8,0
"thesofproject/sof","4bf7c600615a077e717dfc6609c3526a505ca53c","RanderWang","2023-03-03 08:32:19","false","topology2: add google-rtc-aec-capture pipeline

This aec is connected to host copier

Signed-off-by: Rander Wang <rander.wang@intel.com>",59,57,1
"thesofproject/sof","5ebb71be50baaf4ee6510b9dca0591d81486830e","RanderWang","2021-11-03 07:05:56","false","ipc4: init sched_id in FW

Ipc3 set sched_id in topology but it is set in FW
for ipc4. Now initialize it when pipeline is set up.

Signed-off-by: Rander Wang <rander.wang@intel.com>",125,41,1
"thesofproject/sof","a1d9e6b2588115f54ecef7faabbe6d12eced8475","RanderWang","2022-04-25 01:50:10","false","ipc4: set sink sample rate before verifying params

Fix src issue on windows. Need to update sink format before
src_verify_params which uses it to generate dev->frame.

Signed-off-by: Rander Wang <rander.wang@intel.com>",114,47,1
"thesofproject/sof","838fbd16c17cceea5cbc3237cc1075945f211efa","softwarecki","2022-06-30 14:47:08","false","comp_ops: Add new method to get total data processed

I have added a new function to the component's api that allows
to read the total number of processed data by it.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",110,49,1
"thesofproject/sof","e9d2900b3b2fd0f838b992d8d6f098542673a4e4","yongzhi1","2021-05-12 16:43:15","false","topology: adl-sdw-max98373-rt5682: Add BT offload support

Add BT offload support for ADL platform:

PCM14 <---> passthrought (pipe 14, 15) <---> SSP2 (BT offload)

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",85,35,0
"thesofproject/sof","73cf4c0bc7f542bf8435bb1ca0b14165c2a45a16","xiulipan","2020-07-27 08:04:43","false","topology: sof: use pipeline ID in demux control name

To make multiple DEMUX comp can work in same topology. Add pipeline
ID into the DEMUX control name.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",77,26,0
"thesofproject/sof","ffe904c9f9013b87d2c163eab0ca03ef34560315","xiulipan","2019-10-24 05:35:42","false","CI: travis: update with matrix to hold more platforms

Use matrix to maintain build job for easy extension.
Add workaroud to QEMU test to avoid accuracy error may cause false
alarm in boot test.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",66,17,0
"thesofproject/sof","c00354b46d4821e5bf5187f8948e357b0784cbb4","serhiy-katsyuba-intel","2023-03-30 16:12:29","false","LMDK: Loadable Modules Dev Kit build scripts

Initial commit with set of cmake and linker scripts to build loadable
modules binary.

Things yet TODO:
  add all necessary Dev Kit header files to include dir,
  replace dummy example with somewhat useful module example.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",57,58,1
"thesofproject/sof","da8ac71a29fd8078715bfd0aab98d9270c5e556b","bardliao","2020-03-11 08:38:33","false","topology: add pipe-dai-sched-playback

This is basically the same as pipe-dai-playback.m4, but use SCHED_COMP
instead of N_DAI_OUT.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",85,21,0
"thesofproject/sof","488cc4a0a6e6bb1cf4f338360358bc1349ac2b18","kv2019i","2022-08-10 10:41:24","false","probe: decouple probe_gen_header() from comp_buffer definition

probe_gen_header() only needs a single field from comp_buffer,
so simplify the function interface.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",110,50,1
"thesofproject/sof","7c5e08c4f1a235358f06a714d5d8eb312f1cd70e","kv2019i","2021-05-17 06:36:12","false","kconfig: move DW_DMA_AGGREGATED_IRQ to dw/Kconfig

The DW-DMA driver specific option does not belong to the top-level
Kconfig file.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",86,35,0
"thesofproject/sof","fa11388e081965a1f0c18e99d35a3d1c54c7fe62","kv2019i","2022-09-05 16:12:13","false","ipc4: logging: fix use of k_uptime_delta()

Fix incorrect usage of k_uptime_delta() that leads to incorrect
decisions when to send the BUFFER_NOTIFY IPC.

k_uptime_delta() not only calculates the delta, but also stores the
current uptime to the argument passed as reftime. This breaks the logic
in code as mtrace_notify_last_sent was updated unintentionally.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",119,51,1
"thesofproject/sof","105b9b51abed7787d6348ba6f95e4b9c6b593526","bkokoszx","2018-11-02 13:33:27","false","logger: logging topology number for component

I've added printing component topology number
(i.e. pipeline_id.component_id). If id's are not
defined logger will not print any values.
e.g.:
CORE  LEVEL      COMP_ID                TIMESTAMP ...
   0      2         HOST            487048.229167 ...  (not defined id's)
   0      2         PIPE 1.3        591235.052083 ...  (defined id's)

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",30,5,0
"thesofproject/sof","b9623d0fee3b0af2e68ab20f2cba3a4035918c1c","iganakov","2022-10-31 15:51:27","false","kpb: ipc4 support implementation

Add ipc4 support for KPB module keeping
backward compatibility with ipc3

Signed-off-by: Ievgen Ganakov <ievgen.ganakov@intel.com>",91,53,1
"thesofproject/sof","0fdfaed6f42f5d55da2e6599242268bb938ca3af","ymdatta","2020-04-15 18:23:58","false","include: common: surround macro argument with parentheses

This commit fixes the warning generated by clang-tidy due to
bugprone macro parentheses. It is recommended to surround macro
arguments in the replacement list with parentheses. This ensures
that the argument value is calculated properly.

Name of the warning generated: bugprone-macro-parentheses

Signed-off-by: Mohana Datta Yelugoti <ymdatta.work@gmail.com>",82,22,0
"thesofproject/sof","79baaace5166f557f948aea29453a884bdec6c8a","lgirdwood","2018-08-28 08:15:17","true","Merge pull request #265 from tlauda/topic/ipc_shared_context

ipc: add ipc_shared_context",22,3,0
"thesofproject/sof","99ee4432d10a3d06fe4e3bfab16cb5fee596ed6b","tlauda","2019-02-20 10:57:21","false","cmocka: add unit tests for channel selector

Adds unit tests for channel selector component.

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",62,9,0
"thesofproject/sof","c4778aa375fae64e01f853dfa9edc066eae40a4d","tlauda","2019-07-17 11:44:57","false","ipc: kernel: user: revert usage of __packed macro

Reverts usage of __packed macro in ipc, kernel and user
headers. These headers are not only used by firmware,
so they shouldn't have any dependency on it.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",46,14,0
"thesofproject/sof","a8fdfea147bdcb8e041f75a938d667c4039890bc","tlauda","2020-01-09 09:42:16","false","host: move PLATFORM_DCACHE_ALIGN to the right header

Moves PLATFORM_DCACHE_ALIGN for host to memory header.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",74,19,0
"thesofproject/sof","b201fc77f027791e9482af119a87602119b3b609","tlauda","2019-08-05 13:04:37","false","cpu: use cpu_get_id instead of arch version

Changes usage from arch_cpu_get_id to cpu_get_id.
We always should go through generic function version.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,14,0
"thesofproject/sof","1edfe088ec6e02a0174ac6db7d8b5dbae6c919fa","caseorum","2020-12-01 19:37:01","false","ipc: Fix page table size calculation

This was too small, causing the ptable to be truncated and the
ptable DMA transfer to fail on BDW for small buffers, where the
minimum transfer is 4 bytes.

Signed-off-by: Joseph Burt <caseorum@gmail.com>",75,30,0
"thesofproject/sof","d449ff74d6e71763b520ebd1f653bffae6f75efa","tmleman","2023-10-23 08:36:05","false","west.yml: update zephyr to v3.5.0

Updating zephyr version to v3.5.0 release.

Total of 352 commits.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",8,65,1
"thesofproject/sof","1a8b1bf60c349ac2f2a7e9078bc2186748424695","dbaluta","2023-11-09 17:30:47","false","schedule: zephyr_dma_domain: Do not use a registered channel

Current implementation only checks if a channel is used with
current interrupt. But that channel might have been registered
with another interrupt earlier.

So, we need a way to skip channels already used. For this, we iterate
over all registered interrupts and check existing registered channels.

This fixes scenarios where running:

$ arecord -Dhw:0,0 -f S32 -c 2 -r 48000 -t raw |
aplay -Dhw:0,0 -f S32_LE -c 2 -r 48000

will result in an I/O error.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",1,65,1
"thesofproject/sof","4d6da609312897e6cb83a446d26d15fbabaec7f3","lrgirdwo","2021-04-16 21:27:34","false","cmocka: add support to run mocks on host architecture

Allows the mocks to be quickly run on the host with full access to host
debug and development tooling.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",82,34,0
"thesofproject/sof","e8b8854e3a392f05cadf52662b3fe029c27e0b9d","plbossart","2021-08-06 20:16:20","false","topology1: soundwire: move cnl-rt5682 to development directory

This topology was used initially on UpExtreme but isn't shipped in any
commercial device.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",116,38,0
"thesofproject/sof","098636c09800c29416c3b69daded922fb4e3c960","jajanusz","2019-07-01 11:27:21","false","ssp: bclk delay parameter

Some codecs require BCLK to be on for some time,
before sending any data. It can be achieved with delay between
enabling BCLK and DMA that should be given in topology.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",42,13,0
"thesofproject/sof","df1ba222306daa02d9b49f69983cc69eaf7fa78a","aborisovich","2022-12-16 22:07:22","false",".github/workflows: added Windows CI job to Zephyr workflow

Added new job to Zephyr workflow running on windows-latest.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",91,54,1
"thesofproject/sof","38f3f5d4119e382c8cee99bbc6ec1d3fff407f93","aborisovich","2023-05-18 18:09:09","false","workflows: sparse-zephyr upgraded runner OS to Ubuntu 22.04

Runner OS for the Zephyr workflow had been updated to Ubuntu 22.04,
so upgrading this workflow too.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",50,59,1
"thesofproject/sof","0c21218b379d033d82616a651a7e702583762709","afq984","2021-06-25 00:39:34","false","comp: Free model_handler in error paths during create

Add matching comp_data_blob_handler_free calls for
comp_data_blob_handler_new in error paths, which are
missing in many components' ""new"" functions.

Signed-off-by: Li-Yu Yu <aaronyu@google.com>",74,37,0
"thesofproject/sof","8d6c712fcf68d97a3197bfdb603fe4f0a652436d","jajanusz","2018-12-27 11:30:45","false","hda: dma preload timeout

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",49,7,0
"thesofproject/sof","dd874624020287a43e50b8b8619214041dd3c165","jajanusz","2019-01-30 07:46:04","false","cmake: crossplatform cc version get

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",57,8,0
"thesofproject/sof","df54d2e451a210e27b60ed15c46e55bce0b8a321","lrgirdwo","2018-08-02 00:45:50","false","ci: travis: remove \ as they dont pass yaml parsing

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",18,2,0
"thesofproject/sof","3286bfa7bf8a8482c8b38531f165602971641978","plbossart","2020-08-25 23:01:49","false","topology: sof-cht-max98090: temporarily remove S24/S32_LE support

The mixer doesn't seem to work with these two formats, limit support
to S16_LE until the mixed is fixed.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",76,27,0
"thesofproject/sof","980d8804e376201ffcdd56a54edc1d9b024ab5e0","plbossart","2021-02-09 19:36:57","false","topology: align device names in SoundWire topologies

Align on the following names:

PCM0   playback	Jack
PCM1   capture 	Jack
PCM2   playback	Speaker
PCM3   capture	Amplifier Reference (typically based on I/V feedback)
PCM4   capture 	Microphone
PCM5   playback	HDMI 1
PCM6   playback	HDMI 2
PCM7   playback	HDMI 3
PCM8   playback	HDMI 4
PCM9   RESERVED
PCM10  capture	DMIC
PCM11  capture	DMIC16kHz
PCM12  capture 	BufferedMic (aka KPB)
PCM13  playback Bluetooth
PCM14  capture 	Bluetooth

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",71,32,0
"thesofproject/sof","2d70f100c7ade0def40fa14d4de9458ae7ed32f5","plbossart","2021-06-18 20:41:56","false","topology: use cAVS nocodec support for APL/GLK

Move the existing sof-apl-nocodec to the development folder, in case
SOF CI still wants to use it.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",74,37,0
"thesofproject/sof","c80270e7e49d26a34fe284d1868e7d9cb80104f1","lrgirdwo","2021-04-03 20:22:21","false","ipc: structures should all be aligned on 4 bytes

Give the compiler a chance to further optimise IPC data access since it's
all on a 4 byte alignment.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",79,34,0
"thesofproject/sof","8af787ae2bf27494aa865a38be54e678abf64fc5","plbossart","2021-03-29 20:13:44","false","topology: add adl.m4

copy/pasted from tgl.m4, will need to differentiate later

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",79,34,0
"thesofproject/sof","87c01ffbc0328d0930e95f28611e5188f665118f","plbossart","2019-01-16 05:08:03","false","src/drivers/intel/baytrail/timer.c: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","09c52810a7a37653ecb424b01b4ca242432ae3b5","lrgirdwo","2022-08-19 20:07:29","false","header: rtos: use rtos specific version of bit.h

No runtime functional change. Code can now include <rtos/bit.h>

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",111,51,1
"thesofproject/sof","8819667b0703623b32069bd0c5745fe87f4628d6","dbaluta","2023-10-13 12:23:17","false","drivers: imx: Select DONE bit from software

With multi-fifo we need to enable done bit from software
as we have multiple fifos.

For this we make use of sw_done_sel configurations bits and
write proper bits into SDMA_DONE0 register.

For more information see `SDMA DONE0 Configuration
(SDMAARMx_DONE0_CONFIG)` SDMA register from i.MX8 reference manual.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",10,64,1
"thesofproject/sof","472b82bc1c2190fcc23acbcc0a9d66ec959e13a6","dbaluta","2020-05-21 10:46:34","false","README: Add IRC badge

This will help people reach #sof IRC channel easier.
Clicking on the badge will allow people to join IRC
chat via irccloud webclient or prompt for their local
IRC client.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",99,24,0
"thesofproject/sof","68e8c9066f52479b89eb41d8bf9912c497de99e2","dbaluta","2022-03-23 15:39:07","false","ipc3: Check ipc size check for pcm_params to account for ext_data

Now that sof_ipc_pcm_params struct has some extended data at the end
the hdr.size will also account for this data.

Change sanity condition to see if hdr.size is updated to keep track of
extended data.

Also check that ext_data will not go beyond SOF_IPC_MAX_SIZE.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",109,46,1
"thesofproject/sof","9f813a364116e3f6dbdbd2bfd1100e57cd0ac495","nashif","2023-04-06 11:01:32","false","app: remove old cavs platforms

Remove old platforms from zephyr testcase file:

- intel_adsp_cavs15
- intel_adsp_cavs18
- intel_adsp_cavs20

Signed-off-by: Anas Nashif <anas.nashif@intel.com>",51,58,1
"thesofproject/sof","91d1b29dc9fcccb92060f75dc1045831eb14ac21","jajanusz","2019-05-14 08:47:13","false","uapi: replace sof_man_get_module with SOF_MAN_MODULE_OFFSET

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",64,11,0
"thesofproject/sof","79e0d67fdb854cb172a416cb50fc75d324234952","jajanusz","2019-01-28 12:35:29","false","scripts: remove rimage-build.sh

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",59,8,0
"thesofproject/sof","4aac94b405b2a6b6479ab9fb721e294920500af1","jajanusz","2019-08-23 10:14:51","false","platform: tigerlake

Initial version of TGL platform - based on ICL.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",54,15,0
"thesofproject/sof","5a962763659191e98a923dc7b7af8f4ebb85d1ed","jajanusz","2019-05-13 11:29:06","false","cmake: add install target for fw

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",61,11,0
"thesofproject/sof","3d5cc36b1bcea28407289c39cbef73b9e147038c","jajanusz","2019-07-22 15:06:58","false","trace: deduplicate TRACE_CLASS defines

These traces shouldn't be duplicated, they should be in
more public header because they are used outside of FW.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",47,14,0
"thesofproject/sof","d62e9267f6a018482daa29514fa3bbb3810fd288","lrgirdwo","2021-05-28 14:50:02","false","ipc: split IPC major code into IPC specific directories

Prepare for supporting new IPC major versions by partitioning
IPC code into directories.

This is a code move only, no code changes except Makefiles.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",83,36,0
"thesofproject/sof","6f43299f3b6a9ed7eb264ea39ead12f2dd0373fc","lrgirdwo","2022-02-04 17:08:15","false","testbench: take the global data off the stack.

Testbench prm is global data used by many thread. Take it off the stack.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",106,44,1
"thesofproject/sof","456d00119cbb37b4bd77ddfcd5023ee9657e05f2","dbaluta","2020-04-09 17:09:00","false","drivers: imx: sdma: Simplify sdma_set_config

sdma_set_config is a very long function and hard to read
and understand.

In order to make this easier to understand we factor some code
into proper functions.

So, we introduce:
	* sdma_read_config, reads and verifies config received from SOF
          core
	* sdma_prep_desc to prepare sdma descriptor.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",82,22,0
"thesofproject/sof","fc5dedd57f75482472ce474099617124873918ac","ranj063","2019-04-22 21:24:44","false","topology: pipe-dai: save the scheduling comp name

This will be used by pipelines like the media pipeline, which will
need the information to set up their scheduling comps.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",47,11,0
"thesofproject/sof","aa2cf1fc946ab42f631ce482b45fc4bba9b7c7fe","ranj063","2021-10-06 17:41:06","false","lib: dma: make dma stop op optional

In preparation for adding a reset op that could be used in place of the
stop op for DAI's that support the two-step stop option.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",121,40,1
"thesofproject/sof","c8477c6a1f022e323ae03fcaefba5612e4dd09e0","ranj063","2022-05-31 17:35:41","false","mixer: produce only period bytes when paused

Only generate period bytes worth of zeroes when all the mixer sources are
paused so as to not cause overruns in the components that follow
downstream.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",112,48,1
"thesofproject/sof","eff005f8b0cc669c61ad7ca2a2037b6065260e94","tinghan-shen","2022-01-11 09:44:37","false","config: Add default config for mt8186

Add default config for mt8186 platform.

Signed-off-by: Tinghan Shen <tinghan.shen@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",115,43,1
"thesofproject/sof","da4073ce38409087c7729b3a616c92e11bed4c81","ktrzcinx","2020-01-17 09:42:42","false","src: Mark input buffer input buffers with const in src_get_copy_limits

Functions like src_get_copy_limits should have const marking to
avoid error related with unintentional fields editing.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",79,19,0
"thesofproject/sof","067c46cd6159e38ff6af5e65220de1561e4e594e","ktrzcinx","2019-12-09 11:45:53","false","sof: Define struct sof_ipc_fw_version

It will be used send to host to fully describe compiler
and help in resolving compiler specific bugs.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",73,18,0
"thesofproject/sof","a6214d06b1e2d1622b520f8cb69ce2fce43c140b","brentlu","2023-01-03 14:06:18","false","coredump-reader: set confirmation off

The undefined function may cause the debugger not able to run
properly. Print a ""set confirm off"" instruction to the beginning of
output file to solve this problem.

(xt-gdb) break _MemErrorVector
Breakpoint 1 at 0x9f180400
(xt-gdb) break _MemoryExceptionVector_text_start
Function ""_MemoryExceptionVector_text_start"" not defined.
Make breakpoint pending on future shared library load? (y or [n]) run
Please answer y or [n].
...

Signed-off-by: Brent Lu <brent.lu@intel.com>",72,55,1
"thesofproject/sof","7aa01e77b9e71314bd9f454129bd5e377758fd3d","keyonjie","2019-10-18 16:40:50","false","ipc: take NO_TRACE flag of SETD0IX IPC from host

When entering D0ix, we can run FW with either DMA trace on (e.g. the
host system is in S0) or off (e.g. the host system is in S0ix), here
take the NO_TRACE flag passed from host and response to it.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",61,17,0
"thesofproject/sof","54870fbb99b744be4b5e447fee7858b3310d5f7e","keyonjie","2019-03-14 22:03:51","false","selector: fix priv data passed wrong issue

We should get config data of selector component from priv data of
process component, here correct it.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",68,9,0
"thesofproject/sof","ad402bc5bfa4e8488ee7c7f8f137d86d78948bca","brentlu","2021-08-03 10:08:05","false","ssp: bclk/mclk control is ignored

The code to control bclk/mclk is skipped after the SSP is configured
once. The clock control code should be executed always.

Signed-off-by: Brent Lu <brent.lu@intel.com>",111,38,0
"thesofproject/sof","8dc01f7cb5ae5aeefbdfe3c8041a1e35add654b3","keyonjie","2018-09-28 05:02:12","false","topology: add topology file for hda generic machine

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",37,4,0
"thesofproject/sof","5aeb95b19bba15801fef4ee37760a6e776d3bd1a","slawblauciak","2021-05-25 14:55:10","false","sanity check allocated memory

Issue detected by Klocwork

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",83,36,0
"thesofproject/sof","309fa264e29d3f9f22538baed3f84a00be15352e","aborisovich","2023-02-01 21:34:01","false","xtensa-build-zephyr.py: upgraded Xtensa toolchain for MTL

Intel Meteorlake release toolchain is Xtensa RI-2022.10 version.
New toolchain does not support xt-xcc driver anymore so we are
forced to switch to new xt-clang driver.
To distinguish between default driver for the platform built,
(Xtensa GCC or Clang) added new field to script platform list
containing a toolchain name ""xcc"" or ""xcc-clang"" expected by
Zephyr project.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",52,56,1
"thesofproject/sof","b426d288d4284ce0f9b121e66e84fd4eb5ad6fdd","aborisovich","2022-11-23 12:01:47","false","workflow: added daily tests

Existing daily tests run ""Main Action"" workflow from
pull-request.yml at 00:00 UTC time.
Tests may also be executed manually from Github Action tab.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",95,54,1
"thesofproject/sof","6580e68302e2c3165f35058c1431773e5bf95567","iuliana-prodan","2023-05-04 10:38:15","false","topology: imx: Add mixer topology file for i.MX8 and i.MX8MP with wm8962 codec

Generate MIXER topology file for i.MX8 and i.MX8MP with wm8962 codec
based on sof-imx8-wm8960-mixer.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",53,59,1
"thesofproject/sof","22ad526c2691ff53d4e0479b8cd391d975d433f7","jxstelter","2022-11-25 11:17:17","false","LNL: Add hda_dma_config for interfaces

In LNL the GPDMA engine was removed. Instead HD Audio
Link DMA is used to transport data over audio interfaces.
Since HD Audio is a Host managed engine, the link configuration
is passed through IPCv4.
The configuration must be forwarded to appropriate interface driver
to configure HW.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",98,54,1
"thesofproject/sof","842cd24bec4d47c78e1ee53f12e26653981a6155","ktrzcinx","2020-11-05 09:32:11","false","ipc: debug: Decouple mem_zone from sof_ipc_dbg_mem_zone

Those two enums should not be mixed, because the first one is
only internal enum for FW while the second one is part of ABI.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",75,29,0
"thesofproject/sof","e2b21c0359d97a83d4a9f29046b4c287034265d3","ktrzcinx","2020-01-10 12:23:28","false","pcm_converter: Use converter function pointer typedef

In pcm, host and dai was implicit data definition corresponding
to defined in pcm 'converter' function pointer.
Using common function interface improve code coherence.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",76,19,0
"thesofproject/sof","1a66d878c4c3b5e1a5051e784c5ae8b84b50c2eb","iganakov","2023-02-28 10:43:32","false","module_adapter: support modules with only sink or source connected

Extend module adapter simple_copy flow to support modules with only
one sink or one source connected such as KD or Intel WoV.

Signed-off-by: Ievgen Ganakov <ievgen.ganakov@intel.com>",57,57,1
"thesofproject/sof","3a02dacab55dd3c5cada829b8461081fdd02c41c","kv2019i","2023-08-17 08:55:27","false","zephyr: Intel cavs25: remove non-native build

Remove all cmake rules to build SOF for Intel cAVS2.5 hardware
using non-native drivers (i.e. use XTOS drivers from SOF tree
instead of Zephyr native drivers). This is no longer supported
nor tested, so can be removed.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",25,63,1
"thesofproject/sof","93df75806fd5364add18064aed4466fa498f8bb4","bkokoszx","2020-02-24 22:45:59","false","dai: add dir arg to get_hw_params function in dai_ops

Hardware stream parameters can be different for
PLAYBACK and CAPTURE direction. get_hw_params()
should return parameters correctly depending on
the stream direction.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",77,21,0
"thesofproject/sof","15e06515e23225e85b67d29a4774b60a7e4cd9ac","keyonjie","2021-07-22 13:46:00","false","rimage: update rimage for more cavs platforms

246ea6469abd config: skl: change image_size to the real SRAM size
9c9e07c6507d config: kbl: change image_size to the real SRAM size
44b37d19a24c config: sue: change image_size to the real SRAM size
580e4d674e06 config: tgl-cavs: change image_size to the real SRAM size

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",96,38,0
"thesofproject/sof","1e295a5d6a59f5d3bf85ba331a306e20eeb6a7e6","keyonjie","2019-07-01 05:46:03","false","detect-test: initial default size buffer for model data

We need initial a default buffer for model data at component new()
stage, and make sure we have non-0 size of this buffer otherwise, the
get_data cmd will fail.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",41,13,0
"thesofproject/sof","d7282762bcd12ba9d33a8f5106cc39bad9dfba45","cujomalainey","2021-04-13 22:16:34","false","ipc3: don't declare unused variables

ifdef the whole function out if we are not going to use it.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",81,34,0
"thesofproject/sof","65c6da750aa752c437448491e8f0c5d1649456c4","cujomalainey","2019-02-25 22:33:57","false","EQ: Add gui for IIR filters

Recreate gui for audio-tuning.appspot.com using SOF config. For IIR
filters only currently. Once DRC is ported then GUI can be ported as
well.

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",65,9,0
"thesofproject/sof","cc77454f86c7ab51c997e3196b4e4cac28bf6df1","iuliana-prodan","2023-05-03 13:52:05","false","topology: imx: Add compress topology file for i.MX8MP with wm8962 codec

First, combine compress topology file for i.MX8MP with different codecs,
stream name, rate by using CODEC and RATE variables.
Based on CODEC use the proper DAI_CONFIG.

Using the above variables, add new compress topology file for
i.MX8MP with wm8962 codec.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",54,59,1
"thesofproject/sof","b5ec44b067f7822a24d04d722daf92071a44ba62","jajanusz","2020-01-30 12:43:34","false","memory: change LP_SRAM to helper config

Having both LP_SRAM (bool) and LP_MEMORY_BANKS (int) is error prone.
It's better to make LP_SRAM just a helper config that is set
to true if there is any LP memory bank in use.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",75,20,0
"thesofproject/sof","5f2de711a0f8be5d564fc8bf81599d5e439d56c6","johnylin76","2021-02-04 09:45:50","false","sof: drc: fix drc_pow_fixed function

The proposed calculation doesn't take negative or zero input-x into
consideration, and we also don't need such use cases. Just return 0
for those input-x.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",71,32,0
"thesofproject/sof","dfb29d52279568fc9dca154bb89a36c0e7060383","dbaluta","2021-04-13 17:22:13","false","codec_adapter: Introduce get_samples interface

This codec_adapter interface will return the number
of samples expected after decoding one compressed input frame.

This is optional. For codecs which do not care, this will return 0.
Do not care means that the number of input samples is equal with the
number of output samples after processing is done.

This will be used in the next patch to determine if the local output
buffer has enough space to copy the decoded samples.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",81,34,0
"thesofproject/sof","0b78bd742bd23fb23cdba5943bb402584439db24","dbaluta","2023-08-29 14:17:08","false","imx: sdma: Add support for loading RAM script

SDMA support loading firmware RAM scripts in order to enhance
functionality. We will need this for supporting multi-fifo
with upcoming MICFIL PDM driver.

Allow SDMA to load such scripts selected via CONFIG_HAVE_SDMA_FIRMWARE
config.

A RAM script interface guarantees that there will be the following
information provided:
- sdma_code, an array of bytes containting the actual script binary
- RAM_CODE_START_ADDR, location in RAM where to load the script
- RAM_CODE_SIZE, size of the sdma_code array.

Because RAM scripts are NXP proprietary binaries we won't make them
public but offer the interface to integrate them with SOF in private
builds.

We use for now sdma_script_code_imx7d_4_5.h header file which must be
present in location indicated by CONFIG_SDMA_SCRIPT_CODE.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",25,63,1
"thesofproject/sof","2a46ef62791ed0025c965aa51fceb992cd9548bd","dbaluta","2020-04-24 09:48:41","false","drivers: imx: sdma: Fix SDMA copy

Desired design of data copy uses 2 BD linked in a cyclic way.
This 2 BDs will act as a ping-pong buffer.

When a DMA channel is active the SDMA script will run and will look
for a BD with BD_DONE bit set. This means that BD is ready for transfer.
When SDMA transfer the current BD, pipeline works on filling the next
BD.

In order to implement this, we introduce next_bd which keeps track
which is the next BD to be made ready for SDMA.

Also, signal DMA_COPY notifier to prepare next BD for transfer.

Because, now only one BD is ready for transmit notice that in sdma_copy
function we get rid of the loop iterating over all BDs and just set
BD_DONE flag only to next_bd ready to be run.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",72,23,0
"thesofproject/sof","eb9851c4b14c495682819f795c0c0b438875dcbc","lrgirdwo","2020-05-29 09:42:58","false","zephyr: lps_wait: Fix build on Zephyr by declaring memcpy_s

Fixes build for zephyr. TODO: memcpy_s() header inluces other
generic calls duplicated and colliding in Zephyr hence will need
to separate out in order to include correct header.

Define it locally atm.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",97,24,0
"thesofproject/sof","74e0872f0877b1c1d3a7a90881eeb4fce1ae4159","lrgirdwo","2021-06-02 09:58:47","false","testebench: no need for parenthesis around case values.

Remove and use correct style.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",83,36,0
"thesofproject/sof","6b03dde9fd254d2369f383dc1fed326c712666b5","lrgirdwo","2023-03-09 22:30:11","false","tplg_parser: tokens: print a helpful error for invalid data

Print out error data when invalid private data is found.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",57,57,1
"thesofproject/sof","2e8f293e2896a606a920edcc8d27f728d8686401","lrgirdwo","2018-11-21 16:25:57","false","github: Add initial github owners/reviewers file.

This file will help github to determine who will review PRs.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",39,6,0
"thesofproject/sof","8b7f1fafd20e1a0445bda7ab30190559b592e7e6","plbossart","2020-03-31 00:00:46","false","topology: sof-apl-pcm512x: add codec master mode and 44.1kHz support

This patch provides an optional support for codec master mode and uses
a macro to change the frame sync as needed. The scheduling is also
changes to to DMA instead of TIMER.

The user is still required to manually copy the desired topology as
sof-tplg/sof-apl-pcm512x.tplg, but a manual configuration of the ACPI
initrd overlays and BIOS settings is required as well, so there's no
turn-key solution possible anyways.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",67,22,0
"thesofproject/sof","8bb8787cd389e6663235a163645cd2cefad631e6","singalsu","2021-02-12 10:23:03","false","Topology: Get PGA_NAME from pipeline caller macro

This patch fixes the error that happens with the hard-coded PGA
names Dmic0 and Dmic1 in pipelines pipe-eq-iir-volume-capture.m4
and pipe-eq-iir-volume-capture-16khz.m4. Pipelines for beamformer
TDFB have the same hard-coded PGA names and are fixed too.

If impacted pipelines are used for any other purpose than DMIC endpoints
the topology graph gets messed up. With this change the caller macro,
e.g. intel-generic-dmic.m4 needs to set the PGA_NAME macro when the
respective pipeline is instantiated. If it is not set the default
name via N_PGA() macro is used.

The macro intel-generic-dmic-kwd.m4 is updated to set the Dmic0
PGA name as well as the earlier missed PIPELINE_FILTER1 and
PIPELINE_FILTER2 definitions for passing filter coefficients.

Fixes: #3378

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",74,32,0
"thesofproject/sof","f227ae7af227751ff92dd61799cf9bdc76eeb8d5","cujomalainey","2021-04-20 20:53:40","false","tplg_parser: fix exit path

goto after return is incorrect since it generates unreachable code.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",89,35,0
"thesofproject/sof","f5760a648d39fbf20880e4c4af9297c6157fd98a","lyakh","2021-07-09 14:58:44","false","pipeline: trigger START from the task context

When the firmware receives a START or RELEASE IPC message, it
immediately triggers all involved components, which starts DMA.
Then it schedules the pipeline task, but since the scheduler can be
already running at that time, the task might be scheduled when DMA
data isn't available yet or has already overflowed. To fix this
change the control flow to also trigger all components from the task
during its first run. Actual data processing then begins with the
next period. Note, that this is currently only possible with
pipelines, using timer-based scheduling. Pipelines, using DMA
interrupts for scheduling are unaffected.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",87,37,0
"thesofproject/sof","62caecc11456398e6121c7298fb8d9edb3da1c04","lyakh","2021-06-02 12:11:26","false","zephyr: schedule: start the timer during domain registration

The Zephyr scheduling domain is triggered by a periodic timer, which
is started when the first task in the domain is scheduled and
stopped when the domain is unregistered. Since the timer period is
anyway fixed, it's even easier to just start the timer when the
domain is registered. This eliminates the need for the .domain_set()
method completely.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",82,36,0
"thesofproject/sof","5a30534aabfa5949fbcad2fa908c8c6f478aed53","marc-hb","2022-10-12 00:19:44","false","sof_ri_info: add platform aliases to DSP_MEM_SPACE_EXT

Fixes this error:
```
No platform found in name ""sof-rpl.ri""; unknown memory layout.
```

... and shows the Memory Layout.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",98,52,1
"thesofproject/sof","3f4da1f1bb6aa9cc825cb27b84cbbb3a46a92afb","marc-hb","2021-07-20 06:40:35","false","sof.doxygen.in: add CONFIG_TRACE=1

Stop ignoring most comments in the trace.h file.

Confusingly, only comments in trace.c were considered because unlike
trace.h, trace.c is not turned off by the preprocessor but by CMake
instead.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",93,38,0
"thesofproject/sof","5674674a48163351d5377cb0f5e2595065d3f806","zhuyingjiang","2018-11-05 09:11:46","false","rimage: add build scripts to build 1.5 image

add to build scripts and Makefiles to build firmware binary
for kbl and skl

Signed-off-by: Zhu Yingjiang <yingjiang.zhu@linux.intel.com>",38,5,0
"thesofproject/sof","a2fe69c0204165a2f7cf6fc1a33ab633385e14a3","xiulipan","2019-01-14 07:57:04","false","tools: gitignore: change the test topology path

Test topology changed location, need the gitignore to update.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",56,7,0
"thesofproject/sof","4b022085a4aa0b0e7c6d9f44e1578bd903acab02","RanderWang","2021-11-29 06:16:35","false","ipc4: add stream format conversion function for ipc4

Move the format conversion function to header file
since it will be shared by ipc4 modules

Signed-off-by: Rander Wang <rander.wang@intel.com>",130,42,1
"thesofproject/sof","d6fdeb37a7fa598848012749dbecd3d8e40df8cc","fuyuntsuo","2022-02-16 03:39:53","false","Implement nr_bypass flag in igo_nr.

Pass through all the data when nr_bypass is set.

Signed-off-by: fy.tsuo <fy.tsuo@intelli-go.com>",105,44,1
"thesofproject/sof","7882b1a93d2b315ac1b2cfea42f7cfb820e27a35","aiChaoSONG","2022-08-02 01:54:54","false","topology2: add pin binding classes for multiple I/O queue

An IPC4 widget may support multiple I/O queue. Queue ID is
required during widget binding in route setup.

This patch adds sink_pin_binging and src_pin_binding classes
for multiple I/O queue support.

For widget requires special pin(queue) binding, sink_pin_binding
or src_pin_binding should be defined in the widget object. So
that the kernel knows which pin to use during widget binding
by parsing topology.

Note that pin binding should be defined for all sink/source pins
or for none. Even if there is only one sink pin requires special
pin binding, pin binding should be defined for all sink pins, and
for pins that are not used, give the value ""NotConnected"". This rule
applies to source pins, too.

Example: smart_amp widget has two sink pins and one source pin,
and its feedback sink pin requires special pin binding, so we have to
define sink_pin_binding objects within smart_amp object like this:

Object.Base.sink_pin_binding.1 {
    # the main sink pin is connected to host for playback data
    sink_pin_binding_wname	""copier.host.1.1""
}
Object.Base.src_pin_binding.2 {
    # the feedback sink pin is connected to capture dai for codec feedback.
    sink_pin_binding_wname	""copier.SSP.2.1""
}

In this example, smart_amp is connected to host and DAI directly,
it is also possible to be connected to host and DAI indirectly (with
gain or other widget in the middle).

Signed-off-by: Chao Song <chao.song@linux.intel.com>",112,50,1
"thesofproject/sof","4bdbe3bf7b194e80d2472344581ef8ff5f163646","singalsu","2023-06-27 15:33:26","false","Audio: Fix IPC4 sink component buffer parameters set for S24_LE

The frame_fmt from
audio_stream_fmt_conversion(32, 24, &frame_fmt, &valid_fmt) is
SOF_IPC_FRAME_S32_LE (2). valid_fmt is SOF_IPC_FRAME_S24_4LE (1).

Set of member frame_fmt from struct sof_ipc_stream_params should
be done with valid_fmt instead to get the components to handle
the S24_LE stream correctly.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",39,61,1
"thesofproject/sof","81e0333e19d2c26818d7da4b525f92a1f19c48c3","singalsu","2019-01-03 17:08:51","false","Testbench: Add S16_LE format test for SRC


Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",50,7,0
"thesofproject/sof","8aededeb960b2232440cc218108e914689da164a","singalsu","2023-08-16 09:27:41","false","Tools: Topology2: Fix playback EFX FIR and IIR defaults

The default values should be ""passthrough"" since the pipeline
mixout-gain-efx-dai-copier-playback.conf applies them this way:

IncludeByKey.EFX_FIR_PARAMS {
  ""passthrough"" ""include/components/eqfir/passthrough.conf""
}

And IIR similarly.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",26,62,1
"thesofproject/sof","fdc53047400c07f279130fb008dd8317a9ee7e55","singalsu","2019-04-26 17:09:56","false","Volume: Fix overflow with S24_4LE format output in xt-xcc build

The HiFi3 version of volume code got a mistake that the
rounding shift instruction can bring the value above 24 bit
range. Therefore the data needs to be shifted once again to
32 bit MSB side to saturate and then back to LSB to
have properly saturated S24_4LE (and S32_LE samples).

The patch renames the shift_right variable because it is used
now for both right and left shifts.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",50,11,0
"thesofproject/sof","06b849586cd90e4a323bc5b54f69f12b2b661029","singalsu","2022-07-27 09:42:02","false","Math: Add Auditory functions library

This patch adds a psycho-acoustics and auditory system related
functions library. Currently the library provides functions for Mel
frequency scale. Functions are provided to convert between Mel and
Hz, initialize a Mel filter bank and apply Mel filter bank to
convert a linear power spectrum into an auditory power spectrum.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",111,50,1
"thesofproject/sof","009714bd6d243e550d11a1e43fa0cc91e8513279","singalsu","2020-08-26 11:26:13","false","Audio: Volume: Avoid possible divide by zero trap

If in a topology the volume component ramp length (milliseconds) and
from it derived ramp update period is longer than pipeline copy()
schedule period the dev->frames (frames to process per per period) is
divided by zero. This error is not triggered by any of current
topologies.

The fix is to use dev->frames count as gain ramp update rate for
situations where the integer divider would round to zero. There is no
harm to update the gain at higher rate than suggested by topology.

Returning an error for such topologies also is not necessary since the
service is in such case done at better quality than requested. Finer
update grid results to less zipper noise.

Fixes commit 1b57609a1ef9 (""volume: do not schedule ramping as separate task"")
Fixes #3334

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",76,27,0
"thesofproject/sof","c186cbed979092d84b2475e872364838637e62c9","singalsu","2020-03-30 12:13:53","false","Tools: Tune: Fix wrong gain in IIR high-pass responses generator

This patch fixes the issue in script example_iir_eq.m with gain
parameter for function hp_iir_eq(). The last parameter was hard
coded to 0 that caused all 20 dB labeled topologies to to have in
reality 0 dB gain.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",67,22,0
"thesofproject/sof","724d26741316397f3b2b24c56caf971b3c39bdbb","tlauda","2019-01-18 14:55:06","false","dw-dma: add start delay for timer driven capture streams

Adds start delay for timer driven capture streams.
External interface is enabled after DMA, so we need to compensate it.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",57,7,0
"thesofproject/sof","57d49c7cf2966d1fa6da638deaaa9d618d120213","tlauda","2020-01-15 10:12:45","false","cavs: ssp: use platform_shared_commit()

Uses new platform_shared_commit() function to commit
shared ssp private data. Every instance of SSP is
bidirectional, so can be simultaneously used by multiple
cores.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",76,19,0
"thesofproject/sof","8cc1daddfc513dd6fa04dd2712cf61b17922ca9c","lgirdwood","2018-11-15 15:48:34","true","Merge pull request #130 from bkokoszx/fix-kw-issues

logger: kw: fix logger klockwork issues",39,5,0
"thesofproject/sof","459ccd2d65b1c869a400972b837f746d545ebb8d","lgirdwood","2018-10-18 15:55:46","true","Merge pull request #496 from mmaka1/ut-trace-fix

test: ut: added more stubs for trace functions",33,5,0
"thesofproject/sof","c520326046b7c7e504e47b1b8d672546a77e6ae8","lrgirdwo","2020-01-27 14:25:32","false","audio: compiler: GCC 9.x packed data alignment fixes

GCC 9.x introduces checks for packed data alignment when being passed or
cast as different types.

Add an alignment macro so that we can tell GCC that packed data alignment
is assumed to be valid for certain casts.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",78,20,0
"thesofproject/sof","a0f789dfc6103ce062cb86b491f75591b6f1aaad","plbossart","2021-06-30 19:16:40","false","topology: cavs-nocodec: temporarily fix jsl-nocodec issues with s24le

For some reason s32le does not work for DAI definitions on JSL-NOCODEC
platforms. alsa-bat tests fail, but they work fine on APL, CNL,
TGL. This is likely to be an ICL platform issue. The root cause is
still TBD

Use s24le for now to unlock Intel daily tests.
All other platforms remain with s32le.

BugLink: https://github.com/thesofproject/sof/issues/4427
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",87,37,0
"thesofproject/sof","e8733b4f4cdff56ee17a34186fe50f0917ca7335","lrgirdwo","2022-09-02 17:23:19","false","header: rtos: use rtos specific version of clk.h

Code can now include <rtos/clk.h>. API is not yet wrapped to Zephyr.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",118,51,1
"thesofproject/sof","d525235e0eed4558bb39f4060d396c86208d0f1b","kv2019i","2022-09-12 09:24:58","false","west.yml: upgrade Zephyr to 3.2.0-rc1 level

Update Zephyr to 0956647aaf6bd2b1e840adcc86db503f274d84a9 (3.2.0-rc1
plus a few fixes merged to upstreamed after the tag).

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",106,51,1
"thesofproject/sof","091daf65c67e8b74d2c4701bc960628e238b1afe","sathya-nujella","2020-07-25 16:00:12","false","topology: Update sof-tgl-max98373-rt5682 to take amp SSP ID

Update sof-tgl-max98373-rt5682 to take speaker amp's SSP ID as input.
This is to accommodate DUT's which has amp connected on SSP2.

Signed-off-by: Sathyanarayana Nujella <sathyanarayana.nujella@intel.com>
Signed-off-by: Mac Chiang <mac.chiang@intel.com>
Signed-off-by: Jairaj Arava <jairaj.arava@intel.com>",78,26,0
"thesofproject/sof","94956778b0c35ec95c2690f04bffe7cd19fef6b0","dcpleung","2019-09-30 04:36:31","false","Remove rimage from source tree

Since rimage is now a standalone tool in a separate repo,
remove the rimage directory in preparation to import it
back as a submodule.

Signed-off-by: Daniel Leung <daniel.leung@intel.com>",66,16,0
"thesofproject/sof","6c4c873b9d867bbdffcfb32d827dc4ebcba87991","dcpleung","2020-03-26 13:58:57","false","Match LICENSE from the main SOF repo

This changes the LICENSE file to match the LICENSE file
from the main SOF repo, except they entries for the kconfig
scripts which are not here in this repo.

Signed-off-by: Daniel Leung <danielcp@gmail.com>",64,22,0
"thesofproject/sof","296c86c009c3c03e34a8ee38dfb81346d08eeee4","lgirdwood","2018-11-16 10:15:48","true","Merge pull request #570 from jajanusz/fix-smp

platform: fix smp builds",39,5,0
"thesofproject/sof","519a115506146b44b7c4f4c04dfe2c4ad0d01c6a","lgirdwood","2018-07-25 15:32:44","true","Merge pull request #149 from singalsu/mixer_attenuation_fix_proposal

Mixer: Remove attenuation and apply saturation to mixed audio",12,2,0
"thesofproject/sof","40f9749660e50684ca3c60278aa53aeee0170bb8","lgirdwood","2018-09-17 18:49:47","true","Merge pull request #373 from xiulipan/merge12_2

Merge stable 1.2 task and scheduler fix into master",38,4,0
"thesofproject/sof","36d4c9f8f6354ec1237223da353ac434a96daaa8","mrajwa","2020-02-05 13:44:09","false","kpb: add new state

This adds new state KPB_STATE_INIT_DRAINING into
KPB internal states. This way we can see failed
init draining in logs. This new state is also
needed to change KPBs regular behavior in a
situation where we have initied draining task,
therefore calculated read position but the task
doesn't start before next pipeline_copy happens.
In this case, having this new state we can
recognize it and update read position
accordingly to new data.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",77,20,0
"thesofproject/sof","a334567bc552671a99f733ef1eeada97faf32682","mrajwa","2019-01-10 15:06:38","false","GDB: Context switch for debugging.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",57,7,0
"thesofproject/sof","3bdc499467b6aaa982f3ad50c10e5adf70e6649d","mrajwa","2019-07-29 21:17:16","false","kpb: update kpb_copy_samples() to support 24b samples

This patch updates function kpb_copy_samples() which
copies samples from KPB source buffer to sink buffer
to support 24b & 32b samples.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",51,14,0
"thesofproject/sof","3f71845c1fbdaa4335165e9e3ce28d1b7a9108d9","lgirdwood","2018-08-22 13:44:13","true","Merge pull request #217 from tlauda/topic/slave_core_cacheattr

arch: apply cache attributes to slave cores",19,3,0
"thesofproject/sof","8368a6c9f48eeecc8971d8fb422eb2545dcc4e02","tmleman","2022-12-16 14:27:53","false","west.yml: upgrade zephyr to 720787f75a

Zepych update: total of 73 commits.

Changes include adding power domains to DMA interfaces and allowing to
skip context save during d3.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",91,54,1
"thesofproject/sof","119273d6ef39bb54a59fd346e027cb8f976c62b3","tlauda","2018-09-26 12:38:53","false","work: shared work queue implementation

Implements shared work queue across multiple cores:
- Work queue with 1 ms tick (will be configurable via IPC).
- Work queue shared across cores based on the same timer.
- Work queue enablement based on the number of active tasks.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",37,4,0
"thesofproject/sof","0a97c2bd6fa463e51ac8579bde6e74c736e6779f","lgirdwood","2018-09-24 14:59:32","true","Merge pull request #410 from jajanusz/ut-fix-after-pr390

test: fix: add log memory section",36,4,0
"thesofproject/sof","352ed2ca4b2e1dce3907fd9a5c5b0970e9207479","marc-hb","2021-12-18 06:38:50","false","logger: when FW is loaded, show the expected checksum in -d output

Sample output:

logger ABI Version is   5:3:0
ldc_file ABI Version is 5:3:0
ldc_file src checksum           0x07d4f1ad
Loaded FW expects chksum        0x07d4f1ad       <=== NEW!

Components uuid dictionary size:        2400 bytes
Components uuid base address:           0x1fffa000
...

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,42,1
"thesofproject/sof","1b4b3a575b12ee99ee8555dce3bd3eb0d70e88d3","marc-hb","2021-09-28 02:19:43","false","zephyr/docker-build: unset stale ZEPHYR_SDK_INSTALL_DIR, symlink toolchains

Currently set to obsolete 0.12.4. Better remove it here for everyone
rather than overriding it in Github Actions only.

Also symlinks the toolchains in /opt to /home to fix autodetection

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",120,40,0
"thesofproject/sof","4d3192c2666da6f1e9b60ad9dd30fe6d026facf7","marc-hb","2021-09-08 23:54:52","false","xtensa-build-zephyr: add option to stop after cloning Zephyr

This is needed by CI to clone only once and then take control of the
iteration over platform builds. CI already does all that but by
copy/paste/diverge of this clone() function.

Once cloning Zephyr in CI code is de-duplicated and uses this new
clone-only feature instead, it will be possible to submit any Zephyr
commit to SOF testing.  In other words it will make failed attempt
https://github.com/thesofproject/sof/pull/4728 possible

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",118,39,0
"thesofproject/sof","20705ad4c1dde8c73d15da3c85a132d7a10abd24","marc-hb","2023-10-20 19:18:34","false","rimage/toml_utils: fix signature and doxygen of parse_uuid()

Add missing `const` and warn that the endianness can't be relied on.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",12,65,1
"thesofproject/sof","de90f55657daff7953d5e45e7a1c2b4c85099b3e","marc-hb","2022-09-07 22:36:59","false",".github: extract standalone testbench.yml from Main Actions

Divide and Conquer.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",106,51,1
"thesofproject/sof","21f523401e4244dfd2fdce04db907ea092aea81e","ranj063","2018-05-31 20:01:20","false","topology:scripts: fix tplg build script to compile last topology when using xargs

When using xargs, the last topology file while batch processing alsatplg
doesn't get compiled properly.

Also remove a stray ; in the script.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",0,0,0
"thesofproject/sof","f9b8e08f75015853fcfba7b729d60d610cc30219","ranj063","2018-11-27 08:08:50","false","topology: modify virtual_widget definition

Modify virtual_widget macro definition to take type as
an input so it can used for different types and update
its users.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",42,6,0
"thesofproject/sof","0c75ff002b5ddcd28deb421a604759466f2c4abc","ranj063","2022-05-24 04:57:56","false","module_adapter: fix adapter_shim_new

Give the comp_drv structures unique names. This is needed to avoid name
collisions when declaring multiple components from the same file, for
ex: in the case of volume, we declare both the volume and gain
components.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,48,1
"thesofproject/sof","f07fabe12e974a749a260e526587594d8cf8bd6b","abonislawski","2019-05-21 10:55:57","false","memory: use linker stack position in boot entry

This will allow to use real stack position instead of a fixed define

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",59,12,0
"thesofproject/sof","5b072d97d542a939d7b8975465ab6c4428ac280e","ranj063","2021-06-09 16:56:40","false","topology: sof-apl-nocodec: revert to static pipelines

Dynamic pipelines will fail with the sof-apl-nocodec topology
due to issues with the memory allocator. Revert back to
use static pipelines until we have a more flexible memory
allocatory available with Zephyr.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",80,36,0
"thesofproject/sof","19d9cce4cfc404b7e9562abbf74bae53828c4645","ranj063","2023-05-05 20:24:27","false","topology2: cavs-nocodec: Implement passthrough option

Add the host and io gateway pipelines when the passthrough option is
chosen and connect them directly.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",53,59,1
"thesofproject/sof","d69ab6e6f1937618d87b51f392c52f389e3e4a7c","ranj063","2021-11-16 22:11:04","false","topology2: mixin-playback: Add the copier->mixin route

Add the route from the host copier to the mixin widget in the class
definition so it doesnt have to set in the top-level topology everytime.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",127,41,1
"thesofproject/sof","189282285b36b5c8713b840c9fe30286a387ca82","abonislawski","2020-05-26 09:46:37","false","jsl: lps restore vector

This patch will place LPS restore vector before heap lp buffer

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",97,24,0
"thesofproject/sof","5c4ca781ec83e492edc164179fe4c75477c08ff3","balakishorepati","2022-04-14 05:56:39","false","tools:topology: Add HS topology

Add HS I2S instance topolgy for Rembrandt target.

Signed-off-by: balapati <balakishore.pati@amd.com>",117,46,1
"thesofproject/sof","72871397f2e4fa6cf760c5e698cd366073e87fe6","tlauda","2019-02-08 14:46:48","false","dai: remove unused defines

Removes unused defines from dai component.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",59,8,0
"thesofproject/sof","5c015f812cdfce49bf4fd66c65a3fca21a4da4e2","dabekjakub","2019-08-13 11:44:55","false","memory: turn off unused memory

Add turning off (totally powering down with no retention)
unused memory banks after manifest parsing.
Turning off memory saves power/battery life in the long run.

Signed-off-by: Jakub Dabek <jakub.dabek@intel.com>",55,14,0
"thesofproject/sof","4ee233990e5845d15df32fbdea88140250bb2f9c","tlauda","2019-09-05 13:13:12","false","schedule: introduce ll_schedule_domain

This patch introduces new structure called ll_schedule_domain.
It will be used to initialize ll scheduler with different
types of scheduling time domains. Right now it's only working
based on timer interrupts, but will be extended.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",62,15,0
"thesofproject/sof","390a6e53067391d119be2826ed1ef13d984b0cf1","tlauda","2019-10-28 11:16:25","false","pcm_converter: add HiFi3 implementation

HiFi3 implementation of PCM converter is optimized to
process either two samples at once for 32 bit data or
four samples for 16 bit data.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",67,17,0
"thesofproject/sof","9b535ce1a23cac4d09eb7b288805a7044124ea40","tlauda","2019-10-16 11:15:57","false","platform: rename PLATFORM_DMA_TIMEOUT and move to dw-dma header

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,16,0
"thesofproject/sof","c1b74bac9b2293213cd47e1138adfa357596a0bc","bardliao","2023-10-11 08:28:42","false","topology2: sof-mtl-rt713-l0-rt1316-l12-rt1713-l3: use default stream
name

rt713 and rt1713 are in different SoundWire links. So, no DAI type will
be appended to DAI link name. We should use default stream name in
the topology.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",13,64,1
"thesofproject/sof","b4025e5d49b89ceec72efdec18276b21262dd777","andyross","2022-08-29 15:44:42","false","zephyr: Add missing kernel.h include

The timer.h header references k_cycle_get_64(), which is defined in
kernel.h.  Was previously hidden by a transitive include somewhere.

Signed-off-by: Andy Ross <andyross@google.com>",113,51,1
"thesofproject/sof","8591087c4f0ff28ff4352242d3b0fcdf785d6a67","serhiy-katsyuba-intel","2022-08-01 09:31:00","false","ipc4: add mixin gain support

Add possibility to apply gain to mixed sources to avoid
mixed output saturation. Gain (attenuation) is configurable
per source and comes from host via IPC4 large config set.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",111,50,1
"thesofproject/sof","b451b314d71110e97223e8d1ecad7540d250b61d","wwittbrx","2019-06-05 09:51:37","false","include: user: kpb: Move kpb configuration structure

Move kpb configuration structure to user header folder to expose it to users such as applications/tools.
The configuration structure is needed to create a binary blob that allows to control the component.

Signed-off-by: WojciechX Wittbrodt <wojciechx.wittbrodt@linux.intel.com>",62,12,0
"thesofproject/sof","2a4cf9af4cb8c2810840cf8ef786a020520e804a","kv2019i","2023-08-16 16:50:54","false","platform: tigerlake: remove unused definitions

Zephyr native platforms do not need to have low-level definitions
in the platform.h file. These are now handled by Zephyr board files,
so stick to a single place for the definitions and remove the values
from here.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",24,62,1
"thesofproject/sof","f8a202aa92e17ba20fc7dbf637c8836a7a154b0f","kv2019i","2023-10-20 10:39:34","false","app: boards: intel_adsp_ace20_lnl: drop DMA_DW_SUSPEND_DRAIN

The LNL board does not use DMA_DW driver, so the board
file should not set any build options specific to that
driver.

This fixes build warning:

--cut--
warning: DMA_DW_SUSPEND_DRAIN (defined at
drivers/dma/Kconfig.dw_common:27, drivers/dma/Kconfig.dw_common:27,
drivers/dma/Kconfig.dw_common:27) was assigned the value 'y' but got the
value 'n'.
---cut--

Link: https://github.com/thesofproject/sof/issues/8356
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",12,65,1
"thesofproject/sof","4e320b4c886019e58edf35acea9ae6bd16431321","ymdatta","2020-02-19 13:06:09","false","drivers: dw: dma: Add missing blank line after declaration

This makes code easier to read and fixes checkpatch.pl
warning: ""WARNING: Missing a blank line after declarations"".

Signed-off-by: Mohana Datta Yelugoti <ymdatta.work@gmail.com>",84,21,0
"thesofproject/sof","297dcaaef76f8c0f15cd21e49e09c0976012e2f7","slawblauciak","2018-07-04 12:41:43","false","lib: fix free_block for memory allocated in the last block map

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",9,1,0
"thesofproject/sof","1b673c48a001759292cb4f03bb68c3a48e3669a1","keyonjie","2018-11-23 11:33:18","false","IPC: Xrun: fix Xrun stream id error issue

As API required, we need transfer stream host comp.id inside hdr cmd,
otherwise, host side can't get information about which stream has Xrun
happened, and reported error as ""XRUN for unknown stream, msg_id 0"".

This is similar to Position IPC, add comp.id into cmd to fix it.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",40,6,0
"thesofproject/sof","9ac2e32099f5f6409ddf95ddd5ce634bcbaa4e0d","keyonjie","2018-06-25 09:32:43","false","topology: change BE name for NoCodec to support multiple SSPs/BEs

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",4,1,0
"thesofproject/sof","fc03d17b480b9af99b24b464ca82515d3c771c32","keyonjie","2021-09-13 08:46:12","false","memory: apollolake: reduce the waste of BUFFER block header

The buffer zone will not occupy more than half of the HP SRAM, decrease
the HEAP_BUFFER_COUNT_MAX which can help save about 5KB for us.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",118,39,0
"thesofproject/sof","bf9ce82b27ffb0f882ad01cb409881e989af97ba","slawblauciak","2020-03-31 10:27:46","false","dai: provide additional description of dai private data

This provides basic guidelines to clear up how to allocate
and use DAI private data.

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",66,22,0
"thesofproject/sof","0dd6c238146d2465d39d5d26eb6ebf191a20f251","jajanusz","2019-06-08 11:33:15","false","hsw: ssp: add quirks support

Enables quirks supported by HSW.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",54,12,0
"thesofproject/sof","f6069404802bcefb2f8a84b0127a9b22f467e868","ktrzcinx","2020-02-27 12:22:17","false","rimage: Return error code when problem with file opening

When some error occur during fopen routine, then errno should be
returned instead of success code.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",76,21,0
"thesofproject/sof","837ad4b9e0204d4025c545477cbabe4a58653996","ktrzcinx","2020-08-19 08:13:30","false","trace: Print source hash as zero padded 8 char width value

Then src hash and ldc hash should have the same format.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",75,27,0
"thesofproject/sof","6fac902478e659c761c66106d11e8b2809b2a1c7","ktrzcinx","2020-04-28 06:17:34","false","pcm_converter: Create circular buffer converter working on linear memory

It is easier to implement converter working on linear memory space
instead on circular. Moreover such a solution should be more
effective in comparison with checking for buffer wrap after each sample.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",94,23,0
"thesofproject/sof","a2c276e446b8a8220a8d1a2aea2fabf4875f2789","ktrzcinx","2020-07-07 18:49:22","false","clock: Add function to set low power mode

This function will be called from power manager to change current
clock value for sleep time.
Detailed implemnentation may be clock instance dependednt.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",74,25,0
"thesofproject/sof","06570f27a2b02ef0910d1b14690958213c00f5ff","singalsu","2018-06-19 15:14:52","false","DMIC: Bug fix for HW version 2 IPM setup

Depending on HW configuration for two PDM controllers or less the
IPM bit field value calculation need to be done like for HW version 1.
The new style IPM bit field value calculation is used for three or four
PDM controllers.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",1,1,0
"thesofproject/sof","934a3300d67bc55b399e19c0494364b6690c324b","singalsu","2018-06-27 12:43:00","false","SOFT: Fix the topology file name in SRC test topology lookup

The topology files naming has been updated to include mclk-N so it
needs to be added here as well for the script src_run.sh to work.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",6,1,0
"thesofproject/sof","17f281de97ca4939bf61f71d8fe374cfa07cf4bc","singalsu","2020-06-02 16:19:04","false","Audio: Improve volume gain ramp length accuracy

This patch replaces the fixed step increment/decrement linear ramp
update with a time since transition start calculated direct line point
value. It does not suffer from accumulated rounding errors.

The new ramp_coef[] vector (that replaced ramp_increment[]) defines
per channel the slope coefficient as Q16.16 units per millisecond. The
slope points calculation needs a new counter variable that counts
frames since ramp start. Also the volumes vector at time of ramp start
need to be stored. The old fixed increment calculation related macros
are removed.

The zero crossings timed volume mode suffered from fixed step the most
since depending on signal the fixed step could update the value too
much or too little.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",94,24,0
"thesofproject/sof","bfd134ff4c54859045145774e3172cc1af04d913","serhiy-katsyuba-intel","2023-07-14 16:13:12","false","Fix pipeline_get_dai_comp_latency() for cross core

Pipeline data is allocated in cached space. This workaround
prevents from accessing another core pipeline data when
calculating latency.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",32,61,1
"thesofproject/sof","fa4a7bda4ec3e10d43e96661e7e1fce29fff92ae","singalsu","2020-07-28 15:23:49","false","Testbench: Check num_elems in tokens parsing

This patch adds check for sane num_elems value. If the calculated
array size exceeds the value size an error is returned and topology
parsing is aborted.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",79,26,0
"thesofproject/sof","69c69d01a4b7461ba5895395c8461d64f6d9a763","singalsu","2022-03-18 17:45:26","false","Tools: Testbench: Add capture direction and multi-pipeline run

This patch changes testbench to retrieve pipeline direction
from pipeline host direction. Earlier all pipelines were forced
to playback.

The topology parsing filters the parsed pipelines to command line
specified pipeline IDs. All the pipeline operations are done
looped to these pipelines to be able to simulate multiple simultaneous
pipelines.

The pipeline context struct remains single. So the simulation works
only for pipelines with identical PCM format and rate.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",109,45,1
"thesofproject/sof","7a8ed190e8e22fff64386eea080a2c8a32d64840","singalsu","2018-10-15 16:20:26","false","eqctl: Add check for calloc() success and return 0 in exit

This patch adds the missed details into the code.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",34,4,0
"thesofproject/sof","f08ec9a4b38520ea32cadcc5fd96026f9e9d0bdf","singalsu","2020-01-17 12:24:05","false","Topology: Apply high-pass filter to rt715 capture pipelines

This patch mitigates the start transient in capture from rt715
codec. The start transient is DC pulse that can be attenuated
significantly with a high-pass filter. The pipeline macro
pipe-highpass-capture.m4 adds a 40 Hz second order IIR filter
into the beginning of pipeline. The volume control in this pipeline
is also set to a longer 400 ms ramp length (normally 250 ms) that
is sufficient to conceal PCM waveform issues before the IIR filter
settles to DC level.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",79,19,0
"thesofproject/sof","7dd76db0a8208a0d69d4f81daaa0878ec322dcc4","singalsu","2019-05-06 17:32:29","false","Topology: Add volume ramp tokens into topologies

This patch adds volume configuration tokens as fifth parameter
for pga.m. All the topologies those use W_PGA() are updated to
use a linear (type=0) ramp with length of 250 ms.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",48,11,0
"thesofproject/sof","af9a2fe58f2141dc10720df8c296dd8301ec513d","singalsu","2023-05-16 09:59:29","false","Config: Fix comment typo for EQ FIR module

The comment for FIR module entry is corrected.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",51,59,1
"thesofproject/sof","bca7bf436e8ee9d24cbf244ff78b8bd034cc2897","singalsu","2022-12-20 16:15:39","false","Audio: Mux: Code formatting changes

These style changes improve code readability.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",90,55,1
"thesofproject/sof","f80c828a77dcc7cbc06360bb9ec7e3e740202eaa","bardliao","2019-01-29 22:24:23","false","topology: add cml topology with src supported

The topology is based on sof-cml-rt5682.m4 but use src on SSP playback

Signed-off-by: Bard liao <yung-chuan.liao@linux.intel.com>",57,8,0
"thesofproject/sof","cb5886acc4238ce7ef392119527e5c084680af5f","rfredzim","2022-03-30 10:30:54","false","ipc4: dma-trace: fix the ipc4 log buffer status notification

Initialize the header and size of the ipc4 log buffer status
notification to correct values.

Signed-off-by: Rafal Redzimski <rafal.f.redzimski@intel.com>",112,46,1
"thesofproject/sof","21e8d5efc5da1a4633dd0a7ee367196ad879a0c3","abonislawski","2019-04-04 09:30:43","false","heap-debug: use the correct functions for heap trace

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",50,10,0
"thesofproject/sof","804d302b3c7915f03ab0bc752b16484b1a94f676","cujomalainey","2021-08-20 19:33:40","false","ipcv3: fix memory access bug

Fuzzer found a way to try and access a buffer as a component which
results in a UAF crash.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",120,39,0
"thesofproject/sof","e20cd2811e52efe951ada83e9245f3dd366948b1","akloniex","2020-03-20 18:16:34","false","muxdemux: Remove obsolete references to config->num_channels.

Few artifacts of the past were left after dependency removal. This patch
is there to address that.

Signed-off-by: Artur Kloniecki <arturx.kloniecki@linux.intel.com>",66,22,0
"thesofproject/sof","b780605eaf22472e2f0230a9f1173a7d92193cf2","jajanusz","2019-05-15 12:33:29","false","uapi: xtensa: change ar to variable array

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",66,11,0
"thesofproject/sof","872cefe357febf35f96717a710aa1695cbb2ae0d","jajanusz","2019-01-11 18:04:11","false","[skip ci] github: remove mwierzbix from CODEOWNERS

He is no longer member of this project.
+fixed some typos

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",55,7,0
"thesofproject/sof","a4f666527e3a2dd4ea00e58f7253f11896d5a4fc","jajanusz","2019-02-08 21:49:47","false","cmake: add build counter

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",59,8,0
"thesofproject/sof","817dadaef510c52729915a3f65daff22edefcc1f","jajanusz","2018-08-02 12:28:48","false","platform: use lt library for cavs shared sources

Wraps common code into libtool convinence libs, because we don't want to list
common source files for each platform with relative paths.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",14,2,0
"thesofproject/sof","0d9eefbda4c3847f0fa2ba3caf0415054e0cf398","dbaluta","2020-04-03 13:09:53","false","trace: Fix compilation error when CONFIG_TRACE not set

Introduce dummy trace functions for when CONFIG_TRACE
is not set to avoid undefined reference to function error.

src/ipc/handler.c.o: In function `ipc_glb_tplg_buffer_new':
src/ipc/handler.c:1094: undefined reference to `trace_on'

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",81,22,0
"thesofproject/sof","2786fedcb5e2d5f02f889dd606b41e27460b1440","jxstelter","2022-11-03 10:51:31","false","mux: fix FW build with xt-clang

Newer Xtensa toolchain replaces xt-xcc with xt-clang.
For some reason xt-clang fails to build SOF when uint8_t type
is used as index of for() loop. This change unblocks building of
SOF with xt-clang.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",89,53,1
"thesofproject/sof","fcc891ef9b4aa22de1b29b16eedb2c206435e81a","andrula-song","2022-03-23 03:27:44","false","audio: crossover: fix the mistake of sink stream pointer

to fix the mistake of using audio_stream_read_frag* while
getting output sink buffer pointer.

Signed-off-by: Andrula Song <xiaoyuan.song@intel.com>",108,46,1
"thesofproject/sof","1602cba5f3758663278828a14958b5fcd2bbabdd","xiulipan","2021-01-26 08:24:20","false","drivers: cavs: ipc: change hard code value to defined macro

change 0x80000000 value to IPC_DIPCIDR_BUSY to increase the code
readablity

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",68,32,0
"thesofproject/sof","1aefc30f378faf2e280093e017d6be54ef70903f","ktrzcinx","2020-11-03 14:13:30","false","trace: hda-dma: Lower trace level

Modified traces are quite verbose so should be done
with tr_dbg() function to reduce messaging noise in
non-verbose scenario.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",75,29,0
"thesofproject/sof","cec76442eb36b39e8881799725acfd01cb36212a","tlauda","2019-10-21 08:17:16","false","buffer: remove buffer cache operations

Removes buffer cache operations done based on the fact,
whether buffer is used by DMA or not. From now on DMAs have
their own dedicated buffers with dedicated copy functions,
so this code is no longer needed.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",63,17,0
"thesofproject/sof","25bbc9f5cd541d42098e400dcdb081ae9860eb79","tlauda","2019-06-24 07:39:04","false","schedule: extract schedulers to separate directory

Extracts schedule related implementations to the separate
directory to make it easier to locate and implement new
schedulers in the future.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",46,13,0
"thesofproject/sof","67097327fedb22de5a4d2bfef5a59b2833aa0de2","tlauda","2019-10-28 09:46:12","false","dai: remove unused code

Removes unused code from dai_config. Frame bytes are always
calculated from scratch in dai_params, so no point in keeping
this dead code.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,17,0
"thesofproject/sof","0bd252253e1559ad034f784bab034a075ddad691","tlauda","2020-02-10 09:46:25","false","audio: invalidate and writeback buffers where needed

Calls buffer_invalidate and buffer_writeback in audio components
processing functions. It is required to achieve data synchronization
in case buffers are inter-core.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",80,20,0
"thesofproject/sof","5ac748c8db2690683b7482909484e88a4bfbae29","cujomalainey","2021-07-19 20:14:17","false","codec_adapter: passthrough: fix typo

logging as process in prepare step

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",90,38,0
"thesofproject/sof","32ef184a21874bc2e8e020311858b7ddc1a771b9","cujomalainey","2019-09-19 21:22:40","false","issue_template: remove dead references and duplicate fields

reproducibility field is duplicated and soft is archived and no longer
needed. Add placeholders for needed system information.

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",63,16,0
"thesofproject/sof","858eec93ffa0188591be83b18616db6cab2e5c7d","tmleman","2022-03-04 15:15:59","false","ipc4: base_fw: return fail for not supported ipc

Base FW is lacking implementation for large config set. Returning 0 is
hiding the existing problem and will lead to false success reports. Tests
using this functionality will fail in later steps, making it difficult to
debug.

However, IPC4_FW_CONFIG have to be exception. All existing tests used by
FW team are using this IPC. Its required to maintain unity of tests for
all platforms.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",116,45,1
"thesofproject/sof","912cf91ca69c317a98e550b0b50de4d8a0399c53","lkoenig","2022-07-04 09:12:28","false","google_rtc: Do not rely on component type.

Remove the assumption that the AEC reference was coming from a DEMUX.
It now uses the fact that the AEC reference comes from another pipeline
in order to detect it is the reference signal.

Signed-off-by: Lionel Koenig <lionelk@google.com>",108,49,1
"thesofproject/sof","d9652bd6c274bdd8cef079de58e68587612b7168","lyakh","2021-10-08 14:02:17","false","pipeline: check error codes, propagate errors

pipeline_for_each_comp() and buffer_set_params() can fail, make sure
to check their return values and propagate any errors.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",121,40,1
"thesofproject/sof","a766d22e5d877dc146165bd66dcf5a5da9d9e550","marc-hb","2021-05-07 05:54:59","false","trace.h: replace #ifndef CONFIG_LIBRARY negation with #ifdef

Zero functional change.

Swap the ""then"" and ""else"" clauses to remove the simple negation in the
""then"" and the double negation in the ""else"".

Also move _DECLARE_LOG_ENTRY macro out of the #ifdef because it does not
hurt and is used in a third (with #elif) clause experiment that I'm
adding locally - the negations make adding a third clause much more
difficult and are what actually prompted this initially.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",80,35,0
"thesofproject/sof","87148abf1ec2d80a436d652b258d8a67c72bc6cf","lrgirdwo","2023-09-19 20:32:58","false","tools: Introduce the SOF ALSA plugin

The SOF ALSA plugin allows SOF topologies to be run on the host. The plugin
is still WIP with many rough edges that need refined before production
deployment, however the plugin is usable today as a rapid development
framework for SOF infrastructure and processing.

Features that are function in the current implementation
 * aplay & arecord usage working today
 * modules are loaded as SO shared libraries.
 * topology is parsed by the plugin and pipelines associated with the requested PCM ID are loaded
 * pipelines run as individual userspace threads
 * pipelines can be pinned to efficency cores
 * pipelines can use realtime priority.
 * alsa sink and alsa source modules available.
 * pipelines can block (non blocking and mmap todo)
 * 16-bit playback and capture support. Other formats to be added soon

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",20,64,1
"thesofproject/sof","cad86dc340447f8ae514233d50c921a21c989d6b","lrgirdwo","2018-06-18 14:57:26","false","scripts: xtensa-build: fix alias detection for bxt/apl gcc

use bash builtin type instead of -x (requires full path)

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",1,1,0
"thesofproject/sof","44a65d850b50f951173cfbcfbadc7d135a4f4bd7","lrgirdwo","2020-04-29 14:59:08","false","components: ut: all components should be declared UT_STATIC

Zephyr build fails without this atm, but also needed for testbench.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",93,23,0
"thesofproject/sof","c3c94fc5151886f198bf331af9f454c6089634db","lrgirdwo","2022-08-31 21:19:35","false","header: rtos: use rtos specific version of wait.h

Code can now include <rtos/wait.h> and uses native Zephyr 64
cycle API instead of SOF version.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",116,51,1
"thesofproject/sof","15507ec9efbae5897fae9b296e56fc1dd1af63e8","dbaluta","2023-09-11 10:36:01","false","topology: Add MICFIL topology for imx8mp

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",19,63,1
"thesofproject/sof","5270e631c391b2a7a8dc7dc698df20bb27c22225","johnylin76","2022-12-20 13:13:52","false","dts: handle zero config size case in set_configuration

The generic module_set_configuration function returns 0 early when
the coming config size is 0. In aspect of DTS module, receiving 0
from module_set_configuration call means either config is obtained
succesfully or no config (size is 0). The present code doesn't
handle the latter case.

This commit handles the case in DTS module by early return.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",90,55,1
"thesofproject/sof","691275533d4c2ddae97a014d3f47c1c601aa6413","johnylin76","2020-12-01 10:36:21","false","sof: multiband_drc: Implement multiband_drc_generic

This commit implements multiband_drc_generic for sample processing.

Multiband DRC is a single-source-single-sink compound component which
consists of 4 stages: Emphasis Equalizer, Crossover Filter (from
1-band to 4-band), DRC (per band), and Deemphasis Equalizer of summed
stream.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",75,30,0
"thesofproject/sof","cfc467c242e23065bdd51f09e89f2f6ccd43ff17","ranj063","2021-11-15 03:43:24","false","topology2: tokens: fix tuple for CPC copier token

Align with the kernel definition.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",127,41,1
"thesofproject/sof","0fd97adfb0e46867cd06c9e6d03a60259d6f33fb","jajanusz","2018-12-27 20:20:13","false","cmake: add utility scripts

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",49,7,0
"thesofproject/sof","8d9438388ce5c2044af595401d9d30feb42072c9","zhuyingjiang","2019-03-07 08:47:44","false","topology: fix two comments

fix two comments of SSP number, the da7219 is connected to
SSP2

Signed-off-by: Zhu Yingjiang <yingjiang.zhu@linux.intel.com>",67,9,0
"thesofproject/sof","aaaffd108078e3bbe4842bb7b895735aba175544","pblaszko","2022-11-18 12:47:30","false","ipc4: cleanup unnecessary pipeline device search

Cleanup duplicated use of ipc_get_comp_by_ppl_id which searches for
pipeline component in components list in set pipeline state flow.
Cleanup pipeline ipc component device variable names. PCM device is
misleading.

Signed-off-by: Przemyslaw Blaszkowski <przemyslaw.blaszkowski@intel.com>",96,54,1
"thesofproject/sof","3e2317ef309ee2d329257bfe001b1b577e364285","keyonjie","2020-12-10 07:34:58","false","ssp: mn: log useful info when error happen

Log the incorrect mdivr_val value when error happen, which could help to
identify what has happened.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",74,30,0
"thesofproject/sof","538d7dba7a47d5d7b56645904434bc7c1f399dcb","keyonjie","2021-04-26 02:49:13","false","ll_schedule_domain: add return value of domain_unregister()

Add return value of domain_unregister(), which will be used for the LL
scheduler and the domain state management in the subsequent refinement.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",88,35,0
"thesofproject/sof","3685b74c03b8e66d478277615ca60a906c6a0391","keyonjie","2021-11-18 07:10:38","false","ll_schedule: add task state machine documentation

Add ASCII art to document the task state transition when scheduled by
the LL scheduler.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",128,42,1
"thesofproject/sof","e4fa878606e00078fb59cd337f65b6f4a967e16a","keyonjie","2020-08-19 01:51:26","false","topology: utils: add helper to generate PCM capability

Add a helper to generate supported formats of the PCM capability, it is
up to the pipeline format:

for s16_le pipeline, only S16_LE is supported.
for s24_le pipeline, both S16_LE and S24_LE are supported.
for s32_le pipeline, all S16_LE, S24_LE and S32_LE are supported.

For each pipeline, we should use CAPABILITY_FORMAT_NAME(PIPELINE_FORMAT)
in the PCM_CAPABILITIES definition.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",75,27,0
"thesofproject/sof","2633535cb2e21ae144e69cdfb338dde51b643af9","wenliangwu","2022-12-30 03:56:54","false","drivers: mtk: add mt8188 AFE sinegen support

Add MT8188 sinegen driver for debug purpose.

Signed-off-by: Trevor Wu <trevor.wu@mediatek.com>",93,55,1
"thesofproject/sof","4ff218b482a4a7a7257ae1460b0fbd88a1f4796a","lyakh","2019-01-10 13:25:18","false","sue: use a symbolic name for a task priority

Use TASK_PRI_MED instead of a hardcoded 0 for the IPC task on Sue
Creek.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",57,7,0
"thesofproject/sof","2c4d8e981e8bce36f90caa964b52a5d7dce57159","lyakh","2020-11-19 16:38:36","false","debug: explicitly include ipc/trace.h where panic() is called

ipc/trace.h contains definitions for all the SOF_IPC_PANIC_* macros,
it should be included explicitly everywhere, where those macros are
used.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",74,30,0
"thesofproject/sof","4316f3c83635b4ae043b9ebc29b8135d49fbbabf","lyakh","2020-11-20 09:43:59","false","alloc: simplify align_ptr()

Simplify the align_ptr() function by re-using an existing ALIGN() macro.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",74,30,0
"thesofproject/sof","e7a21904ac05570f8d124a509d99e1f0bc59d126","lyakh","2023-01-25 13:30:00","false","dts: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register dts with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","a0ab594045f783355430c6758f991af272623423","marc-hb","2021-09-08 19:33:23","false","zephyr/docker-build.sh: pass arguments through to xtensa-build-zephyr.sh

Allows passing compilation flags and any other argument.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",118,39,0
"thesofproject/sof","fd572100539dcaefba44e324924d4491d8b9125c","marc-hb","2021-09-24 00:27:44","false","installer: add sof-ctl and sof-probes

Add sof-ctl and sof-probes.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",118,40,0
"thesofproject/sof","463e8bd1526b5cd64fd8dc491df0cf1cf8d00d7e","marc-hb","2023-05-12 03:18:29","false","xtensa-build-zephyr.py: add a new line after logging the environment

In some cases it was difficult to separate the command's output from the
extra environment it ran in.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",50,59,1
"thesofproject/sof","e6c3dda61a0e831b0ff502f66059b786250ac864","marc-hb","2021-03-11 05:08:18","false","xtensa-build-all.sh: remove $ARCH unused since CMake / January 2019

$ARCH was introduced in 2018 by commit b5af84deaa72 (""scripts: add smp
builds to xtensa-build-all.sh""). At the time used autotools and
`./configure --with-arch=$ARCH` were used.

In January 2019 the build system was migrated to CMake over several
commits, notably commit 9840ecbbfe41 (""cmake: update
xtensa-build-all.sh"") that switched xtensa-build-all.sh to CMake and
removed its only use of ARCH. Also note commit 82b4da291b2aee (""cmake:
defconfigs support"") which added a few CONFIG_SMP defconfigs and
commit 905bad42525b (""scripts: xtensa-build-all: Add support to force
build UP Arch"") using override.config.

Much more recently in June 2020: commit fd506970cce7 (""zephyr: kconfig:
rename CONFIG_SMP -> CONFIG_MULTICORE"")

Zawinski's Law of Software Envelopment: adding lines of code is much
easier than removing the same amount and would be very impractical
without git. This one was easy enough.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,33,0
"thesofproject/sof","f00d46b3ae03f21f83986cc6c2b37edcb64fb411","lrgirdwo","2018-12-15 21:55:23","false","ipc: abi: Make sure we pass all IPC data to client APIs.

Make sure we pass the entirety of IPC data between FW and host by
using the raw buffer for client APIs and the local copy for local
ABI safe instrospection & validation.

Make sure this works both ways and add a max_data_size argument to
comp_cmd() API in order for client API's to to overflow the return buffer.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",49,6,0
"thesofproject/sof","a2acc8837d4d2cf6bfcea3bb5df15bc2618433cd","lrgirdwo","2018-07-14 16:33:19","false","configure: gcc: make sure CFLAGS and LDFLAGS are set correctly.

GCC needs flags set correctly in order to pass AC_PROG_CC test.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",15,1,0
"thesofproject/sof","41e62eb4ba3147298a46ecb9da52489b11ee7ef1","lrgirdwo","2020-04-27 13:27:16","false","dmic: irq: removed unneeded code.

irq_enable/disable should be doing the unmasking and masking.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",92,23,0
"thesofproject/sof","83ada5ac082b164ab9b5f90b209d8726f4ed0074","plbossart","2022-03-07 21:32:16","false","topology: disable SSP0 and SSP1 on APL/GLK to enable Zephyr tests

This is a temporary work-around to enable CI tests while performance
is being optimized.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",114,45,1
"thesofproject/sof","57e976ec3854cfe4ca34211f6edc041909c9c24a","plbossart","2022-12-21 16:24:50","false","topology1: add missing ADL-es8336 topologies.

The ADL integration was botched with missing topologies and errors in
topology names in the kernel.

Link: https://github.com/thesofproject/linux/issues/4111
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",93,55,1
"thesofproject/sof","2cbae587bbaa825711019509243c0528e4dd4e1b","RanderWang","2023-09-01 02:28:44","false","ipc4: msg: avoid sending duplicated reply message

In multicore case, IPC message is dispatched from primary core to
secondary core which send reply message to host. Primary core will
do nothing if IPC_TASK_SECONDARY_CORE is set. But in rare case, the
secondary code finish the reply message and clear this flag before
the ipc thread in primary core check this flag, then primary core
also send reply message again. This results to the reply message being
inserted two times in ipc message list and infinite loop when visiting
the list.

This patch will check msg_reply state and do nothing if it is prepared
. We don't need to init reply message since it is initialized after
deleting from the ipc list.

Signed-off-by: Rander Wang <rander.wang@intel.com>",24,63,1
"thesofproject/sof","6dcf1b6ae8eb99e545eaf367528243136f95028e","ktrzcinx","2020-09-22 08:52:08","false","toml: Use only standard error codes

Error codes like ENOKEY and EBADE are not provide for all windows
toolchains, so to immit possible build errors, some more standard
error codes should be used.
Detailed error message is printed in stderr, so end user still
will be well informed about error source.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",67,28,0
"thesofproject/sof","ef10ecb6c27f74385a9848948e8bb573d195dbd6","ktrzcinx","2020-06-29 13:58:14","false","platform: intel: clock: Explicit change active frequency index

In situation with two or more active cores, saving active frequency
index in platform_clock_on_waiti suffer from race condition.
Changing state in *set_cpu_freq() method is much more safe.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",72,25,0
"thesofproject/sof","369e9e3b5a67d8b454e65c9c3c7191418d172e50","ktrzcinx","2020-02-13 12:42:45","false","ssp: Debug ssp_empty_tx_fifo()

This function should wait to transmission last element from FIFO,
what is indicated in SSSR and SSCR3 registers.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",82,20,0
"thesofproject/sof","9a7e889b340a90942d23e43fb201d90a7714ecd0","ktrzcinx","2020-09-09 10:45:17","false","ipc: Negate error message in ipc_comp_connect()

Error trace is produced only when component NOT exist,
so it should be coherent with log message.
Moreover add full information about connection - source and sink
component id, then it will be easier to find corrupter one.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",66,27,0
"thesofproject/sof","ece04f96560f3bc7790a6e113da302f071eb123d","ktrzcinx","2020-04-30 05:40:48","false","manifest: ads: meu: Fill FW version description also when MEU is used

This part of binary should contain valid firmware version.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",93,23,0
"thesofproject/sof","6f366e2eefe4fa4aaaa8d692fe7d276d8580d8d5","jxstelter","2022-05-23 13:49:50","false","Add definition of interfaces of Intel IADK modules.

Add header files with definitions needed to build wrappers
for run time integration of 3rd party modules developed
with Intel IADK framework.
Note: file naming and localization is kept from IADK Framework
to be able to integrate or also rebuild and integrate original
3rd party modules without their code modifications.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",115,48,1
"thesofproject/sof","d7ebc159d0dad8740829f5353d2ad43a2ee94743","tobonex","2023-09-15 17:53:15","false","crossover: remove buffer_acquire from crossover

remove buffer ops from crossover module

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","dda0d0be59d8bcfdb763d8aac304d37f267c022e","tlauda","2020-01-09 10:43:07","false","imx: add missing headers

Adds missing headers in drivers and platform code.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",74,19,0
"thesofproject/sof","a70326a8de554211bc80c412d90c7393c381ddfb","tlauda","2020-04-06 11:52:00","false","pm_runtime: cavs: make private data shared

Allocates cavs_pm_runtime_data as shared to make it usable
by multicore code.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",80,22,0
"thesofproject/sof","01b550092d6f9d5eb24cb3c91c72154e76a4c185","aborisovich","2023-05-18 18:36:33","false","west.yml: upgraded Zephyr revision to support new Zephyr SDK 0.16.1

Commit https://github.com/zephyrproject-rtos/zephyr/commit/9fc99928caf0
requires new Zephyr SDK 0.16.1 to work and breaks compatibility to
older Zephyr revisions.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",50,59,1
"thesofproject/sof","3b06515262de74d65b524c68dbad3f0ac093b389","marc-hb","2021-05-27 20:54:10","false","Kconfig: add link to Zephyr modules ""magic""

Because it's not a documented feature.

""Fixes"" commit 9235eb83608f (""kconfig: move BUILD_VM_ROM
Kconfig.xtos-build"") / PR #4201

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",82,36,0
"thesofproject/sof","ecd2d464f926097fd5021188bcb52570ebf8213d","marc-hb","2021-12-09 05:04:51","false","Revert ""zephyr: fix build after a recent trace filter PR""

This reverts commit b31d19b6c2ad3ec51db5f7362ec4acfec86b0317.

Part of the fix for #5032

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",122,42,1
"thesofproject/sof","a42592eda17f3c1a841993f5d279a5ae4512b446","marc-hb","2022-10-18 04:07:39","false","xtensa-build-zephyr.py: don't make ""."" a special case in tree listing

Small simplification.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",101,53,1
"thesofproject/sof","fef188562a546f60d0e2ecd028d3571fbc3e09fb","lyakh","2019-09-06 15:06:38","false","audio: host: remove superfluous variables

Two variables in host_new() contain constant values and only obscure
the code. Remove them.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",60,15,0
"thesofproject/sof","ab89914f2b1464d95e791b57802d2c7b1f7dee01","lyakh","2019-01-15 14:33:05","false","dw-dma: support scatter DMA operation

Add a configuration parameter ""scatter"" to specify, that the source
address should be reloaded while the destination address should be
incremented by the transfer length to contiguously fill destination
memory.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",54,7,0
"thesofproject/sof","b541e415e0f9f78d313dcca638a66b7815f08753","lyakh","2023-03-13 14:55:04","false","ipc4: module: remove unused variable size structures

struct ipc4_module_init_instance contains 4 structures at the end,
that aren't currently used in the firmware. Some of them like
struct ipc4_module_init_ext_data have a flexible array at the end
but can have further structures following them. Remove these
structures until any of them are needed, at which point they can be
re-added with proper size accounting.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,57,1
"thesofproject/sof","cbef494ee6e6bd71df9bd2b97a1901c7767b9d46","fredoh9","2021-05-11 18:23:25","false","Dockerfile: add vim and jed to apt install list

Can't imagine editing files without vim or jed.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",84,35,0
"thesofproject/sof","d259d1bd59cca1cd68f06e486f489507204a36cc","ranj063","2022-11-06 16:14:58","false","dai-zephyr: Free DMA config block during reset

This prevents memory leaks during repeated PCM start/stop tests.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",90,53,1
"thesofproject/sof","13d580042459a9ce6e603dfd64d51e0197f9e8c2","btian1","2023-03-27 08:17:55","false","dai-zephyr: remove callback notifier, call callback directly

This is a follow up with #7330, remove dai zephyr part callback
register/unregister, call callback function directly at notifier
event place.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",57,58,1
"thesofproject/sof","1f710923dd6c90084033de9aa5151ab56714a6f2","makarukp","2023-02-23 14:16:14","false","ipc4: add file for notifications initializations

Add separate file for notifications initializations. All generic
initializations could be stored in one place. Add initialization for
generic xrun notification message which can be sent by gateway.

Signed-off-by: Piotr Makaruk <piotr.makaruk@intel.com>",56,57,1
"thesofproject/sof","aa172da91947dc4e3b727b722ab19a7c5dc27ac7","xiulipan","2019-02-10 14:03:35","false","[skip ci]scirpts: update target install

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",59,8,0
"thesofproject/sof","36166d2c23775cb54f054c6d1052862892366e3b","lgirdwood","2018-09-28 14:17:10","true","Merge pull request #435 from akloniex/debugability

debugability: optimization: change declaration of buffer allocation on stack",37,4,0
"thesofproject/sof","6eb484a79557de4cd3ef30f8108174dc0c7e103b","lgirdwood","2018-07-06 09:57:05","true","Merge pull request #63 from tlauda/topic/child_irq_alloc

interrupt: alloc child irq_desc on runtime heap",11,1,0
"thesofproject/sof","479c09b3e94227385dbac939316feafa2adba86c","mrajwa","2021-05-10 21:14:42","false","codec_adapter: cadence: rework of reset & free procedures

This patch fixes the reset procedure of cadence codecs.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",82,35,0
"thesofproject/sof","df1314b5d8758f41b34308ed4e5c1232e263db5f","lgirdwood","2018-07-24 08:57:24","true","Merge pull request #41 from plbossart/fix/3dd17dc0

topology: fix Makefile.am",13,2,0
"thesofproject/sof","943f2e0eb9a0d73a407f5ddf94b150900d9afb5b","mrajwa","2019-07-26 13:12:36","false","kpb: calculate history depth depending on sample container size

This patch covers calculations of history depth
based on sample container size rather than sample
width itself.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,14,0
"thesofproject/sof","ef0d90af761b53d8ad1de5ef0f735953c5c6d4ff","lgirdwood","2019-04-01 09:13:02","true","Update issue templates

Initial bug report.",51,10,0
"thesofproject/sof","cbf03f28be074eb0007d3d9b432b5c375c3ba2a6","cujomalainey","2021-02-19 21:06:58","false","codec_adapter: don't error on free(NULL)

libc doesn't return a type, so it just no-ops silently on null, lets to
the same having this error makes walk back patterns more annoying

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",74,33,0
"thesofproject/sof","9b9264d03b052ace994869810de26586bbe642b3","cujomalainey","2020-10-06 21:38:17","false","host: move sof_get to platform

Move out of testbench so whole system can use as needed

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",66,28,0
"thesofproject/sof","32052add9968a22d81ffecc76fe905c042fe02a3","cujomalainey","2021-12-08 17:39:38","false","remove x from getopt

x param was removed from switch case but not from getopt. So if you use
x rimage silently fails on the switch case.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",123,42,1
"thesofproject/sof","b5d7fc61b58869ac7e1b9a9acca44b821859f791","tmleman","2022-05-06 10:43:37","false","ipc4: setdx: message completion delay

During transition from D0 to D3, IPC processing completion is done
during power down procedure (file power_down.S).

FW build based on XTOS never exit from ipc_do_cmd() and will not enter
ipc_complete_cmd(). Zephyr based FW on other hand will execute power
down procedure after enering idle,  when IPC processing task is
completed. Therefore it should be skipped here.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",115,47,1
"thesofproject/sof","3ce2279520596bcf844d86612e1fe03938f3b855","cujomalainey","2020-10-08 05:28:05","false","ipc: stub out mailbox write

In a library build we don't care about replies, so lets just no-op this
function

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",68,28,0
"thesofproject/sof","b29636b93622c17d83a994b82a5c8610401d91c5","macchian","2021-10-13 08:26:01","false","topology: add nau8825 headphone variant boards support on ADL

sof-adl-nau8825.tplg:
    headphone connects SSP0 link.
    bluetooth offload uses SSP2 link.

With nau8825 headphone, enabled MCLK/BCLK early start.
Add smart amp and dumb speakers support separately.

sof-adl-max98373-nau8825.tplg:
sof-adl-max98360a-nau8825.tplg:
    headphone connects SSP0 link.
    speakers connects SSP1 link.
    bluetooth offload uses SSP2 link.

sof-adl-rt1019-nau8825.tplg:
    headphone connects SSP0 link.
    speakers connects SSP2 link.

Co-developed-by: David Lin <CTLIN0@nuvoton.com>
Signed-off-by: David Lin <CTLIN0@nuvoton.com>
Signed-off-by: Mac Chiang <mac.chiang@intel.com>",122,40,1
"thesofproject/sof","8c20c39ca25c2f5fe4eb3905e9d2de2b8ff24638","fkwasowi","2022-12-13 05:30:52","false","memory: expand HEAPMEM_SIZE

FW infrastructure shall support buffering of historic data
from 1ch up to 6 channels 24bit samples in 24bit container.
For this reason, the heap should be extended.Increase HEAPMEM_SIZE
by 0x90000 because for audio format 16000Hz/6ch/24bit
history_buffer_size = 16 * 6 * 3 * 2100s = 604800 bytes (0x93A80)

Signed-off-by: Kwasowiec, Fabiola <fabiola.kwasowiec@intel.com>",97,54,1
"thesofproject/sof","76ae4d3e16ce18f227eeed361f6f5017c3ab9abf","xiulipan","2021-01-28 07:47:38","false","cavs: pm: change the timeout value for HOST IPC handler

After checking the kernel log the HOST will always handle
and replay DSP sent IPC GLB_TRACE_MSG in about 40us.

set the FW side wait timeout to 100us to improve the performance
of DSP power switch.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",66,32,0
"thesofproject/sof","46fc6fdf6e151e54c7e27e4785dc3f0aebc5bcd1","cujomalainey","2018-09-21 20:19:45","false","Set capabilities of channels to those defined in topology

Do not use a static defined number of channels, use the channels passed
in otherwise ASoC will try to allocate number of channels that should
not be allowed.

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",36,4,0
"thesofproject/sof","cefd4252abccd0973225d2be0e99294250727271","kv2019i","2023-06-12 09:34:39","false","host: zephyr: zero dma_block_config before use

As host_common_params() only sets a subset of the fields,
initialize the Zephyr DMA interface struct ""dma_block_config""
with zeroes before use.

Issue found in code review.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",47,60,1
"thesofproject/sof","ec63f3a70e53341aa0dea3cf843cc55d78baf26d","bkokoszx","2021-09-27 09:18:57","false","pm_runtime: prepare secondary cores for power down in d0->d0ix flow

Primary core during going to D0i3 state disables all another cores
in platform_pg_int_handler() function. Before it secondary cores
should be prepared (disable interrupts, perform writeback) in order
to make proper restore flow after D0i3->D0 transition.

This commit adds cpu_secondary_cores_prepare_d0ix() function in
ipc_pm_gate() handler, which sends idc to secondary cores
with information that they should perform preparation for power down
in the next platform_wait_for_interrupt() invocation. In
platform_wait_for_interrupt() there is cpu_power_down_core()
invocation with CPU_POWER_DOWN_MEMORY_ON (performs writeback/invalidate,
disables interrupts), when proper flag is set.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",120,40,0
"thesofproject/sof","c186b41818c416e2c4426fe802d495f65e460300","singalsu","2022-03-10 13:48:55","false","Audio stream: Add audio_stream_samples_without_wrap_s16/s24/s32 functions

This patch adds functions to retrieve number of PCM samples until
source or sink buffer circular wrap need.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",113,45,1
"thesofproject/sof","92ddb0d13714f402faa166c9d3594ea8693423b2","singalsu","2020-12-21 16:25:37","false","Tools: Tune: Fix beamformer rotate and diffuse simulation data generate

This patch fixes the incorrect delaying of simulation input signal to
microphones. Instead of delaying the old code advanced the input the
more the larger the input is. E.g. It caused the tests for line arrays
to show a mirrored beam pattern.

The num_filters is replaced by mic_n (microphones count). It is the
correct count to use here though usually filters count is the same.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",72,31,0
"thesofproject/sof","1b15fad84934ac6607cc6011c65b8bf0b4585203","singalsu","2019-04-15 12:29:47","false","TPLG: Fix mistake in 2ch configuration related DMIC macro

This patch fixes 2ch dmic capture topology. It appeared as topology
completion fail in SOF boot. The missing quote characters in m4
caused the STEREO_PDM0 macro triggered lines to no not be included
into conf file.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",49,10,0
"thesofproject/sof","ba344b520b7afb56f38dd972390acbb0dee9bb65","marcinszkudlinski","2023-09-15 14:12:41","false","dp: add calcultion of DP module period

For LL modules it is very straightforward - all LL modules
are called one by one in every LL pipeline tick, so module's
period is always equal to LL pipeline period

For DP modules a period has different meaning. As DP
is called ""on demand"" - whenever it is ready, it may not be
scheduled at every LL tick (and usually is not)

A period meaning for DP is ""a time when the module must finish
its job and provide data to next module in pipeline
or the data flow will be corrupted (a glitch)""

In common case the period is calculation is based on module's
OBS - if module provides OBS bytes of data in each cycle, it MUST
finish at least before the next module drains the buffer

In some special cases - modules producing a variable bitrate
(like MPEG) or not producing audio data at all (phrase detector,
speech recognition, etc.) - the module may set the period itself
during prepare operation

This commit adds calculation of DP period. This value will be used
in following commit as a base for deadlines calculation in EDF

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",20,63,1
"thesofproject/sof","1cc853d1e975904c24d3153b46db518b2f1578f7","singalsu","2023-04-13 12:43:52","false","Audio: SRC: Use only module API and fix IPC4 capture direction

This patch cleans up SRC component. There is no need to keep
IPC3 version build with legacy component interface. The patch
mainly removes code under CONFIG_IPC_MAJOR_3 and makes some
functions available for all builds from CONFIG_IPC_MAJOR_4.

The IPC4 capture issue is fixed by using the src_init()
IPC rates for source and sink rate initialize. It needs a
similar kernel update to always set those values. In practical
topologies in prepare the buffers may not contain the correct
stream information because the order of host copier and
dai copier pipeline prepare can be host first where capture
SRC is usually placed.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",50,58,1
"thesofproject/sof","7458312a76554c4e90d145c047cc56e64716e9e3","singalsu","2023-06-14 10:41:47","false","Tools: Testbench: Remove unnecessary scheduling component find

The pcm_dev is no more used in the code. It also causes a
problem with ""error: ipc get comp"" with some topologies, where
p->sched_id is missing. This fix helps testbech to parse a
topology like

pcm0p --> buf2.0 --> muxdemux --> buf1.0 --> ssp0.out
                        ^
pcm1p --> buf3.0 -------|

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",44,60,1
"thesofproject/sof","0e913d217a89de96fa19c644ea7b811dc0c4df79","bardliao","2021-05-20 06:44:00","false","intel: ssp: handle MCLK/BCLK early start

Some codecs need the SSP bit clock to start before data is provided,
and conversely the bit clock to remain active until the hw_free stage.

For backwards-compatibility with older kernels, the
SOF_DAI_INTEL_SSP_CLKCTRL_MCLK_ES and
SOF_DAI_INTEL_SSP_CLKCTRL_BCLK_ES bitfields are used to set an
internal state in the ssp->clk_active field. This helps deals with the
case where a topology sets these bits but the older kernel does not
make use of the modified IPC.

While we are at it, add clearer info traces for SSP configurations.

Note that the FSYNC only starts when DMA transfers are enabled in the
.trigger stage. This is by-design, the FSYNC will only start if the
FIFO is not empty. During the prepare stages the DMA transfers are not
enabled so the FIFOs are empty.

To enable the FSYNC at an earlier stage, we would need a major surgery
in the SOF architecture, or we would need to start zero-based DMA
transfers.

Co-developed-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>
Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",85,35,0
"thesofproject/sof","d652d1cd16bfd3d5a1f9019d51d03ccb15d7f36d","marc-hb","2022-12-15 18:45:36","false",".github/zephyr: re-add TGL IPC3 build for now

Partial revert of commit 687c6f305e46 ("".github: workflow: removed
legacy RTOS platforms from Zephyr build"") that was a bit too
""enthousiastic"".

When someone breaks the Zephyr+IPC3 build we'd like to: 1. notice, 2.
tell whether it's Intel-specific, IMX-specific or not specific.

This is a one-line change and unlike testing, building is ""free"".
It can be removed in a second when/if that becomes a burden.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",91,54,1
"thesofproject/sof","69d928829df4f3bfe3aedfc306961e987cf40b13","marc-hb","2020-03-24 18:47:24","false","CODEOWNERS: updates patterns, remove src/[include]/host/

... as reported by
https://github.com/zephyrproject-rtos/ci-tools/blob/cf55a47d52d/scripts/check_compliance.py
-m Codeowners

Thanks @jajanusz for the help.

For src/[include]/host, I tried some tig blame and git log to find
potential renames, but I gave up when I found that commits
e20217abc747 and f081a20de9e5 (for instance) added or moved some
patterns that already did not match anything at the time.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",64,22,0
"thesofproject/sof","757b13c123b1f91e0d9f0aeaa6adde8622a7afbd","marc-hb","2020-04-04 01:43:49","false","CODEOWNERS: scripts/ += marc-hb

Adding myself per Liam's instruction in PR #2606

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",80,22,0
"thesofproject/sof","45c3f132151676b77d7c290860ddd6b0b2abcdf7","marc-hb","2023-05-09 19:32:24","false",".github/fuzzer: add IPC matrix and IPC4 to new fuzzer

Hot on the heels of PR #7531.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",53,59,1
"thesofproject/sof","e87db0f08010a6dce3b93d6202f5a5985e40f196","marc-hb","2020-10-15 22:28:37","false","pkcs1_5.c: intermediate named constants in ri_manifest_sign_v1_x()

As suggested by Karol in the review of the next commit. Makes the
function call shorter and naming the parameters makes the code much more
readable. Can help for debugging too.

Absolutely zero change: the two CMAKE_BUILD_TYPE=Release rimage binaries
before and after this commit are actually identical.

In passing, replace void * arithmetic in that function
with char *. void * arithmetic is an actually illegal gcc
extension (not just ""undefined"").

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",72,28,0
"thesofproject/sof","7a847a5bd8206ec6ee4ec0b63525ae39a44f7b56","marc-hb","2022-02-23 00:41:24","false","xtensa-build-zephyr.py: de-duplicate common code

De-duplicate this code:

	if args.platforms:
		build_platforms()
		show_installed_files()

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",106,45,1
"thesofproject/sof","f9545c8f59ea3c3c63ed2eb64fa1e6e643a1a46c","marc-hb","2021-02-20 01:05:41","false","installer: new BUILD_TOOLS directory

The tools build is independent from the firmware build. The next step is
to invoke it from here if needed.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,33,0
"thesofproject/sof","dac982aaaa9cef7ac3a5ddf9e660883f44d7eef3","btian1","2023-09-01 03:48:37","false","audio: host: remove one buffer usage in host copy

during host copy, buffer acuquire and release should be used
as less as possible, since it takes a lot of cycles, for this
patch, cycle reduction is: 425 to 406, nearly 5% reduced.

note: test plafrom is tgl up board with sof debug build, base
platform clock is 38.4mhz.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",24,63,1
"thesofproject/sof","64c7b9868e016d18adaed4a0d9ddbf45e77ab7d2","ujfalusi","2021-12-17 10:08:52","false","dma-trace: Make dmatb and DMA_GW dma_sg persistent after first allocation

Do not free the dmatb so that the trace code can continue collecting
information continuously in it's buffer.

We also have another memory leak (when CONFIG_DMA_GW is set) which can be
handled this way:
Every time the dma_trace_start() is called we allocate a new dma_sg. This
is fine when the dma_trace_start() is only called once right after the
DSP finished booting, but multiple calls would eventually going to lead to
OOM.

Move the dma_sg allocation at the same place where the dmatb is allocated
to make it persistent as well.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",117,42,1
"thesofproject/sof","388d69fb9a0a377a403e94a6aa378ac4c3baf084","iuliana-prodan","2023-02-23 14:32:46","false","imx: fix interrupt initialization

Fix interrupt initialization by:
- disable interrupt for DSP Core;
- disable interrupt from MU;
- clear pending interrupt from MU;
- clear pending interrupt for DSP Core;
- configure interrupt for DSP Core;
- enable interrupt from MU.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",56,57,1
"thesofproject/sof","ac456d0a13e9619961099c0b149348dc951d4527","lyakh","2019-02-26 17:33:33","false","interrupt: support arbitrary interrupt controller cascading

When registering a cascading interrupt controller as a child of
another interrupt controller, no new child descriptor has to be
allocated, instead the embedded into the cascading interrupt
controller object descriptor has to be used.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",68,9,0
"thesofproject/sof","a1392bb0de04f81a4719437ae1df6815a6854f8e","lyakh","2021-10-21 10:26:54","false","zephyr: use all available memory for the heap

Instead of hard-coding a guessed heap size, obtain remaining free
SRAM from the linker and use it completely for the heap.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",125,41,1
"thesofproject/sof","8798dd508fa594a81842fec8e966111043982f38","lyakh","2021-09-23 13:07:26","false","ipc: print the incoming IPC code

IPCs from the host aren't very frequent during normal operation, and
having all their codes in firmware trace output is extremely useful
for debugging. Add a trace print for arriving IPCs.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",118,40,0
"thesofproject/sof","afb1a0d6a339342931274133bf6eaf222bd04565","lyakh","2023-03-13 15:17:34","false","compile: use flexible arrays to use compiler checks

We use zero-size arrays throughout the code in place of flexible
arrays. There are only two cases where flexible arrays cannot be
used: inside unions and where such an array is the only member of the
structure. In all other cases we can switch to flexible arrays to let
the compiler warn us of any improper use.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,57,1
"thesofproject/sof","fe688ddd5f9311b24a7d7b43d871f123e0d88bfc","lyakh","2022-07-19 09:07:25","false","buffer: remove redundant NULL check

calling_buf cannot be NULL in pipeline_comp_params_neg, don't check.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",115,50,1
"thesofproject/sof","fa209351138bbd56b6a403bb8fdc5b12a7835ea5","dbaluta","2022-08-23 16:12:09","false","lib: alloc: Add missing format specifier

This causes problems when displaying heap traces.

Fixes: b67c2bf0d9732 (""alloc: Making heap trace dump more readable"")
Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",111,51,1
"thesofproject/sof","3e0321f893a7fe3c411cd35e571050c1422a678c","dbaluta","2020-01-22 09:11:18","false","platform: imx8m: Use dma from sof context for domain init

Changes sequence of initialization in platform_init(),
so that DMA scheduling domain can be initialized with the DMA
taken through sof context. This allows for removal of another
externed global variable.

This is similar with commit 9c62ac56eb5a18 (""platform: use dma from sof
context for domain initialization"")

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",78,20,0
"thesofproject/sof","558d9aa24ecf7c7802e973110825d0166fa7b92e","abonislawski","2020-05-18 13:38:17","false","tgl: lps restore vector

This patch will place LPS restore vector before heap lp buffer

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",99,23,0
"thesofproject/sof","05912c563925baf0739479e8c352d269bf80011f","jajanusz","2019-01-30 06:33:30","false","rimage: fix for gcc8.1 -Wstringop-truncation

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",56,8,0
"thesofproject/sof","5e8de9fd52e67d96a57445b279b2b7947505bf6e","bardliao","2020-03-11 07:41:58","false","topology: sof-icl-rt711-rt1308-rt715-hdmi: Merge two pipeline with demux

Now kernel expots one PCM with two CPU dais. So use demux to play
with two DAIs.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",85,21,0
"thesofproject/sof","919b8278836fa2b049903c9c3c13ac29bec1fce5","keyonjie","2021-09-09 10:44:19","false","alloc: add flag _FLAG_COHERENT for buffer allocation

Add a flag SOF_MEM_FLAG_COHERENT for asking of coherent/uncached buffer
allocation usage.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",118,39,0
"thesofproject/sof","2436c97cdbdfbb6b17a34a88ca4d8cc89713372d","slawblauciak","2019-04-29 13:21:42","false","detector: read config from the ipc data during construction of the comp

It is to allow passing of the configuration blob in the payload of
sof_ipc_comp_process IPC.

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",48,11,0
"thesofproject/sof","d4b8fa80dc9fa4596a7241e437e2414f371e0e2d","keyonjie","2021-05-13 02:54:41","false","mux: stop copy if get_stream_index() fail

We should return error if the matching in get_stream_index() fail, add
check in the callers, stop using it and return failure when needed.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",84,35,0
"thesofproject/sof","74d7b54f633e43822afd1799ef33e8d40706adc6","keyonjie","2021-01-07 05:55:45","false","dmic: stop dmic at xrun to avoid interrupt flooding

Once an Xrun happens, only clearing the interrupt can't recover it, stop
the dmic to avoid interrupt flooding.

This will lead to subsequent pipeline Xrun and eventually the pipeline
will be stopped.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",75,31,0
"thesofproject/sof","8a394bb52626c2d3ab551b45091ef0987b888104","brentlu","2022-12-01 03:23:26","false","topology: sof-jsl-rt5682: add sof-jsl-rt5682.tplg

This topology supports JSL boards which implement ALC5682I-VD/VS on
SSP0 port without speaker amplifier.

Signed-off-by: Brent Lu <brent.lu@intel.com>",101,54,1
"thesofproject/sof","767a81bd9fdefec11fde334eb2494498dd299e40","keyonjie","2019-06-13 08:44:10","false","topology: add sof-cml-rt5682-kwd m4 file for cml keyword detect

It is derived from sof-cml-rt5682.m4, keyword detect pipelines added to
it for Keyphrase Detection feature support.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",48,12,0
"thesofproject/sof","7101eef5a234a1b7a60b5ae7390b0a5df0a2ca63","lgirdwood","2018-08-31 12:10:55","true","Merge pull request #288 from singalsu/fix_dmic_alloc_proposal

DMIC: Handle possible null pointers from rzalloc()",27,3,0
"thesofproject/sof","cc3fb1e4b3ad2006a7c1913e4b98e5175a3212fa","lgirdwood","2018-10-11 11:11:31","true","Merge pull request #480 from tlauda/topic/ssp-pm-fix

pm_runtime: fix clock gating for SSP 4 & 5",33,4,0
"thesofproject/sof","ad8b54f095af310cbb7c7315f29df21be19689f9","marc-hb","2023-03-12 03:20:58","false","xtensa-build-zephyr.py: add new PlatformConfig dataclass

Reduces duplication and provides more flexibility.

Also switch the list of platforms to a dict.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",55,57,1
"thesofproject/sof","eb0ef7bb853f58f942b72e8795e96896b22259b5","lyakh","2022-01-10 14:47:43","false","component: convert COMP_TRIGGER_* values to an enum

COMP_TRIGGER_* values are internal to SOF, they aren't a part of an
API, their numeric values are unimportant. Convert them to an enum to
make removing deprecated and adding new values easier.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",116,43,1
"thesofproject/sof","b57bfe2480a17f14dbdf8c7cbed26a2f970c926c","lyakh","2019-01-16 11:55:20","false","init: abort start up upon platform boot failure

platform_boot_complete() informs the host, that the SOF
initialisation has completed successfully. If this fails, the host
will anyway be unable to use the sound card, so we can just panic in
such a case.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,7,0
"thesofproject/sof","b2ee094436e215443408dc4c17550bf2dca1f368","cujomalainey","2021-08-27 21:51:59","false","audio: ghd: remove superfluous initializations

Unused values, save a bit of text and data space by cleaning this up.

Suggested-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>
Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",119,39,0
"thesofproject/sof","825bf798711a11629d86d2defaa2b78b77fe1176","hongshui3000","2021-04-23 07:46:00","false","pcm_converter: Fix architectures not supporting XT_ROUND_S

XT_ROUND_S is available only when you include option of
""Xtensa's single precision FPU option (scalar)"".
IF current DSP includes optional vector FPU (single precision).
FIROUND.S (with appropriate RoundMode state set) followed by
TRUNC.S can be used to emulate Xtensa scalar FPU’s ROUND.S, CEIL.S and
FLOOR.S instructions.""FIROUND.S"", does round, but no scaling.Result
still in float format.Use TRUNC.S to scale it and truncate as necessary.

Signed-off-by: Yang XiaoHua <yangxiaohuamail@gmail.com>",90,35,0
"thesofproject/sof","a2d8987921c0577982f8e36058009ae48a682c36","ranj063","2022-02-25 04:44:00","false","topology2: clean up unnecessary nocodec topology builds

Only TGL is tested right now. So, build only that one.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",110,45,1
"thesofproject/sof","85367b73b9b096242c83af23bed3bdde53ac6751","pblaszko","2023-03-06 12:54:24","false","mtl: add Aria module to build

Add Aria module to MTL build.

Signed-off-by: Przemyslaw Blaszkowski <przemyslaw.blaszkowski@intel.com>",56,57,1
"thesofproject/sof","2de506025f8564dd5421ecee0511b6a51dceadb0","yongzhi1","2020-10-16 19:29:20","false","topology: sdw: Update echo ref channel number on max98373

The topology has two speaker amp configured, with voltage info
feedback-ed to host for each channel in the EchoRef, so update
SMART_REF_CH_NUM accordingly.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",72,28,0
"thesofproject/sof","7aeb252264b760848593ce3e3b201b9b786f13b9","yongzhi1","2020-04-02 20:20:34","false","WIP: topology: sof-jsl-da7219: Add KWD support

Add KWD pipelines with vol-kfpm pipe using intel-generic-dmic-kwd template.

DMIC01 on PCM 5 is renamed to DMIC48kHz, 16K DMIC KWD added on PCM 6.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",77,22,0
"thesofproject/sof","0664718a5896abe1e50191218cb80abb7171ad2d","pblaszko","2022-12-07 11:40:19","false","ipc4: only primary core sends ipc to host

Remove option to immediately send IPC in ipc_send_msg().

In current implementation, secondary core can directly write IPC mailbox
and registers. It may lead to conflict with IPC's that are being send
from queue on primary core.

All IPC responses and notifications should be queued on primary core to
synchronize two types of DSP to host messages between cores.

Changing flow only for IPC4/Zephyr. Leaving XTOS path unchanged.

Signed-off-by: Przemyslaw Blaszkowski <przemyslaw.blaszkowski@intel.com>",102,54,1
"thesofproject/sof","52c1174c1847f0d21fa09afa4332d690085ae621","yongzhi1","2020-02-14 16:50:46","false","topology: Add jsl+ tplg for RT1015 amp and ALC5682 Headset codec

The topology is cloned from sof-tgl-max98357a-rt5682.m4 with
changes on ssp config, iDisp and DMIC pipeline pcm number etc.

The dai_index matches the order defined in sof-rt5682.c machine driver.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",84,20,0
"thesofproject/sof","73cd960e0ed4d0594dd3a974bec816d261b1fc14","aborisovich","2023-06-23 14:54:33","false","west.yml: upgrade Zephyr revision - update IPC4 ipc_platform_send_msg

During last changes in Zephyr that implemented power transition for the
IPC Device, signature of the intel_adsp_ipc_send_message had changed
and now returns negative int error codes (previously bool on success).
Updated single function reference in SOF ipc_platform_send_msg().
Implementation had not changed as the function may return only
-EBUSY error code until the Zephyr Device Power Management option
is disabled.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",42,61,1
"thesofproject/sof","837f7715f27b4056cc6d35e121978363923f4a5b","tmleman","2023-09-06 13:34:39","false","ace: clock: update clock definitions

ACE_1.5 and ACE_2.0 use only two clocks for DSP cores. First is WOVRCO and
second is ACE IPLL.

IPLL allows to configure it to work like LP RING Oscillator Clock or HP
RING Oscillator Clock. Currently, the driver does not allow this, so I
remove the frequency that cannot be achieved anyway.

Clocks frequencies:
WOV: 38.4 MHz
IPLL: 393.216 MHz

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",21,63,1
"thesofproject/sof","b1c9e858969bf022b0b3f908ca5539548405934e","marc-hb","2021-07-06 03:45:16","false","zephyr_ll.c: declare missing ll_tr trace context

Commit a439ea93f64f (""zephyr: ll-schedule: switch over to a simplified
implementation"") replaced ll_schedule.c with zephyr_ll.c when compiling
with Zephyr. So the struct tr_ctx named ""ll_tr"" is now missing. Declare
it in ll_schedule.c too.

No one noticed that ll_tr was missing because the DMA trace does not
work in Zephyr and the main branch yet.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",84,37,0
"thesofproject/sof","d70ac67032ffd1bc561454db26b1a3365bc5aac2","marc-hb","2022-11-21 23:55:52","false","parse_sparse_output.sh: ignore skipped topology2 error

Off-topic here.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",96,54,1
"thesofproject/sof","22c013a38198de393eb035ef9edaf5d344b65370","maruthi-machani","2023-05-10 09:56:17","false","platform:amd:increase runtime memory for simultaneous usecases

increase runtime memory for simultaneous usecases

Signed-off-by: MARUTHI MACHANI <maruthi.machani@amd.com>",53,59,1
"thesofproject/sof","f108cfeafe7ce86ad81474bfe582a985263a7c37","marc-hb","2021-06-28 05:12:49","false","Add alternative, more reliable STATIC_ASSERT() disabled by default

Does not silently succeeds when passed variables. Not enabled by default
in the unlikely case it wastes memory with some compiler and/or compiler
flags.

Issue found while testing tracing mismatch #4388

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",76,37,0
"thesofproject/sof","ffc14323f3df78a113cbcec681acbe9f61a40f35","lyakh","2019-03-18 14:28:22","false","interrupt: add a macro to distinguish DSP interrupts

Until now cavs/interrupt.c used to call interrupt_get_parent() where
it had to verify whether an interrupt was a DSP interrupt or a
cascaded one. That function is rather heavy - it takes a spin-lock,
scans a list of all cascading interrupt controllers and checks their
interrupt numbers. Whereas that check can be performed much easier
and faster by simply checking the ""level"" field of the IRQ token.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",65,9,0
"thesofproject/sof","09386bc0d978d0f3d18d7c4991869e7da1885c95","marc-hb","2022-12-08 07:09:25","false","Revert ""xtensa-build-zephyr.py: west update --depth 5 --narrow""

This reverts commit ce28e09bd33e75b3e4665c7181fae0de8c6459d7.

This fixes Zephyr's git describe command and build reproducibility.

I tried fairly hard various git fetch options like --shallow-exclude
and --shallow-since but they did not save that much download (200MB at
best), required some hardcoding and most importantly they make complete
clones shallow again when invoked unconditionally. Not worth the
effort, build reproducibility is more important.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",101,54,1
"thesofproject/sof","65bba02ad6557b9f11a23bd9ceb00c25c7a7bff9","plbossart","2021-09-28 16:45:11","false","mediatek: mt8195: afe-drv: remove redundant initialization

cppcheck warning:

Checking src/drivers/mediatek/mt8195/afe-drv.c ...
src/drivers/mediatek/mt8195/afe-drv.c:245:6: style: Redundant
initialization for 'dai'. The initialized value is overwritten before
it is read. [redundantInitialization]
 dai = &afe->dais[id];
     ^
src/drivers/mediatek/mt8195/afe-drv.c:235:31: note: dai is initialized
 struct mtk_base_afe_dai *dai = &afe->dais[id];
                              ^
src/drivers/mediatek/mt8195/afe-drv.c:245:6: note: dai is overwritten
 dai = &afe->dais[id];
     ^
src/drivers/mediatek/mt8195/afe-drv.c:269:6: style: Redundant
initialization for 'dai'. The initialized value is overwritten before
it is read. [redundantInitialization]
 dai = &afe->dais[id];
     ^
src/drivers/mediatek/mt8195/afe-drv.c:259:31: note: dai is initialized
 struct mtk_base_afe_dai *dai = &afe->dais[id];
                              ^
src/drivers/mediatek/mt8195/afe-drv.c:269:6: note: dai is overwritten
 dai = &afe->dais[id];
     ^

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",120,40,0
"thesofproject/sof","137c0bfc77366abe5b0b71dc628c03323e09d819","lrgirdwo","2023-08-30 23:01:09","false","host: remove XTOS prefix from headers

And add the POSIX prefix.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",25,63,1
"thesofproject/sof","f3ec2e590a1e99c6574883bac3095d01e52f473c","plbossart","2022-05-16 17:13:01","false","topology1: soundwire: use dynamic pipelines in kernel-dependent cases

We've never enabled dynamic pipelines for SoundWire CI, it's high time
we did so.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",114,47,1
"thesofproject/sof","df028c085048073bd79bab8869affb49a951703b","lrgirdwo","2018-11-13 21:22:28","false","ipc: trace: Improve trace output on APL.

Improve the trace output on APL IPC.
TODO roll out to other platforms.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",38,5,0
"thesofproject/sof","90831338ad78ca766adb322a4718287de47bbe8f","dbaluta","2021-03-02 18:03:25","false","codec_adapter: cadence: Save initialization status to codec_processing_data

We need to save initialization status to a persistent (between calls)
variable in order to check it each time we want to do processing.

Initialization only takes place once before first frames are decoded.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",73,33,0
"thesofproject/sof","f3e9f73e960d44af5f8e299cad9f17c64c47ee5f","btian1","2023-05-17 07:18:21","false","copier-dai: add copier_dai_free in copier dai file

Add this function in copier_dai source file, in order to
keep same usage, there is no need to inline this function,
althrough it is short.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",51,59,1
"thesofproject/sof","b8954754f055c914d8fcaaf71f429418998ca51c","balakishorepati","2022-02-09 07:44:38","false","amd: renoir: clk: Fix ACP clock to default clock

Fix ACP clocks to default clock during boot up time.

Signed-off-by: balapati <balakishore.pati@amd.com>",108,44,1
"thesofproject/sof","ff5c10337f01f2be6b2dbbb8adb74d7cfaff48c4","RanderWang","2023-03-03 08:28:59","false","topology2: add google rtc aec module support

Goolge rtc aec only supports 16bits input & output and 2 channels

Signed-off-by: Rander Wang <rander.wang@intel.com>",59,57,1
"thesofproject/sof","f0fd4e1a45149c5cb89368b5d5fb7f143c57e49a","RanderWang","2022-01-25 06:12:56","false","ipc4: fix index issue for alh on windows

The node id in copier config is built with group id
and codec id, we need to convert it to sof dai id.

Validated on windows

Signed-off-by: Rander Wang <rander.wang@intel.com>",107,44,1
"thesofproject/sof","cc16d6d8247f0c037cb5ff5b10a945659c00baad","jajanusz","2019-02-03 02:37:38","false","scripts: update build-tools.sh for cmake

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",57,8,0
"thesofproject/sof","2615914122cdcc353557fc15c2f7e65d8e82c0a4","jajanusz","2018-11-16 13:49:00","false","dai: dmic: fix 16 bit capture

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",40,5,0
"thesofproject/sof","763ed6d02b3b129433bb4890daf72e9d463f16af","singalsu","2023-09-07 14:40:45","false","Audio: Convert Google RTC audio processing to module API

This patch converts the component to module API. The changes are:
- google_rtc_audio_processing_params() is changed to update
  sources and sink params from IPC4 init IPC. It's not used for
  IPC3 where module adapter handles params().
- The commands handling is fixed to handle via module adapter
  the IPC3 and IPC4 commands.
- The google_rtc_audio_processing_init() is updated to simpler
  module adapter client way.
- The google_rtc_audio_processing_prepare() is updated to set
  buffers parameters for IPC4 and find sources buffers for
  microphone and reference by index instead of buffer pointer.
  That simplifies the processing function with module adapter.
- The google_rtc_audio_processing_process() is updated from copy()
  to module adapter client way.
- google_rtc_audio_processing_get_attribute() is removed
- As overall change dev handle is changed to mod handle in nearly
  all functions.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",22,63,1
"thesofproject/sof","5de6d098d7e9ef4ccf98ff6d3579942f5aeef799","marcinszkudlinski","2023-08-24 13:27:30","false","Revert ""topology2: change the sample type for Linux audio system""

This reverts commit 196f86cde45118eeca84fac926d2f6a9ac6d7191.",26,63,1
"thesofproject/sof","8c497439bc66a1a6164ed79780564f302c49cf1b","singalsu","2021-04-16 15:53:08","false","Add GET_BIT() and GET_BITS() macros to bit.h

These macros are useful for decoding bit fields.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",82,34,0
"thesofproject/sof","2fbbdb032c127cb0f90fcfc9b9f0879be0009c95","rfredzim","2022-05-06 11:26:02","false","ipc: separate ipc3 and ipc4 header

The current IPC4 protocol implementation is not standalone but
but builds up on top of IPC3 which is used throughout SOF core.
The sof/ipc/common.h holds definitions which are related to
component interface and not IPC ABI specific so it's not a
suitable spot to keep IPC3 or IPC4 specific definitions.
This patch fixes the hierarchy of IPC4/IPC3 to match reality and
moves the ABI specific definitions of ipc_cmd_hdr to a suitable spot.

Signed-off-by: Rafal Redzimski <rafal.f.redzimski@intel.com>",115,47,1
"thesofproject/sof","32fe8a4b81bb4e3111814e5fba305fee5fb4bae3","marc-hb","2021-01-15 02:43:36","false","common.h: restore basic ALIGN() macro compatible with assembly

commit 39266cac81f4 (""core: assure alignment is only done on power of 2
values"") changed the alignment macros, they now use C code to perform a
sanity check. This broke ALIGN() usage in
platform/suecreek/include/platform/lib/memory.h in two different ways:

1. it broke static initializers in platform/suecreek/base_module.c
because these can't use statement-expressions. This could have been
fixed by simply switching to ALIGN_UP_COMPILE(), BUT:

2. memory.h files are also included in assembly.

Also note memory.h values are copied unprocessed to linker scripts that
require the ALIGN() spelling.

For these reasons ALIGN() needs to be switched back to a ""dumb"" macro.

Preserve the sanity checks just added in alloc.c and pm_memory.c by
switching them to the new and smarter ALIGN_UP() macro.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",70,31,0
"thesofproject/sof","9005c90f3c82d0f3be6843bfb0e71f6d89244b9f","marc-hb","2021-12-17 01:04:12","false","cmocka: make test-all-defconfigs.h runnable from anywhere

Make test-all-defconfigs.h runnable from anywhere by merely adding a
cmake -S option.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,42,1
"thesofproject/sof","7d2f621f36dbfa45c705d15aaaaf1cb81879723c","iuliana-prodan","2021-05-19 12:48:01","false","zephyr: imx: use zephyr utilities when enabled

Use the Zephyr sys/util.h when Zephyr RTOS is used.

While here, remove sof/lib/cpu.h which is not used.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",86,35,0
"thesofproject/sof","93c63bd34080cfd385cea6eea553d2fec74f41c8","dbaluta","2023-10-16 12:25:39","false","drivers: sdma: Add sdma script code in header file

For ease of use add sdma script code directly in the sdma
header file.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",9,64,1
"thesofproject/sof","457465fa1582a8e9b6b9eb62419db1d4b6c4e836","RanderWang","2021-07-19 05:14:53","false","ipc4: ssp: add ssp blob support

Ssp setting can be generated offline by tools and sent
to fw by driver in memory blob. Fw decodes this blob and
set hw registers accordring to blob configuration. This
patch add support to this type of ssp configuration.

Signed-off-by: Rander Wang <rander.wang@intel.com>",90,38,0
"thesofproject/sof","73aeccc6adcb86b35e9189daa3d58b55c83217c7","RanderWang","2022-09-22 01:45:59","false","topology2: nocodec: add deep buffer support

Deep buffer is mixed with ssp0 stream.

Signed-off-by: Rander Wang <rander.wang@intel.com>",96,52,1
"thesofproject/sof","452a699042af0fdf4080b91c2f169c4f23f64d01","balakishorepati","2021-05-26 05:50:41","false","platform: Add support for amd renoir platform

This adds support for platform drivers (dai, dma, clk)
and general platform initialization.

Signed-off-by: Basavaraj Hiregoudar <basavaraj.hiregoudar@amd.com>
Signed-off-by: Anup Kulkarni <anup.kulkarni@amd.com>
Signed-off-by: balapati <balakishore.pati@amd.com>",84,36,0
"thesofproject/sof","8633d5fd6d3ac36f01f48524d249647555d22c0b","kv2019i","2021-06-29 12:38:17","false","cavs: pm: improve PM_RUNTIME_HOST_DMA_L1 documentation

Reword doxygen comments and change the private helper function
names to better reflect the actual implementation. No functional
change.

The PM_RUNTIME_HOST_DMA_L1 resource is used to coordinate host DMA
users, so that DMI link is kept in L1 until all users are ready to
activate the link. This is a bit unusual usage of runtime-pm interface
in that a 'put on a resource' triggers transition to higher power state,
so this deserves some more documentation.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",86,37,0
"thesofproject/sof","bb18f62b540817ed6000b5da5355fa0c094ddc6c","bardliao","2021-07-22 09:26:26","false","topology2: copier: add ALH type

ALH is a valid type of copier.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",96,38,0
"thesofproject/sof","40454099b0f5b14345ca2fe44cea4c34dd69daeb","bardliao","2020-03-11 07:19:00","false","topology: pipe-volume-demux-playback: Move demux after volume

So the volume control will apply to both pipelines.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",85,21,0
"thesofproject/sof","ac27df9e7032723250ef098f618cfeedf2a48186","tlauda","2019-10-15 09:47:14","false","topology: sof-cml-demux-rt5682: fix SSP index for CML

Builds CML demux topology with the correct SSP index.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,16,0
"thesofproject/sof","4aee58f6cba91fb4c2dae0e8084b964925851b79","tlauda","2019-03-21 09:16:42","false","trace: fix DMA setting for traces

Fixes DMA setting for traces transferred using
DW-DMA. They are currently using IRQ mode.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,10,0
"thesofproject/sof","d3ca5cb1c0e11f057fd88c296c4386597d275e72","tlauda","2019-10-16 11:35:07","false","platform: remove unused PLATFORM_HOST_FINISH_DELAY

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,16,0
"thesofproject/sof","a64f6029f14db9c37440a03ff56c3febac57f80b","tlauda","2020-01-08 14:34:48","false","dma: pass sof context to dmac_init

Changes dmac_init function's argument list to take
sof context. It will be needed to add dma list pointer
into sof context.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",71,19,0
"thesofproject/sof","d9de74b231d47dd44a8680787e3f089628390569","singalsu","2020-05-11 16:27:27","false","Tools: Tune: Add TDFB configuration tool

This patch adds the tool for creating beamformer configurations. The
microphone array geometry and beam angle (azimuth, elevation) need
to be specified. See the example scripts and sample array helper
functions.

The FIR blob quantize function needed a minor change to prevent strip
of trailing zero coefficients. The beamformer filter bank needs to use
equal length filters.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",96,23,0
"thesofproject/sof","e3d68ecd8914d486429e64908a71e04ca56a114e","singalsu","2018-09-17 13:48:31","false","EQ Tool: Output topology m4 binary control style configuration data

This patch adds export function for the m4 syntax bytes data and adds
the export of such blob to example designs. The example EQ designs are
edited to make this format export too.

In addition the example FIR length is adjusted to be near current IPC
length maximum (384) and improve the effect quality.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",43,4,0
"thesofproject/sof","63598ee054bbda73a053cca0f9da49de5ee0f267","singalsu","2023-02-14 12:41:26","false","Tools: Tune: EQ: Use updated sof-ctl for tplg2 blob export

No more need for hard-coded blob header, sof-ctl provides
an up-to-date header so better to use it.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",55,56,1
"thesofproject/sof","a0ff2bb27714e27b16927ca92952fcffac529068","singalsu","2022-04-21 13:58:27","false","Tools: Tune: SRC: Allow pass of desired gain to src_generate()

There's need to have a 0 dB gain SRC conversion matrix while
earlier all defaulted to -1 dB. With this change the parameter
cfg.gain can be used with src_generate() function.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",114,47,1
"thesofproject/sof","398ddbd3f74357f8328a8b1c70019df62d8adf2b","cujomalainey","2021-04-13 22:00:08","false","ipc3: avoid variable shadowing

we have a function called ipc_cmd, so lets not name any variables the
same name.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",81,34,0
"thesofproject/sof","09703d33f6c17257a563e4ff016a54ae240207fc","cujomalainey","2021-08-26 23:28:41","false","dmic_nhlt: fix uninitialized value

cppcheck error

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",119,39,0
"thesofproject/sof","833cb76175a079c3e5b78aa6334a3690c20e41ad","singalsu","2019-02-11 15:47:29","false","DMIC: Add Kconfig options to reduce driver tables size

This patch adds three configuration profiles DMIC_FIR_LOW_MEMORY,
DMIC_FIR_FULL, and DMIC_FIR_CUSTOM.

The first is recommended for systems with need for only 48 kHz
and 16 kHz sample rates support with default 2.4 MHz microphone
clock. It can work with some other configurations also but if
driver rejects are seen for desired parameters the full or custom
configuration should be used.

The full configuration includes all defined FIR coefficients for
all supported decimation factors to support several rates between
8 - 96 kHz.

Custom set allows to select all decimation factors separately.

The rename of CONFIG_DMIC to CONFIG_CAVS_DMIC caused update need
to platform defconfig files and memory configuration header files.
There are no other changes but the macro rename for them.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",59,8,0
"thesofproject/sof","105dd406c6ecee3c674fa775afc866af8fbf1b3a","lgirdwood","2018-11-22 14:16:06","true","Merge pull request #614 from tlauda/topic/fix-alloc-free

alloc: fix freeing of uncached pointers",39,6,0
"thesofproject/sof","2593efb82b008a48bb63b12e3f0bb2ab155c2531","mrajwa","2019-04-15 10:47:58","false","memory: add LPSRAM status and control registers

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,10,0
"thesofproject/sof","2def0b7157594a80314ef6c65907cd8616bd0fa2","ranj063","2022-03-23 22:26:08","false","codec_adapter: rename codec_adapter_copy()

to module_adapter_copy(). No functional changes.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",109,46,1
"thesofproject/sof","902662dc0b7fd6acd137d45390cdd770eb7b2442","lgirdwood","2018-09-21 13:27:02","true","Merge pull request #402 from tlauda/topic/idc_task

idc: process IDC message as task",35,4,0
"thesofproject/sof","7e471ce18d345cd010cc3cf2f3ee858d44ef3920","johnylin76","2021-03-30 10:59:33","false","drc: hifi3 implementation for DRC mathematics

Implemented log, asin, lin2db, and inv functions with hifi3 library in
drc_math.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",79,34,0
"thesofproject/sof","7c85be8b3c69f2164029baf004d046fae2cf0e43","andrula-song","2023-06-07 01:52:03","false","Audio: Volume: Add passthrough functions

Add passthrough functions implementation. If the gain of all
channels equal 0dB, then we use passthrough functions to process
the volume component.

Signed-off-by: Andrula Song <andrula.song@intel.com>",45,60,1
"thesofproject/sof","c65336f8f7a194f99e1304eeacd86ded25a8d13e","xiulipan","2020-12-04 04:10:50","false","config: intel: set different fw_name for tglh

To support TGL-H build with different binary name, set
CONFIG_RIMAGE_SIGNING_SCHEMA to tgl-h to make sure
output file name matches requirement from Linux driver

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",71,30,0
"thesofproject/sof","8bcfd6fa208e53e34e10d2f756e8b88e9ada4f96","ranj063","2022-01-11 17:44:11","false","module_interface: Introduce 2 new structures

Introduce 2 new structures to represent the input and output stream
buffers. These will be passed as inputs to the process API.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,43,1
"thesofproject/sof","a9b9d85b7a279353827be3eff9f29170beaf2d2d","makarukp","2023-02-21 13:43:23","false","ipc4: add resource event notification structures

Provide unified structure for events that may be raised by identifiable
entity from inside the FW(like a module instance identifiable by module
instance ID or a pipeline identifiable by pipeline ID). All enums are
aligned with ipc4 protocol. Receiver of such notification is host.

Signed-off-by: Piotr Makaruk <piotr.makaruk@intel.com>",56,57,1
"thesofproject/sof","acff9049f219e51d322d427ec495265c090cfbd7","ranj063","2022-02-22 20:40:21","false","topology2: intel:dmic-generic: fix dma_buffer_size

It should be based on ibs but works today because ibs and obs are the
same.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",106,45,1
"thesofproject/sof","897f5167fa5b330bcbfb8e6097ec4841fbfda7d5","btian1","2023-08-15 03:32:21","false","audio: dai: fix the error reported by CI after enable inline

after enable inline build option, CI build is reporting not
initialize this structure, init it to remove the error.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",27,62,1
"thesofproject/sof","357e47c49c6d3f67b0e472578aa4590633aeeb63","tlauda","2019-07-01 12:49:40","false","buffer: improve traces

Improves traces for comp_update_buffer_produce
and comp_update_buffer_consume functions. Now
we will be able to easy identify failing components.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",42,13,0
"thesofproject/sof","27a3db1e04ed06ec55ab54854b9fe8e69c5966be","tlauda","2018-07-13 13:36:39","false","hda-dma: wait for L1 exit instead of buffer full

Changes waiting condition for Host Output DMA start.
Let's wait for L1 exit instead of buffer full.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",13,1,0
"thesofproject/sof","3ffc2eb3085789a85653ba46a58bcb1eb2a9d811","tlauda","2019-03-22 09:11:10","false","eq_iir: fix dest_size in memcpy_s calls

Fixes dest_size in couple of memcpy_s calls.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",65,10,0
"thesofproject/sof","71413cb0050c16e4926c627bd457644e9045e568","lgirdwood","2018-07-09 21:54:38","true","Merge pull request #72 from RanderWang/ipc_overflow

trace: Refine trace function in irq function",13,1,0
"thesofproject/sof","7aa627a10a84ea86f41bb16ce82f91c5f9c024ee","lgirdwood","2018-10-02 09:19:22","true","Merge pull request #440 from mmaka1/dai-cleanup

dai: simple i/f to control flow between platform and lib",34,4,0
"thesofproject/sof","dcc4119ae2a1b4ce5ed21382e5959b41a61ea85e","mrajwa","2019-06-12 21:09:24","false","shim: add LSPGCTL register relative offset

To be able to use register read interfaces like shim_read()
we need to specify offset. This patch adds such offset for
LSPGCTL register.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",48,12,0
"thesofproject/sof","5f61594eb041e15ed0d0a9a101f6500b149da71c","mrajwa","2019-04-09 11:44:17","false","KPB: check if history buffer has enough data

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",48,10,0
"thesofproject/sof","7a445b8b38b3651dd86a09c0a59e4f8346a849cb","iuliana-prodan","2023-04-28 02:12:29","false","hal: Update parameter type to match xtensa/hal.h

Update parameter type for _xt_atomic_compare_exchange_4()
to match xthal_compare_and_set() from xtensa/hal.h

This fixes ""error: passing argument 1 of
'xthal_compare_and_set' from incompatible pointer type""

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",52,59,1
"thesofproject/sof","8c7adfcc5a451000d2863b6bdf4df4bd7aa94abe","cujomalainey","2022-04-06 05:08:58","false","config: add overwrite config for AEC+NC build

Disables all not needed components for binary build size reduction

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>
Signed-off-by: Pin-chih Lin <johnylin@google.com>",110,46,1
"thesofproject/sof","74a0e0f1fe99d7f5454f02c9fe0541e2d2f5a442","cujomalainey","2023-07-13 19:54:27","false","audio: waves: add maxx stub

Add a stub for the Waves library for the fuzzer to build against. This
will also improve build tests in CI.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",32,61,1
"thesofproject/sof","32b213f271f7259c86c10ce2db2657568fb4ce96","lyakh","2021-11-24 13:09:23","false","pipeline: move parts of the pipeline API to pipeline.h

struct pipeline_task and pipeline_task_get() belong to the pipeline
API, not to the scheduler API. Move them to pipeline.h

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",129,42,1
"thesofproject/sof","c15c43e9fe3412f3b6f8f626629b79d2236305bb","lyakh","2021-05-17 08:31:53","false","clock: add a function to convert microseconds to ticks

Several code paths use the existing clock_ms_to_ticks() function in
some not ideal ways, potentially leading to computation overhead or
to precision loss. The function is often called to calculate ticks
for 1 millisecond, which then is recalculated to the required time
interval. It's better to let the function calculate the number of
ticks for the required time interval directly. E.g. instead of
clock_ms_to_ticks(PLATFORM_DEFAULT_CLOCK, 1) * milliseconds
it's better to call
clock_ms_to_ticks(PLATFORM_DEFAULT_CLOCK, milliseconds)
directly. For microseconds however replacing
clock_ms_to_ticks(PLATFORM_DEFAULT_CLOCK, 1) * microseconds / 1000
with
clock_ms_to_ticks(PLATFORM_DEFAULT_CLOCK, microseconds / 1000)
can lead to a loss of precision. To avoid that a new function
clock_us_to_ticks() is added.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",86,35,0
"thesofproject/sof","3094f51aa59cca748f85d3acc9d5e3c040f9ce97","lyakh","2020-03-24 17:09:56","false","pipeline: support concurrent streaming and topology growth

With virtualised clients it can happen, that while one client is
performing audio streaming over a pipeline, another client is adding
components to a new pipeline, that later will be connected to the one
in use. This can happen, e.g. when streaming is taking place on the
host and a guest VM is booting. To support this we need to ignore
newly added but not yet finalised components while traversing
pipelines. Components are in this states after they have been
connected but before the respective pipeline has been finalised, i.e.
before SOF_IPC_TPLG_PIPE_COMPLETE has been issued for it.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",64,22,0
"thesofproject/sof","327a26bf8ad70113f1eda933e5a53df175bc8e95","marc-hb","2022-12-20 22:11:17","false","logger: make ""global_config"" truly global

Finish the job that commit 5b29dae9c870 (""logger: Create global
convert_config variable to avoid spaghetti code."") started but did not
finish, leaving behind a supposedly ""global"" variable that is actually a
confusing global pointer to a struct local to the main() function.

This confuses some static analyzer complaining that stack values are
being returned, see #6858 and #6738. This is a false positive
because the main()'s stack lifespan is the same as a global but let's
simplify things anyway.

Also stop using 'extern' in .c files, use a proper .h file instead.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",90,55,1
"thesofproject/sof","16975ced60b382031fc01622f9a2734d28124f9e","kuanhsuncheng","2021-08-27 08:29:51","false","topology1: add sof-mt8195-mt6359-rt1019-rt5682.m4

Add sof-mt8195-mt6359-rt1019-rt5682.m4 for mt8195

Signed-off-by: YC Hung <yc.hung@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",119,39,0
"thesofproject/sof","9ae018b9fab0160173b3e5edad5a8dd0cf7a9fe3","fuyuntsuo","2021-05-25 07:50:54","false","topology: max98373-rt5682: define dmic 48k core id

Define DMIC_PIPELINE_48k_CORE to assign dmic 48k pipeline core id.

For sof-tgl-max98373-rt5682 platform, it is necessary to offload

dmic 48k pipeline to core 1 of TGL because igo_nr takes high MCPS.

Signed-off-by: fy.tsuo <fy.tsuo@intelli-go.com>",83,36,0
"thesofproject/sof","ea5d9be6a0c3087f3f026c41c381102204f57e05","fuyuntsuo","2021-05-07 15:59:17","false","audio: igo_nr: Added LICENSE file.

Added legal license file for igo_nr feature.

Signed-off-by: fy.tsuo <fy.tsuo@intelli-go.com>",80,35,0
"thesofproject/sof","14474447d41e2dfd3879a16fe2fa6f3dee041509","libinyang","2022-12-11 12:08:06","false","topology2: cavs-nocodec add wov support

Add the definitions of wov in cavs-nocodec.conf.

Signed-off-by: Libin Yang <libin.yang@intel.com>",103,54,1
"thesofproject/sof","b456e36c9af0fca4ca336bb56bee19c28d1e8ea7","fuyuntsuo","2021-05-24 14:49:37","false","audio: igo_nr: pass through all the other channels

The component handled the first channel and ignored others previously.
Now it processes the first channel and pass though all the others.

Signed-off-by: fy.tsuo <fy.tsuo@intelli-go.com>",83,36,0
"thesofproject/sof","99eac8de991d84dcf1a93f0349bb69169ac8d30e","RanderWang","2022-04-27 07:21:11","false","ipc4: add format conversion support of s32le to s24le

In ci test a format conversion of S32_LE to
S24_LE is required.

Validated in CI system.

Signed-off-by: Rander Wang <rander.wang@intel.com>",115,47,1
"thesofproject/sof","10fcb2036d3ee72a5bbc14dd3c2ff00f45a7e5ed","bkokoszx","2018-08-20 13:28:36","false","drivers: apl-ssp: refinement in DSP_A and I2S mode.

In order to get one bclk delay between frame sync and
data I only set FSRT flag in sspsp register. There is
no need to set SSPSP_STRDLY bits.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",18,3,0
"thesofproject/sof","2e3f1409450b6345d2eba6f0e083fc98fb882ac3","bkokoszx","2019-04-26 06:46:41","false","volume: trace: volume_ctrl_get_cmd() traces fix

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",48,11,0
"thesofproject/sof","375f84473f2e2b57d72ad91454b0832b110ed3ff","bkokoszx","2020-08-07 08:09:51","false","eq: updates set/get cmd handling with generic implementation

This commit reverts eq fir and iir set/cmd actual implementations
and makes them use generic component data blob functions.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",78,26,0
"thesofproject/sof","529d593454f2e340a1bc61088b97cbb83bd72128","kv2019i","2022-10-05 09:12:34","false","zephyr: app: increase log size to 4096 bytes

Set CONFIG_LOG_BUFFER_SIZE=4096 for all SOF builds.

As SOF uses DEFERRED mode for logging, the frontend buffer for
logs must be large enough to cover all typical burts of messages.

Tests using CONFIG_LOG_MEM_UTILIZATION debugging infrastructure,
show that maximum buffer usage is over 2048 bytes in typical
sof-test run on a SOF nocodec topology, tested on Intel TGL
hardware.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",98,52,1
"thesofproject/sof","f2bfa2824e6640723fa12aa3bcfbc9bb596822b2","kv2019i","2022-08-04 11:03:35","false","topology: add sof-rpl-rt711 and sof-rpl-rt711-4ch topologies

Add new topologies for Intel Raptor Lake.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",111,50,1
"thesofproject/sof","03057d17cd4db68d47a4953a3c35fa7198de8942","bkokoszx","2019-06-25 08:32:57","false","host: add copy_bytes alignment in host_buffer_cb()

Amount of bytes we copied by host component should be
align to minimal possible chunk of data that can be
copied by hda-dma. In other case there is possibility of
occurrence mismatch between amount data we really copied
and buffer read and write pointers.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",46,13,0
"thesofproject/sof","f5de034636a3e94d6610788e848b5bc804ac2dbb","singalsu","2020-11-09 18:54:22","false","Drivers: DMIC: Make FIR decimation factor preference order configurable

This patch changes the logic in function select_mode() to use
the defined FIR decimation filters as order of preference for
FIR decimation factors. The earlier logic was simply to select the
lowest decimation factor. It can be used to e.g. prefer decimation
factor 6 over 5 when both are possible.

The driver mode select behavior is not yet changed in this patch. The
filters are presented in increasing decimation factor order in the
header file. The preference order is changed in other patch.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",76,29,0
"thesofproject/sof","e081ba8e014df0e5b419aa05e09813960363d83d","singalsu","2020-05-13 10:20:43","false","Tools: Topology: Set FIR EQ control max size to 4096 bytes

The FIR bytes control size is 4096 bytes. This topology contained the
old 304 bytes size that was the limit for single IPC configuration.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",96,23,0
"thesofproject/sof","beb061014892e475b28b171d78ecee187c239bdc","singalsu","2021-11-30 15:35:59","false","Math: IIR: Move IIR DF2T initialize helpers to library

The DF2T IIR core has been moved earlier to library but the
helper functions for configuring it were left to EQ component.
This patch eases use of IIR core from other components. The
file src/audio/eq_iir/iir.c is moved to src/math. There are no
changes except of remove iir.h since the contents specific
for DF2T type were merged to iir_df2t.h

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",131,42,1
"thesofproject/sof","0725ce85418625e2821b8b1a02179f4f073deaea","marcinszkudlinski","2023-09-06 12:46:43","false","sparse: remove __sparse annotations from various places

Prev commit removing __sparse was a pure editor action,
this commit is removing some other __sparse annotations and
mappings that must have been done manually

This commit contains ""safe"" changes only

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",21,63,1
"thesofproject/sof","e31f9ee7e600e1a6a4a2c72aecd88714fbe2a35e","btian1","2023-03-20 05:37:31","false","copier: correct host processed data in copier

This patch followed with #7210, copier also need change to
get correct processed data.

More changes are done due to below reason:
bsource_buffer is assigned in create host/dai/gtw, however, host/dai
part are removing this flag, so this flag is no longer valid.
Also, cd->endpoint_num currently are always 1, and stream_no always 0.
Remove this contion check also.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",55,58,1
"thesofproject/sof","5a1078d29356425ad93040cb6c43e69b9eceaeb8","ktrzcinx","2020-12-21 08:32:59","false","ext_man: Remove dictionary elements counter from ABI for ext_man_cavs_config_data

This value shouldn't be included in any ABI header, because it may
vary between firmware configurations.
This change makes header file more similar to version provided by kernel.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",72,31,0
"thesofproject/sof","095e3ac8ae2a878e993a57fb6c4d1e7af392973b","ktrzcinx","2020-10-06 10:44:36","false","ipc: Remove probe_support from mailbox

This information is already provided by extended manifest,
so there is no need to double it in runtime code.
It allows to save 28 bytes from .DATA and  128 bytes from .TEXT
for cnl platform.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",66,28,0
"thesofproject/sof","f4982cc84a53bf1b830bb16dd48e3eb316eef98d","ktrzcinx","2020-06-29 12:38:06","false","ipc: Log information about pm gate

Bugs in power managements, may have implications in many places
in code, so each change should be notified.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",72,25,0
"thesofproject/sof","d1553e9321a954e597b82dbe91f9387836685020","balakishorepati","2021-07-26 11:36:32","false","config: add rn toml file to support renoir build

Add rn toml file to support sof-rn.ri binary build

Signed-off-by: Basavaraj Hiregoudar <basavaraj.hiregoudar@amd.com>
Signed-off-by: Anup Kulkarni <anup.kulkarni@amd.com>
Signed-off-by: balapati <balakishore.pati@amd.com>",100,38,0
"thesofproject/sof","648345065a811cea429ba6350ca0ca5a8045bbce","bkokoszx","2019-03-12 07:51:23","false","scheduler: add new generic scheduler api

This commit:
1. Renames specific schedulers:
	- schedule (.c/.h) -> edf_schedule (.c/.h)
	- work (.c/.h) -> ll_schedule (.c/.h)
2. Implements new generic scheduler api based on generic
   struct with scheduler ops. Every specific
   scheduler exports struct with pointers to its
   specific functions.
3. Makes edf and ll using generic api (exports structure
   with pointers to its own specific functions)
4. Updates host and pipeline tests due to scheduler
   changes.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",67,9,0
"thesofproject/sof","b9652365298a184ab96dbd946c3e9933fc4aaee0","kv2019i","2022-08-29 16:11:40","false","west: update to newer Zephyr baseline

Update zephyr to commit dcda3eab8df7 (""tests: net: socket: tcp: move to
new ztest API"").

Needed to bring in support for Intel mtrace logging backend.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",112,51,1
"thesofproject/sof","654bde83ebe982348010d5f83a3ab321bc9f9546","kv2019i","2023-01-17 14:15:50","false","cavs: dma: increase HDA DMA period count to 4

Align HDA DMA platform period count with value used on Intel ACE
platforms. This only affects operation with native Zephyr DMA
drivers.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",55,55,1
"thesofproject/sof","9dfd2bd493e783bd93a2e12e4348fce30bf4a493","kv2019i","2021-10-04 11:34:15","false","topology: intel: use 38.4Mhz MCLK for all Bluetooth use-cases

Updated guidance for BT hardware is to use 38.4Mhz MCLK for both
SCO and A2DP mode. This applies for all Intel platforms supporting
Bluetooth offload.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",122,40,1
"thesofproject/sof","a9cb19ada34fdcb4ce40aa0bdfbb9eaaf5eda66d","kv2019i","2019-03-27 16:44:23","false","topology: add param check to PIPELINE_*() macros

Abort build if not all mandatory arguments are passed to
the top-level pipeline macros.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",56,10,0
"thesofproject/sof","c7b914dd144d6d1589a26b904e0701745641057a","slawblauciak","2019-09-18 11:53:23","false","ipc: channel map structures and api

This change adds stream map and channel map structures
used for channel re-routing and stream aggregation.

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",60,16,0
"thesofproject/sof","c59b513eaf19e5551ca6afbde2bd3a6d90cc8063","slawblauciak","2020-09-03 13:02:15","false","dai: fix an uninitialized variable

Issue detected by Klocwork.

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",70,27,0
"thesofproject/sof","6eb35e61c40d6ee89faff6a5ced2e52012a099e8","keyonjie","2019-08-01 09:22:14","false","topology: pcm: add helper for creating low power Capture PCM.

Add implement PCM_CAPTURE_LP_ADD() to create low power Capture PCM,
which can run at low power status like d0i3.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",53,14,0
"thesofproject/sof","7c62a65ac6aa666a0df6b11fb0404653d3591b37","keyonjie","2021-06-07 05:19:48","false","topology: sof-tgl-nocodec-ci: add dmic16k coverage

Add dmic16k to run on Core 0, this will help to cover DMIC dais on
multi-core scenario (dmic 48k on core 2, dmic 16k on core 0).

Also correct the comment w.r.t. DSP cores.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",76,36,0
"thesofproject/sof","e9a4102f991ffadb8f1654016ce4ef289000e1f1","eurofun","2023-05-25 06:40:30","false","imx8m: increase max channels/streams

Increase PLATFORM_MAX_CHANNELS and PLATFORM_MAX_STREAMS
to 8 in order to enable the use of certain
components (e.g. 'volume') with 8 channels.
This necessitates an increased HEAP_RUNTIME_SIZE.

Signed-off-by: Alexander Boehm <aboehm@eurofunk.com>",53,60,1
"thesofproject/sof","30bbfb49bbe7709725e602c5765f0fb9e4955464","cujomalainey","2019-03-05 21:48:20","false","EQ: Add chromium signal processing elements

Add modules for signal processing of biquad filters needed for chromium

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",66,9,0
"thesofproject/sof","771db86de290d568d7786e18e7b7c0adb696a454","dbaluta","2021-09-28 16:35:52","false","topology1: codec_adapter: Add 'codec_adapter' pipeline configuration

This adds 'codec_adapter' pipeline configuration  allowing this
pipeline to be part of a more complex topology.

Important configuration here is the 'scheduler' widget. Without this,
'codec_adapter' would work in a more complex topology. This is because
each individual pipeline needs to have a 'scheduling' component.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",120,40,0
"thesofproject/sof","de739dd89cce8988341362b6c9aca04cfb2991ce","dbaluta","2022-10-13 13:38:19","false","zephyr: Fix cycle counting on i.MX

On i.MX8 k_cycle_get_64 always returns 0 so use sof_cycle_get_64
instead.

There is no better solution to support 64bit cycle counting for i.MX
and will have to stick with this implementation.

Fixes: c3c94fc515188 (""header: rtos: use rtos specific version of wait.h"")
Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",97,52,1
"thesofproject/sof","9c176b8f08e99bab6f63715071ab392845f3f966","dbaluta","2021-03-25 16:05:51","false","audio: codec_adapter: Updated processed bytes

processed field keeps the total number of processed bytes
from the input buffer. We need to update this field also
for the process_init operation.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",77,34,0
"thesofproject/sof","e693d94780cf830d273b58e8a05f9d5984509380","plbossart","2018-08-01 04:10:15","true","Merge pull request #181 from plbossart/fix/mdivc

apl-ssp: do not override common MDIVCTRL register",18,2,0
"thesofproject/sof","7ef73131b9712ca0883338e40591be4de3bf8d56","plbossart","2020-06-22 15:54:52","false","SRC: remove from Baytrail/Cherrytrail configurations

We really don't care about SRC on those platforms and the memory
footprint is too large anyways.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",72,25,0
"thesofproject/sof","bf72bf7a7b24799df264a31eb9c904568575fe2c","lrgirdwo","2019-09-14 13:48:30","false","fuzzer: cleanup mailbox platform abstraction

Pass mailbox as parameter and add convenience helper for platform ops.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",60,15,0
"thesofproject/sof","0d6425e614cf4043a5b9734ec375fdc66194205c","jajanusz","2018-08-22 13:17:19","false","drivers: refactor: move interrupt from platform to drivers

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",19,3,0
"thesofproject/sof","f83714ed39646d94fd8153c65b6bde411de3a48d","jajanusz","2020-05-21 11:40:15","false","xtensa: move -lgcc to sof_options

This flag should be in sof_options as it is needed for
supporting standard C features.

Thanks to this symbols needed for supporting features
guaranteed by C standard, but not directly supported by platform
ASM will be available in static libraries, without explicitly
specifying -lgcc dependency.

Most of people don't know that they may need this dependency to
support f.e. for float to int conversion on Xtensa.
They expect it to work because it's part of basic C syntax and
they will complain, that they have undefined references to __* symbols.
This patch helps preventing problems like these.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",99,24,0
"thesofproject/sof","0beb84b8284b2da41e3729b8f2a1fd4d0b87d317","jajanusz","2019-01-11 20:24:02","false","cmake: add rimage build

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",55,7,0
"thesofproject/sof","c59d165f4f94d81785e69b61a7f68d458e78ea97","xiulipan","2018-09-26 07:47:53","false","panic: store register PS and dump it

The register PS will always be changed due to the IRQ disable.
Store the old PS and dump that value.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",37,4,0
"thesofproject/sof","fe583cf8a007a91fc4722492dfacd5f93394cfe4","softwarecki","2022-06-30 14:20:52","false","host: Introduce total_data_processed counter in host_data

The counting of processed data has been moved from a component
device structure to the components private data. Added a new
function for reading it.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",110,49,1
"thesofproject/sof","d5967d19132cb67689b9295bd2046ffb57e4adb2","softwarecki","2022-09-06 13:13:39","false","platform: mtl: Add meteorlake plaftom

Added base files of meteorlake plaftom:
  Board configuration
  CPU, clock and memory configuration
  Platform bootstrap code
  IPC driver wrapper for Zephyr IPC API for ACE1.5 platforms.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>
Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>
Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>
Signed-off-by: Konrad Leszczynski <konrad.leszczynski@intel.com>
Signed-off-by: Anas Nashif <anas.nashif@intel.com>
Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>
Signed-off-by: Rafal Redzimski <rafal.f.redzimski@intel.com>
Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>
Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",106,51,1
"thesofproject/sof","482abfd23261235e98a68c4907f9641e80676779","ranj063","2018-12-19 06:53:20","false","dmic: fix trace message

Fix trace message in dmic_set_config(). These aren't errors
just info messages.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,7,0
"thesofproject/sof","3a894af0ce91dc5e371023ce0fe2dbd3f5b98b93","RanderWang","2021-07-14 06:40:44","false","topolog2: add dai token support in copier

Copier widget may be used as a dai component in ipc4 path,
so we need to add dai token in copier, including dai_index,
dai_type and direction. They are optional attributes and can
be set only for dai type. We don't reuse copier_type for dai
since copier type may be host or just copy module.

Signed-off-by: Rander Wang <rander.wang@intel.com>
Signed-off-by: Chao Song <chao.song@linux.intel.com>
Tested-by: Bard Liao <bard.liao@intel.com>",87,37,0
"thesofproject/sof","43cd6e26d6b7a8bb02570b2841c0bf6378d35175","ranj063","2023-05-16 02:17:25","false","copier: set DAI copier endpoint conversion only once

No need to do this more than once for multiple endpoint DAI copiers.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",51,59,1
"thesofproject/sof","aeeba766518e0cfb3f9143e761b0dd90240e8719","balakishorepati","2021-07-27 16:53:55","false","platform: renoir : Add xtensa headers

Add xtensa headers for renoir based amd platform.

Signed-off-by: Basavaraj Hiregoudar <basavaraj.hiregoudar@amd.com>
Signed-off-by: Anup Kulkarni <anup.kulkarni@amd.com>
Signed-off-by: balapati <balakishore.pati@amd.com>",103,38,0
"thesofproject/sof","15d0c4c3ea669427ddaeef3162f6eab88c624e6e","tlauda","2018-11-21 12:51:48","false","ipc: send generic reply for pm_context messages

Uses generic reply for pm_context ipc messages.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",39,6,0
"thesofproject/sof","619477a186c5153e1fa0573d644483485710a6cc","singalsu","2023-05-16 12:15:55","false","App: Overlays: Add DRC component build to TGL, TGL-H, ACE

This patch adds CONFIG_COMP_DRC=y for IPC4 Intel platform
builds.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",51,59,1
"thesofproject/sof","252a61c9ad3c8ef1a94986b7a7ecd65b149609a7","singalsu","2021-12-03 15:34:32","false","Audio: Select: Optimize data copy operations

This patch replaces the per sample done circular copies with
audio_stream_read/write_frag_s16/32() functions calls with
max. length linear copies.

The original copy function for >1ch sink is just 1:1 copy
from source to sink without controllable channel select. This
patch preserves the functionality and implements the copy with
memcpy().

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",125,42,1
"thesofproject/sof","45015fa361a619b1c3104cfb0493fc9f3433aeeb","tlauda","2019-09-16 14:43:33","false","dw-dma: remove double channel index assignment

Removes double channel index assignment in dw_dma_probe.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",62,15,0
"thesofproject/sof","39f54e0f3ba02aaf414655b8f3396e5fd5a2df13","tlauda","2019-12-17 15:21:46","false","alloc: remove unnecessary zone argument

Removes unnecessary zone argument passed to some of the
internal functions. It was previously used to check for flags,
but since they were extracted to separate parameter, it's no
longer needed.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",70,18,0
"thesofproject/sof","7299afe35ccb5e96e48484081fbfeaff3e397d5b","tlauda","2019-07-17 10:41:19","false","arch: xtensa: use CONFIG_BOOT_LOADER instead of platforms

Changes cmake script to use CONFIG_BOOT_LOADER instead
of specific platform configs when choosing whether to
build bootloader.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",46,14,0
"thesofproject/sof","2475094eefbd9d11c7b489aa52cc050df80a5092","saisurya-ch","2023-07-11 13:22:04","false","Dockerfile: add AMD/Vangogh gcc toolchain

Add AMD/Vangogh gcc toolchain.

Signed-off-by: SaiSurya Ch <saisurya.chakkaveeravenkatanaga@amd.com>",31,61,1
"thesofproject/sof","1df122dad161f43800a0a4a265e267c26402b616","tlauda","2020-03-17 15:47:09","false","trace: move struct definition out of header

Moves trace struct definition out of header.
It isn't used anywhere besides trace unit.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",72,21,0
"thesofproject/sof","939f500c860bcf9013cc3b788b7501b401589613","tlauda","2019-03-18 11:09:09","false","pipeline: add PPL_PATH_STOP status

Adds new status to pipeline to accurately reflect
what is the expectation here. Value of 1 isn't
saying anything.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",67,9,0
"thesofproject/sof","589f035ad42e4a155a7c80fed635963f9774079e","marc-hb","2021-07-25 04:45:56","false","common_mocks.c: fix !CONFIG_TRACE build

Fixes 'no previous prototype for trace_log_filtered' -Werr and
redefinition of ‘trace_flush_dma_to_mbox’ error.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",99,38,0
"thesofproject/sof","80e9c3454a0a048704f863a52443b536a27a2410","fredoh9","2023-04-13 19:17:16","false","scripts/docker-run.sh: run with sudo-cwd.sh

There is a UID mistmatch and file permission problem. sudo-cwd.sh will
switch id every docker run command.

This can be done like this,
./scripts/docker-run.sh ./scripts/sudo-cwd.sh CMD

But not to make build script, just include sudo-cwd.sh in docker-run.sh.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",50,58,1
"thesofproject/sof","0153f9f2faf4f127a7f2168b641cac3862603dd7","btian1","2023-10-19 03:12:13","false","audio: eq_iir: public common functions for ipc3 and ipc4

this is preparation for later ipc3 and ipc4 code split out
from eq_iir.c, these common functions will be used both by
ipc3 and ipc4.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",12,65,1
"thesofproject/sof","244df9feda8eb9bddd44847a8c9dd18513baff96","joechengxperi","2023-10-17 03:35:09","false","topology2: dts: add DTS playback pipeline

Add cavs-mixin-mixin-mixout-eqiir-dts-ssp.conf to support EQ IIR + DTS
processing on rt5682

Co-developed-by: Mac Chiang <mac.chiang@intel.com>
Signed-off-by: Mac Chiang <mac.chiang@intel.com>
Signed-off-by: Joe Cheng <joe.cheng@xperi.com>",9,64,1
"thesofproject/sof","f6c48532717220a9390e664d6c73e7e6df944206","ranj063","2021-10-06 17:12:48","false","IPC: DAI: Expand DAI_CONFIG IPC flags

Some DAI components, such as HDaudio, need to be stopped in two steps
a) stop the DAI component
b) stop the DAI DMA

This patch enables this two-step stop by expanding the DAI_CONFIG
IPC flags and split them into 2 parts.

The 4 LSB bits indicate when the DAI_CONFIG IPC is sent, ex: hw_params,
hw_free or pause. The 4 MSB bits are used as the quirk flags to be used
along with the command flags. The quirk flag called
SOF_DAI_CONFIG_FLAGS_2_STEP_STOP shall be set along with the HW_PARAMS
command flag, i.e. before the pipeline is started so that the stop/pause
trigger op in the FW can take the appropriate action to either
perform/skip the DMA stop. If set, the DMA stop will be executed when the
DAI_CONFIG IPC is sent during hw_free. In the case of pause, DMA pause
will be handled when the DAI_CONFIG IPC is sent with the PAUSE command
flag.

Along with this, modify the signature for the hda_ctrl_dai_widget_setup/
hda_ctrl_dai_widget_free() functions to take additional flags as an
argument and modify all users to pass the appropriate quirk flags. Only
the HDA DAI's need to pass the SOF_DAI_CONFIG_FLAGS_2_STEP_STOP quirk
flag during hw_params to indicate that it supports two-step stop and
pause.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",121,40,1
"thesofproject/sof","b8e27e6c3e9681f3387935ff4aa7bc76d532773a","abonislawski","2019-06-14 10:45:02","false","memory: make buffers aligned to HEAP_BUF_ALIGNMENT in SUE

It provides better memory/cache performance since it aligns with memory IO burst size and cache line size

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",47,12,0
"thesofproject/sof","db30cf8b99c6b3a3ca3fd73316d59aad445c0c1c","ranj063","2023-07-09 17:18:00","false","audio: module_adapter: Isolate the module state checks to IPC3

For IPC4, the component device state machine is handled by the
comp_set_state() calls in the module adapter ops already. So, the module
state checks are redundant. But, keep the state checks for IPC3 so as to
not break the existing codec implementations for IPC3.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",31,61,1
"thesofproject/sof","f8aa67ef8183394a564a7762527ee72ed5a8bfdd","abonislawski","2019-06-18 11:40:43","false","memory: reorder heap defines to match order from SUE memory layout

This will make easier to analyse heaps in memory.h

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",45,13,0
"thesofproject/sof","0315863d98026b17a9a05604af559740cbbe0b73","ranj063","2021-04-20 21:33:52","false","probe: fix compilation error

Use the right header file to fix the compilation
error when building with probes enabled.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",89,35,0
"thesofproject/sof","ccd6949a2435b84d47530489fec8f867fd5d776d","ranj063","2023-08-08 19:42:31","false","tplg_parser: Rename pcm.c

Rename it to host.c as it is meant for setting the host widget.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",27,62,1
"thesofproject/sof","3c39c2c996a3530193b03f552e066dd421b26f90","ranj063","2023-03-10 19:43:12","false","topology2: cavs-sdw: Enable PDM 1 mics for 4ch

It would be better to make these dependedent on NUM_DMICS. Something to
improve in a follow up PR.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",55,57,1
"thesofproject/sof","c40743ec8de902371de2c1257eed00e16269cf04","ranj063","2022-06-01 17:13:35","false","testbench: add support for parsing UUID

In preparation for comverting the volume component to use the module
interface, add support for parsing the UUID from topology when parsing
the PGA widget in testbench.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,48,1
"thesofproject/sof","8b570dc2760fe1ac51714ac03157e76ce87b34e2","ranj063","2022-03-23 23:08:57","false","codec_adapter: rename codec_adapter.c to module_adapter.c

No functional changes.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",109,46,1
"thesofproject/sof","78a448605ec35cc125d5a1edd1f1ebd7a5f30e86","ranj063","2022-01-11 00:55:16","false","codec_adapter: modify the signature of module_free_memory()

To pass struct processing_module pointer.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","032cddc8547580470237a199877c61684f40bbd1","ranj063","2022-01-08 01:59:36","false","codec_adapter: rename codec_load_config()

to module_load_config(). No functional change.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","fba35b13f4612e306f4aef686c56ee1ad3a529c4","ranj063","2022-12-19 03:47:12","false","mixin: Convert the component to use the module interface

Replace the comp_drv ops for the mixin component to use the
module_adapter interface. The trigger and get_attribute ops are replaced
with the module_adapter ops which do the exact same thing. The base_cfg
field from struct mixin_data is removed as it is replaced with the
base_cfg in struct module_config and all users have been updated.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",91,55,1
"thesofproject/sof","34e2eb13c6d112ec84332b7d96764b4942fb81c4","ranj063","2022-01-08 02:05:34","false","codec_adapter: rename codec_free_all_memory()

to module_free_all_memory(). No functional change.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","af3acc8b7f82b567608f0ec9342e9cdb74814207","ranj063","2018-06-12 03:37:13","false","dma: introduce parameter to store the number of channels draining

This patch adds the num_channels_busy member to the dma structure
which will be helpful in determining DMAC to be allocated
to users based on the number of channels draining. This is help
provide a primitive level of QoS and prevent DMAC overuse.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",1,0,0
"thesofproject/sof","175ef89b8163c1835e6ca11a9421ac2d2dcee68f","abonislawski","2020-06-09 20:21:55","false","diag: DSP residency counters

This will add DSP residency counters to Debug menu
It introduces generic DSP states R0, R1 and R2 with simple
reporting changes and tracing it in SRAM_REG mailbox.
Number of DSP residency states can be easily extended depending on platform needs.

In initial version CAVS support is added with the following approach:
R0 - in HPRO
R1 - in LPRO
R2 - LPS
with extra priority to R2 (LPS).

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",73,24,0
"thesofproject/sof","a2429fd3e95dd250424e2e291c2be615bb9d43b8","ranj063","2022-01-12 19:33:28","false","codec_adapter: cadence: set default API ID

Add a new field to struct cadence_codec_data to save the API ID and
set its default value to be that associated with CADENCE_CODEC_WRAPPER_ID.
If needed, this can be overwritten from userspace at runtime.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",117,43,1
"thesofproject/sof","5cfb95478bf7679aaedd7cfc92b70ce1f79aa624","ranj063","2022-05-06 16:46:15","false","module_adapter: separate handling the processed output into a new function

Split the core for handling the processed output into a separate
function.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,47,1
"thesofproject/sof","b74895c19398e70423b96f3da10e1e6bad32c6bb","ranj063","2023-05-02 18:24:55","false","copier: Modify get_processed_data()

Modify the get_processed_data() function to use the total_processed_data
from the dai_data directly for DAI components.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,59,1
"thesofproject/sof","c973358957094acefcff7f4dbe8c6d8a02005bee","aiChaoSONG","2022-05-13 14:05:23","false","overlays: add common/debug_overlay.conf for debug build

The debug_overlay.conf is somehow missing from #5792,
add it in this patch.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",111,47,1
"thesofproject/sof","5b0b1a3db505ad5e98b15c830b96a432cec48c78","ktrzcinx","2020-09-25 13:21:52","false","logger: Skip %s from formatting string

Passing %s with random address leads to logger crash.
It's especially important right now, after changing
print formatter for UUID from %s to %pU. It's why
DBG_ABI patch number has been updated.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",64,28,0
"thesofproject/sof","75984ef5628ad91813a764a9478f7ad80b79ff45","ktrzcinx","2020-04-17 08:28:40","false","cc_version: Improve string length check

In old method, when input string is to long by one char, then
complation pass what doesn't happen in new method.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",82,22,0
"thesofproject/sof","b284ac32b53f500602d52d349e2bd7e84c43068c","mwierzbix","2018-10-03 02:00:30","false","debugability: Macro Metaprogramming Refactor

Added macro functions to make repetitive, nearly identical functions more maintainable via metaprogramming. They generate code in pre-compile, conceptually similar to C++17 if-constexpr.  sof/trace, host/trace: rewrote _trace_event/d+ functions using preproc.h. test/cmocka/include/test_group_generator: rewrote macros to not conflict with new ones. Added unit tests to check whether more advanced and less obvious macros do in fact work.

Signed-off-by: Michal Jerzy Wierzbicki <michalx.wierzbicki@linux.intel.com>",34,4,0
"thesofproject/sof","9d0d818d8c1bebdbb920f8031241e892c6354830","singalsu","2021-07-19 16:40:18","false","Audio: EQ-IIR: Change source and sink format component data to local

The source_format and sink_format variables do not need to be in
component data. Local variables in prepare() are sufficient.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",90,38,0
"thesofproject/sof","fab0f7290174999bdb5a07b6d647267b5ff0871a","singalsu","2023-10-12 08:18:03","false","Tools: Rimage: Config: Add RTC_AEC to TGL. TGL-H, and LNL

This patch adds same RTC_AEC module entry as added earlier
to config/mtl.toml. The purpose is enable testing the component
in other platforms.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",11,64,1
"thesofproject/sof","b4af9d93a16f2cef3bfd7844ed3e1897f5d5791e","singalsu","2022-10-31 11:35:44","false","Tools: Test: Changes for process_test.m run with xt-xcc

This patch adds to process_test() sixth argument to run the tests
with xt-run environment with argument set to 'xt-run' or
'xt-run --turbo'.

The set and print of LD_LIBRARY_PATH is no more needed with static
testbench version.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",91,53,1
"thesofproject/sof","190ce8bf7a442545d5a89c70aa38d0f8e7c67122","singalsu","2020-11-10 13:43:06","false","Drivers: DMIC: Move decimation factors 5 and 10 to less preferred

This patch changes FIR decimation factors preference from
""2, 3, 4, 5, 6, 8, 10, 12"" to ""2, 3, 4, 6, 5, 8, 12, 10"".

The prime number factor 5 and 10 (2*5) are less preferred because
when used for decimate for fist started FIR they restrict more the
configuration choices for the second FIR. If e.g. capture at 16 kHz
is started first with decimation factor 6, the 48 kHz stream can be
decimated from common 96 kHz CIC rate by 2.

Earlier the driver selected decimation by 5 to 16 kHz. There is no
integer decimation factor to decimate from 80 kHz to 48 kHz.

Similarly if decimate to 8 kHz programmed FIR to decimate by 10, the
same 80 kHz rate prevents 48 kHz for the other DAI. Decimation factor
12 sets up CIC to 96 kHz that is compatible with many other sample
rates.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",73,29,0
"thesofproject/sof","a81ce180ca95f1388ce99ef63ace5a4c7eb3ef4d","singalsu","2019-05-06 17:29:45","false","Volume: Get volume ramp parameters from IPC

This patch adds code to handle volume ramp type and ramp length
parameters from topology. The previous hard coded 250 ms ramp
related macros are removed.

Since the kernel does not (yet) provide the volume min/max into
as IPC for new() the code assumes the ramp length is the length
of the mute to 0 dB gain transition.

If a volume transition is larger than that, what can happen in a
high gain configuration, the ramp is shortened to exceed the
passed time parameter. So in other words the large transitions will
use a variable rate slope.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",48,11,0
"thesofproject/sof","da8ee993a7bee13e269aeabee2255288530a0f40","singalsu","2022-02-11 16:10:10","false","Audio: TDFB: Optimize read/write frag in HiFiEP copy() function

The change similar as in generic C version patch but with
different core function.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",107,44,1
"thesofproject/sof","cb280c4c5968800e56e5c5519088c6138a30ec2f","singalsu","2021-11-22 13:03:22","false","Audio: pcm_converter: Optimize buffers access in generic version

This code is used in non-HiFi3 platforms and in all gcc builds.
The inefficient audio_stream_read/write_frag_s16/s32() usage is
replaced by block processing with help of function
audio_stream_bytes_without_wrap(). The circular buffers pointers
checks and wraps are done only when necessary.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",129,42,1
"thesofproject/sof","e3238d6339f1d8c190467b4fd633acba9b0e2a9b","lgirdwood","2018-09-25 10:27:43","true","Merge pull request #413 from tlauda/topic/host_trace_functions

host: arch: add new trace functions for host",37,4,0
"thesofproject/sof","04c97d024c27e970adfaa0ef35e1216567fb91ec","mrajwa","2018-11-20 21:30:48","false","DMIC: Added power gating.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",39,6,0
"thesofproject/sof","b33574ce65445f39c4d28d773a4c7896a0e0e8e5","mrajwa","2019-05-29 21:40:07","false","cmocka: update kpb test case

KPB_MAX_BUFFER_SIZE has changed therefore cmocka test
which uses this macro needs to be changed accordingly.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",67,12,0
"thesofproject/sof","12ecadcfcc48a074d435266d2166e1819a34fdcf","lgirdwood","2018-10-11 11:06:04","true","Merge pull request #467 from tlauda/topic/clock-refactor

clock: simplify clock implementation",33,4,0
"thesofproject/sof","155137b87899fd67aa806ac3720e4986da534a8c","singalsu","2022-11-29 13:56:12","false","Tools: Test: Timeout src_test.m after 300k copy() iterations

This prevents testbench run freeze from src_test.m. Function
test_run_src() passes to testbench option -C that limits the number
iterations to 300k that corresponds to 5 min of audio.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",102,54,1
"thesofproject/sof","09e1b87b1089b2591adcff9ad35581e75e82a648","singalsu","2023-10-05 13:22:33","false","Audio: MFCC: Fix testbench xt build fail

Build with ""scripts/rebuild-testbench -p tgl"" fails to error:

src/audio/mfcc/mfcc_hifi3.c: In function ‘mfcc_source_copy_s16’:
src/audio/mfcc/mfcc_hifi3.c:91: warning:
assignment from incompatible pointer type

src/audio/mfcc/mfcc_hifi3.c: In function ‘mfcc_fill_prev_samples’:
src/audio/mfcc/mfcc_hifi3.c:124: warning:
assignment from incompatible pointer type

src/audio/mfcc/mfcc_hifi3.c: In function ‘mfcc_fill_fft_buffer’:
src/audio/mfcc/mfcc_hifi3.c:159: warning:
assignment from incompatible pointer type

fixes: d0cb478007 (""Audio: MFCC: Add HiFi3 implementation of MFCC"")

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",15,64,1
"thesofproject/sof","054230481f97481faefaf5b20ef4f20ff05add47","andyross","2022-12-03 00:00:13","false","zephyr: Not all builds are xtensa

Don't need the arch-specific cache header if we're building for native_posix

Signed-off-by: Andy Ross <andyross@google.com>",103,54,1
"thesofproject/sof","0bcc7a597b76d566b629597fb7f3824a44fd0487","slawblauciak","2019-03-29 12:47:18","false","ipc: initial host notification support

Provides ipc_send_comp_notification function for
sending custom notifications to the host.

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",48,10,0
"thesofproject/sof","9809350a622b987a3564773352da4807fd7b631b","keyonjie","2021-06-01 06:47:28","false","hda-dma: allocate RUNTIME_SHARED for hda_chan

The DMA channels need to be shared among pipelines and DSP cores,
allocate buffer for it in RUNTIME_SHARED area.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",83,36,0
"thesofproject/sof","85e462ad77e5d1c41e7d8aca9e7b1cc49859398e","dragosht","2019-12-16 17:36:24","false","cmake: Use correct config option for GDB_DEBUG

If CONFIG_GDB_DEBUG is set, the build fails at link time because of
undefined references to arch_gdb_memory_load_and_store,
arch_gdb_load_from_memory, gdb_debug_info, and several others.

Fix that by replacing CONFIG_GDB with CONFIG_GDB_DEBUG.

Signed-off-by: Dragos Tarcatu <dragos_tarcatu@mentor.com>",74,18,0
"thesofproject/sof","e8dc076f7ad70325c6061fb016267f72c78e2ff8","jajanusz","2020-06-16 10:55:00","false","drivers: cavs: set budget for IPC task

IPC task may be time consuming and has high priority,
what may make other tasks stall. To prevent this it should
have limited cycles budget per systick.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",74,25,0
"thesofproject/sof","97ea0dc6566a9672fa686a8e8e78e40b1c0df435","xiulipan","2018-10-12 05:38:50","false","ci: travis: enable boot up test on BYT and CHT

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",33,4,0
"thesofproject/sof","990046e14095f128bef0f198c2fd332e778891c6","ranj063","2018-06-28 04:16:44","false","scripts: update host testbench script with src topology example

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",6,1,0
"thesofproject/sof","3d0e327b4bed67a7667ca84c93016f6d30af92da","ranj063","2022-11-08 06:09:40","false","dai-zephyr: free allocated memory in error paths

Free all the allocated memory in all error paths during dai_params().

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",93,53,1
"thesofproject/sof","fb28357912da32d90b9fabbdfefaa28553b1d20a","abonislawski","2022-08-30 07:26:34","false","config: mtl: add probe module

Add probe module to mtl config

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",114,51,1
"thesofproject/sof","f7663de1f41308b80bac4618b5835fcda1ff8fac","ranj063","2022-04-27 20:50:20","false","volume: use the new module interface

Move the volume component inside the module_adapter folder and use the
module interface API instead of the component driver interface. Also fix
the volume cmocka tests to use the modified scale_vol function.

Also, add kconfig option for keeping the legacy comp_drv interface for platforms
that are limited in text region memory size, such as
BYT/CHT/APL/JSL/ICL.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",114,47,1
"thesofproject/sof","873d24bccffbd59e09e05289510d1b21cadc2f52","ranj063","2022-11-17 16:00:28","false","copier: Fix typo in error message

No code change.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",97,53,1
"thesofproject/sof","dc12de821b3c99659f28efdc5474a8c981b87c4e","ranj063","2022-03-03 05:19:02","false","codec_adapter: Add a helper function to copy from local buffer to sink

Add a helper function to copy from local buffer to the sink buffer. This
will be used to copy from all output buffers.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",113,45,1
"thesofproject/sof","ce050aa25b6693b1abc934fecac7724b038dcf03","ranj063","2022-02-25 06:10:43","false","topology2: cavs-nocodec: split pipelines into host and dai pipelines

Split pipelines into host and DAI pipelines and fix some SSP params

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",110,45,1
"thesofproject/sof","a2f0dd0931de8e210f522d98341eab6d5f99d946","RanderWang","2018-09-17 09:22:45","false","wait: add a function to wait for a register ready by pulling method

The register status is checked by polling its value in request time

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",43,4,0
"thesofproject/sof","580e4d674e06eb6d515d1479c082b46709ab743f","RanderWang","2021-07-20 05:36:04","false","config: tgl-cavs: change image_size to the real SRAM size

Apply ""config: tgl: change image_size to the real SRAM size""
(9e50a02f1b) to tgl-cavs

Signed-off-by: Rander Wang <rander.wang@intel.com>",93,38,0
"thesofproject/sof","2943342b834cb77a76c0513677c6b1b713421d79","tlauda","2018-08-23 08:42:23","false","dw-dma: allocate lli on runtime heap

Allocates linked list item on runtime heap instead of
buffer heap.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",19,3,0
"thesofproject/sof","b3233c435e51aed7932ca90093cbe7091d946509","tlauda","2019-08-02 09:39:07","false","schedule: remove functions forward declarations

Removes not needed forward declarations of the functions.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,14,0
"thesofproject/sof","30c7da73585eb1ae494c5fe257d2dba8741b5161","tlauda","2018-08-23 10:36:53","false","alloc: access to the memory map through uncached addresses

Changes access to the platform memory map to go through uncached
address range. This will make alloc functions truly shared
between cores and also save us many invalidate operations.
Memory map needs to be statically defined, so cannot be
allocated itself in ucached zone.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",19,3,0
"thesofproject/sof","64dc4a7a7b25559653506fb6c4146f15d1fe81ba","bardliao","2023-01-19 02:52:49","false","topology2: sof-mtl-rt711-4ch: specify PLATFORM=mtl

It worked because we defined DMIC_DRIVER_VERSION 3 as the default value.
We have to specify PLATFORM=mtl when the default value was removed.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",55,56,1
"thesofproject/sof","4475f604aa8865e951f86b30d559c4ff7a594309","iuliana-prodan","2021-05-24 10:29:05","false","zephyr: trace: remove useless #ifdef __ZEPHYR__ macro

Commit 8357dcf793f4 (""zephyr: trace: use zephyr utilities when enabled"")
added Zephyr's sys/printk.h in order to fix:
warning: implicit declaration of function 'printk'.

Remove #ifdef __ZEPHYR__ macro since this is not needed, because
the whole file is for Zephyr only.

Fixes: 8357dcf793f4 (""zephyr: trace: use zephyr utilities when enabled"")
Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",84,36,0
"thesofproject/sof","67fa702308ddf0d77d58a18535deeb6f23356d7d","iuliana-prodan","2023-05-03 15:54:09","false","topology: imx: Combine base topology files for i.MX8MP and i.MX8

Combine base topology files for i.MX8MP and i.MX8 using different
variables like RATE, SAI_INDEX, CODEC.

Based on CODEC and SAI_INDEX use the proper DAI_CONFIG or STREAM_NAME.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",54,59,1
"thesofproject/sof","1b5dae791da8942faba2d95180f28ed37630a48d","iuliana-prodan","2023-05-03 11:49:49","false","topology: imx8mp: correct comments for compress tplg

Update comments for compress typologies to reflect the correct
flow and the use for each file.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",54,59,1
"thesofproject/sof","5d4cb92310d0a8a64718cdf7c7e68130f955aa81","RanderWang","2018-09-25 04:59:24","false","byt: call poll_for_register_delay to wait register idle

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",36,4,0
"thesofproject/sof","6afe1ddbc2d94824a4df2390617bd3ec6e23ef14","lyakh","2023-04-27 12:15:40","false","buffer: don't access stream internals in buffer_new()

Don't access struct audio_stream internals in buffer_new(), pass
buffer flags to buffer_alloc() instead.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",52,59,1
"thesofproject/sof","c894d68f674e405259b53d35e3241e1845ca91e0","lyakh","2019-03-05 11:53:01","false","ipc: simplify multiple comparisons

As long as the low bits of two numbers are 0, there's no need to
right shift those numbers to compare them.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",65,9,0
"thesofproject/sof","25739de8393fbc5bf72072c3c97bba01f4c15e8b","lyakh","2019-01-10 10:17:40","false","dw-dma: (cosmetic) use pointer shortcuts

Simplify the DW DMA driver by using channel and LLI pointers instead
of repeating the same pattern multiple times within functions.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",56,7,0
"thesofproject/sof","1bd8635c0b3109c4655ccf3bbeed216b2c344175","lyakh","2022-09-12 07:32:42","false","buffer: fix notifier events

Buffer notifier events are registered with buffer's uncached address
as a key, so notifier events must use the same.

Fixes: 95485f05b5c0 (""buffer: pass locked buffers to notification
recipients"")
Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",106,51,1
"thesofproject/sof","ec22e4a70282cc3c0551267ec9e2cc340bd6c518","lyakh","2023-04-27 10:24:19","false","rtnr: fix a left over direct access

Fix a missed direct read of the stream channel count.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",52,59,1
"thesofproject/sof","dcf0577a7725413aad1a378d629b9cc6659550ef","marc-hb","2021-11-25 02:51:29","false","logger: allow starting before the driver is loaded

Don't fail immediately when the driver is not loaded. Use inotify
instead to wait for /sys/kernel/debug/sof/[e]trace to appear.

This makes it possible to start before the driver is loaded which
reduces considerably the chances of missing early logs.

Fixes a small part of https://github.com/thesofproject/linux/issues/3275

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",128,42,1
"thesofproject/sof","6254ff5b08f7501ed03c4b30f910c89d7fbee3d6","marc-hb","2021-11-02 05:56:49","false","version.cmake: fix message to show why source hash fails with Zephyr

When compiling with Zephyr, SOF_ROOT_SOURCE_DIRECTORY is changed to
sof/zephyr/ and sof/zephyr/.git does not exist. Change error message to
show SOF_ROOT_SOURCE_DIRECTORY/.git

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",125,41,1
"thesofproject/sof","e76c236801980c1dc97ee7c98668943438c3b0b5","jxstelter","2022-09-05 12:52:18","false","module_adapter: Fix iadk module component compilation.

The patch introduced in this commit:
SHA-1: 68345fb16829621b247d0b79c051a4f3b854097d
* module_adapter: Add support for IPC4 in module_adapter_new
broke previous implementation of iadk_modules.c, sice loadable
modueles needs congiguration size to be passed from IPC handler
to the module code. These changes resolves that issue.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",118,51,1
"thesofproject/sof","221189d3f7ef36fa20fd119e914f552a23137202","cujomalainey","2020-10-27 23:45:23","false","trace: enforce mailbox size

If we are fuzzing we can get the trace system into a state where it
tries flush dma and overshoot the mailbox boundary.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",75,29,0
"thesofproject/sof","a53d9c0fa0ce1aba8e5bcafc2214db355f2ee076","jxstelter","2022-05-23 14:02:35","false","Add 3rd party Intel IADK Framework modules adapter code.

IADK based modules uses two interfaces to communicate with
base firmware:
- ProcessingModuleInterface;
- SystemServices.
Implementation of both with C++->C wrappers are added in
these files. Additionally system_agent component is
responsible for integration of both communications path
after module loading.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",115,48,1
"thesofproject/sof","fc8a4b67304c5f8b5c4dc1dc3823110d0e2496af","RanderWang","2023-08-18 07:21:47","false","topology2: change the sample type for Linux audio system

At first the sample type is set to MSB_INTEGER to follow windows
settings, but actually we use LSB_INTERGER type such as S24_4LE.
Now change the default sample type to LSB_INTERGER to align with
FW usage. For DAI copier we need to use MSB_INTERGER for hardware
requirement. Currently sample type only affect s24/c32 case, so only
change sample type in dai for this format config.

FW will use sample type to choose correct format conversion
function and can deal with Windows audio stream correctly with MSB
s24/c32 format.

out_fmt_cfg is redefined for a alsa-lib bug. Alsa-lib will first process
out_fmt_cfg = '$[($out_channels | ($out_valid_bit_depth * 256)) |
($out_sample_type * 65536)]' in base class and then deal with
out_sample_type, so error is reported. Now first define out_sample_type
and then out_fmt_cfg, everything works.

Signed-off-by: Rander Wang <rander.wang@intel.com>",25,63,1
"thesofproject/sof","892c2d94a7119f92d8ba6874562b277b3b811812","marc-hb","2023-05-24 22:59:34","false","ipc4/dai.c: ACE2: remove unused local variable `sof_cfg`

Fixes commit 22ad526c2691f (""LNL: Add hda_dma_config for interfaces"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",55,60,1
"thesofproject/sof","212e9808a40513782ed2655acea78b0f56a4f6f5","marc-hb","2023-06-02 20:11:22","false","versions.json: bump to 2.6.99

Adopt Zephyr's (and others) .99 convention to indicate a development
branch.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",45,60,1
"thesofproject/sof","5d66f1dac4337b08dbbaf4b21baa17953c6f8850","marc-hb","2021-12-24 00:45:26","false","cmake: fix .ldc chksum fallback when no SOURCE_DIRECTORY/.git

Fixes old (Aug 2020) and untested commit b2a325a3b7e66 (""cmake: Handle
empty SOF_SRC_HASH_LONG"") which tried to use GIT_LOG_HASH as a fallback
for the SOF_SRC_HASH .ldc checksum but always fell back on ""0"" instead
because of a misunderstanding of cmake's surprisingly complex ""if""
operator.

Before Zephyr this was not an issue in practice because GIT_LOG_HASH was
empty anyway when SOURCE_DIRECTORY/.git was missing, so there was
nothing to lose.

For the Zephyr builds this will now use the SOF SHA1 as the .ldc checksum
for now. Probably not ideal yet but far better than the current constant
""0"" which means no check at all.

Also log the SOF_SRC_HASH fallback value now and change the second
fallback (when GIT_LOG_HASH is also missing) from ""0"" to the
searchable hexspeak ""baadf00d"".

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",120,43,1
"thesofproject/sof","c522b6692e1444ca52bedda958260895a77f7a08","lbetlej","2018-11-19 12:56:18","false","LDO Control - unification of control macros for LDOCTL bits

Unified access macros across ApolloLake, CannonLake, SueCreek, Icelake.
Including clean up in HP SRAM init procedure at boot loader.

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",40,6,0
"thesofproject/sof","3eb03b9982163707fb13916ce274cdbeabaf7b44","lrgirdwo","2022-12-12 22:21:42","false","host: add support to build SOF as a static library.

Support a static library target for SOF.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",103,54,1
"thesofproject/sof","c80d288ea2d88b5a1b0d47d5ca027ac3ca003166","jajanusz","2019-04-25 12:54:04","false","platform: add CONFIG_LIBRARY

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",47,11,0
"thesofproject/sof","3e1c160e5053eae66769ad19955df83a08218270","ranj063","2021-12-06 05:03:26","false","topology1: fix errors due to newline in list generator

The recent changes to the string parser in alsa-lib cause the topology
builds to break for some topologies. Avoid adding a newline for the bytes
data for the MUXDEMUX config by introducing a new macro for creating lists
without new lines between items.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",123,42,1
"thesofproject/sof","30f42d808e5e628ba46dcf84fdfcd7514eb03dc3","abonislawski","2019-03-22 08:13:22","false","platform: merge platform.h and plat_cfg.h

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",65,10,0
"thesofproject/sof","192030b3b3365c71360a64b847ba9887c1a15cb1","RanderWang","2022-09-08 10:01:39","false","module_adpter: add get_data support

Get_data returns binary data to host.

Signed-off-by: Rander Wang <rander.wang@intel.com>",105,51,1
"thesofproject/sof","66a1bcf865c26e6779fd64d37c66deccd939381b","RanderWang","2018-08-20 07:48:52","false","cnl: check status of both host & fw before sending ipc msg in fw

The busy bit of DIPCIDR register is cleared when host is ready,
and the done bit of DIPCIDA is cleared after fw confirms the
reply message from host. So fw should check these two conditions
before sending ipc msg to host

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",18,3,0
"thesofproject/sof","f8451fd8b17feb114cbecc2b12b3a3f62e64e0ac","RanderWang","2021-12-14 07:58:17","false","ipc4: fix pause issue with windows audio player

(1) IPC4 does not need mixer workaround.
(2) trigger pipeline in release state for pause-running case

Signed-off-by: Rander Wang <rander.wang@intel.com>",112,42,1
"thesofproject/sof","12f2d9b2c822ea215c5bca5be9613abc22f391dd","ktrzcinx","2020-09-25 13:18:32","false","logger: Refactor UUID parsing

Split UUID formatter parsing from general formatter parser,
to make functions shorter and less complicated.
By the way reduce number of loops.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",64,28,0
"thesofproject/sof","4bec5b292c708a84a22a0a4d84e9747d61ecd70d","kv2019i","2022-12-19 14:41:48","false","logger: exit with error if calloc fails

In user-space tools, memory allocations can reasonably be expected to
always succeed. Make this assumption explicit by adding error handling
after calloc.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",92,55,1
"thesofproject/sof","8d9f9a7267d7e43ec17f9f7e1941b30ff9ce7dc5","bkokoszx","2018-07-17 12:38:22","false","test: component: change to use 1 assert per test

I've fixed multiple assert occurance in comp_set_state test functions.
Now single UT has only one assert. There is also a change of the name
of the test file due to name restrictions.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",13,2,0
"thesofproject/sof","fe60b033932e51d22f79cdee158446abf5b94f60","singalsu","2022-06-15 17:40:54","false","Math: FFT: Add missing headers include to ffh.h

This fixes a build issue when the module does not include
some of these headers.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",120,48,1
"thesofproject/sof","38af5ef4deecb48f9decee0e02fd4b5c02194a1a","singalsu","2018-08-31 11:45:39","false","DMIC: Handle possible null pointers from rzalloc()

This patch adds the missing handling of null pointers for the case
if memory allocation would fail.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",27,3,0
"thesofproject/sof","547135779262cb7b4aadb4d42b7d4c9762547976","singalsu","2022-11-07 18:07:24","false","Tools: Test: Audio: Replace the gaussian dither with triangular

The gaussian (or other normal distribution shape) dither impacts
too much 16 bit signals. The triangular probability density
function (TDPF) is a sufficient compromise between added noise energy
and de-correlation of PCM samples.

This change improves for 48 kHz 16 bit audio measurement the THD+N
from -62.6 dB to -73.6 dB.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",93,53,1
"thesofproject/sof","6ce1890443d12946b053ac02928a0f8407f7e654","marcinszkudlinski","2023-09-06 12:47:48","false","sparse: do some cosmetic changes

after removal of __Sparse some of lines may be
formatted differently.

This commit contains cosmetic changes only

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",21,63,1
"thesofproject/sof","447359f16f7d85f9114e5dee72c90734e6b08de2","ktrzcinx","2020-07-07 18:59:37","false","platform: pm: Add HP_CLK management to pm_runtime

Clock manegement is important part for power consumption optimization,
what is a task of this module.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",74,25,0
"thesofproject/sof","662e70964f643e1592276eb93e20928921ada452","ktrzcinx","2019-11-07 15:38:05","false","kconfig: dai: selective build by CONFIG_FORMAT

Include in footprint only support for selected
data formats. It may make footprint lighter.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",53,17,0
"thesofproject/sof","8e6661dc63d7df0af9154a3fd063b587a0a2009a","ktrzcinx","2019-11-06 20:37:49","false","kconfig: fir: group functions by supported data type

It will be helpful in next step -
- selective function compilation by
supported data type

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",52,17,0
"thesofproject/sof","dc5e7681deaf99e75fa5b24d30e94b97d529ba87","ktrzcinx","2020-07-01 09:17:22","false","component: Add functions to component invalidate and writeback

For platfoms with cached memory, there should be dedicated API
for memory handling in component.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",70,25,0
"thesofproject/sof","f5f36870a6322b37b5231753b8508ff1ae58597a","bkokoszx","2019-02-26 13:01:48","false","idc: deduplication of idc headers for cavs

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",67,9,0
"thesofproject/sof","efca29469fde109def6edee136be7428b97e70bb","bardliao","2022-11-15 07:59:40","false","Topology2: pipeline: gain-capture: add 16 bit format support

16 bit format was missed in the pipeline.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",95,53,1
"thesofproject/sof","c86b6b6bdd3a5a2223bb3670d4c8d44652a2c1df","lgirdwood","2018-09-10 15:54:55","true","Merge pull request #162 from bkokoszx/ssp_clock_idle

drivers: apl-ssp: change clock idle state",33,3,0
"thesofproject/sof","eba0e303c8590d5dfae8e43072a018a194427e31","mrajwa","2019-07-31 09:57:30","false","kpb: add internal status logger

This patch adds a container of KPB statuses.
So every time KPB changes its status it can
also log that change. In case of any error
this log of status changes can be read back
providing nice history of KPB actions.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",53,14,0
"thesofproject/sof","c3fd9608958c2c0ec5e7292642c0f06ad7815dd0","lgirdwood","2018-09-25 19:40:36","true","Merge pull request #404 from tlauda/topic/idc_comp_cmd

idc: add IDC_COMP_CMD message",37,4,0
"thesofproject/sof","31d8aa4c7a8a1656b9ead18d16a9625dae4ca1e1","lgirdwood","2018-08-07 16:41:41","true","Merge pull request #207 from xiulipan/travisciupdate

ci: travis: update to use docker hub image",18,2,0
"thesofproject/sof","e3c68211c7c94dd318f2ad4c33cd6051a8a068f6","marc-hb","2021-04-13 17:46:48","false","smex: log versions with a dot (3.18.1) instead of a colon (3:18:1)

Logging versions like ""3:18:1"" deceive Emacs (and maybe others) because
they look like an error location produced by a compiler. When compiling
Emacs wrongly believes this an error location and offers to jump to it.

The colon ':' is also a reserved character in most filesystems and an
unusual version separator.

Before:

fw abi main version:	3:18:1
fw abi main version:	3:18:1

After:

fw abi main version:	3.18.1
fw abi main version:	3.18.1

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",81,34,0
"thesofproject/sof","3ea21a3afdb3af3fe2da3fc1e15e8444baf20754","marc-hb","2021-06-04 02:43:36","false","installer: automate the creation of symlinks inside intel-signed/

In other words:

├── intel-signed
│   ├── sof-cfl.ri -> sof-cnl.ri
│   ├── sof-cml.ri -> sof-cnl.ri
│   ├── sof-glk.ri -> sof-apl.ri

Doing this manually is time-consuming and error-prone.

Not for ehl because it has a different key.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,36,0
"thesofproject/sof","05fef941497a5a1338bfa03cdc5eb2af036b08c5","marc-hb","2021-10-08 21:57:57","false","cmake: don't post-process build/src/arch/xtensa/sof-platf in place

No build target should ever change files in place. This causes subtle
and time-consuming issues:

- The most obvious, logical issue is making incremental builds
  impossible: if the build stops at the ""in-place"" step for any reason
  then the build system does not know where to resume.

- When working on the build system itself, the file
  `build/src/arch/xtensa/sof-platf` after `make `prepare_sof_post_process`
  is different from the one after `make sof_post_process` which is
  confusing and time-consuming.

- Additional confusion in this case (not addressed by this commit): the
  final build/sof.ri is NOT generated from build/sof but from
  build/src/arch/xtensa/sof-platf instead.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",121,40,1
"thesofproject/sof","9b2453e2366da640760c4d0a0b0d2094c9622978","marc-hb","2022-12-15 06:57:23","false","xtensa-build-zephyr.py: compress sof-info files in parallel

On my system this brings the install_platform() duration down from about
3 seconds to less than 1 second.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",92,54,1
"thesofproject/sof","9bd130db1cb75b33762cef37d26bb213ec4626e3","lyakh","2021-11-24 13:14:18","false","task: add a function to check if a task is active

Tasks currently have 9 states defined for them, but they all can be
divided into two groups: active and passive. We define all tasks on a
scheduler queue as active. All other tasks are passive.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",129,42,1
"thesofproject/sof","0dd03866f18c81b51c5e86faaa73016bde10cc35","lyakh","2019-05-06 11:04:18","false","kpb: only build if enabled in .config

Kconfig has an entry for COMP_KPB but it isn't used for building. Add
a suitable clause to CMakeLists.txt.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",47,11,0
"thesofproject/sof","02e06263f009d80704f873e4ab7c5d6b3f372c21","mrajwa","2019-10-17 12:49:15","false","kpb: display state changes in more convenient way

This patch display state changes in trace log as hexadecimal
numbers. Therefore KPB state changes are easy to follow.
As an example ""state log 65656567"" shows that KPB has been
changing its state from 6 (draining) to 5 (buffering) and
eventually got reset request (state 7).

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",63,16,0
"thesofproject/sof","f9a491f405eac3d4529734b5793be1d109429ad3","lgirdwood","2018-09-20 10:49:56","true","Merge pull request #397 from xiulipan/hostfix2

host: do not free the list header in host_reset",36,4,0
"thesofproject/sof","fdda8f6820cd81348efeed2e11e18fea7477e35c","jajanusz","2019-04-25 13:44:21","false","host: enable kconfig

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",47,11,0
"thesofproject/sof","b496df0ea84a535552769b320a0cfbb024229fff","ktrzcinx","2020-06-30 05:58:46","false","lib: clock: Trace clock change

It's nice to know what is current clock frequency, especially when
some troubles with performance occurs.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",72,25,0
"thesofproject/sof","1f092df4012def1c541bf7c627ecffd51584093b","ktrzcinx","2020-07-03 10:34:41","false","pcm_converter: Convert linear memory regions

Usage of pcm_convert_as_linear() function speed up conversion
and make core convert function easier to implement.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",71,25,0
"thesofproject/sof","70256ff38122c11e5bb3e38ae3a6a1b4e41532fd","tlauda","2020-01-17 12:14:20","false","component: make comp_driver_list shared

Makes comp_driver_list shared. Also all of the
comp_driver_info structures are shared as they will
be accessed from SMP code.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",79,19,0
"thesofproject/sof","d740a3e068eae57ecf08df215ee19102b54981ee","tlauda","2019-11-20 13:34:36","false","eq_iir: use buffer_copy function

Uses buffer_copy function for bypass mode to avoid code duplication.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,18,0
"thesofproject/sof","0f2315fba8f018aa23b63f5db808eeef431d9e91","tlauda","2019-10-04 11:35:54","false","ssi-spi: align ssi-spi driver with latest DMA scheduling

Aligns ssi-spi driver implementation with latest DMA scheduling
changes.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,16,0
"thesofproject/sof","c694c098240a7e3d468ccd5460a44018e64cfba8","tlauda","2019-03-01 07:51:27","false","buffer: add buffer callback

Adds buffer callbacks, which can be called
after produce or consume.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",67,9,0
"thesofproject/sof","f2241bc0196b3f091a9d64e13a0dd23ea6359068","tlauda","2019-12-16 11:17:13","false","ipc: change ipc_queue_host_message replace argument to bool

Changes one of the arguments of ipc_queue_host_message function from
uint32_t to bool.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",74,18,0
"thesofproject/sof","9e4d1aae900a7c816ec583f6935c1c6a1f79ff76","tlauda","2020-01-27 10:19:58","false","dw-dma: add method to retrieve lli from memory

Implements new platform specific method, which allows for
retrieving linked list item from memory. The best example
are cAVS platforms, which need read it through uncached
memory region. Rest of the platforms currently don't need
the implementation, since they don't support hardware linked list.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",78,20,0
"thesofproject/sof","c35b8875c28a3b82aa292082c1ffae29cf4996d3","cujomalainey","2020-11-13 21:08:57","false","kpb: fix logic bug

Storing the address of a know existing address space will always result
to be true. Therefore this variable is actually doing nothing. Remove
reference to fix this.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",73,29,0
"thesofproject/sof","e7120ce2a1f514e93067f57ad4b506e636406b32","rfredzim","2022-06-03 09:05:46","false","platform: ace: define a dedicated heap section

Define a dedicated .heap section in case of zephyr build.
Such explicit section is required to allow for unmapping
of unused physical pages which can be later used for
loadable library/modules support.

Signed-off-by: Rafal Redzimski <rafal.f.redzimski@intel.com>",115,48,1
"thesofproject/sof","fb838de4137b72a57d08e933f0cb78a09b14fe3e","ktrzcinx","2020-10-16 13:08:20","false","buffer: Move buffer_params_match() implementation to buffer.c file

Assertions don't show proper location for functions implemented
in header file.
Before changes, example location of this assert was:
   Location: src/audio/pipeline.c:303

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",72,28,0
"thesofproject/sof","44a25a1a6475156fa78fca80c70a0ca9dfc50683","ktrzcinx","2020-05-20 13:46:21","false","logger: Do not open input file for ldc_dump

Input file is not needed for these functionalities, so shouldn't be
opened.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",99,23,0
"thesofproject/sof","0a1a19fe2e58e12271ec41a6f3e5c6bb3a8b2c09","iganakov","2022-11-04 16:21:54","false","mtl: enable kd module

Enable building KD module on MTL platform

Signed-off-by: Ievgen Ganakov <ievgen.ganakov@intel.com>",90,53,1
"thesofproject/sof","ede50307b15701b10e5d3633068a365cb75cef36","bkokoszx","2018-08-20 13:28:36","false","drivers: apl-ssp: refinement in DSP_A and I2S mode.

In order to get one bclk delay between frame sync and
data I only set FSRT flag in sspsp register. There is
no need to set SSPSP_STRDLY bits.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",18,3,0
"thesofproject/sof","15885b76e14adba854b6d4227e84ffc295ee3fd6","kv2019i","2021-10-18 08:12:51","false","zephyr: make SYS and RUNTIME zones cached

Add caching to more heap zones. With addition of SYS, SYS_RUNTIME
and RUNTIME the mapping is now aligned with XTOS allocator.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",122,41,1
"thesofproject/sof","bccc9cb2caa9a84afb2661c0b180e6e598363c75","kv2019i","2020-07-09 10:58:37","false","ipc: add IPC documentation to header.h

Collect key IPC documentation to header.h and ensure it is
included in public API documentation in the doxygen output.

Specifically move the IPC compatibility rules documented in ipc/handler.c.
This is important information to all IPC implementers for host
and DSP, so should be part of API documentation.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",77,25,0
"thesofproject/sof","76e773bb4ff2c94547980b2db1f7a9a0f511fde2","kv2019i","2021-06-04 10:53:42","false","drivers: dmic: fix multi-fifo logic in interrupt handler

When the dmic driver is instantiated multiple times (e.g. for fifo-A and
fifo-B), the interrupt gets registered also twice.

While supported usage of interrupt interface, there is no guarantee that
the interrupt context data is for the expected dai instance. It is thus
not safe to modify the dai state directly or call dai_stop().

Modify the interrupt handler not to make any assumptions on which dai
instance is passed as 'data' matches a specific fifo instance.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",74,36,0
"thesofproject/sof","4abda5015327fdf9095f1ac6dcd5e2df67079fad","kv2019i","2022-08-26 16:43:51","false","zephyr: edf_schedule: add support for repeating EDF tasks

Extend the EDF scheduler adaptation to Zephyr to allow repeating
tasks. This allows SOF code to use the per core threads used by
EDF for more usages.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",113,51,1
"thesofproject/sof","d6e29ced243079e69beb055730a33ad103b377d7","singalsu","2021-06-04 12:47:41","false","Drivers: Intel: DMIC: Remove in_active parameter from dmic_stop()

Cleanup to trigger() since the parameter is not needed to protect from
errors with bit mask active FIFOs tracking.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",75,36,0
"thesofproject/sof","b3b937eb3d5a74aed4d0f048e4a95f2d264b4a02","singalsu","2022-02-08 14:15:12","false","Tools: Topology: Make PGA token objects unique

This patch avoids the issue that topology .conf file after m4
processing can contain multiple same name objects playback_pga_conf
for volume component tokens with possibly different settings. Alsatplg
does not error from such input and it's not defined which impacs
topology binary.

The new naming is pga_conf_X and and_pga_tokens_X where X is the
pipeline number.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",108,44,1
"thesofproject/sof","bb5d82b1fe902a3eafa428ba359a6a8f96b06d05","singalsu","2023-10-25 13:56:09","false","Tools: tplg_parser: Remove -Wl,-EL to avoid build fail with xt-clang

The linker option to indicate little-endian is not needed. It causes
build fail:

clang-10: errorclang-10: : -Wl,-EL: 'linker' input unused
[-Werror,-Wunused-command-line-argument]
error: -Wl,-EL: 'linker' input unused
[-Werror,-Wunused-command-line-argument]
clang-10: error: -Wl,-EL: 'linker' input unused
[-Werror,-Wunused-command-line-argument]
clang-10: clang-10error: : error: -Wl,-EL: 'linker' input unused
[-Werror,-Wunused-command-line-argument]
-Wl,-EL: 'linker' input unused [-Werror,-Wunused-command-line-argument]
gmake[5]: *** [CMakeFiles/sof_tplg_parser.dir/build.make:90:
CMakeFiles/sof_tplg_parser.dir/process.c.o] Error 1

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",8,65,1
"thesofproject/sof","fb6c3b7e9d01697419d8c4e5a4341f13fbc64a7c","singalsu","2023-06-30 16:00:03","false","Tools: Topology: Add test topologies for crossover component

This patch adds build of tplg1 development topologies
sof-tgl-nocodec-crossover-2way.tplg
sof-tgl-nocodec-crossover-4way.tplg

The tplg2 development topology version is
sof-tgl-nocodec-crossover-2way.tplg

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",37,61,1
"thesofproject/sof","e4447e272afbc73e076657497611f39700eafe72","marcinszkudlinski","2023-09-07 09:49:44","false","buf: remove buffer_acquire/release from buffer.c

remove unnecessary calls from buffer.c/h

this is a continuation of changes
from commit 4a036999118cfa7e491cbefc8eb6b737f50b7e33

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",21,63,1
"thesofproject/sof","0e83f7d094630c3cdbc93a138ccc91efcd4c7ffa","singalsu","2019-12-20 16:58:30","false","Topology: Set ASRC asynchronous mode plus add WM8804 and HDA tests

This patch adds two new test topologies. One is for testing ASRC
timestamp retrieving from HDA and one for WM8804 slave SSP interface
for APL. It is useful with UP^2 board with HiFiBerry Digi+ SPDIF
interface.

The asynchronous mode token is switched on in ASRC capture and
playback pipelines. It switches on DAI skew tracking feature
in ASRC.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",71,19,0
"thesofproject/sof","be1331aad70bd264111e3e8b738e073a77dc6901","singalsu","2019-04-18 18:07:29","false","EQ FIR: Update to support timer based scheduling in HiFi3 version

This patch adds for HiFi3 optimized FIR version capability to
process variable number of frames per every copy. The code is
also enhanced to process as much as possible of data with even
number frames FIR version that is more efficient.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",49,10,0
"thesofproject/sof","10b4c56ed94074b1108ea15f13690489c60bc9e6","ShriramShastry","2021-12-12 03:41:06","false","math: Add logarithm base E and base 10

fixpoint math log() and log10() function.  logarithm of a
number is the power or exponent by which another value
must be raised to produce an equivalent value of the given number
fix point  log10(x) is a derivative of log2(x)/log2(10)
and loge(x) is log2(x)/log2(e)

Signed-off-by: Shriram Shastry <malladi.sastry@intel.com>",120,42,1
"thesofproject/sof","46c2f7b38331db1ed9dda8696a02f525c5c9ae2c","keyonjie","2021-07-02 15:41:34","false","rimage: update rimage submodule to support cAVS SRAM size correction

9a26e4558094 config: apl: change image_size to the real SRAM size
8a2ea0044dcf config: cnl: change image_size to the real SRAM size
1de9ccca3388 config: jsl: change image_size to the real SRAM size
f52a078aadf1 config: icl: change image_size to the real SRAM size
8073ea3ef93c config: tgl-h: change image_size to the real SRAM size
9e50a02f1b0d config: tgl: change image_size to the real SRAM size

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",85,37,0
"thesofproject/sof","a7367f4fc0c6bb895e7cd0d010fa0cdfeb40e66a","keyonjie","2021-09-09 10:17:03","false","library: memory: align it to the latest cavs version

Make the size of buffer zone calculated at linking stage, to align to
the latest cavs version.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",118,39,0
"thesofproject/sof","4a34ab058ac9664253bf420be7a1b3074947ed5c","keyonjie","2019-04-08 11:14:58","false","topology: keyword-detect: get kpb configure data from ipc

We design to use bytes kcontrol to send kpb configuration data via IPC
from topology, here implement it.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",45,10,0
"thesofproject/sof","043bef37d65ccc6b52f7bd5dded4eeec10e68d04","andyross","2023-04-25 16:46:12","false","base_fw: Add missing header

CLK_MAX_CPU_HZ is defined in platform/lib/clk.h, unmasked by posix
work that lacks the same transitive headers.

Signed-off-by: Andy Ross <andyross@google.com>",52,59,1
"thesofproject/sof","c50eddce1f81b26a314101223749bccf38c95daa","andyross","2022-08-29 18:41:50","false","platform: Add Zephyr native_posix-based emulation environment

This extends the ideas in CONFIG_LIBRARY=y to implement SOF as an
application for the Zephyr native_posix architecture.  These are host
x86 or x86_64 binaries that include a full OS build, which can be used
(via mocked drivers) for testing against host validation environments
like ASAN/MSAN.

The mechanism uses the existing ""host"" architecture used by
CONFIG_LIBRARY, but adds a new platform layer named ""posix"", populated
entirely with stubs.

No driver integration is provided in this patch.  The resulting
executable builds correctly, but has no devices and won't do anything.

Signed-off-by: Andy Ross <andyross@google.com>",112,51,1
"thesofproject/sof","480cc17a7cb50b562d717b85b7244d931529c9eb","jajanusz","2018-10-24 11:42:34","false","platform: increase max streams count

make max streams and channels count for CNL&ICL
match numbers of APL

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",27,5,0
"thesofproject/sof","a3af6df17a5fecdf0a4ed043dca6573c0787e597","jajanusz","2019-09-30 16:43:18","false","manifest: add v2.5 definitions

New version of manifest introduced with TGL platform
uses SHA384 for component hash.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",66,16,0
"thesofproject/sof","6a9b90ba2566214b5a89e558ea5d1257e1afea92","jajanusz","2019-04-11 12:18:23","false","cmake: add RIMAGE_IMR_TYPE variable

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",51,10,0
"thesofproject/sof","295d0c131c794e6bc807ae973fcbd7cfbd3dcbf2","plbossart","2018-07-13 17:26:38","true","Merge pull request #81 from tlauda/topic/volume_processing

volume: fix processing size in HiFi3 implementation",15,1,0
"thesofproject/sof","3315681c6925bbf6f4680d6043623bdd96619122","plbossart","2022-06-14 22:04:02","false","cmake: make sure sha1 is computed without filters

Local filters in ~/gitconfig, such as

[core]
	autocrlf = input

can impact the result of git hash-object. Make sure no filters are
used so that the hash value remains unmodified across user setups.

BugLink: https://github.com/thesofproject/sof/issues/5917
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",118,48,1
"thesofproject/sof","8a1798e4e843a2a3c8f29387c091e105b4bc4810","LongWang100","2023-02-07 08:44:01","false","smart_amp: eliminat pops when switch device between speaker and headphone.

There are two pops caused by SOF Firmware.

Pop occurs when switch from headphone to speaker:
When switch to headphone, audio playback data still remains in
DSM internal processing buffer and not consumed by DMA.
So when switch back to speaker, the DSM processing buffer is not clean,
then pop noise occurs. We can clean and reset the point for
DSM internal processing buffer by called this function 'smart_amp_init'
in function 'smart_amp_prepare'.

Pop occurs when switch from speaker to headphone:
The feedback and feed-forward buffer processing should be independent.
But the number of frames processed by DSM feedforward is corrupted by
feedback buffer calculation. When capture pipeline exists,
the number of frames for feedforward is always same as feedback.
And the number of frames for feedback is zero at the first time
when the capture pipeline setup. Then the number of frames processed
by DSM feed forward is also zero though there are many frames in
playback buffer. So the available frames will become larger.
It is easy to exceed the limit size of DSM input.
Then it will cause the buffer overflow and we could hear obvious pop
noise from speaker. We fix it by calculating the number of frames
for feedforward and feedback respectively.

Signed-off-by: Long Wang <long.wang@analog.com>",55,56,1
"thesofproject/sof","b91818be32beceedb3ba3e87da52a5cb445c2fa9","ranj063","2021-06-27 22:38:45","false","drivers: intel: dmic: fix double free dmic_remove()

Disable dmic interrupts first followed freeing by the dmic task
and finally, free the dmic pdata.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",75,37,0
"thesofproject/sof","58e90d90202e895d704d03f9a086c284851e7177","abonislawski","2019-02-11 14:26:39","false","Kconfig: make DAI component a config option

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",59,8,0
"thesofproject/sof","cb80023b229e2c748506a362af1662499340c7cd","ranj063","2022-01-24 04:28:32","false","topology2: fix build issues with no command line definitions

If there are no command line definitions, the build fails because the
4th argument to the add_alsatplg2_command macro is NULL.

Fix this by using named arguments for the macro and checking for the
optional argument for command line definitions.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,44,1
"thesofproject/sof","1b337ef437ffda89f9e0746407b09bbabbcaabb4","dbaluta","2023-09-12 12:24:18","false","imx: sdma: Fix sdma firmware selection

CONFIG_SDMA_SCRIPT_CODE is always defined (even if not selected
it defaults to empty string) so this is not a good way of including
sdma script code header file.

Make use of HAVE_SDMA_FIRMWARE boolean config in order to select
the sdma script code header.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",19,63,1
"thesofproject/sof","a63f6b61ebb85f87efb4e0f8e289b311e1659549","tobonex","2023-09-19 10:51:50","false","dcblock: remove buffer_acquire from dcblock

remove buffer ops from dcblock module

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,64,1
"thesofproject/sof","b755b012bf12015cce05367673b2d8d056c9a1f6","tmleman","2022-10-26 11:51:42","false","ace: power: add custom power policy

This patch introduce custom power management policy for ace platforms.
Default version depends mainly on system tick. Definition on the
application side will allow later for better customization.

When CONFIG_PM_POLICY_CUSTOM is set, kernel expect that application will
provide custom policy implementation.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",95,53,1
"thesofproject/sof","53281d3b175c0174d540f1bbc00814ad89cfafee","jsarha","2023-03-06 13:07:53","false","topology2: mixer: Add no_wname_in_kcontrol_name attribute to comp tokens

Adds ""no_wname_in_kcontrol_name"" token, and the associated boolean
attribute to generic component attributes.

If the attribute is set to true for a widget then non of its
associated kcontrols names will have the widget name as a prefix. For
example ""gain.2.1 Post Mixer Analog Playback Volume"" becomes just
""Post Mixer Analog Playback Volume"".

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",55,57,1
"thesofproject/sof","41a61bcdc11f2d4c46588dd72dac87eeba46ba1a","lrgirdwo","2018-09-28 20:32:13","false","sue: Add build support for Sue Creek platform

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",37,4,0
"thesofproject/sof","378d7b78229572dbda984323142c3346b50e00e8","kv2019i","2022-01-31 18:43:54","false","zephyr: always use Zephyr interface to power up secondary cores

Currently there is code to power up secondary cores both
in Zephyr architecture hooks in wrapper.c, as well as in
SOF runtime-PM driver.

Some of this is necessary overlap until full replacement of
SOF runtime-PM is available. But for secondary core power up,
we can already clean up the flow and hook the Zephyr core
enable code to runtime-PM driver directly. This fixes startup
issues seen on Intel cAvS2.5 platforms.

Core power-down is left intentionally for runtime-PM driver
to handle as the related interface in Zephyr is not ready
for use yet.

BugLink: https://github.com/thesofproject/sof/issues/5018
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",104,44,1
"thesofproject/sof","89afb8784daeeacc40fba8c8d9a125decf6ca54a","cujomalainey","2021-08-26 23:22:38","false","init: fix uninitiallized variable

we should never need it, but this is just to silence cppcheck

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",119,39,0
"thesofproject/sof","ac33ac128ba001d58858141d2bb63308f2ff94c2","softwarecki","2022-09-30 11:45:03","false","ace: dma: Add dma configuration

Added code containing configuration of the dma channels.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>
Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>
Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>
Signed-off-by: Konrad Leszczynski <konrad.leszczynski@intel.com>
Signed-off-by: Anas Nashif <anas.nashif@intel.com>
Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>
Signed-off-by: Rafal Redzimski <rafal.f.redzimski@intel.com>
Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>
Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",98,52,1
"thesofproject/sof","2765b22049621825a7c9113480e1695f358c88b3","abonislawski","2020-03-16 17:10:03","false","probe-app: assume probe packet aligned

Thats because probe packet struct is packed and aligned to 1
which will generate a warning (error) with pointer assigning

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",79,21,0
"thesofproject/sof","c94ae772a0a484ab7f278ca09d15ad9b327f9187","ranj063","2022-02-10 21:14:01","false","topology2: cavs: split the passthrough pipeline into host and DAI parts

We cannot have one single pipeline going from the host copier to the DAI
copier. So split the passthrough pipeline into host and DAI pipelines.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",108,44,1
"thesofproject/sof","56784a9e29471ef2c0bfb96385d957110584ecdb","ranj063","2022-01-10 16:58:25","false","codec_adapter: remove load_setup_config()

Modify module_load_config() to handle both setup and runtime configs and
remove load_setup_config().

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","681a4338afa675d6dc8b6f60dd17ff7c5e8bb3fc","ranj063","2022-01-08 02:09:37","false","codec_adapter: rename codec_id in struct ca_config

to module_id. No functional change.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","a996be503174ec46a655954a0149bfdd480151c4","ranj063","2021-03-19 05:57:50","false","topology2: pga: Add mixer controls

Add the volume and switch mixer control objects for the
PGA class. The mixers will be added to the PGA widget
if the pga widget is instantiated with names for each
of the mixers as follows:

Object.Widget.pga.0 {
	Object.Control.mixer.1 {
		name	""1 Master Capture Volume""
	}
	Object.Control.mixer.2 {
                name   ""Capture Switch""
        }
}

If the name is only provided for one of the controls, only
that control will be added to the widget when building topology.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",72,33,0
"thesofproject/sof","f942a0338aecbff8c702f9b9ab0365e0df2c0e5f","ranj063","2023-05-16 20:43:26","false","topology2: src-gain-mixin-playback: Use host-copier

Replace the generic copier with host-copier in the class definition and
the instances.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",52,59,1
"thesofproject/sof","bb823ce7eb33e80faedf0c4921ceec8b8f822db4","abonislawski","2019-07-30 08:34:15","false","trace: fix build error if traces are disabled

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",51,14,0
"thesofproject/sof","3fe9e7d74e2f7db210dfc1de2697c9f7baf389d6","ktrzcinx","2020-01-08 14:51:37","false","pcm_converter: Remove unused code from volume

There is no need to keep dead code.
Currently host and DAI component is responsible for format conversion -
- using pcm_converter functions.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",71,19,0
"thesofproject/sof","1891a91e922df75a47be6e098a08a130ebd9a27d","singalsu","2020-11-09 17:22:20","false","Drivers: DMIC: Fix a mistake in FIR length and update the entire set

The maximum length supported by HW is 250 while the existing decimate
by 5 set is 251. Load attempt of it failed always. However it was
needed only in a rare 8 and 16 kHz FIFOs configuration request.

The new coefficients set fixes the issue. Also an alternate decimate
by 3 set is removed as unnecessary and a decimate by 10 set is added.

The DMIC filters design tool was updated for including to SOF tools.
The specification adjust iteration in FIR design was improved to use
finer step for bandwidth (the two four digits numbers in file name
are band frequencies relative to sample rate) so many of the
coefficients are changed. The CIC response estimation gives slightly
different result depending on for which sample rate the decimation factor
is. That is another reason for changed coefficients.

This set is used to have the reference generate script available that
creates these coefficients exactly.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",76,29,0
"thesofproject/sof","152c57bb4ca2a5adda724678f39225f15e3d1a01","singalsu","2022-08-11 16:08:16","false","Test: cmocka: Add tests for window functions

This patch adds cmocka test cases for window functions library.
The calculated windows are compared with RMS error criteria
to Matlab calculated windows in header files. The header files
are directly generated by script ref_window.m.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",116,50,1
"thesofproject/sof","ad7918106d7932dde36c19ab77ba5dc6598d25c0","singalsu","2023-08-21 16:34:18","false","Audio: Crossover: Fix build error

The component build fails if it is enabled in Kconfig. The variable
pipeline_id is not defined, it should be sink_id.

Fixes: 5bcbcf19f7e1 (""Audio: Crossover: Convert to module adapter"")

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",24,63,1
"thesofproject/sof","af947cb63dd6269e004b11b4b4cde8a7c0424a94","marcinszkudlinski","2021-12-06 13:20:43","false","config: Add toml config for mtl

This patch will add mtl support

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",124,42,1
"thesofproject/sof","7eed17e3ce1317bc98dcee9b0bc1fe1e8f81d94f","tlauda","2020-01-15 16:06:48","false","interrupt: use platform_shared_commit() for irq_cascade_desc

Uses new platform_shared_commit() function to commit
shared irq cascade desc data.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",75,19,0
"thesofproject/sof","93f8859148f1ae97a754899e69befb5cb05bcec8","ktrzcinx","2020-03-24 08:37:23","false","sof: trace: Remove error prefix from logs

This prefix is added in logger converter, so it shouldn't be
added manually.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",64,22,0
"thesofproject/sof","5871d0f976be6ce40f0daf84688a68ca99f0495a","kuanhsuncheng","2021-10-05 05:04:44","false","CODEOWNERS: add code owners for mt8195

Add code owners of mt8195 for mediatek platform.

Signed-off-by: YC Hung <yc.hung@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",122,40,1
"thesofproject/sof","6f5eabd6eb17ac61a863b4ee2ae3c779281afbe9","serhiy-katsyuba-intel","2023-07-28 12:05:06","false","module_adapter: Enable buffer produce notifications required by probe

Probe module subscribes to buffer produce notifications in order to
perform data extraction or injection. Hence this fix is required to
enable probe feature.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",31,62,1
"thesofproject/sof","33d95bc72332567f88e3c9b6edcc5a5b8751c8d2","aborisovich","2023-02-23 02:49:06","false","Set SOF C++ language standard to C++17 for Zephyr builds

Recent changes to Zephyr header files written in C++
use templates and features provided by the C++14 standard.
Meteorlake board that is built with Zephyr has some C++ code
that uses those headers.
We upgrade straight to C++17 since it is newest standard currently
supported by xt-clang toolchain.
This change does not affect any other boards since the do not
have any C++ code as the time of writing.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",56,57,1
"thesofproject/sof","731090510fe683a32c256dcd55f70f5214d09936","cujomalainey","2020-11-10 00:32:59","false","library: add missing header

We are using int types in this header, we need inttypes.h otherwise
sometimes we fail to build.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",73,29,0
"thesofproject/sof","803f61323c66eae84e0207679273f7919fdf2993","cujomalainey","2023-07-13 17:35:04","false","audio: constify buffer_fmt get args

we aren't modifying it, so make it const

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",32,61,1
"thesofproject/sof","57e0e149aaa2359a541fcb3ecb6390a314471333","cujomalainey","2022-02-24 22:15:26","false","topology1: add build with no hotword or 16k dmic

Some builds require more memory, hotword can be handled by CRAS so lets
add the ability to drop it. The 16kHz dmic is not needed either so lets
drop that too.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",111,45,1
"thesofproject/sof","65a33a537c29aa2edbccb2c9489bbcb8893ed85b","iuliana-prodan","2021-07-23 15:23:18","false","zephyr: imx: enable second level interrupts handling

On i.MX the DMA interrupts are routed via IRQ_STEER.
In order for this to work we need to:
- make any second level interrupts handling go
through interrupt-irqsteer.c;
- use first level interrupt handling from
wrapper.c.

TODO: Implement a driver for the IRQ_STEER in Zephyr,
to replace the legacy code (interrupt-irqsteer.c).

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",99,38,0
"thesofproject/sof","e95edfe48da53bb373fa8e244417bedcd1c86cdf","tlauda","2019-09-10 14:36:51","false","platform: remove unused PLATFORM_WORKQ_WINDOW define

Removes unused define PLATFORM_WORKQ_WINDOW.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,15,0
"thesofproject/sof","e9d84cbc43918ce5d3261e038d2de63a1c9b39cb","tlauda","2020-05-28 08:46:32","false","task: increase default stack size for EDF tasks

Increases default stack size for EDF tasks. Some of the
IPC operations are very stack heavy, so let's make sure
they won't exceed stack.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",96,24,0
"thesofproject/sof","24201a650d8946f1df5b2d32e3f2b8f01b669cb5","tlauda","2019-09-16 09:55:33","false","schedule: implement DMA scheduling domain

Implements DMA scheduling domain. It allows to initialize
another low latency scheduler and schedule on any DMA channel.
The functionality stays the same as the one already done in
DMA drivers e.g. DW-DMA.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",61,15,0
"thesofproject/sof","16e35e61e4dfae2f947e78969bd620a1c6e389dc","tlauda","2020-01-13 14:28:57","false","trace: use platform_shared_commit()

Uses new platform_shared_commit() function to commit
shared trace data.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",77,19,0
"thesofproject/sof","507bb4e182d7827d6415e810684231463145e775","tlauda","2019-12-11 15:26:55","false","clk: remove unnecessary additional structures

Refactors generic clock API to simplify used data structures.
It makes more sense now and spares us a little bit of memory.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",73,18,0
"thesofproject/sof","b561eb86922cc959f7f067be8bce2e10068e06aa","tlauda","2018-10-04 11:04:29","false","alloc: change way of allocation core context for slave cores

Now master core can allocate core context from the system
heap of slave core.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",34,4,0
"thesofproject/sof","558dceeb9032becaec453eea5543ed826fcc4e1b","tlauda","2019-03-12 12:29:23","false","pipeline: add check for pipeline scheduling mode

Adds simple method to check if pipeline is scheduled
with timer or not.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",69,9,0
"thesofproject/sof","ed7067f7f43695ab1e6257c40e9473649cb9c30b","ujfalusi","2021-10-15 06:07:13","false","dma-trace: Simply return with if dma_trace_buffer_init() fails

dma_trace_buffer_init() can only fail if the rballoc fails so there is no
need to call dma_trace_buffer_free() as the buffer has not been allocated

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",123,40,1
"thesofproject/sof","2cbb1a02b8dfe565b06eb6f58596ea1b1f543d44","akloniex","2019-08-23 22:34:40","false","dmic: ssp: correct misused dma_get_drvdata instead of dai_get_drvdata.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",54,15,0
"thesofproject/sof","9af90ce211203741d6b377d3aed7b837e2734306","akloniex","2018-11-05 14:02:39","false","debugability: Add components ids to trace_event macros

2 arbitrary IDs may now be passed to specialized versions of
trace_event macro: trace_event_with_ids. Also optimized runtime
stack usage of _trace_event functions.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",38,5,0
"thesofproject/sof","7c8e272a2a0524f8c9226d3ccf1625e555d865aa","tinghan-shen","2022-01-11 09:27:15","false","platform: Add build support for mtk mt8186 platform

Add CMakefile for mtk mt8186 platform to build.

Signed-off-by: Tinghan Shen <tinghan.shen@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",115,43,1
"thesofproject/sof","8d5e3a8b52995f625d10e08637ee26eb7e2c748b","RanderWang","2023-01-10 08:44:31","false","ipc4: enable google AEC building for zephyr

Enable dummy AEC building support but still need to
enable google AEC in overlay file for chrome.

Signed-off-by: Rander Wang <rander.wang@intel.com>",54,55,1
"thesofproject/sof","644a1b4746a9424750c62abda8db521f208a5a20","jajanusz","2019-06-01 20:13:48","false","license: use spdx identifier in python files

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",72,12,0
"thesofproject/sof","1db2173489a75d10d64ce27bf75a79a917a22504","DianaGabriela27","2019-03-06 13:02:48","false","rimage: file_simple: Move open brace to next line

Open brace '{' following function declaration get_mem_zone_type
goes on the next line.

Signed-off-by: Diana Ungureanu <diana-gabriela.ungureanu@nxp.com>",66,9,0
"thesofproject/sof","d484b76ffb0562c2bdc87d1e8f34b62a76c1b78f","aiChaoSONG","2023-07-10 09:53:09","false","topology2: add SDW topology for Dell SKU0C87 devices

Dell SKU0C87 devices have below config:

SDW0: RT714 DMIC
SDW1: RT1318 Speaker
SDW2: RT1318 Speaker

Add topology support in this patch for Dell SKU0C87 devices.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",29,61,1
"thesofproject/sof","3c6f2c1c635123029040d939f2407b4886b5c46f","cujomalainey","2023-07-14 00:03:05","false","audio: igo: add igo stub library

Added for CI and fuzz testing

Also remove exec permissions on related source files

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",32,61,1
"thesofproject/sof","63e3edeb7c2adc934893133d817fd2d58657f2e3","plbossart","2019-01-16 05:08:02","false","src/audio/fir.h: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","74a1a3588247df02303c83d39933c2ae618d713b","tinghan-shen","2022-11-11 11:33:53","false","platform: mt8186: Disable ADSPPLL in S3 stage

The ADSPPLL clock is expected to be disabled in S3 stage.
Fail to disable it may have premature wakeup in S3 stage.

Signed-off-by: Tinghan Shen <tinghan.shen@mediatek.com>",97,53,1
"thesofproject/sof","9643a986dda97c6cb339d5c75c0eaa178d8317da","fkwasowi","2023-04-03 09:18:04","false","kpb: update UUID

Change of uuid
regarding Windows compatibility

Signed-off-by: Kwasowiec, Fabiola <fabiola.kwasowiec@intel.com>",52,58,1
"thesofproject/sof","bd5c275a92ae70a1f4ff8817904bfd1e816d4ad3","ktrzcinx","2020-01-24 12:12:24","false","audio_stream: Fill comments to each data field

Dispel possible doubts about content of struct fields by adding
descriptive comment to each one.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",79,20,0
"thesofproject/sof","89ef0af07612c0bcf1a85fec3871d0c31e60087b","ktrzcinx","2019-10-24 08:53:05","false","ipc: Refactor ipc_comp_dai_config function

After refactor there is lower level of indentation in function.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",66,17,0
"thesofproject/sof","c2cdd4356deb376f46c049038fede354696b53e6","ktrzcinx","2020-01-13 09:03:40","false","kwd: Set activation threshold for s32 format

Revert changes introduced in commit 7003c1f for s32 format.
Moreover explicity declare threshold for s32 on same level as
for s24 to indicate that it is intentional.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",76,19,0
"thesofproject/sof","21d3ece9ac54e6a10fa839df49777221338bfbda","ktrzcinx","2019-10-28 14:09:17","false","trace: Add pipeline id to kpb traces

It will be helpful during debugging components
to see correlated pipeline id.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",68,17,0
"thesofproject/sof","d07035d9814130743159c29555a9d9d10cd0b1b6","ktrzcinx","2020-07-31 07:57:21","false","logger: Align g flag description in help message

Help message, near -g flags looks like:

sof-logger:      -f precision           Set timestamp precision
sof-logger:      -g             Hide timestamp
sof-logger:      -d *.ldc_file          Dump ldc_file information

before changes, and after apply this patch, descriptions are aligned.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",80,26,0
"thesofproject/sof","c5d7ecb2e204c25c3db9fd0eca01eb2bfc7da438","ktrzcinx","2019-11-07 06:47:55","false","kconfig: selector: group functions and callbacks by supported data type

It will be helpful in next step - conditional code compilation
according to configuration

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",53,17,0
"thesofproject/sof","806b7c3713a4d7440eafc0f88e3d0c06eae826f6","ktrzcinx","2020-06-19 11:39:35","false","demux: Fix buffer lock in copy function

Sink buffer should be locked and invalidated (inside lock function)
before reading, to acheve consistent data between multiple cores.
Otherwise readed data may be outdated.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",78,25,0
"thesofproject/sof","7cfd2187c5f5b99cff8407ad1ab80daf613949a6","ktrzcinx","2020-07-24 13:48:49","false","eq_fir: Spell fix

Pass-trough -> Pass-through

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",78,26,0
"thesofproject/sof","a03bf08f54a6cb8cae787c3e827c1e4780768029","ktrzcinx","2020-04-28 06:17:31","false","audio_stream: Add function returning number of samples without memory wrap

Such a function will be needed to calculate chunk size during processing
data from circular buffers by functions working on linear memory
regions.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",94,23,0
"thesofproject/sof","f79bbb296d77bf0d8fda7146972aba88da4b2de3","keyonjie","2021-06-09 10:19:51","false","fw_ready: add D3_PERSISTENT to indicate if restoring from D3 supported

Add flag SOF_IPC_INFO_D3_PERSISTENT to inform host driver if the IMR
restore feature is supported to the fw_ready message, then the host
driver can decide whether to choose it or not.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",81,36,0
"thesofproject/sof","00c51bde785e735a09c25b9b45ea472978b1c890","singalsu","2022-11-07 17:57:44","false","Tools: Test: Audio: In markers find fail show the captured waveform

This patch adds to chirp test (executed first usually) plot of
audio waveform to help understand why the audio markers were not
found. The reasons like very low level or corruption or large
time shift can be seen from the plot easily.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",93,53,1
"thesofproject/sof","83a2ae813c36b0af9229480f430609c035fc13c9","singalsu","2023-05-17 12:22:21","false","Tools: Tune: DRC: Export configurations for topology2

This patch changes a bit structure of example_drc to export
conveniently several different blobs. The changed script
exports configurations blobs for disabled and enabled mode.

Two functions for IPC4 and topology2 compatibility are
generalized from EQ to common directory. The EQ and other
tools will be updated to later to use the common get_abi()
and tplg2_write() functions.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",51,59,1
"thesofproject/sof","84c9033feafeda9aa1fcc90f1e129f317ae7975b","singalsu","2021-11-18 16:02:29","false","Tools: Test: Audio: Add sound direction test for TDFB

This patch adds Matlab script tdfb_direction_test.m. The test
simulates acoustical microphone array capture with 360 degrees
rotated noise source. The test topologies build adds an array
identifier to component name in topology file name. That
allows the scripts to simulate with several arrays. Now a
basic 2 mic array (no array suffix, just tdfb), 4 mic line,
and 8 mic circular are tested. Test pass/fail is so far only
visual check from plot.

The existing tdfb_test.c is extended to perform test with the
three test array configurations.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",128,42,1
"thesofproject/sof","3d040c72430c30333dc4823547906dd33671bdae","singalsu","2023-09-25 15:42:51","false","Tools: Testbench: Add Google RTC with mockup to testbench

This patch allows to load and run it in testbench.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",20,64,1
"thesofproject/sof","c4a6713f70eb00bb84835c1b34ec3be5c29b5443","marcinszkudlinski","2023-03-24 11:57:31","false","src: src should not use buffers when using module API

Src can module API, but is still getting data from buffers
What more dangerous, it is calling buffer_acquire on source
and sink.
Both buffers have already been taken by module adapter, so
it may lead to deadlocks.

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",57,58,1
"thesofproject/sof","37850f57478679b651a81e2ed02699122a122df2","singalsu","2020-03-25 16:24:42","false","DMIC: Rename DMIC IPC struct field reserved_2

Since the SOF kernel and firmware headers need to be the same the
rename is also done on firmware side. The fifo_bits_b parameter was
deprecated in firmware ABI version 3.0.1 and the value has been
ignored. Since the kernel sets this in case of ABI version 3.0.0 or
earlier the name reserved_2 is not appropriate.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",65,22,0
"thesofproject/sof","957cebf64c92cfdb2a313c484965b2b5897bda19","singalsu","2022-09-02 12:46:00","false","Test: cmocka: Add test for DCT library

This patch adds 16 bit DCT matrix generation tests. The reference
DCT matrices are generated with Matlab or Octave with script ref_dct.m.
The test in dct.c compares SOF DCT lib generated matrix to reference
matrix and checks absolute and RMS error.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",118,51,1
"thesofproject/sof","dec770dd8d3733a33f3ff17767a939d216e09437","singalsu","2023-08-29 15:36:23","false","Tools: Tune: Add tplg2 support to dcblock setup tool

This patch adds generate of blob for tplg2 and ipc4 in
formats .conf, text, and binary formats.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",25,63,1
"thesofproject/sof","b81495364738affa24dfae67e83545667140c2e1","singalsu","2021-01-04 10:04:27","false","Tools: Topology: Change volume demux playback ramp length to 20 ms

The earlier length 250 ms is quite long and makes very short UI
tones etc. quite silent. The 20 ms long ramp with zero crossings
detect is used in rest of this topology for playback so this is
changed to similar.

The topologies those use the changed macro are:
sof-icl-rt711-rt1308-rt715-hdmi.m4, sof-apl-demux-pcm512x.m4,
sof-tgl-max98357a-rt5682.m4, sof-cml-demux-rt5682.m4, and
sof-tgl-nocodec-ci.m4.

Fixes: #3707

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",72,31,0
"thesofproject/sof","16df30a73dbb0a0510c9cfd235dacbb662460fb7","tlauda","2019-07-17 10:47:30","false","arch: xtensa: remove level 6 irq define from xtos

We don't have any platform with level 6 interrupt support.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",46,14,0
"thesofproject/sof","ab2878e527c2a41c9aeb6ae9f5886fcaed7a1ec9","tlauda","2020-02-27 08:58:55","false","ipc: add improved functions to sending notifications

Adds improved implementation for sending IPC notifications
to host. New function takes ipc_msg directly and adds
it to message queue if message is not already there.
Also critical notifications will be sent right away
or added to the beginning of the queue if sending fails.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",75,21,0
"thesofproject/sof","3329db0a1d66fe827be761164e5e3eae87ea52d2","tlauda","2020-02-28 08:05:25","false","ipc: add helper methods for building notifications

Adds helper methods for initial building of IPC notifications.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",74,21,0
"thesofproject/sof","e5096aeb85a775dbb91f35c7f43997e2ade0f9a3","keyonjie","2019-06-18 05:35:36","false","sof-ctl: fix a print out format

Adding '\n' after ""hdr: type"" output to make the header dumping more
easier to be read.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",45,13,0
"thesofproject/sof","253b870a33b2f6c0674e3da256d6dab14fc66324","slawblauciak","2019-04-18 06:59:15","false","Repurpose component self-register functionality for general use.

From now on, modules (including components) that wish to be self-registered
and initialized on boot up shall use the DECLARE_MODULE macro.

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",51,10,0
"thesofproject/sof","b36db45a7da73a8b4c2840ec4f96fa2a77d7ecd2","brentlu","2022-05-06 02:47:29","false","topology: sof-adl-max98360a-rt5682: enable BT offload

Enable compile option ""BT_OFFLOAD"" to enable pipeline for Bluetooth
Offload.

Signed-off-by: Brent Lu <brent.lu@intel.com>",116,47,1
"thesofproject/sof","97377c3757e9889597fb4c43d2fa7aef05a0f06e","bkokoszx","2020-07-07 09:58:45","false","smart_amp: fix smart amplifier tplg

This commit changes SSP bclk rate from 9600000 to
12288000 ind ssp container to 32 bits order to fix
glitch issue.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",74,25,0
"thesofproject/sof","4ec3cfa13f69cdd1ed8f34ae4c2710deb8faeabb","kv2019i","2022-11-03 12:15:28","false","audio: up_down_mixer: fix build warnings on discarding const

Fix compiler warnings on discarding const when passing
arguments to init_up_down_mixer [-Werror=discarded-qualifiers].

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",89,53,1
"thesofproject/sof","a2d1e1efdc554becec70a6c1d95491bac59800ef","bkokoszx","2020-05-04 13:49:29","false","component: add set of helper functions for large config configuration

This commit rewrites functions responsible for large config configuration
from detect_test component and puts them in component.c file as
generic ones - as a result they can be used by other components.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",94,23,0
"thesofproject/sof","2685427d6741dba0fecfbd77fd2ee5495ee90fdb","kakulesza","2018-08-02 11:29:45","false","format: add align up/down macros

ALGIN_UP/ALIGN_DOWN macros allows to align the number to the nearest alignment
value. E.g. upward value aligment is required for DGMBS register.

Signed-off-by: Kamil Kulesza <kamil.kulesza@linux.intel.com>",14,2,0
"thesofproject/sof","9235eb83608f8d91e1ded3e467918da0e459a397","kv2019i","2021-05-17 13:56:19","false","kconfig: move BUILD_VM_ROM Kconfig.xtos-build

The BUILD_VM_ROM option only affects SOF XTOS builds, so move
the option to a separate file.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",86,35,0
"thesofproject/sof","02dd7a6dfb74650153a0f6e0f80f90b43c7c43a9","dbaluta","2022-03-24 15:08:54","false","codec_adapter: cadence: Remove api_id parameter

api_id parameter will be dynamically updated at runtime. Remove api_id
parameter id and use the default value in order to make code easier
to update for dynamic id change.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",111,46,1
"thesofproject/sof","721e58f3d241dd4da0b30126dc4afacdca505396","aiChaoSONG","2022-07-11 08:31:58","false","topology2: add num_sink/source_pins tokens for widget

These two tokens will be used by the kernel to decide the
supported number of sink/source pins, thus to allocate
correct widget queue id in route setup.

These two tokens are mandatory for IPC4 widgets, because
the default value in Linux kernel is zero, which is invalid
for queue id allocation.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",109,49,1
"thesofproject/sof","e8c71e458da7644613706ab5d6df9801165a6fde","aiChaoSONG","2021-07-09 05:26:08","false","topology2: Add cavs passthrough-playback pipeline

Add class definition for cavs passthrough-playback
pipeline, and it can be instantiated as:

    Object.Pipeline.passthrough-playback.""N"" {
	format		""s16le""
	period		1000
	time_domain	""timer""
	channels	2
	rate		48000
    }

Signed-off-by: Chao Song <chao.song@linux.intel.com>",86,37,0
"thesofproject/sof","afb0f73512849e66191cba055d2b0aa3fafb402d","ranj063","2023-03-31 17:31:19","false","topology2: rename passthrough-be to io-gateway.conf

All it contains is a IO gateway copier and a pipeline widget. So rename
it accordingly.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",56,58,1
"thesofproject/sof","5441b13cdcbe951d35349e599b130e8db2cb251e","abonislawski","2020-06-16 22:35:07","false","ipc: component free fix

This will allow to free component properly and stop using
already freed memory which can result in dsp panic if configured
with CONFIG_DEBUG_BLOCK_FREE

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",76,25,0
"thesofproject/sof","ed5d2feaf62a48f113ed2fc1a7d506c66d241670","kuanhsuncheng","2021-09-14 13:13:45","false","dma-trace: send ipc msg after update host pointer

before copy section to host, the hist pointer should

be updated.

otherwise, there are some left data in dma buffer and

host don't know.

Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",117,39,0
"thesofproject/sof","031fc9fc1153cb06df0fa37b783b3fb314dac224","mrajwa","2019-02-05 13:46:29","false","GDB: Added the possibility to remove breakpoints.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",58,8,0
"thesofproject/sof","d582a36fd0dfa23e7336822927c94189c10f657f","lgirdwood","2018-09-10 13:14:36","true","Merge pull request #340 from tlauda/topic/cache_fixes

memory: cavs: cache fixes",33,3,0
"thesofproject/sof","b851d04e58cadaa68558e682bacfa3135a624409","lgirdwood","2018-08-20 08:17:39","true","Merge pull request #235 from RanderWang/cnl_ipc_fw

cnl: check status of both host & fw before sending ipc msg in fw",18,3,0
"thesofproject/sof","fb07f450d78803404e37c30dca3247f54b2d762b","kv2019i","2022-09-29 20:20:28","false","ipc4: dai: reduce get_llp_reg_info log verbosity

The ""get_llp_reg_info(): gpdma id 32 out of array bounds.""
message is hit constantly with current mainline topologies with
no apparent impact to functinality.

The log is printed at a very high rate, which causes CPU and SRAM
traffic pressure that affects test execution.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",98,52,1
"thesofproject/sof","1ba94cffbf734f876e74536a9a27659cd646c39b","kv2019i","2023-03-22 09:44:25","false","rimage: update to 343b6d863da53ad29deb47b4fbb3f3cc51a289c2

Update submodule to match revision used in west.yml.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",55,58,1
"thesofproject/sof","62b676727b47c8279a5e4a4bd2d276de55cec103","jsarha","2023-02-08 16:35:06","false","topology2: Use new attribute references notation in route definitions

Changes all routes of form:
Object.Base {
	route.1 {
		source copier.host..1
		sink	gain..1
	}
	route.2 {
		source	gain..1
		sink mixin..1
	}
}

to

Object.Base {
	route.1 {
		source copier.host.$index.1
		sink	gain.$index.1
	}
	route.2 {
		source	gain.$index.1
		sink mixin.$index.1
	}
}

E.g. change "".."" notation where the route index is expanded in between
the dots to explicit reference to the route index.

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",55,56,1
"thesofproject/sof","15e03fd29729d076d537278522e5cecbdff9c2ee","jajanusz","2020-09-22 17:07:36","false","config: intel: use PCH name for tigerlake

We switch to PCH-based names instead of CPU config names for tigerlake+
platforms, because we need to support multiple variants of PCHs based
on one CPU famile - for example TGL-H & TGL-LP.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",67,28,0
"thesofproject/sof","06b576f828ea4a485ae32c289704140e5c36a48b","jajanusz","2019-01-18 12:26:42","false","cmake: update host-build-all.sh

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",57,7,0
"thesofproject/sof","0c64a43c895840b1cf405eceb7add8afa6a4d9a6","andyross","2023-02-01 22:05:41","false","platform/posix: Fix header warning

Transitive header order no longer declares struct sof for us here.  No
need to pull in a full header as we only use pointers to it.

Signed-off-by: Andy Ross <andyross@google.com>",52,56,1
"thesofproject/sof","c52aa3007013ac515bab53090f12a9807e5171e5","ranj063","2022-05-06 17:06:47","false","module_adapter: optimize module_adapter_copy()

When the module produces only period_bytes every period, there's no need
to save the produced samples in the intermediate local buffer, instead
copy them directly to the sink buffer and save an extra copy.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,47,1
"thesofproject/sof","048ffd8003625835dc1e2aa99629c8ce3c84eb59","cujomalainey","2022-03-08 01:25:04","false","topology: add new aec topology

New target device, also move the path over to core 1 when running in
no_hotword mode

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>
Signed-off-by: Pin-chih Lin <johnylin@google.com>",114,45,1
"thesofproject/sof","6cd9f6a251089b4cae3bb9d63c318eb4ffb56dfa","cujomalainey","2020-10-22 03:42:06","false","abi: fix macro size overflow

ubsan found the following bug via oss-fuzz

/src/sof/src/ipc/handler.c:1385:9: runtime error: left shift of 15 by 28 places cannot be represented in type 'int'

This is caused by SOF_GLB_TYPE_MASK which has an implicit length of 15
(int16_t)

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",72,29,0
"thesofproject/sof","0d15fa4d299a92a81cbda3ab4aace7d16531a909","jxstelter","2023-07-19 13:52:56","false","lib-manager: Support for two stage library loading

The hardware programming flow dictates that the DSP side should set the
GEN bit first followed by the host setting the EN bit.
We cannot assume that the GEN bit is already enabled (and it would in fact
will leave the DMA on the DSP side wrongly configured at best).

To support the currently used flow (single step) and add support for the
correct programming flow, the proposed solution is to use the lib_id as
indication of the method the host software is going to use.

Two stage flow:
The first LOAD_LIBRARY_PREPARE with valid dma_id
 - just allocate and set the GEN bit
Second LOAD_LIBRARY with valid lib_id and dma_id
 - proceed to the loading of the library via host DMA to local buffer

Single stage flow (currently supported)
LOAD_LIBRARY with valid lib_id and dma_id
 - allocate, set GEN bit and proceed to loading the library

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>
Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",32,62,1
"thesofproject/sof","2331cfaf9eb292b6cad8d688734e164aaf5d984c","cujomalainey","2018-11-16 23:14:03","false","Update sof-cht-nocodec

Update graph comments

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",40,5,0
"thesofproject/sof","bc1d785b4d8803ed0b2b7169da1a644eefb4a531","ymdatta","2020-07-30 17:39:29","false","tools: tplg_parser: check if parameter is valid before using it

Before accessing the contents of the parameter pointer of the
function, check if the pointer is NULL. Else, it may lead to
segmentation fault.

Signed-off-by: Mohana Datta Yelugoti <ymdatta.work@gmail.com>",80,26,0
"thesofproject/sof","af6fcdd5eee44c5aac91878451c4cb1c3122fe21","lrgirdwo","2018-12-20 14:00:58","false","pm: send IPC on PM power off completion.

Send command completion IPC after powedown completes instead of before
power off completes. This allows host to know that DSP is in OFF state
prior to driver PM actions.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",53,7,0
"thesofproject/sof","95874fd8e2e12219cb49c0504427d8e9d1eff974","dbaluta","2023-07-18 11:02:26","false","ipc3: helper: Fix mixer scenario

With mixer after commit 21ed10abf8a2 (""ipc3: helper: Do not silently
accept unrecognized component type in IPC"") we get the following error

dma-trace  src/ipc/ipc3/helper.c:333  ERROR comp_new(): component type not recognized

This happens because now we return an error from comp_specific_builder() with the default
case.

Fix this by adding a case for mixer.

Fixes: 21ed10abf8a2 (""ipc3: helper: Do not silently accept unrecognized component type in IPC"")
Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",32,62,1
"thesofproject/sof","bea92dfcc8823fe1b4d0caeabbc516c9e060cfb6","xiulipan","2018-12-19 10:14:34","false","dai: recovery dai buffer and dma pointer for none-init start

For none-init first trigger start, need to recovery buffer state and set
the dma pointer as pause/release did.
This will allow ALSA STOP/START recovery pattern work now.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",54,7,0
"thesofproject/sof","c6dd4797874db228e78285fbe80cd8b77e62536d","xiulipan","2019-07-30 15:37:39","false","[skip ci]scripts: update glib support for fuzzer

Install libglib2.0-dev with apt.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",53,14,0
"thesofproject/sof","71814655e67bffca7309b583f4e97290763e40e8","rosschisholm-xperi","2021-04-20 13:11:26","false","topology: adding optional support for IIR component on jsl-rt015 topology

Allows the IIR component to be added to the jsl-rt015 topology allowing
tuning

Signed-off-by: Ross Chisholm <ross.chisholm@xperi.com>",88,35,0
"thesofproject/sof","38be6aa4dd39311301e334374ea8e1a457f75710","andrula-song","2023-09-14 11:33:50","false","Audio: use struct dai_ts_data replace timestamp_data

Use struct dai_ts_data replace timestamp_data if
CONFIG_ZEPHYR_NATIVE_DRIVERS is enabled.

Signed-off-by: Andrula Song <andrula.song@intel.com>",20,63,1
"thesofproject/sof","9a8fe76deeb8694a9826dbe7338561e770a1d388","dcpleung","2022-01-21 21:34:26","false","compile: use compiler version to guard fallthrough attribute

Some XCC/Clang are based on older Clang 3.9 which does not
support the fallthrough attribute. So a blanket statement
that all Clang supports fallthrough attribute is not true.
Also, XCC/Clang can be based on newer version of Clang which
will eventually support the fallthrough attribute. Therefore,
use the compiler version as guard on whether the fallthrough
attribute is supported instead of simply basing it on
what the underlying compiler is. Note that the fallthrough
attribute is supported since GCC 7 and Clang 10.

Signed-off-by: Daniel Leung <daniel.leung@intel.com>",115,44,1
"thesofproject/sof","c60bcd0aa6a4f64937e2402e9142a1bc166727f0","tlauda","2020-03-03 08:49:44","false","pcm_converter: enable HiFi3 version by default

Enables HiFi3 version of PCM converter.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",79,21,0
"thesofproject/sof","e4dca888da32d5d8332c35c0e95957437a58be9f","kv2019i","2023-03-14 10:45:57","false","ams: handle alloc failures in ams_init()

Current code may end up dereferencing null pointers in case
memory allocations fail in ams_init(). Handle this with proper
error handling.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",56,57,1
"thesofproject/sof","676b0ca1ffb3923a5b38b6c188aabc91562712e3","bkokoszx","2019-04-09 14:55:40","false","dmic: fix dmic initial ramp regression

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",48,10,0
"thesofproject/sof","443b21de4b3fbe01394e9a4d5f72483a112f9580","jsarha","2022-02-08 15:14:03","false","dma-trace: Fix potential race issue by using blocking DMA copy

It is possible that that in trace_work() sof_ipc_dma_trace_posn ipc
message reaches host side sof driver before the dma_copy_to_host_nowait()
is finished. Change the dma_copy_to_host_nowait() implementation to
dma_copy_to_host() by adding DMA_COPY_BLOCKING flag to dma_copy()
command.

The flag is already there on the !defined(CONFIG_DMA_GW) version of
the function and the old name of the function was a bit misleading.

This commit changes also probe.c probe_task() so that it also uses the
new blocking DMA copy. I could not see any justification to use nowait
version there either.

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",108,44,1
"thesofproject/sof","ccba8e0668479984c6ef29d5f16a2e5977da0efd","mrajwa","2019-09-09 22:04:13","false","timer_domain: check if delay occurred during scheduling

This patch checks if during scheduling we were
delayed.
If such situation happens we log error message.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",58,15,0
"thesofproject/sof","331ae7ecc1ec1f7d79b260f60ff942746f0eba29","mrajwa","2019-05-16 09:46:56","false","kpb: add new, more clear states

This patch adds new state KPB_STATE_DRAINING. In this
state kpb drains data from internal history buffer to
host sink bypassig any other component. In the same
time internal buffering is turned off.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",63,11,0
"thesofproject/sof","fec09e0b87c25e35861ff1ce45368e69ecb59d58","mrajwa","2020-07-14 11:41:49","false","topology: schedule two KWD pipelines on 5 ms period

This patch changes the KWD pipelines perriod from 20 ms
to 5 ms to improve performance.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",80,25,0
"thesofproject/sof","2693daf5030ddbdb0a8da5f2b9bffb70abca8a40","jajanusz","2019-04-29 10:51:14","false","cmake: rename BUILD_HOST to BUILD_LIBRARY

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",48,11,0
"thesofproject/sof","5cc8a6dc14e29951cb8bc7c558f4981792427a7d","andrula-song","2023-10-19 06:39:32","false","Audio: Fix the default alignment setting

Set the default alignment value after buffer format is set
in audio_stream_set_params instead of in audio_stream_init
where the buffer format hasn't been set yet.

Signed-off-by: Andrula Song <andrula.song@intel.com>",12,65,1
"thesofproject/sof","8a8e8736a84c7557205c46add31a7577f562915d","dbaluta","2020-11-19 16:36:11","false","topology: imx8: Add memory caps for i.MX8 platforms

This adds memory capabilities macros for different buffer
types on i.MX8.

Once we started to enable more complex pipelines
on i.MX8 we found out that we need these caps defined.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",74,30,0
"thesofproject/sof","e9d00eb4efe7414a0ca308681c71269e5f995e9d","btian1","2023-05-09 02:25:50","false","copier: expose ipcgtw_zephyr_params and reset to copier

copier use zephyr prefixed function calling instead of through
ops driver to implement params and reset functionality.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",53,59,1
"thesofproject/sof","f1c5a15c8aac276aae5dbd9e2e60548419f41221","zhuyingjiang","2018-11-05 09:11:46","false","rimage: add build scripts to build 1.5 image

add to build scripts and Makefiles to build firmware binary
for kbl and skl

Signed-off-by: Zhu Yingjiang <yingjiang.zhu@linux.intel.com>",38,5,0
"thesofproject/sof","93c5e8b51fb98fab822d4566458ce49a1aa97f5b","softwarecki","2023-02-27 11:26:20","false","misc_utils: Move byte_swap function to new misc_utils.c file

This function will be used in different places in the code, so I moved it
to a separate file.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",58,57,1
"thesofproject/sof","3746f459e70ba30703902bb27b9950784dbd63d9","abonislawski","2020-03-23 14:10:52","false","probe: fix dma buffer init wrong rballoc flags

Heap zone was used by mistake instead of flags
This results in buffer mode change from bypass to cached
Tested & no regression found

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",65,22,0
"thesofproject/sof","e4171c89f89828ab2fe5d42a9aa4b4ece3ed695c","ranj063","2018-10-01 18:12:08","false","eqctl: do not process invalid input file name

Fixes seg faults when input file does not exist.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",34,4,0
"thesofproject/sof","b4591ca8f464e67ad79fa013621161495e286c27","ranj063","2022-03-23 23:20:49","false","codec_adapter: rename it to module_adapter and fix all includes

No functional changes.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",109,46,1
"thesofproject/sof","1ba3124e5f9dcf297db253adf1c742a0518eafd5","ranj063","2023-08-04 23:19:00","false","tplg_parser: Extend the tplg_context and comp_info for IPC4

Extend the definitions for struct tplg_context and struct tplg_comp_info
to include the fields to parse the ipc_payload and audio format
information from topology.
Also, add the logic for parsing the input/output audio formats from the
topology.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",29,62,1
"thesofproject/sof","09148482f90c3c08cec6a6d15883539a7ae20a99","ranj063","2018-06-12 18:33:51","false","topology: add test tone pipelines for APL

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",1,0,0
"thesofproject/sof","aee69115ba128cb9681260cf411adf6f68c3a8b9","cujomalainey","2020-10-06 23:48:08","false","build: allow host build to be static

oss-fuzz does not support dynamic linking, therefore we need to add
support for static builds

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",67,28,0
"thesofproject/sof","be752fdc3f2a4879968add6aecaedf614c96094d","singalsu","2022-02-07 15:16:50","false","Audio: Volume: Optimize read frag usage from zero crossing search

This patch optimizes the buffer seek for zero crossing. The
audio_stream_read_frag_s16/24/32() is replaced with block
based search. The search block is defined by new stream function
audio_stream_rewind_bytes_without_wrap(). The other added stream
function audio_stream_rewind_wrap() handles the pointer wrap
when reading backwards.

The saving during volume ramping is from 12.4 MCPS to 10.8 MCPS
(1.6 MCPS) for 16 bit play, and 16.4 MCPS to 14.4 MCPS (2 MCPS)
for 24 bit and 32 bit playback.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",106,44,1
"thesofproject/sof","884bad441e4ba282cfab1ce2f2c6cb3ea6d7a2d9","singalsu","2023-08-29 15:48:31","false","Tools: Tune: dcblock: Avoid warning about ignoring imaginary

The abs() function need to be added to plot the correct magnitude
response. Matlab warned in this case about ignoring imaginary
part.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",25,63,1
"thesofproject/sof","db3d730913fa618ce315c431ba6600655183adeb","mluckix","2019-01-11 11:51:51","false","trace: schedule trace added

Added schedule trace instead of pipe. Logger updated.

Signed-off-by: Marek Lucki <marekx.lucki@linux.intel.com>",56,7,0
"thesofproject/sof","28c7cbcfac3c01c9bbf7f9c16c23ae3ad6e96f2c","singalsu","2022-07-27 09:39:32","false","Math: Add library for matrix functions

This patch adds a matrix arithmetic library start. Currently it supports
matrix initialization, clear, set values, get values, and a multiply
function for 16 bit fractional format. Multiplication functions exist
for normal matrix multiply and element-wise multiplication.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",111,50,1
"thesofproject/sof","1dc316226d48b12f23fe5f770370eb1de6e329eb","singalsu","2023-01-19 17:57:26","false","Audio: EQ FIR: Improve info trace message

Add determined stream channels count to info trace to better
understand possible error in coefficients blob initialization.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",55,56,1
"thesofproject/sof","4e605c888bdfdc6a00f7f26bcb86d4dd89e6aa26","singalsu","2023-03-02 15:18:01","false","Arch: Host: Update atomic functions for gcc and xt-xcc

This patch adds for host gcc build the updated atomic
operations. These are intended to replace the previous
__sync built-ins. For more information see
https://gcc.gnu.org/onlinedocs/gcc/_005f_005fatomic-Builtins.html .

The atomic functions for xcc are fake but sufficient for
host arch build for static single-thread testbench.

Suggested-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>
Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",60,57,1
"thesofproject/sof","b267012f22854ca60b6eed9bb3142271af87befa","bardliao","2023-07-06 10:50:30","false","Topology2: sdw-amp-generic: add missing num_input_pins

num_input_pins was missing in passthrough mode.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",32,61,1
"thesofproject/sof","2e8fb0a0dde28b58767b6ed8e86a6d4c0dfa28d4","lrgirdwo","2022-06-03 11:04:22","false","byt: defconfig: trim fat and remove unused options.

Not used on BYT so remove.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",115,48,1
"thesofproject/sof","c6cdadad14415e2cd1dd7f8d0ab181c3b8761401","lrgirdwo","2018-11-02 22:00:09","false","scripts: checkpatch: check for ABI updates

Make sure ABI updates update atleast a single version number.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",37,5,0
"thesofproject/sof","f6fca6fc7e3a37b7574e20a51345e247cc322499","andrula-song","2022-12-02 08:07:54","false","Audio: Implement a HiFi3 version audio_stream_copy

Since Xtensa provides intrinsics for multi-way load/store
and using those instructions can reduce more cycles than
the function we using now, so there is a HiFi3 audio_stream
_copy implementation.

Signed-off-by: Andrula Song <xiaoyuan.song@intel.com>",101,54,1
"thesofproject/sof","c47a0bf6ffd9bef0e4cc5888145e42b5dc7dc650","softwarecki","2022-09-30 10:54:27","false","ace: clock: Update clock definitions

Added code with clock definitions

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>
Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>
Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>
Signed-off-by: Konrad Leszczynski <konrad.leszczynski@intel.com>
Signed-off-by: Anas Nashif <anas.nashif@intel.com>
Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>
Signed-off-by: Rafal Redzimski <rafal.f.redzimski@intel.com>
Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>
Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",98,52,1
"thesofproject/sof","966ad48e7ed87ff4117e5d54af5d6c95e2d4bff3","softwarecki","2023-09-18 13:52:14","false","tools: logger: Fix resources release

Improved release of resources when an error is detected.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",20,64,1
"thesofproject/sof","46da7bd9d1498b617fdc439e53759ce01592293f","afq984","2022-01-26 08:47:07","false","topology1: mt8195: Add topology with DTS

Add CMake build definition for
sof-mt8195-mt6359-rt1019-rt5682-dts.tplg.

Signed-off-by: Li-Yu Yu <aaronyu@google.com>",104,44,1
"thesofproject/sof","42e0d5e0b56dc15c540475bca2f48d39b73fc627","tinghan-shen","2022-05-12 10:07:58","false","drivers: mediatek: fix build error

fix mediatek driver build error after ipc_cmd_hdr is updated.

sof/src/drivers/mediatek/mt8186/ipc.c: In function ‘ipc_platform_do_cmd’:
sof/src/drivers/mediatek/mt8186/ipc.c:77: error: ‘ipc_cmd_hdr’ undeclared (first use in this function)
sof/src/drivers/mediatek/mt8186/ipc.c:77: error: (Each undeclared identifier is reported only once
sof/src/drivers/mediatek/mt8186/ipc.c:77: error: for each function it appears in.)
sof/src/drivers/mediatek/mt8186/ipc.c:77: error: ‘hdr’ undeclared (first use in this function)
CMakeFiles/sof.dir/build.make:714: recipe for target 'CMakeFiles/sof.dir/src/drivers/mediatek/mt8186/ipc.c.o' failed

Signed-off-by: Tinghan Shen <tinghan.shen@mediatek.com>",111,47,1
"thesofproject/sof","2d2f5f6982f2d6794a4fbd45c6890afc8ffdcb54","marc-hb","2022-09-16 23:48:55","false","zephyr/docker-*.sh: pass REAL_CC through for sparse support

Other minor fixes

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",98,51,1
"thesofproject/sof","3d69a7f69eb63e29f526d502e8d11f4de011a829","marc-hb","2022-09-17 00:30:23","false",".github: extend yamllint line-length to 100

Also run on west.yml

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",98,51,1
"thesofproject/sof","9b51e3e9abb788e7d360529a614136fd71e5b6fe","akloniex","2018-10-10 07:40:46","false","debugability: Add possibility to use up to 4 params in log messages.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",32,4,0
"thesofproject/sof","529bf68a468354bfb2c767c22d412f2ce23f851b","akloniex","2019-04-16 20:15:49","false","MUX: Generic Mux component implementation.

Mux component implementation. Support for mux and demux operation
modes, channel routing and summation with saturation.

Mux component can operate in 2 modes:

demux - with single input stream and multiple output streams
(up to MUX_MAX_STREAMS)
mux - with multiple input streams and single output stream
It can also work with 1:1 I/O in both modes to act as
channel router / summator.

It is configured via binary blob specifying channel routing
using bitmasks.
In case of demux mode every output stream has an array of bitmasks,
one mask per channel, specifying which of the input channels should
be used to compose it.
Similarly for mux, each input stream has bitmask for each of it's
channels to specify to which output channel it contributes.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",51,10,0
"thesofproject/sof","9a39672f8f22946bfbb33f4da34b8297896b33c9","ujfalusi","2022-03-25 13:05:57","false","volume: ipc4: Fix compilation due to unused gain_uuid_ldc

Fixes the following compilation failure with gcc:

In file included from src/include/sof/audio/buffer.h:18,
                 from src/include/sof/audio/component.h:19,
                 from src/include/sof/audio/component_ext.h:19,
                 from src/audio/volume/volume.c:18:
src/audio/volume/volume.c:60:29: error: 'gain_uuid_ldc' defined but not used [-Werror=unused-const-variable=]
   60 | DECLARE_SOF_RT_UUID(""gain"", gain_uuid, 0x61bca9a8, 0x18d0, 0x4a18,
      |                             ^~~~~~~~~
src/include/sof/lib/uuid.h:94:37: note: in definition of macro 'DECLARE_SOF_UUID'
   94 |  static const struct sof_uuid_entry uuid_name ## _ldc = { \
      |                                     ^~~~~~~~~
src/audio/volume/volume.c:60:1: note: in expansion of macro 'DECLARE_SOF_RT_UUID'
   60 | DECLARE_SOF_RT_UUID(""gain"", gain_uuid, 0x61bca9a8, 0x18d0, 0x4a18,
      | ^~~~~~~~~~~~~~~~~~~
cc1: all warnings being treated as errors
make[2]: *** [CMakeFiles/sof.dir/build.make:534: CMakeFiles/sof.dir/src/audio/volume/volume.c.o] Error 1
make[1]: *** [CMakeFiles/Makefile2:2042: CMakeFiles/sof.dir/all] Error 2
make: *** [Makefile:136: all] Error 2

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",111,46,1
"thesofproject/sof","7d41360f22f7b68480ebfceb253c7cd9848b2c28","btian1","2023-08-30 14:16:56","false","audio: perf: add core information into performance log

print out core ID in each core performance log tracing.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",25,63,1
"thesofproject/sof","3ee717eebc6a2a512a0216363ae77473f94532c1","fkwasowi","2022-10-13 13:22:09","false","probe: mtl.toml invaliv probe type

error: invalid type 16error: key 'module' parsing error
probe module type is 10,which is treated hexally

Signed-off-by: Kwasowiec, Fabiola <fabiola.kwasowiec@intel.com>",97,52,1
"thesofproject/sof","df5eaf07cdd83c0928c58dc87f00c58c3e1032c6","dnikodem","2023-02-03 17:16:56","false","ipc4: save information about pipeline attributes

During create a new pipeline, information about their attributes
is lost and not saved anywhere. This change store the pipeline
attributes from IPC extension message in pipeline structure.

Signed-off-by: Damian Nikodem <damian.nikodem@intel.com>",54,56,1
"thesofproject/sof","5c113029bf8f16812887a1a5fcbec9469982bb72","RanderWang","2018-07-24 08:12:30","false","exception: fix ipc timeout issue on bdw

It is a regression issue. L1 interrupt is used by SSP on bdw,
so don't register it as a exception.

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",13,2,0
"thesofproject/sof","ca73d430764f747d155952b0e97810de24626dc2","ktrzcinx","2020-07-10 12:46:24","false","pcm_converter: Return error code from converting function

It allows to trace error with proper (client) trace context
after hitting some error.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",73,25,0
"thesofproject/sof","04749b9c417f38726baa123759ac04edcc699a06","yongzhi1","2023-04-24 14:22:51","false","topology2: dmic-generic: add macro for DMIC_CORE_ID

Add macros to quickly enable multi-core with DMICs.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",52,59,1
"thesofproject/sof","3e6fd30aa6ee3ac206d573fe134dae5e6fd432e9","ujfalusi","2022-03-28 06:43:22","false","ipc4: base_fw: Simplify firmware version type in basefw_get_dsp_properties

Use the sizeof on the fw_version array to remove the magic number for the
size calculation and drop the address modifier for the data pointer.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",112,46,1
"thesofproject/sof","3d4e658afac5f2228ebff22bb5ba4ba97cd9e28b","plbossart","2020-07-28 15:13:01","false","Revert ""drivers: cavs: set budget for IPC task""

This reverts commit e8dc076f7ad70325c6061fb016267f72c78e2ff8.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",79,26,0
"thesofproject/sof","772028e9a4d93ba00de99f7e5696b86405a493e2","tlauda","2020-01-09 10:20:11","false","imx: replace edma_init() with generic dmac_init()

Replaces edma_init() with generic dmac_init().
It's better in terms of future refactors.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",74,19,0
"thesofproject/sof","a6b190e8f26b4cdbe80e1f10b2cff20494ad0e87","tlauda","2019-01-14 15:29:24","false","buffer: remove ""connected"" field

Removes ""connected"" field from buffer as it's not needed.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",55,7,0
"thesofproject/sof","9a4025eedad1f69319ebe480332536ec99d9191d","tlauda","2019-12-13 12:26:39","false","ipc: remove host reply unused code

Clean ups IPC drivers by removing unused code on host reply.
It saves us roughly over 4600 bytes in ipc_msg queue alone.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",75,18,0
"thesofproject/sof","6b936a37a14aa035ec6020afbe463092104b397a","singalsu","2018-08-03 11:44:11","false","EQ FIR: Changes to support Xtensa optimized versions and updated IPC

This patch add possibility to use two samples per call processed
filter core. The use of optimized version depends on FIR core header
files settings. Normally when compiled with xt-xcc the optimized filter
version will be used.

The set data and get data IPC is updated to use binary and enum control
commands.

A pass-trough copy function is added get working pipeline with
non-configured EQ.

The full-circular EQ copy function is needed since it is unnecessary.
Normal SOF components work with buffers

EQ mute is removed since SOF components do not usually support it except
volume.

The IPC is updated to match ALSA binary and enum controls style. The
previous approach was not practical for kernel driver side.

Code style is updated the pass the checks.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",16,2,0
"thesofproject/sof","d93f3eeb469defcf75539893812d42526ea2f9ee","singalsu","2021-08-16 16:29:35","false","Drivers: Intel: DMIC: Fix mistake in OUTCONTROL bitfield macro usage

This patch replaces the TIE bitfield get by SIP bitfield get. The
mistake impacted DAI debug trace print.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",117,38,0
"thesofproject/sof","fc30b4b8704d4333bcbf5726e9002e977a27d44f","singalsu","2022-02-14 17:35:41","false","Math: FIR: Simplify and optimize generic C FIR filter

This change saves 18 MCPS as gcc build build for xtensa on TGL-H
from 134 MCPS to 115 MCPS in a stereo 48 kHz 64 tap filter case.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",110,44,1
"thesofproject/sof","fda777c6f942c38474a30cdeacd7b22361cd4127","xiulipan","2018-09-26 10:41:50","false","pm: add header fix build

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",37,4,0
"thesofproject/sof","5eb94a8a801ffa4922f1f173180751b70528b776","aiChaoSONG","2022-03-21 08:27:39","false","audio: comp_ext: workaround XCC compatibility with zephyr logging

Multiple use of static inline functions that call Zephyr logging
API across different C files will result in same symbol names
defined in all of the corresponding object files with XCC,
because XCC compiler emits the same symbol names based on the
source file for those static variables inside functions.

If Zephyr logging is used in SOF, we will have log context
redefinition issue with XCC due to above reason.

This patch workarounds the issue by removing the log calls
in static inline functions that are used across multiple C
files if Zephyr is used.

BugLink: https://github.com/zephyrproject-rtos/zephyr/issues/43786

Signed-off-by: Chao Song <chao.song@linux.intel.com>",109,46,1
"thesofproject/sof","dc10876c20a598290eb0d2b47ee5087db7ffaae4","ranj063","2018-07-24 05:47:48","false","topology: changes to SectionPCM macros

This patch addresses the following:

1. Move PCM_PLAYBACK_ADD to pcm.m4
The macro was in the wrong m4 file (buffer.m4)

2. Remove pipeline_id argument and ""index"" from SectionPCM

""index"" is not a member of struct snd_soc_tplg_pcm. So this
information is not used in the kernel at all.
Secondly, the PCM ID could be associated with more than
one pipeline especially in the case of DUPLEX PCM's. So better
to remove it to avoid ambiguities.

3. Remove dai_id

This dai_id is the ID given to the CPU DAI when the FE DAI link
is created. In the case of SOF, we should use an linearly increasing
unique ID for CPU DAI ID's. If this argument is omitted, the kernel
automatially assignes an ID based on the component->num_dai
which is linearly incremented every time a new DAI link is added.

4. Finally update users to align with the new definitions.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",13,2,0
"thesofproject/sof","53ce8b9d9f826aa5d3514aa0adfeb82660cc7215","marc-hb","2021-03-21 01:46:56","false","logger: new relative timestamps option, relative to first entry seen

Add a new sof-logger -e 0/1 relative timestamps option where the
TIMESTAMP column is relative to the first entry seen.

Removes many digits and makes the TIMESTAMP column much more readable in
short logs.

Also stop showing ""NaN"" as the first DELTA like something went
wrong. Show zero instead.

The new option is off by default when using -r(aw) and on otherwise.

The first entry is kept always absolute.

Before:

         TIMESTAMP              DELTA C# COMPONENT     LOCATION                      CONTENT
[6653843012.343750] (             NaN) c0 dma-trace    src/trace/dma-trace.c:339     ERROR FW ...
[6653843111.510417] (       99.166664) c0 ll-schedule  ./schedule/ll_schedule.c:229  perf ll_work
[6653843309.010417] (      197.500000) c0 ll-schedule  ./schedule/ll_schedule.c:399  task add
[6653843314.166667] (        5.156250) c0 ll-schedule  ./schedule/ll_schedule.c:403  task params
[6653843322.031250] (        7.864583) c0 ll-schedule  ./schedule/ll_schedule.c:309  new added
[6653843327.031250] (        5.000000) c0 ll-schedule  ./schedule/ll_schedule.c:312  num_tasks 2
[6653844109.531250] (      782.500000) c0 sa                    src/lib/agent.c:65   perf sys_load
[6653844155.156250] (       45.625000) c0 ll-schedule  ./schedule/ll_schedule.c:229  perf ll_work
[6653844384.218750] (      229.062500) c0 component       src/audio/component.c:130  comp new host

After:

         TIMESTAMP              DELTA C# COMPONENT     LOCATION                      CONTENT
[686125142.395834] (        0.000000) c0 dma-trace    src/trace/dma-trace.c:339     ERROR FW ...
[       94.270833] (       94.270836) c0 ll-schedule   ./schedule/ll_schedule.c:229  perf ll_work
[      296.770833] (      202.500000) c0 ll-schedule   ./schedule/ll_schedule.c:399  task add
[      301.979167] (        5.208333) c0 ll-schedule   ./schedule/ll_schedule.c:403  task params
[      309.843750] (        7.864583) c0 ll-schedule   ./schedule/ll_schedule.c:309  new added
[      314.843750] (        5.000000) c0 ll-schedule   ./schedule/ll_schedule.c:312  num_tasks 2
[     1092.395833] (      777.552063) c0 sa                     src/lib/agent.c:65   perf sys_load
[     1137.968750] (       45.572918) c0 ll-schedule   ./schedule/ll_schedule.c:229  perf ll_work
[     1850.208333] (      712.239563) c0 component        src/audio/component.c:130  comp new host

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",72,34,0
"thesofproject/sof","afac44af5f493db498d9b5bf4fe8a05f8c78b2f2","lyakh","2021-12-16 13:54:36","false","trace: move identical code to a common header

Contents of platform/trace/trace.h on all cAVS platforms are
identical, replace them with a common header.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",117,42,1
"thesofproject/sof","001d1ac5efad762e29aae84211761b3076ffd62e","lyakh","2021-11-12 13:20:54","false","zephyr: ll_schedule: remove a spin-lock

We're now making sure that all ll-scheduler tasks under Zephyr are
only ever accessed from their specific core, tasks to be run on core
1 aren't scheduled or cancelled from core 0, etc. Therefore it isn't
necessary any longer to use a spinlock to protect scheduler data,
just disabling interrupts is enough.

This also fixes a dead-lock on secondary cores. When the last task on
core exits, the respective scheduler thread terminates, and that
happens while it's still protecting the scheduler data. Therefore if
a spinlock is used, trying to take it again after that dead-locks the
core.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",127,41,1
"thesofproject/sof","cf3a7d16049346b0f329daa75d850bfc04dce7fb","marc-hb","2021-06-29 05:34:07","false","notifier.h: document the API

... and rename some parameter names.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",84,37,0
"thesofproject/sof","339e5ac2176c57fb62534847faa1ee180a9486e1","lyakh","2022-01-06 15:20:36","false","platform/zephyr: enable power management for non-cAVS platforms

This enables hardware initialisation and power management paths for
non-cAVS platforms with Zephyr.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",115,43,1
"thesofproject/sof","b6f26b0f90f9e7fbf6414605b7874b0a1a81f8a8","lyakh","2021-09-07 13:29:16","false","pipeline: (cosmetic) fix function names in trace text

Fix trace messages after moving them into different functions.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",119,39,0
"thesofproject/sof","426b1130710e6553c52d6648311e18e80d92c820","lyakh","2023-01-04 16:46:11","false","topology2: add support for simplified copier module

Currently copier components of the module type are used in pairs -
one on each pipeline, connecting to each other. This isn't necessary.
It's enough to have one such copier component on the side, that does
forking. Add a single-copier capture pipeline variane and switch
DMIC over to it.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",71,55,1
"thesofproject/sof","3d674bca57a21811c932d4787021e7e75eb1df41","ShriramShastry","2021-08-02 07:09:52","false","TDFB Improve directivity index and WNG

	Added singular value decomposition algorithm
	for diagonal matrix calculation. Added filters for side
	lobe artifacts.

Signed-off-by: ShriramShastry <malladi.sastry@intel.com>",109,38,0
"thesofproject/sof","5f0b1fd4f404fb2b86e86b4edb98c3bb0a41afa6","dbaluta","2020-01-12 16:17:09","false","rimage: Add support for i.MX8X

i.MX8X is very similar with i.MX8. Memory layout is the same
except IRQSTEER address.

Code will be shared but there will be different firmware binaries
named:
	* sof-imx8.ri, for i.MX8
	* sof-imx8x.ri, for i.MX8X

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",77,19,0
"thesofproject/sof","9af15389ee3f6bb297d99dc07b40b38e76a1fde7","dbaluta","2021-02-03 19:15:19","false","lib: Add __vec_memcpy / __vec_memset

3rd party libraries need __vec_memcpy / __vec_memset
which are not provided by xtensa gcc.

Add open coded versions of these functions by using
memcpy and memset.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",70,32,0
"thesofproject/sof","aae293a9cc0427b62b239c63ccee981a26a389af","lrgirdwo","2021-05-31 12:27:50","false","ipc: remove unused typedef

Not used so remove.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",82,36,0
"thesofproject/sof","ab3663f46867e1ba26ac47eabc1e430d3b34ecf2","plbossart","2021-06-18 19:12:05","false","topology: sof-cnl-nocodec: use s32le

No idea what we add artificial limitations on formats

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",74,37,0
"thesofproject/sof","689ce5ac99b1aa6161d625d8141979a9bb062852","lrgirdwo","2019-09-14 13:57:22","false","fuzzer: byt: align macros to line length limit.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",60,15,0
"thesofproject/sof","df2f931171a101e06609c25141a64e3a6451c076","lrgirdwo","2021-04-13 14:50:35","false","ipc: move IPC message builder helpers to helper file

IPC builders are IPC ABI specific so move to ABI helper file.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",81,34,0
"thesofproject/sof","0e620cdb58ff7ebb22995a87771cc56b631e469a","xiulipan","2018-08-09 03:45:43","false","scripts: version: fix version error when have no tags

Tags may missing if we just clone the branch in some case such as in
travis CI.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",19,2,0
"thesofproject/sof","abcd44feb57f527b826e3352e76e361962723343","andrula-song","2023-07-31 01:56:53","false","Audio: Aria: Fix the mistake of cache invalidation

Fix the mistake of cache invalidation, since it is already
done in comp_new_ipc4().

Signed-off-by: Andrula Song <andrula.song@intel.com>",32,62,1
"thesofproject/sof","100144a1d0f1e4a8e6b1dc5509d11511f271418a","andrula-song","2022-08-24 02:36:00","false","Audio: Mixer: Add hifi version processing functions for mixer

Add hifi3 & hifi4 version implementation of mixer processing functions.
The hifi version functions can save at least 47% cycles than C version.

Signed-off-by: Andrula Song <xiaoyuan.song@intel.com>",111,51,1
"thesofproject/sof","aa732a37dcadf6275d9cd0f62db45616da6bfb06","xiulipan","2019-12-09 06:07:38","false","topology: fix bdw codec topology

Add support for bdw-rt5677
Fix load issue with bdw codec toplogy issue, no SMP support.
Add virtual widgets.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",73,18,0
"thesofproject/sof","b77149cff39869a99fa88e834c23ea374b7a32f6","lrgirdwo","2022-06-03 11:03:03","false","cpu: single core: Give the compiler some hints to save memory.

Save memory when only a single core is enabled. Compiler can now see
always false/true conditions and optimise out unused TEXT.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",115,48,1
"thesofproject/sof","509eef9c96b81006291721a59733e61e96d4ff58","lrgirdwo","2021-09-17 12:20:02","false","byt: align DMA mapping with closed source FW

Align the DMAC usage and channel mappings with the closed source firmware.
This may help with DMA stability when trace is disabled.

Compile tested only as I have no working BYT/CHT HW.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",118,40,0
"thesofproject/sof","96fa4749eecc9791e3c1ede8bceb19a2f7146043","lrgirdwo","2021-01-21 16:29:57","false","idc: core boot: relax the idc wait to allow other cores access to IO

Currently idc_wait_in_blocking_mode() spins and reads timer and mailbox
IO which can slow down secondary core boot (which share the physical
resources).

Relax the IO to speed up booting of secondary cores.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",69,32,0
"thesofproject/sof","08236fcb460f7a040101642a51153178f5860d84","lrgirdwo","2018-11-02 16:36:25","false","build: make builds reproducible.

Add a debug option to include build number, date and time into build.
This will be disabled b default so that all builds are reproducible.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",30,5,0
"thesofproject/sof","20d84ce4ea4ebb4fc72c080a510034821afa0f85","ranj063","2023-05-02 18:41:53","false","ipc4: dai: Expose dai_zephyr_position()

Expose and use the function in the copier.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,59,1
"thesofproject/sof","d94cfc9cc6dc2e7cd6b9fc07a6c6fc2da8717fe9","RanderWang","2022-06-27 07:33:35","false","mtl: add MicSel support

Add MicSel config int mtl.toml

Signed-off-by: Rander Wang <rander.wang@intel.com>",113,49,1
"thesofproject/sof","26b8406c284444962d22d8d2aeec0cb54ebbe51d","RanderWang","2022-09-07 07:38:58","false","topology2: add more audio formats support for host-mixin pipeline

Add 24bits/32bits support for gain

Signed-off-by: Rander Wang <rander.wang@intel.com>",106,51,1
"thesofproject/sof","123737f4adb44c4a62ac37c0de38146cb72f6e36","softwarecki","2022-07-05 07:32:02","false","dai: Removed unused start_position field

Removed from the dai_data structure the unused field start_position.
The assigned value was never used.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",108,49,1
"thesofproject/sof","e1dbb5b4fc04a828c4fea3ab94689627a573e7c7","RanderWang","2021-07-19 07:58:30","false","ipc4: add copier module support for ipc4

Copier module can work as a host, a dai or just a converter module
to convert format. For host or dai cases, Copier will create a
corresponding component and dispatch module message to it. The key issue
is buffer connection. In the view of pipeline, a component is
connected to a buffer and pipeline message is dispatched when visiting
this connection. So buffer is relinked to host or dai component when
copier dispatches message to these two components and restored to
copier module when control flow returns to copier from host or dai.

Copier will convert format based on input & output format if it is a
converter module.

Signed-off-by: Rander Wang <rander.wang@intel.com>",90,38,0
"thesofproject/sof","0f74422e3285b15a066d3c574625dec0a67176a9","RanderWang","2022-03-08 06:46:05","false","ipc4: stop dma when dai is reset

Fix FW error when changing progress bar in windows auido player.
For this case, pipeline is paused and reset and then paused and
started.  FW reports a error that dma is still running when pipeline
is started.

Signed-off-by: Rander Wang <rander.wang@intel.com>",114,45,1
"thesofproject/sof","d467268657007ccf532decc792c1090b29b6d0d0","lgirdwood","2018-10-04 11:26:33","true","Merge pull request #457 from tlauda/topic/workq-fix-tick

work: new calculation of next tick",34,4,0
"thesofproject/sof","f560916155383d1563cba60d54b69fce237fe753","lgirdwood","2018-09-18 12:15:54","true","Merge pull request #387 from mmaka1/dai-dir-fix

dai: hda: fixed swapped direction flags",37,4,0
"thesofproject/sof","ce8bc4a3941a5f005427caf93dea32d996161ef2","marc-hb","2022-02-22 23:54:28","false","xtensa-build-zephyr.py: important -v verbosity fixes

The most important fix is the addition of the ""flush"" argument which
means are commands are now printed when they are run and not all at the
end when everything is done.

Commands run by this script are very few so they are always shown.  This
makes it possible to debug just this script without being completely
drown in build noise. All '-v's are passed to west.

Pass -v to `west sign`, not just to `west build`.

Drop the manual ""-DCMAKE_VERBOSE_MAKEFILE=ON"", west knows how to do that.

Print directories first so commands are aligned, more visible and can be
copied. Use shlex to quote whitespace.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",106,45,1
"thesofproject/sof","f79d2341af3c6c3f025adadebc7c88bb5a4c8c28","marc-hb","2022-01-06 22:49:09","false","docker-run.sh: log command run and image digests

There's frequent confusion between image ID and image digest: display
both.

Show both sof and thesofproject/sof.

Use set -x to display the full command that is run.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",115,43,1
"thesofproject/sof","a14bfeb0bba0a5fd2d68162b7f2eeb6166aeda19","lgirdwood","2018-10-10 15:00:53","true","Merge pull request #474 from bardliao/master

dma-trace: remove specific reply",33,4,0
"thesofproject/sof","f4ab702491810681d5577a8e9ab49e5577a7452c","lgirdwood","2018-07-20 21:28:09","true","Merge pull request #137 from tlauda/topic/dw_dma_lli_current

dw-dma: use ll_current on dma start",13,2,0
"thesofproject/sof","9a231915ea28be94f4a1668bf620638693a338eb","marc-hb","2021-09-07 17:38:31","false",".github/zephyr: add -Werror

Because we can. This would have caught this regression from
commit 287a5f9a2b1e (""ssp: mclk/bclk turned off unexpectedly"")

-DEXTRA_CFLAGS is not very well documented but it is what Zephyr uses,
try `git -C zephyr grep -C 5 EXTRA_CFLAGS and see.

```
sof/src/drivers/intel/ssp/ssp.c: In function 'ssp_set_config_tplg':
sof/zephyr/include/sof/trace/trace.h:44:11: warning:
                   too many arguments for format [-Wformat-extra-args]
   44 |    printk(""%llu: "" format ""\n"", platform_timer_get(NULL), \
      |           ^~~~~~~~
  ...
sof/src/drivers/intel/ssp/ssp.c:763:4: note: in expansion of macro 'dai_info'
  763 |    dai_info(dai, ""ssp_set_config(): hw_free stage:
                     ignore since there is still user"", dai->index);
```

Using -Werror only in CI avoids slowing down developers with temporary
warnings they intend on fixing later (but before submission)

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",119,39,0
"thesofproject/sof","b580a787da5be966e33de9b70bc281a4b30ab720","lyakh","2021-01-08 09:53:30","false","zephyr: update for unsupported arch builds

Add some files from src/platform/library/ to generic arch
builds with Zephyr.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",75,31,0
"thesofproject/sof","886b7ee40395993219d89fdd05fb8ff0149bd3ed","lyakh","2021-07-09 14:39:26","false","pipeline: (cosmetic) use bool type, adjust line lengths

Use bool type for boolean flags, split some too long lines, merge
some needlessly split lines.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",87,37,0
"thesofproject/sof","975fa04088bff5eb36f232231cf12ff968d78148","lyakh","2021-04-20 13:46:31","false","zephyr: allow building with dynamic interrupts disabled

SOF registers IRQ handlers dynamically, therefore disabling
support for dynamic interrupts for SOF builds doesn't make
much sense. However, this can be used to at least increase
compile-time testing coverage and potentially enable
applications, not using dynamic interrupt registration.

BugLink: https://github.com/thesofproject/sof/issues/4044
Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",88,35,0
"thesofproject/sof","9e84ec2726f51416c76b22639a7ceded4a731f85","lyakh","2021-04-30 15:50:31","false","schedule: (cosmetic) use container_of() instead of a type-cast

Where possible container_of() should always be used instead of
direct type-casting.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",82,35,0
"thesofproject/sof","a40175724fafcc3f0d5420ec014a2c4fa94119e4","lyakh","2020-01-17 14:49:50","false","topology: APL: add 2 DMICs to sof-apl-pcm512x

Up^2 boards have a DMIC connector. Add support for such DMIC add-on
boards. Also adjust iDisp interface DAI IDs to match the new
sof_pcm512x.c Linux machine driver.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",80,19,0
"thesofproject/sof","2cee9fd3cbd9bcb29f46e2cde348d54d7bb98fcd","lyakh","2020-03-31 14:43:13","false","topology: add a ""core"" parameter to the W_DAI_IN() macro

This places all SectionWidget.<DAI type><DAI index>.IN topology
widgets, created by the W_DAI_IN() macro on the same core, on which
the respective pipeline is scheduled.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",69,22,0
"thesofproject/sof","787f67e701883bab8e99e24b2b449431485efb29","lyakh","2020-03-10 13:16:09","false","topology: add a ""core"" parameter to the W_BUFFER() macro

This adds an optional ""core"" parameter to the W_BUFFER() macro, which
then allows buffers to be placed on the same core as the rest of the
pipeline. So far we only modify pipe-volume-playback.m4 to do that,
other pipelines can be modified later as needed.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",84,21,0
"thesofproject/sof","2a8f6a6fc7d43bad09f03e48504f863c75d2e158","marc-hb","2023-05-15 19:25:00","false",".github/fuzzer: apt-get install i386 dependencies explicitly

Let's try to fix the error below spotted in
https://github.com/thesofproject/sof/actions/runs/4981366388

I have no idea why this worked before and not anymore but if this makes
apt happy then we're happy.

```
libstdc++-12-dev:i386 :
  Depends: libstdc++6:i386 (>= 12.1.0-2ubuntu1~22.04) but it is not
           going to be installed
  Depends: libc6-dev:i386 (>= 2.13-0ubuntu6) but it is not installable
```

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",50,59,1
"thesofproject/sof","ab643b7655549855341b5b307a81668a2b1812fc","marc-hb","2021-05-27 20:28:26","false","logger: catch out of bounds e->params[i] access

... when there are too many % characters in format string. Spotted by
routine valgrind run.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",82,36,0
"thesofproject/sof","ceacbefd036b652473ff21ae46e3390a992b14d4","marc-hb","2022-07-01 21:32:55","false",".github: doxygen: upgrade to Ubuntu 22.04

This should upgrade doxygen from version 1.8.17 to 1.9.1

This will hopefully provide FAIL_ON_WARNINGS and fix issues like
https://github.com/doxygen/doxygen/issues/7970

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",110,49,1
"thesofproject/sof","7eb5ffcc4b685b161e8a8bbef38a706ab32054bf","marc-hb","2022-07-06 21:34:07","false","Exclude dai-legacy.h from doxygen to avoid clashes with dai-zephyr.h

This fixes the sof-docs build and stops producing a dai-drivers-api.html
garbage that randomly mixed the two .h files.

```
Warning: Duplicate target detected:
    group__sof__dai__drivers_1ga8c720c310f408b2f97ce014562d6a910
sof-docs/api/dai-drivers-api.rst:4: WARNING: Duplicate ID:
   ""group__sof__dai__drivers_1ga8c720c310f408b2f97ce014562d6a910"".
sof-docs/api/dai-drivers-api.rst:4: WARNING: Duplicate explicit target name:
   ""group__sof__dai__drivers_1ga8c720c310f408b2f97ce014562d6a910"".

sof/sof-docs/api/dai-drivers-api.rst:6: WARNING:
  Duplicate declaration, const struct device* dai::drv
```

(Temporarily?) fixes commit 015ec63c4dad7d5bf (""zephyr: add glue code to
use zephyr dai drivers"") that introduced a lot of duplication with
dai-zephyr.h. See more details at
https://github.com/thesofproject/sof/pull/5731#issuecomment-1175630147

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",110,49,1
"thesofproject/sof","c11562b00a2906d016a34e0a495351b7da1bdc39","jsarha","2022-02-08 08:11:19","false","dma-trace: Align DMA buffer correctly to fix dma tracing issues

Force DMA buffer to be correctly aligned. If the buffer is only
64-byte aligned, when using hda-dma, then the last 64-bytes of the DMA
buffer is not transferred correctly to host side.

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",106,44,1
"thesofproject/sof","46b7645c921cfcdd2b3f7898c554d9bb06433522","lyakh","2019-01-17 09:08:05","false","alloc: eliminate two goto statements

Use ""break"" to terminate loops instead of a ""goto.""

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,7,0
"thesofproject/sof","86a4e62446d8b815f22498c22540e5441c1b7d71","jajanusz","2019-09-30 18:05:50","false","rimage: manifest v2.5 for MEU

Add function writing manifest v2.5 for MEU.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",66,16,0
"thesofproject/sof","4eeba9c29e4cc20af96502f721899c73a2bdac99","jajanusz","2019-07-25 12:07:07","false","Revert ""host: fix wrong check for irq""

This reverts commit 825646595580ff181520d2c5173575bb42d5188d.",49,14,0
"thesofproject/sof","c1f4c3f1976b7ce6f6da47adbbe9387d7023c935","jajanusz","2020-01-07 13:25:00","false","cmake: version: consider unannotated tags

Command git describe looks only for annotated tags, but we should
get any tag reachable from master, that's why --tags flag is needed.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",71,19,0
"thesofproject/sof","18f9b77f5b6b57d6fcf90e3dd8f13f17216be879","jajanusz","2019-04-04 15:41:55","false","testbench: open and register comp .so on first use

Component is registered in function added to shared lib's constructors.
We no longer call init found with dlsym, instead we delay delay
dlopen until we want to register comp.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",49,10,0
"thesofproject/sof","b581aa52e994eca70ef79c693b2950b437314e8f","johnylin76","2022-12-16 10:03:08","false","topology: add waves-integrated tplg file for RT1019 codec

Add topology case {WAVES + RT1019 CODEC}

Signed-off-by: Pin-chih Lin <johnylin@google.com>",91,54,1
"thesofproject/sof","1baececbad1ece1698290cb01b91719df8260ac2","dbaluta","2020-10-26 13:19:33","false","drivers: imx: sdma: Cleanup event handling

For handling events we only needs an enable/disable functionalities.
Setting up an event (that means reading the event number and saving
it in dma_pdata is already done at config time).

So, this patch just introduces:
	* smda_enable_event
	* sdma_disable_event

and removes existing sdma_clear_event and sdma_set_event.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",74,29,0
"thesofproject/sof","f6c8706cfe1123ef97ceffae6f26c8c62da6baae","dbaluta","2023-10-24 10:53:38","false","drivers: imx: micfil: Change loglevel to info

There is no need to print an error at the beginning of a function.
The usual behavior should be to print an info.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",8,65,1
"thesofproject/sof","ae7e8daf21c1e4b7684daf0706ecdda087a494e8","ranj063","2022-01-13 03:28:45","false","codec_adapter: Modify the signature of codec_adapter_copy_from_module_to_sink()

Modify the signature of codec_adapter_copy_from_module_to_sink() to pass
the module buffer. Also, clarify comments to make it more easier to
follow.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",117,43,1
"thesofproject/sof","8bcf1fc9114765cf91de80a00415d350293445c0","abonislawski","2023-07-19 07:36:34","false","mtl: fill in cps and cpc data for COPIER & GAIN modules

Fill in measured cps consumption data for COPIER & GAIN  modules

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",32,62,1
"thesofproject/sof","d72072584043d161f3733a9d3ddccd64f2730c79","ranj063","2021-03-19 04:08:55","false","topology2: Add buffer class

Add the definition for the buffer class. A buffer object
can be instantiated as follows:
Object.Widget.buffer.""N"" {
	index	0
	periods	2
	caps	""host""
}

where 'N' is a unique instance number for the buffer object within
the same alsaconf node.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",72,33,0
"thesofproject/sof","075b88050660c33fdc6ac292560b6e4dc478d16c","tinghan-shen","2022-10-26 02:31:38","false","platform: mt8186: Revise mt8186 clock flow

Add the missing necessary delay after changing DSP bus frequency.

Change the core frequency when initialize clock to avoid
altering the core frequency in the middle of execution.

Signed-off-by: Tinghan Shen <tinghan.shen@mediatek.com>",95,53,1
"thesofproject/sof","d48ae7aadaa4806a12cc3a73b8d28ceb232911ce","ranj063","2023-02-08 18:06:49","false","config: mtl: Set init_config for smart amp

Smart amp needs the base config extension during module init.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",55,56,1
"thesofproject/sof","b7808276eea2fc9b42f85f00495744875757b72b","ranj063","2021-09-28 18:33:35","false","drivers: Intel: hda-dma: remove unnecessary code in start/release

Host DMA is never paused or released. Remove the code to
start host DMA during release and the check for release
in hda_dma_host_start().

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",121,40,0
"thesofproject/sof","1a96df1e63e68754c58ce777bd8c5a62f6d06f58","ranj063","2023-06-29 22:40:04","false","audio: copier: Add a helper function to copy to all sinks

This will be used to separate multi-endpoint DAI copy from the module
copier copy.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",37,61,1
"thesofproject/sof","092eb61781f681b15020df71a40810ddaf086e33","yongzhi1","2019-04-25 14:22:42","false","topology: glk-rt5682: add more virtual widgets

Add some more virtual widgets to suppress the machine
driver errors.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",47,11,0
"thesofproject/sof","2b714ecbbaa3a466d0f44462e020c4639b1d98dc","fuyuntsuo","2021-05-12 09:39:36","false","audio: igo_nr: update email address.

Changed the email address of Intelligo Technology Inc.

Signed-off-by: fy.tsuo <fy.tsuo@intelli-go.com>",85,35,0
"thesofproject/sof","813c7bd5056cf2168727d99d3daebbc0a3c7839f","libinyang","2023-02-10 09:18:47","false","topology2: dmic-wov: refine wov pipeline id

As WoV may be used on HDA platforms, SDW platforms, as well as
nocodec platforms. Let's use a more safe pipeline ID for WoV.

Signed-off-by: Libin Yang <libin.yang@intel.com>",54,56,1
"thesofproject/sof","cac3f7d2a495c8c670095ddefc3cd59a730ee83e","Potochi","2021-08-03 12:14:56","false","drivers: imx: Compile SDMA support as separate driver

SDMA IP can be found only on I.MX8M so compile it only
on this platform to reduce the code size for the rest
of the platforms

Signed-off-by: Bud Liviu-Alexandru <budliviu@gmail.com>",111,38,0
"thesofproject/sof","771c2bb31828db8b277c960a9d58cc0abcde84fa","brentlu","2021-09-22 09:14:50","false","topology: pipe-demux-eq-iir-playback: remove macro 'matrix1

The demux routing matrix and config are removed for two reasons: 1.
the config 'demux_priv_1' is hardcoded for pipeline 1 only. 2. other
m4 file with demux compoenet like pipe-volume-demux-playback has the
matrix and config defined in the topology file.

The topology which implement this pipeline should define the routing
matrx and config named as 'demux_priv_<pipeline id>' before including
this m4 file.

Signed-off-by: Brent Lu <brent.lu@intel.com>",117,40,0
"thesofproject/sof","68b3693de14c4ccd31fc2d02bca261855527da0f","lrgirdwo","2020-10-26 11:22:42","false","plat_auth: use cavs 2.5 plat auth offsets

cavs2.5 has different offsets for plat auth data.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",74,29,0
"thesofproject/sof","73fe559435f2c4b8cfd2e6eb725bc2fbc453153a","mwierzbix","2018-09-04 10:20:48","false","lib/strcheck: added unit tests for lib/memset, lib/memcpy.; lib/bzero: merged into lib/strcheck;. .gitignore: added ommission of test build files.

Signed-off-by: Michal Jerzy Wierzbicki <michalx.wierzbicki@linux.intel.com>",30,3,0
"thesofproject/sof","498a5f571dc58557bca469d442f0ee100c7f7315","fredoh9","2019-03-20 16:42:57","false","topology: enable LBM for nocodec topology

Add quirks parameter in SSP_CONFIG_DATA(). Enable LBM in dupulex pipelines
by setting quirks as SOF_DAI_INTEL_SSP_QUIRK_LBM 64(1<<6). SSPx.IN port get
PCM data from SSPx.OUT. Note both mclk and quirks are optional parameter.
When quirks set, mclk should have value or initialize to default value
which is 0.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",64,10,0
"thesofproject/sof","fee7d9c66026849ec88cc5a517d93f5a792a567e","akloniex","2020-09-23 16:13:35","false","trace: Introduce adaptive rate-limiting/suppression of repeated messages

Few recent messages are remembered by the filter, and repetitive messages
reported in short period of time are suppressed. Solution is compile-time
configurable via many Kconfig options, as documented in Kconfig.

Signed-off-by: Artur Kloniecki <arturx.kloniecki@linux.intel.com>",65,28,0
"thesofproject/sof","dfb30f3b73f96844ec156120ce6355d605a36514","ujfalusi","2023-09-26 12:42:59","false","tools/probe: Fix WAV header creation for extracted audio streams

The finalize_wave_files() should be called to update the WAV header to be
valid.
This should be only done when demuxing to files.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",18,64,1
"thesofproject/sof","e20009bc4153cfa57177460e2097b8e239e7782e","btian1","2023-10-20 08:14:34","false","Topology2: condense passthrough tplg file audio format

Condense passthrough audio format with combined arrays.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",12,65,1
"thesofproject/sof","0488ffee322375584ba02591c8278216192ca5ce","dbaluta","2022-09-06 14:12:42","false","zephyr: Fix DRC module compilation

Add DRC files to Zephyr compilation to avoid failures like this:

sof/src/audio/drc/drc_generic.c:188: undefined reference to
`drc_lin2db_fixed'

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",106,51,1
"thesofproject/sof","67802d8174304d7baba1ae6cb8b50e21aea038c9","plbossart","2018-08-23 02:46:01","false","topology: add support for wm8804

This SPDIF transmitter/receiver is used by the HifiBerry DIGI+ and
DIGI IO. The wm8804 operates as bit clock and frame master.

TODO in future update: add support for capture on the DIGI+ IO (this
may be done with a different topology file to avoid confusing users
with a non-working PCM capture patch)

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",19,3,0
"thesofproject/sof","66ce9791fa74ec481625a91b8ab1a0bc6eead49e","jajanusz","2019-11-05 10:55:43","false","kconfig: optimization levels

Add configs for optimization levels.
These configs should be used by build system to properly
tune compiler flags.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",53,17,0
"thesofproject/sof","431110e015c272e50e1a96d98a79593d055a3df6","jajanusz","2019-10-10 11:48:51","false","suecreek: shim: clock status registers

Add registers for checking clock status.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",61,16,0
"thesofproject/sof","5afec837282fef92a2d74d2ccc222b71ebaa3551","jajanusz","2019-01-30 07:04:54","false","rimage: use fopen binary mode",57,8,0
"thesofproject/sof","ac2a7e2ebe9644101bd5f3a56f1de71f51e5d72e","keyonjie","2021-09-09 10:46:21","false","cavs: memory: use uncached address for buffer zone

Use uncached address for buffer zone management, which can be used to
support both cached and uncached allocation requests.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",118,39,0
"thesofproject/sof","6c2cdffd0239de4fcedc95e0cdded6acb6dac184","keyonjie","2021-04-08 02:56:23","false","dai: dai_config refinement

This is cleanup of the dai_config logic to make it more robust.

The host side should send _DAI_ONFIG IPC before trigger start, it can be
at:
a. topology parsing and pipeline initialization stage, or
b. before hw_params, send _DAI_CONFIG according to runtime params.

For both #a and #b, the configured dai will be stored in the new added
dai_data.dai_config, then set at the start of .params(), while the DMA
channel will be requested later at .prepare() and freed at .reset().

There is no need for the host side to send DMA_CHAN_INVALID to ask for
freeing the DMA channel anymore, if the host side keep sending this,
it will be ignored since the dd->chan is already freed at .reset().

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",79,34,0
"thesofproject/sof","fec3666a4f630a2db234a17a7b8e6ed20779eff8","cujomalainey","2021-09-14 23:06:06","false","pipeline: correct cleanup logic

Currently pipeline_xrun_set_limit cannot fail, but the TODO in the
function suggests that is not planned to be true for the future. Lets
fixup the error logic so when that happens we don't leak a pipeline
definition.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",117,39,0
"thesofproject/sof","47ffafa21ec5a83cf28adc7eebe3806f61452942","bkokoszx","2020-08-28 10:17:10","false","smart_amp: remove hardcoded frame_fmt value

In order to allow stream different audio formats,
the hardcodec frame fmt value should be removed.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",74,27,0
"thesofproject/sof","8083eb0156a56ac43d31424d0183dd1993218c19","fkwasowi","2022-10-17 08:21:36","false","copier: set conversion function for all pins

conversion function and out_fmt
is set only for first pin

Signed-off-by: ""Kwasowiec, Fabiola"" <fabiola.kwasowiec@intel.com>",100,52,1
"thesofproject/sof","b3c16790cd6fae9b4ce901d7ef36b47223f96dd7","ktrzcinx","2020-04-02 12:10:07","false","rimage: Remove ldc generation ability

SMEX is new tool designed to create ldc file content,
so this ability in rimage should be removed to avoid
duplication.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",76,22,0
"thesofproject/sof","9a091a13201948324403b74cbf53c956acda7492","ktrzcinx","2020-01-21 11:13:37","false","test: Use common_mocks in each unit test

Link common_mock to each test by default.
Removed duplicated mocks in component specific folders.
Keep old mocks where implementation differs from
implementation in common_moks.c

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",79,20,0
"thesofproject/sof","0282941d94b42984ef3f13bea5887351967d91a4","ktrzcinx","2019-11-04 11:28:11","false","trace: Swap definition order in trace_

It Is done to achieve consistent trace definition order in project.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",55,17,0
"thesofproject/sof","61f9d3de344b3678cdb3d017295e773f69f78640","ktrzcinx","2020-08-18 10:27:50","false","trace: Move FW description log location

This log should be added just after buffer initialization,
to make it the first one in the output file - for easy identyfication.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",77,27,0
"thesofproject/sof","3e7d3f0181c69372df9f892fb7ee5a9f7dee2326","ktrzcinx","2020-01-17 09:00:26","false","DAI: Use local variable holding frame format in dai playback and capture params

In new convention there is no need to break the line in function call,
so there will be less effort after rename location of local_fmt value
in near future.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",79,19,0
"thesofproject/sof","ab387b9bfc2542684364e2b77a1863fcfa7712da","RanderWang","2021-07-14 08:25:50","false","topology2: use correct key word for contraint attribute

Signed-off-by: Rander Wang <rander.wang@intel.com>",87,37,0
"thesofproject/sof","933f275d432ff37fc64ec54620510721db19bbf0","RanderWang","2018-06-04 08:21:04","false","BDW: refine ssp start function

Set Tx|Rx Enable for starting playback|capture

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",1,0,0
"thesofproject/sof","ef29d38ec2ff35adbb57d7dfac70ae6ab5fef250","MingJenTai","2022-11-10 03:03:32","false","rtnr: Fix log formatting for unsigned parameters

Signed-off-by: Ming Jen Tai <mingjen_tai@realtek.com>",93,53,1
"thesofproject/sof","d959089d8e28b318b0bd1a062937f3248d6239b2","MingJenTai","2021-11-15 05:21:15","false","Modify RTNR to work with KWD on TGL and ADL.

Modify RTNR to work with KWD on TGL and ADL.
Remove unused RTNR 16kHz topology.
Add RTNR support to max98390 on ADL.

Signed-off-by: Ming Jen Tai <mingjen_tai@realtek.com>",127,41,1
"thesofproject/sof","efba70fdbe12a136f7a843d4e8f24e236bb2cb40","andrula-song","2023-07-04 06:12:12","false","Audio: Fix the aligned feature comments

Fix the comments of align_frame_cnt and align_shift_idx to
make them more clear and understandable.

Signed-off-by: Andrula Song <andrula.song@intel.com>",39,61,1
"thesofproject/sof","13b659259de20f108654b17ce666c07d4e60413a","andrula-song","2022-05-26 01:37:12","false","audio: fix ipc tx timed out for 0x60060000

Add local veriables to fix bug of ipc tx timed out for 0x60060000
(TRIG_PAUSE) when testing multiple-pause-resume on ADLP Chrome device.
Release the buffer locks symmetrically.
Signed-off-by: Andrula Song <xiaoyuan.song@intel.com>",115,48,1
"thesofproject/sof","de2dcbbc2658c67ed7ab761ea4a52a3c3a3672f8","xiulipan","2020-04-24 08:35:17","false","topology: fix a typo for SCHEDULE_CORE

With define for W_PCM_CAPTURE only need 5 arguments
W_PCM_CAPTURE(pcm, stream, periods_sink, periods_source, core)
Fix the wrong parameter in pipe-kfbm-capture.m4

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",72,23,0
"thesofproject/sof","066818eb083395d5c9e0fad15deee8c2ffddae65","btian1","2022-10-31 14:25:12","false","Volume: optimize volume module for better performance

Volume module support per channel volume adjust, a dedicated
circular buffer designed for store per channel gain 4 times
for SIMD calculation. However, it is not must to store gain for
each time calculation, add a flag to indicate and decide the copy
action.

Below is the logs for before and after opt, around 5% optimized:
perf comp_copy samples 48 period 1000 cpu avg 249 peak 254
perf comp_copy samples 48 period 1000 cpu avg 236 peak 245

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",91,53,1
"thesofproject/sof","29414aa25e56a113c7abd2990ffe9d11ca485bbc","dbaluta","2020-04-22 18:33:32","false","platform: imx8m: Fix FIFO depth for i.MX8M

On i.MX8M series, SAI FIFO is configured to hold 128 words.
(128 x 32 bits).

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",71,23,0
"thesofproject/sof","2346622d1a394bc3f961e96a44f20a609890f958","dbaluta","2020-10-26 13:19:54","false","drivers: imx: sdma: Initialize next_bd with zero at config time

During several runs next_bd might not be zero, this means that
when an interrupt arrives we will mark the wrong BD as being ready
to be processed by the DSP.

This causes the DSP to block waiting forever for an available BD.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",74,29,0
"thesofproject/sof","031ab223a0559fea6b22e818e17164e981d57c4b","lbetlej","2020-01-29 14:30:57","false","cavs: enable power gating of unused memory banks for cavs 2.x hw

The change adds power gating of unused memory banks for cavs 2.0/2.5
hardware on top of previously enabled flow for cavs 1.8.

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",77,20,0
"thesofproject/sof","c2c7e117b541f2e45a3e3550f4c7e2958e6f58e1","plbossart","2020-02-28 21:42:16","false","ipc: dai: remove unused hdr field in params

We don't use this field, move back to reserved.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",73,21,0
"thesofproject/sof","d5c38284a1e4f97267b3e57d437445f96c53087e","lbetlej","2018-10-19 12:44:08","false","Set SRAM LDO off on power down - additional power gating on D0->D3 path.

Added assembly macros to control state of LDO for LP and HP SRAM.
Macros are used during power down procedure to properly handle LDO state.
LDO handling sequence in power down procedure is specific for cAVS 1.5.

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",31,5,0
"thesofproject/sof","404b0760a6f276585ef9966061562e639e11e502","softwarecki","2023-07-12 12:00:21","false","format: 8-bit saturation inline function

Added a new inline function which saturates 8-bit signed value.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",31,61,1
"thesofproject/sof","ec1cfd8f95ac1097fb5636662518ff07e453f39a","marc-hb","2023-10-19 22:45:28","false","topology2/cmake: stricter if execute_process(alsatplg --version ...)

We want to fail if STATUS is not defined, the empty string, the FALSE
string or anything unexpected that it is not strictly equal to success
code ""0"".

Fixes commit 308a24a92b44 (""topology2: Add build support"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",12,65,1
"thesofproject/sof","0bbdbb111fb17de7d8c5d1f7bb9233f14f813b39","marc-hb","2022-03-31 23:19:10","false","test/topology: make tplg-build.sh callable from anywhere

This removes two layers of indirection when trying to find what fails.
The lack of this proved especially painful when working on #5632 and
similar backports.

Also move outputs to a subdirectory by default. No change when invoked
from CMake which does not use the default output directory.

Also show the exact m4 and alsatplg commands run when not using XARGS
parallelization. Again this is critical when something fails.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",114,46,1
"thesofproject/sof","c180e8cb958c1a59950b6390f6350bbdbae2c30b","marc-hb","2023-10-20 18:48:46","false","rimage/toml_utils.c: remove uint32_t d0 shortcut in parse_uuid()

Fixes compilation failure with clang 15:

rimage/src/toml_utils.c:297:67: error: taking address of packed member
  'd0' of class or structure 'uuid_t' may result in an unaligned pointer
  value [-Werror,-Waddress-of-packed-member]
  sscanf(buf, ""%08x-%04x-%04x-%02x%02x-%02x%02x%02x%02x%02x%02x"", &id.d0,
                                                                   ^~~~

This also aligns indexes.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",12,65,1
"thesofproject/sof","b18ec17fc3ad9bfb87eb367d4070d1a69262e759","marc-hb","2021-07-06 04:31:24","false","ipc3/handler.c: re-enable DMA trace for Zephyr

Reverts commit 74cacc313868 (""zephyr: ipc: dont enable DMA trace
transport."") modified by commit d7282762bcd1 (""ipc3: don't declare unused
variables"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",84,37,0
"thesofproject/sof","483c26e7a13e309a5630ae9388a4c399850e5ce7","marc-hb","2020-03-18 23:09:32","false","panic: add __attribute__((noreturn)) #if __GNUC__

Commit 9e1a2b251a3e (""panic: noreturn attribute for scan build"")

 added ((analyzer_noreturn)) but only for clang.

Fixes at least these two -Werr CONFIG_PROBE=y build failures and
probably similar others with a different .config or in the future:

   sof/src/probe/probe.c: In function 'probe_cb_produce':
   sof/src/probe/probe.c:635:11: error: 'valid_bytes' and
   'container_bytes' may be used uninitialized in this function
   [-Werror=maybe-uninitialized]

Build failure reproduced with xtensa-apl-elf-gcc (crosstool-NG
1.23.0.440-3b8c) 7.3.0

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",68,21,0
"thesofproject/sof","d661616892e591948d4533ffd9221784c8e424f8","marc-hb","2023-10-23 16:59:55","false",".github/zephyr: de-hardcode the remote name in the Windows build too

Fixes commit 4bc6488b24e44 ("".github/zephyr: de-hardcode the name of the
zephyr remote"")

(Yay for duplication)

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",8,65,1
"thesofproject/sof","ebaa1429f9d40dc17a28438193789a771cbab2cf","marc-hb","2023-04-03 22:45:49","false","xtensa-build-zephyr.py: log ALL ""evil"" environment differences

This is a typical example of why environment variables are (a sometimes
necessary) evil: imagine you're trying to reproduce exactly the `west
build` command run by xtensa-build-zephyr.py when building with the
`xt-xcc` toolchain. So you would typically look at the logs, feel lucky
that it shows the extra environment variables used and copy them:

```
XTENSA_TOOLCHAIN_PATH=/srv/home/jenkins/xcc/install/tools
TOOLCHAIN_VER=RG-2017.8-linux
XTENSA_SYSTEM=/home/jenkins/xcc/install/builds/RG-2017.8-linux/cavs...
In dir: workspace/sof; running: west build ...
```

Except this won't work because there's one variable currently missing:
`ZEPHYR_TOOLCHAIN_VARIANT`!

Of course there could be more in the future.

Fix this by leveraging the recent os.environ.copy() added by
commit 8aab18351fd6 (""xtensa-build-zephyr: fix DEFAULT_TOOLCHAIN_VARIANT
spill on next platf"") compare it to the current os.environ and show the
difference in a totally generic, non-hardcoded way.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",52,58,1
"thesofproject/sof","386822403dbffcc0ca07eff492efc70f6da2271a","lyakh","2023-01-24 14:51:27","false","eq-iir: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register eq-iir with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","6c4b4ec84383848346dca1708b4100e73dcf38f0","lyakh","2022-12-13 13:47:56","false","ace: fix cache-uncache conversion macros for sparse

cache_to_uncache() and uncache_to_cache() must be inline functions
with proper argument annotations. Fix ACE definitions by alanogy with
cAVS.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",98,54,1
"thesofproject/sof","9127902e76d6403f69cf46d47405dc90d274af0a","lyakh","2021-11-18 20:26:01","false","dw_dma: fix free space / available data calculation

The DW DMA driver misinterprets completely free output buffer as full
buffer and completely full input buffer as empty buffer. This is
indeed difficult to distinguish within the current driver flow. This
patch makes such detection more reliable.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",128,42,1
"thesofproject/sof","1da390743dade08da0478305f4bb5432971d443b","lyakh","2019-05-17 10:57:19","false","dw-dma: revert recent changes for Baytrail

Two recent commits:

7275e422d86 ('dw-dma: handle interrupts per core')
433de9fb50c ('dw-dma: clear block/transfer irq after stop')

broke DW-DMA on Baytrail. Though they seem logical, they don't
produce the desired result on that platform. This patch restores the
original behaviour on BYT, CHT, BDW and HSW. It also eliminates the
redundant branch in the loop by replacing it with a simple mask to
restore the original IRQ processing order:

1. clear the source IRQ
2. clear the platform IRQ
3. call the callbacks

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",60,11,0
"thesofproject/sof","17fbf7de22f90054fd1fcdf2f36b9fef11dbad56","lyakh","2023-01-30 10:04:39","false","platform: remove support for Sue Creek

Remove all support for Sue Creek platforms, it isn't supported any
more.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",52,56,1
"thesofproject/sof","f2e76acd48327aa3fd26e5a7d26d8a5ac2252691","lyakh","2019-02-14 11:28:08","false","interrupt: add a parameter to interrupt_unregister()

Sharing interrupts is currently implemented by inserting an interrupt
ID field into the interrupt bitmask. We want to get rid of bitmasked
interrupt numbers, therefore that method has to be replaced. This
patch uses an approach, similar to the Linux kernel: we pass the
interrupt handler argument to the interrupt_unregister() function to
be compared to the argument, used when registering the interrupt
handler. This means, that users must use unique arguments when
registering interrupts, but this is anyway the case in most cases. We
also add a check for this to interrupt_register().

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",60,8,0
"thesofproject/sof","139c3b4c88370b7e0c7d302df5e21026e529c790","dbaluta","2019-01-28 12:10:34","false","rimage: Fix file_format.h include guard

This is most likely due to copy/paste.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",59,8,0
"thesofproject/sof","dbf43b290a236f8757a40316089fb7de2bd2c611","jajanusz","2019-03-20 11:57:10","false","cmake: add git hooks

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",65,10,0
"thesofproject/sof","3f26bf172d3f29a9613c5e75b3ba5a6d5fb85461","serhiy-katsyuba-intel","2022-12-16 19:24:35","false","ipc4: copier: Add support for ALH multi-gateways

Adds ALH multi-gateway feature: functionality to mux/demux data from/into
multiple gateways.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",91,54,1
"thesofproject/sof","310b10c0552eced709beeb3ce8bcc901970e5b67","CBala21","2023-06-20 10:20:12","false","topology1: tgl: add support for Nocodec amp and HDMI-in capture.

Adding support for the product which doesn't have no ssp amplifier
but need to support HDMI audio playback and HDMI-in capture via I2S.

Signed-off-by: Balamurugan C <balamurugan.c@intel.com>",45,61,1
"thesofproject/sof","385cf89c7655d480f0573c57d04811fae6503ef8","keyonjie","2021-01-21 09:03:01","false","smart_amp_maxim_dsm: change logging level for xrun

When overrun happens for maxim_dsm_ff_proc() or maxim_dsm_fb_proc(), it
is not fatal, change the logging level to warning to avoid flooding the
memory windows.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",69,32,0
"thesofproject/sof","92307c06654e356a798dff1d9bed15bcd652fe63","keyonjie","2019-10-30 00:54:36","false","tplg: pipe-kfbm-capture: increase the buffer max and period max

We need large host buffer for keyword detection to make sure there will
be no overwritten during the history buffer draining, increase the buffer
min/max and period max to fit it.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",64,17,0
"thesofproject/sof","8c863f43af07215bde4f6b12e025173217ddec84","brentlu","2021-06-15 05:55:29","false","topology: sof-glk-cs42l42: using 24-bit sample depth on SSP2

Changing sample depth of SSP2 to 24 bits for better dynamic range.

Signed-off-by: Brent Lu <brent.lu@intel.com>",69,36,0
"thesofproject/sof","e4692e644efd688dceae563f0d6b6a127ba42949","jsarha","2022-03-21 19:37:21","false","xtos-wrapper: Add Zephyr kernel.h replica with k_[mu]sleep() for XTOS

The commit adds kernel.h header at the top level of xtos-wrapper
include directory. The idea is to be able to write OS agnostic code
using Zephyr kernel API calls and simply including kernel.h without
worrying if we are building for XTOS or Zephyr.

This first commit contains Zephyr API style k_msleep() and k_usleep()
implementations. The functions in fact call the old
wait_delay-functions.

More implementations and declarations following Zephyr kernel.h
content can be added as needed.

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",109,46,1
"thesofproject/sof","9a26e4558094f19f3f7becd89eb9e8a9a9dd82b9","keyonjie","2021-07-02 09:45:56","false","config: apl: change image_size to the real SRAM size

We have 8 bank HP and 2 bank LP SRAM on APL, change to toml config file
to reflect that.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",85,37,0
"thesofproject/sof","d788b34749af6db52344bd4c60463f317badb175","andyross","2023-06-06 15:07:10","false","ipc/pipeline: Check type in ipc_pipeline_complete()

This function is called based on external commands, and with an
arbitrary component ID that may not actually be a pipeline.  Check the
type before following garbage pointers and passing them down into call
trees.

Found via fuzzing.

Signed-off-by: Andy Ross <andyross@google.com>",45,60,1
"thesofproject/sof","1e26ff4dc7a7a906debddbe1a7db0dbfa4a383aa","ktrzcinx","2020-09-25 06:28:25","false","logger: Use 'rb' mode for freopen

Windows platform needs ""rb"" mode to read binary file,
otherwise after read 0x1A EOF will be. See:
https://stackoverflow.com/questions/11717120/unexpected-return-value-from-fread

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",65,28,0
"thesofproject/sof","f897921490964d1a610f6db7a608f93872df57e6","RanderWang","2022-10-24 06:48:07","false","ipc4: refine dsp core comments

Found by Linux patch review.

Signed-off-by: Rander Wang <rander.wang@intel.com>",98,53,1
"thesofproject/sof","ed0eda61d453270425331f0d852f15481b3624b3","RanderWang","2022-04-08 06:29:38","false","ipc4: src: remove frame setting with incorrect value

CPC is for pipeline schedule not for dev->frames and its
value is more than 1000 which is not fir for frames.
Dev->frame is assigned in src_verify_params and we don't
need to set it here.

Signed-off-by: Rander Wang <rander.wang@intel.com>",114,46,1
"thesofproject/sof","85169d3da5b734206cceddf96b4aa06726e8e057","ranj063","2022-01-06 17:57:52","false","codec_adapter: drop the type parameter in codec_adapter_set_params()

It can be accessed via cdata in the function.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,43,1
"thesofproject/sof","64129bd0a3ff08bbb9fa398b40fc7a0ac0a3c46f","lgirdwood","2018-10-18 10:19:37","true","Merge pull request #484 from zhuyingjiang/add_v1_5_manifest_header

Add v1 5 manifest header",33,5,0
"thesofproject/sof","709d6301e1ab2a0b2d0e45ad3621610a20232f5b","lgirdwood","2018-07-04 13:06:26","true","Merge pull request #47 from xiulipan/ipcfix

fix ipc handler list uninit bug",9,1,0
"thesofproject/sof","1b08b798efe78d445a7d721af8572d56198e1546","mrajwa","2019-02-28 13:13:31","false","MEMORY: add definitions for LPSRAM

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",67,9,0
"thesofproject/sof","4e5f16bc783b51cb2902d725d6847bd9dd801529","mrajwa","2019-07-29 20:18:20","false","kpb: pause selector before draining starts

This patch stops selector copy before draining starts.
This is temporary change as driver should take care of
it.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",51,14,0
"thesofproject/sof","f99face2bc7930d19a368c053ec7ca5d4e5a969f","mrajwa","2020-07-13 18:32:31","false","edf_scheduler: cleanup

This patch removes not used code from edf_scheduler header
file and code which is setting edf scheduler tasks start
time while this is not supported by this scheduler.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",78,25,0
"thesofproject/sof","70068a1270fe9b5653bd752c383e5c4a43788e31","lgirdwood","2018-09-26 11:07:34","true","Merge pull request #358 from juimonen/eq_test

EQ: Update IPC to deliver parameters in component creation",37,4,0
"thesofproject/sof","53b3bc6a956ae5957966336f88980438f1f85a88","balakishorepati","2022-09-16 06:52:41","false","module_adapter:Fix dangling pointer issue in module reset

During module_reset and module_free Calls, pointers are not
getting reset to NULL which causes dangling pointer exceptions.
Initialize pointers to NULL after deallocating the memory.

Signed-off-by: Balakishorepati <balaKishore.pati@amd.com>",98,51,1
"thesofproject/sof","3fa7d56960adac6333dd9ba8fed166a8b8558944","abonislawski","2020-06-16 09:56:48","false","cavs: add mailbox_sw_reg read/write64

It will allow to simplify usage of 64bit values

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",74,25,0
"thesofproject/sof","2416184bc58791e9f528bfa6ed916f9d2da91012","ranj063","2021-10-06 17:48:37","false","audio: host: call dma_stop_delayed during host reset

Some DMA's like the HD-Audio DMA need to be stopped ater the pipeline
has been reset. So call dma_stop_delayed op in host reset so that the DMA
can be stopped during the PCM_FREE IPC when the host gets reset.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",121,40,1
"thesofproject/sof","51501bfcef4e28e525a5579b64547adf3bf8e2f7","ranj063","2022-10-18 04:11:08","false","ipc4: handler: skip setting state when pipeline is already active

No need to proceed if the pipeline is already active.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",101,53,1
"thesofproject/sof","19e4b6d5cebc85c0f1ea417fcd7a8ac5103757d7","abonislawski","2022-08-04 11:52:57","false","zephyr: ll-schedule: remove unnecessary next_tick logic

next_tick and start logic is unnecessary for
a strictly periodic Zephyr-based LL scheduler implementation

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",111,50,1
"thesofproject/sof","9a786e7193bb11c2694e3159dbfb3ed82d704ec8","ranj063","2018-06-12 03:37:12","false","dma: update platform DMAC definitions with the supported dev types, dir and capabilities

This patch updates the platform DMAC definitions to include information
about the supported dev types, copy directions and capabilities.

It also replaces the copy_dir enum with a bitmask and adds
the copy capabilities and dev type bitmasks.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",1,0,0
"thesofproject/sof","2748716bd514dbaaa54e99559decfa3147ffb825","ranj063","2019-02-13 04:05:09","false","ipc: tplg: add effect type comp for keyword detect

Add keyword detect effect component type.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",60,8,0
"thesofproject/sof","c0434e27cebb9911928da3037b9419294c2b7ef0","ranj063","2019-05-31 06:19:46","false","topology: apl-nocodec: change pipeline format to s32le

Pipeline format determines the buffer size calculation. With the
pipeline format set to S16_LE, hw_params fails for S24_LE and S32_LE
formats. So, change the pipeline format to s32le to support all
three formats.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",72,12,0
"thesofproject/sof","b31d2a1595b20884b4beff2f5be6bbce9e1f03fd","ranj063","2023-05-02 16:42:27","false","dai-zephyr/dai-legacy: Split the dai_free() function

Split the dai_free() function to add a helper function, dai_zephyr_free()
in preparation for this to be called from both a DAI device and copier
device.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,59,1
"thesofproject/sof","a17c2823d376487d1f78ed3f80e6f93e7288bc92","aiChaoSONG","2023-09-18 07:39:27","false","xtensa-build-zephyr: remove ipc option

For legacy CAVS platforms (TGL/ADL/EHL), the default
build config is IPC4 now, and the overlay file is
already emptied. Remove the option in this build
script.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",20,64,1
"thesofproject/sof","50685bfb42964981d35f702a0007e3e883c446e2","lrgirdwo","2019-02-01 10:59:45","false","logger: improve some error messages.

Make error messages more meaningful

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",59,8,0
"thesofproject/sof","055ea7eca8dce0d15026045e5551f5e8c6cb55ca","softwarecki","2023-02-22 17:01:27","false","file_utils: manifest: ext_manifest: Add new create_file_name function

A new function create_file_name has been created that prepares the name
of the output file with the given extensions. Unlike the previous solution,
it checks whether the new name will fit in the output buffer.

A new file_utils.c file has been prepared, into which generic functions to
simplify the use of files will be moved.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",56,57,1
"thesofproject/sof","7eae0a4264dab1adc479b3830d29332a707458d8","xiulipan","2018-09-20 09:50:22","false","host: do not free the list header in host_reset

The CONFIG_DMA_GW only enable with hda_dma, as the create_local_elems is
refined to create elem at every start. Did not need to keep the first
elem.

Use list_for_item_safe to delete all item in list. The old way will
delete and free the list header with belongs to the host_data. Free
the list header will directly free host_data and make the second run
fail if the memory is alloced again.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",36,4,0
"thesofproject/sof","04ba7ba4ba27432ad03c3908143343723aa04b31","lrgirdwo","2020-08-10 15:24:10","false","zephyr: ll scheduler: use zephyr work Q for LL scheduller

Use a per core zephyr work Q for scheduling on the LL timer domain.
This also means we dont need to manage the timer directly hence the
conditional timer code.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",75,26,0
"thesofproject/sof","75cfcd89d2a5c74ecd1335dde2f9658c2f8f7218","plbossart","2021-09-30 16:39:11","false","pipeline: fix handling of first pipeline

the logic was just wrong as discussed in
https://github.com/thesofproject/sof/pull/4818#discussion_r719091909

remove test on cmd and flip logic for first_pipe

Fixes: 107b60ea6 ('pipeline: simplify handling of first pipeline')
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",121,40,1
"thesofproject/sof","d1bce3d8fc61f992784c1dab3a13aea57a96ea6f","plbossart","2021-06-18 19:01:08","false","topology: sof-cnl-nocodec: use DMIC macros

Remove all the hard-coding and use macros.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",74,37,0
"thesofproject/sof","11ee3b872bc4a5c856737cc4ba981505288740fb","marc-hb","2020-05-20 18:36:04","false","tplg-build.sh: invoke m4 with --fatal-warnings

Also use || exit 255 to stop xargs from burying the error message(s).

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",99,23,0
"thesofproject/sof","c8b759a80607b86723445977239e49bc61406478","kv2019i","2021-08-12 06:03:56","false","topology1: fix error in LOCAL_CHANNELS_MIN definition

The patch to fix CHANNELS_MIN side effects had a bug in which caused
LOCAL_CHANNELS_MIN to slip into conf output. Example from
sof-adl-sdw-max98373-rt5682:

---cut--
SectionPCMCapabilities.""Passthrough Capture 14"" {
»       formats ""S16_LE""
»       rate_min ""8000""
»       rate_max ""16000""
»       channels_min ""LOCAL_CHANNELS_MIN""
--cut--

Fixes: 659266685b43 (""topology: remove side effects from macro definitions"")
BugLink: https://github.com/thesofproject/sof/issues/4621
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",118,38,0
"thesofproject/sof","9948d439d9a9c8deff1e1fceed696fca03c7bcde","kv2019i","2023-08-16 17:28:42","false","app: Intel: switch cAVS2.5 configs to use IPC4 by default

The IPC3 build is no longer supported for Intel cAVS2.5 target,
so move the config overlay definitions as-is to the main
board config file.

To smoothen the transition, keep an empty IPC4 overlay file
in the tree to allow developers to update build scripts.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",24,62,1
"thesofproject/sof","6b8acc52d9e39bc2b2e1f3f4616de3834787c900","cujomalainey","2023-07-13 20:08:44","false","audio: dts: fix buffer_fmt lookup

Missed conversion

Fixes: 90828e230590 (""buffer: external modules use API to access buffer_fmt"")
Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",32,61,1
"thesofproject/sof","8b680d53386b4d0a186074224dc94023b94f5806","cujomalainey","2020-10-01 21:15:56","false","host: enable ipc handler module

The handler is the primary entry point for the fuzzer and therefore
needs to be added to the build.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",65,28,0
"thesofproject/sof","15bd472a814390c101e58e26e18edff18b1e8522","cujomalainey","2021-03-29 19:46:40","false","owners: add cujomalainey as owner of codec adapter

Request for owner has gone unacknowledged, ToT adapter is broken
suggesting we likely need additional reviewers given we have no existing
code owner.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",79,34,0
"thesofproject/sof","6f45b619210b2dc1fc84baa521e2d01a6b7a485a","cujomalainey","2021-05-04 00:01:24","false","actions: add cppcheck and yamllint

CI saves lives

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",81,35,0
"thesofproject/sof","e340f8f22d816435ee8a2dea87cd52e2df62ca82","iuliana-prodan","2021-08-25 21:22:48","false","codecs: cadence: src: Add support for SRC from Xtensa

This includes the basic declarations for SRC from Xtensa
support.

It adds the codec id, initializes the API member of
cadence_api with exported library function for SRC and
enables support for linking in the binary codec from Cadence.

All these for the purpose of using Sample Rate Converter
from Xtensa.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",122,39,0
"thesofproject/sof","c3594e3a0556e053a76b9de8e9d625c621e368bb","tlauda","2019-11-20 13:16:15","false","buffer: reimplement copy functions to faster versions

Reimplements buffer_copy functions to use memcpy_s instead of
fragment API. Based on my tests it gives 20% better performance
than previous implementation. Note that memcpy_s function
uses vec_memcpy when built using XCC.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,18,0
"thesofproject/sof","d5eb735e0fc65857a26e696a853627b7340e0fda","tlauda","2018-06-28 13:35:07","false","interrupt: use core id from interrupt value

Use core id from interrupt value instead of own core id.
This allows to enable interrupts for slave cores.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",9,1,0
"thesofproject/sof","6d3d5bcdad5a7c35ac64f9f3629f58a069e28416","tlauda","2019-10-22 14:37:08","false","cpu: fix cache misalignment

Fixes cache misalignment of active_cores_mask value.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,17,0
"thesofproject/sof","eab1cab1741235905f5836cd40d9caef974efa1f","tlauda","2020-01-21 11:48:09","false","mn: add M/N dividers to sof context

Adds pointer to mn struct to sof context. Also implements
getter, so it can be retrieved through one point of access.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",79,20,0
"thesofproject/sof","ed9e88835828b474f81ea32ba0e176d36de5e487","tlauda","2019-10-01 07:39:45","false","platform: hsw: increase system heap size

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,16,0
"thesofproject/sof","e8b380d4aec2eab7f0e0ab82246f8bcc22964ffa","singalsu","2023-06-13 13:52:33","false","Config: Add Multiband-DRC component to TGL, TGL-H, MTL, LNL

This patch allows to load the Multiband-DRC component.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",44,60,1
"thesofproject/sof","327631d089648bb548916e5275399ff9be606175","singalsu","2020-02-11 12:18:54","false","Topology: ASRC: Fix mistake with source and sink buffers count

This patch fixes the apply of DAI_PERIODS for playback sink
and capture source buffers. Also the comments for components
instantiating are fixed to order sink, source as they are
in the parameters to avoid confusion.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",79,20,0
"thesofproject/sof","e887eb0aded2898fcf543303006cc0b8f718af4c","singalsu","2023-08-22 07:30:20","false","Audio: Crossover: Avoid issue with __sparse_cache address spaces

The issue with __sparse_cache in sinks[] array seems quite
complicated to change so avoiding it with further module API
conversion seems like better approach.

The processing functions in crossover_generic.c are changed to
use struct output_stream_buffer pointer array from module API.

The function crossover_assign_sinks() is changed to pick the
output stream buffers from module API in the order that is
defined in configuration blob.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",24,63,1
"thesofproject/sof","33e642795fa8e43d5e09082975fd4b14db836359","singalsu","2020-05-15 11:17:06","false","Topology: Add EQ IIR presets bundle coefficients blob data and tool

This patch adds for EQ tests and presets switch development a
bundle with five presets: flat, loudness, bass-boost, band-pass,
and high-pass. The m4 file is used by including to topologies. The
text format file is for sof-ctl.

The added code to script example_iir_eq.m is included. The blob is
also useful for testing multi-part IPC for EQ component. The existing
examples were not large enough to exercise the feature.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",99,23,0
"thesofproject/sof","9e15ef80af4d34f8babb099f9247d7ec566d9dd9","RanderWang","2022-03-18 08:59:41","false","ipc4: dai: update wallclock for position update

The original code was copied from ipc3 path but the wallclock usage
is different. In ipc4 path fw needs update it for each position update.

Signed-off-by: Rander Wang <rander.wang@intel.com>",110,45,1
"thesofproject/sof","849da9d0afb005ab67897f7d224516ea17b6f850","ranj063","2022-02-04 05:09:05","false","topology2: gain: Fix the default gain value

Should be 0x7fffffff.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",106,44,1
"thesofproject/sof","5c7e82e94461d3684be85b32516730f3a47e31a4","ranj063","2021-11-02 19:04:54","false","topology2: always override array elems

Always use ""!"" with array definitions so that items do not get
duplicated when arrays are merged when the conf file is included
multiple times.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",125,41,1
"thesofproject/sof","a133d5d52a09c0c92cca53e496cf5b47066349d0","abonislawski","2020-03-10 13:42:00","false","probe: free extraction task in deinit and clear probe ptr

This will fix probe deinit and free all used memory

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",84,21,0
"thesofproject/sof","8661fd445c4f91632b858c07ac8f16aae7e26cb6","ranj063","2023-08-04 23:21:15","false","tplg_parser: pga: Update the ipc4 builder

Add support for parsing the pga widget in IPC4 topologies.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",29,62,1
"thesofproject/sof","bb842d36adc60fc551636f04bd63c3b769f83eed","ranj063","2022-04-28 19:34:42","false","module_interface: modify the get_configuration API

Remove the const qualification for the data pointer and pass the pointer
for the data_offset_size. The data_offset_size will need to be read and
updated after copying the config data.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",114,47,1
"thesofproject/sof","9d3471d8519d79b34e320bd9a839d9f3ec3cc272","abonislawski","2019-04-12 12:48:15","false","coredump-reader: print exception cause and location

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",48,10,0
"thesofproject/sof","55fc6736345e098f312aab25f8f1d14c6e380162","ranj063","2022-01-31 20:33:54","false","codec_adapter: fix deep_buffer_bytes calculation

buff_periods is calculated based on the lower of the two, period_bytes
or in_buff_size. So deep_buffer_bytes must also be set based on the MIN
of the two values.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",104,44,1
"thesofproject/sof","d132e25480896c0031432c197389ea9d7f126a28","ranj063","2023-05-17 19:01:24","false","topology2: cavs-nocodec-bt: Remove duplicate route

This has already been added in bt-generic.conf.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",50,59,1
"thesofproject/sof","73ff152bd5854c4fdc6f39006ec47aca9f030305","RanderWang","2021-11-05 13:24:36","false","ipc4: alh: fix a typo

Should use IPC4_ALH_DAI_INDEX_OFFSET to adjust dai index

Signed-off-by: Rander Wang <rander.wang@intel.com>",127,41,1
"thesofproject/sof","72394a62def31f0047a0ea3f262f567af6bd0ad9","RanderWang","2022-03-16 13:16:15","false","ipc4: update component direction when pipeline is complete

In ipc3 path, host driver sends pcm_hw_param message to fw and
direction is included. The direction is set to each component
after pipeline is complete. There is no such ipc message for
ipc4 path and direction can only be figured out from dai gateway
type if there is one. Ipc4 path gets direction from dai component
and set it to each component after connected pipeline are complete.
We skip the host copier to host copier case.

Signed-off-by: Rander Wang <rander.wang@intel.com>",108,45,1
"thesofproject/sof","159f118a99512948cdafa215692dfc687ba9af99","libinyang","2018-11-05 14:31:56","false","alloc: fix memory heap initialization

This patch fixes the bug of runtime & buffer memory heap initialization,
and sets the correct base address for each map.

Signed-off-by: Libin Yang <libin.yang@intel.com>",38,5,0
"thesofproject/sof","7e4452dfbb0e59ddbec166a257ff72dfbb2cac5c","yaochunhung","2022-06-16 09:27:17","false","platform: mtk: add clib memory layout for mt8195

Support clib data and rodata for mt8195.

Signed-off-by: YC Hung <yc.hung@mediatek.com>",120,49,1
"thesofproject/sof","c601f7d1bc0ce800b9bddce4fccea2e243f0cc17","plbossart","2022-11-16 15:15:16","false","dai: move AMD_HS to end of list to restore backwards-compatibility

The addition of AMD_HS breaks Mediatek platforms by using an index
previously allocated to Mediatek. This is a backwards-compatibility
issue and needs to be fixed. All firmware released by AMD needs to be
re-generated and re-distributed.

Fixes: 83ee5b49a987 (""dai: support for amd specific hs dai id"")
Link: https://github.com/thesofproject/sof/issues/6615
Link: https://lore.kernel.org/alsa-devel/36a45c7a-820a-7675-d740-c0e83ae2c417@collabora.com/
Reported-by: AngeloGioacchino Del Regno <angelogioacchino.delregno@collabora.com>
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",96,53,1
"thesofproject/sof","a2fa79f21100a0b1e618ff72684d6bc6bc4e50f1","jajanusz","2019-06-11 09:29:07","false","cmake: dw: use feature configs in ifs

It is better to include features based on feature Kconfig symbols,
instead of hardcoding them per platform.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",50,12,0
"thesofproject/sof","55e292ee85b17c9db8c7da7cefa9dbda771f89e4","marc-hb","2021-05-05 23:48:53","false","xtensa-build-zephyr: add mkdir -p modules/audio

More robust support for ""manual"" installations.

Also rephrase usage string to remove a single quote breaking
the shell parser in one editor I use (sorry).

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",82,35,0
"thesofproject/sof","621e8702cc2c580dc3e750ac1da06b0b5c021a4e","jajanusz","2019-01-24 12:27:55","false","cmake: use cmocka tiny config

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",55,8,0
"thesofproject/sof","d3e68f91e4b13ad9dea7ff48695fa5fd9bb733e8","jajanusz","2019-04-04 15:31:10","false","testbench: remove dai and host

All components should be added after sys_comp_init,
to be able to register themselves.
Dai and host are not used so it's better to just
remove them.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",49,10,0
"thesofproject/sof","f9e5bba39d07b3e3483276e62e7e475fffed2b96","jajanusz","2019-01-27 20:07:55","false","gitignore: add cmake files

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",58,8,0
"thesofproject/sof","444f9a2a596992115a67e0f727a49388db38c237","johnylin76","2021-05-24 06:30:08","false","config: Enable DRC related components on TGL override config

Enabled CROSSOVER, DRC, and MULTIBAND_DRC component configs to
tigerlake_chrome.config in order to deploy DRC/EQ on speaker pipeline
on partial TGL device, e.g. Eldrid.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",84,36,0
"thesofproject/sof","644a11b251c16b3e365765f2d7a962778b48c0c7","lyakh","2023-01-24 14:19:50","false","switch: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register switch with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","e135633636f88f53c175d33cc8703edcaa784ae7","lyakh","2022-08-03 12:10:25","false","zephyr: update for recent Zephyr include path changes

Zephyr removed support for header inclusion without the zephyr/ path.
Update SOF with correct paths.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",110,50,1
"thesofproject/sof","f052cbffaadc4c85a1bb93d6104b8d456adf870c","marc-hb","2022-01-14 05:34:10","false","zephyr/cmake: fix SOF_ROOT_SOURCE_DIR to fix the .ldc checksum

Fixes copy/paste of commit de41202f8fea (""zephyr: build: Add initial
build support for SOF application."")

This fixes the dictionary hash when using Zephyr; no more fallback on
the git SHA1.

When using Zephyr, SOF_ROOT_SOURCE_DIR (and SOF_ROOT_BINARY_DIR) are used
only by version.cmake

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,43,1
"thesofproject/sof","51fddc64a32c1170f535e1bddca59440d4f98245","marc-hb","2023-05-03 23:12:57","false","xtensa-build-zephyr.py: extract new function rimage_configuration()

Zero functional change, pure clean-up.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",54,59,1
"thesofproject/sof","91578f1a22a2d00d926aeaec580b92a49e727676","jajanusz","2019-04-29 10:25:29","false","host: move testbench to tools

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",48,11,0
"thesofproject/sof","f9494d9ce545e779e98f6aa90aa8279bcd5e19b3","jajanusz","2019-03-19 19:32:42","false","cmocka: add stdint.h includes

As written in cmocka documentation,
these headers have to be included before cmocka.h:

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",65,9,0
"thesofproject/sof","009cd503aa31bdeb5d66427e0b865550b540c8e7","jajanusz","2019-08-23 09:56:07","false","rimage: tgl machine definition

Add support for tgl platform in rimage tool.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",55,15,0
"thesofproject/sof","8a472b8358cd1257a8e7c2cbf1c0281f0dabb4f5","jajanusz","2019-04-04 15:27:23","false","component: add init as constructor for .so

Component should register itself when built as shared lib.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",49,10,0
"thesofproject/sof","d344fc10cd46d7fb537aa80c962059d5bb996c88","fredoh9","2020-09-24 21:47:01","false","ext_manifest: fix config name to LPRO_ONLY for cavs

Config name is CONFIG_CAVS_LPRO_ONLY.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",64,28,0
"thesofproject/sof","a2f5b868828271e9fd4d5c708aa99bb9b7d9325d","balakishorepati","2022-07-26 06:31:19","false","drivers: amd: renoir: Fix no audio issue.

while simultaneous playback and internal mic capture usecases
are running, there is a case where dmic driver was clearing the
playback interrupt.This might cause noise in playback or no audio
in speaker.Done changes to clear only dmic interrupt status only
in dmic irq handler.

Signed-off-by: Balakishorepati <balaKishore.pati@amd.com>",112,50,1
"thesofproject/sof","d0fe4933f4f90918e65de70b8cb15fa8479b833a","marc-hb","2022-05-11 23:55:40","false","checkpatch: update to Linux version v5.12

Minimal, SOF-only differences with v5.12

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",113,47,1
"thesofproject/sof","b5506edeeaad84fa50a77aca58f792a0a99c706d","lyakh","2021-09-20 15:22:54","false","pipeline: (cosmetic) move a function

Move a static function closer to where it is used.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",118,40,0
"thesofproject/sof","d80635054ff48d19092249e8b09b3341f09fd5b2","lyakh","2023-01-30 08:46:27","false","platform: remove support for Broadwell and Haswell

Remove all support for Broadwell and Haswell platforms, they
aren't supported any more.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",52,56,1
"thesofproject/sof","2bd41aaf265ed5d266d6ddd7ad5647e6830ef2d7","lyakh","2021-12-16 13:32:56","false","platform: remove MAX_CORE_COUNT

MAX_CORE_COUNT is a duplicate of CONFIG_MAX_CORE_COUNT, remove the
former and use the latter instead.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",117,42,1
"thesofproject/sof","7428f755ec8a8211ebb22ed266a89c43db4dc5b3","lyakh","2021-07-27 20:10:07","false","pipeline: move STOP / PAUSE trigger to the pipeline task

A recent commit moved START and RESUME trigger processing to the
pipeline task for timer domain pipelines. This patch does the same
for STOP and PAUSE.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",103,38,0
"thesofproject/sof","4ff094088e6222e75b321bdc6cc6e5f29746ffdf","lyakh","2023-01-24 13:06:51","false","volume: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register volume with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","3de2368f4b9bbf4ad52ebc23d991b95b4821661a","lyakh","2020-03-13 09:31:18","false","DAI: remove a bogus `inline` qualifier

dai_comp_get_hw_params() cannot be an inline function because a
pointer to it is used for a .dai_get_hw_params assignment.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",83,21,0
"thesofproject/sof","51f6a8012462f0c1ef94c71e8b1f608b369eb790","lyakh","2022-04-21 10:29:05","false","cache: add type-casts where cache-manipulation is done

Cache synchronisation and address space conversion functions
explicitly specify the address space for their arguments and return
types. Add forced type-casts to make sure such address space changes
are documented.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",115,47,1
"thesofproject/sof","41184b076ff9e72654f130c61dff3b683a3606cb","bardliao","2018-09-27 01:02:47","false","topology: initial topology file for APL RVP

It is basically copy from sof-apl-pcm512x.m4 and add hdmi support

Signed-off-by: Bard liao <bard.liao@intel.com>",36,4,0
"thesofproject/sof","4b443306078fa3a66062e4d7909952d43796edf6","lyakh","2021-11-19 06:38:51","false","pipeline: remove a wrong warning

PPL_STATUS_PATH_STOP is not necessarily an indication of an xrun,
it can also be returned by pipeline_trigger_run() in other perfectly
normal cases. Remove the misleading left-over warning.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",129,42,1
"thesofproject/sof","9aff15f6cc0ef7b618cb68f5ecb7397f29527d10","lyakh","2019-01-10 10:29:43","false","dw-dma: (cosmetic) eliminate a goto

Instead of jumping out of a loop with a ""goto"" use break and test
the loop exit reason.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",57,7,0
"thesofproject/sof","64bbee865b43a949e5f907154ba7883ad471f7e1","lyakh","2019-01-09 10:03:57","false","logger: support reading from a serial port

On some systems the DSP has no DMA interface to the host and is
using a serial port for sending its trace. This patch adds a ""-u""
argument to specify a baudrate, that should be used with the serial
interface. The implementation takes care of spurious bytes,
sometimes seen in the beginning of the trace, produced by the port
initialisation by the DSP. The format is fixed to 8N1.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",56,7,0
"thesofproject/sof","e163bf151351d5434abf2291f231da779bf7fd03","marc-hb","2021-01-26 01:11:13","false","sof.doxygen.in: change ../test to @top_srcdir@/test

Makes it possible to place the build directory anywhere.

This directory does not seem in use any more; fixing it does not change
the doxygen output. However this does silence a doxygen error message
when the build directory is not in the usual place.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",68,32,0
"thesofproject/sof","cf74566a331c5ee5d0878cccaee4df31de3b5eca","marc-hb","2020-07-14 15:07:47","false","ipc: update documentation to include extended data

Update the IPC protocol documentation to include the extended data.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>
Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",81,25,0
"thesofproject/sof","ecb921227e88a8797bf2f2719bcc99411b32323f","marc-hb","2021-10-24 08:04:42","false","cmake: drop '3' from -Wimplicit-fallthrough=3, it's the default value

From the gcc documentation:

'-Wimplicit-fallthrough'

     '-Wimplicit-fallthrough' is the same as '-Wimplicit-fallthrough=3'
     and '-Wno-implicit-fallthrough' is the same as
     '-Wimplicit-fallthrough=0'.

clang supports only the number-less option.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",125,41,1
"thesofproject/sof","5de4a09756e595c981cbe8fe623e5f3dd35a205f","marc-hb","2022-01-14 05:25:14","false","version.cmake: include scripts/ and zephyr/ in the .ldc dictionary hash

scripts/ has kconfig defaults and CMake code that can affect the
dictionary. Note this does not fix #3890 because .config (and maybe
others) are still not hashed but it helps a bit.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,43,1
"thesofproject/sof","016b555a0611f99dc297497d2690a61d4d6d8027","marc-hb","2022-09-27 09:00:21","false","topology2: generate abi.conf at build time, fix incremental on abi.h

Move abi.conf generation to build time.

Changing abi.h now rebuilds all v2 topologies.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",97,52,1
"thesofproject/sof","37323face2f9e4b8266473e3081689179fe70e58","marc-hb","2020-10-15 17:18:04","true","Merge pull request #28 from marc-hb/copy-sram-overflow

manifest.c: assert buffer overflow in man_copy_sram()",72,28,0
"thesofproject/sof","280dca92b587c38617a888ab00dd80875b91a762","marc-hb","2022-12-06 20:47:20","false","xtensa-build-zephyr.py: build rimage with -GNinja by default

This saves a couple seconds when building from scratch on Linux.

On Linux the default CMake generator is ""Makefiles"" which is _not_
parallel by default.

Thanks to the previous commit it's still possible to manually switch to
""Makefiles"" if desired.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",100,54,1
"thesofproject/sof","e69e1c7eeb785899091908f06374ada4b39a5a83","marc-hb","2021-05-18 22:11:36","false","scripts/build-tools: some usage and other clarifications

Fixes #4141. I got tired of repeatedly having to read CMakeLists.txt
files.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",87,35,0
"thesofproject/sof","231c4e36de515d6a7a1980613f0343594bec716d","marc-hb","2023-05-31 18:21:24","false","xtensa-build-zephyr.py: remove `default_rimage_key` dead code

We used to provide the `default_rimage_key` in two places:
1) as a default `RIMAGE_KEY` attribute (newer `otc_private_key_3k`)
2) as an explicit `else` clause that was never run because of 1) (older
   `otc_private_key`)

Remove the redundant `else` clause in 2); it became dead code. This
simplifies the code and makes the script ready for the day when the key
argument will be optional for rimage (more about this in
https://github.com/zephyrproject-rtos/zephyr/pull/58356)

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",48,60,1
"thesofproject/sof","e961e442bad942d89c90104fd093616b4b04b426","lyakh","2022-10-18 13:32:45","false","copier: (cosmetic) fix alignment

Fix two cases of misalignment.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",99,53,1
"thesofproject/sof","74346b5c936f4db8da1a8c80c0b9afb0cfe41537","lyakh","2019-01-11 16:02:48","false","drivers: add an SPI driver for the DW SSI IP

The DesignWare SSI IP can perform as an SPI controller. This patch
adds a driver for the SSI's SPI slave mode and enable building it on
the Sue Creek platform.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,7,0
"thesofproject/sof","f451f670286aeb925cf3c15ecf2400bc70732391","lyakh","2019-01-17 09:50:14","false","alloc: always check heap capabilities

Currently only the runtime zone has several heaps with different
capabilities on some systems. So that if a memory allocation request
is made from that zone, a suitable heap is selected. Additionally,
if the request cannot be satisfied from the runtime heap, an attempt
is made to satisfy it from the buffer heap. The other two zones -
system and system-runtime - have per-core heaps with identical
capabilities. If the request to one of those zones cannot be
satisfied from it, no attempt is made to allocate memory from a
different zone. Supposedly because of this determinism no capability
check is performed. This is wrong, since if capabilities don't match
it should be assumed, that the obtained memory will not be suitable
for the designated purpose. This patch adds the missing checks.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,7,0
"thesofproject/sof","2db42dda5c236c8576266906819a1a4c697662b0","lyakh","2020-08-11 11:37:02","false","topology: dmic: support non-standard DAI link IDs

Some platforms, e.g. UP2 (APL+PCM512x) use non-standard DAI link
IDs. Let those platforms specify their IDs and still use the
generic DMIC topology template.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",73,26,0
"thesofproject/sof","57995ce1babd4ee98766556e30a7a5c078866536","lyakh","2022-08-19 15:30:18","false","pipeline: don't re-add active tasks and copy immediately

In a topology with two connected pipelines, e.g. two playback
pipelines, connected on a mixer, if one PCM is already streaming and
then the other one is started too, two bugs trigger:
1. when adding pipelines to the scheduler, all pipelines are added,
   including any common pipelines behind the mixer
2. the mixer pipeline then gets to run first, while it has no data
   available to it yet.
To fix these bugs
1. don't re-add any active pipelines
2. when a pipeline is added for streaming, let it begin copying
   immediately instead of skipping a period.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",111,51,1
"thesofproject/sof","7ab88ad9be4f3fbeaf3b6ac87b1c1e3ca6ffe5f9","lyakh","2022-10-21 08:57:05","false","selector: use base configuration from the common location

Instead of saving a local copy of the base configuration, use the
common one.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",97,53,1
"thesofproject/sof","c5bb947f750e6e01fa3380b847f47104dfe4b2ec","lyakh","2021-11-11 14:12:48","false","pipeline: (cosmetic) move a function

Move a static function closer to where it is used.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",127,41,1
"thesofproject/sof","64f011acdbd999642fd02a7c7d34bed158970f89","lyakh","2023-04-26 12:25:06","false","rtnr: fix regression

Earlier commits wrongly used struct audio_stream accessors to read
members of struct audio_stream_rtnr in rtnr_copy_to_sof_stream().
Revert those changes.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",51,59,1
"thesofproject/sof","f9d11688453cb89476ec73c44922bc0021ebbe67","lgirdwood","2018-09-26 11:32:58","true","Merge pull request #361 from singalsu/eq_iir_fix_reconfigure_proposal

EQ IIR: Prevent reconfigure during playback and add traces",37,4,0
"thesofproject/sof","32cf948510b9f23cf7f0457126f290d943f2fc93","lgirdwood","2018-10-14 16:19:16","true","Merge pull request #481 from slawblauciak/test_fixes

test: Partially fixed alloc unit tests",35,4,0
"thesofproject/sof","adae95489e2365d803aa1d1c859c433aba7aa11a","lgirdwood","2018-07-05 18:51:56","true","Merge pull request #55 from slawblauciak/alloc_ut

test: alloc tests",11,1,0
"thesofproject/sof","ad3f3e4f778e3acf2a68b7e03812257dbc3fb89c","lgirdwood","2018-11-22 14:23:36","true","Merge pull request #134 from mwierzbix/helper-scripts-pretty-macro

shell-scripts: human-readable preprocessor output",39,6,0
"thesofproject/sof","21f3ab4cf67493cbb4c61919642f463dda33bcdd","markbartonxperi","2021-10-19 14:32:11","false","audio: codec_adapter: Add DTS codec using codec_adapter

DTS will be providing audio processing technologies to ChromeBook
manufacturers in the form of a codec written using the SOF codec_adapter interface.

This technology will be used to optimise the audio quality of the ChromeBook's speaker and headphone outputs.

The codec itself supports:
- interleaved and non-interleaved buffer layouts
- sint32, sint24 and sint16 buffer formats
- 44100Hz and 48000Hz sample rates
- any channel count

Signed-off-by: Mark Barton <mark.barton@xperi.com>",123,41,1
"thesofproject/sof","7f1572f4d9b1c5d0726071f71fb205af287b39c7","bardliao","2022-01-14 03:03:43","false","topology2: cavs-nocodec: add audio format tokens

Add audio format tokens for I2S + DMIC.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",117,43,1
"thesofproject/sof","24422c6373c26e091dfd2b83fefeda4c5b293983","xun2z","2019-01-11 01:52:14","false","topology: fix virtual widget warnings

add some widgets to prevent kernel warnings generated by the machine
driver.

Signed-off-by: Xun Zhang <xun2.zhang@intel.com>",56,7,0
"thesofproject/sof","2abef019d35ba61e519bbb7d1739f5758b170eee","ranj063","2022-02-25 04:45:41","false","topology2: intel: dmic-generic: Add a few more variables

Add a few more variables to make the dmic-generic topology more
configurable.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",110,45,1
"thesofproject/sof","4e039b624a77e7193b632e3b21517d4091a6f968","ranj063","2021-10-26 03:46:20","false","ipc-helper: use buffer acquire/release

instead of buffer_lock/unlock() which will be deprecated.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",127,41,1
"thesofproject/sof","5e4de9090217c46835404a114ca495c8a89a7fb1","ranj063","2022-05-06 17:54:43","false","module_adapter: use memcpy instead of memcpy_s

ca_copy_from_source_to_module() and ca_copy_from_module_to_sink() are
both invoked during every copy. So use memcpy() instead of memcpy_s() to
speed up the copies.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,47,1
"thesofproject/sof","19c26ea9f4bfe40147693f11e96990fc676b9c27","btian1","2023-09-14 08:09:34","false","audio: volume: add config for peak volume

Add config to control peak volume code need build or not.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",20,63,1
"thesofproject/sof","62f26d34d9e57474be5c25dcd84745c100dcb4ae","btian1","2023-05-18 14:08:37","false","copier-host: rename host function name

Due to both legacy and zephyr function are changed, name with
zephyr prefix is not suitable, change zephyr to common to better
reflect the function status.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",50,59,1
"thesofproject/sof","e60ce3f17df80bd252011d822f5724fccfb00a51","tmleman","2022-02-22 16:44:56","false","ipc4: setdx: validate message payload

Reading and validation of the ipc message payload.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>
Signed-off-by: Rafal Redzimski <rafal.f.redzimski@intel.com>",106,45,1
"thesofproject/sof","9d4307fb5a29e18b0953bb101adb64e302792faa","lyakh","2019-02-21 12:13:37","false","interrupt: remove an unused function parameter

platform_interrupt_mask() and platform_interrupt_unmask() have a
""mask"" parameter, that is actually never used. It is only used on
baytrail, but the only use of those functions on that platform is
from the ssp.c driver, where mask is fixed to 1. Besides the meaning
of that parameter was unclear: it would be logical to assume, that it
is a bitmask that has to be applied to a masking register, but often
those functions were called with mask=0, which makes no sense. This
patch removes that parameter.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",62,9,0
"thesofproject/sof","95e7d9605aa8833f5b289b1f5592998617237d9e","kfrydryx","2022-07-25 00:22:02","false","dai-zephyr: Set dai rate in config

Fill in cfg.rate to be used by zephyr native drivers as rate is not
always present in ipc config.

Signed-off-by: Krzysztof Frydryk <krzysztofx.frydryk@intel.com>",112,50,1
"thesofproject/sof","315962c4d7ff52ebc41774bc2eaa487e94488475","marcinszkudlinski","2022-11-21 12:10:36","false","zephyr: move memory allocation code 1:1 from wrapper.c to alloc.c

to have more order in the code - move memory code from a huge
common wrapper.c to specific lib/alloc.c
Note there is NO changes in the code, code is as it was before

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",96,54,1
"thesofproject/sof","bdcaa295c090e3b35b20f20bfca0158f3c6f1315","singalsu","2022-03-09 16:38:25","false","Audio: Multiband DRC: Optimize source and sink buffers access

This patch replaces the audio stream read/write frag functions
based source read and sink write operations. The processing is
performed in blocks those are based on number of samples from
audio_stream_samples_without_wrap_s16/s24/32() function.

On TGL-H and stereo 48 kHz playback stream the MCPS is decreased
from 216.8/216.8/216.0 to 201.6/200.4/200.8 for s16/s24/s32
formats. The saving is in average 15.6 MCPS.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",114,45,1
"thesofproject/sof","10d0b3b5e107506583f1a8b6d16ef1f14f30a233","singalsu","2022-10-31 13:23:57","false","Scripts: Add xt-run build target for rebuild-testbench.sh

This patch adds to rebuild-testbench option -x <platform> that
can be used to build testbench for xt-run execution. The enhanced
script reuses native testbench build but with CC, LD, LDFLAGS,
etc. defines to use the xt-xcc compiler for build.

Currently TGL (HiFi3) is the only supported platform. More will
be added later.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",91,53,1
"thesofproject/sof","2e0b5d70cea06ae33ee70e9120fcb6bff2a6108b","singalsu","2021-09-09 15:10:04","false","Drivers: Intel: DMIC: Fix mistake in retrieving cic_control value

This patch fixes the value get from current pdm_cfg[n] instead of
first pdm_cfg[0]. It impacts case where PDM0 is omitted from blob
or in case of different registers values for PDM0 and PDM1.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",118,39,0
"thesofproject/sof","b84291d5497153bad5eda458f3fa372c2388db29","tlauda","2019-04-30 03:14:41","false","pipeline: invalidate pipeline before usage

Invalidates pipeline before any sort of usage
in pipeline_cache function.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",47,11,0
"thesofproject/sof","5b80e81c78e030b26348ac86b6da1db0c96bc73f","tlauda","2018-11-29 12:44:00","false","alloc: access to system heap always using cache

Changes access to system heap to cache only.
System heaps are separated for each core,
so it makes sense to stop using uncache.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",41,6,0
"thesofproject/sof","8749a563c4eeb5b3e1bb4cc97d852744b5e9838d","tlauda","2018-12-17 10:22:12","false","pipeline: remove redundant argument from cache functions

Removes redundant argument from pipeline cache functions.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",47,6,0
"thesofproject/sof","060c71e953a8a9c2fc65fa94a32440c426ffe44b","tlauda","2018-08-20 12:23:55","false","work: add work_queue to core_context

Implements work_queue per core by adding it to core_context.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",18,3,0
"thesofproject/sof","30e7613e866e6b3b6888b82270a1f59892a41093","tlauda","2018-10-11 09:56:22","false","pm_runtime: fix clock gating for SSP 4 & 5

Fixes clock gating switching for SSP 4 and 5.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",33,4,0
"thesofproject/sof","de5bba49aaf2c0060a279de09580ac4205f550cb","bardliao","2019-04-27 21:48:01","false","trace: get time stamp from kernel

Timer will be reset when DSP is powered down. So the time stamp of trace
log will be reset after resume. Get time stamp from kernel and adding it
as a shift of time stamp can avoid the reset.

Signed-off-by: Bard liao <yung-chuan.liao@linux.intel.com>",48,11,0
"thesofproject/sof","aeaddf3af8c05229a433cd6545c1826abda387a4","bardliao","2020-04-02 02:38:37","false","Topology: Add HDA config

We need to config HDA rate and channels.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",74,22,0
"thesofproject/sof","dfc3888baad655a00bccc12649d17032106cd811","serhiy-katsyuba-intel","2022-09-05 13:27:29","false","ipc4: fix copier crash

Buffer params (like stream format) are usually setup by component's
params() handler. params() is called before pipeline start. When copier
is binded with component on another pipeline, it might happen that
copier copy() is already running while other component params() was not
yet executed (by other pipiline).

Processing buffer with uninitialized params usually leads to crash:
division by 0 channels when calculating frames.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",118,51,1
"thesofproject/sof","7f47792cbd22886d5fe2acbd229a13a6ea138e66","lgirdwood","2018-10-11 11:14:17","true","Merge pull request #99 from singalsu/eq_add_response_measure

EQ: Add tool for acoustical frequency response measurement",33,4,0
"thesofproject/sof","323c55ae8d38d5628cd224156283f63a655124dc","singalsu","2018-10-08 14:18:23","false","EQ: Check in new() coefficient blob size before allocating dev and cd

This patch simplifies new() function code and avoids unnecessary
allocation of component device and data resources if the the coefficient
blob is rejected due to size. The change is identical for FIR and IIR
EQs.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",34,4,0
"thesofproject/sof","d964b7bf518d05654cfb2d04825cc2b42972898d","singalsu","2023-08-28 15:44:54","false","Math: Use HiFi3 IIR_DF2T version for HiFi4

The HiFi3 code is faster and compatible so it should be used
instead of generic version for HiFi4.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",25,63,1
"thesofproject/sof","8d166a432f68ccd9ee657a58f379ed4f0f22b888","singalsu","2022-11-25 11:15:17","false","Audio: Copier: Add missing DMIC DAI index mapping to create_dai()

The dai_index needs to be mapped similarly as in kernel. The SSP
type was handled correctly in the function but not DMIC.

Signed-off-by: Jaska Uimonen <jaska.uimonen@linux.intel.com>
Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",98,54,1
"thesofproject/sof","035431ec7e13675f35fbac862768eacee7b24c65","bardliao","2023-01-16 09:42:58","false","topology2: add missing nhlt

Somehow some SoundWire topologies don't have PREPROCESS_PLUGINS=nhlt
definition. It leads to nhlt is not included in those topologies.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",55,55,1
"thesofproject/sof","ffaeaaafdd2bc6f89b82b079fdc5229347992b22","marc-hb","2021-02-20 01:24:04","false","build-tools.sh: build in any directory

Take $BUILD_TOOLS_DIR from the environment if present.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,33,0
"thesofproject/sof","7d2cb097c2e89b2f530e779cae1d2f1675425add","marc-hb","2020-09-15 04:12:21","false","logger: fix potential time_fmt truncation in print_entry_params()

As reported by gcc 9.3.0-10ubuntu2 and
 VERBOSE=1 CMAKE_BUILD_TYPE=Release ./scripts/build-tools.sh -l

  ‘__builtin___snprintf_chk’ output between 23 and 57 bytes
   into a time_fmt destination of size 32

Fixes commit d7b535e2825b (""logger: Add option to set timestamp
precision"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",65,27,0
"thesofproject/sof","47947fe64d142a29f323f8d8d51da95428d5657d","aiChaoSONG","2023-01-31 07:24:26","false","MTL: enable smart_amp_test module

Enable building smart_amp_test module for MTL.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",52,56,1
"thesofproject/sof","5b5566f534941c842489c68eb888a05a5e5c4837","nashif","2023-10-11 12:07:43","false","zephyr: remove stray } from RIMAGE_CONFIG_PATH

A stray } is at the end of RIMAGE_CONFIG_PATH causing issues when
signing images.

Signed-off-by: Anas Nashif <anas.nashif@intel.com>",13,64,1
"thesofproject/sof","249f9dc68f971b485d354cb7be60311d00569db5","aiChaoSONG","2023-06-14 05:11:20","false","app: configs: fix inconsistent logging config

The config CONFIG_LOG_FUNC_NAME_PREFIX_xxx is only
enabled for ACE platforms and INF log level, and the
timestamp used is different on TGL and MTL, which
is not quite consistent.

This patch make sure the log format is consistent
among platforms and log levels.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",44,60,1
"thesofproject/sof","4b9fbaf24b0689701bf9f3ac3283725d206ee97f","fredoh9","2021-05-11 18:11:14","false","docker-run.sh: minor alignment fix

Removed extra spaces.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",84,35,0
"thesofproject/sof","0f6e3b2ed4dc7b421893e2946a3e91156bcceee5","ranj063","2022-01-11 19:55:43","false","module_interface: remove module_id

Remove the module ID fields from struct processing_module and struct
ca_config. The comp ID is unique across all components in topology and
can be reused to identify the modules as well.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",114,43,1
"thesofproject/sof","518e652cea6819bd0269476de79ea15c37939162","softwarecki","2022-10-26 14:52:26","false","ipc4: dai: Use zephyr api to get dma linear link position

Read linear link position from DMA using extended
version of the dma_get_status Zephyr function.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",93,53,1
"thesofproject/sof","7894dc1d3ffe022ecad2640b1304f7015cccfeee","lyakh","2022-04-07 11:58:23","false","kpb: fix buffer acquisition

Instead of acquiring and releasing buffers locally multiple times,
do that once for .copy() and .prepare() methods.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",114,46,1
"thesofproject/sof","ce7f99be2940aca75003795ae70e26fd31e73018","lgirdwood","2018-10-08 15:10:33","true","Merge pull request #466 from tlauda/topic/smp-notifier

notifier: add notifier to core_context",34,4,0
"thesofproject/sof","e2db3bcdb91ed883e3a69127bc68f5e699d05bec","marc-hb","2022-02-23 22:44:44","false",".github: switch to new xtensa-build-zephyr.py

Switch Github Actions away from older shell script.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",107,45,1
"thesofproject/sof","568ed165a7a6d0ad077d9c790b112417867d79fa","ktrzcinx","2020-06-08 15:59:13","false","pcm_converter: Fix first output sample pointer calculation

Output sample size is unrelated wit input one. To calculate
write pointer address, correct value should be use.
Without this path, output data will be placed in wrong memory
area, what results in corrupted output stream when output offset
differ from zero.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",74,24,0
"thesofproject/sof","714518f5e9a856fea698eaf8964f50b797b328ec","libinyang","2021-09-15 05:09:16","false","topology1: fix a typo of a tplg name in CMakefile

sof-adl-rt1316-l2-mono-rt714-link0 should be
sof-adl-rt1316-l2-mono-rt714-l0

Signed-off-by: Libin Yang <libin.yang@intel.com>",117,39,0
"thesofproject/sof","1c73215bc3e195476153707a4ed3a74c2b953021","RanderWang","2021-07-15 02:18:31","false","ipc4: add header file for base config

Base config defines input & output information of each ipc4
modules. The information includes audio stream format, input
& output buffer size.

Signed-off-by: Rander Wang <rander.wang@intel.com>",88,37,0
"thesofproject/sof","a4f755737b75efbcaeafc52578a703a293243d4e","RanderWang","2022-11-23 03:16:18","false","fw_reg: add spin_lock for fw_reg access

Llp slot array in fw_reg may be accessed from multipule
threads so add a lock to protect it.

Signed-off-by: Rander Wang <rander.wang@intel.com>",94,54,1
"thesofproject/sof","0b80998bb1fa6b9e95e4083f464a7769af180aba","marc-hb","2020-03-28 02:51:39","false","Revert __builtin_assume_aligned(4) probe packet, replace with aligned(4)

This reverts and replaces commit 2765b2204962 (""probe-app: assume probe
packet aligned""). That commit applied a __builtin_assume_aligned(4) to
every pointer assignment of the following type:

  uint32_t *ptr = struct probe_data_packet *packet;

Instead of using __builtin_assume_aligned(4) every time a
probe_data_packet is used like this, the probe_data_packet type
definition is now 32 bits aligned in only one place thanks to (packed,
aligned(4)).

struct probe_data_packet is made entirely of uint32_t members. It
is (packed) to avoid a 64 bits compiler hypothetically padding and
aligning these 32 bits members to 64 bits. However, (packed) alone is
roughly equivalent to aligned(1) (neither is part of the C standard)
which causes some gcc versions to warn about this:

  sof/tools/probes/probes_main.c:228:5: error: converting a packed
  ‘struct probe_data_packet’ pointer (alignment 1) to a ‘uint32_t’
  {aka ‘unsigned int’} pointer (alignment 4) may result in an
  unaligned pointer value [-Werror=address-of-packed-member]

  228 |     w_ptr = (uint32_t *)packet;
      |     ^~~~~

Unlike ""assuming"" with __builtin_assume_aligned, (packed, aligned(4))
makes sure probe_data_packet are _actually_ 4 bytes aligned. As a
demontration, it stops the following _Static_assert() from failing:

modified   src/probe/probe.c
@ -64,9 +64,12 @ struct probe_pdata {
 	struct probe_dma_ext ext_dma;
 	struct probe_dma_ext inject_dma[CONFIG_PROBE_DMA_MAX];
 	struct probe_point probe_points[CONFIG_PROBE_POINTS_MAX];
+	uint8_t dummy;
 	struct probe_data_packet header; // aligned(4)?
 	struct task dmap_work;
 };
+_Static_assert(offsetof(struct probe_pdata, header) % 4 == 0 ,
+               ""probe_data_packet is not 4 aligned"");

In addition to gcc version 8 and 9, I tested and confirmed with
_Static_assert and pahole that the same attributes behave the same with
clang 9.0.1-2.fc31.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",66,22,0
"thesofproject/sof","2b9206231c043767af14135fd9532a745a72dae9","marc-hb","2020-09-15 04:59:17","false","docker-run.sh: pass-through CMAKE_BUILD_TYPE

... thanks to the docker --env option which is smart enough not to pass
anything when there is nothing to pass.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",65,27,0
"thesofproject/sof","9fa1a99d8bb2155aa16b1ecd5533fda81d800aad","marc-hb","2022-10-25 23:59:20","false","xtensa-build-zephyr.py: install and checksum .elf, .lst and other files

Sample new output below. The sha256 is computed on the _uncompressed_
files and _not_ affected by gzip metadata.

```
build-sof-staging
├── sof
│   ├── community
│   │   ├── sof-imx8.ri         sha256=50c5423d2355ef3ed91...
│   │   └── sof-tgl.ri          sha256=6b1d26c12a63de5dfc8...
│   ├── sof-imx8.ldc    sha256=520d365d188d5ef4e907d3dd8c9...
│   └── sof-tgl.ldc     sha256=cdce6ad340d4dc047e71e738eb0...
├── sof-info
│   ├── imx8
│   │   ├── config.gz
│   │   ├── zephyr.elf.gz
│   │   ├── zephyr.lst.gz       sha256=8c83c3fc92df0a871dd...
│   │   ├── zephyr.map.gz
│   │   └── zephyr.strip.gz     sha256=d3ce3d3450c67bb3580...
│   └── tgl
│       ├── boot.mod.gz         sha256=d9c9e82e75fa6d061bf...
│       ├── config.gz
│       ├── main.mod.gz
│       ├── stripped-main.mod.gz        sha256=c367dccca6d...
│       ├── zephyr.elf.gz
│       ├── zephyr.lst.gz       sha256=5474bc5e58a5d000109...
│       ├── zephyr.map.gz
│       └── zephyr.strip.gz     sha256=6285f41c0682b33b7e0...
└── tools
    ├── cavstool.py
    ├── cavstool_client.py
    ├── cavstwist.sh
    ├── mtrace-reader.py
    ├── remote-fw-service.py
    └── sof-logger
```

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",94,53,1
"thesofproject/sof","50eb5c9ca22b160fb50b49a4bc2524af7a36b23d","marc-hb","2021-05-27 02:23:34","false","trace.c: add mtrace_printf() low-level shortcut

Direct access to mbox shared memory logging when DMA tracing is
either not initialized yet or disabled or found broken for any
reason.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",84,36,0
"thesofproject/sof","d968578882d4ceed7ddf4d84d90a30f1b632da61","ranj063","2023-05-03 15:10:58","false","dai: Modify the signature of dai_config_dma_channel()

In preparation for this function to be used by both a copier device and
the DAI device, modify the signature to pass both the dai_data and the
device pointer.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,59,1
"thesofproject/sof","8fcacc9fc7b501a24b6432dad89e070845e0ae0b","ranj063","2021-04-01 16:10:14","false","topology: tokens: fix dynamic_pipeline token name

Should be called SOF_TKN_SCHED_DYNAMIC_PIPELINE instead
of SOF_TKN_SCHED_DYNAMIC.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",79,34,0
"thesofproject/sof","fcaede7a8710c94a774aa080c425774d517ce43e","ranj063","2021-06-02 16:40:49","false","ipc: ipc3: Do not reset pipeline components during comp_free

Pipelines can be shared between multiple PCM's. For example,
in the case of the sof-apl-nocodec, a part of pipeline 1
(mixer1.0 ->BUF1.2 ->PGA1.1-> BUF1.3 -> SSP0.OUT)
is shared between PCM0 and PCM7. Setting the source_comp for
pipeline 1 to NULL when PCM0 is stopped results in a panic.
So, hold off resetting the pipeline until the scheduler widget
is freed.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",82,36,0
"thesofproject/sof","0e71dba119c00664a6397ba4e8830e4d6e4ec5ef","kuanhsuncheng","2021-09-13 11:07:03","false","host: add dma buffer clear

Sometime, we could hear some noise after recording.

In host_prepare, reset dma buffer would be good
in general case to prevent reading uninitialized memory.

Add reset dma buffer zero to avoid unexpected noise

Signed-off-by: YC Hung <yc.hung@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",118,39,0
"thesofproject/sof","ee318548d765e0e0b28e35fea897b59fd28c6de2","dnikodem","2023-06-07 07:49:37","false","aria: data size calculation fix

This change fixes data size calculation to be copied
to aria cyclic buffer.

Signed-off-by: Damian Nikodem <damian.nikodem@intel.com>",45,60,1
"thesofproject/sof","45d56931ef35fdca699c9d2ff1682490e5795f0c","dabekjakub","2023-01-16 19:07:52","false","memory management: Add virtual heap memory allocators

Add virtual heap allocators that allocate on proper heaps and
map physical memory where nesscessary.
Add free function that frees up the virtual heap memory and
unmaps physical memory when possible.
Virtual heap allocator allows using virtual memory as a base
for allocation and booking memory. Physical memory banks
will be mapped when needed allowing for greater flexibility
with mapping.

Signed-off-by: Jakub Dabek <jakub.dabek@intel.com>",55,55,1
"thesofproject/sof","1a89639cf0b1d9423e8149ade6b8854cf3dac7f0","cujomalainey","2023-07-21 00:39:38","false","ci: Add build all config

Utilize the posix build so that as many components as possible can be
built at once. Also build a bunch of `default n` components as well.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",32,62,1
"thesofproject/sof","e55cd317a25d0dcb966cdbbdf7d78ad97ed2bf2e","keqiaozhang","2018-07-10 02:47:14","false","topology: fix id for sof_cnl_rt274 topology

Codec SSP id doesn't match with machine driver, so
change the id to 1 to fix the topology loading issue.

Signed-off-by: Zhang Keqiao <keqiao.zhang@linux.intel.com>",13,1,0
"thesofproject/sof","f59a9166f0321b7df3794b3fcb0966ed20570ca2","mrajwa","2019-04-25 12:51:58","false","kpb: start comments with capital letter

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",47,11,0
"thesofproject/sof","a69605db49fbb32894117a7e3056e333763f2b6e","slawblauciak","2018-11-13 09:59:07","false","dma: make sure the HDA DMA pointers are aligned after release

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",38,5,0
"thesofproject/sof","618e4897af6349209436a0dbb99d67bf15ece281","balakishorepati","2022-11-15 12:05:27","false","drivers: amd: update dsp status in future register

Add support to configure future register with current
DSP status.

Signed-off-by: Balakishorepati <balaKishore.pati@amd.com>",95,53,1
"thesofproject/sof","26ea50ecd04836b3315ac81916d14845af3f57f8","singalsu","2020-03-16 17:30:29","false","Topology: Fix in EQ only pipelines with macro PIPELINE_SINK

This patch fixes the buffer to define as PIPELINE_SINK. The
upper level topologies do not use these topologies so there has
not been related errors. However test pipelines were impacted.

Also the PIPELINE_PCM defined name is made more generic. It can
be whatever and not just high-pass type.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",79,21,0
"thesofproject/sof","b2200bfe27f148da8bc70e7872da6d68e0a5ddfa","singalsu","2018-06-19 15:14:49","false","DMIC: Bug fix for IPM value calculation for HW version 2

The IPM bit field should be set to the number of used stereo controllers.
This patch fixes the issue that pdm[0] got counted twice.

Signed-off-by: Sathish K. Kuttan <sathish.k.kuttan@intel.com>",1,1,0
"thesofproject/sof","08dba6abaaa2f700b3151b33802d9a446732991e","jajanusz","2020-01-10 10:29:50","false","drivers: intel: ssp: move M/N to separate driver

Create M/N driver and move logic related to M/N driver
from SSP driver to it.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",76,19,0
"thesofproject/sof","e57b1346db729ff00c8139fb5b06c12d0eebe4e0","jajanusz","2019-02-03 02:20:54","false","cmake: tools: README

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",58,8,0
"thesofproject/sof","f61fcc12437b1422ab05ac94b620c7e137d85c6e","mrajwa","2019-03-07 23:58:26","false","memory: fix extensive, continuous memory blocks allocation

This commit fixes a problem with memory allocation of big
areas of memory dedicated i.e for buffers. The calculation of
remainnig blocks of memory was incorect and disallowed usage
of available blocks.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",67,9,0
"thesofproject/sof","019eadebcf7c70b8fc7bcd302fb0646be796bc82","lgirdwood","2018-11-07 15:14:28","true","Merge pull request #530 from akloniex/ids-in-trace

debugability: pipeline and component ids in trace messages",39,5,0
"thesofproject/sof","31140b132c1cbffde524b767954670fe49a5fdad","yongzhi1","2023-10-18 19:40:21","false","topology2: cavs-rt5682 enable google rtc aec support

Enable Google ACE for for all sof-mtl-max98357a-rt5682 variants.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",12,65,1
"thesofproject/sof","5ea80a51eb86ab61c33b16f7029509394836b384","xiulipan","2020-12-10 05:44:17","false","travis: add tgl-h build

Add tgl-h build check in Travis

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",73,30,0
"thesofproject/sof","9f2a1abdda092b50b3f20f847a16cd57690d6112","lrgirdwo","2020-07-06 10:53:52","false","zephyr: panic: use zephyr panic APIs when Zephyr is enabled.

Use the zephyr issue/panic reporting APIs when Zephyr RTOS is used.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",73,25,0
"thesofproject/sof","8673f92feba3ded7acf0b07f26122bfcf339e713","plbossart","2021-03-29 19:52:00","false","topology: align SoundWire topologies with the use of macros

No need for a dedicated topology just to deal with swapped links

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",79,34,0
"thesofproject/sof","abd81a13836f278fade0987875abd62951f10d8f","andrula-song","2023-03-16 07:41:30","false","Audio: Dcblock: Add HiFi3 implementation of dcblock

Add HiFi3 implementation of dcblock processing functions.
Compared with generic C version, the 16 bit format can save
about 48.1% cycles, and 48.4% for 24 bit format and 52.6%
for 32 bit.

Signed-off-by: Andrula Song <andrula.song@intel.com>",56,57,1
"thesofproject/sof","e92d096cba7bbee943c3645f2153c8f3ed8f39c8","lgirdwood","2018-07-25 15:34:18","true","Merge pull request #148 from singalsu/volume_zipper_fix_proposal

Volume: Mitigate zipper noise by adjusting gain ramp parameters",12,2,0
"thesofproject/sof","b9b49ae55562acfbeca0993719f3b1792836d43a","lgirdwood","2018-07-16 14:53:52","true","Merge pull request #109 from bkokoszx/test_component_set_state

Test component set state",11,2,0
"thesofproject/sof","c53bba881de6267d6b0ccc1c20c836dcee92650f","lgirdwood","2018-10-04 11:26:03","true","Merge pull request #456 from akloniex/debugability

logging: Add proper comments about trace_event macro usage",34,4,0
"thesofproject/sof","0db051b83a38abe5830e8a24f107266dae4cd470","mrajwa","2019-07-25 14:22:20","false","detector: add new threshold for 24 bit samples

This patch adds news threshold value for 24 bit samples.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,14,0
"thesofproject/sof","977fdd5701e820cff2043e314b463943bab18409","lgirdwood","2018-11-16 21:05:47","true","Merge pull request #585 from thesofproject/topic/ipc-updates

IPC updates to improve logging and support ABI changes",40,5,0
"thesofproject/sof","b554075d7ed81949e20ed242b0f7648a4c3667cd","libinyang","2022-05-13 01:01:30","false","topology2: add micsel support

Add the audio channel selection component support.
In case 1 output channel is selected, the component provides
the selected channel on output. In case 2 or 4 channels are selected on
output, the component works in a passthrough mode.

Signed-off-by: Libin Yang <libin.yang@intel.com>",111,47,1
"thesofproject/sof","6807ebce29d657175c9a7c0725192ce3fa7b926d","singalsu","2021-03-02 16:55:35","false","Topology: Add missing include() to pipe-eq-iir-volume-capture-16khz.m4

This patch adds the include of mixercontrol.m4. The topologies build
fails if none of the earlier parsed pipelines contains the same
include.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",73,33,0
"thesofproject/sof","73f98145d326a629c4ab743f3297548e446c1078","singalsu","2021-10-27 15:45:11","false","Audio: Optimize IIR performance

This patch optimizes the buffer copying and output scaling to
other format than int32_t. The main saving is from not using
read/write frag buffer access functions for every sample.

The saving of processing cycles consumption varies per platform
but a second order IIR stereo EQ on TGL shows 43% improvement for
average copy() duration.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",128,41,1
"thesofproject/sof","f35c9d9c65738fdcf4a996634ac0d3f7024a6b73","tlauda","2018-10-02 10:27:56","false","pipeline: cache fixes for multicore processing

Fixes cache issues with multicore processing of multiple pipelines:
- Changes pipeline_cache method as previous implementation
  could not work, especially for invalidation.
- Allocates dma and dai private data in uncached memory,
  because those resources are shared between different
  pipelines, so potentially also between different cores.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",34,4,0
"thesofproject/sof","eb6378cb4b32fcc9a58b8738fefb23c6ca5f34ee","tlauda","2019-07-16 07:21:53","false","component: move DECLARE_MODULE macro

Moves DECLARE_MODULE macro from common.h to
audio/component.h header. It needs config.h
header, which shouldn't be included from common.h,
because it might be indirectly included by external
user applications.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",46,13,0
"thesofproject/sof","fe913ccc2c62f8e3d4f225ff460cf7f3bc4a5d36","tlauda","2019-05-07 16:36:47","false","ipc: fill wallclock frequency in sof_ipc_stream_posn

Fills wallclock frequency in sof_ipc_stream_posn structure.
This field has been never set before.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",55,11,0
"thesofproject/sof","557e3b7609428b877aaae318bd7862d8a00757f6","tlauda","2019-10-14 14:22:09","false","platform: remove unused PLATFORM_SCHEDULE_COST

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,16,0
"thesofproject/sof","5bb4ce172c660d198eac532c371cfdcf741da5aa","tlauda","2019-09-10 12:07:37","false","topology: remove accidentally added topologies

Removes topologies, which have been removed and accidentally
added again to the repository.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,15,0
"thesofproject/sof","4de76bf57844f6b39a20c20b6d5c859e6dab6b7b","tlauda","2019-08-05 14:14:52","false","timer: change id values

Refactors timer a little bit, to make better usage
of timer id values. Right now every timer has also irq
field, which is used to identify which interrupt line
to enable/disable. We don't longer need timer id to represent
also timer irq, so let's set custom ids and simplify
things.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,14,0
"thesofproject/sof","e74ed8dc563d84956dd15228f10b9af67547db08","tlauda","2020-01-24 11:10:19","false","mailbox: move mailbox_sw_reg_write() to platform code

Extracts mailbox_sw_reg_write() function to platform specific code.
For cAVS platforms we want to have it go through uncached memory
region, which can be unavailable on other platforms.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",79,20,0
"thesofproject/sof","dad0742f116c7e8b10429203df6919a2a65542b9","tlauda","2019-06-05 11:07:12","false","trace: add new trace points

Adds new trace points to increase granularity of
logged sequence during firmware boot.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",61,12,0
"thesofproject/sof","3a29be90be05e1d7cb0eb75ce3a49c9bd5e1abf6","lgirdwood","2018-07-24 08:55:19","true","Merge pull request #126 from RanderWang/volume

 Volume: refine condition in volume_ctrl_get_cmd",13,2,0
"thesofproject/sof","feb850d4eb1c2c25f0ad9cc472e2e728e7b93d16","lgirdwood","2018-11-21 16:27:18","true","Merge pull request #600 from thesofproject/lrg/topic/scripts

scripts: xtensa-build-all: Add support for > 1 makefile job",39,6,0
"thesofproject/sof","097c27ab942ba250f955577f3cbe56a1d376c0a8","lgirdwood","2018-11-28 10:10:34","true","Merge pull request #641 from xiulipan/pr/travistoolsupdate

CI: travis: add tools build",42,6,0
"thesofproject/sof","f77741740093a25e6b14d6861b1f824a25eb0d5e","marc-hb","2022-07-21 06:26:07","false","Add new submanifests/sof-ci-jenkins/zephyr-override.yml

This file provides the flexibility to test any Zephyr commit in Linux
CI without any pollution of `git -C sof describe --dirty`. See (too)
long discussion in #6005 for details.

This new file will have no effect until #6005 is merged. However it can
and SHOULD be merged before #6005 because #6005 is backwards
incompatible and requires a ""flag day"" and the synchronization of
several moving parts. So merging this commit earlier means having one
less moving part to synchronize and it will simplify ""flag day""
rehearsals.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",111,50,1
"thesofproject/sof","968e0404ed23cc20aec52e1f725dcccb2b99024e","lrgirdwo","2023-01-02 21:00:25","false","tools: tplg_parser: abstract topology APIs in preparation for IPC4

Abstract the topology APIs to provide support for other IPC ABIs and
further simplify the codebase. Makse sure all public APIs have the tplg
prefix and make sure private APIs are in the correct places.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",74,55,1
"thesofproject/sof","1635fa472346d74ef3ba3a6e799fc8fbf3755a16","lgirdwood","2022-01-21 12:01:42","false","Revert ""codec_adapter: cadece: remove unnecessary goto's and fix memory leaks""

This reverts commit 07f84ee0bf598c7fccb946cd834f9acec1ab36b3.",114,44,1
"thesofproject/sof","9c9e07c6507daecca2d6923876340a1d35849925","keyonjie","2021-07-23 05:49:38","false","config: kbl: change image_size to the real SRAM size

We have 30 bank HP and 2 bank LP SRAM on KBL, change to toml config file
to reflect that.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",97,38,0
"thesofproject/sof","c42f9bd62121828e8a7d221751f8f579158d6775","tlauda","2019-11-29 09:46:33","false","task: extract task ops to separate struct

Extracts task operations to separate struct. This way we can
add additional ops without need to endlessly adding parameters
to schedule_edf_task_init function.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",68,18,0
"thesofproject/sof","de04a03bbda2606af4914fd241162a00fdbf4e90","tlauda","2020-05-26 06:38:37","false","arch: xtensa: use get_prid macro in boot_entry

Uses get_prid macro in boot_entry instead of classic rsr.prid.
This way it won't fail for cores with XCHAL_HAVE_PRID = 0.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",97,24,0
"thesofproject/sof","a53e12b8ea6cce124897dada773b6b92629df457","tlauda","2019-10-14 08:31:39","false","topology: cml: fix errors in topologies

Fixes SSP format and used pipeline macro in CML topologies.

Fixes: cfe81f5127eb (""topology: cml: cnl: use 3 periods for SSP, DMIC and ALH DAIs"")

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,16,0
"thesofproject/sof","05a8574133d939475cc9594219ff0726da9815d8","singalsu","2018-07-25 11:17:58","false","Volume: Mitigate zipper noise by adjusting gain ramp parameters

Fixes: #103 ""volume: zipper noise with fast changes"".

The volume ramp length is increased from 64 ms to 250 ms. The vol_work
rate to update gain value is increased from every 2 ms to 1 ms. The
volume ramp macros are redefined to enter directly the desired ramp
length in milliseconds to ease the tuning.

Also the volume gain Qxy notation (currently Q2.16) is defined with macros
to avoid magic numbers in code in ramp computation.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",12,2,0
"thesofproject/sof","a340fdf1ad85c3f4de07b37336598e2c5eb5e92e","tmleman","2022-10-26 14:16:24","false","ace: cpu: compilation error fix

Adding missing header: rtos/wait.h

The error appears in meteorlake after enabling power management.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",93,53,1
"thesofproject/sof","d92e68a78acf3edff4fa70bb7baa419d8ad8e182","iganakov","2022-10-31 14:03:42","false","kpb: ipc4 support preparation

KPB refactor and preparation for ipc4 support

Signed-off-by: Ievgen Ganakov <ievgen.ganakov@intel.com>",91,53,1
"thesofproject/sof","93f1a2eaa7c889f9b55af3abaa9608c0133a60b1","bkokoszx","2018-11-27 09:43:06","false","logger: include file_format.h directly from rimage

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",43,6,0
"thesofproject/sof","ff64cc85e3f9153141c027dc867eb9872a34d61f","bkokoszx","2019-03-04 12:25:36","false","platform: change to CAVS_VERSION defines

This commit replaces CONFIG_{PLATFORM} defines by
CONFIG_CAVS_VERSION in cavs/platform.c source file.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",67,9,0
"thesofproject/sof","926fe34d9558483abed7556e0ff09a1996a26320","lyakh","2020-11-03 11:46:11","false","compile: fix 64-bit compilation warnings

The compiler issues warnings when converting 64-bit pointers to 32-bit
integers. Use uintptr_t instead.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",75,29,0
"thesofproject/sof","e0ba5446c1393423ddaca92cd3a31931e27e3969","lyakh","2021-06-11 14:30:16","false","hda: remove left-over code

Handling of NOTIFIER_ID_LL_PRE_RUN has been removed from the HDA DMA
driver in July 2020, remove left-over dead code.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",71,36,0
"thesofproject/sof","b06f2cfe23fb4323eda23b6ed1e8d95f266c8c6a","dbaluta","2022-02-17 11:54:29","false","zephyr: add codec adapter components

This enables codec_adapter and cadence/passhtrough codecs
with SOF on Zephyr.

passthrough codec can be used as it is, but cadence codec
will also need codec libraries from cadence.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",105,44,1
"thesofproject/sof","5b7400a53004b082b4df0b7c7e4dc73445646878","dbaluta","2022-02-17 11:41:53","false","codec_adapter: Fix DECLARE_CODEC_ADAPTER macro

With the current implementation argument 'adapter' was ignored
for each instance of the codec the sys_*_init function name was the
same.

Fix this by properly using 'adapter' name.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",105,44,1
"thesofproject/sof","71e4500349d2430a844d7f5186995b8da8bbcab9","iuliana-prodan","2021-10-01 18:55:58","false","xtensa-build-zephyr: add imx8m as supported platform

Add imx8m platform to be tested with Zephyr.
imx8m refers to i.MX8MP target.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",121,40,1
"thesofproject/sof","c3d1228fb0d8b7670123a00ddc8313c48232933a","kv2019i","2022-08-11 14:40:07","false","probe: add backend for logging via probes

Implement a Zephyr logging backend which routes the logs via SOF
probes interface.

Tested with Linux SOF driver, crecord and sof/tools/probes for decoding.

The patch modifies the probes IPC3 interface, adding a new probe purpose
field (PROBE_PURPOSE_LOGGING, 0x3) to specify probe extraction for
logging. A field for system trace (as is also reserved (PROBE_PURPOSE_TRACING).

Example usage in Linux:

 term1# crecord -c3 -d0 -b8192 -f4 -FS32_LE -R48000 -C4 /tmp/extract.dat
 term2# echo 0,3,0 > /sys/kernel/debug/sof/probe_points
 term1# <terminate crecord>
 term1# sof-probes -p /tmp/extract.dat
 term1# cat buffer_0.bin

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",116,50,1
"thesofproject/sof","14b724f021c42f2c0a5997b97c94a7174f7b754f","tlauda","2019-06-03 08:06:30","false","dma-trace: fix cache handling

Fixes cache handling for dma-trace buffer.
Current implementation wasn't fully supporting
multicore traces. This patch changes buffer
writeback invalidations after buffer write to
invalidations before read and writebacks after
write. Also removes not needed cache operations
on retrieving current traces size.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",68,12,0
"thesofproject/sof","99967837423cb11359a47c45a7a1cb1ce6487a62","lgirdwood","2018-07-05 18:54:58","true","Merge pull request #57 from mmaka1/dox-platform-api

doc: new platform_api group to be referred by sof-docs",11,1,0
"thesofproject/sof","4ea628e11801af79c445c65c38d73ae7f91e5036","tmleman","2022-02-24 17:59:34","false","ipc4: setdx: update comment

This patch updates the comment for SetDX handler to be more accurate.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",111,45,1
"thesofproject/sof","7901eec1ca8b682352802db765ca681ed4d8e381","markbartonxperi","2022-01-04 16:03:52","false","arch: add configuration override to enable DTS codec on mt8195

Allow SOF to be built for mt8195 platform with DTS codec and SOF IIR EQ enabled.

Signed-off-by: Mark Barton <mark.barton@xperi.com>",115,43,1
"thesofproject/sof","7f02b0b30be558562e1334d04cd9b78c038eb522","andyross","2023-04-27 01:31:31","false","ipc4: Quiet errors when fuzzing

Fuzzing produces (by design) an endless flood of protocol errors.
Quiet the top level ones when in use, because otherwise the log output
takes up most of the CPU time available that we'd rather spend on
fuzzing.  Same trick from IPC3.

Signed-off-by: Andy Ross <andyross@google.com>",52,59,1
"thesofproject/sof","deefe40f0dc5fac5c6b6a691d685e9942cdd88ec","andyross","2023-04-25 23:33:45","false","platform/posix: IPC4 updates

Don't use the IPC3 protocol whiteboxing for IPC4, the formats are
different.

Also IPC4 seems to send a LOT of zero-length empty replies.  Those are
causing spurious errors (memcmp_s fails when you pass it a null
destination pointer, even when the length is zero), where the Intel
IPC driver will just drop them.  Suppress handling to match behavior,
though this is probably a buglet worth investigating.

Signed-off-by: Andy Ross <andyross@google.com>",52,59,1
"thesofproject/sof","cf2a4870488c76c27e9ba270bdc1447b74dab336","tmleman","2022-11-04 09:41:43","false","config: mtl: pm settings cleanup

Grouping all zephyr power management setting together.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",90,53,1
"thesofproject/sof","3de29dac2a60815d1b127ddd4b23c106d3f3b2a3","marc-hb","2020-11-02 18:55:52","false","testbench: make lib_table actually global and stop passing it around

This fixes compilation with:

  CFLAGS=-fno-common ./scripts/rebuild-testbench.sh

  sof/tools/testbench/topology.c:24: multiple definition of `lib_table';
  sof/tools/testbench/testbench.c:39: first defined here

This was detected by Gentoo 10 which uses -fno-common by default, thanks
Guennadi for the report and investigation.

Commit 03067c6c7709 (""host: set up shared library table"") introduced a
strange ""lib_table"" symbol that was apparently meant to be global but
was not really because of some confusion between arrays and pointers and
needed to be passed around and ""initialized to itself"" (!) at run time
as seen in the sample trace below:

topology.c

struct shared_lib_table *lib_table;

parse_topology(..., library_table,...)
{

        printf(""DEBUG1 ----- %p, %p, %p\n"",
                  &lib_table,     lib_table,      library_table);

        lib_table = library_table;

        printf(""DEBUG2 ----- %p, %p, %p\n"",
                 &lib_table,      lib_table,      library_table);

}

Log:

    DEBUG1 ----- 0x56298c954040, 0x56298c951183, 0x56298c954040

    DEBUG2 ----- 0x56298c954040, 0x56298c954040, 0x56298c954040

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",75,29,0
"thesofproject/sof","b5b244f116452a5ee1a092ec5b8a0d68a01e20eb","lyakh","2021-04-27 10:07:09","false","math: remove path.h dependency

math.h is an external header, provided by libc, whereas SOF
is a stand-alone executable, that must not depend on any system
headers. Particularly math.h isn't available when building with
Zephyr. The only inclusion of math.h in SOF currently is only
needed for the M_PI definition. Define it locally with a
slightly different name to eliminate the dependency and fix
Zephyr builds.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",84,35,0
"thesofproject/sof","6a64cb9c1b607743120d543ba083ea053a055407","softwarecki","2023-02-22 17:17:45","false","file_utils: Add a new get_file_size function

The get_file_size function allows to conveniently get the size of the file.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",56,57,1
"thesofproject/sof","6d4e923955da80b86fa695603f1737d34290b0bb","lrgirdwo","2018-09-28 14:49:38","false","xtensa: boot: Don't initialise SRAM windows for sue creek

Sue Creek has no SRAM windows so no need to init.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",37,4,0
"thesofproject/sof","182e62a198c3e700f6271ac986776f4ed8ace14a","dbaluta","2020-03-03 13:54:08","false","drivers: sai: Add support for SAI new version

New IP version introduces Version ID and Parameter registers
and optionally added Timestamp feature.

VERID and PARAM registers are placed at the top of registers
address space and some registers are shifted according to
the following:
    Tx/Rx data registers and Tx/Rx FIFO registers keep their
    addresses, all other registers are shifted by 8.

SAI Memory map is described in chapter 13.10.4.1.1 I2S Memory map
of the Reference Manual [1].

In order to make as less changes as possible we attach an offset
to each register offset to each changed register definition. The
offset is specified via CONFIG option. We now that this new SAI
version is supported only for i.MX8M.

[1]https://cache.nxp.com/secured/assets/documents/en/reference-manual/IMX8DQXPRM.pdf?__gda__=1583251106_f508ef5d5353cd8fc33150778708874b&fileExt=.pdf

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",79,21,0
"thesofproject/sof","85a333db74aa1642db6aaadfececbe29dd82e115","slawblauciak","2019-10-02 11:12:21","false","tigerlake: enable alh and supply headers

This change adds ALH support for Tiger Lake platforms
and enables it by default.

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",66,16,0
"thesofproject/sof","67225ccfdb049e2d738572119371514b7e844e49","mrajwa","2019-07-29 20:55:30","false","kpb: limit draining speed to match host params

This patch limit the speed of draining to the speed
of host reads. We fill half of the host buffer and
give a time of one period to read it.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",51,14,0
"thesofproject/sof","a81c919783f09b6976b331dad7f422593be9117d","lgirdwood","2018-09-07 10:53:42","true","Merge pull request #319 from dabekjakub/temp_pipeline_free

test: pipeline_free",31,3,0
"thesofproject/sof","13bf871dcfaa06ca7e23cbc4c872c1f035116f30","lgirdwood","2018-08-23 13:14:33","true","Merge pull request #254 from tlauda/topic/ipc_page_table

ipc: alloc page_table based on CONFIG_HOST_PTABLE",19,3,0
"thesofproject/sof","d42a95114a94cfabbc9908706a64a965abfdd633","lgirdwood","2018-09-04 10:52:58","true","Merge pull request #202 from mwierzbix/unitTest-lib-memset

test: lib/memset: Added unit tests for lib/memset.",30,3,0
"thesofproject/sof","58c6fc32eac9884016d5b2702ba07b6ef7e07a17","lgirdwood","2022-01-21 12:01:42","false","Revert ""codec_adapter: cadence: set default API ID""

This reverts commit a2429fd3e95dd250424e2e291c2be615bb9d43b8.",114,44,1
"thesofproject/sof","bbbdf5e00ef98253348b910ea8ecc7d887f387bc","mrajwa","2021-07-27 17:58:51","false","memory: add kconfig fields for L1 DRAM

This patch adds fields in kconfig for L1 DRAM
memory support.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",103,38,0
"thesofproject/sof","7e88cc01f4c5feabf148aefeb032d82d94264e50","singalsu","2020-02-12 12:21:50","false","ASRC: Remove duplicate timestamp request

This patch removes the unnecessary duplicated function call by mistake.
The proper request is done a few lines above the deleted line.
Fortunately this did not cause any issues.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",78,20,0
"thesofproject/sof","ae70f19092822698cdfc410115fc4727ef98ce82","singalsu","2020-10-02 13:41:54","false","Tools: Test: Audio: Suppress variable prints from TDFB test script

Due to the missing semicolons the variable config_fn got printed
to screen unnecessarily.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",65,28,0
"thesofproject/sof","354029acbdbfd684d33dc225ba7b412095c5d3db","saisurya-ch","2023-10-03 07:37:44","false","Update clock switching sequence and return EBUSY for IPC when Host busy

- Update clock switching and clock frequency sequence.
- Return EBUSY for IPC when Host busy with previous ipc.

Signed-off-by: SaiSurya Ch <saisurya.chakkaveeravenkatanaga@amd.com>",17,64,1
"thesofproject/sof","85f0eee8209060530c211e5e332a671735ff09e0","tlauda","2019-11-26 10:46:24","false","edf_schedule: do not schedule tasks with state RESCHEDULE

EDF tasks with state SOF_TASK_STATE_RESCHEDULE should be handled
separately and not scheduled immediately.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",67,18,0
"thesofproject/sof","8c61213c37e6de534b5707ff5a644390549d88ed","tlauda","2019-09-09 09:54:38","false","schedule: support dynamic scheduler creation

Refactors schedule code in order to allow dynamic scheduler
creation. We don't want to add every new scheduler to the static
array of scheduler_ops and also we don't want to have every
scheduler created on every platform. Maybe some of the platforms
won't need some of the future scheduler types.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",58,15,0
"thesofproject/sof","b3a04c7477ece1574675ebd2563ed9437f46c82a","tlauda","2019-07-12 11:01:31","false","audio: cleanup includes

Cleanups includes in all audio files.
Unused headers has been removed and needed
has been added.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",43,13,0
"thesofproject/sof","2eb5857c779ce9d628a401666fdc87811e15d6ff","tlauda","2019-07-09 14:41:43","false","arch: xtensa: merge UP and SMP architectures

Merges xtensa UP and SMP architectures.
The amount of code which were duplicated by creating
SMP architecture as separate instance is too big
to maintain. I've decided to merge both architectures,
change explicit selection of SMP to be dependent on
configured number of cores (> 1) and add branching in
xtos based on currently used processor configuration.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",42,13,0
"thesofproject/sof","3afc474518766a38fc1bec6671d01235635d22c1","tlauda","2019-09-30 06:21:46","false","task: add complete callback

Adds complete callback to task. Some EDF tasks will need to have
additional callback on task completion, which will be executed
in critical section along the setting task state to complete.
Doing it during regular execution is not enough, because it's done
on passive level and we want to avoid any race condition.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,16,0
"thesofproject/sof","d1f4320988832c2941e54e46a38b39b7ae869a51","tlauda","2019-10-04 12:30:24","false","interrupt: remove unmask parameter

Removes unmask parameter from interrupt structures and functions.
It's not been used for a long time now.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",65,16,0
"thesofproject/sof","e465bca588328a801dd6954cbeba739d369ae3d5","tlauda","2020-01-13 11:51:06","false","spinlock: revert explicit allocation

This patch reverts explicit spinlock allocation in shared
memory. From now on we assume every spinlock is already part
of the shared memory. This helps us avoid unnecessary cache
evictions, when accessing spinlock's data. Also some of the
spinlock API functions require interrupt header, so they were
extracted in order to avoid circular dependency.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",77,19,0
"thesofproject/sof","3c073b478fb9f8b118ea1b3affe80329013b4d8f","singalsu","2020-09-29 13:25:19","false","Tools: Test: Fix for sine vector orientations mismatch

The generation of multiple tone frequencies failed due accidental
square matrix generation when mixed row and column vectors were added.
The new version uses only vectors in first dimension and avoids the
problem.

The license text format also is changed to current.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",66,28,0
"thesofproject/sof","b0f4605d97de5b193ba2e1c509349360f9e819ca","tobonex","2023-09-15 18:03:09","false","multiband_drc: remove buffer_acquire from multiband_drc

remove buffer ops from multiband_drc module

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","363d96dbff2b3741b3c75ab240404275023280e8","mengdonglin","2022-05-09 12:30:15","false","rimage: update to May 4th version 9d453321f892

Update rimage from version from ee5c3e1deb14 to 9d453321f892

9d453321f892 (origin/main) Write firmware file micro version to manifest
             for cAVS platforms
05be213d46d4 config: Add mt8186.toml
ee5c3e1deb14 (HEAD) Added handling of OpenSSL on Windows with MSYS2

Signed-off-by: mengdonglin <mengdong.lin@intel.com>",112,47,1
"thesofproject/sof","0c5dcaca04e662c61c34e84c61823df1c8937cc7","marc-hb","2022-04-22 22:19:10","false","xtensa-build-all.sh: actually implement CONFIG_IPC_MAJOR_3=y

There was no actual ""IPC3"" value, it was ignored. The platform default
was used instead.

Stop ignoring invalid arguments, fail and report them.

Allow empty string as a no-op for scripting convenience.

Don't restrict IPC4 to tigerlake, it's not the job of
xtensa-build-all.sh to filter what's supported versus not.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",114,47,1
"thesofproject/sof","2831f463db50e8a6eab678f165e224a2947f45bc","singalsu","2020-03-30 13:23:04","false","Tools: Tune: Clean and improve example FIR EQ generator script

This patch cleans the FIR examples generation with more consistent
directories output and file names. The EQ private data name is
renamed for a more consistent scheme into DEF_EQFIR_PRIV for all
generated coefficient data files.

The copyright text is updated to new shorter BSD-3-Clause version.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",67,22,0
"thesofproject/sof","7c013b27e541130bc6b8f3ac6a4a8b22b07cf91a","kv2019i","2023-08-31 08:00:41","false","CODEOWNERS: add kv2019i to the list of default owners

Add myself to the list of default owners that get added to
all pull requests if no other entries match.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",23,63,1
"thesofproject/sof","0228d8d7bab7fb52b042df2637b83042411c2de0","kakulesza","2018-06-04 11:03:40","false","version.sh: fix FW version parsing

Fixed version.sh script - now it handles longer build names.

Signed-off-by: Kamil Kulesza <kamil.kulesza@linux.intel.com>",1,0,0
"thesofproject/sof","b0ad9578a7864c602fa2c688cbcdc9b955235798","bkokoszx","2020-01-08 11:13:18","false","driver: dai: add get_hw_params() function to dai ops

Add generic get_hw_params() function in order to fetch
hardware dai parameters set during ipc_dai_config()
incovation.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",72,19,0
"thesofproject/sof","5cfae4b724a9f529d8c9ade4ea767934dab98702","ranj063","2022-02-23 04:46:08","false","codec_adapter: rename ca_copy_from_lib_to_sink()

Rename it to ca_copy_from_module_to_sink(). No functional change.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",107,45,1
"thesofproject/sof","248956be5b08583ba53146007141017dfb127fa9","abonislawski","2019-06-11 12:34:42","false","kconfig: remove CORE_COUNT from apl defconfig

Default build option for APL is UP so it should use default CORE_COUNT value (1) to not waste memory

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",50,12,0
"thesofproject/sof","b26dc63919185648ef6ad8f3306f8cfd57cfd20b","abonislawski","2020-06-29 10:24:22","false","tgl: iccmax use pm_runtime_en_dsp_pg power up instead of full core init

This patch will introduce additional client override flag to pm_runtime_get
Extra flag is not necessary but if used it will prevent from powering down
a core without the same flag

This will save a lot of time if quick changes are needed
eg. in dynamic hpro-lpro switching which on TGL will also require to
power up core 3

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",72,25,0
"thesofproject/sof","313b959f6eac5072066dfd301f093cd3ac7ca3aa","ranj063","2023-05-16 00:26:24","false","copier: Remove init_dai_single()

No need to handle this differently as multi-endpoint DAIs no longer
create endpoint devices/buffers too.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",51,59,1
"thesofproject/sof","6009c21c6645b67ae77f5aaefcff62a7f323cd78","makarukp","2023-02-09 16:02:49","false","hda: Maintain dma buffer alignment

Hda chain dma buffer require aligning after its size recalculation.

Signed-off-by: Piotr Makaruk <piotr.makaruk@intel.com>",55,56,1
"thesofproject/sof","665bda9c8a082846007aef37875c620b54c6e49c","abonislawski","2020-08-26 11:20:00","false","kconfig: select CAVS_USE_LPRO_IN_WAITI for TGL

TGL have hardware requirement that DSP should
use LPRO as clock source in waiti.

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",76,27,0
"thesofproject/sof","c6ea9b9c2051e3037736d64dad0696c01f33cc7d","tinghan-shen","2022-01-10 05:31:06","false","platform: mtk: add xtensa headers for mt8186

Add xtensa headers for mtk mt8186 platform.

Signed-off-by: Tinghan Shen <tinghan.shen@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",115,43,1
"thesofproject/sof","84dab8990f0e36d27e8e31fa70ead8a2bee21981","ranj063","2018-06-09 06:15:40","false","tone: add get command handler to return tone state

This patch adds the get() handler to respond to requests for the current
tone state.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",1,0,0
"thesofproject/sof","7ca0f3f6b3a08eed573d523e9e975a9316784299","abonislawski","2019-06-17 10:39:48","false","memory: add heap_buf_alignment define for cavs platforms

This value will determine alignment for heap buffers

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",46,13,0
"thesofproject/sof","1531638cbf33eae64da6f7962c41ef77bb738c4a","ranj063","2022-03-23 22:46:51","false","codec_adapter: rename references to codec_adapter

to module_adapter. No functional changes.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",109,46,1
"thesofproject/sof","05eb73e4cbffa3b53f65abe5e151370eb6708dd7","yongzhi1","2021-04-13 12:47:02","false","topology: sof-tgl-max98373-rt5682: add Bluetooth audio offload support

Add passthrough pipelines to support Bluetooth sample rates
on SSP port2.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",81,34,0
"thesofproject/sof","802cffad0df810b25deebfa8595410b81f873eca","andrula-song","2023-03-06 12:10:23","false","Audio: Dcblock: Add HiFi4 implementation of dcblock

Add HiFi4 implementation of dcblock processing functions.
Compared with generic C version, the 16 bit format can save
about 54.8% cycles, and 53.1% for 24 bit format and 49.1%
for 32 bit.

Signed-off-by: Andrula Song <andrula.song@intel.com>",56,57,1
"thesofproject/sof","34d7baa800610bf774f8a7c02ca0475bf14f177f","marc-hb","2023-04-26 00:49:20","false","scripts: Dockerfile: re-add TGL toolchain removed by accident

TGL has always been using the `xtensa-cnl-elf` toolchain. That
toolchain was removed by accident when cavs 1.8 support (including
CNL) was removed by massive search/replace commit dc9ba281d76519
(""platform: remove support for cAVS 1.8 platforms"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",52,59,1
"thesofproject/sof","868e00bdd0416fec0cd5c4fd81ea7e6836a3bad7","marc-hb","2021-09-28 00:53:06","false","xtensa-build-zephyr: download rimage whether we clone zephyr or not

... because there's no reason to make one depend on the other.

Same for the opportunistic creation of the sof symbolic link.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",120,40,0
"thesofproject/sof","1c10b8a54c74a16bb09d11a3478562271b8dd77c","lyakh","2022-08-02 10:43:54","false","mixer: check component pointers before dereferencing

Buffers, attached to mixers, can be remaining parts of pipelines,
being freed. Then their component pointers might no longer point to
valid components. Check them before dereferencing.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",112,50,1
"thesofproject/sof","7aee1e594b94424993f814e54c8739b59a15cd2e","lyakh","2021-05-18 15:00:47","false","agent: exit for system power down

Exit the system agent for system power down.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",87,35,0
"thesofproject/sof","a25cf0f1ba9414f78c2386da9c7ffc4d1259deec","lyakh","2020-11-27 19:10:46","false","zephyr: fix breakage after a recent logging extention

Commit fee7d9c66026 (""trace: Introduce adaptive
rate-limiting/suppression of repeated messages"") broke Zephyr build.
Add the missing parameter.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",78,30,0
"thesofproject/sof","7b8da69176bf2c5247701b9d409923954362deb4","lyakh","2023-02-07 15:35:11","false","module-adapter: allow different statuses

The following problem is observed when testing pause functionality:

in a case of a playback stream host -> mixin -> mixout -> DAI where
host and mixin belong to the pipeline A and mixout and DAI belong to
pipeline B, pipeline B is scheduled before A. So at start we get:
scheduler start
B: no data
A: read 1 period of data
scheduler sleep
(1 period of data pending in pipeline A)
scheduler start
B: send 1 period of data out
A: read 1 period of data
scheduler sleep
(1 period of data pending in pipeline A)
PAUSE
RELEASE
scheduler start
B: old data before sleep isn't sent because A is PAUSED
A: read 1 period of data
scheduler sleep
(2 periods of data pending in pipeline A)
...

With repeated pause-release cycles this leads to buffer overrun. To
fix this allow sending out data by pipeline B when A is still paused.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,56,1
"thesofproject/sof","c47221f22b8034bf13166254e59ac549b18f4d60","marc-hb","2023-03-22 05:39:13","false",".github/ipc_fuzzer.yml: add new scripts/fuzz.sh

Should avoid future regressions like the one fixed by #7318

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",55,58,1
"thesofproject/sof","51bb6339f894528c36321a1eaaee005cf08eecba","marc-hb","2022-04-23 01:08:15","false",".github: add some IPC4 builds

Add all platforms that can currently be built with IPC4:

  cnl icl jsl tgl tgl-h

Can be adjusted any time later with a one-line change.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",114,47,1
"thesofproject/sof","454b2b1f43ee47ac2f3511790aab9fd0d9b2dba8","marc-hb","2020-05-22 00:44:52","false","scripts/qemu-check.sh: add find_qemu_extensa()

qemu-check.sh can now be invoked from more places: not just the qemu
directory but also from sof/ and from their parent.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",99,24,0
"thesofproject/sof","246ea6469abdc677b7038285654fd64fc387c5f1","keyonjie","2021-07-23 05:50:35","false","config: skl: change image_size to the real SRAM size

We have 30 bank HP and 2 bank LP SRAM on SKL, change to toml config file
to reflect that.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",97,38,0
"thesofproject/sof","ab89e26c2b04f1c066ec01e7a8c4bd9ccf34a9cd","keyonjie","2021-02-24 01:25:36","false","Revert ""timer_domain: set last_tick to ticks_req in order to avoid drift""

This reverts commit 9a08028a768a86bc882f8cf20bddf61138e46bea.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",76,33,0
"thesofproject/sof","ecbb8c41e44b89100cb5908a14739ed938714cb6","singalsu","2020-07-29 15:19:55","false","Audio: Fix pointer arithmetic mistake in ASRC initialize

This patch fixes the issue where impulse response update can
randomly corrupt stack in testbench environment. The error seen
in freeing cd->asrc_obj was free(): invalid next size (normal).
The violation was also confirmed with valgrind with error
Invalid write of size 4.

The order of impulse response storage and channel buffers are swapped
to simplify the pointer initialize calculations. The default
sizes for them are added as macro definitions into asrc_farrow.h.
Checks for used sizes are added to buffer and filter initialize
functions. The clear of buffer is done with memset instead of for loop.

Fixes: 4c995d03753df9ed666f476a8d8ce6d4c28c3ff3
Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",79,26,0
"thesofproject/sof","d88e36987bf908df272b007788043aec453e7e62","singalsu","2020-10-26 16:23:48","false","Tools: Tune: TDFB: Fix typo in copyright text year

This patch fixes the small mistake.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",74,29,0
"thesofproject/sof","9c33333cf5a7681fe8113ad8423e8413f228459d","singalsu","2020-12-10 14:42:55","false","Math: IIR: Fix overflow in DF2T generic C version biquad output

With coefficients scaling that creates above 1.0 absolute value
internal biquad output before scaling gain and shift there's
overflow in variable tmp calculation that is used for output
and for recursive a1, a2 coefficients multiplication.

Fixes: #3678

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",74,30,0
"thesofproject/sof","fe4ea779b1522d455e16bd81aca5e7e2b77b1f9f","singalsu","2019-06-03 14:20:59","false","Fix conversion to Q1.31 in macro Q_CONVERT_FLOAT()

This patch fixes the overflow that happened with term (1 << qy)
in the macro with qy set to 31. Casting to int64_t avoids the
macro internal overflow with all fractional 32 bit formats.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",67,12,0
"thesofproject/sof","fd1f631352158fc40a7ce164d279f9c02a0fb6b4","marc-hb","2021-09-16 23:35:32","false","cmake: do not download submodules when BUILD_UNIT_TESTS

Faster CI.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,39,0
"thesofproject/sof","df376963df1e5c3e665fba72ac94cc45cc7ffc49","marc-hb","2021-09-17 05:41:51","false","cmake/github: do not download rimage when CONFIG_LIBRARY/testbench

Faster CI and will catch any accidental dependency sneaking in.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",118,39,0
"thesofproject/sof","e6f0f8b60f0f9cc46906d8d0105ed9244a8804c2","marc-hb","2021-05-05 18:51:30","false","logger: add or fix error handling in read_entry_from_ldc_file()

Add a few missing log_err().

Remove calls to ferror() because:
- its return value is a meaningless ""non-zero"" boolean,
- we don't really care whether the dictionary file is in an error state
  or not; an unexpected end of dictionary file is just as bad.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",81,35,0
"thesofproject/sof","aec08eaf7e12757092b182be296c0583abb84491","marc-hb","2021-09-08 18:37:45","false","xtensa-build-zephyr: extract new parse_args() function from main()

main() was growing too big. Zero functional change.

Also rename the too generic ""build()"" to build_all()

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",118,39,0
"thesofproject/sof","950728c0951fd1f3830d07ee60f813fe8986a4e9","marc-hb","2022-01-07 18:53:10","false","Docker: sof: add ninja-build

We should gradually switch to ninja as a default.

ninja-build is apparently missing from build-essential

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",116,43,1
"thesofproject/sof","6d2b214abd40978b78d8db9ea132a1e8444f389c","lyakh","2019-01-24 10:27:11","false","owners: add myself as a code owner for Sue Creek related code

Take over ownership of drivers/dw, platform/suecreek and some other Sue
Creek related files.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,8,0
"thesofproject/sof","b5248054c5ea7f80aac6aaf7f8f5372faf27fa16","lyakh","2022-02-25 09:11:42","false","volume: use rmalloc() for an internal allocation

rballoc() is used for buffer allocations, no need to use it for
volume internal control structures.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",111,45,1
"thesofproject/sof","de129609ab1667ee1ba572638f95623ec7b4a868","lyakh","2022-09-28 13:05:28","false","ipc4: don't propagate commands across pipelines

With IPC4 commands are sent to each pipeline individually, therefore
there is no need to propagate them to connected pipelines in the
firmware. We use IPC4_MOD_ID() to detect the IPC4 mode: it returns a
non-zero module ID under IPC4 and 0 under IPC3.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",97,52,1
"thesofproject/sof","28210fa6f103fe5d941bbb727737d6d8290c181b","lyakh","2020-11-19 12:57:30","false","schedule: the cAVS timer requirement is only valid for Xtensa

The timer-domain driver requires the use of the cAVS timer driver,
but it only makes sense on Xtensa architectures.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",74,30,0
"thesofproject/sof","bc0f5d8e07ee34835e566f63d94cdbc223656e09","lyakh","2022-08-26 15:03:50","false","pipeline: let selector terminate the pipeline when stopping

Usually when processing COMP_TRIGGER_PAUSE or COMP_TRIGGER_STOP if a
component returns PPL_STATUS_PATH_STOP it means, that the trigger
propagation should stop and the pipeline should be kept alive.
However, in some cases propagation should be stopped, but the
pipeline should be terminated. This is the case with the selector
component, when used in a keyword detection pipeline. Add a new
PPL_STATUS_PATH_TERMINATE return value for such cases.

BugLink: https://github.com/thesofproject/sof/issues/5398
Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",113,51,1
"thesofproject/sof","d2076ce45cf983d7db1b0e4a2d12c3d0930540b8","lyakh","2020-08-11 09:52:03","false","zephyr: dw-dma: fix a copy-paste error

Usually this error has no run-time effect, so this fix is mostly
theoretical.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",73,26,0
"thesofproject/sof","42eccb306b3f049e5e121c354e991c7f6e19cd38","lyakh","2022-04-08 10:55:51","false","component: comp_make_shared() only needs to mark the component

comp_make_shared() only makes sense and is only called in multi-core
configurations. In such configurations components are allocated from
uncached memory, from the SOF_MEM_ZONE_RUNTIME_SHARED zone. So they
are always uncached and there is no need to flush cached or relink
lists. We only need to set a flag, indicating, that this component
is used on multiple cores.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",114,46,1
"thesofproject/sof","75ed28b6825883a9b7e43be6bd959be1c2b75ffa","lyakh","2020-08-11 09:39:01","false","pipeline: (cosmetic) make a function static

pipeline_schedule_cancel() is never called outside of pipeline.c,
make it static.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",73,26,0
"thesofproject/sof","940f1a88d2e1a10cd265f59e7ef7c438a3606215","lyakh","2022-10-13 13:09:08","false","probe: don't modify input configuration data

In probe_point_add() avoid modifying input configuration data that
can be located in the host memory window.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",97,52,1
"thesofproject/sof","61dc29bcd5e32c4429973ac9a5b236303cec9273","mwierzbix","2018-08-07 14:24:08","false","lib: rstrcmp: Added null terminator check for comapring cstring of different lengths.

Signed-off-by: Michal Jerzy Wierzbicki <michalx.wierzbicki@linux.intel.com>",17,2,0
"thesofproject/sof","f6304f5154784c309f67099382d0a6a7a9f61176","ktrzcinx","2019-10-28 14:15:31","false","trace: Add pipeline id to tone traces

It will be helpful during debugging components
to see correlated pipeline id.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",68,17,0
"thesofproject/sof","bf8a77ecdc709e8884b29409cd9e87759573171b","ranj063","2022-01-08 01:49:43","false","codec_adapter: Rename codec_free() to module_free()

Rename the codec_free() function to module_free() and remove an
unnecessary pair of braces from the function. No functional change.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","c9127207ca296890ad66a232283dad755e360d3c","ranj063","2022-06-15 23:42:01","false","bdw: use legacy conp drv interface for volume

Use the legacy interface for volume component.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",120,48,1
"thesofproject/sof","26ca41b55ef2f5aa5dc6bbe8f6f496903e5364f5","ranj063","2020-07-11 01:54:34","false","scripts: xtensa-build-all: print usage when no args passed

Print usage when no arguments are passed to the script.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",73,25,0
"thesofproject/sof","808dfac9aeb55957ba23a5999f5b14e8c25fe95d","RDharageswari","2020-09-01 17:55:45","false","topology: Add UUID for Maxim DSM component

This patch adds UUID for Maxim DSM component in sof-tgl-max98373-rt5682.

Signed-off-by: Dharageswari R <dharageswari.r@intel.com>",70,27,0
"thesofproject/sof","6dfddfc55060d2282b5ee12059c04d793d2b9c95","xun2z","2019-06-05 19:45:08","false","topology: add rt5682 m4 topology file for icl and byt platforms

Add topology support for rt5682 codec in both Bay Trail and Icelake
platforms.

Signed-off-by: Xun Zhang <xun2.zhang@intel.com>",61,12,0
"thesofproject/sof","d14b1931a5180df810bee7c8184f39db95394945","RanderWang","2021-12-15 05:47:55","false","ipc4: add chain dma support

Chain dma is only support by HDA gateway. The idea is
to copy data from host to dai directly without any process.
It is just like a pass-through pipeline.

This patch adds support by create a pass-through pipeline
internally.

Signed-off-by: Rander Wang <rander.wang@intel.com>",113,42,1
"thesofproject/sof","37234939014390aec67cbae0d525708ba192e991","RanderWang","2022-03-28 11:14:42","false","ipc4: free buffer when pipeline is free

When two modules in different pipeline are unbind, the buffer used
by them is free. The buffer is not free if they are in the same
pipeline. So we need to free buffer when pipeline is free

Signed-off-by: Rander Wang <rander.wang@intel.com>",112,46,1
"thesofproject/sof","33af554ed3799589020b3334ed00357d6d4093aa","RanderWang","2021-07-06 08:49:26","false","ipc4: add fw_reg definition

fw_reg is located in memory windows 0 for host to
query fw status

Signed-off-by: Rander Wang <rander.wang@intel.com>",84,37,0
"thesofproject/sof","03762e3de31c05a242b104666adb34d50bbe224c","RanderWang","2022-04-21 09:22:36","false","ipc4: trigger pipeline from host component

Fixed playback issue with chain dma. Pipeline
is always triggered with direction of host to dai,
so host is used for trigger.

Signed-off-by: Rander Wang <rander.wang@intel.com>",115,47,1
"thesofproject/sof","ffffa4b0bd7b971df53183668946624be2987fac","RanderWang","2022-01-12 12:38:32","false","ipc4: remove redundant calculation for copy info

The src & sink info can be gotten from struct comp_copy_limits,
no need to calculate it again.

Signed-off-by: Rander Wang <rander.wang@intel.com>",117,43,1
"thesofproject/sof","93e572050c57ff79b338a230cefa090e80de2d47","yongzhi1","2021-08-11 18:06:13","false","topology1: tgl-max98357a-rt5682 fix ENDPOINT_NAME macro side effect

Without enclosing ENDPOINT_NAME with `', the generated tplg has
pcm id 0 named to ""Headphones"" instead of ""Speakers"".

$ ./tplgtool.py ~/work/sof/tools/build_tools/topology/sof-tgl-max98357a-rt5682.tplg
pcm=Headphones;id=0;type=playback;fmt=S16_LE;rate_min=48000;rate_max=48000;ch_min=2;ch_max=2;
pcm=Headset;id=1;type=both;fmt=S16_LE;rate_min=48000;rate_max=48000;ch_min=2;ch_max=2;
pcm=HDMI1;id=2;type=playback;fmt=S16_LE;rate_min=48000;rate_max=48000;ch_min=2;ch_max=2;
pcm=HDMI2;id=3;type=playback;fmt=S16_LE;rate_min=48000;rate_max=48000;ch_min=2;ch_max=2;
pcm=HDMI3;id=4;type=playback;fmt=S16_LE;rate_min=48000;rate_max=48000;ch_min=2;ch_max=2;
pcm=HDMI4;id=5;type=playback;fmt=S16_LE;rate_min=48000;rate_max=48000;ch_min=2;ch_max=2;
pcm=EchoRef;id=6;type=capture;fmt=S16_LE;rate_min=48000;rate_max=48000;ch_min=2;ch_max=2;
pcm=DMIC;id=99;type=capture;fmt=S32_LE;rate_min=48000;rate_max=48000;ch_min=4;ch_max=4;
pcm=DMIC16kHz;id=100;type=capture;fmt=S16_LE;rate_min=16000;rate_max=16000;ch_min=2;ch_max=2;

$ grep Headphones topology/sof-tgl-max98357a-rt5682.conf -n -B5

7071-# PCM Low Latency, id 0
7072:SectionPCM.""Headphones"" {
7073-
7074-	# used for binding to the PCM
7075-	id ""0""
7076-
7077:	dai.""Headphones 0"" {
7078-		id ""0""
7079-	}

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",117,38,0
"thesofproject/sof","79c43394892e05bb4778c7b30c87a007dd41d3be","btian1","2023-03-15 07:55:06","false","dai-zephyr/dai-legacy: Expose dai_zephyr_prepare() and dai_zephyr_config_prepare()

Rename dai_config_prepare() to add the zephyr prefix and expose both
functions and use them in the copier device in the single endpoint DAI
case.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",56,57,1
"thesofproject/sof","04ff2f99e24170d3cf8526c807ee3240b0c1c373","joechengxperi","2022-03-16 09:30:46","false","config:ADL:Add DTS config

Enable DTS SDK and SOF EQ IIR on ADL platform

Signed-off-by: Joe.Cheng <joe.cheng@xperi.com>",108,45,1
"thesofproject/sof","8b6fb345da02d2b471b679c13453d06d6134488b","yaochunhung","2022-03-14 04:59:06","false","mediatek: mt8195: afe-drv: fix fs cppcheck warning

Define fs as signed integer in afe_irq_config to fix cppcheck
warning.

Fixes: 1b7f8ed2a6(drivers: mtk: add afe driver for mtk mt8195)
Signed-off-by: YC Hung <yc.hung@mediatek.com>",108,45,1
"thesofproject/sof","1b49c6a05bfb0aeeefba893e7a83f9b8ad06483f","plbossart","2020-07-28 15:13:12","false","Revert ""schedule: edf: cycles budget""

This reverts commit e003afe582e41c4a8a52b21d45dbc83c166021a5.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",79,26,0
"thesofproject/sof","d380674ef251ca2c8a3250da856021553683ac47","plbossart","2022-04-04 22:37:03","false","topology1/kernel_dependent/v5.19: enable SoundWire deep-buffer headset topologies

This patch duplicates the configuration at the higher level and adds
the ""HEADSET_DEEP_BUFFER"" definition.

This is not very elegant and will require changes in two places, but I
don't see a better solution with M4.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",110,46,1
"thesofproject/sof","019c1505b148c540acd45f36025ff1d17f68ec47","plbossart","2021-07-06 13:26:37","false","topology: cavs-nocodec: use s24le for DAIs for all platforms

The use of s32le did not expose any problems on APL, but alsa-bat was
previously reported as failing on JSL. Now that this test was extended
to CML_NOCODEC, we see the same issue. Manual tests with s24le show no
issues.

Let's just use s24le across the board and move on.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",84,37,0
"thesofproject/sof","51156a7c0adf00a30e5b3e0e8954b91ebf16448d","alaa-emad","2023-03-25 14:13:35","false","drivers: imx: ipc: remove unnecessary blank line

Remove unnecessary blank line after '{' as reported
by checkpatch:

""CHECK: Blank lines aren't necessary after an open
brace '{'"".

Signed-off-by: Alaa Emad <eng.alaaemad.ae@gmail.com>",57,58,1
"thesofproject/sof","328562093e78ddb43286baabe178fa85d22af9d7","jajanusz","2019-01-22 17:03:21","false","gitignore: update for kconfig

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",56,8,0
"thesofproject/sof","369a59431a33f5837772aa0209977e75e75f7e30","lyakh","2021-04-29 15:51:45","false","scheduler: make ops static

In both native and Zephyr builds schedule_edf_ops and
schedule_ll_ops are only used in one file each, make them
static.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",81,35,0
"thesofproject/sof","b4e7150f42880d3a68b492c41dec38a17588eb26","bkokoszx","2020-06-23 07:55:25","false","mn: clear mclk and bclk source clks in MDIVCTRL

We should clear MNDSS and MCDSS bits before setting
new mclk and bclks source clocks. This commit is
going to fix case when driver want to reconfigure
the same SSP (e.g. index = 0).
1. Driver sends ssp_config() and FW configures ssp
   (index = 0) with MCDSS bits set to e.g. 1.
2. Driver wants to reconfigure the same ssp (index = 0)
   by sending new ssp_config() and FW tries to configure
   ssp 0 once again, but firstly it reads MDIVCTRL
   register:
	mdivc = mn_reg_read(MN_MDIVCTRL, mclk_id)
   and then tries to set MCDSS(0):
	mdivc |= MCDSS(0);
   , but there is ""or"" function here - after it MCDSS bits
   still will be set to 1. That's why we should clear this
   bits earlier.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",69,25,0
"thesofproject/sof","1b02c92effced569d41f17826b95f201fec44ab8","kv2019i","2023-01-02 10:22:59","false","dai-zephyr: handle dai_config_get() errors properly

Add error check in dai_get_hw_params() for the case where
dai_config_get() returns an error.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",87,55,1
"thesofproject/sof","a62fa8e418c6da1b80f48d9ecfddad297c80b381","kv2019i","2023-02-14 12:57:57","false","topology2: cavs: add passthrough-capture-be pipeline

Add a separate template for capture backend pipelines. The
passthrough-be pipeline has been used as template for both playback and
capture, but we want to provide different defaults especially for the
audio formats in capture case.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",55,56,1
"thesofproject/sof","9c11127deb96cd3ee4c568156b724b6aa8a1842e","singalsu","2019-03-29 11:53:08","false","SRC: Add support for timer based scheduling

This patch adds to SRC for timer based scheduling capability to
determine in copy() the number of frames to process. Due to
potentially high computational load the max amount to process is
limited to just exceed the nominal number of frames per
scheduling rate. It prevents SRC to be preempted due to too long
processing time and cause pipeline xruns in the start of playback
when the buffers contain a large number of frames.

The pre-fill of samples in first copy() is removed since the just
above period length of data processing target avoids the sink
buffer to get too small number of frames for the downstream
pipeline.

The currently happening bad metallic sound with SRC in pipeline
is fixed by this patch.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",48,10,0
"thesofproject/sof","56def4ea104e7bae807ceacd2fcf170c31215347","singalsu","2023-05-04 13:37:22","false","Tools: Topology2: No mandatory rate_out to support capture SRC

This patch removes rule to require fixed rate_out for SRC
widget. A capture SRC in host pipeline or near it has typically
variable output rate.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",53,59,1
"thesofproject/sof","eeeec95c98e9e1517d2839f0d7b1fdafc3c452f3","marcinszkudlinski","2023-02-14 10:41:58","false","IPC4: add DP domain modules to pipeline scheduling

Pipeline creation
 - create a task for each DP module when started
   on primary or secondary core
 - delete a task for each DP module when stopped
 - don't call comp_copy in LL context for DP modules

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",55,56,1
"thesofproject/sof","8f802378e5b8c3e838d6fb57a54ca51138c4e930","singalsu","2022-11-08 09:14:56","false","Audio: SRC: Refine input and output blocks count calculation

As a small improvement for 2-stage converters like 44.1 to 48 kHz
the s1_blk_in and s2_blk_out can be calculated once after the if
statement.

There is no measurable MCPS improvement from this change.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",93,53,1
"thesofproject/sof","5ac5b6b84cd52309ecc5a1bc8d16888e404ef3a4","singalsu","2023-03-10 16:46:21","false","Tools: Tplg_parser: Fix void pointer arithmetic

Pointer arithmetic with void pointer is not allowed. Functions
get_token_uint32_t() and get_token_comp_format() are updated
to handle correctly the bytes offset.

Functions get_token_dai_type() and get_token_process_type() are
updated to similar pointer arithmetic style as previous.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",55,57,1
"thesofproject/sof","458bda34b40cae964caa0410330ccbd2bc2deba2","RanderWang","2022-01-17 02:12:01","false","ipc4: adjust pcm conversion function for gateway

Compared to non-copier module, copier module uses
different conversion algorithoms for different
gateways, .e.g HDA dma requires sample bit starting
from MSB bits and also alh engine. These hw features
make pcm conversion algorithom different for different
modules.

This patch add gateway type to select conversion function.

Signed-off-by: Rander Wang <rander.wang@intel.com>",117,43,1
"thesofproject/sof","5571da6dc104889e95f9e3f45d2c1aff442726ef","RanderWang","2018-12-04 08:08:11","false","topology: hda: change stream format from 32bits to 24bits

For most of hda codecs, 32bits is not supported and 24bits
is a suitable one.

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",41,6,0
"thesofproject/sof","38ed99ffd436d6d0622e746ef7b5ec63de357905","RanderWang","2021-11-16 07:25:20","false","ipc4: copier: only update pipeline reg for playback

We don't do it for capture.

Signed-off-by: Rander Wang <rander.wang@intel.com>",127,41,1
"thesofproject/sof","7a7dfb810d11a8d1eac5887341f105d2bc2e56ff","RanderWang","2023-06-01 09:21:26","false","zephyr: enable core dump on tgl platforms

We need to enable CONFIG_DEBUG_COREDUMP_MEMORY_DUMP_MIN according to
comments in coredump_core.c: When dumping minimum information, the
current thread struct and stack need to be dumped so debugger can
examine them.

Signed-off-by: Rander Wang <rander.wang@intel.com>",49,60,1
"thesofproject/sof","8e59c9617376597459000ea956490a5328b68033","serhiy-katsyuba-intel","2022-06-08 16:43:32","false","Fix performance counter regression

A regression bug was introduced by gh-5393 pull request.

As a source of high precision CPU timestamp (aka ""system"" timer)
this fix uses arch_timing_counter_get() for builds with Zephyr and
timer_get_system(cpu_timer_get()) for SOF only builds.

Note: arch_timing_counter_get() might not be implemented for your
Zephyr platform. In this case k_cycle_get_64() is used instead.
This will result in both ""platform"" and ""cpu"" timestamps to be equal.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",117,48,1
"thesofproject/sof","b67c2bf0d9732e810b5b39b9de10c803e7974e2a","sathya-nujella","2022-04-05 19:01:45","false","alloc: Making heap trace dump more readable

This Patch to help easily understand available heap from the trace dump.

Current dump:
src/lib/alloc.c:567  heap: 0xbe206000 size 12288 blocks 3 caps 0x65
src/lib/alloc.c:569   used 448 free 11840
src/lib/alloc.c:577   block 0 base 0xbe206000 size 64
src/lib/alloc.c:580    count 64 free 57

Dump with this patch:
src/lib/alloc.c:567  INFO  heap: 0xbe206000 size 12288 blocks 3 caps 0x65
src/lib/alloc.c:569  INFO   (In Bytes) used 0 free 12288
src/lib/alloc.c:576  INFO  64 Bytes blocks ID:0 base 0xbe206000
src/lib/alloc.c:580  INFO    Number of Blocks: total 64 used 0 free 64

Signed-off-by: Sathyanarayana Nujella <sathyanarayana.nujella@intel.com>
Signed-off-by: Jairaj Arava <jairaj.arava@intel.com>",110,46,1
"thesofproject/sof","a4af68a8dff593863c767962e9a9f8548e33006a","btian1","2023-07-12 01:37:20","false","copier: refine dai init code

refine dai init code with reduce one more parameter.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",31,61,1
"thesofproject/sof","97414e12a876fa589a0041c1bb8e7c9d9b6888f2","lrgirdwo","2023-03-11 14:34:02","false","fuzzer: remove old fuzzer

The original fuzzer has been deprecated for some time now. Remove it.

All fuzzing now done by OSS-fuzz

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",55,57,1
"thesofproject/sof","94a128d516b70d615178cc3313ba0be83b94c987","kv2019i","2023-02-17 12:55:54","false","CODEOWNERS: add owner for installer/ subfolder

Add Marc Herbert as code owner for installer subfolder.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",55,56,1
"thesofproject/sof","6328ec5000247aff9fc5b493fa59c81659a5e502","kv2019i","2021-06-14 15:26:17","false","zephyr: add tracing of ll-scheduler execution time

Add tracing of ll-scheduler execution time. Use k_cycle_get_32()
timestamps for minimal overhead. A trace is printed with a period size
of 2^10 scheduler executions (roughly once per second in typical
configuration with 1ms timer tick). Average and maximum observed
execution time is printed out for each task.

Additionally k_timer_status_get() is used to observe instances of
overruns. If the timer irq is fired before previous timer thread
invocation completes, overrun of the ll scheduling slice has occurred
and this is recorded. Number of overruns is printed for each measurement
window.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",69,36,0
"thesofproject/sof","1193203717d6f994954f41f74d6f32e00cd39cca","marc-hb","2023-01-18 22:02:20","false",".github/zephyr: align git fetch and describe across Windows and Linux

Fetching different tags causes `git describe` output to be different.

Fixes commit 68b49c186e13 ("".github/zephyr: switch Windows build to west
update --narrow"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",55,55,1
"thesofproject/sof","054003f2926b835d7e7ca2db8e602a7f2f9faeab","ranj063","2023-10-13 16:01:58","false","topology2: host-gateway-playback: Replace audio_format objects

Use input_audio_format/output_audio_format explicitly in preparation for
deprecating the audio_format class.

Fixes: 7a11e27bf2a1 ('topology2: host-gateway-capture: Replace audio_format objects')
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",10,64,1
"thesofproject/sof","cad73944004c7ef08b94c19b5993310a4f7b13df","ranj063","2022-05-06 17:00:34","false","module_adapter: reset input/output buffers when consuming/producing

And avoid looping through the buffers again.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,47,1
"thesofproject/sof","6b420fd53848b7e955555257c4a2cab4645ace8b","ranj063","2021-10-06 17:38:45","false","audio: DAI: Add a delayed_dma_stop flag to DAI data

Add a new field, delayed_dma_stop to struct dai_data that will be set by
the host when the DAI_CONFIG IPC is sent during hw_params.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",121,40,1
"thesofproject/sof","133eecb1323df2a210459cddd366725dcbb3c475","ranj063","2022-12-16 17:21:21","false","module_adapter: Add APIs for coherent module source info access

Add module_source_info_acquire/release() for coherent access to the
module's source_info data.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",91,54,1
"thesofproject/sof","b6485b2fa41a5b66a9702af18f783ad3faa38ab1","abonislawski","2020-06-15 10:52:18","false","arch: shared_vecbase cache fix

This will fix cache handling for shared_vecbase and allow to
boot slave cores in a proper way.

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",74,24,0
"thesofproject/sof","ada8950551bba594c6fc29ef9be4a2b391c21a33","ranj063","2023-04-03 16:10:35","false","topology2: ssp: Add blob version

Add the SSP blob version and set it based on the platform.

Co-developed-by: Jaska Uimonen <jaska.uimonen@intel.com>
Signed-off-by: Jaska Uimonen <jaska.uimonen@intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",52,58,1
"thesofproject/sof","1abfb3448fe128883e94bf14477ea3b739a4e265","ranj063","2022-12-22 21:09:24","false","up_down_mixer: Convert module to use the module interface

Use the module_adapter interface instead of comp_drv ops

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",92,55,1
"thesofproject/sof","c0172307ff924fd8a3d1a72370b5d5cff626035f","ranj063","2018-06-21 04:21:09","false","topology: add new token for SSP MCLK ID

Some platforms might have more than one MCLK's exposed. Add a token
that will allow specifying the MCLK ID to be used in such cases.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",1,1,0
"thesofproject/sof","2b7fdc95def325827f58ee332fdf2a95bdb799e0","abonislawski","2022-05-12 06:44:48","false","dma: add Zephyr native DMA support to host & dai

This patch will add new versions of host and dai components
with Zephyr native DMA support

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",113,47,1
"thesofproject/sof","928dba0853efa4cd0d79aa66b1e9c221b8813a8f","ranj063","2021-06-26 17:14:08","false","pipeline/buffer: alloc them in the runtime shared zone

Make them shared between cores as they can be shared with
other pipelines, trace and possibly even DMA.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",75,37,0
"thesofproject/sof","27d3e14bdf5a095fe609684c3638bf70ab35f85e","ranj063","2018-07-23 22:57:14","false","topology: add comments to sof-apl-nocodec m4 file

This makes it easier to look up the macro definitions.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",13,2,0
"thesofproject/sof","f08c93721d9399e221d93c27fad7e82538be1b19","ranj063","2018-07-25 05:42:34","false","topology: replace PIPELINE_PCM_DAI_ADD with PIPELINE_PCM_ADD

Avoid duplicating dai_add in sof-apl-nocodec topology.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",12,2,0
"thesofproject/sof","fa6b2c6c33249e429f1783f8beec35b2ae8a52cf","abonislawski","2019-02-11 12:01:16","false","Kconfig: make Tone component a config option

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",59,8,0
"thesofproject/sof","bcf46c804d8ca58e26fc891388950e43505db642","ymdatta","2020-02-19 13:14:44","false","audio: eq_iir: Add missing blank line after declaration

This makes code easier to read and fixes checkpatch.pl
warning: ""WARNING: Missing a blank line after
declarations"".

Signed-off-by: Mohana Datta Yelugoti <ymdatta.work@gmail.com>",84,21,0
"thesofproject/sof","40484a87f2e0500eab04f96b5f1536d165c25824","kv2019i","2021-09-15 12:48:14","false","topology1: correct misleading comments for priority/core

Comments for calls to PIPELINE_PCM_ADD and DAI_ADD describe parameters
in the same order they are passed to the macros. The only exception is
order of ""priority"" and ""core"", and this can be very misleading. In
most cases the actual current values for the two parameters are 0,
making it even easier to make a mistake when modifying them.

Fix the order in the comments to match the actual order in which the
parameters should be passed to PIPELINE_PCM_ADD and DAI_ADD.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",118,39,0
"thesofproject/sof","f79a1a0afce7181cd320c6eb218044d00db8fe22","bkokoszx","2019-07-19 13:35:20","false","mux: return PPL_STATUS_PATH_STOP in mux_trigger()

This commit does not change FW behaviour since
both COMP_STATUS_STATE_ALREADY_SET and PPL_STATUS_PATH_STOP
defines are equal to 1. It just makes code more clear.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",51,14,0
"thesofproject/sof","bdde5013e1fa02247dad37fd9387eaa8251b0ba9","bkokoszx","2019-08-06 07:47:37","false","host: add traces with id's

Traces with id's help to read logs,
especially when there are several
pipelines in topology.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",54,14,0
"thesofproject/sof","ab302365218160a992321a4756e8ddf7bf74c935","tlauda","2020-01-21 08:31:45","false","ipc: implement method for forwarding IPC

Implements method for forwarding IPC message processing to
slave cores.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",79,20,0
"thesofproject/sof","4529812967f13634fca6edbec99bd0776329cc59","tlauda","2018-06-04 11:03:43","false","atomic: add atomic_read and atomic_set

This patch adds atomic_read and atomic_set methods.
Also includes xtensa implementation of those methods.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",1,0,0
"thesofproject/sof","5eea994a3a11d5c9cd93227e1a43bae3fa487320","tlauda","2020-01-17 10:26:40","false","component: add comp drivers list to sof context

Adds component drivers list to sof context, so it can be
accessed globally. Also adds global getter.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",79,19,0
"thesofproject/sof","88c66266558c03e3cc631fa9130e6c0846c34d50","tlauda","2019-07-17 09:51:47","false","pipeline: change wrong trace function in pipeline_reset

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",47,14,0
"thesofproject/sof","5e9b702a6b1d3c66dd1a02b693a88900d410c078","tlauda","2019-12-19 15:17:38","false","ll_schedule_domain: add domains to sof context

Adds both timer and DMA scheduling domains to sof main context.
Also implements getters for these domains to easily retrieve them
through one point of access.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",72,19,0
"thesofproject/sof","10464ece03a4029e836d92431c1f2d3e7195662d","tlauda","2019-07-17 09:49:51","false","platform: remove PLATFORM_TIMER_START_OFFSET

Removes PLATFORM_TIMER_START_OFFSET define from
platforms, because it's deprecated and not used
anymore.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",47,14,0
"thesofproject/sof","5300ab42f2412e269f99e740cc038a724e8932dd","ktrzcinx","2019-10-28 14:06:42","false","trace: Add pipeline id to component traces

It will be helpful during debugging components
to see correlated pipeline id.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",68,17,0
"thesofproject/sof","c8b375638c759b19969f8777bece3c1b159d6097","MingJenTai","2022-05-04 02:44:17","false","topology1: mt8195: support Google rtc audio process with RTNR

This commit adds Google RTC Audio Processing with RTNR to MT8195
topology.

Signed-off-by: Ming Jen Tai <mingjen_tai@realtek.com>",116,47,1
"thesofproject/sof","0e4208d85bae706ee52888e9ee7e0edb2f2d800f","keqiaozhang","2022-09-07 01:32:27","false","xtensa-build-zephyr.py: copy mtrace-reader.py to tools folder

we will switch to using this new logging tool, copy it to the tools
folder, then it will be uploaded to CI storage after building.

Signed-off-by: Keqiao Zhang <keqiao.zhang@intel.com>",104,51,1
"thesofproject/sof","035c24fe7dac281398caa0808f3348b280b1cdd9","cujomalainey","2019-03-21 23:12:47","false","kpb: make init function static

Fixes checkpatch error that slipped in

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",66,10,0
"thesofproject/sof","e7cce06f975f906ea7a0547bffa1d8494e3950db","balakishorepati","2022-03-28 16:39:10","false","platform: Add support for amd rembrandt platform

This adds support for platform drivers (dai, dma, clk)
and general platform initialization.

Signed-off-by: Balakishorepati <balaKishore.pati@amd.com>",112,46,1
"thesofproject/sof","28582f65665441fdb6fdc86c4ec2de9c716bd24d","RanderWang","2022-04-22 11:18:34","false","ipc4: refine config setting for chain dma

Fix bugs in playback mode and supports more frequencies.
This patch generates dma setting from dma blob data.

Signed-off-by: Rander Wang <rander.wang@intel.com>",114,47,1
"thesofproject/sof","f2c13f5e6d03e001fbd186a0bb893fd97fe7afac","marc-hb","2021-09-13 22:22:02","false","Revert ""trace: enable trace after it is ready""

This reverts commit 7df367451d0fa638b530c1c92f02d645845dbe53.

This restores the ability to use CONFIG_TRACEM (copy everything to
mailbox) without crashing, in other words it fixes #4699

This also fixes the other DSP panic #4676 and removes the need for
logical changes in #4678, which can be reverted too.

commit 7df367451d0f (""trace: enable trace after it is ready"") was meant
to fix a crash when tr_xxx() was used early. However I've used very
early tracing for months and it never caused any crash (see #4334)

I tried adding a tr_err() statement immediately after trace_init(sof) in
primary_core_init() and it works just fine. primary_core_init() runs
extremely early so I don't think it's too demanding not to use an
tr_XXX() before the trace even exists.

The reverted commits confused initializing and enabling.

Reproduction #4683 did not seem to demonstrate anything obvious,
there's not even a link to a failed test run. I don't understand how
playing with spin locks is relevant to this.

Later, reproduction #4759 finally demonstrated the real issue: through
DEBUG_TRACE_PTR(), some tr_XXX() can indeed be called (in very unusal
debug circumstances specific to the original author) before the trace is
initialized. The previous commit in this series fixes that by simply
guarding it with if(trace_get())

     --------

I am _not_ pretending that these reverts make the tracing code bug-free
and perfect again, absolutely not and very far from it. I'm merely
saying that:

- The first reverted commit caused at least two regressions: #4676 and
  #4699

- These two commits added yet another variable (time) in an already
  complex situation with an already existing combinatorial ""explosion"":
  compile-time Kconfigs, run-time settings, platform-specific bugs
  (#4333, #4573, ...), various races, mbox + DMA, different DMA engines,
  Zephyr vs XTOS, etc.

- Last but not least, we don't want to invest in making the exist trace
  implementation better. We want to switch to the Zephyr implementation
  instead

So let's go back to a previous known good state, I mean _relatively_
good and stay there if we can.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,39,0
"thesofproject/sof","d3381eaa13201fbab9dda3bff30e5272c8950dda","MingJenTai","2021-08-19 02:38:56","false","Integrate RTNR into sof-tgl-max98357a-rt5682.m4

Signed-off-by: Ming Jen Tai <mingjen_tai@realtek.com>",118,39,0
"thesofproject/sof","385586a5f664e73ef851810d92bc1d08eed2b468","lyakh","2021-04-29 15:38:55","false","zephyr: implement IDC using P4WQ

When running on Zephyr we use P4WQ to implement inter-core
messaging.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",81,35,0
"thesofproject/sof","1ccc16c27d31287293794f5e98dc8641f0c629fc","brentlu","2021-04-15 02:10:33","false","topology: sof-glk-da7219: add support for cs42l42

Add support for cs42l42 running on GLK boards. We add a 10 ms BCLK
delay to the SSP_CONFIG_DATA of SSP2 since the codec PLL is locking on
BCLK. Without the delay, there could be noise on TX path.

Signed-off-by: Brent Lu <brent.lu@intel.com>",80,34,0
"thesofproject/sof","c46ed5df30e768059d35190bb859363cbbdb446b","xiulipan","2020-12-04 04:12:52","false","scripts: add tgl-h support

Add tgl-h build support.
It will generate sof-tgl-h.ri

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",71,30,0
"thesofproject/sof","5564a9029a6c54a9ea93b3f8bb80fc1416c1362b","marc-hb","2020-07-10 23:18:55","false","xtensa-build-all.sh: add missing double quotes

Fixes most shellcheck warnings, now down to just 4.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",73,25,0
"thesofproject/sof","8d5382162df8f9aad20f96ca02bef7684276ff9a","jajanusz","2018-08-30 11:01:25","false","test: cmocka: fix pipeline tests, disable alloc tests

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",28,3,0
"thesofproject/sof","5d469b42a7dd722d3682d4503131d4a3ea3542fb","lrgirdwo","2018-08-29 15:42:29","false","Merge remote-tracking branch 'gh/next' into next-master2",24,3,0
"thesofproject/sof","3093cf65872eb30c32a621b87be76b39c820e6ce","slawblauciak","2018-08-24 14:43:44","false","Klockwork fixes

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",21,3,0
"thesofproject/sof","4157d939b75d13aacd1d5c70b37a141890892ef4","ranj063","2018-07-26 18:36:34","false","ipc: set config only if the config dai_index matches comp dai_index

Set config only for the comp who's dai_index matches the dai_index
in the ipc config.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",13,2,0
"thesofproject/sof","fdf39244b7684c4a17707f9bc9ffc92699230cb2","plbossart","2018-07-30 15:48:43","true","Merge pull request #45 from plbossart/fix/pr43

topology: Fix SectionPCM macros",15,2,0
"thesofproject/sof","a4b7b90272bc04e2887c9e971a844926541a6925","plbossart","2018-07-13 17:02:51","true","Merge pull request #99 from tlauda/topic/issue-97

hda-dma: wait for L1 exit instead of buffer full",15,1,0
"thesofproject/sof","1ea2941cdad3c74dab4248a2ccd5291eda8acf35","RanderWang","2018-06-05 05:31:44","false","SSP: refine ssp config function

(1)Remove unused code
(2)Refine comments
(3)Refine master & slave mode setting
(4)Refine Frame polarity setting

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",1,0,0
"thesofproject/sof","3843dc0ee10cb4a92e9bded350341c74c10e4721","mrajwa","2021-03-30 10:48:35","false","codec_adapter: add mrajwa & dbaluta as code owners

This patch adds two more code owners of codec_adapter.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>
Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",79,34,0
"thesofproject/sof","e46579c4c26acd792074c3a7b5d3d69b6e1ed7d9","tlauda","2020-01-13 15:16:25","false","dma-trace: use platform_shared_commit()

Uses new platform_shared_commit() function to commit
shared dma-trace data.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",77,19,0
"thesofproject/sof","418c77e6de98d32151d368ad6584b96960114c4b","tlauda","2020-01-09 08:28:48","false","ipc: use ipc_get() instead of global pointer

Uses ipc_get() to retrieve ipc structure pointer instead
of global pointer. This way we have one point of access
and avoid unnecessary cache accesses.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",74,19,0
"thesofproject/sof","30ac5f2febe2344487a7a6922eb08c294e48135f","tlauda","2019-12-19 15:03:10","false","platform: move core disabling to platform code

Disabling unused cores looks like platform specific
optimization. Let's move it to cAVS platforms specific code.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",72,19,0
"thesofproject/sof","6bb38957cd6d492825358a719c18d20525ae4500","tlauda","2020-01-20 14:12:54","false","ipc: remove unused field from ipc_comp_dev

Removes unused field state from ipc_comp_dev.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",80,20,0
"thesofproject/sof","0f1158dd20b1579e3970f19d3d82fc5402b41160","tlauda","2019-06-12 08:43:18","false","component: remove frame_bytes from comp_dev

Removes frame_bytes field from comp_dev structure.
We don't need it globally, only for dai.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",49,12,0
"thesofproject/sof","4adf78d45888a01c63d95ab07b40870e058f3025","maruthi-machani","2022-12-01 09:58:46","false","platform:amd:support for full sync mode

enabling full sync mode for amd platform.

Signed-off-by: MARUTHI MACHANI <maruthi.machani@amd.com>",101,54,1
"thesofproject/sof","93731c50729beb6af1f0d36f5332da7b06934663","RanderWang","2021-09-03 05:21:32","false","ipc4: mixin & mixout: refine mixer behavior for state change

For ipc3 mixer, pipeline will stop at mixer for trigger
and prepare cases, but it is not fit for ipc4, since there
are more than 1 pipeline in the pcm stream, one for mixer and
following components and another one is for front-end components.

This patch divides prepare & trigger function to two parts: common
shared part and part for mixer.

Signed-off-by: Rander Wang <rander.wang@intel.com>",119,39,0
"thesofproject/sof","a5963cf740340e1f28cfe26bf03956b12e393f90","RanderWang","2018-09-25 03:21:32","false","wait: use correct clock source

ssp clock is used in wait_delay, so ssp clock should be used
in the caller function

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",36,4,0
"thesofproject/sof","195fed7866faf0300ceb613dd1d187593f406044","RanderWang","2023-10-26 12:47:26","false","mailbox: use uncached address to write sw regs

mailbox_sw_regs_write is used by dai to update llp node. In multi-core
test, the updated llp node is invisable to other cores although
dcache_writeback_region is used on both cavs & ace platforms. Now use
uncached address to write memory directly which is aligned with other
mailbox access functions.

Validated on cavs & ace platforms.

Signed-off-by: Rander Wang <rander.wang@intel.com>",7,65,1
"thesofproject/sof","1710e92f96aac544bea1da6ce9a743371df290e7","RanderWang","2022-04-12 08:20:43","false","ipc4: pipeline: stop preparing component in another pipeline

Currently we stop preparing when a component in another
pipeline only for some conditions. In ipc4 passthrough pipeline
host & dai are in different pipelines, these conditions can't
cover it. Actually we should only prepare component in its
parent pipeline, not in other pipeline.

This patch make sure that component is prepared in its own pipeline.

Signed-off-by: Rander Wang <rander.wang@intel.com>",117,46,1
"thesofproject/sof","776977852af006bf3f9bad4cc3ff8156b0c60450","fuyuntsuo","2021-04-09 03:13:53","false","topology: Added IGO_NR in sof-tgl-max98373-rt5682 topology.

This commit added IGO_NR component into sof-tgl-max98373-rt5682.m4
as DMIC capture PCM99 pipeline.

Signed-off-by: fy.tsuo <fy.tsuo@intelli-go.com>",79,34,0
"thesofproject/sof","7b5e5a266d865d9a129da0b2b98f7afb7275c830","pblaszko","2023-04-04 15:36:54","false","platform: ace: register clock using core_kcps_adjust api

core_kcps_adjust is an API to request clock changes indirectly, by
registering KCPS per core. It should be common method for all clock
change requests, to keep KCPS on track.
Currently, in the platform_init, maximum clock is reqeuested. This is a
workaround for missing CPC management. KCPS should be registered together
with clock change.
Even though FW does not request KCPS at any place (feature not ready) so
far, OED driver sends these requests via LargeConfigSet. It is required
to have valid initial value of KCPS in cpu-clk-manager.

Signed-off-by: Przemyslaw Blaszkowski <przemyslaw.blaszkowski@intel.com>",52,58,1
"thesofproject/sof","d1acc3d69e731f30bf721a02b5cc08b44a9ef5a5","softwarecki","2023-01-17 14:34:21","false","ipc4: notification: Code formatting

Fixed indentation in define and line break in comment.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",55,55,1
"thesofproject/sof","5c7e400a409ffd752ceb0e456f61231bea135f6e","jajanusz","2019-01-30 05:43:09","false","rimage: import elf.h

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",56,8,0
"thesofproject/sof","8235d3d61ac179c57824aa58fece11005c34c8b1","jajanusz","2018-07-16 11:24:18","false","configure: fix flags for unit tests

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",12,1,0
"thesofproject/sof","9a3dff54750659c0edbf3147389c6e1cda7154f9","jajanusz","2019-01-15 01:49:50","false","cmake: add CMakeLists for unit tests

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",55,7,0
"thesofproject/sof","7fb9372d29cb6998ea8539b5faff5dbc9cef031b","jajanusz","2019-07-23 06:52:51","false","logger: add missing trace classes

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",47,14,0
"thesofproject/sof","cdbe56565105309e4ac35cc84fdcd263d1167113","jajanusz","2019-01-30 07:10:36","false","cmake: use crossplatform copy

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",57,8,0
"thesofproject/sof","f8f71f59384c76682ad92f06d7cb2d445892895e","jajanusz","2019-02-02 23:04:28","false","cmake: tools: eqctl

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",58,8,0
"thesofproject/sof","d44130e9946349f80b2b7b94809cf8d36960aed2","dbaluta","2020-01-12 15:45:28","false","platform: Add support for i.MX8X

DSP integrations for i.MX8 and i.MX8X are very similar
from the DSP point of view.

The only notable difference at this point is the IRQSTEER
address.

i.MX8 means for now i.MX8QM.
i.MX8X means for now i.MX8QXP.

There might be other variants in the future.

https://www.nxp.com/products/processors-and-microcontrollers/arm-processors/i.mx-applications-processors/i.mx-8-processors:IMX8-SERIES

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",77,19,0
"thesofproject/sof","f4208d562fbf0aad8451e10db8001b11b24dd2aa","dbaluta","2020-05-25 16:29:36","false","drivers: sai: Fix watermark mask size

On i.MX8M watermark can be up to 128 and we must adjust
the T/RFW mask register in order for values greater than 64 to be
correctly set.

Now capture works fine!

Fixes: 29414aa25e56a1 (""platform: imx8m: Fix FIFO depth for i.MX8M"")
Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",97,24,0
"thesofproject/sof","d7957df17e1239967303a3be66a760b08ce9c473","tobonex","2023-09-15 17:44:11","false","chain_dma: remove buffer_acquire from chain_dma

remove buffer ops from chain_dma module

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","9f8cce152240f0ba0a91b6ed00dfecf672bfd680","marc-hb","2020-08-27 05:35:46","false","Disable __TIME__ and the non-reproducible build counter by default

Makes even CONFIG_DEBUG builds (locally) deterministic by
default: (re)building twice produces the same binaries. Also a partial
fix for incremental builds: running ""make"" twice in a row now recompiles
fewer files because version.h does not keep changing.

Also makes sure non-debug builds can't use uninitialized strings in some
future security accident.

Fixes:

 ./scripts/checkpatch.pl -g 'aa85e2c0e956c'

ERROR: Use of the '__DATE__' macro makes the build non-deterministic
+		.date = __DATE__,
ERROR: Use of the '__TIME__' macro makes the build non-deterministic
+		.time = __TIME__,

The previous behavior can be restored using any standard CMake
configuration method, example:

  ./scripts/xtensa-build-all.sh apl
  cmake -B build_apl_gcc/ -DBUILD_COUNTERS=1
  make -C build_apl_gcc

https://reproducible-builds.org/

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,27,0
"thesofproject/sof","d9fb722b648f76cf86b7b4d88be26c513174e661","marc-hb","2023-10-23 22:01:05","false","topology/cmake: move alsatplg_version() one level up

We want to use it in topology1 too.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",8,65,1
"thesofproject/sof","b5219d844ce44398d144ee6313dbc96c514f674d","marc-hb","2021-03-31 19:57:25","false","version.cmake: do not discard stderr from git commands

Never discard stderr.

Also fix my older, misleading comment and add a warning.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",79,34,0
"thesofproject/sof","a01d56f852d0b0fa865b666e5e7acc4baee1e1be","lgirdwood","2018-08-16 12:06:54","true","Merge pull request #55 from RanderWang/cnl_274

topology: add some virtual widgets to topology of cnl",18,2,0
"thesofproject/sof","78f007daa9483b3cadd5ff72d97af8248192f2cd","lgirdwood","2018-08-20 15:21:44","true","Merge pull request #216 from singalsu/eq_iir_fix_ipc_proposal

EQ IIR: Update IPC to ALSA convention, fix channel bypass, and do cleanup",18,3,0
"thesofproject/sof","d710f99de98b57619556db5aca36e367daeba6af","cujomalainey","2018-11-16 23:28:47","false","Update sof-icl-nocodec

Update graph

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",40,5,0
"thesofproject/sof","1ea6d48e3c8b1a7a22a481e44c6ffe3257445201","cujomalainey","2019-03-21 23:10:13","false","dai: make init function static

Fixes checkpatch error that slipped in

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",66,10,0
"thesofproject/sof","7b969480520f987869f521bb3c6c71fc6920b2a7","lgirdwood","2018-06-26 11:15:30","true","Merge pull request #2 from xiulipan/master

rmbox: add missing trace class to sync with firmware",4,1,0
"thesofproject/sof","b553e529ee48f924c19dbd9355c81954bcc7c5dc","iganakov","2022-11-08 16:06:53","false","kd: ipc4 notification support

Add support for IPC4 phrase detected
notification to KD module

Signed-off-by: Ievgen Ganakov <ievgen.ganakov@intel.com>",93,53,1
"thesofproject/sof","55c3eafca81cab35bb4eefd75648f9b7ff4070a9","ktrzcinx","2020-06-22 12:03:21","false","pipeline: Writeback cache after component connection

When connecting components on different cores, then writeback is
needed to keep data synchronized. It is especially important for
components like smart_amp, because of copy source buffer address
to private data set, so without writeback this value may be
incorrect in prepare function.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",73,25,0
"thesofproject/sof","efc6f2312ce5faf9b6e4e8c95a193a29a5c7b175","ktrzcinx","2020-10-12 12:13:48","false","trace: Compare pointer with NULL before use

Possible null pointer dereference was possible here.
There is no need to log error message here, it's done
from trace_filter_ipc_comp_context() and ipc_trace_filter_update().

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",67,28,0
"thesofproject/sof","96053de42a4b349d84beaebefa320165ed0ef820","abonislawski","2019-03-07 08:58:31","false","kconfig: replacing ""#if defined"" with ""#if"" for CONFIG_*

to avoid situation when CONFIG_ is set to 0/false and #ifdef still work

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",67,9,0
"thesofproject/sof","d294036fd5c6316460aeae8bf018fff8e81677a4","ranj063","2023-10-17 16:11:05","false","topology2: google-rtc-aec: adjust the IBS/OBS size based on process needs

Example: if a module has 2 input pins, one 16000/16/2, second 48000/16/2 and
one output pin 48000/32/4 and is designed to process 10ms data chunks:

in pin1 IBS should be 16(samples/1ms) * 2 bytes * 2 * 10(ms) = 640
in pin2 IBS should be 48(samples/1ms) * 2 bytes * 2 * 10(ms) = 1920
out pin1 OBS should be 48(samples/1ms) * 4 bytes * 4 * 10(ms) = 7680

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Yong Zhi <yong.zhi@intel.com>",10,64,1
"thesofproject/sof","b51cb9113a800c9799cb19f64b76ab991ff8c423","plbossart","2020-06-27 19:12:51","false","topology: remove cht-src-50kHz-pcm512x

No one uses this topology so let's remove it.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",70,25,0
"thesofproject/sof","ada30c15b5d365d621125c4b4419a8ae7fb6342f","ktrzcinx","2021-08-31 16:13:53","false","config: Explicit state return value for error cases in parse_uint32_* functions

Developer should know what is ther return value for error cases.
Improved doxydoc may be used eg. by IDE to speed-up code development.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",118,39,0
"thesofproject/sof","bcd9628f5e3925a6630ed30da0e07d825d5a2c10","ktrzcinx","2020-05-20 09:46:35","false","ext_manifest: byt: fix .fw_metadata section alignment

Section of this section should be aligned to EXT_MAN_ALIGN,
proper way of doing this with ALIGN() function inside linker
script didn't work, because of removing READONLY attribute
for this segment, what leads to error in rimage.
This solution introduce changes only for platforms, where problem
exists, so generic tools like rimage are kept clean of such a hacks.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",98,23,0
"thesofproject/sof","a213fb94a1c16cc189e3703a4405bdb7819ff031","ktrzcinx","2019-10-28 10:11:30","false","trace: Resolve unused variable warning

During compilation as library there was unused id_0
and id_1 in _log_message preprocessor function.
Solved by casting parameters to void type.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",67,17,0
"thesofproject/sof","3169dbd40da9d1e06f8f78cd6c653aebe846222d","ktrzcinx","2020-09-17 10:05:02","false","toml: Add adsp_file_ext attributes parsing

This field left without possibility to set value from
config file.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",66,28,0
"thesofproject/sof","206df545c47b14f49186d748a6513bd188a20072","nashif","2020-12-18 17:09:35","false","trace: do not set trace_ctx section for Zephyr [REVERTME]

This section is generating warnings when build with Zephyr, so remove
for now.

Signed-off-by: Anas Nashif <anas.nashif@intel.com>",72,31,0
"thesofproject/sof","41f9387630832e276e6317451519a172c7b558af","abonislawski","2020-05-26 09:55:05","false","jsl: add lps vector to linker script

This will specify memory region for section .lps_vector

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",97,24,0
"thesofproject/sof","592ffdd5678c68ab656b2c2d088540b95271bfac","abonislawski","2019-03-28 12:06:36","false","coredump-reader: add README

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",54,10,0
"thesofproject/sof","a953d95878e21b5399e1848c128a0fd779d2945f","DianaGabriela27","2019-03-06 10:52:50","false","rimage: Fix code alignment and indentation issues

This was reported by checkpatch.pl and makes code
easier to read.

Signed-off-by: Diana Ungureanu <diana-gabriela.ungureanu@nxp.com>",66,9,0
"thesofproject/sof","1e47b4af4ad895ccc73bc786762612ffd709d49e","lbetlej","2018-11-09 14:59:26","false","Added SRAM power gating on D3 entry for cAVS 1.8 (i.e. Cannonlake).

On D3 entry FW needs to power gate both LP & HP SRAM banks. The power
gating is done from code executed from L1 cache.

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",39,5,0
"thesofproject/sof","c7ff4c1b191420864581a7db2e12f844dd40098c","plbossart","2018-06-18 19:27:30","false","ssp: rename clk_id as mclk_id, remove dead code

clk_id was never used so remove all the related code.
However since we need an identifier for the mclk
reclaim it with a name change.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",1,1,0
"thesofproject/sof","9b5ef7703c53a69b4ec22dc47b1b7d7637153a84","keyonjie","2021-02-04 03:15:22","false","ll_schedule: refine the _domain_set/clear() logic

Refine and simplify the domain_set/clear() part:

1. Use UINT64_MAX to denote that the domain is not set.

2. For _domain_set(), set only when needed. e.g. the first task over all
cores being added, or a task asking for earlier timer being added.

The _domain_set() logic is refined as below:
a. For first task, set domain according to the required start, else
b. for one shot task, set domain if it is earlier, else
c. for earlier periodic task, try to make it cadence-aligned with the
existed task, else
d. for later periodic task, simply cover it by the coming interrupt.

3. For _domain_clear() logic, simplify to call it when the last client is
freed.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",70,32,0
"thesofproject/sof","a56c4bc956cf9b1003f37633fb1f5130bcee2b9f","ujfalusi","2021-10-28 14:00:57","false","lib: wait: Fix poll_for_register_delay() if delay is less than 8 ticks

The parameter for wait_delay() is in ticks, not in usec.
If the calculated delta (in ticks) is 0 then we should set the delta to
1 and the tries to the number of ticks the requested.

Using the usec as delta is wrong.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",127,41,1
"thesofproject/sof","179698097935e1faf443ca4b1cb175ba27fc182f","lyakh","2018-11-28 10:46:36","false","bootloader: change the start address to match the linker script

The linker script on platforms, using the boot-loader places the .text
section at SOF_TEXT_BASE, not at SOF_TEXT_START, the same name should be
used for the start address in assembly even though so far on all
platforms both names refer to the same location.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",41,6,0
"thesofproject/sof","baf061d5d83db50c37b30b9875027b13a0c67971","lyakh","2020-11-19 09:36:42","false","debug: move arch_get_stack_*() functions to a separate header

arch_get_stack_*() functions are only used in panic.c. Move them to
a separate header to reduce dependencies.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",74,30,0
"thesofproject/sof","77a08b6861d65176f2f7ab7d62054f3acb61dfe2","lyakh","2022-01-20 07:34:49","false","ipc4: simplify logic in ipc4_trigger_chain_dma()

Instead of checking cdma->header.r.enable multiple times, handle the
!cdma->header.r.enable case first and simplify other conditionals
after that. Also fixes a possibly uninitialised variable.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",113,44,1
"thesofproject/sof","a439ea93f64fe9e948ec9f5401057c7b0bf0bde6","lyakh","2021-06-22 15:14:39","false","zephyr: ll-schedule: switch over to a simplified implementation

Switch SOF under Zephyr to use a simplified native low-latency
scheduler implementation.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",74,37,0
"thesofproject/sof","ad7a4b2d7b1b9c57728df2c30a68362452e8226b","balakishorepati","2021-05-23 14:08:55","false","drivers: amd: renoir: Add drivers for amd/renoir

Add drivers for:
	* timer, ipc, interrupt - amd specific implementation
	* DMA, for copying data between HOST and DSP
	* BT DAI, for Audio interface
	* BT I2S DMA, Controller

Signed-off-by: Basavaraj Hiregoudar <basavaraj.hiregoudar@amd.com>
Signed-off-by: Anup Kulkarni <anup.kulkarni@amd.com>
Signed-off-by: balapati <balakishore.pati@amd.com>",84,36,0
"thesofproject/sof","8cf0bea7a35c74191bb5fc51014902c8cf533acf","balakishorepati","2022-07-18 09:17:51","false","drivers: amd: Bug fixes and optimizations

1. Fix avail and free bytes for BT and SP modes.
2. Code cleanup and code optimizations.

Signed-off-by: Balakishorepati <balaKishore.pati@amd.com>",112,50,1
"thesofproject/sof","9b376d7bd4d879998cbbe2144a4fabe74e2ec253","lgirdwood","2018-11-08 14:57:49","true","Merge pull request #548 from bkokoszx/revert-host-traces

host: trace: revert host traces to fprintf",41,5,0
"thesofproject/sof","4d5e072835785d8ff29c2c9e59b295f185112ed5","lgirdwood","2018-07-30 10:57:14","true","Merge pull request #169 from xiulipan/llifix

dw-dma: save lli_current on dma stop",15,2,0
"thesofproject/sof","996335743d17e7fbd764a64b052d6565f582241b","lgirdwood","2018-09-28 10:54:35","true","Merge pull request #434 from singalsu/eq_fir_cleanup_init_cache_proposal

EQ FIR: Updates for component initialization and cache functions",37,4,0
"thesofproject/sof","138fa449f757353d7475e69e707a1a681bbf63c4","ranj063","2023-05-02 18:02:29","false","dai-zephyr/dai-legacy: Split up dai_reset()

And add a helper function, dai_zephyr_reset() that can also be used by
the copier device in the next patch.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,59,1
"thesofproject/sof","6aa96e231b36dc361ecf5b78d2cf7a091d0da664","ranj063","2022-01-06 18:30:06","false","codec_adapter: remove unnecessary goto's

Remove the goto's and return the appropriate values to simplify the
codec_adapter_set_params() function.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,43,1
"thesofproject/sof","9d9ba739b3d9745aef0953a092bd255f2e9a59c6","ranj063","2022-06-15 22:18:18","false","eq_iir: Use the new module interface

Use the module interface instead of the comp drv interface for the
EQ IIR component.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",120,48,1
"thesofproject/sof","2ce0e3ccd3c0d908c4cf8083d6ab1fe293b79f66","ranj063","2021-10-06 22:10:39","false","lib: dma: Add a new field to struct dma_chan_data

Add a pointer to save the device-specific data for the client device that
requests the DMA channel in struct dma_chan_data.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",121,40,1
"thesofproject/sof","6e3b9ea6e4e260e8d9bf42ea321c4724fe8529e7","RDharageswari","2020-09-10 23:38:17","false","topology: Modify init params for the Smart_amp Config

This patch modifies the feedback channels and channel map
of the smart_amp configuration based on the number of feedback
channels from the codec.

Signed-off-by: Dharageswari R <dharageswari.r@intel.com>",65,27,0
"thesofproject/sof","d7b535e2825be4f971568f0cfa279563f0064007","ktrzcinx","2020-05-04 14:09:36","false","logger: Add option to set timestamp precision

Shorten timestamp makes logger output more compact, it change:
$ ./sof-logger -l sof-cnl.ldc -i dma_trace_1.bin
         TIMESTAMP              DELTA C# COMPONENT          LOCATION                      CONTENT
[   497588.489583] (   497588.500000) c0 DMA                .../intel/cavs/hda-dma.c:407  hda-dmac: 4 channel 6 -> get
to:
$ sof-logger -l sof-cnl.ldc -i dma_trace_1.bin -f0
   TIMESTAMP        DELTA C# COMPONENT          LOCATION                      CONTENT
[    497588] (    497588) c0 DMA                .../intel/cavs/hda-dma.c:407  hda-dmac: 4 channel 6 -> get

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",94,23,0
"thesofproject/sof","e4f25015ec97102e3e54c22d72715a83af051f57","mrajwa","2020-02-23 20:56:54","false","memory: increase heap buffer size for TGL platform

This patch increases HEAP_BUFFER_SIZE so more advanced pipelines
can be allocated. Also HEAP_BUFFER_BLOCK_SIZE has been decreased
to allocate buffers with better granuality

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",80,21,0
"thesofproject/sof","6f1a7774c8d578ba80266c373d3ff0f99de59dfa","mrajwa","2019-04-20 16:28:46","false","edf_scheduler: add idle tasks list

Init idle task list and put idle task on it.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",47,11,0
"thesofproject/sof","8a4ec5643f4921c4415e110049cae865745154cd","bkokoszx","2019-08-12 09:28:37","false","topology: add sof_ipc_comp_smart_amp struct

Add SOF_COMP_SMART_AMP type for smart amp component.
Basic topology using smart amplifier component
could be as follows:

                +------------------------------------------+
    +------+    | +---+  +-------------+  +---+  +-------+ |
    | Host |----->|Buf|->|  Smart Amp  |->|Buf|->|SSP Dai|-----------+
    +------+    | +---+  +-------------+  +---+  +-------+ |         |
                +-----------------^------------------------+         |
                                  |                                  |
                                +---+                                |
                                |Buf|                                |
                                +---+                                |
                                  ^                                  |
                +-----------------|--------------------------+       |
    +------+    | +---+  +--------|------+  +---+  +-------+ |       |
    | Host |<-----|Buf|<-|     Demux     |<-|Buf|<-|SSP Dai|<--------+
    +------+    | +---+  +---------------+  +---+  +-------+ |
                +--------------------------------------------+

Basic topology contains Smart Amp component in playback pipeline and Demux
component in capture pipeline. There is a additional buffer (feedback)
between them in order to process ""feedback"".

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",54,14,0
"thesofproject/sof","aa91bedf38695e456b591727140b09a714c3cd6d","dbaluta","2023-05-17 11:26:31","false","CODEOWNERS: Add NXP people as owners for scheduler

With the work done for zephyr DMA domain we got a lot of insights
about how scheduler works.

So add myself and Laurentiu as codeowners.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",51,59,1
"thesofproject/sof","8c722f0bf39c85d6bea32583c728d21bb3d13577","dbaluta","2021-05-11 10:44:39","false","audio: Fix codec adapter submenu display

Without this patch codec adapter submenu is displayed after IGO NR
component resulting in something like this:

[*] Codec adapter
[*] IGO NR components
  Codec adapter codecs

After this patch is applied the display will be as expected:

[*] Codec adapter
  Codec adapter codecs
[*] IGO NR components

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",83,35,0
"thesofproject/sof","85fd815f86c577877bf0385a3e0e438a177e2ea1","dbaluta","2021-01-06 11:34:36","false","tools: Add cmake toolchain file for cross compilation on arm64

We need this to cross-compile sof-logger for arm64.

Steps:
	* download and install cross-compiler
	* (e.g on Ubuntu: sudo apt-get install gcc-aarch64-linux-gnu)
	* mkdir tools/build/
	* cd tools/build/
	* cmake .. -DCMAKE_TOOLCHAIN_FILE=../scripts//cross-arch64.cmake
	* make sof-logger

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",73,31,0
"thesofproject/sof","5f92e7645e09331676c16ed19701b3a3f2820045","lyakh","2022-10-20 16:29:18","false","volume: use base configuration from the common location

Instead of saving a local copy of the base configuration, use the
common one.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",96,53,1
"thesofproject/sof","770e81c6cc21d270cd4caa1f64b03a26f55a165e","lyakh","2022-09-28 13:21:51","false","pipeline: (cosmetic) simplify pipeline_comp_reset()

Use switch-case instead of if-else, add a local variable for a
repeating pointer dereference and remove a resundant local variable.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",97,52,1
"thesofproject/sof","c14a01e26d162be9cd0f8e77aeaa8149c7b08dc5","marc-hb","2021-06-30 06:41:30","false","suecreek_gcc_defconfig: CONFIG_TRACE=n

This has been finding several pre-processing bugs already. Short of
randconfig some variety is the best we have.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",86,37,0
"thesofproject/sof","448bbc61a7cfdb40a61b1339e9e1b64271696e53","marc-hb","2021-05-07 05:10:15","false","logger: print INFO and DEBUG prefixes, not just ERROR and WARN

It's not long and more consistent.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",80,35,0
"thesofproject/sof","0c66aa912226c4e7b9151e50a5e3a9b6abc29117","marc-hb","2021-10-04 18:27:30","false","css.c: add __func__  to ""completing manifest"" log

This is useful to show which one of the 3 duplicated functions runs.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",122,40,1
"thesofproject/sof","f7f9d5f42e5896fb0884a5d093de05298f2d5262","marc-hb","2020-09-11 00:10:47","false","tools: support standard CMAKE_BUILD_TYPE and default to Debug

To produce the exact same binaries than before this commit:

  CMAKE_BUILD_TYPE='  ' ./scripts/build-tools.sh

To observe which CFLAGS are being used:

   CMAKE_BUILD_TYPE=Release VERBOSE=1 ./scripts/build-tools.sh

Off topic: the logger fails to build with: -O3 -DNDEBUG -Wall -Werror
(all other tools build fine with these flags)

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",65,27,0
"thesofproject/sof","e6f72dee82890087b85a1424a76d909f9e65c528","marc-hb","2022-12-15 02:35:04","false","zephyr/docker-build.sh: upgrade CMake to 3.21 or above

CMake 3.21 changed the order object files are passed the linker. This
breaks build reproducibility.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",95,54,1
"thesofproject/sof","a62fc4b9af433b3d7eee2b30f6ba7d3de3fb78f1","marc-hb","2022-03-10 23:39:13","false","xtensa-build-zephyr.py: restore ability to override CI

This has been useful to test Zephyr work in progress.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",112,45,1
"thesofproject/sof","23a53ac8b641ca78679e81ae1bcbff6df37f9ed6","cujomalainey","2022-01-12 01:17:48","false","cse: fix signed integer overflow

literals are signed by default, so shifting them 32 times is an
overflow, found via cppcheck

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",114,43,1
"thesofproject/sof","a0acad341455b08b1a4cc408dcb76c022f722fa3","cujomalainey","2021-09-08 21:54:20","false","CMake: require version 3.13

Without CMP0079 we cannot conditionally include libraries against SOF in
sub directories without seriously restructuring the project. This is
because the old policy requires the link target must be created in the
same folder. This does not work well from a configuration standpoint for
3P audio libraries trying to keep their config in src/audio/*. Rather
than enable the policy, lets simply upgrade since 3.13 is widely
available.

With this upgrade we can also remove the two version dependent checks at
the top of our scripts.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",118,39,0
"thesofproject/sof","e6967498c1ae7d9ab3153e06662d97081c0a3ff2","mrajwa","2019-04-19 09:04:29","false","CMOCKA-KPB: connect sink and source to KPB device

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,10,0
"thesofproject/sof","785b747a806fe1c3c875e6a12b32ddd85228d046","mrajwa","2021-09-21 18:29:11","false","submodule: update rimage to its main branch

This updates SoF rimage submodule to the current TOP
of main branch. Namely from 246ea64 to 8960097, delta change log:

8960097 (HEAD -> main, upstream/main) Revert ""ext_manifest: Fix incorrect signature""
0d7f2d4 Do not exit(0) on invalid options or parameters
6e22944 README.md: explain how to run SOF tests on new rimage code
a9faf85 remove '-x' option
241af31 ext_manifest: Fix incorrect signature
4823e87 pkcs: quote the name of key file when logging it
dcfcef8 config: Remove unused, platform specific, memory region definitions
fc4d7b8 rimage: Fix error message content after adsp malloc fail
3e20076 config: Return error value in parse_uint32_* functions when key is not found
ada30c1 config: Explicit state return value for error cases in parse_uint32_* functions
de9177b config: Adjust return type with function name
c4a7456 config: Remove machine_id field
916fc2c config: Remove unused adsp structs
9bf46d3 rimage: Add support for mt8195
aea1969 adsp_config: fix potential overflow in strtol()
9716e10 (origin/master, origin/main) config: Add imx8ulp.toml
b28b993 fixing incorrect data offset in ri_manifest_sign_v1_5
d1553e9 config: add rn toml file to support renoir build
246ea64 config: skl: change image_size to the real SRAM size

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",117,40,0
"thesofproject/sof","6af5984cb90060a03fa69c5b45c3deaf316bb6f5","lgirdwood","2018-09-03 13:37:46","true","Merge pull request #302 from tlauda/topic/ssp_wait_stop

ssp: cavs: make sure that SSP FIFO is empty",30,3,0
"thesofproject/sof","780dd79659a41f35f7888615a05ad83ae47eca33","bkokoszx","2018-08-02 09:27:27","false","uapi: ipc: Add clks_control field to ssp_struct

I've added clks_control field in sof_ipc_dai_ssp_params
struct. I've deleted mclk/bclk/fs_keep_active field. They
will be supported by clks_control field and defined macros.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",13,2,0
"thesofproject/sof","5562fa3d48c8b0b2c550dda5062e96dd53ed0789","bkokoszx","2018-08-13 08:59:08","false","drivers: apl-ssp: handle tdm mode in ssp

I've added tdm support in ssp. Tdm mode has
padding at the end of each slot. Tdm mode is
enabled by tdm_per_slot_padding flag in
sof_ipc_dai_ssp_params struct.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",19,2,0
"thesofproject/sof","26e08d4d559f6789b74ec67aa8121ce1c7bd0895","kv2019i","2021-12-07 12:43:04","false","xtensa-build-zephyr: use separate Zephyr config for TGPH builds

Zephyr recently added support for separate configs for 2-core and 4-core
variants of cAVS2.5. Use the new ""tgph"" configuration for when building
SOF for TigerLake-H variant.

BugLink: https://github.com/thesofproject/sof/issues/5018
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",124,42,1
"thesofproject/sof","c3a6e4d68119c2505c7a78f93ee0a66bcc33873f","ranj063","2022-10-21 03:02:03","false","topology2: cavs-mixin-mixout-hda: Don't use mixin/mixout for capture

Just use passthrough instead.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",97,53,1
"thesofproject/sof","c172b0d6ce1810cf72f16d5ec9c600f6a208d9e4","ranj063","2018-07-21 05:12:34","false","ipc: fix ipc reply for CTX_RESTORE

fix ipc reply in the ipc handler placeholder for CTX_RESTORE
to prevent expected reply size mismatch error.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",13,2,0
"thesofproject/sof","a1776860b677d3360cf03787d68aeaed3e27c632","ranj063","2023-07-07 01:12:11","false","audio: asrc: Fix a typo

Fix the function name in the comment.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",31,61,1
"thesofproject/sof","b0b5958875bb8e21f0317c88c94a725e1d15b09a","ranj063","2023-10-13 15:27:43","false","topology2: sdw-amp/dmic-generic: Remove incorrect audio format

Setting the in bit depth for the second audio format in the
host-gateway-capture object results in resetting the channel count to 2.
The in_bit_depth is set to 32-bit by default for all audio formats in
host-gateway-capture class already.

Fixes: 7a11e27bf2a1 ('topology2: host-gateway-capture: Replace audio_format objects')
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",10,64,1
"thesofproject/sof","2187702ee24325caf691db91bc6ddbaa0febbeff","ranj063","2018-07-19 05:42:26","false","topology: add dmic pipeline to apl nocodec topology

Add DMIC capture pipeline for DMIC01 to the apl nocodec topology.
DMIC16k to be added later.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",12,2,0
"thesofproject/sof","2185d4a04b15487d0a25c8ba749c7b43aa8cc075","ranj063","2023-05-10 19:33:16","false","audio: buffer: Realloc buffer with alignment

When the DMA buffer is reallocated pass the alignment argument to honor
the buffer address alignment that was used originally. Update the
buffer_set_size() to pass the requested alignment and all its users.
This is particularly needed in the case of host and DAI DMA buffers that
query the buffer address alignment from the DMA driver while allocating
the DMA buffers.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,59,1
"thesofproject/sof","c2408be66fc6d60382b8f3922cf9805ae337eb68","ranj063","2022-10-26 01:24:51","false","mixin_mixout: generate 0s when mixout pipeline starts first

IPC4 requires that the sink pipeline be started first before the source
pipeline starts. So, generate silence if there are no source frames
available.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",94,53,1
"thesofproject/sof","d8690a482fe6a5439e1d8f7a63ff21b91bffabdb","abonislawski","2019-06-11 13:35:25","false","platform: fix compile error if PLATFORM_CORE_COUNT is 1

Structs sys_rt_x_blockXXX should not be created if not used

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",49,12,0
"thesofproject/sof","493e9c32a8c82a7065a69adb2b47b7d536eaf3a2","abonislawski","2021-09-21 06:56:17","false","schedule: add possibility to restore all schedulers

EDF scheduler restores interrupt

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",118,40,0
"thesofproject/sof","b371f93c51910752be4d0e513c15ae369707f07e","ranj063","2021-05-12 18:27:14","false","topology: hda: re-enable dynamic pipelines

Re-enable dynamic pipelines for HDA topologies.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",85,35,0
"thesofproject/sof","901d3947b85900db3a7557404b456686778c52c5","balakishorepati","2022-03-10 16:53:08","false","Revert ""drivers: amd: renoir: Fix 16K sample rate for dmic""

This reverts commit 82886c6b41232025562ef3e268b5726cf9d2d503.

Signed-off-by: Balakishorepati <balaKishore.pati@amd.com>",113,45,1
"thesofproject/sof","d25b64950e3b1acf5de9c5217771be5ef8b56328","kfrydryx","2022-07-26 06:42:28","false","ipc4: set pipeline components dir based on source component

Prefer to use source components direction, rather than dai direction when
setting pipeline components direction. Accept first direction set in
pipeline. This properly handles
host_copier -> module -> host_copier pipelines.

Signed-off-by: Krzysztof Frydryk <krzysztofx.frydryk@intel.com>",112,50,1
"thesofproject/sof","742ee80785d29bf4159a07abe66d9720b746cf88","RanderWang","2019-10-08 07:10:01","false","host: refine stream position update for FW version before 3.11

FW sends stream position message to kernel for its version before
3.11. In kernel, no_stream_position will be set to 1 for FW version
after 3.10, and host_period_bytes will be set to 0 for other versions.
So in host_update_position, the condition is always true for hd->report_pos
>= dev->params.host_period_bytes for FW version before 3.11

Now check the condition dev->params.host_period_bytes != 0 according to
commit:b39b17ddf3e

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",63,16,0
"thesofproject/sof","715233aac9be27a04c400cca6334b9cc07a2aa01","RanderWang","2022-06-13 06:54:40","false","topology2: add pipeline for src

This pipeline supports conversion from 8k ~ 192k to 48k.

Signed-off-by: Rander Wang <rander.wang@intel.com>",118,48,1
"thesofproject/sof","a43193bb3fc392e814b0dcb589efb6daf9eedbaf","kuanhsuncheng","2021-09-09 11:22:10","false","Kconfig: add mt8195 to Kconfig

add mt8195 to Kconfig
add mediatek config for mtk platform

Signed-off-by: YC Hung <yc.hung@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",118,39,0
"thesofproject/sof","81d92edacb39ac19457246871f2a5c0c945d9434","xiulipan","2020-01-11 06:04:28","false","tools: remove kmod scripts from sof

kmod scripts is now integrated to sof-test repo.
https://github.com/thesofproject/sof-test/tree/master/tools/kmod/

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",76,19,0
"thesofproject/sof","6fd219cda38fb9eeed2021ff4131b3d98ab2cca9","xiulipan","2018-06-19 10:02:45","false","configure: add OBJCOPY and OBJDUMP log

Output OBJCOPY and OBJDUMP to check if we misuse them.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",1,1,0
"thesofproject/sof","3500d0efef4d19ecddb4d4dfaab25a9c63438114","hongshui3000","2021-04-24 04:07:27","false","include:fix zephyr conflicting types and function

The atomic code is implemented in zephyr. When sof is used as
a zephyr module, there is no need to reimplement atomic.
The modification here is to solve the problem of repeated
definition of atomic related content.

Signed-off-by: Yang XiaoHua <yangxiaohuamail@gmail.com>",88,35,0
"thesofproject/sof","343b6d863da53ad29deb47b4fbb3f3cc51a289c2","lyakh","2023-03-10 15:08:11","false","Revert ""config:tgl/tglh: Do not set cached/uncached address aliases""

Now that rimage can distinguish between Zephyr and XTOS builds, we
can use memory alias specifiers with both.

This reverts commit 1e0a85b44a19db37f9dd18906091d87abd8bd5e6.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,57,1
"thesofproject/sof","b1c514d6cdb0f31fb4951150b12a5633c4233529","lyakh","2022-09-07 16:12:49","false","mixin-mixout: use the _thread coherent API version consistently

Threaded and unthreaded versions of the coherent API must not be
mixed. Use the threaded version consistently.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",106,51,1
"thesofproject/sof","17b539f1c8c8e731f43d6383b78acc051f0af537","fkwasowi","2023-03-27 10:23:47","false","set_attenuation: adding checker based on config data

Adding attenuation checking based on the frame_fmt
from the config of the module instead of calling
sink->stream.frame_fmt, because sending IPC_SET_ATTENUATION
before calling module_prepare results in an error,
because at this stage the sink values are not yet set
(sink->stream.frame_fmt is zero)

Signed-off-by: Kwasowiec, Fabiola <fabiola.kwasowiec@intel.com>",57,58,1
"thesofproject/sof","5fc21b6fb7e90c8433e73d931c246cc1161d22e2","yongzhi1","2021-04-13 11:12:40","false","topology: intel: add generic Bluetooth audio offload pipeline

Make BT offload m4 generic for platforms that supports it.
User needs to provide id number for pipe/link/pcm and hw config.

I2S config for BT SCO:
16 bit samples, 1 slot TDM, no padding
19.2Mhz MCLK, 256/128kHz BCLK, 16/8kHz fsync
Frame-sync length 1 cycle (""DSP_A"" mode)
Codec clk in primary mode

For BT A2DP:
16 bit samples, DSP_A protocol
2 slot TDM, no padding
38.4Mhz MCLK, 1.536Mhz BCLK, 48kHz fsync
Codec clk in secondary mode

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>
Signed-off-by: Jaska Uimonen <jaska.uimonen@linux.intel.com>
Signed-off-by: Yong Zhi <yong.zhi@intel.com>",81,34,0
"thesofproject/sof","5aa15456862c0830250cffbb27dd9bf77c422d4c","ajye-huang","2023-01-10 14:55:48","false","topology: sof-adl-rt1019-rt5682: add bluetooth offload uses SSP2 link

Adding support for Bluetooth offload.

sof-adl-rt1019-rt5682, and sof-adl-rt1019-rt5682-waves:
    rt5682 headphone connects SSP0 link.
    rt1019 Amp speakers connects SSP1 link.
    bluetooth offload uses SSP2 link.
Signed-off-by: Ajye Huang <ajye_huang@compal.corp-partner.google.com>",53,55,1
"thesofproject/sof","0e37018786624d021df462335202f7a18bceeef6","macchian","2023-11-01 02:19:27","false","topology2: sof-mtl-rt713-rt1316: fix HDMI_IDs due to dai id mismatch

In non sdw-dmic case, dai incremental id without it, so correct
HDMI1/2/3_ID sequence from default 5,6,7 to 4,5,6.

Signed-off-by: Mac Chiang <mac.chiang@intel.com>",4,65,1
"thesofproject/sof","e283718d1d4d2ebca905d9c8a96c41d3060223ad","btian1","2023-05-18 13:55:24","false","copier-host: move out host parameter related code from copier

Host parameter related function move out from copier to copier
host.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",50,59,1
"thesofproject/sof","a76d74534a68db71c64180355ef725ef6bbb33ae","ktrzcinx","2020-09-30 08:28:24","false","logger: Disable ldc compatibility check for ldc dump operation

LDC with FW compatibility check has no sens for ldc dump operation,
because ldc dump reads only information provided in ldc file,
without engaging any information from FW - can be done offline as well.
Logger and ldc file DBG_ABI compatibility check is still active.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",66,28,0
"thesofproject/sof","cc00c57057b56840fa1c2ccdc5ca4a97bb5217e5","marc-hb","2023-01-20 00:42:34","false","xtensa-build-zephyr.py: require zephyr.strip

Make CONFIG_BUILD_OUTPUT_STRIPPED mandatory so we can always compare
builds. It makes practically zero build space and time difference and
has huge reproductibility value, see discussion in
https://github.com/zephyrproject-rtos/zephyr/pull/51954

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",55,56,1
"thesofproject/sof","32d32b59cb48350f8b159fd63f9f1f74741a7a0e","marc-hb","2020-08-28 18:23:45","false",".travis.yml: switch to newer rebuild-testbench.sh

Also stop hiding errors in topologies build.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,27,0
"thesofproject/sof","425a200113ef6b5629f5a303163b7c6c9a01a578","marc-hb","2022-01-25 20:26:44","false","zephyr: replace obsolete README section with link to sof-docs

Replaced with
https://thesofproject.github.io/latest/getting_started/build-guide/build-with-zephyr.html

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",104,44,1
"thesofproject/sof","d34fe6f1d43675ee5cf199e2cfe5d7a197d85711","lyakh","2023-01-25 13:18:13","false","up-down-mixer: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register up-down-mixer with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","bc7eca2bd0daec266fc3974b1bd00f9b779d7b33","lyakh","2023-01-25 13:11:27","false","google-rtc: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register google-rtc with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","e1ca6f62521affa968a7decf84a315ba9896d994","lyakh","2022-02-25 09:06:39","false","dw-dma: allocate uncached memory for LLI always

Multi-core configurations already use uncached memory for LLI. This
also makes sense to avoid having to manually synchronise cache. Force
LLI objects uncached.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",111,45,1
"thesofproject/sof","760f5ddea21a23237888e832337c641709d796c6","kv2019i","2022-03-01 17:43:03","false","zephyr: fix race in secondary core power-up

z_wrapper_cpu_enable_secondary_core() may be called
repeatedly on a core that is already running. Add a check
to ensure we do not try to restart a core that is already
running.

Also add a check for ready_flag as done in upstream Zephyr
kernel/smp.c to ensure z_wrapper_cpu_enable_secondary_core()
does not return until the target core has finished its
startup and arch_cpu_active() returns true.

BugLink: https://github.com/thesofproject/sof/issues/5446
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",111,45,1
"thesofproject/sof","1a89f40b8035ea0748a9ec182c4de858bc578521","bkokoszx","2019-03-28 12:46:41","false","driver: ssp: using CONFIG_CAVS define in ssp.h

Refactor by replacing specific CONFIG_{cavs_platform}
defines by CONFIG_CAVS define.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",54,10,0
"thesofproject/sof","7346243e596cd91ff4342308e680392600496b3a","lgirdwood","2018-08-28 11:56:48","true","Merge pull request #269 from singalsu/src_prefill_proposal

SRC: Prevent downstream pipeline xruns with sink buffer pre-fill",21,3,0
"thesofproject/sof","8c20df92fa4d003ee38d1f5edcf56c594e9eaa19","lgirdwood","2018-11-22 11:29:28","true","Merge pull request #612 from thesofproject/github-owners-mwierzbix-add

github: added mwierzbix as owner of preproc",39,6,0
"thesofproject/sof","34f495ecceafb2a84e56a78cd46cd493cdc6745b","mrajwa","2019-07-29 20:37:27","false","kpb: rework calculations of time taken to drain data

This patch makes calculation of time taken to drain
history buffer more evident and clear.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",51,14,0
"thesofproject/sof","af69d162103c5ef630a87e51b13dffe75f60a0b1","mrajwa","2019-08-01 14:56:03","false","kpb: improve reset handling

This patch improves KPB reset handling by adding explicit
state handling.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",53,14,0
"thesofproject/sof","dd6a3c5946d741b62420b952b1caeb2c8eaec98d","mrajwa","2019-12-06 17:24:48","false","detector: send queued IPC msg to host before notifing KPB

This patch takes care of host notification at the time
key phrase is detected. In essence we want to notify
host ASAP to let it prepare itself for
incoming history data. This enables host to:
1. Wake up (in case it was in d0ix or other
low power state at the time detection happened
2. Prepare itself for incoming key phrase
data

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",72,18,0
"thesofproject/sof","ad782efeb4d2561edef17b48fa4427fee3a32e5e","lgirdwood","2018-08-28 15:52:47","true","Merge pull request #264 from tlauda/topic/ppl_trigger_on_core

pipeline: trigger ppl on different core",21,3,0
"thesofproject/sof","637b9ac99c3db8a1bfd61d379127d7cd58152e9a","mrajwa","2019-07-30 21:01:09","false","kpb: improve log message in kpb_copy() function

This patch adds state to the error log message of
kpb_copy() function.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",53,14,0
"thesofproject/sof","84e5353c1ca25808eeccd80bab805ea2d852d721","lgirdwood","2018-10-14 16:15:21","true","Merge pull request #478 from akloniex/trace-improvement

debugability: trace_event with 4 parameters, assertion on invalid number of params",35,4,0
"thesofproject/sof","dcd4f34c63de0e4e56228591007d796c2764bf2b","keyonjie","2021-07-02 09:29:45","false","memory: tigerlake: make more full use of the SRAM

Define more runtime and runtime shared section counts to make full use
of the tigerlake platform.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",85,37,0
"thesofproject/sof","67daf2ecf517914d4e17f3772ffad24b6bde32f1","bardliao","2022-06-30 03:26:41","false","topology2: add num_audio_formats for gain

We should set num_audio_formats in pipelines when we remove the
default value from gain.conf.
Otherwise, we will see below error with cavs-mixin-mixout-hda-2ch-tgl.tplg
tplg: ready widget id 2 pipe 1 type 6 name : gain.1.1 stream none

Fixes: 773a05a3 ('topology2: add S24LE support')
Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",110,49,1
"thesofproject/sof","f73055aa713a712d44b1dae902f7cb2b556c0b33","singalsu","2023-03-10 11:29:07","false","Tools: Testbench: Change struct of struct zeros initialize

The simple {0} is not accepted by xt-xcc compiler. It gives
""warning: missing braces around initializer"".

Adding sufficient number of braces to match the struct definition
fixes the build.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",54,57,1
"thesofproject/sof","345441157429ff7f2e541d92c4bba4fc96f1bfa2","ranj063","2021-09-23 19:28:27","false","host: move check for 0 copy_bytes

audio_stream_get_free_bytes() should be called when the
buffer lock is held. So move the check for 0 copy_bytes
to avoid calling audio_stream_get_free_bytes() twice.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",118,40,0
"thesofproject/sof","8d4b10c5399eb55b74f3af2d48eafae7311b0bd9","singalsu","2018-10-23 08:27:25","false","Topology: Add 2ch and 4ch raw DMIC capture topologies for APL

This patch adds two minimal capture topologies to enable doing tests
those require raw audio capture with unmodified S32_LE samples, e.g.
channels order preserve test where the mic # origin can be checked
from side information in LSB bits.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",27,5,0
"thesofproject/sof","586c6c58dcb27278b0e6cbbf01429e96fa233ebe","singalsu","2020-03-24 12:42:34","false","DMIC: Fix minor mistake in FIR scale value computation

The equation for fir_in_max value was missing term -1 and returned
too high value that resulted in FIR scale coefficient calculation an
overall gain of 0.000004 dB while it should be exactly 0 dB. The HW
decimator contains saturation in output so it have not caused
overflows of PCM capture stream.

The new macro INT_MAX() returns the correct max PCM code value for
the used FIR input word length and looks better readable than
original code.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",64,22,0
"thesofproject/sof","ad9f659556d399defa06aff0c0e444c021e91eb4","kv2019i","2023-01-02 12:27:30","false","mixin-mixout: handle congestion corner case without assert

If one mixout (A) is not able to process data, the 'sinks_free_frames'
will be truncated compared other mixout buffers. When the mixin process
is producing data to another mixout buffer (B), the number of already
mixed frames may be larger than 'sinks_free_frames'. Further it is
possible this mixout (B) has pending frames, leading to a larger
'start_frame' value.

This is a valid and possible scenario, but will trigger
  assert(sinks_free_frames >= start_frame)
in current code.

As 'frames_to_copy' is already correctly calculated as limited to
available free frames across all mixouts, no extra logic is needed when
this condition happens. Mixin is not able to proceed until the congested
mixout (A) has room again for further samples.

Link: https://github.com/thesofproject/sof/issues/6896
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",87,55,1
"thesofproject/sof","c484d99abf89e08d702e2097a11e86d9631c7af0","bkolodzi","2022-01-20 12:51:17","false","rimage:  add ACE V1.5 handling

Add ACE 1.5 set of functions to support v3.0 manifest

Signed-off-by: Krzysztof Frydryk <krzysztofx.frydryk@intel.com>",113,44,1
"thesofproject/sof","08eb8ff630f4cef2cb2db855698e5b7e026f666f","ranj063","2023-01-31 23:46:16","false","topology2: widget-common: Add 2 new tokens for input/output audio format counts

And set them to be the same number as the num_audio_formats in all the
current widget objects. This is in preparation to remove
num_audio_formats as there will be widgets with different number of
supported formats for each sink/source pin.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",51,56,1
"thesofproject/sof","7bf879b226e07111da9b45b341edf2231a98eff3","ktrzcinx","2020-03-25 13:39:39","false","tools: logger: Add clock parameter in help message

help message should explicity show that -c flags needs parameter.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",66,22,0
"thesofproject/sof","f0ffa5e4cc1a3abb21e3cbef5a4332027b0c2c51","akloniex","2018-09-26 10:38:18","false","debugability: avoid potential nullpointer dereference

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",37,4,0
"thesofproject/sof","525493fbaab6f404d6fa957a36e1e17621435508","jajanusz","2019-06-01 15:44:07","false","rimage: add spdx identifier for elf.h

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",72,12,0
"thesofproject/sof","975dc84e1e215fa2070d6e28765756b89fbcf989","johnylin76","2023-03-29 08:10:24","false","topology1: set lower priority for DMIC task in GOOGLE_RTC_AUDIO case

When GOOGLE_RTC_AUDIO is applied, Speaker and DMIC pipeline tasks are
scheduled in the same domain. The AEC function in GOOGLE_RTC_AUDIO
has the hard requirement for input sample synchronization between DMIC
input and Echo reference (sourced from Speaker).

At present, both pipelines are pri-0 so the task order in schedule
list depends on which pipeline starts first. This commit sets DMIC as
pri-1 when GOOGLE_RTC_AUDIO is applied to make sure that DMIC task
will be always put after Speaker task, which guarantees the
requirement for input sample synchronization.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",58,58,1
"thesofproject/sof","058dc69b1f8acaea9151efd91af78540cce7eafd","johnylin76","2022-11-07 14:16:30","false","topology: enable GOOGLE_AEC and WAVES on CS35L41 amp

Add WAVES+AEC topology

Signed-off-by: Pin-chih Lin <johnylin@google.com>",93,53,1
"thesofproject/sof","baa43558f663c6c036e4e3f620921a84b5ea0f4b","johnylin76","2020-08-11 06:08:51","false","sof: math: move iir_df2t function to src/math

Moved iir_df2t() from src/audio/eq_iir to src/math as a common library for
IIR and Crossover usage.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",74,26,0
"thesofproject/sof","453a007be8d56d2bbf72a5be1c1f5b4513d071cc","dbaluta","2022-03-23 12:16:02","false","codec_adapter: cadence: Introduce cadence_codec_resolve_api

Separate code that finds and assigns API function given an codec_id
into a function.

This makes code cleaner and helps us move finding the api id in another
part of the code.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",109,46,1
"thesofproject/sof","7341f43cad73994d2093cf26753dee40bef5ad10","dbaluta","2020-03-25 19:16:23","false","drivers: imx: sdma: Enhance channel status handling

Channel 0 is special. It goes from READY (at init) to ACTIVE (at run)
and then back to READY (at stop).

The rest of the channels go to PREPARE (at set_config) or they can be
SUSPENDED or PAUSED the same state machine as for EDMA.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",64,22,0
"thesofproject/sof","d2ecb572e3e0a9262907e010863d404e0f43aaa5","dbaluta","2020-11-23 13:38:44","false","drivers: imx: sai: Add SAI private data

We allocate SAI private data to save config and
parameters and use them later.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",75,30,0
"thesofproject/sof","ab3ad0151a9697a3aa36ad4e1a7be1583b3f0e9c","tmleman","2022-10-26 08:09:22","false","ace: cpu: cpu management for mtl

This patch adds implementation of core power state changing functions
for meteorlake. Code uses zephyr kernel api provided by power manager.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",95,53,1
"thesofproject/sof","c0ae4c6e6e3bfa614189892af20f63f2c982283e","RanderWang","2018-07-09 05:48:44","false","trace: fix dma trace with repeated data bug on APL&CNL

It is caused by dma trace buffer overflow in FW. There are too many
trace events that the dma trace buffer can’t hold them, And this makes
buffer in chaos.

It is assumed that the trace msg is transferred to host when it is full,
and the occupied memory can be reused. But it is not always true. The dma
trace buffer is used as a ring buffer. In warp case, both tail and head
of the buffer are used, only the tail of buffer is transferred to host and
released. It is because GPDMA on BYT only support successive memory mode.
So it is need to be done with two dma calls. Because trace is for debugging
and to occupy the cpu usage as little as possible, only the first dma
transfer is done and the second one is scheduled next time. So only part
of dma trace buffer is released. On APL & CNL, dma gateway is used for dma
trace and it supports wrap mode transfer. So the algorithm can be refined
for dma gateway

Now add a function to do the job for different HW feature. For GPDMA, no
change is made currently, but later it would be refined to support link
list mode. For platform with dma gateway, transferring trace msg with one
dma call.

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",12,1,0
"thesofproject/sof","c569a95905b1c896ea18fe86bde33fe77a3ce6e8","RanderWang","2018-10-09 02:36:34","false","WHL: add a bespoke hda topology for WHL

Only passthrough is required on WHL

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",35,4,0
"thesofproject/sof","38d541fee907f78dd06c4322de02c7a39919672b","xiulipan","2018-09-11 10:41:00","false","scheduler: add task priority into scheduler

Check priority before check timeout delta to make sure task with higher
priority run first.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",42,3,0
"thesofproject/sof","5ebf036d01459c14eda3129165e0a1db61b8a2db","xiulipan","2021-01-12 08:55:10","false","tools: sof_ri_info: update the full_bytes usage

make the full_bytes can output bytes in format we need in
KNOWN_KEYS

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",74,31,0
"thesofproject/sof","c28ecb9a875e8827527f967f351095a3ce3c68e1","xiulipan","2019-12-18 10:30:22","false","dw-dma: register notifier in dma get instead of dma probe

notifier is unregister in dma put. need to register it in get to make
sure we do not lose any notifier.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",73,18,0
"thesofproject/sof","6f7bf634175f936b12f891c885d3f44d09b49ec0","jajanusz","2020-02-27 13:28:25","false","cmake: build option for clang static analyzer

Add option for building FW for clang's scan-build.
This static analyzer works out-of-the-box only for compilers
compatible with Clang. For most of embedded compilers
there will be some adjustment needed when BUILD_CLANG_SCAN
is enabled. This flag is not suitable for every build scenario,
it has to be supported for given toolchain / architecture.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",76,21,0
"thesofproject/sof","5808eac22f29fa504c709f92af66142db4871df5","jajanusz","2018-08-31 08:57:23","false","host: fix for uninitialized pointers

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",28,3,0
"thesofproject/sof","378d57219350d29a81e3506a70e1b82a54a4859a","jajanusz","2019-04-25 20:47:52","false","host: remove pthread dependency

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",48,11,0
"thesofproject/sof","3f2d42429708a35e2d2de382c8ec93ff229156cf","jajanusz","2019-05-15 12:37:38","false","uapi: add comments for oops header structs

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",66,11,0
"thesofproject/sof","b07f2674cc602035ad11606dcd2dbe6586637e43","akloniex","2020-09-23 08:53:06","false","trace: Rename trace_log() function to trace_log_filtered()

Also create trace_log_unfiltered() function, to be used internally
by tracing subsystem to emit information about suppressed trace messages.

The *unfiltered function could be also used as replacement
in _log_message() macro, to disable log filtering for debugging purposes.

Signed-off-by: Artur Kloniecki <arturx.kloniecki@linux.intel.com>",66,28,0
"thesofproject/sof","b707be3607b0d732e0f969100646f78c73c52e2c","fredoh9","2020-03-30 00:18:14","false","topology: glk: add eq capture for DMIC

glk da7119 bobba platform has DMIC already installed. It is good platform
to test DMIC with and without EQ.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",67,22,0
"thesofproject/sof","2d1b17a55ea00130283dd65cec9f34d6d81b642f","akloniex","2020-08-10 08:57:50","false","test: buffer: read and write to buffer byte by byte.

Currently buffer is filled by memcpy_s and verified by memcmp, which
would require more UT maintenance during upcoming buffer changes.
With this change, usage of the buffer better reflects real-life usage.

Signed-off-by: Artur Kloniecki <arturx.kloniecki@linux.intel.com>",76,26,0
"thesofproject/sof","6ba817bee6bb984bd6c3fb548089e9d50675d315","akloniex","2018-11-13 13:28:19","false","UT: Fix unit tests after faulty PRs were merged.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",38,5,0
"thesofproject/sof","4f42a65b66493a2bbb5a439ea92baf64e623e5d5","tobonex","2023-09-15 17:43:42","false","asrc: remove buffer_acquire from asrc

remove buffer ops from asrc module

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","7372f1ec7e7c34c92bd83aff50709b0c991ca339","singalsu","2018-10-04 15:16:26","false","EQ tune: Update m4 format EQ filter coefficients syntax

This patch updates the export format to currently used format in
topology. It adds also possibility to pass text comment into line
above the bytes from EQ design script. The date is appended
automatically after comment.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",34,4,0
"thesofproject/sof","0e53d54684bb1762d76ad81befe311d8e249f999","ranj063","2022-02-16 18:29:27","false","topology2: cavs: Add support for including DMIC in HDA topology

Currently we build separate topologies for TGL and CNL since their
io_clk's are different. Eventually, we'd need to unify these and let the
driver handle the blob selection in the kernel.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",105,44,1
"thesofproject/sof","2751ea8b31840060ffb0287fe3206fb7ce013a5d","ranj063","2022-04-27 20:52:49","false","module_adapter: KConfig: rename menu option

Rename the menu option to ""Processing modules""

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",114,47,1
"thesofproject/sof","acf1d32edec20a20cd2f7db5efb1c458a9625978","tinghan-shen","2022-05-13 07:40:30","false","platform: mt8186: Support changing image location to DRAM

In case the size of MT8186 DSP SRAM doesn't enough in the future,
add a configuration to move image location from SRAM to DRAM.

Signed-off-by: Tinghan Shen <tinghan.shen@mediatek.com>",111,47,1
"thesofproject/sof","afd28fb087fb5fb3b01f062e0892de1ca547f99f","nashif","2022-07-13 02:27:43","false","app: zephyr: remove overlays and adapt script

Remove overlays as they are the same board configurations available in
app/.
Keep common overlays and change script to reflect those changes.

Signed-off-by: Anas Nashif <anas.nashif@intel.com>",110,49,1
"thesofproject/sof","bc6888ecabedcdd4ad74a58f52dc62f182c38c1d","kv2019i","2021-05-05 14:15:17","false","zephyr: add sample-smart-amp component to the wrapper

Add the sample-smart-amp to the wrapper build if the component
is enabled in build config.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",80,35,0
"thesofproject/sof","59ffb8390ae63e87c2b073c6edffbdb8d6de00e1","kv2019i","2022-09-02 12:43:59","false","ipc4: handle attempts to reuse the notify object safely

ipc_send_buffer_status_notify() uses a static ipc_msg object
to send the notifications. In normal circumstances, notifications
are never queued as they are sent as high-priority messages,
but this is still possible. Requeing the same object can potentially
lead to memory corruption as the caller is modifying the message
object, while it may in fact be in use still.

To avoid this, check in ipc_send_buffer_status_notify() whether
the IPC message queue has the notify object, and if yes, skip
the message. The buffer status notifications can be safely dropped
in error case, as host can read the log buffer status directly from
the SRAM window.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",118,51,1
"thesofproject/sof","0469a018ba856b0fd96b042c4011301e988d0f8f","tlauda","2020-02-04 08:44:39","false","volume: make task dynamic

Makes volume ramping task dynamic meaning it will be
allocated only when needed. There is no need to have it
allocated statically unless the pipeline will be in fact used.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",77,20,0
"thesofproject/sof","2e7fb133c8e607cc3298d3f5894e11cb38d53588","tlauda","2019-09-30 09:37:32","false","ipc: add complete task callback

Changes ipc task implementation, so it accepts new messages from
host in a complete task callback. This way we will avoid the
situation, where host will send another message before we
truly complete current ipc task.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,16,0
"thesofproject/sof","228d3823b6a641aa634a629e7f35d73c6995e406","tlauda","2020-01-15 12:48:47","false","dma: make drv_plat_data const

Makes drv_plat_data pointer constant.
This data should not change during the lifetime of DSP.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",76,19,0
"thesofproject/sof","450ed737ee4f96f48c5142371144ecf4806a3812","tlauda","2019-09-30 12:02:06","false","platform: cavs: include missing headers

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,16,0
"thesofproject/sof","f190608d76f14bd35f65b1fe23339629dea5b6e1","tlauda","2020-01-10 11:44:54","false","memory: implement SHARED_DATA macro

This patch implements universal macro for shared data
modified at runtime by different cores. On platforms
with uncached memory region all this data can be placed
into dedicated section, so it can be later accessed through
uncache without worrying about cache line alignment and random
cache evictions. Other SMP platforms without uncache can implement
it in some other way, but it's highly advised this macro should
align data to cache line size in such cases.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",76,19,0
"thesofproject/sof","781ccb10c70115e3d5793cb437596fcff9a31c08","tlauda","2020-01-08 14:06:31","false","dai: add DAI info to sof context

Adds DAI info to sof main context. Also implements
getter to easily retrieve the info through one point
of access.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",71,19,0
"thesofproject/sof","34ade317a2115c2c074b2e4c7f8170a063a41409","tlauda","2018-12-10 12:45:35","false","alloc: always access memory map through cache

Changes memory map access from uncached to cached.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",47,6,0
"thesofproject/sof","cf8e4339fec99a164649c08ce768bcc2143c2084","tlauda","2020-07-03 06:37:22","false","cavs: shim: make register functions common

Moves register helper functions to common cavs header.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",71,25,0
"thesofproject/sof","7a60f7cd915dcd2b5b0ccc4244249ce6c09fb99e","ktrzcinx","2019-10-28 10:10:49","false","trace: Create trace macros _comp family

It makes trace macros in component space much shorter
and simpler so trace module will be more reliable.
Thanks to usage one preprocessor macro in each type of
_comp traces, code is more flexible and consistent.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",67,17,0
"thesofproject/sof","fbfdd6936f97eaadee8c1a85f5bfc48a49af4b63","libinyang","2022-12-21 03:43:34","false","topology2: move payload_with_output_fmt into process token set

The token payload_with_output_fmt is process module specific,
so set it as a process module token.

Signed-off-by: Chao Song <chao.song@linux.intel.com>
Signed-off-by: Libin Yang <libin.yang@intel.com>",90,55,1
"thesofproject/sof","c467b5285ecfeb76ab52c5b38fb1bdba5a50ed0d","xiulipan","2019-05-30 07:34:24","false","scripts: update sof_builder docker with imx8 support

Add imx8 cross compiler in sof_builder docker build file.t

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",67,12,0
"thesofproject/sof","bbe046f85830b2233c5893b778732dfd675af87e","lyakh","2021-05-06 10:44:07","false","zephyr: no need for explicit memory sharing

When built with Zephyr all memory except stack is sharable: either it
is read-only, or it is accessed via the non-caching address range.
Besides no .shared_data section is actually created under Zephyr,
therefore trying to place data in it leads to linker warnings and
actually moves that data to the caching address range.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",81,35,0
"thesofproject/sof","2e6cafa02fca352c9f4a085d3c44925e61a19253","marc-hb","2021-03-22 01:18:36","false","logger: use strerror()

Useful error messages when forgetting to use ""sudo"" or to change
permissions in udev.

Some places were printing the errno decimal. Others no specific error
at all.

Sample outputs:

error: Unable to open version file /sys/kernel/debug/sof/fw_version: \
                                                       Permission denied

error: Unable to open version file /sys/kernel/debug/sof/fw_version: \
                                               No such file or directory

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",72,34,0
"thesofproject/sof","3ac849eac573d5c37eb6bb0a2324ab6fe0178b0e","marc-hb","2023-05-09 23:36:35","false","xtensa-build-zephyr.py: stop passing `--tool-data rimage/config/`

We used to use `-- -c rimage/config/platf.toml` for the IPC4 overlay and
the older `--tool-data rimage/config/` for the rest. This was confusing,
inconsistent and used to print this warning:

```
WARNING: --tool-data /var/home/mherber2/SOF/sof/rimage/config ignored,
         overridden by: -- -c ...
```

`--tool-data` was always a bad idea. It looks generic but it's not; it
allows changing only a config directory that is always in the same
location.

Copy what `west sign` does with `--tool-data`, drop it and use `-- -c`
always.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",53,59,1
"thesofproject/sof","7baa878610910bc27f37a2588964908c540b0fdb","marc-hb","2021-03-08 19:55:49","false",".github/check patch: do not stop on the first failure

Add new script to reduce duplication and ease local testing.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",73,33,0
"thesofproject/sof","fdc05c718f47c2a7836bcbcc5884e048f62ddde0","marc-hb","2023-05-10 00:08:18","false","xtensa-build-zephyr.py: extract new function rimage_options()

Unlike rimage_configuration(), rimage_options() will be kept free of
side-effect.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",53,59,1
"thesofproject/sof","adce54445012726ee559a307355ac31e46b25722","marc-hb","2022-10-18 05:13:46","false","xtensa-build-zephyr.py: simplify installation, prepare for more files

Simplify the final installation code to prepare for installing more
files. Zero functional change.

Notably perform the cavs naming trick inside the build directory first
which allows using a destination directory instead of a destination file.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",101,53,1
"thesofproject/sof","bb7520457fadcf2be994c23031881e5722f0c3b1","tlauda","2018-07-06 10:09:58","false","alloc: share memory map with slave cores

Adds cache operations in alloc, which allows to properly
share memory map with other cores.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",11,1,0
"thesofproject/sof","bc10926d677dc125f112af261870dc8537472309","tlauda","2019-06-13 12:40:15","false","host: unify host_copy for all DMAs

Unifies host_copy implementation for all types
of DMA.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",48,12,0
"thesofproject/sof","c66c02838bd4b634f586dcf30c81eff814eb4db8","tlauda","2018-11-20 09:44:36","false","clk: trace error on wrong clock type

Avoids null dereference in clock_set_freq in case
of wrong clock type.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",39,6,0
"thesofproject/sof","6e88bdf1742df3bad64714a26b7918dfa5f317fb","tlauda","2019-03-19 10:07:11","false","mixer: add support for mixing 16 bit streams

Adds support for mixing 16 bit streams.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,9,0
"thesofproject/sof","5ad0d56fb5e84d173adfcd6305829564f3ef8ef6","tlauda","2018-08-06 08:29:37","false","dw-dma: fix compilation for BYT, BDW and HSW

Fixes GCC compilation for BYT, BDW and HSW.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",17,2,0
"thesofproject/sof","a4b4d5ff2b3a11a8be4eaccc538213bd3d40fe47","tlauda","2019-09-09 13:53:04","false","notifier: add macro for getting clk notification id

Adds macro to simplify getting clock change notification id
based on the selected clock id.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",58,15,0
"thesofproject/sof","c5f9b1d7e9b134f9f030d5671716a746aad0dfc7","tlauda","2019-07-12 11:21:09","false","task: cleanup includes

Cleanups includes in task file.
Unused headers has been removed and needed
has beed added.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",43,13,0
"thesofproject/sof","578d698e5e5aaf0c60687af34df154a23b42d6e8","singalsu","2020-04-22 08:32:08","false","Testbench: Return -errno values from malloc and fseek functions

This patch replaces the manually set error codes with errno that
is set to exact fail reason like ENOMEM etc. by these functions. The
missing return code checks for fseek() calls are added.

Include of header errno.h is added to topology.c. The order of
include statements is fixed.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",78,23,0
"thesofproject/sof","64fe2ea7d2895314aca4fe8a5d3d6046ec08122a","singalsu","2023-02-08 15:19:02","false","Tools: Topology2: Add topology to test playback SRC conversions

This patch adds to development topologies a topology
sof-hda-src-generic.tplg. It is similar to sof-hda-generic but adds
to first playback PCM pipeline a SRC component after gain. The
pipeline supports playback of S32_LE with 8 - 192 kHz rates.

The cavs/src.conf is merged to src.conf, and the SRC format
include files are brought up from cavs directory. The topology
cavs-sdw-src-gain-mixin.tplg related .conf files are updated
for common location. The missing rate_out attribute is added.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",55,56,1
"thesofproject/sof","66a78a2d8c1c0f139bfbda773087ac447a70ddec","singalsu","2020-05-20 13:35:14","false","Topology: HDA-generic: Use +20 dB EQ gain for 16 kHz DMIC capture

This patch replaces the default 0 dB gain with +20 dB gain in 16 kHz
DMIC pipelines in hda-generic based topologies. It is done to have
same capture sensitivity in both 16 kHz and 48 kHz capture pipelines.

The impacted topologies are:

sof-hda-generic-2ch.tplg
sof-hda-generic-4ch.tplg
sof-hda-generic-eq-2ch.tplg
sof-hda-generic-eq-4ch.tplg
sof-hda-generic-idisp-2ch.tplg
sof-hda-generic-idisp-4ch.tplg

Note: The 0 dB high-pass version is preferred after all the needed
development is available.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",99,23,0
"thesofproject/sof","6c48d42f806b77d5d63cb3ded24b7ab40ade7973","singalsu","2022-04-26 09:13:32","false","IPC: IPC4: Fix GCC build errors

This patch fixes errors:

src/ipc/ipc4/handler.c: In function 'ipc_cmd':
src/ipc/ipc4/handler.c:204:23: error: 'host' may be used uninitialized
in this function [-Werror=maybe-uninitialized]
  struct ipc_comp_dev *host;
                       ^~~~
src/ipc/ipc4/helper.c: In function 'ipc4_trigger_chain_dma':
src/ipc/ipc4/helper.c:667:6: error: 'ret' may be used uninitialized
in this function [-Werror=maybe-uninitialized]
  int ret;
      ^~~
src/ipc/ipc4/helper.c: In function 'ipc4_create_chain_dma':
src/ipc/ipc4/helper.c:507:13: error: 'frame_size' may be
used uninitialized in this function [-Werror=maybe-uninitialized]
  frame_size >>= 1;
  ~~~~~~~~~~~^~~~~

src/ipc/ipc4/helper.c:482:11: note: 'frame_size' was declared here
  uint32_t frame_size;
           ^~~~~~~~~~

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",114,47,1
"thesofproject/sof","5be495c2e840b46b2adbd64314c2b86c03f189a4","balakishorepati","2022-03-29 16:40:20","false","drivers: amd: renoir: use sample rate from topology

So far we only support 48000Hz as default sample rate.
Now introduce acp_params structure to pass configuration
from topology via AP to DSP.

Only Sample rate param for now to configure dmic clk.

While here, align sof_ipc_dai_acp_params struct
with the one from kernel.

Increment only ABI MINOR version which makes the
SOF FW backward compatible with older kernel versions

Signed-off-by: Balakishorepati <balaKishore.pati@amd.com>",112,46,1
"thesofproject/sof","6678b4022f0bd726b8b0ca257a6578c4b216c64d","lrgirdwo","2021-04-13 16:17:57","false","testbench: align IPC structures on 4 bytes.

IPC is aligned on at least 4 bytes, removes compiler warning about packed
data being aligned on 1 bytes.

In file included from /home/lrg/work/sof/sof/tools/testbench/file.c:23:
/home/lrg/work/sof/sof/tools/testbench/include/testbench/file.h:59:1: error: alignment 1 of ‘struct sof_ipc_comp_file’ is less than 4 [-Werror=packed-not-aligned]
   59 | } __attribute__((packed));
      | ^

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",81,34,0
"thesofproject/sof","9f84f84b78f7f970f26a41058bedd7f0d7f5591f","plbossart","2019-01-16 05:08:04","false","src/drivers/intel/cavs/ipc.c: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","b720f1a733150bb251bd8e78c869c1492a8e14d4","lrgirdwo","2023-08-30 23:15:23","false","audio: Add new kconfig for shared library modules

Add a new kconfig option to build the shared library modules that can be
used to run the pipelines on the host with the testbench or the ALSA
plugin.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",25,63,1
"thesofproject/sof","8d0f1783a6195d85640a085811df88b3d75d9bd7","plbossart","2018-10-23 17:28:47","false","topology: renumber SSP tokens - ABI CHANGE

Initial _ACTIVE fields are replaced by a single clock control
This change can lead to regressions, it needs to be aligned with the same
change at the kernel level.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",27,5,0
"thesofproject/sof","a94bcfb4470f196b9b0e6dbafd01d0b9d59f9a39","lrgirdwo","2018-12-22 15:16:18","false","trace: dai: Improve some DAI trace messages.

Use 0x%08x format for SSP registers and trace every dai_config()

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>

fix",50,7,0
"thesofproject/sof","aea593b12859c80ea5312a982f3651a9be3c8a38","lbetlej","2019-12-20 15:14:40","false","tools: add community key signature to sof_ri_info

A public key signature of community key used to sign FW
binaries is added. The script can provide on output info if
evaluated FW image was signed with the key.

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",71,19,0
"thesofproject/sof","5032a493e930a89ad0a8cae820cd5fc3eea05518","DianaGabriela27","2019-03-06 11:09:42","false","rimage: Remove explicit comparisons to NULL in the rimage/*.c files

Comparisons to NULL are now implicit as the checkpatch.pl requires.

Signed-off-by: Diana Ungureanu <diana-gabriela.ungureanu@nxp.com>",66,9,0
"thesofproject/sof","c548489e381374cde15f1a3f58ba349529e312f7","lbetlej","2019-10-03 13:46:54","false","cavs: deduplicate power down sequence for cavs platforms

cAVS power down sequence refactored by moving CannonLake (cAVS 1.8)
implementation to cavs lib as a base for cAVS 1.8/2.0/2.5 common
code. ApolloLake (cAVS 1.5) specific implementation remains as a
platform specific code.

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",63,16,0
"thesofproject/sof","38a6cf30dadc9e213bc1d6d41401c0bfe54c59d7","lrgirdwo","2018-11-24 15:36:50","false","xtensa: xtos:  Fix typo in reset-vector.S

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",40,6,0
"thesofproject/sof","fc497eb4483bbec651be022d632af6011e071e13","johnylin76","2022-12-20 13:02:05","false","topology: remove default param config from DTS control

In DTS module m4 file, the default control bytes used to have a
12-byte redundant param {0x0000, 0x000c, 0x0000}, the param id is
0 (the first 4-byte).

For DTS SDK version >= 1.0.8, error is reported while getting the
param with id=0.

This commit removes the redundant param from default control bytes.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",90,55,1
"thesofproject/sof","214518edea7f70349c1208fbab44679bb1497c56","iuliana-prodan","2021-07-20 19:24:43","false","zephyr: wrapper: add notifier_register(ipc_send_queued_msg) for SOF_SCHEDULE_LL_DMA

In XTOS SOF, ipc_send_queued_msg() is run by task_main_primary_core().
In Zephyr we need to schedule ipc_send_queued_msg() using a notifier
triggered by the periodic ll_scheduler.
This is similar to commit c194125b83c2 (""zephyr:
add notifier_register(ipc_send_queued_msg) in task_main_start()"")

For i.MX we need to use this temporary fix for SOF_SCHEDULE_LL_DMA, also.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",91,38,0
"thesofproject/sof","95e762f83531917bcfa2730688f33326b8d6d186","keqiaozhang","2019-03-01 02:24:54","false","test: add a script for pause/release stress test

This script is used to test pause/release audio stream

Signed-off-by: Zhang Keqiao <keqiao.zhang@linux.intel.com>",67,9,0
"thesofproject/sof","b70ae5f6af09c5729ed586a0de2f164ad928f57a","ranj063","2023-02-16 18:25:21","false","topology2: Remove duplicate conf files

These are already in the common includes.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",53,56,1
"thesofproject/sof","b72a11d29b6ce1b665bf3ffd6a0b633840a6fa4c","ranj063","2022-11-07 19:01:32","false","cavs: dma: Add device nodes for link DMA

Add the device nodes for HDA link DMA when using the native zephyr
drivers.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",93,53,1
"thesofproject/sof","07455c572e284ae78bf6088c5ae2e545e5035f02","ceolin","2023-07-20 19:59:15","false","zephyr: s/MP_NUM_CPUS/MP_MAX_NUM_CPUS/

Zephyr uses MP_MAX_NUM_CPUS internally to represent the
number of cores available and consequently to allocate
resources. It is even expected, and checked through assert,
that these two symbols have the same value. Use different
value can lead to an undesired behavior, so lets use
MP_MAX_NUM_CPUS.

Signed-off-by: Flavio Ceolin <flavio.ceolin@intel.com>",32,62,1
"thesofproject/sof","2887a0e51f9ad2992ca6b0d65af03ceb1dd1543e","ranj063","2023-05-02 02:50:59","false","dai-legacy/dai-zephyr: Split the timestamping ops

In preparation to remove the DAI device creation, add the timestamping
ops for the DAI copier and expose the timestaming functions in
dai-zephyr and dai-legacy.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,59,1
"thesofproject/sof","7d12a6599bbdcb652b2a7371fc72b784c863fcca","tlauda","2019-09-30 10:07:59","false","ipc: cleanup ipc functions

Cleanups ipc functions, so we don't have many not needed
layers of execution.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,16,0
"thesofproject/sof","7867944946b9b155f7936f547925dde331a4f708","tlauda","2020-01-17 10:48:14","false","component: use comp_driver_info during registration

Changes component driver registration to use comp_driver_info
as an element to be put into the drivers list. This way
comp_driver can be constant and comp_driver_info can be
marked as shared in the future.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",79,19,0
"thesofproject/sof","4d1c566c3ce61480c845f1220fe76f92e779b9cc","tlauda","2018-09-10 09:05:53","false","memory: cavs: cache fixes

We need to writeback clock data, because it's used
in work queue. Also we need to writeback bss in order
to share static pointers with slave cores.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",33,3,0
"thesofproject/sof","fee7c07ef388701a86b8f96aaad1cdd8c21f1e2b","tlauda","2020-02-10 11:21:30","false","audio: lock buffers where needed

Adds buffer locking and unlocking in audio components
where it's needed. We need to retrieve the latest values
of available and free sizes in copy functions and also
use lock in case of making changes in params and prepare
methods.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",80,20,0
"thesofproject/sof","aa9066c9f7bbc6660ec6c19d2586ad820bf4fae2","tlauda","2019-04-26 03:39:21","false","ipc: fix dst size of read in mailbox_validate()

Fixes destination size of mailbox_hostbox_read() call
in mailbox_validate(). We're starting from some non-zero
offset, so the size is smaller than SOF_IPC_MSG_MAX_SIZE.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",48,11,0
"thesofproject/sof","5452897dc9308c7e4fd4e17649550dec880eacdb","cujomalainey","2018-11-16 02:32:29","false","update sof-apl-tdf8532

consolidate graph styles

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",39,5,0
"thesofproject/sof","7ea9155ea8097f3704296b2efbb5e4bb3db44a8b","btian1","2023-05-25 09:37:20","false","copier: align dai reset and trigger with host and gateway

Host and gateway case already have common function to handle
trigger and reset, add this wrap to align dai with host.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",52,60,1
"thesofproject/sof","4e44ae48ecd3d6e1877f5ac691ebdeb8438e2de9","marc-hb","2020-06-20 05:50:47","false","rimage submodule: Debug build, assert(write_firmware)

Update submodule with two new commits:

* 2156dcb00d2e rimage.c: add assert(image.adsp->write_firmware[_meu])
* 4348e2a2bd6a cmake: use CMAKE_BUILD_TYPE and default to Debug

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",78,25,0
"thesofproject/sof","3a72e9e5d6a0228512d0e86f0204c8e2ec9c3cbc","tlauda","2020-05-28 12:28:15","false","kconfig: remove cAVS menu

Removes cAVS menu and moves all platform specific things
to platform menu.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",97,24,0
"thesofproject/sof","52c5af4142a1163b689e7500e76521ecf8ff6f73","tlauda","2019-01-15 09:46:02","false","component: remove is_endpoint field

Removes is_endpoint field from component.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,7,0
"thesofproject/sof","d84395b755b62f0982f6630710214dc655ced39a","tlauda","2019-06-13 08:45:14","false","buffer: remove circular dependency

Removes circular dependency between buffer and component
header files.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",48,12,0
"thesofproject/sof","14ca1fa3d5a1d7b40bcbfc36d66b0ad96198a21c","tlauda","2018-06-19 14:55:34","false","pm_runtime: add runtime power management initial implementation

This patch adds initial empty implementation of runtime power management.
It is based on linux kernel implementation and will be developed
in the future.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",1,1,0
"thesofproject/sof","e3545fab4ee521071f0c7c1e685ae0433214fd86","tlauda","2019-11-20 13:05:44","false","buffer: selective build by CONFIG_FORMAT

Builds buffer_copy functions based on the selected formats
in kconfig.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,18,0
"thesofproject/sof","40575d2638f3d045f207f85b8ebd9499c28bf94b","tlauda","2018-07-06 12:51:30","false","ipc: add SOF_IPC_PM_CORE_ENABLE message

Adds definition and implementation of new IPC
message, which allows to enable and disable cores
based on passed enable_mask.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",11,1,0
"thesofproject/sof","559f3ffdb9fef94d1a5d3cc60030646e6477429c","saisurya-ch","2023-08-23 06:13:59","false","tools: topology: add ACP_6_3 topology support

Add ACP_6_3 platform topology.

Signed-off-by: SaiSurya Ch <saisurya.chakkaveeravenkatanaga@amd.com>",26,63,1
"thesofproject/sof","b144a02bdc2b7283c61643097832249a7dd12b8c","tlauda","2020-03-18 14:54:42","false","cmocka: fix ut building

We don't support section .shared in unit tests,
so add appropriate flags to make files.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",70,21,0
"thesofproject/sof","f114acecb175773ba9e622fab62f877c701c12eb","singalsu","2023-09-07 13:07:31","false","Audio: Kconfig: Deprecate tone component

Tone component has been without maintenance and validation,
and there is no interface to control sound generation from
user space so it will be deprecated and removed from successive
release.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",21,63,1
"thesofproject/sof","0a5a0b5049170d06deb8a2e20a1cc1b860cf0ac9","singalsu","2021-12-22 10:45:48","false","Math: Add cross product function to sof/math/numbers.h

This patch adds function cross_product_s16(). Cross product is
commonly used function in computational geometry.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",120,43,1
"thesofproject/sof","51fc4e12202970453683a92306654e79f50e05a6","singalsu","2020-10-02 13:39:51","false","Tools: Test: Audio: Add missing test utility function

The script to load back to Matlab or Octave the test input data
was missing from previous patch that introduced TDFB (beamformer)
component.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",65,28,0
"thesofproject/sof","ea4ba64bd0f80b4e5f619bdc7e9d61963970f25d","keyonjie","2020-08-19 01:56:46","false","topology: pipe: fix and export supported formats correctly

Switch to use CAPABILITY_FORMAT_NAME(PIPELINE_FORMAT) for all pipelines,
no matter there is PGA in it or not, the dai format is not important
here, as the pcm_converter will help.

This will help fix issue where we are claiming the wrong supported
formats in the PCM capability, e.g. our host buffer is allocated as
S16_LE so we can support S16_LE only, but with today's code it is
`S32_LE,S24_LE,S16_LE' in the pcm capability, so end user can run with
S24_LE or S32_LE and eventually end up to FW internal errors.

BugLink: https://github.com/thesofproject/sof/issues/3318
Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",75,27,0
"thesofproject/sof","2ddbab14a8e53bf5c5f4ef3a5eee8b64f5db22df","singalsu","2018-11-29 14:55:02","false","EQ: Fix FIR and IIR equalizers for the new user ABI

This patch contains the bug fixes for the EQ components to make them
work correctly. The topology and tools update is addressed separately. The
matching kernel patch is needed as well.

The first fix is for uapi header file that had left the macros
not updated. It caused the setup blob parsing to fail.

The FIR setup traces are updated to be easy to read with new trace. The
functional change is in get data where the configuration data size
and ABI version are written back to response.

The IIR is changed similarly but in addition the hard coded count
increase is replaced by the macro calculated value from ABI header
file.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",41,6,0
"thesofproject/sof","fd6804ced46b3eaa4f0ddf1e027382bf87a412ae","singalsu","2020-01-10 11:27:36","false","Volume: Avoid unnecessary error trace about limiting to VOL_MIN

The trace issue is only cosmetic since VOL_MIN is currently defined
to zero. There linear gain value was not altered despite the emitted
trace. With this change the limiting no more happens for input value
zero.

The related trace messages are improved to show the defined limits
for easier adjust the offending topology volume scale if this
happens. The string split style is also updated to current.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",76,19,0
"thesofproject/sof","c32a0e032fc04df2edaab0dd1b7f012f9c50d73e","fuyuntsuo","2021-05-17 12:53:06","false","topology: igo_nr: move igo_nr to core 1.

igo_nr runs on core 1 to balance loading.

Signed-off-by: fy.tsuo <fy.tsuo@intelli-go.com>",87,35,0
"thesofproject/sof","c0130e40a508c29e45f91199758a45fa552b090c","bkokoszx","2019-01-10 13:54:59","false","list: removing unnecessary list_item_del_init func

list_item_del_init function  had exactly the same
effect as list_item_del function

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",57,7,0
"thesofproject/sof","fc59979f5f554000b0aaab64922038e273758ea8","mwierzbix","2018-08-14 09:24:38","false","test: lib/rstrlen: Added unit tests for lib/rstrlen.

Signed-off-by: Michal Jerzy Wierzbicki <michalx.wierzbicki@linux.intel.com>",16,2,0
"thesofproject/sof","7fa74135273bda9b07f3bc1fb385b56150c4087e","plbossart","2019-01-31 02:35:44","false","topology: remove tone support

This was never properly supported and generates errors. Will re-add when it
actually works

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",58,8,0
"thesofproject/sof","596470e286bd00f2071d7aaeff575968a39d1499","RanderWang","2021-11-03 07:26:11","false","ipc4: pipeline: refine pipeline state transfer

Two different pipeline state setting in windows.
(1) init -> pause -> reset
(2) init -> reset
we should do nothing for (1) and skip stop operation
for (2).

Signed-off-by: Rander Wang <rander.wang@intel.com>",125,41,1
"thesofproject/sof","7b532d3712ff15c523f4dd52462f19aac5130e61","RanderWang","2020-06-28 07:55:34","false","topology: tgl-sdw-max98373: change DMIC16k format to 32LE

For original DMIC16k only S16_LE is supported in pcm capability.
Now this patch enables S24_LE and S32_LE for applications like
DMIC01.

Signed-off-by: Rander Wang <rander.wang@intel.com>",71,25,0
"thesofproject/sof","2eed3db430dbf5d94fc3d1dc56b1aa41ef963aa1","RanderWang","2020-01-14 08:50:47","false","topology: tgl: add support for tgl with 711 & 1308 in sdw mode

The file is derived from icl_711_1308_715, but 715 is not included.

Signed-off-by: Rander Wang <rander.wang@intel.com>",78,19,0
"thesofproject/sof","c68605403c52ac43ac1b97dec780b9407026ec7f","jajanusz","2020-01-02 12:26:17","false","ssp: replace hweight with builtin popcount

Hweight32 function can be replaced with builtin popcount
that is more performant.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",70,19,0
"thesofproject/sof","3d8a0ac809a216634967fe1c3959ccea9bc210f2","jajanusz","2020-06-18 09:32:30","false","chrome: config: enable LPRO for TGL

Set LPRO as default clock for power optimizations.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",77,25,0
"thesofproject/sof","865f31152a7c5b9db9dadd253a3952d746a517c3","jajanusz","2019-06-06 08:38:09","false","rimage: fix possible strcpy and sprintf overflows

It's for preventing possible buffer overflow.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",59,12,0
"thesofproject/sof","4574fdc15afcd7fe04c77174e8cfdce53ed268c9","jajanusz","2019-01-18 00:34:03","false","cmake: add overrideconfig

overrideconfig is custom target that can be used
to set config values from scripts

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",57,7,0
"thesofproject/sof","2f270ea3c6ddc7a6e096e408f11c4837d9813dcb","lrgirdwo","2021-04-18 14:46:09","false","cmocka: add support to build mocks on xtensa GCC

Allows the mocks to be built only for xtensa GCC. i.e a build test only.
Running on qemu requires more work.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",88,34,0
"thesofproject/sof","7666716e1278f8f3bbd0c71c06879e740365b7c1","plbossart","2022-07-11 18:02:09","false","topology1: CMakeLists: add topology for HP Omen 16

RT711 on link0 and RT1316 on link3.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",109,49,1
"thesofproject/sof","9c4e0e996336e895d0a7ed3a1387c126c0df010f","plbossart","2018-06-18 19:27:34","false","byt-ssp: minor changes to test slave mode

Comment out SDO tristating which gets in the way of test tools and
clarify comment for ETDS.

I2S and DSP modes seem to generate correct waveforms. Tested with one
Up2 board in master mode and one MinnowBoard Turbot in slave, with the
SDO/SDI lines samples with Logic Pro.

Only CBM_CFM mode was tested.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",1,1,0
"thesofproject/sof","2dc36eb75fd2b9c7341bf8c061914697ac41abb6","lrgirdwo","2021-05-10 10:33:13","false","topology: add missing codec adaptor type enum

This was missing for some reason. Fix it.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",81,35,0
"thesofproject/sof","b1ea2051f0df44d2f1d6f9a370ed4688c42ed917","lrgirdwo","2020-04-26 20:52:01","false","zephyr: numbers:  MIN/MAX INT already defined in Zephyr

Some macros are duplicated between SOF and Zephyr meaning we need
to undefine them in the short term until Zephyr and SOF can align
fully.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",94,23,0
"thesofproject/sof","25e6b20f03d60f9fbb978b03a548db340787ea40","cujomalainey","2018-11-16 23:24:32","false","Fix sof-apl-da7219 typo

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",40,5,0
"thesofproject/sof","a79614295ff4e1c07055be28726741a4dfb6f451","iuliana-prodan","2021-09-28 21:25:02","false","zephyr: build: add support for imx8m

Build SOF with Zephyr for i.MX8MP platform.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",121,40,0
"thesofproject/sof","5083b2b73af264a0b19a8fa35c27c93e279cc7bb","fredoh9","2021-05-11 20:01:42","false","docker: upgrade base ubuntu image to 20.04

Catching up latest LTS Ubuntu image, 20.04. It is supposed to be minor
upgrade but alsa-lib need to be set default library path,
/usr/lib/x86_64-linux-gnu/. Otherwise topology library loading error
is found for SOF tool build. This is typical error message,

alsatplg: error while loading shared libraries: libatopology.so.2:
cannot open shared object file: No such file or directory.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",84,35,0
"thesofproject/sof","2ea4bc0ec43c0da1646eaaaec6cc73d6bd513097","marc-hb","2022-12-16 23:26:13","false",".github/pull-request.yml: upgrade checkout v2 -> v3

This upgrade was already performed for other jobs in commit
f71eb15818fd ("".github/workflows: upgrade actions/checkout@v2 -> v3"")
and everything went fine. Finish the job and get rid of the last
warnings in the daily tests (example:
https://github.com/thesofproject/sof/actions/runs/3709176785)

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",91,54,1
"thesofproject/sof","29b1a9fc923b9afc5a3bcfa8a59cf82b72102f2c","marc-hb","2021-06-01 05:15:32","false","trace: rename trace_flush() to trace_flush_dma_to_mbox()

Pure rename, zero functional change.

The very poorly named trace_flush() function sounds like earlier
scheduling of something that would the same later anyway but that's
absolutely not what it does. Instead it copies pending DMA traces to the
shared mailbox.

As an example, in June 2020, PR #3195 commit 6c14e76c0d983 (""trace: Log
FW ABI and hash numbers"") added a tr_info() ""banner"" immediately after
to make sure tracing works. That included a likely misunderstood
trace_flush() call immediately after the tr_info().

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",83,36,0
"thesofproject/sof","35d9034090f443b21c3d493d6ad16e6d97e38560","marc-hb","2020-08-28 18:02:03","false","build-tools.sh: fix misnamed locals DO_BUILD_topology and _test

Easier to spot once all other shellcheck warnings have been fixed.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,27,0
"thesofproject/sof","ed8dd91654ef3538abbfad21bf3ec46f8e26c9d9","marc-hb","2023-08-28 21:37:10","false","CODEOWNERS: remove @aborisovich

Andrey is not at Intel any more.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",25,63,1
"thesofproject/sof","e38b07db970a5b069341751a328c101c26c7f2e0","lyakh","2021-09-01 11:07:19","false","zephyr: (cosmetic) fix indentation

Fix indentation in edf_schedule.c

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",120,39,0
"thesofproject/sof","2617ccb68ac92af4a26bf1599ace3b95af90c143","lyakh","2021-05-19 08:43:01","false","ll-scheduler: no need for a safe version of list_for_item()

The list isn't modified in schedule_ll_clients_reschedule() when
scanning it for the earliest task, replace list_for_item_safe()
with the usual list_for_item().

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",87,35,0
"thesofproject/sof","84e9791142345ebfe92044d014214b3f80a2e3e3","lyakh","2023-02-20 16:29:28","false","mixin-mixout: (cosmetic) use function arguments

.process() callback receives input and output buffer arrays as
function arguments, no need to fetch them from the module object
again.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,57,1
"thesofproject/sof","ce14849b5d9543091c58948ba97b92136d7e7147","lyakh","2023-01-04 16:58:47","false","topology2: remove a superfluous copier in nocodec

Use the simplified pipeline with just one module-type copier
connecting two pipelines.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",71,55,1
"thesofproject/sof","f5e2d56018e110e8bf42426e4e70c4f8c14649fa","lyakh","2022-09-28 13:37:30","false","ipc4: (cosmetic) clean up handler.c

1. make two global variables static
2. rename a function to avoid a name conflict
3. fix a return code from ipc_wait_for_compound_msg()
4. add a comment

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",97,52,1
"thesofproject/sof","39f2626c4788a58bfd916bd72b99150ea8bd6ffb","Vamshigopal","2022-04-07 13:28:31","false","topology1: sof-adl-rt1019-rt5682: add new topology

for amplifier rt1019 SSP1 link is used
for headset rt5682 SSP0 link is used

Signed-off-by: Vamshi Krishna <vamshi.krishna.gopal@intel.com>",114,46,1
"thesofproject/sof","a3a9eb3a2bafb73f36c43c78838f9e7ad8773a06","marc-hb","2020-06-23 06:20:42","false","cmake: no space after -imacros to avoid de-duplication

This is not needed yet as we use only one -imacros at a time but could
save someone a lot of time in the future; including the author of this
patch who will have forgotten about it in a few weeks.

For more details see
https://github.com/zephyrproject-rtos/zephyr/commit/e53c0d0ec7640b
and links from there.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",70,25,0
"thesofproject/sof","12f4834e409e4ac89b06c5e9398fa3c083331754","marc-hb","2022-01-14 00:53:44","false","zephyr: move GENERATED_DIRECTORY from source tree to build directory

This makes it possible to clean sof_versions.h.

Also remove DOT_CONFIG_PATH copy/paste which is unused in
Zephyr.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,43,1
"thesofproject/sof","eb344375228b15529838d6e4992bc7572650ab5e","marc-hb","2021-12-11 01:22:32","false","topology: redirection to workaround hardcoded alsatplg permissions

Use a redirection to work around hardcoded alsatplg permissions.
See bug https://github.com/alsa-project/alsa-utils/issues/126

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",121,42,1
"thesofproject/sof","659266685b4358ded2f779b29d34166432108f71","Potochi","2021-08-04 21:26:42","false","topology: remove side effects from macro definitions

This commit fixes the issue mentioned in #4583.

A temporary definition is introduced that takes it's value from
""CHANNELS_MIN"" if it is already defined, otherwise it is set to
a default value. This temporary is used instead of ""CHANNELS_MIN""
for the rest of the file. This avoids having the macro defined in
files where it shouldn't be.

In order to be completely sure it avoids side effects this temporary
is undefined after it is no longer needed.

Signed-off-by: Bud Liviu-Alexandru <budliviu@gmail.com>",113,38,0
"thesofproject/sof","a3c1f89c7a8956a1e8f5ebcc05310db691ed8b94","keyonjie","2021-07-01 06:44:26","false","memory: tigerlake: correct comments about HP SRAM organization

Some minor corrections to the tigerlake HP SRAM organization.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",86,37,0
"thesofproject/sof","18252757840d8bfe33f861920b252e57206ac8f3","keyonjie","2019-03-07 07:12:40","false","Topology: define schedule component macro for pipe-dai-capture

This can be used for schedule component sharing between pipelines.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",67,9,0
"thesofproject/sof","cca029c6f629dec009143b13155ae133970d7d94","slawblauciak","2019-07-15 10:24:06","false","dai: allow for runtime fifo params via DAI ops

This change introduces new DAI driver ops: get_handshake and get_fifo.
They shall be used to obtain DMA handshake and FIFO address information.

The motivation for this is the required by ALH ability
to retrieve this information during runtime,
based on parameters passed to us by the kernel/driver.

The DAIs no longer have to have hardcoded platform data (fifo/handshake),
the computation of those now may happen directly
in the DAI driver implementation.

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",44,13,0
"thesofproject/sof","148ecfe4d40f9ba9b21184dd5991fc8032071c30","tlauda","2018-07-23 15:42:39","false","dw-dma: use done bit for linked list transfers

Changes settings of GPDMA linked lists transfers
to use done bit to let the DMA know, that the next
data block is ready to be sent/received. This way
we are sure, that there will be no additional data
transferred between receiving interrupt and disabling
GPDMA channel.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",13,2,0
"thesofproject/sof","5d0dadf7de3d8a26b1f7806995bab5d475b570ed","slawblauciak","2020-03-27 08:50:59","false","alh: obtain hw params from ipc config

This allows the firmware to become aware of
the programmed format on ALH DAIs.

The change is backwards compatible,
in-case of ABI mismatch, the data will be filled with 0s,
which is consistent with previous values.

This change is required in the case of pipelines,
that contain components capable
of modifying the parameters of a stream, for example (de)mux.

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",65,22,0
"thesofproject/sof","caab1952f639f1518c5e7287d44ea878101a5594","slawblauciak","2020-08-11 09:42:56","false","config: disable sa panic by default

System agent as a debug feature has very strict timing verification,
if the timing is not met it will result in a panic.
Such drastic measures are not suitable for release builds,
as a single scheduling delay has the potential to render the DSP FW
completely dead until reboot, due to lack of a FW recovery mechanism.

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",73,26,0
"thesofproject/sof","b56fcbc44a6b56a9a0cac8ed0589e83c828e8e3d","keyonjie","2019-07-10 07:49:46","false","topology: sof-cml-rt5682-max98357a: change BE id to align with machine
driver

The BE id for amplifier pipeline should be changed to 6 to align with
machine driver (The commit ASoC: Intel: sof-rt5682: correct naming for
dmic16k).

Cc: Sathya Prakash M R <sathya.prakash.m.r@intel.com>
Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",42,13,0
"thesofproject/sof","4b82db8a62913cda27f6706893b740fda373221a","tlauda","2019-07-19 08:24:03","false","memory: remove static assert for HEAP_BUF_ALIGNMENT

Removes static assert for HEAP_BUF_ALIGNMENT, because it
doesn't make sense anymore to keep it. The value of this
define has been changed to PLATFORM_DCACHE_ALIGN, so it
will always be valid.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",50,14,0
"thesofproject/sof","0b569413fffabce151a15375bfa8d440ed153f8d","tlauda","2019-06-13 13:02:13","false","dw-dma: add support for one shot copy

Adds support for one shot copy to DW-DMA.
One shot means that transfer isn't circular,
so every copy is basically just restart of
DMA engine.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",48,12,0
"thesofproject/sof","46f0b58314db421e4d679228b1c1f5b43c9e8503","tlauda","2020-01-14 12:13:13","false","notifier: remove unnecessary lock

Removes unnecessary lock from notifier. Notification list
is allocated in core context, so it's not shared between
cores. There is no need to lock during unregistration.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",77,19,0
"thesofproject/sof","c9b18965d8ecdc3a4d7937af417e36e92f390947","tlauda","2019-03-05 15:19:43","false","component: remove double semicolon

Removes double semicolon when using comp_get_drvdata
macro.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",65,9,0
"thesofproject/sof","a8967f784cc18896513ce8a5002ca170b2971d69","saisurya-ch","2023-06-20 07:14:53","false","platform: amd: create common platform code for different amd platforms

 - Renoir and rembrandt have the common functionality.
   Moving the common code to common folder as per the recommendation from
   maintainers and to support future platform's common functionality.
 - Remove unused code.

Signed-off-by: SaiSurya, Ch <saisurya.chakkaveeravenkatanaga@amd.com>",46,61,1
"thesofproject/sof","abae50b54975d31e61cb3c7b1a448723fd5e9b74","tlauda","2020-01-17 10:11:36","false","component: make comp_driver_list static

Removes dynamic allocation of comp_driver_list struct.
There is no point, since it's only 8 bytes.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",79,19,0
"thesofproject/sof","41a5e795a7a094d78a9853f4c5ef603b27f54519","tlauda","2020-01-08 09:18:02","false","pm_runtime: pass sof context to pm_runtime_init

Changes pm_runtime_init function's argument list to take
sof context. It will be needed to add pm runtime data pointer
into sof context.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",72,19,0
"thesofproject/sof","012f87b570c28577c1dcf17b11ece874f76fb81e","tlauda","2019-04-16 13:47:47","false","dw-dma: remove unused conditional code

Removes unused conditional code from DW-DMA
driver.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",50,10,0
"thesofproject/sof","ec9d1cad948ec17db0ead41d2f350df7ce364eba","tlauda","2019-08-05 10:02:56","false","schedule: make some functions static inline

Transforms some of the short functions to static inline.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,14,0
"thesofproject/sof","eb4b124a9a6d29daa69220cbcee4caa0f64e3738","johnylin76","2020-12-01 10:33:43","false","tools: topology: Add Multiband DRC topology files

This commit adds the topology files for the multiband_drc component.
The control bytes are generated by the tools in tune/multiband_drc.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",75,30,0
"thesofproject/sof","93c592cc89a6d43a26b97f173a29b726eb75e875","abonislawski","2019-06-18 11:15:15","false","memory: reorder heap defines to match order from APL memory layout

This will make easier to analyse heaps in memory.h

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",45,13,0
"thesofproject/sof","75ee66ae7fed356b58e72ae64b32409a6a65a6fe","ranj063","2021-12-13 00:21:25","false","audio: codec_adapter: Remove get_samples op from the interface

In preparation for defining a generic module interface API that can
replace the existing codec_adapter interface and the comp_driver
interface, remove the get_samples op from the codec interface.

The get_samples op is only defined for the cadence codecs at the moment,
so the check for free space in the local buffer in codec_adapter copy is
bogus for other codecs because it will be 0 anyway.

So move the check for free space to be performed during the first copy
after initialization in the codec-specific code.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",120,42,1
"thesofproject/sof","509532e0b5bee832d93a5708145cb2ae23441032","ranj063","2022-01-11 00:21:31","false","codec_adapter: cadence: Make all interface ops static

Make all the ops static.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","507ad53b4830683dff94e95162824f23a2a8d6d0","makarukp","2023-01-11 08:27:22","false","tgl-h: hda: enable chain dma

Enable building chain dma component on TGL-H platform

Signed-off-by: Piotr Makaruk <piotr.makaruk@intel.com>",52,55,1
"thesofproject/sof","92fc7067cf6738476031f18887b78101783ed6d1","ranj063","2019-05-10 07:12:40","false","dai: assign/free link DMA channel during dai_config()

The recommended HDA HW programming sequence for setting
the DMA format requires that the link DMA and host DMA
channels be coupled before setting the format. This
change means that host DMA or link DMA channels be
reserved even if only one is used.

Statically assigned link DMA channels would mean that
all the corresponding host DMA channels will need to be
reserved, leaving only a few channels available at run-time.
So, the suggestion here is to switch to dynamically assigning
both host DMA channels and link DMA channels are run-time.

This change means that the DAI_CONFIG IPC will be sent
multiple times during link hw_params and link hw_free
ioctl. The DAI config parameters will remain the same
except for the link DMA channel that will be assigned at
run-time. A value of DMA_CHAN_INVALID from the driver
during hw_free indicates a request to free the current
link DMA channel in use. The current channel in use
is freed before assiging the new channel requested in
the DAI_CONFIG IPC.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",58,11,0
"thesofproject/sof","1d5b67f42a13b8f19d71e7f5154ec06bb2092dc4","ranj063","2018-06-01 02:29:06","false","host: add new component for file IO

This patch adds a new file component that testbench
can use to read in samples and write out processed samples. Both
text and raw pcm input formats are supported.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",1,0,0
"thesofproject/sof","f7e47aa6afd68ffd1b5a078c4d71f7baa87956c4","ranj063","2023-05-02 16:39:02","false","dai-zephyr/dai-legacy: Split the dai_new() function

Split the dai_new() function to add a helper function, dai_zephyr_new()
in preparation for this to be called from both a DAI device and copier
device.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,59,1
"thesofproject/sof","e3b6a326c60b2181690cd1d988ee5e95d4d2182c","ranj063","2021-10-06 22:11:41","false","audio: dai: Set dev_data for DMA chan

This can be used by the DMA drivers to access device-specific data.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",121,40,1
"thesofproject/sof","bfd5e61768713bf25fe85030268a2f860eb26cf4","ranj063","2022-01-14 21:18:48","false","topology1: remove setup config info from all codec_adapter topologies

Remove the setup config info from all initial config data in the
codec_adapter kcontrol's. This is no longer needed.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",117,43,1
"thesofproject/sof","9c93028e1ea5d8f1e0c1b57d2fe8e8514d768107","ranj063","2021-09-09 19:53:51","false","buffer: use cache ptr for inv/wtb

Buffer allocation has been changed to the runtime_shared
zone. Use cache ptr to do the invalidates/writebacks.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",118,39,0
"thesofproject/sof","da70ee00217c90167862738355dfdc4426992d0e","abonislawski","2020-05-26 09:50:20","false","jsl: add prefctl value

This will allow to enable LPS on JSL

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",97,24,0
"thesofproject/sof","73a413a38fc24a9763ac55df9ebb528219c5d139","ranj063","2022-10-20 01:04:56","false","ipc4_overlay: tgl/tgl-h: Add CONFIG_COMP_VOLUME_WINDOWS_FADE

Set the CONFIG_COMP_VOLUME_WINDOWS_FADE to use the windows fadr ramp
function in the gain module.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",96,53,1
"thesofproject/sof","da6ea477da5793d1ad67f71c020545ee70361ecf","ranj063","2021-11-02 19:50:19","false","topology2: Add class definition for muxdemux

Add the class definition for the MUX/DEMUX process type widget.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",125,41,1
"thesofproject/sof","cd8a71dee5b9019d741e0cd53c127847149d9add","ranj063","2022-11-09 04:06:09","false","pipeline-xrun: Reset pipeline when xrun occurs

When a pipeline runs into an xrun, the state of the pipeline will be
left as COMP_STATE_ACTIVE. Following this, when the application detects
the xrun, it will try and stop the pipeline. This will result in a
failure because the pipeline task has already completed and the state is
ACTIVE. This will lead to the PIPELINE_DELETE IPC fail as well and the
MOD_DX IPC fail because there are pipelines that are in the active
state. To prevent this, reset the pipeline when an xrun occurs to leave
in a READY state for pipeline stop, delete and DSP D3 entry to succeed.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",92,53,1
"thesofproject/sof","5062a8bf79a8ed2cb634294712b53249d3e1eb03","ranj063","2022-01-14 21:18:48","false","topology1: remove setup config info from all codec_adapter topologies

Remove the setup config info from all initial config data in the
codec_adapter kcontrol's. This is no longer needed.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",117,43,1
"thesofproject/sof","33112b74e8b734562addf8c876386f91b96d955d","nashif","2022-07-13 02:19:27","false","zephyr: use zephyr prefix for includes

Zephyr includes are now under a zephyr namespace, so use this.

Signed-off-by: Anas Nashif <anas.nashif@intel.com>",110,49,1
"thesofproject/sof","c7fc085bd52e9cf6952b4ecc6b5d56c36cc54e79","balakishorepati","2022-03-25 10:19:50","false","scripts: add rembrandt support

Add rembrandt build support.

Signed-off-by: Balakishorepati <balaKishore.pati@amd.com>",111,46,1
"thesofproject/sof","15092530ba123f141142e174750c1f51099ea7fa","ktrzcinx","2020-10-21 10:47:36","false","sof: Remove temporary .checkpatch-camelcase.git. file from git

This file is generate by checkpatch run, any temporary file shouldn't
be tracked by git. It was added to git by:
538eb6a: (""host: stub about required functions"")

Moreover file is problematic for developers working on Windows,
now try to pull changes from remote repository ends up with:
  $ git pull
  error: invalid path '.checkpatch-camelcase.git.'
  Updating 6e85152..7709924`

cloning repository ends up with:
   $ git clone https://github.com/thesofproject/sof.git
   Cloning into 'sof'...
   remote: Enumerating objects: 97, done.
   remote: Counting objects: 100% (97/97), done.
   remote: Compressing objects: 100% (96/96), done.
   remote: Total 67251 (delta 49), reused 4 (delta 1), pack-reused 67154
   Receiving objects: 100% (67251/67251), 13.41 MiB | 2.62 MiB/s, done.
   Resolving deltas: 100% (49768/49768), done.
   error: invalid path '.checkpatch-camelcase.git.'
   fatal: unable to checkout working tree
   You can inspect what was checked out with 'git status'
   and retry with 'git restore --source=HEAD :/'

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",72,29,0
"thesofproject/sof","9ebb2881e5cec4fc88ac599be82a1b1a7f1d068d","ktrzcinx","2020-02-18 14:00:21","false","dma: Add time unit in comment in dma_chan_data.period description

Time unit is crucial to properly use this field so it is convenient
to have it written in comment near field declaration.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",87,20,0
"thesofproject/sof","6713d90c21004f45ce5e25708087b8c77a78ff2a","ktrzcinx","2020-03-19 15:07:55","false","dw_dma: Split DMA pause and stop command

Data after pause command should be kept compatible to omit
pop noise on output. The solution may be waiting for FIFO
empty but it takes to long - up to 1 processing period time.
Another - introduced - solution is to stop draining new data
from buffer after pause, but keeping dma connection with dai
up to release command. In this place waiting for FIFO empty
shouldn't take so much time, so system agent won't panic and
data will be consistent.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",68,21,0
"thesofproject/sof","55d8d90980f54b030f6ad7733c6818b1012eaf98","mengdonglin","2022-05-23 01:49:41","false","xtensa-build-zephyr.py: pass SOF firmware file version string to rimage

Extract SOF firmware file version string major.minor.micro from the
generated sof_version.h, and pass the version string to rimage in the
signing phase. So rimage can write the version info to the firmware
manifest headers for cAVS platforms.

Signed-off-by: mengdonglin <mengdong.lin@intel.com>",117,48,1
"thesofproject/sof","6b8ee5c5c745b1babf086f1a838743791173620e","cristinailie","2021-03-18 10:23:28","false","kwd demo: imx8m: extend kwd functionality by using a neural network for detection

Implement a kwd function based on small
neural network able to detect yes/no
keywords. This represents an alternative
to the default kwd function and is
implemented in a separate file. Enabling
the usage of this kwd nn functionality is
done by enabling KWD_NN_SAMPLE_KEYPHRASE.
The inference function of the neural network
operates on 990 ms which are gathered in the
acquisition input buffer exposed by the detection
component.

Signed-off-by: Cristina Feies (ilie) <cristina.ilie@nxp.com>",72,33,0
"thesofproject/sof","96506488c890e2cc55a70f52ee40853dabf4d305","andrula-song","2022-10-26 08:45:54","false","Audio: EQ-FIR: fix the shift round bugs

Fix the shift round bugs caused by not suitable
xtensa intrinsics.

Signed-off-by: Andrula Song <xiaoyuan.song@intel.com>",95,53,1
"thesofproject/sof","a134878e46666307013084c32a9f7826bdfc58ad","pblaszko","2023-03-03 13:43:30","false","copier: fix format check for set_attenuation

Fix format validation in set_attenuation function.

In previous implementation, bitdepth was compared to sink->buffer_fmt
value, which is an enum sof_ipc_buffer_format (interleaved or not).

Format bitdepth is represented by stream.frame_fmt (enum sof_ipc_frame),
so it should be compared to this value.

Signed-off-by: Przemyslaw Blaszkowski <przemyslaw.blaszkowski@intel.com>",59,57,1
"thesofproject/sof","7aedc1604dd338f1905c3c6435ac84c31c08bf44","ranj063","2021-12-08 05:54:01","false","topology2: cavs-*-hdmi: replace the use of @args with Define

The Define block replaces the use of @args for topology2 in the alsatplg
compiler. So replace all users.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",123,42,1
"thesofproject/sof","399b97afe68edb00d8febcc5e1bdfc1488455c01","RDharageswari","2020-09-16 02:11:54","false","topology: Modify init params for the Demux Config

This patch creates macros for the channel map of Feedback
and reference streams. Also, modifies the feedback channels and channel map
of the Demux configuration to send voltage and current data to the
smart amplifier component and only voltage data to the host as Feedback
stream.

Signed-off-by: Dharageswari R <dharageswari.r@intel.com>",63,27,0
"thesofproject/sof","b2a325a3b7e66e9eff0068c6d6302b2f1afffb01","ktrzcinx","2020-08-31 08:44:43","false","cmake: Handle empty SOF_SRC_HASH_LONG

SOF_SRC_HASH always must have integer value, because of usage
them to initialize global variable in source code.
Variables, which may be empty should be used inside quotation
to prevent cmake incorect number of arguments error.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",73,27,0
"thesofproject/sof","f9a4506cc2892ecceba72c28e79c43703f661c8f","ktrzcinx","2020-01-17 09:34:54","false","selector: Define processing function typedef

To keep code clean and consistent create processing function
interface outside comp_data function definition to omit
duplicated definitions.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",79,19,0
"thesofproject/sof","f4bb9fe079223c74d3dbf414257aa767b0bc4e20","ktrzcinx","2020-06-02 05:53:59","false","ipc: Extract pipeline id dereference from ipc_comp_dev structure

Mechanism of comparison pipe_id from ipc_comp_dev will be used in
trace filtering, so this part should be moved to separate function
and allow code reusability.
Moreover function usage is compact and descriptive method to define
what given block of code should do, so after such a refactor code
readability is improved.
Include from pipeline.h is removed to omit circular reference.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",94,24,0
"thesofproject/sof","6b34a04527352171325714912c0d2b63c1aec89e","ktrzcinx","2020-04-22 06:46:58","false","ext_man: Move data section name to global define

This name is used in different part of source code so should refer
to single place instead by copied.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",79,23,0
"thesofproject/sof","d89b7d28f6367f1ec66c1d9f0e4d8ed5b9bc41c2","RanderWang","2023-01-11 02:41:50","false","ipc4: add google rtc AEC support for mtl

Signed-off-by: Rander Wang <rander.wang@intel.com>",52,55,1
"thesofproject/sof","ed2ed1e877b8dd4063b71def29b9dd06ae437141","xiulipan","2018-09-26 10:42:37","false","uapi: ipc: add sof_ipc_panic_info

Use sof_ipc_panic_info to store panic info inclueded filename and line
number.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",37,4,0
"thesofproject/sof","792bd414ee5629f72b1e24619510d6936eac28ce","xiulipan","2018-06-10 07:32:25","false","scripts: refine build all script

Add a flag ""-l"" to make rimage install only in pdw/local.
Also add parse for args, then simplify platform build for loop since in
parse the args will be all legal

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",1,0,0
"thesofproject/sof","51cab44e2a6fd90d767f97e830d17cac3af9f582","xiulipan","2019-01-17 10:56:26","false","scripts: install hexdump in docker

Need hexdump for the binary file read to detect qemu boot status.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",56,7,0
"thesofproject/sof","1f4a36e21f0002b536a4a80d58d3f82ad034f291","fkwasowi","2022-10-13 12:49:22","false","mux: fix module type

error: invalid type /error: key 'module' parsing error

Signed-off-by: Kwasowiec, Fabiola <fabiola.kwasowiec@intel.com>",97,52,1
"thesofproject/sof","7f7e48e27ec995a10dfa6d556cfbbb651eaa76c0","plbossart","2019-01-23 18:54:25","false","kmod_scripts: fix dependencies and add delays

dependencies are incorrect due to kernel changes

also add 6s delay after insert to let userspace complete its tasks and
go back to idle

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",56,8,0
"thesofproject/sof","426525b5942d6e731184d1a9dac0cd44d611858d","ktrzcinx","2020-01-13 06:53:22","false","pcm_converter: Rename function argument in pcm_converter_setup_circular

arhument name 'source' (instead 'buffer') implies that this
parameter shouldn't be modified inside function, what is true.
This change improves code readability.

Suggested-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",76,19,0
"thesofproject/sof","ff89639f36af217f071dca6717a9f386f3a3f908","ktrzcinx","2020-06-22 08:29:32","false","smart_amp: Fix memory handling in prepare function

Without source buffer invalidation before read, outdated
data may be fetched in situation when source_buff is inter core
buffer. Also feedback buffer needs to be writeback after edit,
to synchronise data in inter core processing.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",72,25,0
"thesofproject/sof","639b4a8cd3da483b7d93e61279c65c3c039db434","singalsu","2018-08-03 11:44:54","false","EQ FIR: Makefile changes for HiFiEP and HiFi3 optimized equalizer

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",16,2,0
"thesofproject/sof","8b40cd0c1a2035184836c44bf8a94df781b9a796","johnylin76","2021-04-08 13:03:30","false","drc: hifi3 implementation for DRC algorithms

Implemented DRC algorithmic functions with hifi3 library.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",79,34,0
"thesofproject/sof","f8bbd2483171a28563f0909e3870e03613967287","lyakh","2022-04-07 13:04:09","false","mixer: fix buffer acquisition

Instead of acquiring and releasing buffers locally multiple times,
do that once for .copy(), .params(), reset() and .prepare() methods.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",114,46,1
"thesofproject/sof","5f066f2698e0aac880586ab4c77cc59c5015666c","lyakh","2023-02-24 15:38:28","false","chain-dma: fix scheduling exception

Task state shouldn't be modified by client code, it is fully managed
by the scheduler. Setting task status to INIT after scheduling a task
is wrong and for chain DMA it leads to a scheduler exception. Simply
remove the offending line.

BugLink: https://github.com/thesofproject/sof/issues/7084
Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",57,57,1
"thesofproject/sof","0a3342f5d3273cd91f67f93f22f3cc544320363e","lyakh","2021-10-21 10:29:00","false","zephyr: (cosmetic) simplify a preprocessor conditional

Simplify a preprocessor conditional compilation in zone_is_cached().

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",125,41,1
"thesofproject/sof","5ae34cb8f998c6020c608e7d7a0bcb0983a0ae33","lyakh","2023-04-14 15:43:34","false","host: fix legacy build

SOF got broken for legacy internal driver builds when the host was
merged into the copier. Fix the breakage.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",50,58,1
"thesofproject/sof","ffc7cf5955de111cc311906fcf4b38a3f5857481","lyakh","2021-12-17 14:37:58","false","pm_runtime: unify function prototypes for cAVS platforms

All cAVS platforms use the same pm_runtime.c implementation, no need for
separate headers, repeating the same function declarations.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",117,42,1
"thesofproject/sof","bc5c1b49c8479979c0c49354dd5a2446c840efbd","lyakh","2019-01-10 10:20:39","false","dw-dma: (cosmetic) remove redundant variable initialisations

Remove several occurrances of redundant variable initialisations
and remove some trivial variables, that are only initialised
and used once without ever being changed.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",56,7,0
"thesofproject/sof","5777ef790313ec108b858ea0c781cab29ada71a3","lyakh","2020-08-31 15:31:55","false","uuid: use proper UUID trace format

Use ""%pU"" for all UUID traces, it will print lower case 'a'-'f'
hexadecimal digits and use little endianness by default.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",71,27,0
"thesofproject/sof","32fa6fd3876051b37c930b4bde8773dc15a12bd1","lyakh","2019-09-06 12:57:19","false","ipc: remove redundant initialisation

rzalloc() allocates 0-initialised RAM, there's no need to initialise
it to 0 immediately after allocation.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",60,15,0
"thesofproject/sof","904e031b24fcbe33af0a14b88a48768d23c53d7d","lyakh","2022-03-10 11:35:03","false","notify: resolve a name conflict

notify_data is a name of a structure, a field in a structure, a
static object and a local variable in several functions. Use a
different name to at least avoid conflicting static and local
variables.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",113,45,1
"thesofproject/sof","a780519e3fe76ac2b9ad64d29d7c11947c69085b","marc-hb","2021-10-13 23:23:25","false","test-repro-build.sh: exclude two more .ninja_ files

Also convert 'differ' to all caps 'DIFFER' to highlight different files.
No other functional change.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",123,40,1
"thesofproject/sof","0d39ff6b91165652f98065718b75c67d6b1164d4","marc-hb","2022-01-03 20:23:24","false","xtensa-build-zephyr.sh: add missing ""${SOF_TOP}"" quotes

Fixes commit a8c333b60615 (""xtensa-build-zephyr: add deterministic
sha256sum of final .ri file"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",115,43,1
"thesofproject/sof","05dded7b7b0ff398779b610b6be3c15a7d461e34","marc-hb","2021-01-18 23:56:31","false","[skip ci] translate .travis.yml to new .github/workflows/pull-request.yml

Full translation except the IRC notifications, appreciate if someone
else can add later. Seems much faster.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",69,31,0
"thesofproject/sof","e14ec39124421448ec6c5461616f426f22a62360","marc-hb","2021-11-19 21:02:42","false","sof_ri_info: change ""Other"" to ""Unknown key""

Now grepping for 'key' always works.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",129,42,1
"thesofproject/sof","d6f6a456c11a5f57c2e9fee154a3e5b64dc99a9a","marc-hb","2021-04-17 05:30:31","false","logger: fix column and header alignments

Increase default width from 10 to 12 to stop common misalignment,
especially in relative mode.

New timestamp_width() function to avoid duplication and
divergence.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",82,34,0
"thesofproject/sof","14c53857b2858525fa3586a10e50dccaaf22d5a2","iuliana-prodan","2021-08-25 21:34:19","false","codecs: cadence: src: Add external Cadence header for SRC support

This header is third party and contains expected definitions for the
codec adapter support to work.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",122,39,0
"thesofproject/sof","a89b9d41e55be6842996420cde978231ba7f2bb3","kv2019i","2023-08-21 17:05:41","false","platform: tigerlake: remove XTOS options

When CONFIG_TIGERLAKE is selected, omit all XTOS specific
build options.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",24,63,1
"thesofproject/sof","a918d9fbb4071745d15710724c14dbd541d68155","bkokoszx","2020-07-27 09:52:29","false","comp: updates model functions with more generic implementation

This commit refines component model functions in order to allow
component reconfiguration during the streaming (implementation
is based on equalizer set and get methods). It implements new
comp_is_new_data_blob_available() to check whether new data
blob is available. User can fetch pointer to data blob by
using comp_get_data_blob() function.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",77,26,0
"thesofproject/sof","5b8b5437d607da0b2a63f18a5fd7e6972ee99f24","bkokoszx","2020-09-24 12:29:42","false","pipeline: fix logs in pipeline_comp_params_neg()

Use current->pipeline instead of ppl_data->p as a
pipe_dbg() and pipe_err() arguments. ppl_data->p
is not set at that point and can cause unexpected
errors.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",66,28,0
"thesofproject/sof","90c14e56cbffe6c41ebfba739da34229472c0a8d","kv2019i","2022-12-30 12:22:12","false","dai-zephyr: handle NULL case when calling dai_config_get()

As per interface documentation of dai_config_get(), the function
may return NULL if the device is not configured for the requested
direction. Handle this case explicitly.

Currently no upstream Zephyr driver returns NULL, but e.g. dmic
driver returns invalid configuration when dai_config_get() is
called with DAI_DIR_TX as direction.

Link: https://github.com/thesofproject/sof/issues/6896
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",93,55,1
"thesofproject/sof","aedb5f286fabee703b0b9cbdacec5ea6ab531317","singalsu","2023-03-21 12:18:25","false","Drivers: DW: Set DMA lli_desc->sar and lli_desc->dar

This patch fixes DMIC capture for TGL platform in IPC3 mode. The
error seen in firmware trace is:

ERROR dmic_irq_handler(): full fifo A or PDM overrun
ERROR dw_dma_get_data_size(): xrun detected

The set of sar and dar is restored to driver. It was removed
with function dw_dma_mask_address() when removing support for
BDW and HSW platforms. The two first lines removed from the
function are needed for all platforms. The lines were added
to where the function was originally called.

Fixes commit d80635054ff4
(""platform: remove support for Broadwell and Haswell"")

Suggested-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>
Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",57,58,1
"thesofproject/sof","f9afd6ac9db07c8900793556b0c8a953d16aa0f8","marcinszkudlinski","2023-08-30 11:10:21","false","buf: remove buffer_acquire/buffer_release

buffer_acquire and buffer_release are no longer in use
remove stubs from the code

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",25,63,1
"thesofproject/sof","c5f50f533ff876600bc0899822e9763c7ab75cae","singalsu","2021-04-12 14:58:44","false","Drivers: Intel: DMIC: Separate decimation filters setup computation

This patch moves the run-time decimation factors search and filter
coefficients scaling code to separate module as preparation to add
more functionality to the driver. There are no changes to
functionality.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",81,34,0
"thesofproject/sof","2b8127640b09a056813ec33c72756a982c3497b4","lgirdwood","2018-08-20 09:47:58","true","Merge pull request #227 from tlauda/topic/dcache_align

alloc: align memmap to cache line size",18,3,0
"thesofproject/sof","33388bbe562dc82a10e33036eb84eb8f171763d4","mrajwa","2019-07-30 14:50:50","false","kpb: return -EIO if copy was called with wrong state

This patch makes kpb_copy() to return -EIO
if it was called while KPB was in wrong state.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",53,14,0
"thesofproject/sof","b6cea3369f344d71d6e04c642356622528507bc1","mrajwa","2019-05-16 23:38:37","false","detector: remove unnecessary preamble time verification

Remove unnecessary check of preamble time. Previously
it was allowing preamble time smaller than kpb buffering
time. There is no reason for such a constrain.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",62,11,0
"thesofproject/sof","443233c9a01cbdcac3d4e281d9c4096690d374be","lgirdwood","2018-11-26 20:12:41","true","Merge pull request #623 from lbetlej/move_stack_to_pg_sram

Power up only subset of HP SRAM banks on FW init (CannonLake)",42,6,0
"thesofproject/sof","160773718332aec395babfb57ba857ffc3acd924","mrajwa","2018-11-09 11:58:11","false","I2S: Not enough padding for 24/32b, 48kHz

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",38,5,0
"thesofproject/sof","eed3822b18012e5798d605b576343adfa15067d1","bkokoszx","2019-03-20 14:06:54","false","sof: include: displacement of cavs-version header

I've renamed cavs-version.h header to version.h and
moved it to platform/intel/cavs/include/cavs dir.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",65,10,0
"thesofproject/sof","b17280cc0e68c256c25f92952dba5604172e7808","singalsu","2020-11-06 16:11:07","false","Topology: Change minimum bus clock to 2.4 MHz for 48 kHz DMIC DAI

The driver configures a lowest feasible bus clock to save power.
Since the 48 kHz and 16 kHz DMIC DAI can now be instantiated in the
runtime there is possibility that the min. 500 kHz clock allowed could
be too low for a new 48 kHz capture when existing 16 kHz capture is
running.

The topologies those define a 48 kHz DMIC DAI need to increase the min.
clock to a sufficient rate. This patch changes every 500 kHz value to
2.4 MHz. This change does not change the external microphone clock in
any platform. The lower than 2.4 MHz clock rates never happened in
previous version to due to the 48 kHz DAI request in these topologies.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",76,29,0
"thesofproject/sof","4013215f93fa3f93619d351f946e4d2edf7b54bf","singalsu","2022-03-10 13:54:26","false","Audio: Move multiband_drc component source to end of sources

This patch fixes issue in testbench when multiband-drc is executed.
Since the library libsof_multiband_drc.so includes also crossover
and drc component sources the topology component register is done
for drc instead of multiband-drc. Therefore testench executes drc
when multiband-drc run is attempted.

Placement of multiband-drc as last in sources list is a workaround
to fix but recommended now since this impacts only testbench. The
proper fix of moving DRC and Crossover parts to library would be
a much larger change.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",113,45,1
"thesofproject/sof","afd585331ebd5d499b20a8a2034686ffad87f8c5","marcinszkudlinski","2023-08-24 13:27:30","false","Revert ""pcm:_converter: simplify the pcm conversion algorithm""

This reverts commit 87856a73d77b49bea4db8e75298414b26fccf95a.",26,63,1
"thesofproject/sof","689b91e6f2525edef8b4e4d1280d280f7930462f","singalsu","2022-11-17 14:42:07","false","Tools: Topology1: Add sof-hda-generic topology with SRC

This patch adds to sof-hda-generic.m4 macros HSSFX, HSSFX_FILTER1,
and HSSFX_FILTER2 those can be used to customize stream effect
for PCM 30. The macro defaults to volume so the default topology
build is not impacted.

The CMakeLists.txt in development is updated to build topologies
sof-hda-generic-src.tplg, sof-hda-generic-2ch-src.tplg, and
sof-hda-generic-4ch-src.tplg. The stream effect is set with HSSFX
to src-volume.

The pipeline pipe-host-src-volume-playback.m4 is added. It is similar
as pipe-host-volume-playback.m4 but a sample rate converter (SRC)
is added after PCM, before volume. The PCM capability is changed to
min 8000, max 192000 Hz.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",97,53,1
"thesofproject/sof","b3139af01c20f4f69703e7be7fb475e9497a97c1","ranj063","2023-04-21 16:54:43","false","topology2: Remove num_audio_formats attribute

This has been replaced by num_input_audio_formats and
num_output_audio_formats. So remove the attribute from all components
and mark the token ID as deprecated.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",53,59,1
"thesofproject/sof","93c130aeec00e1f2e7638db8e68f23576af2f38c","ranj063","2019-03-10 07:23:32","false","topology:sof-byt-rt5651: add virtual widgets for machine driver compatibitlity

Add virtual widgets for ssp2 RX/TX for compatibility with the
bytcr_rt5651 machine driver. This is needed now because a recent
change in the driver removed these from the dai definitions
which results in card registration failure.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",69,9,0
"thesofproject/sof","ce56786eb9f9e17ce7bb9c9265b5d7e0a1cde4ee","abonislawski","2019-02-11 11:12:43","false","Kconfig: make FIR component a config option

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",59,8,0
"thesofproject/sof","29f0aeb91388555914ab21df7ba54dfa2ab1483a","ranj063","2021-06-23 06:39:13","false","arch: extensa: cpu: reset stale trace point during power down

When a secondary core is disabled and re-enabled without a
D3 cycle, the POWER_UP IDC message end up reading the trace
point message from the first boot. Reset it during power down
to avoid this.

Suggested-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",74,37,0
"thesofproject/sof","4af7082ad0491041c824708641172eb6db117e4d","ranj063","2022-07-19 18:17:37","false","Revert ""eq_iir: Use the new module interface""

This reverts commit 9d9ba739b3d9745aef0953a092bd255f2e9a59c6.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,50,1
"thesofproject/sof","b5563511d67746f5f34e0c8dea0a2eaed39a9d94","chunxu-li","2022-03-03 09:37:08","false","platform: mtk: add afe-platform compile support for mt8186

Add afe-platform compile support for mt8186

Signed-off-by: Chunxu Li <chunxu.li@mediatek.com>",113,45,1
"thesofproject/sof","ba883515b760845d96ba417cb5f9f07397b7fb4e","dbaluta","2020-04-27 13:49:53","false","lib: imx8m: Switch to SDMA3

Both SDMA2/SDMA3 can move data from SDRAM to Peripherals. Anyhow, SDMA2
is traditionally used by non-DSP use case, so switch to SDMA3 to allow
for future use cases where we could have a scenario with multiple Audio
perhipherals running in parallel.

This also aligns the code with legacy firmware.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",92,23,0
"thesofproject/sof","1c9cf590aff2208fb011833cdb5cf72bdc5f3f9d","dbaluta","2019-01-27 18:22:18","false","reset: xtos: Add support for i.mx8 reset flow

Make sure correct CONFIG options is selected.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",58,8,0
"thesofproject/sof","e3df9e3550db8af79be513069649c35b1dfc1277","dbaluta","2020-04-24 09:21:35","false","drivers: imx: Set priority 0 to all channels

This is part of the initialization process, where
we make sure no channel is ready to run until all
configuration is done.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",72,23,0
"thesofproject/sof","7c214b83b7f3a92c7a7784a7872d61007e5fa3f1","plbossart","2018-07-26 21:01:00","false","topology: Fix SectionPCM macros

PR43 and commit dc10876c20a5 ('topology: changes to SectionPCM
macros') went a bit too far and removed a much-needed alignment
between pcm id and dummy dai id. Tested on APL/Reef Chromebook

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",13,2,0
"thesofproject/sof","e7f6430004140e492599e6f58a0339c48f43461b","yaochunhung","2022-01-10 05:35:55","false","topology1: mt8195: support 1ms pipeline capture period

1.Default support 1ms period capture pipeline to update host position
  more precisely.
2.Revise pipeline 1 to playback and pipeline 4 to capture in comment.

Signed-off-by: YC Hung <yc.hung@mediatek.com>",115,43,1
"thesofproject/sof","e21c1f31d51c9d61bd1e26f05b3be2ca325f53ad","lrgirdwo","2021-05-04 10:28:41","false","ipc: component: Add direction attribute for component api

Add direction to the component attr api. This decouples the host data
from the handler logic.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",81,35,0
"thesofproject/sof","23af4a1f93c91047729fb02cfc75f17249a198ad","lrgirdwo","2021-08-06 07:54:46","false","idc: tell users which IDC message timed out.

Let the users know what message has timed out on other cores.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",116,38,0
"thesofproject/sof","9e9120a1549f48e8365a90a6bb0b65d9b36b5456","ranj063","2023-09-08 15:00:00","false","topology2: google-rtc-aec: Remove byte control

The blob contains the input/output audio formats but these are already
passed during module init based on hw_params. So no need to have the
byte control for it.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",20,63,1
"thesofproject/sof","7bda1c831541e1fa4ace9fe6611fbf28b3f87edb","ranj063","2020-09-23 03:09:30","false","config: cht: remove tone comp

Remove tone from the cht defconfig to reduxe code size.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",67,28,0
"thesofproject/sof","8c11871ca7229819c9fcab32cb4fae5d525b71c8","ranj063","2022-01-31 20:36:03","false","codec_adapter: fix calculation of local buffer size

The local buffer is used for copying the output samples. So, its size
must be calculated based on the out_buff_size set by the module instead
of the in_buff_size.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",104,44,1
"thesofproject/sof","f9eb86c354b24ead3d2d28cfbf40f9594baa5023","abonislawski","2019-05-28 08:26:57","false","alloc: use linker heap position in sanity check

This will replace a fixed position define with a real linker position, which allows to set heap position by linker

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",63,12,0
"thesofproject/sof","388cf4f9f4cb75dd726fdb8ea8a980405cd87590","ranj063","2021-10-26 03:52:14","false","pipeline: use buffer acquire/release

instead of buffer_lock/unlock() which will be deprecated.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",127,41,1
"thesofproject/sof","e9353b0eedf919f3911950f64ef7cf9a9c8d7db3","ranj063","2023-05-20 18:11:31","false","topology2: Introduce a new pipeline class

This is specifically meant to be used with ALH DAI copiers.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",53,59,1
"thesofproject/sof","d886a6101035eb7e1329a2a98b990503f70ccbe0","jajanusz","2018-08-02 12:09:24","false","platform: refactor: deduplicate code for APL&CNL

First step of deduplicating platforms code.
Keeps binaries identical with just removing duplicated code.

It is critical for maintainability of platform-specific sources (and adding new
platforms in the future).

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",14,2,0
"thesofproject/sof","c48a5281a05a857bf9cc301f484df8b9ffc4a31a","lkoenig","2022-01-18 15:44:16","false","topology1: google-aec topology

Add topology to include google-rtc-audio-processing to a main topology.

Signed-off-by: Lionel Koenig <lionelk@google.com>",113,43,1
"thesofproject/sof","af78d51912dcd21ec582f4eaede6efa2fa2e9b77","mrajwa","2020-10-07 17:34:41","false","codec_adapter: call middle layer interfaces

This patch calls middle layer interfaces to perform
codec specific operations.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",67,28,0
"thesofproject/sof","fa639cf3074804f4d901920f7f3a9c7dcb9e646e","lgirdwood","2021-04-07 12:49:10","false","doxygen: codecs: exclude 3rd party codec headers from Doxygen

Lets try and keep 3rd party codec headers as-is without any modifications.
This include doxygen as some references may be in closed headers.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",79,34,0
"thesofproject/sof","6a12fb989c199d09d46a22c990883ade1567f0d3","lgirdwood","2018-09-29 14:46:42","true","Merge pull request #439 from tlauda/topic/xtos-remove-debug-write

arch: remove debug write from xtos",37,4,0
"thesofproject/sof","eb6d587f02ac5bce66b8395ab81a28a9a21bfcc6","lgirdwood","2018-09-20 10:46:31","true","Merge pull request #396 from juimonen/eq_reset_fix

eq: iir: don't destroy eq config in reset",36,4,0
"thesofproject/sof","9f2fd0c746beac23e423185462eba26d1a6898de","tlauda","2019-02-20 10:55:15","false","component: add channel selector for keyword detection use case

The component allows to select from a topology file one of channels
from an input buffer to be copied to an output buffer (provides channels
count reduction functionality). In case the component is configured to
output 2 or 4 channels it works in a passthrough mode.

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>
Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",62,9,0
"thesofproject/sof","e08f951591579254730ec75e54a94557aa4581de","tlauda","2019-09-13 13:38:05","false","schedule: rename SOF_SCHEDULE_LL to SOF_SCHEDULE_LL_TIMER

There can be many potential low latency scheduling domains,
so let be more specific here.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,15,0
"thesofproject/sof","90ac563ceec2cd3027902b27e35c0be5ff4c186c","saisurya-ch","2023-06-20 08:27:15","false","Add HS I2S DMA capabilities.

Define HS I2S DMA capabilities.

Signed-off-by: SaiSurya, Ch <saisurya.chakkaveeravenkatanaga@amd.com>",46,61,1
"thesofproject/sof","1c93a4c15fdc72ae126cf3865be95a33caf29dbd","tlauda","2019-08-07 15:42:36","false","schedule: pass sof context during scheduler init

Passes sof context structure to the schedulers during
scheduler initialization. It will be required by the new
EDF scheduler.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",53,14,0
"thesofproject/sof","e96efc163802a8d2e44b1e8e2c8d1b0f6905ead3","tlauda","2019-06-03 11:21:09","false","sof: unify multiple ALIGN macros

Unifies multiple different align macros spread
across the source code. Now we have ALIGN_UP and
ALIGN_DOWN macros defined in sof.h.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",68,12,0
"thesofproject/sof","4fd4aa1cfa9aadc3e08e6f66dec11682943da922","tlauda","2018-06-25 11:36:50","false","core: fix wrong inclusion of core-isa.h

Moves inclusion of PLATFORM_INCDIR before SOF_INCDIR.
This temporarily fixes wrong inclusion of core-isa.h from
xtensa-root directory during build with gcc. It's the best
solution for now, because that unwanted header comes from
Xtensa Newlib C library, which will take much more time to change.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",4,1,0
"thesofproject/sof","6ec25256daf1480227027c20e481b4f80e21ba36","tlauda","2019-10-11 11:51:15","false","dma: add irq_callback to dma_chan_data

Adds irq_callback to dma_chan_data. It's called by the
DMA domain right after receiving an interrupt, so should
execute very time-sensitive operations.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",61,16,0
"thesofproject/sof","818090f962073142f4c67b3eddc07c71c74621b7","tlauda","2019-09-13 13:41:59","false","schedule: add SOF_SCHEDULE_LL_DMA

Adds SOF_SCHEDULE_LL_DMA as the new low latency scheduling
domain type.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,15,0
"thesofproject/sof","b3c9ec46d91942be8bb55bf6fee6bfdbf8033723","singalsu","2021-09-21 10:58:17","false","Tools: Test: Audio: Run testbench tests with valgrind

The run with valgrind will error if memory leaks are detected.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>
Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",118,40,0
"thesofproject/sof","634de25275186722190ea73d943008e0993df91d","singalsu","2021-04-26 14:18:14","false","Audio: DAI: Error on attempt to use null pointer

This patch adds error handling for case where DAI data pointer
to DMA channel is not set. The situation can happen if ASRC tries
to set up timestamping before DAI has been prepared.

More specifically access to dd->chan->index with NULL in chan
caused a DSP panic.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",85,35,0
"thesofproject/sof","fce4f9c9f0bc97457f0ea640c1ef268ca918d112","singalsu","2022-11-09 15:50:31","false","Tools: Testbench: Avoid build fail with crossover that uses IIR DF2T

This patch adds for testbench CONFIG_MATH_IIR_DF2T. The issue was
triggered by add of IIR DF1 as default. Crossover component is
still using DF2T.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",92,53,1
"thesofproject/sof","3334bede2a793b53dea8b24a60eb06a877a17cdc","singalsu","2022-03-14 13:23:18","false","Tools: Testbench: Add components to testbench load

This patch adds load possibility of mux, demux, and
google-rtc-audio-processing to testbench.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",108,45,1
"thesofproject/sof","5db9cb8f705a0bad2280428c2c4a34796c6f5634","cujomalainey","2021-02-11 20:54:53","false","smart_amp: remove initial set

Ret is unconditionally set later, so initialization is irrelevant.
Cppcheck find.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",73,32,0
"thesofproject/sof","548de645512b1554e9c01888a88d9a9438e4d3cf","jsarha","2022-09-23 13:13:44","false","tools/probe: Move data_to_copy variable down in scope

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",97,52,1
"thesofproject/sof","b9fbe7798f5a19104d7ffaddb44e8bf5bc965574","tlauda","2019-09-19 14:19:49","false","topology: apl: glk: use 3 periods for SSP and DMIC DAIs

Changes number of SSP and DMIC DAI periods from 2 to 3.
This way we can support both timer and new single DMA
channel scheduling.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",61,16,0
"thesofproject/sof","ec15c0ac38b5e983dd086a7b2f0639ad200fda78","tlauda","2020-02-04 07:29:26","false","component: implement component sharing functionality

Implements component reallocation in shared memory. This way
cores can share components, which are part of one core's pipeline,
but runs on other core.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",77,20,0
"thesofproject/sof","0a4b7b4236f0fcfd3283f34364bb3887c6bc2477","tlauda","2020-02-05 08:53:29","false","buffer: add locking mechanism

Adds locking mechanism to buffer. It will help with
synchronizing buffer accesses by multiple cores.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",77,20,0
"thesofproject/sof","9e0d994e8d3ab0316e1fdd59fdf98d603e769cb4","tlauda","2019-09-20 14:01:50","false","agent: refactor agent to be more useful

Refactors agent's functionality to really verify DSP
responsiveness. Instead of updating last_idle time
on passive level before entering waiti, let's change it
to last_check and update it on actual scheduler task
execution. Task is executed above passive level, so it
should preempt every other long running processing.
Since we don't have any additional precautions to guarantee
that low latency tick will happen exactly at the scheduled time,
let's define warning and panic thresholds to control stability
of the system.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",63,16,0
"thesofproject/sof","be53c86917e1b4f3762381525a6fbff9a8661ec0","tlauda","2018-06-22 13:55:55","false","cavs: pm_runtime: scale down host dma l1 exit times

Scales down host dma l1 exit times, since they were defined
for Fast RING clock, but implementation uses XTAL based timer.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",4,1,0
"thesofproject/sof","843fd70e9189a9a0914dac3a38451647c2c19051","aiChaoSONG","2023-03-15 06:04:36","false","topology2: cavs-nocodec: include SSP1 pipelines conditionally

There is pinmux conflict between SSP1 and DMIC
on MTL RVP, add a new nocodec topology target
for MTL, on which only SSP0 and SSP2 are enabled.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",56,57,1
"thesofproject/sof","56abcade565e7c448c0a65145c73151549a8ded4","ranj063","2023-03-16 21:56:13","false","boards: intel_adsp_ace15_mtpm: Enable dw_dma_suspend_drain for ACE

It is recommended to suspend and drain before stop.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",56,57,1
"thesofproject/sof","98e9d3f0f69220a3022557707673882eb15ee185","ranj063","2022-09-28 15:43:09","false","module_adapter: Add support for modules with multiple sources

Add support for modules with multiple sources such as the mixer.
Expand the scope of the simple_copy flag in struct processing_module to
include components that have multiple input buffers but only a single
output buffer and do not need any deep-buffering.

Make changes to the prepare, copy and trigger callbacks in the
module_adapter ops to add support for handling multiple input buffers.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",97,52,1
"thesofproject/sof","561f4b036c7ede52e62cd782d225a01d40934f5e","ranj063","2023-06-12 16:32:10","false","topology2: sdw-jack-generic: Fix the number of input pins

This was missed earlier.

Fixes: f8ad12734db1 (""topology2: cavs-sdw: Add option for passthrough pipelines"")
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",47,60,1
"thesofproject/sof","609d8a4e37476075a5190f900179c62acea412ad","ranj063","2018-10-11 05:30:10","false","eq: update frame fmt and period bytes based on source fmt

update frame fmt and period bytes based on source format during
prepare to be able to handle all three PCM formats.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",33,4,0
"thesofproject/sof","bc92d766fc126746af24ba90c25d00404f378f46","abonislawski","2021-09-21 05:10:14","false","platform: lps_wait_for_interrupt entry core check

LPS functionality is limited to the primary core

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>
Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",118,40,0
"thesofproject/sof","6850be91ba481c1f26aa3e6b91dfb2c86fc4a914","ranj063","2023-10-12 16:12:10","false","topology2: deepbuffer-playback: Replace audio_format objects

Use the input_audio_format/output_audio_format objects explicitly.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",10,64,1
"thesofproject/sof","337bd8ea72ab6a280d7ae0ed94835e3a25595209","ranj063","2022-10-19 22:51:25","false","ipc4: handler: make error message more informative

<err> ipc: ipc4: 0 failed err 12
The above error isn't so informative.

Replace the target number with the actual IPC message names.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",96,53,1
"thesofproject/sof","86a94912f71ef6e5d3d5ee9d9700cdb0098b598b","lrgirdwo","2021-04-13 12:44:39","false","ipc: move ipc ABI specific code out of common IPC logic.

ipc_comp_new() and ipc_comp_free() are ABI specific so move to
ABI handler. Code move only, no changes.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",81,34,0
"thesofproject/sof","29bdba76d7fb3cce64efb55dca78c73f21a325cb","lbetlej","2019-03-08 15:02:51","false","logger: add KPB component name

Logger will display a proper component name for traces
from KPB component.

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",67,9,0
"thesofproject/sof","b4febf17795f7cee3855424d08f55268fc0c83c0","plbossart","2021-06-14 19:13:47","false","intel: ssp: fix missing return code on bclk configuration issue

when the bclk is not based on the default source, we will thrown an
error message but return the result of the mclk configuration.

Fix by adding an explicit -EINVAL return value.

Reported-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",69,36,0
"thesofproject/sof","b0336346f7377cd1189ccddab7eda8609a20dcfe","singalsu","2022-07-26 11:59:28","false","[SKIP CI] Tools: Tune: SRC: Add missing gain to generate scripts

Patch a0ff2bb277 added field .gain to configuration data for
src_generate() but the previous generator scripts were not
updated to set it. This patch fixes in them the error about
undefined gain by setting it to previous -1 dB default.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",111,50,1
"thesofproject/sof","d3884977cd404bac1ae37162abc5e90b372b1151","marcinszkudlinski","2023-08-24 13:27:30","false","Revert ""ipc4: add S24_4LE_MSB format support""

This reverts commit 784630f80b43e5b22e423443093b4b6cca9c9140.",26,63,1
"thesofproject/sof","fc9fe6c043be53f23b0b265b6d888cfa2895fa48","marcinszkudlinski","2023-09-06 12:28:04","false","sparse: remove all sparse_cache from buffer related structs

struct audio_stream __sparse_cache => struct audio_stream
struct comp_buffer __sparse_cache => struct comp_buffer
struct sof_source __sparse_cache => struct sof_source
struct sof_sink __sparse_cache => struct sof_sinkurce

this commit is 100% generated by editor find/replace
+ one cosmetic change (intent correction to make checkpatch happy)

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",21,63,1
"thesofproject/sof","31a6a27ece6cc2a090c7c3d14921c4d101a09bcd","singalsu","2020-04-23 17:15:46","false","Tools: Test: Relax signal level pass criteria in quick chirp test

The criteria of overall -3 dB RMS attenuation was too tight
for sample EQ responses to pass. With new -6 dB criteria the
used EQ loudness responses do not trigger error.

The chirp test is only a quick generic component health check so this
is not critical. The other AES17 tests will catch minor characteristic
changes.

The other changes are cosmetic and improve result print and plot
output look.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",71,23,0
"thesofproject/sof","e99bae6187c6bd1c64948427a5caf2b5fd6da4bf","jajanusz","2019-06-01 20:52:02","false","tools: fix sh-bang in scripts

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",72,12,0
"thesofproject/sof","0beb08681b06f205919dc50508d7654aec59cf35","jajanusz","2019-05-24 12:19:12","false","kconfig: move CAVS_VERSION configs to platform

These definitions are more related to the platform/ip than drivers.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",64,12,0
"thesofproject/sof","9b0209ba8b6b8e0b0a7dccb5828824541a00e453","johnylin76","2021-01-11 06:42:41","false","sof: drc: fix drc_sin_fixed function

drc_sin_fixed() utilized sin_fixed() while its input range is
non-negative. This commit fixes drc_siz_fixed() for negative input by
using ABS(input) to sin_fixed() and then inverting the output sign.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",75,31,0
"thesofproject/sof","3de98c78862290e345a1f488c626625c9ec5c94d","andyross","2022-08-29 18:01:32","false","sof/trace/trace.h: Add missing Zephyr platform header

Can't use k_*() APIs without including kernel.h

Signed-off-by: Andy Ross <andyross@google.com>",112,51,1
"thesofproject/sof","e11c3c9e51c57374235a0c54bfdb86fa73e7d0bc","cujomalainey","2021-05-03 22:23:15","false","actions: rename fuzzer job

rename scant to ipc as this is the ipc fuzzer

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",81,35,0
"thesofproject/sof","8f9c7ee2e1e981c420353539b315736ad4d96f7f","akloniex","2019-05-29 18:33:24","false","MUX: Relocate mux source and header files to match structure.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",68,12,0
"thesofproject/sof","85d68d092150736d4323f6cffe4f3848da2804ec","fredoh9","2022-06-01 16:58:46","false","docker: change indentation and add HOME variable

No functionality change. Add some logs and minor clean up.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",115,48,1
"thesofproject/sof","d81f80196d8d04be0c0c013f35d5bf2933a3ae9c","btian1","2023-05-15 03:26:34","false","copier: remove one case in copier_get_attribute

COMP_ATTR_VDMA_INDEX is a copier internal usage case, no other
module used, so remove and replace it with direct assign. At the
same time, this keep get_attribute align with module adapter format.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",51,59,1
"thesofproject/sof","84e4484b9463b27c891a25f2f3de8919ac09857d","btian1","2023-05-09 03:55:16","false","copier: remove ipcgtw copy case

ipcgtw copy is empty, due to ipcgtw device will be removed, so
remove its copy function.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",53,59,1
"thesofproject/sof","dbd89a62f7859826edfc68c6fe1a10aab4c99ce4","btian1","2023-10-24 07:04:16","false","Audio: copier: move copier related header to copier folder

These headers mostly only used by copier itself, move to
copier folder will make this folder cover all related code.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",8,65,1
"thesofproject/sof","fc4d7b8519e4ca3c7cf9eb51e6ab2d8ac6ada988","ktrzcinx","2021-09-01 06:33:33","false","rimage: Fix error message content after adsp malloc fail

Message should reflect error root cause.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",121,39,0
"thesofproject/sof","92d63e2bb308abf1e1f8c4001bc5d2fb126c823c","ktrzcinx","2019-10-28 13:48:16","false","trace: Add missed pipeline id to dai traces

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",68,17,0
"thesofproject/sof","b72c7ec2df19de69efb57902edd2b277e169ae2f","ktrzcinx","2020-10-27 08:12:48","false","rimage: Update to commit 0d2af68a9e2

Included changes:

0d2af68a9e2b gitignore: Add checkpatch temporary file to gitignore
8249abfa11f6 toml: Keep available manifest parsers in list
c98a29da14e5 toml: Extract version parsing to separate function
b9cf1aeb3b95 pkcs1_5.c: don't pretend everything is fine when failing to sign
e87db0f08010 pkcs1_5.c: intermediate named constants in ri_manifest_sign_v1_x()
86754c138941 hash: Assert memory overflow during hash calculation
37323face2f9 Merge pull request #28 from marc-hb/copy-sram-overflow
7322c023493a manifest.c: assert buffer overflow in man_copy_sram()

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",75,29,0
"thesofproject/sof","e36f584d0cdf1aa5c601edc26a38a60898791839","bkokoszx","2019-07-21 10:12:10","false","dai: dma: add dma buffer alignment in dai_params()

Add dw dma buffer alignment in order to provide the
same buffer alignment as in the host side. Without
alignment it may appear mismatch between host and
dai buffer in simple pass-through pipeline (host->dai).

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",51,14,0
"thesofproject/sof","61a51bc78971a0e04bfa512af6b36db22ac873dd","bkokoszx","2020-01-27 09:04:31","false","kpb: fix buffered_data calculation

This commit introduces proper calculation of buffered_data,
which should not exceed buffer_size value. Firstly, we calculate
free space in history buffer and we add minimum value from
copy_bytes and hb_free_space.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",78,20,0
"thesofproject/sof","3541b37d46ca318bdc75be2551d536e14c5e9e8c","kv2019i","2021-05-17 13:45:07","false","kconfig: move XTOS build specific debug options to a separate file

Some of the DEBUG options are only used in the XTOS implementation
and do not impact e.g. Zephyr builds. Make the split explicit by
moving these options to a separate file.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",86,35,0
"thesofproject/sof","240cd39a22379c092a441a16710dccbb16b3ed7b","bkokoszx","2019-03-20 14:10:22","false","trace: removal trace logic when CONFIG_TRACE is not set

I've remove trace core logic from build when CONFIG_TRACE
is not set with Kconfig. When driver tries to enable traces
in case FW was built without tracing, FW returns error.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",65,10,0
"thesofproject/sof","ad03e04fdf1844c3242dc2e7bfa752c77b76c452","bkokoszx","2019-05-15 13:32:17","false","cavs: ipc: added ipc received and processed counters

I've added counters for processed and received ipc tasks.
They are dropped after trace points in memory window.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",66,11,0
"thesofproject/sof","59028ad3d136d1ff5030009e9727295363d1db9f","kv2019i","2023-08-16 17:29:37","false","drivers: Intel: remove Intel XTOS drivers

Now that Intel cAVS2.5 has been migrated to use native Zephyr
drivers, we have no need to keep the Intel specific XTOS
drivers in the tree anymore.

Adjust board configuration files to not refer to removed
Kconfig options.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",24,62,1
"thesofproject/sof","08e0841735b42849f3545a1d5213a08dc4b371c9","lgirdwood","2018-08-24 13:28:39","true","Merge pull request #261 from tlauda/topic/use_is_core_enabled

cpu: use arch_cpu_is_core_enabled in other functions",21,3,0
"thesofproject/sof","5ddbd34ba91742b13cb1ea8d9e43e27e1f8b35f8","singalsu","2023-01-24 09:29:11","false","Tools: Tune: EQ: Add tplg2 blobs create

This patch contains the changes to export EQ blobs in both tplg1
IPC3 and tplg2 IPC4 formats.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",55,56,1
"thesofproject/sof","5911f7f6614b1d02b545864490644b0a78e39661","singalsu","2022-02-24 16:57:29","false","Audio: DRC: Optimize source and sink buffers access

This patch replaces the audio_stream_read/write_frag_s16/s32
functions based source buffer read and sink buffer write with
audio_stream_bytes_without_wrap() based blocks access.

The drc_s16/s24/s32_default processing functions are simplified
by move of common delay input sample operation to separate
function. The same function is used in DRC disabled and enabled
part of processing functions.

The pass-through mode is optimized with generic audio_stream_copy()
that is a common function for all s16/s24/s32 formats.

The MCPS savings are in TGL-H for stereo 48 kHz stream
- Normal operation 68 to 50 MCPS, saving 18 MCPS
- Pass-through without delay 22 to 6 MCPS, saving 16 MCPS
- Pass-through with delay 21 to 7 MCPS, saving is 14 MCPS

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",110,45,1
"thesofproject/sof","d6fb9fd28394294fb037b8a9567a4d19be108215","singalsu","2018-11-26 10:51:07","false","IPC: DMIC: Add wake_up_time and min_clock_on_time parameters

This patch adds the two parameters into DMIC configuration
IPC. The parameters will control DMIC HW muting in capture start
and ensure in capture stop that the clock has been kept active
sufficient long time. The implementation of these features is
done later.

The reserved[] vector is reduced by the amount of added
words. Also the ABI minor version is incremented.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",41,6,0
"thesofproject/sof","109450e6fdaa9308732e0358dc10680e673f7d58","singalsu","2020-02-21 17:39:53","false","Tools: Test: Update SRC testbench run script

This patch updates the SRC to run with the updated test topologies
set. The script is also cleaned up a bit.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",80,21,0
"thesofproject/sof","ac0b79dad9e6be65beca1d96f5905b4ec931817d","singalsu","2020-02-11 12:23:35","false","Topology: Add capture pipelines to APL ASRC PCM512x demo topology

Since the new sof pcm512x machine driver supports the DMIC backend
it's practical to move the ASRC capture pipelines into this topology
to avoid need to change into nocodec mode for ASRC capture tests.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",79,20,0
"thesofproject/sof","f9744ba045f9241496a8bde6d17fcd81d6f01d33","singalsu","2020-12-10 16:50:47","false","Audio: TDFB: Add enum control for direction and switch on/off control

This patch adds the enums set/get controls for beam direction
(azimuth). The switch control provides a beam-off bypass from the
configured microphones to channels. It is used when directional
capture is not desired.

The configuration blob is updated to pass filters settings for
multiple angles, a bypass coefficients set, and microphones (x, y, z)
coordinates for direction enum get (implemented later).

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",74,30,0
"thesofproject/sof","6f65414176df01ed05fa571c61d1764f06d9db00","singalsu","2019-06-05 11:10:41","false","Volume: Use min and max volume scale values from IPC

This patch adds feature to retrieve volume scale min and max from
IPC if the parameters are set. Volume min and max are now used
with ramp time parameter to compute gain ramp step to achieve
constant rate ramps with any volume scale. If the min and max are
zeros the previous FW operation is preserved.

Previously the firmware did not know the volume range so the
volume code uses in volume request a check to prevent exceeding
ramp length specified in topology by step size re-adjust. It was
done to prevent very long ramps to happen with volume scales with
large gain. However the smaller transitions remained longer than
necessary. This patch fixes that last remaining issue.

The ramp length check code is preserved to be compatible with
kernel versions those do not provide the min and max volume scale
values. When provided the check code has no impact.

The patch includes some cosmetic re-arranging of volume comp data
struct fields in addition to adding new the fields vol_ramp_range,
vol_min, and vol_max.

Also error traces were added to notify if the volume min/max or
request has been limited to fit to supported volume range.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",61,12,0
"thesofproject/sof","2c86a890986af323f3700c14f3d59d140dc4eb10","abonislawski","2022-01-17 14:10:45","false","ipc4: invalidate HOSTBOX for comp_new

This will allow to remove invalidate calls for each component init

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",116,43,1
"thesofproject/sof","3fa5085a4e786754588fc503359133a17574dd8e","maruthi-machani","2023-05-12 06:41:45","false","topology1:amd: topology changes to support virtual playback passthrough for mux

Topology changes to support virtual playback passthrough for mux

Signed-off-by: MARUTHI MACHANI <maruthi.machani@amd.com>",50,59,1
"thesofproject/sof","b5d6c71ba45eee4af12616d0377c1fdd7c8d2799","libinyang","2018-12-06 02:38:17","false","dw-dma: refine the channel_get messages

The original messages in channel_get are misleading. Refine the messages
to show the right messages.

Signed-off-by: Libin Yang <libin.yang@intel.com>",42,6,0
"thesofproject/sof","87856a73d77b49bea4db8e75298414b26fccf95a","RanderWang","2023-07-17 09:16:45","false","pcm:_converter: simplify the pcm conversion algorithm

Remove gateway type and direction for pcm conversion check and will move
them to copier module. This will make pcm conversion check more general
and simple. Also remove s16/c32 for gateway since it is never used.

Signed-off-by: Rander Wang <rander.wang@intel.com>",32,62,1
"thesofproject/sof","47c6dba606314e8d21379be4b4e2d6b4fd4b54da","ranj063","2021-11-02 19:52:18","false","topology2: volume-capture: Add all includes

Include all dependencies to be able to build the conf file individually.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",125,41,1
"thesofproject/sof","7f04a2aaf5d21f49f92b84dad2c3ea7f390ff9f4","softwarecki","2022-10-26 15:03:37","false","dma: Rename dma_get_attribute to dma_get_attribute_legacy

This commit prepares for the introduction of the
dma_get_attribute function in Zephyr.
The dma_get_attribute function was renamed to
dma_get_attribute_legacy. Fixed all existing calls to it.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",93,53,1
"thesofproject/sof","b17d54628389003d9e16e531384b6f9703653b65","softwarecki","2023-04-06 12:01:55","false","lib_manager: Use correct manifest header from rimage

By mistake, the lib_manager module used a private manifest header from the
rimage project. It included other private headers. Switched to the public
header.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",51,58,1
"thesofproject/sof","2e197711b4023e2f4574626b231ad20714daa194","lyakh","2022-06-13 07:59:46","false","buffer: fix wrong coherent_shared() call

Buffer objects are always handled in thread context, only the
_thread() set of the coherent API functions must be used with them.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",118,48,1
"thesofproject/sof","316d4351e194d152c7ccc057a19e17eb8c532de5","xiulipan","2020-12-08 04:24:40","false","rimage: Update to commit d1f91efdc1e1

Use an upstream commit instead for developing commit.

Included following feature:
rimage cavs 2.5 support
add verify feature
rimage support for TGL-H

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",73,30,0
"thesofproject/sof","9200a11baf054567f2c0ee5fc68579a9531b316f","tlauda","2020-02-05 10:07:46","false","buffer: add inter_core field

Adds inter_core field to the buffer struct. This property
indicates whether buffer is connecting components from
different cores e.g. high demanding in terms of cycles
processing component running on core 1, but connected to
the rest of the pipeline, which is running on core 0.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",77,20,0
"thesofproject/sof","4700170ef8c178884580100efbc29a9d65d4a8f9","tlauda","2019-05-06 05:51:00","false","suecreek: update xtensa headers

Updates xtensa headers to match real suecreek core
capabilities.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",48,11,0
"thesofproject/sof","d0d4301c9ca3ef7cf910e3842bdae71dfc78800d","tlauda","2019-08-02 11:24:40","false","task: abstract slave core functions to arch layer

Abstracts slave core functions to arch layer. It doesn't
make sense to compile them, if they won't be used.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,14,0
"thesofproject/sof","1290a45ea8e5edb1ab34b2925c0a949b1fc0f43b","tlauda","2019-12-11 15:52:06","false","alloc: fix modulo zero bug

Fixes modulo bug in get_ptr_from_heap function,
where alignment can potentially be 0. Modulo zero
is undefined operation.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",73,18,0
"thesofproject/sof","82c005c713d973ced4ef96e25b5f9deddc39c4c0","ktrzcinx","2020-05-22 07:20:40","false","ipc: trace: Add trace filter message handling

Message received from host carry information about new log level for
component with pass selected filter values. Filter values are passed
as a set of key-value values, what make it easy to extend in future.
Last element in set must have SOF_IPC_TRACE_FILTER_ELEM_FIN bit set
in key field, to mark end of filter values.
New log level is also obligatory, must be within LOG_LEVEL_CRITICAL
to LOG_LEVEL_VERBOSE range.
It allows to changing trace lelvel for each components in firmware,
on particular pipeline or with particular uuid key with single ipc
command.
Updating trace level is not fully implemented yet.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",99,24,0
"thesofproject/sof","adc447e8e49775823197735d4333dff31c30f549","ktrzcinx","2020-09-24 11:03:55","false","logger: Check fprintf return value for trace format text

log format text comes from ldc file (may be invalid),
so error check is needed. Don't treat it as fatal error,
because this error may not impact following logs, when
formatting text is root cause of the issue.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",66,28,0
"thesofproject/sof","014499c5dbe3d96d1d61392ca893c5194b40a157","ktrzcinx","2020-06-02 14:46:36","false","component: Align struct description

If it's possible, each line with comment to struct field
should be aligned, to keep code style consistent.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",94,24,0
"thesofproject/sof","1721f7042638512eca7db076a353121bb537c2fd","dabekjakub","2023-08-30 11:02:12","false","logging: add logging through probes

Logging with probes was not implemented. This implements
ipc that enables logging with probe configuration.

Signed-off-by: Jakub Dabek <jakub.dabek@intel.com>",25,63,1
"thesofproject/sof","e126f81953ced5e33331d57c19fe15c4d0bc46f7","finikorg","2020-07-07 11:48:15","false","zephyr: baytrail: Split initialization

Split initialization for baytrail zephyr support similar to CAVS.

Signed-off-by: Andrei Emeltchenko <andrei.emeltchenko@intel.com>",74,25,0
"thesofproject/sof","175672b9ab0a92b6c1c420c722a0b0956d10741b","lyakh","2021-11-19 13:04:03","false","cherrytrail: fix build failure

Disable CONFIG_COMP_TONE on CHT gcc builds to fix insufficient .txt
space.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",129,42,1
"thesofproject/sof","36a804993291e3a061cb095d564dfaa12dc198d7","lyakh","2021-11-04 16:14:19","false","zephyr: ll_schedule: tasks in INIT state aren't on the task queue

Tasks in the INIT state aren't on the queue, calling
schedule_task_free() for them causes a panic due to the task counter
underrun. Don't try to dequeue such tasks.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",126,41,1
"thesofproject/sof","007247cee8785b88a9fe0b95a7c02e3a32ed9daa","lyakh","2022-12-07 14:00:02","false","coherent: align object allocation size to a cache line

Objects, used with the coherent API must be allocated to align to a
cache line boundary at the end. Since heap allocations always begin
on a cache line boundary, we just need to align the size to an
integer number of cache line sizes. Otherwise the header from the
next heap allocation can reside in the same cache line and therefore
be overwritten with stale data.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",101,54,1
"thesofproject/sof","7a2e0e1e17ceae06bce3f63e6d0da7fee1077843","lyakh","2022-04-11 15:09:25","false","multiband-drc: fix buffer acquisition

Instead of acquiring and releasing buffers locally multiple times,
do that once for .copy() and .prepare() methods.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",115,46,1
"thesofproject/sof","2ea18383b3af7aa6266f2445bc2f5540cc84a050","lyakh","2022-03-04 13:32:50","false","pcm_converter: fix uninitialised variables

Two variables i and n in pcm_convert_s24_c32_to_s24_c24_link_gtw()
can be used uninitialised, which breaks compilation. Initialise them
to 0 which guarantees, that we don't perform any changes in the
invalid case of processed >= samples.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",116,45,1
"thesofproject/sof","2b620f4da6431e9a9742b927e640eee2d2bb3987","lyakh","2022-02-03 08:10:41","false","coherent: remove now redundant _irq version of functions

Now coherent_acquire_irq() has become equivalent to
coherent_acquire(), similar for coherent_release() and
coherent_shared(). Remove the _irq version and its only user - the
buffer locking API.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",104,44,1
"thesofproject/sof","1103860a8d077746d332c855608b22c53a82a07e","lyakh","2021-08-03 15:41:44","false","pipeline: add two new trigger commands and a new state

We need to split the START trigger command into two commands because
some components have a long delay inside their START handling. This
patch introduces two new trigger commands: PRE_START and
PRE_RELEASE and a new state PRE_ACTIVE to prepare for that split.
For simmetry POST_STOP and POST_PAUSE are also added, however they
aren't used yet.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",112,38,0
"thesofproject/sof","b03a15c89aacda14f5422f66ee75817f7d625bad","lyakh","2023-01-24 15:42:44","false","mux: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register mux with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","1a8a35be052ca54dad367fb56933f2ff2f425765","lyakh","2019-02-26 17:57:39","false","dma: fix a macro

Function-type macros are usually called as ""M(...);"" with a semicolon
in the end. Therefore defining such macros with a semicolon isn't a
good practice. This breaks constructs like
if (...)
	M(...);
else
	...;
Fix the dma_set_drvdata() macro to avoid such problems.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",68,9,0
"thesofproject/sof","eb459078f3023f6762428f38976547576eeae59f","marc-hb","2021-03-30 22:51:42","false","checkpatch: --ignore C99_COMMENT_TOLERANCE

Let's not waste considerable time in code reviews with silly problems
computers can solve.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",79,34,0
"thesofproject/sof","5e971a2f061d271b22d425b9ff3e2917ce77258b","marc-hb","2021-03-18 18:14:25","false","CODEOWNERS -= xiulipan

Let's stop spamming Xiuli.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",72,33,0
"thesofproject/sof","c0c8172535359da5cab781d75982aa60032578c5","cujomalainey","2018-11-25 07:38:51","false","Update Docker README for SOFT merge

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",40,6,0
"thesofproject/sof","758e7be0c967918fec2feead34614089557c8728","cujomalainey","2021-04-29 16:50:32","false","oss-fuzz: fix build

looks like with the new ipc mechanisms we changed the function signature
and moved casting the message from platform code to ipc code.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",81,35,0
"thesofproject/sof","996a0676325b222fe15797e70429db3689387afc","lkoenig","2021-12-15 11:36:06","false","topology: Ensure buffers get allocated on 0.

Ensure all buffers got allocated by core 0

Signed-off-by: Lionel Koenig <lionelk@google.com>",113,42,1
"thesofproject/sof","2460b0162776bfe47f41ff601c57d81183aabe9f","lgirdwood","2018-09-25 19:43:06","true","Merge pull request #414 from tlauda/topic/slave_cores_vecbase

arch: fix level 1 interrupts handling by slave cores",37,4,0
"thesofproject/sof","3bb9c837b7bc83b67a8a16a26384faa7bb047e76","lgirdwood","2018-10-10 09:23:38","true","Merge pull request #470 from singalsu/eq_new_simplify_check_first_coefficient_blob_size

EQ: Check in new() coefficient blob size before allocating dev and cd",32,4,0
"thesofproject/sof","cee5f5f4303ae2d7d3ae7a1488513f7aef2109af","lgirdwood","2018-11-08 14:56:53","true","Merge pull request #554 from mwierzbix/workaround-build_fail_for_smt_too_big_sof_text

debugability: workaround for SOF_TEXT_SIZE too big with smp enabled",41,5,0
"thesofproject/sof","562bdcc92db59252db5aea276afb69dea9d56c1b","singalsu","2022-06-10 12:54:27","false","Math: FFT: Reduce bit reverse lookup table size

The table does not need to be 32 bit since max. FFT size
is 1024.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",115,48,1
"thesofproject/sof","c07e43fad53afeed4872085a8b8c0056c917adcc","tlauda","2019-09-23 08:21:59","false","platform: remove PLATFORM_IDLE_TIME definition

Removes PLATFORM_IDLE_TIME definition, because it's
no longer used.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,16,0
"thesofproject/sof","66da4e89a9c2fce8fe04624a1001f7b8111a40c2","tlauda","2019-08-09 12:36:34","false","dw-dma: unify dw_dma_release for all working modes

Unifies dw_dma_release function implementation to work
for all DMA working modes. Since we are now supporting
copying as much data as possible in host in all modes,
we can make this unification.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,14,0
"thesofproject/sof","a2e6f82ef810a6a838783467472dfceb7933afc1","libinyang","2018-12-27 01:55:14","false","host: emit error trace log when dma stop fails

Emit the trace log when dma fails to stop.

Signed-off-by: Libin Yang <libin.yang@intel.com>",49,7,0
"thesofproject/sof","00e7bc0cc08b28164707b0e226f5c79ba9339183","andrula-song","2023-11-07 02:51:31","false","Audio: ASRC: convert ASRC to module API.

Convert ASRC to module API and support ASRC IPC3 test
with test bench.

Signed-off-by: Andrula Song <andrula.song@intel.com>",2,65,1
"thesofproject/sof","371d35108a75cd8788cfadcb00ae9a3028677f22","btian1","2022-11-03 06:06:52","false","Memory: add support for memory heap profiling

Heap memory profiling is based on runtime zephyr API.
It will print out each memory allocation with allocated bytes
and free bytes, display as below:
zephyr: heap allocatd: 22c0 free: 152a90 max allocated: 1000

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",89,53,1
"thesofproject/sof","e52ed8d20812ee71305803706dbefe9ff600e6eb","akloniex","2019-07-03 06:41:40","false","Mux: implement comp_reset function.

Mux component was lacking reset function implementation. This is to
address this issue.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",41,13,0
"thesofproject/sof","a0c9aebe05c708ef6466ff40d2bdea67a022e722","akloniex","2020-03-20 17:36:15","false","muxdemux: Remove dependency on config->num_channels.

In the past, when parameters were held by components, it was impossible
to manage input/output streams with different channels' count.
Now, after params were moved to buffers, we can properly handle such
scenario, which in turn allows for more flexible approach in terms of
runtime configurability.

Signed-off-by: Artur Kloniecki <arturx.kloniecki@linux.intel.com>",66,22,0
"thesofproject/sof","3bf2641ef57967d4c1472ee2410b8c8e12a98b75","akloniex","2018-10-10 09:44:12","false","logger: Add support for 4 parameters passed to log message.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",32,4,0
"thesofproject/sof","ab087817331ac1a2a9e985324d70e172cefb915f","marc-hb","2021-05-18 22:49:34","false",".github/ipc_fuzzer: add back local compilation hack as a comment

... because it has definitely helped reproduce compilation issues in the
past in just two lines without going through the whole setup process,
see a list of examples in #4126.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",87,35,0
"thesofproject/sof","d9eb16aa6655408f295d428b2e0f2e3a98fbd842","marc-hb","2020-09-25 22:32:28","false","cmake: add warning when git submodule changes are found

As incredible as it sounds, some people run neither ""git status"" nor
""git diff"" every few minutes and not even when their build fails. There
has been reports that they're puzzled when they miss a required
submodule update. This is an attempt to draw their attention based on
the assumption that they pay more attention to the CMake logs.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",65,28,0
"thesofproject/sof","d93692ce80b94352a9f0188927f27b8fa1314d9b","lyakh","2020-11-20 13:40:39","false","alloc: pick up allocation start correctly

When allocating multiple buffers the first free buffer might not
contain a suitably aligned start address. Skip it instead of
allocating it with the others. Also don't add alignment to the
allocation size, but find a suitably aligned start address
instead.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",74,30,0
"thesofproject/sof","ff81eda5d6e0145522a9d4d3b4484360b8c2fe62","lyakh","2023-01-25 13:04:52","false","drc: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register drc with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","c911a78ff0d673f07006b0f2feafbcd25d1b730d","lyakh","2021-11-11 13:40:41","false","pipeline: (cosmetic) move a block of code to a function

Improve readability by moving a block of code into a function.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",127,41,1
"thesofproject/sof","aa0aee9b549870631f93bd138584725dc163b244","lyakh","2020-08-11 09:41:13","false","dw-dma: use a generic allocation

When allocating an LLI array no need to use rzalloc() since the array
is 0-initialised directly after allocation anyway.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",73,26,0
"thesofproject/sof","4d3d2083f72f68376f381cdf7670b6aa2062bbe4","lyakh","2019-02-22 09:16:58","false","interrupt: add a cpu argument to interrupt_(un)mask()

Most interrupts in SOF are handled completely locally: they are
registered, enabled, disabled, and handled on one and the same core.
There is only one case, where interrupts have to be unmasked on a
different core: in idc_enable_interrupts(). To make this possible
without using the CPU field in the IRQ bitfield we add a ""cpu""
argument to interrupt_mask() and interrupt_unmask() functions.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",61,9,0
"thesofproject/sof","e20217abc7473a930aeb094d8fd7a4daf974ae6c","xiulipan","2018-11-28 13:09:47","false","[skip ci]github: add xiulipan as some field owner

Add some field owner and have basic structure for CODEOWNER.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",40,6,0
"thesofproject/sof","e2550ee75c70af9fc8b61999947a8e9d89f64f7c","xiulipan","2018-06-29 07:47:38","false","rimage: fix function returns address of local variable bug

path may return out the function from rimage->key_name.
Switch the usage for local variable to avoid this bug.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",9,1,0
"thesofproject/sof","7d52bb6ef06c6f420365f8db203008671bce0280","xiulipan","2019-11-14 10:58:36","false","scripts: update xcc build for all platform

Update xcc build config for all existing platforms.
xcc build with byt, cht and sue need special defconfig.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",57,17,0
"thesofproject/sof","f9c23243d66a6ad4ec6b773b4a5e7cdce52dcb34","RanderWang","2018-11-27 05:51:55","false","topology: whl: refine topology for hda on whl

Fix the issue that ipc timeout when simutalously playback
and capture. Now in FW, playback and capture are supported
by different dai. So dai index should be different for playback
and capture in the same be dai, or playback would use the same
dai as capture

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",44,6,0
"thesofproject/sof","eec45d1a7a4568e43eb702873065d432cf3c5431","RanderWang","2023-07-17 09:16:45","false","pcm:_converter: simplify the pcm conversion algorithm

Remove gateway type and direction for pcm conversion check and will move
them to copier module. This will make pcm conversion check more general
and simple. Also remove s16/c32 for gateway since it is never used.

Signed-off-by: Rander Wang <rander.wang@intel.com>",32,62,1
"thesofproject/sof","5b8ba30694ee5aeca3efb53e43866bb3c5972c5e","tmleman","2023-09-06 14:04:43","false","ace: overlay: update clock frequency

Changing max clock frequency for FPGA configuration.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",21,63,1
"thesofproject/sof","d27ec1ddb0e2ab4a749f990030693017dabfc79d","lgirdwood","2018-09-06 08:32:37","true","Merge pull request #284 from tlauda/topic/dai_remove_wait

dai: remove wait on stop",31,3,0
"thesofproject/sof","4ac9248f58d907f615ce878feef61a180119d4e3","lgirdwood","2018-10-29 12:16:10","true","Merge pull request #117 from singalsu/eq_add_mic_calibration_import

EQ Tool: Add calibration data import",28,5,0
"thesofproject/sof","c456200cc44267694503e8960c6ab348deeba44e","mrajwa","2019-02-27 20:51:44","false","KPB: add support for events

KPB uses notifier module to implement events.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",67,9,0
"thesofproject/sof","4a61c9566f8e4c62d84ffdae327665b91a757b3f","lgirdwood","2018-09-21 07:23:48","true","Merge pull request #390 from bkokoszx/debugability_v2

debugability: logging: Redesign tracing mechanism to enable proper logging",35,4,0
"thesofproject/sof","e37aa3f422c36a0404b2d49fcb1540d33f1d67c8","lgirdwood","2018-10-08 19:40:37","true","Merge pull request #88 from akloniex/unify-logger

logger/rmbox: unify implementation of new logger tool with old rmbox",34,4,0
"thesofproject/sof","b604644c65ef38224b157498979bcdae95ea59e5","mrajwa","2021-07-28 09:22:03","false","memory: add timeout into polling loops

This patch adds timeout condition into all loops
that monitor power status registers.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",106,38,0
"thesofproject/sof","b7a9f0f73c9ac5b2b5616b59d5991abe144f1305","slawblauciak","2018-07-05 13:50:20","false","test: missing header

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",11,1,0
"thesofproject/sof","b5e89ab75c41004508da8534fb3737ccfa63ba56","RanderWang","2019-01-14 02:15:37","false","github: add @Randerwang as owner of haswell

I would like to review any change in haswell domain

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",55,7,0
"thesofproject/sof","d3956d0a9c9cc3ff2da5e85076f23c0d6aae0012","xiulipan","2019-10-31 08:39:31","false","arch: string: enable vec_memcpy only with HIFI3

xcc HIFI2 do not vec_memcpy, we can only use vec_memcpy on HIFI3 supported
platforms.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",56,17,0
"thesofproject/sof","4ce5ed477a5d40bc2b21b0676f170605ebc0bcb7","xiulipan","2020-05-15 09:13:47","false","cmake: use SOF_ROOT_SOURCE_DIRECTORY for git submodule

In SOF, there is another project in tools folder. It also need riamge
submodule support.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",99,23,0
"thesofproject/sof","aee1b1e7658a67bf295b742bb2b38947c9d3d16e","jajanusz","2019-06-01 19:37:26","false","kconfig: add spdx license identifier

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",72,12,0
"thesofproject/sof","d1dd0486df3aef615e7b2c2e9b0c02a2a58ba700","lrgirdwo","2023-08-30 23:06:59","false","library: Add missing definitions

Add missing platform definitions for CPU freq, DAI definitions etc.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",25,63,1
"thesofproject/sof","36b85943a8c380ca135ac68c3b63694bda6254ef","lrgirdwo","2018-09-28 20:06:25","false","sue: dma: Add Sue Creek DMAC platform data.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",37,4,0
"thesofproject/sof","80666b7cc7a9c70652a55086034d2bfcd35b3b76","lrgirdwo","2021-04-30 16:06:09","false","ipc: component: abstract the component creation API

Make sure component creation is not tightly coupled to a particular IPC
version. This is mostly a mechanical change of structures being passed
to the comp creation APIs away from IPC specific to general structures.

Highlevel changes

1) Pass a common component data object and a component
specific data object during create().

2) Mark the component IPC derived data as ""ipc_config"" within the
component device to help developers track the data source origin.

3) Pass component specific data during creation so that componets
can allocate and copy to thier private data.

4) Comp_dev no longer has component specific data appended to it.
Instead we can store all in the comp private data (and hence use the
compiler to access it rather than by developer access methods).

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",82,35,0
"thesofproject/sof","0bef2669669de1c9b892c2abb8cdeac8676e84b0","plbossart","2021-09-11 00:09:47","false","topology1: sof-hda-generic: use mixer-based pipelines for analog playback

Convert playback pipeline on analog output to have a mixer so adding a
deep-buffer pipeline will be simpler.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",117,39,0
"thesofproject/sof","5f0d6222e74540a8dd8b88aa420be60754df1821","dbaluta","2023-10-10 11:42:04","false","platform: imx8m: dai: Set FIFO depth for PDM

On i.MX8MP PDM fifo has 32 entries (each with 4 bytes).

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",13,64,1
"thesofproject/sof","18b060511177848de80965388c11ed1733a46528","btian1","2023-02-15 06:25:03","false","host-zephyr: Expose common functions for host trigger

Create and expose a couple of functions for host DMA trigger along with
struct host_data,these functions will be shared by both host and
copier component.
This is in preparation to remove the creation of  host component and
endpoint buffer in create_host().

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",56,56,1
"thesofproject/sof","d15debf011b9b7b95aedc30a957abc51341466dd","kuanhsuncheng","2021-09-08 06:33:01","false","xtensa: exception: Add XCHAL_INTLEVEL5_MASK

This results in a compiler error
when xtensa configuration has no IRQ level 5.
Make it use core-isa.h.

Error:
invalid register 'EPC5' for 'rsr' instruction
Error:
invalid register 'EPS5' for 'rsr' instruction

For mt8195, we don't support those instrucations

Signed-off-by: YC Hung <yc.hung@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",118,39,0
"thesofproject/sof","5ae624cf4ed700d79121f54043e64288a27e1c3c","kuanhsuncheng","2021-08-27 08:43:43","false","topology1: add afe tokens

Add afe tokens for mt8195

Signed-off-by: YC Hung <yc.hung@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",119,39,0
"thesofproject/sof","a6834da4fac50c13595585b601f5e2059734ae56","dnikodem","2023-06-13 06:49:53","false","src: copier_hifi: update apply_attenuation function

The function applying the attenuation should be based
on write pointer and the current number of copied data in
the current systick.

Signed-off-by: Damian Nikodem <damian.nikodem@intel.com>",45,60,1
"thesofproject/sof","9798a1a7aad408c15ce2c70db75366a1b01624bf","ranj063","2023-06-12 21:51:46","false","src: dai_zephyr: Remove unnecessary init

No need to init avail_bytes, free_bytes or copy_bytes.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",46,60,1
"thesofproject/sof","173a781551a6aa8ff943018466ec276e86149d43","ranj063","2022-03-23 23:15:13","false","codec_adapter: rename the codec folder to module

and fix all the includes accordingly. No functional changes.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",109,46,1
"thesofproject/sof","34dda4ff6c7a5303172284871efeb80d8a962a1b","tinghan-shen","2022-02-18 03:43:24","false","docker_build: Add support for mt8195 and mt8186

Add support for building mt8186 and mt8195 toolchain in docker image.

Signed-off-by: Tinghan Shen <tinghan.shen@mediatek.com>",106,44,1
"thesofproject/sof","bfcdee6c90f09c916af593a1007e0e473ecd48cb","abonislawski","2020-04-03 17:15:43","false","tgl: align to hardware recommended flow for clock change

This patch will update our clock change procedure to align
with hardware recommended flow for TGL platforms

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",81,22,0
"thesofproject/sof","051a1f88540f14e20b0f14b73a014617553e8250","ranj063","2019-11-21 06:06:42","false","byt: ipc: Move WFI to run level 0

When entering runtime suspend or system suspend, the host
driver sends a CTX_SAVE IPC. When this IPC is received,
the FW should call wait_for_interrupt from run level 0.
The IPC task is not at run level 0, therefore this
should be done in the main audio task, which runs at level 0.

Additionally, in the case of baytrail, the DSP doesn't
enter D3 in the case of runtime suspend. So, when the host
tries to resume the DSP, the pm_prepare_D3 flag is not reset
to 0. So, we need to explicitly reset it to 0 when the
host sends the CTX_RESTORE IPC.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",62,18,0
"thesofproject/sof","8f589395f877a7abb52fac1979e99beca061b959","abonislawski","2019-06-19 10:24:50","false","kpb-trace: use one variable to measure time

This will fix ""variable x set but not used"" gcc errors if TRACE disabled

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",49,13,0
"thesofproject/sof","c5c0c1701e1bc97eefbc65a270dbae1afa940ab4","jairaj-arava","2021-11-11 22:55:28","false","topology: sof-tgl-max98373-rt5682: add flag for Bluetooth audio offload

This patch adds flag to choose Bluetooth audio offload support

Signed-off-by: Jairaj Arava <jairaj.arava@intel.com>",127,41,1
"thesofproject/sof","f87fa4d6fa4f6119d7cb991eac38fb97b771f173","tobonex","2023-09-15 17:49:49","false","mixin/mixout: remove buffer_acquire from mixin/mixout

remove buffer ops from mixin/mixout module

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","c9ee1092965264a24b7366794ffaece4bd1996f7","marc-hb","2022-04-07 23:15:00","false","xtensa-build-zephyr.py: add cavstool.py to staging directory

This is required to read Zephyr logs.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",114,46,1
"thesofproject/sof","55eecdd1d46629550e8ce938abcad4f6b1f83827","marc-hb","2020-08-28 18:09:30","false","host-build-all.sh: print deprecation warning

Use newer rebuild-testbench.sh instead, added by
commit 46578cb103e4 (""scripts: Add a new script to rebuild testbench"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,27,0
"thesofproject/sof","0f93ec1aefb98a991250fd9d65870663c119cca7","lyakh","2020-03-16 09:41:06","false","hda-dma: fix a failure to restore interrupt flags

In hda_dma_data_size() if an XRUN leads to an early return,
interrupt flags have to be restored.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",79,21,0
"thesofproject/sof","43bc85f570913fb64f31be7d2f79b36d6f4ae6ab","jsarha","2022-09-26 14:03:49","false","tools/probe: Another restructure of dma stream demux code

This time the target is to make the demuxer more modular so that it is
not coupled with file reading operations and it is easy to use
alsa-lib directly.

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",97,52,1
"thesofproject/sof","4f1090d083548de11907c55fe6c7988a8564ba57","bkokoszx","2020-04-15 06:03:13","false","mux: select demux proc function based on source buffer

Demux should select proc func based on source buffer,
because sink can be not set yet (e.g. this can be observed
in Smart Amplifier topology scenario where we have
buffer between playback and capture pipeline).

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",83,22,0
"thesofproject/sof","6efff4ccdb1adbcb6ac6bb7eb91b0e546215db31","kv2019i","2023-08-17 08:51:51","false","zephyr: remove mem_window.c from Intel cAVS2.5 build

Memory window management has been moved to Zephyr drivers
for this platform, so building this file on SOF side is no
longer needed.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",25,63,1
"thesofproject/sof","fd7f866e3a80272fad5a25f9382b4d43fd6cc428","kv2019i","2023-08-22 13:44:09","false","platform: tigerlake: remove remaining build targets for XTOS

With CAVS_LPS removed, we can now remove remaining XTOS build
targets for Tiger Lake.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",25,63,1
"thesofproject/sof","46bcb14ff6b30174a9b5b1a0dede385717ff9e9b","singalsu","2023-02-02 11:44:45","false","Tools: Topology2: Add EQ configuration blobs

This patch adds a number of generic or effect type of blobs
to enable use of equalizers in topology2.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",52,56,1
"thesofproject/sof","5b9a82defff008ab6b78b0fb3bdfb6ce7df149fe","singalsu","2021-02-11 18:41:53","false","Topology: Add simple topologies (no KWD) for CML RT1011 RT5682

This patch is based on sof-cml-rt1011-rt5682.m4 but omits the
hard coded keyword pipeline and replaces it with a generic
16 kHz capture pipeline. The use of intel-generic-dmic.m4 to
set up the capture pipeline simplifies the topology a lot. This
change makes the topology for CML I2S quite similar to sof-hda-generic
to add audio processing.

All endpoint processing can be defined from top level CMakeLists.txt
with macros HSMICPROC, HSEARPROC, SPKPROC, DMICPROC, DMIC16KPROC.

A sample topology with equalizers in headset and speaker paths is
added.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",72,32,0
"thesofproject/sof","e651c705314a2871c21244b439fbb9d1e376885d","marcinszkudlinski","2023-06-25 10:07:14","false","dp: introduce per-core DP scheduler

This commit changes implementation of DP scheduler
At start point an incorrect assumption has been taken
that it is enough to have one single instance of
DP scheduler located on a primary core
This commit introduces one DP instance per core

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",42,61,1
"thesofproject/sof","30012d14546ad0855090107765593cc1cb16d199","singalsu","2021-11-18 15:47:21","false","Tools: Testbench: Support for different in/out channels count and other

This patch adds to command line switch -n for output channels count.
Existing -c is for in channels, new -n is for out channels count. Out
channels count is same as input if -n is not present. Switch -q is
added to quiet the trace output if it is not needed.

The Matlab language test scripts for components are updated to use
the -t config.sh interface of comp_run.sh. It allows more flexible
control of input and output streams.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",128,42,1
"thesofproject/sof","d3b58acab90bad9a52323a85aa9904ddfd697de6","singalsu","2022-09-09 16:12:09","false","Test: cmocka: Add shift parameter to Mel filterbank reference

This patch adds to reference Mel filterbank the parameter
shift that is used to compensate in logarithmic power spectrum
the previously applied bitshift for linear spectrum values. The
added parameter is needed to test compatibility with C
implementation of the filterbank.

The test vectors were re-generated to include effect of shift
parameter values 0 - 3. The previous test used only value 0.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",106,51,1
"thesofproject/sof","43eb2a435c2962cf500daa602866f536c8bc7cd2","singalsu","2023-08-21 14:58:59","false","Config: Add crossover component for MTL and LNL platforms

This PR adds the crossover component for MTL and LNL. The
parameters are copied from TGL and TGL-H configuration of
crossover.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",24,63,1
"thesofproject/sof","2079074b75423ce347b34f7482dea4f6211296e3","singalsu","2023-01-25 15:32:26","false","Audio: EQ IIR: On-the-fly passthrough/configured processing function

This patch helps to save MCPS when all IIR channels are set
to bypass mode. If no IIR state delays are allocated it is
safe to use the efficient bypass processing function.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",53,56,1
"thesofproject/sof","82bdd0f9f0f1c8e649c05b92ce0878d83cd25bf5","singalsu","2022-10-20 10:55:17","false","Audio: SRC: Fix HiFi2 SRC off-by-one frame issue

This patch fixes the FIR compute off-by-one frame bug. The fix
is similar as for generic C except that HiFi2 pointers
arithmetic is in bytes.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",96,53,1
"thesofproject/sof","22f4bd9c18c0f9a0719d98152621bb84c3bce4a5","tlauda","2019-03-18 10:57:38","false","component: add COMP_STATE_ALREADY_SET status

Adds new component status to accurately reflect
current status. Value of 1 isn't saying much.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",67,9,0
"thesofproject/sof","440cd55f606ec5471c856fe8a95d4634e73a2738","tlauda","2019-06-26 09:44:39","false","pipeline: change preload conditions

Changes pipeline's preload conditions to take into
consideration the situation, where we don't always
want to do playback preload, because the sink part
of pipeline is already running e.g. mixer topology.
However the host component still needs to perform
preload on its own, so for now we make the decision
based on stream's direction.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",44,13,0
"thesofproject/sof","c5e724400ca61459582e13162bcc4fbf2fca8471","tlauda","2019-05-06 14:12:26","false","ssp: icl: enable registers for all 6 SSPs

On Icelake we have 6 SSP ports, but we only enable
registers for 3 of them. Let's enable all.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",48,11,0
"thesofproject/sof","52f99da480fb4a9519715d870bc5f86d9392b95b","tlauda","2019-03-22 09:17:07","false","eq_fir: fix dest_size in memcpy_s calls

Fixes dest_size in couple of memcpy_s calls.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",65,10,0
"thesofproject/sof","68808e854bec3711e4dca23247ea0ca2f5d2aa6d","aiChaoSONG","2022-11-16 05:47:01","false","ipc4: removed unused argument for ipc4_pipeline_params

The pcm params argument for ipc4_pipeline_params()
is never used, remove it for simplicity.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",95,53,1
"thesofproject/sof","2545288afcde60bc578fa26242f5174b5b30769a","aiChaoSONG","2021-07-15 08:08:02","false","Revert ""memory: apollolake: refine the heap sections size""

This reverts commit 38f18bd082747c7fc0859987c9a034c663118266.

The above commit causes the issue ""sof section `.bss'
will not fit in region `sof_fw'"" on APL with xcc,
revert it.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",91,37,0
"thesofproject/sof","5674c31c8f067c8f758533c6b9f3989d73851c7e","RanderWang","2023-07-20 08:35:30","false","topology2: update pin setting to latest one

pin_index is not used so replace it with input_pin_index

Signed-off-by: Rander Wang <rander.wang@intel.com>",33,62,1
"thesofproject/sof","d3e639cb0d3051097f15bfcb1f9264434b4b09ed","btian1","2023-05-16 06:31:45","false","copier: move create_ipcgtw and create free_ipcgtw in copier_ipcgtw

Move those ipcgtw specific functions out of copier, this can make
copier module more simple and easy to read, also prepare for copier
module adapter, also expand ipcgtw_new/free, since it is small and
only called at local file.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",51,59,1
"thesofproject/sof","32768a4ad3dd4bb00e5da1ed18d9543b9d11beca","jajanusz","2020-01-10 14:36:24","false","drivers: intel: mn: spinlock for registers access

Single M/N register can manage multiple MCLKs & BCLKs for multiple
clients that's why access to them should be synchronized.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",76,19,0
"thesofproject/sof","7317f2af3901991becaecaa48400611b1a532cd5","jajanusz","2020-07-14 11:04:20","false","manifest: set feature mask to 0xffff

This feature is not used by SOF anyway and only causes
FW load failures, we can set it to 0xffff so it will
work for ADL+ platforms.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",80,25,0
"thesofproject/sof","a4dcabcfc6a172e8fc7050ea9103699672b97aa2","jajanusz","2019-07-22 09:53:02","false","test: mux_copy

Unit tests for mux copy with 4 sources, 1 sink and 8 channels.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",48,14,0
"thesofproject/sof","76c84875d8a45ce901e07e31f0f4be64b3aee0d2","jajanusz","2019-01-09 14:02:33","false","baytrail: remove ipc.c

it's not included in binary anyway, and it's only function is already
in platform.c

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",56,7,0
"thesofproject/sof","e3108d653fc1c9a9d19283e4ef9328ccd5efefab","lrgirdwo","2018-09-27 07:23:03","false","work: Add platform workq default timeout for missing platforms.

Fixes build on missing byt, hsw, cnl.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",38,4,0
"thesofproject/sof","d4949bf42f66c7f52df13fb2e4aff2d70e562f69","DianaGabriela27","2019-03-06 13:05:14","false","rimage: file_simple: Remove unnecessary spaces after cast

Signed-off-by: Diana Ungureanu <diana-gabriela.ungureanu@nxp.com>",66,9,0
"thesofproject/sof","2cc38aa03436cbaa92610612f8dde3fde48c6b96","lrgirdwo","2018-11-13 16:37:15","false","dw-dma: validate channels and improve trace output

Validate user supplied data and improve trace output on any errors.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",38,5,0
"thesofproject/sof","cf453a93f5ac8085bdaa4707eb4060a887d28ed9","lrgirdwo","2021-03-29 10:34:35","false","pipeline: remove eunused function.

Not used anywhere

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",80,34,0
"thesofproject/sof","c78301ed263d5fdb0be242651a78be319eb953f9","tobonex","2023-09-15 18:01:46","false","dai: remove buffer_acquire from dai (zephyr and legacy also)

remove buffer ops from dai, dai-legacy, dai-zephyr

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","4f98441d3ca729c22bfd81cf407b940081ebe823","marc-hb","2022-10-25 00:19:30","false","xtensa-build-zephyr.py: extract new function install_platform()

Zero functional change.

Lowers the score of the following pylint warnings:

- Too many local variables (38/15) (too-many-locals)  41->38
- Too many branches (26/12) (too-many-branches)       29->26
- Too many statements (116/50)(too-many-statements)  127->116

Keep existing indentation for now to help git blame -Mnn. Will fix in next
commit.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",96,53,1
"thesofproject/sof","a7c2f75b63bdf37baaf9a509c751fad42204bba9","marc-hb","2022-07-18 22:34:55","false",".gitignore: stop ignoring CMake files for in-source doxygen builds

sof-docs/Makefile used to require building doxygen inside the `sof/doc/`
sources. This was a very bad idea, in-source builds have been
discouraged by CMake since forever. It made it very hard to clean CMake
files in `sof/doc/` (`make clean` does obviously NOT deletes CMake
files)

gitignore was being enrolled to cover up this CMake crime. This was
de-hardcoded 2 years ago in sof-docs commit 2d664c658c14 and much more
recently sof-docs stopped recommending in-source builds in sof-docs
commit 9788c4be32cf. So there's no need to ignore in-source CMake files
any more. If someone still makes the mistake of building sof/doc/
(or anything else) in-source, the lack of .gitignore will now help them
clean up.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",113,50,1
"thesofproject/sof","3c6dcdb574876908a1b45d338cb0e91b982fc0fe","marc-hb","2022-08-18 13:49:41","false","xtensa-build-zephyr.py: abort when python version < 3.8

shlex.join() requires 3.8, maybe others too. 3.8 is 3 years old and it's
the default Python version in Ubuntu 20.04

Fixes #6121

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",112,51,1
"thesofproject/sof","05bd87da37092e8db0d741b6595a6eb9e7a29ffb","MingJenTai","2022-04-29 05:11:37","false","Add RTNR library path for MT8195

This commit separates RTNR library path for multiple platforms including
MT8195.

Signed-off-by: Ming Jen Tai <mingjen_tai@realtek.com>",115,47,1
"thesofproject/sof","2dbec9f2b2c016fff0f4f7c1624a625df49abd44","marc-hb","2021-10-19 18:18:08","false","sof_ri_info: show file offsets for most components + some lengths

File offsets were critical in finding the serious begin_off bug fixed in
the same series. The information is already there so just show it.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",123,41,1
"thesofproject/sof","beb7d7f93c6d2fa408e5872e1595aa63ff8a174d","lyakh","2021-05-10 08:28:07","false","zephyr: fix schedule_edf_task_cancel() return value

schedule_edf_task_cancel() should return 0 or an error code, whereas
k_work_cancel_delayable() returns flags, depending on the state of
the task being cancelled. Return value of schedule_task_cancel()
is never checked so this bug had no negative effect on SOF.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",81,35,0
"thesofproject/sof","b7ca65938a7a4eb637b9d3101550d1da8423c490","lyakh","2022-04-08 12:20:20","false","ipc: use __sparse_cache sparse annotation

Add the __sparse_cache sparse annotation to ipc-helper.c

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",114,46,1
"thesofproject/sof","fcd6e9541da5c645c8833613bbfbf5bf10a13ebf","lyakh","2022-12-13 16:51:20","false","alloc: fix argument for cache alias conversion

z_soc_uncached_ptr() takes a cached alias as argument.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",98,54,1
"thesofproject/sof","cc44a479b6b95c4cdd15f4fe3d1f93e78ca4805e","jxstelter","2022-11-07 11:32:29","false","iadk_modules: IADK modules needs full config

IADK modules usually uses configuration parameters
passed by ipc4_base_module_cfg followed by proprietary
parameters known only by particular module code.
Therefore during such module initialization we need to pass
whole IPC4 buffer.
Previous change limited these data to ipc4_base_module_cfg
what could be not enough for some 3rd party modules.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",93,53,1
"thesofproject/sof","6c0db22c65b681c7da311e6c24dc7e2dfd42c393","keyonjie","2021-06-09 09:16:22","false","platform: cavs: configure resume from IMR

To enable the feature that resuming from IMR, we need to configure IMR
layout with correct magic number and IMR restore vector, in the
platform_context_save() routine.

This is harmless even the driver want to re-downloading FW at resuming
stage, sending the FW_PURGE IPC from the host side will ask the ROM code
to omit these IMR restoring stuff.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",81,36,0
"thesofproject/sof","db9e9eba8eaf588282fff2c3d2877ae67456efaa","keyonjie","2021-11-11 10:30:16","false","dw-dma: change to use runtime_shared heap for lli buffer

The lli structs are used by both DSP and DMAC, allocate them from the
runtime_shared heap to avoid being corrupted by cache writing back.

This helps to fix a lot of DMA xrun issue according to the validation.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",127,41,1
"thesofproject/sof","d9bcdfbbbdc75fd903419f44f16e458eeb812fe5","brentlu","2021-08-18 10:29:14","false","ssp: mn: mdivctrl corruption in mn_release_mclk()

The mdivctrl register is corrupted when disabling MCLK divider in
mn_release_mclk() function. It could overwrite bclk's source clock and
stop the clock running.

Signed-off-by: Brent Lu <brent.lu@intel.com>",117,39,0
"thesofproject/sof","7e0a9d8b6ff519a3ceb282c763c697087e00a86e","zhuyingjiang","2018-11-05 08:52:21","false","rimage: add 1.5 rimage defines

add 1.5 rimage defines for skl and kbl

Signed-off-by: Zhu Yingjiang <yingjiang.zhu@linux.intel.com>",38,5,0
"thesofproject/sof","7aabaea3c21062d2b59ace45ef5c0d82558a04bc","andrula-song","2022-05-30 00:45:34","false","audio: fix the unsymmetrical order of lock and unlock.

fix the unsymmetrical order of lock and unlock issue in
fuunction comp_get_copy_limits_with_lock to avoid IPC
tiime out risk.

Signed-off-by: Andrula Song <xiaoyuan.song@intel.com>",114,48,1
"thesofproject/sof","543acc124d4b499b36b47697cd4f78a9c0d97ed2","kv2019i","2022-12-15 10:42:05","false",".github/workflows: add tgl-h IPC4 build

Add build check for Intel 'tgl-h' IPC4 build.

Link: https://github.com/thesofproject/sof/issues/6710
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",92,54,1
"thesofproject/sof","c6ba44228aca4455a72d73ba1d35eec632db4d18","kv2019i","2023-10-25 12:37:42","false","topology1: remove Intel GLK/TGL/ADL/RPL topology definitions

These topologies are no longer supported by mainline firmware code for
these platforms. The stable-v2.2 branch continues to support these
targets with topology1. Also SOF main branch provides topology2 targets
for a subset of these configurations.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",8,65,1
"thesofproject/sof","168d1648a6f9fac39cb1c53ae2572496adc6b300","singalsu","2022-07-27 09:44:34","false","Math: Add window functions library

This patch adds a library for window functions. The window functions
are used to mitigate artefacts (from nature of FFT) to spectra when
computing FFT for a finite long chunk of audio. The currently provided
window functions are Blackman, Hamming, Povey, and rectangular.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",111,50,1
"thesofproject/sof","869c08d6c0d7f9af6dad04df54c3a3cd64465e6f","xiulipan","2018-09-06 05:54:14","false","schedule: fix edf reschedule

Should reschedule if we did not try to reschedule.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",31,3,0
"thesofproject/sof","9b9c683cc647bca350ac9ac2d4b7aede5c305d8d","andrula-song","2023-08-18 03:05:52","false","Audio: MFCC: Split the implementation of mfcc into 2 files

Split the implementation code of mfcc from mfcc_generic.c
into mfcc_generic,c and mfcc_common.c.

Signed-off-by: Andrula Song <andrula.song@intel.com>",25,63,1
"thesofproject/sof","9b08ce026ded73d1b84f4c142327d7851ea59f64","RanderWang","2023-08-17 09:00:29","false","zephyr: cpu: use correct condition to init cpu

When converting #ifdef CONFIG_ADSP_IMR_CONTEXT_SAVE to if(IS_ENABLE(
CONFIG_ADSP_IMR_CONTEXT_SAVE), we should use if (!IS_ENABLE() ||

Signed-off-by: Rander Wang <rander.wang@intel.com>",25,63,1
"thesofproject/sof","5c4c8e29b8756c9fa8ce8297612a293114d3ee47","RanderWang","2021-11-29 05:18:58","false","ipc4: stream: add container format for ipc4

Sample format is alway equal to container format for
ipc3 case but it is not true for ipc4, .e.g sample format
is S16_LE but container format will be S32_LE. This patch
adds container_fmt for ipc4 to do stream copy.

Signed-off-by: Rander Wang <rander.wang@intel.com>",129,42,1
"thesofproject/sof","0beda35193980400297dbfb4e8c32b42e2d1ce82","xiulipan","2018-06-25 04:59:07","false","rmbox: add missing trace class to sync with firmware

Add missing trace class to the rmbox to avoid unknow value message.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",4,1,0
"thesofproject/sof","77e3e92157fb70fd749daa7a759500eb639e33bc","yongzhi1","2023-06-16 23:00:22","false","topology2: cavs-rt5682: Add 2ch DMIC topology

Rex SKU1 variant has only 2xDMIC enabled on PDM1, use 2xch
capture for power saving.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",45,61,1
"thesofproject/sof","d102d098e5ab55ffc69084bd06db8a74d07f7844","fkwasowi","2022-10-17 08:20:13","false","mux: implement ipc4 support

mux module does not support ipc4

Signed-off-by: ""Kwasowiec, Fabiola"" <fabiola.kwasowiec@intel.com>",100,52,1
"thesofproject/sof","e31c7abeeb59051c4bc529f77488feaa9585a7d5","RanderWang","2022-09-21 07:11:18","false","topology2: nocodec: add volume and mixer support

Mixer and volume (gain) are used in nocodec topology.

Signed-off-by: Rander Wang <rander.wang@intel.com>",96,52,1
"thesofproject/sof","93d159d7fb435b648ab7aa4e0000ceff711157de","RanderWang","2022-09-13 02:56:47","false","topology2: add lp_mode as a attribute in pipeline

Currently lp_mode setting is not included by topology binary
since lp_mode is not defined as a attribute. This patch adds
it in pipeline.

Signed-off-by: Rander Wang <rander.wang@intel.com>",105,51,1
"thesofproject/sof","18dc72fa89743c59ee4cd84941ce52778ac582c6","fkwasowi","2022-12-12 11:47:39","false","comp: fix bind order

Current ipc_comp_connect() connects the source first, then calls comp_bind
and only then connects the sink. This leads to errors with modules that
assume sink to be connected at bind. This is a valid assumption, so fix
the order in ipc_comp_connect().

Signed-off-by: Kwasowiec, Fabiola <fabiola.kwasowiec@intel.com>",103,54,1
"thesofproject/sof","8543f5c88978d406549412db00c16135fff7d5ff","marc-hb","2022-08-04 09:36:18","false",".github: compile-test multiple zephyr revisions + IPC4

This will show very clearly:
- upstream Zephyr regressions
- upstream Zephyr progressions / fixes

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",111,50,1
"thesofproject/sof","b63c3a37235bb0be29e7e976382105b6dad81b64","johnylin76","2020-07-24 06:15:19","false","tools: testbench: Support channels specification

Support channel specification by argument ""-c"" on testbench

Signed-off-by: Pin-chih Lin <johnylin@google.com>",77,26,0
"thesofproject/sof","984e02ef09e6c07b360e84c8ddfab1847aa98daf","johnylin76","2020-10-27 08:25:26","false","sof: drc: Implement s24 and s32 sample format cases

Implemented s24 and s32 sample format cases of both pass and default
functions.

Because both s24 and s32 cases use 32-bit samples for source/sink stream
while s16 case uses 16-bit, for pre_delay_buffers, it followed as well
(32-bit for s24/s32, 16-bit for s16). One special note is that we <<8 when
storing samples from source to pre_delay_buffers, and >>8 when loading from
pre_delay_buffers. It makes 32-bit samples in pre_delay_buffers are always
Q1.31 in both s24 and s32 cases.

In common functions (e.g. drc_compress_output), sample byte information is
required to pass if the function has the operation of pre_delay_buffers, to
distinguish 16-bit and 32-bit sample cases.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",75,29,0
"thesofproject/sof","87ae3505f62c24fe5c2183aadc9e48e4b9698211","fuyuntsuo","2021-06-10 00:51:40","false","ipc: abstraction: added SOF_COMP_NONE in comp_specific_builder.

For non-specific type of component, the comp builder will adopt

the process type.

Signed-off-by: fy.tsuo <fy.tsuo@intelli-go.com>",80,36,0
"thesofproject/sof","dd81092b6e0c001c02e1c8e7bd5650c84955795d","zhuyingjiang","2018-10-15 06:21:38","false","rimage: add firmware 1.5 manifest binary descryptor

add the 1.5 version manifest, for skylake and kabylake

Signed-off-by: Zhu Yingjiang <yingjiang.zhu@linux.intel.com>",35,4,0
"thesofproject/sof","5d6a43c278781d867b5de09c704975b65fd50690","zhuyingjiang","2018-11-05 08:43:16","false","rimage: manifest: add manifest APIs

add the 1.5 manifest operation APIs

Signed-off-by: Zhu Yingjiang <yingjiang.zhu@linux.intel.com>",38,5,0
"thesofproject/sof","8bc97c1e1305250d06bb53303a9a04942141fdbe","andrula-song","2023-02-22 07:34:52","false","Audio: Fix the volume change doesn't take effect issue

If the initial_ramp is zero, the ramp_finished would always be true,
that means we will never copy gain to circular buffer except we reset
state.

Signed-off-by: Andrula Song <andrula.song@intel.com>",57,57,1
"thesofproject/sof","9da98fdc7f8134ab1210c3d1d93ceb9e41f807c7","mrajwa","2020-09-28 17:22:45","false","codec_adapter: cadence: add header files

This adds header files for codecs working with CADENCE
API.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",66,28,0
"thesofproject/sof","67826253eaf674fffc8e2e75647ca3b4564fc1d0","tlauda","2019-09-13 13:31:33","false","component: add comp_is_scheduling_source function

Adds comp_is_scheduling_source function, which checks whether
component is the one used as a scheduling source for the pipeline.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,15,0
"thesofproject/sof","4b821013a17f7638580d62b7d268028aac74400b","tlauda","2019-03-14 14:31:20","false","hda-dma: utilize generic scheduling support for Link DMA

Changes implementation of HDA Link DMA to fully utilize
generic scheduling support. HDA Link DMA cannot work
with IRQ scheduling, so timer scheduling was hidden
inside of the hda-dma driver. Now it fully utilizes
timer scheduling support by default.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",69,9,0
"thesofproject/sof","3073aa5fc4dbe3c5b42b3cca84692fd64e15f73a","tlauda","2020-03-20 08:34:05","false","idc: extract waiting function

Extracts procedure for waiting in blocking mode for slave
core to receive the message.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",68,22,0
"thesofproject/sof","ac96f2585de666410e8307316517fd878d75d040","ktrzcinx","2020-04-28 06:17:24","false","pcm_converter: Change order in pcm_func_map array

It is made to make easy adding new supported type.
After changes there is easy to see schema how to add
new data format - start with through converter for new type,
then add conversion in both ways for each previous data type
in same order as they were added.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",94,23,0
"thesofproject/sof","e9759df946f6f0352431d53aa9d990b98e1988bf","ktrzcinx","2020-09-17 21:23:32","false","toml: Fix adsp v1.5 parsing

Set right write function.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",64,28,0
"thesofproject/sof","34be3cec87581d64b36326128870a5d1994e513d","ktrzcinx","2019-11-08 07:33:25","false","kconfig: mux: test only supported data types

Do not include data type test when it is not supported by
some platform or firmware version.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",54,17,0
"thesofproject/sof","75dea11da97d89dacb0ccfe4f2007bcd73987188","chunxu-li","2022-04-18 07:38:41","false","topology1: add mt8186 related pipelines and components

add topology file for mt8186
detail:
mt8186.m4
sof-mt8186-mt6366-da7219-max98357.m4
sof-mt8186-mt6366-rt1019-rt5682s.m4

Signed-off-by: Chunxu Li <chunxu.li@mediatek.com>",115,46,1
"thesofproject/sof","d73b626130a96e317d2129f00491941edf56215d","ranj063","2022-01-12 04:07:29","false","codec_adapter: waves/dts: Avoid using ca_source/ca_sink

In preparation for supporting more than 1 input/output buffers, access
the first source/sink buffer from the comp_dev's buffer_list instead of
accessing the ca_source/ca_sink.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",114,43,1
"thesofproject/sof","cbe01073f61cd427a419238b7842fabd1e567150","ranj063","2023-04-06 19:06:48","false","topology2: copier: Make node_type mandatory

Introduce a new class for module-to-module copiers and make node_type
mandatory for the copier class.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",51,58,1
"thesofproject/sof","25dd45f443a9cf2a19f0b1b3952d3717bb3e7bb3","abonislawski","2019-04-09 12:07:23","false","panic: panicinfo filename OOB fix

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",48,10,0
"thesofproject/sof","792afa326f7d74b62c8234d27789266033e6ba13","ranj063","2021-09-28 23:35:46","false","drivers: Intel: hda-dma: remove check for config->cyclic

config->cyclic is not relevant for HDA DMAs. So remove
the check for it. We set config->cyclic to 1 for both
playback and capture for all DAI's anyway. So the check
today would never set FIFORDY for host output DMA
during set_config. But nevertheless, during the start
trigger, FIFORDY is set for all DMA's unconditionally.
That is also incorrect and will be fixed in the following
commit. For now, just remove the check for cyclic to
prepare for FIFORDY bit cleanup.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",121,40,0
"thesofproject/sof","533b2ba8327ede54ca815ac0fad2fdc7852427ad","ranj063","2022-04-27 16:27:52","false","module_adapter: Introduce a new macro module_get_private_data()

Introduce a new macro to access the module's private data and use it.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",114,47,1
"thesofproject/sof","cf57deae457601217c6e846d3bc651475e0a67c0","tinghan-shen","2022-05-13 09:21:57","false","platform: mt8186: Update SRAM size and MPU configuration

Update the SRAM size and MPU region to reflect real hardware
configuration on mt8186.

Signed-off-by: Tinghan Shen <tinghan.shen@mediatek.com>",111,47,1
"thesofproject/sof","03a514dcb1c39dad07b59fa818bd0797ce9cc787","xiulipan","2018-06-11 16:01:48","false","scripts: docker: simplify docker build

Merege commands to reduce layers and remove some useless layers.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",1,0,0
"thesofproject/sof","6ba343691a363f5b83a6846f2beda29f27b22057","ujfalusi","2023-07-28 07:49:37","false","lib-manager: Drop log level for printing the library_base_address

Drop the log level to tr_dbg for printing the library_base_address and
print it only if the allocation was successful.
Allocation error will print an error.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",31,62,1
"thesofproject/sof","64378c57f0cc177ad5c91104d33e820be3949be3","joechengxperi","2022-03-16 09:29:19","false","topology1:ADL:add DTS topology

The DTS Codec can be conditionally added to the sof-adl-nau8825 topology
on those pipelines intended for headphone and speaker output.

Signed-off-by: Joe.Cheng <joe.cheng@xperi.com>",108,45,1
"thesofproject/sof","f639fc8e888b21c0506dc8ca857c7d8b0cf2b8b5","btian1","2023-07-11 13:32:25","false","copier: rename parent_dev to dev

parent_dev previously used as copier device, and corresponding
child_dev is host and dai, after host and dai device remove,
there is no concept for parent_dev, rename it to dev.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",31,61,1
"thesofproject/sof","e62e333e50f3704e8b5ab8254a00ee5a66e1c1e0","yongzhi1","2023-10-30 16:07:16","false","rimage: mtl: Use DP scheduler for AEC module

Change domain_types to DP, and allow it to run all 3 cores.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",5,65,1
"thesofproject/sof","14e7993979ae48f1e3737832e128837882d673f2","ShriramShastry","2021-08-02 06:29:51","false","WIP: Add cmocka tests for trigonometry function

     Added cmocka tests for trigonometry asin,acos and
     complex exponential functions . cmocka tests verifies
     32 and 16 bit accuracy.

Signed-off-by: ShriramShastry <malladi.sastry@intel.com>",109,38,0
"thesofproject/sof","2c54a5488741363a53c676127d744fd5942441f8","lyakh","2023-09-08 14:50:59","false","module-adapter: make interface const

Module adapter interfaces are a collection of methods, implementing
the API, they never change. Make them const.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",20,63,1
"thesofproject/sof","ac910714f40a8d3b1e5cf7fbee3cece8bd404441","lyakh","2023-03-22 11:29:34","false","coherent: fix allocation size

When adding object allocation to the coherent API the size alignment
was misplaced, re-opening a possibility for cache corruption when
sharing cache lines with adjacent allocations. Add alignment to all
coherent object allocations.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,58,1
"thesofproject/sof","e84e9c37ea57465c7122f1fe71b7c4729e672a41","lyakh","2022-08-12 14:22:27","false","mixin: don't overwrite valid configuration

The component .bind() method is called twice - for the upstream and
for the downstream links. When mixout's .bind() is first called for
the upstream link, it correctly sets up its connection to the mixin
component. However, if after that .bind() is called for the
downstream link, that configuration is overwritten with 0. Remove
that overwrite.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",116,50,1
"thesofproject/sof","c426f810cbc3d9f69d5b938726074c9ab8302af0","lyakh","2022-12-12 14:33:11","false","module-adapter: attach and detach buffers correctly

When attaching multiple buffers via their uncached list heads, we
have to make sure to synchronise cache of adjacent buffers.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",103,54,1
"thesofproject/sof","2b4d559d445b1d16273fdd67dada6cce9a4353ca","lyakh","2022-02-02 10:59:54","false","coherent: (cosmetic) align backslashes

Align several line-continuation backslashes in macro definitions.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",104,44,1
"thesofproject/sof","38ce52458f98da5a3c2c4e5bfb0c2b2ef3317b27","lyakh","2021-11-11 14:23:01","false","zephyr: fix secondary core IPC completion

Recently SOF IPC processing has been modified on multicore systems
to let secondary cores reply to IPCs if the primary core has already
left the IPC forwarding context. This hasn't been implemented for
Zephyr which led to unanswered IPCs and IPC timeouts on the host.
This patch lets secondary cores reply to IPCs under Zephyr.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",127,41,1
"thesofproject/sof","98db7915b1e3ae6de17f803f08d484092d224d1e","lyakh","2022-01-06 14:51:05","false","zephyr: trace: fix builds with CONFIG_TRACE=n

When CONFIG_TRACE is disabled in Zephyr builds, they fail because
then _DECLARE_LOG_ENTRY isn't defined.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",115,43,1
"thesofproject/sof","ae1975660b46f0898c67fa4877a5875e2c52bdcf","lyakh","2021-11-24 12:06:13","false","schedule: add schedule_task_before() and schedule_task_after()

Sometimes multiple tasks have to be scheduled together - one after
another and in a specific order. Add two order-enforcing functions
for that.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",129,42,1
"thesofproject/sof","1d8f68140eb9b9066ca46821a1715186d71e54d7","marc-hb","2021-08-23 12:25:24","false","tools: remove spurious dependency on rimage

This reverts May 2020 commit a2de860f4299 (""cmake: fix tools build
with submodules"") that added a dependency on rimage for the entire
`tools/` subdirectory, probably because `smex/ldc.h` included
`rimage/fw.h` (removed in previous commit).

Looking at the code review I can see no apparent attempt to understand
anything, not even a quote of a build error message.

This will hopefully unblock
https://github.com/zephyrproject-rtos/zephyr/pull/37250

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",121,39,0
"thesofproject/sof","749d41d5775218cb419d1cf928e3af1f94e276be","marc-hb","2021-12-09 05:06:47","false","Revert ""trace: do not set trace_ctx section for Zephyr [REVERTME]""

This reverts commit 206df545c47b14f49186d748a6513bd188a20072.

Part of the fix for #5032

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",122,42,1
"thesofproject/sof","8f0df0085e5f1b6e02b2e3335658b72b003ba2ad","marc-hb","2022-05-07 00:42:57","false","Audio: SRC: Convert assert to normal fail

Change the assert() to check for processing function and fail with
-EINVAL if not set.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",115,47,1
"thesofproject/sof","47907d21d5ffa1919e3f9b06de24606be5461ec1","marc-hb","2020-07-16 15:46:58","false","Revert accidental rimage downgrade in ""topology: mirror CML topologies for TGL""

This partially reverts commit 1a8ed6dfd08971642 PR #3184,
merged on Wed Jul 15 15:22:50 2020 +0100. This reverts just the
rimage part of it.

Commit 1a8ed6dfd08 downgraded rimage from:
from most recent   7317f2af39019 (""manifest: set feature mask to 0xffff"")
to 3 commits older 9f3f2d7d7149  (""headers: Use full path to header"")

This upgrades rimage again to newer 7317f2af39019

Hopefully fixes (again): #3173

Useful command for these situations:

  cd sof; git log -p -- rimage

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",82,26,0
"thesofproject/sof","0bf7b73dc8c65b1f3603d4c5455c51e493394012","marc-hb","2022-01-25 02:01:12","false","cmake: move ALSA_CONFIG_DIR from .sh file to topology/CMakeLists.txt

Fixes incremental builds of topology2 that were missing ALSA_CONFIG_DIR.

This was making it impossible to troubleshoot alsatplg issues like #5249.
Now incremental builds fail or pass the same as builds from scratch.

Fixes commit 308a24a92b44 (""topology2: Add build support"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",107,44,1
"thesofproject/sof","96f6a7b385bd4e28c5c6ca4cb1c7cd4343a79f1a","marc-hb","2021-05-05 18:20:33","false","logger: add error messages when failing in the middle of fetch_entry()

Failing _in the middle of one log entry_ should really not be treated as
a normal event. The purpose of a logging tool is to find issues, not
hide them.

Don't abort on EOF because of valid use cases like device suspend but
don't do it quietly.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",81,35,0
"thesofproject/sof","320a93242bf2bf6dd795d3ec48338d6bb9682665","andyross","2023-04-27 02:43:22","false","ipc4: Handle typing errors in component retrieval

In IPC4, the component ID is entirely under the control of the input
protocol, and as components of multiple types exist in the list, it's
possible for protocol messages to fetch an incorrectly typed object,
leading to crashes at runtime.

Force all usage to go through a get_comp() utility that does type
checking.  There was already a similar utility for the special case of
pipelines (which have a separate ID to query).

Signed-off-by: Andy Ross <andyross@google.com>",52,59,1
"thesofproject/sof","eff50e42625df0a6499b9590984c3f170350c27f","brentlu","2023-04-18 02:24:17","false","pipeline: try to stop active component when reset

When resetting a pipeline, components may be still in active state if
previous pipeline walkthrough of stop trigger aborted due to some
reason. Here we give it a second chance to stop the component before
resetting it. Without doing this, some components like dai could cause
DSP panic because the DMA is still running.

Signed-off-by: Brent Lu <brent.lu@intel.com>",51,58,1
"thesofproject/sof","ffff0b061019d3ac02cf038bcc5c746cbb0e83d8","keyonjie","2021-09-08 06:23:22","false","alloc: fix a wrong index calculation in heap buffer

The calculation 'heap - memmap->buffer + 1' is wrong and may lead to
index overflow when we have multiple buffer mm_heap, it should be
'(heap - memmap->buffer) / sizeof(struct mm_heap) + 1'.

Move the calculation to the end of the brace and make the logic simpler.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",118,39,0
"thesofproject/sof","827b2408479c6118e20b48ee3f8fe45ce7a057fc","mrajwa","2019-04-18 21:18:33","false","CMOCKA-KPB: fill source buffer with test data

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,10,0
"thesofproject/sof","91da843de0c6d165a3e879b6aafb9e4730f5fd4e","dbaluta","2021-03-25 15:55:17","false","audio: codec_adapter: Use generic init_process

init_process API is used to initialize the processing phase.
(e.g for Cadence: search for valid header, decode header in order
to get parameters).

init_process needs to have access to the input frames so it will be
called by codec adapter copy() function.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",77,34,0
"thesofproject/sof","83cecc9515f39cedeb532128de813ffcfe4f6d69","singalsu","2020-05-12 12:51:51","false","Audio: SRC: Fix build fail when only CONFIG_FORMAT_S16LE is set

The SOF supported formats options are configurable via Kconfig. The
build can fail to this error when the data formats are changed from
default:

sof/src/audio/src/src.c: In function 'src_copy_s32':
sof/src/audio/src/src.c:431:2: error: implicit declaration of function 'audio_stream_copy_s32'; did you mean 'audio_stream_copy_s16'? [-Werror=implicit-function-declaration]
  audio_stream_copy_s32(source, 0, sink, 0, frames * source->channels);
  ^~~~~~~~~~~~~~~~~~~~~
  audio_stream_copy_s16

The common same rate copy function for S16/S24/S32 formats also
simplifies the code.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",95,23,0
"thesofproject/sof","b1ee4a27b6fa09232878bc0efb06e12f309ba171","kv2019i","2021-10-20 12:21:30","false","zephyr: ll-schedule: fix a race between task cancel and new schedule

As task cancellation is an asynchronous operation, it is possible that
the task is in SOF_TASK_STATE_CANCEL state when zephyr_ll_task_schedule()
is called. With current code, the cancel takes precedence and task is
not scheduled again.

This shows up as errors in SOF audio test case for multiple-pause-resume
where a set of pipelines is repeatedly paused and unpaused. If the race
is hit, a request to pause is successful (and pipeline task is requested
to be cancelled) but the subsequent release will not get schedueld at all
leading to an IPC timeout.

BugLink: https://github.com/thesofproject/sof/issues/4742
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",123,41,1
"thesofproject/sof","16ee5b842718fb1f84db4a353de0c63293ac116f","kv2019i","2023-05-19 13:02:44","false","audio: component: fix frame size calculation with large period sizes

If the product of sampling rate and period size (in microseconds)
exceeds INT_MAX (signed 32bit), an invalid component->frame is
set. This happens for example with sampling rate of 48000Hz and
period size of 50000usec.

While the 'rate' and 'period' fields are uint32_t values, ceil_divide()
in math/numbers.h does calculation with signed 32bit values, leading to
invalid results with smaller input values.

Fix the issue by doing the frame size calculation with 64bit
arithmetic.

Link: https://github.com/thesofproject/sof/issues/7652
Reported-by: Vamshi Krishna Gopal <vamshi.krishna.gopal@intel.com>
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",53,59,1
"thesofproject/sof","a394d8803910f45c029100137fd397f827d22804","kv2019i","2022-09-05 15:38:11","false","ipc4: logging: throttle notifications to host

If something unexpected happens and logging subsystem is flooded
with messages, do not make the matter worse by flooding the host
with IPCs. This implements a lower threshold for how often
notifications can be sent to host.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",119,51,1
"thesofproject/sof","2c4e403d4d680ecfb31aaa493b88b12389125584","kv2019i","2022-08-17 16:19:32","false","copier_hifi: fix Zephyr logging

Add log definition for Zephyr allowing to build this module
for Zephyr when logging is enabled.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",113,51,1
"thesofproject/sof","fbb4053af0ff7486b3a5e8bd72ca59aa51f0263c","xiulipan","2018-11-06 07:38:27","false","scripts: only update platform that will be build

Keep other platform binary and lst files

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",39,5,0
"thesofproject/sof","894796e0257e8aa2c03f7c9b9fcf6632463f15a6","andrula-song","2022-09-29 01:43:41","false","Audio: EQ-IIR: Fix the bug of parallel EQ calculation

As for our previous design, if we have parallel EQs like
filters bank, they get the same input and outputs are summed.
There is a mistake of the input assignment in our current code,
this commit will fix it.

Signed-off-by: Andrula Song <xiaoyuan.song@intel.com>",97,52,1
"thesofproject/sof","d9d584265417e447a63ffcbab0e740e2aeb28372","fredoh9","2022-08-15 04:20:01","false","Tools: Testbench: add fulltest parameter in process_test

fulltest param to control quick chirp test only or full test
including all quality tests.

As minor clean up, unused parameter in thdnf_mask() and test_run_process()
is removed.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",116,50,1
"thesofproject/sof","adaebb3e43b726d899989172e009853b697a2aad","pjdobrowolski","2022-08-31 08:14:23","false","library manager: allow sending IPC message if buffer is already prepared.

System service functionality used by 3rd party modules expects
that IPC data buffer will be filled with data during
notification preparation. To avoid additional data copy,
provide message buffer directly to module. This requires
that ipc_msg_send() function will not fail if source data pointer will be
equal to destination one.

Signed-off-by: Stelter, Jaroslaw <jaroslaw.stelter@intel.com>
Signed-off-by: Dobrowolski, PawelX <pawelx.dobrowolski@intel.com>",115,51,1
"thesofproject/sof","e8fdfdda7aa2a82d498a7307195cd424b547ce6a","aborisovich","2023-07-24 08:21:44","false","west.yml: Update rimage revision to aa0ac9ea

Pull in following rimage changes:
aa0ac9eae675 rimage.c: fix bug where -p requires a new
and ignored parameter

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",32,62,1
"thesofproject/sof","ba56ccac4f5a28b56ac47730b4b9464f53836f17","tlauda","2019-07-12 11:16:58","false","init: cleanup includes

Cleanups includes in init file.
Unused headers has been removed and needed
has beed added.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",43,13,0
"thesofproject/sof","93f20d577c022d7efbaf7fbc85530a1b1f74b1f6","marc-hb","2022-03-10 18:29:41","false","xtensa-build-zephyr.py: forbid shell=True

The entire purpose of replacing the older shell script with Python was
to achieve cross platform compatibility. shell=True would lose that.

See also
https://docs.python.org/3/library/subprocess.html#security-considerations

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",112,45,1
"thesofproject/sof","06d785cf7e897e5c79a1c7be6654710a0dc324a8","cujomalainey","2021-02-16 23:49:11","false","cppcheck: imx: suppress divide by sizeof

There is a bug in upstream cppcheck where dereferencing a pointer does
not result in a type check in sizeof as far as cppcheck is concerned.
This results in a false divide by sizeof(pointer) error.

See https://trac.cppcheck.net/ticket/10179

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",74,32,0
"thesofproject/sof","06c83dc37534d4b6e9d9b76885faa442cb0b2b80","bardliao","2022-01-13 08:35:32","false","topology2: cavs-sdw: add audio format tokens

Add audio format tokens for cavs-sdw.conf

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",117,43,1
"thesofproject/sof","3f4fb50d8ed580a9c090ca47ec9ec3533b98c124","bkokoszx","2019-02-05 13:13:25","false","kconfig: cavs_ver: using cavs_ver in interrupt.c

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",58,8,0
"thesofproject/sof","fd535f0a9b5ab7b0335b48a657c07305bd4cca63","singalsu","2023-08-28 14:56:50","false","Math: Cleanup FIR and IIR build type select

The normally undefined SOF_FIR_FORCEARCH or SOF_IIR_DF2T_FORCEARCH
can be defined at command line to force the build of other code
optimized version for any compiler. The usage is only for
debugging, e.g. build generic FIR version with xcc.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",25,63,1
"thesofproject/sof","b35ad45f3a5c5cf903d1a1a7bfc6023d6e9aa899","singalsu","2022-10-20 09:27:33","false","Audio: SRC: Fix HiFi3 SRC off-by-one frame issue

This patch fixes the FIR compute off-by-one frame bug. The fix
is similar as for generic C except that HiFi3 pointers
arithmetic is in bytes.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",96,53,1
"thesofproject/sof","3e368fefeeddcb3533ccd6b81d074f9fee954ead","singalsu","2023-10-02 07:59:56","false","IPC4: Add header to support user space ALSA notifications

This patch adds struct sof_ipc4_notify_module_data that matches
the Linux kernel handler for notifications from firmware to ALSA
user space. The SOF_IPC4_NOTIFY_MODULE_EVENTID_ALSA_MAGIC_VAL
event_id is used to identify the notifications for ALSA controls
like switch and enum.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>
Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",16,64,1
"thesofproject/sof","dd411603a9c160e08600d84356a1c7312e5e74bc","lgirdwood","2018-09-28 14:18:13","true","Merge pull request #436 from mmaka1/dma-cleanup

dma: simple i/f to control flow between platform and lib",37,4,0
"thesofproject/sof","e10126306aa538cbcce567a3977562726495e049","lgirdwood","2018-10-26 15:15:23","true","Merge pull request #513 from thesofproject/revert-505-link-dma-id

Revert ""hda: set correct link dma channel""",29,5,0
"thesofproject/sof","f28ec17402a2ff223e797f094e5b111ac6ef07b5","lgirdwood","2022-01-21 12:01:42","false","Revert ""codec_adapter: Remove setup config from module data""

This reverts commit 5763c74bf408df0272d51daabd780a702aea7b26.",114,44,1
"thesofproject/sof","2e1d2ecabb1701002d41e871927341e336416a5e","aiChaoSONG","2021-07-09 05:02:54","false","topology2: Add HW Config class

Add class definition for HW Config, HW Config object
can be instantiated as:

  Object.Base.hw_config.""NAME"" {
	id		0
	mclk_freq	24000000
	bclk_freq	4800000
	tdm_slot_width	25
    }

where NAME is the unique instance name for the hw_config
object within the same alsaconf node, for example, SSP0.

Signed-off-by: Ranjani Sridharan <ranjani.sidharan@linux.intel.com>
Signed-off-by: Chao Song <chao.song@linux.intel.com>",86,37,0
"thesofproject/sof","4c78e94a08eb5909a44988666d8cabf6b75178a9","yongzhi1","2020-09-22 21:50:08","false","topology: fix playback & capture pipelines to be timer driven

The patch fixes two SSP pipelines to be scheduled in timer domain.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",67,28,0
"thesofproject/sof","426647343fbd43659980b1befb5f26d2b27e1a07","jajanusz","2019-04-05 17:44:26","false","test: selector: remove unused variables

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",48,10,0
"thesofproject/sof","b899489e49320964ba8b2276e0bacb019976a8a4","xiulipan","2019-09-11 04:02:11","false","topology: fix wrongly used SCHEDULE_DEADLINE

SCHEDULE_DEADLINE is replaced with SCHEDULE_PERIOD, but there is one
missed in DAI_ADD for W_PIPELINE.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",60,15,0
"thesofproject/sof","c5b4421c99606c3cdbc377fdb5903c2e5af607ac","xiulipan","2020-03-27 05:03:13","false","topology: add pipe-vol-kfbm-capture to have vol before kfbm

Add vol comp before kfbm comp in pipe-vol-kfbm-capture.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",65,22,0
"thesofproject/sof","bcba81611b0d07063d9df924adb44f79b0e75aac","cristinailie","2021-03-17 20:03:31","false","kwd demo: expose detect_test_notify function for other modules

Expose detect_test_notify function for
other modules which would implement
an alternative of default kwd detection

Signed-off-by: Cristina Feies (ilie) <cristina.ilie@nxp.com>",72,33,0
"thesofproject/sof","c9bed91e6d61dbc5346833abb02e748bbbddb400","johnylin76","2021-07-26 05:58:47","false","drc: Clean up source_format on component reset

Clean up all contents in component data on reset().

Signed-off-by: Pin-chih Lin <johnylin@google.com>",99,38,0
"thesofproject/sof","f42d015d596a7536d0cc72e847f32dc3560e9a40","johnylin76","2022-12-07 14:23:42","false","topology: add more make cases for ADL

Adds cases {MAX09360A + RTNR + GOOGLE_RTC_AUDIO} and
{CS35L41 + WAVES}.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",101,54,1
"thesofproject/sof","9483c19f866bbc31a67fe02fb33423d6d326891f","dbaluta","2023-04-11 11:27:02","false","Audio: module adapter: Fix module_set_configuration

After commit 7d0a0c673f94 (""Audio: Module adapter: Pass entire cdata to
clients for all controls"") md->ops->set_configuration gets the entire
cdata but module_set_configuration expects only cdata>data[0].data.

So, restore the pointer fragment to cdata->data[0].data.

With IPC4 in comp_data_blob_set() the use of
struct sof_ipc_ctrl_data pointer step is not done but the
fragment is treated as raw data payload without the header.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",50,58,1
"thesofproject/sof","1641ed6cdf7eb98c7f0f08ec2a52b1b79eeca429","dbaluta","2022-08-04 18:15:21","false","Revert ""Audio: SRC: Increase length of internal buffer""

This reverts commit 3aff4598f7ebd79d8cfb0398d85a85bbf4ba37e1.

This commit causes pipelines that convert from 44.1khz to 48khz to
freeze, when the firmware is compiled with Xtensa toolchain.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",113,50,1
"thesofproject/sof","c2d7b7c7968d90bea7baa2dba690ac0137e40831","lrgirdwo","2019-01-11 15:33:01","false","alloc: trace: improve trace output showing heap used block counts

Show total and used blocks for each heap.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",55,7,0
"thesofproject/sof","2da1c71b2c9a993d8e30b66b2fe08c89996a5643","plbossart","2019-02-04 17:15:29","false","tools: kmod_scripts: remove modprobe error log and cleanups

filter out modprobe log if module is not in tree
also add missing codecs (rt5682 and wm8804) and reorder codec list

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",57,8,0
"thesofproject/sof","f222070b6cc1e67fa5a70b896f4006d06d14dd63","tmleman","2023-07-05 18:49:02","false","copier: synchronized fpi updates of hd-a gateways

This patch add synchronized FPI updates of HD-A gateways. Driver can
define group of such gateways via module init IPC. The driver may also
specify an update period for each group, different than the default one
determined by the system tick frequency.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",31,61,1
"thesofproject/sof","ba2d4fea72a525e6d65c0eaaf2ecaed700d87878","lkoenig","2021-12-21 10:55:07","false","comp: Add mock for google_rtc_audio_processing

This adds a mock to be able to build with the
google_rtc_audio_processing component.

Signed-off-by: Lionel Koenig <lionelk@google.com>",121,43,1
"thesofproject/sof","d31b7352d46e6c4780ffacba296a9d1904dbefb6","tlauda","2019-08-05 10:13:19","false","init: move interrupt_init after init_heap

Moves interrupt_init after init_heap. During interrupt
initialization we need to allocate spinlock, so we need
already initialized memory map.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,14,0
"thesofproject/sof","4674890dafe93f26e0a9108a8f56b32d7d8b9b02","tlauda","2020-01-15 15:12:54","false","ipc: use platform_shared_commit()

Uses new platform_shared_commit() to commit
shared ipc structure data.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",75,19,0
"thesofproject/sof","2baeeadeda40dbb6907bdaf0614890165049e6e8","tlauda","2019-11-28 15:45:28","false","schedule: separate task init functions for schedulers

Separates task init functions for all currently supported schedulers.
Some of the parameters are not common, so there is no need to
artificially extend function signatures.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",68,18,0
"thesofproject/sof","3612491291eab1bbdce96d517672f7218f5861cb","tlauda","2020-01-16 12:03:34","false","pm_runtime: make pm_runtime_data shared

Makes pm_runtime_data a shared structure. Some of the power
management functionalities can be used by multiple cores.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",78,19,0
"thesofproject/sof","0f4141a36780d55b9d4fc25517d4bb61d6eae3fe","crazoes","2020-04-18 16:21:07","false","scripts: qemu-check.sh: Exit if unknown platform specified

Exits if an unknown platform is specified. Currently, there are no
warnings or errors.

Signed-off-by: Shreeya Patel <shreeya.patel23498@gmail.com>",92,22,0
"thesofproject/sof","f71eb15818fd43d9ecd16a73fe58e2983e527ecb","marc-hb","2022-12-05 18:54:19","false",".github/workflows: upgrade actions/checkout@v2 -> v3

This should get rid of most warnings in daily tests

```
Node.js 12 actions are deprecated. For more information see:

https://github.blog/changelog/
 2022-09-22-github-actions-all-actions-will-begin-running-on-node16...
Please update the following actions to use Node.js 16: actions/checkout@v2
```

Example at
 https://github.com/thesofproject/sof/actions/runs/3597808171

v3 seems backward compatible. Upgrade only the most used instances for
now (most used because of the `matrix` of platforms), upgrade everything
in a few days if no issue is spotted.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",102,54,1
"thesofproject/sof","96edbbb99c7005f586202ebfd51e9b3c3d959b26","lgirdwood","2018-09-13 14:08:01","true","Merge pull request #368 from xiulipan/mirqlistfix

interrupt: fix unsafe list del",42,3,0
"thesofproject/sof","c8566db888ba8c96a5c83caa97d9813d75602bdc","lgirdwood","2018-08-21 14:27:36","true","Merge pull request #242 from bkokoszx/fix_dsp_a

Fix DSP_A mode",19,3,0
"thesofproject/sof","e082dd816a22b6d251e57ed9b7b58b360364b582","lgirdwood","2018-11-28 10:11:42","true","Merge pull request #640 from ranj063/codeowner_topology

github: add @ranj063 as topology owner",42,6,0
"thesofproject/sof","4b62c251acce66778e19a467165ff561597be456","lgirdwood","2018-07-20 09:10:55","true","Merge pull request #134 from bkokoszx/test_component_set_state

test: component: change comp_set_state test cases",13,2,0
"thesofproject/sof","0fd9828d0cb9a15fdea46d454879583a31e99a8f","singalsu","2023-09-01 09:37:58","false","Audio: Multiband-DRC: Fix comment for switch control workaround

The workaround is preserved but the comment is updated to describe why.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",24,63,1
"thesofproject/sof","e22d6e940f21f9228b0ea669c0e83737ebaf30e1","tlauda","2020-01-21 12:38:34","false","dai: host: move notifier calls to valid locations

Moves notifier_register and notifier_unregister calls to original
valid locations. It has been moved previously to comp_trigger due
to the specific implementation of SMP. Now they can be moved back,
since every component is created on dedicated core.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",78,20,0
"thesofproject/sof","f4af2a6671a736c5b2aa85cb63995066614b4b80","tlauda","2019-12-19 14:06:36","false","clk: pass sof context to platform_clock_init

Passess sof context as an argument to the platform_clock_init
function. This way we will be able to store clocks pointer
in the main context.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",72,19,0
"thesofproject/sof","752a3b2e1521bcac3a81ecde37c460e4484091e2","tlauda","2019-09-30 06:01:37","false","task: change IPC and IDC tasks' priority

Changes priority of IPC and IDC tasks. They are always scheduled
as EDF tasks, where order of scheduling is based on deadline
and priority is meant for special tasks e.g. IDLE or ALMOST_IDLE.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,16,0
"thesofproject/sof","419806fb1c50516c8f84f590b7c3b12ad0da2dff","marc-hb","2021-02-08 18:28:54","false","xtensa-build-all.sh: add PATH to build log

The script already logs the full CMake command that is re-usable outside
this script... except for the PATH change. Expose that sneaky PATH
change.

Debugging every build issue starts with peeling the too many layers of
indirection.

Also fix some minor issue in the help message.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",73,32,0
"thesofproject/sof","116e14119331cbbd90b572e547e8d1c6feb28c9b","ktrzcinx","2020-05-13 13:04:48","false","headers: Move headers to rimage namespace

Because there is possibility to reference headers from this repo
from another one, there is a need to put every header into rimage
namespace. Otherwise reference to headers from duplicated
namespace (like kernel) from external repo may be ambiguous.
Update guard ifdef/define/endif sequence value, to make it more
unique

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",96,23,0
"thesofproject/sof","8720cf203a5c2b0ea37d4f10bcb86aa0c5d32e10","ktrzcinx","2020-07-10 12:57:35","false","dma: Return error code from dma_buffer_copy_* function

This function should error code from 'process' to their client.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",73,25,0
"thesofproject/sof","0194175daa691792b71b6a0d38ef12018d3df30e","ktrzcinx","2019-12-27 13:31:56","false","trace: Add pipeline id to buffer traces

It will be helpful during debugging components
to see correlated pipeline id.

Kept two lines over 80 charakters because of readability issues.
For same reason there is not introduced special construction to
avoid 'parameter reuse in macro' warning for trace macros.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",69,19,0
"thesofproject/sof","27281d75e72529165cc3609aaf5a95806b078737","singalsu","2018-10-09 12:12:12","false","Topology: Add DMIC capture pipeline with gain and high-pass filter

This patch adds topology sof-apl-eq-dmic to help testing acoustical
audio capture via DMIC or work as example for other machine drivers. The
capture format is set as four channels, S32_LE, 48 kHz. The IIR EQ is
a 2nd order Butterworth high-pass with cut-off frequency at 50 Hz to
suppress non-audible lowest frequencies. The EQ provides additional
+20 dB gain to avoid the recording to sound too silent.

The IIR EQ or additional FIR EQ instance can when needed provide other
form factor specific equalization.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",35,4,0
"thesofproject/sof","0963d88ba33afd160d3f57dc7a7afc13e00c7a38","singalsu","2020-10-26 16:41:47","false","Tools: Tune: TDFB: Simplify typical usage of bf_design(), bf_export()

The bf_defaults() now sets the default directory locations for
for bf_export() so it does not need to be set in every script.

Also the defaults for input channels and output mixing are set to
that in typical design they do not need to be set.

The default distance for look direction is set to 5.0m so it is better
guaranteed in far field for even relatively large arrays. The far field
assumes planar sound waves. The design equations do not fully support
near field with spherical waves.

The FFT length is changed to 1024 to enable design of longer filter bank
filters. There's no compromise in performance for for e.g. length 64.

The incorrect use of mic_n (number of microphones) is replaced by
num_filters. It's possible define beamformer that ignores some mic
channels so these are not the same.

The automatic systematic design file names are now created for all array
types, not just line.

The script is made more flexible to run without need to export data and
clutter just to quickly interactively check from plots what kind of
beam pattern and other characteristic some array, e.g. circular with
some radius and mic count gives.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",74,29,0
"thesofproject/sof","bd604d06e3f8f40e07251bb40886a890c636cffa","dbaluta","2021-02-22 12:31:12","false","xtensa-build-all.sh: Bump IMX xtensa toolchain version

Lets use the same version of Xtensa toolchain as Intel in order
to avoid compilation problems.

It is difficult to support multiple toolchain versions because specific
headers needs to be updated, so lets have the same version supported
between IMX and Intel.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",74,33,0
"thesofproject/sof","6126ccc626ca1584aeab506f418f8eab7a6f9be3","plbossart","2021-02-02 17:10:27","false","topology: use DMIC gain boost similar to HDAudio topologies

We used the same macros in .m4 files but missed the additional
configuration needed in CMakeLists.txt

Reported-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",69,32,0
"thesofproject/sof","89660c616067f88fa84a9659ba43036a81b2a2aa","lrgirdwo","2023-06-02 12:38:08","false","module_adapter: optimize buffer updates for consume and produce

Direct call for buffer updates and avoid notify usage.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",46,60,1
"thesofproject/sof","6d7a17e6f304e90c7491a5f242a70bfa74de0de4","lrgirdwo","2020-08-24 15:08:58","false","schedule: atomic: atomic values must be read during arithmetic

atomic operations must use the value returned by the atomic_add() or
atomic_sub() operation rather than a subsequent (and non atomic) read.

Fix this by using values returned by atomic add() or sub()

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",76,27,0
"thesofproject/sof","d2409a233d0b8bfd596b000d9f9fb30fb2559322","lyakh","2021-06-22 15:05:04","false","zephyr: ll-domain: stay within the zephyr_* namespace

zephyr_domain.c is a drop-in replacement for timer_domain.c. To avoid
modifying initialisation code we used the same timer_domain_init()
name for its initialisation function. However, the rest of the file
uses the zephyr_domain_* namespace. Rename the function to stay
within the same namespace and use a macro to redirect the call.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",74,37,0
"thesofproject/sof","5d9ae0de93fd4f6aab503088066deaf02e657a52","akloniex","2020-10-19 10:47:55","false","logger: Decode %pQ format specifiers as log entries.

To allow proper display of suppressed message info traces, %pQ specifier
was chosen to decode pointers to log entries.
Helper function asprintf_entry_text() is used to handle the log entry
text for display.

Signed-off-by: Artur Kloniecki <arturx.kloniecki@linux.intel.com>",73,29,0
"thesofproject/sof","57fabdca8edc4f78aefb6ecf3aeb5d2a2b26e884","ranj063","2022-01-11 00:19:34","false","codec_adapter: passthrough: remove passthrough.h

All interface op definitions are static. No need to declare them.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","3bf866a961392f4a2f69e78d92c3a2fffe1c887c","jajanusz","2019-09-30 17:37:44","false","rimage: image manifest v2.5

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",66,16,0
"thesofproject/sof","24259d7967953c0567696737df632a601145d2f8","jajanusz","2019-01-30 07:04:54","false","rimage: use fopen binary mode",57,8,0
"thesofproject/sof","c0f156b2bac54c03d176b945f3a2be2c007ce196","jajanusz","2018-08-31 13:19:33","false","icl: initial support

Added icelake platform to platforms.
Updated rimage to support icelake.
Updated autoconf and automake files.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",27,3,0
"thesofproject/sof","46730e89c62aea30559a86a181796b932ce5a5f4","jajanusz","2019-02-08 00:16:09","false","cmake: refactor version.h rule

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",58,8,0
"thesofproject/sof","b022ea6b052830864c6f9e4c4ade0d1e76a62344","jajanusz","2020-07-14 11:17:20","false","rimage: set feature mask to 0xffff

Update rimage to version that has feature mask set to 0xffff.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",80,25,0
"thesofproject/sof","a59e428b6128796e228a27299576f5e22288071a","jajanusz","2019-01-15 18:48:42","false","test: debugability: fix for full paths

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",54,7,0
"thesofproject/sof","8f0e4d858b3dbffb8a44cee1114f0cf80bab5223","abonislawski","2020-05-14 12:34:55","false","cmake: testbench compile options fix

This will provide CONFIG_LIBRARY variable for testbench build

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",99,23,0
"thesofproject/sof","7628908d0ddabf231a12ec09e8417b3052b3cc07","tmleman","2022-10-26 13:34:15","false","mtl: power: enabling zephyr power manager

Enabling zephyr power management functionalities for meteorlake board.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",93,53,1
"thesofproject/sof","99665561059b0c6f9d806772b4bddfdc0297f65c","ranj063","2022-06-15 22:14:14","false","data_blob: Introduce a new helper for setting the blob

Introduce a new helper function to set the blob to be used with the
module adapter set_configuration op. When all modules are converted to
use the new op, the comp_data_blob_set_cmd() can be removed.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",120,48,1
"thesofproject/sof","e52de83dffedd6ce9386aacb7997b9be556bede3","ranj063","2022-10-24 17:46:48","false","ipc4: Set comp direction during module binding

Simplify the direction setting for components to assign the direction
for components during module binding. Copier components always have
their direction set during init, so use that to set the direction for
the other modules.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",96,53,1
"thesofproject/sof","56682f4d797fcfdb0c33a47a4056339b0bc85ec6","abonislawski","2019-04-03 13:06:51","false","coredump-reader: remove isatty() and fixed print when used with piped more

Now it is possible to pipe output with 'more'

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",53,10,0
"thesofproject/sof","d92f07ad30d1a6ef62cb069fbbac1601eb91f1c0","makarukp","2022-11-23 12:44:26","false","hda: chain management and logic implementation

Hardware HDA chain require manager for controlling multiple streams tasks.
Enable support with LL task and DMA mandatory logic.

Signed-off-by: Piotr Makaruk <piotr.makaruk@intel.com>",95,54,1
"thesofproject/sof","1ae525ad37b891ab7ad30159fe4d746d702d43a1","ujfalusi","2021-12-17 09:56:58","false","dma-trace: dma_sg_free() can not be used to free SOF_MEM_ZONE_SYS allocations

dma_sg_alloc() is called with SOF_MEM_ZONE_SYS which can not be freed up.

dma config or start error skip the free as it is not going to work anyways.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",117,42,1
"thesofproject/sof","068f143810262a8c1c4e8b5e74885d5a94c97470","ujfalusi","2023-08-28 12:35:54","false","ipc4: handler: Use separate loops for pipeline state phases

Currently the pipeline state change flow handles the phases at the same
time for each pipeline (for two pipelines):
pipeline1 prepare
Pipeline1 trigger
pipeline0 prepare
Pipeline0 trigger

This can open a race condition when pipeline1 is already triggered and is
in active state while pipeline0 is not yet prepared, configured.
The process function of a component from pipeline1 might query information
from pipeline0 at this point, which can lead to errors.

With the separate loops the flow will be changed to:
pipeline1 prepare
pipeline0 prepare
Pipeline1 trigger
Pipeline0 trigger

It will make sure that all pipelines and components have been prepared
before the triggering is going to happen.
Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>

# Conflicts:
#	src/include/sof/ipc/topology.h
#	src/ipc/ipc4/handler.c",25,63,1
"thesofproject/sof","d2a3ec2273f2efc6e63221ec8022cbd5a713e869","xanthein","2021-12-06 09:52:35","false","sof_ri_info: add ADL Intel prod key to list of known keys

Extracted from
https://github.com/thesofproject/sof-bin/blob/main/v1.9.x/sof-v1.9.2/intel-signed/sof-adl.ri

Signed-off-by: Dirk Su <dirk.su@canonical.com>",123,42,1
"thesofproject/sof","0e309fdc16c1b8df24ca7595b959e7a2311e5283","lyakh","2020-03-13 09:50:32","false","IPC: don't send uninitialised memory to the host

Currently multiple functions send struct sof_ipc_comp_reply to the
host over IPC without initialising its .id field. To avoid this and
similar problems in the future initialise reply objects in their
definition statements.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",83,21,0
"thesofproject/sof","6713cace3586115c82dd18a111b63d6f4cd4b435","Vamshigopal","2021-08-13 04:28:59","false","topology: sof-tgl-max9357a-rt5682: add support for ADL

For speakers SSP2 link is used.
For Headset SSP0 link is used.
Adding required macros to select SSP and Platform.

Signed-off-by: Vamshi Krishna Gopal <vamshi.krishna.gopal@intel.com>",116,38,0
"thesofproject/sof","d4fd1b3eb696fd3c213a4a76e892e667c6f93a20","lyakh","2021-09-23 09:09:28","false","timer_domain: don't unregister interrupt handler from itself

If the last task in the timer domain is completed, the ll_scheduler
tries to unregister the task from the domain. The timer domain
driver currently tries to unregister the interruptin its
.domain_unregister handler, which then leads to a crash. Avoid
unregistering the handler from itself.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",118,40,0
"thesofproject/sof","302ebe3b031b4478060202ab5f101e24182f8ead","marc-hb","2022-03-08 01:58:37","false","version.cmake: fix git -C sof/ log command when building Zephyr

When building Zephyr, CMAKE_CURRENT_SOURCE_DIR does not point at
SOF. Use SOF_ROOT_SOURCE_DIRECTORY instead.

No impact besides the logs.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",114,45,1
"thesofproject/sof","6ac13128cd072ba25410f4c1380986c8b65f30d0","marc-hb","2021-06-01 07:22:44","false","trace: initialize DMA trace _after_ mailbox

The DMA trace is optional, the mailbox is not. This lets use the mailbox
when initializing the DMA trace.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",83,36,0
"thesofproject/sof","f30d11072a524c482f8bf25236528735b8536b70","marc-hb","2020-08-28 17:59:17","false","build-tools.sh: fix minor shellcheck warnings

Missing quotes mostly, also some disable=SC2034 because ""eval"".

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,27,0
"thesofproject/sof","6be9315596271c32d39e5e829bef8ff1d2b8fc75","marc-hb","2020-08-28 18:34:14","false","rebuild-testbench.sh: remove CMAKE_VERBOSE_MAKEFILE

Default is verbose enough. VERBOSE=1 can still be used later at make
time.

Also change nproc to nproc --all because we don't care about offline
processors.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,27,0
"thesofproject/sof","b9cf1aeb3b9530782e31d8ac0ba63a69bc709198","marc-hb","2020-10-15 22:41:11","false","pkcs1_5.c: don't pretend everything is fine when failing to sign

Found by chance and reproduced by making a typo in the key's filename.

Note there is already an (unchanged) error message:

 pkcs: signing with key sof/keys/otc_private_key_3k.pemX
 error: can't open file sof/keys/otc_private_key_3k.pemX -2
 Firmware manifest and signing completed !

But now rimage does not pretend success and the build does not keep
going with an unsigned image like nothing happened.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",72,28,0
"thesofproject/sof","5a10cd8be2c38127f23b9b1d4bf6c6f4167ebd01","slawblauciak","2018-07-05 09:59:23","false","test: alloc tests

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",10,1,0
"thesofproject/sof","f5832aa273e76c52332eea153a98bb955de790a8","keyonjie","2019-06-12 07:09:00","false","Topology: sof-cml-rt5682: add dmic16k PCM and dai

Adding dmic16k PCM and dai, this is aligned with driver side.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",49,12,0
"thesofproject/sof","980171e607ad95424f4ac3c8e4ae3bbda9abe385","slawblauciak","2019-04-30 12:01:33","false","dai: supply caps and other info from within drivers

This change gathers some of the information inside of the DAI drivers,
which was previously inferred using external logic.

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",46,11,0
"thesofproject/sof","fc255ac943fe4fb1c7b503b26b49e688ad56ba83","keyonjie","2021-09-09 09:59:54","false","cavs: memory: make full use of HPSRAM

Make size of the buffer zone calculated at the linking stage, to make
full use of all HPSRAM memories.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",118,39,0
"thesofproject/sof","187c845ddcd8d010212d0e6602f89d80f22e75db","reddymur","2022-09-12 13:47:15","false","topology1: CMakeLists: add ADL support for ES83x6

Added ADL support for ES83x6 on SSP1.
Signed-off-by: Muralidhar Reddy <muralidhar.reddy@intel.com>",106,51,1
"thesofproject/sof","eaa9a55d0b844d93dc861fff727d0782886f6d66","mrajwa","2020-11-24 20:14:54","false","codec_adapter: fix for CADENCE codec reset

Codecs which apply to CADENCE API don't have any means
of reset, therefore we need to rework the reset procedure
so cadence codecs can remove all memory allocated by itself
and re-initialize again.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",78,30,0
"thesofproject/sof","6115724ce8f1656d801f431a413e5fb2e3834669","mrajwa","2019-07-25 14:28:59","false","detector: update prepare() method

This change updates prepare() method to support proper
threshold for 24 bit samples.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,14,0
"thesofproject/sof","374a1d6af4a17a9e7aed95c562db2917e8a04f86","singalsu","2020-04-23 12:05:06","false","Testbench: Check tplg_read_array() error codes in topology parsing

This patch adds the missing error codes check to avoid the parsing
to continue after a possible file I/O fail.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",71,23,0
"thesofproject/sof","ec6ed1ac152ef68b56d14530094a9590f05ea694","singalsu","2019-05-27 15:28:06","false","DMIC: Increase start gain ramp length to 400 ms

This patch updates the gain update coefficient to achieve
a longer ramp time. The previous 300 ms long ramp was not
enough to conceal all of the slow DC component settling seen
in the beginning of DMIC capture.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",64,12,0
"thesofproject/sof","4dfcb4e7f8f6dc53eae323bcd20354f999d88f36","kv2019i","2022-11-16 17:26:11","false","treewide: rename panic() to sof_panic()

The panic() macro can easily lead to namespace collisions and
as sof/debug/panic.h is used in many places, this is hard to
avoid. For example including Zephyr log_ctrl.h header is not
possible if SOF panic definition is included in the same file.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",97,53,1
"thesofproject/sof","694dd4d4a5772bb160fa3a077a105df65e3eb05e","fkwasowi","2023-03-29 08:14:10","false","peakvol: prevent division by zero

When calculating the time_ratio, a situation may occur
where cd->initial_ramp is equal to zero. To avoid dividing
by zero it is necessary to insert an additional condition

Signed-off-by: Kwasowiec, Fabiola <fabiola.kwasowiec@intel.com>",58,58,1
"thesofproject/sof","a10ccbdcb221844caeca56ad812d17bd25d260ee","singalsu","2022-04-04 09:21:50","false","Tools: Topology: Add a development topology to RUN SRC on UP2

Add this topology to be able to test SRC playback and capture.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",110,46,1
"thesofproject/sof","b8dfacba88aa811dba6f87bb33af32147375dae6","bkokoszx","2018-10-25 10:59:51","false","logger: refinement handling invalid trace address

In case of getting invalid trace address file descriptor
now moves forward only one dword, not whole struct dma_log
as it was earlier.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",27,5,0
"thesofproject/sof","5fdecbc2eb4f8b74c8cd41a9f2d437dd1c22b0f2","btian1","2023-05-25 13:14:47","false","copier-dai: rename some common function name

Those function are both needed in legacy and zephyr part, simply
with zephyr prefix is not suitable, rename it with common prefix.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",51,60,1
"thesofproject/sof","2b4bb0607406e7f84f283634ef2b881c54c471be","btian1","2023-02-15 06:02:29","false","copier: Implement host processed data and position in copier

Implement host data processed data and host position in copier to
avoid use host ops driver.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",56,56,1
"thesofproject/sof","bb795aeb2044aaec79b061ddc282683f7f041ae8","DianaGabriela27","2019-03-06 13:09:02","false","rimage: Align block comments on each line

Signed-off-by: Diana Ungureanu <diana-gabriela.ungureanu@nxp.com>",66,9,0
"thesofproject/sof","224f177020fabb367b7c3560e52ccbac8c522411","lrgirdwo","2019-09-12 13:46:03","false","fuzzer: add support for HSW and BDW platforms.

Can now send fuzzing IPCs and topologies to HSW/BDW VMs.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",62,15,0
"thesofproject/sof","0cec50a97688da0b7c70941146789c5dc02aa75f","lrgirdwo","2022-02-04 17:00:13","false","testbench: further refactor of per pipeline data

The testbench currently has a global structure that contains
per topology and per pipeline data. Refactor to move data to the
most appropriate structure for use.

This is not the final fix, further refactoring is needed.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",106,44,1
"thesofproject/sof","47a9b784e1cec290927e9095ba4f1134d40b9aef","plbossart","2021-02-11 18:58:26","false","topology: dmic-kwd: add macros for DMIC names

Fix macros (capitalized K), use them both for regular and -kpb
capture, fix names

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",72,32,0
"thesofproject/sof","d8020e19810ebcf4d0de608db29ba9d8a1c821c6","lrgirdwo","2019-04-20 10:20:07","false","cavs: irq: keep servicing level 2 IRQs until status is clear.

The current level2 IRQ handler could miss IRQs as it only read the IRQ
status once at the start of processing. This would mean that any long
duration IRQ handlers or being preemptied by higher level IRQ could cause
new IRQs to occur and not be processed in this level2 invocation.

The level2 handler is also a LEVEL type IRQ and hence does not need clearing.
There is also no need mask active IRQ whilst processing, but spurious IRQs
do need masked.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",47,11,0
"thesofproject/sof","f507d730ae677eed8edb045c6ef4986bf24a0ea5","lrgirdwo","2022-07-14 12:11:31","false","host: panic: only define assert if not defined.

On host based builds we sometimes see that panic.h redefines assert().
Fix this. This will go away in the future as Zephyr will fully take care
of assert() on host.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",111,49,1
"thesofproject/sof","6b3f266653edfc4e894402c944725ca08eae7626","lrgirdwo","2018-12-18 19:46:47","false","cmocka: update component cmd API to new convention.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",52,7,0
"thesofproject/sof","3569fa3c1348eb5e24b81f34789d727f8f4b760d","bkokoszx","2019-03-04 12:04:35","false","platform: make IOMUX, SPI, DW_GPIO a Kconfig option

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",67,9,0
"thesofproject/sof","77dccad986cc57ca8f6757df4befa754f3f49097","bkokoszx","2019-01-08 13:56:11","false","ipc: moving src/ipc/*-ipc.c files to drivers dir

I've moved src/ipc/*-ipc.c to src/drivers/intel directory
each for specific platform. I've merged apl-ipc.c and
cnl-ipc.c using CONFIG_* defines and placed the result
file ipc.c in src/drivers/intel/cavs.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",55,7,0
"thesofproject/sof","1d2c681d8d6d08748311c27ac64de62b4d973adc","bkokoszx","2018-08-07 09:42:29","false","drivers: apl-ssp: handling bclk idle state

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",18,2,0
"thesofproject/sof","fe04bad0912d76b864bbcf0f8bd6273e247a8946","ranj063","2022-01-10 22:00:21","false","codec_adapter: remove unnecessary goto's in module_init()

Remove the goto's and return the appropriate values right away.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","716630568d12ff0a9ca284b2b64bc9a4ea25b4fc","ranj063","2018-07-03 04:51:13","false","host: return error message while setting up trace table

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",7,1,0
"thesofproject/sof","eb3893d85467b9323166093c90a821087ddd10a4","singalsu","2021-06-04 14:27:57","false","Drivers: Intel: DMIC: Re-arrange DMIC DAI component data

This patch collects the global DMIC driver parameters into single
struct. The pointer global in every DMIC DAI instance points into
the same data. All access from functions happens via the pointer
that simplifies the next step to add NHLT binary data configuration
for the driver.

The previous dmic_prm[] is no more allocated dynamically since the
single data structure is fixed size and not large. It simplifies the
driver code that handles the multiple ownership.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",75,36,0
"thesofproject/sof","8fd351ea9aa6c3117761ea0110851183ae59cfa3","marc-hb","2022-10-11 18:59:43","false","west.yml: add warning to keep git submodules in sync

Trying avoid out-of-sync situations like commit a3b3c525d1e0 (""west:
update to newer rimage baseline"").

Also explain why sof cannot be cloned as ""sof2""

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",99,52,1
"thesofproject/sof","b2ed867ce54cfc6f254ff946bb4806f2bc099278","andrula-song","2023-09-13 07:17:41","false","Audio: Fix the bugs of dai timestamp ops

use the ts_config of struct dai_data as input/output
parameter instead a temporary variable while calling
the dai timestamp functions.

Signed-off-by: Andrula Song <andrula.song@intel.com>",20,63,1
"thesofproject/sof","41e7d65e3a247a18970bc957942ec6a3da9cba1e","xiulipan","2020-08-31 08:05:10","false","topology: add jsl nocodec topology

Add sof-jsl-nocodec topology from sof-icl-nocodec.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",73,27,0
"thesofproject/sof","71a68ed2ae0e873a1018799ef29e249c20a1c7cc","xiulipan","2019-10-31 08:41:22","false","haswell: fix _memmap_vecbase_reset address

Use SOF_MEM_VECBASE_TEXT_BASE to repalce unset variable.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",56,17,0
"thesofproject/sof","4f3f4d7ec3608e1a04b1cc802723e08d3e3524cb","xiulipan","2018-09-11 10:43:43","false","ipc: set IPC process task to lower priority

IPC process task priority should be lower than pipeline copy task.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",42,3,0
"thesofproject/sof","a00dae1bce7abd128edd13874449002dd34d72d7","andrula-song","2023-06-15 01:50:22","false","Audio: Aria: Use the aligned function to avoid division

use the audio_stream_avail_frames_aligned to get processing
frames and then can reduce the division of comp_get_copy_limits.

Signed-off-by: Andrula Song <andrula.song@intel.com>",44,60,1
"thesofproject/sof","857fb4c4fe08aae07469f76068fd4d9f2807d6f3","libinyang","2023-02-10 03:25:34","false","topology2: wov: add D0i3 support

Add D0i3 support by setting attribute capture_compatible_d0i3.

Signed-off-by: Libin Yang <libin.yang@intel.com>",55,56,1
"thesofproject/sof","90ecd4f137c1718a01e8f8efca20b79835d62c51","ranj063","2022-01-10 22:22:51","false","module_interface: Change the signature of init API

As part of the 3rd part module API changes, change the signature of the
init op in the module interface API to pass the pointer to struct
processing_module instead of comp_dev.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","d79ef35e7085d8a19eaf5fbe8a9737c69dbeb31a","ranj063","2023-08-04 23:21:45","false","tplg_parser: buffer: Update the ipc4 builder

Add support for parsing the module-copier(buffer) in IPC4 topologies.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",29,62,1
"thesofproject/sof","9956f6bb55286898647726530726702df4f8e6b2","ranj063","2020-07-11 02:00:10","false","scripts: xtensa-build-all: add support for override config files

Some platforms needs platform-specific configuration
that override the default config. For example, chrome platforms
need the LPS to be enabled by default for maximizing the
power savings for the WoV feature. Add a -o switch to allow
specifying the override config file.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",73,25,0
"thesofproject/sof","2774464719884534c9123a6bc26bee5ff1d34288","ranj063","2021-10-06 17:53:23","false","drivers: Intel: hda-dma: Handle two-step stop and pause

The recommended programming sequence for HD-Audio DMA's is to clear the
GEN bit after the host has cleared the RUN bit. For host DMA, we can
replace the stop op with the stop_delayed op so that the GEN bit can be
cleared during host reset. For link DMA, add the stop_delayed op to
perform DMA stop during DAI_CONFIG IPC with hw_free if the two-step stop
flag is set for the DAI. For single-step op, there's no change in
sequence.

The two-step sequence for pause is similar to stop. The DMA will be
stopped with dma_stop_delayed when the DAI_CONFIG IPC with the
SOF_DAI_CONFIG_FLAGS_2_STEP_STOP_PAUSE flag after the host has cleard
the RUN bit.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",121,40,1
"thesofproject/sof","b127cc7e777f0a91f1bed7cf4f0b6d117b01464d","ranj063","2023-05-02 18:00:48","false","dai: Modify the signature of dai_dma_release()

In preparation for it to be used with both the DAI device and the copier
device, pass both the dai_data and the device pointer separately.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,59,1
"thesofproject/sof","0bdf8e3d318fd31546615366b04d87571b03c1f7","ranj063","2022-11-15 23:57:10","false","topology2: rename cavs-passthrough-hdmi.conf

Rename it to sof-hda-generic.conf.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",95,53,1
"thesofproject/sof","fea2a30e56911eefbdf88870547317873f204a01","abonislawski","2023-03-10 07:25:30","false","mtl: fill in cps and cpc data for smart_amp_test  module

Fill in measured cps consumption data for SMATEST module

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",55,57,1
"thesofproject/sof","3a9863471467ae1c8a7800a2b721221416573ceb","ranj063","2022-12-01 16:22:59","false","topology2: avs-tplg: Build ADL nocodec tplg

This will avoid having to rename the TGL tplg on ADL devices.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",101,54,1
"thesofproject/sof","f8bf720ec192597dbdacd88826fc42132418a1bd","abonislawski","2019-02-11 12:26:53","false","Kconfig: make Mixer component a config option

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",59,8,0
"thesofproject/sof","5243f0c4ee926d16e4d8210825b20f150e7bc792","abonislawski","2022-04-06 07:59:11","false","buffer: dereference before null check fix

This will fix null dereference issue reported by KW

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",111,46,1
"thesofproject/sof","e303098d2a08aa1f8757de888f1430146030f4f6","ranj063","2022-11-14 19:37:27","false","topology2: Remove the cavs folder

This folder contains definitions for both CAVS and ACE. So remove the
incorrect folder naming and move everything one level up.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",94,53,1
"thesofproject/sof","3ee2ab63a720f57027e3ad82744bf546a81ac005","ranj063","2023-04-06 18:14:13","false","topology2: Rename passthrough-playback.conf

Rename it to host-gateway-playback.conf to align with the documentation.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",51,58,1
"thesofproject/sof","63312ced762882dfb31bffc1ec9542822c80ed33","chunxu-li","2022-03-03 09:14:07","false","drivers: mtk: add driver compile support for mt8186

compile mt8186 drivers

Signed-off-by: Chunxu Li <chunxu.li@mediatek.com>",113,45,1
"thesofproject/sof","7f0a59be295d7dd8c24d3d4bcf266f06774f8b78","marc-hb","2020-06-06 03:30:15","false","README.md: fix Travis badge not to show the random PR of the moment

As discussed in PR #2964, the Travis badge shows the status of the
master branch but it links to the random PR of the moment. Fix that link
to point to the more useful ""branches"" page which has the master branch
at the top.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",75,24,0
"thesofproject/sof","cff1bb62b06b91dae14bd1b448f2d1c24cdb30ab","marc-hb","2020-05-20 18:27:33","false","tplg-build.sh: add NO_PROCESSORS, use VERBOSE more.

Zero functional change and 100% identical outputs.

Also add some comments.

Interestingly, -P$(nproc) is a tiny bit faster than -P0 on my
system. Thrashing?

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",99,23,0
"thesofproject/sof","2f674127d08afbd020b0331a244f2a834719a9ba","lyakh","2021-05-06 12:04:14","false","timer_domain: zephyr: fix multi-core scheduling

With Zephyr timer domain handlers are per-core, therefore
rescheduling has to be performed after each scheduler run, but the
next scheduling tick must be calculated only once.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",81,35,0
"thesofproject/sof","0af54f9fbcb8a84dbe1fcc4f281f63b0418a1487","lyakh","2022-12-06 14:15:26","false","buffer: handle prefetch

Data cache on Xtensa can be prefetched speculatively. In a sequence:

modify cached
modify uncached
modify cached

it isn't enough to writeback-invalidate caches after the first line.
Cache can be prefetched immediately before the second like,
preserving an outdated version of the data and then using it in line
3. The correct sequence is:

modify cached
writeback cache
modify uncached
invalidate cache
modify cached

Adjust buffer linking and unlinking accordingly.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",100,54,1
"thesofproject/sof","6f38baa1a048e9e85c237b172f90032e74581e12","lyakh","2022-10-13 12:57:10","false","probe: don't store pointers to configuration data

probe configuration data, passed to probe_point_add() cannot be used
outside of the scope of the function, therefore storing pointers to
it for later use is invalid. The pointer is only used in the
notification handler to extract the buffer ID. Use the ID from the
probes' persistent data instead.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",97,52,1
"thesofproject/sof","12359cac073a0a9e3614ed0d45394055cd475b19","lyakh","2020-08-11 10:04:20","false","dw-dma: make sure current pointer values are always consistent

Incrementing the current DMA position pointer isn't atomic, use a
channel spin-lock to synchronise its reads and writes.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",73,26,0
"thesofproject/sof","1cb190850b8b37ba13a92fe0f3d3d45ec4f8c11d","lrgirdwo","2020-05-29 09:31:12","false","platform: cavs: Add sideband-ipc.h as include.

Fixes build for zephyr.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",97,24,0
"thesofproject/sof","332d422ac1759b07439c647ba1db343d4b9b1113","plbossart","2020-02-20 21:43:12","false","dw-ssi-spi: comment out unused field

Fix cppcheck warning:

[src/drivers/dw/ssi-spi.c:111]: (style) struct member
'spi_reg_list::ctrlr1' is never used.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",80,21,0
"thesofproject/sof","b600ddb595185c2a8e520fe9d1adc9a93647062c","dbaluta","2020-01-11 17:54:37","false","platform: imx8m: Initialize memap

This is similar with implementation for i.MX8/i.MX8X.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",76,19,0
"thesofproject/sof","300e4531aae6456eea4cf20af0573ace3e733f48","dbaluta","2020-10-26 12:04:01","false","drivers: imx: sdma: Do not set channel priority at start

Channel priority is set during config time.

Also, notice that only channels will index != 0 will call
sdma_start so it is correct to not check for index != 0 in
sdma_start. This makes code easier to read.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",74,29,0
"thesofproject/sof","da603aefd419286ec4187cb86b8d45696d60075f","singalsu","2022-05-04 12:38:40","false","Audio: EQ IIR: Convert assert to normal fail

This patch changes the assert to check of IIR processing function
and fail with -EINVAL if function is not set.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>
Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",115,47,1
"thesofproject/sof","8015acfddc061976d8d7951c8b0ee5e503031070","ktrzcinx","2020-02-27 14:55:17","false","ipc: Make sof_ipc_ext_data enum value more rigid

It's a part of ABI interface, so enum value shouldn't change
for example after removing some old enum code.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",76,21,0
"thesofproject/sof","fa35ee00f29cc4cf1c3b6f550e65329dbbc66811","iuliana-prodan","2021-03-11 09:26:00","false","kpb: fix type for force_copy_type

In kpb force_copy_type is declared as enum comp_copy_type,
but later on is initialized and compared with an integer
constant.

We should use everywhere only enum comp_copy_type.
Therefore add an invalid copy_type, COMP_COPY_INVALID in
enum comp_copy_type.
Use this one to initialize and compare force_copy_type.

Fixes: 7e46996c967e (""kpb: Introduce force_copy_type"")

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",74,33,0
"thesofproject/sof","90fef5afd2adf2cba7f6a5f26f0b25f1c4833f60","fkwasowi","2023-10-17 10:47:03","false","src_lite: add module

Addition of SRC Lite module,
which only supports a subset of conversions
supported by the SRC module.

Purpose of SRC Lite module is memory optimization.
Code of SRC Lite is drastically reduced and requires
significantly less memory. When needed one of
defined conversions, driver can choose SRC Lite
module instead of SRC module to optimize memory utilization.

48 -> 16kHz
44.1 -> 16 kHz
32 -> 16 kHz
44.1 -> 48

Signed-off-by: Fabiola Kwasowiec <fabiola.kwasowiec@intel.com>",9,64,1
"thesofproject/sof","0067b1b59890f391bda0c6ac2dfd7a6d7e844190","xiulipan","2018-10-09 07:20:41","false","ci: traris: seprate job to show build stage

Seprate build scripts to show build stage of each platforms.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",35,4,0
"thesofproject/sof","214f98378f12ed179bd22f0c4feb09b0b3aaea81","sathyap-chrome","2023-07-18 18:35:23","false","smart amp : Do not use DYNAMIC topology

DYNAMIC topology should not be used for pipeline with volatile
Kcontrols.
Hence ensuring the flag is un defined before processing
smart amp related PCM and DAI configs

Suggested-by: Sridharan, Ranjani <ranjani.sridharan@linux.intel.com>
Signed-off-by: Sathya Prakash M R <sathya.prakash.m.r@intel.com>",32,62,1
"thesofproject/sof","bff918a271f42b715fe6caa94d2dc3b41a60c9cb","tinghan-shen","2022-06-28 03:11:38","false","drivers: mtk: Reuse mt8186 drivers for mt8188

Reuse mt8186 interrupt, timer, and ipc drivers for mt8188.
mt8188 DSP has 32 interrupts, 4 internal timers, and 5 mailbox for IPC.

Signed-off-by: Tinghan Shen <tinghan.shen@mediatek.com>",113,49,1
"thesofproject/sof","59a32d5bbef21209c7abdb5216d2b39ba55a795c","tinghan-shen","2022-01-11 09:25:48","false","platform: Add mt8186 to Kconfig

Add mt8186 to Kconfig

Signed-off-by: Tinghan Shen <tinghan.shen@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",115,43,1
"thesofproject/sof","299fe20d8056bba6a00352eb651e499681b9838b","ranj063","2021-06-23 06:30:04","false","schedule: edf/ll: remove list del/init during schedule free

edf_sh->list is not an item. So calling list_itel_del()
on it is wrong in scheduler_free_edf().

remove list_init() from scheduler_free_edf() as the list
should already be free and initialized.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",74,37,0
"thesofproject/sof","1e9d9c6f315b17c3429859a187faab95d682d16f","ranj063","2022-04-28 16:10:21","false","module_adapter: Adapt the create op for different comp types

Module adapter can be used by components with types other than
SOF_COMP_MODULE_ADAPTER. So modify the create op to handle components
by type.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",114,47,1
"thesofproject/sof","5a1f69391218b1177895d66897e5cec8f2a7c63a","cujomalainey","2018-09-05 21:49:18","false","Fix broken LICENSE link

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",31,3,0
"thesofproject/sof","54d265e7ec5241a5c81e0a0d38143909e24caf3a","RanderWang","2018-06-05 05:32:01","false","SSP: refine ssp stop function

merge commit 72e63a467fb8f743 (""apl-ssp: change and wrap status
transition into ssp_stop"")

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>
Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",1,0,0
"thesofproject/sof","784630f80b43e5b22e423443093b4b6cca9c9140","RanderWang","2023-07-17 08:58:25","false","ipc4: add S24_4LE_MSB format support

For sample format with 24 bits valid sample bit and 32 bits container,
valid sample is at msb 24bits if IPC4_TYPE_MSB_INTEGER is set.

Signed-off-by: Rander Wang <rander.wang@intel.com>",32,62,1
"thesofproject/sof","52699ec66728da25f2b9f5c5138ef060e7699f80","joechengxperi","2022-06-21 08:14:03","false","module_adapter:dts:build error fix from migrating module_adapter

Using processing_module instead of comp_dev to fix build error from
migrating module_adapter

Signed-off-by: Joe.Cheng <joe.cheng@xperi.com>",111,49,1
"thesofproject/sof","de358701cf66c32f0fe53e08acd53dae2a7e7ee5","tmleman","2022-02-22 16:55:55","false","ipc4: setdx: enable/disable cores

Adding code routine for enabling and disabling cores.
Cores id are check in high to low order, because primary core on path
to disable should be done last.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>
Signed-off-by: Rafal Redzimski <rafal.f.redzimski@intel.com>",106,45,1
"thesofproject/sof","1ec9b0786b77cd8763410881487a392b1148ac6a","akloniex","2019-09-30 07:38:01","false","probes: Implement lifecycle functions of probe subsystem.

State of probes subsystem is being updated and properly reported back
via INFO functions. DMA is being set up to perpare for transfer of
probe data.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>
Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",66,16,0
"thesofproject/sof","25d2bdf5b57c059db205f48c1728c8ed8ba81206","akloniex","2018-09-14 10:18:12","false","debugability: logging: Redesign tracing mechanism to enable proper logging.

Declare log_entry structures that are linked to .static_log_entries
section of ELF.
trace_event macros extended to accept additional arguments and unconfined
number of characters.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",41,3,0
"thesofproject/sof","e0ba98d21ae8b09e581bff6cc6d7b7fa6b1ae269","jajanusz","2019-01-11 19:43:00","false","cmake: add CMakeLists for firmware build

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",55,7,0
"thesofproject/sof","08257d3168c621775ddff6011a62411fa6ff671f","jajanusz","2019-01-30 21:59:06","false","tools: remove duplicated rimage keys

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",58,8,0
"thesofproject/sof","0e60ec8da49143e706ed686421d1b879a35a0a3a","marc-hb","2021-01-22 07:53:30","false","Copy sof-$platform.{ri,ldc} to sof.{ri,ldc}

As reported in #3491, there is confusion between platform names, CPU
names, PCH names, toolchain names, signing schemes and what not. For
instance in ""build_apl_gcc/sof-apl.ri"", the first ""apl"" matches the name
of a defconfig file while the second ""apl"" matches the name of a signing
scheme.

When building out-of-source, there is no reason to vary the filenames of
the output depending on the build configuration, changing the name of
the build directory is enough. This simplifies automation logic
including the next commit that adds a new install/GNUmakefile.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",69,32,0
"thesofproject/sof","2b034e7581cce01ae51fca9c042216526aedbd1b","lgirdwood","2018-08-08 09:08:45","true","Merge pull request #183 from dabekjakub/pipeline_test

New pipeline test",19,2,0
"thesofproject/sof","f19acba8e17a006856379b292c8a43cccad11ae7","mrajwa","2019-07-25 14:24:51","false","detector: update apply_config() procedure

This patch applies detector config according to sample
width.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,14,0
"thesofproject/sof","eef20448bfcfffa8af5442fb1ca3e1c3f0a45581","lgirdwood","2018-07-06 10:47:03","true","Merge pull request #64 from tlauda/topic/multicore_alloc

alloc: share memory map with slave cores",11,1,0
"thesofproject/sof","8bfcdcfb5527fa26d525167962a1f1316e82bd9c","keyonjie","2021-04-26 03:04:07","false","ll_schedule_domain: add flag to store the enabled cores

The flag registered_cores was created to denote the number of registered
cores, but it is also used as the number of the enabled cores today.

Here add a new flag enabled_cores for the former purpose to remove the
confusion and help for the subsequent domain tasks/cores management
refinement.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",88,35,0
"thesofproject/sof","47fcac2d478ccbbd156be19f2eb8c9bf697cf9c2","keyonjie","2019-04-03 08:21:17","false","topology: add topology file for glk kwd.

Add topology file sof-glk-da7219-kwd.m4 which is used for Keyword
Detection feature integrated on GLK platform.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",52,10,0
"thesofproject/sof","a398e92f2ee8891264179abfe05b503c9368a97f","keyonjie","2021-05-07 04:31:24","false","schedule: add a core index for schedule_data

A scheduler will run on a specific scheduler only, add a core index flag
to schedule_data to denote that.

To schedule or cancel a task, looking for the scheduler with correct
core index to perform the action.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",80,35,0
"thesofproject/sof","782066e0aa893769a68ffb2264ff577c6163e365","crazoes","2020-04-22 03:58:26","false","docker_build: Use shallow clones

We don't need history for building qemu or sof. Using shallow clones
will save time spent on downloading unnecessary history which is
significant for bigger repos like qemu.

Signed-off-by: Shreeya Patel <shreeya.patel23498@gmail.com>",81,23,0
"thesofproject/sof","f068ddd771232bdb3e001448436cbcf67d1ac6c8","tlauda","2019-08-01 12:25:33","false","ll_schedule: fix possible race condition

Fixes very rare race condition, when multiple cores
schedule something in low latency scheduler. We should
allow for timer client to execute one more time after
being cancelled. There won't be any tasks on the list
to process, but at least we will stop everything
gracefully.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",53,14,0
"thesofproject/sof","22eee8c3f6da88292d22545c7222b6aa31ed1820","tlauda","2019-08-22 15:18:49","false","idc: move msg_processed to private struct

Moves msg_processed array to the idc private struct.
It prepares idc driver for the upcoming support for
sending messages from slave cores to master core.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",55,15,0
"thesofproject/sof","e1d76a9a6161ea354137dc69c8862f31dadd1c7f","tlauda","2019-09-20 10:21:34","false","dma: imx8: add missing dma_chan_irq macro

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",63,16,0
"thesofproject/sof","6f0bb2b0123204f62ddba64405c96b1332daeda0","singalsu","2022-03-10 13:58:09","false","Topology: Add sof-hda-generic topologies to test multiband-drc

This patch adds build of topologies sof-hda-generic-multiband-drc.tplg
and sof-hda-generic-2ch-multiband-drc.tplg. The processing happens in
pipeline part after mixer. Volume is controlled in PGA before mixer.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",113,45,1
"thesofproject/sof","a781886f6fb549c626ddfc5c046b8901c9b9348c","singalsu","2022-05-10 10:00:22","false","Topology: Topology1: Fix mistake in buffer size calculation

Pipeline macro pipe-eq-iir-volume-capture-16khz.m4 misses an
update done to other pipelines. The macro COMP_PERIOD_FRAMES()
gives the correct buffer size in other pipelines.

Without this patch change of pipeline scheduling to 10 ms
from default 1 ms causes pipeline fail to buffer size check.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",112,47,1
"thesofproject/sof","d526f7372ca5b3bd0c729bf2bec2abaadddb0f2e","singalsu","2022-06-30 12:52:46","false","Tools: Tune: Prevent topology1 blob export to increase blob size

The increase of non-32bit aligned blob sizes needs to be removed
because it can cause mismatch of blob binary header vs. actual
size. Instead error if blob size is not multiple of four bytes.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",110,49,1
"thesofproject/sof","fac3a776f9a5f198e6479dca55279831a1bc1c01","singalsu","2018-12-04 14:25:18","false","CODEOWNERS: Assign to myself test/audio, eqctl, and tune from tools

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",41,6,0
"thesofproject/sof","113064cbf7ab5402f82c12e9151485fdda5694ea","bardliao","2022-10-13 10:32:07","false","topology2: cavs-sdw: add Speaker and Microphone pcm

Add Speaker PCM to cavs-sdw topology. We need to set NUM_SDW_AMPS=1 in
CMakeLists.txt if there is only one amplifier in the device and set
NUM_SDW_AMPS=2 if there are two amplifiers.
Set SDW_DMIC=1 if there is a SDW DMIC, like rt714 in the device.
The 2nd ALH copier stream name should be the same as the 1st ALH
copier, and no need to connect to the route.
The 2nd ALH copier data will be set to the 1st ALH copier's gateway config
in the aggregated mode.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",97,52,1
"thesofproject/sof","4fc431b355e1e818be19f5d533356cf21d80bfd3","softwarecki","2023-03-30 14:26:48","false","elf: Remove unused elf.c

Removed elf.c file that is no longer in use.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",57,58,1
"thesofproject/sof","6b647412bf3a404f0c6688c3c9e1b376a47e0e65","kfrydryx","2022-11-22 12:02:33","false","lib: Add mcps budget manager for cpu clock control

Initial implementation of MCPS budget manager.
FW can request/free MCPS usage on enabling certain FW elements. Caution
should be taken when processing on different cores, as kcps_budget_data
is uncache only. The manager will change clock source to match requested
MCPS consumption. Budget manager may interfere with manually setting
clock values!

Signed-off-by: Krzysztof Frydryk <krzysztofx.frydryk@intel.com>",94,54,1
"thesofproject/sof","b46740523b9993a72dcf9243d46f90ea7656a4ca","RanderWang","2019-01-23 07:34:16","false","topology: hda: delete sof-whl-hda.m4

It is useless now and sof-hda-generic.m4 would be used by WHL.

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",57,8,0
"thesofproject/sof","e1831cb07a3f2231db04066689564d3628dc1a6a","lyakh","2023-03-20 17:02:57","false","host: reload host DMA less frequently

This should reduce DRAM access frequency and allow deeper power
saving modes, particularly when using Deep Buffer PCMs.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",56,58,1
"thesofproject/sof","d4004b4c38552af1b8fcc70aa704e0a35afc9a35","lyakh","2019-01-10 13:30:04","false","schedule: fix a typo in a comment

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",57,7,0
"thesofproject/sof","198a41712a40ced89a1b4bbc94dbb25eb581e75b","lyakh","2023-06-20 13:53:30","false","ll-schedule: fix a hard-coded 32-bit assumption

The current cycle difference calculation in zephyr_domain_thread_fn()
only works for 32-bit integers, it would break with 64 bits. Besides
there's actually no need to explicitly check for wrapping, integer
subtraction will produce a correct result anyway. Besides the current
code undercalculates the difference in case of wrapping by 1.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",42,61,1
"thesofproject/sof","5c8f1eb249ceb3760b0cf7520a4a67d9389f5b4a","lyakh","2019-02-14 13:07:54","false","task: move most functions from a header to a new .c file

Move large functions from src/arch/xtensa/include/arch/task.h to
src/arch/xtensa/smp/init.c to avoid building them multiple times.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",60,8,0
"thesofproject/sof","647390f75e6a89d15acc7e3fe71f5d890d93e85f","lyakh","2020-08-24 16:22:44","false","schedule: dma_multi_chan: fix a DMA channel interrupt race

When streaming audio data on multiple DMA channels simultaneously cases
with 3 tasks (A, B, and C), scheduled on 2 DMA channels (X and Y), have
been observed, when one of the tasks wasn't scheduled. Usually when
scanning tasks in schedule_ll_is_pending() the following sequence would
take place:
    channel    task    interrupt status
    X          A       1
    X          B       1
    Y          C       1
where the interrupt would be cleared in lines 2 and 3 above. However,
sometimes the following sequence takes place:
    channel    task    interrupt status
    X          A       0
    X          B       1
    Y          C       1
which then leaves task A not scheduled, because similar to the first case,
the interrupt on channel X will be cleared in line 2. To fix this modify
schedule_ll_is_pending() to handle DMA channels / scheduling components
one after another.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",76,27,0
"thesofproject/sof","7c0f0d917c957d3b0f0548008e97826162633a84","jajanusz","2018-12-25 19:24:35","false","kconfig: add Kconfiglib

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",48,7,0
"thesofproject/sof","aba5f9ae37a90fcc600796e121914ebc0888153d","lyakh","2022-03-07 11:38:02","false","sparse: use __sparse_cache for cache-uncache conversion functions

cache_to_uncache() and uncache_to_cache() functions take a cached
memory alias or return one respectively. Add the __sparse_cache annotation
to them.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",114,45,1
"thesofproject/sof","4c3ea714fad195d37ede4dfcb2da2f567d728afb","marc-hb","2022-07-01 21:41:40","false",".github: doxygen: use the newer and better FAIL_ON_WARNINGS

Unlike the older 'YES', FAIL_ON_WARNINGS reports all warnings.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",110,49,1
"thesofproject/sof","aad035ac1e68623e96589bd166b22a8e3aaf412f","ujfalusi","2021-10-21 09:34:08","false",".github: workflows: codestyle: Drop --codespellfile

With the backported patch to checkpatch.pl the dictionary.txt location
should automagically found and no need to specify it by hand.

Suggested-by: Marc Herbert <marc.herbert@intel.com>
Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",125,41,1
"thesofproject/sof","612ff60923a55ec8d4b851e60af5a3877d2f7d9f","singalsu","2019-09-24 13:48:01","false","ASRC: Add 4 kB pool into heap runtime

This patch adds a single 4 kB space for allocation. The 2 kB space
is added as well but configured to zero available. The ASRC typically
needs 2 - 4 kBytes of dynamically allocated storage.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",65,16,0
"thesofproject/sof","e28b6a7cf662cddf38a78ee0d58433ecd8f8b175","lrgirdwo","2021-02-16 12:49:11","false","docker: toolchain: update docker to GCC 10.2 and GDB 9.2

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",74,32,0
"thesofproject/sof","9c2c27f4e340e76ff03c8bbcff978e7a58c79a4d","lrgirdwo","2021-04-08 14:23:10","false","waves: move API headers to correct place.

Move the waves headers to the correct directory.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",79,34,0
"thesofproject/sof","894886ab1ebc9a361ae5e1d801ceb9d071a6fd0a","lrgirdwo","2018-11-14 17:10:33","false","ipc: trace: standardise trace output and improve trace debug

Improve trace for IPC.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",44,5,0
"thesofproject/sof","67fdbd2e16fbf6952970859304dec41fb6f1242b","dbaluta","2021-04-29 06:31:23","false","installer: Fix installer test

After commit 5ca0e9bba3e6d (""topology: Use generic name for 8qxp/8qm"")
installer test is broken as we also need to update the i.MX topology
with the new naming.

So, fix this by replacing imx8qxp naming with imx8. But while we are at
it choose a better (more relevant) random topology, sof-imx8-wm8960.tplg
instead of sof-imx8-nodec.tplg.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",81,35,0
"thesofproject/sof","082672ea9f43dd398a4647e31e4a43eabc1ad3ea","singalsu","2022-11-29 17:56:05","false","Tools: Test: In src_test.m prevent error with empty plot handle

Octave errors if plot handle is empty, Matlab doesn't. This can
happen if frequency response test data read fails. In that case
an empty plot window is stored as indication of error.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",102,54,1
"thesofproject/sof","e441f17674160aeadebfd00911bf09d5e14c439b","marcinszkudlinski","2023-08-31 14:44:03","false","module: add pointers to sink/src to module structure

Sink and source is the main interface for DP processing
in current pipeline and the main interface for all
processing in pipeline 2.0

Pointers to them must be available to modules directly.

This commit adds pointers to sink/sources to module structure

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",23,63,1
"thesofproject/sof","7b52664a6a655d295c42fb7bfb4d235a52bb48e2","singalsu","2023-08-25 12:07:53","false","Scripts: run-mocks.sh: Change default config to avoid error

The script runs the unit tests natively as gcc compiled.  The
tgph_defconfig is no more available, so use another configuration
that is available in src/arch/xtensa/configs.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",26,63,1
"thesofproject/sof","d0d74a477f64a83654bccb3905175584d05d9257","singalsu","2023-09-15 11:03:33","false","Tools: Topology2: Change in capture gain curve_duration to 50 ms

This change increases the ramp duration from 20 ms to 50 ms. It
lowers the peak load of peak volume component due to longer same
gain value blocks. The internal update rate for gain becomes 250 us
instead of 125 us. The longer fade-in ramp also conceals better
possible analog capture start transients.

This changes for 4ch capture for gain.11.1 in sof-hda-generic-4ch.tplg
from

CPU_PEAK(MAX) = 21.95
PEAK(MAX)/AVG(AVG) = 7.51

to

CPU_PEAK(MAX) = 9.07
PEAK(MAX)/AVG(AVG) = 3.12

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",20,63,1
"thesofproject/sof","0d8e63b8e929b5e4cbc244a8dbb48f17e44e41ef","singalsu","2020-01-08 15:43:03","false","EQ FIR: Remove handling of set/get value commands

This patch removes the command handler stubs for COMP_CMD_SET_VALUE
and COMP_CMD_GET_VALUE. A proper error is issued if these commands are
passed to FIR.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",71,19,0
"thesofproject/sof","430893f18aaccced8d77722cb323fd51ce1276f1","kv2019i","2023-02-20 17:27:49","false","CODEOWNERS: refer to github documentation on file syntax

Add a link to online github documentation with regard to
file syntax and how it can be tested.

Suggested-by: Marc Herbert <marc.herbert@intel.com>
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",57,57,1
"thesofproject/sof","0654a66664287c23cda98ae8b8b915a20edc1a48","kv2019i","2022-10-05 09:19:27","false","zephyr: app: increase log thread stack size to 4096

Set the logging thread stack size explicitly for SOF builds
and use a safe default of 4096 bytes. Individual board overlays
can override this default to save stack space.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",98,52,1
"thesofproject/sof","ead25e82a2ca5d04dccc13b3930f0e9ee95e4c35","iganakov","2023-04-13 10:28:12","false","kd: add ams support

Add support for AMS notifications

Signed-off-by: Ievgen Ganakov <ievgen.ganakov@intel.com>",50,58,1
"thesofproject/sof","c52e8dbba265ded56dd6eaed77023151b5712648","RanderWang","2021-07-19 05:34:43","false","ipc4: alh: add alh support for ipc4

Stream id is included in ipc4 config and fw constructs
hw_params for alh based on this information.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>
Reviewed-by: Rander Wang <rander.wang@intel.com>",90,38,0
"thesofproject/sof","452847ddc04ebf865e3e03926cc3298db4b66a81","kfrydryx","2022-06-07 10:43:02","false","mtl: Add SRC module to the manifest

Added SRC module to config/mtl.toml.

Signed-off-by: Krzysztof Frydryk <krzysztofx.frydryk@intel.com>",117,48,1
"thesofproject/sof","4a032f29bced3864f399e6bf92382a592355d3c2","ranj063","2022-01-11 06:18:54","false","codec_adapter: dts: Define set_configuration

Define the set_configuration op in the module interface.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,43,1
"thesofproject/sof","2f06f173de0914aaded8cfc856be57573067e35f","ranj063","2022-01-08 01:51:30","false","codec_adapter: rename codec_reset() to module_reset()

Rename codec_reset() to module_reset. No functional change.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","d0b7d2fc5d400019a888ce6cdb1cc6343a26b55a","ranj063","2023-07-09 17:11:15","false","audio: volume: Remove state check

The state check is redundant as the state will always be >=
MODULE_INITIALIZED if the module exists.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",31,61,1
"thesofproject/sof","fa96044d750c89b7b978de5f896a306a154c92f8","ranj063","2023-05-08 16:00:49","false","dai-zephyr: Add support for multi endpoint DAIs

Introduce helper functions for multiple endpoint DAI copiers to demux
and copy the channels into the respective DMA buffers.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",53,59,1
"thesofproject/sof","81a354e750b38010d3e9da86874e5a8d77e84fda","ranj063","2023-05-16 21:08:13","false","topology2: gain-copier-capture: Use host-copier

Replace the generic copier with host-copier in the class definition and
the instances.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",52,59,1
"thesofproject/sof","73813a2f1f5851936633dee9e3821a0d1b9831bb","dbaluta","2022-03-24 10:25:40","false","codec_adapter: Remove assert after memcpy_s

Remove assert and report the error condition to the upper layers.
It does not make sense to stop the FW if config parameters fails.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",110,46,1
"thesofproject/sof","60a5a96bbbf0889d8b5918b563d46ce1624c2492","dbaluta","2020-04-24 11:48:19","false","drivers: imx: Writeback cache for desc/ccb/ctx

We need to make sure that backend memory is updated for
desc/ccb/ctx because they are modified in sdma_prep_desc.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",72,23,0
"thesofproject/sof","ddafa071ee60f2f726ab4ef6d803127a0f4beed9","lrgirdwo","2021-03-29 14:59:40","false","pipeline: reorder pipeline.h by feature and expand doxygen comments.

Order the pipeline APIs by feature and expand their doxygen based
comments.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",80,34,0
"thesofproject/sof","52d971085520ead401f416f9494de288bd509a87","lbetlej","2019-01-29 09:00:05","false","ipc: keyword detection (KD) notification - ipc definition

Definition for an IPC structure for a generic notification event
that in the future can be sent by various FW components to the host.

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",59,8,0
"thesofproject/sof","0912756595d5b89fca02a475c07d19d58c372e0d","plbossart","2023-09-18 13:05:51","false","topology2: intel: bt-ssp-config: use cardinal clock as source

All existing SSP-based topologies use the audio cardinal clock,
*EXCEPT* Bluetooth related ones. This doesn't make much sense, let's
use the same clock source for all SSPs.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",20,64,1
"thesofproject/sof","573d1faa1805862a0aced5adeb90cf956ae83de3","jajanusz","2019-01-24 14:08:35","false","cmake: fix ld script dependency

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",56,8,0
"thesofproject/sof","ad3d864ca0e1f4735998863646cfeacf235fe2cb","jajanusz","2019-01-30 05:47:11","false","rimage: elf.h: use stdint",56,8,0
"thesofproject/sof","c6af31071a1e9176408e065c1c7e06d84cb78aad","jajanusz","2019-08-23 13:34:13","false","ssp: power gating

Add I2S power gating features that were introduced in Tigerlake.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",54,15,0
"thesofproject/sof","dc8aaf38940e78126bd60b9f6fcff0f6b84002cb","jajanusz","2018-12-12 10:52:11","false","test: fix mixer ut ipc

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",45,6,0
"thesofproject/sof","0d0047d79c99185256d34359f0877e622560f0a1","jajanusz","2020-01-11 16:51:19","false","drivers: intel: mn: mclk sources

All MCLKs share the same source clock, so we need to track it
prevent case in which next SSP config would override source clock
for previous SSP config.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",76,19,0
"thesofproject/sof","51c034c408b47b9df7d5931faac832c58ad9641f","johnylin76","2020-11-04 06:48:21","false","tools: tune: Generate ctrl bytes from params for DRC

Used the similar parameter set as the DRC kernel in CRAS to generate ctrl
bytes for DRC component.

Plotted input-output dB response curve with the specific parameter set.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",75,29,0
"thesofproject/sof","defd773198d0a44e35dc975167bed11671c47ace","alaa-emad","2023-03-20 11:00:03","false","drivers: imx: timer: remove unnecessary blank line

Remove unnecessary blank line before a close brace as reported
by checkpatch:

""CHECK: Blank lines aren't necessary before a close brace '}'""

Signed-off-by: Alaa Emad <eng.alaaemad.ae@gmail.com>
---
change in v2:
	-edit subject line to include the file name.",56,58,1
"thesofproject/sof","7df7c0ff9dfbb5ae6674bc426d5351bfd574afee","sebcarlucci","2020-04-16 21:30:28","false","sof: crossover: Add Crossover component

This commit adds Crossover to the list of SOF components. A crossover
filter can be used to split an input to different frequency bands.
The number of outputs should be set statically in the topology. The user
then uses the control bytes to route the frequency bands to different
outputs. (similar to the demux component).

This commit adds support for the following formats:
- S16_LE
- S24_LE
- S32_LE

Signed-off-by: Sebastiano Carlucci <scarlucci@google.com>",82,22,0
"thesofproject/sof","aeaa96e0b4d28f6fd3c19ef15c7e8d12130291bd","iuliana-prodan","2023-05-03 16:18:43","false","topology: imx: Add EQ topology file for i.MX8MP and i.MX8 with wm8962 codec

Generate EQ (fir and iir) topology file for i.MX8MP and i.MX8
with wm8962 codec.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",54,59,1
"thesofproject/sof","00657192343df8dc4dd9812f5bdaeccede414593","iuliana-prodan","2021-08-27 09:59:30","false","zephyr: add cache_attr.c in zephyr_library_sources

COMPILER_WORKAROUND_CACHE_ATTR is also enabled on Zephyr,
but the cache_attr.c file is not compiled since is not added in
zephyr_library_sources.

Without this fix, we get:
cache.h:110: undefined reference to `glb_is_cached'

I've added the file for all platforms since cache_attr.c is generic.


Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",119,39,0
"thesofproject/sof","8ed78885bc4164529b4aa788558fa1a491055f64","iuliana-prodan","2021-05-12 09:48:52","false","imx: invalidate cache for specific address range only

The _memmap_cacheattr_reset linker script variable has
dedicate cache attribute for every 512M in 4GB space
1: write through
2: cache bypass
4: write back
F: invalid access

For imx, implement is_cached() based on
_memmap_cacheattr_reset.

Without this fix, when loading a topology we get:
sof-audio-of 556e8000.dsp: error: reply expected 20 got 12 bytes
sof-audio-of 556e8000.dsp: error: ipc error for 0x30010000 size 20
sof-audio-of 556e8000.dsp: error: DSP failed to add widget id 0 type 23 name : PCM0P stream Passthrough Playback 0 reply 0
sof-audio-of 556e8000.dsp: ASoC: failed to load widget PCM0P
sof-audio-of 556e8000.dsp: ASoC: topology: could not load header: -22
sof-audio-of 556e8000.dsp: error: tplg component load failed -22
sof-audio-of 556e8000.dsp: error: failed to load DSP topology -22
sof-audio-of 556e8000.dsp: ASoC: error at snd_soc_component_probe on 556e8000.dsp: -22
sof-audio-of 556e8000.dsp: ASoC: failed to probe component -22
asoc-simple-card sof-sound-wm8960: ASoC: failed to instantiate card -22
asoc-simple-card: probe of sof-sound-wm8960 failed with error -22

That's because, on mailbox_hostbox_read() we don't invalidate cache
before reading the address.

Fixes: bfe7707f37de (""cavs: disable data cache operations on uncached addresses"")
Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",85,35,0
"thesofproject/sof","2736ea05c190923e338e5ec0ff8f9df0c46a947f","cujomalainey","2021-04-13 21:54:09","false","detect_test: avoid double write

We have the else case, lets use it so cppcheck can stop complaining.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",81,34,0
"thesofproject/sof","aea7da470cf35afe7fd4666f6cf1ee6de48c8746","cujomalainey","2020-10-28 00:23:46","false","oss-fuzz: add code owner

Add myself as the code owner for the fuzzer

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",75,29,0
"thesofproject/sof","ddc325b02b462866aff011e1e9bc588378faf49c","jxstelter","2022-12-01 09:44:41","false","audio: Remove ace_v1x-regs dependency.

The ace_v1x-regs.h Zephyr header file should be removed.
This patch removes dependency on this header in SOF code.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",101,54,1
"thesofproject/sof","ecbbd1b5d1338ca7119ae8d059964c6888eeab4b","aborisovich","2022-08-11 00:44:10","false","scripts: xtensa-build-zephyr.py fix for windows

West tool returns on windows OS different white characters
than on Linux OS. Paths outputted from west tool had been
stripped for any trailing whitespaces.
Fixes ""xtensa-build-zephyr.py: use west manifest""
(608833cf27afd0c327e97929f8c0222064c4ee71)

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",115,50,1
"thesofproject/sof","1e3a4cfe9b26176e28287b913b35bcbe12bbef79","brentlu","2022-11-07 13:23:20","false","topology: sof-adl-nau8825: support RT1015P amplifier

Add new topology sof-adl-rt1015-nau8825 which implements Realtek
ALC1015 on SSP1.

Signed-off-by: Brent Lu <brent.lu@intel.com>",93,53,1
"thesofproject/sof","be6777006e826d9322cea5bf37fa3b970e837552","keyonjie","2021-04-01 08:01:33","false","Tools: Test: thdnf_test_input: correct the noct calculation

To make sure we are using max 1 octave step, we need to use noct+1 to
get noct sections from logspace.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",79,34,0
"thesofproject/sof","46a5d623f60584133aa595218864101508486ff2","bardliao","2022-12-20 02:28:22","false","topology2: set sdw amp feedback pcm channel number

Assume an amplifier will provide 2 channels feedback.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",92,55,1
"thesofproject/sof","2cdd11a95d663b215e121d65c36d52f6c7f57be3","singalsu","2023-09-21 14:23:32","false","Tools: Topology2: Remove 50 ms curve duration set from nocodec

We need to care about audio user experience and peak MCPS
usage in production topologies.

The alsabat test is disturbed by the longer ramp so the
change can be reverted from nocodec topologies. Those
topologies are never used by end users. Also the peak MCPS
mitigation is not relevant for test topologies, as long as
higher MCPS is not triggering error reports. The curve
duration is restored without explicit set to the default 20 ms.

Fixes: #8238
Fixes: d0d74a477f64a83654bccb3905175584d05d9257
       (""Tools: Topology2: Change in capture gain
       curve_duration to 50 m"")

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",21,64,1
"thesofproject/sof","b50242481999ef6ff7cadd4dbb308d7c9ccd2303","singalsu","2021-12-21 15:45:33","false","Tools: Testbench: Improve binary file read and write performance

This patch replaces the sample by sample fread() and fwrite()
operations with max length block reads and writes without
circular wrap. Both binary and text format read and write
functions are replaced with more compact versions.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",121,43,1
"thesofproject/sof","919b402abc6c2acd191c74bd7d01c292d6ec6f0f","ranj063","2023-05-20 18:13:58","false","topology2: dai-copier: Remove ALH support

Remove ALH support in the generic dai-copier class as it has its own
class now.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",53,59,1
"thesofproject/sof","6ddf6c0f40d1cc35dbf2227b916881a22b4a3eb2","marc-hb","2023-07-14 00:27:40","false","module_interface.h: add forward struct comp_dev and timestamp_data

Fixes commit 9cc6454df6d2 (""module_adapter: Extend the module interface
for endpoint devices"")

As the endpoint_ops methods use only pointers to these two objects, it's
not necessary to make their entire object structure visible. However a
forward declaration is required to make them known to endpoint_ops users
and fix the following warning:

```
error: 'struct comp_dev' declared inside parameter list will not be
visible outside of this definition or declaration [-Werror]
```

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",32,61,1
"thesofproject/sof","92d828bc37329020b4e92b29109efadb28f794ca","marc-hb","2022-08-25 22:14:40","false","sof-logger: make inotify optional

Restores ability to compile on Windows with MSYS.

Fixes commit dcf0577a7725 (""logger: allow starting before the driver is
loaded"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",112,51,1
"thesofproject/sof","6f9f2ee28ecfb7a313ab959971c9cac4450a8b47","marc-hb","2023-04-10 23:22:04","false",".github/zephyr: build with the debug overlay and CONFIG_ASSERT

This makes sure Zephyr's -fmacro-prefix-map is working and keeps the
builds reproducible when using a recent enough toolchain.

As found in the CONFIG_ASSERT PR
https://github.com/thesofproject/sof/pull/6530#issuecomment-1482330214
this is not true for old Xtensa toolchains.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",50,58,1
"thesofproject/sof","1f9c58af6f10743108ed021a92d12ab66027b2a9","marc-hb","2023-05-09 19:31:14","false",".github/fuzzer: fix comment indentation, applies to only one fuzzer

Fix the comment indentation to show it applies only to the older fuzzer.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",53,59,1
"thesofproject/sof","7347f8754aed46e0b3f736f40cefffc05200ef5e","lyakh","2019-06-03 08:37:46","false","DMA: make the ""channel"" parameter unsigned

The DMA ""channel"" parameter, used in many DMA API functions, is
currently only checked for ""< HDA_DMA_MAX_CHANS"" except for one case,
where it's also checked for "">= 0."" But if a configuration step is
missed, the channel can stay at its initial value of DMA_CHAN_INVALID
which is equal to (32-bit) -1, or it can contain a negative error
code, returned by dma_channel_get(). Therefore a comparison to
HDA_DMA_MAX_CHANS doesn't catch such cases. This leads to a panic
like in issue https://github.com/thesofproject/sof/issues/1485 To
avoid such crashes make ""channel"" unsigned everywhere and make checks
more consistent.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",68,12,0
"thesofproject/sof","8d277b5b159e921ae8f03d4f437ef080555a18bf","lyakh","2020-11-20 13:06:48","false","alloc: no need to check the same condition repeatedly

alloc_heap_buffer() is trying to allocate memory from a single heap,
no need to check its size on each iteration of an internal loop over
maps.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",74,30,0
"thesofproject/sof","6e43ab8ecd9acfbaf72e0d71832d620e1be7528d","akloniex","2020-03-17 19:54:43","false","ipc: buffer: Remove obsolete rfree on NULL pointer.

Signed-off-by: Artur Kloniecki <arturx.kloniecki@linux.intel.com>",72,21,0
"thesofproject/sof","87c23eb3ce9a8d5e7589355258546a21426e279b","lrgirdwo","2020-08-21 14:35:29","false","zephyr: fix build for new sof git hashes.

Git hashes need exported for Zephyr build.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",75,27,0
"thesofproject/sof","5f53bbe92dcfa6218e03fbadbc2bc02545c3c045","mh12gx2825","2020-04-15 19:17:36","false","audio: mixer: re-indent multi-line function arguments

Reformat function arguments to align with the parenthesis as per coding
style guidelines. Change improves code readability. Problem
reported by checkpatch script.

Signed-off-by: Deepak R Varma <mh12gx2825@gmail.com>",82,22,0
"thesofproject/sof","5ef33e6310b7921cb2fdae4bf2ae798d26cb5438","dbaluta","2021-10-28 13:06:15","false","topology: Add simple host codec adapter playback pipeline

As opposed to pipe-codec-adapter-playback this has its own scheduling
task and can be used in more complex scenarios.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",127,41,1
"thesofproject/sof","d93fbbc2794a58adeb5a787f19b23a9980c7551e","dbaluta","2021-03-04 13:55:18","false","component: Introduce get_attribute component operation

This is used to retrieve the 'value' of a certain 'type' attribute.
First specific implementation for get_attribute is inside Host
component.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",73,33,0
"thesofproject/sof","73b583b35db827c81334d2876e4ec120195aeeab","johnylin76","2022-09-22 13:49:00","false","tgl: memory: resize RT_*TIMES for GOOGLE_AEC adoption

Due to high demand of data buffer memory in the given target scenario,
reduce other runtime memory regions to give more to the buffer region.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",97,52,1
"thesofproject/sof","fd10a0728c97e512199746563f922ae1a09ef811","johnylin76","2021-02-04 09:50:01","false","sof: drc: refine function comments

Refined some function comments to prevent confusion of usage.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",71,32,0
"thesofproject/sof","82b305b7279506b83d569abaf35393240f1e8960","jajanusz","2019-01-30 12:11:41","false","apl: use UP by default

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",57,8,0
"thesofproject/sof","63cb86f1b395ec5a714801f8ab08d650082fc518","jajanusz","2019-05-24 12:26:51","false","drivers: move cavs kconfigs to separate file

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",64,12,0
"thesofproject/sof","291525d271f3df30ec5134db914a46dec752d1c3","jajanusz","2019-05-14 08:47:13","false","uapi: replace sof_man_get_module with SOF_MAN_MODULE_OFFSET

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",64,11,0
"thesofproject/sof","ad59cf465a413ba4fc56a89806dabf1cc220ac03","mrajwa","2019-07-27 21:49:29","false","kpb: forbid draining requests bigger than history_buffer

This patch adds a check if history depth request is
bigger than history buffer size. If so refuse to drain.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,14,0
"thesofproject/sof","c8253afad93b57808fe51f0f1ad5680980809d37","nishalkulkarni","2023-04-06 10:26:53","false","common.h: Prevent error when compiling with Clang

Clang requires fields to have a constant size and does not
support variable length array in structure causing build to
to fail at compile_check()

This change selects the compatible version of ALIGN_UP and
ALIGN_DOWN macro when compiling with Clang.

Signed-off-by: Nishal Kulkarni <nishalkulkarni@gmail.com>",51,58,1
"thesofproject/sof","eaca16b84898df1d8589c72d45fd2feda7ebd13d","mrajwa","2019-04-24 21:36:29","false","kpb: align sample container with 16 bits samples

Sixteen bit samples are kept in sixteen bit containers therefore
we don't need to allocate 32 bits containers.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",52,11,0
"thesofproject/sof","73c8a136cbe24ddd316522fb765460b65d38bf74","lgirdwood","2018-11-09 09:59:00","true","Merge pull request #118 from bkokoszx/logger-fw-verification

logger: add firmware verification capability",41,5,0
"thesofproject/sof","576d15b9b48e91147d9654ea894e5971812f0550","lgirdwood","2018-07-17 10:42:53","true","Merge pull request #26 from RanderWang/icl

tplg: add nocodec topology for icelake",13,2,0
"thesofproject/sof","9be2694232ccbf2d0b559233885ac91e0379cac2","mrajwa","2019-03-12 21:53:10","false","memory: enable LPSRAM related defines for APL

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",69,9,0
"thesofproject/sof","dcd8d4c79e2748dd248a16e179038b517dac5dfb","mrajwa","2020-07-14 18:25:16","false","memory: increase HPSRAM size for buffer on TGL

This patch increases HPSRAM buffer size for TGL platform.
Thanks to this change we can provide KPB more space for
history data.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",81,25,0
"thesofproject/sof","2bd30262916269b17482d2912216c8ecef87a900","keyonjie","2020-06-30 09:07:30","false","detect_test: refine the activation threshold to fix trigger issue

Refine to use the consistent activation threshold for different formats,
use a unified coefficient 0.05, and update the threshold at .params().

These refinement will fix the KWD trigger volume inconsistent for
different sample format issue.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",72,25,0
"thesofproject/sof","d2f87976f72fd380dd7bd61e92460e3e5324e681","keyonjie","2021-06-09 08:56:47","false","platform: add platform_context_save() routines for all platforms

Add a platform_context_save() routine to all platforms, which can be used
to perform any platform specific stuff during suspending the DSPs.

Initialize all these routines to be do nothing.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",80,36,0
"thesofproject/sof","b500999477cab6423dd13dc2242f21981f1feae7","slawblauciak","2021-04-23 15:22:10","false","scheduler: guard against subdivision underflow on domain clear

In some situations the domain clear routine might encounter
a case, when the number of clients is decremented and 0,
as such, a subsequent subdivision will result in an integer underflow.

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",90,35,0
"thesofproject/sof","65dcba65bf26866f2b2055fb9b8dd3f410dd0bbd","tlauda","2020-04-21 09:14:40","false","agent: make panic on delay configurable

Adds additional functionality to system agent that allows
to enable and disable panic on delay when necessary.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",86,23,0
"thesofproject/sof","3813a135d53758b09c5b9b6e8e5611b0840c333f","serhiy-katsyuba-intel","2023-08-03 16:07:29","false","audio: Put buffer state log under CONFIG_SOF_LOG_DBG_BUFFER switch

comp_update_buffer_consume() and comp_update_buffer_produce() generate
too much log output. Usually such amount of logs results in many log
messages been dropped. It is also results in significant CPU load if
selected log backend formats log messages at runtime.

This patch adds a separate switch to enable these logs only when necessary.
Default value is 'n'.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",29,62,1
"thesofproject/sof","b444c336f6c9c41dc1230231b67fb6cf6bab4f9a","balakishorepati","2021-07-07 14:20:51","false","drivers: amd: renoir: Add dmic driver support

Add drivers for:
	* DMIC DAI, for Audio interface
	* DMIC DMA, controller
Dai changes for dmic to register to platform.

Signed-off-by: Basavaraj Hiregoudar <basavaraj.hiregoudar@amd.com>
Signed-off-by: Anup Kulkarni <anup.kulkarni@amd.com>
Signed-off-by: balapati <balakishore.pati@amd.com>",88,37,0
"thesofproject/sof","0ad546d73d3d9cca458ac26b0b99ff1ddc42446e","tlauda","2020-01-13 16:26:09","false","ll_schedule: use platform_shared_commit()

Uses new platform_shared_commit() function to commit
shared domain data.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",77,19,0
"thesofproject/sof","8270ad3bc3b890ff15f8cedcb42a58808797e718","tlauda","2019-10-24 13:05:53","false","pcm_converter: add generic implementation

Implements generic version of PCM converter library component.
This module provides static functions, which allows to copy
buffer data with frame format conversion.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",67,17,0
"thesofproject/sof","62de51385e528e8fb590d5be4eb5b53dc4f369c3","xiulipan","2018-07-30 09:35:00","false","dw-dma: save lli_current on dma stop

need to save lli_current when we stop when using none hw lli.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",15,2,0
"thesofproject/sof","98a70f6f0537dc2843988d45b30616395a44b2bd","aiChaoSONG","2023-06-27 07:03:56","false","lib_manager: lib_manager_dma_init: remove duplicated code

The code to get buffer address alignment is duplicated
in lib_manager_dma_init() and its caller. As the code
is useless in lib_manager_dma_init(), thus remove it
in this patch.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",40,61,1
"thesofproject/sof","259a98ed4cd695a0f353f8ab94d770bd4e859c28","dbaluta","2020-06-29 08:57:05","false","scripts: checkpatch: deprecate 80-column warning

Yes, staying withing 80 columns is certainly still _preferred_.  But
it's not the hard limit that the checkpatch warnings imply, and other
concerns can most certainly dominate.

Increase the default limit to 100 characters.  Not because 100
characters is some hard limit either, but that's certainly a ""what are
you doing"" kind of value and less likely to be about the occasional
slightly longer lines.

Miscellanea:

 - to avoid unnecessary whitespace changes in files, checkpatch will no
   longer emit a warning about line length when scanning files unless
   --strict is also used

 - Add a bit to coding-style about alignment to open parenthesis

dbaluta: This patch is taken and manually applied from Linux kernel
tree. See commit, in Linux kernel tree:

bdc48fa11e46 (""checkpatch/coding-style: deprecate 80-column warning"")

Signed-off-by: Joe Perches <joe@perches.com>
Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",72,25,0
"thesofproject/sof","7c37501568dc90435c74c562e1d0628ec6288d2c","dbaluta","2019-01-23 17:37:27","false","drivers: Remove unused host_msg field

This is legacy and was used to keep current
message from host.

It is now unused so remove it. Notice that we
also remove temp var msg.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",56,8,0
"thesofproject/sof","0cf80e2d327792f07850765790bada88a55ff17d","sebcarlucci","2020-03-16 22:52:00","false","tools: test: Add DC Block test case to tplg-build

This commit includes a new test case in tplg-build.sh. It also includes
the new simple pipelines pipe-dcblock-capture/playback. Those new
pipelines are used by tplg-build.sh to generate the test pipelines.

Signed-off-by: Sebastiano Carlucci <scarlucci@google.com>",79,21,0
"thesofproject/sof","f654d5337d76358e4af4059bc2926b39e5a270d6","ktrzcinx","2020-09-09 06:25:51","false","manifest: Export man_write_fw_vX_Y() to global context

Exported function will be used in configuration parser, to
assign correct function version depending on manifest versiony

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",66,27,0
"thesofproject/sof","76b1bceb3fc669eecf4d5e3d353410a0536714bf","tlauda","2020-04-21 11:19:45","false","pipeline: disable system agent panic for DMA driven pipelines

Disables panic emitted by system agent on timer delay, when there
are DMA driven pipelines scheduled on the DSP. With such pipelines
running, timer interrupts can be delayed pretty often, so just
emit warning instead of full panic.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",84,23,0
"thesofproject/sof","8fab6f22366c5a9f8342bd3324aa3ff74027a1c8","saisurya-ch","2023-08-23 07:19:55","false","platform: Add ACP_6_3 platform support

Add ACP_6_3 platform support

Signed-off-by: SaiSurya Ch <saisurya.chakkaveeravenkatanaga@amd.com>",26,63,1
"thesofproject/sof","d918f1b3d0e7cc8ec5d5e299e9b17fa1b34c698c","tlauda","2019-01-15 12:03:02","false","pipeline: refactor whole pipeline component

Refactor the whole pipeline component:
- one method to handle both upstream and downstream walk
  across the pipeline graph,
- code deduplication,
- cuts pipeline implementation size by half.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,7,0
"thesofproject/sof","2b6001e065e3e27157b042f6b56051f761f2aee9","singalsu","2022-02-09 16:09:44","false","Audio: EQFIR: Optimize source and sink buffers use in generic C version

This patch replaces the audio stream read/write frag based
access to source and sink by block processing based on
audio_stream_bytes_without_wrap() bytes count.

In a test with forced generic C for xtensa build processing load in
original was 324 MCPS, in optimized 309 MCPS, saving is 15 MCPS. The
load is nearly same for all formats s16/s24/s32. The base load was
very high in test due to a very long used FIR filter. The MCPS saving
should be the same for all stereo 48k streams.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",108,44,1
"thesofproject/sof","6a08cf22dfe9f7db2d3ce7deb667748003ea2a52","singalsu","2023-05-15 13:49:06","false","Audio: Volume: Change volume internal gain to Q8.23 from Q1.23

This patch changes for IPC4 configuration the DSP internal gain
format from Q1.23 to Q8.23. Minimum needed would be Q2.23 but
the integer part 8 bits is same as in IPC3 and would allow
signal amplification in volume component in some later phase. The
code is prepared for amplification due to IPC3.

The change allows the Q1.31 max gain (0x7fffffff) to round to
exactly one in Q8.23 notation (0x800000). The gain value one passes
effectively the input to output unmodified. The change prevents lose
about 1 dB of signal-to-noise ratio from peak quality of PCM formats.

The comment from convert_volume_ipc4_to_ipc3() is removed because it
is unrelated and some remain from old code version.

The hard coded 23 for conversion to/from Qx.23 is changed to
macro VOL_QXY_Y because it's used elsewhere in the component. The
saturation (to 32 bit signed) with 64 bit intermediate is kept in
the function convert_volume_ipc4_to_ipc3() in case of VOL_QXY_Y
would be 31. The code requires int32_t or ae_f32 compatible signed
32 bit compatible gain value instead of full uint32_t range.

The gain range for Q8.23 format is min. -138.47 dB and max. +42.14 dB.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",50,59,1
"thesofproject/sof","f753241cf1a558e9a6127e0cf5efb6ffc8fc854e","singalsu","2022-02-02 15:44:43","false","Audio: TDFB: Add note how to updata the settings data files

Comment text is added to tdfb.c to help find the settings
generator shell script.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",104,44,1
"thesofproject/sof","93ea223a892b77167e3f040b25b569718c1f00d0","kv2019i","2021-07-22 13:55:49","false","zephyr: add per-ll-task tracking of execution time

Add a lightweight layer to track execution time of ll tasks to the
zephyr-ll scheduler. Use k_cycle_get_32() timestamps for minimal
overhead. A trace is printed with a period size of 2^10 task executions
(roughly once per second in typical configuration with 1ms timer tick).
Average and maximum observed execution time is printed out for each
task.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",96,38,0
"thesofproject/sof","798226afcfa0c37bfe74a7437064176cf7933d0f","kv2019i","2021-05-05 14:16:45","false","zephyr: fix key-phrase-buffer init in wrapper

The key-phrase-buffer (kpb) component can be included in
Zephyr-based builds, but the component is not initialized
properly in the builds.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",80,35,0
"thesofproject/sof","6cc7527b40d9e991fbcde39d9ab21048991c8856","abonislawski","2019-02-20 08:15:46","false","Memory: move text, data and bss sections into one memory block

One shared memory block SOF_FW for SOF_TEXT, SOF_DATA and SOF_BSS sections.
Moved fw_ready near to .rodata and .data
Removed setting of .text_size for APL manifes
Updated rom.x.in (SOF_BSS_DATA_START is no longer in use)
Used linker symbols to obtain real BSS size in alloc.h

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",63,9,0
"thesofproject/sof","8a220bc34c060a8ea8a24f040e27595aa0468f21","lrgirdwo","2019-04-23 13:43:44","false","codeowners: make sure TSC is notified for every ABI change.

TSC can then classify the ABI change as PATCH, MINOR or MAJOR in ABI
classifier and connect to corresponding kernel PR.

https://github.com/orgs/thesofproject/projects/2

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",48,11,0
"thesofproject/sof","8780a8887614a453bf46802753427a3b69d0c98d","dbaluta","2020-02-26 14:04:49","false","topology: Add topology for i.MX8MP with wm8960 codec

This pipeline adds support for S32_LE, 2 channels, 48KHz
playback/record.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",76,21,0
"thesofproject/sof","86752f6dafded9295c42f10e7665be83d8c67073","dbaluta","2020-02-26 08:58:01","false","CI: travis: add IMX8M build check

Enable imx8m build check in travis.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",76,21,0
"thesofproject/sof","36929ae1b7c633dc7204b27f8dcc50effa384de3","ktrzcinx","2020-04-02 12:22:48","false","smex: Create new tool to build ldc file

SMEX (*SOF Metadata EXtractor*) is a tool used to extract needed
information from SOF source code and output files and then save
them in convenient form like logs dictionary file (*ldc*).

After full integration of SMEX with SOF build system,
rImage with no sof specific ldc generator code can be moved
outside as a common external tool.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",76,22,0
"thesofproject/sof","3e7784007430197ed29b5d3e77f18759235c8199","ktrzcinx","2020-09-24 09:33:56","false","rimage: Update submodule to v1.6, commit fccf521, CI updates.

Commit: fccf521: (""travis: Scan patch codestyle"")
Commit: e29baaa: (""travis: Use $(...) instead `...` in bash scripts"")

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",65,28,0
"thesofproject/sof","4dee8466d6b557e9ffa57a1273bc4f62cb69827c","ktrzcinx","2020-09-10 11:26:24","false","ipc: All trace about dispatching ipc to disabled core

It will help in creation multicore system. This trace is much more
descriptive than -EINVAL. Moreover changed return code to -EACCESS
to be more unique and suited.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",66,27,0
"thesofproject/sof","9508d2efbdc5c21c97a2f7d7c2fe4cc034106045","ktrzcinx","2020-01-13 12:53:35","false","buffer: Create audio stream buffer

When new component will need to process audio data in two steps,
then temporary circular buffer will be needed. Also extra information
about data stream may be needed to choose right algorithm or assert data
compatibility.

Currently only 'comp_buffer' has such a possibility but it is component
defined in topology - with much wider capabilities - and shouldn't be
created inside component just to hold temporary data stream.

Use introduced structure in processing functions, move api responsible
for data processing from buffer to audio_stream module.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",77,19,0
"thesofproject/sof","ca3fd09f03aa08f9593b80cd91ce4307df87b1a2","pjdobrowolski","2022-09-01 06:02:58","false","fix: library manager lack of braces

Because of lack of any static analysis tool some braces were missing.

Signed-off-by: Dobrowolski, PawelX <pawelx.dobrowolski@intel.com>",117,51,1
"thesofproject/sof","626aad475a81f62b14236768dcbf44bb38769d03","lyakh","2022-03-10 09:59:14","false","pipeline: resolve a name conflict

pipeline_posn is a name of a structure, a field in a structure, a
static object and a local variable in several functions. Use a
different name to at least avoid conflicting static and local
variables.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",113,45,1
"thesofproject/sof","8a3968cfbfb157a78a36da55036b60e96f426929","lyakh","2022-03-10 11:25:07","false","cache: always use platform_shared_get() with shared data

Access to objects, defined with a SHARED_DATA attribute should only
be performed, using the platform_shared_get() function.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",113,45,1
"thesofproject/sof","1712beab30055feb1e5a305dc9bbbcaf894af8e7","lyakh","2019-02-26 10:23:51","false","spi: remove the unused irq field

The SPI driver only supports the DMA mode, its IRQ line isn't used
and the IRQ number in Sue Creek data is wrong. Remove the field
completely.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",67,9,0
"thesofproject/sof","e111252a5f7cbd451a64a057cec13905f0de0666","lyakh","2021-04-30 10:49:47","false","zephyr: move library platform code to platform.c

Move logging code and static data to platform/library and
declare a LOG module properly.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",82,35,0
"thesofproject/sof","2f14a8782b54a0502e030193472808c003c57b9b","lyakh","2019-01-15 15:43:26","false","dma: move the dw-dma.c driver to a new directory

Create a separate directory for DesignWare drivers and move dw-dma.c
into it with no changes.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",54,7,0
"thesofproject/sof","49dbfdaf541204957af0acb6ef145d8fe46571f5","lyakh","2020-03-31 15:58:44","false","topology: add a ""core"" parameter to the W_TONE() macro

This places all SectionWidget.TONE* topology widgets, created by
the W_TONE() macro on the same core, on which the respective pipeline
is scheduled.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",69,22,0
"thesofproject/sof","65dd48af215c94d83b10c96dce4c981369ac6f7e","lyakh","2023-01-25 13:07:21","false","multiband-drc: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register multiband-drc with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","0bd8c3b070ab9dadc09878637eaa6f5e223b516a","marc-hb","2023-10-05 18:46:41","false","Upgrade rimage submodule and west submodule to ac487e09ca5b

Add the following rimage commits:

ac487e09ca5b Congfig: Add TDFB to TGL, TGL-H, MTL, and LNL
d89b7d28f636 ipc4: add google rtc AEC support for mtl
4fc431b355e1 elf: Remove unused elf.c
71553274b569 Switch to new elf reader and module parse functions.
539c2b388cc5 module: Set of a new functions to parse modules
5f47509b6757 elf_file: Set of new functions for reading elf files
7bc2958ba4fd Config: Add DCblock to TGL, TGL-H, MTL, and LNL
e8b380d4aec2 Config: Add Multiband-DRC component to TGL, TGL-H, MTL, LNL
8bcf1fc91147 mtl: fill in cps and cpc data for COPIER & GAIN modules
4a36634db612 mtl: fill in cps and cpc data for EQIIR module
fea2a30e5691 mtl: fill in cps and cpc data for smart_amp_test  module
476d63608bcc mtl: fill in cps and cpc data for ASRC module
352f01fee4ba mtl: fill in subsequent measured cps and mcps data
c183ce273943 mtl: add measured cps and cpc values
43eb2a435c29 Config: Add crossover component for MTL and LNL platforms

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",15,64,1
"thesofproject/sof","fb02c56649ab0684a91ab61607285357ba8946b2","marc-hb","2021-05-05 18:18:27","false","logger: don't sound like the DMA trace can wrap

In general the DMA trace runs until interrupted but there are cases
where it can exit ""normally"": when reading from a file or stdin, when
some error happens,....

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",81,35,0
"thesofproject/sof","04e63a90ebc623c5b52b3c19ff5de12013bf3ae2","marc-hb","2022-11-21 20:48:38","false",".github/sparse-zephyr: build and use our own sparse branch

We need urgent fixes like
`xtensa: switch to little endianness`
https://marc.info/?l=linux-sparse&m=166861736724543
and others.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",96,54,1
"thesofproject/sof","5a82b0ab531845cf1ba7c6f4bd42fa1dbb98b773","marc-hb","2023-05-12 00:52:55","false","xtensa-build-zephyr.py: add new rimage_west_configuration()

Do not make the switch yet. Make the switch in a smaller commit that can
more easily be reverted in case of a bug or some missed dependency
somewhere.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",49,59,1
"thesofproject/sof","7d9de28ef1df418b05f747ad5d2ecf16f2cb7cbe","marc-hb","2022-11-21 20:34:50","false","zephyr/docker-run.sh: show zephyr-build OS with lsb_release -a

Logging what the container is made of will help diagnose binary
incompatibilities or other problems.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",96,54,1
"thesofproject/sof","e841dfcc49a11bac4a1d6ab5806672b5104b036e","marc-hb","2023-01-06 22:05:25","false","src/arch/xtensa: normalize two odd files from CRLF to LF

These two generated files are the only ones stored with CRLF in git end
of lines for no reason. Probably because they were generated on Windows,
then copied to Linux before being checked into git. If they had been
added to git running on Windows then the default `autocrlf=true` would
have likely converted them to LF.

These CRLF EOLs have caused a `git hash-object` mismatch before as seen
in #5917). Now that Windows is compiling SOF, #5920 must be
reverted (see previous commit) and they are causing mismatches again.

While this normalization unfortunately causes some large git noise, that
noise can be easily filtered out with [ git ] diff -b or -w or
--ignore-space-at-eol. Github and many others also have similar
filtering options. Temporarily converting them locally with `unix2dos`
or any editor is another option.

As they are generated, comparisons should most often be performed from
the source(s) they come from anyway.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",56,55,1
"thesofproject/sof","28e5047f03776539b1a4ef8433222b8033338dd0","cujomalainey","2020-10-22 18:40:49","false","cmake: fix indentation

Replace spaces with tabs

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",72,29,0
"thesofproject/sof","4cc849d34b1b674e27c83f7fe29ef8cd0602563f","jxstelter","2022-12-05 16:43:13","false","library_manager: Fix dma_ext initialization issue

In the lib_manager_dma_deinit() function proper checks
for dma_ext structure fields must be added to avoid
calling dma api with uninitialized parameters.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",102,54,1
"thesofproject/sof","916fc2cd73ff95dd4f1c78e5052b7aedb8718b6f","ktrzcinx","2021-08-31 09:26:31","false","config: Remove unused adsp structs

After commit 2965908 ""manifest: Remove -m option"" those
structs are unused. ADSP configuration comes from toml
configuration files.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",118,39,0
"thesofproject/sof","c4a7fe191ae47d183659ca2c6ac5d907ea385d68","mrajwa","2019-06-15 21:02:46","false","sys_agent: add option to temporarily enable/disable

This patch adds an option to temporarily disable system
agent. This is especially needed when SOF is performing
long last tasks like draining.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",46,12,0
"thesofproject/sof","96d6c6bc0ff54e333b5229b41534f3aa11325ca6","lgirdwood","2018-11-23 10:54:32","true","Merge pull request #621 from jajanusz/autoconf-make-roms-optional

autoconf: make roms build optional",41,6,0
"thesofproject/sof","b1f8ea84c6c5ce2c3fb5d6e1a8edf9919a21e7f1","lyakh","2021-11-18 07:46:28","false","pipeline: start all pipelines on the same timer tick

Currently when a multi-pipeline stream starts, the first scheduler
run will process the START trigger in the context of the first
pipeline, then the next pipeline task within the same scheduler run
will already attempt to copy data. This cannot work because the
first pipeline hasn't copied its data yet. Make sure to skip the
first scheduler run completely on all pipelines.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",128,42,1
"thesofproject/sof","af2653420155ecbd4ff89734076f7b35ae3b60f5","lyakh","2022-04-07 10:37:16","false","volume: fix buffer acquisition

Instead of acquiring and releasing buffers locally multiple times,
do that once for .copy() and .prepare() methods.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",114,46,1
"thesofproject/sof","83e65d325a21862329d03e325fd762ae903752a0","lyakh","2021-09-09 15:10:52","false","Revert ""alloc: fix a wrong index calculation in heap buffer""

This reverts commit ffff0b061019d3ac02cf038bcc5c746cbb0e83d8.
Both heap and memmap->buffer are of type struct mm_heap so their
difference is already a number of struct mm_heap sized elements
between them. Dividing by sizeof(struct mm_heap) again is wrong.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",118,39,0
"thesofproject/sof","b7d7fb0ed2e1875581259da25981d151bd5b980a","lyakh","2023-11-06 15:49:45","false","schedule: cancel a task before freeing it

When a chain DMA stream is the only one running, stopping it
currently takes 100ms. The reason is that the chain DMA driver is
trying to stop the task directly from the IPC context instead of
letting the task exit on its next scheduling event. The IPC thread is
indeed trying to wait on a semaphore for the task to exit, but that
doesn't work either, because zephyr_domain_unregister() terminates
the thread before it signals the semaphore. To fix this we swap the
order and signal the semaphore before terminating the thread.

Link: https://github.com/thesofproject/sof/issues/8445
Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",2,65,1
"thesofproject/sof","e5bc088e046862650f77876e60516aac097852b5","lyakh","2019-01-16 12:23:39","false","dw-dma: remove superfluous check

In dw_dma_start() .lli_current cannot be NULL. If it were NULL, lines
following the check, would cause a NULL-pointer dereference. Remove
the superfluous check.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,7,0
"thesofproject/sof","29f3ac656be879f4975ba9ed363cdba2f34ebd8b","lyakh","2023-03-06 08:31:47","false","pipeline: fix a potential divizion by zero

If a component doesn't implement .get_attribute(),
pipeline_get_dai_comp_latency() will divide by uninitialised values,
possibly zero. To fix that initialise those fields to 0 and check
that they have been changed to non-zero before division.

Suggested-by: Rander Wang <rander.wang@intel.com>
Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",58,57,1
"thesofproject/sof","e0ff1b16d808c160c7ac53bf7062ba09ceff43a9","lyakh","2021-12-21 07:15:34","false","zephyr: add a generic Zephyr platform

When built with Zephyr, SOF ideally should be a fully platform-
agnostic application. All platform-specific code should reside in
Zephyr itself, including core architecture and platform
infrastructures and drivers. To prepare for this transition we add a
generic SOF-Zephyr platform. It is based on the current Tiger Lake
architecture and should be usable for cAVS 2.5 and newer systems.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",121,43,1
"thesofproject/sof","92f6db8ba95295d78241e257f276e20bddc08a87","lyakh","2022-01-21 15:21:01","false","zephyr: add support for IPC4

Select correct IPC implementation depending on the selected version.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",115,44,1
"thesofproject/sof","03b24ba660d5329bffb81f7697e08876d5ba2375","lyakh","2021-11-24 12:09:40","false","ll_schedule: implement schedule_task_before and schedule_task_after

Add support for order-enforcing scheduling to the ll-scheduler.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",129,42,1
"thesofproject/sof","d8ce56c59f18d21f03109020415e979ffca1c3e1","lyakh","2023-04-27 10:34:27","false","buffer: add more accessors for setting struct audio_stream fields

Add accessors for setting .frame_fmt, .valid_sample_fmt, .channels
and .rate and convert direct assignments to use them.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",52,59,1
"thesofproject/sof","5447a4f7b1f19500664b546cee98c78d1d8ba15d","hongshui3000","2021-04-20 09:08:52","false","cmake file: PLATFORM variable is empty

When CONFIG_LIBRARY is enabled, but the architecture that
exists in sof is not enabled, the ""PLATFORM"" variable in
the zephyr\CMakeLists.txt file is empty, resulting in an
error in the include path.
The modification here is to get the correct include
path under this condition

Signed-off-by: yxh <yangxiaohuamail@gmail.com>",88,34,0
"thesofproject/sof","07ef8adbd7e0c03707a073fb4d7aa8f495c4795a","iuliana-prodan","2020-12-16 10:26:06","false","schedule: dma_multi_chan: fix null pointer when scanning for tasks

When scanning all channels for a certain task we end up comparing
with a null task.
That's because we have multiple channels (e.g. 32 for i.MX) but only
some of them are used in certain scenarios. For example, for simultaneous
playback/capture we use only 2 DMA channels.
To fix this, validate task before using it.

Fixes #3690
Fixes: 647390f75e6a (""schedule: dma_multi_chan: fix a DMA channel interrupt race"")

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>
Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",73,30,0
"thesofproject/sof","2d27374086acaac3636b520fbcd66591739f46c9","singalsu","2023-10-17 12:45:10","false","Tools: Topology2: Include controls to multiband_drc class

The includes to define bytes and mixer controls classes are
needed in case no other class definition has included these.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",9,64,1
"thesofproject/sof","36e1139c9761310064f8c3134c1192a03234f5a1","xiulipan","2019-01-16 10:42:18","false","scripts: pre update sof docker for cmake covert

Update the sof docker to support cmake to pre test cmake build system
change.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",55,7,0
"thesofproject/sof","87bd3d628b29100cdbe4b3f8bcb9fb339b826e33","andrula-song","2022-10-27 02:57:19","false","Math: IIR: add Direct-1 format implementation of IIR

Add C and hifi3 version Direct-1 implementation for IIR,
and rename the structure of sof_eq_iir_header_df2t to
sof_eq_iir_header for both two format sharing. Compared
with the original Direct-2 transport format,Direct-1 has
better performance on low frequency since lower quantization
noise while asking the same memory. The C version cost the
same cycles and hifi version can save about 9.8% cycles than
Direct-2 transport format.

Signed-off-by: Andrula Song <xiaoyuan.song@intel.com>",94,53,1
"thesofproject/sof","b01432e96a308452ced9626452a6bf3ab562ff94","xiulipan","2019-01-11 05:56:34","false","scripts: increase shm size for some QEMU platforms

SHM used to be 64MB, but in newer platform a HP-SRAM is bigger than
that.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",56,7,0
"thesofproject/sof","5af786cfc8faa2ad36eb40f618628f7c202c2925","RanderWang","2018-06-04 08:08:59","false","BDW: init HW registers at setup time

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",1,0,0
"thesofproject/sof","fd85a26b17f6ff713a9825cd8c62e9d1935df6e7","RanderWang","2018-07-23 05:50:32","false","ipc: Refine some IPC data structures to make its size 4bytes aligned

Host communicates with dsp by sending or receiving data in memory
windows which are in PCI MMIO space. Some platforms like ICL require
the transaction size is 4bytes aligned. So it is better to make the
data size 4bytes aligned to make it work on all platforms.

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",13,2,0
"thesofproject/sof","2c757064b1827c67c38412b9a6af7e317a2e83c9","RanderWang","2023-06-01 07:24:16","false","zephyr: wrapper: halt the system in fatal error handler

Follow the k_sys_fatal_error_handler implementation in fatal.c in
zephyr framework. Without this halt, our k_sys_fatal_error_handler
will be called copules time and result to many useless IPC messages
to host.

Signed-off-by: Rander Wang <rander.wang@intel.com>",49,60,1
"thesofproject/sof","f421fb4f346061d920a2b57fc0b3cabce395196a","libinyang","2023-01-30 08:16:29","false","topology2: set sof-hda-generic DMIC0 pcm id to 6

UCM requires sof-hda-generic DMIC0 PCM ID to be 6.

Signed-off-by: Libin Yang <libin.yang@intel.com>",52,56,1
"thesofproject/sof","88925cddb0baa73215551292fa137e6963f3f8be","MingJenTai","2022-03-15 02:27:06","false","[RTNR] Reserve more memory for RTNR

Current RTNR version( 20220314 ) requires about 320KB heap memory, which is a little bit larger than previous versions.

Signed-off-by: Ming Jen Tai <mingjen_tai@realtek.com>",107,45,1
"thesofproject/sof","ab3a11338afceafa24ba5aebcaf01ab37a419caf","aborisovich","2023-05-18 17:32:24","false","workflows: Zephyr build-linux upgraded Docker container with Zephyr SDK

New Docker container tagged v0.26.4 contains new Zephyr SDK v0.16.1
needed to build with Zephyr main branch.
New Zephyr SDK is backward compatible with the older Zephyr revisions
so the upgrade is done for SOF manifest revisions too.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",50,59,1
"thesofproject/sof","decd2064607d74106dc176bfd04a4f4a4e584eba","singalsu","2019-11-13 09:05:14","false","SRC: Fix pointer arithmetic in circular buffer wrap functions

The previously used cast of pointer to size_t (unsigned int)
has worked but it's horrible way to do it. Cast to uint8_t *
should be clean portable code.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",57,17,0
"thesofproject/sof","dd07c8e3b0cb06199034501ebd39ebbc794b8ce9","mwierzbix","2019-01-08 11:21:34","false","tools/coredumper: added support for sof_ipc_dsp_oops_header; added handling of invalid windowbase; added exceptions for invalid flag usage",53,7,0
"thesofproject/sof","5cd4e68c11b97cb0f0d31b139853086dcaf623dc","cujomalainey","2021-04-20 19:54:08","false","dai: don't set values we won't use

we are setting the value but have paths that don't use it and always set
on paths that do use it, lets remove the double write.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",89,35,0
"thesofproject/sof","d71cfcdca192725cdd6dd82a013b67f231318968","ktrzcinx","2020-09-24 10:50:08","false","trace: Replace comment about log levels values to static assert

Such an assertion guarantee valid condition in filter.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",66,28,0
"thesofproject/sof","418ddec5692e8c7dbb569ad33d9d2db6c1cff61c","tlauda","2019-07-25 08:52:31","false","panic: move panic related functions to new panic.h

Moves panic related functions from arch/sof.h to newly created
arch/debug/panic.h. Also change definition of arch_dump_regs
function to take dump buffer from caller. It decreases the
number of included headers in arch/debug/panic.h.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",49,14,0
"thesofproject/sof","aef54e4066bb61bd9cc002e389c32676f2191bba","tlauda","2020-06-03 08:53:26","false","init: add missing inclusion

Adds misssing inclusion of drivers\interrupt.h.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",93,24,0
"thesofproject/sof","db000b32764f13e1387854eeffbebaf984b95112","tlauda","2019-07-17 09:10:05","false","spinlock: detect_test: move forgotten includes

Moves forgotten includes to their right place.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",46,14,0
"thesofproject/sof","1820be6f7e66e231456fcb853dafe1269df553fb","tlauda","2019-06-13 12:47:20","false","dma: check if sg exists before cache operations

Checks if dma_sg_elem_array buffer is allocated
before performing cache writeback or invalidation.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",48,12,0
"thesofproject/sof","a8d2c73c4695ad45647a12a09e93d89c9ad73e14","tlauda","2020-01-14 11:55:24","false","clk: use platform_shared_commit()

Uses new platform_shared_commit() function to commit
shared clock info data.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",77,19,0
"thesofproject/sof","e22c4d3f7fee554b42dffc64105c6317e0c261d8","tlauda","2019-05-16 09:06:18","false","audio: replace memcpy with memcpy_s

Replaces memcpy calls with memcpy_s calls
in audio processing components.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",63,11,0
"thesofproject/sof","c7ca51746174a4f44e2314b25010bb6063e805e8","tlauda","2019-10-26 09:42:09","false","dw-dma: implement proper xrun checking

Implements proper flow for underrun and overrun checking.
DW-DMA should verify whether the channel running on hardware
linked list is still enabled.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",67,17,0
"thesofproject/sof","6e22944e05ea7c6d6c2b61e9632bdbf017644323","marc-hb","2021-09-16 23:09:29","false","README.md: explain how to run SOF tests on new rimage code

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,39,0
"thesofproject/sof","9f13849fa324e9db6967dda74f1d611d1d04b192","marc-hb","2021-11-25 06:52:05","false","xtensa-build-zephyr: fix error message ""not a zephyr project""

Echo the user argument instead of $WEST_TOP which is typically empty at
this point.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",128,42,1
"thesofproject/sof","9452af0a5e8db6e1949aa20be27406ec4a9b2d88","marc-hb","2021-09-09 16:39:50","false","xtensa-build-zephyr: add zephyr_fetch_and_switch() example

Add example that shows how to submit any Zephyr commit to SOF PR
testing.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",118,39,0
"thesofproject/sof","ba7b7a6ce567cf0b476eb733bf334ab2ab4286a1","lyakh","2019-01-16 11:40:57","false","sue: enable IPC over SPI

Sue Creek uses SPI for IPC messages. This patch removes all DMA IPC
artefacts and makes necessary for SPI adjustments in sue-ipc.c. Note,
that it still uses the purely software IPC mailbox for uniformity
with other architectures.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,7,0
"thesofproject/sof","c3b453278baf244136c636bc71849ac4a3e97abe","lyakh","2023-01-25 11:54:48","false","copier: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register copier with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","6cdc29472a978ec6412a9b0dc4ecfcbfada0b345","lyakh","2022-12-13 16:43:33","false","mixin-mixout: fix address space attribution

src_info, as returned by find_mixout_source_info(), is a part of
mixed_data_info which is explicitly cached. Annotate src_info to be
the same.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",98,54,1
"thesofproject/sof","e414339bc359b1c2b0dcc3d8ea35dede58be7982","dbaluta","2019-02-23 21:04:18","false","host: Remove unused completion

After commit 93a52130c187db (""pipeline: preloader: simplify
preloader by reusing pipeline copy()"") copy completion handling
is done via the pipeline infrastructure. So just remove the
remaining code relicts who are there only to confuse the
novice reader.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",63,9,0
"thesofproject/sof","1fb72c6b74ddedeb10b893682669b42973915e95","keyonjie","2020-11-19 09:28:52","false","ssp: mn: add helper to reset bclk M/N source

Add a helper to reset the bclk M/N source (MNDSS), which will help to
release the clock source when it is not needed.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",74,30,0
"thesofproject/sof","868711c579914088670effe9bfb4d78ea175cc78","marcinszkudlinski","2023-10-11 08:23:50","false","dp: start DP tick fixup

This is fixup for 689e8e999f220356f69b8532216790fed18a9da4

Incorrect list pointer has been used

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",13,64,1
"thesofproject/sof","70ab103e88cabcb16833dd1c9eae611485441c9c","tlauda","2020-03-03 08:45:28","false","mixer: fix state transition

Mixer shouldn't go into COMP_STATE_PREPARE if there is at least
one source in COMP_STATE_PAUSED.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",79,21,0
"thesofproject/sof","2e9264586b8d756b393b519748b552187c8339aa","tlauda","2019-04-15 09:51:02","false","src: fix memory leaks

Fixes memory leaks in src component.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",50,10,0
"thesofproject/sof","db2a6e5b58495cf0ea2c0431dc5ac5c3fd3f134b","tlauda","2019-09-24 10:15:15","false","arch: xtensa: add macros to store values

Adds additional macros to store register values under the
selected structures per core.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",65,16,0
"thesofproject/sof","de7d4c95cfbde36183ddfb08203520dd5528eda4","tlauda","2019-09-13 08:27:25","false","pipeline: allocate pipe_task only if needed

Changes implementation of pipe_task allocation and initialization
to happen in prepare call instead of during pipeline creations.
It might be that the pipeline will never be used.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",62,15,0
"thesofproject/sof","053cc08b674df81fe55945c6c80d6f0a3f6873d7","tlauda","2018-07-31 13:55:47","false","dai: dma_release is no longer needed

Calling dma_release function is no longer needed
as we are currently tracking ll_current for all
platforms and starting GPDMA from the right item.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",17,2,0
"thesofproject/sof","95a7c02041eb6c963464a7a80537ab4087f4d29d","tlauda","2019-10-14 08:30:56","false","topology: pipe-src-volume-playback: fix number of periods

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,16,0
"thesofproject/sof","dbeb0b9fdd017c66ff99e07b4a00db830aa25619","softwarecki","2022-12-29 15:53:36","false","ipc4: notification: Add watchdog timeout notification structure

Added notification structure for a watchdog timeout.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",93,55,1
"thesofproject/sof","02152c3dcfec20ee50fc9ca7a3fd9dd362e6c639","softwarecki","2022-09-30 11:53:22","false","ace: dma: Add temporary dma ops to allow get attributes

The attributes of the dma controllers must be moved
to the zephyr. Until then, we will use a own copy of the
get_attribute function from the alh and dw_dma drivers.
Thanks to this, we can completely disable it building
in the configuration.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",98,52,1
"thesofproject/sof","a4cea81bd6a2d5321986f4c5f15c383741604aa4","ranj063","2021-02-04 19:18:06","false","smart_amp_test: check if feedback_buf exists before accessing it

With dynamic pipelines, the widgets in the feedback path are set
up only when the capture PCM is opened. Check if the
feedback_buf exists before accessing it to prevent DSP panic
when only the playback pipeline is open.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",72,32,0
"thesofproject/sof","161e6b7b1acbec91a7a2272b277f684fd93090cd","tinghan-shen","2022-11-02 12:19:13","false","platform: mt8186: Change ADSP max clock frequency

Change the maximum frequency to 300M because power issue.
The mt8186 supports 800M/400M/300M frequencies, each requires
0.8/0.7/0.65 minimum core voltages. The 300M is the most
compatible option because it has the lowest minimum core voltage.

Signed-off-by: Tinghan Shen <tinghan.shen@mediatek.com>",89,53,1
"thesofproject/sof","8198c33b95f60498ff4013096b1e569e3b679195","ranj063","2022-01-11 20:01:24","false","codec_adapter: Remove redundant setting of avail to true

module_load_config() already sets the config avail flag to true.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",114,43,1
"thesofproject/sof","3d184df6bf0115b3d3d192c31a225e74074fae84","aiChaoSONG","2021-07-09 02:44:22","false","topology2: Add manifest class

Add class definition for manifest.

Signed-off-by: Ranjani Sridharan <ranjani.sidharan@linux.intel.com>
Signed-off-by: Chao Song <chao.song@linux.intel.com>",86,37,0
"thesofproject/sof","1c48208850c91322b033d5d59fb1a0b4e6648e20","aiChaoSONG","2022-12-08 05:44:22","false","config: tgl-cavs: add smart amp test module config

This patch adds module config for smart amp test module.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",101,54,1
"thesofproject/sof","b98e912fff563a24774135698d626fc40ee5999b","tmleman","2023-09-22 08:10:36","false","platform: posix: clk: add lowest freq index

This patch adds CPU_LOWEST_FREQ_IDX definition to keep compliance with
changes in base_fw.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",21,64,1
"thesofproject/sof","b933e8c2fed5d1c77b4560e17e53cad518d10cec","tmleman","2023-07-19 08:18:17","false","ipc4: helper: storing size of received configuration

This patch temporary extends comp_ipc_config struct by the value of
input configuration size. Each module receive its own configuration at
creation (MODULE_INIT IPC). In case of a gateway those configuration can
contain additional value (aux_conf). The only way to check if such
config was received is to compare size of the data received via ipc and
standard configuration size.

This solution is temporary because ultimately it would be necessary to
transfer to each module the size of the received configuration along
with a pointer to the configuration itself. Just like the test is in the
case of a module adapter.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",32,62,1
"thesofproject/sof","a40e1fd0099df590ea24532b5f5a21fb626bab59","dbaluta","2019-01-28 12:10:34","false","rimage: Fix file_format.h include guard

This is most likely due to copy/paste.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",59,8,0
"thesofproject/sof","5f022993f601deea254757f457c0c25aee3097a0","dbaluta","2020-10-26 12:27:06","false","drivers: imx: sdma: Stop a channel in sdma_stop

We no longer care about setting overrides values at stop
because they are correctly set at config time.

What we need to do instead, is to clear HE bit (SDMA_STOP_STAT).

This patch also introduces sdma_disable_channel function to simmetry
with sdma_enable_channel.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",74,29,0
"thesofproject/sof","8b48aca7f3779f1f7e64fcfc63c0127b166f1744","lgirdwood","2018-11-13 14:55:51","true","Merge pull request #565 from libinyang/coverity_dw_dma

dw-dma: fix dw_dma_work reschedule issue",38,5,0
"thesofproject/sof","1cbc83650dbfbe7d746da2fb76358a20ee803a76","mrajwa","2019-02-05 15:20:06","false","GDB: Added support for memory write.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",56,8,0
"thesofproject/sof","2bcafb7e1dc138660a052ab38f19fc767f683aaf","lgirdwood","2018-10-10 09:13:36","true","Merge pull request #472 from mmaka1/clk-gating-put

plat: apl: clocks gated back on topology free",32,4,0
"thesofproject/sof","e79893ee02d88ffeb8f6beed7bbd38bc11f13dae","mrajwa","2020-11-23 16:25:18","false","codec_adapter: update .params() method

This patch updates the .params() method with verification of runtime
parameters and stores them in component data for future use.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",75,30,0
"thesofproject/sof","591a07d02d83d76ac481b37fc84f7f1fca7416c3","ranj063","2018-07-06 22:33:44","false","topology: add multi-stream topology for GLK

Add a multi-stream topology for GLK with speaker on SSP1, headset on
SSP2 and DMIC. Only playback pipelines on SSP1/2 for now. Capture
pipelines to be added later.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",11,1,0
"thesofproject/sof","25d0f01d03f45d4d8594c66aa3dbe5275deed890","ranj063","2018-10-31 17:25:38","false","dmic: fix mem alloc for dmic params

The dmic params struct should be allocated in RZONE_RUNTIME
instead of RZONE_SYS so that it can be freed. This
fixes the DSP panic caused while it is freed after setting
the DMIC config.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",27,5,0
"thesofproject/sof","d739207f9009854bf7694be75da479e575921ef8","ranj063","2023-01-20 02:06:20","false","topology2: Build the topology for MTL chromebook

Build the topology for the MTL chromebook with Headset on SSP 2 and
speakers on SSP 0.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Dharageswari R <dharageswari.r@intel.com>",55,56,1
"thesofproject/sof","d779624a9ba4ee5cf4b693e1731210c9c87d8d64","ranj063","2022-03-23 23:02:07","false","codec_adapter: rename DECLARE_CODEC_ADAPTER and comp_driver

to DECLARE_MODULE_ADAPTER and comp_driver to comp_module_adapter.
Also rename SOF_COMP_MODULE_ADAPTER to SOF_COM_MODULE_ADAPTER.
No functional changes.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",109,46,1
"thesofproject/sof","6a297b4ed7b8c730f5a472c03d71f8a07c9e98f8","RanderWang","2021-09-28 05:23:52","false","ipc4: add get & set large config support in ipc framework

Get_large_config is used for driver to query module information
and set_large_config is used to change module config dynamically

Signed-off-by: Rander Wang <rander.wang@intel.com>",120,40,0
"thesofproject/sof","8f78c7ecd67502246064b081f6a37b016d1e9bbd","RanderWang","2022-03-01 05:42:28","false","ipc4: invalidate dcache for host mailbox

Fix a regression issue on windows. Need to invalidate dcache
for host message or FW will get garbage data.

Signed-off-by: Rander Wang <rander.wang@intel.com>",112,45,1
"thesofproject/sof","be0b05897432bc6b9c17e46c6ed9eac6a5e9e5b2","RanderWang","2018-09-06 08:13:54","false","dma-trace: tune the dma trace reschedule time

500us woulld cause dma trace buffer overflow at the boot up time.
Now refine it to 100us to make both scheduler and dma trace happy

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",31,3,0
"thesofproject/sof","36fbe5ef9efd4861edc2ce1888b7e9c5977e161e","tlauda","2018-08-22 09:58:30","false","work: init work queue for slave cores

Initializes system work queue for slave cores.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",18,3,0
"thesofproject/sof","854ed29153a118ee6deda58aefe12cfbe4eacb01","tlauda","2020-02-27 08:47:48","false","ipc: return status on notification sending

Returns status -EBUSY, when IPC upstream channel is
currently busy and notification cannot be sent.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",75,21,0
"thesofproject/sof","56ebbad4754011935e461a1cf562afc591fa1e9d","tlauda","2019-09-27 08:53:36","false","platform: define and use CONFIG_SYSTICK_PERIOD

Adds additional CONFIG_SYSTICK_PERIOD to Kconfig,
which is used to drive timer based low latency scheduler
and also will be used as a timeout check value for system agent.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,16,0
"thesofproject/sof","cac6e4400744a838ea48a19aff62a1fc0e149354","tlauda","2019-06-06 10:51:05","false","ssp: cavs: decrease PLATFORM_SSP_DELAY

Decreases PLATFORM_SSP_DELAY for cAVS platforms.
This delay is used after SSP start and before stop
to let frame and clock synchronize. It was very long,
so was decreased from 1/8 ms to 1/24 ms. Experiments
show that it's still enough for slave clock to synchronize
and to not lose first data sample.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",56,12,0
"thesofproject/sof","19ae126962a010929336553fd2503ef686187479","tlauda","2019-12-13 12:57:51","false","ipc: change memory allocation for IPC notifications

Changes the way of allocating IPC notifications by using
dynamic allocation instead of statically defined array.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",75,18,0
"thesofproject/sof","c412a8559eaca5d35764bb31aeb167ec58735952","tlauda","2020-04-10 10:31:07","false","host: optimize copy by removing condition statements

Optimizes host copy function by removing checks for copy type
and using preconfigured callback instead.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",82,22,0
"thesofproject/sof","c0c8992bcd3453e911b455488d2258d0bd372a8d","tlauda","2019-04-12 14:37:14","false","dw-dma: configure aggregated irq from Kconfig

Moves configuration of aggregated channel interrupts to
Kconfig. Currently only Apollolake has possibility
to register interrupt per channel.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",47,10,0
"thesofproject/sof","812869b00f5b6a32cc1d25a800ac81a0fdfee298","tlauda","2018-07-02 16:05:27","false","cpu: cpu_read_threadptr

Adds function cpu_read_threadptr.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",7,1,0
"thesofproject/sof","552fc49e0f18993f1df242c8fea5bd1f01236b49","jajanusz","2019-01-30 05:52:35","false","rimage: use local elf.h

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",56,8,0
"thesofproject/sof","a5a6e70509bd3a26df90e527dc66e563fcb7cebc","jajanusz","2019-12-17 10:04:34","false","Revert ""kpb: refactor kpb->hb_buffer_size""

This reverts commit 2051f0f412abe55340086a07e84d78658c4e65bd.",69,18,0
"thesofproject/sof","11ccd01588da848f719a387bd85db0ff6c437bcf","jajanusz","2019-03-22 12:34:58","false","include: remove unused test file

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",66,10,0
"thesofproject/sof","d7404c587ecca494b6f3a18bd937393a9419ea87","lrgirdwo","2018-09-19 19:58:48","false","host: fix build for host library target.

Fixed size warnings in io.h and missing scheduler API.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",36,4,0
"thesofproject/sof","2a6d9d3c36190464a4268d353a6e27c49c4715b5","lrgirdwo","2023-08-30 22:03:58","false","posix: Add posix headers

Add the posix headers for use with the SOF ALSA plugin.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",25,63,1
"thesofproject/sof","b672923809ef83b78f9b484e3617d88da1a0a6db","lyakh","2020-10-08 09:55:09","false","zephyr: adjust for new location of audio component samples

Audio component samples have been moved to a new location, fix Zephyr
builds to account for it.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",68,28,0
"thesofproject/sof","c17be235ba85e5a624a7ba68635df651ddbc248c","lyakh","2019-01-10 10:28:03","false","dw-dma: fix a comment

Fix an error in a comment.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",57,7,0
"thesofproject/sof","36cb5b32d8d000618fff706cf73f06311a5cf111","lyakh","2021-08-31 09:41:10","false","platform: (cosmetic) make all timer objects static

All platform.c files contain timer objects, and some also arch_timers
and most platforms define those objects as global. Make them static.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",118,39,0
"thesofproject/sof","4cd928007edf10ed5ac6fa4022a2eb0a348e651a","btian1","2023-07-10 06:16:59","false","audio: module adapter: create new module process for host and dai

create new module process stream function for host and dai
audio stream handling.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",29,61,1
"thesofproject/sof","e847c8b270150353551d4720e382502c9a916496","btian1","2023-07-31 08:08:02","false","module_adapter: avoid module init crash in case of ipc data invalid

In ipc3 module creation, it is possible that ipc data
is invalid or corrupted, in this case, module init may crash.
This patch is adding error handling to avoid crash.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",32,62,1
"thesofproject/sof","0ecfc78139560ccddc4299af75316f1356a0d6d3","serhiy-katsyuba-intel","2022-12-13 14:58:54","false","ipc4: fix crash when using ALH DAI

dma_buffer is not yet created when ipc_dai_data_config() is called.
Accessing dma_buffer->stream leads to crash.

Anyway, there is no need to set
dd->dma_buffer->stream.frame_fmt = SOF_IPC_FRAME_S32_LE
as this is done just after ipc_dai_data_config() in dai_params()
by calling buffer_set_params().

Somewhat similar fix for IPC3 was done some time ago: 0ba90d8e2a.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",98,54,1
"thesofproject/sof","28bb1bdd206d729dfc982dc5eb838b80ccb6a024","singalsu","2019-03-11 17:16:28","false","Tone: Remove not used version macro from ABI header

The SOF_TONE_ABI_VERSION macro is no more used. This change is
also needed to match with kernel side header.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",69,9,0
"thesofproject/sof","909b790235cba6cfa5ef6da9f9e2712ef4734d75","singalsu","2019-06-03 14:35:13","false","Topology: Add SOF_TKN_INTEL_DMIC_UNMUTE_RAMP_TIME_MS token

This patch adds to all DMIC related topologies the new token
SOF_TKN_INTEL_DMIC_UNMUTE_RAMP_TIME_MS. The value is set to 400
to correspond to 400 milliseconds long unmute ramp time. The
topology defined unmute will override the firmware internal
hard coded value if it is set in topology.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",67,12,0
"thesofproject/sof","a0c9907dbd4082b1bc8d1851b8e8ef645931ec09","nashif","2022-07-13 02:37:22","false","zephyr: module: point to where the app is

This allows building SOF from zephyr for CI and testing purposes.

Signed-off-by: Anas Nashif <anas.nashif@intel.com>",110,49,1
"thesofproject/sof","35f2e5f84fddb170e3565a81bc45cc61b552cf71","jsarha","2022-11-22 19:07:20","false","ipc4: Fix chain DMA trigger handling

We need to deliver the PPL_STATUS_SCHEDULED from pipeline_trigger() to
calling ipc4_process_chain_dma() function. Added ""bool *delay"" parameter
to ipc4_trigger_chain_dma() for that, since there is no clean way to use
IPC4 status values for that purpose.

The most complex is the case where an active stream is shut down with a
single message (both active and allocate bits zero). In this situation the
stream has to be paused and reset in another thread, but the freeing
the pipeline has to be done in messaging thread, since chained DMA
pipelines are not cleaned up automatically.

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",94,54,1
"thesofproject/sof","ceced0e64129dfdb892038e2b7a0e517d088de8d","jsarha","2022-09-28 18:11:28","false","tools/probe: Drop undeeded include files

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",97,52,1
"thesofproject/sof","1ea1327b9cf169c847734c7dca716869534e2c51","marc-hb","2023-05-24 01:17:37","false","README.md: remove ""install"" target

Fixes commit 77d4a2acd751 (""cmake: remove ""install"" target"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",55,60,1
"thesofproject/sof","dba3c4f63d9fbb3ab8c25c32845d52b8415d41d4","marc-hb","2022-04-29 17:45:56","false","Break down buggy assert(!memcpy_s(...)) into two statements

assert() semantics are very clear: because asserts are optional, the
argument should never have side-effect, period. assert arguments should
be treated exactly the same as logging arguments. So
`assert(!memcpy_s())` is an obvious bug. Use variable to break that down
into two statements.

Fixes commit 0b7fd030b391 (""demux: return config on COMP_CMD_GET_DATA"")

Fixes commit 385586a5f664 (""zephyr: implement IDC using P4WQ"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",115,47,1
"thesofproject/sof","6516f907aa39f58dc410d0e2e7d860e098e594eb","marc-hb","2022-12-06 00:50:05","false","sparse: pass platform argument to error filter script

So we can make adjust the warnings based on the platform.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",102,54,1
"thesofproject/sof","cb70ef9e350bf06eae545c5a3e484e8d2dc2353e","jajanusz","2019-01-31 14:22:34","false","cmake: check rimage dependecies

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",59,8,0
"thesofproject/sof","48259d866305073e96f7163cf846f7f77969ee78","tmleman","2023-09-26 21:21:43","false","west.yml: update zephyr to b2f7ea0523

Zepych update: total of 736 commits.

492517b918 west.yml: Update NXP HAL SDK to 2.14
a5d1fd9857 soc: adsp: clk: update clock switch flow
9656056b19 dts: adsp: ace20: remove lp clock
50f0e223e8 dts: adsp: ace15: remove lp clock
cf6d5f95b6 adsp: clk: ace: select ipll if wovrco is unavailable
2d835e1b29 dts: adsp: ace20: replace hp with ipll clock
dcecda859c dts: adsp: ace15: replace hp with ipll clock
2f2689e3d3 intel_adsp: ace15: shim: update wovrco request bit
ea9dd59460 yamllint: bindings: add ipll clock index
1ddabfa8d8 dai: intel: dmic: fix shadow variable
b26921d776 dai: intel: dmic: New functions for writing fir coefficients
cba9ec10c3 dai: intel: tgl: dmic: Refactor of dai_nhlt_dmic_dai_params_get function
c28e8ba9ba dai: intel: dmic: Add pdm_base and pdm_idx variables in blob parser
2452aaad50 dai: intel: dmic: Separate fir configuration code into function
f74fd8edaf dai: intel: ace: dmic: Add dai_dmic_start_fifo_packers function
76d03e798f dai: intel: ace: dmic: Using the WAIT_FOR macro in waiting functions
3fbaed4de9 dai: intel: ace: dmic: Refactor of dai_nhlt_dmic_dai_params_get function
d7672af838 dai: intel: dmic: Combine PDM registers definitions
8ea53d49b6 dai: intel: dmic: nhlt: Move debug print code to a separate functions
81944c5c62 dai: intel: dmic: Move definitions of nhlt structures to a new file

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",19,64,1
"thesofproject/sof","8f9b769af84c6bb4d835b0434b0e7f66364e3a73","lyakh","2022-05-24 10:03:59","false","dai: add a DAI operations copy method

Add a DAI copy method to be called before dma_copy().

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",116,48,1
"thesofproject/sof","1da18c2caa4693755ec430ba0cd5d3bc5907f081","ranj063","2023-05-30 16:02:28","false","topology2: cavs-sdw: Build passthrough LNL FPGA topology

With RT711 on link 0

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",47,60,1
"thesofproject/sof","6bedd8e7427c654aca7b3c3027f5244f3bcdecb3","marc-hb","2021-09-02 20:23:43","false","xtensa-build-zephyr: fix RIMAGE_KEY when building multiple platforms

RIMAGE_KEY was global and leaking from one platform to the next

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",119,39,0
"thesofproject/sof","2c46c7a22c94dc24d2dcc8396b088324bd267cf6","plbossart","2021-02-11 20:18:44","false","topology: use different names for Jack input and output

The topology handling requires names to be unique, regardless of
direction. It's an undocumented 'feature' of the ALSA topology parser.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",73,32,0
"thesofproject/sof","2ba01165b9250ac2107a1b5b904b714b3d1fe9c8","lrgirdwo","2018-11-05 21:42:58","false","uapi: split ipc.h and abi.h into small files.

Split the larger ABI files into smaller more manageable chunks. Also
split by end user into IPC and user space ABIs.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",37,5,0
"thesofproject/sof","37aab617dac7198172759114715426aa47929696","lrgirdwo","2020-07-06 09:27:24","false","init: move slave core init to src/init.c

It's generic code and not xtensa specific.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",73,25,0
"thesofproject/sof","cadfc6aca2ff63bcf269dc0c124832895967d8b9","lrgirdwo","2018-11-30 16:06:30","false","rimage: Add support for Sue creek

WiP.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",40,6,0
"thesofproject/sof","a44fb2c3d86a3061f8dbdd5efe786a2fccd88b08","jajanusz","2019-06-01 18:01:02","false","rimage: change license to bsd

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",72,12,0
"thesofproject/sof","abb2591abd47019a807a15ef236a6690cd038ad9","jajanusz","2018-08-23 08:22:51","false","platform: refactor: unify */platform/timer.h functions and variables

For cnl&apl removed platform_timer_register from public api
and made it static.
For byt&hsw moved platform_timer to platform.h
(just like it is for cnl&apl).

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",19,3,0
"thesofproject/sof","07bd1b20cb7b0d888f1ced2c9d9b1c4d6e7d4c83","jajanusz","2019-01-15 19:28:07","false","cmake: add doc CMakeLists

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",54,7,0
"thesofproject/sof","ecd506e16d2a8968860e5a7b4eeeb449c21de87f","jajanusz","2019-06-01 19:14:06","false","license: use spdx in .c, .h and .S files with BSD3

Use SPDX License identifier in files that already
contain BSD-3-Clause license.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",72,12,0
"thesofproject/sof","64497f5f64145e0531f7bac76e9a1adf7711d3cb","jajanusz","2018-11-23 10:46:38","false","autoconf: make roms build optional

Use --enable-roms to build ROMs

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",41,6,0
"thesofproject/sof","9f3714f63a15ee7fd815797c77539973a5017db8","cujomalainey","2019-11-27 20:41:50","false","platform: cht: reset ssp clk M/N dividers on boot

The firmware may have modified these values to execute features such as
a boot beep. Therefore we cannot assume they are set to their defaults.
Lets write the defaults just to be safe.

Fixes #1847

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",69,18,0
"thesofproject/sof","c4f4c978afae73fd7a0e416041c0c2a51f22acd3","softwarecki","2022-07-01 20:37:39","false","copier: New pipeline latency calculation algorithm

New algorithm for calculating the pipeline latency based on
the number of buffered data blocks between the first and last
component.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",110,49,1
"thesofproject/sof","8f51e6bbb4e724069182b91df5cf0d6fd687245d","xiulipan","2019-12-09 05:25:13","false","build: disable asrc xcc defconfig for byt cht

Need to disable asrc support for BYT and CHT for xcc build.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",73,18,0
"thesofproject/sof","7625eda9b036fffb2a3cda5480a21c10c5287f03","kuanhsuncheng","2021-09-03 10:01:01","false","platform: mtk: compile afe support for mt8195

The AFE is a audio hw interface on the mt8195 platform.
This commit brings the compile support for the AFE.

The audio front-end essentially consists of voice and audio data paths

Signed-off-by: YC Hung <yc.hung@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",119,39,0
"thesofproject/sof","8294cf3d51f6a8f74a9a1f9e550ba573fd1d2c8f","abonislawski","2020-03-23 09:14:28","false","rimage: show LMA and VMA in section view

Sometimes they will be different and this will make developer
aware of the differences

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",66,22,0
"thesofproject/sof","7c735fe7a7acb5d77d70d17b0b4929e8810624e4","ranj063","2023-10-17 20:56:42","false","topology2: deepbuffer-playback: Remove stale comments

These were left over when the audio formats were cleaned up.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",11,65,1
"thesofproject/sof","662c04b694981e69f5744660881a88cdf0048caf","ranj063","2023-08-04 23:23:16","false","tplg_parser: pipeline: Update the ipc4 builder

Add support for parsing the scheduler widget in IPC4 topologies.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",29,62,1
"thesofproject/sof","28d2266b210491fec8166d3691d65edd36076874","ranj063","2021-10-27 16:10:22","false","smart_amp_test: use buffer acquire/release

instead of buffer lock/unlock which will be deprecated

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",128,41,1
"thesofproject/sof","33bae7afa1235fe609f39d577198521685d94965","ranj063","2022-02-24 17:33:45","false","topology2: cavs: dmic-generic: Add input/output bit depths

Add the input/output bit depth's for the BE DAI copier for the DMIC
capture pipeline.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",110,45,1
"thesofproject/sof","416ca64408a83698e561f3e6ef5e891006a11c54","ranj063","2018-10-11 05:26:09","false","eq: use updated SOF_ABI_VERSION

Use updates SOF_ABI_VERSION instead of EQ specific ABI version.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",33,4,0
"thesofproject/sof","d9c70f779aef577516446f1046c5453d2e3e2369","ranj063","2021-10-27 02:35:38","false","Revert ""pipeline: (cosmetic) move a block of code to a function""

This reverts commit 0fe263de6f540196dbd1e69b6e203c6dc98bcd6c.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",127,41,1
"thesofproject/sof","c9ffb30c12cf51c6bb798ce23892e132a9811837","bkokoszx","2019-06-28 08:10:14","false","dma-trace: make dma-trace using dma_get_attribute()

I've removed PLAFORM_HDA_BURST_SIZE define since it is the
same as HDA_DMA_COPY_ALIGNMENT. In trace functions we
can retrieve alignment by using dma_get_attribute()
dma function.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",45,13,0
"thesofproject/sof","473d8894f0e3f4491c23a51f838ce9d760160048","bkokoszx","2020-11-04 10:42:20","false","mux: change prepare_active_look_up() function name

This commit changes prepare_active_look_up() function
name to be mux specific.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",75,29,0
"thesofproject/sof","3de4a6e5d7b6420813a5e830eafa588f78c709fa","udaymb","2023-06-21 16:18:36","false","topology2: cavs-sdw : Update BT offload SSP for MTL chromebook

For MTL chromebook, SSP 1 is used for BT offload with
cavs-sdw configuration

Co-developed-by: Yong Zhi <yong.zhi@intel.com>
Signed-off-by: Yong Zhi <yong.zhi@intel.com>
Co-developed-by: Jairaj Arava <jairaj.arava@intel.com>
Signed-off-by: Jairaj Arava <jairaj.arava@intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Uday M Bhat <uday.m.bhat@intel.com>",42,61,1
"thesofproject/sof","bdfff470a4edeaefb05d254144eee16aa991fd04","akloniex","2020-01-30 12:19:03","false","probes: Add extended boot data regarding probes support.

Create compile-time section .fw_ready_metadata and append it to
.fw_ready with linker.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",75,20,0
"thesofproject/sof","7cad81375020bc8c9a6bd90960c4251a5e2370a0","johnylin76","2021-08-24 10:29:22","false","drc: Optimize with cordic sine function

This patch optimizes for speed of DRC with cordic sine function
usage in both HiFi3 and generic manners.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",120,39,0
"thesofproject/sof","72b6521c87df9097494b7728f85454e4a31789fc","jajanusz","2019-09-30 17:24:01","false","rimage: rename module_sha functions

These functions are generic and can be used for other SHA algorithms.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",66,16,0
"thesofproject/sof","1203a46633ae8c67b3ba8ebbf49350643aed8695","dbaluta","2021-07-22 12:53:50","false","tools: ctl: Fix getopt() stop condition

getopt() returns an int, which in our implementation is assigned to a
char type var.

On some platforms char is unsigned thus making getopt() return value
always > 0.

Use int instead of char here to fix the stop condition for parameter
parsing.

This makes sof-ctl work on ARM platforms.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",96,38,0
"thesofproject/sof","d6fef4e4c3b19b1b22aaa7554b726fa454b89dfe","mrajwa","2020-02-05 11:24:38","false","memory: increase heap buffer size for ICL an JSP platforms

This patch increases heap buffer size for ICL and JSP platforms.
Therefore more pipelines can work simultaneously.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",77,20,0
"thesofproject/sof","af661f6a39231c1b81c127f52047195e3a13f6b1","lgirdwood","2018-08-22 13:43:22","true","Merge pull request #241 from tlauda/topic/comp_cache_ops

component: add cache ops",19,3,0
"thesofproject/sof","86610e066d1963a604e3f08ae5a151a0bae30315","lgirdwood","2018-08-12 18:03:11","true","Merge pull request #223 from plbossart/fix/ipc-header

uapi: ipc: align with kernel",20,2,0
"thesofproject/sof","a1d321734f3dd706f0ad31140ce470e302cee50a","eurofun","2023-05-31 16:23:23","false","SAI: fix DSP_A/B frame sync pulse

SAI can be configured for a one bclk wide frame sync pulse
by setting CR4 SYWD to 0. The REG_SAI_CR4_SYWD()
macro subtracts 1 from its argument which resulted in
bad things happening. So use 1 as correct macro argument.

Signed-off-by: Alexander Boehm <aboehm@eurofunk.com>",48,60,1
"thesofproject/sof","c0b969d784ee77646e1235c66ce8a70371d57925","ymdatta","2020-08-23 13:56:52","false","tools: testbench: initialize local variable before accessing it

If user fails to provide a topology file, the tplg_file member
of structure tp is left uninitialized. This member is used to
check again if the file was provided, which won't be possible
unless this has been initialized to NULL and checked for NULL
after parsing arguments.

Signed-off-by: Mohana Datta Yelugoti <ymdatta.work@gmail.com>",73,27,0
"thesofproject/sof","e68b10ffd6e358aa57b97691f403ced69530ee5c","xiulipan","2018-07-23 08:49:51","false","ipc: make dai index name unified

dai_get function only need type and index, make index filed unified to
dai_index to avoid misleading in sof_ipc_dai_config and sof_ipc_dai_config.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",13,2,0
"thesofproject/sof","a8d54314c971b4cb9b3c1e58780f93c4c1546240","xiulipan","2018-09-29 05:06:25","false","logger: make logger usage similiar to old rmbox

Add wrapper for parser function and add default path for error
trace and dam trace.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",37,4,0
"thesofproject/sof","586caa79f58255417013b2b58d41d38a10f4c2b3","xiulipan","2021-01-12 09:02:26","false","tools: sof_ri_info: add new community key for TGL+ platforms

Add the 3K community key for TGL+ platforms.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",74,31,0
"thesofproject/sof","8901e0cf292c73e0d2fe5811ec1a9a72c09c876e","xiulipan","2019-05-30 07:36:04","false","CI: travis: update with IMX8 support

Add IMX8 build test in travis CI.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",67,12,0
"thesofproject/sof","1f374f8840566c55d22bbf30788902751e00ff38","fkwasowi","2022-12-19 12:45:57","false","module_adapter: return success when component state is equal to requested state

When dev->state == requested_state in comp_set_state then
COMP_STATUS_STATE_ALREADY_SET (status 1) is returned.
Then the pipeline trigger is aborted and status 1 is returned
to the pipeline_task_cmd function (status 1 in this function means
PPL_STATUS_PATH_STOP). Finally, the status of the pipeline
does not change and the IPC response returns success.
which causes errors with subsequent changes in the pipeline state
(INVALID_IPC_REQUEST)

Signed-off-by: Kwasowiec, Fabiola <fabiola.kwasowiec@intel.com>",92,55,1
"thesofproject/sof","ffe22f2831e7bc4f74f6f101bac1645dcc7d9362","kv2019i","2021-05-17 12:35:12","false","Kconfig: move compiler options to a separate file

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",87,35,0
"thesofproject/sof","fc8d348589e776bada380be77cdd18543e479983","bkokoszx","2020-02-20 13:52:40","false","eq_fir: refine eq_fir_verify_params() function

eq_fir component is not able to change stream format, so we
should invoke comp_verify_function() with flag equal to 0.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",84,21,0
"thesofproject/sof","1ce07dcfb253e92a088ee7ea86b74a7639e25658","yongzhi1","2020-03-27 17:31:45","false","topology: kwd: remove volume from pipeline description

Remove volume to match updated pipeline.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",66,22,0
"thesofproject/sof","880ee3b202374b2b74e1f65f9252c3252ac237d6","lyakh","2023-04-27 10:52:32","false","buffer: add final accessors to struct audio_stream fields

Add read and write accessors for .underrun_permitted and
.overrun_permitted fields of struct audio_stream and convert the code
base to use them.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",52,59,1
"thesofproject/sof","167e62df0d99749f2943ecf83bb55105e9af11fc","lyakh","2022-08-11 15:32:50","false","mixin-mixout: fix a firmware exception

find_mixout_source_info() can return NULL, always check return value
before dereferencing.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",116,50,1
"thesofproject/sof","5204a29e2f55bb6fbf3725d975a7cc2be3b519bb","lyakh","2020-11-03 12:37:28","false","dai: add a missing header

dai.h defines types with fields of type struct list_item so it must
include list.h.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",75,29,0
"thesofproject/sof","5957916faaf52edaf06a2919f29a6e443f068a8e","btian1","2023-05-16 04:05:13","false","copier: rename ipcgtw.c and move it to copier folder

ipcgtw only used in copier, so move it to copier folder and rename
it to copier_ipcgtw.c

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",51,59,1
"thesofproject/sof","41c5fbb1a651bf3d1a11401fa25933a112629c86","btian1","2023-03-02 02:00:28","false","copier: Add gateway flag as preparation for copier optimization

The IPC gateway copier from the host copier both have the same comp type
SOF_COMP_HOST. So add a new flag to distinguish between the two and set
it in create_ipcgtw(). This will be used in the follow ups patches
to isolate the optimization for the host copier only.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",61,57,1
"thesofproject/sof","470b703eeed779d1f2ae6e55862142a5b308c8f5","lrgirdwo","2023-02-21 22:27:08","false","component: module name: stringify module name to be unique

Some modules have multiple types and init()s, support this with
unique names per type.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",55,57,1
"thesofproject/sof","244d30769b410e08a3fcaaabcc202a1fd9bb4ce0","lrgirdwo","2018-09-28 19:55:49","false","sue: platform: Add platform init for Sue Creek

Sue creek has no SRAM windows.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",37,4,0
"thesofproject/sof","f73319019bef783d1ec34c737b31c1de54be1a8f","lrgirdwo","2020-04-20 10:31:11","false","zephyr: add README with integration instructions

Some initial information to help developers.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",87,23,0
"thesofproject/sof","5b321dd57d4925cd39d0c70503899cc7cca73f28","lrgirdwo","2018-09-28 15:15:03","false","sue: Add support for Suecreek platform

Suecreek is Intel S1000 SoC audio DSP. Host connection is via SPI.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",37,4,0
"thesofproject/sof","c35e1aa674bbf4cf998005dd0df09acef66575a9","dbaluta","2020-02-20 15:02:13","false","host: Fix compilation error with verbose traces enabled

src/audio/host.c: In function 'host_dma_cb':
src/audio/host.c:210:46: error: initialization of
'unsigned int' from 'const struct comp_driver *' makes integer from
pointer without a cast [-Werror=int-conversion]
  comp_cl_dbg(&comp_host, ""host_dma_cb() %p"", &comp_host);

This happens because our tracing system is limited to integer types
for parameters.

Fixes: a87b9085058492 (""trace: component: use err,info,dbg macros"")
Suggested-by: Paul Olaru <paul.olaru@nxp.com>
Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",83,21,0
"thesofproject/sof","c3b4382c4b4a62c28e576b97221a56e9bf66575d","dbaluta","2021-03-02 16:31:58","false","codec_adapter: cadence: Fix init process function

Init process function searches for valid header, does header
decoding to get the parameters and initializes state and configuration
structures.

In order for this to work we need to set the input bytes and also
update consumed bytes.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",73,33,0
"thesofproject/sof","008285ea0354256896e3bf1e662d481ec96e140d","tlauda","2019-08-22 15:22:22","false","idc: add support for sending messages to master core

Adds support for sending idc messages from slave cores
to master core. Previously only master core could send
messages.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",55,15,0
"thesofproject/sof","2a1f2c7efd20a6641bc94e5fb9416eff19a1053a","keyonjie","2021-07-26 11:07:39","false","alloc: trace error when allocation failed with no condition

No matter if CONFIG_DEBUG_HEAP selected or not, we need to print out
error message when allocation failed. Furthermore, dump the whold heap
usage in case under heap debugging or allocation failure.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",100,38,0
"thesofproject/sof","6fad35625fafee5a06926c6896fa5013e6509e3c","softwarecki","2023-02-27 13:57:12","false","rimage: Removed hash context from image structure

Fields related to hash computing have been removed from the image
structure. Removed openssl headers from rimage.h, which made it necessary
to add some missing includes in several files.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",58,57,1
"thesofproject/sof","a65d3a8de516e4a9744270f6f253ace428edf7f8","kv2019i","2022-08-03 12:13:50","false","probe: support Zephyr logging subsystem

Register logging module for probe.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",110,50,1
"thesofproject/sof","f6d83ba5104ec9ae81a96bed4f305b126d6244e8","RanderWang","2022-03-28 08:23:58","false","ipc4: skip component in the incomplete pipeline

Fix a error found by ipc4 Linux driver. Some component
pipeline may be incomplete, so the pipeline is not
updated to the component. Skip this pipeline and
return dai of null.

Signed-off-by: Rander Wang <rander.wang@intel.com>",112,46,1
"thesofproject/sof","734a5bfe70dc9a30ba0d5318958d9b19786f0b04","xiulipan","2018-09-06 07:23:39","false","wait: add check for waiti

waiti can only work with interrupt level 0, check if the level is 0 and
set SOF_IPC_PANIC_WFI panic.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",31,3,0
"thesofproject/sof","ebb71643b2d5d6ad540278a86e16426318e2b384","kuanhsuncheng","2021-09-29 01:36:48","false","timer: mtk: fix cppcheck bug in mt8195 timer

cppcheck bug :
Redundant initialization for 'lowtimeout'
Because lowtimeout is overwritten in line 68.
'lowtimeout = ticks_set;'

Directlt remove hitimeout and lowtimeout.

Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",121,40,0
"thesofproject/sof","73934f39c87d8a146973d5084165f5d9c0c10dff","abonislawski","2020-03-24 16:36:20","false","probe: safe check for heavy size configurations

Probe data buffer is big enough for most use cases but
not sufficient in rare situations with many probe points
and heave size configurations like 48000Hz32b32b8ch
In such cases this patch will check remaining buffer size
and trigger additional probe_task run if needed.

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",64,22,0
"thesofproject/sof","8818e50b6a2d21905133e9e4e79e5b5885d12442","RanderWang","2022-10-31 08:41:09","false","topology2: hda: share deep buffer conf setting

Deep buffer is mixed with HDA analog.

Signed-off-by: Rander Wang <rander.wang@intel.com>",91,53,1
"thesofproject/sof","c73ec9f981d5f7b4ac0d3a2f3d39847234df6096","lyakh","2021-04-20 12:55:40","false","zephyr: add a build script

Add a script to build Zephyr with the SOF main branch.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",88,35,0
"thesofproject/sof","9e9aeadd7fe4b140bb1bdd97737c9e144570d15d","lyakh","2020-10-06 09:19:35","false","compile: fix reporting compiler version when built with gcc

Properly retrieve gcc version values and unify the optimisation flag
with Zephyr to always include a '-' in the string. Before this patch
the kernel reports the firmware, built with gcc as

Firmware info: used compiler XCC 12:0:8 xtensa-cnl-elf used optimization flags O2

With this patch it reports

Firmware info: used compiler GCC 8:1:0 xtensa-cnl-elf used optimization flags -O2

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",67,28,0
"thesofproject/sof","1c0598071ea031bba13ec70431988740096a9869","lyakh","2023-01-24 15:21:45","false","smart-amp: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register smart-amp with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","91a5e63d4757333e7c16f398f59b2c79828117f4","lyakh","2021-06-22 14:48:54","false","zephyr: ll-domain: update .next_tick on each timer interrupt

.next_tick has to be initialised at domain registration and updated
on each scheduling domain event.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",74,37,0
"thesofproject/sof","2417f0bc6df9820526b78f0cc036a97d554838d4","lyakh","2023-02-20 16:03:23","false","mixin-mixout: fix frames-to-produce calculation

When calculating the number of frames to produce, ignore inactive and
empty inputs. On the one hand an inactive empty input shouldn't block
producing data from active or non-empty inputs. OTOH if an inactive
input has pending data, it should be used instead of letting the data
stall.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,57,1
"thesofproject/sof","832830aa13f8423f27c0317519aaf18c5088fdc9","lyakh","2023-09-08 13:23:44","false","IDC: fix message cache handling

When an IDC message is received from another core, the receiver core
doesn't have any useful data for it in cache. Writing back the cache
can corrupt the message data. Cache has to be invalidated instead.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",20,63,1
"thesofproject/sof","1dc6a2836dff13115ac30a150c1616c0a91806e6","lyakh","2023-06-29 15:49:37","false","lib-manager: clean up memory allocations and cache handling.

Update the memory allocation and cache handling.
Allocate comp_driver and comp_driver_info as uncached to
align with other drivers.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",38,61,1
"thesofproject/sof","97e0d50f5f0c9e661f3d9d21c6a026d6b1dd1341","johnylin76","2020-12-01 10:49:11","false","tools: testbench: Add Multiband DRC component test

Signed-off-by: Pin-chih Lin <johnylin@google.com>",75,30,0
"thesofproject/sof","67d09d61c8860ca4f336c5bcf7c2e201e2cc3ac3","ktrzcinx","2020-05-13 12:09:18","false","ext_man: Move extended manifest generator out of kernel folder

Generator is part of rimage tool and there is any reference to them
in kernel source code, so it should be moved out of kernel folder.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",96,23,0
"thesofproject/sof","3d60d936ce7c687e8bf7c2df060e645f2129f4ef","ktrzcinx","2019-11-05 11:33:58","false","kconfig: add supported data format menu in Kconfig

It will be used to make footprint smaller by selective
compilation of supported data format in components

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",53,17,0
"thesofproject/sof","a942f10731b1a72101a6ac4be74de5a33d5c7acd","kv2019i","2023-02-20 18:40:27","false","west.yml: upgrade Zephyr to 0c0d73721ed

Includes patches to dai-zephyr.c to adapt to DMA interface
change for DW/HDDMA drivers.

Total of 1168 commits, including following related to
intel_adsp/sparse/dmic/xtensa:

8f5bcb2e76c3 intel_adsp: ace: fix linker script for xcc-clang compiler
18ce85c20130 tests: intel_adsp: ssp: fix dma data sizes
60a20471b561 intel_adsp: ace: enable interrupts for secondary core
6045eed2f361 intel_adsp: ace: enable core power gating
e1dbc2efef50 intel_adsp: ace: add core power off step
a99b073392fc intel_adsp: ace: d3 exit update
156c7cd21759 intel_adsp: bbzero/bmemcpy with picolibc fix
60196ca1126a cmake: sparse: deprecate old sparse support
91902c5fd4db cmake: add sparse support to the new SCA infrastructure
a684714d5c82 soc: intel_adsp: Correct HDA parameter docstrings
db495a5ebee3 xtensa: stop execution under simulator for double exception
8ff88346955b xtensa: sparse: fix address space mismatch
7965fd2b4a8a samples/boards/intel_adsp: Make sample work with twister
422250d3b183 mm: intel_adsp_mtl_tlb: suppress sparse address space warnings
618a478ded70 xtensa: fix sparse warning when converting to uncache pointer
8b391dc43841 drivers: audio: dmic_nrfx_pdm: Fix a race condition in the driver
8794de2934f7 intel_adsp: soc: ace: Add communication widget driver
a9b3d935500c intel_adsp: dai: Add support for ALH up to 16 nodes
837432506269 drivers: dai: intel: dmic: don't use assert for error handling

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",57,57,1
"thesofproject/sof","224b04b2504eb184adcd762dc5fbce6fd50d0b31","tlauda","2020-01-07 10:44:54","false","dma-trace: use pointer from sof context

Uses dma_trace_data pointer from sof context instead
of using the static one. In order to do this we need
additional getter.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",71,19,0
"thesofproject/sof","ce53ba16613c9bc7a4710454f36a629b87869f8b","tlauda","2018-07-06 10:23:21","false","arch: free core specific structs

Implements free methods for idc, irq_task and schedule_data,
so the slave cores can free memory on shutdown.
Saves system heap, which cannot be deallotaced.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",11,1,0
"thesofproject/sof","02c655ca5e1e7bfe6155dec9f552fe5e6a85e26e","tlauda","2019-02-01 15:43:43","false","dw-dma: align lli to 32 bytes

Aligns linked list items to 32 bytes to not cross
cache line in case of having more than two items.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",59,8,0
"thesofproject/sof","5f1980361191a28cd35483e040a48b2d49ed7aad","tlauda","2019-10-28 07:30:31","false","component: use frame_bytes and sample_bytes functions

Uses newly added frame_bytes and sample_bytes methods in its
own component based functions.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",68,17,0
"thesofproject/sof","823e57a1b256677dc3fefafb7248d6077ce30f7d","dabekjakub","2019-09-10 15:47:21","false","memory: adjust memory sizes for heaps

Adjust memory sizes for heaps to provide
enough memory for alignment in buffer heap.

Signed-off-by: Jakub Dabek <jakub.dabek@intel.com>",60,15,0
"thesofproject/sof","4ccf228b54cc4e6b3f9e41415d81c445697e3a54","gongjun-song","2022-11-28 07:11:24","false","src: change some functions to fit the module adapter

Due to add module adapter feature, some functions needs to be
changed to fit it.

Signed-off-by: Gongjun Song <gongjun.song@intel.com>",99,54,1
"thesofproject/sof","e716675736df84d9d8e530cce6a5d1474b30f9d2","softwarecki","2022-05-12 10:33:59","false","dai: Don't reference to a dma channel after put

In the dai_free function, dma channel device data was cleared after calling
to dma_channel_put. This patch changes the order of the instructions so,
we don't reference a released channel.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",111,47,1
"thesofproject/sof","7367fdf1e6133ca36a38eb7ddbf7d2a85565e358","softwarecki","2023-03-29 16:21:23","false","manifest_module: rename fw_size to output_size

Changed the name of the fw_size variable to a more clear one and added
a description.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",58,58,1
"thesofproject/sof","c0a27ec46a3ae20da849285923874a4378b5e093","RanderWang","2021-11-03 07:11:18","false","ipc4: skip component in different pipelines

Only Set hw params for single pipeline.

Signed-off-by: Rander Wang <rander.wang@intel.com>",125,41,1
"thesofproject/sof","a01fcc2f52c172c83356728da540bbb06ccd4026","marc-hb","2023-10-20 19:14:16","false","rimage/toml_utils.c: stop ignoring errors in parse_uuid()

assert() that sscanf returns the expected value.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",12,65,1
"thesofproject/sof","1319163ea2c6d8bea6fd7189dea6275ac5e34bf5","abonislawski","2023-03-03 09:39:29","false","ipc4: fix NULL dereference

This will fix NULL dereference in ipc4_process_chain_dma()

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",59,57,1
"thesofproject/sof","0c4120e73b0813f5a7c25bcf6b8cec61a89a2fe3","akloniex","2019-01-07 10:15:42","false","debugability: Add pipeline and component IDs to dai logs.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",51,7,0
"thesofproject/sof","a0b5dec5a05cbf7802769ef879c7eebe294de686","ranj063","2023-05-06 19:36:21","false","copier: Set state first during params()

It is OK to set the comp state to prepare before calling
dai_zephyr_config_prepare() as it only checks if the state is ACTIVE
before processing.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",53,59,1
"thesofproject/sof","fc3e4b32b956821f18c90dc10d9cc67c123648fc","ranj063","2022-01-14 03:03:09","false","codec_adapter: fix panic during reset

If module_prepare() fails, the pipeline will be reset resulting in
module_reset() getting invoked. Just return if the state is <
MODULE_IDLE which indicates that the module was never prepared.
Also, in this case, local_buff is never allocated. So, check if it is
NULL before zeroing it out to avoid DSP panic.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",117,43,1
"thesofproject/sof","0c517d4af7af50420c73c3c98988b99a22508f77","ranj063","2021-12-12 05:38:18","false","topology2: copier: remove stale comment

All known DAI types added already.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",120,42,1
"thesofproject/sof","ec577bcc33dcc2bfc5374370aa12c4d3f65329d8","mrajwa","2019-10-30 14:59:25","false","kpb: check if draining speed should be controlled

This patch checks if draining should be controlled
in terms of speed. Such condition may be necessary
if host buffer is smaller than KPB's history buffer.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",59,17,0
"thesofproject/sof","fcc3a7b4485ec93c29c8b602613ad61b45299170","mrajwa","2019-04-09 10:41:53","false","KPB: rework of copy function

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",47,10,0
"thesofproject/sof","95485f05b5c0a0f686a34932cbb0f29e1a983b04","lyakh","2022-08-12 08:56:28","false","buffer: pass locked buffers to notification recipients

SOF probes use notifiers to be informed when buffer fill state
changes. These notifiers are always called synchronously on the same
core. We use that fact to pass locked buffers to probes.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",116,50,1
"thesofproject/sof","18d77eb7585c15de299b43e262d2ce381fc24043","RanderWang","2022-04-19 02:56:33","false","ipc4: add format conversion of 24LE to 32LE

This conversion is required by 24LE test in CI

Signed-off-by: Rander Wang <rander.wang@intel.com>",115,46,1
"thesofproject/sof","5894ed4cc5266f2ca859b1a59c2c82848c2f0713","lgirdwood","2018-11-13 14:36:45","true","Merge pull request #126 from bkokoszx/logger-verbose-warnings

logger: added Werror and Wall and removed warnings",38,5,0
"thesofproject/sof","0652cb186dc6c9d26f2326bb19b6c66cd7ce8cea","mrajwa","2019-07-17 15:27:23","false","handler: rework ipc_cmd to return only once and log last request

This patch edit ipc_cmd (main ipc dispatcher) to return only at
the end of the function. This simplifies debugging a lot.
Along with that change additional log has been added at the
end of the function to show what was the the last request
and its return value.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",46,14,0
"thesofproject/sof","49d432dded021a2c87644beb95734e11602594a3","RDharageswari","2020-08-13 01:18:17","false","sof-ctl: Add support for read-only, write-only and read-write kcontrol

This patch checks for the access type of kcontrol and returns error
only when the access type is not read or write.

Signed-off-by: Dharageswari R <dharageswari.r@intel.com>",73,26,0
"thesofproject/sof","04d0a165b8d4f523628c64fdc39920c1e57e9cae","mrajwa","2019-07-25 14:41:52","false","detector: rework detection algorithm to support 24 bit samples

This patch modifies the dection algortihm to support
24 bit samples.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,14,0
"thesofproject/sof","cc5eabb3499d0b661140d7fb1d5e63c188909c95","finikorg","2020-04-15 12:29:53","false","Fix compiler errors

Fixes following error when compiling code:
...
src/elf.c: In function ‘elf_find_section’:
src/elf.c:469:20: error: initialization discards ‘const’ qualifier
           from pointer target type [-Werror=discarded-qualifiers]
  469 |  Elf32_Ehdr *hdr = &module->hdr;
      |                    ^
cc1: all warnings being treated as errors
...

Signed-off-by: Andrei Emeltchenko <andrei.emeltchenko@intel.com>",82,22,0
"thesofproject/sof","0f3d84ecea58c72d3de5ed4e7dc5ef27555556cf","ktrzcinx","2020-03-19 10:51:20","false","tools: logger: Align indentation in convert function

Content inside if statement should be indented with only one
tab more that if keyword.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",68,21,0
"thesofproject/sof","26bfbfd699947a2751ed9c4df78293f441b3b0b5","lgirdwood","2018-10-26 15:14:31","true","Revert ""hda: set correct link dma channel""",29,5,0
"thesofproject/sof","24aef1419a2aefb6f25d4eef2f19c5d24af12a99","lgirdwood","2018-07-03 14:31:55","true","Merge pull request #44 from tlauda/topic/idc_send_msg

idc: refactor arch_idc_send_msg method",7,1,0
"thesofproject/sof","98794eef79a1c3b5affd8e2351d38471a675be8d","keyonjie","2019-06-27 08:05:52","false","sof-ctl: add function to get file size

This will be used on large input file scenario, we need to allocate
buffer according to the input file size.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",46,13,0
"thesofproject/sof","e2bb2602e1fedac075415a42e1f797a73ab1d519","brentlu","2021-11-22 01:14:35","false","pipe-demux-eq-iir-playback: support eq coef customization

Topology file could use PIPELINE_FILTER1 macro to include a m4 file
with eq coefficient. If macro is not defined, eq_iir_coef_bandsplit.m4
will be included.

Signed-off-by: Brent Lu <brent.lu@intel.com>",129,42,1
"thesofproject/sof","83fba37ed7d56aee21b035ca67f44188fc5decfd","keyonjie","2020-11-19 09:39:11","false","ssp: do bclk request/release at pre_start and post_stop

To reduce the power consumption, we should request the clock source for
bclk only when SSP is active. This means we need to postpone the clock
request from ssp_set_config() to ssp_pre_start() and release it at
ssp_post_stop().

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",74,30,0
"thesofproject/sof","4e6f23c309d38c85811abe16461d56c80dc9e47e","ktrzcinx","2020-01-13 12:21:48","false","buffer: Remove unused alloc_size

This variable is unused in whole project.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",77,19,0
"thesofproject/sof","f52a078aadf19457275db5748a2b2a542bc7bf4e","keyonjie","2021-07-02 09:39:01","false","config: icl: change image_size to the real SRAM size

We have 47 bank HP and 1 bank LP SRAM on ICL, change to toml config file
to reflect that.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",85,37,0
"thesofproject/sof","3da039e56c2b893e87c4c99b9b3c069a440dea7c","pblaszko","2023-03-06 12:09:39","false","volume: move set_volume to separate function

Move LargeConfigSet:IPC4_VOLUME handling to separate function.

Signed-off-by: Przemyslaw Blaszkowski <przemyslaw.blaszkowski@intel.com>",56,57,1
"thesofproject/sof","f21a25abe543cfe77d4716feb6b4b35e8b1eca61","ranj063","2021-11-02 19:56:09","false","topology2: Add class definition for EQIIR

Add the class definition for EQIIR widget.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",125,41,1
"thesofproject/sof","e62855935de5efb57ea85d7af3466ce118fd91b4","abonislawski","2021-09-21 06:02:26","false","lps: restore secondary cores on wake up

This will add missing secondary cores restore on wake up,
simple pm_runtime_get(PM_RUNTIME_DSP, PLATFORM_PRIMARY_CORE_ID)
in lps is not enough in multicore scenario

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",118,40,0
"thesofproject/sof","e5455775b04120e4f2df9283b96fe06d44939b7f","ranj063","2023-05-16 22:43:41","false","topology2: copier: Remove host gateway type support

It is now handled by the host-copier class. Renaming the copier class to
dai-copier and modifying its naming convention will be done in the
follow up patches.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",52,59,1
"thesofproject/sof","3d9b6ffd2922958d85cc29389d20e2b77e59df8e","ranj063","2022-02-15 19:54:46","false","topology2: cavs: remove deep buffer pipeline

Remove deep buffer pipeline until the driver code to ready to handle it.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",106,44,1
"thesofproject/sof","d5aa222e5d1da10e3122e4a624aa467b8c440936","ujfalusi","2022-03-25 13:02:58","false","ipc4: helper: Remove unused sink_cfg from ipc4_create_buffer()

Compilation fails with gcc:

src/ipc/ipc4/helper.c: In function 'ipc4_create_buffer':
src/ipc/ipc4/helper.c:210:41: error: variable 'sink_cfg' set but not used [-Werror=unused-but-set-variable]
  210 |  struct ipc4_base_module_cfg *src_cfg, *sink_cfg;
      |                                         ^~~~~~~~
cc1: all warnings being treated as errors
make[2]: *** [CMakeFiles/sof.dir/build.make:394: CMakeFiles/sof.dir/src/ipc/ipc4/helper.c.o] Error 1
make[1]: *** [CMakeFiles/Makefile2:2042: CMakeFiles/sof.dir/all] Error 2
make: *** [Makefile:136: all] Error 2

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",111,46,1
"thesofproject/sof","02041297acf2a6a2490255938f01bf34d5edfffb","plbossart","2021-09-10 23:57:55","false","topology: sof-hda-generic: prepare addition of deep-buffer support

Just move of definitions, no functionality change

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",117,39,0
"thesofproject/sof","7a10da097ccb5c8c17ac2dbccbb8c6ff43bda552","lrgirdwo","2020-08-21 12:44:47","false","cmake: set git hash to 8 digit

GIT_LOG_HASH can be more than 8 digits. Limit hash value up to
first 8 digits.

fixes: #3322

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",75,27,0
"thesofproject/sof","e9dfeab7af7c788009f4cb1658120e388a2799bb","johnylin76","2022-12-08 04:35:34","false","memory: intel: increase task stack size for specific modules

Larger stack context stack size is required for RTNR and
GOOGLE_RTC_AUDIO integration on Intel platforms.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",101,54,1
"thesofproject/sof","805e57b28fec26b0ba1ec5c8617e079c640d01b0","marc-hb","2022-01-13 19:11:57","false","xtensa-build-zephyr: include DEFAULT_PLATFORMS in SUPPORTED_PLATFORMS

Include DEFAULT_PLATFORMS in SUPPORTED_PLATFORMS instead of the other
way round. SUPPORTED_PLATFORMS will always be bigger than
DEFAULT_PLATFORMS and it's easier to add a platform than remove one.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,43,1
"thesofproject/sof","b29242a2ad874227e54c8850c76dadbeaf4a3043","marc-hb","2022-08-05 10:08:28","false","xtensa-build-zephyr.py: -p ristine deletes STAGING_DIR

Make the new -p pristine build option also delete the staging_dir. This
solves a problem where the following sequence was leaving a stale
platform1 build in staging:

xtensa-build-zephyr.py -p platform1
   < code >
xtensa-build-zephyr.py -p platform2

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",116,50,1
"thesofproject/sof","20550681049d22f03ec5ed1aa715faff165e9058","dbaluta","2022-02-25 18:28:22","false","audio_buffer: Allow NULL to be passed to buffer_free

This will allow users to pass NULL to buffer_free.

This fixes codec_adapter_free crash, where mod->local_buff is only
allocated when the module is prepared.

With dynamic pipelines we could have the situation where the pipeline
is created then SOF device enters suspend and pipeline is destroyed.

Thus we try to free unallocated mod->local_buf. Fix this by allowing
buffer_free to live free when receiving a NULL pointer.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",111,45,1
"thesofproject/sof","f5441a1cf7d14f0be14b1fadb8e0b55b05b3ef83","dbaluta","2020-11-23 13:47:03","false","ipc: dai: Align sof_ipc_dai_sai_params with kernel

We add fsync_rate, bclk_rate because now we
actually need them.

Also, notice that mclk_rate was moved near the other rates
fields.

I think this was broken from the beginning but didn't
show up as a bug because SAI is used in consumer mode
and the clock is provided by the codec.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",75,30,0
"thesofproject/sof","87e4f5aad80c22a1e82fa2bf78133640e39b8741","dbaluta","2020-08-17 14:09:29","false","host: Fix first period not being copied to/from host

After commit 048145fe6006f8 (""pipeline: remove code related to preload"")
buffers are no longer preloaded so we don't need to manually
update first period transfer.

Taking playback as an example, without this patch first period bytes
weren't copied downstream to DAIs removing typically first 0.1 seconds
from the input file.

With PCM streams this is not really noticeable. Anyhow, this becomes
a problem with compressed streams where we need every byte for
decompression.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",76,27,0
"thesofproject/sof","0c3f8e29c5d81a572856e3957aa1006bdd648833","lrgirdwo","2020-10-26 11:24:23","false","user: manifest: add macros for SHA385 modulus length

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",74,29,0
"thesofproject/sof","83a992eb495b018a4a35df01c80a00ff3d34080f","marc-hb","2021-09-24 01:07:01","false","installer: add new tarball target

To help with the release process, see
https://github.com/thesofproject/sof-bin/commit/d908e5edeb5

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",118,40,0
"thesofproject/sof","3d7344f4a2956ce0c416d26b9523bcc639629f62","cujomalainey","2023-07-13 23:49:08","false","audio: igo: remove unneeded header path include

The headers are under the main include directory

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",32,61,1
"thesofproject/sof","56c29b45e4f88e2c4cb873dec2d3cefbcf253829","singalsu","2020-08-07 11:25:28","false","Audio: ASRC: Reformat header file comments with longer lines

The 80 characters split lines were hard to read. This change
improves readability error codes enums.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",78,26,0
"thesofproject/sof","978827f7fc72ec78591ac56949ac0b306c6dcf75","singalsu","2022-07-26 11:34:42","false","[SKIP CI] Tools: Tune: SRC: Add to coefficients data Doxygen cond comments

This patch updates the SRC tool to export same guidance for
Doxygen as added by a previous patch for coefficients
header files. The added comments to begin and end are:

/** \cond GENERATED_BY_TOOLS_TUNE_SRC */
/** \endcond */

The impacted headers remain identical so they don't need update.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",111,50,1
"thesofproject/sof","102793970ae0df51c38bdf30d1d052f45e61d8be","gongjun-song","2021-09-14 11:55:02","false","topology1: Add sof-adl-rt1316-l12-rt714-l0

Support SKU 0AF3 product. The audio hardware configuration is two
rt1316s on link1 and link2, and rt714 on link0.

Signed-off-by: Gongjun Song <gongjun.song@intel.com>",117,39,0
"thesofproject/sof","4d2e9b1edfd52aa4f7fde4f6b6fbfbce331838cf","dbaluta","2023-08-28 15:01:57","false","Audio: MFCC: Fix compilation error

/home/bamboo/sof_dir/sof/src/audio/mfcc/mfcc_hifi4.c: In function
‘mfcc_source_copy_s16’:
/home/bamboo/sof_dir/sof/src/audio/mfcc/mfcc_hifi4.c:86: warning:
assignment from incompatible pointer type
/home/bamboo/sof_dir/sof/src/audio/mfcc/mfcc_hifi4.c: In function
‘mfcc_fill_prev_samples’:
/home/bamboo/sof_dir/sof/src/audio/mfcc/mfcc_hifi4.c:119: warning:
assignment from incompatible pointer type

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",25,63,1
"thesofproject/sof","b16d5bf662a6b53805772582c0104175d7dee274","iuliana-prodan","2023-08-16 15:44:26","false","topology: imx: Combine mixer of compress and PCM topology files for i.MX8MP and i.MX8

Combine topology files for i.MX8MP and i.MX8 using different
variables like SAI_INDEX and CODEC.

Based on CODEC use the proper STREAM_NAME.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",24,62,1
"thesofproject/sof","ffbac0ca6bb1e006807665aea5d02f1498e17ddf","lyakh","2023-04-26 13:15:21","false","buffer: add accessors for setting some struct audio_stream fields

Multiple fields in struct audio_stream are only set in the
audio_stream.h header itself, which is valid, and in rtnr.c. Add
accessors to replace the latter operations.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",51,59,1
"thesofproject/sof","f6f9b62d5a17a416d203ae531ae652ae131837c2","bardliao","2022-08-30 07:46:56","false","topology2: add ssp multi stream capture

Add ssp multi stream capture support.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",114,51,1
"thesofproject/sof","66495136ccb283e2247b67cd7be214b7ddd8fe61","jajanusz","2019-05-15 12:07:17","false","xtensa: coredump: fix stackoffset

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",66,11,0
"thesofproject/sof","4a6eea6c9a208cbac53f71dc7c8e960a999fbcb1","plbossart","2020-07-29 20:02:05","false","topology: bytcht: reduce deep-buffer to 5ms

Somehow a 10ms buffer for the deep-buffer pipe generates write errors
on the kernel side with S24 and S32_LE.

Reducing the memory footprint seems to fix the problem.

This may hide a more fundamental problem with either scheduling or
memory allocation, but for now let's solve CI and daily tests.

BugLink: https://github.com/thesofproject/sof/issues/3171
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",80,26,0
"thesofproject/sof","d3b7e54f3f68fd694fa38d037d7c84bdf5d58fe0","singalsu","2023-10-03 12:33:49","false","Tools: Tune: dcblock: Create set of cut-off frequencies

This patch modifies script example_dblock.m to create in
addition to existing default coefficients blob with parameter
R=0.98 a set of blobs those provide (-3 dB) cut-off frequencies
20, 30, 40, 50, 100, 200 Hz for 16 kHz and 48 kHz for various
usages. Human understandable parameters for blobs helps to select
the configuration for the needed dcblock usage.

The parameter value R for given frequencies is calculated
with iterative function dcblock_rval_calculate(). A closed
form equation might be possible to derive from the transfer
function. If such is found this function can be replaced with
quicker equation -- or with more advanced faster converging
iteration.

The topology blob export functions are also modified to add
comment line for exact build command.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",16,64,1
"thesofproject/sof","b262aa2cd214a05c590f16e77ef95eab3f513b36","singalsu","2019-05-08 16:12:13","false","Volume: Use comp_get_copy_limits() to calculate frames to process

This patch removes from copy() function the code that was converted
into a generic utility function into component library. The simple
processing components with single source and sink buffers can use
the function to find out the number of frames to process, get
pointers for their source and sink buffers, and amount of bytes
consumed and produced for buffer update after the processing is
done.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",58,11,0
"thesofproject/sof","4e06d57767859544f6a5010534f1e52b7ab69d27","singalsu","2018-07-26 15:42:28","false","DMIC: Fix mistake in comment and add check for supported word lengths

This patch fixes the mistake in uapi/ipc.h text comments that falsely
claims that 24 bit data is supported. The supported PCM formats are
16 and 32 bits only. A check is added to DMIC set config function
to return error if anything else is requested.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",12,2,0
"thesofproject/sof","01fd742605985351cfb4a8e50356764ec4e1fd01","jxstelter","2022-09-23 13:17:03","false","lnl:  Add LNL configuration file

Add base LNL config derived from MTL.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",97,52,1
"thesofproject/sof","bd45d922773eb8f873df004cb6497d7751e37c62","cujomalainey","2021-06-04 20:32:44","false","CODEOWNERS: add owners for hotword wrapper

also fixup some indentation that was done with spaces instead of tabs

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",75,36,0
"thesofproject/sof","b8e097b0152958ccc626bf9d4e03e31f76b7629a","tlauda","2018-06-04 11:03:37","false","ipc: remove duplicated sof_ipc_chmap from sof_ipc_pcm_params

We don't need duplicated sof_ipc_chmap.
This change also requires change in kernel.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",1,0,0
"thesofproject/sof","8fb48600071e3af4645ded2aa12245b5e2198681","saisurya-ch","2023-07-12 07:29:26","false","west.yml: Update rimage revision to 48777207

Pull in following rimage changes:

48777207f5fd (HEAD) config: add vangogh toml file to support vangogh build
089157d4617f Config: Add Aria module to tgl-cavs.toml and tgl-h-cavs.toml

Signed-off-by: SaiSurya Ch <saisurya.chakkaveeravenkatanaga@amd.com>",31,61,1
"thesofproject/sof","77eb159653a9e4996595f42ecf180c7da638b675","tlauda","2020-01-22 09:14:49","false","library: add missing memory macros

Adds missing memory macros to host build.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",78,20,0
"thesofproject/sof","5bf33d86161bd7d6197b948fe4b608a0eff2df31","tlauda","2020-04-21 11:01:14","false","agent: share agent across cores

Shares system agent across different DSP cores.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",84,23,0
"thesofproject/sof","d16addfe99cda562bb2c18126ef930722b0d3ea8","tlauda","2018-10-11 13:25:16","false","notifier: support for multicore notifications

Adds support for multicore notifications:
- IDC that needs to be sent to slave cores.
- Flag which tells notifier, which cores should be notified.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",33,4,0
"thesofproject/sof","43a75f4b405b6d922b2a42cebe2101398d3e3084","libinyang","2018-11-16 14:29:32","false","host: emit error trace log when host stop fails

Emit the trace log instead of returning error when host fails to stop.

Signed-off-by: Libin Yang <libin.yang@intel.com>",40,5,0
"thesofproject/sof","03f265680b94ee915beb7f0c3822125ff9389543","libinyang","2019-10-31 06:57:15","false","topology: add ehl_rt5660 topology

Add ehl_rt5660 topology with RT5660 headset, DMIC and 4 HDMI.

Signed-off-by: Libin Yang <libin.yang@linux.intel.com>",59,17,0
"thesofproject/sof","5e200efdeea6928d13af6ff027393d8c09173d73","btian1","2023-05-17 02:52:57","false","ipcgtw: rename ipcgtw exposed functions

Rename and align ipcgtw exposed function name that exposed to copier.
Add static to the functions that only used inside copier_ipcgtw.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",52,59,1
"thesofproject/sof","0fea6d0050a45fdd8dcee34db85646876fe62861","pjdobrowolski","2022-08-30 13:28:58","false","library manager: register loadable library

Adding for ipc4_get_comp_drv check if module is loadable
and for active library manager functionality register it dynamically.

Signed-off-by: Stelter, Jaroslaw <jaroslaw.stelter@intel.com>
Signed-off-by: Dobrowolski, PawelX <pawelx.dobrowolski@intel.com>",113,51,1
"thesofproject/sof","13f74da9791375d2f590e5083be661f57b874864","jajanusz","2019-01-30 06:53:06","false","rimage: use time_t for localtime

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",56,8,0
"thesofproject/sof","07d45e4b9a15da38a8fc2ef073d99c7709eedd2f","keyonjie","2021-01-20 03:01:38","false","pipeline: use id for component/pipeline comparison

Switch to use component id and pipeline id for comparison, to avoid
getting wrong results when using different pointers point to the same
component/pipeline.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",69,32,0
"thesofproject/sof","5abd8a9ea5727cc1b7d3534e302cb48b18d6470b","brentlu","2021-06-08 09:55:05","false","topology: sof-glk-cs42l42: using 2.4MHz bclk

By changing bclk to 2.4MHz, we can use XTAL as clock source and reduce
power consumption.

Signed-off-by: Brent Lu <brent.lu@intel.com>",79,36,0
"thesofproject/sof","44a2c70c53d3598fd1632d581d3e36be5bc989ec","slawblauciak","2018-12-04 14:48:50","false","dma: optional hardware pointer traces

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",41,6,0
"thesofproject/sof","a1a458efc5de1e617a52cd12fb049f6b62506e43","libinyang","2022-05-18 11:35:43","false","topology2: add kpb support

Add the kpb component support. kpb component is used to transfer
the data to the proper pipeline based on the WOV component events.

Signed-off-by: Libin Yang <libin.yang@intel.com>",114,47,1
"thesofproject/sof","fb834b68c1d20d23a6bbeddae826cf077403e780","cujomalainey","2021-09-21 23:51:26","false","dmic: conditionally include variables

conditionally used variables should be conditionally compiled in

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",117,40,0
"thesofproject/sof","4281ba32af2e19db5a11d576fb26c6c35ff3ed0d","cujomalainey","2021-02-16 23:11:56","false","intel: dmic: remove unused struct

cppcheck complaint

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",74,32,0
"thesofproject/sof","3560320ca3d411e720858326455c99ff121bb391","cujomalainey","2018-11-16 23:11:58","false","Update sof-cht-max98090 graph

Update to properly reflect code

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",40,5,0
"thesofproject/sof","b104f70c3da706bbd76797aaa17ae84940fc1178","jxstelter","2022-10-05 16:22:27","false","iadk_modules: lib_manager: Enable loadable modules on MTL

This patch will enable lib_manager and iadk_modules support for
MTL platform.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",98,52,1
"thesofproject/sof","99d7152a11936ef3a1f81f58c0427509801cfbce","ktrzcinx","2020-06-22 14:31:21","false","dai: Log number of frames in copy function

It easier to compare number of copied frames between dai and
process components than copied bytes.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",72,25,0
"thesofproject/sof","c9393021947bed4f8ccfd5d78c9caf1c5361e690","ktrzcinx","2020-05-12 13:02:48","false","trace: Pass trace context to logging function

UUID key is too detailed information for logging function to allow
easy functionality extension in future. Trace context structure is
designed to work directly with logging function, so there is no
reason to unpack values from this struct in trace macro-functions
and pass them as separate arguments to trace_log().

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",95,23,0
"thesofproject/sof","a264e77011ef0926d262756cb4ee97662ffbd9b3","ktrzcinx","2020-04-28 06:17:38","false","pcm_converter: Normalize floats value during conversion

Respect fixed point data format as Q1.X instead of QX.
After change values in float will be in range <-1;1)
what will correspnd to fixed point data MAX/MIN value
in Q1.X format.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",94,23,0
"thesofproject/sof","cad15f040501c0305d455c0c97cb26da6bae6df5","ktrzcinx","2020-09-22 12:25:57","false","rimage: Use only standard error codes

Error codes like ENOKEY and EBADE are not provide for all windows
toolchains, so to limit possible build errors, some more standard
error codes should be used.
Detailed error message is printed in stderr, so end user still
will be well informed about error root cause.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",66,28,0
"thesofproject/sof","88990a62efc4eb7a1250cd4cc5f5e9304145e99f","andrula-song","2023-04-21 09:25:12","false","Audio_stream: Add default byte and frame alignment set in init function

Set byte_align as 1 and frame_align as 1 means no limit on both byte and
frame for this stream. Call audio_stream_init_alignment_constants in
audio_stream_init, set default align info while buffer created. And every
specific component can set its own byte and frame align info in its
prepare function later.

Signed-off-by: Andrula Song <andrula.song@intel.com>",53,59,1
"thesofproject/sof","dcb185a78c994119e9b65563ac99665cecab2de3","bkokoszx","2020-06-19 13:15:12","false","comp: return 0 in data size 0 case in comp_set_model

In comp_set_model() function, when required size is equal to 0,
we should not allocate memory and just return 0.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",78,25,0
"thesofproject/sof","54dd8ecf193732879f54786d88a0fe5cc89e02a3","kv2019i","2023-08-21 16:51:36","false","arch: xtensa: remove tigerlake platform option

Remove Intel Tiger Lake from available XTOS platforms in arch/xtensa.
Now done in sof/zephyr/CMakeLists.txt instead.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",24,63,1
"thesofproject/sof","a81496f3a1635e2092bcd3e561e9a208303c2d91","bkokoszx","2019-12-02 11:45:15","false","mixer: fetch frame bytes from sink buffer

Fetches frame bytes from sink buffer (sink buffer params
are set in pipeline_set_params() before mixer_params()).

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",67,18,0
"thesofproject/sof","de408a23491f48f0ee67d754f792e0b623bf94e8","kv2019i","2021-10-18 12:17:41","false","zephyr: trigger system panic if MEM_ZONE_SYS alloc fails

As per documentation in include/sof/lib/alloc.h, rmalloc from
MEM_ZONE_SYS will always succeed. In the unlikely case the alloc
fails, trigger a system panic in rmalloc().

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",122,41,1
"thesofproject/sof","e7fe7fc669398d8f8114b1e68cf7416a38bb526a","tlauda","2019-06-11 14:52:38","false","component: split comp_set_period_bytes method

Splits comp_set_period_bytes method to two separate
functions: comp_frame_fmt and comp_period_bytes.
Setting these two parameters in one function wasn't
intuitive nor atomic enough. Also setting value typed
variables through reference isn't pretty.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",49,12,0
"thesofproject/sof","95f66f917294557c28eb154f16c33d7327b2991b","tlauda","2018-10-03 12:44:22","false","work: new calculation of next tick

Changes method of calculation next work queue tick.
Instead of taking actual time of last tick, lets use
time of requested tick. From my experiments, it can
take up to ~40 cycles from requested time
of interrupt until interrupt handler is executed.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",34,4,0
"thesofproject/sof","5dca048ed6732269b5a79196a328bce36a05954f","tlauda","2019-10-10 08:47:01","false","schedule: remove SOF_SCHEDULE_FLAG_SYNC/ASYNC flags

Removes SOF_SCHEDULE_FLAG_SYNC and SOF_SCHEDULE_FLAG_ASYNC.
They are no longer used nor needed.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",63,16,0
"thesofproject/sof","77f94b8ce566b9498f377f635f943bcba243084e","tlauda","2019-07-11 14:04:07","false","gdb: move xtensa specific defines to arch

Moves xtensa specific defines from generic code
to xtensa arch.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",42,13,0
"thesofproject/sof","ab4a608198dc163390729a44dd65b633c237b90f","singalsu","2020-05-11 15:55:48","false","Audio: Move FIR core to math library

This patch enables FIR filter core usage independently from FIR
equalizer component. The inline of FIR core is removed to reduce
the code size when FIR is used from several components. Each
component also typically used inline FIR version for each supported
PCM format that increased further the size.

Most of the changes are due to rename and directory move of some FIR
data structures and macros. The code functionality is not changed.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",96,23,0
"thesofproject/sof","1799531a4d081c6508d182c2cc8f8b8d458027cc","marcinszkudlinski","2023-05-15 21:36:05","false","stream: move all stream runtime parameters to a structure

All stream parameters are now available as a single
structure

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",52,59,1
"thesofproject/sof","1bcfcfd69288ce355fc22edd42749813f940b116","RanderWang","2022-02-11 02:31:22","false","ipc4: volume: convert ipc4 format to ipc3 one accurately

ipc4 volume need to be clamped into correct range, or
real volume will be different with target volume and
result to unexpected ramp operation with fw panic.

Implement two functions to do conversion between ipc4
and ipc3 since they will be used by more functions.

Signed-off-by: Rander Wang <rander.wang@intel.com>",108,44,1
"thesofproject/sof","018684072f20188da93f95f0c4ff65fb953e7d0f","lyakh","2019-01-24 10:17:17","false","alloc: try all buffer heaps

Currently the allocator only considers the first suitable heap for
buffer allocations. If it is full, no attempt is made to allocate
buffers from other heaps. This doesn't usually cause problems, because
on all platforms the first buffer heap is the largest and the following
buffer heaps are smaller and specialised (HP and LP). Still it is better
to try all heaps. This patch implements such an approach.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,8,0
"thesofproject/sof","9b507ecc82d9d9db1b8d4c72809de4fc8c05d77d","lyakh","2023-02-09 14:45:35","false","config: set cached and uncached aliases for affected platforms

Set cached and uncached address aliases for all Intel ADSP platforms,
supported by Zephyr.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,56,1
"thesofproject/sof","a219b970864110fb93aadbd6b379aa9b31b452d1","lyakh","2020-11-19 09:31:41","false","debug: move dump_stack() to panic.c

dump_stack() is only used in panic.c, move it there.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",74,30,0
"thesofproject/sof","12f647b7531d9d420ca60063e2eb77ce24bae2ec","lyakh","2023-01-25 13:16:34","false","rtnr: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register rtnr with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","db66ae457bda678bb632f0361de5ce49f041aec5","singalsu","2022-11-07 17:50:05","false","Tools: Test: Add to SRC test control for quick test and make plots

This patch helps to avoid editing the script to change the test
behavior. The full_test set to 0 performs a quick test with chirp
(default 1).  The option show_plots set to 1 (default 0) shows
the plot graps from each test step those help to understand the
test verdict.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",93,53,1
"thesofproject/sof","b37a2f3d21029f44eb5b158a36773c024d2b29d3","lyakh","2022-02-03 16:30:18","false","TGL: enable CONFIG_INCOHERENT correctly

Kconfig options with no description cannot be selected from
defconfig. They can only be selected from other Kconfig options.
This means, that CONFIG_INCOHERENT doesn't get selected on TGL. Move
it to Kconfig to fix this.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",106,44,1
"thesofproject/sof","b3e059992294c24b1d67e8a5b8e9c12f3753205e","lyakh","2022-08-03 07:00:57","false","keyphrase: fix buffer acquisition in detection test

test_keyword_params() must acquire and release the source buffer
appropriately for access.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",110,50,1
"thesofproject/sof","3606629f7e992c65cdd836cd800523a4e8893964","marc-hb","2020-05-13 23:46:53","false","scripts/build-tools.sh: let user override NO_PROCESSORS

When there's a failure like for instance SOF issue #2543, fixed in
alsa-utils commit caf77a93cef5 (""topology: add back asrc to widget_map
in dapm.c""), it's finally possible to remove all the noise around the
failure and see the failed command:

   NO_PROCESSORS=1 VEBOSE=1 ./scripts/build-tools.sh

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",96,23,0
"thesofproject/sof","880fca28f263a2737d94ff945af39000b2aecee8","dbaluta","2020-04-05 18:08:58","false","drivers: imx: sdma: Fix SDMA scripts load addresses

MCU2SHP means processor to peripheral that is memory to device.
SHP2MCU means peripheral to processor that is device to memory.

There was a confusion in the initial patch, fix this now to
have the correct load addresses.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",80,22,0
"thesofproject/sof","190cfd79f77e3575b73e1dcf8ffeae923e74785e","plbossart","2022-08-04 09:27:06","false","topology1: add SSP1 for all ES8336, SSP5 for APL/GLK

We apparently missed quite a few platforms with SSP1, and SSP5 is also
needed for APL/GLK.

One day we'll have a better way to add topologies, but so far it's
brute-force combinatorial addition. Oh well.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",111,50,1
"thesofproject/sof","4495357f1e8533a4d90013e6866173edad689d23","marc-hb","2023-10-19 23:12:41","false","topology2/cmake: extract new function ""alsatplg_version()"" for re-use

We'll use this new function to require ALSA 1.2.5 and finally rename to
""codec_consumer"" (see revert discussion #5192)

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",12,65,1
"thesofproject/sof","11592fed5b6985995ac324c912ab8e7e98907238","marc-hb","2023-04-27 23:19:05","false","version.cmake: switch SOF_MAJOR etc. to a new, static `versions.json`

As discussed in #6952, relying on `git describe` for defining SOF_MAJOR
and friends is very brittle and unreliable. Switch to a static
versions.json file instead.

Note the full `git describe --tags` output is _still_ present in the
binary, this is useful and left unchanged. It's just not used any more
to guess SOF_MAJOR, SOF_MINOR and SOF_MICRO.

Use JSON because CMake and pretty much every other piece of software has
a JSON parser out of the box.

This aligns with linux/Makefile, Zephyr/VERSIONS and probably many
others. - except we use JSON because we're in 2023 so we don't spend
time having fun re-implementing parsers any more.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",52,59,1
"thesofproject/sof","3f24c05ab2763aa9b1ea567b7ca330dd4fbbc419","marc-hb","2023-05-05 23:56:18","false",".gitmodules: add comments about relative URL. No change.

Answering a question from @ceolin and others before him.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",53,59,1
"thesofproject/sof","4ab225b5a7c730e5a78e4538624d3953dd83ac6f","pblaszko","2022-11-04 12:25:36","false","init: check dma domain ptr before use

Check DMA domain pointer before calling scheduler_init_ll().
DMA domain is currently not initialized for MTL platform, but
there may be need to use in the future.
Without this check, secondary core crash on NULL pointer.

Signed-off-by: Przemyslaw Blaszkowski <przemyslaw.blaszkowski@intel.com>",90,53,1
"thesofproject/sof","37f27092be040403483b42431ee36f5b4b8da60e","marc-hb","2023-02-24 00:08:19","false","xtensa-build-platforms.py: build_rimage() only once at start

This will be required when signing is transferred to `west build`, see
https://github.com/zephyrproject-rtos/zephyr/pull/54700

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",56,57,1
"thesofproject/sof","5e17731290baacacf5d8efba2e14a42cb5870536","marc-hb","2021-09-29 23:11:23","false",".github: run new test-repro-build.sh

... in Github Actions.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",121,40,0
"thesofproject/sof","2981a6f22c23624e15a5e5efb3d19cca12c044f6","zhuyingjiang","2019-01-14 07:46:08","false","add topology file for Cometlake with rt5682

add the topology file for Cometlake with codec rt5682, a
analog codec with SSP1, and DMIC, HDMIs

Signed-off-by: Zhu Yingjiang <yingjiang.zhu@linux.intel.com>",55,7,0
"thesofproject/sof","ae211e1f31dc376e49ed2f672e6ceaef8ee80a29","akloniex","2020-03-11 11:32:44","false","probe: Properly send response code for custom responses.

Status (error) code in custom Probe responses is now reported properly.

Signed-off-by: Artur Kloniecki <arturx.kloniecki@linux.intel.com>",81,21,0
"thesofproject/sof","057b48daa95b5a47cc13f6b5b1087012e290c235","akloniex","2019-08-23 22:39:32","false","dma: Simplify DMA interface using dma_chan_data structure as handle.

Change dma_ops interface to accept dma_chan_data pointer, instead of
separate dma pointer and channel index, in order to simplify client code.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",54,15,0
"thesofproject/sof","c47f3dbc0395d0de02c700314949b0693cb3e922","jajanusz","2019-03-19 13:08:53","false","cmake: fix unit tests for ninja

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",64,9,0
"thesofproject/sof","9fb2097e52dfbdb8d61e12e1d395a1d22c46083e","jajanusz","2019-02-03 02:19:25","false","cmake: tools: install targets

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",58,8,0
"thesofproject/sof","913919ae54338f139458d2a34a7f3251a2e240ed","jajanusz","2020-09-03 11:21:47","false","cpu: rename master core to primary

Change name of slave core to secondary core in order to
make terminology in SOF more inclusive.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",70,27,0
"thesofproject/sof","dcd72a5d9d3aed7a2521cbfb460202803e52c49e","jajanusz","2019-10-10 11:58:05","false","tigerlake: shim: clock control registers

Add registers for requesting clocks.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",61,16,0
"thesofproject/sof","fe1c63b528ab31e69f79db82551d2e72e01fa4da","lrgirdwo","2018-11-02 22:00:52","false","ci: travis: Update travis to use new xtensa-buildall.sh args

Updated args on xtensa-buildall.sh.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",37,5,0
"thesofproject/sof","6847abad748582bc8bad74c82e82088e1e905aa1","lrgirdwo","2018-11-24 15:33:59","false","rimage: make sure cavs1.5 manifest uses correct file offsets.

cavs1.5 manifest file structure and offsets are different than cavs
version 1.8

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",40,6,0
"thesofproject/sof","2abbfc0910ce9767d01462638d719309746844d1","plbossart","2018-07-13 18:28:28","true","Merge pull request #28 from plbossart/debug/pcm512x

topology: fix sof-apl-pcm512x",16,1,0
"thesofproject/sof","971cdea4fb25359222898c773ac7737db37602e6","lrgirdwo","2021-04-21 14:10:38","false","ipc: common: remove unused headers and type declarations.

Not needed here so remove.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",90,35,0
"thesofproject/sof","4e436f8570be513a44d504ee9d12747937ab8361","lrgirdwo","2021-04-03 13:35:14","false","ipc: split out ipc functions into separate files.

Split out some IPC functions to separate files so that IPC layer
can support more MAJOR ABI versions. Rename handler.c to align with
the IPC MAJOR it supports.

No code changes. One static function became public.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",79,34,0
"thesofproject/sof","4af91f2c04f51d8618cdf0dd506dcb71e7a214d5","lrgirdwo","2021-08-16 15:43:34","false","library: testbench: Add LL scheduler emulation

Add LL scheduler emulation for testbench pipelines. Each core is
implemented as a thread.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",117,38,0
"thesofproject/sof","305223a1f68db1d0f2c23aac9189fd2295942147","lrgirdwo","2021-06-26 12:34:06","false","testbench: free components and pipeline after test results.

Move the comp free to after the results and free the pipeline.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",75,37,0
"thesofproject/sof","a5635e001122c5d7a31bef086c6be8bfb1dc733a","plbossart","2022-10-31 21:37:23","false","topology1: add missing ES8336 topologies for ICL

This needs to be added in sof-bin.

Link: https://github.com/thesofproject/linux/issues/3873
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",91,53,1
"thesofproject/sof","55054afe84cb5f9f9d5d6a4d805a586f9d65373e","lgirdwood","2018-10-10 09:20:40","true","Merge pull request #464 from singalsu/fix_bug_in_new_1k_alloc_buffers

Memory: Fix bug in previous commit that introduced 1k buffers",32,4,0
"thesofproject/sof","e66596e4189864b374c2a6b69fe99f988559d00a","lgirdwood","2018-09-29 19:49:51","true","Merge pull request #84 from RanderWang/hda-fix

hda: add virtual widgets to kill error message in kernel log",37,4,0
"thesofproject/sof","f63adb42d93521b0bb25c670fd457122857badef","singalsu","2020-06-30 11:16:33","false","Audio: ASRC: Get consumed and produced frame counts from filter core

This patch changes the parameter input_num_frames to in/out type
for push mode 16 and 32 bit processing functions. If the processing
core needs to stop due to insufficient number of frames free in the
output buffer the amount of frames can be less than requested. The if
statement for exit from while() loop is simplified. Also the if
statement tests order for ASRC_BM_CIRCULAR is changed.

The changes for pull mode 16 and 32 bit mode are similar. The parameter
out_num_frames is changed to in/out since the frames count could be less
than requested if there is no sufficient amount of input frames
available.

The upper level 16 and 32 bit copy() functions are updated to use the
returned value for SOF buffers consumed/produced.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",72,25,0
"thesofproject/sof","c855cffb35d76ab732c620e92a82fd780d5b1f9a","keyonjie","2021-04-26 03:40:44","false","ll_schedule: domain tasks/cores refinement

Refinement to make the domain tasks/cores management more clear:

a. update the total_num_tasks and num_cores in the helper pair
domain_register/unregister().

b. update the enabled[core] and enabled_cores in the helper pair
domain_enable/disable().

c. for the completed task, do the domain client/task update in the new
created helper schedule_ll_task_done().

d. cleanup and remove the tasks/cores management from the ll_schedule
helpers schedule_ll_clients_enable(), schedule_ll_tasks_run(),
schedule_ll_domain_set() and schedule_ll_domain_clear().

Without those refinement, the num_clients was not used correctly,
we used it for both num_registered_cores and num_enabled_cores, with
that we observed that it may be changed to '-1' when component/pipeline
is asked for running on a slave core.

This reverts changes in 'commit b500999477ca (""scheduler: guard against
subdivision underflow on domain clear"")' as it is not needed anymore.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",88,35,0
"thesofproject/sof","56b0f61eafae3176ce34e1f792c40d3cf73279fa","slawblauciak","2021-05-28 10:44:03","false","update klocwork submodule

Commit: 5aeb95b19bba15801fef4ee37760a6e776d3bd1a

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",83,36,0
"thesofproject/sof","a3a1a44fcaabac736d893ceac418a8ba8b3232bc","lgirdwood","2018-11-27 14:24:19","true","Merge pull request #635 from RanderWang/link-topology

topology: whl: refine topology for hda on whl",43,6,0
"thesofproject/sof","933fce3c88e8c90c360c4359035463084f033144","lgirdwood","2018-09-28 07:23:50","true","Merge pull request #79 from bardliao/apl_rvp

topology: initial topology file for APL RVP",36,4,0
"thesofproject/sof","9be072fd7acc8849a7303a406589aa69de763b03","mrajwa","2021-09-14 07:25:36","false","rimage: remove -x option

This patch removes the unnecessary and unscalable -x option.
This option aims to add an offset to the .data section of
its parent .module section. This is horrible idea because this
offset will vary depend on the compiler used. It is better and
much easier to just store only the .data section so the offset
is always 0.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",117,39,0
"thesofproject/sof","82fcef457d7450ace03221366ab995f235efcd6c","lgirdwood","2022-01-21 12:01:42","false","Revert ""codec_adapter: cadence: Do not free codec data during reset""

This reverts commit a60df96c7dcd1e6f9fe47d8b13c72c2389867ca3.",114,44,1
"thesofproject/sof","177b61457f8184fcec86f30b272bcfc5b08e7f7d","btian1","2022-09-29 13:20:47","false","performance: perf cnt bugfix for profiling

Current hw cycle is based on 38400000, and perf cnt module did not consider
the clock wrap case, i.e the later cycle maybe small than the previous one.
so add code to handle this situation.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",98,52,1
"thesofproject/sof","71418367e780f34568bef70deee3d2bc49b979ff","softwarecki","2023-09-18 13:10:11","false","smex: elf: Added checking of value returned by file operation function

Added checking of the value returned by fseek function and added memory
release when an error is detected.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",20,64,1
"thesofproject/sof","57f186193affba86d1777e71e0243082fcab9a9c","singalsu","2018-08-03 11:46:08","false","EQ FIR: HiFi3 optimized version

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",16,2,0
"thesofproject/sof","f8934a9e2264dd7c68051e85b982a3807f7401b2","andrula-song","2022-03-23 05:53:32","false","audio: dcblock: fix mistakes of sink stream pointer

to fix the mistakes of using audio_stream_read_frag*
while geeting output sink buffer pointer.

Signed-off-by: Andrula Song <xiaoyuan.song@intel.com>",108,46,1
"thesofproject/sof","809e3d0ebdc20c0cbf000f40d2fc84ce0c8ada3e","aiChaoSONG","2022-09-06 02:42:20","false","zephyr: deprecate zephyr.h and use kernel.h header

The zephyr header zephyr.h should be only used with
CONFIG_LEGACY_INCLUDE_PATH, which is deprecate by both
Zephyr and SOF.

The latest zephyr main will complain if zephyr.h is
used but CONFIG_LEGACY_INCLUDE_PATH disabled.

This patch deprecates zephyr.h and uses kernel.h instead,
so that we don't break with latest zephyr.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",107,51,1
"thesofproject/sof","3e260cc8de71cfb770c1fc1cda68645eda6ee3ee","aiChaoSONG","2021-09-27 06:01:54","false",".github: zephyr: upgrade zephyr SDK for APL

The upstream zephyr adds new SDK requirement for APL,
upgrade zephyr SDK version to 0.13.1 for APL build.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",119,40,0
"thesofproject/sof","064285e19c4cbdc7e2453ffdaad4d2497c543120","singalsu","2020-12-21 16:35:11","false","Tools: Tune: Center the beamformer impulse responses

This patch improves the beamformer performance (vs. tap count) by
shifting the extract window location for IFFT output by mean of
all impulse responses center. Previously the first filter was centered
and other filters were more towards start or end of impulse response.
The change helps to cope with smaller filter length with larger size
arrays with steer angles those spread the impulse response further
away time-wise from each other.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",72,31,0
"thesofproject/sof","5b8c62290839064df0870de92627e94ebab65141","makarukp","2023-02-09 08:40:11","false","dai: fix xrun handling

dai copy should continue with flow if status returns xrun warning

Signed-off-by: Piotr Makaruk <piotr.makaruk@intel.com>",54,56,1
"thesofproject/sof","d25f775108aa0c762fb07e911dab209cd56409a4","ranj063","2022-11-15 23:51:39","false","topology2: sof-ace-tplg: Build sof-hda-generic-2ch topology

This will be needed for MTL.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",95,53,1
"thesofproject/sof","6517743873c13e4c63f443e2159dd2a358fd3287","ranj063","2022-11-06 22:24:14","false","lib: dma: return NULL when DMA init fails

Return NULL when dma_init() fails.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",90,53,1
"thesofproject/sof","2fd648efac7dbfb59d3e1300ae5de628812e2190","afq984","2022-05-03 05:32:34","false","mux: Use a fixed size for mux_stream_data

sizeof(struct mux_stream_data) was PLATFORM_MAX_CHANNELS-dependent.
In particular, if PLATFORM_MAX_CHANNELS < 8 the struct becomes
smaller. However in m4/muxdemux.m4, there is no easy way to supply
ROUTE_MATRIX with a smaller matrix other than 8x8 bits.

This commit pads struct mux_stream_data so it always has the a
platform-independent size: as if PLATFORM_MAX_CHANNELS were 8.

Signed-off-by: Li-Yu Yu <aaronyu@google.com>",115,47,1
"thesofproject/sof","e8b67b5bc5510d57570846caf696ce48d8d3996f","xiulipan","2019-10-30 04:36:46","false","rimage: add support for jsl

JSL should have almost same config as ICL, but they should
have different fw name.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",64,17,0
"thesofproject/sof","d6b05caf5b179ab9238c8c5327ade06739063325","xiulipan","2019-11-14 10:57:11","false","build: add xcc defconfig for byt cht and sue

bay cht and sue xcc build has bigger size, need to use -Os to reduce size.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",57,17,0
"thesofproject/sof","882ef66c681297b4ef8ebc9140588cbf26580dcc","xiulipan","2021-01-28 07:36:32","false","cavs: pm: fix wrong usage of poll_for_register_delay

In current kernel logs the CTX_SAVE IPC will always take more than 10ms,
but before 0b2876b2794 it only need less than 1ms. This patch fix the
wrong usage of always timeout for poll_for_register_delay.

IPC_DIPCIDR_MSG_MASK is the mask for msg from BIT 0 to 30 while
we want to check if BIT 31 is 0. now change the MASK and VAL to correct
values to make the poll and delay will return when there is no DSP sent
IPC.

fixes commit 0b2876b2794c (""cavs: pm: poll for IPC_DIPCIDR_BUSY to be
clear before powerdown hpsram"")

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",66,32,0
"thesofproject/sof","9462baf8d435fc00cee1b0436db3f67c7112ab01","marc-hb","2022-09-21 21:45:16","false","xtensa-build-zephyr.py: remove misleading -i IPC3 option

`./xtensa-build-zephyr.py -i IPC3 mtl` builds the MTL default: IPC4.
This is wrong, remove the misleading ""IPC3"" option which never did
anything at all.

Fix the --help string to describe what actually happens. This is a build
script, no need for fancy abstractions and indirections that don't even
match reality. Just tell it like it is.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",96,52,1
"thesofproject/sof","3ff1dc02776b96bd7d3638dc4f87d248ccaf3548","marc-hb","2021-09-14 04:57:10","false","alloc.c: fix DEBUG_TRACE_PTR() not to trace before trace is initialized

As reported in #4759, #4636 and a few others linked from there.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,39,0
"thesofproject/sof","c038d628048bae44040a0f86be17f101c0037570","marc-hb","2021-09-21 20:37:47","false","README.md: add warning that forks must be created using Github

Otherwise the SHA1 is not found and the rest of the process fails.

Problem discovered in
https://github.com/thesofproject/sof/pull/4790#discussion_r713326709

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,40,0
"thesofproject/sof","0497212dcab1b838ad57a625e5842dce088f7a1f","marc-hb","2022-10-18 03:58:06","false","xtensa-build-zephyr.py: sort glob(**/*) list used for tree display

`pathlib.glob()` (and filesystems in general) provide no ordering
guarantee, which is likely why every glob() example in
https://docs.python.org/3/library/pathlib.html#pathlib.Path.glob
is sorted(). Follow these examples and use `sorted()`.

Fix error handling to run _before_ the `list index out of range`
exception hits. Also make it fatal now because there's no more any good
reason for this to fail.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",101,53,1
"thesofproject/sof","9823983a0ff037e5d9c8c1ee91ec806fa7ac87d2","ujfalusi","2021-10-06 13:03:54","false","dma-trace: Allow DMA re-configuration

The host will receive an error if it tries to re-configure the dtrace:

[    22736132.117381] (          28.645832) c0 hda-dma            ..../intel/hda/hda-dma.c:489  ERROR hda-dmac: 4 no free channel 0
[    22736147.377797] (          15.260416) c0 dma-copy                 src/ipc/dma-copy.c:163  ERROR dma_copy_set_stream_tag(): dc->chan is NULL
[    22736180.346545] (          32.968750) c0 ipc                  src/ipc/ipc3/handler.c:805  ERROR ipc: failed to enable trace -22

Since we try to request an already used channel. If we skip the requesting
then we will fail with the configuration:

[    31707957.542122] (          27.447916) c0 dma-copy                 src/ipc/dma-copy.c:162  ERROR dma_copy_set_stream_tag(): already have chan for stream_tag 1
[    31708021.917120] (          64.375000) c0 hda-dma            ..../intel/hda/hda-dma.c:539  ERROR hda-dmac: 4 channel 0 busy. dgcs 0x800000 status 5
[    31708056.083785] (          34.166664) c0 ipc                  src/ipc/ipc3/handler.c:805  ERROR ipc: failed to enable trace -16

To support the reconfiguration:
if we have DMA channel for dtrace, stop it to allow the reconfiguration.
In the unlikely case when the stream_id has changed, release the channel
as well and request a new one.

Tested with the SOF client kernel by rmmod and modprobe the dtrace client
during active audio playback to prevent the DSP to be turned off.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",121,40,1
"thesofproject/sof","034c54a16a6536352dc85914517a49fd7ca8f0fd","lbetlej","2020-03-02 17:02:49","false","cavs: clk: add Kconfig option to select default ro clock

The change allows to select at a configuration time default clock for
cavs 2.x platforms (Icelake, Jasperlake, Tigerlake) on top of already
enabled support for cavs 1.8. By default the LP clock is set (120 MHz
- platform dependent). In case of workloads that require HP clock
(400 MHz) system integrator shall select the right clock as a part of
FW configuration process.

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",78,21,0
"thesofproject/sof","e0d8078fa748a51959b2042e50c1a24be5fa7dc0","singalsu","2022-11-09 15:53:37","false","Tools: Testbench: Avoid need linux kernel headers in build

This patch adds simplified linux/types.h into testbench headers
to enable include of ALSA asoc.h to build without other difficult
kernel headers content.

The CMakeLists.txt files are updated to make a build time copy of
asoc.h to subdirectory include of the build directories. The new
directory is added to headers path.

This change avoids build fail with xcc toolchain that can't use the
gcc toolchain headers from the system where the ALSA headers are
located.

Suggested-by: Marc Herbert <marc.herbert@intel.com>
Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",92,53,1
"thesofproject/sof","a47524a2b26578fc5746e508b5b1e9e01fc91d4f","singalsu","2018-08-30 13:32:02","false","SRC test: Fix testbench execute command line plus cleanup

This patch fixes the command line sample rate parameters passing
into host testbench (-r & -R).

In my computer at least the print command of non-visible plots stopped
working into error so I disabled the print commant that creates PNG
graphics files. It's OK since the purpose of this script is batch testing.
The visible plot files can be enabled from SRC test script to see plots
if need for deep dive.

The patch includes also fix for text output for ""help src_test"". The
input and output word lengths were missing from sample command.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",29,3,0
"thesofproject/sof","1e5e7edb26904f70fea1e07905584507b53f4824","singalsu","2023-10-19 13:05:48","false","Tools: Topology2: Add sof-hda-benchmark topologies for MTL

The create of component benchmark topologies is moved to
other included file from CMakeLists.txt.

The adding of new components with custom parameters for
multiple formats and platforms is simplified with nested
foreach loops. The previous topologies for TGL are now
built also for MTL.

Due to use of ""IN ZIP_LISTS"" with foreach, cmake requirement
is bumped to 3.17 for topology2.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",12,65,1
"thesofproject/sof","90828e230590bec791e8baf78df157f8914f0dcc","marcinszkudlinski","2023-06-09 10:43:48","false","buffer: external modules use API to access buffer_fmt

As no internals of audio_stream nor comp_buffer should be
accessible directly, move all calls to buffer_fmt to API
In addition, to let sink/source interface working,
move the parameter to audio_stream structure

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",48,60,1
"thesofproject/sof","1240cf03ff55f889ec05d5fac0bc9361ad9f564d","singalsu","2023-05-08 14:57:42","false","Audio: Module adapter: Pass entire new() IPC to SRC

This patch differentiates SRC component from normal processing
component IPC. The corrected size allows the client component to
receive all of init() IPC.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",53,59,1
"thesofproject/sof","dccae1c5b24b5d47a41122a49dcffaa8f3eeab2b","singalsu","2022-11-29 15:51:54","false","Tools: Test: Audio: Reduce testing verbosity in test measure scripts

These prints are normally not useful and slow down test with a
lot of scrolled text output.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",102,54,1
"thesofproject/sof","31e67a227cb3a8c3b5c8976c9a24e085a6d73aa4","singalsu","2019-05-10 14:43:00","false","Testbench: Update SRC tests criteria for lower 16 bit quality data

The tests created lot of unnecessary fails when testing with S16_LE
format. The test pass criteria for THD+N, DR is relaxed for tests
with 16 bit data.

Since the gain of SRC conversions was lowered to -1 dB the test
case for gain need to be updated. The gain is retrieved from
src_param() function. An exception is added for FS1 == FS2 case
when data is passed through. In that case expected gain is 0 dB.

The frequency response measurement grid does not necessarily cover
the exact upper frequency of pass-band. Therefore the min. upper
passband frequency is scaled by 0.99. This avoids measurement
technique related fails in test.

The chirp spectra test case was updated to use for RMS level criteria
for testing the level of signal. The peak level was less robust and
caused unnecessary test fails.

The option to not open plot windows during test is set. It improves
speed of test and avoids display clutter.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",58,11,0
"thesofproject/sof","9a08028a768a86bc882f8cf20bddf61138e46bea","bkokoszx","2021-01-29 17:09:48","false","timer_domain: set last_tick to ticks_req in order to avoid drift

In the case of scheduling irregularities the drift may accumulate in the
scheduling reference value. By ensuring we always refer to the previous
requested time the drift can be prevented.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>
Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",67,32,0
"thesofproject/sof","83cd8d8c5ccbb6c05c53327e67f7994be6ae9467","balakishorepati","2021-07-07 14:29:49","false","dai: support for amd specific dai id's

Add AMD supported dai's for usecases.

Signed-off-by: Basavaraj Hiregoudar <basavaraj.hiregoudar@amd.com>
Signed-off-by: Anup Kulkarni <anup.kulkarni@amd.com>
Signed-off-by: balapati <balakishore.pati@amd.com>",88,37,0
"thesofproject/sof","7dd11a96c6de41fc16b1cd653720099ba60d0e5a","singalsu","2020-02-11 12:29:01","false","Topology: Remove ASRC DMIC capture demo topology

The DMIC capture is added to APL ASRC PCM512x topology so this
topology can be removed.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",79,20,0
"thesofproject/sof","671e63507737d52ce11e0a1b032e295a36e71005","RanderWang","2021-11-30 05:48:13","false","ipc4: refine buffer size

Audio driver only create single buffer but SOF requires
double buffer. Since obs should be equal to ibs, buffer
size will be set to obs * 2.

Signed-off-by: Rander Wang <rander.wang@intel.com>",131,42,1
"thesofproject/sof","ea10065a58446a0273d78030294035769cf7ccbe","RanderWang","2023-07-17 08:58:25","false","ipc4: add S24_4LE_MSB format support

For sample format with 24 bits valid sample bit and 32 bits container,
valid sample is at msb 24bits if IPC4_TYPE_MSB_INTEGER is set.

Signed-off-by: Rander Wang <rander.wang@intel.com>",32,62,1
"thesofproject/sof","60ac9b714f2b7e28ca9084c270d4be3dadf20e55","ranj063","2022-10-22 02:03:09","false","pipeline-graph: remove assert in pipeline_new()

Log the memcpy_s() failure and return NULL so that the IPC won't time
out.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",97,53,1
"thesofproject/sof","6ef7ebf89a5c6f7290e1ef0b073a4d37416a0ecb","ranj063","2021-10-26 03:38:14","false","host: use buffer acquire/release API

instead of buffer_lock/unlock() which will be deprecated.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",127,41,1
"thesofproject/sof","a0ed3e4ba90a7aab0dac9abf24124fc796865e74","dbaluta","2021-02-26 12:05:34","false","tools: topology: Fix runtime controlbytes name

This was a copy paste error in the initial commit.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",76,33,0
"thesofproject/sof","da9a5ebe24304627daa003c6b84b88608f4db0dd","dbaluta","2021-04-13 17:17:43","false","codec_adapter: Replace hardcoded codec api ids

Replace hardcoded codec api ids with meaningful enum names.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",81,34,0
"thesofproject/sof","9f7d1bacdbb8584f16f560f0c73308600ad924a1","johnylin76","2022-09-22 13:46:23","false","config: overwrite config for enabling WAVES and GOOGLE_AEC

Creates tigerlake_chrome_waves_google_aec.config

Signed-off-by: Pin-chih Lin <johnylin@google.com>",97,52,1
"thesofproject/sof","541e070eecc8e7ba7a43c15b2e4baf6d18fca8b2","johnylin76","2021-08-12 07:15:18","false","multiband_drc: Add switch control for enabling DRC

Add mixer type control switch for enabling/disabling DRC.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",118,38,0
"thesofproject/sof","21375d45a2c89f10330cdf96adc6fc6aa7c96f29","jajanusz","2019-07-22 13:23:45","false","test: mux calc_sample_s32le

Unit tests for calc_sample_s32le with up to 8 channels.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",47,14,0
"thesofproject/sof","a84ccfe0a079e25e44312e1e10ee55f97e68f04e","mrajwa","2018-11-27 12:36:41","false","GDB: Initial commit - added debug vector and init code.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",43,6,0
"thesofproject/sof","11b9ce23f7700cd238b18d650f28aa934d545fc8","ujfalusi","2023-07-31 08:20:42","false","lib-manager: Free up memory for the library in case of a store error

If lib_manager_store_data() fails to read the rest of the library we need
to free up the allocated memory.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",32,62,1
"thesofproject/sof","0ca1ddcf804d91a091e7562a26f253c900c1096c","singalsu","2022-12-20 16:52:35","false","Test: Cmocka: Convert mux to module adapter

This patch converts the demux_copy, mux_copy, and
mux_get_processing_function tests to module adapter API.
The main change is in component new preparations with
UUID reference.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",90,55,1
"thesofproject/sof","0feff0b3e430b9f4ae5062e516f7b774c5043490","singalsu","2022-04-04 16:38:41","false","Tools: Test: Topology: Set DAI buffer periods to 3 for SRC tests

Test pipelines with SRC due internal block processing constraints need
this to avoid fail due to insufficient buffer. Other pipelines continue
to use 2 buffer periods.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",110,46,1
"thesofproject/sof","4230375781b53348ccf7fe1da1f2aeb1faa6b7a9","singalsu","2020-03-03 08:42:44","false","Rename sample_bytes() and frame_bytes() to avoid variables shadowing

The two functions in sof/audio/format.h are renamed to more descriptive
get_sample_bytes() and get_frame_bytes() to avoid potentially same
name variables to shadow the inline functions defined in the header.

The shadowing happened in component ASRC. The DAI component and another
header audio_stream.h uses these functions and needed minor edits.

Reported-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>
Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",79,21,0
"thesofproject/sof","99a65fc7d72ff8e67b39895bc8b657c1de7a467a","bardliao","2022-12-13 02:34:29","false","topology2: cavs-sdw: fix DEEP_BUFFER_PIPELINE_SINK

mixout-gain-dai-copier-playback.2 pipeline id has been changed to 1.
Need to change mixout.2.1 to mixout.1.1 as well.

Fixes: f0a010052bd0 (""topology2: cavs-sdw: group route and pipeline index"")
Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",97,54,1
"thesofproject/sof","5452ac5695383cf937429de9ca6cce3f325a5ada","bardliao","2020-03-31 12:06:41","false","Topology: Add ALH config

We need to config ALH rate and channels.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",68,22,0
"thesofproject/sof","df92cced22ef6f9e5f28f277e76aa5dfe810c30e","xiulipan","2019-01-14 07:56:08","false","gitignore: update gitignore for the build result

Add more strict rule for the build result binaries.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",56,7,0
"thesofproject/sof","75ba94b1e345e1497d44dfc0f83e95d44ae00f0a","xiulipan","2020-03-26 03:27:20","false","ipc: cc_version: change type char to uint8_t

Replace char with uint8_t to have fixed lenght for string.
char has minimum 8 bits length.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",63,22,0
"thesofproject/sof","96aa24c2d9508535092300ac0a34da6d08bb979f","xiulipan","2018-10-09 07:09:44","false","scripts: add rimage build scripts local install

Add local install for rimage-build.sh

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",35,4,0
"thesofproject/sof","ce17a23ab3a1fe6e809f1cc898d278004339fc5b","xiulipan","2018-11-22 05:27:19","false","trace: increase trace pos for each event

position for trace->pos is not updated, make error trace only show the
newest one. Now update the pos to make all error trace can be seen.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",38,6,0
"thesofproject/sof","2d66939c37c32f3439ef943fe6eabd9edaf08c0c","plbossart","2021-03-29 19:29:10","false","topology: soundwire: add 'NOJACK' option

Some devices are starting to remove the 3.5mm jack, we need a topology
for these cases.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",79,34,0
"thesofproject/sof","60a6b1330e5bfab1a025dd1233d234643590263f","lrgirdwo","2021-05-31 19:20:31","false","testbench: improve error messaging on file failures.

Tell the user the error.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",83,36,0
"thesofproject/sof","f5186ece2c51d780e406a2cf9dc79a3e69c8d089","keyonjie","2019-06-21 09:17:48","false","topology: pipe-detect: add kcontrol for model blob

We need to split detector config and model blob, create another bytes
kcontrol for model blob.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",47,13,0
"thesofproject/sof","eca416ad79f3e21292da63a22319bc33d1a91652","keqiaozhang","2019-01-21 06:37:58","false","test: add a script for xrun injection test

This script is used to check the ability of alsa xrun handling

Signed-off-by: Zhang Keqiao <keqiao.zhang@linux.intel.com>",57,8,0
"thesofproject/sof","cb755f879d8b43220f214d700b13528c162f3da6","brentlu","2022-01-22 02:57:47","false","comp: re-link buffers in make_shared

After moving component to a new memory location, not only source and
sink lists need to re-link but also the buffers which already been
connected to this component.

Signed-off-by: Brent Lu <brent.lu@intel.com>",115,44,1
"thesofproject/sof","ad415fa2e312a250ab9810d5d0f02c82ecd6c6f6","keyonjie","2020-06-01 05:13:24","false","topology: src: add uuid token support

Add the uuid token to src widget for the future use.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",97,24,0
"thesofproject/sof","8107d6a41b9b4ea188f1a93f354eaaa42fd16759","keyonjie","2021-10-09 02:35:16","false","alloc: free_block: perform wb/inv for the blocks

When freeing blocks, we need to perform writeback and invalidate to the
dirty cache lines, otherwise, they will be evicted from the cache at
some point in the future, which will break the usage of the same memory
region from another DSP core.

Introduce a free_ptr to make sure the original 'ptr' is not changed, so
we can use it for this wb/inv operation.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",121,40,1
"thesofproject/sof","64a1657bdd76858273a3e689c7ed20ff0c134029","keyonjie","2020-04-15 11:10:49","false","pipeline: add negotiation before propagating params

For different connected pipelines, they are usually connected via a
component with >1 source or sink buffers, as most of those components
don't have ability to converse frame format or sample rate, we need add
a params negotiation mechanism between those pipelines.

If all buffers are iterated in the params propagation direction, no
negotiation needed, otherwise we need to iterate all other buffers in
the opposite direction, to make sure all connected buffers have chance
to take part in the negotiation.

The negotiation should happen before we can propagate the params
further, when doing negotiation in a branch/buffer, we should check:
If a branch is active, check if params is matched, return error to
reject the whole .params() requirement if not.
If a branch is inactive, force update the params to its calling buffer,
to make sure all branches are aligned on the format.

We are propagating the params to branched buffer, and the subsequent
component's .params() or .prepare() should be responsible to calibrate
the buffer params if needed. For example, a component who has different
channels buffers should explicitly configure the channels for its
branched buffers (the ones connected to another pipeline).

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",82,22,0
"thesofproject/sof","51bc11090ac1c0ce4c4cf39af446fe0e1d442783","tlauda","2020-02-21 15:35:29","false","library: build missing file

Builds spinlock source file for library.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",80,21,0
"thesofproject/sof","09a44ab7c928fc02ec83822eb9523f430748cfd5","tlauda","2019-09-10 14:25:17","false","kpb: add missing flag to task init

Adds missing flag during draining task initialization.
It's needed at the moment, so the EDF scheduler can ignore
deadline for this task. Scheduling flags will be soon
refactored.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,15,0
"thesofproject/sof","407be960c0b9591b2b43f7943d7be08c7efb271b","tlauda","2019-02-25 12:00:55","false","dai: change flow of component copy

Changes flow of DAI component copy to match
new pipeline copy flow. For DW-DMA block processing
we will perform copy in schedule context instead
of right after getting an interrupt. This will
align nicely with future scheduling refactor.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,9,0
"thesofproject/sof","82c0654f7996d95925537133bf3a0f97e30183ad","tlauda","2019-02-26 16:43:04","false","dw-dma: refactor callback handling

Refactors callback handling to make it more
generic. Also it's needed in order to support
new pipeline copy flow.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",68,9,0
"thesofproject/sof","80972f1d78cbae1946b0eac0cb5213ce2a5234b7","tlauda","2020-01-10 11:27:12","false","cavs: add section for shared data

This patch adds dedicated section for shared data
on cAVS platforms. This section will be used to store
static data, which can be accessed by multiple cores.
Access to this data will go through uncached memory region.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",76,19,0
"thesofproject/sof","de0a0b85c52b188e8dda93af4bd421e59d42b3c8","tlauda","2020-02-04 09:45:14","false","component: add task when scheduled on different core

Adds separate task to components, which are supposed to be scheduled
on different core than the rest of the pipeline. These are so called
shared components. This way components requiring huge processing power
can be offloaded to slave cores.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",77,20,0
"thesofproject/sof","04ad28136d4bc1e16e14c6974c31b1ef7dc0560d","tlauda","2018-09-28 14:13:37","false","arch: remove debug write from xtos

Removes debug write from low lvl irq dispatcher in xtos.
It overwrites our FW status in memory window.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",37,4,0
"thesofproject/sof","e2edd5be5b299c88cec64a17f452ce7467c240c2","tlauda","2020-03-30 08:24:38","false","hda-dma: exit L1 only once for all DMA channels

Improves host component performance by extracting DMA L1 exit
to be executed commonly for all active DMA channels as registered
callback in low latency scheduler for timer domain. There is no
need to wait so many cycles for every channel separately.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",67,22,0
"thesofproject/sof","bb9e2cc1472a777bda6821e3fd80fc3702a7c91f","marcinszkudlinski","2022-11-28 14:58:45","false","move HPSRAM heap size def to zephyr adsp_memory.h

The heap size def should not be in alloc.c
This is a platform specific setting
Also (unused by now) macros regarding IMR bootloader
have been removed - moved to Zephyr

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",99,54,1
"thesofproject/sof","2a402ff6d5715dcd0e640b48b7420bd863e76f06","marc-hb","2023-03-12 21:28:39","false","topology2: extract new ""tplg-targets.cmake"" files from CMakeList.txt

The CMakeList.txt files in tools/topology/ have always confused two
different things:

- the list of .tplg files to generate, and
- the CMake logic used to invoke alsatplg and generate them.

Separate the two at last thanks a dead-simple `include()` command.  If I
had knew it was so easy I would have done this much sooner.

The `tools/build_tools/` directory is identical before versus after this
commit.

This will make it much faster to identify what actually changes in
future commits and pull requests.  This will also make CODEOWNERS
smarter and reduce Github notification noise.

Don't do it for topology1 to minimize churn and git disruption in
backports. Topology1 is not very active any more whereas topology2 has
never been released yet.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",55,57,1
"thesofproject/sof","4da849e99b15423c41cd7eda56cbc0c099b82d8b","lyakh","2020-03-13 09:55:50","false","IPC: (cosmetic) remove a superfluous variable

The ret variable in ipc_comp_new() is never changed from its
initialisation value of 0, remove it.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",82,21,0
"thesofproject/sof","9a02ffdeb70f45d421b5cdff3fa3b5427b189af5","lyakh","2020-10-07 08:14:18","false","zephyr: fix compiler warnings due to recent Zephyr changes

Fix two compiler warnings, introduced by recent Zephyr changes.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",67,28,0
"thesofproject/sof","7659186571e3cf3df7e87bb76bc3c1f3f2d928d1","lyakh","2020-11-03 11:38:29","false","xtensa: make multi-core configuration options available globally

Number of processing cores is a global parameter, it doesn't have to
reside in an xtensa-specific configuration menu.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",75,29,0
"thesofproject/sof","cae027edbe158fe6b7820084a367ad0833008a7d","lyakh","2022-04-08 08:01:21","false","samples: use __sparse_cache sparse annotation

Add the __sparse_cache sparse annotation to sample audio tests.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",114,46,1
"thesofproject/sof","b48710c8a54a7e3b54dfe97a93e693642651583a","lyakh","2022-08-09 15:08:10","false","ipc: find components on other cores too

No reason for ipc_get_ppl_comp() to only look for components on the
same core as where it is running, same pipeline components can run
on different cores too.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",110,50,1
"thesofproject/sof","eda36261fc0bc4f06a0c00a829b1d80931b9b086","lyakh","2022-10-13 13:41:41","false","ipc4: switch to read-only access to host mailbox where possible

Convert several use cases of the host mailbox to use const pointers.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",97,52,1
"thesofproject/sof","bc55ff21725438a31732d4a87aad420776ce05c2","lyakh","2019-01-10 13:27:09","false","interrupt: (cosmetic) move a spin-lock, remove function declarations

Simple variable declarations with no initialisation don't need to
be protected, move them out of a spin-lock. Also remove superfluous
static function declarations.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",57,7,0
"thesofproject/sof","ad3e2e4ab11b1994aed2726fcac2345717f8eac2","lyakh","2023-01-24 13:59:33","false","src: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register src with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","b0afa391262e93cab60ab69f595dacb6beb3c2c8","aiChaoSONG","2023-09-18 08:05:25","false","app: overlays: remove tgl and tgl-h ipc4 overlays

We build tgl and tgl-h with ipc4 by default, those
ipc4 overlays are empty now, can be removed safely.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",20,64,1
"thesofproject/sof","dca9085047f2aaaff59587d19c3b524eea58b888","brentlu","2023-08-24 04:36:41","false","topology1: adl-max98360a-da7219: support DA7219 headphone codec

Add an new topology adl-max98360a-da7219.tplg for DA7219 headphone
codec with MAX98360A speaker amplifier on ADL boards. The MCLK
frequency is set to 24.576MHz to use PLL bypass mode and avoid the
WCLK locking problem on earlier platforms.

Signed-off-by: Brent Lu <brent.lu@intel.com>",26,63,1
"thesofproject/sof","6cdefe7b3a8a13126e3f2155411f64ebab7674d4","keyonjie","2020-07-21 00:21:02","false","cAVS: clk: configure default CPU clocks

Define CPU_LPRO_FREQ_IDX, CPU_HPRO_FREQ_IDX and CPU_DEFAULT_IDX for all
cAVS platforms.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",78,26,0
"thesofproject/sof","e5cf39ff9cf0a7cf2633e7fa21dfbd956d2ee195","bkokoszx","2019-03-20 08:18:42","false","schedule: ll: add ll specific traces

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",65,10,0
"thesofproject/sof","09944bc058915dc48faac9f2a671e1b7063dbbf7","kv2019i","2022-08-04 11:03:01","false","topology: Add platform definition file for Intel Raptor Lake

Start with Alder Lake definitions.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",111,50,1
"thesofproject/sof","02994767ba7bea65b2a2c8729b6650274511658b","bkokoszx","2020-01-15 14:21:20","false","common: split file into C and assembler parts

Splits common.h file into C and assembler parts and rewrites
ALIGN_UP macro without ternary operator, so it can be included
assembler files.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",75,19,0
"thesofproject/sof","0b79666a6dc7e26843efd55302e575616006ce41","kv2019i","2023-08-21 15:12:18","false","platform: tigerlake: remove CAVS_LPS support

Remove support for Intel cAVS Low Power Sequencer for Power Management.
This code is specific to XTOS builds for Tiger Lake (cAVS)
platforms and no longer used in Zephyr builds.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",24,63,1
"thesofproject/sof","f5e78430ff3dbbe8bcceca5f0f4f1fa86bbd78b8","bkokoszx","2019-04-01 09:53:27","false","cavs: ssp: generic ssp mclk configuration for cavs

Unification in setting mclk and bclk in ssp_config() for cavs platform.
Now ssp clk information are placed in include/platform/clk-map.h. I've
added also possibility to select PLL Fixed clock as a mclk and bclk
source for cavs platforms.

issue: #560

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",52,10,0
"thesofproject/sof","9fa0aef635930756cff714e4844d2ace03fca90d","kv2019i","2019-04-01 14:50:20","false","tools: logger: ignore end-of-file in trace mode

Change logger behaviour such that in trace (-t) mode logger
only stops if an error is detected. If no error, logger
continues to try and read data from debugfs node.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",52,10,0
"thesofproject/sof","e4e3dd96fc41fad14f67331bc1e1b81311c2c89d","kv2019i","2022-03-15 17:46:26","false","pipeline: do not reschedule pipe task if already in target state

When processing a trigger action in pipeline_task_cmd(), do
not return SOF_TASK_STATE_RESCHEDULE if the pipeline is already
in requested ACTIVE state.

The unnecessary reschedule can cause scheduling bubbles in
topologies with mixer fed by multiple source pipelines. When
the frontend pipelines are released from pause or started,
the connected pipelines that are already running, need to keep
running. A reschedule will cause a gap in scheduling in
of the downstream pipeline(s) mixer feeds.

This fix is not sufficient on its own, but is part of the fixes
to address: https://github.com/thesofproject/sof/issues/5469

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",107,45,1
"thesofproject/sof","bad017ba56a41c17db99534a56d5a118813ac715","lgirdwood","2018-11-27 14:30:25","true","Merge pull request #636 from ranj063/fix/glk-virtual-widget-warnings

Topology: Fix glk virtual widget warnings",43,6,0
"thesofproject/sof","764f9536cdb196d46f653f542a18d43c0fc2fd1d","lgirdwood","2018-07-09 22:25:51","true","Merge pull request #20 from ranj063/topology/glk

topology: add multi-stream topology for GLK",13,1,0
"thesofproject/sof","f4c6d3576133cb6b4216479d11022316a86e47cb","tlauda","2019-08-02 08:48:56","false","task: make enum from task states

Makes enum from task states for better type
enforcement in the future.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",53,14,0
"thesofproject/sof","ad646299afeb8da88a32fed46976ff0a59757c0c","tlauda","2019-02-25 11:18:06","false","pipeline: change copy flow

Changes copy flow to unify it no matter what is
the source of scheduling. Capture pipelines will always
start from source component and go downstream to sink
component. Playback pipelines for the first time will
start from sink component and go upstream to source
component (preload run). Further playback pipeline
copies will first copy sink component and then go
upstream to source component.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,9,0
"thesofproject/sof","c12d68cfa04714091b24ba93e99b2045ea4de711","tlauda","2019-02-11 10:56:41","false","dma: add get_data_size ops

Adds get_data_size operation to DMA.
This operation allows components to retrieve
currently available data from input and output
DMAs.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",59,8,0
"thesofproject/sof","03426804e980c59f6c2882a947759af5b7fd9153","RanderWang","2018-07-11 08:59:24","false","trace: fix IPC timeout issue on APL

Refine read pointer, it should rewind to head when it is at tail

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>
Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",15,1,0
"thesofproject/sof","c7b9df0106af29a624ae4d925d273cb88d9e823f","RanderWang","2022-01-17 02:12:40","false","ipc4: fix compiling issue for ipc4

Move endif to include general ipc4 conversion.

Signed-off-by: Rander Wang <rander.wang@intel.com>",117,43,1
"thesofproject/sof","e627c7994fd040148db5b92df1e9e9c03424fadb","singalsu","2022-12-01 15:28:02","false","Audio: SRC: Fix generic C version overflow in 16 bit round

This patch adds the missing saturation to rounding in function
src_polyphase_stage_cir_s16(). The error was caught with
""src_test(16, 16, [176400 192000], 8000)"" where both conversions
made an overflow in chirp test.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",101,54,1
"thesofproject/sof","9bf46d3fe2c69b6831c448be01703f664e17725e","kuanhsuncheng","2021-08-26 11:28:16","false","rimage: Add support for mt8195

Add mt8195.toml to support sof-mt8195.ri binary build.
Add mt8195 memory layout
Add mt8195 machine_id

Signed-off-by: YC Hung <yc.hung@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",119,39,0
"thesofproject/sof","8cfa1cf7209d569b983dd1cacf08ed3a623586b5","kuanhsuncheng","2021-12-17 09:45:12","false","platform: mt8195: adjust dram audio shared size

Increase buffer size for legacy audio for mt8195.

Signed-off-by: Allen-kh Cheng <allen-kh.cheng@mediatek.corp-partner.google.com>",117,42,1
"thesofproject/sof","9f74088c7c6b9e1f34f183b7320d436c68df9dc1","singalsu","2022-12-15 09:45:16","false","Tools: Topology1: Add to development topologies DRC for UP2 board

This patch adds to development topologies build of minimal topologies
sof-apl-pcm512x-drc.tplg and sof-apl-pcm512x-mdrc.tplg for testing.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",92,54,1
"thesofproject/sof","40f78a9325bc3452d2237c248cd17a334f9bf831","singalsu","2022-11-07 17:43:07","false","Tools: Tune: Add minimum THD+N performance check to snr_generate.m

This patch updates the SRC coefficients generator scripts with
add of parameter cfg.thdn that is the min. THD+N performance. The
target gain is set to 0 dB for all conversions to be generated.

in src_param.m the default stop-band is relaxed from 70 dB to 63 dB.
It can be done because the THD+N performance check will step up the
attenuation. The default lower attenuation saves RAM in easy
simple fractions conversions.

The main change is in src_generate.m. The conversions matrix is
two pass. In the first pass the converters are designed and the
converter for same fraction and other bandwidth parameters with
highest performance is preserved. In the second pass the table
of converters is constructed and the size of filters and buffers
and other information like MCPS estimate are collected.

Other changes include reduction of plots made during batch design
and remove of some commented out code.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",93,53,1
"thesofproject/sof","af2c4d53763617360c7f2248338ed9be03ed6785","lgirdwood","2018-10-03 12:12:52","true","Merge pull request #450 from tlauda/topic/smp-ppl-fix-cache

pipeline: cache fixes for multicore processing",34,4,0
"thesofproject/sof","ae14528327655c1fc8650ac65177bcd055199893","mrajwa","2019-06-30 22:57:22","false","memory: increase hpsram buffer size for CNL

This patch increases HPSRAM buffer size. This
additional space is needed for KWD functionality.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",41,13,0
"thesofproject/sof","9051c22facf46e1d03375b47e0c634b4c13a8800","lgirdwood","2018-07-12 19:55:14","true","Merge pull request #85 from jajanusz/remove-cmocka-docs

doc: remove README.rst, it's in sof-docs now",12,1,0
"thesofproject/sof","4c8deb72a30c87cf765a40c5a314a8d50c81a151","lgirdwood","2018-11-13 14:59:18","true","Merge pull request #561 from lbetlej/cnl_pg_sram_on_d3

Added SRAM power gating on D3 entry for cAVS 1.8 (i.e. Cannonlake).",38,5,0
"thesofproject/sof","d260db7f5bd5cbd12d7f503749a25a3ddc66444c","jajanusz","2018-10-09 14:27:03","false","hda-dma: fix typo - read DGBWP

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",35,4,0
"thesofproject/sof","de740b3075964b67aafa17562e2f40004aa2555f","jajanusz","2018-12-20 00:51:30","false","host: platform: increase stream capabilities

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",51,7,0
"thesofproject/sof","93b0d29571c2db3086f1d0b47d3440f1addb8838","jajanusz","2019-01-11 20:07:45","false","rimage: remove config.h dependency

man_* files don't need it
pkcs can use PEM_KEY_PREFIX from passed in defines

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",55,7,0
"thesofproject/sof","1395483aeaf81652046c8a31bc786c172c3e85dc","lgirdwood","2018-09-10 13:06:19","true","Merge pull request #338 from tlauda/topic/agent_ms

agent: switch from us to ms",33,3,0
"thesofproject/sof","d24de27a0cafddf5ff30f039b8c74dbf3f4a88f6","mrajwa","2020-01-21 14:06:42","false","kpb: add comment to comp_data

This patch adds short comment to each of comp_data
fields.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",78,20,0
"thesofproject/sof","7d9ea989d72c16d69575a9a221b9af1a23b701bd","xiulipan","2020-04-21 04:05:52","false","topology: fix conflict PIPE_VOLUME_PLAYBACK defination

in bxt.m4 and sof-hda-generic.m4, they both define the
PIPE_VOLUME_PLAYBACK, this will cause wrong tplg result.

Refine the them in sof-hda-generic.m4 to PIPE_HEADSET_PLAYBACK
to fix the issue.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",86,23,0
"thesofproject/sof","29659081359ff305979b406c7290f800e1ea1231","ktrzcinx","2020-09-16 11:49:51","false","manifest: Remove -m option

Used platform should be defined by config file, given in
-c option. Double ways of defining platform may lead to
missalignement, so old way should be removed.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",64,27,0
"thesofproject/sof","f0c6ee0f3aaf94a898bcf6fbdf8b6e054f3e03c8","ktrzcinx","2020-04-07 10:40:06","false","ext_man: Create extended manifest

Extended manifest is a place to store metadata about firmware, known during
compilation time - for example firmware version or used compiler.
Given information are read on host side before firmware startup.
This part of output binary is not signed.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",94,22,0
"thesofproject/sof","c52dc7ce48c0f1fd9f201245663618346cbfc84c","cujomalainey","2018-09-05 21:38:52","false","Move towards modern markdown README

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",31,3,0
"thesofproject/sof","5116f070c2d885f65480d14462e26fb3a748b9a3","cujomalainey","2021-02-19 22:48:53","false","math: don't use implicit types in fixed point math

Cppcheck is complaining that we are running a 32bit int off the end.
This shouldn't happen here in any arch. Looking at the math and
comments, it looks like idx should be a 64 type or cast to a larger
container before the bit shift. Therefore I am enforcing a strict type
on it.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",74,33,0
"thesofproject/sof","dd6f854d46d9fef940815a74c0f6ba9e35101769","cujomalainey","2019-12-03 22:42:47","false","gitignore: Ignore ctags cache files

We don't need to accidentally commit ctags files. The linux kernel
ignores these definitions, let's ignore them too.

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",68,18,0
"thesofproject/sof","92c477f9d84dd9e5ed3f54a2dc88e3c5de8d2e47","bardliao","2019-10-29 12:15:37","false","Topology: use 24 bps for SdW

Due to clock frequency limitation on CML, the bandwidth is not enough
when playback and capture are opened at the same time if we use 32 bps.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",66,17,0
"thesofproject/sof","87dad4adc5bd4791e8d1570c5f2ab3e0b41f9c98","mwierzbix","2018-11-06 01:11:08","false","preproc: META_COUNT_VARARGS_BEFORE_COMPILE: bugfix for tokens starting with parenthesis not being counted

; also introduced unit tests to check the issue

Signed-off-by: Michal Jerzy Wierzbicki <michalx.wierzbicki@linux.intel.com>",38,5,0
"thesofproject/sof","1c09ccf0e26f5c3dea96c910f8a5ff84d39868bd","yongzhi1","2020-12-21 19:05:01","false","config: disable alh in jasperlake_defconfig

Since soundwire is not enabled on any jsl+ product,
it's safe to turn it off by default.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",72,31,0
"thesofproject/sof","520625ea25a44a6fac9e46342dabe3f5e8109f3a","ranj063","2021-02-01 21:46:42","false","smart_amp: check if feedback_buf exists before accessing it

With dynamic pipelines, the widgets in the feedback path are set
up only when the capture PCM is opened. Check if the
feedback_buf exists before accessing it to prevent DSP panic
when only the playback pipeline is open.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",69,32,0
"thesofproject/sof","630b55e40aaa95cc00d01c5e84d6d80db6d9520c","marc-hb","2021-12-17 01:08:30","false","cmocka/test-all-defconfig.sh: add banners between platforms

Sample output:

[ 97%] Built target acos_32b_fixed
[ 98%] Linking C executable volume_process
[ 98%] Built target volume_process
[100%] Linking C executable strcheck
[100%] Built target strcheck

    =========  Building cmocka tests for broadwell_defconfig ======

+ cmake -DINIT_CONFIG=broadwell_defconfig -S /srv/mherber2/SOFub20/sof
   -B build_ut_defs/broadwell_defconfig -DBUILD_UNIT_TESTS=ON
   -DBUILD_UNIT_TESTS_HOST=ON

-- version.cmake starting SOF build at 2021-12-17T01:09:44Z UTC
-- Building git commit with parent(s):

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,42,1
"thesofproject/sof","ec3ccab1b0c971611c2390edfcb0a98a8ac4bf54","marc-hb","2020-10-10 19:32:17","false","xtensa-build-all: document PRIVATE_KEY_OPTION and deprecate -k

Following commit 88b69cc2e5ca (""scripts: xtensa-build-all: Add support
for building TGL and signing with MEU"") we now have an unified and
flexible PRIVATE_KEY_OPTION that can do anything with very little code.

The -k option was never a good idea in the first place because it
already required an environment variable anyway (RIMAGE_PRIVATE_KEY)
instead of a command line argument so the code should have just checked
whether RIMAGE_PRIVATE_KEY was defined, that would have been
enough. Requiring the user to ""double-confirm"" with -k has been adding
extra complication for both the user interface and the implementation.

xtensa-build-all is effectively a ""CMake configuration convenience""
script, however it shouldn't become an additional layer of indirection
and complexity and its interface should expose CMake (which is already a
layer of indirection!) as directly as possible.

See longer discussion in PR #3187

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",68,28,0
"thesofproject/sof","69422bfd6cb65630d548c5055a532b055eae981e","marc-hb","2022-02-08 01:13:20","false","rimage: update to January 26th version ee5c3e1deb14

Update rimage from version 0f64a20183a8 to ee5c3e1deb14

ee5c3e1deb14 (origin/main) Added handling of OpenSSL on Windows with MSYS2
158964190371 Fixed warning of wrong variable type in fprintf
d0062122a8d9 Fix confusion in headers between uint8_t arrays and strings
d855fbfe7c87 Remove unconditional ""(1 || verbose)"" debug hack in cavs25
ecb6a6693212 Update to C99 standard to match SOF. Silenced warning     \
             generated by newest GCC compiler related to int cast of   \
             char typed values that may result in negative values. Syntax \
             fix in linkage of crypto library to more generic approach.
ce69d7bad82a adsp_config: fix invalid format specifier This patch fixes \
             an invalid format specifier that causes a numeric value to \
             be interpreted as a string, resulting in an Segmentation   \
             fault.
8753a9e162f7 Remove unused declaration global platform specific manifests
3b4b1429b07e rimage: fix openssl 1.0 support
23a53ac8b641 cse: fix signed integer overflow
32052add9968 remove x from getopt
0f64a20183a8 (HEAD) manifest: fix buffer init in resign

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",106,44,1
"thesofproject/sof","50f96f8ced8dd07bccd88a41fd04193ca43b9295","ktrzcinx","2020-02-19 12:00:03","false","sof: Add fw_metadata section

This section will be used to store information about firmware known
during compilation time.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",85,20,0
"thesofproject/sof","28d06341bc317898dd607b01b3d58d38ecd3948b","ktrzcinx","2020-12-15 15:48:41","false","ext_man: Remove dictionary elements counter from ABI for ext_man_config_data

This value shouldn't be included in any ABI header, because it may
vary between firmware configurations.
This change makes header file more similar to version provided by kernel.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",72,30,0
"thesofproject/sof","a10b0ad27e17667d3d9f84b36dc51457e4388884","ktrzcinx","2020-04-23 14:04:52","false","ext_man: Port SOF_IPC_EXT_WINDOW to extended manifest

This information known at build time does not need to be
provided in a mailbox.
There was need to remove variable array from sof_ipc_window,
what give possibility to embed this struct inside another one,
but leads to ABI minor change.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",71,23,0
"thesofproject/sof","be311395328d747ccc3042f3d93389c85548e0a2","cujomalainey","2021-01-07 22:56:07","false","codec_adapter: fix documentation for apply config

Comment is incorrect. There are multiple cases when a config is pushed
by userspace that will result in no callback.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",75,31,0
"thesofproject/sof","9f210ad755e5fa0b2f56ceef82ce5a3a1da1306f","cujomalainey","2018-11-16 02:51:43","false","Update sof-byt-da7213

Update graph to represent code

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",39,5,0
"thesofproject/sof","3b31adc259d760ded0be24937c4cf31bbb25010f","fkwasowi","2023-09-14 06:48:06","false","helper: add a condition before updating the component direction

At the pipeline reset stage, the direction of the components
is not always known, resulting in a call to a field that is null
and consequently a crash/timeout.

Signed-off-by: Kwasowiec, Fabiola <fabiola.kwasowiec@intel.com>",20,63,1
"thesofproject/sof","d7d86cb60932540133ca5b2e758a09d5078d5c58","marc-hb","2020-06-16 09:25:05","false","CMakeLists.txt: make CONFIG_H_PATH a build parameter

No functional change for now.

This is needed because SOF is a CMake sub/""external"" project when
building some host tools. We want to switch all projects to ""-imacros
config.h"" but subprojects cannot inform parents where their files are
located. So make parents able to dictate where config.h is instead.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,25,0
"thesofproject/sof","d9be34d149e3a601752c30acdfffc4e5125f02e1","xiulipan","2019-12-10 09:31:56","false","platform: bdw: fix SSP clock setting

SSP clock on BDW is 24MHz.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",72,18,0
"thesofproject/sof","a2de860f42997886986ba57dbf8f88726c70bb86","xiulipan","2020-05-15 09:15:26","false","cmake: fix tools build with submodules

Tool build will fail without git submodule init and update.
Add the submodlue support also in tool CMake file.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",99,23,0
"thesofproject/sof","842b860367065ef98b0284830c41f0f2e2c5c3ef","DianaGabriela27","2019-03-06 10:52:50","false","rimage: Fix code alignment and indentation issues

This was reported by checkpatch.pl and makes code
easier to read.

Signed-off-by: Diana Ungureanu <diana-gabriela.ungureanu@nxp.com>",66,9,0
"thesofproject/sof","615f408df9e481998836ccc4548e014bda030b9d","dbaluta","2021-04-08 08:18:42","false","drivers: Create imx drivers Kconfig file

This will be the home of IMX drivers config option
definitions.

This moves IMX_DMA config option to imx/Kconfig.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",79,34,0
"thesofproject/sof","1c018d517f038ec64b2f5ee6269842f302dc4ebf","dbaluta","2022-07-27 11:59:43","false","timer: Introduce sof_cycle_get_64

With Zephyr, SOF uses k_cycle_get_64() API in order to
count clock cycles.

Not all platforms have a 64bit counter (e.g i.MX dsp integration
only has xtensa timer which is limited to 32 bits).

So, instead of using k_cycle_get_64 introduce new API sof_cycle_get_64
which keeps the existing behavior for platforms which define
CONFIG_TIMER_HAS_64BIT_CYCLE_COUNTER, otherwise use k_uptime_ticks().

See comments from @andyross at
https://github.com/zephyrproject-rtos/zephyr/pull/48318

Suggested-by: Andy Ross <andrew.j.ross@intel.com>
Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",111,50,1
"thesofproject/sof","c2fe4ff10ba1ae2357ae4426579095a0ff6672b8","dbaluta","2021-03-02 09:21:22","false","codec_adapter: Add CONFIG options to select Cadence libraries

Each type of codec will have its own config option that will point
to the path in build filesystem where library binary is located.

This will make compiling Cadence libraries binaries more flexible.

The libraries will be statically linked with SOF firmware.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",73,33,0
"thesofproject/sof","43e1271aaf0b3713ea7939848035bd6e8d1e1648","RanderWang","2018-07-09 07:08:36","false","trace: Refine trace function in irq function

Change trace_ipc to tracev_ipc because it is too many
in irq function

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",12,1,0
"thesofproject/sof","5ebbd6530ce79f30ca2ef2d42a4992893fa4b34f","RanderWang","2023-02-24 01:15:59","false","rimage: use hex number

Module type is interpreted as hex number

Signed-off-by: Rander Wang <rander.wang@intel.com>",56,57,1
"thesofproject/sof","70b291006f3b4c9cd76fdae384c216d57a1f648e","jajanusz","2020-05-07 18:40:14","false","cmake: meu offset argument

Add possibility to specify MEU offset.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",96,23,0
"thesofproject/sof","62012c49a459dc577218f47b3225a313777f3fc4","jajanusz","2019-10-31 11:55:33","false","checkpatch: update to match kernel 5.4-rc4

Merge kernel's checkpatch with custom features added for SOF.
SOF follows kernel code style, so checkpatch should be also up-to-date.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",54,17,0
"thesofproject/sof","fe7f44e287cc8eea095c73d52362beaf2bde5d38","fredoh9","2022-08-24 09:14:46","false",".github: add octave packages for testbench

process_test requires octave. Before running octave,
signal and io pakcages should be loaded.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",111,51,1
"thesofproject/sof","e79b6343b89673212f9eec2efdab03a6b21617f7","serhiy-katsyuba-intel","2023-04-20 09:16:13","false","host-zephyr: Fix glitches

Fixes glitches when host copier has different container size on
source and sink.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",51,58,1
"thesofproject/sof","8249abfa11f6552678b362820b6723ff75fedf90","ktrzcinx","2020-10-15 09:17:55","false","toml: Keep available manifest parsers in list

This approach allows to easily expand parsers list in future,
without harming code readability.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",72,28,0
"thesofproject/sof","4e867bcad466faf57a158d10be9389a37723896c","ktrzcinx","2020-06-23 04:59:20","false","dai: Rephrase misleading log from dai_config()

Structure X.Y is as usual used to describe pipeline and component
id, so usage of them in different context may be misleading.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",70,25,0
"thesofproject/sof","a577f0ef149371de323045ce475c348ea2bdd282","ktrzcinx","2020-01-10 12:32:43","false","pcm_converter: buffer: Mark source buffer as const

Input buffer should be explicit marked as const to indicate
that input samples and other comp_buffer fields shouldn't
be modified (especially r_ptr/w_ptr).

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",76,19,0
"thesofproject/sof","f39650022a29c6ce1d38b503ac19c942ecb8315e","tlauda","2018-07-18 11:00:04","false","pipeline: allow render pipeline to recover from xrun

Fixes pipeline's ability to recover from xrun for render streams.
Normally for render the ppl task is scheduled after trigger start,
but in this case trigger start is done on current's task level.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",13,2,0
"thesofproject/sof","0619cacfdcaf67570f8f4152e4ff61d0d107c928","tlauda","2019-05-07 16:31:12","false","clk: add clk_get_freq method

Adds implementation of clk_get_freq method.
It allows to retrieve clock frequency in Hz
based on provided clock id.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",55,11,0
"thesofproject/sof","d01ecf8b50fc1c7d610519ef66496397e9214c8f","tlauda","2019-05-09 17:29:59","false","xtensa: add support for coprocessors store and restore

Adds support for coprocessors store and restore on context
switch during interrupt handling. This way we can support
preemption of methods, which use coprocessors. Currently
implementation is limited to 2 coprocessors.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",57,11,0
"thesofproject/sof","5165ee07a72dbd5c20899e229b2800c6b2b7fa5e","tlauda","2019-03-29 12:47:32","false","dma: rename callback types and copy flags

Renames callback types and copy flags to be more
precise.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",48,10,0
"thesofproject/sof","cbee96c9bb0627afb6f14f8e66219c60e5949aa4","saisurya-ch","2023-06-20 07:32:58","false","scripts: add support for vangogh platform

Add support for Vangogh platform in build scripts.

Signed-off-by: SaiSurya, Ch <saisurya.chakkaveeravenkatanaga@amd.com>",46,61,1
"thesofproject/sof","4f03d4355639d3e05d0e816411b222d0b6e86d51","tlauda","2018-10-08 10:36:43","false","clock: simplify clock implementation

Refactors clock code to include clocks for all cores.
Also simplifies the whole clock driver implementation,
so the ifdefs for platforms are no longer needed.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",34,4,0
"thesofproject/sof","c9a194bdef95256f0d6b5fefcda8e2134e905bf9","tlauda","2019-05-06 13:11:59","false","xtensa: align hal state definitions for every platform

Changes xtensa hal state definitions to be the same for
every platform.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",47,11,0
"thesofproject/sof","297b893daee8fdceb3e96b84cdc0434020756d8d","bardliao","2021-05-25 10:11:38","false","intel: ssp: introduce ssp_set/release_mclk/bclk helpers to set/release mclk/bclk

MCLK and BCLK can be set/release separately. We can set/release mclk/bclk
more flexible with these helpers.

The helpers are defined after the Linux ones, 'prepare_enable' will
first select the relevant resources then enable the clock
output. Conversely 'disable_unprepare' will stop the clock output then
release the clock resources.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",83,36,0
"thesofproject/sof","39b59af35ffbe692fecc4340b2b4cd70c986c9f2","tlauda","2019-08-01 10:43:54","false","idc: add missing cache invalidation

Adds missing comp_dev invalidation before accessing it.
We also need to move core check a little bit further,
since it also uses both comp_dev and pipeline objects.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",53,14,0
"thesofproject/sof","b0360864ae523ae9e0ad1c963de0b113c8134417","marcinszkudlinski","2023-08-14 09:43:50","false","src: bugfix: rate for sink not set

Rate for sink was not set properly in src.c

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",28,62,1
"thesofproject/sof","e437e1cc5210c63157b142b8e5133f7f1030ef32","tlauda","2020-01-20 14:08:13","false","cpu: add helper method cpu_is_me()

Adds helper method for checking whether current core
is the one we are looking for.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",80,20,0
"thesofproject/sof","ededbb65fe9c652c59194f72df6dd56e6a896e93","tlauda","2019-07-09 14:40:27","false","arch: xtensa: remove deprecated stack defines

Removes deprecated stack defines as they are no longer
needed.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",42,13,0
"thesofproject/sof","f36acfcc09012cbc87fb6b6d94d0697ab962fb1f","aiChaoSONG","2023-01-30 06:49:42","false","smart_amp_test: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register smart_amp_test module
with the Zephyr initialisation framework.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",52,56,1
"thesofproject/sof","017892ec48f0c38444a196c766d2a658db282cd3","maruthi-machani","2022-11-09 05:32:20","false","topology1: topology support for tdm configuration

Topology support for tdm configuration for amd platform

Signed-off-by: MARUTHI MACHANI <maruthi.machani@amd.com>",92,53,1
"thesofproject/sof","3863e94fa5d361e434f404655dac17541dbf20c6","lyakh","2023-02-13 11:29:29","false","Don't convert ROM addresses to cached aliases

We don't include ROM sections into the output image. If conversion is
applied to them, they end up in the SRAM address range, which then
generates corrupted images.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,56,1
"thesofproject/sof","20acc16791aff21ecda549ffebbcec85f84130f8","tlauda","2019-08-07 14:22:34","false","edf_schedule: implement the new version of EDF scheduler

This patch implements the new version of EDF scheduler.
This is the first basic implementation, which can be easily extended
in the future.

Previous implementation had two major flaws:
- Tasks could only be preempted based on the interrupt level on which
they have been scheduled, so it was limited based on the hardware.
- This led to the system not fully utilized, so we could never achieve
full EDF functionality.

The new implementation uses only one software interrupt and allows for
dynamic context switching between different tasks based on the deadline.
Also for some cases priority is taken into consideration e.g. for idle
and almost idle tasks, which don't have deadline at all and should be
executed only if the system is free. All other normal tasks should have
the same priority. Task chosen to be run is executed on passive level,
so automatically can be preempted by every interrupt. Every task has
its own private stack on which current context is saved and restored
if needed. Note that main firmware loop is task scheduled with
idle priority, so it will be executed only after every other task
is completed.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",53,14,0
"thesofproject/sof","670246e2f8ec89ddc591735df72189498e5b4342","tlauda","2019-12-19 14:45:15","false","timer: use platform_timer from sof context

Changes accesses across the code to use platform_timer saved
in sof context instead of using externed global variable.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",72,19,0
"thesofproject/sof","f8bea63f8e9eeb0de494c9b172cfa861e72edbac","tlauda","2018-12-12 13:33:17","false","dw-dma: change work trace to verbose

Changes trace call in dw_dma_work to verbose.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",45,6,0
"thesofproject/sof","a55e00c45643a6a51074e0a3be5612564aae6e9f","tlauda","2018-10-01 13:31:38","false","arch: fix smp build on CNL and ICL

Fixes building of xtensa-smp architecture on CNL and ICL.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",36,4,0
"thesofproject/sof","0913d7c83a7eb83115471472f3412a6682381035","singalsu","2018-10-12 15:46:30","false","EQ: Fix an integer type bug in IIR coefficients blob packer

This patch adds explicit conversion to signed int32 type for response to
channels indices in assign_response and filter coefficients. The bug was
visible if trying to activate in IIR blob the per channel filter bypass
by having a negative value (-1) in any of channel assigns. Octave assumed
the type to be unsigned and produced wrong configuration bytes.

The filter coefficients are already integer type from previous
quantization code in the conversion process. However it does not hurt to
have extra safety to avoid similar issue as assign.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",34,4,0
"thesofproject/sof","4042959bde3759ad4d6b1915761b86c8fe7c7ecd","singalsu","2021-08-27 12:27:27","false","Audio: Add to volume component Windows fade ramp type

The new gain ramp type can be selected from topology with
SOF_VOLUME_WINDOWS_FADE (4). The ramp follows function (t/T)^1.75.
The same shape is applied for all transitions: unmute, mute, vol up
and down. Subjectively it sounds somewhat smoother that linear ramp
of same duration.

As optimize and clean up the ramp type error handling is moved to new()
where the ramp function pointer is set. Ramp type does not change after
that.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",119,39,0
"thesofproject/sof","e83d67d426c7bf646d2c889bc2be6358a7182992","singalsu","2023-02-27 12:40:26","false","Tools: Topology2: Add high-pass IIR to SDW headset capture

This patch changes the DAI passthrough pipeline in cavs-sdw.conf
based topologies to similar pipeline but with IIR high-pass. The
cut-off frequency is 40 Hz and gain is 0 dB. The same high-pass
is used for HDA codec.

The change suppresses most of DC signal pop noise from the
beginning of capture or after press of headset button.

The impacted topologies from current build are:

cavs-sdw, mtl-sdw, sof-tgl-rt711-rt1316-rt714,
sof-adl-rt711-l0-rt1316-l12-rt714-l3,
sof-tgl-rt715-rt711-rt1308-mono, sof-tgl-rt711-rt1308-4ch,
sof-adl-rt711-4ch, sof-mtl-rt711-4ch

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",58,57,1
"thesofproject/sof","12675d51ff89da0b755d44ea230a97503cddda2c","XiaoyunWu6666","2022-01-24 01:41:22","false","configs: Configure converter in tglIPC4 config

When build tgl firmware with IPC4
configuration, disable HIFI3 conv-
erter and enable format converters.

Signed-off-by: Xiaoyun Wu(Iris) <xiaoyun.wu@intel.com>",116,44,1
"thesofproject/sof","11928f6555179420d74f48bf6ed5ce0147b1da46","xiulipan","2018-08-07 13:48:57","false","ci: travis: update to use docker hub image

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",17,2,0
"thesofproject/sof","39780cb0ce62252efce20a098259f77821b6d56b","libinyang","2018-11-12 13:34:16","false","host: fix coverity check issue of error handling

When host stop fails, it should return the errno.

This patch fixes the coverity the below coverity check issue:

static int host_trigger(struct comp_dev *dev, int cmd)
273{
274 struct host_data *hd = comp_get_drvdata(dev);
275 int ret = 0;
276
277 trace_host(""trg"");
278
279 ret = comp_set_state(dev, cmd);
280 if (ret < 0)
281 goto out;
282
283 switch (cmd) {
284 case COMP_TRIGGER_STOP:

CID 324978 (#1 of 1): Unused value (UNUSED_VALUE)
returned_value: Assigning value from host_stop(dev) to ret here,
but that stored value is overwritten before it can be used.
285 ret = host_stop(dev);
286 /* fall through /
287 case COMP_TRIGGER_XRUN:
288/ TODO: add attribute to dma interface and do run-time if() here */
289#if defined CONFIG_DMA_GW
value_overwrite: Overwriting previous write to ret with value from
dma_stop(hd->dma, hd->chan).
290 ret = dma_stop(hd->dma, hd->chan);
291#endif

Signed-off-by: Libin Yang <libin.yang@intel.com>",40,5,0
"thesofproject/sof","bcccf1253d8b52bfdfc2ba1c4b178d747ee0cf79","MingJenTai","2022-03-15 05:43:22","false","[RTNR] Add Realtek Noise reduction support option to ADL with MAX98360A topology

Signed-off-by: Ming Jen Tai <mingjen_tai@realtek.com>",107,45,1
"thesofproject/sof","cedde4e5748624133d2022eba9cab82caaf15dc9","RanderWang","2018-08-07 08:20:56","false","trace: refine dma trace algorithm for apl

For apl, host pointer is updated to host in next trace_work.
So although the available trace data is null, we need to check
whether host pointer needs to be updated.

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",18,2,0
"thesofproject/sof","80ef3cf95e4954b6177b9171c4931f253a0808d2","johnylin76","2020-09-22 10:19:14","false","tools: topology: Add DRC topology files

This commit adds the topology files for the drc component.
The control bytes are generated by the tools in tune/drc.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",66,28,0
"thesofproject/sof","5ad5da5bc7571ea25dd711c591fcaef54fdc2d18","softwarecki","2023-05-10 12:28:18","false","dai: always reload dma ll chain

A problem was observed with launching capture with dmic. Sometimes the host
starts reading data too late, so that the capture buffer becomes full.
In this case, the dma descriptors are not reloaded. This leads to stopping
the dma. When the host starts reading and reads the accumulated data the
stream is already stopped. With this patch, the descriptors are always
reloaded and the stream will not be stopped. A glitch may occur but it is
better than no data at all.

Fixes #7506.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",53,59,1
"thesofproject/sof","5a007b807407c5df6b5954a10c49c507ba2a228d","kv2019i","2021-12-10 19:17:04","false","include: add missing tplg tokens to kernel/tokens.h

It seems most of the tokens added in ABI3.18-3.20 have not been
added at all to tokens.h. This is problematic as this is the main
interface reference and used by multiple tools in SOF repository
(the tplg parser and testbench).

Align definitons to latest in Linux kernel tree current ABI3.20
implementation in the firmware repository.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",121,42,1
"thesofproject/sof","3cded9d7cbcebbc4bda6cf40782f672697c048c9","keyonjie","2020-06-17 03:42:32","false","ipc: topology: use the sof_ipc_comp reserved bytes for extended data

Use the 32bit reserved member of the struct sof_ipc_comp as the extended
data length, this will help to minimize the ABI change for adding new
extended data to the struct sof_ipc_comp, usually only minor ABI version
bump needed for every update with this new solution.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",76,25,0
"thesofproject/sof","d20f1d8a85e7342a74e7f3865681d21b3988d3f6","cujomalainey","2021-05-04 01:42:52","false","actions: remove travis

We removed them from the main repo, lets remove them here too.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",81,35,0
"thesofproject/sof","906131a2555a4e279c28c9841ae823ad13e195a0","singalsu","2021-12-09 11:06:09","false","Audio: KPB: Optimize kpb_buffer_samples() function

The audio_stream_read_frag_s16/s32() functions usage and
sample-by-sample copying are replaced by more efficient block
memcpy() operations.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",122,42,1
"thesofproject/sof","17399bf80ece0be7711985002e0f885fcf192be5","singalsu","2020-05-12 15:53:25","false","Audio: EQ FIR: Fix firmware panic in fir_cmd_set_data()

This patch fixes the memcpy_s() assert related panic. The destination
size is computed incorrectly and the bug can trigger with a suitable
size large blob. The blob size after first chunk is no more equals
cdata->num_elems + cdata->elems_remaining. Since the size is available
in cd->config_new->size it can be used for successive chunks to
compute copy destination size.

The traces output is also improved to better show the chunks reception
and total size of the configuration blob.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",96,23,0
"thesofproject/sof","f1a40cff1f180ec3ad79b7156684b5561bd1f7af","zhuyingjiang","2018-10-18 06:39:36","false","rimage: add firmware 1.5 manifest header

add manifest for skylake/kabylake, version 1.5

Signed-off-by: Zhu Yingjiang <yingjiang.zhu@linux.intel.com>",33,5,0
"thesofproject/sof","39205fb5a6880a69f49f76f0fb1ee82f402153a1","andrula-song","2022-03-07 02:13:56","false","Audio: volume: Optimize source and sink buffers usage

This patch replaces the audio stream read/write frag based
access to source and sink by block processing based on
audio_stream_bytes_without_wrap() bytes count. In this way,
the copy and scale volume function can reduce about 25%
cycles for S16, 34% for S24 and 30% for S32.

Signed-off-by: Andrula Song <xiaoyuan.song@intel.com>",116,45,1
"thesofproject/sof","4c16fd491dfed439d282fdaa49bc96d8d9727096","xiulipan","2021-01-26 08:26:28","false","platform: cavs: ipc: change hard code value to defined macro

Change 0x80000000 to IPC_DIPCI_BUSY and IPC_DIPCIDR_BUSY to
increase the code readablity

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",68,32,0
"thesofproject/sof","d1f91efdc1e19093df9c88f0b9779010b0177616","xiulipan","2020-12-04 04:07:57","false","config: add tgl-h toml file to support tglh build

Add tgl-h toml file to support sof-tgl-h.ri binary build

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",71,30,0
"thesofproject/sof","51b1e00063a35864bc069e9840a6e7fae62fc9aa","pblaszko","2023-02-28 15:27:24","false","volume: add support for set attenuation config ipc

Add support for LargeConfigSet:SET_ATTENUATION IPC.

The purpose is to add attenuation adjustment for peak-meter.
To properly mix multiple streams without saturation, driver configures
attenuation to the input copier of each playback stream that is going
to be mixed into one output stream. In some topologies, PeakVol is
placed behind the copier with attenuation, hence its peak-meter value
is artificially scaled by FW. To report valid peak-meter value, FW has to
adjust the measurement by reverting attenuation provided in copier.

Example for 2 streams:
----
    | A   PeakMeter (A*2)
    |<-------------------+
    |                    |
    |     att=2          | A/2
    | A  -------- A/2  -------   ------- A/2
    |--->|Copier|----->|PeakV|-->|MixIN|--+
    |    --------      -------   -------  |   --------   ------
HOST|                                     +-->|MixOut|-->|Aria|-->...
    | A  -------- A/2  -------   -------  |   --------   ------
    |--->|Copier|----->|PeakV|-->|MixIN|--+
    |    --------      -------   ------- A/2
    |     att=2          | A/2
    |                    |
    |<-------------------+
    | A   PeakMeter (A*2)
----
att - attenuation set in copier
A - signal amplitude

Signed-off-by: Przemyslaw Blaszkowski <przemyslaw.blaszkowski@intel.com>",58,57,1
"thesofproject/sof","25804e7dc8ee37f3cb87b0a96b58300478cd3cff","softwarecki","2023-03-31 10:50:25","false","manifest: Use module manifest from toml as a template for elf modules

The manifest for elf modules is read from their .module section.
The modules configuration parsed from a toml file was completely ignored.
After this change, the parsed configuration is treated as a template for
the module manifest.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",56,58,1
"thesofproject/sof","a0e2d961ed4f7eec179011adfe1ea3104f9bab53","softwarecki","2023-07-12 11:46:52","false","format: stream: Add support for unsigned 8 bit format

Defined a new frame type SOF_IPC_FRAME_U8 for 8-bit unsigned samples. Added
support for a new format to stream format conversion function and
get_sample_bytes function.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",31,61,1
"thesofproject/sof","4fa588e67652902c54e9019aaf17f826c83022d5","ranj063","2019-10-22 15:33:58","false","topology: sof-glk-da7219-kwd: fix compilation error

remove the extra closing bracket to remove the compilation error
ALSA lib parser.c:219:(tplg_parse_config) error: unknown section )

ALSA lib parser.c:219:(tplg_parse_config) error: unknown section
pipe-sof-apl-keyword-detect

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",66,17,0
"thesofproject/sof","d8c935885b72edf89a29e5fd0170b442b8b244a3","makarukp","2023-02-01 15:38:03","false","hda: enable chain dma with ipc4 only

Hda chain work only with IPC4 compatible boards, therefore additional
compilation dependency in Kconfig has to be added.

Signed-off-by: Piotr Makaruk <piotr.makaruk@intel.com>",51,56,1
"thesofproject/sof","213d61081ddbceeb3a4ba4998d7057bbc610c7cd","ranj063","2022-12-16 17:02:52","false","module_adapter: Introduce struct module_source_info

Introduce struct module_source_info that will be used to keep track of
all the source modules that are bound to a module. Also, add a new
field, source_info in struct processing_module to save the source
information for each module.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",91,54,1
"thesofproject/sof","f22c284522672cd56e97b560ab138d82b5197f18","ranj063","2023-05-06 20:44:01","false","copier: Use dai_zephyr_reset() for multi endpoint DAIs

In preparation for removing the creation of endpoint DAI devices,
replace the call to the endpoint device's reset op with
dai_zephyr_reset().

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",53,59,1
"thesofproject/sof","1aa95f8e278f45a1a8766307ed0511730c349e75","ranj063","2018-12-03 21:41:39","false","logger: show version numbers with the ABI mismatch error

Show the version numbers along with the ABI mismatch error.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",41,6,0
"thesofproject/sof","0b147603896f16643625be7b2daea94bdce03471","RanderWang","2022-01-21 11:43:21","false","ipc4: add pcm conversion function for new format pattern

In nocodec ipc4 test we have a new format
conversion : 32 bits container 16 bits valid sample bit
to itself. Just copy the source buffer to sink buffer.

Signed-off-by: Rander Wang <rander.wang@intel.com>",114,44,1
"thesofproject/sof","2b572c7d3bd41f7ee8eaa292f34b80533bdef821","lyakh","2023-02-21 14:15:07","false","ll-schedule: fix tasks removed during execution

Zephyr LL-scheduler is supposed to be able to handle tasks, removed
or added while the scheduler is executing. However, there is a bug in
that implementation. If the task, that is currently executing, is
removed, its list head, that links it into the list of tasks, is
initialised. So when trying to get a pointer to the next task we
obtain a pointer to the same task.

BugLink: https://github.com/thesofproject/sof/issues/7084
Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",56,57,1
"thesofproject/sof","d5d2b41c63ab0715c5f122ac1cfcdbaed8df40b1","lyakh","2021-06-18 06:42:35","false","ipc: (cosmetic) reduce the number of ""goto""s, unify traces

Avoid ""goto""s as much as possible, the only acceptable case is
jumping to a function cleanup block. Also unify trace prints.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",73,37,0
"thesofproject/sof","984cf7c280a990bf10967d5a9b905350431689b8","lyakh","2022-08-02 12:07:43","false","ipc: always remove freed buffers from lists

When a component or a buffer is freed, it has to be made inaccessible
from everywhere. Make sure to always delete buffers from lists in
such cases and also to use correct direction macros.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",112,50,1
"thesofproject/sof","0144741651a080f5c05ed0cbfab9fde85f7012eb","lyakh","2022-12-16 17:14:00","false","coherent: allocate memory in coherent_init()

Allocating objects, intended for use with the coherent API must use
specific flags and align allocation size on a cache-line size
boundary. To rid users of these details integrate allocation and
freeing into coherent_init*() and coherent_free*() respectively.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",91,54,1
"thesofproject/sof","3808dfec67a63cc1dfbe439a8a249233dcc618f7","marc-hb","2020-04-11 00:44:50","false","CI: Travis: reduce the number of stages to two

Travis stages are designed not to run after the first that fails. We
never used them for that, only for nicer presentation of
results. Running all tests independently of each other (e.g.: qemu and
doxygen) even when one fails is more important than presentation, so
reduce the number of stages to just two: ""buildonly"" and ""tests""
Travis job name: doesn't look as good alone as when combined
with a stage name but it's enough to identify jobs.

Reducing to just one stage is tempting but it would require a lot more
naming surgery so let's start with this small diff and two stages for
now.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",82,22,0
"thesofproject/sof","a0793de4be7bc4bec0f2f1425193cec705074e03","marc-hb","2021-09-27 20:22:34","false","xtensa-build-zephry:  add more WEST_TOP asserts and heuristics

Do not define a default WEST_TOP at the very start because we may not
have one. Define WEST_TOP only when the user gives one or when we
actually find one. And search harder.

Do not trust optional WEST_TOP user input blindly either. This was
leading mkdir -p to create a bogus modules/audio/ directory.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",120,40,0
"thesofproject/sof","1b1ec6c4920f9e607259a5ad5e1a5580a9cd6fbd","marc-hb","2023-10-23 22:08:51","false","topology/cmake: skip all topologies when alsatplg < 1.2.5

Stop producing corrupted .tplg files when using `codec_consumer` (e.g.:
sof-imx8mp-btsco-dual-8ch.tplg, sof-imx8ulp-9x9-btsco-16k.tplg, ...)

Then we'll be able to finally search/replace ""codec_master"", see revert

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",8,65,1
"thesofproject/sof","4a87d8c96752810d1a80d2b549eafda8f2e03bb4","marc-hb","2020-06-16 06:14:29","false","xtensa-build-all.sh: add tgl with xtensa-cnl-elf. No rimage yet.

Copy the icl and cnl configurations.

This build with the gcc toolchain has NOT been tested on tgl. The
purpose is purely to add the gcc build to CI, avoid future gcc bitrot
and catch more warnings and bugs.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,25,0
"thesofproject/sof","9b83be08de4b95cd7e6cf57c9a4917515cea9df9","plbossart","2021-09-28 17:24:03","false","amd: renoir: clk: fix infinite loop

cppcheck warning:

Checking src/platform/amd/renoir/lib/clk.c ...
src/platform/amd/renoir/lib/clk.c:79:19: style: Condition
'delay_cnt>0' is always true [knownConditionTrueFalse]
 while (delay_cnt > 0) {
                  ^
src/platform/amd/renoir/lib/clk.c:63:23: note: Assignment
'delay_cnt=10000', assigned value is 10000
 uint32_t delay_cnt = 10000;
                      ^
src/platform/amd/renoir/lib/clk.c:79:19: note: Condition 'delay_cnt>0'
is always true
 while (delay_cnt > 0) {
                  ^
src/platform/amd/renoir/lib/clk.c:43:13: style: Variable 'reg_value'
is assigned a value that is never used. [unreadVariable]
  reg_value = 0;
            ^
src/platform/amd/renoir/lib/clk.c:77:21: style: Variable
'acp_srbm_cycle_sts' is assigned a value that is never
used. [unreadVariable]
 acp_srbm_cycle_sts
 = (acp_srbm_cycle_sts_t)io_reg_read(PU_REGISTER_BASE +
 ACP_SRBM_CYCLE_STS);
                    ^
src/platform/amd/renoir/lib/clk.c:84:13: style: Variable 'delay_cnt' is assigned a value that is never used. [unreadVariable]
 } delay_cnt--;
            ^

the delay_cnt variable is obviously in the wrong position.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",122,40,0
"thesofproject/sof","24f3160977cf3780b4f4d48b952eca3f77a155e1","jajanusz","2019-11-07 13:13:28","false","cmake: scripts: relative path define utility

Add helper function sof_append_relative_path_definitions that
defines RELATIVE_PATH per source file for given target.

__FILE is not always suitable as C standard states that __FILE__ expands to
input file name, that usually is absolute path what will cause f.e. .rodata
size to be dependent on where project is physically located on the disk.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",53,17,0
"thesofproject/sof","d2528e101f579cc29172aea319b5813ec0c84858","jajanusz","2019-01-11 20:25:57","false","cmake: bootloader build and meu support

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",55,7,0
"thesofproject/sof","28d790be8873476665a92d6c68ae25e82d0aa92a","jajanusz","2018-11-13 21:04:31","false","platform: increase sof_text size for smp builds

Need 300b for APL and 700b for ICL, but need
to add 2k because of rimage

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",37,5,0
"thesofproject/sof","3caeefd8241ee928e3ad43521fe377b8f383f143","jajanusz","2019-04-04 09:52:08","false","tools: scripts: update host installation path

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",50,10,0
"thesofproject/sof","0c634ab6f7ef10c51a674d5b18e65dfb51a952a2","johnylin76","2022-03-14 07:40:34","false","topology: add waves and waves-2way for sof-adl-max98357a-rt5682 tplg

Add support for waves codec for both two and four max98357a speaker
amplifiers on ADL boards.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",108,45,1
"thesofproject/sof","3f817fd192b7da89610118173bbb2f0b8bd6b7bb","andyross","2023-04-25 18:41:21","false","platform/posix: Update for IPC4

Add new APIs needed for CONFIG_IPC_MAJOR_4=y builds.  Note that many
of these are fairly Intel-specific, meaning they probably don't belong
in the platform layer.  But in this case (fuzzing) it's probably
worthwhile to enable as much code as possible vs. refactoring for
purity.  Future IPC4 hardware platforms will need to do that
refactoring for us anyway.

Signed-off-by: Andy Ross <andyross@google.com>",52,59,1
"thesofproject/sof","0c2f1a6cdce4b44556dc640a7db77d1e337c10b0","keyonjie","2019-06-27 09:03:36","false","sof-ctl: add header_init() for abi header initialization

This will be needed for raw data(without abi header) input file.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",46,13,0
"thesofproject/sof","65217991ddcc639ff5baf8eb84d911bcab72395d","brentlu","2020-11-24 16:00:00","false","topology: sof-tgl-max98357a-rt5682: support rt1011 amp

Add a macro 'CODEC' to generate topology for rt1011 speaker amp.
Add a macro 'FMT' to seperate speaker dai format: s16le, s24le
Modify both pcm name by 'Speakers'

Signed-off-by: Brent Lu <brent.lu@intel.com>
Signed-off-by: Mac Chiang <mac.chiang@intel.com>",78,30,0
"thesofproject/sof","79f97a6a0c07b9eb44e68fd78f8c38ae6a4cc5f3","keyonjie","2020-04-10 16:31:11","false","Topology: utils: add macros to get format values

Add macros to get format values from strings.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",82,22,0
"thesofproject/sof","6e14892bb65daea7ddae7aeed0bad520ca341e05","lgirdwood","2018-11-23 12:43:10","true","Merge pull request #622 from keyonjie/master

IPC: Xrun: fix Xrun stream id error issue",40,6,0
"thesofproject/sof","2796310f89a59e6c3c7c5e68f639ebe33dc398cb","mrajwa","2019-10-30 15:11:25","false","kpb: move validation of host params to prepare()

This patch moves the validation of host params to
prepare() method. Therefore we can tell user right
away something is wrong with his params instead of
waiting till draining.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",59,17,0
"thesofproject/sof","f393ae33d3ce7e52a5176f7bbc73da2635c1ce88","mwierzbix","2018-08-08 11:53:34","false","test: lib/bzero: Added unit tests for lib/bzero.

Signed-off-by: Michal Jerzy Wierzbicki <michalx.wierzbicki@linux.intel.com>",19,2,0
"thesofproject/sof","dd968a62ecab655a545f11b3d3e0ad4a373f7810","tlauda","2020-02-11 13:12:00","false","ll_schedule: fix very rare race condition

Fixes very rare race condition, where one of the cores
finishes its tasks much earlier and is cancelled right away.
num_clients is already set to zero, so there's no need
to subtract.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",79,20,0
"thesofproject/sof","dcc61498f38aa4bcada0f39a6047474f385b121e","tlauda","2018-07-16 11:55:35","false","ssp: clear out FIFO stale samples

Reads SSP FIFO to clear out stale samples.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",12,2,0
"thesofproject/sof","754757ab17f44b9e2b81d8311fd4fcf02b709ace","tlauda","2018-11-22 12:55:23","false","alloc: fix freeing of uncached pointers

Fixes freeing of uncached pointers.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",39,6,0
"thesofproject/sof","01ebad7a1b6aa047ae6fef3eda612ee59f122bd8","tlauda","2018-06-27 10:00:58","false","arch: multicore xtos

Support for multiple cores executing the same code
with the new arch xtensa-smp:
- Updated xtos to the latest version (2017.8).
- Modified xtos to handle interrupts per core.
- Added interrupt structures and stacks per core.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",5,1,0
"thesofproject/sof","5d49c72e34b328a01f2f1fceb5c62c29839025ab","tlauda","2019-04-25 06:11:34","false","smp: fix slave cores initialization

Fixes slave cores initialization by moving interrupt
init before any interrupt registration.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",48,11,0
"thesofproject/sof","4b5110b88ba3c476c0d2a5eb9cf4dceaa738c77f","tlauda","2019-07-17 10:00:23","false","dma-trace: use dedicated trace_buffer_error_atomic macro

Creates trace_buffer_error_atomic macro and changes
usage in dma-trace.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",47,14,0
"thesofproject/sof","21dec616c8cf62475f63a632f780c7c1729bfdaf","tlauda","2019-10-28 07:26:18","false","format: add sample_bytes and frame_bytes functions

Implements functions for sample bytes and frame bytes calculations
based on provided frame format and channels.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",68,17,0
"thesofproject/sof","4bfa7aa55110600bbee5f7310c211db915e1743b","andrula-song","2023-10-31 02:12:56","false","Audio: ASRC: Add IPC4 DAI timestamp ops

Add IPC4 DAI timestamp ops for ASRC.

Signed-off-by: Andrula Song <andrula.song@intel.com>",5,65,1
"thesofproject/sof","7f3b59b88897dd95ab3fb7f0d89390d7d0ae35ed","xiulipan","2018-11-15 06:44:26","false","test: topology: add test topology for CNL

CNL nocodec use SSP0, add SSP0 test for CNL

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",42,5,0
"thesofproject/sof","62ead9661493da05149ec08d9865467e312c984a","XiaoyunWu6666","2022-04-18 09:10:46","false","xtensa-build-all.sh: add ipc4 build support for tgl

Add ipc4 build support for tgl with IPC4_CONFIG_OVERLAY.

If IPC_VERSION is chosen as IPC4, then overlay configuration file
for different platforms will be used automatically without assigning
the configuration file with options.

Different configuration files will be used according to what platform
is building firmware for.

Signed-off-by: Xiaoyun Wu(Iris) <xiaoyun.wu@intel.com>",115,46,1
"thesofproject/sof","39d5365fc72134bb4551decb32086f393b2454be","marc-hb","2021-08-25 15:51:00","false","ext_manifest.h: inline rimage/ext_manifest.sh and reduce rimage dependency

Inline rimage/src/include/rimage/sof/kernel/ext_manifest.h version
9716e10a3e00 into sof/src/include/kernel/ext_manifest.h instead
of #including it.

This makes it possible to build zephyr.elf without rimage and unblocks
SOF uprev https://github.com/zephyrproject-rtos/zephyr/pull/37250

See also similar copy in https://github.com/zephyrproject-rtos/sof/pull/7

The duplication is OK because it is part of a versioned ABI and is
already duplicated in the Linux kernel tree anyway.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",122,39,0
"thesofproject/sof","732c75259d9d6382ec9a2fd693518864937a03f8","marc-hb","2021-03-11 05:35:44","false","scripts: remove XTOBJDUMP and XTOBJCOPY unused since CMake / Jan 2019

XTOBJCOPY and XTOBJDUMP were added in June 2018 by
commit 27795ece0ff9 (""scripts: fix xt-xcc build with wrong config"") for
`./configure CC=$XCC OBJCOPY=$XTOBJCOPY OBJDUMP=$XTOBJDUMP ...` that was
used at the time.

The build system was switched to CMake in January 2019, notably with
commit 9840ecbbfe41 (""cmake: update xtensa-build-all.sh"") and
commit 0fd97adfb0e4 (""cmake: add utility scripts"") that defined
CMAKE_OBJCOPY and CMAKE_OBJDUMP)

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,33,0
"thesofproject/sof","4ec777de52a9b2fcf62ce57eb77639a2d561a771","lyakh","2022-04-13 10:29:34","false","tone: fix buffer acquisition

Instead of acquiring and releasing buffers locally multiple times,
do that once for .copy(), .params() and .prepare() methods.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",117,46,1
"thesofproject/sof","ac5ba211baa96bba6b3523524c1dbb19b86a5fa2","lyakh","2021-07-20 15:07:07","false","pipeline: stop all connected pipelines on xrun

When an xrun occurs we currently stop the affected pipelines, which
also leads to stopping the pipeline task. However, the stream can be
using several pipelines, all of which have to be stopped. If not
stopped, tasks belonging to those pipelines will continue to be
scheduled. This patch collects all connected pipelines and stops them
all.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",91,38,0
"thesofproject/sof","61c91be9fd69e33f29017d1d6d2d481402ba2040","lyakh","2021-04-30 14:23:53","false","scheduler: remove .scheduler_run

The .scheduler_run() operation is never used, remove it.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",82,35,0
"thesofproject/sof","81c1590ef1d7e3b9ac729822ad39f188afb7ca34","lyakh","2022-04-11 10:50:26","false","aria: fix buffer acquisition

Instead of acquiring and releasing buffers locally multiple times,
do that once for the .copy() method.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",115,46,1
"thesofproject/sof","84d7eabde93cbec77f2fadd88d200bca6b8efbfc","lyakh","2019-01-17 09:12:05","false","alloc: eliminate two redundant variable initialisations

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,7,0
"thesofproject/sof","9f4def94aba82b8f8b877cb3aee7309e0df4d270","lyakh","2022-07-29 12:46:48","false","host: use cached buffer access

Protect the buffer while accessing the stream address.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",110,50,1
"thesofproject/sof","90c929d522013521d0f85ef4ca525447a46d9146","ranj063","2023-08-04 23:22:34","false","tplg_parser: mixer: Update the ipc4 builder

Add support for parsing the mixer widget in IPC4 topologies.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",29,62,1
"thesofproject/sof","0a248c87c94830cd95d361c9e26dcb48d21f6e22","ranj063","2023-08-04 23:09:09","false","tplg_parser: tokens: Add support for parsing multiple sets of the same tokens

Add support for parsing multiple token sets belonging to the same group.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",29,62,1
"thesofproject/sof","74bad5f9cb5d7c6b16c86d7ac749b52a19697e55","ranj063","2023-02-18 17:18:43","false","copier: remove redundant check

The loop should already handle the check for endpoint_num.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",55,56,1
"thesofproject/sof","eba5396499e5973c20e96285543823c6e0e284e3","chunxu-li","2022-03-03 07:23:09","false","platform: mtk: add platform driver support for mt8186

Add support for dai, dma platform driver.

Signed-off-by: Chunxu Li <chunxu.li@mediatek.com>",113,45,1
"thesofproject/sof","3da7739b5f0cd4e2d338910d5ac88d17babb3180","aiChaoSONG","2023-02-01 05:22:48","false","config: correct module config load_type

The load_type in extended manifest is used to indicate
if a module is a built-in module(0) or a loadable(1)
module.

We don't have loadable module yet, so load_type should
be zero for all modules.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",52,56,1
"thesofproject/sof","82d8dc9ece4bc69310ef1c50a96d09de19e3ebd1","nashif","2022-10-11 19:47:57","false","app: remove explicit CONFIG_DW_ICTL_ACE_V1X

This config was renamed is automatically selected for this platform, so
no need to include it here.

Signed-off-by: Anas Nashif <anas.nashif@intel.com>",99,52,1
"thesofproject/sof","6c106e1567eed0951e281c1f6e394fc23362241d","mrajwa","2021-04-26 16:14:26","false","cadence codecs: move reset of default values to init

Thanks to this change we reset all params to default values
on start, and reset only. The later is because on reset we
call init again due to lack of explicit reset API for cadence
codecs. Now we can apply runtime params earlier, during prepare or
as soon as codec has been instantiated and they won't be reset.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",84,35,0
"thesofproject/sof","7db073a3542b5d49e483619bfa352e2c046482bb","lgirdwood","2018-11-13 15:20:00","true","Merge pull request #568 from akloniex/fix-ut

UT: Fix unit tests after faulty PRs were merged.",38,5,0
"thesofproject/sof","53e8c47591c44dd8bfb075f9d8ba5d43142f797d","lgirdwood","2018-08-21 12:36:35","true","Merge pull request #56 from singalsu/tplg_src_save_buffers_ram_proposal

Decrease SRC pipeline buffers RAM size and update PCM configuration",19,3,0
"thesofproject/sof","818b4dfb1b1e1c46d061769bb0a03ab0366909c9","lgirdwood","2018-10-25 09:03:24","true","Merge pull request #507 from jajanusz/platform-streams-increase

platform: increase max streams count",27,5,0
"thesofproject/sof","ed9f915ed67153e1e106b07c5a6d67a35593fcc6","mrajwa","2019-07-29 20:15:58","false","kpb: change KPB state to draining only if draining started

This patches moves the switch of KPB state from RUN
to DRAINING at the time draining task starts.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",51,14,0
"thesofproject/sof","ca704324ef2db87cf3a937d37560a506e8f69af1","lgirdwood","2018-09-05 08:12:33","true","Merge pull request #308 from tlauda/topic/atomic-return-val

atomic: atomic_add and atomic_sub return value",31,3,0
"thesofproject/sof","e4e3cb131cff6047436b741d2de001071e86fa03","lgirdwood","2018-09-18 12:50:37","true","Merge pull request #388 from mmaka1/hda-get-free

dma: hda: get-free-size simplified",37,4,0
"thesofproject/sof","4d48f868fe96b5eeb2168277a3d4ba0fc154ed8e","mrajwa","2020-07-09 18:39:46","false","KWD: performance improvements

This patch improves overall key word detector
pipelines performance by skipping unnecessary
checks & calls.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",77,25,0
"thesofproject/sof","9af65849fa92442f635995131c9932102f14f7ea","lgirdwood","2018-09-04 12:09:03","true","Merge pull request #65 from juimonen/m4debug

[RFC] topology: first try of m4 debug macros",30,3,0
"thesofproject/sof","7cd8d06dc5c97c6f969192e85408b6dd5de2ab2a","tmleman","2022-02-04 12:35:38","false","ipc4: handler: fix for overwriting error code

Value return by ipc_wait_for_compound_msg is overriding errors
reported by previous ipc handlers like ipc4_process_module_message.
This is causing false success report visible only on traces.
Error code should be overwritten only when operations fails.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",105,44,1
"thesofproject/sof","816f8919db627d3ffd34c3d92a2d8029bd2c7fa1","ktrzcinx","2020-01-21 11:07:45","false","test: Implement common mocks

In unit tests there are a lot of mocks duplication for mocks related
with memory management and panic routine.
As long as implementation doesn't have any module specific routines
and may be reused, it should be mocked in common mock space.

Marked each mock as WEAK to make it possible to overwrite this
implementation in specific test.

To use assert_false in __panic function, added dependence of
universal_mock from cmock.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",79,20,0
"thesofproject/sof","f4084551e5bb57d78f60c24746b61ad775d3c460","singalsu","2019-10-15 13:07:05","false","SRC: Report properly the non-supported rates combination error

The earlier error message was hard to understand and could be
mistaken as internal fail. A redundant trace message about block
sizes is removed because the block sizes are set in each copy()
in current SRC version.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",66,16,0
"thesofproject/sof","9efdea32d7e4f3f62400936da3e37d2797c0c4a4","ktrzcinx","2019-12-13 11:11:22","false","sof: Remove bypass code for arch_wait_for_interrupt calls

For new version of arch_wait_for_interrupt implementation,
such a workaround is not needed.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",75,18,0
"thesofproject/sof","2263a8bc628b3a3f1e13adc53f88b13e26dc9e1c","ktrzcinx","2020-07-29 07:45:06","false","cmake: Include GIT_TAG in generated version.h file

GIT_TAG is user readable form of used source code version with
commit identifier, what is important for bugs reproducibility,
so it will be convenient to have this information in output logs.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",79,26,0
"thesofproject/sof","f963fa0e49c2a29835ae4a9bad8bb01849b7a920","bardliao","2022-12-19 06:19:14","false","topology2: set NUM_HDMIS=3 topologies

Set NUM_HDMIS=3 for all topologies.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",92,55,1
"thesofproject/sof","1d6887f93dc1a29a18cccfeeeee87ac1210b98bd","singalsu","2020-09-22 16:30:38","false","Audio: Continue volume ramp until all channels are complete

The volume component works correct when all channels receive the same
gain value in volume set command.

This patch fixes a bug that is triggered by applying different
gain values for the channels. The logic with setting cd->ramp_finished
to true caused the check in volume copy() to no more call volume_ramp()
when one of the channel reached their target volume. When the ramp
updating was stopped all other channels remain in intermediate gain
value.

In the fix the logic is set to opposite. Whenever a channel needs a ramp
update it sets a temporary flag. The ramp finish is set only when
no channels needed gain update.

Fixes #3455

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",68,28,0
"thesofproject/sof","5675fc0050d75b8863e9b924d6df410f6e592b34","singalsu","2020-03-20 14:20:22","false","DMIC: Change IPC in dmic_set_config() to use a fixed length struct

This patch was created due to kernel driver code enhancement.
The DMIC was the only DAI type that used variable length arrays for
configuration IPC. It complicated the driver topology parsing more
than necessary. Since the header files for IPC are common also the
firmware side needs similar changes.

The flexible array member pdm[] is changed into a fixed array of
four that is the max. number of stereo PDM controllers in the current
Intel platforms. The DMIC driver code needs minor changes to correctly
handle the changed IPC struct size.

The IPC logic remains as before: The IPC PDM entries do not
correspond to hardware PDM controllers. They are applied per provided
index in each entry. Depending on number of PDM controllers there is
now zeros data after the last defined controller that will be
omitted.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",67,22,0
"thesofproject/sof","df8f9dfc09aedb50dcb62984a928efcd83a03927","singalsu","2023-09-27 15:53:18","false","Tools: Topology2: Add sof-hda-benchmark-eqfir16/24/32-tgl build

This patch adds FIR EQ topologies build.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",19,64,1
"thesofproject/sof","676e72a895fc23a43fb347008b6213e1b00b76dc","singalsu","2018-12-19 13:56:04","false","Topology: EQ IIR: Allow capture with all formats with pipe-eq-capture

This patch adds to IIR EQ capability to convert from s32 source to
s16/s24/s32 sink formats in normal PCM samples equalization. The
feature is useful in microphone equalization where input dynamic
range is high but where pipeline needs to be lower word length. A
typical IIR high-pass response when combined with gain will reduce
the dynamic range by suppressing lowest frequencies from signal to
better fit the smaller sample word length.

The PCM capability in topology macro pipe-eq-capture.m4 is changed to
allow the s16/s24/s32 formats.

The patch also includes 4096 bytes increase to SOF_TEXT_SIZE for CNL
platform.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",51,7,0
"thesofproject/sof","ec2fcf3e345ea87ad9924936a54e1439a217e6af","iuliana-prodan","2021-04-07 18:10:31","false","topology: imx8: add src component with wm8960 codec

This topology works on i.MX8QM and i.MX8QXP with wm8960 codec.
It adds the Sample Rate Converter component for both playback
and capture.

The SRC topology can be used for test bench and real device usage.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",79,34,0
"thesofproject/sof","3d0b2d123ffcb2d448c24f7ed3db6a944b089559","cujomalainey","2021-04-13 21:47:04","false","detect_test: don't check unsigned for less than 0

No point in checking for something that can't happen. Found via
cppcheck.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",81,34,0
"thesofproject/sof","95261a1ebc70feccfe998564eb8fd3a13eac27db","cujomalainey","2021-02-11 20:52:32","false","smart_amp: clarify order of operations

ternary isn't entirely clear what order happens on the left, add
brackets to clarify. Cppcheck complaint

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",73,32,0
"thesofproject/sof","63cba8d0dddd226de0f8d2551aa39ea51de82014","pblaszko","2023-05-25 13:51:35","false","aria: optimize in/out buffer copy

Current implementation use double for loop, copying separately every
sample between circular and linear buffers. This solution is extremely
slow and for some formats consumes even more than 10 MCPS just for data
preparation.

Replacing for-loops with generic wrapped copy functions.

Signed-off-by: Przemyslaw Blaszkowski <przemyslaw.blaszkowski@intel.com>",51,60,1
"thesofproject/sof","918f22c2062628342ab7317d7b60c7b3fa1fdaab","cujomalainey","2020-11-13 22:39:57","false","dai: add fall through markers for clang

for some reason the clang version with oss-fuzz doesn't recognize the
comments so lets add this attributes in the meantime. XCC does not like
them so lets only use them with clang.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",73,29,0
"thesofproject/sof","523fe82732f86c935f471de0cf65723489d1f2f6","andrula-song","2023-04-26 09:27:57","false","Smart_amp: Convert IPC4 dummy smart_amp component to use the module adapter

Convert the IPC4 dummy smart_amp(smart_amp_test_ipc4.c) module to use
module adapter interface. And remove the k_mutex lock from struct
smart_amp_data since the lock is used for bind/unbind thread and process
thread. Now bind/unbind are removed, all lock reference is used in the same
thread so we don't need it anymore.

Signed-off-by: Andrula Song <andrula.song@intel.com>",52,59,1
"thesofproject/sof","7b1d54087cc826175855b006ec40ce2126607933","lyakh","2020-11-19 10:35:28","false","xtensa: move register_exceptions() to init.c

register_exceptions() and exception() are only used in init.c, move
them there.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",74,30,0
"thesofproject/sof","8c16ce371dbfe4e5b8c31320ad2df849ce4c8a22","gmarull","2022-11-23 10:00:48","false","sof: common: namespace common DIV_ROUND_UP macro

DIV_ROUND_UP is a common macro exposed in public headers without
namespacing. Change the name to SOF_DIV_ROUND_UP to avoid collisions
with other systems/libraries.

Signed-off-by: Gerard Marull-Paretas <gerard.marull@nordicsemi.no>",94,54,1
"thesofproject/sof","1621a95f0140f470265b2797c6670f7329d7d1f8","marc-hb","2023-06-08 22:37:48","false","scripts/fuzz.sh: cosmetic move list of CONFIG_s to a bash array

This saves a lot of backslashes and is easier to read. Zero change.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",46,60,1
"thesofproject/sof","45a6d1fb87f4134daf266d8df21cd0858077479b","marc-hb","2021-09-30 04:10:19","false","Fix docker-run.sh so it can be invoked from anywhere

$(pwd) was not a very good idea.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",121,40,0
"thesofproject/sof","2e7296f17f7082b7de77889e86335f529d90c948","marc-hb","2023-10-04 23:42:11","false","cmake: add new ${RIMAGE_TOP} constant

In preparation for changing it, see
https://github.com/thesofproject/sof/issues/8178

No functional change yet.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",16,64,1
"thesofproject/sof","5241050337a062f52f1d30537e96753445453915","dbaluta","2020-01-10 15:07:51","false","drivers: refactor: Make MU implementation generic

Messaging Unit can be found on all i.MX8 platforms so move
the implementation into a common place so that it can be
used by everyone.

Users need to define their own specific MU_BASE address.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",76,19,0
"thesofproject/sof","3724608373c8d5d11b922034cdfaca61c7d4097d","dbaluta","2020-01-21 10:55:05","false","platform: imx8m: Add platform drivers support

This adds minimal support for dma, dai, clk, interrupt and mailbox.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",79,20,0
"thesofproject/sof","939d01d4ffec5b09837e2649e9c6ae664c51cc65","akloniex","2020-01-29 13:51:15","false","cleanup: Remove logger.exe binary that got accidentally added.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",77,20,0
"thesofproject/sof","9fc3833a5deb9b47ab1716143e8ce21d821d7517","fredoh9","2022-06-06 04:52:20","false","docker: dump git log to a file before deleting projects

To track the docker images, need to keep all the hashes of the projects
builts in the image. Log git tree information to
/home/sof/work/sof_git_hash.txt in the docker image.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",116,48,1
"thesofproject/sof","cb4eb46d0a9d2de71f2c17ea3fefd91b16d94dad","mrajwa","2019-04-09 11:14:12","false","KPB: add verification of history buffer size

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",48,10,0
"thesofproject/sof","4a27f3bce0f1817cc40b4fa2bb9239afcdf3a55b","ujfalusi","2023-08-28 10:56:29","false","idc: Add phase definition to IDC_MSG_PPL_STATE extension

Add definitions for pipeline state change phases to be executed when a
PPL_STATE message is handled by a remote core.
The phase can be a combination of:
PREPARE and TRIGGER.
PREPARE will run a configuration (state change preparations) phase on the
	pipeline
TRIGGER will run a a trigger on the pipeline

Set ONESHOT in ipc4_set_pipeline_state() to have both phases to be run in
order to avoid regression.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",25,63,1
"thesofproject/sof","8adbb850448a7a6154cfa222e5cb44184416354c","btian1","2023-06-30 03:46:38","false","perf_cnt: simplify the difference calculation for cycles

Previously, due to cycle get max is UINT32_MAX, so check
and wrap cycles based on INT32_MAX, however, unsigned int can wrap
automatically with minus, remove the check and make
perf difference calculation more simple.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",37,61,1
"thesofproject/sof","c194125b83c21d82243bc9eaa18701d87deba468","marc-hb","2021-06-29 09:01:16","false","zephyr: add notifier_register(ipc_send_queued_msg) in task_main_start()

Fixes #4356

In XTOS SOF, ipc_send_queued_msg() is run by task_main_primary_core(),
the initialization of which has a hard and circular dependency with the
initialization of the EDF scheduler. This EDF scheduler is not part of
Zephyr. Because of the circular dependency it does not seem
possible (nor desirable?) to refactor this code and make it compatible
with Zephyr. So schedule ipc_send_queued_msg() differently in Zephyr:
using a notifier triggered by the periodic Low Latency scheduler.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",84,37,0
"thesofproject/sof","28de0493305e47739686e457400293fc0bd5e1fe","lkoenig","2022-02-10 08:46:54","false","topology1: Fix issue in google-rtc-audio-processing pipeline

This fixes a mistmatch in the PCM capabilities for the Google
RTC audio processing pipeline.

Signed-off-by: Lionel Koenig <lionelk@google.com>",109,44,1
"thesofproject/sof","a0489512866b4e9bd3ccaf3dcb112fc11afd2cf0","tmleman","2023-03-30 08:02:16","false","zephyr: cpu: secondary core idle thread init

Idle thread should be initialize only when core it booting for the first
time. Doing this again would overwrite the kernel structs and the idle
thread stack.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",57,58,1
"thesofproject/sof","9ee413bf468be19bcb240e3ecf24e153d213f7eb","lkoenig","2021-12-14 09:32:41","false","comp: Add initial Google AEC

Introduce a new component to perform acoustic echo cancellation
on capture path using a buffer from the playback as a reference.

1. Put the google_rtc_audio_processing at
$SOF_REPO/third_party_libraries
  - libgoogle_rtc_audio_processing.a
  - libgoogle_rtc_audio_processing_tuning.a
  - libc++.a (Corresponding stdlibc++)
  - libc++abi.a
2. Put the header in $SOF_REPO/third_party_includes
  - google_rtc_audio_processing.h

3. Build firmware and tool with xcc

4. To verify it works:
  - aplay some speech
  - At the same time arecord the mic which uses AEC
  The mic signal should not exhibit any echo from the playback.

Signed-off-by: Lionel Koenig <lionelk@google.com>",112,42,1
"thesofproject/sof","c0db6cae86a8c2fb249fa757bcdb8e82ad9ef640","dbaluta","2020-04-13 08:30:28","false","drivers: imx: sdma: Fix SDMA scripts offsets

These numbers are used for i.MX8MP and are in agrement
with Linux sdma driver.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",82,22,0
"thesofproject/sof","3c5c7b848db6c88db30bd1b9083deade7bf600fb","dbaluta","2020-11-23 13:51:39","false","drivers: imx: sai: Use rate from topology

So far we only used topologies with rate set
to 48KHz. This is no longer true now when
we enabled KWD pipelines.

So, use rate from parameters passed from kernel.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",75,30,0
"thesofproject/sof","3fdd722ea79adbcfbe2dc8d43140b095de4adc32","dbaluta","2020-01-22 09:36:25","false","platform: imx8m: Mark timer as SHARED_DATA

Timers can be shared between cores, so we need to mark
timer as SHARED_DATA in order to benefit of the newly
introduced platform_shared_commit() API.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",78,20,0
"thesofproject/sof","a379cc375102130e4798b77b7164a0c040eebfde","plbossart","2021-06-24 15:45:37","false","topology: CMakelist: disable DYNAMIC pipelines for nocodec topologies

We first want to enable the simplified topologies, then multi-core
then dynamic pipelines. The latter two cases will be handled in
follow-up patches.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",74,37,0
"thesofproject/sof","33ea9ea5ab1b81f26a03a42c60aef8a3bff819ba","btian1","2022-10-12 03:16:05","false","profiling task: modify task profiling with performance counter macro

This patch is used to make sure profiling code only can be run
with performance profiling build, and unify all performance profiling
with same format and usage.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",99,52,1
"thesofproject/sof","3253175a5c4ba517e274421477dafc9909bfa084","marcinszkudlinski","2023-08-23 13:27:30","false","source API: mark data pointers as const

Data provided by source interface cannot be modified in any way
by the module using source API.
Mark pointers as const

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",26,63,1
"thesofproject/sof","3aff4598f7ebd79d8cfb0398d85a85bbf4ba37e1","singalsu","2022-04-01 18:22:03","false","Audio: SRC: Increase length of internal buffer

The too small size of this buffer caused a new 11025 to 8000 Hz
conversion pipeline to freeze due to impossible condition in
source/internal/sink buffers.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",110,46,1
"thesofproject/sof","aa29d0623144172551199b5b433d9f453aff361d","singalsu","2018-12-12 14:14:11","false","SRC: Update all coefficients, add 50 kHz support

This patch adds 48 <-> 50 kHz rate conversions, removes from tiny set
24 kHz due to no ALSA support, and removes from std set the no more
needed 18.9 kHz.

The tiny coefficients are trimmed down in quality and computational
complexity to just run on APL platform as gcc compiled to allow debugging
and validation of the most complex 44.1 <-> 48 kHz conversion.

The std coefficients are trimmed to slightly lower bandwidth
20 kHz @ 44.1 kHz instead of earlier 22 kHz @ 48 kHz. This allows the
new larger set to not consume more RAM than old.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",45,6,0
"thesofproject/sof","bb683099b87e18023e3290e8a301f4e8af5b6282","singalsu","2021-06-08 11:13:21","false","Drivers: Intel: DMIC: Fix FW panic caused by too eager dmic_remove()

This patch fixes an FW panic that could be triggered by multiple
DMIC DAI capture when pausing, stopping, and resuming. A sequence like
this crashed in last operation

start capture on dmic0, dmic1
pause 0
stop 1
resume 0

It was caused by dmic_remove() for dmic1 that issued pm_runtime_put_sync()
for DMIC clock and power, and freed the dmic_prm[] that resume for 0
needed.

commit 282fe224d83b (""dmic: fix pause/release error leading to invalid
dmic_active_fifos"") solved the panic but left the HW start/stop sequence
details incorrect.

commit 73e6a6fab19e (""Driver: Intel: DMIC: Remove state check from
active FIFO mask update"") re-introduced the FW panic issue in multiple
DAI capture.

This should be a proper quick fix for pause handling. A successive
patch will clean up the DMIC component data and do this in a nicer
looking way.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",79,36,0
"thesofproject/sof","7564e5fc8c8f719686f545ec83476ee16a39e589","singalsu","2023-02-20 13:39:19","false","Tools: Topology2: Add high-pass IIR to HDA headset capture

This patch includes to sof-hda-generic.conf the new
highpass-capture-be.conf as passthrough-capture-be.conf replacement
that adds to DAI copier pipeline the IIR high-pass filter. The
response is hard coded to 0 dB amplification and 40 Hz cut-off.

The analog microphone headsets creates a strong DC input when the bias
voltage settles. It can be even full-scale and sound very loud. The
high-pass filter suppresses such input signal.

Fixes #7116

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",55,57,1
"thesofproject/sof","fddd1bad4673669bd8b4219baa3eb9b860e61de2","cristinailie","2021-03-18 10:04:12","false","kwd demo: define & allocate acquisition buffer to gather once more frames necessary to detection algorithms

Define & allocate acquisition buffer where
collecting the necessary amount of input data
required by the detection algorithm. In our
case the kwd_nn detection algorithm requires
~1s of data once which is more than what
the current configuration of  the pipeline
offers once: 20ms of data.

Signed-off-by: Cristina Feies (ilie) <cristina.ilie@nxp.com>",72,33,0
"thesofproject/sof","4bfef7e8a22368d6ea867e67c8c59b1429a7467c","ranj063","2022-02-23 04:40:12","false","codec_adapter: rename ca_copy_from_source_to_lib

rename it to ca_copy_from_source_to_module(). No functional change.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",107,45,1
"thesofproject/sof","958ed657c11d4322bab264ad5267980e226772a6","ranj063","2019-03-14 19:38:34","false","topology: merge sof-byt-nocodec and sof-cht-nocodec m4 files

Merge the 2 m4 files and use the PLATFORM defined during
compilation to generate the appropriate topology.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",69,9,0
"thesofproject/sof","0d5aa7d402387b7415cca78a3bfc1c5041a9fb81","ranj063","2022-03-23 22:31:38","false","codec_adapter: rename codec_adapter_cmd()

to module_adapter_cmd(). No functional changes.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",109,46,1
"thesofproject/sof","0fdfca96d63bf262360cbc81cc507c16599e97a7","ranj063","2022-01-10 22:27:50","false","codec_adapter: fix typo in error message

It's free not reset and while we're at it, remove the unnecessary braces
too.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","dac5759fe66706844253119cffebe1624bcfa711","abonislawski","2022-08-19 09:44:25","false","probes: add IPC4 support

Add IPC4 support for extraction & injection probes
IPC4 header changes, checksum calculation
moved checksum from header to the end of data packet

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",111,51,1
"thesofproject/sof","4df1382692c5cf38579e05d666297e4732a51df4","ranj063","2022-01-11 00:37:39","false","codec_adapter: cadence: modify the signature of init_memory_tables()

To pass the struct processing_module pointer as input.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","8397711d647f256e5c19980dd91feda5117285c1","lyakh","2022-04-21 10:43:35","false","heap: heap_alloc_aligned_cached() returns a cached address

heap_alloc_aligned_cached() is a helper function used to allocate
memory with a cached alias. Therefore its returned pointer should
use the __sparse_cache annotation.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",115,47,1
"thesofproject/sof","8a48c787041b165860712637b41e9cf83f7d883c","lyakh","2023-01-17 15:16:51","false","topology2: add a mixin-mixout level to nocodec

Add a second level of mixin-mixout mixing and a PCM to the nocodec
topology.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,55,1
"thesofproject/sof","119b326d7323d54104584068e77881ccf851ad8b","plbossart","2019-05-24 21:27:34","false","kmod_scripts: fix hdaudio support

Missing modules obviously.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",64,12,0
"thesofproject/sof","abb0015458842c3fdb952831020557d804da3ea9","lrgirdwo","2021-04-21 14:18:29","false","ipc3: remove uneeded casts

These casts are not needed so remove.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",90,35,0
"thesofproject/sof","1a1a558ac01242f0e6c9a2118724d367688393d3","jsarha","2022-09-23 06:26:05","false","tools/probe: Remove unused write_data() function

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",97,52,1
"thesofproject/sof","6dd5e22f32fe95e162e3c9fd0fbec3e9b42284a2","PayalKshirsagar","2020-03-25 09:48:14","false","src: platform: intel: cavs: lib: remove unnecessary parentheses

Remove unnecessary parentheses around the right hand side of an
assignment.

Signed-off-by: Payal Kshirsagar <payalskshirsagar1234@gmail.com>",66,22,0
"thesofproject/sof","52c4da5c9545f29a9e97d32bce5aab18c52845d2","dbaluta","2023-10-05 11:29:04","false","drivers: imx: sdma: Introduce new SDMA channel type

Based on this we select proper firmware in order to
support multi-fifo.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",16,64,1
"thesofproject/sof","6088b7b898b10deb54400bbedc68e03201802140","lgirdwood","2018-07-24 08:53:16","true","Merge pull request #140 from xiulipan/daiindex

dai index alignment",13,2,0
"thesofproject/sof","4c0b1d4712f67803fc981dcecdfbf26dad257fd5","lgirdwood","2018-09-03 18:32:08","true","Merge pull request #303 from dabekjakub/list_delete

list: added list_item_del_init",30,3,0
"thesofproject/sof","3ff3b61886eecbc9dafcf1bddcf0387876639fbf","mrajwa","2019-04-18 19:38:18","false","CMOCKA: removed old memory allocation in testcases of KPB

The KPB component has changed its buffering
algorithm therefore its test cases needs to
be changed accordingly.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,10,0
"thesofproject/sof","d1ae32a3227c7911588c14c465e433b9c9ff1ea1","keyonjie","2019-07-10 07:42:22","false","topology: sof-cml-rt5682: refining for dmic16k pipeline

Add volume component, change to use 16KHz sample rate, and modify the
PCM ID from 5 to 8, as it is in lower priority comparing with pipelines
like amplifier.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",42,13,0
"thesofproject/sof","c0a2697f323b974ab40c23bd8f6d33444bd7e42b","lrgirdwo","2019-01-29 13:34:07","false","gitignore: remove autotools ignore files.

Autotools not used anymore so remove ignore files.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",57,8,0
"thesofproject/sof","0375c21e805d834f77df078d5202ab5a4c0f85fd","lgirdwood","2018-08-03 00:21:09","true","Merge pull request #188 from kakulesza/add-align-up-down-macros

format: add align up/down macros",14,2,0
"thesofproject/sof","f2ea60962beda65921f526eab6b6ecf6589d58de","lgirdwood","2018-08-01 14:54:39","true","Merge pull request #178 from tlauda/topic/issue-168

pipeline: schedule capture pipeline also after stop",19,2,0
"thesofproject/sof","0eabf51c9d135ac1761b6c248a9ff58ea502139a","mrajwa","2019-12-11 13:01:34","false","kpb: refactor some of KPBs macros

This patch refactor KPBs macros:

KPB_SAMPLING_WIDTH to KPB_SAMPLES_PER_MS as this is
exactly what this macro stands for - the amount of
samples we take each milisecond.

KPB_NR_OF_CHANNELS to KPB_NUM_OF_CHANNELS as the later
is more meaningful

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",73,18,0
"thesofproject/sof","12d5b1358e82208826c358ad6703f0c0421c559d","plbossart","2021-02-09 19:50:20","false","topology: intel-generic-dmic: add macro for PCM device names

Add macro to allow the use of ""BufferedMic"" instead of
""DMIC16kHz"" in KPB usages.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",71,32,0
"thesofproject/sof","25217514d7836e773663b5f31e2c53a5016f57f0","lgirdwood","2018-11-26 20:10:50","true","Merge pull request #627 from bkokoszx/logger-abi-verification

tools: logger: logger abi verification",41,6,0
"thesofproject/sof","634c65fa47f5a55c5add410f8b0ac85b6db4769c","keqiaozhang","2023-03-07 05:15:30","false","west.yml: upgrade rimage to d32db50

Pull in following rimage changes:

d32db50 mtl: add Aria module to extended manifest
5bc2010 rimage: fix build error
35bc644 mtl: add eq-iir and fir support
6fad356 rimage: Removed hash context from image structure
6c7a151 hash: Remove old hash functions
d258ea2 manifest: pkcs1_5: Use new hash functions
2bd8be3 hash: New hash functions
93c5e8b misc_utils: Move byte_swap function to new misc_utils.c file
9ce1cc8 ext_manifest: Fix fw_ext_man_cavs_header version
a4ca53c toml_utils: Adding support for decimal numbers in hex parser
5ebbd65 rimage: use hex number
36c0c90 elf: Use the get_file_size function
98c7f7b manifest: Use the get_file_size function
6a64cb9 file_utils: Add a new get_file_size function
055ea7e file_utils: manifest: ext_manifest: Add new create_file_name function
fed69d4 toml_utils: adsp_config: Moved generic parser functions to toml_utils
0931d9c main: heap_adsp release fix
3aa199f config: mtl: set init_config for micsel
d48ad6b adsp_config: add dump for init_config
ffd0542 adsp_config: make the default value zero for init_config
cb9c880 config: tgl-cavs: add kpb, selector and kd support
bf23b5e config: mtl: set KDTEST module_type to 8

Signed-off-by: Keqiao Zhang <keqiao.zhang@intel.com>",56,57,1
"thesofproject/sof","10132777913abbca4d6b60f4d574ad496380105e","joechengxperi","2022-11-18 05:05:15","false","topology1:enable DTS on MT8186

Enable SOF EQ + DTS

Signed-off-by: Joe.Cheng <joe.cheng@xperi.com>",97,54,1
"thesofproject/sof","84de2e32c99234403b3adc5291dc3a60ac004359","RanderWang","2019-02-21 07:31:14","false","timer: BDW: fix DMA trace issue on BDW

On BDW, DMA trace doesn't update trace log to host.
platform_timer_start function would set up some registers
for HW and make timer ready. On BDW, cpu timer is used to
driver work queue while on other platforms, external timer
is used. we don't need to enable timer interrupt now or it
will trigger unexpect interrupt which would make scheduler
in unknown status. timer_enable function would enable it

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",62,9,0
"thesofproject/sof","6ba607461d4063f38ddf58a4c87fb0e97708aa58","RanderWang","2018-07-12 09:31:30","false","tplg: add nocodec topology for icelake

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",13,1,0
"thesofproject/sof","095d1d48ee3c67b0f6a622ab9bb42d0831167af6","ShriramShastry","2021-03-30 10:39:18","false","Math: Added cordicsine function

cordicsine input value range is [-2*pi to 2*pi]

Compared to git hub, proposed solution has following advantage
-  Proposed implementation takes  approx. ¼ [One fourth ] execution time
-  Lookup table size is reduced from 513 to 31 with sizeof(int32) with
   a saving of 481 int32 bytes

Mean and maximum value for the difference between floating to fixed point
output is 3.2136e-09 and 0.0000000596

Signed-off-by: ShriramShastry <malladi.sastry@intel.com>",79,34,0
"thesofproject/sof","5f47509b6757d260a22d1bf8f3e1e15be13b009f","softwarecki","2023-03-31 11:10:10","false","elf_file: Set of new functions for reading elf files

A structure was created to represent a file, a section and a strings
section. Created a new functions to read a elf file, retrieve a section
header based on index or name, read a section contents based on
a header or name, retrieve section name and functions that print file,
section and program headers.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",56,58,1
"thesofproject/sof","1be730182d4c1cb47bba1bbeab745f3b6d31da79","marc-hb","2022-07-06 23:07:36","false","Exclude audio/coefficients/src/src_ipc4_int32_table.h from doxygen

Fixes doxygen warning:

warning: Include graph for 'src_ipc4_int32_table.h' not generated, too
many nodes (89), threshold is 50. Consider increasing
DOT_GRAPH_MAX_NODES.

This code is generated and pollutes doxygen output anyway.

Temporary, manual solution until the `\cond` directive is also generated
by the sof/tools/tune/src/*export*.m script(s)

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",110,49,1
"thesofproject/sof","8a5059a8c0b1e2d67b404efe26e1b79bb6175b5b","lyakh","2020-10-12 13:22:55","false","xtensa: global default core count

Instead of specifying the default core count for each Xtensa DSP
architecture set it globally to the available maximum core count.
The user can still reduce the number to save power.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",67,28,0
"thesofproject/sof","e3eda2213b6fb71102269e83f7a6b70c2f8aaaed","lyakh","2022-01-28 13:42:38","false","coherent: tighten up the API

This patch adds documentation to the coherent API header and cleans
up several potentially harmful operations. Specifically, it isn't a
good idea to modify memory via uncached addresses and then write back
caches, because the latter can overwrite uncached writes. It works
because there is no data in cache at that point, which also makes
that call redundant. Similarly, we are sure not to have any data in
caches when obtaining access to the memory, because otherwise our
spinlock-acquisition operation could be overwritten by a speculative
write back.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",102,44,1
"thesofproject/sof","1de8e74b9e18f488aeedcd936d060b0aa84f3731","lyakh","2022-01-07 13:43:16","false","DMA: remove unused dma_pm_context_{store,restore} operations

.dma_pm_context_store and .dma_pm_context_restore DMA operations are
never used, remove them.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",116,43,1
"thesofproject/sof","41945cfdba84b79683b543314174fe635e4e4652","lyakh","2021-05-18 11:56:47","false","cavs: use safer macros for cache-uncache conversions

Currently conversions between cached and uncached addresses is done
by adding or subtracting the alias offset. This is unsafe because it
cannot be done repeatedly. Setting and clearing the aliasing bit is
safe, but it cannot be used in static variable initialisations. This
patch converts conversions to bitwise operations where possible and
adds a new macro for static variable initialisation and uses it where
needed.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",87,35,0
"thesofproject/sof","0ba90d8e2a142c2ac79cad07d14fbba6310296e5","lyakh","2022-08-04 13:33:57","false","dai: acquire the DMA buffer for access

The DMA buffer in dai.c has to use cached alias for access. Besides
the pointer can be NULL, which has to be checked for.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",112,50,1
"thesofproject/sof","842e4b5b9fd0bf1cf392b22080b0233dec5bf28d","lyakh","2019-03-26 13:20:42","false","interrupt: add doxygen documentation for struct irq_desc

Other global interrupt-related structs are already documented, add
missing documentation to struct irq_desc

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",60,10,0
"thesofproject/sof","014d2624caf7855364807eced3ad9068d8fc5936","gmarull","2023-09-05 08:28:03","false","zephyr: lib: regions_mm: add missing init.h

Because module uses SYS_INIT defined in init.h. Things likely worked
because of indirect includes.

Signed-off-by: Gerard Marull-Paretas <gerard.marull@nordicsemi.no>",23,63,1
"thesofproject/sof","b14e42d48e359ddece060eb052421d053caf9355","abonislawski","2020-05-19 13:59:35","false","tgl: add lps vector to linker script

This will specify memory region for section .lps_vector

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",99,23,0
"thesofproject/sof","166477424a6a09be462939e9443c34d7f9eb942f","abonislawski","2019-02-01 09:50:30","false","add dmic sources only if CONFIG_DMIC enabled

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",59,8,0
"thesofproject/sof","543cf93eb27b02e1536d8dc54e426e61f8cc7ad1","ranj063","2023-01-31 20:23:12","false","topology2: copier: Add a new attribute

The dma_buffer_size is only applicable from the host/dai copiers and
can be calculated using the ibs/obs in the base_cfg in the kernel.

So in preparation for removing the dma_buffer_size token from the audio
format objects, add a new attribute, deep_buffer_dma_ms, in the copier
that will be used to the send the deep buffer DMA size to the kernel.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",51,56,1
"thesofproject/sof","f64cc8f528581539b02adf4861ef8e048cf9e0b6","ranj063","2023-10-13 15:41:31","false","topology2: dmic-generic: Replace use of audio_format objects

Use input_audio_format/output_audio_format explicitly in preparation for
deprecating the audio_format class.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",10,64,1
"thesofproject/sof","6cab99c72994a5fc9636938d5a510354f86a6bb6","groncarolonxp","2019-10-18 13:21:09","false","drivers: imx: edma: fix bytes copied at each iteration

The number of bytes copied at each ieration must
match half the total size copied as we have an
interrupt at HALF and MAJOR loop

Signed-off-by: Guido Roncarolo <guido.roncarolo@nxp.com>
Signed-off-by: Jerome Laclavere <jerome.laclavere@nxp.com>",61,17,0
"thesofproject/sof","084776011a3e929ee10fa6d11c679ad6eeb0bce9","ranj063","2022-07-19 18:17:17","false","Revert ""audio_format: Add macro for converting bytes <-> samples""

This reverts commit 2583398d45c232a4f20c0ec414952fcad4b88227.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,50,1
"thesofproject/sof","a29032420bf33eee7975a6ad52ace99cd0020f88","keyonjie","2019-06-27 10:32:37","false","sof-ctl: add labels to handle failure paths

Add labels in main() to handle kinds of failure cases, with the code
cleanup together.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",46,13,0
"thesofproject/sof","97f78ea3f1e2031066b0886ae18e2c6ed9384abc","btian1","2023-05-24 09:11:36","false","copier-dai: refactor copier parameters

Move dai parameter related code to copier_dai.c with new functions.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",56,60,1
"thesofproject/sof","a815089a2573a1155e71389971e6276e876d4c93","kv2019i","2022-09-08 12:06:36","false","app: set CONFIG_SCHED_CPU_MASK_PIN_ONLY=y for all SOF builds

In many places of SOF code, assumption is that code is only run
on a specific core. This allows to reduce overhead of cache
coherency management. For example this is used in the IPC stack.

In Zephyr, we can force threads to be pinned by default using
the CONFIG_SCHED_CPU_MASK_PIN_ONLY setting. Enable this setting
for all SOF builds.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",105,51,1
"thesofproject/sof","e963aa0e4aad6972e74192351eeefe401a52f159","kv2019i","2021-09-06 15:38:38","false","xtensa-build-zephyr: disable XCC build for Intel cAVS hw

Recently merged rework of multicore support in Zephyr has
broken builds with XCC. Disable XCC based builds in CI until
issue is resolved in Zephyr mainline. Issue tracked as:
https://github.com/zephyrproject-rtos/zephyr/issues/38349

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",119,39,0
"thesofproject/sof","87425baf227e2bb2712b752f34635e5d78c14727","kv2019i","2022-08-11 13:26:22","false","probe-app: add support for non-audio probe buffers

Identify non-audio probe streams and write them out with "".bin""
extension and without the RIFF WAVE header.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",116,50,1
"thesofproject/sof","e5767217d5ffcf24623a042e6fe170c25091b459","kv2019i","2023-03-14 11:06:16","false","volume: add validity check on number of channels

Volume has multiple data arrays sized to SOF_IPC_MAX_CHANNELS
and code that uses these arrays without bounds checks (like
volume_ramp()).

Add a sanity check to volume_prepare() to ensure channels
count is never set to a higher value.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",56,57,1
"thesofproject/sof","092db5e22521393c5f9b371984ea5e5cbe63710d","singalsu","2018-10-23 10:43:55","false","Test: Audio: Fix paths in SRC host version testbench

The directories were restructured lately and this patch fixes the
changed paths issue.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",27,5,0
"thesofproject/sof","4b9d10e5f129fc6daf50029f76eb86e39ec427ae","singalsu","2023-09-18 09:44:10","false","Audio: Volume: Support all volume ramp types in IPC4 mode

This patch adds to enum ipc4_curve_type in peak_volume.h
ramp types for linear and logarithmic with and without zero
crossings detect. The conversion function
ipc4_curve_type_convert() converts the type into
enum sof_volume_ramp for use in volume.c.

The set_volume_ipc4() is changed to use the convert function
and the restriction to select other than windows fade type also
is removed.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",20,64,1
"thesofproject/sof","5b3c350d73c3a21b39c9ad05a14abc70caec899a","singalsu","2023-03-08 10:03:34","false","Platform: Library: Remove dummy function dai_assign_group()

This should avoid error in tools/oss-fuzz build:

sof_ep/install/lib/libsof.a(dai.c.o):
in function `dai_assign_group':
dai.c:(.text.dai_assign_group[dai_assign_group]+0x0):
multiple definition of `dai_assign_group';
/usr/bin/ld: DWARF error: invalid or unhandled FORM value: 0x25
sof_ep/install/lib/libsof.a(dai-legacy.c.o):dai-legacy.c:
(.text.dai_assign_group[dai_assign_group]+0x0): first defined here

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",58,57,1
"thesofproject/sof","ccd7bcb7edbc596025b7b22210818822396cafe5","singalsu","2021-07-13 09:19:49","false","Drivers: Intel: DMIC: Add sample rate dependence to default ramp time

This patch replaces previous constant 400 ms ramp time with
sample rate dependent first order slope. The Slope coefficient -205
as Q15 and offset 500 as Q0 cause 400 ms ramp for 16 kHz and
200 ms ramp for 48 audio. The ramp min and max time are limited to
previously used check values. The default ramp is used when IPC does
not provide it from topology.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",88,37,0
"thesofproject/sof","f09ebd7b1f6e71b57e7e762acedb26dd87da2d7e","ktrzcinx","2020-09-11 12:47:27","false","host: Log error with comp_err instead of comp_cl_err

Classless method should be used only when device is not accessible,
component pipeline and id may be useful information during debugging.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",65,27,0
"thesofproject/sof","bf7f74f2892b2d4fc9290d513d7797a19706ae33","ktrzcinx","2019-10-28 13:42:32","false","trace: Add pipeline id to mux traces

It will be helpful during debugging components
to see correlated pipeline id.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",68,17,0
"thesofproject/sof","8a8845e5ff6c771ea0bf79c78c2ba5a82a71d530","kv2019i","2022-06-29 12:53:06","false","ipc4: implement mtrace logging support

Handle IPC4_ENABLE_LOGS basefw message. If firmware is built with
Zephyr and CONFIG_LOG_BACKEND_ADSP_MTRACE is defined, initialize
the mtrace logging backend.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",112,49,1
"thesofproject/sof","414089aa442dfdbdab6d37507adffddc09af179e","kv2019i","2022-02-01 12:44:10","false","zephyr: implement arch_cpu_disable_core()

Add implementation of secondary core disable with a call
to SOF runtime-PM framework.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",104,44,1
"thesofproject/sof","39edc7a8448c76b00ea4fc1e9c373ec462a9459d","singalsu","2023-06-30 15:53:49","false","Tools: Tune: Update crossover configurations export for tplg2

The script example_crossover.m is converted to export 2, 3, and 4
way crossover configurations for tplg1 and tplg2.

The crossover parameters like number of sinks, pipeline ids of
sinks, sample rate, and band limits are added to generate blob
filenames.

The changes include fixes for running the script with Matlab in
addition to Octave.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",37,61,1
"thesofproject/sof","74b0e114316c42e0160614f20faeb5f8a5978871","singalsu","2018-08-31 13:02:58","false","EQ IIR: Add check to configuration IPC and potential null pointer use

This patch adds check that EQ confiquration binary contains at least
one channel in channel map. Also move the configuration size get to
be done after pointer has been checked for null.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",27,3,0
"thesofproject/sof","f0b44b48549179a76626832d2abf6f6e6d661ef1","bardliao","2023-05-23 10:14:08","false","Topology2: sdw-jack-generic: add 24 bit format support for sdw jack

Somehow s24_le format is missed.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",55,60,1
"thesofproject/sof","b0b8bc7a34b66a1e819efd8261f0cb854ea37acf","lkoenig","2022-03-08 12:24:49","false","sof-ctl: Allow setting arbitrary size for controls

sof-ctl assumed the binary control were of size of a
multiple of unsigned integer.
This caused the control byte array to be truncated when the
size of the control was 6 bytes.
This change allow setting any size of control in binary form.
Using CSV will always end up with a number of unsigned integer size.

I tested this change using the Google RTC Audio processing with control
of size:
  - 6 bytes,
  - 2 bytes
  - and 4 bytes.

Signed-off-by: Lionel Koenig <lionelk@google.com>",112,45,1
"thesofproject/sof","fabeb638423b2eeb76d9acfa7b3ec54819013a25","aiChaoSONG","2023-04-25 06:16:32","false","Topology2: Add mtl-rt711-l0-rt1316-l23-rt714-l1 support

This topology could be used by MTL SDW RVP with 3-in-1
SDCA codec board, or other hardware configuration with
the same codec layout:
    SDW0: RT711 Headphone
    SDW1: RT714 DMIC
    SDW2: RT1316 Speaker
    SDW3: RT1316 Speaker

Signed-off-by: Chao Song <chao.song@linux.intel.com>",54,59,1
"thesofproject/sof","d527b50816fdfb274c99856e13ef37b9f446d19d","RanderWang","2018-09-03 06:57:46","false","pipe: fix a infinite loop issue in schedule module

There are two paths to delete a task in shedule list. A task would be
deleted when task is completed or cancelled. So it maybe deleted
twice. there is a circle in the schedule list after a sequence
of append-delete operations. This makes a infinite loop in schedule function

Now all of list items are deleted in one place and cancelled when task are complete

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>
Signed-off-by: Rander Wang <rander.wang@linux.intel.com>
Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",28,3,0
"thesofproject/sof","23086814ac44b2ed65a7b41ae4c0de7182af5913","tobonex","2023-09-15 17:56:20","false","google_hotword_detect: remove buffer_acquire from google_hotword_detect

remove buffer ops from google_hotword_detect module

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","096392e1eb18961a4d8f4834f49f54bdc119c9cd","dbaluta","2019-01-27 18:04:08","false","imx8: Add support for NXP i.MX8 platform

i.MX 8 family of applications processor has 3-subfamilies:
	* i.MX 8, for advanced graphics, performance and virtualization
	* i.MX 8X, for safety and efficent performance
	* i.MX 8M, for advanced audio, voice and video

(yes, you are right i.MX 8 is the generic SoC family but also a subfamily).

All of the subfamilies have SoC designs which include a DSP for efficient
audio processing. DSP has direct access to SDRAM and to Audio
peripherals.

https://www.nxp.com/products/processors-and-microcontrollers/arm-based-processors-and-mcus/i.mx-applications-processors/i.mx-8-processors:IMX8-SERIES

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",58,8,0
"thesofproject/sof","680eb9ce7b792cc3e519eade2e1b66dac39c06c1","dbaluta","2019-10-01 10:17:17","false","topology: Add nocodec topology for i.MX8QXP

i.MX8QXP has one ESAI interface. Create a simple topology
without a codec for playback of 2 channels, 16bits samples
at 48Khz.

Host -> Buffer0 -> Volume -> Buffer1 -> ESAI0

This is useful for testing various components like Dummy DMA,
EDMA and ESAI drivers.

For more information about ESAI you can read i.MX8QXP RM at:
https://www.nxp.com/docs/en/reference-manual/IMX8DQXPRM.pdf

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",66,16,0
"thesofproject/sof","e21649c109b6e3f8726cb07cd844e84ec26e5e52","plbossart","2022-03-16 01:33:58","false","topology2: cavs: use macro for PCM devices

The same 'Analog Playback' string is used for the copier stream_name
and PCM caps name. This is not a coincidence but a requirement to
match PCM and widgets. Same for 'Analog Capture'

Use a macro to make sure this 1:1 mapping is not broken.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",107,45,1
"thesofproject/sof","909a3277f1271d91314736fc1eaff35f362176d1","lrgirdwo","2023-08-01 14:43:55","false","ipc4: relax the IPC timeout checks and be nicer to other threads

No need to check every 250uS for ipc completion, relax this to avoid
any busy scheduling.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",30,62,1
"thesofproject/sof","71c8b502a0e4308401143e25ce41e8897c54819f","jajanusz","2019-09-30 17:16:31","false","rimage: rename ri_hash

We are going to have more hashing function,
so they should be named after hashing algorithms.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",66,16,0
"thesofproject/sof","25e243b55f21150f0d939cf768439954219f5cbe","jajanusz","2019-01-30 07:24:49","false","cmake: find python3

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",57,8,0
"thesofproject/sof","f59940a3fc03b59b637d752992d2b800005520be","dbaluta","2021-02-09 11:12:40","false","codec: cadence: Add CADENCE_CODEC_WRAPPER config option

This config symbol adds the cadence_api_function wrapper in the list of
supported Cadence APIs.

This is usually a wrapper over an actual Cadence API function and we
need it in several cases:
 - there is no explicit agreement with Cadence over adding a symbol name
   to SOF.
 - use as a wildcard so that we can easily plugin a codec without
   changing the topology.

In this case, one will create a separate binary that will assign to
cadence_api_function the address of the Cadence entry point function
which shouldn't be exposed in SOF code.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",72,32,0
"thesofproject/sof","2c4f57d0f2f49fd3c32f0f3cdd6c909482d29f7e","cujomalainey","2021-09-21 23:29:32","false","codec_adapter: remove pointless null pointer check

We should always have a dev, and even if we didn't we would crash here
because we logged above in debug using dev and we are logging the
error itself using dev.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",117,40,0
"thesofproject/sof","9e50a02f1b0dabd2225a791d63bd48cd61feb3c6","keyonjie","2021-07-02 05:37:31","false","config: tgl: change image_size to the real SRAM size

We have 46 bank HP and 1 bank LP SRAM on TGL, change to toml config file
to reflect that.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",85,37,0
"thesofproject/sof","5711211e0de8c31de7112c561ec425efe812c073","keyonjie","2019-02-20 08:19:10","false","topology: add support for channel selector component in topology

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",63,9,0
"thesofproject/sof","8e3b930a0219448749f898a84606f643cb353fc5","slawblauciak","2018-06-15 08:30:15","false","math: Comment for the innerworkings of ceil_divide()
Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>

math: ceil_divide - Check the signs of the dividant and divisor before rounding
Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",1,0,0
"thesofproject/sof","b3d71fbbd36b506890681eb6bbaef2e4f331bd39","keyonjie","2020-04-16 09:53:09","false","topology: add blob tlv kcontrols to smart_amp

Add 2 tlv kontrols to smart_amp playback pipeline, the one matched with
struct sof_smart_amp_config is for the component configuration, the
other one is for algorithm blob configuration.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",82,22,0
"thesofproject/sof","c4a74562544603197d644ebb35f82f2248b1b411","ktrzcinx","2021-08-31 10:37:51","false","config: Remove machine_id field

This enum value is used only to distinguish suecreek from other
platforms, which can be done also by platform name.

Manual enumeration, in separate toml files with manual synchronization
in enum definition is quite error prone. After commit
9bf46d3: ""rimage: Add support for mt8195"" and
9716e10: ""config: Add imx8ulp.toml"" there are two different
platform with the same enum value 15 specified, which proves such a
thesis.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",118,39,0
"thesofproject/sof","debaf8f889607406159a13f8bba7d7218243683d","lgirdwood","2018-07-25 19:16:37","true","Merge pull request #33 from ranj063/apl-nocodec

topology: add dmic pipeline to apl nocodec topology",11,2,0
"thesofproject/sof","3b84200c36c251da04397c1382199017bddf1a9f","lgirdwood","2018-11-27 14:14:29","true","Merge pull request #634 from RanderWang/link-dma-config

link dma: allocate link dma channel at dai_config",43,6,0
"thesofproject/sof","983517e359555e944b4de0ec8ac99357fd12e710","lgirdwood","2018-11-27 14:33:57","true","Merge pull request #638 from bkokoszx/logger-rimage-headers

logger: include file_format.h directly from rimage",43,6,0
"thesofproject/sof","eb4373cb6143af0b8f5dbac0c823d8df296ec68b","marc-hb","2021-02-22 07:29:22","false",".github: new installer.yml

Builds everything, stage and check the output of the ""tree"" command

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,33,0
"thesofproject/sof","479809663e2266fdca981dd41607eca79ed0f830","marc-hb","2021-02-22 06:01:45","false","installer: (re)build firmware, topologies and user space tools

One-touch ""make -C installer rsync"" combines fast incremental build,
staging and deploy in one command.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,33,0
"thesofproject/sof","35dda2ae27c73f4be23b5c2b20c3a72a6461a7c2","marc-hb","2023-01-13 00:29:44","false",".github/zephyr: compare Windows and Linux builds

The End.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",55,55,1
"thesofproject/sof","a7c1c52420cbec5b05a18f04209064dceab8036f","marc-hb","2021-07-24 19:51:42","false","scripts/run-mocks.sh: major refactor

Adds --error-exitcode=1 to valgrind options (otherwise what's the point
of using valgrind?)

Skip alloc test that does not pass on HOST (passes with xt-run)

Add help message.

Runnable from anywhere.

Use shell functions
https://github.com/thesofproject/sof-test/issues/740

Fix all quoting issues and other shellcheck warnings.

Add comments.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",99,38,0
"thesofproject/sof","af6586bd812ac1b2f5d8112462bbbcee4e0ce025","marc-hb","2022-05-11 23:59:33","false","checkpatch: update to Linux version v5.17

Minimal, SOF-only differences with v5.17

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",113,47,1
"thesofproject/sof","bec643e265b1bfb603f01ff1c00f263230ab4ad2","jajanusz","2019-10-10 11:52:48","false","icelake: shim: clock status registers

Add registers for checking clock status.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",61,16,0
"thesofproject/sof","27e963522790608a20636c9f7276fd4f2251b8c1","kfrydryx","2022-04-04 06:52:05","false","ipc4: fix pipeline reset trigger from paused state

When pipeline reset was called from paused state, it was not stopped
beforehand. This resulted in improper device turn-off sequence.

Signed-off-by: Krzysztof Frydryk <krzysztofx.frydryk@intel.com>",110,46,1
"thesofproject/sof","e3d0bdc5b503334e3527f081b296c2b79e43a067","ujfalusi","2022-04-22 07:46:55","false","ipc4: handler: Fix tr_dbg string for ipc4_get_large_config_module_instance()

Only two parameters provided and valid for this function.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",114,47,1
"thesofproject/sof","5cd7b64100d3212444f5e5a3cc682e3a2a5705b3","fredoh9","2019-02-27 01:29:40","false","topology: remove unused properties in tokens

Some properties are not populated from the topologies and not being used
by DSP either. Need to clean up token data structures. These are
identified as unused.

comp_tokens: preload_count
dai_tokens: dmac_config

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",68,9,0
"thesofproject/sof","9cddf9613dbf89488b193d3d0d4d17c4abc76208","akloniex","2019-02-21 12:55:16","false","SMP: CNL/WHL/CML prevent power gating on cores 1, 2, 3.

Prevent ROM from powering off any cores on waiti call.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",62,9,0
"thesofproject/sof","8136e514bf5373a3ac0f02782b0f18247dae792c","fredoh9","2022-08-30 17:59:33","false","host-testbench.sh: add FullTest variable and set 0 by default

FullTest variable is by default 0. When fulltest is required,
set the variable and run the script like,

$ FullTest=1 ./scripts/host-testbench.sh

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",112,51,1
"thesofproject/sof","28d156d16d35136634521f4dd97a1ce3ae21bb43","bkokoszx","2019-02-05 10:56:20","false","kconfig: add CAVS_VERSION_* symbols for CAVS platforms

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",58,8,0
"thesofproject/sof","a10e69d2f12b2133a2927e76bc05be94416d9efd","singalsu","2019-03-27 10:37:25","false","EQ: Fix IPC data copy size in new() method in IIR and FIR

The used memcpy_s() has wrong size for destination. It causes the
prepare() method to fail later in component life cycle into sink buffer
resize due to zero config->periods_sink value. This patch fixes the
fail of pipeline instantantion with IIR and FIR EQ components.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",58,10,0
"thesofproject/sof","1df8cf856a6c12263acba3e7e26119a4d1e78e74","singalsu","2022-04-01 12:15:51","false","Tools: Testbench: Fix file component buffer resize

The file component buffer resize was incorrect. It caused some
SRC testbench tests to fail due to insufficient sink buffer
size. The resize of file component source/sink was in prepare().
This patch moves it to one step earlier to params(). Then the
components' check for buffers in prepare() will see the impact
and let them error if the size is not sufficient.

After this change the number of periods in the buffer (from topology)
is preserved in resize. If a test does not run, need to fix the
test topology.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",112,46,1
"thesofproject/sof","77315d436b8644f60e19a2b8a1bd280f78a9f2a2","ranj063","2022-01-07 22:28:08","false","codec_adapter: rename codec_memory to module_memory

Rename struct codec_memory to module_memory. No functional change.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","4cf7e7a627756533f29f99b1e91fb490a16c474d","singalsu","2021-09-13 10:09:18","false","Drivers: Intel: DMIC: Add check for max BFTH value

This patch adds check for BFTH value in the blob. Applying higher
than supported FIFO depth would result to capture fail due to xruns.

This patch also changes some important traces from dai_dbg() to
dai_info().

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",118,39,0
"thesofproject/sof","d27de3a671fc9dfee66fdba742c2ca154175dc87","singalsu","2018-11-29 16:22:28","false","tools: Update eqctl tool and sample configurations for new user ABI

The ext bytes read response parsing needs a fix since it now includes
the ABI header. A warning is printed if max control size is reached.
The example configurations are also updated to contain the header.

The patch also includes new IIR and FIR setup for pass-through
configuration (for testing) that configures the EQ component to totally
pass the filter computation.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",40,6,0
"thesofproject/sof","b1417f95378b09604934272870953bda6612cfb9","lgirdwood","2018-09-26 12:58:11","true","Merge pull request #417 from tlauda/topic/comp_cmd_core

ipc: add support for comp cmd on slave cores",37,4,0
"thesofproject/sof","ad655446fdf21e5fb8875191c20ade832a250a07","singalsu","2023-10-25 14:01:02","false","Tools: Testbench: Remove -Wl,-EL to avoid build fail with xt-clang

The linker option to indicate little endian is unused and the
warning causes build fail:

clang-10clang-10: : errorerror: : -Wl,-EL: 'linker' input unused
[-Werror,-Wunused-command-line-argument]-Wl,-EL: 'linker' input unused
[-Werror,-Wunused-command-line-argument]

clang-10: error: -Wl,-EL: 'linker' input unused
[-Werror,-Wunused-command-line-argument]
clang-10: error: -Wl,-EL: 'linker' input unused
[-Werror,-Wunused-command-line-argument]
gmake[2]: *** [CMakeFiles/testbench.dir/build.make:76:
CMakeFiles/testbench.dir/testbench.c.o] Error 1

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",8,65,1
"thesofproject/sof","0d2af68a9e2bc8454de343722e263f9594fa9d82","ktrzcinx","2020-10-22 06:46:18","false","gitignore: Add checkpatch temporary file to gitignore

Any generated file should be tracked by git to keep repositiry clean.
Such an file should be added to .gitignore to reduce possibility of
accidentally pushig this file to remote branches, eg. after typing
`git add *` before pushing changes.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",72,29,0
"thesofproject/sof","86abd07cbacba10bd44f66e1dfa419694959f430","jwrdegoede","2020-12-27 13:43:07","false","topology: Add sof-byt-wm5102-ssp0 topology file

Add a topology file for Bay Trail boards with a WM5102 codec
connected to SSP0.

These setups works with the standard settings from sof-byt-codec.m4.

This has been tested on a Lenovo Yoga Tablet 2 1015L.

Signed-off-by: Hans de Goede <hdegoede@redhat.com>",74,31,0
"thesofproject/sof","89b1f5054a5a3f339f92fefe694f8a48cac4d79e","gongjun-song","2022-12-16 06:30:46","false","topology1: add sof-rpl-rt711-l0-rt1318-l12

Add sof-rpl-rt711-l0-rt1318-l12. This tplg doesn't include any
local MICs.

Signed-off-by: Gongjun Song <gongjun.song@intel.com>",91,54,1
"thesofproject/sof","7c281d3d894ce8e9b9ea5a6a314c5c9d8e631d3e","lgirdwood","2018-06-21 11:39:20","true","Merge pull request #4 from thesofproject/cavs_common

Cavs common",1,1,0
"thesofproject/sof","b3764048e9b9b0564c88d342a2e269f00fa70d34","lgirdwood","2018-10-18 10:20:44","true","Merge pull request #90 from singalsu/fix_nocodec_dmic_pcm

Topology: DMIC: Reduce PCM capabilities to DMIC configuration",33,5,0
"thesofproject/sof","06c030defc0a8517e66ca767de7ff32e1ad083c8","slawblauciak","2019-03-29 12:46:16","false","math: added crc32

It will compute crc32 of a given area in memory.

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",48,10,0
"thesofproject/sof","1033083200a553f41723943fa77d8dc1830dba37","mrajwa","2020-03-18 15:03:55","false","kpb: add state change to kpb_free()

This patch logs state change in kpb_free() method.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",70,21,0
"thesofproject/sof","47339d2302f445c3b35d50f9720ee649dd2f739b","lgirdwood","2018-07-10 21:25:39","true","Merge pull request #22 from keqiaozhang/tplgfix

topology: fix id for sof_cnl_rt274 topology",13,1,0
"thesofproject/sof","e58aa9048327b95b5f2dd90966430db47ffdd8d5","lgirdwood","2019-04-01 09:29:14","true","github: update feature template

Initial feature template",51,10,0
"thesofproject/sof","b37b8ef00cefc042fcff6a1e42c48491df5baab5","lgirdwood","2018-10-15 15:31:59","true","Merge pull request #104 from bkokoszx/readme_update

readme: upgrade readme with logger instruction",34,4,0
"thesofproject/sof","3debb9e20f74e64c558c0913c94924a09041885f","lgirdwood","2018-07-10 20:25:12","true","Merge pull request #77 from jajanusz/test-flags-fix-warnings

test: fix CFLAGS and LDFLAGS warnings",14,1,0
"thesofproject/sof","f9b8fd815d2210e8817177ef3ab03877e4e58e82","lgirdwood","2018-07-12 19:59:23","true","Merge pull request #91 from tlauda/topic/vol_condition_fix

volume: fix condition in volume_ctrl_set_cmd",12,1,0
"thesofproject/sof","82d29e099cd75c413ed7431e3e27d145d7a127b6","Jiangxinx","2019-02-25 08:54:49","false","Fix issue 1039: Kernel QA scripts are broken.

Signed-off-by: Jiangxinx <xinx.jiang@intel.com>",64,9,0
"thesofproject/sof","2802f2a40a977bad7013338376fae9f47e69ce05","marc-hb","2021-07-12 06:28:35","false","zephyr/docker-build.sh: apt-get install tree

To show the staging area at the end of the Zephyr build

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",87,37,0
"thesofproject/sof","dfaa45c95e92cf32e7d76469539c1c5f56c09bb4","lyakh","2023-01-24 11:25:21","false","zephyr: move primary_core_init() to POST_KERNEL

Zephyr has an elaborate subsystem initialisation framework. Use it
for primary_core_init() instead of calling it from main(). This
prepares for a migration of module initialisation to that framework
too.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","6c3b0ac18b3d5177ea52482f7b7ba78036fdd5a2","lgirdwood","2018-09-10 13:01:45","true","Merge pull request #336 from mmaka1/cherry-pick/hda-dma-init-fix

dma: hda: playback preload phase synced with logical buffer state",33,3,0
"thesofproject/sof","63eb6ffb0a0b81b328c209173f743f5b6750e521","lyakh","2023-03-21 15:05:27","false","cAVS: add alias definitions to cAVS 1.5-2.0

cAVS 1.5, 1.8 and 2.0 are supported by Zephyr, their configurations
need alias definitions.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",57,58,1
"thesofproject/sof","b4e607684017c60652afac7ced8a2e9f326469b7","jairaj-arava","2019-11-17 20:09:20","false","topology: add TGL tplg for max98357a amp and ALC5682 Headset codec

This patch adds TGL topology for the DUT which has the
following audio configuration:
	Max98357A speaker (I2S), ALC5682 headset codec (I2S),
	DMIC, 4 HDMI devices.

Signed-off-by: Jairaj Arava <jairaj.arava@intel.com>
Signed-off-by: Sathyanarayana Nujella <sathyanarayana.nujella@intel.com>",58,17,0
"thesofproject/sof","3cb13e7c74ba7b531f67ad2e45e043740177949f","softwarecki","2023-10-26 15:38:00","false","rimage: module: Fix section order in output image

Fixed the order in which sections are placed in the output firmware image
for platforms using a simple manifest.

Fixes: #8336

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",7,65,1
"thesofproject/sof","1b7f8ed2a6fa0f0944b70a25c9bf5dcff64c6f9c","kuanhsuncheng","2021-08-27 11:31:19","false","drivers: mtk: add afe driver for mtk mt8195

Add afe driver for memif/sinegen.
Add afe-dai.c/afe-drv.c/afe-memif.c for afe common driver

AFE : Audio Front End

The audio front-end essentially consists of voice and audio data paths.

frontend (memif) :
  memory interface,
  UL (uplink for capture),
  DL(downlink for playback)
backend:
  TDM In,
  TMD out,
  DMIC,
  GASRC, etc
interconn:
  inter-connection,
  connect frontends
  backends as DSP path

Note:
TEST_SGEN macro define is just for test

Signed-off-by: YC Hung <yc.hung@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",119,39,0
"thesofproject/sof","3aa199fb07b7d14cb31c5697ccf8b9be9c363d39","aiChaoSONG","2023-02-16 09:46:38","false","config: mtl: set init_config for micsel

The micsel module will use base config extension,
init_config should be one for it.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",53,56,1
"thesofproject/sof","cc21dfa01a78788df67ef4d3892de128bb8d6b74","aiChaoSONG","2023-01-16 08:46:17","false","Topology2: add mixout-gain-smart-amp-dai-copier-playback pipeline

This patch adds mixout-gain-smart-amp-dai-copier-playback
pipeline.

Signed-off-by: Chao Song <chao.song@linux.intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",55,55,1
"thesofproject/sof","c916f3fdd74a986a5d33f8784722bee4528be5a0","tinghan-shen","2022-12-14 05:59:03","false","src: mediatek: Fix MediaTek company name and SPDX checkpatch warnings

The company name should be MediaTek instead of Mediatek.
                                ^                   ^

Signed-off-by: Tinghan Shen <tinghan.shen@mediatek.com>",96,54,1
"thesofproject/sof","219903903dc3b76d12490dd4c201f773139f78c0","ranj063","2022-03-14 23:44:42","false","codec_adapter: remove init_done check

Remove the extra module_process() call when the init_done flag is not
set. Pass all the available bytes to the codec's process callback and
let it handle initialization and processing depending on the number of
bytes available.

Modify all codec implementations to perform init in their first process
callback so as to not break bisect.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",107,45,1
"thesofproject/sof","0e924219f297755fc0387eeedd9737db37839c2d","lgirdwood","2018-10-04 14:15:40","true","Merge pull request #451 from singalsu/eq_fir_heap_rt_1k_proposal

EQ FIR: memory: Add trace error for alloc fail and add a 1024 size buffer",34,4,0
"thesofproject/sof","b66010f0fa011f7d51a6bc53c7558e02f9fc58ae","ranj063","2021-11-18 19:18:38","false","topology2: Add the passthrough and mixin-mixout topologies for cavs HDA

Add the passthrough and mixin-mixout versions for HDA topologies.

They can be built as follows:

For HDMI only passthrough topology:
alsatplg -p -c cavs-passthrough-hdmi.conf -o cavs-passthrough-hdmi.tplg

For passthrough HDA topology:
alsatplg -D HDA_CONFIG=""passthrough"" -p -c cavs-passthrough-hdmi.conf
-o cavs-passthrough-hda.tplg

For mixin-mixout HDA topology
alsatplg -D HDA_CONFIG=""mix"" -p -c cavs-passthrough-hdmi.conf
-o cavs-mixin-mixout-hda.tplg

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",128,42,1
"thesofproject/sof","ac26e70d9526e535275d05a12c74eb3ca2433dd7","ranj063","2023-05-16 21:36:13","false","topology2: host-gateway-capture: use host-copier

Replace the generic copier with host-copier in the class definition and
the instances.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",52,59,1
"thesofproject/sof","9a6b50c4e9ea8881e88c6d7e71b9b0a153713080","libinyang","2023-02-03 07:53:03","false","topology2: set sof-mtl-max98357a-rt5682 DMIC0 pcm id to 99

Set sof-mtl-max98357a-rt5682 pcm id to 99 to make it the same in topology1.

Signed-off-by: Libin Yang <libin.yang@intel.com>",54,56,1
"thesofproject/sof","2ece18ff7efcde594b2719a5350e1c05ddbf2558","lyakh","2021-07-02 12:31:19","false","ll-scheduler: remove unused Zephyr code

SOF under Zephyr has switched over to a separate LL scheduler, this
code isn't used any longer, remove it.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",85,37,0
"thesofproject/sof","2cd668ccfaf4af99b8ce3000a1e8faaa9a796b5b","lgirdwood","2018-11-09 14:30:58","true","Merge pull request #125 from bkokoszx/logger-string-overflow

logger: string overflow warning fix",39,5,0
"thesofproject/sof","de9177b841255816f501f8ffc4853775bbeb9696","ktrzcinx","2021-08-31 09:14:01","false","config: Adjust return type with function name

Function with `parse_uint32` should return uint32_t value

Signed-off-by: Karol Trzcinski <karolx.trzcinski@intel.com>",118,39,0
"thesofproject/sof","60dd8ceef6caaa28fc7d24cea207fb4dfe0f7de3","fuyuntsuo","2021-05-07 09:35:45","false","audio: igo_nr: Moved struct IGO_PARAMS.

Moved struct IGO_PARAMS from igo_nr.c to igo_nr.h
since sof_igo_nr_config needs it.

Signed-off-by: fy.tsuo <fy.tsuo@intelli-go.com>",80,35,0
"thesofproject/sof","870448d374b27da7d7f741e3b5f8412c0f2b3c26","libinyang","2020-02-07 05:41:09","false","topology: add pipe-volume-switch-capture pipeline

This patch adds the capture pipeline which enables the volume and switch
controls. In the switch control, it enables capture LED controlling.

Signed-off-by: Libin Yang <libin.yang@linux.intel.com>",78,20,0
"thesofproject/sof","9ec1039ac5175f9701632024ecd4d573e25a2a92","fuyuntsuo","2021-05-12 09:59:20","false","audio: igo_nr: abstract igo_nr creation API.

Abstract igo_nr creation API.

Signed-off-by: fy.tsuo <fy.tsuo@intelli-go.com>",85,35,0
"thesofproject/sof","596f761bf0df7d6f0859be87da4b7b184b2a15a5","lyakh","2019-09-06 15:10:44","false","ipc: propagate an error from ipc_stream_pcm_params()

Instead of always returning -EINVAL propagate the error code from
ipc_stream_pcm_params() that actually caused the failure.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",60,15,0
"thesofproject/sof","5a090a68cb76ccb4da527d76f85a99afac03e617","lyakh","2023-03-02 16:06:52","false","schedule: remove schedule_task_complete()

schedule_task_complete() is never used, remove it.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",60,57,1
"thesofproject/sof","978957f0c0dfc0a69273edf2b5ef74e7a601c4fe","lrgirdwo","2020-07-06 10:56:40","false","zephyr: ipc: handler: dont use SOF APIs for D3 entry

Dont use the SOF API's, use Zephyr APIs when ready.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",73,25,0
"thesofproject/sof","3262ac178daf7f00ac1281753f3046be76558ef3","lrgirdwo","2019-04-26 14:33:55","false","spelling: wait: fix spelling in xtensa wait.h

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",51,11,0
"thesofproject/sof","af84ef2c6374482177d9153f1f2315a89d32032b","lrgirdwo","2018-08-02 00:59:11","false","ci: travis: Update path to DockerFile

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",18,2,0
"thesofproject/sof","8ee6fcd371479b6a593a92865ecbfbfe3aac9013","lrgirdwo","2021-06-14 10:26:40","false","ipc: dont disable IRQs when searching UUIDs

The get_drv() call currently disables IRQs as the driver list is never
manipulated in IRQ context.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",69,36,0
"thesofproject/sof","3b3beb0b34e4446d05e13c4fc7f22cdbad23676c","plbossart","2021-09-23 21:12:27","false","cavs: hda-dma: fix number of DMAs

The number of host and link DMAs need to be aligned on capture and
playback since they can be coupled/decoupled. The existing code
defined 8 link DMA channels for input and output which does not make
any sense.

This patch modifies the number of link DMAs to align with hardware
specs. The values were doubled-checked in the closed-source firmware,
there is no such thing as 8ch link DMA support.

cAVS 1.5/APL:
capture: 7 ch
playback: 6ch

cAVS 1.8+:
capture: 7ch
playbach: 9ch

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",118,40,0
"thesofproject/sof","fb137dec6b2d0078f8932c2107268eeb24a368ee","plbossart","2019-02-05 22:50:29","false","topology: up2 without HDMI

the kernel supports easy removal of HDMI support, let's add the
matching topology.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",54,8,0
"thesofproject/sof","c5a4f121be9c31693561e773b6c7767c584ad132","lrgirdwo","2018-11-06 16:10:39","false","ipc: remove intel-ipc.h.

Move contents to ipc.h, nothing Intel specific about header

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",39,5,0
"thesofproject/sof","b737019a6f746f6b2f19573411769fbc4618d1c2","jajanusz","2019-06-01 19:33:40","false","cmake: add spdx license identifier

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",72,12,0
"thesofproject/sof","38f18bd082747c7fc0859987c9a034c663118266","keyonjie","2021-07-02 10:54:21","false","memory: apollolake: refine the heap sections size

Reduce the system and system_runtime size, fine tune the size of runtime
and runtime_shared sections.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",85,37,0
"thesofproject/sof","8ec680cf2e457c4f8685f56432121e3914867931","balakishorepati","2022-07-27 09:40:08","false","platform: amd: renoir: Configure dma descriptor

configure dma descriptor base and count during firmware bootup.

Signed-off-by: Balakishorepati <balaKishore.pati@amd.com>",111,50,1
"thesofproject/sof","a564aa293af934fc17280c600cc420a7d7468887","lbetlej","2019-10-04 15:13:15","false","cavs: enable power gating for lp/hpsram on d3 entry

Power gating for HPSRAM & LPSRAM on D3 entry enabled for all cAVS
platforms (cAVS 1.5/1.8/2.x) except SueCreek. Implementation shared
between cAVS 1.8/2.0/2.5 is located in cavs lib, cAVS 1.5 specific
implementation remains in ApolloLake platform directory.

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",65,16,0
"thesofproject/sof","c70284445a5d1f41ea645a3f4a4bb53d1e296f77","lgirdwood","2018-11-19 20:02:19","true","Merge pull request #131 from mwierzbix/coredumper-initial

Coredumper: initial",39,6,0
"thesofproject/sof","8b6afc8371e4acadb95ef288ee437242abe9841b","tlauda","2020-02-04 07:50:11","false","component: add size

Adds component's allocated size to comp_dev structure.
Since most of the components have different sizes, this field
helps with potential reallocation of the component.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",77,20,0
"thesofproject/sof","fe342f020a513488a006921882e49d5dc655fb85","tlauda","2019-07-12 13:09:18","false","lib: cleanup includes

Cleanups includes in all lib files.
Unused headers has been removed and needed
has beed added.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",43,13,0
"thesofproject/sof","7498774514677714dbfa5f1c1f3f48795f242e7b","tlauda","2018-09-20 14:44:27","false","idc: simplify idc_pipeline_trigger

Simplifies idc_pipeline_trigger function by reading
component data directly from IPC buffer. This way
we don't need to send unneeded data through IDC.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",35,4,0
"thesofproject/sof","8d9e61f69881484cafccd4603143655c0524aa9d","tlauda","2020-03-30 07:54:36","false","notifier: add flags

Adds possibility of defining flags, when performing
notifier registration.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",67,22,0
"thesofproject/sof","c613128063d65cbf84c6cdcde49664e2b272e797","tlauda","2020-03-30 08:10:29","false","hda-dma: save irq_disabled in channel data

Saves irq_disabled config flag in private channel data.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",67,22,0
"thesofproject/sof","db655bd3cfedd32426ff45510d9f6120e4a69885","andrula-song","2022-08-04 02:38:58","false","Audio: Pcm_converter: add hifi3 version new functions

Use hifi3 instructions implement new format conversion functions
of pcm_func_vc_map except  pcm_convert_s24_c32_to_s24_c24_link_gtw.
since there are still some bugs in it and it's for windows only.
Will implement this function after those bugs fixed and verified
as the original assumption of author.

Signed-off-by: Andrula Song <xiaoyuan.song@intel.com>",111,50,1
"thesofproject/sof","528ec8f3ebe049622363eb70032d3141dff00907","ranj063","2018-06-28 03:42:02","false","host: move command line args parsing to a separate function

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",6,1,0
"thesofproject/sof","b75a50803f06894b45e9b6bc750c5da9e42fe832","libinyang","2019-11-22 02:48:07","false","topology: add ElkhartLake nocodec support

Reuse tigerlake nocodec m4 file for elkhartlake nocodec
as they are using the same topology.

Signed-off-by: Libin Yang <libin.yang@linux.intel.com>",63,18,0
"thesofproject/sof","b0690f121b0598df4d58dd4ac58677ac61e3ba36","crazoes","2020-04-06 14:09:39","false","scripts: xtensa-build-all.sh: Use getopts

Use getopts to parse the arguments instead of manual parsing to leave no
room for errors, bugs, and inconsistent conventions introduced by custom
implementation.

Signed-off-by: Shreeya Patel <shreeya.patel23498@gmail.com>",80,22,0
"thesofproject/sof","2b0ac19ed7ae8dc84c950c5765d356d74c61884d","cujomalainey","2021-06-04 20:35:21","false","CODEOWNERS: add johnylin as owner

Johny is working a lot with google processing modules, add him as an
owner over all the modules google has contributed.

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",75,36,0
"thesofproject/sof","f5a242badcc97a878f6b4899d2ff27aa461cc305","bkokoszx","2019-02-05 13:28:00","false","kconfig: cavs_ver: using cavs_ver in ipc.c

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",58,8,0
"thesofproject/sof","3436ea54ab740b445bed0a45949230e4923c66b8","bardliao","2023-05-17 05:52:10","false","topology2: add tgl rt712 topology

Add sof-tgl-rt712 support. rt712 is a multi function codec which
shpports headset, amp, and dmic functions.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",52,59,1
"thesofproject/sof","372d3873bd556fd7b5ee731897fc956cfb2c71c9","lyakh","2021-02-01 14:13:38","false","zephyr: make sure non-atomic 64-bit timer is consistent

The Zephyr timer implementation reads high and low 32 bits
in a non-atomic way. Add a loop to make sure the read is
consistent.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",68,32,0
"thesofproject/sof","d79c9190e94a54b514ef3438b4cf16a4d811c5bb","lyakh","2019-02-22 12:04:44","false","schedule: add an irq private data member

Use the platform provided scheduler IRQ number only once and save the
number in a private field.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",61,9,0
"thesofproject/sof","0417aa5f8b2e792793230392bdd1abc4b588fd3f","lyakh","2021-10-29 12:21:56","false","ipc: remove unreachable Sue Creek code

drivers/intel/cavs/ipc.c is never compiled for Sue Creek, sue-ipc.c
is used instead. Remove dead code.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",127,41,1
"thesofproject/sof","756f47afc9cd7c9995516e6cb719c6039dc7d607","lyakh","2021-07-27 20:10:07","false","pipeline: move STOP / PAUSE trigger to the pipeline task

A recent commit moved START and RESUME trigger processing to the
pipeline task for timer domain pipelines. This patch does the same
for STOP and PAUSE.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",103,38,0
"thesofproject/sof","f3eef3cfb6ffd7d519d513e9cb28b52f063aaf89","lyakh","2023-01-03 09:55:39","false","Fix IMR type parsing

The IMR type can be specified either in the TOML configuration file
or on the command line. The command line value should override the
one from the configuration file. But the current code overwrites the
configuration file value with the default value even if no value has
been specified on the command line, which is wrong. Fix this by using
the default value when reading the configuration file and only
overwriting it when the respective command line parameter is used.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",72,55,1
"thesofproject/sof","49199a6aed474b01eb9cb887375cfcbe98b68fdc","tmleman","2023-08-10 10:07:34","false","ipc4: set_dx: ignoring logger status notifications

Before HOST can request FW to enter D3 state, has to stop all pipelines.
If it's done properly all possible source of IPC messages from FW to
HOST are disabled.

The only exception from this is logger. If logs are enabled FW will
continue to produce new traces and eventually trigger threshold
notification.

This notification is not critical so we can skip it during D3 entry. The
message will remain in the internal list and will be sent when the DSP
wakes up.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",27,62,1
"thesofproject/sof","b17a467c7d1a309602a60fa3d5c8c8e3067cf6a5","lyakh","2022-09-07 09:09:24","false","copier: handle an allocation failure correctly

Buffer allocation can fail, return an error instead of dereferencing
a NULL pointer.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",106,51,1
"thesofproject/sof","b0d68a6bc626c3d56b523ae2b53e3062d5ff3deb","jajanusz","2019-09-30 16:43:18","false","manifest: add v2.5 definitions

New version of manifest introduced with TGL platform
uses SHA384 for component hash.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",66,16,0
"thesofproject/sof","74cacc313868d2549c8b79e84b5fe6c39a58cadd","lrgirdwo","2020-07-06 11:00:54","false","zephyr: ipc: dont enable DMA trace transport.

Zephyr trace does not yet support DMA transport. This will be reverted once
DMA trace is enabled on zephyr. In the mean time enable all the trace
infrastructure in preparedness.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",73,25,0
"thesofproject/sof","0de9dfeeeeb53a6491259717c4550d4a06b32ca2","plbossart","2020-04-17 00:26:53","false","topology: sof-apl-wm8804: add capture support

Add duplex capture - tested w/ HifiBerry Digi+

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",82,22,0
"thesofproject/sof","b01ed57e310ebec934471d2230ae1e2c515f71e9","lrgirdwo","2019-04-21 09:09:31","false","test: ipc: Add FW testing IPC foundations.

Add a new IPC global class for FW testing alongside the first ""test"" IPC
command for flooding the DSP with IPCs.

Needs to have CONFIG_DEBUG enabled.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",47,11,0
"thesofproject/sof","375481c4425e59a7c0304d7fee749f8c6623bd3d","plbossart","2021-03-29 22:37:38","false","topology: soundwire: remove hard-coded hex values

replaces with regular base10 indices that are easier to correlate with
kernel/DAPM logs

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",79,34,0
"thesofproject/sof","b5982a46aa88b81ba84a44fb6d6f141b1e286e46","lbetlej","2019-10-14 13:13:17","false","cnl: Access to HPSRAM power gating status register - macro updated
Macro modified for SRAM segments > 0 fixed by register offset
update to a proper value.

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",64,16,0
"thesofproject/sof","b9889d52d0e1b6002ee016b55fa0487544fc0593","ranj063","2022-08-31 16:27:47","false","module_adapter: Modify reset API

Modify the definition of the reset API in the module adapter interface
to make sure that it should reset the module state back to
MODULE_INITIALIZED and free all memory that was allocated during the
prepare() callback. With this change, stopping and restarting streams
will always be guaranteed to invoke the module's prepare() callback.
Also, fix the passthrough and cadence codec implementation to follow the
new definition.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,51,1
"thesofproject/sof","e124baa0fe28d216911764ffbe3bb35ec2357940","ranj063","2021-08-27 00:30:04","false","multicore: buffer: use coherent APIs

Buffer are shared hot data structures that are used across core and cache
boundaries. Manage cached buffer access by stipulating that cached access
is granted by holding the buffer lock (which invalidates) and releasing
the lock (invalidates and writeback).

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",119,39,0
"thesofproject/sof","2b54bacdb2890c7b0ee3b548871f10498d05ab9c","naveen-manohar","2020-09-14 07:07:44","false","topology: add KWD component into sof-tgl-sdw-max98373-rt5682

Add KWD pipelines with vol-kfpm pipe using intel-generic-dmic-kwd template.
- 48K DMIC still uses PCM-4
- Add 16K DMIC KWD on PCM-5
- Correct few minor pipeline numbers in comments

Signed-off-by: Naveen Manohar <naveen.m@intel.com>",65,27,0
"thesofproject/sof","601628695a47402fb4898495478e6edd839cf734","lyakh","2022-03-04 11:04:48","false","sparse: fix all errors

Fix errors, reported by sparse. Some of them really seem to be sparse
limitations, since they don't show up in normal builds, e.g. the
missing __GLIBC_USE definition or some __builtin_* support.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",115,45,1
"thesofproject/sof","206deaf457b4a9d7260ea4cd99220e7d4297099d","singalsu","2018-08-30 10:49:17","false","EQ Tool: Fix compatibility with Matlab and improve accuracy of IIR filters

This patch changes code to allocate filter poles and zeros to biquads
to allow seeing poor SNR due to strong scaling vs. available fixed point
filter word length. The issue was severe especially with Matlab version
of tf2sos() function. The replacement is straighforward z, p frequency
sort. The scaling of biquads was changed to max -6 dB instead of previous
-3 dB to be more safe against internal signal clipping.

The IIR design was changed entirely to be based on zeros and poles
(z, p, k) in intermediate storate instead of polynomial coefficients.
This improves the accuracy especially of low frequencies high-pass
designs.

The default max. IIR order is increased from 12 to 16.

Finally since the grpdelay() function in octave-signal package calculates
incorrect result the group delay computation and plotting is disabled
for now in Octave. It works in Matlab.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",28,3,0
"thesofproject/sof","83093dadea76d0bd262a9aa518be17cf659dd8f2","kuanhsuncheng","2021-09-10 05:41:49","false","xtensa: add atomic and spinlock function with exclusive

In mp_asm.S, if XCHAL_HAVE_EXCLUSIVE is defined,
it will use exclusive instructions,
else it will use s32c1i instructions.

It supports S32C1I and exclusive instruction in xthal_compare_and_set() API.
Refer to xtos-simc-mutex.c, xtos_mutex_p structure is similar to spinlock_t.

For dsp design, we cannot use s32c1i intrcutions in mt8195.

In order to not affect other platform, add CONFIG_XTENSA_EXCLUSIVE and __XCC__
compile options.

Signed-off-by: YC Hung <yc.hung@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",117,39,0
"thesofproject/sof","f4f7263b098f042aade7d0d1daf9a3a8b40a409e","abonislawski","2020-06-18 13:44:13","false","debug: disable stack rewind in exception

this will restore functional backtrace for exception dump because stack rewind
is not implemented correctly

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",77,25,0
"thesofproject/sof","5a0d1df4a6730a56964f30f539876367ca03e949","ranj063","2021-11-16 22:09:28","false","topology: copier: change default cpc

To match the cavs production topology value. It can be overwritten
in the kernel.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",127,41,1
"thesofproject/sof","a169fa356d164da99390fa9db2d764b091884f02","ranj063","2018-06-01 02:29:08","false","host: include host testbench directory for compilation

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",1,0,0
"thesofproject/sof","7a77c50c06a1f9a1d9bf2ab08c3b6eb2098c64ac","btian1","2023-07-11 08:14:35","false","copier-dai: optimize dai copy part

Use small tricks to make dai have better performance, with
this patch, dai single playback performance back to origin
state(before convert to module interface).

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",31,61,1
"thesofproject/sof","b9967598e2941baf3965bc40cc5991f36ac2c6dc","btian1","2023-08-04 02:43:31","false","perf-cnt: add peak mcps count

add peak mcps counter to indicate which period have max mcps.
Also changed sample_cnt to period_cnt to make name more sense.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",29,62,1
"thesofproject/sof","55a352a549273072769557fac51b6734a0c71bb6","fkwasowi","2023-06-15 10:39:24","false","Copier: fix format in attenuation function

Format for validation in the attenuation
function is taken from base_audio_fmt
instead of out_fmt

Signed-off-by: Kwasowiec, Fabiola <fabiola.kwasowiec@intel.com>",44,60,1
"thesofproject/sof","7f2767ca5ebee914dfc86e69dcbaa169755d4c7f","ktrzcinx","2020-10-01 09:17:45","false","logger: Fix uuid formatting

'p + 2' should be smaller than end pointer, bigger value may leads
to undefined memory region read.
Memmove should include last '\0' char.
Without this fix output looks like:
  task add 0xbe070600 pipe-task 0x1fffa0f0U
After changes:
  task add 0xbe070600 pipe-task <f11818eb-e92e-4082-82a3-dc54c604ebb3>

Fixes: 12f2d9b2c822 logger: Refactor UUID parsing

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",65,28,0
"thesofproject/sof","27d4c943f36025f98c6a906baef93372cb53d728","ktrzcinx","2020-06-03 14:08:27","false","testbench: Add UUID for file component

Each component driver should have assigned UUID value and trace
contecxt, to allow generic component creation routine usage.
It's espiecially important for trace context, because it's
accessed by pointer so dereferencing NULL pointer will lead to
segmentation fault.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",93,24,0
"thesofproject/sof","8f318536eff0ce80031dc5d35bb1b404c4398ec5","ktrzcinx","2020-04-22 12:11:13","false","ext_man: Add variables porting macro

Such a macro can be used to port .fw_ready structures to .fw_metadata
section with proper header.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",71,23,0
"thesofproject/sof","36d912153218e7b7c1160d816c0d099e2ffdb3ff","ktrzcinx","2019-12-03 11:39:01","false","mux: Remove artefact from trace in mux_params

There was unintended phrase from trace.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",68,18,0
"thesofproject/sof","70b85f5ec40fc58b7700c8a57787108255c85405","ktrzcinx","2019-10-28 14:17:18","false","trace: Add pipeline id to selector traces

It will be helpful during debugging components
to see correlated pipeline id.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",68,17,0
"thesofproject/sof","cd3689498b0abcef2ab2ee088149107fa622ed64","RDharageswari","2020-09-10 23:45:27","false","topology: Update number of smart_amp_feedback channel on max98373

This patch modifies the number of feedback channels from the
smart amplifier on max98373 codec in sof-tgl-max98373-rt5682.

Signed-off-by: Dharageswari R <dharageswari.r@intel.com>",65,27,0
"thesofproject/sof","51159d80e4c329f20c9c402f8a4758c79f9e430c","singalsu","2023-09-15 11:58:33","false","Tools: Topology2: Fix the gain.conf curve_type values

This patch adds the other SOF volume ramp types linear and
logarithmic with and without zero crossings detect mode to gain
widget class. The names of fade values are changed to be similar
as in enum sof_volume_ramp, since there is a specific curve
shape required for Windows OS.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",20,63,1
"thesofproject/sof","a10e118a4d2567ff7aaba21ea6b8649e4e5b028f","singalsu","2022-08-09 09:49:15","false","Audio: SRC: Cleanup traces in src_params()

The stream format info is useful for debugging SRC issues so it
is added to comp_info() trace print.

The blk_in and blk_out are at this code location always zeros so
the comp_info() to trace them is unnecessary.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",111,50,1
"thesofproject/sof","aded79d417c78c8a3906b4f37ae4323cc76959ad","singalsu","2020-04-29 14:10:16","false","Audio: Set default SRC coefficients to 16 bits for APL platform

This patch adds for SRC component rate conversion filters coefficients
set selection to Kconfig. The menu entry allows to select a 16 bit or
32 bit set.

The default for Apollolake is changed to 16 bits to free up .bss for
other development. There's no known critical usage for SRC so the
lower quality and less conversions available should be acceptable.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",93,23,0
"thesofproject/sof","486ff7673da1016e2a0ade624d62cc94349ec9d5","singalsu","2022-06-03 13:25:00","false","Math: Select BINARY_LOGARITHM_FIXED if log() or log10() is enabled

This avoids need to know that both log functions depend on
base2log.c module.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",115,48,1
"thesofproject/sof","b80338c395616173693bb2e8abf4f760fe0851a5","tlauda","2019-09-25 12:37:44","false","idc: move to cavs drivers

Moves idc implementation to cavs drivers instead of keeping
it in generic xtensa arch directory. IDC is specific for
SMP cAVS platforms.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,16,0
"thesofproject/sof","dbae89b8bb049d52ef61a6d9bd68c4853cf4d708","tlauda","2020-01-15 15:54:35","false","interrupt: make cascade_root shared

Makes cascade_root structure shared across SMP code.
Explicit cache operations are no longer needed and
also platform_shared_commit() calls are used to
synchronize structure.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",75,19,0
"thesofproject/sof","8134a46705c91ef7dfca9439913b1686096a7a26","tlauda","2019-01-23 14:36:14","false","work: fix to the previous change for ASYNC tasks

Fixes previous change for ASYNC tasks.
By mistake it didn't take into account provided timeout.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",58,8,0
"thesofproject/sof","9890d2b782cf0dfb64b060d80403604ae3681c06","tlauda","2019-03-26 16:03:28","false","topology: add missing param to hda-generic-idisp topology

Adds missing param to sof-hda-generic-idisp.m4.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,10,0
"thesofproject/sof","5fa2426fb9c573e52816cfaff24d59e5d1192acc","tlauda","2019-05-16 10:42:45","false","hda-dma: add additional logs to waiting functions

Adds additional logs in case of failure to waiting
functions.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",63,11,0
"thesofproject/sof","1aed447a036928ccb1ebac68fa1353c7fd859121","tlauda","2018-10-15 12:05:52","false","ipc: fix condition for slave core comp cmd

Fixes condition for slave core component command.
It should only be executed on slave core if pipeline
is active. Otherwise master core should handle it.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",34,4,0
"thesofproject/sof","925da68b6349d9b8cce6bfc73b58568b9715fc8c","tlauda","2020-01-14 11:18:29","false","timer: replace timer_data

Replaces void pointer to timer_data with pointers to
timer handler and handler data. We had multiple definitions
of timer_data structure and they were all the same.
This way we can remove unnecessary static data.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",77,19,0
"thesofproject/sof","4b0f1bbb9d26ad44042f78a7e1ea007145d952fd","RanderWang","2022-12-14 06:19:25","false","topology2: add gain and copier in DMIC0 pipeline

This patch will support multiple capture streams with DMIC. The pcm stream
is composed of two pipelines: (1) copier host <- gain <- copier module
(2) copier module <-gain <- copier DMIC. We need to use copier module
to connect two pipelines because of the restriction with the ref FW that
the gain module can only be connected to modules that are in the same
pipeline

Signed-off-by: Rander Wang <rander.wang@intel.com>",96,54,1
"thesofproject/sof","107043f978fe6a56225379566f72a7ade84e3759","yongzhi1","2023-08-30 13:45:59","false","topology2: cavs-rt5682: use macros for all PCM IDs

Make it less error-prone for maintenance.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",25,63,1
"thesofproject/sof","379a455a829feafa4516f15169da8c6426f5ca42","ranj063","2021-09-28 18:37:26","false","drivers: Intel: hda-dma: remove pause/release ops from hda_host_dma_ops

Host DMA is never paused/released. So, remove the pause
and release ops from the host DMA ops.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",121,40,0
"thesofproject/sof","7663447632a90d0f8cf90c78941d812f0debcddb","sathyap-chrome","2019-09-23 17:26:48","false","topology : update max98357a configuration in CML

With m/n divider support, we can now support 24 bit/ 48k
on max98357a.
Add check to only use update BCLK if m/n support is present.
Else fallback to older settings.

Signed-off-by: Sathya Prakash M R <sathya.prakash.m.r@intel.com>",64,16,0
"thesofproject/sof","07a612258e2ad01906860dac4296108a020f6de8","lkoenig","2022-01-17 07:05:40","false","topology: Ensure PCM for detect pipeline

detect pipelines require PCM_ID to be define which is the case only
when they get inserted using PIPELINE_PCM_ADD.

Note that PIPELINE_PCM_ADD and PIPELINE_ADD have different signature.

Signed-off-by: Lionel Koenig <lionelk@google.com>",117,43,1
"thesofproject/sof","d08b894945d05cb6da3917c03564de0a7136cc3e","jsarha","2023-02-02 14:31:17","false","Revert ""topology2: avs-tplg: disable USE_CHAIN_DMA""

The known issues with the pipeline-free chain DMA implementation has
now been solved, so we can re-enable chain DMA usage.

This reverts commit c3807ae4a7617314b753ae7713200e3ae918e039.

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",52,56,1
"thesofproject/sof","89ca17b0f0dda6e3618be1a0f20e11fcb93a0dac","lyakh","2022-09-28 12:17:34","false","zephyr: ll-schedule: fix a race when unregistering the domain

The following race has been observed:

core 0				core 3

				timer IRQ
				spin_lock(&timeout_lock)
IPC IRQ
task remove
zephyr_domain_unregister()
spin_lock(&timeout_lock)
				timer remove
				spin_unlock(&timeout_lock)
k_timer_stop()
z_abort_timeout()
				z_timer_expiration_handler()
				z_add_timeout()

which leads to the LL domain timer being added needlessly and to a
later lock up and an IPC timeout on the host. Fix this by removing
the timer in such cases.

BugLink: https://github.com/thesofproject/sof/issues/6173
Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",97,52,1
"thesofproject/sof","9f293b018d6a5660e30b71ad521f131daa43c86c","ktrzcinx","2020-07-17 10:37:01","false","sof: Add `src_hash` to `sof_ipc_fw_version` structure

This field will be used to compare ldc file with loaded fw version,
to assert validity of trace logs. Value used in sof-logger.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",80,26,0
"thesofproject/sof","51a323445898d66f77df7106102f752eee715043","ktrzcinx","2020-02-27 07:47:39","false","testbench: Fix build error

There was missing argument in file_get_hw_params, what breaks compilation.

Fixes: 2b84838 (""Testbench: Instantiate file component as host"")
Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",75,21,0
"thesofproject/sof","f34d9ba92898f0c9aa8cc9a55aaef8eb75f7194c","ktrzcinx","2020-07-24 13:29:59","false","audio_stream: Calculate sample size inside audio_stream_copy function

Sample size is related with frame format, which is saved inside
audio_stream, so this value can be easily calculated inside
audio_stream_copy function. This approach allows to delete
functions like audio_stream_copy_s16/s32 and functions related
to them, then code will be shorter and cleaner.

Moreover in future, during compressed stream implementation, there
won't be need to add new copy function implementation for compressed
streams, it will be sufficient to return 1 in audio_stream_sample_bytes()
for non-pcm formats, then sample calculation will be equal to number
of bytes and generic function like copy shoudn't have any trouble to
handle such a data type.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",78,26,0
"thesofproject/sof","b6a4bb682cade0f4eb7a9ffe872f6fe46e099a2e","tmleman","2022-04-29 14:37:07","false","platform: Kconfig: add timeout for disabling secondary core

Count of loops used when waiting for secondary core to enter OFF state
in transition to D3 state.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",115,47,1
"thesofproject/sof","eec3e123a43742e07e8825b861b1c3fce1330786","kv2019i","2022-11-03 21:00:35","false","audio: up_down_mixer: add stubs for generic ANSI C version

The up_down_mixer currently depends on Hifi3 intrinsics and
there is no generic ANSI C version provides. This leads to CI
build errors with Zephyr SDK toolchain version, which doesn't
support Hifi/XCC extensions.

Add stubs for the generic implementation to allow the CI
build checks to pass. Code will raise a panic if execution
is attempted as the implementation is missing.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",89,53,1
"thesofproject/sof","a823958a8d2d392e1e73759872c3032fc1f5043c","dnikodem","2022-09-08 11:36:39","false","xtensa-build-zephyr: pass sof build version to rimage

Rimage expects to receive fw_ver_build to prepare the manifest.

Signed-off-by: Damian Nikodem <damian.nikodem@intel.com>",105,51,1
"thesofproject/sof","7f2169201cf9fb91c453508a34395c50888fd333","kuanhsuncheng","2021-09-13 09:45:27","false","kconfig: select XTENSA_EXCLUSIVE for mt8195

there is no s32c1i instructions in mt8195.

it will use exclusive instructions.
(XCHAL_HAVE_EXCLUSIVE is defined in core-isa.h)

Select CONFIG_XTENSA_EXCLUSIVE by default for mt8195.

Signed-off-by: YC Hung <yc.hung@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",118,39,0
"thesofproject/sof","3d5d31462628d838e633730d5770fbf05206fed2","groncarolonxp","2019-10-18 07:15:16","false","drivers: imx: edma: fix accessing register logic

channel must not be accessed when status *is* INIT
Fixes: 61b0b58

Signed-off-by: Guido Roncarolo <guido.roncarolo@nxp.com>",59,17,0
"thesofproject/sof","aa94d2373d6c1fcf7e9737c227b470cba11ef48a","abonislawski","2019-02-11 11:36:29","false","Kconfig: make IIR component a config option

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",59,8,0
"thesofproject/sof","f211f4c9dae7c9d5aba6a90fdfb9f0d9ec27e9a2","ranj063","2023-05-16 20:30:04","false","topology2: host-copier-gain-mixin-playback: Use host-copier

Replace the generic copier with host-copier object in the pipeline class
definition and all its instances.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",52,59,1
"thesofproject/sof","4832dc93881db0a3ad9565b65e822b8ac6fbed52","abonislawski","2023-05-16 17:26:28","false","ipc4: multi pipeline set state on different cores

This will allow to correctly set multiple pipelines state
even if they are allocated on different cores.

ipc4_set_pipeline_state will check if several cores are involved
- set ppl state if only current core requested
- process IPC on another core if only single secondary core requested
- send IDC messages if several secondary cores involved

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>
Signed-off-by: Jaska Uimonen <jaska.uimonen@intel.com>",52,59,1
"thesofproject/sof","48c52ee5ebe0c3779d3b2fc83ea8cd07a960514a","ranj063","2018-06-01 02:29:09","false","scripts: add script for building host library and invoking the testbench

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",1,0,0
"thesofproject/sof","251191832ee4eb81eab4eb6c965e8fbbe4be81b0","ranj063","2022-01-07 21:59:56","false","codec_adapter: rename codec_data to module_data

Rename struct codec_data to struct module_data. No functional change.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","fbe9172f4c3af9580c6568f37cda89d8ac3c6d20","lyakh","2021-12-14 13:16:27","false","zephyr: ll-scheduler: simplify the ll-scheduling worker

Currently the Zephyr ll-scheduler avoids holding a lock for the
entire duration of its scheduling run by using a temporary list.
However, this means, that tasks, added to the list while the
scheduler is running, cannot be ordered properl WRT already queued
tasks. To fix this this patch removes the temporary list. Instead it
now takes care to manually find next tasks with the lock held and
releases the lock when running tasks.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",112,42,1
"thesofproject/sof","5aeb29b5546e43a8303c3386cc1fc0c4673bb380","marc-hb","2021-04-03 00:16:34","false","zephyr/cmake: stop trying to build removed pipeline_static.c

Fixes commit 093589899a2e (""pipeline: remove legacy static pipeline
support"") that broke zephyr compilation.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",79,34,0
"thesofproject/sof","9d78c35de9d1a80bd8442672121f56bb16ba3fb6","marc-hb","2020-06-13 00:24:48","false",".gitmodules: use a relative path

Un-hardcoding makes mirroring possible.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",73,24,0
"thesofproject/sof","46a5de6f49744014f55f424ea692666fdedfde96","marc-hb","2022-06-06 19:31:12","false","xtensa-build-zephyr.py: try to rmdir zephyrproject before cloning

Do not fail when there's only an empty directory left over
because of some early interruption of this script or proxy
misconfiguration, wrong fetch location, etc.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",116,48,1
"thesofproject/sof","7072eb4447c1c69c8121f9142e7faebd0ce14219","marc-hb","2020-09-15 04:28:28","false","travis: run build-tools.sh with CMAKE_BUILD_TYPE=Release

For some reason gcc prints more warnings this way and of course CI is
meant to catch warnings as soon as possible.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",65,27,0
"thesofproject/sof","4823e87f29d96f95704e2334fc2fa7b65c09a5fa","marc-hb","2021-09-02 21:27:43","false","pkcs: quote the name of key file when logging it

This makes is more obvious when the filename is empty, which happened in
bug https://github.com/thesofproject/sof/pull/4711

Also prefix identical log statements with their different __func__
names.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",119,39,0
"thesofproject/sof","60944b31f93e2afa92eb51f4e6d8a63ce94959bb","lkoenig","2021-12-14 08:37:29","false","hal: Add compare_exchange atomics for xtensa.

Add compare_exchange atomic for better support of std::atomic when using
c++.

Signed-off-by: Lionel Koenig <lionelk@google.com>",112,42,1
"thesofproject/sof","06226d00b034921fdb831d7de9c4b240c485248c","ranj063","2022-10-20 18:49:09","false","ipc4: handler: Don't reset pipeline before STOP trigger

When setting the SOF_IPC4_PIPELINE_STATE_RESET for a pipeline,
pipeline_trigger() gets invoked first but the actual STOP trigger
execution could get delayed until the next invocation of the pipeline
task. In this case, pipeline_reset() must be invoked only after the STOP
trigger has completed. Fix this by calling pipeline_reset() in
set_pipeline_state() only if the trigger is not delayed. Also, add the
call to pipeline_reset() in pipeline_task_cmd() after the successful
completion of the STOP trigger.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",96,53,1
"thesofproject/sof","a71c82d78b930951962e48690d7f63483afe29d9","abonislawski","2020-03-11 14:23:21","false","cpu: turn on core memory as first step to enable core

this will allow to access memory from the very beginning
and avoid problems in potential future changes

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",83,21,0
"thesofproject/sof","2874b17a8b97fd9246da9652454531a31ae0d4fa","ranj063","2022-01-14 21:32:08","false","codec_adapter: waves: remove included header

waves.h has been deleted

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",117,43,1
"thesofproject/sof","bcdf037d2cdb6ff0ff4a071be193a34142354fce","marc-hb","2023-10-25 00:29:44","false","rebuild-testbench.sh: drop no-op LDFLAGS=-Wl,-LE

It's not clear why `LDFLAGS=-Wl,-LE` was added in
commit 10d0b3b5e1075 (""Scripts: Add xt-run build target for
rebuild-testbench.sh""). Maybe it was supposed to be `-Wl,-EL`?

Either way this flag has always been interpreted as adding the directory
`./E/` to the search library path, which obviously never had any
effect; proof below. So it can safely be removed.

Here's the proof:

```
mv ~/XCC/install/builds/RG-2017.8-linux/cavs2x_LX6HiFi3_2017_8/xtensa-elf/lib/libm.a .

./scripts/rebuild-testbench.sh -p tgl

  # Fails as expected
  # => XCC/install/tools/RG-2017.8-linux/XtensaTools/bin/xt-ld: cannot find -lm

cmake --build tools/testbench/build_xt_testbench/ -- testbench

  # Same again
  # => XCC/install/tools/RG-2017.8-linux/XtensaTools/bin/xt-ld: cannot find -lm

mkdir tools/testbench/build_xt_testbench/E/
cp libm.a  tools/testbench/build_xt_testbench/E/
cmake --build tools/testbench/build_xt_testbench/ -- testbench

  # => now compiles!
```

Remember: the best way to test software is always to break it.

Don't forget to fix XCC:

```
mv libm.a ~/XCC/install/builds/RG-2017.8-linux/cavs2x_LX6HiFi3_2017_8/xtensa-elf/lib/
```

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",8,65,1
"thesofproject/sof","36b3ff40252f155cc8df8edafea8e1f4a352d505","marc-hb","2022-10-04 23:03:16","false","zephyr/docker-run.sh: log all '*zephyr*' images and align columns

`docker images` has no globbing option so just use `grep zephyr`

This fixes two different issues:
- Fixes tabulation images with names of a different length
- Displays any internal local cache some users may have

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",97,52,1
"thesofproject/sof","318dc9f7e12ca48458ae3186d9a178c335e3b60a","marc-hb","2020-07-09 22:00:49","false","check patch: ABI warning only once per file, not once per line

Stop drowning and missing other warnings.

Example:

 ./scripts/checkpatch.pl -g eaf49e26b4bb~0

- 40 ""Please update ABI..."" warnings
- 2 other warnings including a spelling mistake that were missed.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",77,25,0
"thesofproject/sof","716efc00bc10fef18d493fb50ee644420275f455","marc-hb","2021-03-11 00:41:31","false","xtensa-build-all.sh: 3 times more xcc threads than gcc threads

As CMake forks one compiler process for each source file, the XTensa
compiler spends much more time idle waiting for the license server over
the network than actually using CPU or disk.

On my VM with 16 virtual cores, rebuilding one platform from scratch
with this commit goes down from 12s to less than 9s: more than 25%
faster. With Ninja it goes down from 11s to less than 8s. My license
server is 25ms away: a closer server does not need as many threads while
a more distant server would obviously benefit for even more
threads... while already getting an even better improvement than 25%
from just 3 times more threads! It's complicated and we probably don't
want to start the build by measuring latency to the license server.

The entire, purely local _gcc_ build is so fast (~ 1s) that observing any
the difference between -j nproc and -j nproc*N is practically impossible
so let's not waste RAM when building with gcc.

Also: log the $XTENSA_SYSTEM variable as it is required for incremental
builds; remove one apostrophe in the here-doc usage as it breaks the
parser of some editor (jed).

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,33,0
"thesofproject/sof","aa0ac9eae67506b86e30d66ec75b6f514d729150","marc-hb","2023-07-11 17:27:03","false","rimage.c: fix bug where -p requires a new and ignored parameter

Fixes commit 6e3abe6afed3 (""rimage: Add suport for loadable modules"")

It looks like that commit mistook the `:` sign as a separator. This
accidentally added the requirement to give `-p` a parameter which is
then ignored. Remove the spurious `:`.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",31,61,1
"thesofproject/sof","eed75e08aa2f23a2e9e907f7b1ccfbb4103065fc","marc-hb","2021-10-08 22:18:15","false","cmake: remove spurious run_rimage dependency on run_smex

Preserve the top-level dependency on run_smex (through
copy_dictionaries) so dictionaries are still built by default when
CONFIG_TRACE is true.

Fixes commit dad6b192f622 (""cmake: fix smex dependencies""). That commit
successfully removed the dependency when CONFIG_TRACE is false but it
didn't go far enough: run_rimage is _never_ dependent on run_smex.

This means dictionaries can now be built in parallel.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",121,40,1
"thesofproject/sof","09c69b760751941e6677745b959c7a1500de420b","lyakh","2022-01-06 15:25:58","false","platform/zephyr: remove unused macros

HEAP_LP_BUFFER_* macros aren't used in Zephyr builds, remove them.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",115,43,1
"thesofproject/sof","a4c8d4ef79d9ff9804b752f3464b62f55c00a027","lyakh","2023-04-27 15:09:40","false","Intel: remove XTOS support

XTOS isn't supported any more for Intel platforms, remove support for
it.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",52,59,1
"thesofproject/sof","d4af413687186112a6ddc678c3873d2d7d49ef5b","lrgirdwo","2022-06-03 10:59:29","false","dai: groups: Add a Kconfig option for the DAI groups

Save memory when not used.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",115,48,1
"thesofproject/sof","3e26ca09939ca2893fd75f09cd223bee156d20de","lrgirdwo","2021-01-25 17:06:03","false","pm: memory: fix build for unused function

memory_banks_get() unused on APL when LPSRAM disabled.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",68,32,0
"thesofproject/sof","c8dc91ea53c23551ad6a4b34e03411f638dbae3a","btian1","2023-05-03 15:14:14","false","copier: Expose dai_zephyr_new()/free()

Expose the dai_zephyr_new()/free() functions and use them for
creating/freeing the endpoint device when the dai_count is 1 when a
copier device is created. This is preparation to replace the endpoint
device with the copier device and eventually remove the endpoint device
itself.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,59,1
"thesofproject/sof","3ae99d937a7a6f8fdea7aa3bdc29785b1298a755","andyross","2022-12-02 22:43:42","false","zephyr/wrapper: Handle OOM correctly in rzalloc()

Fuzzing caught this function failing to handle a heap failure and crashing.

Signed-off-by: Andy Ross <andyross@google.com>",103,54,1
"thesofproject/sof","bffe168d895a2dd3b9fc9653c086a847911fe50e","andyross","2023-04-25 18:40:39","false","init.c: Missing header

This calls mailbox APIs when building for IPC4, but was missing the header

Signed-off-by: Andy Ross <andyross@google.com>",52,59,1
"thesofproject/sof","601d2bc41ec7316231b8472d40b0e4a4b04436d3","bardliao","2023-05-25 01:00:38","false","topology2: sdw-amp-generic: set virtual widget type output

Widget type snd_soc_dapm_out_drv and snd_soc_dapm_output will be treat
as virtual widget and be ignored in sof topology in kernel.
We need to set type = output or out_drv in topology when it is a virtual
widget.

Fixes: 3835846836d4 (""topology2: sdw-amp-generic: Show all aggregated DAIs on the graph"")
Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",55,60,1
"thesofproject/sof","da9e0d3c41ac3246f89b378511b34fb3e3ca96f4","singalsu","2020-11-13 18:34:46","false","Tools: Tune: Add tool for DMIC FIR filters setup

This patch adds the the Matlab script dmic_init() that simulates
initialization of the Intel PDM digital microphones decimation
block. The tool computes the needed FIR filters and exports
them as C header files. The script dmic_batch computes all the
currently used decimation settings.

The generated header files from subdirectory include need to be
manually copied to src/include/sof/audio/coefficients/pdm_decim/
and the header file pdm_decim_table.h edited manually if the
header file names were changed due to different filter characteristic
(band frequencies, stop-band attenuation).

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",73,29,0
"thesofproject/sof","81cc31b4ab34dab1378a18f686214256dfe407e3","singalsu","2019-10-15 13:11:07","false","Topology: Add topology to test capture SRC

This patch adds topology sof-apl-src-dmic.m4 to test capture SRC.
The topology instantiates SRCs for 48 -> 8-48 kHz and 16 -> 8-48 kHz
capture. The volume component in pipeline handles PCM format
conversion from the fixed S32_LE DMIC DAI format. Also the bugs in
the earlier non-used pipeline macro are fixed.

The macro pipe-src-capture.m4 is renamed to pipe-src-volume-capture.m4
since it contains a volume component. A new macro pipe-src-capture.m4
is created to provide pipeline building block without volume.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",66,16,0
"thesofproject/sof","312a7cdaee3c67e55f76c8fe07058d4cb51a69a4","tlauda","2019-08-03 09:52:53","false","byt: cht: disable FIR and IIR components

Disables FIR and IIR components for byt and cht
platforms. These are not currently used, so we
can spare some space in IRAM.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,14,0
"thesofproject/sof","b970243586d7bb61692dabac5ef747966f705502","tlauda","2018-08-02 15:00:12","false","dai: stop DMA unconditionally on xrun

Stops DMA unconditionally on xrun without waiting.
Data flush is not needed as pipeline will go through
prepare and restart anyway. Waiting here during xrun
recovery with multiple tasks running causes interrupt
stack overflow. Waiti instruction lowers irq level to
0, which allows to run multiple scheduled tasks in the
same time on the same irq level and ends in DSP panic.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",14,2,0
"thesofproject/sof","736ca2e44600cb095e087cd53738f4da0b725fe9","tlauda","2019-07-25 08:55:22","false","panic: read epc1 only if set

Fixes the bug, where it tried to read epc1 value even,
if the pointer hasn't been previously set. It is only set
when there is an exception.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",49,14,0
"thesofproject/sof","16a5de769e3cb191839fa53ef6be9598bf62a814","tlauda","2020-04-20 08:36:01","false","dw-dma: increase number of linked list items

Increases number of linked list items for platforms supporting
hardware linked list. For timer based scheduling and multiple
pause/release sequences there could be such situation, where
three linked list items are not enough.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",86,22,0
"thesofproject/sof","3ebfe2e3f32ad4983ebcd4a50eb7457985e2a63f","pblaszko","2023-06-12 12:21:19","false","platform: Kconfig: config INCOHERENT by default for all ACE and CAVS

All available ACE and CAVS platforms use INCOHERENT config, so set it by
default.

Signed-off-by: Przemyslaw Blaszkowski <przemyslaw.blaszkowski@intel.com>",47,60,1
"thesofproject/sof","2509d2e37879f07f37c0c1a3e4ef8304d858e835","pblaszko","2022-11-18 08:35:55","false","ipc4: idc: pass pipe and module related ipc to target core

Pass all pipeline and module related IPC's to target core.
In result, all pipeline and module data will be accessed only by the
core on which this resource is allocated.
Such design helps to avoid cache coherency problems without adding
specific invalidate/writeback operations.
This implementation of multicore scenarios is consistent with IPC3 handler.

Signed-off-by: Przemyslaw Blaszkowski <przemyslaw.blaszkowski@intel.com>",97,54,1
"thesofproject/sof","f8d666364a025291d56a2e9c63b58223e83874ce","fkwasowi","2023-07-10 08:49:42","false","ace_version: change to correct version

For ACE we expect HW_CFG_VERSION 0x0.

Signed-off-by: Kwasowiec, Fabiola <fabiola.kwasowiec@intel.com>",29,61,1
"thesofproject/sof","0d5180d804fdc42be0cc1aa4507d932d64c4ed46","MingJenTai","2022-04-29 05:40:59","false","Add MT8195 override config

This commit adds Google RTC processing and RTNR to MT8195 override
config.

Please note that Google RTC Audio mocking processing is used in this
commit.

Signed-off-by: Ming Jen Tai <mingjen_tai@realtek.com>",115,47,1
"thesofproject/sof","0f7c8be8fa3a8b5241dce41bd88928e36d06f4c9","lyakh","2023-01-05 14:05:18","false","topology2: nocodec: add a second level copier

Insert a second copier into the DMIC0 stream to generate a total of
three PCMs from it.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",60,55,1
"thesofproject/sof","1d39806f4e18c26cee6d13324e32b0e70278fce6","lyakh","2020-11-19 14:52:35","false","zephyr: extend the wrapper for generic architecture support

When building SOF with Zephyr for unsupported architectures
the following additional adjustments to the wrapper are required:
1. define HEAP_RUNTIME_SIZE
2. implement stubs for interrupt handlich code
3. remove arch_timer_get_system() as it's provided by a header
4. hardcode ""return 0;"" for platform_timer_get()
5. disable sys_module_init() which anyway isn't yet functional
   under Zephyr
6. add dummy platform_init() and platform_boot_complete()
7. add log_const_sof

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",74,30,0
"thesofproject/sof","b6aad8d205b9e3d257a538962fd1dea44a2a3968","lyakh","2023-09-08 13:21:21","false","smart-amp: remove unused header

platform.h isn't needed in smart_amp_test.h, remove it from there.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",20,63,1
"thesofproject/sof","a25f18a0307c85635083e121366f1d13ec6a6012","lyakh","2022-04-14 12:31:04","false","dts: fix buffer acquisition

Instead of acquiring and releasing buffers locally multiple times,
do that once for the .prepare() method.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",117,46,1
"thesofproject/sof","6a37c8a101530c78964cd536820a38eb8b4d84d7","lyakh","2021-05-26 12:19:38","false","timer_domain: remove a redundant structure member

struct timer_domain::timeout is only set and used once, use the
constant directly to simplify the logic.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",86,36,0
"thesofproject/sof","4df89f5ff7a73a1ccd9508f47cda26017fb65dbc","lyakh","2020-11-19 07:30:16","false","host: fix timer API

Add a required .id field to struct timer and update
arch_timer_get_system() prototype to return uint64_t.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",74,30,0
"thesofproject/sof","8449f249048fc9a64764b85feab0b0c739b722ad","akloniex","2018-11-05 17:20:18","false","debugability: Refactor ipc handler traces to fully utilize trace_event

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",38,5,0
"thesofproject/sof","a730f70cc0732766fd65bbd7f0d135d0db9bdda2","keyonjie","2020-06-01 04:04:54","false","topology: dcblock: add uuid token support

Add the uuid token to dcblock widget for the future use.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",97,24,0
"thesofproject/sof","dc539e82d3b8e8bbea687e710ea316a1c36bd874","ktrzcinx","2019-12-09 11:11:28","false","sof: Add detailed compiler description to sof_ipc_cc_version

For XCC there is passed vendor name - set in build script.
For GCC there is passed empty string.
It will be helpful in reporting compiler dependent bugs.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",73,18,0
"thesofproject/sof","328867431ca74fa7c7101d1a5a441eea462f5f77","ktrzcinx","2020-04-22 10:57:01","false","ext_man: Fix write flow when ext_man should be build

elf_read_section() returns section size when everything is ok,
so ret value should be reset to 0 after this function call

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",72,23,0
"thesofproject/sof","210009c829ddd6fe2dc180a223b6014dca4a7afe","ktrzcinx","2020-09-07 14:33:49","false","adsp: Refactor machine searching

This part should be moved to separate function,
to allow easily add another way of machine description.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",70,27,0
"thesofproject/sof","79393f7c3e612e175c08295d077a2f7ce1a79ba2","lbetlej","2019-10-14 13:25:27","false","lib: Make sure shifted quantity is treated as 64bit type

Append type to constants in order to make sure they are
treated as 64 bit integers.

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",64,16,0
"thesofproject/sof","093589899a2ef226ea340ba48fe5f03206182167","lrgirdwo","2021-03-29 10:14:00","false","pipeline: remove legacy static pipeline support

Statically defined pipelines should be stitched into the FW image as
topology data rather than coded in C. This code was never used after
initial development so can be removed.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",80,34,0
"thesofproject/sof","19661fe74acf824f9bcbac48b9d2d54224785eb7","dbaluta","2022-09-26 09:26:19","false","topology1: Merge i.MX AAC/MP3 compr topology

Because now we can support multiple codecs with same topology
lets merge i.MX aac/mp3 topologies.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",97,52,1
"thesofproject/sof","2fe7c89489572553913b99682ca835d374329979","xiulipan","2020-10-19 13:40:54","false","logger: change the usage string for filter

Change the misleading usage info for filter.
Add format as tips for filter string.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",74,29,0
"thesofproject/sof","955201897d18192e5202a3901b8ae7e67c410d99","cujomalainey","2020-09-23 23:53:51","false","oss-fuzz: add ipc fuzzer

Add shim to fuzz the full ipc space with

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",65,28,0
"thesofproject/sof","b804e1df7e157ce4f01c7fb005592a85ca3295c4","xiulipan","2020-10-19 13:33:42","false","logger: fix opt for filter parameter

The -F filter option has argument, we should use
F: instead of F in the optstring.

Fixes: #3530

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",74,29,0
"thesofproject/sof","760f504eef7a1eb65a5ea1dd1c329ecd756f8695","ktrzcinx","2020-10-01 13:21:35","false","alloc: Refactor rmalloc_sys, use mm_heap* instead core id as input

This allows to reuse this functions for another heaps.
Moreover it helps to omit double memmap committing,
because each client of this function already use memmap,
so is oblidged to call platform_shared_commit().

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",65,28,0
"thesofproject/sof","68b49c186e130c96d132dbd03fa6f57360162f1a","marc-hb","2023-01-11 22:22:23","false",".github/zephyr: switch Windows build to west update --narrow

It is slightly faster and able to test any random SHA1.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",54,55,1
"thesofproject/sof","65ade5a4f973f021918955fefb16e95943e7a66f","marc-hb","2021-04-09 20:51:28","false","installer: change default destination to /lib/firmware/updates

Kudos to Pierre-Louis for advertising this cool feature

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",81,34,0
"thesofproject/sof","e1aa806d5c6679d93da9d6a6f024d0e504ee6353","marc-hb","2021-07-16 07:07:17","false","trace: add 'atomic' argument to mtrace_dict_entry()

Preparation to use mtrace_dict_entry() also the _log_message() level too
and not just for very early mtrace_printf() tracing.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",92,37,0
"thesofproject/sof","61f286c8a941e4fc4f44f9663d241f1d6b262e73","marc-hb","2021-05-04 21:14:12","false","build-zephyr.sh: don't update rimage every time we run

Fixes 33c5f5d38e (""xtensa-build-zephyr: do not clone a second version of
sof.git"")

The very first version of this test was checking whether the rimage/
directory exists, which proves nothing. So I switched to
rimage/CMakelists.txt but forgot change the `test` flag.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",81,35,0
"thesofproject/sof","23d2a017773ce2f096dfea945cf540df4b2765bc","marc-hb","2022-03-08 01:50:57","false","version.cmake: add comments and fix logs to clarify recursive invocation

version.cmake has a not very intuitive logic to make sure sof_versions.h
is always up to date without triggering a full rebuild. Add comments and
rephrase some logs to make it less hard to follow.

Absolutely zero functional change.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",114,45,1
"thesofproject/sof","d736888aa5a5c35bc3f342274cd79d7ced51133d","lyakh","2021-05-26 12:21:59","false","zephyr_domain: fix a recent regression

A recent commit broke calculation of the zephyr scheduling domain
period. Restore the original version.

Fixes: 5104f5e02df5 (""timer_domain: refine the timer_domain_set() logic"")
Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",86,36,0
"thesofproject/sof","01f1a4aeae376305b0234e9b0d36f4d44d7fca81","lyakh","2019-03-06 12:23:08","false","tools: fix a typo

""Formate"" and ""format"" are two different words, in this case it's
""format"" that is meant.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",66,9,0
"thesofproject/sof","72d398c30dd6dbefdca4d67158e51e8d3fce8e9d","lyakh","2019-01-17 10:16:20","false","cavs: add a DMA capability to the system-runtime heap zone

The system-runtime zone on CAVS system is suitable for DMA, add the
capability to heap descriptors.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,7,0
"thesofproject/sof","02d7974cf73b3e3dbd520a75c78f5a8a07eceedd","lyakh","2021-10-08 14:05:46","false","keyword: check test_keyword_get_threshold() return value

test_keyword_get_threshold() can return errors, make sure to check
its return value before using it.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",121,40,1
"thesofproject/sof","f37ab591bbdfd3aecd69888ebd2196b5cdb00abd","lyakh","2022-09-07 15:40:58","false","mixin: allocate .mixed_data_info as uncached

mixin-mixout uses the coherent API to access the .mixed_data_info
array, therefore it has to be allocated as uncached, otherwise
initialisation changes get discarded by cache invalidation.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",106,51,1
"thesofproject/sof","f04bc83f0e7d321fc2783236f4b4ba197a650c36","tlauda","2019-05-13 09:25:45","false","hda-dma: add safe check to waiting functions

Adds safe check to waiting functions in case we've
got preempted after read, but before deadline check.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",61,11,0
"thesofproject/sof","892041913749d9c35cd7cce3ff204d79f303d663","tlauda","2019-08-05 09:55:28","false","task: reorder task structure

Reorders task structure in order to gain better padding
and don't waste any space.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,14,0
"thesofproject/sof","bb0676da13e74e41b20b1f13263bf126dc931c48","tlauda","2020-05-29 10:46:33","false","bootloader: don't check for CONFIG_BOOT_LOADER

Stops checking for CONFIG_BOOT_LOADER in boot_loader module.
It makes no sense, since this file is only compiled when
CONFIG_BOOT_LOADER is set.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",97,24,0
"thesofproject/sof","9a6616a89b2551c970068e3a2c534bf9d1dd6868","tlauda","2019-08-02 13:23:14","false","spinlock: replace spin_lock_* with irq_local_*

Replaces spin_lock_* macros with irq_local_* macros
in many places. Most of the code doesn't need to keep
synchronization between cores. Setting critical section
by disabling local interrupts is enough. Spinlocks should
be used only in the places, where both cores have access.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,14,0
"thesofproject/sof","8ed568eadcac331d98976da3fbdb235eed0158af","tlauda","2019-03-14 09:22:06","false","pipeline: adjust flow to more scheduler flexible

Adjusts pipeline flow to be more scheduler flexible
and not only valid for DMA IRQ based schedulers.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",68,9,0
"thesofproject/sof","303ed59e8755b1006a08f7e18e61fe745dc6c07c","IulianOlaru249","2020-02-22 09:32:34","false","test: Add extra tests fot gcd

This patch adds extra tests for the gcd of
(0, 0), (a, 0), (0, b), (-a, -b), (-a, b), (a, -b)

Signed-off-by: Iulian Olaru <iulianolaru249@yahoo.com>",80,21,0
"thesofproject/sof","231622fa010c6d4807567d217b0a8cf7e6c6d371","ranj063","2023-01-10 00:28:25","false","module_adapter: refactor the copy function

Refactor the module_adapter_copy() function to split the simple_copy
case into a separate helper function

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,55,1
"thesofproject/sof","6f474c9cb2bab0d6fdb1a8f98d3f6273de082685","ranj063","2021-10-26 03:47:50","false","src: use buffer acquire/release

instead of buffer_lock/unlock() which will be deprecated.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",127,41,1
"thesofproject/sof","a6a80ec97aacda3f9fbc9bcd88401853091abd66","ranj063","2023-03-16 21:52:50","false","dai-zephyr: Fix the ordering of DAI and DMA triggers

During start trigger, the DMA is be started first followed by the DAI. The
same order should also apply for the release triggers. Conversely, during
stop/pause the DAI must be stopped first before the DMA.

But some platforms cannot handle the conventional ordering during the
stop/pause triggers. Add a new config,
COMP_DAI_STOP_TRIGGER_ORDER_REVERSE, that will be used to reverse the
DMA and DAI trigger order during stop/pause. Also, fix the stop case to
use the new config to reverse the ordering instead of
COMP_DMA_SUSPEND_DRAIN.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",56,57,1
"thesofproject/sof","a835ff2ae962a483af8f63f02142938c0278d909","ranj063","2018-06-25 06:42:07","false","topology: move platform m4 files from dsps directory to platform/intel

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",4,1,0
"thesofproject/sof","9249271df94fbb3c708f1aa1e8326dbd77c61af1","maruthi-machani","2023-03-24 06:55:02","false","platform:amd:configuration to support mux as module adapter

Configuration to support mux as module adapter.

Signed-off-by: MARUTHI MACHANI <maruthi.machani@amd.com>",56,58,1
"thesofproject/sof","85deb1e55b81d1f8c1502aaf27feda7ee0580969","jajanusz","2019-06-01 15:34:04","false","audio: coefficients: add license

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",72,12,0
"thesofproject/sof","2a81c56f58b73c0dd1aaa70750f6041dc52a9592","jajanusz","2019-10-10 11:59:37","false","tigerlake: shim: clock status registers

Add registers for checking clock status.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",61,16,0
"thesofproject/sof","dac8754449c7b56c9e812518e61769614ba7c323","johnylin76","2022-04-12 16:38:32","false","perf_cnt: add the tracing of window-based average calculation

The average number of cpu cycles/ticks spent could be provided per 1024
scheduled tasks by the performance counter. It would be more accurate for
MCPS measurement than the peak number. Even so, the tracing macro will log
both of them to provide more insights.

This is enabled by CONFIG_PERFORMANCE_COUNTERS_RUN_AVERAGE, which depends
on CONFIG_PERFORMANCE_COUNTERS.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",118,46,1
"thesofproject/sof","9ca86c9fd6534c096191d2801c9339def0a2470e","johnylin76","2023-08-15 13:48:16","false","smart_amp: revamp to two-layer modular design structure

The motivation is depicted in
https://github.com/thesofproject/sof/pull/7801

This commit revamps smart_amp component design to two-layer structure, i.e.
generic layer and inner model layer.

Generic layer is the common part of smart amp process which can be regarded
as the glue code interacting between SOF component ops and inner model.
While inner model may have various implementations respectively for
solution suppliers in a modular way.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",27,62,1
"thesofproject/sof","c6064624f6f8244e13d43f9c52632a12254b8014","jajanusz","2019-06-01 19:33:40","false","cmake: add spdx license identifier

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",72,12,0
"thesofproject/sof","0d0844b05188924562e92ef6225ed026ccc0ae68","jajanusz","2020-04-30 12:25:07","false","cmake: add option to build unsigned FW

Add MEU_NO_SIGN cmake flag that can be used to build unsigned FW binary,
that may be later used with MEU for signing.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",93,23,0
"thesofproject/sof","e13c7f24bf45f126285f159836cb4a8979485edd","jajanusz","2019-08-23 10:55:28","false","Kconfig: tigerlake config

Add config for Tigerlake platform.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",54,15,0
"thesofproject/sof","8eb6b543d1da3b45f629aa4f0ba796526b437ae9","jajanusz","2020-09-03 14:09:33","false","cmake: add FIRMWARE_NAME option

Add CMake argument FIRMWARE_NAME that enables setting custom suffix
for output binary.

Example `cmake ... -DFIRMWARE_NAME=custom ...` will save output files as
sof-custom.ri, sof-custom.ldc etc.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",70,27,0
"thesofproject/sof","fa010e31bb3a359153a34b8bab5e3d9659cad852","dbaluta","2021-03-25 18:27:00","false","audio: codec_adapter: Fix processing loop

Processing loop inside codec_adapter copy() function will take
the input buffer and try to process all the data available.

We need to 'consume' the source bytes and 'produce' the bytes
to local_buffer after each iteration not just at the end.

Failing to do so, will put wrong data for processing function
starting with second iteration.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",78,34,0
"thesofproject/sof","0781a4bed59bfecbb9a1f309e17c494cef26701b","dbaluta","2020-01-11 17:38:37","false","rimage: Add support for imx8m

This defines the iram/dram/sram memory zones and creates
a new machine type for i.MX8M.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",76,19,0
"thesofproject/sof","d32f1f7794e0cd2f1f358d70acdf99c25e4037f3","DianaGabriela27","2019-03-06 13:05:14","false","rimage: file_simple: Remove unnecessary spaces after cast

Signed-off-by: Diana Ungureanu <diana-gabriela.ungureanu@nxp.com>",66,9,0
"thesofproject/sof","c6e9cac6a87cf1217bf3830d5974ffcf73e03b2d","iuliana-prodan","2021-09-28 21:25:56","false","zephyr: imx8m: use zephyr utilities when enabled

Use the Zephyr sys/util.h when Zephyr RTOS is used.

While here, remove sof/lib/cpu.h which is not used.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",121,40,0
"thesofproject/sof","06029a2e2474aa7fe78cb1832c3b1799db1c781f","ranj063","2022-03-23 23:06:42","false","codec_adapter: move CODEC_GET_API_ID definition

to cadence.h. It isn't used elsewhere.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",109,46,1
"thesofproject/sof","f1cdf9937958184c459b0e592f0264f95cfe76b3","lyakh","2020-03-24 16:48:20","false","pipeline: reduce stack usage in recursion

pipeline_for_each_comp() is called recursively, Reduce its stack
usage by reducing the number of parameters and using a structure
instead.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",64,22,0
"thesofproject/sof","4223d87bbe5f13e4c5b083bd77a265e5b871357a","sebcarlucci","2020-04-08 17:20:26","false","audio: dcblock: Fix doxygen error for dcblock.h

This commit fixes a doxygen issue caused by a mismatch between
dcblock_find_func()'s declaration and its corresponding comment block.

Signed-off-by: Sebastiano Carlucci <scarlucci@google.com>",82,22,0
"thesofproject/sof","0097215afcfcdcffee8d7fb4e521aef15e6d5fd6","keqiaozhang","2019-03-01 01:08:31","false","test: fix a typo, Add a colon to option that have parameter

Signed-off-by: Zhang Keqiao <keqiao.zhang@linux.intel.com>",67,9,0
"thesofproject/sof","130bffa6a902ec684c6bf1941077c33c29090fcd","keqiaozhang","2021-06-29 08:24:14","false","topology: add tgl-h nocodec topology build

add the TGL-H nocodec topology for zephyr test.

Signed-off-by: Zhang Keqiao <keqiao.zhang@intel.com>",84,37,0
"thesofproject/sof","6131901c46bb3cbff0b630cf5fbdd040e79af018","iuliana-prodan","2022-12-05 11:18:59","false","scripts: qemu-check.sh: update READY_IPC for imx8

Update READY_IPC value based on changes regarding MU reset.
READY_IPC value comes from:
- clear GP pending interrupt #0 and #1 from MU's xSR register;
- enable GP #0 and #1 for Host -> DSP and DSP -> Host
message notification from MU's xCR register;
- now interrupt host to tell it we are done booting
by setting GIRn bit in MU's xCR register.

So, ""00 00 00 c0 00 00 04 c0"" is the MU's xSR and xCR registers:
xSR: c0000000 and xCR: c0040000

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",102,54,1
"thesofproject/sof","3ad5ace14d91002671455ee593619ca821ddcc71","iuliana-prodan","2023-05-03 13:31:31","false","topology: imx: Rearrange topologies based on platform

Rearrange topologies, from development folder, based on
platform type: imx8 and imx8mp.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",54,59,1
"thesofproject/sof","f0ecc7b68a7838cc70b6d7385a55c4871b466c55","cujomalainey","2021-03-29 19:00:54","false","codec_adapter: fix local buffer prepare

We are only setting the parameters on the allocation of the local buffer
which means if the params change on the next run it will not change and
break things.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",79,34,0
"thesofproject/sof","985f49a786bf2c687e11f608d6e9c97da12026d6","keyonjie","2019-06-27 08:02:18","false","sof-ctl: create functions for data dumping

We might dump kcontrol values in different format, create data_dump()
and csv_data_dump() for that.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",46,13,0
"thesofproject/sof","46f2384bf65931f6b3b0d8bb0bf6bce3fc67e2d8","slawblauciak","2018-11-22 13:41:45","false","dma: clean up by separating some of host/link specific code

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",39,6,0
"thesofproject/sof","7da4b8ab0a2afd63d6fe442fa85520f011842d18","keyonjie","2019-05-05 09:57:45","false","detect_test: fix get_drvdata() before set_drvdata() issue

We are calling comp_get_drvdata() in test_keyword_set_default_config(),
so we should move comp_set_drvdata() before that in test_keyword_new(),
to avoid getting wrong private pointer for the component.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",47,11,0
"thesofproject/sof","c43521f43c946a3f39a2e1d4eea232379ec4b7ec","jxstelter","2022-10-05 16:18:31","false","iadk_modules: lib_manager: Fix compilation issue

This patch fixes compilation issue in iadk_modules and
lib_manager.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",98,52,1
"thesofproject/sof","5a38cb5dff889af2b4dcdebaced600297c4bba4a","btian1","2023-07-12 05:54:27","false","google-rtc: simplify google-rtc parameters

use helper function to update stream parameters for sink buffers.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",31,61,1
"thesofproject/sof","c0a77679d1995b03db73e5e4a488222a1e38dcc9","lrgirdwo","2018-11-21 17:22:21","false","rom: linker: Add linker scripts for ROM platforms.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",39,6,0
"thesofproject/sof","6b39aded152b8819d385f261e394d76762248bd8","lrgirdwo","2021-04-01 15:15:40","false","testbench: remove build warnings when building testbench.

A side effect of the pipeline splitting work means that testbench is
not building. Provide a temporary fix until Zephyr native APIs are used.

/component.c.o   -c /home/lrg/work/sof/sof/src/audio/component.c
/home/lrg/work/sof/sof/src/audio/component.c: In function ‘get_drv’:
/home/lrg/work/sof/sof/src/audio/component.c:41:2: error: ‘flags’ is used uninitialized in this function [-Werror=uninitialized]
   41 |  irq_local_disable(flags);
      |  ^~~~~~~~~~~~~~~~~~~~~~~~
/home/lrg/work/sof/sof/src/audio/component.c: In function ‘comp_register’:
/home/lrg/work/sof/sof/src/audio/component.c:150:2: error: ‘flags’ is used uninitialized in this function [-Werror=uninitialized]
  150 |  irq_local_disable(flags);
      |  ^~~~~~~~~~~~~~~~~~~~~~~~
/home/lrg/work/sof/sof/src/audio/component.c: In function ‘comp_unregister’:
/home/lrg/work/sof/sof/src/audio/component.c:163:2: error: ‘flags’ is used uninitialized in this function [-Werror=uninitialized]
  163 |  irq_local_disable(flags);
      |  ^~~~~~~~~~~~~~~~~~~~~~~~
cc1: all warnings being treated as errors

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",79,34,0
"thesofproject/sof","9709ef81dcb8e9630c55419d3fe2d3e65a422fe9","plbossart","2022-03-02 17:50:30","false","topology1: sof-glk-es8336: use mclk ID0

It's not clear why the initial contribution used mclk ID1, mclk ID0 is
used by 99% of devices - and a manual inspection of NHLT supports that
claim. We will have to deal with the MCLK ID1 case with quirks.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",113,45,1
"thesofproject/sof","301d3d8b9f5cf1f8aac899a76df4b272846fd690","jsarha","2022-05-02 20:28:56","false","pipeline: Use Zephyr API k_msleep() instead of obsolete wait_delay_ms()

Use Zephyr API k_msleep() instead of obsolete wait_delay_ms(). In XTOS
build the k_msleep() is implemented in xtos-wrapper/include/kernel.h
and it actually calls the wait_delay_ms().

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",115,47,1
"thesofproject/sof","478cea5b3d69935d75ec3909d0225c6fb3c854d4","tmleman","2023-05-24 08:49:41","false","west.yml: upgrade zephyr to 7d54586751

Zepych update: total of 228 commits.

Changes include:

- build LNL with Zephyr SDK,
- MMU initial implementation,
- check for pending ack in intel_adsp_ipc_is_complete.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",56,60,1
"thesofproject/sof","5fe6aa2a5148dfd5951af08f571859488f603a9d","tinghan-shen","2022-06-28 03:05:22","false","platform: mtk: add xtensa headers for mt8188

Add xtensa headers for mtk mt8188 platform.

Signed-off-by: Tinghan Shen <tinghan.shen@mediatek.com>",113,49,1
"thesofproject/sof","e580ca538ce1d023292c7872c957e39e487a7117","lyakh","2021-01-27 11:06:29","false","schedule: build only one of single- and multi-channel DMA schedulers

Only cAVS platforms use the single-channel DMA scheduler, all
other platforms use the multi-channel one. Add Kconfig options
to only build one of them.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",68,32,0
"thesofproject/sof","a51d535e83b2b383db994655d237f9846d43d2c7","lyakh","2022-04-07 14:00:03","false","pipeline: always acquire buffers for access

Buffers must always be acquired before access.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",114,46,1
"thesofproject/sof","69bded9e3023c709f5b821738421cac6eae044e5","cujomalainey","2020-10-06 01:18:44","false","haswell: add missing header

stdbool is need to define bool types (as used in this header)

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",66,28,0
"thesofproject/sof","d32ec2caeb79363b2a671705a467d5de3a919663","johnylin76","2020-09-25 11:41:21","false","tools: testbench: Add DRC component test

Signed-off-by: Pin-chih Lin <johnylin@google.com>",65,28,0
"thesofproject/sof","10cca53b8c484035602745e557721050a54073fc","jajanusz","2019-07-25 12:07:07","false","Revert ""ipc: align stream.h with kernel""

This reverts commit 6119126d90f9baf697bd1dda1815905072a21319.",49,14,0
"thesofproject/sof","167282bbbecc167dc8d4238fe5943a726bc9d0f9","jajanusz","2019-04-11 12:09:02","false","rimage: add option to set imr type

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",51,10,0
"thesofproject/sof","37f9caab63ce84272823d4202762ed7e4034d5b6","jajanusz","2019-08-23 12:18:07","false","tigerlake: defconfig

Add default config for Tigerlake.
It's similiar to Icelake, but has 1 less HPSRAM bank.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",54,15,0
"thesofproject/sof","95372a0bb00d78c66056883a8eeebc419e8732ba","tlauda","2019-06-07 08:17:26","false","dai: fix xrun handling

Fixes xrun handling by moving check from callback
to copy. Check in callback wasn't making any sense,
because bytes passed there have been already calculated
based on avail/free.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",55,12,0
"thesofproject/sof","c6cc4cc70de5e323f1c812e8549a0f159b12839e","tlauda","2018-09-25 15:16:57","false","arch: fix level 1 interrupts handling by slave cores

Fixes handling of level 1 interrupts by slave cores.
Level 1 interrupts are handled by UserVector, which
for slave cores was set by default to ROM location.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",37,4,0
"thesofproject/sof","7d7d5b9ac912e3e418ad36ac19f7f605576a535e","tlauda","2018-07-06 09:24:10","false","cache: add operations on whole memory

Adds cache operations, which execute on whole memory.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",11,1,0
"thesofproject/sof","91bd4fe796ee725700b3cf4bed66735fc05b34bc","marc-hb","2020-09-23 04:54:17","false","rimage.c: print an error instead of crashing when zero ELF argument

Also rename elf_argc to first_non_opt because it's a position, not a
count.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",67,28,0
"thesofproject/sof","356988e7caaa00c9bc7b3959c423edc16cb8eb75","singalsu","2023-08-14 16:07:01","false","Tools: Tune: Multiband-DRC: Changes for Matlab syntax

The code contains some m-language syntax that is not supported
by Matlab. The code lines are changed to compatible with both
Octave and Matlab. The blobs computation is not changed.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",28,62,1
"thesofproject/sof","40fd801c2972409d5c13d7baecddc3939c1e87e3","singalsu","2020-08-26 15:45:50","false","Tools: Testbench: Add system agent initialization

This patch fixes a segfault with null sof->sa pointer in
pipeline_schedule_copy() function. The bug has not been observed
with test topologies for processing pipelines but with other
topologies with fuzzer varied parameters.

The sa_init() is added to tb_pipeline_setup(). The scheduler_init_edf()
is a dependency. The two dummy functions platform_timer_get() and
clock_ms_to_ticks() are also added as dependency. The CMakelist for
library is edited to include agent.c build for testbench.

Fixes #3247

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",76,27,0
"thesofproject/sof","efd6d4a3e407640c3f8179d0f362e6d1f4890205","rfredzim","2022-03-10 15:56:40","false","zephyr: correct the idc payload initialization

For zephyr case remove the dynamic allocation of per-core
idc elements since these are already statically allocated
in a form of idc array in zephyr/wrapper.c.
The payload pointer initialization need to use idc entries
which are returned by the get_idc() call.

Signed-off-by: Rafal Redzimski <rafal.f.redzimski@intel.com>",113,45,1
"thesofproject/sof","8c8440070a08fd9ff54f8dcb5e528b30bf0fc9eb","cujomalainey","2023-07-27 20:03:23","false","style: trailing whitespace is the root of all evil

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",31,62,1
"thesofproject/sof","7f38fbb55854de751d9b9cc01f62dd8dfcb6d275","cujomalainey","2021-04-13 22:32:23","false","ip3: ignore unread var error

This code is cleverly written, any attempt to fix this error would
make the code no where near as clean. So instead we suppress.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",81,34,0
"thesofproject/sof","894f28fbda9ba1e1ed448c9ab79e0b0b4a15ddc4","iuliana-prodan","2021-05-19 12:23:55","false","zephyr: build: add initial support for imx

Build SOF with Zephyr for i.MX platforms.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",86,35,0
"thesofproject/sof","837422ccf238a79dd4ec13b356c6a759c92d8ae0","keyonjie","2020-07-17 09:04:43","false","config: override: chrome: not enable CONFIG_CAVS_LPRO as it is for debug
only

The config item CONFIG_CAVS_LPRO (CONFIG_CAVS_LPRO_ONLY now) should be
used for debugging only at the moment, remove it from Chrome configs.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",80,26,0
"thesofproject/sof","31cf4f084b26e7fe253f866c6f64d7c938306559","lyakh","2019-02-19 09:49:48","false","byt, hsw: call arch_interrupt_clear() directly

Platform interrupt handling code should call arch_interrupt_clear()
directly, no need to use the interrupt_clear() wrapper.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",65,8,0
"thesofproject/sof","7714e64728e7791770669c8718c12591c00d9d9b","lyakh","2019-02-20 08:04:51","false","idc: check an interrupt registration return code

Interrupt registration can fail, check its return code in idc.c
and propagate error to the caller.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",63,9,0
"thesofproject/sof","383d89d0a97cc55744f622c1acb572fff5e5e678","plbossart","2018-08-01 00:17:30","false","apl-ssp: do not override common MDIVCTRL register

When we use different clock sources for different SSPs, we need to
make sure the mdivc register is not overwritten by IPC
configuration. Move to read-modify-write mode (assuming a zero-value
on reset)

Tested on GeminiLake with SSP2 derived from 19.2MHz XTAL and SSP1
derived from 24.576 MHz PLL.

Note that the topology needs to ensure compatibility between the
different settings, in the future we'll need a true clock driver which
will check for incompatibilities.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",18,2,0
"thesofproject/sof","8cd194e624ab2f2d1f6828e0f33a04f180254e41","lrgirdwo","2019-09-12 13:29:05","false","fuzzer: fix fuzzer hardcoding of topology.

Command line option was ignored. Fix it.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",62,15,0
"thesofproject/sof","07444f4b7870f6daa02ecb01545983be349e7f2b","lbetlej","2019-11-18 14:05:46","false","Remove doxygen warnings during documentation generation

The changes fix command unbalanced groupings and remove discrepancy
between parameters in function declaration & definition of
set_power_gate_for_memory_address_range() function.

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",60,18,0
"thesofproject/sof","ba29bdcda41cb66eba1b12161f7dff20a9a3826e","yaochunhung","2021-12-28 12:15:40","false","ipc: ipc3: reset host position in ipc_stream_pcm_params before reply

Reset host position in ipc_stream_pcm_params before reply. It could avoid
that linux side get invalid value before host position updating. This
invalid value happens when running alsa conformance test and use pcm
pointer function to get host position value but see invalid value at
the beginning. After providing this patch, the invalid value will be
replaced with zero.

Signed-off-by: YC Hung <yc.hung@mediatek.com>",116,43,1
"thesofproject/sof","6d75984f7bdcbea8594375e5c5f363420a9525f8","keyonjie","2020-12-16 08:47:58","false","ssp: mn: enable more N values in set_mclk_divider

According to spec, we can configure more devidier ratios via register
MDIVR, in 1/N the N could be 2, 3, 4, 5, 6, 7, 8.

Here change to enable these possibilities.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",73,30,0
"thesofproject/sof","18baa47a9db3a7f0b5eaf97d6af9ec7b178aab7b","mrajwa","2018-11-06 12:33:39","false","DMIC: Enable power for DMIC for ICL platform.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",39,5,0
"thesofproject/sof","0cd5fb0629eb107755d82882d76cbe724cc0e437","lgirdwood","2019-01-24 08:17:44","true","Merge pull request #878 from jajanusz/update-cmocka-git

cmake: update cmocka git",55,8,0
"thesofproject/sof","40e802dda1ebd18b63ddf0dbef4ce7edefdcb5f6","lgirdwood","2018-08-31 09:10:37","true","Merge pull request #287 from jajanusz/host-warn-fix

host: fix for uninitialized pointers",28,3,0
"thesofproject/sof","569dc48ddff0a5fb02b07313625ba6660e1084c3","dbaluta","2020-02-21 08:43:56","false","generic: dummy-dma: Fix return value signedness

dumm_dma_copy_crt_elem and dummy_dma_do_copies functions
may return negative values but their definition says the
return value is unsigned.

Fix function definition to account for negative values.

Reported-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>
Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",80,21,0
"thesofproject/sof","b8d9a1d583d380516294025e8adc75efd07ef980","lbetlej","2019-12-02 11:24:55","false","detector: fix bug in synthetic load calculation

The assumption is that load_mips equals MCPS (million cycles per second).
Then only a fraction of MCPS has to be consumed for each processing frame
depending on a frame length and a sampling rate.

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",67,18,0
"thesofproject/sof","0d1344a53becee4dbdd9ddcecf923c83ff0b6e37","dbaluta","2020-01-21 13:50:23","false","scripts: Add build support for imx8m

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",78,20,0
"thesofproject/sof","a28476a2e7021319f6d4431a48122423a64cbeae","lrgirdwo","2018-09-25 13:41:49","false","ci: travis: Add host build to travis.

Make sure we build for host as part of CI.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",37,4,0
"thesofproject/sof","d520821b1bc765d4b6d7eb6a22280986262197fb","plbossart","2019-03-20 19:23:09","false","uapi: tokens: align with kernel definitions

The switch ID and tone sample rate are defined in kernel files, reflect the
definitions for the firmware

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",64,10,0
"thesofproject/sof","fbdc33026382b7e2ae4eb50a81bcfcb187702468","plbossart","2021-03-29 20:19:02","false","topology: add ADL SoundWire topologies

This is based on early hardware information and subject to change.

The ADL topologies use the link information to avoid confusions on
configurations. The kernel tables will use the same conventions.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",79,34,0
"thesofproject/sof","8816434ba17760727f54e36914af10dcef03de44","plbossart","2021-02-12 00:48:28","false","topology: align intel-generic-dmic and dmic-kwd error handling

Add error checks to make sure errors are detected and reported.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",74,32,0
"thesofproject/sof","c08784b674f6e7c6f064910c4f4f6d974b3e3ba3","yaochunhung","2022-01-17 15:07:11","false","platform: mt8195: fix afe-memif sinegen log error

Fix log to Show sgen_id in mt8195_afe_sinegen_enable function.

Signed-off-by: YC Hung <yc.hung@mediatek.com>",116,43,1
"thesofproject/sof","9aa619379536e6b36778150e396886f40c659555","lgirdwood","2018-06-29 13:29:52","true","Merge pull request #12 from zhigang-wu/master

ssp2 should be 8-channel",9,1,0
"thesofproject/sof","9e1bed23aa897b6c05b071b43226174aba06d979","mrajwa","2019-02-05 14:49:52","false","GDB: Added support for register write.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",56,8,0
"thesofproject/sof","0c69209737064a7aa263f7fc89eabebf38bd5e3c","lgirdwood","2022-01-21 12:01:42","false","Revert ""codec_adapter: remove printing the error with -ENOSPC""

This reverts commit b4993016e6fc13ec90888eaacd72dc29b3eea245.",114,44,1
"thesofproject/sof","b0e3dbd5b4cecdf5a402fefbc9baf358a818f452","lgirdwood","2018-11-22 11:25:42","true","Merge pull request #610 from lbetlej/fix_in_set_bits_macro

Fixes for macros used for bit masks creation.",39,6,0
"thesofproject/sof","46f2e2f98396701e085771cf5af94dba0d7dd0c0","lgirdwood","2018-08-22 13:34:14","true","Merge pull request #246 from tlauda/topic/system_mem_alignment

alloc: align system objects to dcache line size",19,3,0
"thesofproject/sof","f9c3136b47a47547d1d9f9027ef76fa75dd386bc","lgirdwood","2018-08-28 10:20:32","true","Merge pull request #266 from tlauda/topic/alloc_compile_fix

alloc: byt: fix compilation error",22,3,0
"thesofproject/sof","c408d3561a99b2d89018203f0a900fbbe0a3ad85","lgirdwood","2018-07-06 10:55:39","true","Merge pull request #62 from tlauda/topic/cache_all_memory

cache: add operations on whole memory",11,1,0
"thesofproject/sof","43b1cc428b84036502f1028b4419a1c072f5acea","mrajwa","2019-09-02 12:31:29","false","pipeline: don't disable IRQs on params()

This patch removes the IRQ disable during
pipeline_params() as there is no potential
race condition. Also, The disable of IRQs
result in long delays in queued interrupts.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",59,15,0
"thesofproject/sof","17aaabcee461b8f66a35766831afba51fe0aaa03","mrajwa","2019-02-05 13:53:03","false","GDB: Added support for single step.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",58,8,0
"thesofproject/sof","0956da7be7345303ab8be6e7b8240f4c9361a99e","mrajwa","2019-04-09 10:30:36","false","KPB: add function to clear history buffer

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",47,10,0
"thesofproject/sof","fa48c42abf83155d1bd42fafd4993d9b421ab5e0","lgirdwood","2018-07-05 18:52:37","true","Merge pull request #59 from slawblauciak/test_fixes

test: missing header",11,1,0
"thesofproject/sof","b6046db271b0004989cbef45864b606ae432b130","lgirdwood","2018-10-10 15:17:10","true","Merge pull request #93 from RanderWang/whl_tplg

WHL: add a bespoke hda topology for WHL",33,4,0
"thesofproject/sof","5469b1a070fd364b3417e7c39e126f96bb96c1cb","ktrzcinx","2020-05-04 13:23:34","false","logger: Add option to cutout trace location

It allows to make logs output more compact, it change:
$ ./sof-logger -l sof-cnl.ldc -i dma_trace_1.bin
         TIMESTAMP              DELTA C# COMPONENT          LOCATION                      CONTENT
[   497588.489583] (   497588.500000) c0 DMA                .../intel/cavs/hda-dma.c:407  hda-dmac: 4 channel 6 -> get
to:
$ ./sof-logger -l sof-cnl.ldc -i dma_trace_1.bin -L
         TIMESTAMP              DELTA C# COMPONENT          CONTENT
[   497588.489583] (   497588.500000) c0 DMA                hda-dmac: 4 channel 6 -> get

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",94,23,0
"thesofproject/sof","1f596beb3e0f17e50ee1578321b61fbc271433b7","ktrzcinx","2020-09-28 09:02:55","false","alloc: Remove SOF_MEM_FLAG_SHARED

It should be replaced with new SOF_MEM_ZONE_RUNTIME_SHARED
for memory which will need free and SOF_MEM_ZONE_SYS_SHARED
elsewhere.
This commit removes old way of defining allocating shared
memory region and in new way, platform_rfree_prepare()
doesn't need to translate address for cavs platform,
because runtime shared heap is defined on uncashed memory
region internally.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",66,28,0
"thesofproject/sof","0d641a7b05cff9a250bf14c754d970ef335e0586","marc-hb","2021-03-09 05:40:06","false","minor -h fix: -s meu_offset disables rimage signing

It wasn't exactly obvious who does what.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",73,33,0
"thesofproject/sof","0f4a0e2907045aebe028e41be74da601d4a28cab","marc-hb","2020-09-15 18:21:55","false","build-tools.sh: remove all the ""Entering directory..."" noise

This gets rid of about 600 lines of noisy ""Entering directory...""
messages which cuts the size of the output of the script in half leaving
only useful stuff on the screen. This (and other changes before it) may
finally avoid bugs like 'commit f430addec752 (""Tools: Fuzzer: Do not use
illegal BUILD_COMMAND in CMakeLists.txt"") evading scrutiny for months.

After so many years enjoying the convenience of make's '-C' option, I
finally did some research and realized it is the cause of this very
serious noise issue with no other easy way out :-(

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",63,27,0
"thesofproject/sof","9b355efab17120b114b96cec951663b462b6594b","plbossart","2021-02-01 21:38:29","false","topology: remove sof-tgl-rt711-i2s-rt1308.m4

This topology is no longer used and productized, let's remove it.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",69,32,0
"thesofproject/sof","d8572420d0920849b63829219803cc218c03709f","marc-hb","2022-03-10 18:15:28","false","xtensa-build-zephyr.py: un-hardcode execute_command() wrapper

Duplicating all parameters of subprocess.run() is not just tedious and
error-prone, it makes the script compatible only with a range of
specific Python versions.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",112,45,1
"thesofproject/sof","e62ffe3f8960e960b324dcb794f71527a8593180","IulianOlaru249","2020-02-13 14:03:56","false","Math/trig: Adds spaces around arithmetic operator

This patch adds spaces around arithmetic operator to make code
easier to read and silence checkpatch script.

Signed-off-by: Iulian Olaru <iulianolaru249@yahoo.com>",82,20,0
"thesofproject/sof","cab73287258563474408f0d522475fb3897f19ac","rosschisholm-xperi","2021-03-25 10:54:59","false","topology: adding support for IIR component

This patch adds IIR support in the tgl-max98373-rt5682 topology to allow
the frequency response of the headset output to be tuned.

Signed-off-by: Ross Chisholm <ross.chisholm@xperi.com>",77,34,0
"thesofproject/sof","7be08fdbebe4f6257010a71c36ddc5ac6cdc7192","xiulipan","2018-09-14 05:43:07","false","task: refine task to avoid double task function run

Add spinlock to the arch task irq list to avoid double function run.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",41,3,0
"thesofproject/sof","3b7bdaf6c0c5b692118a66ed040f011e059676f2","bardliao","2022-12-19 07:04:11","false","topology2: hdmi: update route and pipeline index

cavs-sdw.conf uses grouped route and pipeline id. And index 20 based is
for Speaker pcm. That will conflict with the existing hdmi1 pipeline id.
Update hdmi route and pipeline ids with the same formula to avoid the
conflict.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",92,55,1
"thesofproject/sof","96ac486b58b788dd11d2c72d90c100c270716180","bardliao","2022-06-01 01:24:25","false","topology2: add HDMI support on SDW

Create a hdmi-generic.conf and use it in cavs-sdw.conf to add
HDMI support

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",112,48,1
"thesofproject/sof","0d20c6c7a776cd989161bb2161f53df620ccef6f","iuliana-prodan","2021-03-04 11:01:59","false","drivers: imx: sai: set SAI watermark only once

Set SAI watermark only once, on sai_set_config().
There is no need to set it each time, on start().

SAI watermark is kept on half FIFO size.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",73,33,0
"thesofproject/sof","a047538c82025424bc488e017ddca2a83e7db96e","aborisovich","2023-05-18 18:00:41","false","workflows: Zephyr build-linux job upgraded runner OS to Ubuntu 22.04

New Zephyr Docker container v.26.4 is based on Ubuntu 22.04,
upgrading build-linux job OS to match the one in the container.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",50,59,1
"thesofproject/sof","bcad85bf50c8f4e0a927e62c4d88ac03f70258ac","mrajwa","2019-06-12 21:28:40","false","memory: fix LPSRAM defines on CANNONLAKE

Enable whole LPSRAM bank to be allocated by heap buffer.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",48,12,0
"thesofproject/sof","8528d932a9ca017fdb04e23791816f555b484671","mrajwa","2019-09-27 11:12:03","false","host: verify if channel exists before resetting it

This patch provides a check for channel existence
before performing any action on it during reset
procedure.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",66,16,0
"thesofproject/sof","895b46771c316f3ff2c8eee4b852ffd68db2545f","mrajwa","2019-12-11 13:01:34","false","kpb: refactor some of KPBs macros

This patch refactor KPBs macros:

KPB_SAMPLING_WIDTH to KPB_SAMPLES_PER_MS as this is
exactly what this macro stands for - the amount of
samples we take each milisecond.

KPB_NR_OF_CHANNELS to KPB_NUM_OF_CHANNELS as the later
is more meaningful

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",73,18,0
"thesofproject/sof","20ab16c36ece474fc3a55e87d7daa945bdcc9089","keyonjie","2020-06-16 02:25:59","false","topology: sof-smart-amplifier: change the mclk to fix the noise issue

Since we are sharing the same mclk_id among SSP interfaces, we should
use the fixed frequency for the mclk. Here add a macro for it to make
sure it is aligned with the SSP configure in the upper layer.

Change to use 19.2MHz as the default mclk for smart_amp SSP.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",74,25,0
"thesofproject/sof","1a8ed6dfd08971642767da8518fa4f7cfef3bf1d","plbossart","2020-07-14 16:52:47","false","topology: mirror CML topologies for TGL

Some TGL devices use the same devices and hardware layout and on CML,
reuse.  Also remove cml-mono.m4 definition and directly add the define
in the CMakeLists.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",81,25,0
"thesofproject/sof","ef3a02bf67ae112f1b19aabf9f3a769e2ca20db9","oleh-titov","2021-09-20 10:48:47","false","config: override: chrome: Add jasperlake_chrome_waves.config

Add Waves override config for jasperlake_chrome.
Enable codec_adapter and Waves codec.
Disable unnecessary components to save resources.

Signed-off-by: Oleh Titov <Otitov@waves.com>",118,40,0
"thesofproject/sof","cd6f24a01591993165091a0191a558d5c841d33e","jajanusz","2019-01-15 21:16:23","false","buildsystem: remove autotools from sof

This commit doesn't touch tools buildsystem.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",54,7,0
"thesofproject/sof","293f065b28a14ad1f01908c1059ac7c95ee682fb","plbossart","2021-09-28 16:36:04","false","smart_amp: fix error handling

cppcheck throws the following warning:

Checking src/audio/smart_amp/smart_amp.c ...
src/audio/smart_amp/smart_amp.c:236:2: warning: Either the condition
'if(sad)' is redundant or there is possible null pointer dereference:
sad. [nullPointerRedundantCheck]
 sad->ipc_config = *ipc_sa;
 ^
src/audio/smart_amp/smart_amp.c:244:6: note: Assuming that condition
 'if(sad)' is not redundant
  if (sad)
     ^
src/audio/smart_amp/smart_amp.c:236:2: note: Null pointer dereference
 sad->ipc_config = *ipc_sa;

 ^

The following code is indeed completely wrong:

               if (sad) << already tested so always true
                       rfree(sad);
               rfree(sad); << wrong variable

Fix by adding the relevant rfree on the error path

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",120,40,0
"thesofproject/sof","f4287dd3e8af50c0d13cf90fb78c03099b716353","ranj063","2021-12-12 05:25:13","false","topology2: cavs: Set audio formats for all topologies

Set audio formats and new attributes for all modules in the CAVS
topologies.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",120,42,1
"thesofproject/sof","3962a73933e4b80cdd0066cba3ba0f8dc5070a0f","ranj063","2021-09-15 16:18:54","false","ipc: no need to check return value of comp_make_shared

It can never fail.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",117,39,0
"thesofproject/sof","be083cf35029d0c1236793f646353eaa6fe6723c","abonislawski","2020-03-10 08:35:26","false","cpu: unpack dynamic vectors

This will allocate memory for dynamic vectors, unpack them
from WindowOverflow4 and setup global vecbase pointer used
in alternate reset vector

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",85,21,0
"thesofproject/sof","d781385a91ced6c84912413837e1a8e8454abb49","groncarolonxp","2019-10-18 11:44:57","false","drivers: imx: edma: translate burst size in bytes

burst_size represents the FIFO width in words, translate it
into bytes to have homogeneous quantities

Signed-off-by: Guido Roncarolo <guido.roncarolo@nxp.com>",60,17,0
"thesofproject/sof","e7fc334bda41da7e1c611057e6ccda258595a150","singalsu","2023-05-17 12:24:38","false","Tools: Tune: DRC: Changes for Matlab compatibility

This patch enables running example_drc.m script with Matlab.
The endifs are changed to end. And mixed usage of endfunction
and end is corrected to just end. The unnecessary
semicolons from function declarations are deleted.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",51,59,1
"thesofproject/sof","6f8a15bcfdf2893f57ad9996d8a08c7271da37f7","singalsu","2020-04-23 16:54:47","false","Tools: Test: Fix mistake with multi-channel gain result print

This fixes a messy looking print line in the test output.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",71,23,0
"thesofproject/sof","77a41bebeb6008b613071c5a4fdc6e31d5eb2dc9","singalsu","2023-08-23 07:46:36","false","Tools: Topology1: Multiband-DRC: Update setup blobs

The multiband_drc_coef_default.m4 is updated to what the current
setup tool example_multiband_drc() exports.

Another blob for pass-through is added with emphasis and all bands
processing disabled. Such blob is useful when headphone and
speaker paths are shared. Headphone mode should use pass-through.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",26,63,1
"thesofproject/sof","cd3e20e0c8a58bc9becae5408d3e651283149c1d","marcinszkudlinski","2023-08-01 18:20:35","false","comp_buffer: set ibs and obs in sink/src

set IBS an OBS in sink/src when creating
buffer and binding it to modules

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",29,62,1
"thesofproject/sof","bcc789f981c908a3f1f68247ba4ff71ef6e7c227","kv2019i","2022-02-16 11:18:38","false","drivers: Intel: SSP: fix update of DAI config in prepared state

The checks added in commit fc73578be774 (""drivers: Intel: SSP: ignore
config when SSP is already configured"") also filter out cases where the
SSP parameters actually are modified in prepare state. This will happen
e.g. with a topology that has multiple configs for SSP and uses static
topology loading.

Modify the checks such that reconfiguration is done if:
 - the config is actually modified,
 - early MCLK/BCLK is not running.

BugLink: https://github.com/thesofproject/sof/issues/5375
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",106,44,1
"thesofproject/sof","42433cae83b372099861011c6f4328a74480be2f","kv2019i","2022-11-03 09:18:03","false","ipc4: fix asserts in ipc_compound_pre_start and msg_done

In review of commit 76e35fbec2be (""ipc4: use atomic primitives to
maintain delayed_reply state""), we had a debate whether 'delayed_reply'
was really a counter at all, or should it be a boolean. As a compromise,
we kept it as a counter, but added asserts on its expected values.

Now soon after, the SOF driver started using compound SET_PIPELINE_STATE
calls, which led to 'delayed_reply' really becoming a counter now due to
loop in ipc4_set_pipeline_state().

The code is correct, but now the assert statements are no longer
correct, so remove them.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",89,53,1
"thesofproject/sof","4a32011bfd41fb11c26bcd872aa1e32ad01b38fd","plbossart","2020-06-16 22:34:08","false","topology: remove sof-icl-rt711-rt1308-rt715.m4

This file is no longer maintained and does not work with the SoundWire
drivers, remove.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",76,25,0
"thesofproject/sof","e8ef1f21c4729701f9001b02aa4f3096a336f32e","lgirdwood","2018-11-22 15:21:01","true","Merge pull request #617 from jajanusz/update-codeowners-makefiles

github: add jajanusz as owner of .ac .am files",39,6,0
"thesofproject/sof","4aff776d1c290542ded98f8aa22f50d4b9477d37","lgirdwood","2018-08-24 14:38:53","true","Merge pull request #229 from mrajwa/master

volume: Fix for default value of min/max parameters of volume component which were not setup properly.",21,3,0
"thesofproject/sof","611f81e7a7769e16bbd4228c53083ef67fbb60c6","mrajwa","2021-04-26 15:41:57","false","codec_adapter: Remove redundant state verification

The state has already been verified on the codec_adapter level.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",84,35,0
"thesofproject/sof","6fb22d645ef673034efdcdc1dd7bc94197db5d59","ranj063","2023-05-30 21:23:59","false","topology2: intel: dmic-generic: Simplify the core ID setting

When all components of a pipeline are scheduled on the same core, use
the pipeline's core_id attribute to set the core_id for all the
components in it. Also, remove the default core_id in class definitions
so that it doesn't take priority over the value passed from the pipeline
object.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",46,60,1
"thesofproject/sof","936ad1a06ee2e1143b17d8bf2887358dbf32adb2","abonislawski","2019-06-18 10:56:50","false","memory: remove unnecessary HEAP BASE define for ICL

This define is not used anymore

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",45,13,0
"thesofproject/sof","d47add305d17164ac46f251fe2506417fcb3bacd","ranj063","2022-10-27 02:53:52","false","ipc4: helper: use pipeline_disconnect during unbinding

Use pipeline_disconnect() to disconnect the source and sink components
from the buffer between them to do this properly.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",94,53,1
"thesofproject/sof","9fa6adc2ca6b22e54112604b563ef9aa0a24f494","ranj063","2023-05-06 20:57:22","false","copier: Use dai_zephyr_new/free() during init_dai()

In preparation for removing the endpoint DAI device for multi endpoint
copiers, replace the DAI device new/free ops with dai_zephyr_new() and
dai_zephyr_free().

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",53,59,1
"thesofproject/sof","a38458dd2276fa24e37f5e60ef0a5613b03cbe00","softwarecki","2023-07-12 13:35:48","false","pcm_converter: Add support for U8 <-> S32 conversion

Added functions that convert between 8-bit unsigned and 32-bit signed
format.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",31,61,1
"thesofproject/sof","e539fa09653c3dee34fb629f5a434334b9380aba","zhuyingjiang","2018-10-15 05:47:08","false","rimage: rename the old css_header and fw_image_manifest

rename css_header to css_header_v1_8
rename fw_image_manifest to fw_image_manifest_v1_8

Signed-off-by: Zhu Yingjiang <yingjiang.zhu@linux.intel.com>",35,4,0
"thesofproject/sof","6a8b2e89edf9fbb6f7a8969b0fb597d0f24fe981","kv2019i","2022-03-22 16:30:25","false","zephyr: ll-scheduler: k_sem handle must be in coherent memory

Allocate ""struct zephyr_ll_pdata"" in shared/coherent memory as it embeds
a ""struct k_sem"" object. Zephyr kernel code assumes the object to be in
cache coherent memory, so incorrect operation may result if condition is
not met.

Long test runs of all-core capture stress test on Intel cAVS2.5
platform show failures that are fixed with this change.

Discovered via runtime assert in zephyr/kernel/sched.c:pend() that
is hit without this patch.

BugLink: https://github.com/thesofproject/sof/issues/5556
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",108,46,1
"thesofproject/sof","26733a3cf49bad96933bb6e83514d93fb74bf297","bkokoszx","2020-04-15 11:24:27","false","apl: change dmic format to s32_le in sof-glk-da7219.tplg

In order to allow record s16_le/s24_le/s32_le format this
commit changes DAI component's and DMIC's format to s32_le
on PCM99.
In case recording s16_le/s24_le DAI component makes pcm
conversion from s16_le/s24_le to s32_le.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",82,22,0
"thesofproject/sof","29b247e3f1fcf7a619156e0ee0b0539ff6618fbb","ktrzcinx","2020-02-24 13:23:07","false","ext_manifest: Include compiler description information

This information is known at build time so should
be passed by extended manifest.
Introduced structure is designed to be fully compatible
with information provided through mailbox to make
parsing code on host side as much reusable as possible.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",77,21,0
"thesofproject/sof","e9d274529e10d31a343c0e61f88c0d1a97e329f4","ktrzcinx","2020-06-23 06:24:04","false","buffer: Describe buffer flags in init log

Buffer flags is important field and should be accessible in logs
output.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",70,25,0
"thesofproject/sof","cdfa9d78ad3c60199cbabccccb4860d27d6010ee","ktrzcinx","2019-10-28 13:12:16","false","trace: Add pipeline id to mixer traces

It will be helpful during debugging components
to see correlated pipeline id.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",68,17,0
"thesofproject/sof","01969e083a230a2ca336f06bf9392278b48014cb","mrajwa","2019-06-12 21:23:44","false","bootloader: enable LPSRAM depending on CONFIG

This patch changes the rules of LPSRAM enabling.
Now it is no longer platform dependent but rather
rely on config selection.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",48,12,0
"thesofproject/sof","c05850c0f43686a4950460fd88fb20063b300091","lgirdwood","2018-11-13 22:11:40","true","Merge pull request #572 from thesofproject/topic/trace-updates

hda-dma: trace: further improvements to HDA DMA trace output.",38,5,0
"thesofproject/sof","10b9f6b2299afbb92e2399802bfa7a9409f65190","lgirdwood","2018-09-26 12:43:54","true","Merge pull request #411 from RanderWang/byt-master

Refine wait functions",37,4,0
"thesofproject/sof","bc0b868ffd867902b001d7253a105400b931ffa9","marc-hb","2023-05-09 19:27:33","false","fuzz.sh: update comments for IPC4. No functional change.

Update comments for brand new IPC4 support. No functional change.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",53,59,1
"thesofproject/sof","9fb7a607ebdaf2049aaa89dd1a2ab1c9758a310b","marc-hb","2022-02-17 07:23:05","false","xtensa-build-zephyr.py: fix -C option so it can support whitespace

Make it possible to invoke -C multiple times which is required to
support whitespace as in:

  -C=--warn-uninitialized  -C '-DEXTRA_FLAGS=-Werror -g0'

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",105,44,1
"thesofproject/sof","7c5bf651f86c2c33787d577030dea4a2f2a44fad","marc-hb","2022-06-30 00:38:09","false","xtensa-build-zephyr: copy ALL cavstool*.py scripts

Quoting https://github.com/zephyrproject-rtos/zephyr/pull/46880#pullrequestreview-1020096140

> No complaints about the code here. Just a general comment:

> I do worry that as cavstool grows features (first to add the test
> integration support, now the new client/server architecture) that
> we're obscuring the core code that does the loading behind a big
> facade of other stuff that also has to be run In Just The Right Way to
> make things work. That impedes development flow. It might be time to
> split the code up so that a minimal ""just run this file please"" tool
> can continue to be maintained.`

Long story short: `cavstool.py` is likely to be split in the future.

To be readi-er, copy the entire `zephyr/soc/xtensa/intel_adsp/tools/`
directory.

Copying the entire directory also copies scripts that will never be used
on a test device like `cavstool_client.py`. They're small Python script
sso we don't care: keep it simple.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",110,49,1
"thesofproject/sof","d62629152fc1bc0c9ef5ac31796e08b0c9900426","marc-hb","2020-04-08 06:19:34","false","CI: Travis: less VM isolation for speed-up. Remove matrix.

Looking at any recent Travis build log:

1. more than half the time is spent in the exact same ""docker pull""
   command,
2. The qemuboottest stage rebuilds again the exact same thing than the
   previous test stage.

Fix 1. by re-using the same docker instance for multiple platforms.
Fix 2. by dropping from the test stage builds performed again in
the qemuboottest stage.

Random sample before:
  Total (VM) time  1 hr 15 min
  Real time             25 min (depends on current Travis load)
After:
  Total (VM) time       30 min
  Real time             10 min (depends on current Travis load)

The price to pay for this matrix reduction and speed up is coarser
reports in case of failure. Considering these tests are the most basic
possible one expects them to be rarely ever broken.

Remove the top-level matrix expansion as it was becoming impractical for
these heterogeneous builds (""PLATFORM=tools""?!). The combination of the
matrix and YAML anchors was not very obvious. Use YAML anchors
exclusively.

Rename default stage ""test"" to ""buildonly""

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",83,22,0
"thesofproject/sof","ea1eda4fafc436c8a8aeffae2db10e06ee94d61a","lyakh","2021-04-29 15:13:51","false","xtensa: (cosmetic) fix a typo in a comment

Fix a typo: remove a duplicate ""the.""

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",81,35,0
"thesofproject/sof","f8172a9b87dc15498379719ee8d559133ffb9d75","lyakh","2021-05-07 14:02:54","false","zephyr: move timer domain away from a legacy API

The delayed work API is deprecated, convert to use the replacement
delayable work API.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",80,35,0
"thesofproject/sof","0b295ebe96b1eea4b20d32a7fb2ca6e63b178ba6","lyakh","2022-12-20 13:08:52","false","copier: avoid array overflow

Fix a case of a possible array overflow, detected by static code
analysis.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",90,55,1
"thesofproject/sof","bdba8259fe3c557bf02008b0cb51d58ecf533188","lyakh","2022-12-23 11:07:04","false","Add a command line option to set an Intel-specific PV bit

Add a '-p' command line flag to set Intel reserved bit in IMR area.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",92,55,1
"thesofproject/sof","798e7acaf35d8e95094f3369d6794e6f7d301c82","lyakh","2023-01-24 15:33:00","false","dcblock: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register dcblock with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","fa890a27e9bf0c32a5bffb18df79278b3b6e6a38","plbossart","2019-01-16 05:08:02","false","src/audio/mixer.c: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","d9f9340e1a8ebc276fb67bf9e0a0c7bd08e4e52b","lrgirdwo","2022-08-20 12:54:45","false","tplg_parser: split out testbench logic and partition features per file.

This is another tplg_parser and testbench update on the road to provide
further flexibility around supporting new modules and IPC versions.
There will more to follow.

Changes are mostly mechanical code movements i.e. moving testbench related code
to the testbench, splitting the files into per module/component files and
making some functions static and public.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",111,51,1
"thesofproject/sof","47cb61237983e81ded6eedee38f51ebe00ecb2a2","yongzhi1","2023-07-07 16:24:02","false","topology2: speaker-echo-ref.conf: Use macros for PCM ID

Use macro to avoid hardcoding of the PCM Id.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",31,61,1
"thesofproject/sof","2cfa90d3249676da34cbcaa1a772c5f8843ff712","yongzhi1","2022-12-05 21:28:30","false","topology2: cavs-rt5682: add deep buffer support on headset

Deep buffer is mixed with ssp0 stream.
Override mixout copier audio_format.1 from 32/24 to 32/32 for I2S.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",102,54,1
"thesofproject/sof","f8628623da42559eb2806beface3d7388b7050d8","xiulipan","2018-08-07 06:09:59","false","scripts: docker: update gcc cross compiler to 8.1

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",18,2,0
"thesofproject/sof","b23ca0311157ad495362ecc5aa8787b8226a6f5d","xiulipan","2020-03-05 07:41:21","false","ipc: add error trace with size for page descriptors alloc

Add error trace with buffer size for heap to help debug
the page descriptor issue.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",80,21,0
"thesofproject/sof","be45dacd424e7efa31c33b24dea09693fca9c1df","RanderWang","2018-12-07 08:37:56","false","ipc: apply ipc change on BDW & HSW

this patch follows:

ipc: Fix false positive IPC dropped messages.

On receiving an IPC IRQ the handler currently does not check the
IRQ mask. This means notification received ACKs (i.e. for trace updates)
from the host may be reported as duplicate host command IPCs.

Fix this by checking IPC IRQ mask.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>
Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",45,6,0
"thesofproject/sof","d28785ce73ed6afa6b68e90224db11d4dd7fef2a","cujomalainey","2023-07-13 20:28:41","false","audio: dts: Add library stub

This will allow the fuzzer to probe deeper into the code while also
allowing CI to build test the adapter.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",32,61,1
"thesofproject/sof","64540b85aae7cdddb4534a390b9d2f2d0f8adba6","cujomalainey","2021-01-25 23:36:06","false","pipeline: fix log message

quoting wrong function name

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",68,32,0
"thesofproject/sof","af9d2d4e5719b3b225e0546d5698cd2c5952d2c2","cujomalainey","2018-11-16 02:22:45","false","Fix sof-apl-pcm512x

Fix graph to reflect file

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",39,5,0
"thesofproject/sof","fa317ffca9c74b9a43d41cfa5884c5b716f6934a","cujomalainey","2020-10-06 21:43:20","false","host: disable memory usage scan

don't need initially, will be supported later

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",67,28,0
"thesofproject/sof","3a9652d8396bdcf6f9f9c4e09f0557a6aae6cc5d","tlauda","2018-09-27 15:32:29","false","host: don't free empty buffer list

Don't free empty buffer list on host component free.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",37,4,0
"thesofproject/sof","0befebb7f60efeaa366a1fe9ec8220916d09f5c2","singalsu","2020-04-21 10:29:49","false","Memory: Enable 2 kB module pool for APL, CNL, ICL, TGL, Sue Creek

This patch enables a single 1 - 2 kB allocation for component
runtime. The disabled 2 kB pool entry caused ASRC component
to fail in some cases.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",84,23,0
"thesofproject/sof","ae12907dd7d5e0513ade682e1a996c5e3d578536","singalsu","2020-08-11 09:08:47","false","Topology: Create 1ch and 3ch microphones sof-hda-generic topologies

This patch adds to CMakeLists.txt build of duplicate one and three
channels dmic capture topologies. They are needed to match the driver
that loads a topology that matches the number of microphones based on
configured microphones count in device BIOS.

This is an intermediate solution to enable microphones on such
devices. The mono audio will appear as double mono for user space. A
true mono topology and firmware will be created later.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",73,26,0
"thesofproject/sof","62dbfcff5cd20f0de688d817c8a070ad94e4c3c5","singalsu","2019-12-11 14:42:11","false","Volume: Fix handling of mute and unmute control

This patch fixes the issue of audio left muted after a cycle
of mute and unmute commands. The additional improvements are
applying of gain ramp for mute that helps to avoid annoying click
sounds. Also since the driver issues both volume and switch
commands back to back the duplicate scheduling of ramp update is
prevented if there is already a ramp happening. The old ramp
will operate based on new step and direction if it was changed.

Some variable names were changed in function volume_set_chan()
for better readability. The impacted trace print commands were
also updated to not split strings unnecessarily.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",73,18,0
"thesofproject/sof","8b519858c5b2951403715aff7b1583c668596a76","cujomalainey","2022-02-17 03:34:20","false","google_rtc: copy ipc to dev

This is possibly a copy paste bug from the smart amp component.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",105,44,1
"thesofproject/sof","ed1ce455783fa26a16eaf2a973ee1bc7f6404729","lgirdwood","2018-06-29 13:37:45","true","Merge pull request #34 from xiulipan/master

rimage: fix function returns address of local variable bug",9,1,0
"thesofproject/sof","d434dbc8e1a3e5c791f8b722543968552fd5a827","crazoes","2020-07-13 05:02:48","false","xtensa-build-all: fix gcc _defconfig for byt|cht|cnl|sue

In renaming of $j -> $platform one instance of variable was missed which
has led to wrong configs being used.

Fixes: 941dfcccb03 (""use switch case"")

Signed-off-by: Shreeya Patel <shreeya.patel23498@gmail.com>",75,25,0
"thesofproject/sof","729ab7e5f6d5c7b9b6e05e9a36b1cf3b57a61054","crazoes","2020-04-18 15:24:23","false","scripts: qemu-check.sh: Use getopts

Use getopts to parse the arguments instead of manual parsing to leave no
room for errors, bugs, and inconsistent conventions introduced by custom
implementation.

The script uses no options as of now, so current implementation just
exits if any option is provided.

Signed-off-by: Shreeya Patel <shreeya.patel23498@gmail.com>",92,22,0
"thesofproject/sof","77bb169887939fdfeae61ec16366c7a64dbb0d1b","marc-hb","2022-10-04 23:56:45","false",".github: de-hardcode zephyr SDK version in sparse build

Also add references documenting sparse's REAL_CC pain.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",97,52,1
"thesofproject/sof","0b757a594f67ee9e159c6d23ee0fd9535d4ddd7f","marc-hb","2022-09-16 23:48:55","false","Add sparse_always_green to Github Actions

The next step is to find how to extract the (too many?) errors.

In the mean time this already makes sure the build process never bitrots
and that it will always possible to use sparse. It also ""documents"" how
to use sparse: just copy/paste the commands run by CI.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",98,51,1
"thesofproject/sof","356cc852e1b9fc51f514a548570eaa95f767583a","marc-hb","2021-01-22 18:43:28","false","Replace run-time ALIGN_UP() check by ALIGN_UP_COMPILE() where possible

Should save some cycles

See related PR #3739

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",69,32,0
"thesofproject/sof","eee058abcd199cacfc6880f0c706b98365f4c183","marc-hb","2022-09-27 00:00:52","false","topology2: concat abi.conf at build time to fix incremental build

It's now possible to rebuild just only one modified topology without
rebuilding all of them from scratch.

Building topologies v2 has two steps:

 1. concatenation of abi.conf with topo.conf
 2. run alsatplg on the concatenation

Concatenation step 1. was wrongly implemented at configuration time, not
at build time. So when the topology source of step 1 (topo.conf) was
modified, the dependency of step 2 (= the concatenation) was not
affected and the topology was not rebuilt.

Fix this by moving the concatenation to build time.

Fixes commit 308a24a92b44 (""topology2: Add build support"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",97,52,1
"thesofproject/sof","9d2e82adf043f501fa899e274998c2c7e8c64baf","marc-hb","2022-06-08 15:52:30","false","xtensa-build-zephyr.py: fix find_west_workspace() to return west topdir

When neither -c nor -p is passed, the script defaults to '-p
SOF_TOP/zephyrproject', initializing the `west_top` global with
that. When everything is already cloned, this becomes
zephyrproject/modules/audio/sof/zephyrproject which is really not a
`west topdir`. Then west is pointed at:
 real_west_top/modules/audio/sof/zephyrproject/zephyr/samples/subsys/audio/sof
which obviously fails.

This was found while testing
https://thesofproject.github.io/latest/getting_started/build-guide/build-with-zephyr.html
and trying (and failing) to switch away from the older .sh script.

Fix find_west_workspace() to return the output of `west topdir` and use
that to update the `west_top` global.

This bug was introduced from the very start when the script was
converted from shell to python. The shell script did not have this
problem because it could be used without using neither -c nor -p. This
logical difference was mentioned in the code review:
https://github.com/thesofproject/sof/pull/5299#discussion_r801158177

Also remove a couple of accidental creations of a sof/zephyrproject/
directory when sof is already inside a higher zephyrproject.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,48,1
"thesofproject/sof","f85320ba8d15e859a994af3aab0340954cb97195","marc-hb","2023-01-18 22:17:26","false","scripts/xtensa-build-zephyr.py: checksum [sof_]version.h files

`git describe` differences happen, especially when trying to optimize
cloning and this is for instance what happened in
https://github.com/thesofproject/sof/pull/6950#issuecomment-1396150533
where zephyr tags were fetched on Linux but not on Windows

This also makes plain git version differences more obvious; no need to
scroll all the way up and scan the build logs.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",55,55,1
"thesofproject/sof","33c13e8c1702b7fce9e62b0913633f81d626e320","marc-hb","2021-10-15 02:49:57","false","xtensa-build-zephyr: download rimage later, just before needed

This helps catch hidden rimage dependencies.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",123,40,1
"thesofproject/sof","a1dbb624b4cd5ab6ecc42fd5e5449f56c0a6b9a1","RanderWang","2021-11-30 08:12:22","false","ipc4: copier: refine format conversion path

Add more cases to go normal path.

Signed-off-by: Rander Wang <rander.wang@intel.com>",131,42,1
"thesofproject/sof","bc96f88e659ae941b62c6cfe0f789d362552c27f","RanderWang","2018-09-10 04:28:29","false","dma-trace: kill a infinite loop in dma_trace_config

Don't delete item with list_for_item. with list_for_item, a item
is deleted from list but the next of this item is used to visit
the list.

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",34,3,0
"thesofproject/sof","dcba48583e7e76ea438e388e94247cc929c70085","iuliana-prodan","2021-01-19 12:49:40","false","topology: imx8m: add mixer component with wm8960 codec

This topology works on i.MX8MP with wm8960 codec.
When loaded, one will have a sound card with two playback subdevices.
This way, samples pushed to the two subdevices will be mixed and
sent to SAI3 and then to wm8960 codec.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",69,32,0
"thesofproject/sof","9d0f0aad143be4795ca6f7a17c642159297fb8b9","tobonex","2023-09-15 17:42:07","false","aria: remove buffer_acquire from aria

remove buffer ops from aria module

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","6efab4a7ab3f666b4a36c9d0f60e83003b69906b","RanderWang","2023-07-25 06:59:07","false","audio: add fixup for S24_3LE

It is missed in kconfig.

Signed-off-by: Rander Wang <rander.wang@intel.com>",33,62,1
"thesofproject/sof","da073fbf80aa33858a169cb86ca3aaf50e0bdfa1","lyakh","2020-11-20 09:39:25","false","core: optimise ALIGN_UP() to only use 1 division

No need for two divisions for an alignment macro, one is enough.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",74,30,0
"thesofproject/sof","0a7df45e87fb44ebbdb2c047b97dd549adec44e4","cujomalainey","2020-10-15 23:23:13","false","library: add trace and shared memory region

Trace is enabled by default for library builds, but the module is not
included. This breaks the ipc handler. Therefore lets include it and
give it a mocked section of memory to write to.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",72,28,0
"thesofproject/sof","ae4e037b0b91a77bc760ca9a563944fbc696b8fe","tmleman","2022-11-18 14:11:16","false","zephyr: ipc: prevent low power state

This patch ensure that we will not enter low power state (d0i3) during
processing of a ipc message from a host.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",96,54,1
"thesofproject/sof","8737e0b7265de500f5e140874c77da0c63174114","ymdatta","2020-07-24 16:01:52","false","tools: tplg_parser: free allocated memory to avoid memory leaks

When an error is occurred when loading the widget, the memory
allocated is not freed properly. This results in memory leaks.
Avoid these memory leaks by freeing the allocated memory before
exiting the function by returning error value.

Signed-off-by: Mohana Datta Yelugoti <ymdatta.work@gmail.com>",78,26,0
"thesofproject/sof","8b79a6dc8e50a89175dd73b8d36a8f2bda7a49f9","aiChaoSONG","2022-11-15 07:47:35","false","pipeline: Use get_attribute ops wrapper

The ops wrapper add extra checks, use ops wrapper
instead of calling the ops directly for get_attribute.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",95,53,1
"thesofproject/sof","01050c1a21d088797c2bf131121a6db28c46d28a","kuanhsuncheng","2021-08-27 06:19:57","false","platform: mtk: add xtensa headers for mt8195

Add xtensa headers for mtk mt8195 platform.

Signed-off-by: YC Hung <yc.hung@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",119,39,0
"thesofproject/sof","a43dae5dd2e521d9f90ed75924d82da9f1a70bbf","gongjun-song","2022-12-06 13:41:13","false","src: remove unnecessary if conditional judgment

No need to add if condition judgment and rfree(NULL) is allowed.

Signed-off-by: Gongjun Song <gongjun.song@intel.com>",100,54,1
"thesofproject/sof","98c7f7b56756527b1bd84faa95e1e3e2e4168043","softwarecki","2023-02-20 12:42:03","false","manifest: Use the get_file_size function

Simplified retrieval of file size by using the function get_file_size.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",55,57,1
"thesofproject/sof","b231a60b085b23cdec572aaffa1c8129b6044ff9","ranj063","2022-01-11 06:41:01","false","codec_adapter: Use the set_configuration op in codec_adapter_set_params

Use the new set_configuration op in codec_adapter_set_params().

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,43,1
"thesofproject/sof","f668b6f0cc795c44e10c9d9320a2a776d9f8a9fa","ranj063","2021-10-27 15:43:06","false","selector: use buffer acquire/release

instead of buffer_lock/unlock() which will be deprecated.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",128,41,1
"thesofproject/sof","d577f4b76048210ae9a5931e160705c07a4e3ba4","ranj063","2022-01-07 20:44:48","false","codec_adapter: rename codec_interface to module_interface

The interface will be common for all processing modules not just the
codecs. So rename struct codec_interface to struct module_interface.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","f0d338278b5f191fa6bd05a0cc0e2deed93a90f3","ranj063","2023-05-06 20:19:44","false","copier: Add a helper function to set buffer channel map

Add a helper function to set the channel map for the endpoint buffer.
This is in preparation to remove the endpoint buffer and save the
channel map to be set directly in the DMA buffer.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",53,59,1
"thesofproject/sof","4eb262ae0f0c1eface5bce329934aa4795e36d82","cujomalainey","2020-11-10 00:39:20","false","dai: include interrupt header

We are using interrupts here, lets include the header so we don't hit
build failures.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",73,29,0
"thesofproject/sof","5c6bac459f313242ef3485e48829e85a7bb37b64","serhiy-katsyuba-intel","2022-10-17 17:57:11","false","ipc4: fix for mixout not working after reset

Fixes a bug in mixout_reset(): mixin pointers in mixed data info
should not be cleared on reset. They should only be set on bind
and cleared on unbind.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",101,52,1
"thesofproject/sof","99093bac4eb90de8bfcc652ada97a7d349fb5d00","dabekjakub","2023-01-09 11:44:05","false","memory: Add virtual memory regions gathering and structs

Add virtual memory regions info gathering from zephyr and introduce
structs agregating this information.
Add proper defines for memory management.

Signed-off-by: Jakub Dabek <jakub.dabek@intel.com>",54,55,1
"thesofproject/sof","1cdff03f93d798bc464a29bf016c593d34a1d744","lrgirdwo","2020-05-05 20:39:49","false","dma: dw: make sure all DONE bits are cleared in LLI

Some bits being missed due to cache coherency. This showed on
on Zephyr due to different cache/uncahe mappings and management.

On Zephyr we invalidate all descripts, clear all DONE bits and write
back. This guarantees all DONE bits are clear for nex LLI.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",95,23,0
"thesofproject/sof","1f7a2805de42f1347d104b99a879325af9faad15","keyonjie","2021-02-04 02:23:49","false","ll_schedule: rename last_tick to next_tick

rename the last_tick to next_tick, which means the one already set
to the timer, for more easy to understand.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",70,32,0
"thesofproject/sof","2762ada65ef282ad0173a188c5344ee787189934","keyonjie","2019-07-02 11:31:08","false","topology: cml-rt5682-kwd: change to use S24_LE format for CML

As dmic only support 16 bit or 32 bit, we configure dmic dai to be
s32_le, and pipelines to be s24_le.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",42,13,0
"thesofproject/sof","f18bd760bdde3dc152db13b908362bb4c4d31f0b","keyonjie","2018-12-12 06:26:58","false","IPC: fix component new fail issue.

We need to new component with the whole ipc struction passed in
ipc_comp_new(), e.g. struct sof_ipc_comp_dai, but not only the struct
sof_ipc_comp, otherwise, we will fail to new components and see errors
in log such as:
dai.c:208 	dai_new() error: dai_get() failed to create DAI. type:0,
index:-1106776464

Here change to pass in the whole _ipc->comp_data to fix this kind of
issues.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",46,6,0
"thesofproject/sof","fcd727678e7d746ed2a9a0765f9508403c95cf22","keyonjie","2019-07-03 11:10:07","false","detect-test: refine the detect function

We should use the absolute value for the activation comparing, and no
need to take extra handling to those samples with low enough level.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",40,13,0
"thesofproject/sof","f734991fbed879006ea4ec53722603c9f8382175","fredoh9","2020-03-16 16:35:38","false","topology: enable eq pipeline when EQ is enabled in makefile

Instead of making new files for audio equalizer topology, reuse existing
topology and replace only volume pipeline by macro replacement.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",79,21,0
"thesofproject/sof","441b4381914aa06389fc384710bdb8af4ca52a60","plbossart","2021-06-02 20:42:18","false","intel: ssp: handle TSRE and RSRE along with SSE

The current code does not follow recommended programming sequences:
TSRE and RSRE should be set before SSE and conversely cleared before
SSE.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",82,36,0
"thesofproject/sof","6aa8f949456b42cbb480a4aad7f01e1cb7439058","lrgirdwo","2021-08-06 15:48:53","false","cache: make sure all shared data is cache line size aligned.

Aligns all SHARED data on cache line size to ensure we dont clobber
data.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",116,38,0
"thesofproject/sof","eecc7f6665f92dad9378c8065d3616d230efa373","plbossart","2018-07-23 16:43:32","false","topology: fix Makefile.am

copy/paste mistake

Fixes: 3dd17dc0 ('dist: fix make dist for topology M4')
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",13,2,0
"thesofproject/sof","e7d1b7bbf973615e4421c64c413c0ad3168d4d5e","lrgirdwo","2022-09-02 16:06:59","false","header: rtos: use rtos specific version of interrupt.h

Code can now include <rtos/interrupt.h> and uses native Zephyr IRQ API
for most uses. Some wrapping still exists which can be removed over
time. IMX is missing IRQ driver in Zephyr so falls back to xtos IRQ
driver.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",118,51,1
"thesofproject/sof","6327ed5f173085051b7d637c8180b0385b2bf21d","lrgirdwo","2018-09-30 10:29:42","false","hsw: memory: Add 4k size to HSW/BDW system heap

Needs the extra space to complete booting.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",37,4,0
"thesofproject/sof","8112cad6cee0e124c064fe406fbabcadba03017a","lrgirdwo","2021-01-27 15:17:21","false","component: doxygen: add more content around prepare() and reset().

Add some more usage context around prepare() and reset() for developers.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",68,32,0
"thesofproject/sof","b7ef91ebc1f5039d90095dc0c5fb1f74ae6750a4","jajanusz","2018-08-22 12:35:50","false","platform: refactor: move interrupt functions from platform.c

Moved platform_interrupt_* functions from platform.c to interrupt.c
to match CNL&APL. Updated headers for BYT&HSW to have the same functions
declarations as CNL&APL.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",19,3,0
"thesofproject/sof","138a9d018755ed04475f63a1a360c7af05eb8a82","johnylin76","2023-04-07 11:19:57","false","smart_amp: modify the Kconfig hierarchy

To fulfill the generic layer structure for smart_amp component, one
intermediate level is added to the current Kconfig hierarchy, i.e.
COMP_SMART_AMP. The MAXIM_DSM config is moved into smart_amp/Kconfig.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",50,58,1
"thesofproject/sof","d2cde75daa52ebb6897e39c79a26a97f49bf384f","alaa-emad","2023-03-19 10:19:45","false","drivers: imx: interrupt-irqsteer: remove unnecessary blank lines

Remove unnecessary blank lines before a close brace
as reported by checkpatch script

""CHECK: Blank lines aren't necessary before a close brace '}'""

Signed-off-by: Alaa Emad <eng.alaaemad.ae@gmail.com>
---
change in v2:
	edit subject line",56,57,1
"thesofproject/sof","ff7861f2229d3c9f4fe7b5eb7631a1139c14c24b","johnylin76","2022-11-24 07:53:15","false","topology: fix DMICPROC undefined issue for intel-generic-dmic

Adds fatal assertion in intel-generic-dmic.m4 for DMICPROC is not
defined in upper m4, and fixes a potential risk of assertion by
sof-tgl-max98357a-rt5682.m4.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",95,54,1
"thesofproject/sof","b2fcf898846dbe5cb800a48bf8b59e999e4684eb","jsarha","2023-01-20 12:38:07","false","topology2: hdmi-generic.conf: Increase channels_max to 8 for HDMI 1-4

Allow multichannel audio support for HDMI 1, 2, 3 and optional 4. This
change allows maximum of 8 (7+1) channels, provided the connected
displays EDID allows it.

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",56,56,1
"thesofproject/sof","e7c404fec8a5fd6729faee04adb96826fe5d794d","lyakh","2023-05-04 12:26:54","false","xtensa: xtos: remove bootloader support

The bootloader was only used by Intel platforms when building SOF
with XTOS. Now that that possibility has been removed, bootloader
support can be removed too to eliminate dead code.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,59,1
"thesofproject/sof","7060593a65e2986db0668d2c03b40abf09c1911b","lyakh","2021-09-23 12:32:39","false","ipc: properly account IPC responses on multicore

It is possible, that ipc_complete_cmd() is entered 3 times while
processing a single IPC message in multicore configurations: once by
the primary core, then by the IDC IPC processing context, and finally
by the pipeline thread, actually executing the IPC. To make sure that
the response is only sent once by the core, that actually processes
the IPC, we must not clear the .delayed_response flag on the primary
core in such cases, it should only be done by the IDC IPC context
before the pipeline task actually sends the response.

Fixes: 82857a78ba04 (""ipc: fix a IPC completion race"")
Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",118,40,0
"thesofproject/sof","2cfefc1103ef73713031a9f076dba953357f0229","lyakh","2022-07-29 12:49:58","false","ipc3: connect buffers on the primary core

Connecting buffers belongs to pipeline initialisation, it can be done
completely on the master core.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",110,50,1
"thesofproject/sof","a68c756a30a43a5eb4da2fadb6fda79b9cc1a3b4","lyakh","2020-11-26 14:16:29","false","dw-dma: align ILL allocations

ILL entries in the DW DMA driver are accessed both by the controller,
using DMA and by the DSP. For this to work the DSP has to force cache
synchronisation appropriately. Therefore the ILL area has to be
allocated with cache-line size alignment. This isn't the case with the
Zephyr allocator. This patch switches allocation from rmalloc() to
rballoc() to force such alignment. Eventually a generic fix will be
implemented in an SOF wrapper fpr the Zephyr allocator.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",78,30,0
"thesofproject/sof","e7da88d4391b67895a2ae0a5c3137304d1b03aeb","lyakh","2022-03-04 14:48:45","false","coherent: use sparse annotations

Add the '__sparse_cache' annotation to coherent API functions.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",116,45,1
"thesofproject/sof","565a252c1df917b58dd0e94097ca0c92b921e72a","marc-hb","2023-05-11 18:38:21","false","rebuild-testbench.sh: add missing shellcheck source=

Fixes last shellcheck -x warning

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",49,59,1
"thesofproject/sof","4e28b0acf7bda5dd27ee6be2d3c235d1b18fa651","groncarolonxp","2019-11-25 15:37:02","false","drivers: imx: sai: fix minor log issue

Correct log verbosity in SAI driver

Signed-off-by: Guido Roncarolo <guido.roncarolo@nxp.com>
Signed-off-by: Jerome Laclavere <jerome.laclavere@nxp.com>",66,18,0
"thesofproject/sof","66aaa599e97536a1d14f5999e3578cd92b2bca8e","ranj063","2023-05-17 20:14:15","false","topology2: dai-copier: Change the naming convention

Change the naming from dai-copier.<copier_type>.<pipeline_id>.<instance>
to dai_copier.<copier_type>.<stream_name.<direction>.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",50,59,1
"thesofproject/sof","b30d6b7c47539cbf49473fbe73b8c5b1809d0fbf","ranj063","2021-11-02 19:06:28","false","topology2: remove virtual_widget

It is a duplicate of virtual.conf

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",125,41,1
"thesofproject/sof","ea72e3e97e10acb27d02c3692b006c4f66fabfe4","ranj063","2022-06-16 20:46:12","false","module_adapter: Add a new helper to update input/output stream buffers

Add a new helper to update the consumed bytes in the input stream
buffer and the produces bytes in the output stream buffer.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",120,49,1
"thesofproject/sof","114a372d1dd7421294294cba88a5e643d055478e","makarukp","2022-11-29 12:35:46","false","tgl: hda: enable chain dma

Enable building chain dma component on TGL platform

Signed-off-by: Piotr Makaruk <piotr.makaruk@intel.com>",102,54,1
"thesofproject/sof","d9f6d071863afb1c0b01cabe8dec6d7e61045de8","cujomalainey","2023-07-14 00:13:23","false","audio: rtnr: partial revert of 589df2aea450

The original commit failed to take into account that the assigned stream
was an adapter (not audio_stream) therefore revert in this file since
the adapter is unchanged.

Fixes: 589df2aea450 (""buffer: don't access stream internals"")
Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",32,61,1
"thesofproject/sof","3e03232da7352561485657e24f2b51fafa51e177","cujomalainey","2023-07-13 21:21:47","false","audio: igo: Fix buffer access arg

missing reference

Fixes: 589df2aea4 (""buffer: don't access stream internals"")
Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",32,61,1
"thesofproject/sof","cc3b75665fc77ec423397f827c3d0d12824c289f","bardliao","2023-07-03 06:35:57","false","Topology2: hdmi: use macro to set HDMI BE name

HDMI BE name may not be iDispx.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",38,61,1
"thesofproject/sof","f43bb819499f64bac01851506d217072ff4a6fe5","cujomalainey","2023-06-29 22:23:11","false","volume: fix log message to match caller

Likely artifact from module adapter conversion

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",37,61,1
"thesofproject/sof","7ad6659b9ebd1145343753abb058ca50a7b46a26","ranj063","2023-06-28 17:14:16","false","topology2: components: mixin: Replace audio_format object

Use the input_audio_format/output_audio_format objects explicitly.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",38,61,1
"thesofproject/sof","a6fa09cca79abe40bbff466359218b10fcc46efc","bardliao","2023-07-04 02:23:54","false","Topology2: add sof-tgl-rt711-rt1308-rt715 topology

Add sof-tgl-rt711-rt1308-rt715 topology for topology2.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",39,61,1
"thesofproject/sof","48777207f5fdc49314dd4709d660e891c48d5ba9","saisurya-ch","2023-06-06 06:29:23","false","config: add vangogh toml file to support vangogh build

Add vangogh toml file to support sof-vangogh.ri binary build

Signed-off-by: SaiSurya, Ch <saisurya.chakkaveeravenkatanaga@amd.com>",45,60,1
"thesofproject/sof","4e8040c232f93c24d1fb0861601cece3d7ceceeb","marcinszkudlinski","2022-11-16 14:21:32","false","platform: ace: Add pm notifiers to support Zephyr's D3 transition

During PowerOff (D3) transition Zephyr Power Manager must have
a pointer in IMR to save the LP/HPSRAM memory before
powering off.

As zephyr has no access to IMR heap, the memory must
be allocated by SOF

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",95,53,1
"thesofproject/sof","ee6eb1b1696dfeae4fcb7075d22c6a460911606f","singalsu","2023-06-07 11:08:37","false","Audio: Module adapter: Add simplified one source to one sink copy

This patch adds a simplified version of audio stream copy for
module adapter clients with one source and one sink. The overhead
of discovering multiple source and sink buffers is avoided.

The module_adapter_bind() and module_adapter_unbind() functions
are changed to detect multiple sources or sinks condition
to control the used simple copy function. The mod->source and
mod->sink pointers to buffers are updated when there's only
one source and sink.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",46,60,1
"thesofproject/sof","4a0443812b38642fac0cec505ae322f900360685","abonislawski","2023-06-16 07:24:16","false","dai-zephyr: possible division-by-zero if max_block_count is zero

If the max_block_count attribute is zero, this may lead to
division by zero error. Handle this explicitly but reporting
error if max_block_count is zero.

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",46,61,1
"thesofproject/sof","db8da43845e5848829205045a252c8bada168f6b","andrula-song","2023-06-27 00:42:52","false","Audio: TDFB: Share the functions code for HiFi3 and HiFi4

Since there is not any intrinsic on HiFi4 can get better
performance, thus share the implementation code for HiFi3
and HiFi4.

Signed-off-by: Andrula Song <andrula.song@intel.com>",40,61,1
"thesofproject/sof","7d98a0b59476309a3e185fa946a7f8d6e1de7d19","andrula-song","2023-06-26 08:14:16","false","Audio: TDFB: Optimize the circular buffer usage

Optimize the tdfb_fir_sx functions by remove the duplicated
usage of circular buffer.

Fixes: #5273.

Signed-off-by: Andrula Song <andrula.song@intel.com>",40,61,1
"thesofproject/sof","e7e500651730c77969e616f853b2db5789a24246","kv2019i","2023-06-20 13:05:46","false","west.yml: update Zephyr to 3.4.99

First Zephyr update after 3.4.0 release.

Contains 524 commits, including following directly affecting
SOF targets:

e2e3dc077118 dts: xtensa: intel: add imr entry to cavs25_tgph
6c9a360647c8 drivers: intel_adsp_gpdma: Fix typo in reg name
a8b28f13c195 soc: intel_adsp: cavs: add simple IMR functionality
339b00de11e5 soc: xtensa: intel_adsp: fix memory bank shutdown
5dfaf23f47b7 xtensa: intel_adsp: lnl: Fix dspcs struct
09085ef63c02 dts: xtensa: intel: update cavs25 sram size
b871138fae1f soc/intel_adsp: fix typo in L1EXP definition
9db44fa2813c toolchain: xtensa: enable C11 features with xt-clang
2ba7855ddf23 modules: mipi-syst: support minimal C library

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",43,61,1
"thesofproject/sof","589df2aea450b1a7330218d67589428c76c7fe29","marcinszkudlinski","2023-05-15 21:20:34","false","buffer: don't access stream internals

add more functions to audio_stream internals

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",51,59,1
"thesofproject/sof","05871a16de0d7d66f9c8dab3bf2b4dbd96c778da","marcinszkudlinski","2023-04-17 11:31:21","false","pipeline2.0: add source/sink api to audio_stream

Make audio_stream capable of using pipeline2.0
sink and source API
This change makes integration of sink/src api
possible in incremental way

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",50,58,1
"thesofproject/sof","63b1264a7471f2457b5b67dc3f0457b96bc41082","btian1","2023-05-17 06:26:27","false","copier-dai: create new file for dai specific code

Move copier.c dai specific code to copier_dai.c

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",52,59,1
"thesofproject/sof","80c6738b89bc3e677cc125dd189aac97f111dfd5","marc-hb","2023-05-31 23:45:01","false","app/prj.conf: restore the CONFIG_CLEANUP_INTERMEDIATE_FILES=n default

Zephyr has hardcoded this to 'y' because it saves CI some disk space
when compiling hundreds of different zephyr/tests/, each in a separate
build directory. But when compiling just one ""sof/app"" it saves
practically no space, breaks the incremental build and can make it more
difficult to troubleshoot some build issues. So, reset it to the default
value.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",48,60,1
"thesofproject/sof","e4e5d0344e62245039e5488ed6b267726ce5977a","btian1","2023-05-24 03:41:57","false","copier-dai: move create_dai function to copier dai file

Move it and its dependency from copier.c to copier_dai.c file.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",56,60,1
"thesofproject/sof","493e2dd3e9b6cbb78da7960789d207f0c9a5bdce","andrula-song","2023-05-23 02:24:17","false","Audio: Fix the 24/32 bits format peak volume calculation

Left shift 8 bits the max value to put the valid 24 bits
into high 24 bits in 32 bits container.

Signed-off-by: Andrula Song <andrula.song@intel.com>",55,60,1
"thesofproject/sof","ab9449fa086ed27f226a1c5e2f8da5de0d94e72f","ranj063","2023-05-23 04:56:54","false","topology2: tokens: Reduce the string length of token names

In preparation for changing the name of the DAI copier which will make
them a bit longer, reduce the token name lengths by removing the
sof_tkn_ prefix. This is required because the header names in topology
have a 44 character limit and with a long name like:
dai-copier.SSP.NoCodec-0.playback.sof_tkn_comp.uuid, the limit will be
hit. Removing the sof_tkn_ prefix will reduce the number of characters
in the tuple name headers.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",55,60,1
"thesofproject/sof","511a33105295a7e603e122259ba316069311ab6e","ranj063","2023-05-25 21:00:26","false","src: mixin_mixout: Set channels during mixout_params

comp_verify_params() doesn't set the channels. So set it explicitly
during params.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",51,60,1
"thesofproject/sof","1b9cb679bb4b27973d18b77fd8fccae44f7c419f","ranj063","2023-05-23 04:49:40","false","topology2: components: Make uuid common for all widgets

Move the uuid attribute definition to widget-common.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",55,60,1
"thesofproject/sof","a769d3941d81f6d487e1a2bb6c3f99a193ebdcae","marc-hb","2023-05-12 01:17:04","false","xtensa-build-zephyr.py: stop calling west sign, rely on west build

Stop invoking west sign manually. Configure rimage using `west config`
and a platform-specific WEST_CONFIG_LOCAL file instead, then rely on
west build to invoke rimage.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",49,59,1
"thesofproject/sof","f1075489cf7d3af169a479d316b77e2bd3a1c934","ranj063","2023-05-19 15:52:25","false","topology2: dai-copier: Add clarification on input/output format counts

These are mandatory for both directions as they are used to set the DMA
buffer format.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",53,59,1
"thesofproject/sof","96bd6bc62db904d5edf1d9a672c1ce147fecc24d","ranj063","2023-05-17 18:26:11","false","topology2: copier: Rename it to dai-copier

To make it explicit that it is only for the DAI gateway.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",50,59,1
"thesofproject/sof","f796e0a580d2b85577c22db844c3a4e0875b61c4","andrula-song","2023-04-24 03:16:10","false","Audio: EQ-FIR: Optimize the eq_fir_2x_sx functions

Optimize the eq_fir_2x_sx functions by remove the duplicated usage
of circular buffer.

Signed-off-by: Andrula Song <andrula.song@intel.com>",52,59,1
"thesofproject/sof","aeda64b61c95e181d8de4271936b08b51bcf878a","kv2019i","2023-05-23 09:36:02","false","dai-zephyr: handle dynamic disconnect of one sink

In IPC4 mode, the DAI supports writing data to multiple sinks.
It is possible one of the sinks to be on a different pipeline,
which can be disconnected while the DAI is still running.

Depending on the order of pipeline setup, the disconnected sink
might have been chosen as the local_buffer.

Handle this case by reconfiguring the local buffer after
disconnect in the copy function.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",55,60,1
"thesofproject/sof","494d174b6e0ac52766859d9f94dbeb3630e1bc47","marc-hb","2023-05-03 22:38:43","false","xtensa-build-zephyr.py: parse new versions.json instead of generated .h

For rimage parameters, parse new, static versions.json file instead of
generated sof_versions.h file. This will make possible to configure
rimage before west build.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",54,59,1
"thesofproject/sof","b86acaa353bcba13754e16f009fe903c7b82b41f","ranj063","2023-05-16 20:49:45","false","topology2: deepbuffer-playback: Use host-copier

Replace the generic copier with host-copier in the class definition and
the instances.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",52,59,1
"thesofproject/sof","23bc1c5d0ea0663ed6d728e6bf09f9276efa65e5","aborisovich","2023-05-18 17:12:24","false","workflows: Zephyr build-windows removed unzpip package

Installation of new Zephyr SDK 0.16.1 does not require unzip anymore
in the setup.cmd script. This tool had been replaced by 7z that is
by default present on all Github Windows runners.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",50,59,1
"thesofproject/sof","9e95cd288bc371581dcb0960b556d490bd825913","ranj063","2023-05-16 21:01:47","false","topology2: gain-capture: Use host-copier

Replace the generic copier with host-copier in the class definition and
the instances.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",52,59,1
"thesofproject/sof","48910da79d661a713dbb8c488917c04565ae180f","ranj063","2023-05-13 19:37:09","false","copier: Modify channel_copy_func

Modify the channel_copy_func to align it with other processing function
signatures.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",51,59,1
"thesofproject/sof","d87b5f9d0b748974339c042fe5fa72b908c1ba41","kv2019i","2023-05-17 08:33:35","false","topology2: cavs-nocodec-bt: fix bclk for loopback A2DP case

The BCLK was incorrect for the loopback (LBM) configuration
for BT A2DP (48kHz 2ch 16bit), leading to incorrect playback/capture
speed.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",51,59,1
"thesofproject/sof","39550177c3b85613b3859e514bacdde50db26304","andrula-song","2023-05-11 02:47:48","false","Dummy smart_amp: copy input_pins and output_pin separately.

The original code confuses static code analyzers since it was
relying on the fact that we have the 2x input and 1x output pin
config in adjacent position in smart_amp_data struct similarly
to the extended module configuration.

While it works, it is not a good practice.

Split the copy of input and output pin formats to make the code
obvious and less error prone.

Fixes: andrula-song@ bcc1407 (""smart_amp_test: Split the module
config and blob receiving for IPC4"")

Signed-off-by: Andrula Song <andrula.song@intel.com>",49,59,1
"thesofproject/sof","c1ae62e32bb91a3083742e21f83fad21d0ff73e5","marc-hb","2023-05-11 18:39:33","false","rebuild-testbench.sh: add -j jobs option

This is required to investigate build failures. Because of the way the
build is split, a failure in one component can become totally drown in
the long build logs of another component.

Example: with -j2 the `parser_ep` build failure below is completely
drown by the long (and successful!) build logs of `sof_ep`:

```
./scripts/rebuild-testbench.sh -j 1 -p tgl

sof/tools/testbench/build_xt_testbench/sof_parser/build/include/alsa/
sound/asoc.h:196: error: expected specifier-qualifier-list before ‘__le32’
```

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",49,59,1
"thesofproject/sof","f0d1d4918fb5909bf544a5bd8724510cb2e90a19","marc-hb","2023-05-11 18:33:36","false","rebuild-testbench.sh: testbench_usage(): add missing ;;

Also: don't fail silently.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",49,59,1
"thesofproject/sof","30f4c8c972eac1dbb0734762e165d2f8b2ef200c","marc-hb","2023-05-15 22:26:31","false",".github/sparse-zephyr.yml: delete obsolete REAL_CC magic

This hasn't been required since Zephyr commit 91902c5fd4db (""cmake: add
sparse support to the new SCA infrastructure"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",51,59,1
"thesofproject/sof","ce0dd67bb70bf8e7bc3c7ceedc4b0555ca2f16bd","marc-hb","2023-05-03 00:52:40","false","sof_builder/Dockerfile: restore deleted toolchains

Building a Docker image takes several hours. To reduce costs and save
time we don't want to maintain a different Docker image for the
stable-v2.2 branch. Restore toolchains that were accidentally removed
from the Dockerfile because this will unnecessarily paint red every PR
submitted to the stable-v2.2 branch, example:

https://github.com/thesofproject/sof/actions/runs/4867162042/jobs/8679468096

If we want to stop supporting something then let's keep things simple
and remove it only where it actually gets in the way and where it
actually becomes a problem. No need to search and scrub every reference
to it from the face of the planet and accidentally make our life harder
on release branches, create pointless git conflicts and _increase_
maintenance costs when trying to reduce them!

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",54,59,1
"thesofproject/sof","406e660a34b6e09298e2d10c3e27cdd60f8cc076","RanderWang","2023-03-03 08:35:20","false","topology2: add google rtc aec support

Add google rtc aec in topolog for chrome project

Signed-off-by: Rander Wang <rander.wang@intel.com>",59,57,1
"thesofproject/sof","d3e3943badbd228717a745acec0fbfc83ca810a4","aiChaoSONG","2023-04-25 06:11:05","false","Topology2: add comment to separate chromebook topology clearly

Add a single comment to separate chromebook topologies
from non-chromebook topologies.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",54,59,1
"thesofproject/sof","cfd877e6c0216fb8842094ce1f387659e2e7b3c5","lyakh","2023-04-20 12:53:29","false","notifier: add a type for callbacks

To make sure the same prototype is used for all notifier callbacks
add a typedef.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,59,1
"thesofproject/sof","91dbc05ff306bf4ba81144d8f1f30692cc1a81e5","lyakh","2023-03-22 16:34:47","false","IPC4: host: remove notifier, call the copier callback directly

Using the notifier between the copier and the host makes little
sense with native Zephyr drivers: it ends up in a direct function
call, but before that it has to look for the correct callback in a
global notifier list. The callback can perfectly be called directly
instead.

With legacy SOF drivers we still need to use the notifier because
that is how SOF DMA drivers trigger the host component. We have to
provide a compatibility callback in the copier for the IPC4 case.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,58,1
"thesofproject/sof","54c4b88d5790aa4ef41121b8c59e019d56659284","nashif","2023-04-19 08:15:58","false","zephyr: use system cache API

Use zephyr cache APIs instead of xtensa specific ones.

Signed-off-by: Anas Nashif <anas.nashif@intel.com>
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",51,58,1
"thesofproject/sof","8f250a99eb27e43c2bbc27c428b3f52606b42ad7","singalsu","2023-04-18 11:17:13","false","Config: Change indent for SRCINTC

This patch removes one unnecessary tab from section for SRCINTC.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",51,58,1
"thesofproject/sof","d2336bbe4b48c2d9ea59f160f33e75f8f6f9a98b","serhiy-katsyuba-intel","2023-04-18 08:31:59","false","ipc4: copier: Fix memory leak

Adds forgotten buffer_free() for copier multi_endpoint_buffer.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",51,58,1
"thesofproject/sof","a706f40433a9021b8bf30103a1664871f4f02458","yongzhi1","2023-04-06 15:54:11","false","topology2: Enable chain DMA for MTL cavs-rt5682 topologies

Enable ChainDMA to support 16/32bit, channels_max 8 HDMI playback.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",51,58,1
"thesofproject/sof","0a6b90eb34ea44c6835cf83f767fb218d6295999","lyakh","2023-04-24 08:32:41","false","ams: fix sparse address space change

When changing pointer type between different sparse address spaces,
the change has to be forced to let sparse know, that this is intended
and to avoid a warning. Fix such type cases in ams.c.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",52,59,1
"thesofproject/sof","98a3f67b10a7d266630b92e4f0e128e9f1eb2e65","RanderWang","2023-04-14 03:17:54","false","module_adapter: add get_total_process_data_process support

Get_total_process_data_process is used to get the processed data of
a module when stream is started. It is used to calculate pipeline
latency with the algorithm of subtracting processed data count between
source pipeline module and sink pipeline module. This patch will
calculate consumed & produced data count based on input & output buffer
setting and return produced data count for source module and consumed
data for sink module.

Currently only copier supports this function, now add it to
module_adapter framework to support other modules.

Signed-off-by: Rander Wang <rander.wang@intel.com>",50,58,1
"thesofproject/sof","b3d1583f3c9b42aa0cc93a7c808934141c3b8d40","singalsu","2023-03-31 16:05:52","false","Audio: Component: Update to component.h module adapter conversions

In component.h the eq_iir and mixer have still the old component
API function prototypes. They can be removed as not needed. These
components do not support legacy mode.

Similar update is done to testbench common_test.h. The function
prototypes there are duplicate since they are now available in
component.h.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",56,58,1
"thesofproject/sof","9cd7090345e8744f001b5fef354ff65e090c5393","marc-hb","2023-04-12 21:20:39","false",".github/zephyr: add -Werror to AFLAGS, not just CFLAGS

Past Zephyr experience showed that CFLAGS is not enough to cover all
cases: https://github.com/zephyrproject-rtos/zephyr/commit/8a603da6cde63

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",51,58,1
"thesofproject/sof","f7a1d2aaf84be67ca02d0017fa34742011b5b196","greg-intel","2023-04-21 22:45:45","false","Update pull-request.yml

A small typo, but irrelevant as this PR doesn't need to be merged.

Signed-off-by: Greg Galloway <greg.galloway@intel.com>",53,59,1
"thesofproject/sof","ca68ba68f22c2bf3c209b62466a2aaac6b09ea2d","gmarull","2023-04-06 16:06:41","false","zephyr: update SYS_INIT calls

Update Zephyr head, and use the new call signature:
int (*init_fn)(void);

Signed-off-by: Gerard Marull-Paretas <gerard@teslabs.com>",51,58,1
"thesofproject/sof","d1a8feddfcb3d3c4d474fddbf768fd6311724605","lyakh","2023-04-20 13:40:09","false","buffer: fix access without acquisition

In most of the user code buffer control structures should only be
accessed after acquisition, not via their raw pointers.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,59,1
"thesofproject/sof","192700181c0f53e5d91d933ef48da366d287ee95","marc-hb","2023-04-12 22:17:02","false","xtensa-build-zephyr.py: downgrade --cmake-args restriction to a warning

--cmake-args is actually safe, just a bit slower. See explanation in
https://github.com/zephyrproject-rtos/zephyr/pull/56671

Fixes unnecessary restriction added by commit 9fb7a607ebda
(""xtensa-build-zephyr.py: fix -C option so it can support whitespace"")

Also warn for overlays because they act the same.

Log the `west config` due to the suggestion to use build.cmake-args and
the recent rimage changes in Zephyr PR 54700

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",51,58,1
"thesofproject/sof","ffe0ce68a149915a59a9f79fd9723309469013b4","yongzhi1","2023-04-19 15:02:09","false","topology2: cavs-rt5682: remove 24-bit override in mixout-gain-dai-copier-playback

With 208c2049f (""topology2: deep buffer: use 32 bits to align with
other pipeline""), we can remove this override now.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",51,58,1
"thesofproject/sof","bdc5453db1214b7c6b188932cb8e013691b7b918","dbaluta","2023-04-03 15:16:21","false","imx: platform: Enable tracing for Zephyr

Logger was disabled for i.MX8 platforms with Zephyr because
of problems with DMA domain.

Now that DMA domain works fine for i.MX8 platforms enable logging as
well.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",52,58,1
"thesofproject/sof","3f3c1e5084a8f9aa6d3fce11167db997115ebc0b","dbaluta","2023-04-03 15:02:07","false","zephyr: Make CONFIG_DMA_DOMAIN no longer experimental

DMA domain with Zephyr works fine for i.MX platforms. So, remove
""experimental"" from description and enable it by default for i.MX
platforms.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",52,58,1
"thesofproject/sof","22c0e235bcfcca1be86b5b69f9fbbce9fa1722b8","singalsu","2023-03-01 13:41:41","false","Audio: TDFB: Convert to module adapter

This patch converts the time domain fixed beamformer (TDFB) into
module adapter API.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",61,57,1
"thesofproject/sof","6e3abe6afed380e7e9a6f430552f3ce54915eb40","softwarecki","2023-03-10 15:44:20","false","rimage: Add suport for loadable modules

A new -l parameter has been added to the program's command line. It
instructs the program to not treat the first module as a bootloader
and not to skip the bss section for it.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",55,57,1
"thesofproject/sof","de56d362403e88b3868e3aa9c4199904decfb199","ranj063","2023-03-31 19:24:44","false","topology2: dai-copier-be: Do not set copier node_type

It should be set based on DAI type when the pipeline is instantiated.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",56,58,1
"thesofproject/sof","97c7f5990652dd5b962ee530d85f89e26b2f0678","lrgirdwo","2022-12-22 15:12:08","false","host: cmake: fix module adapter builds for host

Currently host build of module adapter builds the module adapter core
for each module. Lets only build it once on host.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",92,55,1
"thesofproject/sof","60bc228b8151d77aa53bc61151d3495b20a423e3","ranj063","2023-03-31 19:29:18","false","topology2: mixout-gain-smart-amp-dai-copier-playback: Do not set copier node_type

It should be set based on DAI type during pipeline instantiation.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",56,58,1
"thesofproject/sof","f41ad4329d4ca1c17a52ad4f037a0fa12880d885","marc-hb","2023-03-22 01:39:27","false","scripts/fuzz.sh: add timeout feature and stdout redirection

Also add getopts and a very crude help. Should be enough to get started
in CI.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",57,58,1
"thesofproject/sof","00b2bf65ed680687a71cdf6818120c6a00d0a7d7","maruthi-machani","2023-03-24 07:16:26","false","topology1: topology changes to enable tdm without virtual dai.

topology changes to enable tdm without virtual dai.

Signed-off-by: MARUTHI MACHANI <maruthi.machani@amd.com>",56,58,1
"thesofproject/sof","157fd098ccd63e8b43e965c91f4b382a3755f500","marc-hb","2023-02-17 01:33:27","false","app/CMakeLists.txt: require cmake version 3.21.0 or above

In version 3.21, CMake made a change that links .c.obj files in a order
different from 3.20. This makes different CMake versions generate a
different final image and breaks build reproducibility.

No such change between 3.21 and 3.25.2

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",54,56,1
"thesofproject/sof","552bc564a3fabb3659902469356d8f9eec08fcc8","fkwasowi","2023-02-02 11:15:08","false","kpb: add large config set function

Add large config set function
to be able to set the micselector.
Allow to configure which mics are
used by the kpb,
using large_config_set interface

Signed-off-by: Kwasowiec, Fabiola <fabiola.kwasowiec@intel.com>",52,56,1
"thesofproject/sof","3ad30d576cc287fdfcc49cc99eb82ac663bc9fc7","jsarha","2023-02-22 17:19:40","false","topology2: pipeline: Add ""kcps"" attribute

Adds kcps attribute to pipeline class with 0 default value.

The default can be overrided with KCPS_PIPELINE_DEFAULT define.

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",56,57,1
"thesofproject/sof","b94a5fbc54dd0424746e9555c8286b825b4c35a6","marc-hb","2022-08-18 14:00:14","false","xtensa-build-zephyr.py: fix two minor pylint f-string warnings

Fix two W1309 f-string-without-interpolation warnings

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",112,51,1
"thesofproject/sof","6bea4104810a0c7f4e29cc8cd485e9dfb89bd281","barry-waves","2022-08-03 02:07:38","false","Waves: fix buffer acquisition

In module adapter, Waves will receive bin file from user space
before .prepare method be called. To support this change, move buffer
acquisition in .ini method instead.

Signed-off-by: barry.jan <barry.jan@waves.com>",110,50,1
"thesofproject/sof","8efd627964cc7eb06e9b7974d883c99dc3bb1436","barry-waves","2022-08-03 01:09:32","false","topology: add Waves for sof-mt8186-mt6366-rt1019-rt5682s tplg

Signed-off-by: barry.jan <barry.jan@waves.com>",110,50,1
"thesofproject/sof","8a1b0519409866caa343bb120902303b14b3dc40","dbaluta","2022-08-11 11:31:16","false","topology1: codec_adapter: Remove ca_config bytes

After commit:
5763c74bf408d (""codec_adapter: Remove setup config from module data"")
we no longer setup config bytes in codec adapter control bytes.

So, we need to remove ca_config bytes and fix payload size. This
didn't introduce any bug because this is the default
CA_SETUP_CONTROLBYTES. Each topology uses a custom control bytes
which overrides this default values.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",116,50,1
"thesofproject/sof","66514f20e38de860b09b5c5f9f20dad44f29e9f5","lyakh","2022-08-05 14:27:36","false","general: eliminate multiple cases of variable redundancy

On multiple occasions local variables are used for only one
intermediate operation and can easily be eliminated with no loss of
clarity. This increases code density to allow better overview.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",118,50,1
"thesofproject/sof","a8918f27bf94d179169c9dae116eebf8c354a65e","dbaluta","2022-08-05 10:38:07","false","imx: clk: Fix zephyr header include

After Zephyr commit:

855216f582d2 (""kconfig: default to LEGACY_INCLUDE_PATH=n"")

we get a compile time error because legacy include paths are not
supported by default.

Fix this by adding 'zephyr/' prefix in proper places.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",116,50,1
"thesofproject/sof","125d372b1956ebca6f7260644993b62ca9766a6c","marc-hb","2022-08-03 17:54:45","false","docker-build.sh: don't switch versions when already initialized

Restore ability to use (and test!) zephyr/docker-build.sh locally
without overwriting work in progress.

Fixes commit b371373f7d74 (""scripts: docker-build.sh updated with
changes from xtensa-build-zephyr.py"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",110,50,1
"thesofproject/sof","4b8c8f040c1560b8c101ef78726aacaa2167fc7d","jxstelter","2022-05-26 12:30:30","false","Add module_adapter component for intel modules.

Add files with definition of module_adapter component
for intel IADK modules.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",115,48,1
"thesofproject/sof","f9741cb0cef69143ebd5d1b3db0a2d2c8354541b","jxstelter","2022-05-26 12:32:07","false","Connect intel_module_adapter with generic module adapter.

Added glue logic to integrate with module adapter
the loadable modules developed under Intel
IADK Framework.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",115,48,1
"thesofproject/sof","3f12097f363728719f788b6dd43519d68a73b471","RanderWang","2022-06-13 05:20:44","false","topology2: add support for sampling rate

The original calculation will generate 44 sample size for
44.1khz, actually it at least needs 45 sample size.
This patch uses ceil value for such rate, also inlcude
11.025kh, 22.05kh, 88.2khz, 176.4khz.

Signed-off-by: Rander Wang <rander.wang@intel.com>",118,48,1
"thesofproject/sof","ece102b9487667cf2dc08b1f914b20ad33a2fa73","joechengxperi","2022-05-11 06:15:32","false","config:renoir:add DTS config

Enable DTS SDK

Signed-off-by: Joe.Cheng <joe.cheng@xperi.com>",113,47,1
"thesofproject/sof","74808ef65e5e7267f534fc74d59435e16777b650","lyakh","2022-04-08 13:53:16","false","copier: fix buffer acquisition

Instead of acquiring and releasing buffers locally multiple times,
do that once for .copy() and .params() methods.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",114,46,1
"thesofproject/sof","7b6729ea2430fe20237fd77386bc97598e44a6c9","lyakh","2022-04-06 13:01:53","false","eq_fir: fix buffer acquisition

Instead of acquiring and releasing buffers locally multiple times,
do that once for .copy() and .prepare() methods.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",111,46,1
"thesofproject/sof","83ee5b49a987353866ae0b5ff2302e19d9a92264","balakishorepati","2022-04-13 17:13:12","false","dai: support for amd specific hs dai id

Add support for hs i2s instance on rembrandt
platform.

Signed-off-by: Balakishorepati <balaKishore.pati@amd.com>",117,46,1
"thesofproject/sof","e9442e04c67eb9227f54d0768ee5a464d0dc4d9e","CyKuei","2022-06-10 09:39:21","false","module_adpater: change the buffer size of waves_codec

Change the buffer size of waves_codec from 2ms to SCHEDULE_PERIOD

Signed-off-by: CY Kuei <cyk@waves.com>",115,48,1
"thesofproject/sof","38e4018c26e8c6a171e610b2f39c5e52e34acce1","balakishorepati","2022-03-25 04:28:58","false","rembrandt: Add support for AMD rembrandt platform

Add rembrandt platform support to build fw image.
Add rembrandt_defconfig for rembrandt platform.

Signed-off-by: Balakishorepati <balaKishore.pati@amd.com>",111,46,1
"thesofproject/sof","6fad8b8bd725870304cc02abec67242584cce70b","jsarha","2022-06-10 13:34:26","false","dma: Resurrect dma_copy_to_host_nowait()

Resurrect dma_copy_to_host_nowait() since the probes do not appear to
work without it. This version implements also non blocking version for
non CONFIG_DMA_GW case. Earlier the function was called nowait, despite
the DMA_COPY_BLOCKING flag given to dma_copy_legacy().

Fixes: 443b21de4b3f (""dma-trace: Fix potential race issue by using blocking DMA copy"")

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",115,48,1
"thesofproject/sof","79fce0420ac67978c30fe0293405bb46380efc6c","lyakh","2022-05-27 06:36:19","false","dai: fix potential NULL dereference

This never happens in practice, but statis analysis tools are right
complaining about potential NULL dereference here.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",115,48,1
"thesofproject/sof","8ba3d17296563af5166f2f59448e9c21e11194bf","kfrydryx","2022-03-11 13:00:30","false","adsp_config: fix name parsing error in parse_signed_pkg_ace_v1_5

Fix name parsing error in parse_signed_pkg_ace_v1_5

Signed-off-by: Krzysztof Frydryk <krzysztofx.frydryk@intel.com>",114,45,1
"thesofproject/sof","b1569320c8a4c23abd7656b54cdb017e2806c97a","tmleman","2022-05-27 07:21:26","false","intel: dmic: set plat_data fifo depth for capture

This patch sets plat_data fifo depth for SOF_IPC_STREAM_CAPTURE instead
of a SOF_IPC_STREAM_PLAYBACK. The value is later read with
get_fifo_depth().

Without this patch the driver sets the value to fifo[0].depth and then
reads from fifo[1].depth.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",115,48,1
"thesofproject/sof","a98425c66749a8c1d8a35a9b2dba5f45e8fee7ee","ranj063","2022-03-23 22:44:13","false","codec_adapter: rename codec_adapter.h

To module_adapter.h. No functional changes.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",109,46,1
"thesofproject/sof","4aa202dd78e629d6d490207c1bab12f212b7ae7b","MingJenTai","2022-03-15 03:09:42","false","[RTNR] Add audio stream layer between sof and RTNR

The audio_stream structure might be different between branches. To maintain the compatibility between branches, a layer between sof and RTNR is added.

Signed-off-by: Ming Jen Tai <mingjen_tai@realtek.com>",107,45,1
"thesofproject/sof","d1db144e1b1a34d753113e5b2ac4b702e75cae12","ranj063","2022-05-12 18:10:38","false","overlays: tgl: Add DMIC_NHLT

INTEL_DMIC_NHLT should be chosen for IPC4 for TGL.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",111,47,1
"thesofproject/sof","deb6c5c55adc9c3f44a11f24766ed786577fc8c8","brentlu","2022-04-22 02:19:11","false","topology: intel-boards: new file for machind driver differentiation

The order of BE DAI Link in topology must match the order in machine
driver. Create this include file to organize the definition of BE DAI
Link ID.

Signed-off-by: Brent Lu <brent.lu@intel.com>",114,47,1
"thesofproject/sof","f1cf43126ec78f8526def6cc29012cfd99671d3c","plbossart","2021-08-06 21:12:10","false","topology1: SoundWire: add deep buffer support for headphone

Deep buffer is device 31 by convention

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",116,38,0
"thesofproject/sof","3e58f2cf5cf46283511780a5825a7aecc7947792","marc-hb","2022-04-22 00:43:27","false","installer: explain why we install only sof-*.tplg files

See #4611 for more background.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",114,47,1
"thesofproject/sof","dbdaba93bb72aa83ef7a70532e88f3e0bae32b25","plbossart","2022-04-15 21:37:07","false","topology1: sof-hda-generic: remove digital paths

These paths are not well supported on all devices and lead to errors such as

17:06:06 kernel: HDA Digital: ASoC: dpcm_be_dai_startup() failed at Digital Playback and Capture (-22)
17:06:06 kernel: Digital Playback and Capture: __soc_pcm_open() failed (-22)
17:06:06 kernel: snd_hda_codec_conexant ehdaudio0D0: ASoC: error at snd_soc_dai_startup on Digital Codec DAI: -22
17:06:06 kernel: snd_hda_codec_conexant ehdaudio0D0: ASoC: error at snd_soc_dai_startup on Digital Codec DAI: -22
17:06:06 kernel: snd_hda_codec_conexant ehdaudio0D0: didn't find PCM for DAI Digital Codec DAI

We've already removed this digital path for IPC4/topology2, let's also remove this for topology1.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",117,46,1
"thesofproject/sof","41f171709d369ac47d8c9fe2c323ff13b42a0cc8","marc-hb","2022-04-22 22:24:19","false","CODEOWNERS: add @aborisovich, remove @zrombel

Thank you!

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",114,47,1
"thesofproject/sof","2efc3ea41c0074c6dab5f376fafaa26f52c25c75","ranj063","2022-04-12 20:23:10","false","topology2: dmic-generic: add support for 4ch capture

Add support for 4ch DMIC capture and modify the nocodec topology to use
it.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",117,46,1
"thesofproject/sof","1918d789bdf8ad5deaa792a90a1440b69660ca8b","rfredzim","2022-03-30 10:26:52","false","ipc4: add macro for building notification header

Add a macro for building ipc4 notification header based on
specific notification type.

Signed-off-by: Rafal Redzimski <rafal.f.redzimski@intel.com>",112,46,1
"thesofproject/sof","ebf940e31e28d474e7db394af368799336f9d9ae","RanderWang","2022-03-04 13:13:30","false","ipc4: don't get dai position when dai is not ready

Fix fw panic in ipc4 linux driver test. When dai
and host are in different pipelines, dai pipeline may be
prepared after host pipeline, in this case we can't get
dai position. The pipeline of copier component is set
when pipeline is prepared, now set it in initialization
function to avoid above case.

Signed-off-by: Rander Wang <rander.wang@intel.com>",116,45,1
"thesofproject/sof","9272126dd37e3b84007880d9d39607b58f2ca6b3","ranj063","2022-03-03 04:39:30","false","codec_adapter: move the check for required data into codec implementation

Move the check for required data for each process callback into the
individual codec implementation. This is in preparation for removing
in_buff_size from struct  module_processing_data eventually.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",113,45,1
"thesofproject/sof","2e4590680722fbf7e48aa1f835f0afc610557f83","lyakh","2022-03-16 08:26:53","false","zephyr: ll-schedule: initialise n_tasks

When the ll-scheduler is initialised and its private data is
allocated, all fields of that data have to be initialised. Add a
missing n_tasks initialisation.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",108,45,1
"thesofproject/sof","6d0ecc37cc282a6c9df991168931697ba2213138","kv2019i","2022-03-09 16:12:29","false","xtensa-build-all: add a separate target for JSL

Use intel_adsp_cavs20_jsl Zephyr board when building for
Intel Jasper Lake.

BugLink: https://github.com/thesofproject/sof/issues/4539
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",114,45,1
"thesofproject/sof","d792b0602dcfdd83d8adc1bced650586b8329aa6","lkoenig","2022-03-09 14:49:49","false","google-rtc-audio: Make AEC reference stereo

To provide echo cancelling effect while a stereo signal is played out,
the RTC Audio processing component required to have both left and right
channel as reference.

This CL ensure this is the case.

Signed-off-by: Lionel Koenig <lionelk@google.com>",114,45,1
"thesofproject/sof","fc3bc3c8059293f20d24b0a80a3e4036428e70d6","marc-hb","2022-02-22 23:30:56","false","xtensa-build-zephyr.py: don't git_submodules_update() twice

A second git_submodules_update() immediately after the first one does
not make sense. This looks like something leftover from a past
experiment.

Fixes initial commit 1de3ef367584 (""Rewritten xtensa-build-zephyr.sh to
python"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",106,45,1
"thesofproject/sof","c42ede6a97af8cca0b955812a72308fc59da0b8a","malik-hsu","2022-02-25 07:59:29","false","topology: sof-adl-max98360a-rt5682-waves: add new topology

Add support for max98360a speaker amplifiers with waves function.

Signed-off-by: Malik_Hsu <malik_hsu@wistron.corp-partner.google.com>",111,45,1
"thesofproject/sof","0b537cba4d36f2ef22c02644de0a73df5b92b89c","RanderWang","2022-02-28 08:45:51","false","ipc4: init gain & mixin components for zephyr

Fix issue of ipc4 pipeline initialization with zephyr enabled.
Need to initialize these two components. Gain module is another
type of volume without peak volume support and mixin has subset
function of mixer.

Signed-off-by: Rander Wang <rander.wang@intel.com>",113,45,1
"thesofproject/sof","ae5326ccd2d191cc755dc955e76dd0b2e4184197","ranj063","2022-02-25 05:30:45","false","topology2: intel: dmic-generic: Move all definitions to dmic-default.conf

Move all defaults variable definitions to dmic-default.conf. These should
be included by all topologies before overriding the defaults with
platform-specific or machine-specific definitions.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",110,45,1
"thesofproject/sof","24b036930b6e7939b185c23a7a1ce564de5cf9e4","RanderWang","2022-02-09 08:37:10","false","ipc4: add state check for trigger function

return when the status is ready set

Signed-off-by: Rander Wang <rander.wang@intel.com>",108,44,1
"thesofproject/sof","8c0b05d5794f927ec97bdc727388c52936e74bff","ranj063","2022-02-13 22:26:53","false","topology2: cavs: all pipelines should be dynamic by default

Set all pipelines to be dynamic by default.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",108,44,1
"thesofproject/sof","499b4f554ce2eb3cccc221b3d1a0511f72b6559d","ranj063","2022-01-12 01:38:58","false","module_interface: Add the set/get_processing_mode API's

These will be used to set/get the processing mode for the modules.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",114,43,1
"thesofproject/sof","70158f93d3badb4472666eca69d80788b1d7ea35","ranj063","2022-01-11 00:49:33","false","codec_adapter: modify the signature of module_allocate_memory()

Pass the pointer to struct processing module instead of comp_dev.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","7cc9a80ab8cc5ea70c190c266a310f60fcaeea80","dbaluta","2021-06-23 15:32:26","false","codec_adapter: cadence: Reset init_done at init time

After first compress play run init_done is initialized with 1 and it
keeps this value as no one resets it.

This causes subsequent compress play to miss codec process init phase
and this causes decoding to fail.

With this change multiple cplay runs work fine!

Notice that cadence_codec_reset calls cadence_codec_init and thus resets
init_done flag.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",74,37,0
"thesofproject/sof","51ce081c8c9cbf916b66ac925bb0c054cb524af1","singalsu","2021-06-16 10:15:00","false","Drivers: Intel: DMIC: Run dmic_work() in the same core as other driver

Previously the gain ramp updates were executed in core 0 only even
if rest of driver was executed in other core. It caused issues with
driver state variables in cached memory.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",71,37,0
"thesofproject/sof","da67183a6bdf0062f43163254080c3b1395ca93e","lrgirdwo","2021-06-02 09:59:54","false","testbench: fix the component type for file writer.

Incorrectly set as filereader. Fix it.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",83,36,0
"thesofproject/sof","5d9d2ddad8e0931b7d8c4273db821c9f160b1e88","libinyang","2021-05-26 01:05:00","false","topology: fix hdmi pcm id for cnl-rt5682-sdw2

HDMI PCM id should be 5, 6, 7 as described in the
sof-cnl-rt5682-sdw2.m4.

Let's use 5, 6, 7 as the HDMI PCM ID to match the UCM setting.

Signed-off-by: Libin Yang <libin.yang@intel.com>",84,36,0
"thesofproject/sof","cc3b30279721e529de54c7f2c3d08dca239b9150","marc-hb","2021-05-18 18:22:00","false",".github: add build-tools.sh (all) back, lost with Travis

We used to do this in Travis, see commit 7072eb4447c1 (""travis: run
build-tools.sh with CMAKE_BUILD_TYPE=Release"") and older.

Related to issue #4141 build-tools.sh -T does not build development
topologies.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",87,35,0
"thesofproject/sof","0f0dd1d7ab1b44a9cbde3079ee219252b8b89bc8","cujomalainey","2021-04-21 00:57:02","false","testbench: remove unused sets

looks like a bug to checkpatch.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",89,35,0
"thesofproject/sof","30212950a8f4141559b8163b9a3f390665238a3e","marc-hb","2021-03-08 20:01:47","false",".github: yamllint installer.yml

Just like the others.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",73,33,0
"thesofproject/sof","b3f195e92a714286b0db0938cc49e39180d5e55c","lrgirdwo","2021-04-19 10:30:49","false","zephyr: fix build with recent file name changes.

Align the Zephyr build to recent file name changes.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",89,34,0
"thesofproject/sof","489dabaf3192e79136354cf35fb141dde240d0cf","plbossart","2019-01-16 05:08:05","false","src/host/topology.c: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","b834353fb4863783171ab00f270437959a12a22e","Potochi","2021-04-12 07:48:04","false","codec_adapter: Remove braces around single statement

This fixes checkpatch.pl warning:

WARNING: braces {} are not necessary for single statement blocks
172: FILE: src/audio/codec_adapter/codec/generic.c:172:

Signed-off-by: Bud Liviu-Alexandru <budliviu@gmail.com>",81,34,0
"thesofproject/sof","f57de5957cb75051a82846bf0285a03c8d41aac9","marc-hb","2021-03-03 23:58:13","false","cmake: print some error messages when XTENSA_TOOLS_ROOT is wrong

Notably: xt-xcc --show-config failed with: No such file or directory

... when the directory exists but is wrong.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",73,33,0
"thesofproject/sof","b872c170a3080c9530db76f7b7bf05749a259b18","singalsu","2021-03-02 16:57:58","false","Topology: Fix re-define of DMICPROC in sof-hda-generic.m4

The mistake in the topology macro causes overwrite DMICPROC with
volume if HSPROC is not defined. This patch fixes the macro line
to handle properly HSPROC.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",73,33,0
"thesofproject/sof","f20b3ee1ef31d3d4b8eebdd5aad1e043a5dd508e","dbaluta","2021-02-26 19:48:23","false","codec_adapter: Bail out only on fatal errors

When setting parameters some API calls might not be fatal, so there
is no need to fail the apply config phase in this case.

For example, in case of Cadence MP3 codec the only supported PCM
output word size is 16 and 24. Trying to set a PCM word size of 32
will result in a non-fatal error and the word size would be adjusted to
24.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",74,33,0
"thesofproject/sof","3440c21338f3f53b262c32265b364dd96555dffa","cujomalainey","2021-01-15 22:30:41","false","probe: fix ret type

cppcheck points out the uselessness of checking <0 checks on unsigned
types

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",69,31,0
"thesofproject/sof","2ae18268a8f3b8331760511badac1cec97c13e6c","keyonjie","2020-04-15 10:17:57","false","buffer: add helper to check if buffer format is matched to param

Add a helper buffer_param_match() to check if the configured runtime
buffer frame format/rate/channels are matched to the param ones

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",82,22,0
"thesofproject/sof","79be1ce8275f4d6f921114fb7f5ffb80c4d6b73f","akloniex","2020-09-07 08:53:58","false","logger: Extract reading entry from ldc file to separate function.

In case we ever needed to load the entry from ldc file, without params
processing and printing.

Signed-off-by: Artur Kloniecki <arturx.kloniecki@linux.intel.com>",70,27,0
"thesofproject/sof","ef1560cb1393c500dfae2252d5a892b06541348c","lrgirdwo","2020-06-15 15:16:27","false","zephyr: agent: Use Zephyr clocks and complain more loudly.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",74,24,0
"thesofproject/sof","1820da751419c6b4847cdcc0e564511695462d07","lyakh","2020-08-11 11:05:37","false","trace: remove a superfluous variable initialisation

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",73,26,0
"thesofproject/sof","65b9afb42fffe2a4d0853ee9a445fd0f7db9defc","lrgirdwo","2020-05-03 10:20:15","false","zephyr: dont use uncache region for zephyr yet

Disable use of uncache region on Zephyr until it's ready.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",94,23,0
"thesofproject/sof","bf4106935a570fd03137d55c90498adc459743dd","lyakh","2020-08-11 11:03:28","false","dmic: (cosmetic) merge two prints

Reduce trace amount by merging two short prints together.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",73,26,0
"thesofproject/sof","b521bb1256ebb9e9e7fcc3f7c0dec2c1e5920b28","lrgirdwo","2020-07-23 13:35:34","false","docker: alsa: allow alsa development in container

Build ALSA locally under /home/sof/work and don't delete it. This will
allow ALSA development within the container.
Change the folder owner to sof to avoid permission issue.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",77,26,0
"thesofproject/sof","cf8e35f860a735fda9b423a2fa71d24ae2e309db","lrgirdwo","2020-07-06 11:03:11","false","zephyr: init: create a zephyr entry point in SOF.

Zephyr already uses main() and has already performed a lot of init prior
to entering SOF. Make sure no HW init is repeated.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",73,25,0
"thesofproject/sof","1c53b8e9dd97f10a10bae81c15974f0ff1935699","lrgirdwo","2020-06-25 13:19:22","false","arch: xtensa: idc: dont use xtos structs for zephyr.

Zephyr will provide it's own per core data in place of the xtos data.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",71,25,0
"thesofproject/sof","483818a895c2dd8539038c85968c8ffe668eee6b","ktrzcinx","2020-05-29 08:22:01","false","trace: pipe: Add trace context for each pipeline instance

Each pipeline instance should use own trace context to allow
setting different log level per pipeline.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",97,24,0
"thesofproject/sof","6bae1569a20406ec23be51b81cf49ebbe3a0a8fe","singalsu","2020-06-25 11:30:30","false","Audio: Make volume gain ramp update rate variable

This patch adds to volume component capability to use one of
four ramp update rate presets 125 to 1000 us depending on topology
defined ramp length that is typically between 20 to 250 ms. The
rate needs to be higher for faster ramps to avoid zipper noise.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",71,25,0
"thesofproject/sof","cb10221109d8bf6c001c162f22979b535ad25235","ktrzcinx","2020-06-23 11:34:59","false","logger: Rename float_precision to time_precision

New name better describes variable functionality.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",69,25,0
"thesofproject/sof","30e801c4d45201c1039522ab61829d0bc44fe1e9","RanderWang","2020-05-29 05:25:59","false","topology: sdw: fix dmic issue on tgl sdw platforms

Port commit a716056c4bdb (""tgl: use additional CHANNEL
define in rt711 + rts1308 tplg"") to all tgl sdw platforms

Signed-off-by: Rander Wang <rander.wang@intel.com>",97,24,0
"thesofproject/sof","bebdbca87b7eb8e4715b5c40f0afe24c1b6b71de","ktrzcinx","2020-05-25 12:19:43","false","rimage: Update to version with changed headers location

In new version of rimage software, headers are located in
rimage/src/include/rimage directory to make it easily accessible
from another source code without include path collision.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",98,24,0
"thesofproject/sof","e1efef73f3e261265a3ddc60edc30ea5db1393cb","tlauda","2020-05-28 07:42:11","false","ssp: fix log

Fixes invalid sequence of log parameters.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",96,24,0
"thesofproject/sof","b181bf09fc9114c8312f06761e8c0dac47e34211","tlauda","2020-05-27 07:36:41","false","hda: move hda driver out of the cavs specific directory

Shares hda driver implementation between all Intel platforms and
not only cAVS. Currently it depends only on cAVS, since no other
supported Intel platform has the hardware. It's built based on new
CONFIG_INTEL_HDA, which is mandatory for cAVS and not user selectable.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",96,24,0
"thesofproject/sof","836ea9b0bdc473f120dd515877cb749ab6b106ba","tlauda","2020-05-27 07:52:03","false","alh: move alh driver out of the cavs specific directory

Shares alh driver implementation between all possible Intel
platforms and not only cAVS. Currently depends only on
cAVS, since all other supported platforms don't support it.
It's built based on CONFIG_INTEL_ALH.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",96,24,0
"thesofproject/sof","fc84534247390ea1f968ac836abe89fcf83aa9ac","ktrzcinx","2020-03-24 13:54:25","false","tools: logger: Add LDC dump option

Create dump options for logger to print important information from
LDC file, like DBG_ABI version and UUID with corresponding names.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",64,22,0
"thesofproject/sof","a27633a9588d6363b0783934657316d6b4e4777a","dbaluta","2020-04-23 20:13:41","false","drivers: imx: sdma: Fix status r/w position

sdma channel type can also be _MCU2SHP/_SHP2MCU but this
case was missed from sdma_status.

Fix it now.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",71,23,0
"thesofproject/sof","834b3d5c282cfb95d0a143fe82b3c99d31630976","dbaluta","2020-04-24 10:41:54","false","drivers: imx: sdma: Remove debug logs in sdma_interrupt

This logs are not very useful as SOF core calls this function
for all 32 channels, thus not providing much information.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",72,23,0
"thesofproject/sof","07da0a8145c1826d87ac9b9850a4f029c1a71a3b","dbaluta","2020-04-23 09:43:36","false","drivers: imx: sai: Write data to FIFOs before enabling channels

If the channel is enabled before data is pushed to FIFOs, there is a small
chance to race here causing an underrun for Tx.

So, in order to avoid this add zeroes to FIFOs before actually enabling
the channels.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",71,23,0
"thesofproject/sof","bf6d97c76a5a196f02722681518f0743a8070453","marc-hb","2020-04-15 18:47:22","false","doxygen: subgroup dma_copy() to solve conflict with struct dma_copy {}

Name clash reported by sphinx/breathe:
 sof-docs/api/dma-drivers-api.rst:6: WARNING: Duplicate declaration, dma_copy

Before this commit:

- all ""dma_copy"" links in doxygen pointed to the struct, never to the
  function,
- there was no ""dma_copy"" link of any kind in sphinx.

With this commit:

- most ""dma_copy"" links in doxygen are disambiguited and fixed, see
  html/dma_8h_source.html for instance,
- there are dma_copy links to the struct in sphinx.

Once this is a merged, a commit in sof-docs will add the new subgroup
and re-add the function to sof-docs/api/dma-drivers-api.rst

Fixes: fa8abe145c0d (""core: dma: Add DMA copy API."")

Reference:
  http://www.doxygen.nl/manual/grouping.html

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",82,22,0
"thesofproject/sof","c377744cae7193f100821299b8e5adabcd1c02a1","dbaluta","2020-04-13 09:43:20","false","drivers: imx: sdma: Set priority for channel 0

Channel 0 shouldn't be touched by DMA API functions.
Thus its priority needs to be set in sdma_init_c0.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",82,22,0
"thesofproject/sof","594e031b6ee38ccd4545d1c4e57184ef7d59d681","singalsu","2020-03-31 10:09:16","false","Tools: Tune: Improve EQ blob decode scripts

This patch adds user friendly function eq_blob_plot(file) to
plot the IIR or FIR equalizer response that will be applied for
each channel.

The IIR and FIR decoders are modified to better support the higher
level script.

The copyright texts in impacted scripts are are updated to short
BSD-3-Clause style.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",66,22,0
"thesofproject/sof","80f6e0698f3a474000864a8d5d099e74703211b6","singalsu","2020-04-02 17:53:22","false","Tools: Test: Add objective quality tests for processing components

This patch adds an Octave test script process_test.m to audio processing
components like FIR and IIR EQ.

Parts of src_test.m are moved to common functions to ease printing of
test results matrix.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",77,22,0
"thesofproject/sof","d8899386b610ce3b55fc6be3ab459c3afbf946e7","dbaluta","2020-04-13 09:07:52","false","drivers: imx: sdma: Better isolate channel0

Channel 0 is special. It is used to run other channels. It allows
copying data and instruction to and from SDMA RAM.

For channel 0 there will no be DMA API calls. E.g sdma_start,
sdma_stop etc.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",82,22,0
"thesofproject/sof","6da473ebabc4f57ddd6b87387ced4d04d12c4c70","keyonjie","2018-06-29 09:06:50","false","topology: sof-apl-nocodec: fix a comment typo

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",9,1,0
"thesofproject/sof","f4f0dd41da5568791c2cd5912d0cbaa35ad99df9","tlauda","2019-12-17 09:40:35","false","alloc: move trace macros to header

Moves trace macros to alloc.h header in order to use
them in the header itself.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",69,18,0
"thesofproject/sof","a5cc4df67b98cb4094a101c98eda0dd4529e8bad","singalsu","2019-12-18 18:58:06","false","EQ FIR: Small code optimization for gcc build

This patch improves a bit (about 1.3%) the execution speed with a
simpler pointer arithmetic based FIR filter core. The comments
about used 32 bit fractional format are updated (Q1.31), earlier
ones were old assumptions for SOF.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",72,19,0
"thesofproject/sof","f7b9e6270f448f341479c48f95ea0f487fc384f1","singalsu","2019-12-18 18:46:22","false","Tools: EQ: Make a light FIR configuration to test with GCC build

The Xtensa GCC build on APL platform can process about 40 taps
FIR filter so it is useful to have one such configuration. The
eq_fir_mid.txt is be applied with sof-ctl tool.

The patch contains the Octave script modification. The print of final
filter length is added to blob packer script to see the resulting
length when the filter is generated. The small filter spec change
helps the filter tool to achieve result that is close to requested
shape.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",72,19,0
"thesofproject/sof","7466bee378dd811b99397f75fc4c108b6b9acd4c","tlauda","2019-12-11 15:06:02","false","clk: make freq arrays constant

Makes clock frequency arrays constant.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",73,18,0
"thesofproject/sof","04e3742c0014028df997c28993765ec6fe1fc611","akloniex","2019-10-15 12:04:30","false","buffer: Reorganize buffer callbacks using notifier as event hub.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",66,16,0
"thesofproject/sof","a17efdc379eecda7b33d95cffebf4d320bceaf31","akloniex","2019-10-15 12:35:47","false","buffer: Implement buffer free callback.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",66,16,0
"thesofproject/sof","f275568f017032dfb0160da707afe0bbe571fb4e","jajanusz","2019-10-10 11:35:24","false","cannonlake: shim: clock control registers

Add missing registers for requesting clock changes.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",61,16,0
"thesofproject/sof","07bf590cc9459bbed78bf1dc0d441e91f6efeff0","akloniex","2019-10-16 11:38:41","false","dma: Make use of notifier callback interface for DMA callbacks handling.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",64,16,0
"thesofproject/sof","6b0529e79eed731273ac615ee0408baf7244efe6","singalsu","2019-09-24 13:43:25","false","ASRC: Add filter coefficients for ASRC

This patch adds the FIR filter coefficients and filter parameters
header files for the ASRC.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",65,16,0
"thesofproject/sof","adfb6d1dff0830806d150d1062689e92f463282c","singalsu","2019-09-24 13:44:37","false","ASRC: Addition to sof-logger

This patch adds print of text ASRC into sof-logger for ASRC
originated traces instead of unknown.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",65,16,0
"thesofproject/sof","4c995d03753df9ed666f476a8d8ce6d4c28c3ff3","singalsu","2019-09-24 13:41:22","false","ASRC: Add asynchronous sample rate converter component to SOF

This patch adds the new ASRC feature to SOF. It supports both
optimized HiFi3 build with xt-xcc and generic C version for
gcc build. The generic C version is currently feasible only
for testbench run due lack of sufficient speed for realtime but
will be optimized later.

The feature is disabled by default for BYT, CHT, BDW, and HSW
platforms to save RAM.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",65,16,0
"thesofproject/sof","feb9e2b227c47e17323f3a0c875044f9d415118a","bkokoszx","2019-11-27 14:26:05","false","Fix style coding issues

Fixes style coding checkpatch issues.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",70,18,0
"thesofproject/sof","deccf8f08fc6b4f2407d849eb2c5cd62040a1166","xiulipan","2019-10-31 09:41:49","false","memory: modify bootloader for xcc build

xcc build will have bigger TEXT.
Need to keep the total block size unchange as the block need to be
4k align.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",55,17,0
"thesofproject/sof","97f4bb67bfb46d65869f07bc60fe3229ad84fceb","groncarolonxp","2019-11-25 15:36:34","false","drivers: imx: sai: Set configurations for capture

SAI hardware needs on capture side to have SYNC mode set as
'Synchronous with receiver' in order to work properly
Set this field on Capture register RCR2, transmitter side
must be configured in asynchrounous mode

Signed-off-by: Guido Roncarolo <guido.roncarolo@nxp.com>
Signed-off-by: Jerome Laclavere <jerome.laclavere@nxp.com>",66,18,0
"thesofproject/sof","b2f088789dc3c913f07d99bbeb9281554d6d32d6","tlauda","2019-11-19 13:04:12","false","dw-dma: enable channel linear link position

Enables DW-DMA channel linear link position counter based
on the selected peripheral connection. It can be used
to retrieve timestamping information on platforms supporting it.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",58,18,0
"thesofproject/sof","714859d9254ea916e71d84170635620028726ff9","ktrzcinx","2019-11-18 10:52:06","false","trace: use trace_point instead of platform_* in boot_loader.c

After disabling tracing code have compilation error because of
implicit declaration of platform_trace_point function.
After calling through trace_point it is replaced with empty
define after disabling trace.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",60,18,0
"thesofproject/sof","2fd99129c337ee3ad515a531b27df0700616ef75","jajanusz","2019-09-30 18:05:50","false","rimage: manifest v2.5 for MEU

Add function writing manifest v2.5 for MEU.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",66,16,0
"thesofproject/sof","f4e515bcd7e299eddf093907d5cda40a45d31343","lgirdwood","2019-11-18 15:39:30","true","Merge pull request #1 from dcpleung/standalone_rimage

Initial commit of rimage tool",60,18,0
"thesofproject/sof","dbb70c840cb30126e37362214d2cce48c56bfab5","groncarolonxp","2019-11-18 13:22:57","false","imx: topology: Add capture pipeline for the wm8960 codec case

Signed-off-by: Guido Roncarolo <guido.roncarolo@nxp.com>",60,18,0
"thesofproject/sof","a25d50eb643dacd792c0e2498afc93163419b464","jajanusz","2019-11-14 12:59:22","false","clk: platform agnostic clocks

Create abstract interface for clocks and move platform specific
clocks code to platform folders.
It was also necessary to move SSP clocks declarations to
SSP driver code to decouple clocks logic from mandatory
SSP clocks.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",58,17,0
"thesofproject/sof","5bf839e99598712fa1f9ef18b0fc8424bbca6367","dcpleung","2019-09-27 00:55:19","false","Make log dictionary output optional

Signed-off-by: Daniel Leung <danielcp@gmail.com>",66,16,0
"thesofproject/sof","d821534fed3fac53fc8cf3ac6a7d0df8b6c40593","dcpleung","2019-09-26 20:29:54","false","Remove PEM_KEY_PREFIX and always requires key as cmd argument

This removes the macro PEM_KEY_PREFIX and make rimage to always
require key to be specified in command line.

Signed-off-by: Daniel Leung <danielcp@gmail.com>",66,16,0
"thesofproject/sof","dd77445f018c173f0e811092d23b50cfe2d1baa1","jajanusz","2019-09-30 18:13:59","false","rimage: update tgl

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",66,16,0
"thesofproject/sof","41cba2f66316d94dc7f5af2c7c2ffe6499004caa","dcpleung","2019-09-27 01:32:20","false","Take firmware version and build ID as command line arguments

Since rimage is no longer built with the SOF code, the firmware
version (SOF_MAJOR and SOF_MINOR) and build ID (SOF_BUILD) are
no longer defined during build. So these needs to be passed as
command line arguments.

Signed-off-by: Daniel Leung <danielcp@gmail.com>",66,16,0
"thesofproject/sof","0b34af27fa753ec728cb6761ee771721fbf19a20","dcpleung","2019-11-12 17:31:42","false","Add a minimal set of necessary SOF headers

These headers are required for building rimage outside of
the SOF source tree as a standalone tool.

Signed-off-by: Daniel Leung <danielcp@gmail.com>",54,17,0
"thesofproject/sof","0d33e87433865cdc84d249b5cb6633b24cf6ecfb","dcpleung","2019-09-24 20:28:36","false","Enable autotools to build rimage

This adds the necessary configuration files to enable
autotools for configure/make files generation.

Signed-off-by: Daniel Leung <danielcp@gmail.com>",65,16,0
"thesofproject/sof","d99e6d53c1c60e7a1f1dbe9659de532c6570b933","tlauda","2018-06-04 11:03:41","false","rimage: add correct FW version to binary

Now correct FW version is included into binary.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",1,0,0
"thesofproject/sof","fd628ec368cd6f5ed6be0c6abb39f5dd985593b5","jajanusz","2018-09-11 08:40:53","false","autoconf: optional implicit-fallthrough

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",38,3,0
"thesofproject/sof","c91c6f98c6c0f9330cdcb602ca58fac89168c457","xiulipan","2018-06-29 07:47:38","false","rimage: fix function returns address of local variable bug

path may return out the function from rimage->key_name.
Switch the usage for local variable to avoid this bug.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",9,1,0
"thesofproject/sof","1d92e8e175e6b377e6a412836a77bef1e7cb367c","jajanusz","2019-11-07 17:54:27","false","sof: use RELATIVE_FILE instead of __FILE__

Use RELATIVE_FILE because __FILE__ makes binary output
dependent on project location.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",53,17,0
"thesofproject/sof","41f34840105098c4f82ed999642396a0f8c6f081","groncarolonxp","2019-10-15 06:14:56","false","topology: Extend DAI_CONFIG to allow SAI DAI

Signed-off-by: Guido Roncarolo <guido.roncarolo@nxp.com>",65,16,0
"thesofproject/sof","7fe0dbd215f91e0b90e74f5dd39300941d269b5d","groncarolonxp","2019-10-15 06:30:41","false","topology: Add topology for i.MX8QXP with wm8960 codec

This pipeline adds support for S24_LE, 2 channels, 48KHz playback.

Signed-off-by: Guido Roncarolo <guido.roncarolo@nxp.com>",65,16,0
"thesofproject/sof","98449205fb3c1b1848046e40ebc8f2e38566e50f","jajanusz","2019-11-06 13:19:05","false","checkpatch: disable __func__ warning

Traces in SOF are used like trace(""<func>() info""),
in that case __func__ is not convenient, because it is not literal
and it would be needed to use %s everywhere and change
all current traces.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",52,17,0
"thesofproject/sof","6984e86b1561c8bdad26463753fe87f5181aae6c","ktrzcinx","2019-11-04 08:03:24","false","trace: Repair mux tracev argument name typo

To repair tracev_mux_with_ids macro.
Because with current macro definition
and enabled CONFIG_TRACEV macro code won't compile.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",56,17,0
"thesofproject/sof","8c1549e0fcde46ab55c3762ec9297ddcbabd6db8","groncarolonxp","2019-10-15 06:17:43","false","topology: Add SAI tokens

Only add SAI MCLK ID token for now

Signed-off-by: Guido Roncarolo <guido.roncarolo@nxp.com>",65,16,0
"thesofproject/sof","77918e1e8929f2a65412e9955aeff7fff8606ae3","xiulipan","2019-11-05 03:47:54","false","audio: src: fix void pointer arithmetic in HIFI2

Fix issue with void pointer arithmetic for BYT/CHT
on xcc build with hifi2.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",53,17,0
"thesofproject/sof","b9fe87faed19b970211c05f079afb506326c18eb","groncarolonxp","2019-10-15 06:26:46","false","topology: Add nocodec SAI topology for i.MX8QXP

i.MX8QXP has one SAI interface. Create a simple topology
without a codec for playback of 2 channels, 16bits samples
at 48Khz.

Host -> Buffer0 -> Volume -> Buffer1 -> SAI1

This is useful for testing various components like Dummy DMA,
EDMA and SAI drivers.

For more information about SAI you can read i.MX8QXP RM at:
https://www.nxp.com/docs/en/reference-manual/IMX8DQXPRM.pdf

Signed-off-by: Guido Roncarolo <guido.roncarolo@nxp.com>",65,16,0
"thesofproject/sof","e0441948441aa9df195dc06851d144fc7f207d1b","jajanusz","2019-11-04 12:48:31","false","checkpatch: disable short fixed size types for SOF

Do not check for u/s* vs u/sint*_t in SOF,
because there is only the longer variant.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",55,17,0
"thesofproject/sof","d88ac84e5471b21579db852a7d6a83ebcca12f08","jajanusz","2019-11-04 12:43:51","false","checkpatch: restore MAINTAINER file check

It was previously removed from SOF, but it's better to just disable
it for SOF to make delta with original checkpatch as small as possible.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",55,17,0
"thesofproject/sof","d98a7ed1034e64e28d8b81ff3c78cdb00009b9d8","dragosht","2019-11-05 07:49:45","false","checkpatch: check ABI updates before warning on it

checkpatch is currently checking for changes that need ABI updates
and actual ABI changes in the same loop in process(). So if some
file that needs an ABI change comes first, a WARNING will be issued.

Look for an actual ABI change before starting to crunch the entire
patch line by line.

Signed-off-by: Dragos Tarcatu <dragos_tarcatu@mentor.com>",53,17,0
"thesofproject/sof","acddb9ac1b1fd57fee6f5acc13bdcc2804265e3f","ktrzcinx","2019-11-04 14:09:51","false","trace: use UNUSED for disabled traces

This will prevent from compiler warnings when
local variables are used only in trace log and
trace is disabled.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",56,17,0
"thesofproject/sof","0b7fd030b3911c9478ba37a81359027096edb683","tlauda","2019-10-25 14:47:06","false","demux: return config on COMP_CMD_GET_DATA

Returns current config on COMP_CMD_GET_DATA. It fixes the problem
with wrong demux configuration after suspend. Kernel doesn't cache
initial kcontrol config and overwrites it with configuration returned
from component.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,17,0
"thesofproject/sof","59c95e88012e75a88e242308115db47e7c83a449","dragosht","2019-10-31 10:30:50","false","tools: README: Update sof-logger description

Add the usage descriptions for the sof-logger -u, -r and -s options.

Signed-off-by: Dragos Tarcatu <dragos_tarcatu@mentor.com>",54,17,0
"thesofproject/sof","d6f914cfcc405b2d54b3af566037b70c2fea7a9e","bardliao","2019-10-18 05:55:13","false","Topology: add cml support on sof-icl-rt711-rt1308-rt715-hdmi.m4

Remove 2nd rt1308 for cml-mono.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",60,17,0
"thesofproject/sof","7989281b13d70a65a89e533e50513a4475125ad9","tlauda","2019-10-21 08:59:30","false","component: remove unused is_dma_connected field

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",63,17,0
"thesofproject/sof","20ce9661dabbe302ef1c50bc62d0daa65dde67ee","bkokoszx","2019-10-30 14:20:48","false","volume: add schedule_task_free() in volume_free()

Adds schedule_task_free() in volume_free() in order
to avoid memory leaks.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",59,17,0
"thesofproject/sof","60ca19ff225458956a8e73c39ba8f031bc331363","xiulipan","2019-10-30 04:40:04","false","build: Fix firmware name for Jasperlake build

JSL FW should use sof-jsl.ri instead of sof-icl.ri.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",64,17,0
"thesofproject/sof","6d6f61cd724224de97ebde1f42be8ed11ee9c234","tlauda","2019-10-24 10:00:42","false","agent: add option to enable system agent

Adds config option to enable system agent. It can be disabled
on the still unstable systems, which cannot guarantee that
agent will execute on time.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,17,0
"thesofproject/sof","aa7c73c15635eedb53403bee11357b0b856c6537","keyonjie","2019-10-24 21:25:46","false","scripts:xtensa-build-all: update to use 2017.8 toolchain for CNL

Let's align to use the newer 2017.8 toolchain for CNL building.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",68,17,0
"thesofproject/sof","8fa4b8021321950f22505aedb125f1fb1044b966","tlauda","2019-10-21 08:57:06","false","component: do not set buffer sizes

Change flow of components to not resize sink buffers.
We should just check the size of the allocated buffers
and let the topology define the maximum sizes.
Components can easily work with non aligned buffer sizes.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",63,17,0
"thesofproject/sof","0bc4e9fde9225195ca4d561abf1f2524e2f9a65d","dabekjakub","2019-08-08 11:25:07","false","host: Fix memory function definitions

Fix alloc definitions for host build.
Function definitions were using defines in their body
which blocked usage of const values in said defines.

Signed-off-by: Jakub Dabek <jakub.dabek@intel.com>",53,14,0
"thesofproject/sof","a31d97671ea2b39a13230914503038b4a328fc50","tlauda","2019-10-17 12:56:00","false","buffer: extract allocation part to separate function

Extracts allocation part of buffer_new to separate function.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",63,16,0
"thesofproject/sof","2f818ec801511907b5fb198db8b692ea9e587e59","tlauda","2019-10-18 14:37:25","false","dw-dma: fix buffer and copy alignments

DW-DMA has no specific alignments regarding buffer and copy sizes.
However setting it to 32 bytes breaks stream formats with period
sizes lower than 32 bytes, as linked list is being configured
incorrectly.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",61,17,0
"thesofproject/sof","2e7d199c43d2d73419e66002bc8339fcea038ff4","tlauda","2019-10-17 15:22:09","false","dma: add new attribute DMA_ATTR_BUFFER_PERIOD_COUNT

Adds new DMA attribute DMA_ATTR_BUFFER_PERIOD_COUNT and implements
it for every DMA. This attribute says how many periods should DMA
buffer consist of.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,16,0
"thesofproject/sof","f277189b3adb8b67885d372b62c7b6372ad54d2d","dabekjakub","2019-10-23 09:07:38","false","build: Add config for Jasperlake build

Add defconfig file for Jasperlake platform.

Signed-off-by: Jakub Dabek <jakub.dabek@intel.com>",67,17,0
"thesofproject/sof","b63f559bb4c2783dc77675f685f6791c6a10b986","dabekjakub","2019-06-21 09:50:12","false","memory: removed hp buffer heap

Merged hp buffer heap with normal buffer heap.
Since current buffer heap was actually using hp memory and it served
no purpose to have two heaps.
Removed extern capabilities and merged other capabiliteis to
buffer heap. Currently none of those buffer heaps supports extern.

Signed-off-by: Jakub Dabek <jakub.dabek@intel.com>",46,13,0
"thesofproject/sof","0234df5b4a2b5fd747d160e162dfe067990412eb","dabekjakub","2019-10-14 14:18:14","false","buffer: Add alignment setting for DMA buffers.

Add seeting of alignment for DMA buffer that is required by
Hardware configuration.

Signed-off-by: Jakub Dabek <jakub.dabek@intel.com>",64,16,0
"thesofproject/sof","1dbd14b30daad1e5541d641da2e97163e328200a","singalsu","2019-10-18 12:12:17","false","Testbench: Improve test begin and end marker tones find

Chirp test signals confused the test signal begin marker position
seek and caused false test fails. The test stimulus may produce
stronger cross correlation level than the actual marker. Also
the check omitted that the cross correlation max could be negative
so the test was changed into power domain and use first/last
cross correlation peak above threshold as test begin/end position.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",60,17,0
"thesofproject/sof","0eaa11495ea069bbcc8999515b487e4d1a24344a","tlauda","2019-10-11 15:02:08","false","timer_domain: add trace logs

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",61,16,0
"thesofproject/sof","8e4d0c95d69c382960616c2f342666b8d43687b9","tlauda","2019-10-03 06:20:36","false","pipeline: trigger pipeline in non-atomic context

With new schedulers implementations we don't need to trigger
pipeline in atomic context anymore.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,16,0
"thesofproject/sof","b23a6cc277c6d9c2b84088485d124c077659419e","tlauda","2019-09-20 09:19:34","false","topology: intel-generic-dmic: use 3 periods for DMIC DAIs

Changes number of DMIC DAI periods from 2 to 3. This way
we can support both timer and new single DMA channel
scheduling.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",63,16,0
"thesofproject/sof","2ce790d64017247d9efedde70c25bf3748a3ca6a","tlauda","2019-09-19 07:44:29","false","dma: add period to dma_chan_data

Adds DMA channel period value to dma_chan_data.
We can now easily retrieve the period value of
DMA channel transfers.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,16,0
"thesofproject/sof","9bf1f22dbff28cd547543f8a0eb282075ccf7087","tlauda","2019-09-20 09:09:07","false","topology: icl: use 3 periods for SSP, DMIC and ALH DAIs

Changes number of SSP, DMIC and ALH DAI periods from 2 to 3.
This way we can support both timer and new single DMA
channel scheduling.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",63,16,0
"thesofproject/sof","3b90d1e9a570eb822480419f30ffc581d1a73329","tlauda","2019-09-19 13:22:14","false","topology: pipeline: add missing undefine

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",61,16,0
"thesofproject/sof","46d080dc218f250dc440196d212250d45c39d24d","tlauda","2019-10-03 07:31:57","false","pipeline: don't copy not active component

Doesn't copy sink component, if it's not active.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",63,16,0
"thesofproject/sof","2c3c0cb4c96f3b90a95b7a229bc16c9a85df0bfa","tlauda","2019-10-09 09:53:05","false","kpb: fix overflow in buffering

Fixes the problem with copying to internal buffer,
where we didn't take into an account circularity
of source buffer.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,16,0
"thesofproject/sof","c9951ff2072240c62c25ae934984d13baa01a993","tlauda","2019-10-01 09:49:55","false","dma: cavs: remove interrupts from HDA DMAs

Removes interrupt numbers and names assignment to HDA DMAs.
These interrupts are unusable due to hardware restrictions.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,16,0
"thesofproject/sof","fee25179d716023d9d2d1da9abc312ee5315b47b","tlauda","2019-10-01 11:02:46","false","kconfig: enable interrupt levels per platform

Deselects all interrupt levels by default and sets
them appropriately for every platform.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,16,0
"thesofproject/sof","6ffd5f3fef97b4771df87b49118ed0b5302594aa","tlauda","2019-10-01 10:59:30","false","interrupt: use CONFIG_INTERRUPT_x options

Uses CONFIG_INTERRUPT_x options to conditionally build interrupt
drivers' code. These definitions should only be used in interrupt
drivers and platform interrupt headers. In case there is a need
to use additional interrupt level the appropriate kConfig option
should be selected. Otherwise the build will fail.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,16,0
"thesofproject/sof","92fa1858c80a6cb3d08ee3744a494f2ba8a46f54","jajanusz","2019-09-30 17:37:44","false","rimage: image manifest v2.5

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",66,16,0
"thesofproject/sof","ab0847d5d2d3f4df7e82c61fb6808a6e00c6a0ac","dbaluta","2019-10-01 11:57:11","false","topology: Add ESAI tokens

Only add ESAI MCLK ID token for now

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",66,16,0
"thesofproject/sof","c4c42d34dbdd777294345bb0531897e9ae73d82b","slawblauciak","2019-10-02 12:59:11","false","platform: fix SPDX for headers

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",66,16,0
"thesofproject/sof","941834da57656f0859dd0323f08240903714431b","tlauda","2019-09-25 11:40:18","false","hda-dma: use generic dma reg functions

Changes usage to generic dma reg functions instead of using
hda-dma specific methods.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,16,0
"thesofproject/sof","f585df2a3b4c6933d961f7a848d5b049870cc607","tlauda","2019-09-26 13:25:15","false","ll_schedule: don't run tasks in non atomic context

Low latency scheduler is low latency, so the tasks shouldn't
be preempted by other things. This doesn't change any flow,
because xtos sets highest possible irq level in interrupt
dispatcher anyway.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,16,0
"thesofproject/sof","d42c01956f32dd99b84fd3d339ec483726f839ca","bkokoszx","2019-09-18 12:56:45","false","buffer: add overwrite in circular wrap case

In case when we overwrite ""old"" data in buffer
(when buffer is full) we should align r_ptr
with w_ptr.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",60,16,0
"thesofproject/sof","7804f530e9ee0362f74e29e2924bfccd3764deb4","cujomalainey","2019-09-23 20:49:11","false","platforms: Enable optional cherrytrail DMA

The 3rd DMAC that CHT has seems to be causing issues. Since it is not
needed lets make it optional so the platform can be usable.

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",65,16,0
"thesofproject/sof","7046e849cbef2fde3f4bfbc7c92d9302a8bd9bf8","sathya-nujella","2019-09-25 17:19:23","false","topology: tgl_rt1308: update link_id's for iDisp Dai Config's

Update the topology to use the same iDisp link_id's as in
tgl-rt1308 m/c driver.

Signed-off-by: Sathyanarayana Nujella <sathyanarayana.nujella@intel.com>
Signed-off-by: Jairaj Arava <jairaj.arava@intel.com>",64,16,0
"thesofproject/sof","6cc3892f711e280f91955c73ddf21122e0a3ec88","mrajwa","2019-06-26 23:29:07","false","host: fix wrong check for host_period_bytes

This patch fixes the incorrect check for
host_period_bytes. This value was incorrectly used
to store host request for stream position. After
we introduced dedicated parameter for this purpose
(no_stream_position) the check needs to be updated
accordingly. Therefore this patch adds a check
for no_stream_position rather than host_period_bytes
to decide if stream position shall be send.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",45,13,0
"thesofproject/sof","869b0c11e31d3d27b0fb5591a41acef0929d98ad","tlauda","2019-09-06 08:45:35","false","timer: save handler irq argument in scheduler

Changes timer API to save interrupt handler argument
in ll scheduler shared context instead of timer struct.
This way we will be able to share the same timer structure
between all the cores.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,15,0
"thesofproject/sof","81f8de93c58dd6adf724643bdd1acc4a4cea4749","singalsu","2019-09-17 12:34:12","false","Tools: Test: Updates for testbench to match other changes in SOF

This patch updates the locations of ""make install"" libraries default
install locations into shell script to run SRC test cases. The script
also now prints the used LD_LIBRARY path to ease setting up code
debugging.

The segfault of testbench executable is fixed by returning a valid
pointer reference instead of a NULL from test dummy function
arch_schedulers_get().  The rest of testbench version of schedule.c
was also updated to be like the current real version module.

Finally in the testbench.c main the file names string pointers are
initilizated to null as well as the word length parameter to avoid
a segfault if executable is started without command line arguments
to see the usage help text.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",61,16,0
"thesofproject/sof","0ba3fec51846529b1108c6ec943151d462b301de","tlauda","2019-09-10 12:33:40","false","topology: byt: fix media pipeline period for nocodec

Fixes media pipeline period for nocodec byt and cht topologies.
Now codec and nocodec topologies are aligned in regards to pipe
configurations.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,15,0
"thesofproject/sof","9040d3db6de45a5a06ccdc3dedf7933041ddd601","jajanusz","2019-08-23 10:56:44","false","dmic: update for tigerlake

Add support for Tigerlake in DMIC driver.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",54,15,0
"thesofproject/sof","920a3bce7e4c73d3787af85198d707c1547c2148","lgirdwood","2018-11-28 14:57:47","true","Merge pull request #647 from xiulipan/pr/owner

github: add xiulipan as some field owner",40,6,0
"thesofproject/sof","8e7af3012ad9e8117b53d2bf693169d29a4508c9","jajanusz","2019-09-03 09:49:09","false","ssp: cavs: reset M/N on probe

M/N dividers must be set to 1/1 before power gating.
Otherwise SPA writes are locked and CPA is not updated.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",59,15,0
"thesofproject/sof","694ebaaa4d89fed3473e0137e807a57f1e7c3d76","mrajwa","2019-07-31 10:18:40","false","kpb: change state only via interface

This patch replaces all explicit kpb state changes
via a call to dedicated interface which in the same
time also logs the change in the internal logger.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",53,14,0
"thesofproject/sof","3f4c3c8286b41987ac53284db17bb860f0fa9e20","xiulipan","2019-08-27 15:28:03","false","topology: add tigerlake nocodec support

Enable SSP0/1/2 and DMIC01 nocodec topology for tigerlake.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",55,15,0
"thesofproject/sof","d3b2fa02492dadc04ebc8d100647f7fa7e6817ee","xiulipan","2019-08-27 15:29:42","false","topology: add tgl_rt1308 topology

Add tgl_rt1308 topology with RT1308 speaker, DMIC and 4 HDMI.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",55,15,0
"thesofproject/sof","381063d266aa88668736ff0ba0cb8f90a00d4230","xiulipan","2019-08-27 15:26:50","false","topology: add tigerlake platform info

Modify from icelake.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",55,15,0
"thesofproject/sof","61ce95f2742ed0b0d00cb4301551e980be808703","jajanusz","2019-08-23 11:18:12","false","pm: update for tigerlake

Update pm_runtime to support tigerlake in the same way as icelake.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",54,15,0
"thesofproject/sof","ef9432eeba4fd35e684b025c05589daa3a262e23","tlauda","2019-08-22 15:29:36","false","notifier: send idc notifications in non blocking mode

Changes the way of sending notifications to slave cores
from blocking to non blocking mode. Blocking mode isn't
the best solution, because potentially we can be on higher
interrupt level, then the one for receiving idc result.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",55,15,0
"thesofproject/sof","57012168a1ceb0e7d84418d9f57cbbf69a090d98","jajanusz","2019-08-27 12:17:31","false","tgl: add PLATFORM_IRQ_HW_NUM

Add missing define for HW IRQ.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",55,15,0
"thesofproject/sof","9ee66793e70cba5cf76d53e4786e2ae0d5426434","jajanusz","2019-08-23 11:58:01","false","cmake: tigerlake support

Add support in CMake for Tigerlake building and signing.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",54,15,0
"thesofproject/sof","d24a4b9fa0b9a033681792465a2bd6a492c6e3ae","akloniex","2019-08-23 22:30:19","false","dma: Fix dma_chan_irq macro for APL.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",54,15,0
"thesofproject/sof","6f1057911e9f2d83b6a4527254d9ec6e0c6311cb","tlauda","2019-08-09 12:23:52","false","host: implement copying as much as possible for one shot

Implements copying as much as possible for one shot copy mode.
Previously we were always copying only one period of data,
which was problematic in case of SRC components inside of
pipeline. Also split transfer hasn't been handled correctly
in case of double split. This patch reimplements the copy
and fixes all the mentioned problems.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,14,0
"thesofproject/sof","c480c1470b656f7e40f27b056539fc386aedf604","jajanusz","2019-08-23 10:40:01","false","Kconfig: add CAVS 2.5 config

Introduce config for CAVS 2.5 version.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",54,15,0
"thesofproject/sof","51c32a4b69b0fb93e6ba78ee2c14195501e27869","jajanusz","2019-08-26 08:37:50","false","tigerlake: core-isa

Update core-isa.h with definitions from Xtensa core.
It is needed for GCC compiler.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",54,15,0
"thesofproject/sof","e05827ff1c435da3a20d40c906c3eb0eff522b50","jajanusz","2019-08-23 10:42:11","false","ipc: check pm_prepare_D3 for CAVS 2.0+

Perform check on all CAVS 2.0+ platforms, not just for 2.0.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",54,15,0
"thesofproject/sof","2db46798200419d86a8c0d417b8a25b96e37bd1a","jajanusz","2019-08-23 09:48:20","false","rimage: xcc module offset option

This argument is needed in case of platforms that have different
modules padding in xcc binaries.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",55,15,0
"thesofproject/sof","a704c7a5a6dc51ea50bff45c0fb7134556fd24a5","xiulipan","2019-08-24 04:13:06","false","topology: add virtual routes for hda-idisp

Add missing virtual routes that will fail the probe.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",54,15,0
"thesofproject/sof","ea71535a7e1f94e1b9b00b96f0f095e39012fcc7","jajanusz","2019-08-09 10:59:20","false","cmake: interface library for sof static libraries

Target dependencies have to be added in the same CMakeLists in which
they are declared. CMake interface library is needed to enable adding
static libraries to sof target from subdirectories.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",54,14,0
"thesofproject/sof","4a4923ee5365d79467ca3e39d60182ce7bd90d13","singalsu","2019-08-16 12:49:43","false","Topology: Change minimum channel count in volume capture pipeline

This patch replaces minimum channel count two by PIPELINE_CHANNELS to
avoid corrupted capture audio due to capturing other channel count
than what the DAI is configured for.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",57,14,0
"thesofproject/sof","68a9e1cbae6170071d01cfd03c39a6e738d2ab44","dbaluta","2019-08-13 11:49:06","false","lib: dai: Introduce generic DAI I/O access functions

In order to avoid code duplication for new IMX DAIs
we introduce generic DAI I/O access functions:
	* dai_read
	* dai_write
	* dai_update_bits

dai_* I/O access functions should replace dmic_*/ssp_* I/O functions
but as for the first patch we only make dmic_*/ssp_* call into dai_*
functions.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",55,14,0
"thesofproject/sof","c6f1b08fd29a9483da71156a407bb31fb2d7fc49","plbossart","2019-08-08 23:21:01","false","topology: intel-generic-dmic: rename devices

DMIC32 and DMIC16 are just confusing. It's not clear if the numbers
refer to kHz or bits. Rename to make the names self-explanatory.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",53,14,0
"thesofproject/sof","6237763d96685a4bbf953261371fd0db38dac4f4","plbossart","2019-08-08 23:16:58","false","topology: generate HDaudio topologies without DMIC

Not all HDaudio platforms have DMIC support, generate solution without
any DMIC. This will be used in combination with NHLT information (or
kernel module parameter) by the driver to automatically select the
relevant topology.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",53,14,0
"thesofproject/sof","f5e9cf69e3467e823ed9366313c11fa071f0a21b","tlauda","2019-07-12 20:46:17","false","arch: xtensa: remove workaround for APL GCC compilation

Removes previously added workaround for APL GCC compilation.
Some of the coprocessor registers wasn't included in the
overlay. This patch will only work with the updated
xtensa-apl-overlay.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",44,13,0
"thesofproject/sof","f3bc979112346b70e6724261c11009bd4ff2ca9f","keyonjie","2019-06-27 09:58:03","false","sof-ctl: add macros for buffer offsets

Add macros for offsets in the ctl_data buffer, and switch to use them.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",46,13,0
"thesofproject/sof","12a563fce0d57621dd0feb4f8a97cc3a0f5081a7","bkokoszx","2019-06-28 08:57:41","false","host: correct typo in host.c file

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",45,13,0
"thesofproject/sof","4151d902b7defa68dace444c73f56fc163b4911f","tlauda","2019-06-27 12:22:30","false","host: ignore host_trigger() for one shot copy mode

Ignores host_trigger(), when host component is
configured in one shot copy mode. In such mode
the DMA is started every time in copy and stopped
automatically.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",47,13,0
"thesofproject/sof","fbc6277d9bf44fd0ef5d65fd4dbff9f09c45d99e","bkokoszx","2019-06-28 07:53:43","false","hda-dma: move HDA_ALIGNMENT defines to hda-dma.c

HDA_DMA_ALIGNMENT and HDA_COPY_ALIGNMENT are not platform
specific. I've moved them from specific platform.h files to
hda-dma.c.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",45,13,0
"thesofproject/sof","a72226799c0e4b385ad9d5f75fbeec98d70fb7be","tlauda","2019-06-13 12:57:56","false","host: headers cleanup

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",48,12,0
"thesofproject/sof","333f15f363cb17b6a6b978fcfe930fe2a7c400fe","keyonjie","2019-06-17 11:14:47","false","topology: pipe-detect: enlarge the bytes kcontrol size for blob settings

For detector component, the size of configure blob can be up to 300KB,
here enlarge the max to meet this requirement.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",45,13,0
"thesofproject/sof","1dd7a0724bb7f3cb05e02101ef3de70322fb46da","jajanusz","2019-06-10 13:42:49","false","rimage: ignore sections not used by bootloader

In case of multiple modules, rimage should not expect these sections
in bootloader module: .bss, .static_log_entries .fw_ready.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",50,12,0
"thesofproject/sof","0fa42076a04270cb65b688b02902e06444a8a73f","dbaluta","2022-03-23 10:37:10","false","codec_adapter: Copy extended data found at the end of sof_ipc_stream_params

When ext_data_length is not zero this means that sof_ipc_stream_params
will contain additional data appended at the end.

Copy this data in mod->stream_params so that we can use it later.
Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",108,46,1
"thesofproject/sof","3c11135b60426dab74f8e98c3029b5358bcdc8a1","jajanusz","2019-06-01 15:22:40","false","gdb: add license

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",72,12,0
"thesofproject/sof","ba2fefb172dacf660a48cd60871031b1694f2001","jajanusz","2019-06-01 20:58:16","false","license: use spdx identifier in shell scripts

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",72,12,0
"thesofproject/sof","bab6398b273d493165c39e379cee89a64b8dca9e","tlauda","2019-05-31 13:15:17","false","dma-trace: remove not needed #if CONFIG_TRACE

Removes not needed #if CONFIG_TRACE.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",74,12,0
"thesofproject/sof","9c15883f67b24e9fd8f18747ee8c71438912e67c","xiulipan","2019-05-30 07:35:13","false","scripts: add imx8 platform in build all sripts

Add imx8 support in build all scripts.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",67,12,0
"thesofproject/sof","e39ed5ebf4054341ea231c1e2d34cd761a65387a","jajanusz","2019-05-31 13:04:48","false","include: split uapi headers into more directories

Some of interface headers are not needed by kernel,
but are needed by user-space applications, so we can split them
into multiple directories that indicate their purpose.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",74,12,0
"thesofproject/sof","5afafa880cfde50b8d5c5c3224a32ad64485f45c","singalsu","2019-05-28 06:40:03","false","Topology: Add support for 4ch 32bit 48kHz DMIC DAI

This patch restores the missing configuration into macro
intel-generic-dmic.m4. Without this patch the 48 kHz DMIC DAI
is not created. Both DMIC FIFOs are available at any channels
number and PCM format so there is no need to delete a DAI when
4ch configuration is used.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",63,12,0
"thesofproject/sof","92a242fd284073cb107dd6c884da6bebe55412fb","tlauda","2019-05-12 13:07:54","false","xtensa: bring back usage of __vec_memcpy()

Brings back usage of __vec_memcpy() function.
Now we support coprocessors store and restore
needed for this function to be preempted properly.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",57,11,0
"thesofproject/sof","6951af2a6d841d9d65d06d323b703872c53eb85e","singalsu","2019-05-16 15:12:05","false","DMIC: Add topologies for DMIC configuration variants testing

The example and test topologies demonstrate new non-symmetrical
microphones/channels setup for capture via FIFOs A and B.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",62,11,0
"thesofproject/sof","59ad3c6865a6ddf64a4775bb908fef13cec7e6d1","slawblauciak","2019-05-13 11:46:35","false","ipc: replace fw ready bitfield with explicit bit ordering

Previously the structure used bitfields,
which do not guarantee bit ordering.

This change makes sure the order is clearly defined.
It also renames and repurposes the field for general use,
which helps avoid the need to introduce new flag fields.

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",61,11,0
"thesofproject/sof","4c6f6f7b4871f634d9e8922d065a5305c9dad767","dabekjakub","2019-04-17 15:06:35","false","memory: connected memory max size to kconfig values

Signed-off-by: Jakub Dabek <jakub.dabek@intel.com>",52,10,0
"thesofproject/sof","b6499f54943d13547935cbc49e7d3043fedd196d","lgirdwood","2018-09-26 13:00:02","true","Merge pull request #418 from bkokoszx/debugability

debugability: rimage: extract .static_log_entries from elf",37,4,0
"thesofproject/sof","75466d8b2dc785d65aa848bf57654015ae2c8731","abonislawski","2019-04-03 11:57:01","false","coredump-reader: remove unnecessary separator + proper permissions

Two separators didnt work correctly

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",54,10,0
"thesofproject/sof","eac4a732324c058bf44690ad7df3c7475f833b2e","ranj063","2019-03-29 17:51:07","false","scripts: use project root directory instead of relative path

Use the SOF project root directory in get_abi.sh to read the
ABI macros instead of using the relative path.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",51,10,0
"thesofproject/sof","8847b14440d866160dd7ea44ce9d9c459b223306","tlauda","2019-03-26 07:39:31","false","pipeline: rename status

Renames pipeline status from PPL_PATH_STOP
to PPL_STATUS_PATH_STOP.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",61,10,0
"thesofproject/sof","d8a6d8fcccd33827827d4441e7a8ce8e7bd5920f","lyakh","2019-03-26 16:43:22","false","ssi-spi: fix a regression, caused by a scheduler-update

After a recent scheduler update the API has changed: now it requires
task's private pointer to be NULL before calling schedule_task_init()

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",60,10,0
"thesofproject/sof","a9969dbee4012b8bba0622c29facaebcc910a583","cujomalainey","2019-03-21 23:11:00","false","eq: fir: make init function static

Fixes checkpatch error that slipped in

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",66,10,0
"thesofproject/sof","cd4633c53e14f722e3e97a17e24a75b07a45868b","RanderWang","2019-03-20 02:31:17","false","hda: refine trace log

Add missed dma id and channel number

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",65,10,0
"thesofproject/sof","2dbe69e294e6c89a58ad614c9a34b1f2edbf2c0e","xiulipan","2019-03-11 17:34:16","false","scripts: clean up the build dir for tools

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",69,9,0
"thesofproject/sof","31d871d5af128b3db8efcbe8f02386c64e8a9c52","lbetlej","2019-03-08 09:27:30","false","logger: add channel selector component name

Logger will display a proper component name for traces
from channel selector component.

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",67,9,0
"thesofproject/sof","39551b08ce4d50ab24cfdd54c2a7c25faae6f81c","cujomalainey","2021-05-03 22:11:38","false","actions: scant fuzzer: refactor CI build

Use oss-fuzz infra to make sure we don't break the fuzzer

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",81,35,0
"thesofproject/sof","cb423b19ae5c533d23a86c43a9f4c4d5c892d9fb","abonislawski","2019-02-11 12:43:06","false","Kconfig: make MUX component a config option

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",59,8,0
"thesofproject/sof","6aa927010b87625dd4516892df34103b47ab8edd","DianaGabriela27","2019-02-27 11:34:51","false","sof: Fix compilation error when TRACEE = 0

Add missing macro definitions to fix compilation error.

Reported-by: Daniel Baluta <daniel.baluta@nxp.com>
Signed-off-by: Diana Ungureanu <diana-gabriela.ungureanu@nxp.com>",69,9,0
"thesofproject/sof","ed58766f6020f0a5ed278660f2d9bafe13c170de","mrajwa","2019-02-27 21:43:57","false","KPB: add draining event

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",67,9,0
"thesofproject/sof","73cfb3c92f90178418484ab32ec9f8849f1507d5","akloniex","2019-02-21 12:51:05","false","SMP: Fix improper cache invalidation.

Cache was invalidated in improper order, which led to using rubbish
data on slave core during pipeline trigger start.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",62,9,0
"thesofproject/sof","e43fa6e44ecfd299b4c1a9be12021928557fb380","dbaluta","2019-02-20 12:20:29","false","tasks: audio: Fix compilation issue for static pipeline

After commit 425aa5e917e2119 (""ipc: Add support for creating pipelines
dynamically"") the prototype of init_static_pipeline function has
changed.

Use the correct prototype to call init_static_pipline to avoid
compilation failure when STATIC_PIPE is defined.

Fixes: 425aa5e917e2119 (""ipc: Add support for creating pipelines dynamically"")
Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",62,9,0
"thesofproject/sof","9a4a8223097cc583f6d3d60f01aad25f0f0478a1","jajanusz","2019-02-06 20:07:44","false","cmake: add savedefconfig target

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",55,8,0
"thesofproject/sof","7d28e2d632553e9763a4685e74f4e289b4641359","jajanusz","2019-02-01 13:14:09","false","cmake: fix rimage options order

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",60,8,0
"thesofproject/sof","371cca6e6335c55694d87345d7ab894f02ced81e","lyakh","2019-01-10 13:20:14","false","dw-dma: do not sleep in atomic context

Tracing functions can sleep on some platforms, remove them out of
spin-lock protected areas, even though sometimes that can produce
inconsistent output. Since dw_dma_stop() can be called from an
atomic context, use a non-sleeping tracing function.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",57,7,0
"thesofproject/sof","1a88947629690b0298c56ce001a9fd8586350176","xiulipan","2019-01-30 10:47:36","false","[skip ci]scirpts: add sof-target-install scripts

Install all FW and all TPLG files into
root@hostname/ip:/lib/firmware/intel folder.
install sof-logger and LDC files into root@hostname/ip:~/

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",57,8,0
"thesofproject/sof","7f374d27a484a84883dd5b17b8e6450c2e7050c6","lyakh","2019-01-10 10:40:42","false","dw-dma: do not set the DONE bit of CTL_HI

The DW DMA driver prepares configuration register values in linked
list elements. If linked lists of DMA descriptors are used for DMA
those registers are automatically read in by the hardware for each
transfer. The driver also uses those prepared values to explicitly
write them to respective registers. The DONE bit of the CTL_HI
field in linked list elements is automatically set by the hardware
when the respective transfer has completed. It has to then be
cleared by the software to re-use the entry. In the CTL_HI register
the DONE bit is writable, but setting it doesn't seem to be needed.
Remove the DONE bit manipulation at configuration time.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",57,7,0
"thesofproject/sof","962fb6115c1d2e1e3ccfc030fc11c64fc98bbf82","lbetlej","2019-01-25 15:33:22","false","pm: clean up of power_down.s files

Comments and files decriptions updated.

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",56,8,0
"thesofproject/sof","c098d091ea5b08a6747f62f48ebb17721aa605ca","akloniex","2019-01-25 12:46:34","false","SSP: Properly calculate frame end padding for 24/32 transport.

When calculating frame_end_padding with tdm_per_slot_padding_flag high,
imporper data size was used, yielding configuration errors.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",56,8,0
"thesofproject/sof","fc19ee42082dc4b1539ffd7917b030f892cbac88","bkokoszx","2019-01-15 09:23:30","false","cavs: ipc: platform_ipc_init refinement

Removing the allocation of page table buffer for cavs platforms.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",54,7,0
"thesofproject/sof","85457b0c16f14e71385b795cb5a22e9f3ef72bc9","jajanusz","2019-01-24 18:09:04","false","cmake: doc: specify no languages

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",55,8,0
"thesofproject/sof","6be5ccd936c52c4a6038b8086b956b284c02cbc6","lrgirdwo","2018-11-24 20:14:17","false","reset: xtos: Add support for SKL/KBL reset flow.

Make sure correct CONFIG options are selected.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",40,6,0
"thesofproject/sof","2d6791ce763d7a799f0d7590a4b3bad9146fa1d7","plbossart","2019-01-16 05:08:04","false","src/drivers/intel/cavs/ssp.c: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","a9069d680db55b2d8055d21f31c990eb2d0975ec","lrgirdwo","2018-11-24 16:11:45","false","rom: linker: cleanup rom linker scripts to use only macros.

use macros and remove wrong entry point.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",40,6,0
"thesofproject/sof","5ad5f07078289fcb48f6b8ee3232395a9f6298b0","tlauda","2018-12-14 11:22:12","false","pipeline: remove unnecessary pipeline_init and pipeline_data

Removes unnecessary pipeline_init function and pipeline_data
structure.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",48,6,0
"thesofproject/sof","95c0a2136c88deed545f25bc5300ee9086907451","slawblauciak","2018-12-13 10:19:19","false","ipc: fix trace format

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",46,6,0
"thesofproject/sof","30007ca8258134e3ab41e328e910a4a3e31c82c4","ranj063","2018-12-07 23:19:27","false","topology: glk: change DMIC capture to support 4ch 16-bit format

The requirement for DMIC capture is to support upto 4ch
and 16-bit format. So modify the topology accordingly.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",45,6,0
"thesofproject/sof","acce742819e55f57086058a7dc6949b3a93a4076","mrajwa","2018-12-07 09:27:38","false","GDB: Added IPC trigger for GDB debug.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",45,6,0
"thesofproject/sof","8ef2894a381e0205ec5941f80641064a2c7998ec","bkokoszx","2018-12-06 16:51:42","false","hda-dma: traces: added host hd-dma traces

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",44,6,0
"thesofproject/sof","3baca873e313f0efccc2e8f25f7476462ccd2c3a","lgirdwood","2018-11-30 12:31:16","true","Merge pull request #650 from tlauda/topic/sys-heap-cache

alloc: access to system heap always using cache",40,6,0
"thesofproject/sof","b51fefb16ae7305722ce9b52c33a3d1b99eba577","lgirdwood","2018-07-09 22:11:03","true","Merge pull request #71 from RanderWang/dmatrace

trace: fix dma trace with repeated data bug on APL&CNL",13,1,0
"thesofproject/sof","64d9594dad145345ba4cd1e8827ec9d0ffffeb62","lgirdwood","2018-10-25 09:04:10","true","Merge pull request #503 from singalsu/src_use_32bit_coef_in_testbench

SRC: Use 32 bit filter coefficients in host testbench",27,5,0
"thesofproject/sof","b6016cd5e59a8862f34663a4ade2ba077da3881b","xiulipan","2018-10-18 10:43:37","false","topology: duplicate dai formart for pcm add

In PIPELINE_PCM_ADD, DAI_FORMAT is not set but are used later.
Need to set this value to avoid protenial issues.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",33,5,0
"thesofproject/sof","fda4f1a3ace5ac18f29da833171858d21012b103","lgirdwood","2018-10-15 20:30:16","true","Merge pull request #490 from akloniex/fix-trace-error

debugability: Restore error traces always using mbox.",34,4,0
"thesofproject/sof","b971739a4abf47c79fa007bf6f0a647bf04e91da","lgirdwood","2018-10-16 12:01:36","true","Merge pull request #493 from mmaka1/cfg-mem-wnd

Cfg mem wnd",34,4,0
"thesofproject/sof","e6885d04a785285cbf3031177385d91ca461e8ab","bkokoszx","2018-10-12 11:02:55","false","readme: upgrade readme with sof-logger instruction

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",33,4,0
"thesofproject/sof","97ae708c5e5fb2bdad642a8b7525f75470ebf1c5","xiulipan","2018-10-15 00:16:24","false","topology: enable hdmi support on UP2 board

Add HDMI support to sof-apl-pcm512x

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",35,4,0
"thesofproject/sof","9033d3505874f7d88edb7e1706f6224d71fe1eea","lgirdwood","2018-10-15 11:51:45","true","Merge pull request #100 from bkokoszx/logger_kw

rmbox: fix rmbox KW issues",34,4,0
"thesofproject/sof","06a42dd68f88f71f6ceb438a0b37249be3f26849","lgirdwood","2018-10-15 11:40:14","true","Merge pull request #107 from singalsu/eq_iir_fix_assign_integer_type

EQ: Fix an integer type bug in IIR coefficients blob packer",34,4,0
"thesofproject/sof","62ad4b83e972a3e13aa2579c695e28afdff268c1","akloniex","2018-10-08 16:22:23","false","abi: Redefine SOF_ABI_VERSION to allow for backward compatibility

SOF_ABI_VERSION macro now performs bitshift and addition to compose
final version number out of SOF_ABI_MAJOR, SOF_ABI_MINOR and SOF_ABI_MICRO
components.
Also added SOF_ABI_VERSION_INCOMPATIBLE macro to allow for easier comparison
between FW ABI version and client applications.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",34,4,0
"thesofproject/sof","86b8dafe4105ce13a1835d42d0e57f68fec1f35c","akloniex","2018-10-02 07:36:44","false","logger/rmbox: unify implementation of new logger tool with old rmbox

Integrate both tools to provide common CLI.
Also provide better logging format for logger tool.

Signed-off-by: ArturX Kloniecki arturx.kloniecki@linux.intel.com",34,4,0
"thesofproject/sof","2d7a933aa8655e99d95d7bafec53a14b410494af","lgirdwood","2018-10-04 16:38:21","true","Merge pull request #91 from singalsu/fix_eq_m4_export

EQ tune: Update m4 format EQ filter coefficients syntax",34,4,0
"thesofproject/sof","8a566946682c034b604886474a07d39ac97e0435","lgirdwood","2018-10-03 12:17:52","true","Merge pull request #89 from cujomalainey/master

Use passed in number of channels for pipeline",34,4,0
"thesofproject/sof","0b2e212c12e7b1288b169323de8a914e9ebe7781","lgirdwood","2018-10-01 19:56:32","true","Revert ""EQ FIR: memory: Add trace error for alloc fail and add a 1024 size buffer""",34,4,0
"thesofproject/sof","62de7e97e043081ccb2131ce47d1c138fb1b1493","tlauda","2018-10-02 13:45:11","false","cpu: fix panic at core power down

Fixes panic at core power down. Panic happened due to
the waiti check, where we expect waiti to be executed
on irq level 0 and cpu power down happens on idc task
irq level. This is OK, because core is going to be
reset anyway.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",34,4,0
"thesofproject/sof","4dd67d5754a7e83ca3f8e14ad4ecadebca0ecef8","lgirdwood","2018-10-01 15:10:14","true","Merge pull request #447 from tlauda/topic/fix_smp_build_cnl

arch: fix smp build on CNL and ICL",36,4,0
"thesofproject/sof","aee5702bcbd4fb1fbc01ca67659584bb37a6cf17","xiulipan","2018-09-26 11:42:54","false","platform: fix build warning

platform_panic is defined in platform/platform.h
empty define in sof/platform.h is no use

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",37,4,0
"thesofproject/sof","cb0644c450fcd62fba6fb8fd2782e7939305b93c","lgirdwood","2018-09-26 11:06:21","true","Merge pull request #398 from xiulipan/allocdbgfix

Add alloc debug support",37,4,0
"thesofproject/sof","92844ecc3b51212cabbe597d744b2328bda6a32c","lgirdwood","2018-09-25 19:41:40","true","Merge pull request #406 from tlauda/topic/remove_us

clk: remove clock microseconds handling",37,4,0
"thesofproject/sof","5450a2fcd8b4092bb329afa16205f82c0b5057ca","lgirdwood","2018-09-24 15:03:19","true","Merge pull request #409 from tlauda/topic/host_build_fix

host: fix build errors",36,4,0
"thesofproject/sof","658ef67d1d7f842d098619b8506fd5fc36eb67c0","tlauda","2018-09-24 08:33:36","false","host: fix build errors

Fixes building errors for arch host.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",36,4,0
"thesofproject/sof","edef72f3140f8e31f029648e883dd2590c6d1122","RanderWang","2018-09-10 06:34:37","false","dma: fix dma issue on BYT

It is caused by the change of removing dai waiting after stop.
dma should not be stopped in dai_comp_trigger if HW LLI is not
enable. At this time DMA is still working and it can't be stopped
DMA engine would stop the channel automatically after each transfer.
So just query channel status to stop dma on BYT

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>
Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",33,3,0
"thesofproject/sof","cc4e8c82052e4c66f86c4bc562d1145ed2ec528e","xiulipan","2018-09-17 06:22:32","false","task: clear interrupt earlier

list_item_for_safe is safe for item deletion, but when a new item is
appended to the list. It seems the item could not be go through.
To fix this limitation, move interrupt clear to make sure every IRQ is
handled.
Do not try to handle two task with one IRQ handler.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",43,3,0
"thesofproject/sof","0df634e8a987feb50699a77c7050c1d0985a8cad","xiulipan","2018-09-03 09:02:09","false","list: refine list_item_del to avoid make list chaos

There are possible that we call list_item_del to same list item twice. This
will cause the list be into chaos. Reset the next and prev pointer to 0
to avoid risk.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",30,3,0
"thesofproject/sof","eb7e101ae0f2b928566b734b1d4b6113ae48f06f","jajanusz","2018-09-12 11:26:25","false","apl: remove duplicated platform.c file

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",42,3,0
"thesofproject/sof","85e1c0d7383c7b250b1c1dfebf050089946103fc","xiulipan","2018-09-06 05:55:44","false","schedule: fix schedule list double add

Check if the schedule task is added in the list before add it.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",31,3,0
"thesofproject/sof","f17abe644c3b583213914b3d98e27f55786ef8c7","lgirdwood","2018-09-13 14:09:22","true","Merge pull request #370 from mmaka1/link

build: linker: x scripts for cavs platforms aligned",42,3,0
"thesofproject/sof","1b28d0b88cd54a2d48daa7163376ebd0ad39c070","tlauda","2018-09-10 08:41:33","false","notifier: right now reserved only for master core

Make notifier available only for master core.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",33,3,0
"thesofproject/sof","83d19fb57e7112c4d0a20b163f3d8c88fa266d5f","singalsu","2018-09-06 08:22:18","false","IPC: Increase max size from 128 to 384

This patch increases IPC length to be sufficient for e.g. 2x 12th order
IIR configuration. This is near to minimum feasible to enable testing of
equalizers. There may be need to adjust the limit up even more later but
this is the proposal now until we know better the requirements.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",31,3,0
"thesofproject/sof","c28a21073239050457faeb32cb5027e3ea07261c","lgirdwood","2018-09-03 13:36:42","true","Merge pull request #301 from tlauda/topic/alloc_free_block

alloc: fix free_block",30,3,0
"thesofproject/sof","da6e02e55659ea4e46db26000999e5ec619b0649","tlauda","2018-09-05 07:47:56","false","atomic: atomic_add and atomic_sub return value

Makes atomic_add and atomic_sub functions to return
value after change.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",31,3,0
"thesofproject/sof","e767798c7f3ecd5d571afb74d2e7c58a8d726631","mengdonglin","2018-08-08 02:17:38","false","topology: Define hda.m4 for HD-Audio configurations

This patch adds a new file hda.m4.

This file defines macro HDA_DAI_CONFIG(idx, link_id, name) for user to
define configurations for HDA Backend links. The link's data tuple will
carry the HDA type info for kernel driver to check the link type.

Pleae note that there are no HW configurations defined for HDA BE links
because current HW configurations is more suitable for SSP BE links, but
not for HDA. We'll decide what HW configurations are suitable for HDA BE
links later.

Signed-off-by: Mengdong Lin <mengdong.lin@linux.intel.com>",18,2,0
"thesofproject/sof","0ead9e762b36b87cd59afe44e90f912978a79fad","lgirdwood","2018-08-29 15:19:05","true","Merge pull request #275 from mmaka1/glk-2nd-pl

dma: hda: 2nd playback with existing topology fixed",24,3,0
"thesofproject/sof","ed8ad5b29c5b732d960339379fecd22efbf02837","tlauda","2018-08-24 13:34:24","false","idc: IDC_MSG_PPL_TRIGGER message implementation

Implements new IDC message, which can be used to start
pipeline processing on slave cores.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",21,3,0
"thesofproject/sof","5fe4d7da21cd6c1af3f42c5b92b2cb03a9fd0181","tlauda","2018-08-24 09:07:37","false","ipc: fix position notifications

Fixes notification data for poisition and xrun notifications.
Data sent to host was invalid.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",21,3,0
"thesofproject/sof","eca2089eceef055ce114c6f5aeafd92d2ba167b4","tlauda","2018-08-23 11:57:13","false","dma-trace: allocate trace buffer only after enabling traces

Allocates DMA trace buffer only after IPC to enable traces
is sent.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",19,3,0
"thesofproject/sof","88c0db867f8bec2c05fde202732e10170c5b57cc","tlauda","2018-08-23 10:47:14","false","ipc: alloc page_table based on CONFIG_HOST_PTABLE

Allocates page_table only if CONFIG_HOST_PTABLE is defined.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",19,3,0
"thesofproject/sof","9467fcd05f533a36763301813b797e617abf0154","lgirdwood","2018-08-23 13:14:01","true","Merge pull request #253 from tlauda/topic/alloc_uncached

alloc: access to the memory map through uncached addresses",19,3,0
"thesofproject/sof","548ac49d9d4add1bf71ab2ed587a37d2d0d954d1","lgirdwood","2018-08-23 10:03:15","true","Merge pull request #249 from tlauda/topic/ipc_comp_list_shared

ipc: share component list between cores",19,3,0
"thesofproject/sof","876115c8cb120a6a9cd1b3470b5c68cccf5470f0","lgirdwood","2018-08-07 12:08:35","true","Merge pull request #196 from tlauda/topic/issue-195

dw-dma: fix compilation for BYT, BDW and HSW",18,2,0
"thesofproject/sof","d67df161c5d6e67a8c4cec4d0e6581a4aaf17fdc","slawblauciak","2018-07-26 12:40:46","false","test: unify ut names

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",13,2,0
"thesofproject/sof","3ea7004fb6d7f9a14f5566a0f659aeebbfc82844","lgirdwood","2018-07-30 06:53:02","true","Merge pull request #156 from singalsu/fix_dmic_ipc_typo_proposal

DMIC: Fix mistake in comment and add check for supported word lengths",14,2,0
"thesofproject/sof","b02fe90fe03128333254eafba16be19b213172ff","xiulipan","2018-07-19 03:11:29","false","xtensa: add exception handler for all exception

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",13,2,0
"thesofproject/sof","fc3ed5eaef4b928cfe08dd6f7f96831638312c72","xiulipan","2018-07-20 06:57:20","false","apl: memory: expand number of 256 Bytes block to be 128

Still lack of this size HP buffer when enable all 6 ssps on APL.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",13,2,0
"thesofproject/sof","c12a84ecf1735a9dc3b460de49f6ee4eab9b94c0","tlauda","2018-07-20 13:45:30","false","host: do not initialize pointer every trigger start

Buffer pointer connected to host should be initialized only
after host creation, prepare and reset. Otherwise it will
mess up the transfer continuity after stop - start sequence.
The same change for DAI was introduced in commit
6009e78b32a36c5ca2ed74448baf3218696da997.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",13,2,0
"thesofproject/sof","792040997c1c602afe78ad3488a4564f537d8673","lrgirdwo","2018-07-14 16:35:57","false","build: host: Fix versioning for libtool.

Libtools does not like version number starting with a leading 0 i.e. 01.1
must be converted to 1.1

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",15,1,0
"thesofproject/sof","8b2d94cb1213990debd5eb9b4454ad6abaa6dcaa","lgirdwood","2018-07-17 10:16:26","true","Merge pull request #111 from tlauda/topic/issue-74

ssp: clear out FIFO stale samples",13,2,0
"thesofproject/sof","c2feab8a44b28fab9689ba95bd553647d4252e45","lgirdwood","2018-07-11 15:15:10","true","Merge pull request #82 from RanderWang/dmatrace

trace: fix IPC timeout issue on APL",15,1,0
"thesofproject/sof","f9c597e7c82630a46321ab8d9506b4e92ab57a18","plbossart","2018-07-13 17:17:23","true","Merge pull request #89 from mmaka1/glk-fix-kw

klocwork: fix initialization of HiFi3 variables",15,1,0
"thesofproject/sof","8c3e4b89547ac275a5a4462955b1dd697cd7bdf2","lgirdwood","2018-07-04 12:58:46","true","Merge pull request #49 from slawblauciak/alloc_free_fix

lib: fix free_block for memory allocated in the last block map",9,1,0
"thesofproject/sof","fa2e98a118a575274542505073ed563427bfefd8","RanderWang","2018-07-04 06:04:48","false","SOFT: fix this topology failed to be loaded

Set dai id number according to NoCodec-id

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",7,1,0
"thesofproject/sof","d6b99024a420c1ed15750a9517e3bee32603d24c","lgirdwood","2018-07-05 10:11:55","true","Merge pull request #51 from mmaka1/dma-caps

dma: separated dma queries for host connections and hda/gp caps",10,1,0
"thesofproject/sof","2fedc24e613ae6759bcb1fcd4f65417eae9b3560","mrajwa","2020-01-27 21:04:03","false","kpb: disable IRQs before calulation of read pointer

This patch adds critical section around calculations of
draining starting point (buff->r_ptr).

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",76,20,0
"thesofproject/sof","3e235138811d2d24fb2ac0017789449108fea495","lgirdwood","2018-11-26 14:59:24","true","Merge pull request #584 from singalsu/dmic_ipc_add_params

IPC: DMIC: Add clock start and clock change time delay parameters",41,6,0
"thesofproject/sof","da5073737c7101bd287a299acec48969310d7895","akloniex","2018-11-26 18:37:20","false","PM: Implement pm init and runtime for CNL.

Power management at platform init and during runtime was implemented
on CNL similarly to implementation on APL.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",41,6,0
"thesofproject/sof","76de2bb8d6b6da68a0365e49f67e809cbea1fa79","ujfalusi","2021-10-07 11:26:47","false","lib: dma: Drop temporary variable use from dma.h and blank lines

The use of temporary variables in the header was introduced by
commit 1bb78a5caba70 (""dma: use platform_shared_commit()"")

When the platform_shared_commit() use is removed by
commit 580b9cf005952 (""memory: remove platform_shared_commit() as it's a NOP on all platforms."")

The temporary variables remained for no reason.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",121,40,1
"thesofproject/sof","32129b9bf468f70636c9f75f3f01d32fac60f716","btian1","2022-10-12 02:57:08","false","component: add frames and period info to component performance profiling

Frames and period are key information for time calculation, with these
and sample rate, it would be easy to get current component consumed data
in time domain. CI script also easy to get these information for
further calculation.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",99,52,1
"thesofproject/sof","8515f772e1f0c9ca43be8176b25df44ebe4f813c","btian1","2023-08-03 02:45:28","false","copier-dai: remove duplicated frame format assignment

After dai device was removed, there is no parent device
and dai device classification, only one device left for copier.
The input ipc config is exactly copier device config, no
need extra assignment.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",29,62,1
"thesofproject/sof","7f975e9c27806089ee4f0dd6afebb23fa34c8f02","dbaluta","2021-03-30 07:26:42","false","codec_adapter: generic: Fail if init_process callback is not provided

In this way we avoid crashing the SOF FW and warn the user that
the callback is missing from the implementation.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",80,34,0
"thesofproject/sof","13127d861e2942beb2bfba23b393b755c2674849","dbaluta","2020-04-09 18:23:53","false","drivers: imx: sdma: Simplify sdma_read_config

Save earlier fifo_paddr thus to reduce one level of indentation.
Also, get rid of src_may_change and dst_may change as we can
use config->direction instead.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",82,22,0
"thesofproject/sof","663fe669a98612796bef4b8a22fdcd710daec9cd","dbaluta","2019-01-28 12:03:09","false","uapi: fw: Add snd_ prefix to types

This aligns uapi/user/fw.h with the fw.h file used by Linux
and also prepares this header to be directly used by rimage.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",59,8,0
"thesofproject/sof","f696e52482ef1a4e91b2ce93b5fa7e570881a755","dbaluta","2021-11-05 16:31:45","false","cmake: Add imx8ulp to the list of unsigned images

NXP platforms do not use signed firmware image for now. Add imx8ulp
to the list of unsigned firmware to fix build.

With this we fix the following build error
make[3]: Entering directory
'~/sof_dir/sof/build_imx8ulp_gcc'
[100%] Creating reproducible.ri
0x2e0   error: CSE Manifest magic number NOT found, instead: (Reef)

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",127,41,1
"thesofproject/sof","1559f786d9b3616ffe0073b6583c63475b26c4b0","plbossart","2019-01-16 05:08:02","false","src/audio/pipeline_static.c: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","d10eefc199951290977bd879b99bb7ca4deaa3a7","lrgirdwo","2021-04-13 15:45:41","false","ipc: move IPC buffer logic to IPC helper.

buffer_new() is IPC specific so move to IPC helper.
No code changes only moves.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",81,34,0
"thesofproject/sof","cfe75333b499964d4447996c2636f9678f654179","mrajwa","2020-11-18 19:31:41","false","codec_adepter: fix for memory list initialization

This patch moves memory list initialization from .prepare() to .init()
as we need that memory list be already initialized on codec
initialization otherwise we will lose track of memory allocated
prior to .prepare()

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",74,30,0
"thesofproject/sof","37fc1b63220f390ab9ab76f87355c2e84c965740","ktrzcinx","2020-02-27 15:00:16","false","ipc: Remove SOF_IPC_EXT_DMA_BUFFER

This enum code, and whats more important, related structures is
unused in whole source code, so it shouldn't be kept.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",76,21,0
"thesofproject/sof","db40934e57aa80a187e611717b5b731d355bc49b","lrgirdwo","2020-10-26 11:28:12","false","cavs: add support for cavs2.5 code signing

cavs 2.5 uses a larger key and the RSA signing PSS mode.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",74,29,0
"thesofproject/sof","0aa92d8963dcf25fa368023944076a47937927c5","cujomalainey","2020-11-13 21:03:51","false","mixer: delete unused function

This function isn't called anywhere, time to do some cleaning

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",73,29,0
"thesofproject/sof","d6cf6960662f3f5b3f65e0f27d74f20de4edc41e","lrgirdwo","2020-10-26 10:41:17","false","config: tgl: fix CSE offsets for TGL

Now aligns with actual offsets.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",74,29,0
"thesofproject/sof","0596f5b71c189ab1e3a2443b7ab137cd0e729889","ktrzcinx","2020-05-27 07:02:46","false","logger: Pass input file in -d flag

Such an approach is more logical, user add flag to dump information
and specify what to dump just after it. Using separate argument
with file path and flag to dump is less natural. So after change
`./sof-logger -l file.ldc -d`
will be replaced with
`./sof-logger -d file.ldc`

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",96,24,0
"thesofproject/sof","7b7c192e70c23a6024902e6781c32fc0f058c37a","lrgirdwo","2020-11-12 22:08:49","false","verify: add signature verification support

Add support to verify signatures of cavs firmware binaries.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",72,29,0
"thesofproject/sof","f84676f5d9f03abee1571c08e449e4867c9b0a32","lrgirdwo","2020-10-26 11:20:25","false","hash: make module_sha384_create non static.

Used by other clients now.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",74,29,0
"thesofproject/sof","df204853b9e7fedea7fb0f46c2278666e95de92a","lrgirdwo","2020-10-26 11:12:10","false","pkcs: Add PSS signing mechanism for CAVS2.5

Add RSA PSS signing support for CAVS 2.5 platforms.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",74,29,0
"thesofproject/sof","bf23b5ea00b6a3a1a4cb6aea14f517acd1114a8c","libinyang","2023-02-02 01:11:54","false","config: mtl: set KDTEST module_type to 8

KDTEST module_type should be 8

Signed-off-by: Libin Yang <libin.yang@intel.com>",52,56,1
"thesofproject/sof","433de9fb50c0107e7aee6734fda1a4a7e1f86d51","tlauda","2019-04-20 14:21:36","false","dw-dma: clear block/transfer irq after stop

Clears block/transfer interrupts after stopping the
DMA channel. It prevents sudden interrupt trigger
after enabling different DMA channel than the one
previously stopped.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",47,11,0
"thesofproject/sof","3fcd4e5a03cda641acb6bc58715aebfa531c853e","tlauda","2019-07-17 10:12:15","false","cache: move PLATFORM_DCACHE_ALIGN to cache.h

All cache related defines should be kept inside
dedicated cache header. Also changes sizeof(uint32_t)
to sizeof(void *), so the header could be included
from assembly files.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",46,14,0
"thesofproject/sof","ef563ebfe3d5725e197d7de7f46b7e7a7672cf78","marc-hb","2023-10-31 06:36:58","false","cmake/zephyr: decentralize src/init/

Adding all source files in a single, giant zephyr/CMakeLists.txt is
inconvenient and does not scale.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",5,65,1
"thesofproject/sof","1bfeb887c57854bdba18939b823066be88c1fb68","kv2019i","2023-11-08 17:29:06","false","west.yml: update Zephyr to 26002b060708

Contains 500+ commits, including following directly affecting
SOF targets:

0a6fc6f70a25 soc: intel_adsp: cavs: fix dts memory address format
4b02bbc3297f cmake: xtensa: update xtensa SoC to use SOC_LINKER_SCRIPT variable
8bccb645aae8 boards: intel_adsp: fix board flashing
a4b9692155a3 soc: intel_adsp/cavs: add secondary dsp context save support
0891448ac908 soc: intel_adsp: don't enable interrupt before k_cpu_idle
c73e67018d0a power_domain_intel_adsp.c: revert recent INIT_PRIORITY change
385ceb714537 soc: xtensa: nxp_adsp: rt595: move .noinit

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",0,65,1
"thesofproject/sof","49377e8c9e8f1a69a7bc55c44290a81408b9b4eb","yongzhi1","2023-11-01 15:40:21","false","topology2: google-rtc-aec: expose DP module core_id for overriding

RTC_AEC module is using DP and rest of pipeline is LL and both can
run on different cores.

For the purpose to assign DP module individually on secondary core,
now add a new macro GOOGLE_AEC_DP_CORE_ID.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",4,65,1
"thesofproject/sof","253e09feb87d4eea35f6946f941a1a550745a4c8","jxstelter","2023-10-30 13:21:04","false","idc: ipv4: Add idc_comp_free operation

New IDC request idc_comp_free() is required to delete
component located on different core than the pipline to which
the module belongs.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",5,65,1
"thesofproject/sof","b9bd2303bd0d2b72194daed32807b7d021be1574","iuliana-prodan","2023-11-08 11:19:08","false","topology: imx: fix tdm slot width value

Set correct TDM slot width to 32 bits.

The error has been discovered after commit
0ba64e98ec7d (""SAI: use topology params"").
We start using the tdm_slot_width from topology,
rather than hardcoded in code.


Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",0,65,1
"thesofproject/sof","473c7a798cb5a6322e95817eb5e42a24de3dfbd3","joechengxperi","2023-10-16 06:23:58","false","topology2 : dts : add DTS component and pipeline

This commit adds DTS componenet and pipeline for topology2.
1. DTS component
2. A new pipeline to support EQ IIR + DTS processing

dts_spk.conf includes the parameters for DTS SDK V1.1.3

Co-developed-by: Mac Chiang <mac.chiang@intel.com>
Signed-off-by: Mac Chiang <mac.chiang@intel.com>
Signed-off-by: Joe Cheng <joe.cheng@xperi.com>",10,64,1
"thesofproject/sof","3e7a8e9c32145230c5e46e0f04f5fe06634bc1f2","tlauda","2020-01-21 09:28:31","false","ipc: forward IPC to slave cores

Checks what core should process current IPC message
and forwards it to given core. Every component, buffer
and pipeline are created directly on the chosen core,
so we have full SMP now. DAI config checks whether
there are matching components on all the cores and
redirects IPC accordingly.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",79,20,0
"thesofproject/sof","854aa7d1814c75105a40b28a4312475c9d4719df","tlauda","2020-01-14 12:25:59","false","notifier: use platform_shared_commit()

Uses new platform_shared_commit() function to commit
shared notify data. Notify data no longer needs to be explicitly
aligned to data cache line size. It is implicitly handled by
SHARED_DATA macro.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",77,19,0
"thesofproject/sof","4bc6488b24e445ca7e6713b8c97f870b73788db5","marc-hb","2023-10-20 22:50:21","false",".github/zephyr: de-hardcode the name of the zephyr remote

Fixes issue reported in stable-v2.7 #8353 which wants to use our own,
downstream Zephyr branch.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",12,65,1
"thesofproject/sof","d24abbc6aee114c6e509b608050f5adbf80d31f4","btian1","2023-09-21 12:51:27","false","audio: volume: move volume related config to component config

volume related config are missed to move during volume move out
from module adapter, move volume kconfig from module adapter folder
to volume folder with a specific volume kconfig file.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",21,64,1
"thesofproject/sof","9e21d8ba6239bb07b2dd0f919c1c63b7b82f0bdb","RanderWang","2023-09-15 08:44:51","false","topology2: set pipeline priority for google aec stream

Set priority for aec stream so that driver can trigger pipeline based on
pipeline priority.

Signed-off-by: Rander Wang <rander.wang@intel.com>",20,63,1
"thesofproject/sof","4fe87bebbe67533efe60dcda79a80bb53ee2239d","marc-hb","2023-10-09 19:55:15","false","Merge full rimage.git history back into tools/rimage/ subdir of sof.git

Merge full rimage.git history back into tools/rimage/ subdir of
sof.git thanks to:

   git merge --allow-unrelated-histories rimage-repo/main

Also list incoming tools/rimage/tomlc99 16000 gitlink in
sof/.gitmodules to avoid breaking all git submodule commands.
This MUST be done as part of this merge commit to avoid
git submodule errors and preserve git bisectability.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",13,64,1
"thesofproject/sof","99206de401e6c42ae1d07b61b0e2028ea24a74a8","marc-hb","2023-10-05 17:45:29","false","Clean just inherited tools/rimage/.gitmodules file (for tomlc99)

.gitmodules files have no effect unless they're at the top-level.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",15,64,1
"thesofproject/sof","b54ec4bdbf31bf2e61263101856fe9dfa5804e35","lgirdwood","2022-01-21 12:01:42","false","Revert ""module_interface: remove module_id""

This reverts commit 0f6e3b2ed4dc7b421893e2946a3e91156bcceee5.",114,44,1
"thesofproject/sof","f55338a985acf0d54aaa1c93a784217492291ea1","marc-hb","2023-10-03 23:38:36","false","Switch Zephyr build to new sof/tools/rimage location

Switch away from the independent rimage submodule. Long story in
https://github.com/thesofproject/sof/issues/8178 and others.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",16,64,1
"thesofproject/sof","9b31875318a2640d1047f26976fe402b0bb68388","marc-hb","2023-10-05 01:05:23","false","Add new sof/tools/rimage/tomlc99 submodule to west.yml too

Add it both as a git submodule and west submodule to minimize
disruption. The current focus is on rimage and that's a dramatic enough
change; one problem at at time.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",16,64,1
"thesofproject/sof","35b17a41c118840560b69ab52519cc6c1df6b2fd","kv2019i","2023-08-16 15:58:10","false","platform: tigerlake: remove XTOS platform definitions

Complete migration of Intel TigerLake platform to Zephyr RTOS by
removing remaining platform definitions for XTOS for this platform.

Link: https://github.com/thesofproject/sof/issues/7248
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",24,62,1
"thesofproject/sof","0857ed68b9036ac303918b306536d9aaef97260e","bardliao","2022-08-30 07:46:56","false","topology2: add ssp multi stream capture

Add ssp multi stream capture support.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",114,51,1
"thesofproject/sof","86203383a6368dd3bd5a4b6cea6ea4c6ad72665a","DINESHKUMARK1","2022-12-08 09:56:26","false","platform:amd:enable acp SRAM

Configure ACP sram access.

Signed-off-by: Kalva, DineshKumar <dineshkumar.kalva@amd.com>",101,54,1
"thesofproject/sof","4ac2ed4b3b706dcb6b2c6f505259e7ce4e19c966","dabekjakub","2023-08-01 14:15:43","false","vmh: fix build errors

Last commit created build errors in some configurations. Add fixes
to those issues.

Signed-off-by: Jakub Dabek <jakub.dabek@intel.com>",30,62,1
"thesofproject/sof","658cb65bb5a8e12d5f914c5c378f2ea4060a2eeb","andrula-song","2023-07-25 05:03:16","false","Audio: Aria: Convert aria to module adapter interface

Convert the component aria to use module adapter interface.

Signed-off-by: Andrula Song <andrula.song@intel.com>",32,62,1
"thesofproject/sof","983b262512fdf003676c5c4a21ca4364da4d5068","btian1","2023-07-25 06:50:56","false","mixer: correct data type for frame_fmt

use formal enum to replace uint16.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",33,62,1
"thesofproject/sof","0ba64e98ec7dde07b436ca023740bcb5e4ef7186","eurofun","2023-05-25 06:07:38","false","SAI: use topology params

The imx SAI driver used hardcoded clock dividers, word lengths
and #ifdefs to deal with differences between SOCs. Changed it
to respect all the SAI_CONFIG parameters.

Signed-off-by: Alexander Boehm <aboehm@eurofunk.com>",53,60,1
"thesofproject/sof","e70175eb8976f5c7437eef2704aa9a0149f7f8c8","eurofun","2023-05-24 17:03:35","false","imx8m: add SAI2,5,6,7

Made the remaining imx8mp SAI peripherals available for use.
SAI4 does not exist.

Signed-off-by: Alexander Boehm <aboehm@eurofunk.com>",55,60,1
"thesofproject/sof","b1822cde7008cd79acd627228309682812892363","fkwasowi","2023-02-21 13:39:44","false","kpb: add sink channel setting

KPB in micselector mode has
a different number of channels on each sinks.
Sink 0 has one channel and the other sinks
have the same number as on the module input.

Signed-off-by: Kwasowiec, Fabiola <fabiola.kwasowiec@intel.com>",56,57,1
"thesofproject/sof","0f0acaae94ed4cd3af907584ea89fdee0581b0b1","lyakh","2023-01-30 14:41:00","false","platform: remove support for cAVS 1.5 platforms

Remove all support for cAVS 1.5 platformsm including Apollo Lake,
Sky Lake, Kaby Lake, Broxton and Gemini Lake, they aren't supported
any more.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",52,56,1
"thesofproject/sof","10e1172ea57b82102bbf10a1358002ff2327990c","kfrydryx","2022-09-27 07:30:53","false","ams: Add initial AMS implementation

Add Asynchronous Messaging Service. This can be used to communicate between
modules.
Asynchronous Messages are one-way messages from one producer to one or
multiple registered consumers. Messages between modules on different
cores are sent through IDC. All inter-core communication must be proxied
by the main core.

Signed-off-by: Krzysztof Frydryk <krzysztofx.frydryk@intel.com>",97,52,1
"thesofproject/sof","201a12c940ba67eb701261f4cc49067696bea34f","kfrydryx","2022-10-19 13:22:16","false","platform: mtl: Enable AMS

Set config to enable AMS for ACE1x platform and add mtl specific values.

Signed-off-by: Krzysztof Frydryk <krzysztofx.frydryk@intel.com>",98,53,1
"thesofproject/sof","e40cf6d7d15732d835b63c9ca8c237c175971420","mwasko","2023-02-23 15:34:17","false","CODEOWNERS: more intel code owners added

Intel code owners added based on latest contribution
and expertise.

Signed-off-by: Michal Wasko <michal.wasko@intel.com>",56,57,1
"thesofproject/sof","fed69d453f7eec28f62f4ea14bd422480c03756f","softwarecki","2023-02-23 16:27:25","false","toml_utils: adsp_config: Moved generic parser functions to toml_utils

A set of functions which make it easier to parse toml files has been
separated into a new file.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",56,57,1
"thesofproject/sof","0931d9cc4be979142daf50793d137dedece1e885","softwarecki","2023-02-16 15:50:57","false","main: heap_adsp release fix

In image re-signing mode or if there are no input files, the memory
allocated for heap_adsp was not released.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",53,56,1
"thesofproject/sof","60e9e97e0df842c3030c0772b02120c807f6721a","jsarha","2023-02-17 21:28:56","false","hda: chain dma: cancel task before freeing it

When schedule_task_free() is called to a scheduled zephyr_ll task it
sometimes causes a crash. Canceling the task before freeing appears to
fix the problem.

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",55,56,1
"thesofproject/sof","4d67d2f4168b80c449ed1c69f2eb52665847bd98","kv2019i","2022-11-03 15:31:32","false","app: zephyr: enable CONFIG_ASSERT in debug overlay

Enable CONFIG_ASSERT=y in SOF debug overlay.

Also add a commented out list of additional useful Zephyr debugging
tools to the overlay. These incur a higher runtime cost, so are left
disabled by default. These are all debug tools that have been tested to
work with SOF and found useful.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",89,53,1
"thesofproject/sof","a74ad932700c1699fc5afd8778e0a084cc907619","kv2019i","2023-02-22 12:57:35","false","audio: chain_dma: do not hold spinlock when calling schedule_task_free

schedule_task_free() might be a blocking call. E.g. the Zephyr
LL-scheduler implementation can call k_sem_take(). Do not call
this function with a spinlock held.

Link: https://github.com/thesofproject/sof/issues/7156
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",56,57,1
"thesofproject/sof","d2df7916816f3dd2706d90c213fb94cc6f5aaaa9","lyakh","2023-02-14 13:23:37","false","pipeline: (cosmetic) remove unreachable code

Remove left-over unreachable code in pipeline_comp_trigger(): tje
err == PPL_STATUS_PATH_STOP case is already processed and leads to a
return from the function, therefore the same condition cannot be met
a second time immediately after the return.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,56,1
"thesofproject/sof","7fdc62375a72dd35b6361c9e94a2b867542c0309","yongzhi1","2023-02-17 14:45:49","false","topology2: cavs-rt5682: override BT playback pipeline id

Override the default PIPELINE_ID for BT_PB.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",55,56,1
"thesofproject/sof","4fa9a7b3869a34b1e5d7a6a85f7c0edf690cac95","singalsu","2018-11-02 12:35:59","false","Volume: Fix overflow in s16 and s24 output conversions

The problem could be heard with extremely loud music content. The
32x32 saturating multiply function works for 32 bit output but
the result will overflow when less number of bits are used from output.

This patch adds to format.h rounded 32x32 multiply inline functions for
saturated s24 and s16 formats. The generic volume function is updated
to utilize them and the code structure is cleaned for easier maintenance
and simpler look.

The format.h file is cleaned up with function parameter indents and
remove of redundant code in saturate function.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",30,5,0
"thesofproject/sof","76754b52d0fb2e20702e25bb36666743e28083eb","singalsu","2023-10-18 13:41:24","false","App: Intel: Enable Aria build for TGL and TGL-H platforms

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",12,65,1
"thesofproject/sof","f829c30d6b680869eaa52d0a48a9b4f17d8a412e","ranj063","2023-02-08 19:15:31","false","topology2: tokens: Remove the payload_with_output_format token

The micsel will need to use the base config extension and the init
config type will need to be set in the manifest.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",55,56,1
"thesofproject/sof","82cedc16657c31e273acb68e03c67ebec6e7f909","aiChaoSONG","2023-01-18 07:11:58","false","Topology2: add smart_amp widget class

This patch adds the widget class for smart_amp module

Signed-off-by: Chao Song <chao.song@linux.intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",55,55,1
"thesofproject/sof","31598f521e3718a1b54c0cdc18ebf127031aa6db","ranj063","2023-02-15 10:10:39","false","smart_amp_test: Correct bytes calculations for processing

The avail_frames should not be used for other than the feedback buffer.
Source/sink should be using the avail_passthrough_frames when calculating
for the processing.

If we have feedback buffer then the avail_frames can be different than
avail_passthrough_frames which will cause underrun reports.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",56,56,1
"thesofproject/sof","baec9c1b285bdac8c46584f7c4959edb6e90a1eb","singalsu","2022-08-23 10:05:00","false","Test: cmocka: Add tests for auditory functions library

Add test for psy_hz_to_mel(), psy_mel_to_hz(), psy_get_mel_filterbank(),
and psy_apply_mel_filterbank_16/32(). All the test data in C header
files was created with script ref_auditory.m.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",111,51,1
"thesofproject/sof","e6e441ced55d39d1ebdb07f3164d41c4a204b9e6","serhiy-katsyuba-intel","2023-01-31 11:30:57","false","ipc4: add IPC4 gateway

Adds IPC4 gateway. IPC4 gateway transfers audio between host
and DSP without DMA: via memory window (audio payload) and IPC4
messages (commands).

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",51,56,1
"thesofproject/sof","f7dd181e9969cd0c2169baf891398a9a64ef8ee0","ranj063","2023-02-07 19:57:25","false","topology2: Use input/output pin consistently

Use the input/output pin terminology consistently to align with the
kernel driver and avoid any confusion.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",55,56,1
"thesofproject/sof","e26ef3a08cfee7f047c2746a638fe7f08022f002","singalsu","2023-02-02 11:35:57","false","Tools: Tune: EQ: Code cleanup with no functional changes

Use of isempty() instead of length() to the check for non-empty
variable can avoid warnings in executing code in Matlab.

The unnecessary print of variable to console is removed. E.g.
struct bs, or biquad transfer function zeros vector a.

In system() command no need to store the console output, just
check the return status.

In switch-case statements no need for comma after case and
otherwise.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",52,56,1
"thesofproject/sof","a0df1a612090df2ff74d6b6e82be786d12e20a89","singalsu","2023-02-02 09:30:15","false","Tools: sof-ctl: Move IPC3 examples to subdirectory

This patch moves the existing .txt blobs for sof-ctl to directory
ipc3. There will be a similar new ipc4 directory.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",52,56,1
"thesofproject/sof","6c5608d9e763b9b041b879dc543deefb70dd2088","andyross","2023-02-01 22:01:18","false","fuzz: Whitebox component creation

The TPLG_COMP_NEW message type works by matching a 128 bit UUID to a
runtime list of drivers.  That's too much depth for even directed
fuzzing to find randomly.

So whitebox that command: leverage the fact that the first four bytes
of the message are being ignored anyway (that field is the message
length, which we get externally from the fuzzing rig and overwrite).
Treat the first byte as a magic number indicating the command type
(0xff in this case being ""comp_new"") and the second a parameter
interpreted as a driver index.  Then fix up the fields manually so it
gets through the logic in helper.c:get_drv() successfully and tries to
create a random component.

Signed-off-by: Andy Ross <andyross@google.com>",52,56,1
"thesofproject/sof","1f48e003d0d0412064f8c0079dc3eddf070ba46a","lyakh","2023-01-25 13:02:46","false","crossover: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register crossover with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","34b9345942a8bf9f31963265e6e332bc74eeebe9","kfrydryx","2023-01-16 08:19:56","false","platform: ace: enable IDC on primary core

Init IDC on primary core to enable receiving IDCs from secondary cores.

Signed-off-by: Krzysztof Frydryk <krzysztofx.frydryk@intel.com>",55,55,1
"thesofproject/sof","8542465512e7ebe937e585d7a632d82c1275c8f6","andrula-song","2022-12-07 02:57:21","false","Audio: Math: Move the C functions of FFT to corresponding files

Move those 16bit and 32bit complex functions to corresponding c
files.

Signed-off-by: Andrula Song <xiaoyuan.song@intel.com>",100,54,1
"thesofproject/sof","62075a44e3397c1e2305957ddd0cbfb8c533c65a","libinyang","2022-11-15 05:36:16","false","topology2: add wov-detect pipeline

wov-detect pipeline contains a micsel component, a wov component
and a virtual component. micsel component accepts 2 channels audio data and
output 1 channel audio data to the wov component. wov's keyword is a clap.
The virtual component is only used by the driver, and the FW will not
know that there is a virtual component in the pipeline. The virtual
component is used to connect the pipeline to a host copier pipeline
as per drivers requirement.

Signed-off-by: Libin Yang <libin.yang@intel.com>",95,53,1
"thesofproject/sof","24062b456e06332faf7ee6ef5cbd6eb2321a459e","lyakh","2022-12-20 13:20:47","false","volume: fix a potentially uninitialised array

Make sure there's at least one channel in the volume configuration.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",90,55,1
"thesofproject/sof","89ddee6961b46597542a637b69e333cfd5d15dc1","marc-hb","2022-12-08 07:30:14","false",".github/zephyr: git fetch more to fix version.h and reproducibility

We need the ability to reproduce CI builds easily.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",101,54,1
"thesofproject/sof","192fda25a81c72b2532dce1f85b0d2582a29a4c9","tmleman","2022-12-02 12:48:26","false","west.yml: upgrade zephyr to 56284d7017

Zepych update: total of 40 commits.

Update needed before enabling power domains.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",101,54,1
"thesofproject/sof","1faf0557554a04a06d4fd66d01c0585c0dfdfd3c","bardliao","2022-11-14 01:40:29","false","topology2: cavs-sdw: use macro to define SDW jack stream and id

Define macro for SoundWire jack stream name and BE id.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",96,53,1
"thesofproject/sof","b0c5b08d631bba440c6a2257cc578fcc91c509bc","ranj063","2022-12-01 16:24:36","false","topology2: sof-ace-tplg: Rename sof-mtl-sdw

To it's actual name sof-mtl-rt711-4ch.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",101,54,1
"thesofproject/sof","1dffde13ba4b181d483ee54f0a0df2b4cee5c5db","fkwasowi","2022-09-01 10:58:46","false","src:change error to warning when checking buffer

PR to change the error into a warning
is a good quick compromise
until a better limit is figured out

Signed-off-by: Kwasowiec, Fabiola <fabiola.kwasowiec@intel.com>",118,51,1
"thesofproject/sof","b7708182fbe5d9903c4f02b526d50d48426a6775","marc-hb","2022-11-01 03:13:59","false",".github: fail on errors and address space warnings in sparse output

sparse does not have a useful exit status so let's use 'grep' instead.

Fixes: #6317

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",89,53,1
"thesofproject/sof","52618530274e934aa2e7d3876e8d636db8f7ecdb","btian1","2022-10-24 09:08:56","false","Performance: remove perf avg macro and reduce print profiling logs

PERFORMANCE_COUNTERS_RUN_AVERAGE is not an independent macro,
it depend on: PERFORMANCE_COUNTERS, so it is duplicated,
remove this macro and use one macro to control this module,
also reduced unnecessary profiling log print.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",97,53,1
"thesofproject/sof","63b84974fed4fd00d8578f2ea93077f78a99aa44","singalsu","2022-10-26 15:31:11","false","Math: Rename macros INT_MAX and INT_MIN

The macro names in sof/math/numbers.h conflict with C library
so they must be renamed. New macro names are
INT_MAX_FOR_NUMBER_OF_BITS() and INT_MIN_FOR_NUMBER_OF_BITS().

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",93,53,1
"thesofproject/sof","367580f335281eae6dd6ec19674d6909a99a6fab","lgirdwood","2022-11-01 14:51:07","false","Revert ""topology2: cavs: Add chained DMA support for HDMI pipelines""

This reverts commit aed76b5a60bc29bfba51516b3e2e2c1b3308745c.",89,53,1
"thesofproject/sof","ef62a508930c37c6d625512057273a1c85db73e2","andrula-song","2022-10-31 01:49:04","false","Cmocka: EQ: Fix the errors lead to eq-iir test failure

Fix the mistakes in scripts which would lead to eq-iir
test failure.

Signed-off-by: Andrula Song <xiaoyuan.song@intel.com>",93,53,1
"thesofproject/sof","399fe1980b0b0c36384ef3495bc958d431c065f1","lyakh","2022-10-31 08:46:18","false","ipc: (cosmetic) remove 3 empty lines

Remove 3 redundant empty lines in ipc-common.c

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",91,53,1
"thesofproject/sof","ac7fb0060d5aeb02e0a8f2125114668e5efa33fb","bkokoszx","2018-11-19 10:40:05","false","rmbox: removing rmbox

fixes #127

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",39,6,0
"thesofproject/sof","5594ad3512830feaa478677718036ffabf51a454","RanderWang","2022-09-21 07:11:18","false","topology2: nocodec: add volume and mixer support

Mixer and volume (gain) are used in nocodec topology.

Signed-off-by: Rander Wang <rander.wang@intel.com>",96,52,1
"thesofproject/sof","c807d6844b535ff4ad90ac6429a2fef46f398cb4","kv2019i","2022-10-14 06:58:24","false","Revert ""topology2: nocodec: add volume and mixer support""

This reverts commit 5594ad3512830feaa478677718036ffabf51a454.",98,52,1
"thesofproject/sof","fbd4264b55f43fa284d17b35e453a2ab5a04bcca","RanderWang","2022-08-26 06:47:18","false","module: add module position update helper function

It will update position based on frame and format

Signed-off-by: Rander Wang <rander.wang@intel.com>",114,51,1
"thesofproject/sof","e09d85312158652239a4b99c48b63fcabc4d6960","marc-hb","2022-08-31 13:49:41","false","installer: remove byt..jsl platforms

Not supported in the main branch anymore, go to stable-v2.3

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",115,51,1
"thesofproject/sof","02c12691441993a2c2c36456d20808070faba71a","marc-hb","2022-09-01 00:05:32","false","Add new, convenience zephyr/docker-run.sh script

This makes it much easier to run commands in the
ghcr.io/zephyrproject-rtos/zephyr-build container.

Loosely based on scripts/docker-run.sh.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",116,51,1
"thesofproject/sof","b4c09d769e5c88d32ea8df0035da415b3d3fd907","singalsu","2022-08-29 13:18:33","false","Math: FFT: Fix possible null pointer reference

Cppcheck finds this issue

src/math/fft/fft_16.c:23:27: warning: Either the condition '!plan'
is redundant or there is possible null pointer dereference:
plan. [nullPointerRedundantCheck]
 struct icomplex16 *inb = plan->inb16;

There's same issue with inb and outb in both fft_16.c and fft_32.c

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",114,51,1
"thesofproject/sof","40166c699b1216aea726c9aa6bab407190431325","singalsu","2022-08-29 13:21:43","false","Math: FFT: Fix possible right shift by negative

Cppcheck found this issue:

src/include/sof/math/fft.h:133:51: error: Shifting by a negative
value is undefined behaviour [shiftNegative]
  output->real = sat_int16((((int32_t)input->real >> n_rnd) + 1) >> 1);
                                                  ^
The case n == 0 need to be handled with the upper if branch non-rounded
shift version.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",113,51,1
"thesofproject/sof","e1d2b8d1a3c08f295b9a7423f398a9fc5065300b","MingJenTai","2022-08-29 02:17:22","false","Fix RTNR library naming

It was a typo while adding libutil.a to CMakeLists.txt. 
This commit unifies the naming with other platforms.

Signed-off-by: Ming Jen Tai <mingjen_tai@realtek.com>",113,51,1
"thesofproject/sof","5ff35157dde5c3051c2fcc8c35c547786d913866","marc-hb","2022-08-25 09:20:08","false",".github: build and run testbench with Ubuntu 22.04

Good bye old bugs, hello new bugs.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",112,51,1
"thesofproject/sof","b570b800dfb04b62f10cd18cfc60213fd3836646","jxstelter","2022-08-24 10:35:09","false","module adapter: pass config size to module for ipc4

IPC4 SOF_IPC4_MOD_INIT_INSTANCE provides size of the configuration
blob for the module. This size should be passed down to module adapter
and forwarded to module.
There are several reasons for using it:
- consistency with IPC3 flow;
- need for passing the size to IADK loadable modules;
- possibility to graceful failure in case of configuration inconsistency.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",111,51,1
"thesofproject/sof","c92bb1e23cb9c9d08cc4406572fcc335de4b0b5b","dnikodem","2022-08-16 08:28:16","false","ipc4: remove report dsp properties to host driver

The ADSP properties are obsolete and not using by host driver so can be
removed.

Signed-off-by: Damian Nikodem <damian.nikodem@intel.com>",113,50,1
"thesofproject/sof","4dbfe15809c9765c1f3a7fb0f12c0e308dee32b3","dbaluta","2022-08-24 09:13:26","false","platform: imx: Set PLATFORM_DCACHE_ALIGN to 32

Ideally PLATFORM_DCACHE_ALIGN should be equal with DCACHE_LINE_SIZE,
but on i.MX dcache line size is 128 and it is too big for XTOS based
memory allocator.

See commit 8354454b4df0 (""platform: imx: Fix PLATFORM_DCACHE_ALIGN"")

On the other hand the current value which is 4 doesn't work well with
Zephyr.

So, increase the PLATFORM_DCACHE_ALIGN to 32 which works well for XTOS /
Zephyr.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",111,51,1
"thesofproject/sof","0b18ca82ac0b13f49701b5f47d9b12d974a7ddc9","MingJenTai","2022-08-19 07:25:50","false","rtnr: Modify used static libraries for MT8195

With the version released in 20220809, some libraries are removed 
or renamed.

Signed-off-by: Ming Jen Tai <mingjen_tai@realtek.com>",112,51,1
"thesofproject/sof","12451fe5b83c5f0137d8639df5f7c85c73b8ec6a","marc-hb","2022-08-25 09:21:19","false",".github: testbench: stop using container to build test topologies

Ubuntu 22.04 has ALSA 1.2.6 without ASRC failure #2543

Building in the container is much slower and updating the container is
also very time-consuming. Must be used only when really required.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",112,51,1
"thesofproject/sof","5135e7e2611dd1a6dfab0e17cad3dc6d876b6af9","marc-hb","2022-08-25 09:52:22","false",".github: testbench: apt get libasound2-dev

Incoming topology re-org PR #6009 adds a new dependency on alsa headers.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",112,51,1
"thesofproject/sof","b7345b168d2cf9fb24973a9236e9eed7f9691814","RanderWang","2022-06-30 08:48:52","false","ipc4: add basic ipc4 support in selector

Although this patch doesn't support large_config_set|get and
corresponding per-channel process, it can support simple usage
of selector and support capture applications like voice recoder,
zoom on windows platform. It will be used for WOV development
in recently.

Signed-off-by: Rander Wang <rander.wang@intel.com>",110,49,1
"thesofproject/sof","d855fbfe7c878999ef6bc352a5c410e454be4d59","marc-hb","2022-01-26 00:12:55","false","Remove unconditional ""(1 || verbose)"" debug hack in cavs25

This is especially a problem considering the -v option outputs non-ASCII
garbage which can break some automation, see issue #86

Fixes commit db40934e57aa8 (""cavs: add support for cavs2.5 code
signing"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",104,44,1
"thesofproject/sof","3eaf974081f33acbc039e7bd88f69c61d49414e6","andrula-song","2022-01-19 04:33:22","false","audio: volume: optimize volume component with HIFI3

Processing continuous data. Asking a 8-byte aligned memory
to store volume gain 4 times, using 2-way or 4-way pipeline
operations of xtensa intrinsics. This method can reduce about
40% MCPS than the original one.

Signed-off-by: Andrula Song <xiaoyuan.song@intel.com>",113,44,1
"thesofproject/sof","6c4faa1b9038fe3a233ee845cc4095ee7fff6188","aiChaoSONG","2022-01-27 06:02:02","false","topology2: use different SSP MCLK for different platforms

Different platform uses different SSP MCLK frequency,
this patch applies different MCLK for different platform
for cavs-nocodec topology.

The MCLK frequencies are aligned with topology1.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",105,44,1
"thesofproject/sof","40d2f66883677b14a7aba9c92629e8ed959dc4b5","ranj063","2022-01-27 17:50:34","false","codec_adapter: cadence: demote error message to warning when return code is not fatal

When the return code is non-fatal, demote the message to a warning.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",103,44,1
"thesofproject/sof","361fbf4504d590856313c0957ef0c62955bbc954","marc-hb","2022-01-25 02:15:38","false","zephyr/cmake: remove obsolete cmake 3.12 version test

Zephyr requires CMake 3.21 and SOF requires 3.13, see
commit a0acad341455 (""CMake: require version 3.13"")

Fixes commit 4b2edf8eed56 (""zephyr: wrapper: complete zephyr support for
working audio"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",107,44,1
"thesofproject/sof","49d4bf343712983a33f22955896b0f261c5c3e90","bardliao","2022-01-26 06:41:54","false","topology2: cavs-sdw: cavs-nocodec: add S32 format

We do support 32 bit format. So add S32 to pcm_caps.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",104,44,1
"thesofproject/sof","1c6ae93d926d6b8b11fe9016c611310f374b9c72","lyakh","2022-01-06 14:39:39","false","platform/zephyr: use an OS call for time stamps

On generic Zephyr platform case, use an OS timer call to get a time
stamp.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",115,43,1
"thesofproject/sof","58d355196041d6c79300b76067f535f14ac3b4b1","marc-hb","2022-01-14 05:16:56","false","version.cmake: more robust logging of the current git commit and parents

execute_process() runs in the current directory of the process invoking
cmake. This can be completely outside the git repo.

Fixes commit a5899812b7f5 (""version.cmake: don't trust CI to record time
and versions and log ourselves"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,43,1
"thesofproject/sof","befc3d9a6169bae8aa071bc4b7656f2063fa96f6","lyakh","2022-01-11 11:32:03","false","lib: use 32-bit assignments for memset()

SOF loves memset(). It takes great care to 0-initialise buffers and
objects. And its memset() routine only sets one byte at a time.
Optimise it to use 32-bit assignments where possible.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",115,43,1
"thesofproject/sof","5a1bd4682ef04689c9d32789d6b8590550d79442","lkoenig","2021-12-08 09:31:38","false","mux: Change iterator type to uint32_t

uint8_t iterator does not work for period size above 256 frames.
Using large buffers (>5ms @ 48kHz) without this patch results
in the copy being an infinite loop.

Signed-off-by: Lionel Koenig <lionelk@google.com>",123,42,1
"thesofproject/sof","d8c9f121a109a53c369dd196081c832d47c397c9","lyakh","2021-11-19 10:36:53","false","ll_schedule: don't adjust periodic tasks to earlier than in a period

Current logic in schedule_ll_domain_set() checks a newly submitted
periodic task if it has to be scheduled before an existing one.
However, when doing this the algorithm might schedule the new task a
whole period earlier than would normally be acceptable. Fix this by
adding the missing period delay.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",129,42,1
"thesofproject/sof","70358b7874b9950d7a9199db24f91b02ca408c5a","lyakh","2021-11-30 11:44:48","false","pipeline: set status to ACTIVE on all connected triggered pipelines

This fixes a problem with pipelines, connected over a demultiplexer.
In such cases one of pipelines keeps an inactive status and
terminates during the next scheduler run after a START or a RELEASE.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",131,42,1
"thesofproject/sof","7aa588667cd7e56ef9e0227de5eb8a609859b08f","keyonjie","2021-10-14 04:39:41","false","edf_schedule: don't assert if there is no extra task to run

There could be no more EDF task to be run if the last one in the list is
finished, we don't need to assert in this case.

If the next EDF task gonna be scheduled, interrupt will be generated
again by calling to schedule_edf() in schedule_edf_task(), so it should
be safe to remove the schedule_edf_task_running() in no pending task
scenarios.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",123,40,1
"thesofproject/sof","60c5e50a874d070278daff3a5354cc62c6ac8820","RanderWang","2021-11-03 06:36:09","false","ipc4: copier: invalidate data cache for memory window

Attenuation is stored in memory window by host driver
and we need to invalidate data cache.

Signed-off-by: Rander Wang <rander.wang@intel.com>",125,41,1
"thesofproject/sof","ace301db9ce19db167573b676197e6eb4cf36381","keyonjie","2021-11-12 09:56:40","false","cavs-ipc: remove the superfluous message sending

The DSP->Host messages are sent in the EDF main task already, the one
more try in the IPC handler is superfluous, remove it.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",127,41,1
"thesofproject/sof","810838da2e6fccc352f43205d07d22216bca8cb4","RanderWang","2021-11-03 06:32:35","false","ipc4: report ALH support to host driver

Host driver checks ALH capability to enable sdw.

Signed-off-by: Rander Wang <rander.wang@intel.com>",125,41,1
"thesofproject/sof","81c82795902eecd6655b705f1079e28ea8708f25","ujfalusi","2021-11-09 02:33:34","false","checkpatch: get default codespell dictionary path from package location

The standard location of dictionary.txt is under codespell's package, on
my machine atm (codespell 2.1, Artix Linux):

  /usr/lib/python3.9/site-packages/codespell_lib/data/dictionary.txt

Since we enable the codespell by default for SOF I have constant:

  No codespell typos will be found - file '/usr/share/codespell/dictionary.txt': No such file or directory

The patch proposes to try to fix up the path following the
recommendation found here:

  https://github.com/codespell-project/codespell/issues/1540

Mainline commit:
0ee3e7b8893e (""checkpatch: get default codespell dictionary path from package location"")

Link: https://lkml.kernel.org/r/29e25d1364c8ad7f7657cc0660f60c568074d438.camel@perches.com
Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>
Acked-by: Joe Perches <joe@perches.com>
Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>",128,41,1
"thesofproject/sof","fa6365b0add402a0d61dd6cda97323e47219092e","bardliao","2021-11-04 01:35:06","false","Topology2: tokens: add token for low power mode

Adding low power mode token

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",125,41,1
"thesofproject/sof","b87352c754ffaecbdce3c1978034d77356db03a2","abonislawski","2021-09-21 06:37:09","false","idc: add idc_restore

Restores idc interrupt if all is ready

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",118,40,0
"thesofproject/sof","8810101a260c8d649711fb3e2672e19929494cb4","RanderWang","2021-11-03 07:14:45","false","ipc4: handler: return correct error value

Current some ipc helper functions return error type of ipc3, now
convert it to ipc4.

Signed-off-by: Rander Wang <rander.wang@intel.com>",125,41,1
"thesofproject/sof","15c933596209b908bfadbbff54e87447b3d1c803","bkokoszx","2021-10-20 20:14:31","false","scheduler: allow scheduler_free functions to disable only irqs

This commit:
- adds flags argument into scheduler_free function pointer in
  scheduler_ops struct;
- adds SOF_SCHEDULER_FREE_IRQ_ONLY flag, which indicates to disable
  only interrupts in scheduler_free() functions.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",124,41,1
"thesofproject/sof","d80d70bf47bfe8292956065e8a2425548b1e0652","marc-hb","2021-09-27 20:24:12","false","xtensa-build-zephyr: fix submodules download hack when starting from west

By adding the missing remote to thesofproject

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",120,40,0
"thesofproject/sof","ef37ebaabfc9f7a8c1587a5ea28983cb573512e5","kuanhsuncheng","2021-08-27 06:21:05","false","configs: mtk: add default config for mt8195

Add default config for mt8195 platform.

Signed-off-by: YC Hung <yc.hung@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",119,39,0
"thesofproject/sof","4d4fd8c4267bebbc25e8dd4f5ef277b11e16b5eb","marc-hb","2021-08-25 16:08:58","false","xtensa-build-zephyr.sh: build rimage later, just before it's needed.

We care about other build errors more.

This also makes it easier to test locally that ""west build"" does not
depend on rimage to create zephyr.elf

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",122,39,0
"thesofproject/sof","dd14583c9265d63020389b70727c3c5ce605de3c","ranj063","2021-08-12 03:37:11","false","drivers: Intel: IDC: make core power down IDC blocking

make the core power down IDC blocking to ensure the core is
actually idle before notifying the host.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",117,38,0
"thesofproject/sof","e8092431122c53336f882fadf46b6547974af4d6","RanderWang","2021-08-12 08:14:28","false","component: enhance macro definition of module initialization

Currently we can only define one moudule in a file. But
for IPC4 case, some modules share a large part of code,
so they will be defined in one file. to support this
case, add module name to differentiate local staic module
declaration.

Signed-off-by: Rander Wang <rander.wang@intel.com>",118,38,0
"thesofproject/sof","cd1bb03a5a2246663eabd7b33579bc0c482bf733","lrgirdwo","2021-08-06 07:56:50","false","ssp: make the trigger(START|STOP) wait delay in consumer mode only.

Git comments indicate the delay is for consumer mode only. Lets not delay
in SSP clock producer mode.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",116,38,0
"thesofproject/sof","9edfcfc03622e8dd6f8b76a9aabc49f572f1498b","cujomalainey","2021-08-10 14:04:10","false","Volume: delete invalid check

The ch < 0 check is invalid since the channel type being
passed is unsiged.

Signed-off-by: Curtis Malainey <curtis@malainey.com>",117,38,0
"thesofproject/sof","ceabf319e119827a2ab312f6b78a75569773a41b","lyakh","2021-07-29 06:48:30","false","compile: use __attribute__((fallthrough)) with GCC

Fix compiler warning by using the ""fallthrough"" attribute with GCC
as well.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",108,38,0
"thesofproject/sof","ffe4d594aedca042ca8936d44e87bb131a985dba","dbaluta","2021-08-03 09:59:49","false","topology1: pipe-eq-fir-volume: Fix ControlBytes section name

ControlBytes section name is given by DEF_EQFIR_COEF macro.
Otherwise, using pipe-eq-fir-volume-playback.m4 in a topology results in
a compilation error.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",111,38,0
"thesofproject/sof","5a42c023d2d1705b594566643ce6cbf95e2660e7","ranj063","2021-08-04 18:45:29","false","topology1: make all cavs nocodec topologies dynamic

All cAVS platforms can use dynamic pipelines with nocodec topology.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",113,38,0
"thesofproject/sof","e2fc7082e1be42694e868e78430a5a94821c004b","dbaluta","2021-08-02 14:05:59","false","topology1: Add CHANNELS_MIN macro for playback pipeline

Add macro to allow configuration of min channels in PCM_CAPABILITIES.
The default behavior is not changed.

So far min channels was hardcoded to 2 for pipe-volume-playback but we
need mono for i.MX8ULP configuration.

Notice that we need to use the local macro TCHANNELS_MIN because we
don't want to modify the value of CHANNELS_MIN macro outside
of sof/pipe-volume-playback.m4 file.

Doing so will cause unpredictable behavior for next pipeline
definitions.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",109,38,0
"thesofproject/sof","1e037398a50282f44ef72ba72083c34a34d65a43","lyakh","2021-07-22 14:24:24","false","zephyr: ll-domain: set .next_tick into the future

.next_tick is updated on each timer run to the time of the next run.
Instead the current version sometimes only updates it to the current
time. Fix the update condition.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",96,38,0
"thesofproject/sof","9410e84de256214ae1bdd8dda5381d77aca29c58","plbossart","2021-07-27 22:02:39","false","Revert ""trace: add _log_nodict() and enable DMA trace for Zephyr""

This reverts commit 57ee04f2d9312968a8e11fd916195bbacd667180.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",103,38,0
"thesofproject/sof","d38c3c39129149c1e0adf3501b7f950ba3f0611c","RanderWang","2021-07-30 01:31:58","false","topology2: add hda volume pipeline support for ipc4

This is for generic hda machine driver. Dmic is
not included since it is been developing. The gain
module in ipc4 has the function of volume component
in ipc3 and we use it to control volume.

Signed-off-by: Rander Wang <rander.wang@intel.com>",108,38,0
"thesofproject/sof","884bfdf1255227931084685fd49eb60b76b00ce8","RanderWang","2021-07-27 08:53:15","false","topology2.0: add some basic class definitions

Signed-off-by: Ranjani Sridharan <ranjani.sidharan@linux.intel.com>
Reviewed-by: Rander Wang <rander.wang@intel.com>",103,38,0
"thesofproject/sof","6daab998e6682799617908bc6b5fd0dc7969fa25","plbossart","2021-07-30 17:17:44","false","Revert ""pipeline: trigger START from the task context""

This reverts commit 9a7a5ce17dcb339e3fd667c8f12dd50db13afe31.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",108,38,0
"thesofproject/sof","53718867df8501f745795e674ca92cf1c16443e5","dbaluta","2021-05-11 10:10:49","false","topology: imx8mp: Add compress decoding pipeline for i.MX8MP with aac/mp3 codecs

Add topology to support compress playback for MP3/AAC
on i.MX8MP with wm8960 codec.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",82,35,0
"thesofproject/sof","64be6a65784a4af19debd0bbf3aeb3dd75deb33a","dbaluta","2021-02-03 17:01:09","false","topology: imx8: Add compress decoding pipeline for i.MX8/i.MX8X with aac/mp3 codecs

Add topology to support compress playback for MP3/AAC on i.MX8/i.MX8X
with wm8960 codec.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",70,32,0
"thesofproject/sof","2ebe36aeddfcad4e6e5dd46fe0be5e166d156716","RanderWang","2021-07-27 08:57:05","false","topology2: add volume support for ipc4

Volume is supported by gain module in ipc4. We need
to set curve_type, curve_duration and init_val for
this module.

Signed-off-by: Rander Wang <rander.wang@intel.com>",103,38,0
"thesofproject/sof","b28b9939dcd73fa44a00679c95b13b51f3b32c43","sunilkumardommati","2021-07-26 13:21:30","false","fixing incorrect data offset in ri_manifest_sign_v1_5",100,38,0
"thesofproject/sof","daa122f7c227ec32178fc0a4eef5eee68e09b8c8","iuliana-prodan","2021-07-21 13:51:58","false","zephyr: imx: use ll_schedule instead of zephyr_ll

For now, zephyr_ll is limited to timer_domain.

For i.MX we use dma_domain, so keep the ll_schedule
from SOF, until we extend the zephyr_ll for DMA_IRQ.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",94,38,0
"thesofproject/sof","0a4a94f35c9951b76c568cb01374e34bdc1300ac","dbaluta","2020-04-08 18:20:05","false","drivers: imx: sdma: Use shorter name for descriptor

s/descriptor/desc because makes lines shorter thus the code
cleaner and easier to read.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",82,22,0
"thesofproject/sof","f1109e2b70417c8288ee5092dc735ca5fe31a47b","jajanusz","2020-04-10 11:21:16","false","audio: src: remove dead assignment

Reported by clang's scan-build.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",82,22,0
"thesofproject/sof","8df84ab56d2a5137329a3525001aaedc080930a8","mh12gx2825","2020-04-15 18:58:57","false","audio: remove extra blank lines

Remove extra blank lines before and after curly braces. Problem
reported by checkpatch script.

Signed-off-by: Deepak R Varma <mh12gx2825@gmail.com>",82,22,0
"thesofproject/sof","6d5b7cf12876d4b6ebad02955409a4ed16f7da8d","abonislawski","2020-03-10 09:54:42","false","arch: add alternate reset vector

 move lp sram heaps to put alternate reset vector sections at the beginning
 add AltBootManifest section with entries to unpack
 alternate reset vector asm and cmake link
 unpack lpsram sections in master core boot

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",85,21,0
"thesofproject/sof","0a57497bc89e06e5541ffe503f76e72474594ce7","tlauda","2020-04-09 09:25:05","false","schedule: remove unused header

Removes inclusion of unused header.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",81,22,0
"thesofproject/sof","ac536b3776b56cc85efa07616810a28354faec75","abonislawski","2020-03-17 14:24:09","false","pm_runtime: add trace error

trace_power_error was not defined

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",76,21,0
"thesofproject/sof","8aac5d4c2c78b67116a1b823a399acabf1a4d0a5","dbaluta","2020-04-07 19:05:42","false","drivers: imx: irqsteer: Reduce irqsteer child nodes

On i.MX8MP irqsteer instance has only 3 output lines. So, reduce
the number of child nodes to 3.

Also, IRQSTEER on i.MX8MP has fewer input interrupts than on
i.MX8QM/i.MXQXP.

It has 160 input interrupts grouped as 5 lines of 32 interrupts, who
then are mapped on 3 output lines each with 64 interrupts.

The special case here is line 0 which holds only the first 32
interrupts. For this reason, we need to do:
	- start with first child at 0 instead of 32, because interrupts
	starting at 32 should be in a different child cascased
	controller.
	- fix formula for computing MASK/SET/STATUS registers
	- fix irqs register num.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",90,22,0
"thesofproject/sof","40e68e21dc9c2bc463d6a6afdf43068d605aa872","lyakh","2020-03-31 12:37:02","false","topology: add a ""core"" parameter to the W_PCM_CAPTURE() macro

This places all SectionWidget.PCM*C topology widgets, created by
the W_PCM_CAPTURE macro on the same core, on which the respective
pipeline is scheduled.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",68,22,0
"thesofproject/sof","fac1c7961070c8b00b6a86c88ce1d14806f76d87","lyakh","2020-03-31 14:56:50","false","topology: add a ""core"" parameter to the W_EQ_FIR() macro

This places all SectionWidget.EQFIR* topology widgets, created by
the W_EQ_FIR() macro on the same core, on which the respective pipeline
is scheduled.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",69,22,0
"thesofproject/sof","5e3bc9c11c343a9c0d481a78a88d4f2f07eb5431","marc-hb","2020-04-04 04:16:51","false","tools/test: silence alsatplg in tlpg-build.sh unless VERBOSE=1

With this commit:
                  ./scripts/build-tools.sh -t -f | wc -l
     525
VERBOSE=anything  ./scripts/build-tools.sh -t -f | wc -l
  137030

This a followup to commit aa6c0f2ad11f (""topology: cmake: silence super
chatty alsatplg unless VERBOSE=1"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",80,22,0
"thesofproject/sof","c4701c7664d4dbbdf7ba25af21ff5c09057dc1fe","ktrzcinx","2020-03-27 09:43:15","false","rimage: Align function arguments in rimage.h

Code formatting should be consistent and function arguments
should be aligned to opening parenthesis.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",67,22,0
"thesofproject/sof","714556e59f0e0cbbddb347d8b29c563110e645e2","lyakh","2020-03-13 11:06:25","false","topology: add a new SOF_TKN_COMP_CORE_ID token

We need a way to explicitly place components on specific DSP cores.
Add a SOF_TKN_COMP_CORE_ID word token for that.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",82,21,0
"thesofproject/sof","d65495e984ec922ed7bb3d25de26f6d5ff624b9f","fredoh9","2020-04-03 01:41:39","false","topology: set DMIC pipe with eq-iir with 40 Hz highpass

For headset playback or capture, default pipe is volume. If The high pass
filter is required to prevent HDA codec headset glitches, it can be set by
HSMICPROC=eq-iir-volume. It use use 40 Hz high pass filter with +0 db
boost. If there is DMIC, this set default pipe as eq-iir, which use
the same 40 Hz high-pass filter too. For DMIC16K, 40 Hz high-pass for 16khz
version filter is used.

Default coefficient for FIR/IIR is changed fr m coef flat to coef pass.
Pass configuration has the advantage of low system load.
    eq_fir_coef_flat.m4 to eq_fir_coef_pass.m4
    eq_iir_coef_flat.m4 to eq_iir_coef_pass.m4

Below pipe files are renamed for naming convention,
    pipe-eq-volume-playback.m4 -> pipe-eq-iir-eq-fir-volume-playback.m4
    pipe-eq-capture-16khz.m4 -> pipe-eq-iir-volume-capture-16khz.m4
    pipe-eq-capture.m4 -> pipe-eq-iir-volume-capture.m4

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",77,22,0
"thesofproject/sof","afe41bcd53439294bd2ea4cac6dfbf8afdeaf40a","mrajwa","2020-04-01 10:32:32","false","kpb: simplify calculation of buffered data

This patch reworks the calculation of buffered data.
NOTE! We only keep record of buffered data up to
the size of history buffer as there is no usecase
beyond that.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",71,22,0
"thesofproject/sof","b4e8b1e471aeb0529f10581fa81fe2c2b5739b24","dbaluta","2020-04-05 19:23:35","false","drivers: imx: sdma: Reduce level of logging for sdma_start

This is not really an error.

Reported-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",80,22,0
"thesofproject/sof","44f1bc842860545ccf32a7b997125295639d2007","mrajwa","2020-04-01 12:20:28","false","kpb: change error message to warning

This patch changes the error message caused by
no bytes to be buffered from ""error"" to warning
as this is not crirical error.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",71,22,0
"thesofproject/sof","c886e0a1b3bd74dabb556ee3549fd85583fe636c","mrajwa","2020-04-01 09:05:26","false","kpb: add new struct history_data

This patch adds new struct called ""history_data""
which contains all variables related to
history buffer namely, its size, amount of free and
available data as well as address of current write
buffer (history buffer is a collection of smaller
buffers)

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",71,22,0
"thesofproject/sof","06874423baeb617e4632b9ba5f9b119aeadad69d","mrajwa","2020-04-01 10:19:30","false","kpb: calculate free space in history buffer

This additional variable says how much data can be
written to history buffer and won't cause overwrite
of data staged for draining. It is important to realize
the history buffer is circular and its data gets
overwrite all the time. So *free* in this case doesn't
mean ""amount of bytes before buffer is full"". History
buffer is *full* 99% of the time. However before the
draining starts we ""freeze"" history buffer data
so new samples can be written only if:

HISTORY_BUFFER_SIZE - HISTORY_DEPTH > 0

The result of above subtraction is what we call ""free""

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",71,22,0
"thesofproject/sof","9eb5a8dc3eca30fce90129c6ea87755536065df4","mrajwa","2020-04-01 12:37:53","false","kpb: change order of members in comp_data struct

This patch changes the order of members in comp_data
struct to improve memory access for related data.
So now data that are commonly used together like *state*
and *state_log* are put next to each other so fewer cache
reads are needed.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",71,22,0
"thesofproject/sof","1191b6ca4081d2c1fa647a69edbbe2d4ac69483f","mrajwa","2020-04-01 12:30:03","false","kpb: move update of buffered data to higher layer

This patch moves the update of buffered data during
draining from buffering function to the caller
function.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",71,22,0
"thesofproject/sof","1ecf435d137864b1d1d1a95521611559444a8c72","xiulipan","2020-03-30 08:45:13","false","CI: travis: Add host-testbecnh

build test topology.
builg host-testbench
Test with host-testbench.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",67,22,0
"thesofproject/sof","beea8e56fb1c9aa582ed17b61bc0be108f679698","xiulipan","2020-03-26 03:27:30","false","ipc: cc_version: use fixed length for CC_DESC

There is a bug in the Cadence XCC compiler that give us different
linkage section sizes for flex length struct sof_ipc_ext_data in
ELF file compared to GCC version. And there are appending struct
in the same ELF section, this will bring wrong offset for those
struct binary in ELF file.

Example:
When the CC_DESC is "" RG-2017.8-linux"", we should have struct
length for 0x50 in header size, but the binary length in ELF file
is 0x4c. When the CC_DESC is "" RG-2017.8-win"", size are both 0x4c

All existing compiler description has length less than
32 bytes. So use a fixed length 32 in this structure.

ABI version changes to 3.15.0

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",63,22,0
"thesofproject/sof","8dbbbf0329eba01f995dd8fea1a16e207dd878a8","marc-hb","2020-03-26 04:46:10","false","test: fix mixer_test.c:comp_register() 'uninitialized err' -Werror

Fixes:

  error: 'err' may be used uninitialized in this function
                           [-Werror=maybe-uninitialized]
  if (err)
     ^

As I found nothing in the entire code base checking the return value of
comp_register() (the real function seems to always succeed), I also
simplify the main path and pass through the value returned by
memcpy_s().

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",64,22,0
"thesofproject/sof","adc7b1a6270bea954f05b79804d84c862cd0efdb","yongzhi1","2020-03-27 17:15:22","false","pipeline: remove unneeded function declarations

Remove unneeded function prototypes in the header file.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",66,22,0
"thesofproject/sof","93dbbe2ca69ba89c10a1d051c09e3bc5b6b1ec46","dbaluta","2020-03-25 18:14:52","false","drivers: imx: sdma: Propagate some config info to channel

In particular we need to propagate is_scheduling_source and direction,
because later the fields from channel are used.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",64,22,0
"thesofproject/sof","ee45ce8b98b233339ff2b17e3901bc7e9d4119c9","PayalKshirsagar","2020-03-23 13:09:30","false","src: ipc: avoid NULL comparison

Replace NULL comparisons in the file to get rid of checkpatch warning.

Signed-off-by: Payal Kshirsagar <payalskshirsagar1234@gmail.com>",65,22,0
"thesofproject/sof","8320376ab42c97cb224457a64c97fa188e926ebb","singalsu","2020-03-25 14:02:55","false","Testbench: Fix segfault in pipeline_new() in topology parsing

This patch fixes the crash by adding initialize of sof->pipeline_posn
into pipeline initialization code.

Also the in load_pipeline() function the pipeline is initialized
to zeros to prevent random values to be passed in not set
struct fields. It didn't fix anything but makes debugging of crash
easier.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",66,22,0
"thesofproject/sof","5004d0fe1e74a70f64fcea1e1e51b1c8d83b9245","aiChaoSONG","2023-09-19 01:09:03","false","zephyr.yml: remove ipc option for zephyr build

For TGL and TGL-H, IPC4 is the default build config,
remove the '-i IPC4' option as it is not needed
anymore.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",20,64,1
"thesofproject/sof","7b137b4056bd6e87f5d9234ed89cb2e917e4f3cf","ranj063","2018-06-12 18:31:06","false","dma: fix comment for num_channels_busy

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",1,0,0
"thesofproject/sof","eae636c4fffa16e4bb8f5c9e0c54db44e36f5c8b","sebcarlucci","2020-03-11 22:33:39","false","sof: dcblock: Add DC Blocking Filter Component

This change provides a DC Blocking Filter (DCB) component. A DCB is a
high-pass filter used to remove any DC offset from a signal. The
coefficients for the component can be set individually for each channel.

Currently, only the following formats are supported:

s16_le
s24_le
s32_le

Signed-off-by: Sebastiano Carlucci <scarlucci@google.com>",83,21,0
"thesofproject/sof","3ce54df7b8e211369fcb8b2a92280faa54bac025","singalsu","2020-03-23 10:16:33","false","Tools: Test: Audio: Add double quotes to shell scripts

This patch adds the double quotes to shell scripts to avoid fails
with arguments or shell variables when there are space characters.

The processing components run scripts are all edited for better
structure with functions usage() and main() and with local variables
within functions.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",65,22,0
"thesofproject/sof","d0dbfd62caea406eda6faeec814b9309b12a87ac","CBala21","2023-06-08 11:23:45","false","topology1: add support for rt1308 ssp amp + HDMI-in capture.

Adding support for rt1308 ssp amplifier and HDMI-in capture via I2S.

Signed-off-by: Balamurugan C <balamurugan.c@intel.com>",46,60,1
"thesofproject/sof","e3216be87dfd22acf167dcf085c2629efd5b3df1","abonislawski","2020-03-18 15:47:09","false","probe: add uuid to probe task

One of schedule_ll PRs added uuid without changes in probes
and probe build failed, this commit will fix it
Fixes: 0529c141f40b (""tasks: add uuid based identification for tasks"")

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",70,21,0
"thesofproject/sof","74e626a7bea0625f4263a645e8414b143f9aa5c2","libinyang","2020-03-11 05:31:29","false","topology: add pipe-highpass-switch-capture pipeline

This patch adds the highpass capture pipeline which enables the volume
and switch controls. In the switch control, it enables capture LED
controlling.

Signed-off-by: Libin Yang <libin.yang@linux.intel.com>",84,21,0
"thesofproject/sof","3bccc18036e98f55d5e15832afff02a3052cfd3a","lyakh","2020-03-13 11:10:00","false","topology: fix a copy-paste error in comments

Replace multiple occurrences of a copy-paste error in comments in
bytecontrol.m4: CONTROLMIXER should actually be CONTROLBYTES.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",82,21,0
"thesofproject/sof","c84706e3f8f9281409235e35d210546b111e1547","marc-hb","2020-03-19 00:42:31","false","check patch: ""top_of_sof_tree()"" so it works out of the box

Adjust top_of_kernel_tree() function to SOF so invoking
./scripts/checkpatch.pl works out of the box and doesn't require
figuring what's going on and the existence of the --no-tree option which
sof-ci invokes ""behind the scenes"".

This instead of failing with:

  Must be run from the top-level dir. of a kernel tree

Compared to --no-tree, this is also enables a couple extra checks like:
WARNING: use relative pathname instead of absolute in changelog text

PS: the space between check and patch is here to... defeat checkpatch
itself. It apparently doesn't expect any change to itself.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",68,21,0
"thesofproject/sof","b5bb895e579e491a2261830acaf4e45333952a8b","ktrzcinx","2020-03-23 07:05:32","false","tools: logger: Add 'error: ' prefix to messages in log_err function

After change error messages will be more consistent and easy to grep.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",66,22,0
"thesofproject/sof","ff88cd03b7746fa7488a8dc76898c2991de03c77","marc-hb","2020-03-20 03:47:37","false","test/kpb: fix tests[1] array out of bounds

As reported by gcc.

Fixes: 0b279e06bc1d. This is a partial, one-line revert of that commit
that decreased the size of this array for no obvious reason.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",68,22,0
"thesofproject/sof","5550a5f6768d52b9793f964e5bdd522452012db4","tlauda","2020-03-20 12:53:19","false","timer: increase next timer set in case of delay

Increases value of next timer set in case there is
a delay in tasks execution. Value of 1 is too small
to guarantee that the next interrupt will be triggered.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",67,22,0
"thesofproject/sof","10a72a42a07995e2c441beb4d1551807a4f76a5f","crazoes","2020-03-23 14:49:59","false","src: ssi-spi: Use !x instead of NULL comparison

If ""x"" is compared to NULL, use ""!x"" instead of it, so as
to maintain the coding style.

Signed-off-by: Shreeya Patel <shreeya.patel23498@gmail.com>",65,22,0
"thesofproject/sof","dc44384ea04935a660f9e66f7a92212290fe1400","singalsu","2020-03-16 17:19:34","false","Testbench: Fix possible uninitialized use of variable ret

This patch fixes the read_samples_32() function in file component.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",79,21,0
"thesofproject/sof","d3cd604e2598de7d378f9c6227a771a3b6345ec3","mrajwa","2020-03-18 13:15:06","false","kpb: add missing initialization of new memory block

This patch initializes early the ""next"" pointer of
new memory block. This is important because if
further allocation fails (i.e due to not enough
memory available) this block will end up with missing
next pointer so every operatation on linked list of buffers
will likely fail (assuming there is no check for NULL pointer)

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",71,21,0
"thesofproject/sof","eaf3794105e5ad8a30b5afa8c470dc7029b677c9","singalsu","2020-03-19 11:34:47","false","DAI: Remove spinlocks for timestamping registers access

This patch removes the spin_lock() and spin_unlock() calls
from DMIC, HDA, and SSP driver code. The removal avoids a pipeline
stall issue that has been seen to happen in ASRC capture pipelines.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",68,21,0
"thesofproject/sof","25c1d0fef732d9f9ae9faf503e44016d355ccc75","singalsu","2020-03-18 10:16:51","false","Topology: BDW, BYT, CHT: Reduce buffer size max for media PCM

This change prevents the IPC error that happens if aplay or
speaker-test uses larger than 64 kB buffer size. The buffer
setting in PCM_CAPABILITIES() is now the same as for low latency
PCM.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",72,21,0
"thesofproject/sof","564bae412b4845712012680f05b1ae644bb87660","akloniex","2020-03-19 19:06:35","false","muxdemux: Properly assign processing function during mux_prepare() call.

Currently, after pipeline params propagation, mux/demux processing
function might not be properly set up, if current params mismatch
ones assigned with binary blob during instantiation.
Similar assignment was there originally, but was lost to the history.

Signed-off-by: Artur Kloniecki <arturx.kloniecki@linux.intel.com>",68,21,0
"thesofproject/sof","94290b1eaacd6753028a47a8d7464b45479a5c8e","mrajwa","2020-03-16 11:07:06","false","kpb: fix missing size of history buffer

This patch fixes missing history buffer size during
validation of host params.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",79,21,0
"thesofproject/sof","df6c637e8f14f0dcd3e6bde29373495b6c77e175","singalsu","2020-03-16 12:48:07","false","Topology: BYT: Adjust SRC pipeline for lower RAM consumption

This patch removes support for over 48 kHz sample rates and changes
scheduling to every 1 ms to save in buffers sizes. In pipe-pcm-media.m4
the buffers in the pipeline are reduced from 4 to 2 or 3 periods.
These changes should allow the media PCM to work in BYT platform.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",79,21,0
"thesofproject/sof","aba0bb20513903e494f7413a30ac23120f5f85f9","tlauda","2020-03-10 14:54:42","false","pcm_converter: fix loops condition

Fixes loops condition in most of the PCM conversion functions.
Number of samples is unsigned, so current condition caused underflow.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",84,21,0
"thesofproject/sof","30e6e9eb41b99fc50b3c18467a90494878c4d277","tlauda","2020-03-16 14:48:11","false","ipc: allocate correct msg size

Msg size should use its own structure's size.
Only payload should be allocated using passed one.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",79,21,0
"thesofproject/sof","fdd4050fca59a8d01bd4b62966f880a6722fd3bb","lbetlej","2020-03-09 14:02:53","false","cavs: clean up of bit setting macros in shim headers

The BIT() macro is used to replace explicit bit shifting in
Apollolake, Cannonlake, Icelake and Tigerlake shim headers.

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",85,21,0
"thesofproject/sof","0628363c47282faf9940369750e7166669b260b7","tlauda","2020-03-11 11:24:39","false","buffer: fix locking

Fixes buffer_lock function. We need to pass flags by pointer
to use it correctly later to restore correct interrupt level.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",81,21,0
"thesofproject/sof","d735532cb5aa869c541b450a7533c954c482c335","tlauda","2020-03-13 09:16:18","false","mailbox: add missing header

Adds missing header needed for size_t.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",84,21,0
"thesofproject/sof","cd9a0d378d188d6483d6d2dc9a06923ebb4a9534","tlauda","2020-03-13 09:54:09","false","mux: add missing buffer locks

Adds missing buffer locks to mux_copy function.
demux_copy has already had them before.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",83,21,0
"thesofproject/sof","496845984f3d2130903d1b8b232a22805e3367c7","abonislawski","2020-03-10 14:18:03","false","probes-app: build the app with sof tools

this will allow to build probe app from scripts/build-tools.sh

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",84,21,0
"thesofproject/sof","47420dc92c5e48fec50161e8b157a66b31cc9193","tlauda","2020-03-13 15:15:39","false","gdb: use mailbox_get_debug_base() macro

Changes ring buffer to use mailbox_get_debug_base() macro.
It points to the same memory region as previously, but it's
defined for all platforms.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",83,21,0
"thesofproject/sof","08efd08b7d38858825e2a86641499865b42bb1f2","tlauda","2020-03-16 07:48:33","false","sai: remove duplicated values

Removes duplicated values from expression.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",81,21,0
"thesofproject/sof","c42c64632acd2ddbb84bf927cbc62951c7749aa7","lbetlej","2020-03-09 14:07:28","false","cavs: align look and feel of cavs 1.8/2.x shim headers

Small clean up of shim headers is made to list registers
in the same order across Cannonlake, Icelake, Tigerlake shim headers.
Duplicating (within a header) registers are removed.

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",85,21,0
"thesofproject/sof","c596217ca5c405c5cf65a3b91267123e59645e29","tlauda","2020-03-06 09:20:06","false","dmic: fix log typos

Fixes typos in dmic_irq_handler logs.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",85,21,0
"thesofproject/sof","6cd8acc16a7789a919bb0dc4d5b05a3a734c4a24","ktrzcinx","2020-02-06 09:19:36","false","ssp: Keep SSP connected with DMA in pause state

When there is not enough time to wait for FIFO empty and we care about
data continuity - like in pause state - then SSP should be kept connected
with DMA in pause state.
Stop function has been updated to take action also on channels in
COMP_STATE_PAUSED state. After receiving COMP_TRIGGER_STOP,
component state should be set to COMP_STATE_PREPARE,
what is consistent with sof-docs.
Introduced changes have positive impact on glitches after
pause/resume sequence.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",78,20,0
"thesofproject/sof","30492d73f919bd925198dd234fb176f47900ee79","tlauda","2020-03-06 09:23:17","false","dmic: clear overrun bits

Clears overrun bits in case they're asserted.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",85,21,0
"thesofproject/sof","293dfe2469cb2f29895847cb3dd2bc831e3ea7c3","tlauda","2020-03-10 09:09:30","false","hda-dma: refactor xrun handling

Changes behaviour of HDA Link overruns and underruns handling.
Let's no longer stop the stream, but just report an error.
It might happen that just after the release buffer is still
full/not yet empty after the previous run, but it shouldn't
affect the data, since stream has been paused anyway.
Also adds additional bit to better reflect hardware registers.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",85,21,0
"thesofproject/sof","a30c1d0f45dd7913bf1a67bea316536468f1530f","ktrzcinx","2020-02-27 09:10:05","false","sof: Replace __attribute__((section(x))) to __section(x)

Use new standard in source code.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",75,21,0
"thesofproject/sof","d84629814b92172cadd995c0c32a90ba4e88e22b","ktrzcinx","2020-03-03 10:12:08","false","ipc: In channel ipc/channel_map.h remove dependency from sof/common.h

After introducing compiler_attributes.h it is possible to make
this dependence shorter.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",79,21,0
"thesofproject/sof","ab5be85cb993289b6ad174d28295f1ea19c62eec","constantinraducanu","2020-03-04 16:16:11","false","alloc: Add spaces around operator '/'

This commit adds spaces around the operator '/', fixing the checkpatch
error: ""spaces preferred around that '/'"".

Signed-off-by: Constantin Raducanu <raducanu.costi@gmail.com>",79,21,0
"thesofproject/sof","af8843d110556bf9056f722df7b4dfade28cb30c","xiulipan","2020-02-27 09:45:23","false","CI: travis: add host build

host build is missing during previous scripts refine.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",75,21,0
"thesofproject/sof","675c984b321d5b40fc213d33750d28fe7fabc56d","plbossart","2020-02-20 21:40:57","false","dw_dma: fix operator precedence warning

Fix cppcheck warning

[src/drivers/dw/dma.c:292]: (style) Clarify calculation precedence for
'&' and '?'

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",80,21,0
"thesofproject/sof","fda44df9bd02d555d7caffa8f64db8f0e89306bf","plbossart","2020-02-20 21:45:29","false","gpio: fix operator precedence warning

fix cppcheck warning:

[src/drivers/dw/gpio.c:38]: (style) Clarify calculation precedence for
'&' and '?'.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",80,21,0
"thesofproject/sof","865f964b28253a72cbed77242d1eb84ccef1cc24","dbaluta","2020-02-21 08:38:58","false","generic: dummy-dma: Remove commented code

This is a relict of an older implementation, remove it
to make code easier to read.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",80,21,0
"thesofproject/sof","9646cdad36859d9ce795df845127887beb04a6ff","bkokoszx","2020-02-20 13:27:25","false","eq_iir: remove unnecessary code in prepare() function

We do not have to rewrite source/sink frame_fmt. It has been set
in eq_iir_verify_params() function.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",84,21,0
"thesofproject/sof","53d35e49126612a819feace25de6cfd5bd609b44","mrajwa","2020-02-17 16:25:34","false","ut: add missing source file to build of KPB

This patch adds missing spinlock.c file to the build of
KPB component.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",85,20,0
"thesofproject/sof","55866f28ac40f2fb2dbfc282f45da38cf51c0366","bkokoszx","2020-01-08 18:14:58","false","comp: dai: implement dai_get_hw_params() function

Implement dai_get_hw_params() function for DAI
component in order to fetch hardware stream
parameters.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",71,19,0
"thesofproject/sof","bdc95775af7970a93d20ec2e12ce6f6e5b6640b9","bkokoszx","2020-01-14 21:54:27","false","component: add generic comp_verify_params() function

Implements comp_verify_params() function, which can be used in order
to set and update some of sink (playback) or source (capture) buffer
parameters with pcm parameters. There is a possibility to specify
which of parameters won't be overwritten (e.g. SRC component should
not overwrite rate parameter, because it is able to change it).
Commit also adds macros to buffer.h, which can be used in order
to specify which parameter of source/sink buffer should not be
updated.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",76,19,0
"thesofproject/sof","81c62cfbd4750084023f2f5a1a1c80def41e94fe","bkokoszx","2020-01-08 20:37:58","false","buffer: add hw_params_configured flag to comp_buffer structure

Add hw_params_configured flag to comp_buffer structure. It indicates
whether hardware stream parameters were set.

This commit also implements buffer_set_params(),
buffer_reset_params() and audio_stream_set_params(). They can
be utilized in order to simply setting buffer parameters.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",71,19,0
"thesofproject/sof","1b2a6ef02ec9a6e94f631f666915371c5f3fc264","abonislawski","2019-09-12 08:00:03","false","probe-app: initial code

 Probes will extract data for several probe points in one stream
 with extra headers. This app will read the resulting file,
 strip the headers and create wave files for each extracted buffer.

 Usage to parse data and create wave files: ./sof-probes -p data.bin

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",62,15,0
"thesofproject/sof","99df3ae2bfd6ace400694c873060aca2707b74d0","tlauda","2020-02-14 12:46:23","false","task: increase default stack size

Increases default stack size of EDF tasks.
It looks like some of the IPCs can exceed 2048 bytes of stack
and cause random data corruption. For sure it has been observed
when executing DAI config for DMIC.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",85,20,0
"thesofproject/sof","0f43fcbbbf2381e1d551b66f35326ee0f97cb159","IulianOlaru249","2020-02-12 12:57:25","false","audio: Remove excess blank lines

This patch removes excess blank lines from ""pipeline.c"" and ""switch.c""
to make the code easier to read and to silence checkpatch.pl script.

Signed-off-by: Iulian Olaru <iulianolaru249@yahoo.com>",78,20,0
"thesofproject/sof","5c1e8480d24b245fb19ab9cccdf3b32c200c6904","mrajwa","2020-02-05 13:45:54","false","kpb: add wrong state log into kpb_buffer_data

This patch add a log message indicating wrong
state of KPB during buffering.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",77,20,0
"thesofproject/sof","1fd1464b9dc4db8019b186677f60b5f654d0448a","aiChaoSONG","2020-02-13 10:50:35","false","Topology: fix wrongly configured pipeline for sof-cml-rt5682-kwd.m4

Pipeline PCM0P and PCM0C in sof-cml-rt5682-kwd.m4 is wrongly
configured. This patch fix this error by removing redundent
'SSP' argument.

Signed-off-by: Amery Song <chao.song@intel.com>",82,20,0
"thesofproject/sof","03ddb480625b14764cdd36ee284a9b3629feff1b","dbaluta","2020-01-27 12:26:55","false","topology: imx8: Change DAI name

For now we are using generic simple-card as a machine driver, and
the DAI name must follow certain pattern <dai-name>-<codec-name>.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",78,20,0
"thesofproject/sof","82d8ba075d297238b91a8b52d29eaa8ca3df48ba","jajanusz","2020-01-24 13:24:52","false","platform: intel: LP HP freq indexes

Add freq indexes for LPRO and HPRO, to be able to request
clock source by providing specific frequency index
instead of frequency in Hz.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",78,20,0
"thesofproject/sof","957916f8ef06f59d41469cc3e1470cdd5382215c","jajanusz","2020-01-24 13:57:45","false","platform: intel: add clock switch for waiti

Platforms with cAVS version 1.8 & 2.0 have hardware requirement that
DSP should use LPRO as clock source in waiti.
This patch adds config for that and enables it for platforms that
need it.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",78,20,0
"thesofproject/sof","1f09719260ab0b318f8db39d2e0496d489598c6b","singalsu","2020-01-31 14:36:02","false","Testbench: Fix file component data read and write

This patch retrieves the channels count either from sink or
source. The previous code failed for file read since source
is NULL. A similar kind of mistake also caused the period_bytes
to be calculated as zero.

Finally as code simplification the calculation of bytes is moved
to variable declaration to avoid duplicated statement.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",76,20,0
"thesofproject/sof","9d4ca10639a637905bdf76a0cb3677bcaf775f71","singalsu","2019-12-05 12:37:52","false","Volume: Simplify volume synchronization to host

This patch removes a trivial function vol_update() and alters
vol_sync_host() to update all channels the same time into the
host data structure instead of per channel updates. There is no
other change to component operation.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",70,18,0
"thesofproject/sof","dc6e48121f24cb8edf04e409c7ccc037f54f928f","tlauda","2020-01-16 13:39:01","false","library: add missing function

Adds missing function to host arch build.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",78,19,0
"thesofproject/sof","e0aaafabf57c1e7fda41fbce8212cd23caa0c414","ktrzcinx","2020-01-10 12:40:09","false","pcm_converter: Use endif with condition description

pcm_converter is plenty of preprocessor conditional build so it's
easy to be puzzled.
Added comments improve code readability.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",76,19,0
"thesofproject/sof","713e0f8513de42d755868f01207657e1a6fb716f","dbaluta","2020-01-13 18:24:31","false","rimage: Add support for i.MX8X

i.MX8X is very similar with i.MX8. Memory layout is the same
except IRQSTEER address.

Code will be shared but there will be different firmware binaries
named:
	* sof-imx8.ri, for i.MX8
	* sof-imx8x.ri, for i.MX8X

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",77,19,0
"thesofproject/sof","921fd951faf467c724fe35e8b724dd43ade39f7d","dbaluta","2020-01-12 16:26:27","false","drivers: imx: interrupt: Fix IRQSTEER address

Use specific CONFIG_ to select correct address for
IRQSTEER on i.MX8/i.MX8X.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",77,19,0
"thesofproject/sof","328c4ea6e517fe68457366a47413779f206f48a5","zhuyingjiang","2018-11-05 08:57:47","false","rimage: add 1.5 rimage package API

add API for making 1.5 rimage binary

Signed-off-by: Zhu Yingjiang <yingjiang.zhu@linux.intel.com>",38,5,0
"thesofproject/sof","779d6bce35b50d6c8b34130f5a0534dab9bca819","xiulipan","2018-09-28 05:25:57","false","scripts: create a folder for sof builder docker

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",37,4,0
"thesofproject/sof","f3840a70c352b032d6fbd9ffa126c358c340e15f","plbossart","2021-07-13 15:25:56","false","topology1: tweak sof-tgl-rt711-rt1308 to test on Google Volteer

The topologies used for sof-tgl-rt711-rt1308 and
sof-tgl-max98357a-rt5682 are almost equivalent.

Conditionally add support for the amplifier reference dailink and BT
offload, so that this topology can be used as is on Google
Volteer. This will help root-cause suspend/resume issues we see only
on TGL_RVP_SDW

Related kernel PR: https://github.com/thesofproject/linux/pull/3006

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",88,37,0
"thesofproject/sof","2ad08d2893dfb529052c4162ab99d21a523ee261","xiulipan","2018-09-13 10:54:57","false","interrupt: fix unsafe list del

Use list_for_item_safe when need to del list item

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",42,3,0
"thesofproject/sof","76e7f0828140b269439b5fd4a1c29c3f755943b3","softwarecki","2022-09-06 13:28:35","false","mtl: Add dummy header/source files required by SOF

This commit adds empty header files required to build
a project successfully. The templates for the required
functions have also been added.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",106,51,1
"thesofproject/sof","1e467a106f6c78e213b9016a4a0671963d9f4ebd","XiaoyunWu6666","2022-06-29 02:23:53","false","xtensa-build-zephyr: Auto pamam completion for --fw-naming

There are some restrictions when --fw-naming is set to 'AVS' for the
sake of providing reasonable FW outputs that make sense.

Restriction 1: When argument fw_naming is set as AVS, IPC4 ipc version
will be automatically chosen.

This is because --fw-naming 'AVS' is added for supporting IPC4 SOF build by
nature.

Restriction 2: When argument fw_naming is set as AVS, using platform
subdirectories will be automatically chosen.

The reason is that the platform subdirectories actually belong to the
""AVS"" naming scheme, we must enable using platform subdirectories when
building FW in AVS naming convention.

This also ensure that we can tell firmwares of different platforms apart
by organizing them in different subdirectories.

Signed-off-by: Xiaoyun Wu(Iris) <xiaoyun.wu@intel.com>",113,49,1
"thesofproject/sof","aed76b5a60bc29bfba51516b3e2e2c1b3308745c","ranj063","2022-10-05 23:41:17","false","topology2: cavs: Add chained DMA support for HDMI pipelines

Add a new pipeline chain-dma-playback.conf for chained DMA playback
and use it for HDMI depending on the HDMI_CONFIG.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",98,52,1
"thesofproject/sof","c8589b925cc75c84a8529907cd5a7fe40b733472","keyonjie","2021-05-24 11:51:20","false","dai: allocate RUNTIME_SHARED for shared data

The dd and dai_spec_config need to be shared among DSP cores, allocate
them in RUNTIME_SHARED area.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",84,36,0
"thesofproject/sof","ba3539b5f83779a40940f1e5624aab589920008f","singalsu","2020-05-11 16:51:30","false","Tools: Test: Add TDFB tests scripts for testbench runs

The script adds tdfb_test.m to check the TDFB beam pattern
versus theoretical. It also measures the noise suppression
capability of the test beamformer in simulated diffuse and
random noise field.

As simple quick test this patch adds TDFB to cell array of
accepted components for process test.

Note: There tests can't be used until load of UUID based non-legacy
components is added to testbench. The scripts were used with earlier
legacy mode version of the component.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",96,23,0
"thesofproject/sof","0996f794a1776cec3d9d5a942d000ab343f350f6","tlauda","2020-03-06 12:22:47","false","pcm_converter: do nothing when there are no samples

HiFi3 version of PCM converter can corrupt data or go into
endless loop, when called with samples = 0. Make sure
the processing functions return immediately if that happens.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",84,21,0
"thesofproject/sof","b206b7a8d63c5c940c3c2ad17d3f4030e3705810","tlauda","2020-02-12 11:15:55","false","ASRC: Fix stream parameters passing in params()

This patch updates the stream sample rate propagation to happen
via source or sink buffer. The params struct can no more be used
for that. Without this change the DAI component reports xrun and
the stream fails.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>
Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",78,20,0
"thesofproject/sof","b31c743afe9b3e48e0220b9eb8e1dd223c9eaaf6","tlauda","2018-07-03 09:52:29","false","idc: intra DSP communication

Implements communication between DSP cores for cAVS platforms.
IDC mechanism availability based on platform and architecture.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",7,1,0
"thesofproject/sof","7e430f2b116e0973069910744b4868c4baa78a5a","tlauda","2018-07-03 13:21:18","false","init: init sequence supporting slave cores

Change initialization sequence to support slave cores.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",7,1,0
"thesofproject/sof","b98396d4343195d211407ba5ecab5de487412c0d","tlauda","2018-07-02 16:11:38","false","boot_loader: remove function for secondary core

Removes boot_sec_core function.
It's not needed here, because slave cores will directly
go to main.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",7,1,0
"thesofproject/sof","17f5a08d2e1c40a5cea528cce84536b1f80d5ff1","singalsu","2018-06-28 11:39:36","false","SOFT: Increase test capture pipeline max. channels count to 4

The 4ch DMIC capture test topologies can't work without this change to
pipeline.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",6,1,0
"thesofproject/sof","f73aa7397896b58f1a17fcc16513f79625881d22","ranj063","2018-06-25 07:09:53","false","topology: move dmic related macros to dmic.m4 in platform/intel

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",4,1,0
"thesofproject/sof","ddcc1e7af925ed4847638b53badcfd74fbf40d05","lgirdwood","2018-06-25 13:51:50","true","Merge pull request #14 from ranj063/tone

Tone related patches",4,1,0
"thesofproject/sof","5434ce0f35ebb3fc82b27dd3913c11dce34102c3","lgirdwood","2018-11-19 14:27:26","true","Merge pull request #578 from bkokoszx/trace-comp/pipe-ids

pipeline: remove tracing invalid pipe/comp ids",40,6,0
"thesofproject/sof","02e7da03acf06b8b0f7db9cdfb4b9e224cd8841e","mrajwa","2020-10-07 16:52:10","false","codec_adapter: add mapping function for codecs

This implements a middle layer between the SoF component
codec_adapter and specific codec. For example, the SoF component
may receive a prepare request from the driver, so it prepares itself
(assigns sink/source buffers, check states, etc) and then calls this
middle layer which proceed with codec specific preparation. The exact
same scenario happens for any other interface as well.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",67,28,0
"thesofproject/sof","d5d1f285eb27ff0d3b79a02f082534a65c69b8b9","tlauda","2018-06-19 15:12:32","false","volume: add doxygen comments

Adds doxygen comments to volume implementation.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",1,1,0
"thesofproject/sof","d6d9efb90c3be2381c271e0e02d3f9d7a3aca609","jajanusz","2018-06-11 08:31:30","false","test: enable cmocka unit tests for SOF

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",1,0,0
"thesofproject/sof","46704024321b1f99431308c627dd02784e60ba20","ranj063","2018-06-01 02:29:05","false","host: add host testbench common source and header files

This patch adds the common header and source files required for all
component testbench. These files include routines for parsing
topology files, initializing sof ipc, scheduler, memory allocation
and pipeline structures. It also provides simpler implementations for
some of the SOF features such as tracing.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",1,0,0
"thesofproject/sof","75bb4a670061b8683450d45e1c076b4887e5aa4d","ranj063","2018-06-01 02:29:07","false","host: add testbench program

This patch adds the testbench that parses a test topology file,
and sets up the pipeline for processing. It schedules pipeline_copy()
for reading samples from an input file, processing them through a
pipeline and writing the processed samples to the output file.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",1,0,0
"thesofproject/sof","c8bc724ad9d177c995ab9ca0d56c57bfdafb83c0","ranj063","2018-06-01 02:29:10","false","doc: add README for host testbench

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",1,0,0
"thesofproject/sof","918e4013191f67600dd11eb2d40bc7535b7aa3c9","lgirdwood","2018-09-28 12:45:14","true","Merge pull request #77 from bkokoszx/logger

Logger: added tool for parsing new trace format",37,4,0
"thesofproject/sof","35fd06df8d36cb61e08bcdf5ec65108f4c3e8dd1","lgirdwood","2018-11-21 15:38:13","true","Merge pull request #599 from bkokoszx/dma-buffer-overflow-fix

trace: dma: dma oveflow fix",39,6,0
"thesofproject/sof","4e6d4576186fd55d532faea1fb6c7c8ba450c4d6","dbaluta","2021-03-25 16:13:34","false","audio: codec_adapter: Fix sink bytes copy

With compress audio the number of output bytes is usually greater
then the number of the input bytes.

Because of this, local buffer might have ""valid"" bytes even if the
current process operation didn't produce anything.

So, in this period we did not produce anything but we can still copy
some bytes from local_buffer to sink buffer.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",77,34,0
"thesofproject/sof","6f0b68f3fd202902cdd029629bd7cc3d58da83a6","keyonjie","2020-05-28 08:47:10","false","topology: kpbm: add uuid token support

Add the uuid token to kpb widget for the future use.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",96,24,0
"thesofproject/sof","5827f391f6de2550d5580488c21e369f89fd5be4","slawblauciak","2018-06-15 10:18:01","false","test: Math unit tests

Tests provided: ceil_divide, find_equal_int16, find_min_int16, find_max_abs_int32, norm_int32, sin_fixed

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",1,0,0
"thesofproject/sof","e5d17f3c10f3d170d3aa57460c124cf9cf77a1d2","yongzhi1","2020-10-08 01:12:24","false","Topology: intel-generic-dmic-kwd Add DMIC PROC option

Add DMICPROC option so that DMIC01 can use EQ IIR etc.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",68,28,0
"thesofproject/sof","8d76846ba84baa69ca4feb527196705368da0600","akloniex","2020-03-20 16:45:23","false","muxdemux: Remove dependency on config->frame_format.

(de)mux_get_processing_function() call depended on config->frame_format
being properly configured, which was obsolete from the very beginning.
This patch removed that dependency in favor of reading frame_fmt from
downstream buffer during the call, rendering that field completely
obsolete.

Signed-off-by: Artur Kloniecki <arturx.kloniecki@linux.intel.com>",66,22,0
"thesofproject/sof","c89d916917edf171bcfef7601fc807f185482453","akloniex","2019-10-31 11:34:54","false","dma: Implement DMA IRQ callback using notifier interface.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",54,17,0
"thesofproject/sof","51abaff0720065fba301bcd80438a45cd59f3804","fredoh9","2022-08-29 21:57:52","false","Tools: Testbench: add suffix to keep all the logs

When series of tests are run, only last result with same component is
saved. Make unique output filename. For now adding bits per sample
at the end of file, all the logs can be saved.

Ideally datetime string would be good. I keep it as FIXME.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",112,51,1
"thesofproject/sof","f3521641d3c1541f4f7324dffb44f88f94aecbe4","btian1","2023-06-13 07:56:24","false","copier: change set/get config to module interface

Use standard module set and get config interface in copier.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",45,60,1
"thesofproject/sof","551bb2d9525c050946262246ef7224e38d6e421d","dbaluta","2021-01-06 16:50:27","false","codec: Add dummy codec implementation

This is useful to test codec adapter component and generic codec code.

Our dummy codec has 1 input buffer and 1 output buffer and in its
initial implementation just copies input to output without any processing
on the data.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",74,31,0
"thesofproject/sof","e6f493052407e755ac6f0c6eb531d50911804c9b","dbaluta","2022-01-12 18:39:44","false","drivers: imx: sdma: Fix state in sdma_release

In order to be correctly restarted after RELEASE sdma channel
status needs to be COMP_STATE_PREPARE.

Otherwise, following sdma_start() will return an error.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",117,43,1
"thesofproject/sof","63b872f027154f7f224c70440c3c9d122ae3f7cb","dbaluta","2020-04-23 09:12:39","false","drivers: imx: sai: Set SAI channel mode to output mode

CHMOD configures transmit data pins for:
  - 0b, TDM mode transmit data pins are tri-stated when slots are
        masked or channels are disabled.
  - 1b, Output mode, transmit data pins are never tri-stated and
        will output zero when slots are masked or channels are disabled.

We noticed that when data pins are tri-stated, there is noise on
some channels when FS clock value is high and data is read while
fsclk is transitioning from high to low.

So, select CHMOD to output mode so that pins will output 0.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",71,23,0
"thesofproject/sof","80c1cb0debd71d20057d7a3725ec09966104497f","plbossart","2022-03-16 00:49:35","false","topology2: cavs: rename mixin-capture as dai-copier-gain-mixin-capture

Be exhaustive on pipeline contents.

Also remove Windows references and copy/pasted comments

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",107,45,1
"thesofproject/sof","7ee22be7009b6e954525dffcf51e07e7c6945720","lrgirdwo","2021-09-20 14:49:50","false","testbench: file: Add support for stopping testbench on file size/copies

Allow the testbench to stop on a file size or number of file(pipeline)
copies.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",118,40,0
"thesofproject/sof","699321e6794fe46382b47e92648494c6ac09ae7c","lrgirdwo","2018-12-18 19:54:12","false","cmocka: host: Make sure cmocka builds and runs for host test bench

Fix some build issues with cmocka for host test bench target so that
cmocka UTs can run native on host architecture. This makes it easy for
users to update UTs when APIs change as they dont need architecture
specific version of cmocka.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",52,7,0
"thesofproject/sof","b5aaf6d0680570a3f5d445bbc74a63c1a810eec4","lrgirdwo","2023-03-20 12:42:52","false","testbench: strip out threading for pure xt-run usage.

Strip out all the threading and cache debug to become a pure xt-run
application. This removes a lot of code, including in the host LL
scheduler.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",56,58,1
"thesofproject/sof","128a8ed7bae0ba09d7ad8b299c64b3251b990d87","plbossart","2019-03-06 01:58:41","false","uapi: stream: reclaim unused offset field in host buffer

This field doesn't seem to be used by anyone, reclaim as reserved.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",66,9,0
"thesofproject/sof","bdf4d5a403b6c619256dd1b3a655f8ae64c7d47a","jajanusz","2019-12-03 11:38:11","false","cavs: lib: check status mask in cpu clock set

On some platforms clocks may not be switched instantly and f.e.
there may be need to wait for clock availability before switching to it.
That's why there is need for mask that is used for checking status.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",68,18,0
"thesofproject/sof","297958f418081e155d8264af1fdc98058ed90746","jajanusz","2019-01-21 11:36:40","false","icl: increase text section size

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",56,8,0
"thesofproject/sof","60e609cc995a60aba35f51a0ab6f1aae71f4e196","jajanusz","2019-03-22 13:35:23","false","mixer: make init unit-testable

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",66,10,0
"thesofproject/sof","417b03442080142f82152fad492411bd8edeebdd","ktrzcinx","2020-01-16 13:44:04","false","ASRC: Define processing function typedef

To keep code clean and consistent create processing function
interface outside comp_data function definition.
This solution allow in a future to use pointers to function
with compatible interface as a function arguments or return type.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",78,19,0
"thesofproject/sof","48ba01ec4571658863f7585442faa84426be3319","lrgirdwo","2020-10-26 10:42:42","false","css: add css header for cavs v2.5

Header contests are the same but with bigger key.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",74,29,0
"thesofproject/sof","7e9952f2c8d5a4d70abd76a5c49d0bf39b6cda5f","lrgirdwo","2020-10-26 11:23:29","false","manifest: Add cavs2.5 structures and offsets

cavs2.5 has different offsets and structures.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",74,29,0
"thesofproject/sof","8354454b4df0a3cd166db8a3b645553e5fed493c","dbaluta","2020-11-11 18:49:50","false","platform: imx: Fix PLATFORM_DCACHE_ALIGN

At this point PLATFORM_DCACHE_ALIGN is equal with DCACHE_LINE_SIZE
which on i.MX boards is 128.

Functions like rmalloc and rzalloc are allocating memory aligned at
PLATFORM_DCACHE_ALIGN bytes. This means that blocks under 128 bytes
are not really used and blocks sized > 128 are preffered for small
allocations.

This seems to be an unnecessary overhead which results in SOF not
being abel to allocate memory for simple pipelines (e.g simple
pipeline with a mixer).

For this reason, we set PLATFORM_DCACHE_ALIGN to a smaller value
(sizeof(void*)) but keep HEAP_BUF_ALIGNMENT unchanged.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",72,29,0
"thesofproject/sof","070bc34a3bd3f3455e7a8031e5fa47842f5284c4","aiChaoSONG","2022-11-15 07:41:37","false","ipc4: helper: Use get_attribute ops wrapper

The ops wrapper add extra checks, use ops wrapper
instead of calling the ops directly for get_attribute.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",95,53,1
"thesofproject/sof","a6f8daec2acb5fb4c308e39e8b899ff5efd83498","fkwasowi","2023-02-02 13:18:41","false","kpb: add micselection function

Add micsel function to create a topology
with KD without a separate micselector module

Signed-off-by: Kwasowiec, Fabiola <fabiola.kwasowiec@intel.com>",52,56,1
"thesofproject/sof","e5f337ba70a5c4154e803917f35d7416d1705763","softwarecki","2023-09-21 14:20:42","false","smex: elf: Fixed an error code returned when a file operation fails

If fseek reports an error, the error code set in errno is returned.
Improved handling an error during reading from a file. Now it distinguishes
between an error reported by the fread and insufficient data in a file.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",21,64,1
"thesofproject/sof","1d6abcd074d5cd4fc0ce1ffe666d08afb7469a63","softwarecki","2023-07-10 08:05:19","false","module_adapter: SystemAgent: Suppress unused variable warning

Indicated to a compiler to not generate a warning about the unused
module_adapter variable in the SystemAgent::CheckIn function.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",29,61,1
"thesofproject/sof","4d17d0dee416bc89d4f0f773fd0e8b966b87eff9","IulianOlaru249","2020-02-13 13:15:31","false","gdb: adds spaces around arithmetic operators

This patch adds spaces around arithmetic operators to make the code
easier to read and to silence checkpatch script.

Signed-off-by: Iulian Olaru <iulianolaru249@yahoo.com>",82,20,0
"thesofproject/sof","dcfd11bc4d5b85d258666825c287e62df790ab5d","fkwasowi","2022-10-10 14:11:36","false","mux: add mux cfg to list of modules

No mux in the manifest

Signed-off-by: Kwasowiec, Fabiola <fabiola.kwasowiec@intel.com>",99,52,1
"thesofproject/sof","e12a099b84cc67316cbe5808a780465804a40c58","udaymb","2023-09-01 08:15:49","false","topology2: NUM_HDMIS is set to 3 for MTL devices and updated in platform file

NUM_HDMIS is set to 3 as default value for MTL platform. SPK_ID and BT_ID
are modified based on this change in the target cmake file.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>
Signed-off-by: Uday M Bhat <uday.m.bhat@intel.com>",24,63,1
"thesofproject/sof","58467630060fcc363506e567081ba63bdd749316","iuliana-prodan","2023-05-03 22:55:34","false","topology: imx: Combine mixer topology files for i.MX8MP and i.MX8

Combine mixer topology files for i.MX8MP and i.MX8 using different
variables like RATE, SAI_INDEX, CODEC.

Based on CODEC and SAI_INDEX use the proper DAI_CONFIG or STREAM_NAME.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",54,59,1
"thesofproject/sof","9c3bba8210829ee5c47e90638446d42fc389bfe1","iuliana-prodan","2023-03-02 21:42:52","false","scripts: qemu-check.sh: update READY_IPC for imx8

Update READY_IPC value based on changes regarding
interrupt initialization.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",60,57,1
"thesofproject/sof","0b4712906d5f0ee6ecd1805f1eae62f098f8a6d0","cujomalainey","2019-09-19 21:00:27","false","topology: sof-cht-max98090 reduce buffer size of media pipeline

Reduce size of buffers so dsp doesn't run out of memory on topology load

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",62,16,0
"thesofproject/sof","fe91b3c97f71d9926dc5e29deffd1997d16eefb8","tobonex","2023-09-15 17:59:40","false","eq: remove buffer_acquire from eq_fir and eq_iir

remove buffer ops from eq_fir and eq_iir modules

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","dece398b2275d76e0270a4414e8439516075edcd","tlauda","2019-12-19 14:20:32","false","timer: add platform timer to sof context

Adds pointer to default platform timer to main sof context.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",72,19,0
"thesofproject/sof","4e9ef2347451b66cd80605cb90b3426c7d01c0b3","jajanusz","2018-08-31 13:19:33","false","icl: initial support

Added icelake platform to platforms.
Updated rimage to support icelake.
Updated autoconf and automake files.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",27,3,0
"thesofproject/sof","e816cdbeb23de0fcf040e279272d0f5403769191","jajanusz","2019-08-23 11:24:06","false","platform: cavs: init for tigerlake

Update platform_init for Tigerlake.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",54,15,0
"thesofproject/sof","ee194890b5b7c60cf54e2e6de9cfd124b72ef8f6","ranj063","2019-08-02 23:02:26","false","scripts: add option to build fuzzer

Enable building the fuzzer with the -f option
in the build-tools.sh script.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,14,0
"thesofproject/sof","15deac95a46e507346ea57f6da5bc2e4eb74f4f6","lgirdwood","2018-09-04 09:24:18","true","Merge pull request #306 from tlauda/topic/child_int_disable

interrupt: mask child interrupt immediately",30,3,0
"thesofproject/sof","5e83da7fc170dd9eccdf97e32a516a5b294a41bf","lgirdwood","2018-07-30 13:44:09","true","Merge pull request #171 from tlauda/topic/apl_ownership

apl: platform: set ownership to DSP",15,2,0
"thesofproject/sof","f81713713d42ebb0800507cd9bcfb9b3e5d257ab","tlauda","2019-04-23 03:56:00","false","ssp: remove not needed irq handler

Removes SSP interrupt handler as it's not used.
Let's not waste any memory for interrupt registration
and do not pollute the code.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",47,11,0
"thesofproject/sof","363d5e4b45d00024866a47b2e854ee6bae836630","tlauda","2020-02-27 08:40:51","false","ipc: add is_notification_pending parameter

Adds additional parameter to control whether upstream IPC
channel is currently free or not. It's helpful in case
for some reason checking IPC bits is not enough.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",75,21,0
"thesofproject/sof","551f859291f521d4b3064239cf8c317d14d6f62e","tlauda","2019-12-18 10:22:27","false","alloc: rename RZONE_FLAG_UNCACHED

Renames RZONE_FLAG_UNCACHED to SOF_MEM_FLAG_SHARED.
It's more generic name, which describes more accurately what is
the intention of this flag. Most of the platforms don't have
uncached regions, which can be used to synchronize data between cores.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",73,18,0
"thesofproject/sof","1944052617beb383c13d2da9d8be37aedb7f719d","tlauda","2019-07-15 09:27:29","false","drivers: include: platform: cleanup includes

Cleanups includes in all drivers, include and
platform files. Unused headers has been removed
and needed has beed added.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",44,13,0
"thesofproject/sof","72150acfd578f1172ed692b651874f3870551e74","tlauda","2020-01-08 11:32:31","false","init: pass sof context to slave_core_init

Passes sof context pointer to slave_core_init.
This will allow to pass context even further.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",72,19,0
"thesofproject/sof","091948ccc05f7b370286035fb367a42d895d8f86","johnylin76","2023-01-16 06:37:16","false","topology1: Align DAI format as SSP config to 24-bit for rt1019

This commit fixes Speakers audio issue by aligning bitwidth format
of DAI config to 24-bit as SSP config, which has been modified by
commit c8fe1927c <topology1: change audio format to 24 bit for rt1019>

Signed-off-by: Pin-chih Lin <johnylin@google.com>",55,55,1
"thesofproject/sof","81a416b75c4ec3e7fbb5d89eaa057b5180e5323b","marc-hb","2020-06-23 06:54:15","false",".travis.yml: build ROM for ""buildonly"" platforms too

No obvious reason not to build ROM for ""buildonly"" platforms too.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",70,25,0
"thesofproject/sof","5b3186f60d678dbd15bcba1cd1f9a40fc535ecc3","marc-hb","2022-09-01 00:09:50","false",".github/zephyr.yml: use new script zephyr/docker-run.sh

Reduces duplication and makes reproduction of issues found in Github
Actions much easier.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",116,51,1
"thesofproject/sof","6468490d8d381764adc5ebd259c08a03157986d5","marc-hb","2021-02-26 06:11:45","false","xtensa-build-all.sh: show supported XtensaTools installation in usage

Add this to the -h usage message:

This script supports XtensaTools but only when installed in a specific
directory structure, example:

myXtensa/
└── install/
    ├── builds/
    │   ├── RD-2012.5-linux/
    │   │   └── Intel_HiFiEP/
    │   └── RG-2017.8-linux/
    │       ├── LX4_langwell_audio_17_8/
    │       └── X4H3I16w2D48w3a_2017_8/
    └── tools/
        ├── RD-2012.5-linux/
        │   └── XtensaTools/
        └── RG-2017.8-linux/
            └── XtensaTools/

$ XTENSA_TOOLS_ROOT=/path/to/myXtensa ./scripts/xtensa-build-all.sh ...

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",77,33,0
"thesofproject/sof","af6bd41a994ccf9998a5c6c32d1fe27974bc612e","marc-hb","2021-11-25 02:45:52","false","logger: open /sys/debug/fw_version _after_ /sys/debug/[e]trace

Open /sys/kernel/debug/sof/fw_version _after_
/sys/kernel/debug/sof/[e]trace because reading the former is optional
and the latter is not.

So when the driver is not loaded, we get the same (missing trace) error
trace message whether we use the -n option or not.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",128,42,1
"thesofproject/sof","8ce242b40bd39fb8cb624036e038f338fff28c27","PayalKshirsagar","2020-03-25 09:52:48","false","src: drivers: intel: baytrail: remove unnecessary parentheses

Remove unnecessary parentheses around the right hand side of an
assignment.

Signed-off-by: Payal Kshirsagar <payalskshirsagar1234@gmail.com>",66,22,0
"thesofproject/sof","aa822af84f56bff121946b26833a72aec28843f8","RanderWang","2022-05-13 11:29:51","false","ipc4: don't create pipeline msg for ipc4

Fix use of uninitialize data in IPC message allocation.
In ipc4 path ipc_build_stream_posn does nothing so
the posn.rhdr.hdr.size has a random value and sometimes
is very big. This result to memory allocation failure
at here or other position in the following allocation.

This patch doesn't create ipc->msg when posn.rhdr.hdr.size
is zero for ipc4 case.

Signed-off-by: Rander Wang <rander.wang@intel.com>",111,47,1
"thesofproject/sof","4b201717bddc64ddd2b37833137d80733cac5c13","RanderWang","2021-12-17 08:20:14","false","ipc4: refine frame size calculation for 44.1khz

Dma buffer size should align with 32bytes which can't be compatible
with current 45K adjustment. 48K is a suitable adjustment. Change
the function since we are really calculating the nearest period frames

Tested 44.1khz music on both Linux & windows

Signed-off-by: Rander Wang <rander.wang@intel.com>",117,42,1
"thesofproject/sof","60bd8d78d84038e42ba6e2f01e523e3def0c2e05","RanderWang","2021-07-16 03:15:29","false","ipc4: add missed attribute for large_config

Signed-off-by: Rander Wang <rander.wang@intel.com>",92,37,0
"thesofproject/sof","7e54f456eb07eb7bc94161b5ceab9e781158d326","ranj063","2021-10-05 18:14:11","false","drivers: Intel: hda-dma: ensure DMA channel is idle after stop

Make sure the HDA DMA channel is idle after stopping by checking the
GBUSY bit.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",121,40,1
"thesofproject/sof","a82b44043f042d1050b9a391fec82729fbc1105f","abonislawski","2019-06-19 10:06:46","false","rimage: change error to warning if section not found

Thats because this function is used also to find optional sections so it will be decided later (outside of this func) if this is actually error

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",49,13,0
"thesofproject/sof","fdddd20c8b2492205fe026de9f8573ddaedd8e19","ranj063","2022-01-08 01:54:57","false","codec_adapter: rename codec_apply_runtime_config()

Rename it to module_apply_runtime_config(). No functional change.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","98756546e1d48a6c7af562e4c142611ed61470bd","ranj063","2022-03-23 22:35:26","false","codec_adapter: rename codec_adapter_reset()

to module_adapter_reset(). No functional changes.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",109,46,1
"thesofproject/sof","b9215497fd96dd8a64450cada91f4ded6a35d2b1","ranj063","2021-09-23 18:21:18","false","host: add a comment in host_get_copy_bytes_normal()

Add a comment to clarify that returning 0 is intentional
in case dma_get_data_size() fails.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",118,40,0
"thesofproject/sof","99e9f4370efbfbfb19323a069146231af65aef98","tlauda","2019-04-15 08:41:51","false","dw-dma: unify irq handling for all platforms

Unifies code responsible for interrupt handling
for all platforms. This way we can eliminate #if
based on platform type and rather use feature ones.
Support for hardware linked list defines what kind
of interrupt we expect - block or transfer. There
is no point of supporting both of them simultaneously.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",49,10,0
"thesofproject/sof","019f02e023109e09e49c87cf3fbcd7a1e5c058bb","tlauda","2020-01-08 13:40:01","false","dai: move dai_init to common header

Moves dai_init function from platform to common header.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",71,19,0
"thesofproject/sof","76596a89b3826c97ea695b0061c5cdef92d52457","tlauda","2018-06-26 14:46:31","false","buffer: L1 cache operations handling

Moves L1 cache operations from other components to buffer.
Right now handles buffers connected to DMAs.
Will handle connections to other cores in the future.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",5,1,0
"thesofproject/sof","32ccc09edcbd6addcc916be5319cb207268e3c7c","tlauda","2020-05-29 09:54:43","false","pm_memory: simplify HP SRAM power related functions

Refactors and simplifies functions related to HP SRAM
power gating operations.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",97,24,0
"thesofproject/sof","43d608674d4b06ef1a8dad13c2015d241dcb62fe","tlauda","2019-09-13 13:55:47","false","dma: move CAVS_PLATFORM_NUM_DMACS to specific platforms

Moves CAVS_PLATFORM_NUM_DMACS definition to specific platforms
and renames it to PLATFORM_NUM_DMACS. This way we can access
to the number of platform DMAs from generic code.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,15,0
"thesofproject/sof","48882ee259b8a312ec761b14a69491fbba8c4bd8","singalsu","2019-12-19 14:40:58","false","ASRC: Fix memory leak in reset()

This patch adds the missing freeing of data structures those
were allocated in prepare(). Successive pipeline runs without
suspend in between have consumed more and more RAM every time.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",72,19,0
"thesofproject/sof","c9bf3dc15a3b159cc76cd297105cc3cd0c2e26a5","singalsu","2019-09-24 13:52:15","false","ASRC: Add ASRC into testbench

This patch adds the ASRC component and the new tokens into topology
parser and testbench component loader.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",65,16,0
"thesofproject/sof","a328223ba5126836bb41210e1006f141a087a435","singalsu","2022-08-09 08:38:12","false","Topology1: Allow S24_4LE and S32_LE playback with PCM4

This patch allows to test SRC with all 16/24/32 bit formats
in UP-squared device. Without this patch only 16 bit is
supported.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",111,50,1
"thesofproject/sof","4b8cb6edc75b2e16ba17ab5f296fce99626c6922","singalsu","2020-05-13 10:30:45","false","Tools: Topology: Fix mistake in IIR pipeline macros undefine()

This pipeline macro defined macros for IIR so the clear of
FIR related macros is not correct.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",96,23,0
"thesofproject/sof","9538c4feffa60ac8b96c68fdf250dc5b7f3e53d5","singalsu","2021-09-09 15:17:45","false","DAI: DMIC: Get burst elems value from driver

This patch replaces the hard-coded value 8 with DAI platform data
FIFO depth. The depth is set by DMIC driver in set_config() from
BFTH^2 value. The BFTH value is hard-coded to driver in topology
params mode (8) or retrieved from blob OUTCONTROLx register setting
in blob mode.

If the blob set BFTH was different than hard-coded the capture resulted
to xruns and failure.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",118,39,0
"thesofproject/sof","f5dd529190a76bb746aa2276846915818a940026","singalsu","2022-11-15 15:16:55","false","Tools: Test: Remove unused variable from src_test.m

The variable tn is not used, it is safe to delete it.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",95,53,1
"thesofproject/sof","9c50fff928b379731a0900d0b1d0135402206c02","aiChaoSONG","2021-06-15 06:10:29","false","topology2: add asrc class

Add the class definition for ASRC widget, it can be
instantiated as follows:
	Object.Widget.asrc.""N"" {
		period_sink_count	2
		period_source_count	2
		format			""s24le""
		rate_out		48000
		asynchronous_mode	1
		operation_mode		0
	}

Where N is the unique instance number for asrc widget
within the same alsaconf node.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",69,36,0
"thesofproject/sof","f6f748b89f254f48b9a7392818ca6130e01f6bec","dcpleung","2020-04-05 08:59:24","false","cmake: use fw.h and manifest.h from rimage/

Since both fw.h and manifest.h are being used in the main SOF
repo, and also the standalone rimage repo, to prevent them
getting out of sync, use the ones coming from the rimage repo
instead.

Also, git submodule update is being executed when cmake is
run so there is no need to update when building rimage.

Signed-off-by: Daniel Leung <daniel.leung@intel.com>",80,22,0
"thesofproject/sof","538eb6ab34c54d8dd700c3df65f4ab666c79a223","cujomalainey","2020-10-06 01:27:58","false","host: stub about required functions

Many functions are needed for building that are not relevant to the
platform. Stub these out so the system can be fuzzed correctly.

Also fix up a misisng header

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",66,28,0
"thesofproject/sof","1336cac019a3855c99a73af8d0cce47561198990","keqiaozhang","2020-09-16 09:13:01","false","topology: add s32_le format support to kwd pipeline

KWD pipeline only supports S16_LE and S24_LE formats, S32_LE also
need to be included.

Signed-off-by: Zhang Keqiao <keqiao.zhang@linux.intel.com>",64,27,0
"thesofproject/sof","46578cb103e49558b6b3c3ef1addf0efdfa13a8c","ymdatta","2020-08-14 08:52:43","false","scripts: Add a new script to rebuild testbench

Currently, the testbench is built using the script named
'host-build-all.sh' under scripts directory. But the name of
the script, it's git history doesn't refer to what the script
is currently doing now.

The newly written script adds option to build the testbench.
This script was written in mind to remove the old script
used to build the testbench (i.e host-build-all.sh).

The script also adds an option to build the testbench with
AFL instrumentation. AFL fuzzer works well when the code
it's trying to fuzz is instrumented properly. The instrumentation
helps the fuzzer in generating unique inputs which cover
different paths in the code graph. When the option is set,
testbench is built using a compiler AFL provides, which does
the instrumentation work.

Signed-off-by: Mohana Datta Yelugoti <ymdatta.work@gmail.com>",75,26,0
"thesofproject/sof","ba77d3a74f0804964a25513f9028819a4d496fe6","lkoenig","2021-12-14 09:28:47","false","xtos: Add stub for some missing OS function

In order to ease porting algorithm to SOF, it is convenient to have
stubs for some operating system function.
Those stubs are not meant to be called.

Signed-off-by: Lionel Koenig <lionelk@google.com>",112,42,1
"thesofproject/sof","5eacd5f8ef226a3a596117eac61cac869a0bf93f","lyakh","2021-10-27 08:19:56","false","idc: fix a race when completing IPCs on secondary cores

If an IPC has to be handled by a secondary core, it is also replied
to by the same core. That is done in an IDC task, running on that
core. After that the task completes and the core is ready to receive
the next IDC. However, there is a race in that flow. Once the core
has replied to the IPC, the host can send the next one. It can also
happen, that that next IPC is also directed to the same core, e.g.
when building pipelines. That core then will try to schedule the IDC
task again to process the new IPC. But it can happen, that the
previous IDC task hasn't completed yet, which will cause the
scheduler to refuse scheduling it again. To fix this move replying
to the IPC to the IDC task completion, which is called with
interrupts disabled. That way the response is sent and the task is
deleted from the scheduler queue atomically, only after that
interrupts are re-enabled and the next IDC can arrive.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",128,41,1
"thesofproject/sof","12a56d1b96d6c8368c61eeed7d238401dd90d138","lyakh","2020-11-20 12:20:43","false","alloc: fix the general one-buffer memory allocation case

The condition ""size + alignment <= block_size"" for allocating
memory from a signle buffer is sufficient but not precise enough.
For example if we want to allocate 20 bytes with 64-byte alignment,
a 32-byte buffer *might* be sufficient if it's suitably aligned.
Fix the algorithm to account for such cases.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",74,30,0
"thesofproject/sof","68747401657864307fb543018bde5141fbd9933b","lyakh","2021-04-20 13:13:22","false","zephyr: CONFIG_CAVS_TIMER is only required on cAVS platforms

Allow building SOF with Zephyr with Xtensa platforms other than
cAVS.

BugLink: https://github.com/thesofproject/sof/issues/4046
Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",88,35,0
"thesofproject/sof","017b8ebcde57cce0e9ab18fba4ed9457a8970156","lyakh","2023-04-21 12:53:03","false","buffer: use an accessor to read struct audio_stream::frame_fmt

This patch adds audio_stream_get_frm_fmt() to read
struct audio_stream::frame_fmt and converts all users. Apart from
hiding internals of the structure, it also enforces the use of the
__sparse_cache annotation.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,59,1
"thesofproject/sof","4ebd4d66a6a2aaafd506be7a297f3e8bbe28dab7","marc-hb","2021-05-27 00:42:02","false","dma-trace.c: add some comments

Connect the DMA initialization dots.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",84,36,0
"thesofproject/sof","3aeb2bfd99b959e89d76f8070d676580b51e5050","marc-hb","2023-03-14 17:08:30","false","xtensa-build-xephyr: fix xt-objcopy failure when default-params missing

Fixes recent commit 8aab18351fd6 (""xtensa-build-zephyr: fix
DEFAULT_TOOLCHAIN_VARIANT spill on next platf"")

Some XtensaTools installation are missing this `default-params` symbolic
link:

```
XtensaTools/config/
|-- X4H3I16w2D48w3a_2017_8-params
|-- X6H3CNL_2017_8-params
|-- cavs2x_LX6HiFi3_2017_8-params
`-- default-params -> cavs2x_LX6HiFi3_2017_8-params
```

Maybe it's missing when installing with the graphical interface?

This symbolic link is surprisingly enough to make `xt-objcopy` work
_without_ the XTENSA_ variables. But when the variables _and_ the link
are both missing, then `xt-objcopy` fails with the usual error:

```
in current dir: work/current/sof; running command:
 XtDevTools/install/tools/RG-2017.8-linux/XtensaTools/bin/xt-objcopy
 --remove-section .comment sof/build-tgl/zephyr/zephyr.strip
       build-sof-staging/sof-info/tgl/stripped-zephyr.elf
Error: there is no Xtensa core registered as the default.

You need to either specify the name of a registered Xtensa core (with
the --xtensa-core option or the XTENSA_CORE environment variable) or
specify a different registry of Xtensa cores (with the --xtensa-system
option or the XTENSA_SYSTEM environment variable).

The following Xtensa cores are available:
	hifiep_bd5
	cavs2x_LX6HiFi3_2017_8
	sample_config
	sample_flix
	...
```

Fix this failure by simply passing the XTENSA_ variables to xt-objcopy.

Kudos to Seppo Ingalsuo for the interactive debugging session that
allowed root-causing this problem extremely quickly.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",56,57,1
"thesofproject/sof","81bccef08dd4727d7800b6e5c53875cf24522aa3","serhiy-katsyuba-intel","2023-07-28 15:55:24","false","app: Enable probe for MTL

Enables extraction and injection probes for MTL platform.
NOTE: this commit does NOT enable probe log backend.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",31,62,1
"thesofproject/sof","42dd0a693267e7d256d9062d51f7ea9d4ab1d64a","ranj063","2022-01-06 18:21:28","false","codec_adapter: check if more fragments are expected first.

Check if more fragments of config data are expected first and return
immediately to make the code easier to follow.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,43,1
"thesofproject/sof","5c3262a6a9634dca84111c63ce7610e667efb38f","ranj063","2022-01-14 20:44:04","false","codec_adapter: cadece: remove unnecessary goto's and fix memory leaks

Just return the appropriate value right away when possible and fix
memory leaks.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",117,43,1
"thesofproject/sof","f158e14fbf2cd9e91cdef7a490016374bda6dc9d","ranj063","2022-01-07 22:17:49","false","codec_adapter: rename codec_state to module_state

Rename the enum codec_state to module_state. No functional change.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","3faaf4c145e76a91a8eec8f1b20124106645601b","singalsu","2022-01-26 11:59:47","false","Tools: Audio: Test: In Matlab tests by default put trace to /dev/null

The trace print slows down the test a lot while the testbench
trace output is not needed usually in these audio quality
tests. The test script can set .trace to redirect trace to a file
that is also a lot faster than scrolling the trace in Matlab
or Octave shell.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",104,44,1
"thesofproject/sof","291706325c4441a560c35bb7908f215a10d6614a","singalsu","2022-02-03 15:05:31","false","Tools: Testbench: Clean up help text and add missing help items

This patch changes the help print function. The print look and details
are improved. Executable behavior with option -h is fixed. Previously
the help text was printed twice.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",106,44,1
"thesofproject/sof","b033740402a37e94d587e389cb536f192a00f7ad","marcinszkudlinski","2022-11-28 15:00:04","false","mtl: add support L3 (IMR) heap

L3 memory should support have support
for allocating/freeing memory
A heap support in L3 is introduced by
this commit

Signed-off-by: Rafal Redzimski <rafal.f.redzimski@intel.com>
Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",99,54,1
"thesofproject/sof","437de79ec065f28af4dbb7634ee5917601b06df7","bkokoszx","2018-09-28 12:24:09","false","logger: added and updated logger makefiles

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",37,4,0
"thesofproject/sof","049329be0b52f102b16f04924664012441bcda81","kv2019i","2023-08-21 15:16:40","false","arch: xtensa: configs: remove Intel Tiger Lake defconfigs

Remove the Tiger Lake defconfig and override files for
XTOS builds. These platforms are now supported with Zephyr which
has its own config files.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",24,63,1
"thesofproject/sof","9f418ccd3470af65eb162b09d486aea1557583d9","lgirdwood","2018-06-26 19:16:10","true","Merge pull request #20 from tlauda/topic/buffer_l1_cache_handling

buffer: L1 cache operations handling",5,1,0
"thesofproject/sof","eaf9b051cfcd20618110652b1f15f4db0ba8bf8a","ktrzcinx","2020-01-17 11:48:15","false","buffer: Introduce local variable to short function call arg list

Changed line was longer than 80 chars and refer to nested variable
twice - after changes both problems disappears.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",79,19,0
"thesofproject/sof","86c50754294ee86eaa9784ea18efb13e5a7b66fb","ktrzcinx","2020-04-28 06:17:27","false","pcm_converter: Add single sample converter between fixed and float value

Add core function responsible for conversion between
floating point and fixed point values in generic version
of converter. It is done manually to be sure of IEEE 754-binary32
value format for any used platform and floating point unit
settings.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",94,23,0
"thesofproject/sof","86754c138941e0c43d2b0c5bbccb6e2d01baf0c7","ktrzcinx","2020-10-15 09:51:43","false","hash: Assert memory overflow during hash calculation

ri_sha*() functions are often called with arguments calculated on
the fly, so at list basic assertion here may save debugging time
in the future.
Cast size to uint64_t to properly handle nagative sizes, casted to
uint32_t in argument list. Otherwise, sum size and offset may
overflow uint32_t and don't trigger assert.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",73,28,0
"thesofproject/sof","4d005d0b2fed02877e6cda4ebebcdfc9e6f926d8","lgirdwood","2018-11-22 11:23:52","true","Merge pull request #613 from xiulipan/pr/bytfix

Fix BYT issues",40,6,0
"thesofproject/sof","0cda98d7278111ccb46dab77e56a87d0ab499a12","lgirdwood","2018-07-03 10:55:10","true","Merge pull request #42 from tlauda/topic/idc

idc: intra DSP communication",7,1,0
"thesofproject/sof","f0fd22dd7edc60ed68b17d8ef2ee583f346813f3","lgirdwood","2018-07-30 07:25:39","true","Merge pull request #159 from zhigang-wu/topic/capture-noise

byt:ssp:porting the patch dcc61498f to clear fifo.",14,2,0
"thesofproject/sof","9a3555e2b7715c16d14b147dc7c70de8f334912b","mrajwa","2019-01-17 23:27:56","false","MEMORY: Enabled LP SRAM for ICL platform.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",57,7,0
"thesofproject/sof","fb8a65087772a51caccfae917726a76bab62ee3c","mrajwa","2019-04-18 20:13:54","false","CMOCKA-KPB: create dummy source && sink buffers

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,10,0
"thesofproject/sof","26436b4c618033cc643c410f3ce9d4ebec0d8ee8","lgirdwood","2022-01-21 12:01:42","false","Revert ""codec_adapter: remove macro CODEC_INTERFACE_ID()""

This reverts commit caff7a372603b0107be6c78c701517263fdd65b8.",114,44,1
"thesofproject/sof","f5711ff689647e55b2ad5633f81980647bb06c6b","lrgirdwo","2018-11-05 21:42:58","false","uapi: split ipc.h and abi.h into small files.

Split the larger ABI files into smaller more manageable chunks. Also
split by end user into IPC and user space ABIs.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",37,5,0
"thesofproject/sof","af6655e7fac3c56847251553699f354df74bf6a9","lrgirdwo","2021-06-14 12:24:01","false","pipeline: dont disable IRQs around pipeline scheduling.

The walk context is passed in by the caller and not shared. The pipeline
states are locked by IPC.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",69,36,0
"thesofproject/sof","98d7ab2162887e0e58c41e16404213457b68b9f2","lbetlej","2019-12-09 15:49:39","false","tools: add APL key signature to sof_ri_info

A public key signature of Intel production key used to sign APL
binaries is added. The script can provide on output info if
evaluated FW image was signed with the key.

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",72,18,0
"thesofproject/sof","bc50ce195479432c4308e81d2c1892862344b65f","plbossart","2018-10-23 17:47:56","true","Merge pull request #502 from akloniex/update-abi-header

abi: Update abi.h header to accommodate for changes done in krenel repository",27,5,0
"thesofproject/sof","fb1d4f80b5e1dbd50d140f2e1c513c705ba87cf6","dbaluta","2023-10-05 12:21:49","false","drivers: imx: sdma: Enable multi-fifo script for micfil

MICFIL can support up to 8 channels. In order for this to work
we need to use multi-fifo script.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",16,64,1
"thesofproject/sof","cad93fa1be163cf2a3e3437a13cf65f8d9bcbbc9","dbaluta","2022-03-23 10:41:11","false","ipc: stream: Add extended data at the end of sof_ipc_stream_params

In order to support sending the compress parameters (and maybe other
parameters) we introduce `ext_data_length` field inside
sof_ipc_stream_params.

We use 2 bytes from the reserved pool. This will represent
the size of extended data that will be placed at the end
sof_ipc_stream_params struct.

existing value for this reserved bytes is `0`. This will mean
that we can keep backward compatibility. 0 means no extended data.

Add also VLA data[] in order to easily access extended data.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",108,46,1
"thesofproject/sof","c352ff8b539259110546281e2ec12ae2a6eb9fbc","dbaluta","2021-04-07 12:01:32","false","cadence: Add Cadence mp3/aac headers

This files provide the interface for interacting with
Cadence binaries in order to set specific parameters
or decode API errors.

These files were received from Cadence after they kindly agreed
to release them with a permissive license.

Do not edit this by hand! Only update this when Cadence
releases a new version!

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",80,34,0
"thesofproject/sof","3f23539d95233a89a2f653429c42d292403088fe","kfrydryx","2022-01-27 12:34:46","false","SRC: add IPC4 support

Add IPC4 handling of SRC module

Signed-off-by: Krzysztof Frydryk <krzysztofx.frydryk@intel.com>",105,44,1
"thesofproject/sof","5ef9e496d046f3ba051a9c5b1ab5678414e5326b","libinyang","2022-03-08 02:10:38","false","topology1: CMakefile: add sof-adl-rt711-l2-rt1316-l01

Add sof-adl-rt711-l2-rt1316-l01 support. This tplg doesn't include any
local MICs.

Signed-off-by: Libin Yang <libin.yang@intel.com>",114,45,1
"thesofproject/sof","55d1f5ac815528c504426e9b482a0eefd6ce1811","libinyang","2019-04-25 05:43:20","false","topology: sof: add pipe-volume-capture-16khz.m4

DMIC16k only supports 16000Hz sample rate. pipe-volume-capture.m4
only supports 48000Hz. Add pipe-volume-capture-16khz.m4 to support 16KHz
record.

Signed-off-by: Libin Yang <libin.yang@intel.com>",48,11,0
"thesofproject/sof","521aa0ba82518f97463790ef9bf06666da952392","RanderWang","2022-05-09 08:53:57","false","ipc4: avoid pipeline sink component check in different pipeline

Fix panic with capture pipeline prepare. Fw checks sink component
in another incomplete pipeline but the sink component is not set
at this time.

Stop pipeline check for ipc4 component in another pipeline and
return immediately.

BugLink: https://github.com/thesofproject/sof/issues/5777

Signed-off-by: Rander Wang <rander.wang@intel.com>",113,47,1
"thesofproject/sof","37292a70be4ff35d49b1fbb4cde4f9d6abfd2bb0","ranj063","2021-01-28 02:15:04","false","dmic: add spinlock during set_config op

Long run multiple pipeline tests fail during DMIC
config with dynamic pipeline set/up. Holding the dai
lock during DMIC config fixes the issue.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",66,32,0
"thesofproject/sof","6f48342f9c8dc3162efb9b4c03ee635c8972c3ab","ranj063","2022-11-02 03:49:07","false","zephyr-ipc: Invoke platform_pm_runtime_power_off during D3

When entering D3, call the platform_pm_runtime_power_off to prevent the
IPC timeouts seen with the CTX_SAVE IPC seen on the host when using the
zephyr native IPC driver.

Add an empty definition for MTL to prevent compilation errors.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",89,53,1
"thesofproject/sof","ce97fc7128fc71b10c76b3d99276314d5ff2d363","fredoh9","2021-08-13 17:30:07","false","topology1: sof-tgl-sdw-max98373-rt5682: use a mockup of the smart amp

Remove 3rd party library dependency.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",116,38,0
"thesofproject/sof","97fd4837a2baaee169a82704473643c1a7e8a8e3","ktrzcinx","2020-04-23 06:21:06","false","uuid: Make entries monosized

It make code dealing with entries simpler, and allow to create
UUID entries dictionary with constant access time to any entry.
As long as struct definition is fixed, then can passed as pointer
with correct type to function call, instead of void pointer.
UUID entries aren't storred in flash memory, so entry size is not
important.
Explicit add zero at the end of entity_name to trigger string overflow
warning for shortest incorrect string length.
Resolve problem with cutted UUID info in logger output.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",71,23,0
"thesofproject/sof","eb96c620159a4a57350da737f9907fba3974b541","ktrzcinx","2020-05-29 08:14:20","false","trace: comp: Add trace context for each component instance

Each component instance should use own trace context to allow
setting different log level per component.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",97,24,0
"thesofproject/sof","30c43c6dffd2639c144828ec9ad9b8e1e3e936e1","aborisovich","2022-12-18 14:28:28","false",".github/workflows: renamed Zephyr workflow ""build"" job to ""build-linux""

Zephyr workflow had been added new build-windows job.
It makes sense to rename old ""build"" job yo ""build-linux""
for consistency.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",91,54,1
"thesofproject/sof","160dbf7441207e98a7c854495f61aede94c49b18","mrajwa","2019-07-29 09:04:08","false","kconfig: enable LPSRAM by default for APL

This patch enables LPSRAM memory by default on
all APL platforms.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,14,0
"thesofproject/sof","2e319edcb663bc698d3eeece5c4c38633d38e03a","cujomalainey","2018-11-16 01:54:37","false","Ignore built binaries

Git is seeing build artifacts

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",39,5,0
"thesofproject/sof","efd55bbd066a5c51eb5574b7aba19796a17944bb","cujomalainey","2021-01-07 22:42:54","false","codec_adapter: delete empty header

if its unused, then its uneeded

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",75,31,0
"thesofproject/sof","287a5f9a2b1e803f7bb6aa288b3383125a1eca98","brentlu","2021-09-03 09:15:17","false","ssp: mclk/bclk turned off unexpectedly

The implementation does not take the state of both directions into
consideration. If host opens both TX/RX PCM devices then close one PCM
device, the ssp driver will close the mclk/bclk immediately regardless
the state of the other PCM device.

Signed-off-by: Brent Lu <brent.lu@intel.com>",119,39,0
"thesofproject/sof","2d1f53aaeb43f23c437fadaf04226e9951afa5a3","btian1","2023-07-18 06:30:21","false","copier: remove redundant parameters when create endpoint buffer

Remove no use or redundant parameters in create endpoint buffer
function.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",32,62,1
"thesofproject/sof","79faeb5a9577dba5acc7f3e25179ab86c445de55","btian1","2023-05-09 01:58:58","false","copier: expose ipcgtw_zephyr_new and ipcgtw_zephyr_free function

Expose the ipcgtw_zephyr_new()/free() functions and use them for
creating/freeing the endpoint device. This is preparation to
replace the endpoint device with the copier device and eventually
remove the endpoint device itself.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",53,59,1
"thesofproject/sof","88fdb10e522c8b064f61eef22827e3902e5dba2e","btian1","2023-09-11 01:46:59","false","audio: src: rename sample rate converter coefficient folder name

rename it from src to coef to reflect the real content inside.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",19,63,1
"thesofproject/sof","913644b1a837fdcb21839584310063b7eb9e4720","tlauda","2019-09-26 09:01:21","false","dai: fix dma channel free

Fixes freeing of dma channel. It's set during dai configuration,
so we should first check if it exists.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,16,0
"thesofproject/sof","7e357d14a0706f1421d5b35623752ab9f031e7bf","tlauda","2019-06-07 08:45:05","false","dma: refactor callback data

Refactors DMA callback data by using dedicated
callback struct along with callback status enum.
Previously field size was used to pass status
from component to DMA, which was misleading
and could cause potential issues e.g. value
0 was a valid number of bytes, but it was
also a value for DMA_RELOAD_END definition.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",55,12,0
"thesofproject/sof","7275e422d86f8bfa06074759cc96ee1572c7b8a4","tlauda","2019-04-30 03:19:32","false","dw-dma: handle interrupts per core

Fixes DW-DMA interrupt handling for pipelines working
on different DSP cores. We are now keeping the track
of registered DMA channels per core and handling them
per core basis.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",47,11,0
"thesofproject/sof","19c3ff99248179d676e8a6e2baf79ee8e275403d","xiulipan","2020-05-27 08:35:42","false","topology: fix wrong parameter for HDMI in sof-jsl-da7219

Remove the wrong one more 0 in the DAI config for HDMI.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",96,24,0
"thesofproject/sof","8845e25f4a4182ecb83908c296c5bc5cf5891d72","xiulipan","2018-11-22 10:19:50","false","dma: enable legacy platform dmac

Add channel number to dmac in legacy platforms, and change the dma_init
function to fit the curruct code framework.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",40,6,0
"thesofproject/sof","fdd6bcc1b9faa2fef48e33ee939c98f5713e68dc","RanderWang","2018-06-01 08:50:35","false","SSP: refine padding bit setting on Broadwell

merge commit 36f23c6cc3ed (""apl-ssp: fix padding bit issues in
I2S/LEFT_J mode"") and refine it on Broadwell.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>
Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",1,0,0
"thesofproject/sof","250ab3875c23046abae369fd55dc07581b411dcd","marc-hb","2021-09-21 22:57:03","false",".gitmodules: remove .git suffix from rimage.git

This makes it possible to clone locally and recursively.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,40,0
"thesofproject/sof","014a386dfb5391124231a7221149f62c4923bae6","marc-hb","2021-04-29 01:20:31","false",".github: add Zephyr build

Use the official image from the Zephyr project
https://github.com/zephyrproject-rtos/docker-image

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",81,35,0
"thesofproject/sof","4d03c269c255ba7e6b3f992e2f3359b304edfea7","marc-hb","2022-07-06 18:42:34","false",".github: add sof-docs build to Github Actions

From time to time sof-docs regressions are introduced in sof.git. This
introduces a random and sometimes long delay between when the regression
is introduced and when it is found. A recent example is
https://github.com/thesofproject/sof/pull/5731#issuecomment-1175630147
where the doxygen comments were duplicated. Doxygen alone did not mind,
then the sof-docs build failed much later which took multiple people a
lot of time to understand and bisect.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",110,49,1
"thesofproject/sof","b809caeb5d1b75b5b4472d07fea779572f4ba083","marc-hb","2021-03-11 03:04:51","false","installer: --no-print-directory

Gets the length of a no-op ""make topologies"" from 380 down to 140
lines. From 300 to 200 for one ""make signed"" platform.

Ninja is more quiet by default.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,33,0
"thesofproject/sof","5fd7c88f3d12fc1b537c197b4090846eb3268d62","marc-hb","2021-12-15 00:35:48","false","trace.c: minor #ifdef simplification in trace_log_filtered()

Group two #ifdef into one.

Top of block variables do not require C99.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",113,42,1
"thesofproject/sof","31b14782d25990e1d76051f51e5713c4e02dbcf5","marc-hb","2022-07-06 23:10:11","false","Exclude audio/coefficients/src/src_ipc4_*.h from doxygen

Fixes doxygen warning:

warning: Included by graph for 'src.h' not generated, too many
nodes (111), threshold is 50. Consider increasing DOT_GRAPH_MAX_NODES.

This code is generated and pollutes doxygen output anyway.

Temporary, manual solution until the `\cond` directive is also generated
by the sof/tools/tune/src/*export*.m script(s)

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",110,49,1
"thesofproject/sof","75acf8c9658e226546c7767da8311a8556f12dda","lyakh","2022-04-13 10:48:45","false","up_down_mixer: fix buffer acquisition

Instead of acquiring and releasing buffers locally multiple times,
do that once for the .copy() method.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",117,46,1
"thesofproject/sof","81883871b646d03acf1ae374a55cb28896a594bd","lyakh","2022-02-03 13:41:15","false","coherent: add locking variants for thread context

When used from thread context the coherent API can use mutexes for
locking to avoid unnecessarily disabling interrupts.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",105,44,1
"thesofproject/sof","a9224c9bd73c97e2e69e9628c8bea3229b4b3022","lyakh","2019-01-16 12:10:15","false","dw-dma: fail probing if setting up the controller fails

If the driver is unable to release the DMA controller, abort probing.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,7,0
"thesofproject/sof","65a95c339a2da4c6367b78ae73e3b9e0a1f36e2d","lyakh","2021-11-12 13:40:13","false","zephyr: ll_schedule: protect global domain data

ll_scheduler tasks run audio pipelines on multiple cores in parallel.
Starting and stopping those tasks can cause access to global domain
data. That data has to be protected by the domain lock.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",127,41,1
"thesofproject/sof","fd31092567691489fc1b31a35bb80f183baa5dd9","aiChaoSONG","2023-02-28 07:23:10","false","topology2: fix wov issue introduced by using array

Some minor issues introduced by using topology2 array,
fix them in this patch.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",58,57,1
"thesofproject/sof","82e628fe109d837fc1ff57bcbedb3af255973471","abonislawski","2022-09-08 15:17:43","false","up_down_mixer: LOG_MODULE_REGISTER for zephyr logging

This will fix build with zephyr logging enabled

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",105,51,1
"thesofproject/sof","4321546db02fd99ca4cdda539760cafbd0792797","softwarecki","2022-11-22 09:05:22","false","dma: cavs: ace: Move period count to dma_plat_data

Since zephyr does not support reading the period count
attribute from dma, this value has been moved to
dma_plat_data.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",94,54,1
"thesofproject/sof","0f20e2affb8f06575224f4cfc770c54631e133fa","fkwasowi","2023-04-13 06:48:19","false","dma: reset DGCS_GEN when pipeline is reset

DGCS_GEN bit should be set to 0 on a pipeline state change to reset

Signed-off-by: Kwasowiec, Fabiola <fabiola.kwasowiec@intel.com>",50,58,1
"thesofproject/sof","92c921c898a7a2d1d9bd8bc241ede5518b3112c5","tlauda","2019-09-04 11:05:44","false","ipc: return valid error in ipc_dma_trace_config

Fixes the bug, where any error in ipc_dma_trace_config handling
was always returned as -EINVAL.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,15,0
"thesofproject/sof","0c7514e379e5794300a77f7a719c16ac7e26cf7b","yongzhi1","2020-01-06 17:14:47","false","topology: add JSL tplg for max98360a speaker amp.

Add MAX98360a support for Waddledoo product.
Tested mono playback with amp EVB on SSP1 in i2s mode.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",72,19,0
"thesofproject/sof","489832137ca5e3d107d89137dc1939db3be5abcd","xiulipan","2018-10-18 10:54:32","false","topology: m4: add SOF_TKN_DAI_DIRECTION for DAI

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>
Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",33,5,0
"thesofproject/sof","e0253388134d26c37075ea65ddd8b5935af8855c","tlauda","2020-01-24 11:37:24","false","memory: remove uncache macros from several platforms

Removes uncache macros from platforms, which don't support
uncached memory region.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",79,20,0
"thesofproject/sof","3db29f0eb7cd95362b803adbfe3971ba65604706","singalsu","2020-08-05 09:18:30","false","Audio: ASRC: Fix pull mode copy frames consume limit

This patch fixes the regression that happened in a previous fix
for stress test gitches issue. Since the passed 7th argument
(write_index) was set to output frames limit the ASRC copy()
terminated too early when converting from higher to lower sample
rate. It has caused issues at least in sof-diagnostic-driver based
validation for capture direction.

Fixes: f63adb42d93521b0bb25c670fd457122857badef
Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",78,26,0
"thesofproject/sof","f47b823cfe92b38abd6907a90d904768f075d169","singalsu","2021-09-14 14:13:37","false","Tools: Testbench: File write DAI needs data structures of DAI

Previously the file component stored component data to device
private data similarly as processing components. However the
pipeline treats file as DAI. Without this patch the missing driver
and DAI operation get_init_delay_ms() causes a segfault in pipeline
parameters walk. It is sufficient for the walk to pass to have just
rzalloc() cleared pointers in driver structure.

The file component data is now placed into DAI private data.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",117,39,0
"thesofproject/sof","02ffbea1a1c9036d4684249ab5ccc4656afc7c8d","jajanusz","2019-06-01 15:17:29","false","test: kpb: add license

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",72,12,0
"thesofproject/sof","73cfb9b691ee22cae292196fa5ddbdb08060a17b","jajanusz","2019-03-22 13:35:06","false","kpb: make init unit-testable

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",66,10,0
"thesofproject/sof","fed2b72df6dd12454aa7bff2669ba93d5a5c7c02","jajanusz","2019-06-10 12:05:11","false","kconfig: platform: add INTEL config

Add INTEL config to be able to build Intel drivers only for Intel platform.
CMake should go into intel folder if it's requested explicitly.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",50,12,0
"thesofproject/sof","0144b2f41f3d2504dc392b27a47a07445a8a6869","jajanusz","2019-02-05 21:29:57","false","cmake: change object files extension to .o

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",54,8,0
"thesofproject/sof","3e8a42bfc0533e6232e38ac07485baee95ebd4eb","bkokoszx","2020-11-04 10:10:45","false","cavs: power_down: move IPC_HOST_BASE literal into register

Before switching off memory, IPC_HOST_BASE literal value should
be moved to register, in order to avoid accessing to disabled
memory.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",75,29,0
"thesofproject/sof","18c36f7607881b8eaf652cf5ae8af052449f1ad4","kv2019i","2022-06-03 10:20:05","false","ipc: ipc4: correct the sleep time back to 250usec

When code was moved to k_sleep(), the amount of sleep time
was changed to Z_TIMEOUT_TICKS(10000). This resulted in 100x
longer sleeps. The original sleep was 10000 ticks of the 19.2/38.4Mhz
platform clock, so a minimum sleep of 260-520usec. With 50kHz
Zephyr ticks of the system clock, the sleep is 200ms.

Additionally this value now depends on Zephyr
CONFIG_SYS_CLOCK_TICKS_PER_SEC setting and this can vary between
platforms.The IPC processing should follow timing expected by the host,
so it is better to use absolute sleep times.

Building SOF with a Zephyr OS tick rate of less than 20kHz resulted in
host IPC timeouts (firmware minimum sleep in range of 500+ms). This
happens when ipc_wait_for_compound_msg() is called and delayed
response is not immediately available.

Change the sleep back to original ~250usec value.

Fixes: 919e6463c652 (""ipc: ipc4: Use Zephyr API k_sleep() instead of obsolete wait_delay()"")
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",115,48,1
"thesofproject/sof","abe89c1ec0036f20eb140062f992162e34aceaa0","balakishorepati","2022-06-20 12:18:11","false","drivers:amd: fix avail and free bytes

Fix avail, free based on buffer size for different
i2s modes on amd platforms.

Signed-off-by: Balakishorepati <balaKishore.pati@amd.com>",120,49,1
"thesofproject/sof","f6cc7dd4991b00ab0a77c6c1578af771295e1db1","lrgirdwo","2021-06-10 19:37:36","false","ipc4: cavs: add support for IPC doorbell header abstraction

This patch allows the doorbell headers to be abstracted by ABI and
support the IPC4 doorbell compact messages on CAVS platforms.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",75,36,0
"thesofproject/sof","70f9faf870daeb835c8f4e07467ce75a05887bf9","ujfalusi","2023-02-03 08:11:38","false","detect_test: Split the module config and blob receiving for IPC4

During the component create (module init) we are not receiving the blob
containing the sof_detect_test_config, only the base_cfg is received.
The sof_detect_test_config content will be sent via large_config_set at a
later time.

The blob received via large_config_set must be the same format as the blob
with IPC3 but in runtime the sample_width from the blob is ignored and the
audio_fmt.depth is used from the base_cfg.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",54,56,1
"thesofproject/sof","271c75aa7192e769de4558e17b8abc68d7078ef0","akloniex","2018-11-12 12:23:31","false","debugability: Fix potential buffer overflow in mbox traces

Buffer overflow was possible when mbox traces of varying length were
logged consecutively, near end of the buffer, petentially leading to
next segment of memory being overwritten with garbage.
Also log entry was pasted twice, once to the on-stack buffer, and then
separately to the mailbox. Now data is being copied to both from the same
source.
Also separating this to a function call, reduces overall .text section of FW.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",40,5,0
"thesofproject/sof","788000fb7cb8028546db757fcb3e750207358a67","dbaluta","2019-08-08 14:35:38","false","imx8: dai: Initialize esai spinlock

ESAI implementation is still dummy, anyhow we need to initialize ESAI
spinlock in order to avoid FW crashes.

Similar with commit 2ee7a24f97d298f (""byt: hsw: ssp: move spinlock init
to earlier stage"") we initialize the spinlock in an early stage at
dai_init.

We started to notice the crash after commit f7abaf7b3346e (""spinlock:
allocate spinlocks in uncached memory"") which requires that the lock
must be dynamically allocated at init. Before, the lock was statically
allocated and there were no crashes.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",53,14,0
"thesofproject/sof","50bd96ded43a55a2ba61afc94f6880570a1c7913","singalsu","2019-04-16 15:11:23","false","Volume: Allow use of extended volume scale up to 42 dB

This patch alters the volume IPC and ramp to use sQ8.16 gain
values instead of previous Q2.16 kind of unsigned gain value.
The driver has never set the min/max volume values in volume
new() IPC so the macro values VOL_MAX (+42 dB) and VOL_MIN (mute)
are used instead as limits.

The overflow in generic C code with s16 format is fixed. The
comments about volume Q format are updated.

The optimimized xt-xcc version of volume is changed to use 64
bits for multiply result to avoid loss of LSB bits in left shift
after multiply. With 64 bit result there is no need to scale the
volume multiplier as it was done with use of 32 bit multiply
result.

The cmocka volume type is changed to signed integer to match
component type used in this patch. The xtensa AE integer types
are signed so better to avoid unsigned gain values. The volume
scale in reference volume does a small error and cannot handle
above 0 dB max so it is changed as well. The test levels are
changed to exercise gains above and below 0 dB.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",50,10,0
"thesofproject/sof","3d4fc0fdd4a6140ecbad93df5c5a9617574649ca","singalsu","2019-12-20 16:38:50","false","DAI: Add timestamping to DAI and HDA, SSP, DMIC drivers

This patch adds to the DAI component new operations dai_ts_config(),
dai_ts_start/stop(), and dai_ts_get() to support timestamp retrieving
from audio interface hardware for use of other components, especially
in the asynchronous sample rate converter.

The support for HW timestamps is enabled in Intel cAVS HW drivers for
SSP (I2S), HDA, and DMIC.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",71,19,0
"thesofproject/sof","965e1c1bf060098354c103bb467b8406afbd6512","aborisovich","2022-12-21 10:25:49","false","board: intel_adsp_ace15_mtpm: Enabled MTL IMR context save

Enabled CONFIG_ADSP_IMR_CONTEXT_SAVE option in Kconfig
in the board configuration.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",91,55,1
"thesofproject/sof","dfea410c8bd2a905aa489991654f8adbe10372f9","lyakh","2023-04-24 10:50:28","false","asrc: fix buffer acquisition

Add missing buffer release calls in asrc_prepare().

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",52,59,1
"thesofproject/sof","189a1fc4a32a4b6806400fc7ca2f0c14a8346558","cujomalainey","2022-02-25 01:20:10","false","switch: default off

This component is an incomplete shell, there is no reason to build it
unless someone decides to complete it.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",110,45,1
"thesofproject/sof","00fb4e9dbad677312f025233f8cda1edddb88e41","kv2019i","2021-05-06 10:37:00","false","audio: smart_amp: declare init with UT_STATIC

Allow component to be included in unit tests by using UT_STATIC
in the declaration.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",81,35,0
"thesofproject/sof","71ac0f97e9d98df7e5679fbb6669bb07229d4170","ranj063","2021-04-20 18:10:28","false","component: do not reset component status in the case of xrun

Do not reset component status in the case of xrun.
An irrecoverable xrun will lead to the pipeline being
stopped by the host and resetting the status will result
in an error stating invalid current state during the STOP
trigger.

Also update the unit test to retain the same state during an xrun.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",89,35,0
"thesofproject/sof","5763c74bf408df0272d51daabd780a702aea7b26","ranj063","2022-01-19 17:44:44","false","codec_adapter: Remove setup config from module data

Remove the setup cfg from struct module_datai and have one just common
config. The config sent during module init should be saved a set up config
within the module's private data if the module needs it. Modify the
cadence_codec_data and the waves_codec_data to add the setup config to
save the initial config that can be applied during prepare when it is
invoked during the reset.

Remove enum module_cfg_type and struct ca_config as they are no longer
needed.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",113,44,1
"thesofproject/sof","0a829ea0bbe04a8ae664566dc184e2db6bf75759","zhuyingjiang","2018-10-18 06:21:04","false","rimage: modify the API to version 1.8

change the define to 1.8
modify the API name to 1.8

Signed-off-by: Zhu Yingjiang <yingjiang.zhu@linux.intel.com>",33,5,0
"thesofproject/sof","1de9ccca3388b87caf98f4e125b3d6ff0a55fccf","keyonjie","2021-07-02 09:41:49","false","config: jsl: change image_size to the real SRAM size

We have 16 bank HP and 1 bank LP SRAM on JSL, change to toml config file
to reflect that.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",85,37,0
"thesofproject/sof","b619aa1d432bb3e103e3eca0c6ad910a903aafd5","keyonjie","2021-09-24 04:55:37","false","debug: panic: fix log file name error

When the length of the path/file name surpass 32, there is no '\0'
anymore in the panicinfo.filename[] array, which will lead to file name
printing errors on the host side like this:
	.../include/cavs/lib/pm_memory.h\xd8:472

Here copy the last character from the filename together to fix the issue
and eventually got correct output like this:
	.../include/cavs/lib/pm_memory.h:472

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",118,40,0
"thesofproject/sof","246de4bd4144b79fadb05c75f138e6f31b395ee0","slawblauciak","2018-10-11 12:04:47","false","test: Partially fixed alloc unit tests

Unfortunately tests for buffer/runtime zones will remain broken,
might require some rework in the firmware code.
For this reason, they shall be temporarily disabled.

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",33,4,0
"thesofproject/sof","1af8ba0d1cbcb8236519946c55cfbe12726a4af5","keyonjie","2021-06-09 04:20:08","false","handler: invoke platform_context_save() in ipc_pm_context_save()

Invoke platform_context_save() routine to perform platform specific
suspending stuff, before handling the CTX_SAVE IPC.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",81,36,0
"thesofproject/sof","7e689527e8b58adf768f7f6cafdf04b802e7e038","keyonjie","2020-07-15 09:14:40","false","kpb: move the switch check out of the loop to optimize the draining

Move the switch check out of the loop, to optimize the
kpb_drain_samples() and speed up the draining itself.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",82,25,0
"thesofproject/sof","48616b20925b6eeed786d8ad1ca892055df32132","btian1","2023-09-04 06:37:31","false","audio: module adapter: create ipc3 and ipc4 specific source file

create ipc3 and ipc4 specific source file, these files will
only be used to store specific code accordingly.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",23,63,1
"thesofproject/sof","3a1c4f9df6243231d36ff11a6ec5f6a10b054685","ujfalusi","2022-05-24 11:14:52","false","ipc4: cavs: power_down: Send SET_DX reply on power down

Skip sending reply message to a SET_DX if pm_prepare_D3 is set and do it
in power down time in a same way as it is done with IPC3.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",116,48,1
"thesofproject/sof","a01fd66665530d200ba9d52fd0f66a1ea9b024bf","lgirdwood","2018-11-17 09:45:57","true","Merge pull request #132 from cujomalainey/soft-cleanup

SOFT cleanup",40,5,0
"thesofproject/sof","ae793d26e6dd1441400be061d520db5b1545a028","lgirdwood","2018-08-04 17:19:19","true","Merge pull request #189 from tlauda/topic/dai_xrun

dai: stop DMA unconditionally on xrun",16,2,0
"thesofproject/sof","cfd15cab6c534de43a506f933da2b80013e91f7d","mrajwa","2019-04-09 11:39:05","false","KPB: update of init draining procedure

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",48,10,0
"thesofproject/sof","0d35bf84f3e95de167cfdee35e9079d42c0a2a72","mrajwa","2021-07-27 18:01:20","false","memory: add support for L1 DRAM

This patch adds support for L1 DRAM memory. If this
memory is available bootloader will try to power up
as many banks of L1 DRAM memory as the platform supports.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",103,38,0
"thesofproject/sof","b180af8ba7a90e0662be53edcd9525ce6e985866","lgirdwood","2018-10-08 15:06:26","true","Merge pull request #452 from mmaka1/clk-gating

plat: apl: clock gating adjusted for dai, dma, and cores",34,4,0
"thesofproject/sof","18c99508554a72993c9d22c8d54b6cbeae53246c","lgirdwood","2018-09-28 07:39:47","true","Merge pull request #82 from keyonjie/master

topology: add topology file for hda generic machine",36,4,0
"thesofproject/sof","969d008f78fd39b743e32b4f5c50cff8b991a355","mrajwa","2020-10-07 16:37:56","false","component: add ""codec adapter"" component

This introduces new SoF component called ""codec adapter"".
It provides means to process samples through external codec
libraries. This part implements only the SoF component.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",67,28,0
"thesofproject/sof","7f80908f28b3535787d885adc4750f266fdf4b93","johnylin76","2023-01-20 07:51:35","false","topology1: set Speakers PPL running on C1 by default

For Intel platforms, C0 is on by default for processes necessary to
run in low power cases, while C1..3 for processes with higher loads.
This commit moves the default core to C1 for Speakers pipeline.

At the same time, we found this commit can resolve the DSP panic
issue on builds with 3P post-processing solutions running on Speakers
pipeline.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",56,56,1
"thesofproject/sof","82b4da291b2aee3bbe719e2763ddfed7f1880f02","jajanusz","2019-01-15 20:20:41","false","cmake: defconfigs support

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",54,7,0
"thesofproject/sof","901511328077cf0f9c3ddc86b116ec1d924db583","jajanusz","2020-01-11 16:11:18","false","platform: intel: dai: add MCLKs count

Change hardcoded MCLKs count to define.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",76,19,0
"thesofproject/sof","075ccfe7ce22361724b8a26079b4345fd2c848f0","jajanusz","2019-02-06 19:25:20","false","dai: remove ssp loopback mode

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",55,8,0
"thesofproject/sof","9944905a7c3950f0f20e8623c9ca7842d58c43ed","lrgirdwo","2018-08-29 15:48:29","false","Merge remote-tracking branch 'gh/glk-003-drop-stable'",24,3,0
"thesofproject/sof","c8551e3563d612596cacf4156d305338acc6a2a0","plbossart","2022-06-24 20:25:02","false","topology1: sof-tgl-rt711-rt1308: add missing switch

For some reason we never added the switch in this topology, with leads
to a missing control when parsing UCM files

BugLink: https://github.com/thesofproject/sof/issues/5950
BugLink: https://github.com/alsa-project/alsa-ucm-conf/issues/179
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",113,49,1
"thesofproject/sof","f0eedcbab7b25a99dade034d594d028684484cf2","lrgirdwo","2019-06-04 12:46:06","false","abi: user: make it obvious how to use ABI header from userspace.

Add more comments describing usage of header from userspace.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",64,12,0
"thesofproject/sof","e0f66747e0ef265566967e676d77d7930c97b5e3","ranj063","2021-09-15 16:10:26","false","comp: remove comp_shared_commit

It does nothing atm and can be re-introduced later when
needed.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",117,39,0
"thesofproject/sof","4d23794607fba02eda67c28ce052918e70a04df9","ranj063","2021-12-12 05:12:01","false","topology2: mixin/mixout: Add audio formats and new attributes

Add audio format objects and num_audio_formats attribute.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",120,42,1
"thesofproject/sof","3835846836d43cf142e9e6420ee864b509540ec3","ranj063","2023-05-20 18:55:07","false","topology2: sdw-amp-generic: Show all aggregated DAIs on the graph

When there are aggregated amps, the topology includes a DAI copier for
each aggregated DAI. But, since the second DAI is not connected to
anything in topology, it doesn't show up in the graph. So, add a virtual
widget and connect it to the aggregated DAI and the gain module to show
its existence in the graph. When parsing the topology, the kernel
ignores all routes that contain a virtual widget at any end of the
route.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",53,59,1
"thesofproject/sof","5db5f95cb01d8c18cbb2ae3c7e60aed88da63a8f","ranj063","2022-11-17 21:35:55","false","dai-zephyr: Fix an erroneous free

Do not free the config->elem_array when there's no error.

Fixes: 3d0e327b4bed ('dai-zephyr: free allocated memory in error paths')

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",97,53,1
"thesofproject/sof","9a89f4eb809d0a8aedef48c717f25f8743eeeda7","ranj063","2022-01-10 22:34:16","false","codec_adapter: fix states before and after processing

set the state to MODULE_PROCESSING before starting to process the
samples and reset it to MODULE_IDLE afterwards.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","bdd3bf2409f9cbc3d12921336b2124672587e504","ranj063","2023-06-12 17:01:57","false","topology2: cavs-nocodec-bt: Replace audio_format objects

Use the input_audio_format/output_audio_format objects instead.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",47,60,1
"thesofproject/sof","9a5cadcf2b2f40c0017125211bbc8824f0c957fa","ranj063","2023-08-17 01:40:17","false","tplg_parser: Introduce debug print helper

Useful to turn on/off the topology parsing logs at run-time.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",24,63,1
"thesofproject/sof","9c499bc1d683e96af34b6e30070df4879924baea","cristinailie","2021-03-08 13:40:50","false","topology: imx8m: add kwd component with wm8960 codec

Adapt the apl KWD topology to imx8m by switching to
SCHEDULE_TIME_DOMAIN_DMA on capture pipeline and
creating a no LP capture file for KFBM component.

Signed-off-by: Cristina Feies (ilie) <cristina.ilie@nxp.com>",73,33,0
"thesofproject/sof","41554a03186f5a1a7b8859a6b055b5ca33458fd6","tlauda","2019-02-19 12:26:26","false","pipeline: do not trigger across pipelines

Changes flow to trigger only current pipeline.
Stops on meeting component from the other pipeline.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,8,0
"thesofproject/sof","22e3cf935bd71c7d42a39f0c4389c78a25837ddc","tlauda","2019-03-04 13:06:34","false","mixer: add arguments to mixer trace methods

Adds possibility of adding arguments to the mixer
trace methods.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",67,9,0
"thesofproject/sof","e20dcd9ff484f2bb2775a09171d0d0c82a9a9f7c","tlauda","2019-07-17 11:38:39","false","spinlock: move DEBUG_LOCKS and DEBUG_LOCKS_VERBOSE to Kconfig

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",46,14,0
"thesofproject/sof","0825f1b2e7b047298fec282d2b9153ce35f36274","tlauda","2018-07-31 12:39:38","false","cnl: pm_runtime: increase L1 exit time

Increases L1 exit time for CNL platform to make sure,
that Host DMA transferred needed data.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",17,2,0
"thesofproject/sof","c79146e05ed0954a5f3763cd717e9c19cc025791","tlauda","2018-06-22 12:17:25","false","cavs: platform: clear memory windows

Clear memory windows after initialization on APL and CNL.
They were recently moved to the beginning of HPSRAM and since
that area is also used by ROM, there was some unneeded data left.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",5,1,0
"thesofproject/sof","85f88aa98cbfcc3c5c137177a32a284fbeb447d7","tlauda","2018-08-24 13:05:23","false","cpu: use arch_cpu_is_core_enabled in other functions

Code deduplication by using already implemented
arch_cpu_is_core_enabled function.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",21,3,0
"thesofproject/sof","da39550a4f1304c99bc3f75fc90b08fa7dcabf50","saisurya-ch","2023-06-20 07:26:17","false","src: arch: xtensa: configs: add defconfig

Add defconfig for vangogh platform.

Signed-off-by: SaiSurya, Ch <saisurya.chakkaveeravenkatanaga@amd.com>",46,61,1
"thesofproject/sof","51310587f0a616a90e90c36115b33b2a9a252d58","marc-hb","2022-11-21 23:33:03","false",".github/sparse-zephyr: show full log first, then filtered sparse issues

Implement Guennadi's idea in #6590

Discarding all the output is too confusing.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",96,54,1
"thesofproject/sof","8328cc50a9e56a48e2533c1e57fd9aade0a503d5","marc-hb","2022-08-31 12:58:21","false","xtensa-build-all.sh: add rmb to default platforms built with `-a`

The rmb toolchain was added in commit 4e85dfc95fbb (""docker: add
AMD/Rembrandt gcc toolchain"") and before.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",115,51,1
"thesofproject/sof","cb656fe5cdf953b9ae5a41247fc35b6f6928390a","marc-hb","2022-09-21 21:52:52","false",".github/zephyr.yml: fix IPC3 / IPC4 comments

MTL is IPC4 by default.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",96,52,1
"thesofproject/sof","082cc8fbd173bddbf4da7b04bfbf5fac493a900f","marc-hb","2022-11-21 20:46:12","false","zephyr/docker-build.sh: give PATH precedence to a local sparse

Adjust PATH to give precedence to any local sparse. New precedence:

1. zephyr-workspace
2. /opt/sparse/bin
3. Anything else in default PATH

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",96,54,1
"thesofproject/sof","7bdbe295ef0cbafdd047d5352fb343c6f33fe2d0","lyakh","2021-05-19 08:59:56","false","ll-scheduler: use a correct function to initialise a list head

In scheduler_free_ll() sch->tasks is a list head, not a list item.
Use list_init() instead of list_item_del() to initialise it.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",87,35,0
"thesofproject/sof","179e2daa66f4b53430267a2f5fe6c1833f780acd","lyakh","2022-04-06 13:40:46","false","eq_iir: fix buffer acquisition

Instead of acquiring and releasing buffers locally multiple times,
do that once for .copy() and .prepare() methods.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",111,46,1
"thesofproject/sof","7fd51425f68cfe9111cde2680c7f96df788ac167","lyakh","2019-01-10 10:25:58","false","dw-dma: (cosmetic) simplify assignments

Replace multiple occurrances of assignment sequences like
	a |= x1;
	a |= x2;
with a simpler
	a |= x1 | x2;

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",57,7,0
"thesofproject/sof","9a7a5ce17dcb339e3fd667c8f12dd50db13afe31","lyakh","2021-07-09 14:58:44","false","pipeline: trigger START from the task context

When the firmware receives a START or RELEASE IPC message, it
immediately triggers all involved components, which starts DMA.
Then it schedules the pipeline task, but since the scheduler can be
already running at that time, the task might be scheduled when DMA
data isn't available yet or has already overflowed. To fix this
change the control flow to also trigger all components from the task
during its first run. Actual data processing then begins with the
next period. Note, that this is currently only possible with
pipelines, using timer-based scheduling. Pipelines, using DMA
interrupts for scheduling are unaffected.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",87,37,0
"thesofproject/sof","ef37adc2885e3ddec59f5a8e3ac3b6b4b596362a","libinyang","2022-12-22 01:53:21","false","topology2: add dai-kpb-be pipeline

dai-kpb-be pipeline contains a copier DAI component and a kpb component.

Signed-off-by: Libin Yang <libin.yang@intel.com>",93,55,1
"thesofproject/sof","2e6bfbec1ccc069129b3f91212fc8e6af04284bb","MingJenTai","2022-04-01 00:30:01","false","RTNR: Decouple switch-enable control from params blob

This PR is based on https://github.com/thesofproject/sof/pull/5616

It decouples the switch-typed control for enabling/disabling from the
control bytes.

Previously, control blobs should be sent from userspace to to toggle
RTNR on/off.
With this PR, RTNR can be toggled by setting the UCM switch value.

cset ""name='RTNR10.0 rtnr_enable_10' off""
cset ""name='RTNR10.0 rtnr_enable_10' on""

or from command line

amixer -c0 cset name='RTNR10.0 rtnr_enable_10' 1
amixer -c0 cget name='RTNR10.0 rtnr_enable_10' 0

Signed-off-by: Pin-chih Lin <johnylin@google.com>
Signed-off-by: Ming Jen Tai <mingjen_tai@realtek.com>

merge copy_func",113,46,1
"thesofproject/sof","b49a170cafb58721f835904abf6f226715c4e00a","RanderWang","2021-09-03 05:19:03","false","ipc4: pipeline: fix dsp panic in multiple pipeline cases

source & sink components are set when pipeline is complete,
so skip these components check when pipeline is set to
complete.

Signed-off-by: Rander Wang <rander.wang@intel.com>",119,39,0
"thesofproject/sof","7c400d0f7f8f1e868e7a576c2526513bb32dc97a","RanderWang","2018-09-07 09:55:15","false","byt: remove waiti on byt

waiti would cause FW panic if it is called in irq level
higher than passive level.

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",31,3,0
"thesofproject/sof","7bc3cfc946a04cbceebf7d0202a6d490c85dca72","aiChaoSONG","2023-01-31 08:03:06","false","config: mtl: add smart amp test module config

This patch adds smart amp test module config for mtl.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",52,56,1
"thesofproject/sof","e4f9a029a150745a9018e5b68bcd7066df85e5fd","lgirdwood","2018-08-21 14:30:03","true","Merge pull request #224 from tlauda/topic/cached_uncached_macros

memory: add cache_to_uncache and uncache_to_cache macros",19,3,0
"thesofproject/sof","40bf6b7127fc64afbad3ed15e3d8b2c547e9ae80","lgirdwood","2018-07-20 09:17:36","true","Merge pull request #132 from xiulipan/bufferinc

apl: memory: expand number of 256 Bytes block to be 128",13,2,0
"thesofproject/sof","ab8acab4e5a16f8734d843affc5a3f5f7105e231","lgirdwood","2018-06-25 13:55:57","true","Merge pull request #15 from keyonjie/master

multiple SSPs/BEs support for SOF--SOF Part",4,1,0
"thesofproject/sof","2776042ce579a980e4070975cb23983923aa86cd","pblaszko","2023-06-05 12:56:52","false","aria: fix in/out buffer overflow

In specific cases, Aria could get more than 1ms of data in input buffer
and more than 1ms free space in output buffer. In such case, Aria tried
to process more than 1ms, while internal buffers and algorithm are
prepared only for 1ms of data. In result buffer overflow was observed
and other module data was overwritten.

Limiting Aria processing size to IBS.

Signed-off-by: Przemyslaw Blaszkowski <przemyslaw.blaszkowski@intel.com>",45,60,1
"thesofproject/sof","e7a1592002dda693ec1e34220b6eac354859d46a","RanderWang","2023-09-25 05:29:46","false","topology2: use input|output audio format

The old style is not used now.

Signed-off-by: Rander Wang <rander.wang@intel.com>",22,64,1
"thesofproject/sof","84befa2563f3cf74099f28da91d9bf3ab4031f02","RanderWang","2023-08-11 07:18:30","false","zephyr: cpu: init cpu if context save is not support

Fix multicore test issue on cavs platforms which don't support context
save now, so need to init cpu when the core boot up.

Signed-off-by: Rander Wang <rander.wang@intel.com>",27,62,1
"thesofproject/sof","8f5baceaff06189f0dfe9921686d49ebf177c1c9","libinyang","2018-11-09 06:17:19","false","dw-dma: fix dw_dma_work reschedule issue

If the channel is not running, we should remove the task of dma work.

This patch fixes the coverity issue below:
static uint64_t dw_dma_work(void *data, uint64_t delay)
1063{
1064 struct dma_id *dma_id = (struct dma_id *)data;
1065 struct dma *dma = dma_id->dma;
1066 struct dma_pdata p = dma_get_drvdata(dma);
1. var_decl: Declaring variable next without initializer.
1067 struct dma_sg_elem next;
1068 int i = dma_id->channel;
1069
1070 tracev_dma(""wrk"");
1071
1072 / skip if channel is not running */
2. Condition p->chan[i].status != 5, taking true branch.
1073 if (p->chan[i].status != COMP_STATE_ACTIVE) {
1074 trace_dma_error(""eDs"");
3. Jumping to label out.
1075 goto out;
1076 }
1077
1078 dw_dma_process_block(&p->chan[i], &next);
1079
1080out:

CID 324979 (#1 of 1): Uninitialized scalar variable (UNINIT)
4. uninit_use: Using uninitialized value next.size.
1081 return next.size == DMA_RELOAD_END ? 0 : p->chan[i].timer_delay;

Signed-off-by: Libin Yang <libin.yang@intel.com>",41,5,0
"thesofproject/sof","db1e17d8802788e1d50533badba397ab820e5c98","abonislawski","2019-04-12 14:07:26","false","coredump-reader: grep gdb output to print only interesting parts

this will hide default starting gdb prints

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",47,10,0
"thesofproject/sof","3b0fd1e2038562cf306b808991ec1ea1e28a1111","ranj063","2022-04-01 03:11:37","false","topology2: abi: fix size of ABI bytes

The major/minor/patch values are represented with u16 in the FW. So,
change the numbers of bytes to match that of the FW when adding the
ABI to the topology manifest for IPC4. For IPC3, we still only use 3
bytes as there's no clean way to increase the number of bytes without
breaking backwards compatibility with the older kernel. There are no
topologies using topology2 for IPC3 today but it is possible in the
future.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",113,46,1
"thesofproject/sof","f90c69c5aebd41dae1dfd69c60de3063ddddd400","makarukp","2022-11-29 12:29:09","false","mtl: hda: enable chain dma

Enable building chain dma component on MTL platform

Signed-off-by: Piotr Makaruk <piotr.makaruk@intel.com>",102,54,1
"thesofproject/sof","d4df1f647bd14719f498841ea845fcb8e227f612","tinghan-shen","2022-01-11 06:28:40","false","drivers: mtk: Add drivers for mt8186

Add interrupt, timer, and ipc drivers for mt8186

mt8186 DSP has 32 interrupts.

Signed-off-by: Tinghan Shen <tinghan.shen@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",115,43,1
"thesofproject/sof","914b855d72718ec204138f0bf76b4ba636702718","ranj063","2023-06-28 17:14:44","false","topology2: components: mixout: Replace audio_format object

Use the input_audio_format/output_audio_format objects explicitly.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",38,61,1
"thesofproject/sof","33fa026524847c0bc15aecea8340baf6492e7b07","ranj063","2022-12-22 14:37:44","false","module_adapter: Add flags to skip source/sink buffer invalidate/writeback

Some modules like the mixin/mixout do the invalidate/writebacks for the
source/sink buffers themselves. So, add flags in struct
processing_module to skip doing the same again in the module adapter
code.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",92,55,1
"thesofproject/sof","bacada5c6bf9d1d724fd2adc2e853339c126d1fa","ranj063","2018-06-28 03:57:39","false","host: fix rzalloc function

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",6,1,0
"thesofproject/sof","867ada28fead9a97e638733de37fd557e368f56c","ranj063","2023-07-05 05:17:32","false","audio: module_adapter: Allocate max number of input/output buffers

Allocate input/output buffers based on the maximum number of
sources/sinks supported by the module. The current logic would only
allocate 1 input/output buffer if the module prepare is invoked before
all its sinks/sources are bound.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",35,61,1
"thesofproject/sof","0759e154cfa5222b4ec0529e017727ba6d68c1cd","ranj063","2022-03-23 22:33:48","false","codec_adapter: rename codec_adapter_trigger()

to module_adapter_trigger(). No functional changes.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",109,46,1
"thesofproject/sof","6c13aad7116b3e1353a6375eed1758560ab9751d","brentlu","2021-11-26 01:05:04","false","topology: sof-adl-max98360a-rt5682-4ch: add new topology

Add support for four max98360a speaker amplifiers running in TDM mode
which format is 8 slots with 32 bit slot/sample width on ADL boards.

This topology implements a 4-channel pipeline directly to speaker
amplifiers so audio effects need to be done in user space.

Signed-off-by: Brent Lu <brent.lu@intel.com>",128,42,1
"thesofproject/sof","32b1021080f04eebdcb8d523ed306684a63fbeb7","keyonjie","2019-06-27 08:53:43","false","sof-ctl: add '-b' mode to support binary format input file

Adding support to binary input file, using '-b' to indicate that.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",46,13,0
"thesofproject/sof","d19573e4292f7b554598ee92552aad2b967d4725","keyonjie","2020-11-19 09:35:54","false","ssp: add helpers to handle runtime ssp configuration

Create ssp_pre_start/stop() helpers to do kinds of runtime
configuration, and do the bclk request/release there to make sure the
bclk source is hold only when the DAI is active, this will help for
power saving at SSP idle.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",74,30,0
"thesofproject/sof","47c52ccfe43557653c0ef76fda0b3cd08e9f81cd","btian1","2022-09-28 02:27:29","false","Component: move comp_copy from header file to source file an

On sof zephyr ipc4 build, component performance profiling logs can't
be enabled due to current xcc compiler does not support inline
logging in header file, logs as below:

  log_level undeclared (first use in this function)
  log_current_const_data undeclared (first use in this function)

Move comp_copy to component.c can resolve this limitation.
However, this brings another cmocka issue for mixer unit test,
this patch also fixed cmocka mixer unit test issue.

BugLink: https://github.com/zephyrproject-rtos/zephyr/issues/43786
Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",97,52,1
"thesofproject/sof","dd2a64ba1afedb6ec915204ed766ecb8c3964ed9","btian1","2023-09-04 01:32:29","false","audio: host-zephyr: remove redundant return

there are two return in common update, remove the first
to save cycles, test platform is tgl board with debug sof
build, it can save cycles from 455 to 452.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",24,63,1
"thesofproject/sof","3d3e6f8cdb7f136a04830cf84357030ab0cc6775","dbaluta","2019-02-01 15:15:40","false","rimage: Refine sof fw blk type

Change the name of the enums to reflect the type
of memory where the given block will be loaded.

DATA section is mapped to DRAM, TEXT section is mapped to
SRAM. No ABI breakage.

We also reserve several slots for future use.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",58,8,0
"thesofproject/sof","857fb13ea6b41667f94e30628e2a415169a5082e","lrgirdwo","2019-04-02 13:58:04","false","github: don't automatically assign features and bugs.

Assignment will be manual via GH issue page.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",51,10,0
"thesofproject/sof","ea08faf5b0f3173a413206b9f9a9b8c6c28739b5","plbossart","2018-08-08 01:21:07","false","kmod_scripts: look for timeout errors and stop loops

Timeout errors happen randomly but need to be checked.
This helps check issues reported at
https://github.com/thesofproject/sof/issues/209

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",18,2,0
"thesofproject/sof","99b3b1908dc48ba205c96c0a53021df7dc157ed8","maruthi-machani","2022-11-09 05:19:23","false","drivers:amd:i2s tdm configuration

configuration to support i2s tdm for amd platforms

Signed-off-by: MARUTHI MACHANI <maruthi.machani@amd.com>",92,53,1
"thesofproject/sof","8dc05c5fd46ba34264570e7099d3d379455ceca4","lyakh","2021-11-11 13:13:13","false","pipeline: (cosmetic) use a dedicated no-action trigger value

Currently -EINVAL is used to indicate an invalid trigger code,
requiring no handling. Use an explicit new COMP_TRIGGER_NO_ACTION
value for that for better clarity.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",127,41,1
"thesofproject/sof","1ec9fc1fbfd3616cdc8872255df614405ca7a22f","lyakh","2022-04-06 13:30:23","false","src: fix buffer acquisition

Instead of acquiring and releasing buffers locally multiple times,
do that once for .params(), .copy() and .prepare() methods.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",111,46,1
"thesofproject/sof","9a6569d48c2ce1f95589a3074f0d15dbd0e43234","lyakh","2021-11-17 11:12:56","false","topology: nocodec: fix graph drawing

No functional change, only fix an ASCII-art topology representation
in a comment.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",128,41,1
"thesofproject/sof","2a8fd7d2060c03f1d61c2c1ccec9f7db3520fb9a","maruthi-machani","2022-10-19 07:09:06","false","platform:amd:support for fence register change

support for IRAM fence register change.

Signed-off-by: MARUTHI MACHANI <maruthi.machani@amd.com>",98,53,1
"thesofproject/sof","7da08bed487e472d285bcb531b09d104ef4a9798","ktrzcinx","2020-08-19 11:18:03","false","logger: Enable LDC and FW compatibility check by default

By default user should use compatible files.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",75,27,0
"thesofproject/sof","a6726cf2d84583c5488d02e7794b51cd95521030","ktrzcinx","2020-02-03 10:43:42","false","dw_dma: Remove redundant write pointer increment

Function dw_dma_increment_pointer is called in each
dw_dma_copy and moves write pointer by number of passed
bytes a priori. Its why this function shouldn't be called
after dma stops before whole transmission ends.
It leads to misalignment in data stored in any queue between
source buffer and output, with data written to this interface
and glitch when first data after release command come.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",75,20,0
"thesofproject/sof","3670079b09a4d7752987ed0ae59c8741f18bb328","ktrzcinx","2020-01-17 09:15:38","false","kpb: Mark source buffer as const in processing functions

Const keyword is added to explicitly indicate that nothing in given
source buffer can be changed in processing functions - read pointers also.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",79,19,0
"thesofproject/sof","3e20076f979830e7bdf615bad7d3643680cf7398","ktrzcinx","2021-08-31 16:10:04","false","config: Return error value in parse_uint32_* functions when key is not found

Return value, for error case should be unified.
For those functions, default error value is UINT32_MAX.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",118,39,0
"thesofproject/sof","f79d8d7f1ed5d1f25102a90f63740b6bdbe6f469","ktrzcinx","2020-03-27 10:00:29","false","elf: Add function to read section content with allocation

In many functions there is need to read user section content
and check firmware version or write section content to some
manifest or dictionary. Previously to do it, in each function
was loop to search for proper section in proper module,
then allocate buffer, read content and check for possible error
between each step what is quite overwhelming. After change there
will be one function responsible for this task.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",67,22,0
"thesofproject/sof","af3b8b99a2d505c9693e80b3cea3d6b10c4aee89","ktrzcinx","2020-12-02 10:15:12","false","ipc: debug: Add shared memory heap to memory scan

Newly added heap should be taken into account during memory usage
scanning.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",75,30,0
"thesofproject/sof","30f7931c4e51a27a0570b6c2eabc048c580e3884","cujomalainey","2021-04-20 20:50:59","false","tplg_parser: don't use void * in pointer math

Void * math is technically undefined, so for portability sake lets not
use it.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",89,35,0
"thesofproject/sof","c42613afd715c1266f40c38cabad81db0b49fc32","dbaluta","2023-06-19 12:48:40","false","app: boards: Add mimx93_evk_a55 config fragment

We plan to get rid of mimx93_evk_a55_sof board and use the
generic mimx93_evk_a55 board + overlays.

This patch adds the config fragment to enable mimx93_evk_a55 board for
SOF.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",45,61,1
"thesofproject/sof","3e64d476208ee511540bfd62790eb56848a7edf6","keyonjie","2020-06-01 03:52:52","false","topology: asrc: add uuid token support

Add the uuid token to asrc widget for the future use.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",97,24,0
"thesofproject/sof","3564b7dcdbb05da079053b7bc6390f15b88b8cfe","keyonjie","2020-03-17 08:36:38","false","topology: m4: add smart_amp component for smart amplifier usage

Add the initial version of smart_amp component for smart amplifier
widget, which will be use in the smart amplifier use case.

Todo: add blob kcontrol for it.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",78,21,0
"thesofproject/sof","110378d61c565259026302765cd41bb35fedcec8","keyonjie","2018-09-26 09:02:42","false","topology: sof-glk-da7219: update to use s32le format for HDMI pipelines

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",37,4,0
"thesofproject/sof","a3b3c525d1e0a98bca5fcc10adb6b40181a06cc7","ujfalusi","2022-09-22 13:44:11","false","west: update to newer rimage baseline

tgl-h zephyr build is broken due to outdated rimage revision.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",97,52,1
"thesofproject/sof","cf2aad76135b80a04297d2c264bce774dedf54db","ujfalusi","2023-08-28 12:33:37","false","ipc4: handler: Export ipc4_pipeline_prepare and ipc4_pipeline_trigger

Make the ipc4_pipeline_prepare and ipc4_pipeline_trigger available outside
of handler.c to be used to implement staged pipeline state phases.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",25,63,1
"thesofproject/sof","651791045aed0f67b7434d2b865a79e23c0477ca","btian1","2023-08-31 03:18:43","false","audio: volume: move volume header to volume folder

move them from include path to volume folder.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",23,63,1
"thesofproject/sof","7d9a3ca030b3e6a5504520deb5614ad5203d2dcb","btian1","2023-08-30 06:10:01","false","audio: volume: move volume out from module adapter

move volume from module adapter to src/audio directory, it is a
critical audio component.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",25,63,1
"thesofproject/sof","1c78031889cb7ddb59152ffad4b870acd5524e27","ranj063","2022-06-07 19:26:12","false","copier: remove get_attribute op

The get_attribute op for copier is used to determine whether the
direction has already been set or not so that the handler can skip
resetting the direction for host/dai components. Remove the op and use
the new fieldm direction_set in struct comp_dev to determine whether the
direction should be updated or not. Also, set the direction_set flag for
host/dai copier when it is created.

This change is in preparation to convert the copier module to use the
module interface instead of the comp_drv ops.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",117,48,1
"thesofproject/sof","3e8526110c3d976d7c253f9d8a9ce5768ab0b753","lyakh","2021-04-22 11:45:59","false","zephyr: fix build: add a missing IPC file

Commit b3f195e92a71 (""zephyr: fix build with recent file name
changes."") partially fixed a regression, caused by 4e436f8570be
(""ipc: split out ipc functions into separate files."")
partially. This patch completes the fix.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",91,35,0
"thesofproject/sof","82857a78ba04342369c2a903c0a6c0f7d0efca00","lyakh","2021-09-03 13:01:20","false","ipc: fix a IPC completion race

A race currently exists in IPC completion code. When processing the
pipeline TRIG_START command on timer-domain pipelines, processing is
postponed to the pipeline task. Usually the IPC task continues and
completes before the pipeline task. The IPC task notes, that the
command is processed in the pipeline context and doesn't send a
reply to the host. Then the pipeline task executes the command and
notifies the host.

However, occasionally the timer interrupt occurs while the IPC task
is still active. It will start processing the IPC command in the
pipeline context and reply to the host. The host then can send the
next IPC command before the IPC task in the firmware has completed.
This then produces an error trace:

ERROR schedule_edf_task(), task already queued or running 3

and the IPC is dropped.

This commit fixes the race by making sure in asynchronous cases the
last of the two contexts notifies the host.

BugLink: https://github.com/thesofproject/sof/issues/4706
Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",119,39,0
"thesofproject/sof","19ac2359c8768081c7a2964a576f158de237fee9","lyakh","2019-02-22 10:09:25","false","interrupt: SOF_IRQ_NUMBER() for DSP interrupts is not needed

DSP interrupts have their own interrupt number in parent interrupt
bits, therefore using SOF_IRQ_NUMBER() for them is redundant.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",61,9,0
"thesofproject/sof","b735047b911aa1ebb705f51603939d6ac3d88068","lyakh","2020-03-31 15:25:40","false","topology: add a ""core"" parameter to the W_DETECT() macro

This places all SectionWidget.DETECT* topology widgets, created by
the W_DETECT() macro on the same core, on which the respective
pipeline is scheduled.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",69,22,0
"thesofproject/sof","f60dd8527c816176899813a5a892dd0d9232c527","lyakh","2022-03-10 10:55:09","false","ssp: resolve a name conflict

mn is a name of a structure, a field in a structure, a static object
and a local variable in several functions. Use a different name to at
least avoid conflicting static and local variables.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",113,45,1
"thesofproject/sof","ea8055de143a944305c71f48786e853356d445f0","lyakh","2020-01-17 14:36:04","false","topology: APL: add an SSP5 capture pipeline

HiFiBerry DAC+ADC codec card also contains a line-in jack for analog
audio recording. This patch adds support for it.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",79,19,0
"thesofproject/sof","2dfaee6a7d872ae8baab03026a56da76da6a64f3","marc-hb","2022-12-20 23:15:48","false","logger: convert.c: move global_config->logs_header to the heap

Finish the job that commit 5b29dae9c870 (""logger: Create global
convert_config variable to avoid spaghetti code."") started but did not
complete, leaving a confusing mix of globals and locals.

This confuses some static analyzer complaining that stack values are
being returned, see #6858 and #6738. This is a false positive because
convert's() stack lifespan is practically the same as a global but let's
simplify things anyway.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",90,55,1
"thesofproject/sof","0c3f5dd475d35316ff19ec463af62c1a17d419d9","ktrzcinx","2020-02-24 13:09:50","false","ext_manifest: Include firmware version

Include such an information in extended manifest, to make it accessible
from host side before firmware load and run.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",77,21,0
"thesofproject/sof","f4e01789f055a69581aba30e1ccb86eba9c0a1af","ktrzcinx","2020-09-22 14:18:48","false","travis: Treat warnings as errors

Then each warning message should be addressed.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",66,28,0
"thesofproject/sof","3b2398a97d731333e78dbf50cf5d68dd799900ac","ktrzcinx","2020-09-22 14:15:00","false","travis: Add more warnings to make command

Warnings may point some fatal error in source code.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",66,28,0
"thesofproject/sof","b5043671896b5637c0c33be1efb2a614e69686d1","ymdatta","2020-06-09 09:55:51","false","ipc: use macro instead of a magic number for timeout period

Currently, in the ipc_schedule_process function, when we call
schedule_task to schedule an ipc task, we use magic number to
indicate the time kernel waits before calling timeout on an
IPC. This makes it difficult to search for the timeout period
using grep and other utilities. Replacing it with a macro makes
it easier to search and change only at one place.

Signed-off-by: Mohana Datta Yelugoti <ymdatta.work@gmail.com>",73,24,0
"thesofproject/sof","98f0b36666b0fe7d40a3aee08a19022010e003e4","lgirdwood","2018-11-16 20:55:35","true","Merge pull request #589 from lbetlej/ldo_ctrl_on_D3_entry

LDO control on D0->D3 transtion for CannonLake",40,5,0
"thesofproject/sof","a9faf85fe50fb01c7aa6d86607142ed5c60936c8","mrajwa","2021-09-14 07:12:49","false","remove '-x' option

This patch removes the unnecessary and unscalable -x option.
This option aims to add an offset to the .data section of
its parent .module section. This is horrible idea because this
offset will vary depend on the compiler used. It is better and
much easier to just store only the .data section so the offset
is always 0.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",117,39,0
"thesofproject/sof","fab2f4e782590897d9838a28b6aa2e1857e936ba","lgirdwood","2018-06-22 12:56:29","true","Merge pull request #11 from tlauda/issue-6

cavs: platform: clear memory windows",5,1,0
"thesofproject/sof","e7af08b241a9f7be59af86fba71a2d9ed9fb1e0b","jajanusz","2019-06-12 21:29:48","false","kconfig: hide cavs menu if not supported

If all symbols in menu are not selectable if some
other symbol is not present, then there is no point
in showing that menu.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",48,12,0
"thesofproject/sof","f6f57fe82b2f4487deb4f49674f974c706622c96","bardliao","2023-06-08 09:13:02","false","Topology2: sdw-jack-generic: add 1 ch format support

Some codecs like cs42l42 support 1 channel capture only.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",46,60,1
"thesofproject/sof","c809af816859f7213d67a90c04efff57f7b05a59","singalsu","2023-06-29 17:02:34","false","Config: Add crossover component for TGL and TGL-H cAVS platforms

The configuration is for now copy from IIR, name and UUID are
changed. The init_config is set to 1 to let kernel know that the
base_cfg_ext is passed to firmware.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",38,61,1
"thesofproject/sof","8e7c07dd00ff9abf04be25b9f01922b02b6f57f1","singalsu","2021-10-15 13:53:07","false","Audio: TDFB: Fix issue with different input and output channels count

This patch adds method tdfb_params() where comp_verify_params() is
called with BUFF_PARAMS_CHANNELS. With it the TDFB can get the
different channels count buffers for source and sink and initialize
correctly.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",122,40,1
"thesofproject/sof","00bbb113d0a99c56958f5eadb498424b8bef8c67","tlauda","2019-04-09 12:30:55","false","schedule: switch IPC and IDC tasks to low priority

Switches priority of IPC and IDC tasks back to low.
They were accidentally switched to higher priority
during schedule refactor.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",48,10,0
"thesofproject/sof","2ee7a24f97d298ff9c4dec5943fcbe7c9e249a1d","tlauda","2019-08-05 08:36:08","false","byt: hsw: ssp: move spinlock init to earlier stage

Moves spinlock initialization for byt and hsw platforms
to earlier stage. Otherwise the output will be undefined,
since we are using the spinlock before initializing it
in platform_init sequence.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,14,0
"thesofproject/sof","4002483e7d8edc0199730b98b0c3723d355eb562","RanderWang","2022-03-15 09:32:41","false","ipc4: dai: reset llp position to 0 for dai_reset

Progress bar of audio player disappears when it is dragged by
mouse. In this case pipeline is first paused then reset.Driver
checks the llp position in memory windows by node id. Driver
can't find llp position since fw cleared node id. This patch
reserves node id for pause-reset case and only reset llp position.
The node_id will be cleared when dai is free.

Signed-off-by: Rander Wang <rander.wang@intel.com>",107,45,1
"thesofproject/sof","13c36f3207aae8ac3b7dec42db58b7f691609f7c","softwarecki","2022-12-12 13:42:11","false","module adapter: volume: Validation of channels count

The module operates on arrays whose size is based
on SOF_IPC_MAX_CHANNELS. Added check if the number
of channels given in the configuration does not exceed
the number of maximum supported channels.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",103,54,1
"thesofproject/sof","1aa421173b83c3b12f7298fd40aac9f6f0bcf402","bardliao","2018-10-09 10:22:28","false","dma-trace: remove specific reply

ipc_platform_do_cmd will send a standard reply when ipc_cmd() return 0.
So, we don't need to send a specific reply in ipc_dma_trace_config().

Signed-off-by: Bard liao <bard.liao@intel.com>",35,4,0
"thesofproject/sof","eee82cb10afc2b935e9c251b4aeddfd3556ab470","singalsu","2022-02-11 12:52:41","false","Audio: TDFB: Optimize read/write frag based generic C copy() function

The new samples processing loop uses audio_stream_without_wrap()
function to loop maximum amount of frames without source and
sink buffer pointers wrap check.

In a test with TGL-H and gcc build the performance was improved by
this patch 9.2 MCPS from 140 MCPS to 130 MCPS.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",107,44,1
"thesofproject/sof","3ee1d787382230e0e9d9a88b15127b5766791b78","marcinszkudlinski","2023-02-14 10:12:11","false","scheduling: add Data Processing scheduler type

The DP scheduler is a scheduler based on Zephyr preemptible
threads. It will start each SOF task as a separate Zephyr
thread.
At current implementation the scheduler can trigger each
task/thread periodically or on demand.
TODO: more sophisticated scheduling decisions, with deadline
and task budgets calculations.

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",55,56,1
"thesofproject/sof","2dcb2ebe1db009c6b6c7e0d168fc908d69dfd210","fredoh9","2020-11-16 20:58:24","false","topology: cnl-nocodec: update data format in comment

Updated s24le data format in comment to match with actual value.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",72,29,0
"thesofproject/sof","ee90a1fde62f912cbd36f3bcd5a05cf31d115b46","singalsu","2019-12-20 09:00:26","false","EQ FIR: Add note about reduced capability as xtensa gcc build

This patch adds the note into kconfig for COMP_FIR about
max. filter tap count restriction for xtensa gcc version.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",71,19,0
"thesofproject/sof","6ffcd61c19cfdb4a8215a854a08c22fe171b6c0d","tlauda","2019-10-10 08:41:45","false","ll_schedule: use domain property instead of sync/async flags

Changes ll scheduler implementation to use synchronous property
of domain to check if given task should be scheduled synchronously
or asynchronously. It makes sense, since it's heavily dependent
on particular domain functionality.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",63,16,0
"thesofproject/sof","04cf5d6aafb51a8759e8796ee63be9c6203643d5","tlauda","2019-10-05 11:26:13","false","platform: tgl: change scheduling interrupt

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",65,16,0
"thesofproject/sof","fdd04e9bf5990b59535eb386c86e080d478b8757","tlauda","2019-06-13 13:25:00","false","host: unify component for all DMA types

Unifies host component for all DMA types.
We don't need to branch on CONFIG_DMA_GW anymore.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",48,12,0
"thesofproject/sof","cc1cd8a4af1b4b6c87f9b9c1da055f96421dde28","singalsu","2020-12-01 13:00:23","false","Tools: Test: Fix Matlab compatibility in process_test.m

The set of figure property in figure() command is not supported
in Matlab. The separate set() property works for both Octave and
Matlab.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",75,30,0
"thesofproject/sof","796596d89622aac5b049f2f5573bf73e8eeb6327","singalsu","2018-10-05 12:31:09","false","Memory: Fix bug in previous commit that introduced 1k buffers

This patch fixes a regression caused by commit
b5308ee8e6eff51b0a2fea5a39a88d0de10edcfd. The HEAP_RUNTIME_SIZE
calculation equation macro missed this buffer totally.

The number of 1k buffers is also increased to four to reach size
that is multiple of 4096 like other buffer pools. Non-4096 size
seems to cause DSP panic.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",34,4,0
"thesofproject/sof","343b0ab47ef2df470ded35e6efd695e4db188c8b","marcinszkudlinski","2023-02-14 10:20:05","false","IPC4: add processing domain - LL or DP to component context

A component need to keep an information about how it need to be
scheduled - as LowLatency or DataProcessing. The information comes
from IPC4 init instance message

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",55,56,1
"thesofproject/sof","fd084b765cbe4a0d489f8ca5366b4b0d31a0b5b8","singalsu","2018-12-14 14:31:38","false","SRC: Add useful trace information to params()

The information is useful to see without further debugging if SRC
receives from topology a sane configuration.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",48,6,0
"thesofproject/sof","fed3d2f3a96c585a41806ccc364d224c0e2752b0","singalsu","2020-04-20 14:10:36","false","Testbench: Add definition for token SOF_TKN_COMP_CORE_ID

This patch adds the token into header file tokens.h. It is used for
topology parsing for testbench and fuzzer. The same token has been
already defined in topology m4 macros.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",80,23,0
"thesofproject/sof","b7d7d9dc6272f6850bedc2846ae43cc28e49a1b4","singalsu","2020-03-30 12:19:51","false","Tools: Tune: Cleanup of example IIR responses generator script

This patch makes the script more consistent with file names
and paths lets the script to output more useful example IIR
responses into m4 directory for usage with topologies and
testing.

The not consistent naming of IIR private data is aligned. The
label DEF_EQIIR_PRIV is used always that should be macro replaced
by pipeline specific name prior to including them into topology to
enable several EQ instances to be set up with different filter
coefficients.

The copyright text for updated files is updated to short BSD-3-Clause
version.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",67,22,0
"thesofproject/sof","e9048e4b7d2ae98b22548ca5048e3e183d10819f","singalsu","2022-02-09 16:22:28","false","Tools: Topology: Fix erratic FIR example response

The previous patch increased the FIR length but it also triggered
a numerical issue in FIR design with long minimum phase filters. The
filter became essentially a band-stop filter and causes difficulties
in test of EQ component. Also the equalizer sounds subjectively
bad. The fix is to change the design to linear phase that always
converges.

Fixes: 0d296ce7d179b75b3fd0c2178891c51a88e6ca6f

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",108,44,1
"thesofproject/sof","b0facccfc8dd50f87021934ec6f303eddda614d7","singalsu","2020-10-09 12:50:27","false","Topology: Use pipe-volume-switch-capture in nocodec topologies

This patch replaces use of pipe-volume-capture macro or
pipe-low-latency-capture to pipe-volume-switch-capture in nocodec
topologies for APL, BDW, CHT, CNL, ICL, and TGL based platforms. It
allows to test of volume component mute switch control in SSP loopback
that is used by default in nocodec topologies. The testing of mute
switch feature is simplest to do with loopback topologies. Nocodec
topologies are not in mainstream usage so this is the safest option to
enable testing.

The mute switch add should be possible to all capture topologies but
it can be done later once it is confirmed it is safe to do (avoid
accidental muted audio or problems with UCM).

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",68,28,0
"thesofproject/sof","6623073ca84dbc1e5ed7f30d9cceeb3b0161d67e","iganakov","2022-11-08 07:59:24","false","config: mtl: add kpb module

Add KPB module config

Signed-off-by: Ievgen Ganakov <ievgen.ganakov@intel.com>",93,53,1
"thesofproject/sof","9567c97fb32a4afcb05a07fd452475d3340f7059","kv2019i","2021-10-08 17:03:36","false","zephyr: enable cached heap by default for Intel cAVS platforms

Set default as yes for SOF_ZEPHYR_HEAP_CACHED for Intel cAVS.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",121,40,1
"thesofproject/sof","dba643cf2bd5011e24dc27eb346f7a507db919b9","kv2019i","2022-12-14 16:34:24","false","west.yml: upgrade Zephyr to c5b270e7b003

Total of 440 commits, including following related to
intel_adsp/sparse/dmic/xtensa:

603cc2704579 dma: Add max block count attribute
2c162449eb4c xtensa: linker: Fix #52539 by updating the linker scripts
2dd4cbc75592 dts: xtensa: intel: update cavs25_tgph to match cavs25

Link: https://github.com/thesofproject/sof/issues/6710
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",96,54,1
"thesofproject/sof","7d138380602093c7163d01c84b5c06c67ed0f993","mrajwa","2019-04-16 14:14:14","false","KPB: remove unused data types

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",50,10,0
"thesofproject/sof","bf01ad7ceb77ae1ba16d67831717e6e0fe8b0c4c","balakishorepati","2022-03-28 07:55:15","false","drivers: amd: rembrandt: Add drivers for amd/rembrandt

Add drivers for:
            * timer, ipc, interrupt - amd specific implementation
            * DMA, for copying data between HOST and DSP
            * BT DAI,SP DAI, HS DAI for Audio interface
            * I2S DMA, Controller for BT,SP and HS

Signed-off-by: Balakishorepati <balaKishore.pati@amd.com>",112,46,1
"thesofproject/sof","c33e1a367707f1c8a15dffcc5f89724b21c3dea7","lrgirdwo","2019-09-14 13:34:25","false","fuzzer: no need for extra new line.

message already contains the newline.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",60,15,0
"thesofproject/sof","52e4b00908b5e2f60d7a1b9b92a2ec1ac6e14b5e","plbossart","2019-08-07 21:10:47","false","kmod_scripts: handle renaming of pci/apci SOF modules

sof-pci-dev and sof-acpi-dev were renamed, so make sure we handle the
new names. The old ones are kept for backwards compatibility but will
be removed at some point.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",53,14,0
"thesofproject/sof","9845c9d4187ae6674005b6b09808302f10649247","lbetlej","2019-03-01 15:30:49","false","test: kpb component name fixed in a configuration file

kpb directory is now added to cmoka test afer CONFIG_COMP_KPB is set

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",66,9,0
"thesofproject/sof","96623e6038d61cae8e2407b920162c525caa8856","plbossart","2020-05-19 21:51:39","false","topology: remove sof-tgl-rt711-i2s-rt1308-nohdmi.conf

No one seems to be using this topology or they would have seen the
error below that DMICs are required on this platform.

[  8%] Generating sof-tgl-rt711-i2s-rt1308-nohdmi.conf

m4:tools/topology/sof/pipe-volume-capture-16khz.m4:54: bad expression
in eval (bad input): 2 * 2 * CHANNELS * 16
m4:tools/topology/sof/pipe-volume-capture-16khz.m4:57: bad expression
in eval (bad input): 2 * 2 * CHANNELS * 16

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",99,23,0
"thesofproject/sof","80aec89d550838cd604a16c8cbe736d616a66039","dnikodem","2022-09-22 08:50:43","false","include/ipc4: clean up fw_regs includes

There is no need to include dma.h to fw_regs header.

Signed-off-by: Damian Nikodem <damian.nikodem@intel.com>",97,52,1
"thesofproject/sof","0c5ddaf617121c04f3df78fd7b0d1fa3c3fee457","cujomalainey","2022-12-13 20:36:19","false","audio: google: fix include for aec mock

missed rtos specific header swap

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",98,54,1
"thesofproject/sof","f9ffa8d3e8aa946581056b708a67486dd2266616","cujomalainey","2021-03-26 23:54:45","false","passthrough: fix interface

oops, forgot to update interface so build was silently not linking the
passthrough interface to the adapter

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>
Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",78,34,0
"thesofproject/sof","3b66418a0e363b1dd26c23de088ad30476f1f3a0","fredoh9","2020-03-11 22:22:39","false","topology: move byt/cht platform specific settings

Move byt/cht platform specific ifelse to platform files.
And byt/cht have codec and nocodec differences, which need to have
PLATFORM-codec and PLATFORM-nocodec files.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",83,21,0
"thesofproject/sof","9ce99db72e68d08870b3a5335815c9eb9277b7ad","jajanusz","2019-05-31 13:04:48","false","include: split uapi headers into more directories

Some of interface headers are not needed by kernel,
but are needed by user-space applications, so we can split them
into multiple directories that indicate their purpose.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",74,12,0
"thesofproject/sof","0f2c9d12307539e6305f7662696238abac846a78","lrgirdwo","2021-04-12 12:21:02","false","cleanup: remove double blanks lines.

Several files had multiple blank lines even before the removal of
platform_shared_commit(). Fix them with ""cat -s""

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",81,34,0
"thesofproject/sof","527e5f7d4b82368ed96bf0728d744ba6c5054b88","tobonex","2023-09-15 17:27:24","false","copier: remove buffer_acquire from copier

remove buffer ops from copier module

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","b0c900b9a76fa4870887d37242a15ee13c753f94","ranj063","2019-02-13 00:08:13","false","topology: Add keyword detect pipeline

Add pipeline with keyword detect and channel selector comps.
This should be connected to a capture pipeline such as
pipe-kfbm-capture.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",60,8,0
"thesofproject/sof","969b38758416635c7f685dd1204db304490ee1ac","ranj063","2023-01-19 18:30:20","false","topology2; Make dai_index a mandatory attribute for DAI objects

Add an instance attribute that will be used to instantiate DAI objects
and make dai_index a mandatory attribute for all DAI objects types. This
is in preparation to make the instance attribute default for all objects
with topology2. This is required because the topology2 compiler allows
for expansion of string values with variable definitions. So, if we
wanted to expand the value of dai_index from a variable definition(shown
as below), it is only possible if it were a normal attribute instead of
the node ID as it is currently.

Define {
	SSP_DAI_INDEX	3
}

Object.Dai.SSP.1 {
	dai_index	$SSP_DAI_INDEX
}

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",55,56,1
"thesofproject/sof","91a436ef7da5b27e37def73087027fc596bbc003","ranj063","2023-04-06 17:57:36","false","topology2: Rename passthrough-capture-be

Rename it to io-gateway-capture.conf to align with the documentation.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",51,58,1
"thesofproject/sof","b683d96dfe255f5185dbf769a4dd9b02f6c08de1","kv2019i","2022-10-18 13:36:35","false","library_manager: fix compiler warnings with gcc 12.1.0

Fix one local variable that may be uninitialized and string formatting
for buffer addresses (uintptr_t is long unsigned type).

Tested with gcc 12.1.0 (Zephyr SDK 0.15.0).

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",99,53,1
"thesofproject/sof","5ec02e32949e6ce6fd859da14b797bd7a26d7a1b","kv2019i","2022-03-15 17:42:38","false","mixer: add logic to maintain data flow when sources are paused

In a topology where mixer is connected to multiple source pipelines, the
mixer<->DAI downstream pipeline for playback is kept running when
sources are put to PAUSED state.

This design means that mixer_copy() needs to continue to produce output
samples as the DAI is kept running as well. There is existing code to
generate silence when all sources are PAUSED.

A problem remains in the sequence when sources are RELEASED. On the
first iteration after RELEASE, the source state can be changed (so mixer
sees non-zero num_mix_sources). But the sources may not have any data
available on the first cycle. This can lead to XRUNs observed at the DAI
as the mixer is not continuously producing data in ACTIVE state.

Address this issue by adding a ""sources_inactive"" state to mixer. When
all sources are inactive, mixer enters this state. When sources are
resumed, mixer will note this state, and continue to generate silence
(on its output) until at least one source starts generating audio data.
This ensures continuous audio output to the mixer downstream pipeline.

The change is not sufficient on its own, but is part of the fixes
to address: https://github.com/thesofproject/sof/issues/5469

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",107,45,1
"thesofproject/sof","594e3f7da920b9308896bab84ee20894476ca98a","yongzhi1","2023-01-25 23:12:13","false","topology2: cavs-rt5682: add reference capture for MAX98357A speaker amp

Use lbm_mode to loopback playback data for PCM27.
Add copier module in DAI BE for demux function.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",53,56,1
"thesofproject/sof","5912e40fe31e564c1719d75ac81a4cf0f1279935","zhuyingjiang","2018-11-08 10:30:03","false","change the 1.8 and 1.5 header defines

add comments and change the 1.5 1.8 header defines

Signed-off-by: Zhu Yingjiang <yingjiang.zhu@linux.intel.com>",42,5,0
"thesofproject/sof","6b46b8d7d9110aad442b6a634d3dc8c1bceb0389","cujomalainey","2023-07-13 00:45:54","false","audio: drc: fix missing header

Also remove from incorporated C file.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",31,61,1
"thesofproject/sof","895abe605a25d2ae9d893f86a6581944167f4ac8","singalsu","2020-03-30 12:26:07","false","Tools: Topology: Add IIR example coefficients

This patch adds IIR responses band-pass, bass-boost, loudness, and
pass-through for inclusion to topology.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",67,22,0
"thesofproject/sof","0c35f1efde17bbd27d656b5564d25c128e13fee7","singalsu","2020-03-16 17:22:42","false","Testbench: Build topology parser with debug symbols

This patch adds compilation with -g. Optimization -O was added to get
optimization that preserves sane debugging with gdb. This component
is not critical for speed in simulation.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",79,21,0
"thesofproject/sof","75f6bc6dc66d80639727ff97cbb932d415636b60","singalsu","2022-12-21 09:52:38","false","Audio: Mux: Simplify helper functions for mux/demux

This patch simplifies functions mux_prepare_actitive_look_up() and
demux_prepare_active_look_up().

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",91,55,1
"thesofproject/sof","6ad952d52abb314cb30d40688d759bfc303d7004","tlauda","2019-10-24 12:50:29","false","dma: change signatures of copy buffer functions

Changes signatures of copy DMA buffer functions to differentiate
between source and sink bytes. Process function from now on will
work on provided samples to handle different formats on input and output.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",67,17,0
"thesofproject/sof","e56c517a5bf3a8ea89787893ca4ea75da5675738","tlauda","2019-09-19 13:16:24","false","topology: use passed DAI_PERIODS

Fixes pipe-dai-capture and pipe-dai-playback pipelines
to use passed DAI_PERIODS value instead of hardcoded.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",61,16,0
"thesofproject/sof","32cb88813e2a9fff00696ee0b62bd95acf2816fb","tlauda","2020-01-16 15:24:49","false","component: remove not used module_id from comp_driver

Removes not used module_id from comp_driver structure.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",78,19,0
"thesofproject/sof","99005e21bcb1a64fc39b5e7160533abaa3d3f3e0","tlauda","2019-08-02 08:13:18","false","schedule: extract flags to generic task data

Extracts flags to generic task data, so there is no need
for ll_schedule to keep them privately. Also changes the
way they are passed. From now on flags should be set only
during task initialization and not when starting scheduling.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",52,14,0
"thesofproject/sof","4cd4fd8f12878e3e0c0e09f0affd7b762c04851b","tlauda","2019-09-27 08:59:32","false","platform: remove PLATFORM_LL_DEFAULT_TIMEOUT definition

Removes PLATFORM_LL_DEFAULT_TIMEOUT definition. It has been
replaced by CONFIG_SYSTICK_PERIOD.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,16,0
"thesofproject/sof","af79cf46567f556f6b8be3ca25dd8b2ef95d7f67","tlauda","2020-01-08 09:29:23","false","pm_runtime: add pm runtime data to sof context

Adds pm runtime data to sof main context. Also implements
getter to easily retrieve the data through one point of access.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",72,19,0
"thesofproject/sof","79efa9391cefbfc9639aa99d7089b52a2faad445","tlauda","2019-10-22 07:09:58","false","topology: revert all cAVS pipelines to 2 periods

Reverts all previosly changed cAVS pipelines from 3 to 2 periods.
Now we have separate buffers for DMA, so there is no need to make
DAI buffers consist of 3 periods. DMA will take care of any internal
hardware requirements.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,17,0
"thesofproject/sof","aee99a95943af26b45572a211c45ff302aeebb7d","ujfalusi","2021-10-07 07:21:46","false","dma-trace: Implement clenaup on error in dma_trace_start()

After the dma_copy_set_stream_tag() a DMA channel is requested, release it
in any of the error cases later.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",121,40,1
"thesofproject/sof","e043503158b712ea12cfa89bd438652ad5a4d9b9","ujfalusi","2022-03-29 06:42:18","false","ipc4: handler: Fix compilation with gcc in ipc4_set_pipeline_state()

gcc fails with the following warning (treated as error):
sof/src/ipc/ipc4/handler.c: In function 'ipc_cmd':
sof/src/ipc/ipc4/handler.c:471:5: error: 'status' may be used uninitialized in this function [-Werror=maybe-uninitialized]
  471 |  if (status == COMP_STATE_READY)
      |     ^
sof/src/ipc/ipc4/handler.c:439:11: note: 'status' was declared here
  439 |  uint32_t status;
      |           ^~~~~~
cc1: all warnings being treated as errors
make[2]: *** [CMakeFiles/sof.dir/build.make:380: CMakeFiles/sof.dir/src/ipc/ipc4/handler.c.o] Error 1
make[1]: *** [CMakeFiles/Makefile2:2042: CMakeFiles/sof.dir/all] Error 2
make: *** [Makefile:136: all] Error 2

Based on the code, this is a false warning since ppl_count should never be
0 (unless ppl_data->pipelines_count is 0), but never the less, the firmware
does not compile with gcc.

Fixes: 72394a62def31 (""ipc4: update component direction when pipeline is complete"")
Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",112,46,1
"thesofproject/sof","cb64c68bcdc2481f1e60646218755fd7f1be14f7","softwarecki","2023-10-26 13:52:01","false","rimage: manifest: Ignore lack of .bss section for a loadable modules

Loadable libraries do not need to have a .bss section. After this change,
its absence will be ignored when generating a image of the loadable module.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",7,65,1
"thesofproject/sof","4139ca8fe42f21ef41e44448ba27657b53c1ad96","tinghan-shen","2022-12-13 03:39:09","false","platform: Add build support for MediaTek mt8188 platform

Add CMakefile for MediaTek mt8188 platform to build it.

Signed-off-by: Tinghan Shen <tinghan.shen@mediatek.com>",97,54,1
"thesofproject/sof","463c4afd10e8a2f1f13a687c1150cf436021fa51","ranj063","2021-07-22 17:03:30","false","Revert ""topology1: sof-cavs-nocodec: Add the deep buffer PCMs""

This reverts commit 6516a8c89ba0ca165bd353e28667f1b431fb7e77.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",96,38,0
"thesofproject/sof","ae8ca22a590d37fdb58a8d5d1666ac80b21d8094","ranj063","2023-01-23 18:44:18","false","topology2: Add instance attribute for all classes

In preparation for making it easier to write topology conf files that
can be conditionally included without having to worry about conflicting
node ID's for objects between the included file and the top-level conf
file, modify all classes to include an instance attribute. This means
that irrespective of the object type, all objects will be instantiated
as follows:

Object.Widget.gain.1 {} or Object.Base.pdm_config.2 {} etc

The instance ID's are typically only meant for the alsatplg compiler to
differentiate the nodes in the conf file and are not relevant for the
kernel or the firmware. This change will allow the alsatplg compiler to
be modified to automatically make the node ID's unique before
conditionally including conf files.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",56,56,1
"thesofproject/sof","541bc539dfc78e869989426dc1345e3385a2beff","ranj063","2023-06-29 23:51:02","false","audio: copier: Remove get_endpoint_buffer()

It is only used in the multi-endpoint case, so use the
multi_endpoint_buffer directly.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",37,61,1
"thesofproject/sof","dad6b192f622f69be566fb929332b3cc53b34d60","abonislawski","2020-04-23 11:51:14","false","cmake: fix smex dependencies

This will allow to build FW with traces disabled

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",71,23,0
"thesofproject/sof","8c2dc1daafdc2043972d4019a818f5338a66ba46","ranj063","2022-12-19 02:24:30","false","module_adapter: Expand the simple_copy flag for multi sink case

Add a helper function to set up the input/output buffers for the 1:1 and
N:1 source:sink buffer configuration. Also, expand the
module_adapter_copy() function to support the simple_copy flag with the
single source and multiple sink buffer configuration.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",91,55,1
"thesofproject/sof","59b4fcb11dbd1d233fcd0c91aaf65f68acc11463","tlauda","2020-05-28 07:22:39","false","idc: extract common protocol functions

Extracts IDC protocol related code to common file.
Platform specific driver has just the implementations
for hardware specific operations.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",96,24,0
"thesofproject/sof","e3bbd78ee23f6e9cdd588cf09d507c9fabeefe3b","lyakh","2023-04-12 13:36:28","false","buffer: use an accessor to read struct audio_stream::r_ptr

This is the first patch in a series, whose goal is to make struct
audio_stream opaque for its users. Instead of accessing structure
internals we'll add a set of accessor functions.

This patch adds audio_stream_get_rptr() to read
struct audio_stream::r_ptr and converts all users. Apart from hiding
internals of the structure, it also enforces the use of the
__sparse_cache annotation.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",51,58,1
"thesofproject/sof","2bf7defdb6baa019c4e684234830ef11c00af899","lyakh","2020-12-31 11:35:11","false","alloc: remove a redundant call to platform_shared_commit()

alloc_block() will call platform_shared_commit() on the map
too, no need to do that twice.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",72,31,0
"thesofproject/sof","bfe7707f37de744d3e2a44b6debedbde6c784501","lyakh","2021-05-06 11:44:39","false","cavs: disable data cache operations on uncached addresses

Trying to write back cache on uncached addresses can overwrite data.
Invalidating cache should have no ill effects but isn't very
meaningful either. Disable both.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",81,35,0
"thesofproject/sof","c69dfaab3b9443ed70b861e89e70b5b154f9c3bb","lyakh","2019-01-14 14:23:48","false","drivers: add a driver for the DW GPIO controller IP

Sue Creek uses a DesignWare GPIO controller IP for several functions,
including a line, used as an interrupt from the board to the host to
be used with the SPI communication. This patch adds a minimal generic
GPIO API and an implementation for the DW GPIO IP.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,7,0
"thesofproject/sof","6d2e64f6085c8ad257990df3aa1a070f07c0f094","lyakh","2020-12-31 06:59:09","false","common: add a macro for a rounded-up division

Multiple locations in the code open-code a round-up division
operation. Add a common macro for it.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",72,31,0
"thesofproject/sof","d9b7d9f6eb13bd7a21d15ae1e40f93f8a7c96e5e","marc-hb","2021-10-13 23:43:42","false","sof_ri_info: new attributes signature and date start and length

Signature and date are (for now) the only variable fields when
re-signing with the same tool so their locations matter.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",123,40,1
"thesofproject/sof","f6c71c21d03b8111b7bb437b4f1ee40e314d24ab","marc-hb","2021-07-11 07:36:33","false","zephyr/CMakeLists.txt: build smex and sof-logger

Temporary solution until we switch to the Zephyr logger.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",87,37,0
"thesofproject/sof","dbc8e0fb31e558d3190ebb220080ae5622eecd7b","marc-hb","2022-02-17 00:26:28","false","dma-trace.c: fix unsupported mtrace_printf(""%s"", ...) string specifier

The dictionary does not support character strings.

Fixes commit c11562b00a29 (""dma-trace: Align DMA buffer correctly to fix
dma tracing issues"")

Take the opportunity to log the d pointer (which _is_ supported).

Fixes the following error message:

 TIMESTAMP         (us)              DELTA  C# COMPONENT          LOCATION                      CONTENT
error: String printing is not supported
[           2.604167] (           0.000000) c0 dma-trace             src/trace/dma-trace.c:266  ERROR <String @ 0xbe035e60> failed: no DMAC

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",105,44,1
"thesofproject/sof","a9680388e55474fd8e20092d303a89d82cd4f6fe","marc-hb","2023-02-24 00:02:34","false","xtensa-build-zephyr.py: extract new build_rimage() function

Zero functional change. Next commit will build rimage _before_ building
the firmware which will be required when `west build` starts signing by
default (https://github.com/zephyrproject-rtos/zephyr/pull/54700)

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",56,57,1
"thesofproject/sof","9996338236dbacee0eed5b86fd97fe2371c3dec7","marc-hb","2022-08-16 10:22:07","false","Remove duplicate doxygen of duplicate comp_verify_params() declaration

comp_verify_params() is declared in two different .h files. This is
probably wrong but this very small and quick fix is only about
removing the doxygen duplication and removing this super confusing
error message that does NOT point at the duplication:

```
src/include/sof/ipc/topology.h:209: warning: argument 'dev' from the
argument list of comp_verify_params has multiple @param documentation
sections
src/include/sof/ipc/topology.h:209: warning: argument 'flag' from the
argument list of comp_verify_params has multiple @param documentation
sections
src/include/sof/ipc/topology.h:209: warning: argument 'params' from
the argument list of comp_verify_params has multiple @param
documentation sections
```

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",113,50,1
"thesofproject/sof","332e2735c94701e20b8f7886158e2f57a43fc222","ranj063","2019-04-23 01:11:20","false","topology: apl/byt: add low-latency and media pipelines

This patch does the following:
1. Modify pipe-pcm-media to use the SCHED_COMP macro to set the
scheduling comp for the media pipeline.
2. Add low-latency and media pipelines to the apl nocodec
and apl pcm512x.
3. For the byt codec and nocodec topologies, modify the
PIPELINE_PCM_ADD macro to pass the scheduling comp name

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",47,11,0
"thesofproject/sof","6e7f31c141faa52ee8a36b8c1bbdd1f479bb7b79","ranj063","2022-09-28 15:35:04","false","module_adapter: Add a no_pause field for modules

Add a new field, no_pause in struct processing_module which will be set
by modules that do not support pause, ex: mixer.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",97,52,1
"thesofproject/sof","e3a73c6e7e4f5b67be7d32ee6f9a3c7b7075c818","ranj063","2021-10-26 03:44:05","false","component: use buffer acquire/release

instead of buffer_lock/unlock() which will be deprecated.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",127,41,1
"thesofproject/sof","c06a65a8d0915856f49ceb8241af8540d79c4b44","abonislawski","2019-03-07 17:21:29","false","Memory: self registering ability for audio components

No more need to update global component.h and audio.c component init list

New macro DECLARE_COMPONENT
The component can ""register itself"" in the appropriate linker section

Example of usage:
DECLARE_COMPONENT(sys_comp_*_init);

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",67,9,0
"thesofproject/sof","23fe7029a18f9516f688dba841900a990b8b00a1","abonislawski","2019-03-01 15:08:46","false","Kconfig: make SSP driver a config option

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",66,9,0
"thesofproject/sof","e6729f0106ad7341189ebb19f0c1838d069abae8","kv2019i","2021-05-05 14:20:56","false","samples: fix prototype for smart_amp_test

Initialize sys_comp_smart_amp_init() with UT_STATIC to make
it unit-testable.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",80,35,0
"thesofproject/sof","f07f5ed823bb1f59810f8b2010219b9cff39b07e","kv2019i","2022-10-14 06:58:15","false","Revert ""topology2: fix multi-stream test issue in ci""

This reverts commit 321bfde9136ec2b490fffe30b8c503bc88291c9b.",98,52,1
"thesofproject/sof","6363a863095add639f328f092565394a06e4094a","kv2019i","2022-01-31 18:42:51","false","zephyr: add missing call to smp_timer_init to secondary core init

To align with Zephyr smp.c:smp_init_top(), add the missing call to
smp_timer_init() in secondary_init() of the SOF wrapper. Also
add inline documentation why we are open-coding the function on
SOF side.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",104,44,1
"thesofproject/sof","2ede148444183ef74c29d52afb2bd7c108bb60ee","andrula-song","2023-09-14 11:38:23","false","Audio: use struct dai_ts_cfg replace timestamp_cfg

Use struct dai_ts_cfg replace timestamp_cfg of struct
dai_data in dai-zephyr.h

Signed-off-by: Andrula Song <andrula.song@intel.com>",20,63,1
"thesofproject/sof","06d126f8f43958c6f3728ad8040acf5e53cdc1e3","xiulipan","2021-01-12 09:31:09","false","tools: sof_ri_info: update TGL memory layout

change old TGL to TGL-LP, add new TGL-H

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",74,31,0
"thesofproject/sof","56314cdf9c76208039e537e139a4183e9869ef9e","xiulipan","2018-11-28 05:34:15","false","CI: travis: add tools build

Add tools build into travis CI.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",42,6,0
"thesofproject/sof","36d834855e04c4dc7da5f76ab1a9f809f8b7d70f","jgunn0262","2019-04-24 20:56:22","false","xtensa: timer: Add support for less than three xtensa timers.

Some xtensa configurations will ahve less than 3 timers so use core-isa.h
to select correct amount of timers.

Signed-off-by: John Gunn <jgunn0262@gmail.com>",52,11,0
"thesofproject/sof","656e739d6fbd33ac44cf03c3bcf25b5ee1edafd2","marcinszkudlinski","2023-08-18 10:39:52","false","src: simplify src_get_copy_limits procedure

There's no need for src_get_copy_limits to return
an exit code. The simple true/false if there's enough
data for processing is fine

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",24,63,1
"thesofproject/sof","9dff0a15f396f18c53e8127cdeb2c8cd2626d2cc","lyakh","2022-10-31 08:42:47","false","iadk: fix a function assignment

When a pointer to a function is used the assignment can take one of
two forms:
ptr = fn;
or
ptr = &fn;
however, I don't think an assignment of the form
ptr = *fn;
is valid and passes compilation. Fix one such assignment.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",91,53,1
"thesofproject/sof","9c9ad34464c74249d19efd99fdfa35f5a9238b23","kv2019i","2022-05-04 13:17:46","false","zephyr: move Zephyr IDC implementation to zephyr_idc.c

SOF uses IDC (Intra DSP Communication) protocol to orchestrate
work across multiple DSP cores.

The interface in sof/drivers/idc.h defines the protocol and
also provides a high-level interface for drivers. On Zephyr,
the SOF IDC protocol is used, but the actual communication
is implemented on top of Zephyr P4WQ workqueue interface,
instead of directly calling into drivers.

Move the Zephyr implementation from src/schedule/ into
src/idc/ which is more suitable place for this code.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",115,47,1
"thesofproject/sof","8b595069dc23990b09b6cbe686f8f870234aba39","singalsu","2020-02-21 11:55:15","false","Fuzzer: Fix build fail for missing ASRC loader

This patch adds load of ASRC component to successfully build
the Fuzzer. The common topology parser with testbench depends
on load_asrc() function.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",80,21,0
"thesofproject/sof","7bfbe43b491811c0f0461a82191a2cb12f29c1c5","bardliao","2019-05-03 14:05:25","false","trace: convert trace time stamp to ticks

The unit of trace header timestamp is ticks but it is nanosecond
in trace params. So we have to convert it to ticks.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",47,11,0
"thesofproject/sof","6588d5b9d0105d6818ccba63ee30d4e3be702778","dbaluta","2019-05-15 12:18:47","false","platform: imx8: Add platform drivers support

This adds minimal support for platform drivers (dai, dma, clk)
and general platform initialization.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",66,11,0
"thesofproject/sof","c14554349f794beca894a0f378e27fb74b7e8cf2","tlauda","2019-03-27 15:20:14","false","component: add check if optional comp_ops are available

Adds check if optional comp_ops are available.
This patch also adds assert for mandatory ops.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",56,10,0
"thesofproject/sof","c8f671b7461d0e77d4e0675e87c138d923c698a5","bkokoszx","2018-10-12 12:56:41","false","rmbox: change bins name to sof-logger sof-rmbox

Change binary names:
from logger to sof-logger and
from rmbox to sof-rmbox

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",33,4,0
"thesofproject/sof","36db3deefb2d01c0408e0383f68f1a7e9e6e37ab","lgirdwood","2018-10-14 19:23:37","true","Merge pull request #485 from xiulipan/pr/qemu

Travis CI Update Part 2. (Enabel Qemu boot test)",35,4,0
"thesofproject/sof","83c0e3a9abcc1313b49b26bf2af7d011ca0bba31","lgirdwood","2018-07-11 15:04:22","true","Merge pull request #84 from tlauda/topic/issue-69

buffer: do not writeback cache for passthrough ppl",15,1,0
"thesofproject/sof","0ac40ab33f3f540b34d0e8c639116bcdc5c67c6a","singalsu","2018-06-05 15:22:47","false","README: Fix a typo in the example SOF configure command

The $PWD environment variable (the current directory) need to be in
upper case.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",1,0,0
"thesofproject/sof","c274607de0f239b9e0d294ca7b69b05a36f726d0","tobonex","2023-09-15 18:10:41","false","buffer: cosmetic change in buffer.h

remove one unneeded newline

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","ab1c15584c8692c0d1f075189aeafc2ba2ff4374","tmleman","2022-11-07 12:12:55","false","ace: power: add pm_runtime_is_active

Adding pm_runtime_is_active implementation for ACE.

The functions only allows you to check if the DSP can enter d0i3 state.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",93,53,1
"thesofproject/sof","0056599b6ebba5718dbdfd3fac169b73e960ac0a","cujomalainey","2019-03-21 23:14:40","false","switch: make init function static

Fixes checkpatch error that slipped in

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",66,10,0
"thesofproject/sof","80bf84c00c9018f4eacf5147f3d6b13c17e8c202","ranj063","2022-02-03 03:02:06","false","topoogy2: tokens: fix the token ID for out_sample_type

Should be 1938.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",104,44,1
"thesofproject/sof","8133a92f806fe571a50fab91e6917ad260967787","lrgirdwo","2021-08-06 16:07:41","false","testbench: make the trace output more meaningful.

This removes the ""unknown"" string and replaces with file and line.
Function is already in msg.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",116,38,0
"thesofproject/sof","03fb10ffae5e92232e35bfb055614026b00bd92e","lbetlej","2018-11-16 15:16:40","false","LDO control on D0->D3 transtion for CannonLake

HP SRAM LDO needs to be switched off on D0->D3 transition to reduce
power consumption.

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",39,5,0
"thesofproject/sof","754dded3b3c901b50d76c9b8b86198f7b095d70f","plbossart","2019-01-16 05:08:05","false","src/include/sof/audio/format.h: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","ecb03cbc73dbd2a95e330d2179765e9192393266","joechengxperi","2022-10-12 06:35:21","false","config:renoir:enable EQ IIR in DTS config

Enable EQ IIR

Signed-off-by: Joe.Cheng <joe.cheng@xperi.com>",99,52,1
"thesofproject/sof","ed1c9164f9ddcdc8c63861af5d95cdc651b704cd","bkokoszx","2019-06-25 08:26:36","false","dma: add DMA_ATTR_COPY_ALIGNMENT to dma attributes

Add DMA_ATTR_COPY_ALIGNMENT attribute in order to
retrieve the smallest possible chunk of data that can
be copied by dma.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",46,13,0
"thesofproject/sof","8e6ef20086db415ad48c263c6faa41800d163321","ranj063","2021-09-28 23:30:41","false","drivers: Intel: hda-dma: FIFORDY bit is only valid for host DMA

So, leave this bit untouched for link DMA and only set/clear it
for the host DMA for both playback and capture.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",121,40,0
"thesofproject/sof","13dc7812ebbe44a56b29110677d8961172155add","ranj063","2021-11-17 23:35:03","false","topology2: mixin/mixout: Add cpc attribute

And set default values.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",128,41,1
"thesofproject/sof","7c4a3193840e9cca3262733d3f527f4d7e7cfa32","ranj063","2022-01-22 00:07:17","false","codec_adapter: cadence: Use rfree to free codec data

Codec data is not allocated with module_allocate_memory(). So use rfree()
to free it.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,44,1
"thesofproject/sof","1c2a2e37ee53c2bcc81ecec11b9e3da0cdbd9ef6","abonislawski","2023-11-03 12:11:05","false","platform: ace: watchdog: fix num cpus

This will fix num cpus and use runtime data to work
properly on diffrent HW configs

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",4,65,1
"thesofproject/sof","ed21921878fc171253a4dfaa0f303d02cf17fffd","ktrzcinx","2020-10-21 10:50:01","false","gitignore: Add checkpatch temporary file to gitignore

Any generated file should be tracked by git to keep repositiry clean.
Such an file should be added to .gitignore to reduce possibility of
accidentally pushig this file to remote branches, eg. after typing
`git add *` before pushing changes.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",72,29,0
"thesofproject/sof","765e672ba3912637f9f312457c040b3178129bc7","ktrzcinx","2020-09-07 12:59:08","false","preproc: Fix META_MAP functionality

This functionality counldn't handle empty __VA_ARGS__.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",70,27,0
"thesofproject/sof","6e8515216d2edcc57b6e442e3868665c84bb1506","ktrzcinx","2020-09-24 10:39:09","false","trace: dai: Make dai type and index more descriptive in traces

Form %d.%d may be easily paired with pipeline and component id,
whats not correct.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",66,28,0
"thesofproject/sof","e04610b19754d0f402b3b76b0a7fb4fe24d9aa18","ktrzcinx","2020-10-13 14:06:03","false","alloc: Print information about runtime shared zone in heap_trace_all()

Runtime shared zone should share this functionality with others
runtime zones.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",67,28,0
"thesofproject/sof","730f051d675797903f72d6166f8d7ed85536e8ae","jajanusz","2019-06-12 08:37:41","false","doc: remove duplicated README for host

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",49,12,0
"thesofproject/sof","0eb68c6d5d684a60eab65440c5b5085a9d7262b0","jajanusz","2019-06-07 09:53:16","false","logger: add debugfs entries for apl and cnl

Logger was aware only of debugfs entries for BYT/HSW platforms.
This commit adds debugfs entries for APL/CNL.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",55,12,0
"thesofproject/sof","063e3e1d85712ba33c2a07e722e3b6fb77eaea45","akloniex","2019-08-19 11:14:10","false","dma: Extract common dma_chan_data structure.

Extract common parts of DW DMA and HDA DMA channel control structures
into dma_chan_data containing additional pointer to private,
implementation specific data.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",55,15,0
"thesofproject/sof","a88543a92c3035a1f416af45fd8fd6a74e04cdc8","akloniex","2019-10-30 07:49:17","false","notifier: Refactor notifier interface and inner workings.

This patch changes usage of notifier, passing control over callbacks
allocation, allows nested callbacks processing and prepares interface
for future extenting.
This also optimizes unnecessary cache writeback/invalidation when
evaluating callback on the same core it was dispatched.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",63,17,0
"thesofproject/sof","29af2df7666b2fd3948523b6870b64cfd59e9459","jsarha","2022-09-26 21:22:16","false","tools/probe: Fix realloc condition

The allocated packet should accommodate the header, the data, and the
checksum. The header size was missing from the condition from the
beginning, even if its there in realloc parameter. The bug should be
harmless waste of cycles thou.

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",97,52,1
"thesofproject/sof","21a1ee1d167bfc7df6646cd571df4387d7668d05","lkoenig","2022-03-03 14:49:28","false","topology1: Simplify the DMICPROC selection

This should make sure to surface pipeline period and microphone
processing in the top topology file so incoherence are easier to spot
and correct.

I compared topology1/production/*.conf outputs prior and after the
change: except some new line and comment change introduced by the
simplification, there are no changes.

Signed-off-by: Lionel Koenig <lionelk@google.com>",113,45,1
"thesofproject/sof","19d2fbb62532d7052eda4720a135ad36a8e1986e","marc-hb","2022-11-08 01:01:13","false","west.yml: remove self.path: sof

The intent was to stop people from cloning the sof manifest git repo
under a different name than ""sof"". It did not work, I had to help
multiple people who did it anyway.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",93,53,1
"thesofproject/sof","ffdf001eeebaff96ada9dac0c55af5b47ea3709a","marc-hb","2022-03-10 23:10:15","false","xtensa-build-zephyr.py: clone zephyr with --depth 5

This restores the performance of the original shell script and makes a
big difference in CI. CI clones over and over again whereas developers
clone rarely and can run a simple git fetch --unshallow.

Don't use --depth 0 to provide more context in the logs and also make it
more obvious that this is a shallow clone and not just git log -n 1.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",112,45,1
"thesofproject/sof","e75fcd1b4549ec592ecaff7366e0a284a063615d","marc-hb","2022-12-23 00:22:31","false","xtensa-build-zephyr.py: search ""strip"" in string, not in pathlib

Fixes pylint warning ""E1135 (unsupported-membership-test)"". Not sure
this warning is valid because the code worked anyway but it does not
hurt.

Fixes commit bc394916d082 (""xtensa-build-zephyr.py: switch type of
InstFile() names to pathlib"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",92,55,1
"thesofproject/sof","5af05ff58e102a6c3471b8e35d50d237dd46cd8d","marc-hb","2021-09-07 17:48:12","false","ssp.c: fix recent arg count regression in dai_info()

Fixes ""too many arguments for format [-Wformat-extra-args]"" in recent
commit 287a5f9a2b1e (""ssp: mclk/bclk turned off unexpectedly"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",119,39,0
"thesofproject/sof","4aaffbe9a2fe9c5bc4991b174dc547a1a206d08e","marc-hb","2021-12-18 06:23:43","false","logger: add dictionary checksum in output of dump_ldc option

Since commit 901f991eee82 (""logger: Validate by src_hash instead of abi
version from fw_ready"") the dictionary checksum has become the most
important information.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,42,1
"thesofproject/sof","6bff26e97172280f672d64b30fac155479089924","marc-hb","2021-10-08 06:10:38","false","cmake: remove spurious rimage and smex dependencies on sof_dump

rimage and smex don't depend on disassembly. Nothing does yet this adds
sof_dump as a top-level, 'bin' dependency so ""make bin"" still builds it
and so this commit does not cause any interface change.

This makes it possible to disassemble in parallel with the end of the
build.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",121,40,1
"thesofproject/sof","e25cfc1ac5be0ecdb56a71a5a3cebad00a7230fc","marc-hb","2020-06-02 05:00:53","false",".gitignore: don't ignore all .* hidden files in every subdirectory

That's too extreme and was probably accidental because the rest of
commit d721347ad945 (""gitignore: ignore boot loaders and binaries."")
seems not related at all.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",94,24,0
"thesofproject/sof","c81efcf26a47a69bff1a81c6a2d41fbcb8270905","marc-hb","2023-05-31 18:02:40","false","xtensa-build-zephyr.py: resolve relative --key arguments

Fixes commit a769d3941d81 (""xtensa-build-zephyr.py: stop calling west
sign, rely on west build"")

Before that commit, `xtensa-build-zephyr.py` used to invoke `west sign`
directly and in the same current directory. This allowed relative key
paths to just work. Now that `west sign` is indirectly invoked by `west
build`, there is no possible way to make relative key paths work. So we
must resolve them before using them.

Fixes #7718

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",48,60,1
"thesofproject/sof","265fb6ce0fc366537d1c542a8879a22b9b889f11","lyakh","2020-10-09 08:33:20","false","smp: replace PLATFORM_CORE_COUNT with CONFIG_CORE_COUNT

PLATFORM_CORE_COUNT is always defined to be equal to
CONFIG_CORE_COUNT except when CONFIG_LIBRARY is set. This patch
removes this redundancy, uses CONFIG_CORE_COUNT directly everywhere
and limits it to 1 for CONFIG_LIBRARY and for Zephyr builds.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",68,28,0
"thesofproject/sof","f4c9c28bc55242c4dcf71a6aa987e764671d6ea3","lyakh","2021-01-20 10:06:04","false","zephyr: fixed cached rimage path

Fix the cached rimage path to the temporary cloned rimage location.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",69,32,0
"thesofproject/sof","efa132a9c8d303695afc70d5902d7654a38de61b","lyakh","2023-01-24 13:37:51","false","dai: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register dai with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","d9771be5b88cb66ef6eed3af804641ead6ea16db","lyakh","2023-03-20 16:58:00","false","host: (cosmetic) remove an unused variable

""flags"" in host_copy_normal() aren't used, remove them.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",56,58,1
"thesofproject/sof","4b3783d6a7600242d2a8658c1821df4854f717be","lyakh","2022-03-11 11:57:56","false","cache: memory: always use platform_shared_get() with shared data

Access to objects, defined with a SHARED_DATA attribute should only
be performed, using the platform_shared_get() function.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",113,45,1
"thesofproject/sof","5504179137c56948abaa77ec5c137dc8cf3c336f","jxstelter","2022-06-24 10:01:19","false","Add lib_code module type.

External libraries can contain processing module code or common library code.
Library manager need to distinguish between both type of modules for proper loading.

Signed-off-by: Jaroslaw Stelter <jaroslaw.stelter@intel.com>",112,49,1
"thesofproject/sof","75188e22434d58720f59624aa4eedd56afc6dd26","mrajwa","2019-09-11 12:30:12","false","timer: rework timer_set() so it verifies requested ticks

This patch reworks cAVS timer_set() interface used
to write into timer's compare register.
This change takes care of ticks request which are
""past time"". If such condition occur we set compare
register to current time so the latency is minimum.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",60,15,0
"thesofproject/sof","98f73a844805cdfa1eeddd4c80eb4433303cb8c6","lgirdwood","2018-10-18 11:48:27","true","Merge pull request #494 from keyonjie/master

platform: fix dma_get() of ipc fail issue for byt/hsw/cavs",33,5,0
"thesofproject/sof","ca6b4037bbb485c45a29f7fe4f0e8581c098d162","lgirdwood","2018-07-14 10:58:02","true","Merge pull request #68 from tlauda/topic/ipc_active_cores

ipc: add SOF_IPC_PM_CORE_ENABLE message",15,1,0
"thesofproject/sof","47ddd8191c7f936b3fb114acd191c7c5ed6363c9","lgirdwood","2018-09-25 19:36:02","true","Merge pull request #389 from singalsu/eq_iir_add_16_24_data_proposal

EQ IIR: Add support for S16_LE and S24_4LE data",37,4,0
"thesofproject/sof","5b51dc0d4b4f58182428edc38960fd760fff28c8","lgirdwood","2018-10-15 19:38:52","true","Merge pull request #108 from singalsu/eqctl_check_calloc_and_return_zero

eqctl: Add check for calloc() success and return 0 in exit",34,4,0
"thesofproject/sof","68d56daae3e99a126c87343a88bde756ac92c8e3","lgirdwood","2018-08-28 11:57:17","true","Merge pull request #270 from tlauda/topic/move_idc_header

idc: move definitions into include/sof/idc.h",21,3,0
"thesofproject/sof","e42f4a6e635c37842342aa3737ae7160155677d3","lrgirdwo","2022-09-02 12:04:14","false","header: rtos: use rtos specific version of timer.h

Code can now include <rtos/timer.h> and uses native Zephyr timer API
for most uses. Some wrapping still exists which can be removed over
time.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",118,51,1
"thesofproject/sof","107537b56b126ea772cb58910ca62dbce86c764e","jajanusz","2019-06-01 18:01:02","false","rimage: change license to bsd

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",72,12,0
"thesofproject/sof","43e08a04269e00e766e5536f34d1336fc9a74755","jajanusz","2019-08-23 09:48:20","false","rimage: xcc module offset option

This argument is needed in case of platforms that have different
modules padding in xcc binaries.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",55,15,0
"thesofproject/sof","745d4ccd8bbf5509fd3af6218f663441d5b18862","fredoh9","2023-04-28 15:01:07","false","scripts/docker-run.sh: run with sudo-cwd.sh

There is a UID mistmatch and file permission problem. sudo-cwd.sh will
switch id every docker run command.

80e9c3454a0a048704f863a52443b536a27a2410 was reverted due to
missing a toolchain.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",54,59,1
"thesofproject/sof","4c4dc2c532dd6c8d8315b0955fee51fba3f12148","IulianOlaru249","2020-08-08 13:18:25","false","platform: imx: Implement panic routine

This patch adds logic for the platform_panic() function, called in case
of a DSP oops.

This is important because it add a panic code in the debug box so the
application processor can understand why the oops happened. Also in
notifies the application processor about the oops generating an interrupt.

Signed-off-by: Iulian Olaru <iulianolaru249@yahoo.com>",77,26,0
"thesofproject/sof","e38f3f7829f1cc736bfbb9243ecc13c93f60fd8d","bardliao","2023-08-29 07:17:10","false","topology2: add sof-mtl-rt713-l0-rt1316-l12-rt1713-l3 support

Add sof-mtl-rt713-l0-rt1316-l12-rt1713-l3 support.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",26,63,1
"thesofproject/sof","397d166d3c7b656e9033436fc73457aa2e331df1","plbossart","2019-01-16 05:08:01","false","src/audio/component.c: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","73fd9248e0ba9a612355753bee524e52e631890c","plbossart","2022-07-06 15:39:19","false","topology1: intel-generic-dmic: add macro to enable PDM1 for 2ch cases

There are multiple cases where we cannot detect that PDM1 is used
instead of the default PDM0.

BugLink: https://github.com/thesofproject/sof/issues/5989
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",110,49,1
"thesofproject/sof","fad16d8330d1aef961a14248617f95d390f94df5","plbossart","2021-09-10 22:29:05","false","topology1: rename pipe-mixer-dai-playback to pipe-mixer-volume-dai-playback

To include deep buffer for HDaudio topologies, we need the ability to
replace volume by some other component (e.g. eq-iir-eq-fir-volume)

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",117,39,0
"thesofproject/sof","29f7b31a9d8a44d67edd50a8faf6f4f1107e0e9e","jajanusz","2019-02-01 16:36:46","false","cmake: crossplatform meu version getter

Replaces Linux specific tools - grep and cut
with cmake regex.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",59,8,0
"thesofproject/sof","ac99aaf5b9258780aee4cddaebb98a76b0414b71","iuliana-prodan","2023-05-03 14:01:35","false","topology: imx: Add compress topology file for i.MX8 with wm8962 codec

First, combine compress topology file for i.MX8 (i.MX8QM and i.MX8QXP)
with different codecs, stream name, rate by using CODEC and RATE variables.
Based on CODEC use the proper DAI_CONFIG.

Using the above variables, add new compress topology file for
i.MX8 with wm8962 codec.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",54,59,1
"thesofproject/sof","60ab692ce5d643e6d09f6a7685a6cb18ea3f929e","ujfalusi","2021-10-07 10:54:23","false","drivers: Intel: hda-dma: Remove not needed 'ret' variables

Remove the 'ret' variable from hda_dma_release() and
hda_dma_get_attribute() as there is no need for them.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",121,40,1
"thesofproject/sof","a487ca9441fb5d8738565db377ef7d3ad85579ac","marc-hb","2021-09-13 21:00:00","false","Revert ""dma-trace: add check to avoid dereference from NULL""

This reverts commit 89ec377cb55de04270dd6fa2bd8672c3dea3e83d.

As commit 7df367451d0f (""trace: enable trace after it is ready"") is
reverted this is not required anymore. See long previous commit message.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,39,0
"thesofproject/sof","c7498318be496595236c2558ee36c562b3526f2d","lyakh","2023-02-08 07:32:37","false","ipcgtw: initialise a global list statically

Initialising a list head to NULL makes no sense and checking whether
it's initialised every time a constructor function is called is
redundant, initialise the list head statically instead.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,56,1
"thesofproject/sof","e73344a73658cb0b16f5381954c4f41f5ff42ca6","marc-hb","2020-03-25 04:27:36","false","scripts: build-all: warn when ignoring unknown arguments

Example:

 $ ./scripts/xtensa-build-all.sh -j3
 ./scripts/xtensa-build-all.sh: WARN: ignoring arg -j3

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",65,22,0
"thesofproject/sof","177e18f701ef625fd780bfeb9d88b59fb44b3157","marc-hb","2022-03-12 06:49:17","false","xtensa-build-zephyr.sh: add new -u zephyr_remote option

Same -u option as the new Python script.

We need this for the new sof/stable-v2.1 branch on
https://github.com/thesofproject/zephyr while our CI has not entirely
switched to the python script yet.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",108,45,1
"thesofproject/sof","63ce1d6b51f9790814041ca1220f8b6ab208b7b2","marc-hb","2021-09-28 17:56:16","false","zephyr/docker-build: fix ""stale"" ZEPHYR_SDK_INSTALL_DIR comment

It's apparently not stale but ""stable"".

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",122,40,0
"thesofproject/sof","236dc0d74a0859c96080ead15c89d9895b9411e4","marc-hb","2021-07-12 04:27:06","false","smex: change usage() to exit with an error

It is admittedly not an error to use '-h' but who uses '-h' and cares
about the exit code?

Conversely, it is _very_ important to return an error when a bug in a
script passes wrong arguments to smex.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",87,37,0
"thesofproject/sof","968027b6c2990d2849b4f2573bcec937fe02a09f","tmleman","2023-07-05 11:52:00","false","base_fw: replace of ipc4_tuple structure with sof_tlv

ipc4_tuple and sof_tlv represent the same data type. The new structure
is globally available and can be used elsewhere.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",32,61,1
"thesofproject/sof","ca0e94ddab0e1bf138b62e975c701bc6ac2a2858","lyakh","2022-01-07 13:35:17","false","DAI: remove unused pm_context_{store,restore} operations

.pm_context_store and .pm_context_restore DAI operations are never
used, remove them.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",116,43,1
"thesofproject/sof","b602e275c9e25735a7c4bee6cd0758cf037369a8","lyakh","2021-05-19 08:11:23","false","zephyr: kpb: fix a compiler warning

When built under Zephyr the wrong format generates a compiler
warning:

modules/audio/sof/zephyr/include/sof/trace/trace.h:35:11: warning: \
format '%d' expects argument of type 'int', but argument 3 has \
type 'uint64_t'

Since native SOF tracing cannot print 64-bit data, only print the
low 32 bits of the time interval.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",87,35,0
"thesofproject/sof","b106eea30892bf96b5b281b8e68de2ebcd5ebe75","lyakh","2022-06-14 09:52:29","false","volume: use a namespace for global symbols

The volume component currently defines ""func_map"" and ""func_count""
global symbols. These names are too generic and can easily cause
conflicts. Use the ""volume"" namespace for both of them.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",118,48,1
"thesofproject/sof","9ef233de4818906c137821fb01ceeae521e3a30a","ranj063","2021-03-19 03:36:07","false","topology2: Introduction to Topology2.0

    About
    -----

    This is a high level keyword extension on top of the existing ALSA
    conf topology format designed to:

    1) Simplify the ALSA conf topology definitions by providing high level
       ""classes"" so topology designers need to write less config for common
       object definitions.

    2) Allow simple reuse of objects. Define once and reuse (like M4) with
       the ability to alter objects configuration attributes from defaults.

    3) Allow data type and value verification. This is not done today and
       frequently crops up in FW bug reports.

    Common Topology Classes
    -----------------------

    Topology today has some common classes that are often reused throughout
    with slightly altered configurations. i.e. widgets (components),
    pipelines, dais and controls.

    This PR introduces the high level concept of reusable ""class"" like
    definition for a AIF_IN/AIF_OUT type object that can be used to create
    topology objects.

    Common Topology Attributes
    --------------------------
    Topology defines a lot of attributes per object with different types
    and constraints. Today there is no easy way to validate type or
    constraints and this can lead to many hard to find problems in FW at
    runtime.

    A new keyword ""DefineAttribute"" has been added to define attribute
    type, size, min value, max value, enum_values. This then allows
    alsatplg to validate each topology object attribute.

    Topology Classes define the list of attributes that they use and
    whether the attribute is mandatory, can be overridden by parent users
    or is immutable. This also helps alsatplg emit the appropriate errors
    for attribute misuse.

    Common Topology Arguments
    -------------------------

    Arguments are used to pass essential data needed for instantiating an
    object particularly needed for the object name. A new keyword
    ""DefineArgument"" has been added to define the arguments. The order in
    which the arguments are defined determines the name for the widget.
    For example, in the case of the host widget, the name would be
    constructed as ""host.1.playback"" where ""1"" is the pipeline_id argument
    value and ""playback"" is the direction argument value.

    Attribute Inheritance:
    ----------------------
    One of the key features of Topology2.0 is howthe attribute values are
    propagated from a parent object to a child object. This is accomplished
    by adding attributes/arguments with the same name for a parent and an
    object. By doing so, when creating a child object, the value for the
    common attribute is populated from the parent. If the value is provided
    in the child object instance, then it overrides the value coming from
    the parent.

    ALSA Conf Parser
    ----------------

    All the changes being proposed and discussed here must be 100%
    compliant with the ALSA conf parser. i.e. no syntax changes or
    changes to semantics for any existing keyword.

    It's intended that there will be NO changes to the ALSA conf parser
    (unless new keywords require this ?) and all topology building
    changes will be in the alsatplg compiler.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",72,33,0
"thesofproject/sof","07f84ee0bf598c7fccb946cd834f9acec1ab36b3","ranj063","2022-01-14 20:44:04","false","codec_adapter: cadece: remove unnecessary goto's and fix memory leaks

Just return the appropriate value right away when possible and fix
memory leaks.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",117,43,1
"thesofproject/sof","511f680b02a68a42daaf1749465e07d1f483e917","ranj063","2023-06-28 17:20:53","false","topology2: pipelines: io-gateway: Replace audio_format object

Use the input_audio_format/output_audio_format objects explicitly.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",38,61,1
"thesofproject/sof","e1b1fed3b2c7509aa63d5757a017890e3f276071","ranj063","2021-07-01 03:03:17","false","Revert ""pipeline/buffer: alloc them in the runtime shared zone""

Revert these for now. Will be fixed with other multi-core fixes.

This reverts commit 928dba0853efa4cd0d79aa66b1e9c221b8813a8f.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",86,37,0
"thesofproject/sof","0d84f55361b585205cb0711e04947536c0d5929a","ranj063","2022-02-22 20:41:37","false","topology2: pipelines: cavs: Fix the Dai copiers to only support 32-bit
format

Only the host copier should do the conversion based on the runtime
params. The DAI copiers should always support only 32-bit playback and
capture. So, fix the input/output formats for the copiers in the
respective pipelines.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",106,45,1
"thesofproject/sof","359eb0b255eef671cb43d033f922518e4e11b179","abonislawski","2020-03-02 11:26:24","false","pm_runtime: correct PWRCTL + power waiting

To make sure core is powered correctly when we move on

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",77,21,0
"thesofproject/sof","a140f2f4bbe7b0888c06eb32b564abdbcf3c3aaf","nashif","2020-12-18 17:10:30","false","trace: fix formatting

Getting formatting warnings when building with Zephyr which prevents
successful build in CI.

Signed-off-by: Anas Nashif <anas.nashif@intel.com>",72,31,0
"thesofproject/sof","3d54d14f3ff4b56f03416b6a33e806a721db15c3","plbossart","2023-05-25 20:37:35","false","topology1: add Dell SKU 0BDA support

Yet another missing topology

This needs to be back-ported to the 2.2 stable branch for releases

Closes: https://github.com/thesofproject/linux/issues/4380
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",51,60,1
"thesofproject/sof","11b99167145e9e0c15e3a39cf260bac15e90be5a","kv2019i","2021-05-06 10:38:27","false","audio: crossover: declare init with UT_STATIC

Allow component to be included in unit tests by using UT_STATIC
in the declaration.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",81,35,0
"thesofproject/sof","901e7b494512b64da80b30c3cd2f2e617fbf7732","ktrzcinx","2020-10-01 15:00:30","false","alloc: Refactor get_heap_from_ptr()

Extract common part to internal function, to allow easily add
new heap in future and remove code duplication.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",65,28,0
"thesofproject/sof","234c84abac492dd5326d0f079f85d50a7c358da8","singalsu","2019-12-18 18:54:57","false","EQ FIR: Add check for a build specific filter length limitation

This patch defines a total channels combined filter length limit
of 80 for xtensa gcc build (e.g. 40 taps max for stereo). The check
is done in prepare() where the filters are configured. If the
length is exceeded the playback is terminated gracefully. A xt-xcc
build or testbench build for x86 is not limited.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",72,19,0
"thesofproject/sof","fcf6c8c416f790ad3d9f76bf75b5b528c11896c7","ktrzcinx","2019-11-22 12:33:38","false","trace: Use uncached memory in trace_point and panic

 It didn't work correctly if multiple cores write to ""sw regs""
 allocated on the same cache line.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",64,18,0
"thesofproject/sof","0e8cf66e5788aec21b4507e00863a7b1a94fe56d","bkokoszx","2019-10-28 16:00:44","false","pipeline: add rfree pipe_task in pipeline_free

Memory allocated for p->pipe_task should be freed
in pipeline_free() in order to avoid memory leaks.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",68,17,0
"thesofproject/sof","782a962218dc2a59db0a950d6e4605f17889fe4f","bkokoszx","2019-10-30 10:01:14","false","dmic: dmic task initialization displacement

Moves dmic task initialization from dmic_set_config()
to dmic_probe() in order to avoid memory leaks - in theory
driver could send dmic_set_config() ipc many times without
releasing resources. Also adds schedule_task_free() in
dmic_remove().

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",63,17,0
"thesofproject/sof","9d560bba9ea34d7910cda987e95d5b28e7d6269b","lrgirdwo","2019-09-12 13:25:56","false","tools: build: use standard naming convention for build dirs.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",62,15,0
"thesofproject/sof","e643457b796b59f06de0a1be0f74ddf1c80b2629","tlauda","2019-08-22 15:11:01","false","dw-dma: fix clearing done bit when using HW LL

Fixes clearing done bit when using HW LL. There can be
a situation, when more than one linked list item has been
already transferred, so we need to clear all of them.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",55,15,0
"thesofproject/sof","5c6b62ef8ed1e979858a66ae7cdf5413cdfa1a14","cujomalainey","2018-09-05 21:53:24","false","Add docs link to README

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",31,3,0
"thesofproject/sof","6158e0e346068cce47fcb4d97749e8c20dc5967d","tlauda","2018-07-06 08:47:47","false","klocwork: fix initialization of HiFi3 variables

Initializes HiFi3 variables to 0.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",11,1,0
"thesofproject/sof","fa974eb1541fd2c690b819d012dc60a05f5102c8","ktrzcinx","2020-09-11 12:57:50","false","host: Make 'no bytes to copy' message more descriptive

It's important to know if theres no bytes because buffers are full/empty
or there is a problem with DMA.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",65,27,0
"thesofproject/sof","0a62f2bf56f24b762496d02cac45f59ca7d3566b","bkokoszx","2020-08-06 11:00:38","false","mn: get mn struct pointer using platform_shared_get() function

In order to get SHARED_DATA we should not use cache_to_uncache
macro directly, but platform_shared_get() function. Otherwise,
it can lead to situation, in which in one section there will
be cached and uncached variables not aligned to cache line
(as a result cache invalidation and writebacks could lead to
unexpected memory overwrite).

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",76,26,0
"thesofproject/sof","ba07a1474ed139a7b25b17b0067b2be896895ae7","aiChaoSONG","2023-08-18 06:15:09","false","ipc4: remove get_comp()

This function is not used anymore, remove it.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",25,63,1
"thesofproject/sof","eb36d58725dae0fe65432f05c6bb261a1ded1c43","libinyang","2023-02-10 05:49:37","false","topology2: update the WoV config data

Now the abi header is changed and the config data is send through
large_config ipc message instead of init_instance ipc message.
Update the config data accordingly.

Signed-off-by: Libin Yang <libin.yang@intel.com>",55,56,1
"thesofproject/sof","b6eaf111214fa4979acfeefaaa667663cd61ddd9","RanderWang","2022-03-16 06:58:37","false","ipc4: copier: reserve cd data for reset state

Progress bar of audio player disappears when it is dragged by
mouse. In this case pipeline is first paused then reset, paused
started again. Cd data is initialized when copier is created and
will not be initialized again after reset operation, so we can't
clear cd data in reset state, only reset stream position and used
dai or host.

Signed-off-by: Rander Wang <rander.wang@intel.com>",108,45,1
"thesofproject/sof","a0b169d5821a1ef16754bcc3b04a188830d9df2d","xiulipan","2018-09-26 13:58:03","false","byt: enlarge system heap size

With some modification in memory alloction, system heap used is enlarged
from 0x16fc to 0x2fcc.

Modify the system heap size to 0xe000 to align with other platforms.

close #274

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",37,4,0
"thesofproject/sof","b25b1304dcf9ec99034d2d9f6e6861dff3b3f25b","xiulipan","2019-01-11 05:57:54","false","scripts: add qemu check for more platforms

Add QEMU boot test for more platforms.
Disable three unfinished platforms: SKL, KBL, CNL

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",56,7,0
"thesofproject/sof","dc3b98c7993ef26b2d86d81e0e8ada0bbc59f5fd","tlauda","2019-04-10 15:48:34","false","dw-dma: make HW_LLI configurable from Kconfig

Makes platform support for hardware linked list
configurable from Kconfig. HW_LLI is supported
for all cAVS platforms.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",49,10,0
"thesofproject/sof","df899fded01193987803a4e80d7e6f4a26637f14","caseorum","2021-02-10 14:06:31","false","Use DIV_ROUND_UP() macro

Replace some open coding with the new macro

Signed-off-by: Joseph Burt <caseorum@gmail.com>",71,32,0
"thesofproject/sof","82ea5c1bf112f17e5180dcee33380b73b088e8ca","tlauda","2020-01-08 09:45:34","false","notifier: move notify_data definition to header

Moves notify_data struct definition to notifier header.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",72,19,0
"thesofproject/sof","de469547edd6c58f82e9b1bb44490ff73e79b571","tlauda","2019-03-21 11:55:24","false","host: fix playback with DW-DMA

Fixes playback with DW-DMA. Flow of pipeline copy
has changed, so now we need to preload the whole
buffer before allowing first copy to further
components. Also we need to move dma_copy call
to buffer callbacks to be up to date with data.
This was previosly done only for Host DMA.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",65,10,0
"thesofproject/sof","c9d603bb11e83551f675cba97aac75af7058e1bd","singalsu","2022-03-09 12:10:42","false","Tools: Test: Fix mistake in script test_run.m

Remove the extra argument for fprintf(). For some reason there was
no harm seen but this should trigger an error when run in Octave or
Matlab.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",114,45,1
"thesofproject/sof","570ce0659964e61aa220b139c7772549b711b02a","lgirdwood","2019-01-24 08:12:16","true","Merge pull request #877 from dbaluta/master

drivers: Remove unused unused host_msg field",55,8,0
"thesofproject/sof","cfdfcf56615f54fc4b1ad8e79e9f9f92797d1f74","mrajwa","2019-01-15 22:27:02","false","GDB: Added packet parser.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",54,7,0
"thesofproject/sof","cd3de64cc6d915669f88bb819e99cbd905954cfb","mrajwa","2019-08-27 21:04:15","false","kpb: fix premature state change in buffering function

This patch fixes state change in buffering function before
the check of state from previous stage. This issue resulted
in missing samples from stream during draining.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",55,15,0
"thesofproject/sof","bad7b99721ef19ef13adcc62ca31bb48c1bd3dee","lgirdwood","2018-10-10 15:13:38","true","Merge pull request #454 from singalsu/eq_fir_add_16_24_data_proposal

EQ FIR: Add support for 16 and 24 bit data",33,4,0
"thesofproject/sof","9b70458bebd5a455cc8161cd01891fb18a6d5a34","mrajwa","2019-06-10 10:37:08","false","pipeline: update pipeline idle task

The idle tasks scheduler new feature enable idle
tasks to reenter themselves at some later time.
Therefore pipeline tasks needs to be updated
accordingly.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",50,12,0
"thesofproject/sof","39f24fbc2aaa39cbf73932ce03b0497da7cf8518","mrajwa","2019-07-25 21:51:48","false","kpb: add secure reset while buffering

This patch takes care of secure reset while
KPB is in buffering state.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,14,0
"thesofproject/sof","3fea877c351a24a1960d363fc8af898585b85c74","lgirdwood","2018-08-09 07:31:38","true","Merge pull request #211 from xiulipan/shfix

scripts: version: fix version error when have no tags",19,2,0
"thesofproject/sof","2e07bb9d89148fb8eefd05d45757a1c2fdec2f46","ymdatta","2020-08-18 11:20:50","false","tools: testbench: send valid pointer to free system call

free() system call frees the memory space pointed to by
ptr, which must have been returned by previous call to
malloc(), calloc() or realloc().

Now, when incrementing the array pointer, we may have
exceeded the actual allocated size. If we do pointer arithmetic
and subtract size from the array pointer, we may not point to
the actual location returned by malloc().

This patch makes sure that when we do pointer arithmetic on array,
the array's value at the end would be same as the one returned
by malloc.

Signed-off-by: Mohana Datta Yelugoti <ymdatta.work@gmail.com>",76,27,0
"thesofproject/sof","857d547b52c14afac7b647729c52c4f817dd85ed","btian1","2023-05-19 01:36:42","false","ipcgtw: fix potential memory misalignment in structure definition

Two structures are both need 4 bytes aligned, since its content
started with int32, add 4 bytes align in current code.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",50,59,1
"thesofproject/sof","06c3a90b6e83ff49907e6196b0252e4e94443b2a","slawblauciak","2021-05-21 12:02:37","false","rimage: update rimage submodule

Updates the rimage submodule to:
6f45b619210b2dc1fc84baa521e2d01a6b7a485a

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",84,36,0
"thesofproject/sof","cbf2be22ed314ce9d3863bc7217b29d74bcfae3a","keyonjie","2019-04-11 07:37:50","false","component: refine state change for xrun handling

When trigger xrun arrives, we will reset the component state to be
READY, which means prepare will needed before we can recover.

Update state machine diagram and cmoka unit test cases also.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",49,10,0
"thesofproject/sof","e609b18b5476adad8ff755ffab7b045befba11cc","keyonjie","2021-06-10 08:29:37","false","memory: suecreek: add alias of the boot entry

Use the unified macro IMR_BOOT_LDR_TEXT_ENTRY_BASE for the boot loader
text entry.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",80,36,0
"thesofproject/sof","f004d11f306e2d910e22e06953fc252c301161a9","jlacla","2019-10-15 09:13:57","false","drivers : interrupt: alignment of cascaded IRQs

The base irq of the first created cascaded struct is currently equal to
PLATFORM_IRQ_HW_NUM, which is 32 on HIFI4.

On IMX platform the number of children per such a struct is equal to 64
(as per IMX steer IRQ mapping).

Since steer irq in range [0-63] are not routed to the DSP on IMX8 it is
possible to create the cascaded structs only from 64.

Starting them from 32 creates a bias in the management of interrupts,
making the storing of the irq-handlers un-natural and complicated.

This commit wants to replace the initialization of cascade_root.last_irq
by a new constant PLATFORM_IRQ_FIRST_CHILD which would be defined at
platform level.

In the case of IMX it takes value 0, while in all other platform it takes
the value PLATFORM_IRQ_HW_NUM in order to keep things as they are.

Signed-off-by: Jerome Laclavere <jerome.laclavere@nxp.com>",66,16,0
"thesofproject/sof","ee8e4bfcbb112adde8c8f7b0bf32f1213ea6e88b","xiulipan","2020-02-28 05:06:34","false","scripts: fix issue in qemu-check.sh

Fix false positive return value for upsupported platforms.
Fix wrong parameter passed in when mutliple platform test.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",73,21,0
"thesofproject/sof","25dcef9219ff2bd4c694697fa230744ecfdd965a","xiulipan","2018-10-18 10:56:42","false","topolgy: m4: add direction for widget dai

Add direction for widget dai, 0 for playback and 1 for capture.

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>
Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",33,5,0
"thesofproject/sof","9611d126ba5d4939c8a5a841e10663aac2b89e41","andrula-song","2022-05-17 07:50:30","false","audio: add API with alignment limits for stream copy

Add API function such as comp_get_copy_limits_frame
_aligned(). This function would finally call audio_
stream_get_avail_frames_aligned to use right shift
instead of division, whichh reduce about 26% MCPS than
the original division method.
Developers should set the byte_align for xtensa intrinsics
and frame_align_req for algorithm limits only once in
component prepare or param function.

Signed-off-by: Andrula Song <xiaoyuan.song@intel.com>",114,47,1
"thesofproject/sof","641fab27c768dd7612ce357949de03618cd6950f","zhuyingjiang","2018-11-05 08:52:21","false","rimage: add 1.5 rimage defines

add 1.5 rimage defines for skl and kbl

Signed-off-by: Zhu Yingjiang <yingjiang.zhu@linux.intel.com>",38,5,0
"thesofproject/sof","67a0a6937c87e3c12490ed1a6587b258f1ed510f","ktrzcinx","2020-08-21 08:12:17","false","trace: Trace initial message as error logs

Use tr_err to have this initial message also in error logs and assert
traces works well.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",75,27,0
"thesofproject/sof","3efd78048db7fd7ae76207545f7fe8d3f469e92b","RanderWang","2021-09-27 08:13:21","false","ipc4: add basefw component support

The module id of basefw is zero. Driver get & set global
states by this id, such as platform info, memory inf, hw
info, power info.

There are three types of elf binary built by SOF: boot_loader,
basefw which is built from all sof entities selected in kconfig
and external libraries developed by 3rd party and may be close-source.
Rimage packs boot_loader and basefw into sof-xxx.ri.

This patch adds limited support of features in basefw module and more
features will be added in future.

Signed-off-by: Rander Wang <rander.wang@intel.com>",120,40,0
"thesofproject/sof","fc06efb6bc9777cba6b49064609ce84ab6f7db28","RanderWang","2022-04-27 10:38:44","false","ipc4: use uuid to find copier module

Fix a capture issue on windows. Currently we use SOF_COMP_HOST
or SOF_COMP_DAI for copier with host or dai included. But There
are some functions process copier as host or dai since its type
is that type. This will result to unexpected error.

This patch uses uuid to find copier with gateway support so that
it can be identified in ipc4 framework.

Signed-off-by: Rander Wang <rander.wang@intel.com>",115,47,1
"thesofproject/sof","b6b8c3f2a8b259c1197d5fde5b3c897a633369a5","tlauda","2020-03-17 15:52:29","false","spinlock: remove double header inclusion

Removes double inclusion of trace header.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",72,21,0
"thesofproject/sof","58bc284905ee8203c17e7d62e4e57bb0bf4dd2b4","tlauda","2018-07-23 15:55:29","false","dai: ignore data on capture stop

Ignores data on stopping capture stream.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",13,2,0
"thesofproject/sof","3b911d10a4270c61b18ac4bead9f9ca2e891ed77","tlauda","2019-11-20 13:31:11","false","eq_fir: use buffer_copy function

Uses buffer_copy function for bypass mode to avoid code duplication.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,18,0
"thesofproject/sof","323171723208619138e2a4af207f965c5fb1d32e","tlauda","2020-01-08 11:54:17","false","notifier: add notify_data to sof context

Adds notify_data to sof main context. Also implements
getter to easily retrieve the pointer through one point
of access.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",72,19,0
"thesofproject/sof","caaf5849ec99741fc8b358e916045f65566e2033","tlauda","2020-04-06 08:20:17","false","notifier: protect from preemption

Adds irq_local_disable/enable during notifier_register
and notifier_unregister calls to protect notify list
from preemption.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",80,22,0
"thesofproject/sof","8e9eadcede1993d26e7937988d68acd3f93f0fba","tlauda","2020-03-20 08:23:30","false","trace: add trace point sw registers per core

Extends software registers to include trace point per core.
This way slave cores won't override boot status of one another.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",68,22,0
"thesofproject/sof","deb7849f764f2b981c4c9f6fd2b012957d887726","singalsu","2020-12-10 18:10:00","false","Tools: Fixes to TDFB tune and test scripts

Matlab does not support isfile(), so another command is used to
check if a file exists. The new way works both in Octave and Matlab.

The bf_defaults.m is fixed to properly initialize empty strings
to cell arrays. It's needed with minimal command like usage
as shown in SOF Docs examples.

In bf_design.m the num_filters determination is moved after array
helpers because other than line and circle do not use mic_n parameter.
The bug resulted to zero num_filters.

In bf_merge.m the unused bf3 and bf4 are removed.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",74,30,0
"thesofproject/sof","2ca6a4afbb9475cd911207c67c25c6ea1452e70e","bardliao","2019-10-22 02:20:41","false","Topology: sof-icl-rt711-rt1308-rt715: modify PCM name

To be more readable.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",65,17,0
"thesofproject/sof","611afaf8f6b5570c78959b111bb504907a80892f","bardliao","2019-09-11 07:28:14","false","topology: add hdmi support for sof-icl-rt711-rt1308-rt715

sof-icl-rt711-rt1308-rt715-hdmi.m4 is based on sof-icl-rt711-rt1308
-rt715.m4 with hdmi supported.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",60,15,0
"thesofproject/sof","ff71cf89b132415bb2d7805c2acc5b6827132549","dbaluta","2023-06-19 12:35:17","false","app: boards: Add mimx93_evk_a55 overlay file

We will use SOF app with default mimx93_evk_a55 board on top
of which will add necessary adaptations.

e.g we will define SOF required memory areas in the overlay
and will get rid of mimx93_evk_a55_sof board.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",45,61,1
"thesofproject/sof","b673d4a3e2245c2fc02b6f07e00d51ef487d881f","aiChaoSONG","2021-12-23 06:50:23","false","test: improve compatibility for malloc

The C header file malloc.h does not exist on
some Xtensa processor configurations or host OSes,
include stdlib.h instead because they both provide
the prototype for 'malloc' function.

Fixes: #5102

Signed-off-by: Chao Song <chao.song@linux.intel.com>",121,43,1
"thesofproject/sof","67f9862956c56a0e8dd95995cf24456fc44a8a2c","RanderWang","2023-07-25 06:59:07","false","audio: add fixup for S24_3LE

It is missed in kconfig.

Signed-off-by: Rander Wang <rander.wang@intel.com>",33,62,1
"thesofproject/sof","72300fe090a5293e27a4adda71d9c008c9de70a6","RanderWang","2022-08-26 05:00:58","false","eq_fir: use module interface

Adopt module interface for eq_fir component.

Signed-off-by: Rander Wang <rander.wang@intel.com>",114,51,1
"thesofproject/sof","76feb11d1b8f425021b5691668af2250fee444ac","RanderWang","2021-08-27 03:03:46","false","ipc4: mixer: add mixin & mixout modules support

mixin & mixout work together to achieve the function of
mixer in current sof. This patch convert mixin & mixout
messages to mixer messages and let's mixer do their
task.

Signed-off-by: Rander Wang <rander.wang@intel.com>",119,39,0
"thesofproject/sof","fc825a9ecbc841778adc23aa847c178f18830fd1","gongjun-song","2022-10-14 05:44:56","false","topology1: Add sof-rpl-rt711-l2-rt1316-l01-rt714-l3

Audio hardware configuration of SKU 0C40 product is rt711 on link2,
two rt1316s on link0 and link1 and rt714 on link3

Signed-off-by: Gongjun Song <gongjun.song@intel.com>",98,52,1
"thesofproject/sof","11baeefd940986c5db23aaa0fc33e513cf129253","gongjun-song","2022-10-13 13:57:45","false","topology1: Add sof-rpl-rt1316-l12-rt714-l0

Audio hardware configuration of SKU 0C10 product is rt714 on link0,
two rt1316s on link1 and link2

Signed-off-by: Gongjun Song <gongjun.song@intel.com>",97,52,1
"thesofproject/sof","37225cda01300dfd7530f32cfa436809195bf40b","softwarecki","2022-06-30 14:22:25","false","comp_dev: Remove unused position field from comp_dev structure

The position field was ambiguous and is no longer used.
It has been deleted.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",110,49,1
"thesofproject/sof","95f6f88be705858a61915e07e22cedb7d739018e","softwarecki","2022-07-01 20:34:06","false","ipc: Simplication of the ipc_get_ppl_comp function

The ipc_get_ppl_comp function has been simplified by removing
the duplicate loop. Now the component list is only reviewed once
and both conditions are checked simultaneously.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",110,49,1
"thesofproject/sof","1fadc2118754541a5e88b93a74bf035f13993c60","macchian","2023-06-27 07:59:38","false","topology2: cavs-rt5682: add sof-mtl-rt1019-rt5682 support

Due to sof_mtl_rt1019_rt5682 machine driver without BT_OFFLAD
bit and support 3 HDMI devices, so make the BT_OFFLOAD option
and subsequentially mapping SPK_ID from 7 to 6.

Signed-off-by: Mac Chiang <mac.chiang@intel.com>",40,61,1
"thesofproject/sof","6a8eb721f2e86be68a7fcff9c83be4cd4a3ad5b1","plbossart","2022-03-16 00:31:00","false","topology2: cavs: rename mixin-playback as host-copier-gain-mixin-playback

Be exhaustive on pipeline contents.

Also remove Windows references and copy/pasted comments

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",107,45,1
"thesofproject/sof","b5af84deaa7281f304dc0110ce2cac6396752b93","jajanusz","2018-11-15 12:36:52","false","scripts: add smp builds to xtensa-build-all.sh

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",40,5,0
"thesofproject/sof","5a92c4f370f7c8900906e1417ee05bec620b7133","jajanusz","2019-06-28 12:40:20","false","ssp: SCR comment

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",43,13,0
"thesofproject/sof","be007d14ab82029036657db6d6805e7788454c90","mengdonglin","2022-06-04 09:32:03","false","xtensa-build-zephyr.py: add option to use an output subdirectory for each platform

All firmware files are installed in the same staging directory by default.

This patch adds an option --use-platform-subdir to create an output
subdirectory for each platform.

e.g. $scripts/xtensa-build-zephyr.py apl jsl tgl --use-platform-subdir
The layout of installed files will be like this:

build-sof-staging
├── sof
│   ├── apl
│   │   ├── community
│   │   │   └── sof-apl.ri
│   │   └── sof-apl.ldc
│   ├── tgl
│   │   ├── community
│   │   │   └── sof-tgl.ri
│   │   └── sof-tgl.ldc
│   └── jsl
│       ├── sof-jsl.ldc
│       └── community
│           └── sof-jsl.ri
└── tools
    ├── sof-logger
    └── cavstool.py

Signed-off-by: mengdonglin <mengdong.lin@intel.com>",115,48,1
"thesofproject/sof","0f5cee0064da6c2a2d0176fa48e9f4e389d116c9","singalsu","2023-05-22 12:59:16","false","Audio: Multiband-DRC: Convert to module adapter

This patch replaces legacy component API with new module adapter
API. There are no changes to functionality.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",55,60,1
"thesofproject/sof","0f3e1ee0bd3a0515be57af6a4c38a53962ed2bdc","lrgirdwo","2018-11-07 16:55:38","false","debug: make sure debug status is sent to host at boot.

Send debug status to host at boot.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",39,5,0
"thesofproject/sof","bd0e10d133b09b0abf5069da5cb75452c63ece9a","ktrzcinx","2020-05-29 12:29:40","false","logger: Store filter config given in command line

To parse filter configuration given by user, uuid dictionary
must be readed first from ldc file. Otherwise it's impossible
to validate given components names. This is reason why filter
configuration must be buffered and parsed in later steps.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",97,24,0
"thesofproject/sof","395a34efc22ee364b7f2593260276b856c0ee312","keyonjie","2019-04-10 10:50:15","false","pipeline: improve trigger to including xrun handling

Once FW initiated xrun happens, the pipeline will be stopped(via
pipeline_xrun()) first internally, here add logic to ignore any extra
trigger_stop from host, and do prepare for xrun recovery before we
can really trigger it start.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",50,10,0
"thesofproject/sof","7e0d2661c7ca28d3c463ac4f0b69107b80454007","keyonjie","2019-07-02 11:09:23","false","pipeline: disable FW xrun recovery at the moment to rescue logs

Xrun recover failure will flush all over the memory window that we can't
get the log of the first error, let's disable it before the flag is
moved to kconfig and fw_ready IPC, to rescue logs and debugging.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",42,13,0
"thesofproject/sof","280d33e88aafa89a6df72c34998b6a754c1e6439","slawblauciak","2019-12-11 13:11:47","false","workaround: disable hifi3 pcm conversion

Due to stability issues of hifi3 pcm conversion the
used implementation should be switched to generic.

This is a temporary measure, the hifi3 implementation
should be enabled again once stability issues are resolved.

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",73,18,0
"thesofproject/sof","993037ceb16a83855f63cace7904d7895eefae17","ranj063","2022-01-11 20:01:24","false","codec_adapter: Remove redundant setting of avail to true

module_load_config() already sets the config avail flag to true.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",114,43,1
"thesofproject/sof","25a4c5b0db74a5d7476a8152fcc7ddae7e7a7120","keyonjie","2019-06-21 11:35:41","false","detect-test: allocate model data memory at set_model stage

We are aligned to use separate IPC for set_config and set_model, so
don't allocate model buffer at set_config stage, but do that in the
first IPC for model blob config IPC sequences.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",46,13,0
"thesofproject/sof","9ed4557460409dd7e895c9735afeef04944fe850","lrgirdwo","2021-08-16 16:13:59","false","testbench: don't enable system agent.

SA is not used with testbench so disable it.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",117,38,0
"thesofproject/sof","af366cfbd2e6626d5bb1f852a1976c5ef4c1b536","slawblauciak","2020-09-10 10:49:16","false","kpb: reduce buffer length on non-TGL platforms

Due to memory constraints, the keyphrase buffer cannot be too long.
As a consequence of reducing the buffer,
platform wakeup margin check has to be removed as well,
otherwise the maximum draining request will be very short.

This is a temporary measure,
ultimately the buffer length and wakeup time settings
should be moved to the topology.

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",66,27,0
"thesofproject/sof","14b2f89bd44757dfa6992f456139bae0fe0a61d5","marc-hb","2022-11-21 20:37:13","false",".github/sparse-zephyr: align Ubuntu version with zephyr-build

Safer to have nested containers identical to each other, will help share
binaries.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",96,54,1
"thesofproject/sof","7c08aabbe730c054241a1a0786a7facb6515cc0d","marc-hb","2021-03-22 20:52:31","false","topology/cmake: add missing .m4 dependency, fixes incremental build

There was no [MAIN_]DEPENDS on the .m4 source file, so changes were not
triggering any rebuild.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",73,34,0
"thesofproject/sof","2b85c2c358f1ced60590548bf57837922175214a","marc-hb","2022-12-23 22:59:15","false","scripts: fix check whether CMake configuration succeeded

To test whether CMake configuration can be skipped, look for either a
ninja.build or Makefile.

An existing build directory is NOT proof that CMake configuration
succeeded. When CMake configuration failed, trying to build again fails
with a super confusing ""Makefile not found"" error message.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",92,55,1
"thesofproject/sof","61dc4e84f3af8e81428ba844d95b0d80e08aa3e4","tobonex","2023-09-15 17:49:01","false","sample: remove buffer_acquire from samples

remove buffer ops from samples

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","4f74ed70187e08daa0d56e05cdc07b940a287577","tobonex","2023-09-15 17:48:15","false","volume: remove buffer_acquire from volume

remove buffer ops from volume module

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","256bc69f310fb6fb3e9486923630deb8b4cff65e","aiChaoSONG","2021-07-09 02:06:42","false","topology2: Add pcm capabilities class

Add pcm capabilities class definition, pcm
capabilities object can be instantiated as:

    Object.PCM.pcm_caps.""DIRECTION"" {
	name	    ""Headset""
	direction   ""playback""
	formats	    ""S32_LE,S24_LE,S16_LE""
	rate_min	48000
	rate_max	48000
	channels_min	2
	channels_max	2
	periods_min	2
    }

Signed-off-by: Ranjani Sridharan <ranjani.sidharan@linux.intel.com>
Signed-off-by: Chao Song <chao.song@linux.intel.com>",86,37,0
"thesofproject/sof","2f29bc31fcfc4e129d8b84594e2011490d1dafc3","aiChaoSONG","2023-01-17 05:00:48","false","Topology2: add smart amp pipeline in nocodec topology

Use mixout-gain-smart-amp-dai-copier-playback pipeline
for SSP0 DAI playback.

Signed-off-by: Chao Song <chao.song@linux.intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",55,55,1
"thesofproject/sof","a3b38152fbf19e63da796ad710c10e71fd6652da","RanderWang","2018-08-14 08:57:46","false","topology: add some virtual widgets to topology of cnl

It fixs dai link error in kernel log

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",16,2,0
"thesofproject/sof","15122b2d99c6081abdee0f3f3db5d9ee73a65179","RanderWang","2021-09-03 05:21:32","false","ipc4: mixin & mixout: set sink buffer format

This patch fixes zero-data issues to enable mixin & mixout
set sink buffer format for ipc4

Signed-off-by: Rander Wang <rander.wang@intel.com>",119,39,0
"thesofproject/sof","7ca91521201bf156e75d153446e07b0ef8cbe085","RanderWang","2022-12-09 08:57:26","false","smart_amp_test: fix a typo

Use smart_amp_verify_params

Signed-off-by: Rander Wang <rander.wang@intel.com>",102,54,1
"thesofproject/sof","48145df552433ab210dbe6198ae4ee2e959e553b","lyakh","2019-01-17 08:51:37","false","alloc: optimise the contiguous block allocation algorithm

If we found a busy block among the potential sequence of blocks, that
we were trying to allocate, no need to retry the attempt from the
next starting block, unless it was the first block, that was busy. It
is enough to resume searching from the next block after the busy one.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,7,0
"thesofproject/sof","1e9a709ee705f1c98aac5a31eab7ac5805a486b0","lyakh","2022-09-09 05:50:59","false","ll-schedule: degrade an error message to a warning

SOF always tries to register both scheduling domains - timer and DMA,
even though the DMA domain isn't used in current topologies on newer
architectures and isn't supported under Zephyr. Degrade the error
message printed upon each boot due to this lack of support to a
warning.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",105,51,1
"thesofproject/sof","aff99b209f05c55f5fdd21bf46f826a0d2a00bb3","lyakh","2022-12-20 07:02:48","false","copier: fix a potentially uninitialised warning

The create_dai() function can return an uninitialised value. Fix it
by reducing the scope of the variable.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",92,55,1
"thesofproject/sof","77a231202cc508eed86b16c38013f21ae92e94dd","keyonjie","2021-05-07 04:46:41","false","cavs: timer: remove the wrong timer_disable

The timer_disable() in the timer_register() is wrong, the
interrupt_enable() calling handles the interrupt enabling already,
remove the wrong timer_disable() calling to correct it.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",80,35,0
"thesofproject/sof","b832e96b664cec8778003c8fc98f6bbd23bea569","lyakh","2022-04-13 08:49:02","false","rtnr: fix buffer acquisition

Instead of acquiring and releasing buffers locally multiple times,
do that once for .copy(), .params() and .prepare() methods.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",117,46,1
"thesofproject/sof","7531d6bd073e103f9ca86eb9eb3d0ec95738e5a8","lyakh","2021-01-07 11:23:50","false","zephyr: add a cache variable with a rimage configuration path

zephyr needs a path to rimage configuration files, add it to
cmake cache.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",75,31,0
"thesofproject/sof","9e546b4b842846bc97b894cbb4c33ea57fd7ac71","marc-hb","2022-09-02 16:34:57","false","scripts/test-repro-build.sh: leave only TGL

Other platforms are not supported anymore in the main branch.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",118,51,1
"thesofproject/sof","a1f6fd3bb67ca6596c951480e7d60dac8628d6e8","kfrydryx","2022-06-06 12:41:47","false","DAI: Add sampling frequency to ipc_config_dai

For some of the dai devices, sampling frequency is not passed as a part
of IPC4 blob. Added this value to ipc_config_dai, so during
configuration devices can access it through their common_config
argument.

Signed-off-by: Krzysztof Frydryk <krzysztofx.frydryk@intel.com>",116,48,1
"thesofproject/sof","d3b66545792e0c9ced81dd58b2cc0aea915c05cc","xiulipan","2019-01-31 06:59:59","false","CI: travis: update the docker hub organization

Use thesofproject organization in dockerhub to replace the personal
account.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",59,8,0
"thesofproject/sof","e521a25d063c8a4d55678c8ddd94e379206b7f78","lyakh","2022-08-17 10:15:30","false","coherent: make coherent_release*() functions return void

coherent_release() doesn't need to return the uncached address, that
was originally used to acquire the object, that address is available
to the caller already.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",113,51,1
"thesofproject/sof","3f9e6be455d792fc5c2b9c0dda23c91c40380ada","lyakh","2023-09-08 15:30:47","false","module-adapter: (cosmetic) remove a redundant check

rfree(NULL) is valid, remove a redundant NULL check.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",20,63,1
"thesofproject/sof","e9bec4a559208ee8ae6b44ac24bcd8943bd0f4ee","aiChaoSONG","2019-12-12 04:21:21","false","kmod_scripts: add support for snd_soc_cml_rt1011_rt5682

Add snd_soc_cml_rt1011_rt5682 module removal support
for CML with rt1011 and rt5682 codecs.

Signed-off-by: Amery Song <chao.song@intel.com>",74,18,0
"thesofproject/sof","ec974a881f1c01716edb167d553e58c719acfbab","kfrydryx","2022-10-19 12:41:48","false","platform: tgl: Enable AMS

Set config to enable AMS for CAVS25 platform.

Signed-off-by: Krzysztof Frydryk <krzysztofx.frydryk@intel.com>",98,53,1
"thesofproject/sof","b119fe2c8b563a27cbf1b97ab2311ad354a0ffe7","ktrzcinx","2020-09-29 12:28:00","false","ext_man: Add information about runtime memory scan possibility

This component is conditionally compiled, so passing such an
information to driver, allows to check possible scanning failure
reason.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",66,28,0
"thesofproject/sof","86ad3798e11c357e33d43256da58ecceea94a70c","kv2019i","2022-09-05 11:17:03","false","ipc4: add debug logs for RX/TX messages

Add logs for all inbound and outbound IPC messages using a similar
logging style as used by Linux SOF driver.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",118,51,1
"thesofproject/sof","722a24ab2e1fc4885ed5b9f40bbf0d1604f9fb42","lgirdwood","2018-07-30 10:46:08","true","Merge pull request #43 from ranj063/sectionpcm

[RFC] Changes to SectionPCM macros",15,2,0
"thesofproject/sof","90d736cea32f718cd0d4136488354844e4993406","lgirdwood","2018-08-10 12:26:04","true","Merge pull request #220 from tlauda/topic/idc_send_blocking

idc: allow to send blocking messages to cores",19,2,0
"thesofproject/sof","40c2b9e80cce9d4246270656a254340a4d4b5600","keyonjie","2019-06-28 07:53:53","false","dw-dma: add more logs when get avail/free data fail

We should not get 0 size from dw_dma_avail_data_size() and
dw_dma_avail_data_size(), if that happened, something might be wrong,
e.g. the dma channel is not enabled, here logging out the channel
enabling status for debugging.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",45,13,0
"thesofproject/sof","c7af3c5b3be5bc374faafc9d3a4d598fce2d6efa","marc-hb","2023-06-08 00:42:08","false","Kconfig: don't fall back on CONFIG_TIGERLAKE

There's really no reason to fall back on a default ""platform"" and pick
up a bunch of other, totally random settings.

Now the following command fails immediately with a useful `platform not
defined` error message instead of stopping with a cryptic
`platform/trace/trace.h: No such file or directory` after successfully
compiling half the .c files in a Frankenstein CONFIG_uration.

```
  west build -p --board mimx8mm_evk_a53 modules/audio/sof/app
```

More context in #7192.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",46,60,1
"thesofproject/sof","177d9bd073f2410a6d42f19615c9a0459cd5e866","marc-hb","2021-08-25 16:06:33","false","cmake: defer the rimage build until it's actually needed.

This is motivated by the zephyr.elf build that does not need rimage at
all.

Also build smex later, only when it's needed.

After building and deleting the rimage/ clone, a plain SOF clean +
RE-build now fails much later: it now fails AFTER successfully building
the sof binary, only when it tries to build either bootloader,
boot_module or base_module that actually need rimage:

[ 87%] Performing configure step for 'rimage_ep'
CMake Error: The source directory ""/home/SOF/sof/rimage"" does not appear
to contain CMakeLists.txt.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",122,39,0
"thesofproject/sof","be53396359ae0b5cab4a451a26bbe4bfa3ca3ec5","ujfalusi","2023-08-18 06:58:12","false","lib_manager: Use i/dcache_invalidate_region() for cache invalidation

The i/dcache_invalidate_region wraps the sys_cache_* functions and is the
proper API to use for cache invalidation.

Fixes: 1dc6a2836dff (""lib-manager: clean up memory allocations and cache handling."")
Reported-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>
Suggested-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>
Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",25,63,1
"thesofproject/sof","c9cec67d955006a300712cf974133af7d9c39a62","btian1","2023-07-13 08:55:02","false","mixin_out: remove ipc config frame format assignment

there is no usage for mixin and mixout ipc_config frame
format, remove it in its init function, frame_fmt will be
calculated and assigned in params accordingly, also most of other
modules init funciton does not have this conversion.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",31,61,1
"thesofproject/sof","b3b04f6b7bb0b0f947263f2df880defaaeedae91","plbossart","2019-01-16 05:08:04","false","src/drivers/intel/haswell/ssp.c: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","387d74ea6d0c53a452d2a03b189b6f583a236e03","singalsu","2022-01-12 13:08:27","false","Tools: Tune: EQ: Fix script compatibility with Matlab

The script mls_freq_resp.m has worked previously with Octave
while failed with Matlab because it does not have source
command. This patch ads function get_config() that reads
the configuration file, evaluates it, and returns the
needed variable.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",117,43,1
"thesofproject/sof","112a28e57c77d82f5d8d721c428873cb8f0d7e75","marcinszkudlinski","2023-08-16 14:16:52","false","mod: add module_is_ready_to_process method

This is a modification of module API - add is_ready_to_process call
In case of LL modules all modules have ""copy"" or ""process"" method
called periodically, regardless if they're ready to process or not

In case of DP processing the module must have enough data on all
its inputs, enough space for result storage on all outputs, etc.
Unfortunately simply check of number of bytes at all sources/sinks
may not be sufficient (i.e. in case of variable rate audio formats)

The is_ready_to_process call will be called when DP scheduler makes
decision if the module is to be scheduled at this LL tick or not.
If the module wants its thread to start (and process called) it should
return TRUE

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",25,62,1
"thesofproject/sof","20fb082ecbc3308aab39da805b22d54767b186b2","singalsu","2022-07-29 15:22:57","false","Math: FFT: Add 16 bit FFT and IFFT version

This patch adds lower RAM and lower MCPS consuming FFT
for 16 bit data. The twiddle factors save from .bss
4096 bytes. For e.g. 512 bin FFT the saving for runtime is
additional 4096 bytes.

The previous fft.c has been split to fft_common.c and fft_32.c for
32 bits version. The new 16 bit version is in fft_16.c. The name
of previous fft_execute() is changed to fft_execute_32(). Common
function fft_plan_new() takes FFT word length 16 or 32 as new
last argument.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",110,50,1
"thesofproject/sof","2a5e327372183db0aa8ac9d4ea7e81e39f58c8f4","marcinszkudlinski","2023-07-28 13:46:59","false","sink_api: add OBS parameter to sink structure

Output Buffer Size, the amount of free space required for
processing is declared by module in IPC init_instance

This OBS value is kept in module structure, however, there
may be a module that have different OBS per each output.

There's a single sink structure per connection to the module,
so it looks like a good place to store OBS there

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",31,62,1
"thesofproject/sof","60df52d454ddd6d56e2e3ba8ed21d51fd29eda41","kehuangli","2022-05-06 20:17:08","false","component: add initial post processing component and topology

Introduce a new component to perform configurable audio post processing
on playback path before smart amplifier.

1. Put google_audio_post_processing libs at $SOF_REPO/third_party/lib
   - libgoogle_audio_post_processing.a
   - libc++.a
   - libc++abi.a
2. Enable google_audio_post_processing in config override
   $SOF_REPO/src/arch/xtensa/configs/override
   CONFIG_COMP_GOOGLE_AUDIO_POST_PROCESSING=y
3. Build the firmware and tool with xcc
4. To verify it works:
   - aplay some audio
   - amixer and grep GAPP
   - sof-ctl to get/set control

Signed-off-by: Kehuang Li <kehuangli@google.com>",115,47,1
"thesofproject/sof","f6e6ac5bb15299ab2899aa2fa161d0be12e50b67","cujomalainey","2021-03-18 00:55:34","false","codec_adapter: remove term ""dummy"" from adapters

Following move of open source to remove oppressive language from open
source, dummy is one of the terms to avoid. Also the term does a poor
job of describing what the adapter actually does.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",72,33,0
"thesofproject/sof","23d9c78a5c1f26c60ebd19736f096a6bdfff9299","cujomalainey","2019-08-29 22:56:05","false","scripts: allocate tty on docker

Bash and menuconfig cannot run without this flag. Docker-run just hangs
without it

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",58,15,0
"thesofproject/sof","9cc3f6d10e4ae6ea4616793d80c8cb5270cb5b5e","cujomalainey","2019-03-21 23:44:13","false","scripts: use local cpu count to build

Build faster by using all available cores by default
The xtensa script claims it used infinite build threads when j was not
specified but it was actually falling back to 1.

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",66,10,0
"thesofproject/sof","b371373f7d7486014ea7d80a5836d8958f3d93a9","aborisovich","2022-07-13 03:08:31","false","scripts: docker-build.sh updated with changes from xtensa-build-zephyr.py

Removed old flags from python script call and replaced with
new one. Added one more working directory to zephyr-build container
now SOF is placed in /workdir/sof and west workspace in /workdir .

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",110,49,1
"thesofproject/sof","0e92db32c1295e139cfbc75b0fd9e06b37e28488","tlauda","2018-10-01 14:24:22","false","ut: fix tests on xtensa-smp

Fixes UT on xtensa-smp architecture.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",36,4,0
"thesofproject/sof","4cbfd88731aac0ce85f40754e31451feef85c3c3","tlauda","2019-07-09 09:19:09","false","platform: cpu: extract core defines to separate headers

Extracts DSP core defines to the separate platform headers.
It was partially done before for cAVS platforms.
It's a step forward towards full header cleanup.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",42,13,0
"thesofproject/sof","7481be7bc3d1cd44c73651825d94b9fc42a43c30","tlauda","2020-05-29 10:50:13","false","bootloader: init HP SRAM based on PLATFORM_MEM_INIT_AT_BOOT

Initializes HP SRAM based on PLATFORM_MEM_INIT_AT_BOOT definition
instead of checking for cAVS version.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",97,24,0
"thesofproject/sof","eedd76ae375e69f1845b57a34cab0ae5d5f41509","johnylin76","2023-02-10 03:51:58","false","module_adapter: waves: fix unfreed rballoc memory block

There is a rballoc() call during module_init() lacking the
correspondent rfree() on module_free(). Replace it with
module_allocate_memory() to ensure the memory to be freed
by module_adapter.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",55,56,1
"thesofproject/sof","2c6c1b4d4fb636ea78dfe1136737c4b6baf5b21c","ranj063","2023-09-06 19:35:42","false","audio: google_rtc: Remove set_large_config op for IPC4

The input and output audio formats are sent during module init already.
So no need to overwrite it with topology data that could be incorrect.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",21,63,1
"thesofproject/sof","af352a2bb2e3c973fb195831b4622207dd96bd65","ranj063","2022-09-28 15:25:29","false","module_adapter: Add the verify_params_flags field for modules

Add a verify_params_flags field in struct processing_module which should
be set by the modules during initialization to indicate which
parameters should be skipped during comp_verify_params().

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",97,52,1
"thesofproject/sof","fcfd5d65be08f01598174bc574834b29d733a347","ranj063","2022-01-06 00:15:08","false","test: topology: fix build with latest alsa-lib

Remove the extra space to make the topology build with upstream
alsa-lib.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,43,1
"thesofproject/sof","e5eb7dfc764e1497c6854cae3773cd10486c6760","ranj063","2023-04-12 16:06:29","false","topology2: tokens: Split the tokens for input/output pin index

Separate the pin index token ID for input/output pin index to avoid
collisions between the two and incorrect pin index parsing in the
kernel.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",51,58,1
"thesofproject/sof","21f1344862e160bd8d0e938c4c1a0768475b4012","abonislawski","2020-02-06 09:22:52","false","probes: add probes to sof main context

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",78,20,0
"thesofproject/sof","d0bc31425ac53c64198b8f9f8d2ce5be79592c8f","ranj063","2019-03-18 20:16:52","false","scripts: add option to modify defconfig

Add an option to modify the defconfig during fw build using the
script. Without this, modifying the default config and building
the FW is a 2 step process.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",65,9,0
"thesofproject/sof","0b0ef4a445ed5bddfa9ea7a4ff3cb3986cced1a9","ranj063","2023-05-14 00:33:44","false","dai-zephyr: Use params channels

Use the params channels directly instead of using the local_buffer to
get the channel count. This is in preparation for optimizing the
multiple endpoint DAIs where the local_buffer will not be used.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",51,59,1
"thesofproject/sof","0f0e66e7e70c70284fdd2cfd650fff9353fbdccb","dnikodem","2022-09-22 08:56:31","false","kernel/mailbox: update mailbox macros definition

Update macro definition in mailbox.h according to changes in IPC4 layout.

Signed-off-by: Damian Nikodem <damian.nikodem@intel.com>",97,52,1
"thesofproject/sof","ed64f40935c8ebc1b04e359d948efd7a60e496a2","tlauda","2019-10-18 10:50:17","false","dma: implement dma buffer copy functions

Implements copy functions from/to DMA buffer. They take care
of cache operations and also can perform custom processing
during copy. By default it will be usual buffer copy, but in the future
it can be replaced with pcm conversions, so we don't need volume
into the pipelines just for that operation.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,17,0
"thesofproject/sof","5e583c4c8a2a25a961cffb203d604836a737dd79","saisurya-ch","2023-10-06 11:56:29","false","Add cascaded interrupt in the platform ACP_6_3

Add cascaded interrupt in the platform ACP_6_3.

Signed-off-by: SaiSurya Ch <saisurya.chakkaveeravenkatanaga@amd.com>",15,64,1
"thesofproject/sof","ca45bc830301d7f4b2d5615a5190bf8e5857ffa9","tlauda","2019-05-15 13:04:52","false","audio: put multifile components to directories

This patch moves multifile components to separate
directories. All component headers are also moved to
include/sof/audio.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,11,0
"thesofproject/sof","30ff82efd13f51dcffa033542465dbaec98fd25c","cujomalainey","2021-03-02 00:24:12","false","codec_adapter: Adjust logging for lib context

In order to act as a stand in layer for codecs going forward we need to
not log using our comp_driver as that will be removed in the future.
Instead we need to log using the context of comp_dev.

This commit also reduces the verbosity of a lot of the traces and
increases a few.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",74,33,0
"thesofproject/sof","e50ae6be8c7d18bfcd474b1e39d2951121c9547b","dbaluta","2021-03-02 18:43:02","false","codec_adapter: Initialize processing

During the initialization of a decoder, the initialization task reads the
input stream to discover the parameters of the encoding.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",73,33,0
"thesofproject/sof","b00869e204e5ad6b4c1a0e6cddea6b03e992e2b5","plbossart","2019-12-09 16:19:56","false","topology: fix DMIC device names

DMIC01 is just useless for a user. After multiple rounds of
discussion, we agreed to remove numbers (which could be understood as
a mic position) or a frequency (which is misleading since it can be
updated to e.g. 96kHz by topology), so by default the DMIC interface
is called just that...

Conversely, we add a clear 16kHz qualifier for the low-frequency
path. While in theory the frequency can be changed with modifications
of the FIR filter, applications do need 16kHz support.

Also make sure we only use 'DMIC' for 'PCH-attached DMICs'. For
RT715-based solutions, the microphones can be analog, so use more
generic 'Microphones' description.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",72,18,0
"thesofproject/sof","0b783209b49dc979650f9958d25ce387c8c23d5c","mrajwa","2019-04-25 12:47:34","false","kpb: search and assign host sink

This patch adds missing client/host sink to KPB's private
component data.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",47,11,0
"thesofproject/sof","bc2b2863fa2eaabbe3d81b4a7313514a35728a17","lgirdwood","2018-09-03 13:37:01","true","Merge pull request #289 from singalsu/fix_eq_ptr_dereference_proposal

EQ: Add check for configuration IPC and handle possible null pointers",30,3,0
"thesofproject/sof","31cde1ce97ef13ecb04bc795341b17ad9f8ebb92","lgirdwood","2018-11-27 14:35:58","true","Merge pull request #615 from slawblauciak/hda_dma_cleanup

dma: clean up by separating some of host/link specific code",43,6,0
"thesofproject/sof","e4ca26b55fecb3aa6b555843cbdd8e9e9bc10d69","lgirdwood","2018-09-19 19:35:09","true","Merge pull request #71 from singalsu/add_eq_m4_export

EQ Tool: Output topology m4 binary control style configuration data",36,4,0
"thesofproject/sof","bde4bafb07f854f4ff6a82e5618d05588e1629a6","lgirdwood","2018-09-05 08:11:27","true","Merge pull request #309 from dabekjakub/pipeline_comp_disconect_list

pipeline: list delete on comp disconnect",31,3,0
"thesofproject/sof","eddca597ae096647e0bb94c67c5a77d2a7ce1ba8","lgirdwood","2018-08-30 11:47:55","true","Merge pull request #61 from singalsu/fix_matlab_iir_eq_proposal

EQ Tool: Fix compatibility with Matlab and improve accuracy of IIR filters",29,3,0
"thesofproject/sof","1abc66845d48fc40b0a1856971e88fb605e82b97","lgirdwood","2018-07-02 09:06:55","true","Merge pull request #33 from zhigang-wu/master

apl must support 8-channel, if not, the capture can not work on this platform.",8,1,0
"thesofproject/sof","d3ead755c9f35c790cf6d780f89ac3661b4e1b22","ktrzcinx","2020-09-17 09:23:00","false","toml: manifest: Clear manifest allocated on heap before use

Memory clear allows to easily set seserved/padding fields to zero.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",65,28,0
"thesofproject/sof","ddbf5255d2d38883bde5a092ca8ac7b60d391274","lyakh","2020-11-19 09:26:34","false","zephyr: set ARCH to ""host"" when not building for Xtensa

When building for unsupported architectures under Zephyr set ARCH
to ""host"" to use generic headers.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",74,30,0
"thesofproject/sof","8871bb30879bcb48ccb71ef3169c71bbbd1b8329","lyakh","2022-06-13 10:25:28","false","coherent: add a missing coherent_shared_thread() implementation

Under Zephyr when CONFIG_INCOHERENT isn't selected,
coherent_shared_thread() is undefined, add a missing implementation.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",117,48,1
"thesofproject/sof","2d8ad0c25a1e0b4ccf4eab0d7cb8d9b02b376543","lyakh","2023-03-16 15:01:34","false","tgl: remove deprecated and unused overlay

The ipc4_native_drivers_overlay.conf overlay is deprecated and isn't
used any more, the default ipc4_overlay.conf configures native
drivers itself. Remove the deprecated version.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",56,57,1
"thesofproject/sof","95d6499ad6b43d95a4ef6aef09b9d6d1671568d6","lyakh","2022-04-07 13:27:01","false","pcm_converter: add __sparse_cache annotations

PCM converter functions operate on locked and cached buffers, add
__sparse_cache annotations to them.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",114,46,1
"thesofproject/sof","149d168025430df4e0aba86cd8c3f2852c957a02","lyakh","2023-07-05 10:49:53","false","lib-manager: don't restart DMA while loading a library

HDA DMA for host to DSP transfers should be started once on the
host and then once on the DSP, it shouldn't be restarted
multiple times during transfer.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>
Co-developed-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>
Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",32,61,1
"thesofproject/sof","bccbfcc404d7aac9fc8a26478a725197fdfaee35","marc-hb","2021-11-18 08:50:26","false","xtensa-build-zephyr: add new DEFAULT_PLATFORMS variable for -a

Sometimes we don't want to build all SUPPORTED_PLATFORMS by default.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",128,42,1
"thesofproject/sof","0f989b10e9ef548cc18b7e9e72935aab84cff765","marc-hb","2021-05-05 00:20:03","false","xtensa-build-zephyr.sh: show zephyr short git log / version after clone

By default, the Zephyr build does not log its version. The fix has
already been submitted at
https://github.com/zephyrproject-rtos/zephyr/pull/34842 however:

- 34842 may take some time. Zephyr reviewers are even busier than the
  SOF reviewer.
- 34842 could even be rejected
- 34842 will at best log the SHA1 and no context. This is more verbose
  and future-proof because it supports more complex situations like
  testing a pull/12345/merge

As seen in (unrelated) PR #4123, we need Zephyr git versions NOW.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",81,35,0
"thesofproject/sof","160886bc6fa9247972cc78e7f4c331201cc25deb","ranj063","2021-03-04 20:47:29","false","topology: add new token for dynamic pipelines

Add a new token in scheduler tokens to flag a pipeline
as dynamic. Modify the DAI_ADD ans PIPLINE_PCM_ADD macros
to indicate if the pipeline should be dynamic or now. It is
also possible to make all pipelines in a topology dynamic
by defining the macro DYNAMIC during build.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",73,33,0
"thesofproject/sof","1d9567bb720a049700959a905d9bad7996aa0ddf","ranj063","2018-06-13 05:43:34","false","pipeline: remove dmac id and dmac chan from static pipeline host and dai defs

dmac id and dmac chan no longer come from topology. So remove them.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",1,0,0
"thesofproject/sof","9dfd80d45819cca970299c8e259cd19d235624a5","ranj063","2018-06-16 04:34:33","false","tone: fix calculation for period_bytes

period bytes depends on the frame_fmt and the number of channels
set in topology. So fix calculation accordingly.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",1,1,0
"thesofproject/sof","b6b7c3c9b820c2784397c7f4a24ff5c9519ae785","ranj063","2022-01-07 22:32:32","false","codec_adapter: rename codec_processing_data to module_processing_data

Rename struct codec_processing_data to module_processing_data. No
functional change.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","9e7ec5a3f2560c29ca809c27078ae40a683932be","ranj063","2023-05-08 18:12:28","false","Revert ""topology2: cavs-nocodec: add a module copier to SSP 0 capture pipeline""

DAI copiers now support multiple sinks. So revert the temporary
workaround in the cavs-nocodec topology.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",53,59,1
"thesofproject/sof","fff55d42351f47bf70f807463ae3049a55634066","ranj063","2023-05-05 20:41:53","false","topology: include: pipelines: ip-gateway-capture: set default direction

It is meant for capture.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",53,59,1
"thesofproject/sof","f587993c75c171906a455853a1a94685d7e33f1f","ranj063","2019-12-04 17:59:53","false","topology: byt/cht: Add virtual widgets

Add the required virtual widgets to the BYT codec topology
to suppress the errors seen due to the dapm routes set up
in the machine driver and move them to the common header.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",69,18,0
"thesofproject/sof","bd7dc88231f31d385340310cef467f211a739eeb","ranj063","2018-06-12 20:01:56","false","topology: remove DMAC ID/DMAC_CHANNEL from PIPELINE/PCM/DAI definitions

The firmware no longer uses the DMAC ID and channel info from topology.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",1,0,0
"thesofproject/sof","95c53eafc7f7b9aca18b6337428c784fb37fcb39","jairaj-arava","2022-03-17 19:05:18","false","topology1: add DMIC 48K Core ID flag to CMake for RTNR

For builds with no Hotword on DSP, generic dmic m4 is used.
RTNR is running on DMIC CORE ID 1. Hence adding the flag.

Signed-off-by: Jairaj Arava <jairaj.arava@intel.com>",110,45,1
"thesofproject/sof","69db9c87159f69ffaa6366f1cd27a9f0fe6c6f4f","kv2019i","2022-03-31 07:22:02","false","ipc: run buffer free in context of active pipeline

BUFFER_FREE IPC returns an error if buffer is connected to
two active components.

However it is allowed to free a buffer in the case where either the sink
or the source is no longer active. This happens for example with buffers
that connect two pipelines. If one pipeline is stopped and freed,
the connecting buffer will be also freed.

This does mean pipeline_disconnect() may be run in context
of a pipeline that is running on a different core. This is
fundamentally unsafe and can lead to undefined behaviour
when two cores access the pipeline bsource_list/bsink_list
at the same time on two different cores.

Fix this issue by checking for this case, and running
the BUFFER_FREE on the active core.

The change is not sufficient on its own, but is part of the fixes
to address: https://github.com/thesofproject/sof/issues/5469

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",114,46,1
"thesofproject/sof","42aca3d129179577b6b362e4d9a0a42e431b4f43","dbaluta","2019-02-01 15:48:59","false","rimage: Describe memory as an array of zones

Use new block types added to describe memory for
a platform as an array of zones. The block type
will be an index into the array.

A memory zone is described by (base, size, host_offset).

With this map we can now easily find for a given section
in which memory zone it belongs.

Because we have 10 zones reserved this patch will allocate
extra 12 * 10 = 120 bytes that are not used yet.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",59,8,0
"thesofproject/sof","812c15cb66a846f11b2896a2d694e6bc439fa36f","plbossart","2018-07-17 22:25:16","false","topology: sof-apl-nocodec: enable all 6 SSPs

For some reason parts of the topology were commented out.  Make sure
all 6 SSPs are enabled.

Tested on Up2 with a LogicPro-based check on SSP5 (only interface
accessive on the HAT connector)

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",12,2,0
"thesofproject/sof","43a4ddc6f822089e6280ac381c222360afe3718a","plbossart","2022-05-10 21:15:34","false","topology1: soundwire: add macro to remove HDMI

This is useful for debug and tests.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",113,47,1
"thesofproject/sof","61a2c75bf8335f93d0b223c85ed2c79d406d968b","lrgirdwo","2020-05-05 18:38:54","false","dma: dw: fix locking and calculations in dw_dma_get_data_size

No unlock on xrun and missing either avail/free depedning on direction
and xrun.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",95,23,0
"thesofproject/sof","24f84d5844fa38b65d0aaa49f127cebe683de6b0","lrgirdwo","2018-12-07 20:29:23","false","trace: cavs: double trace buffer size on cavs platforms

Increase the trace buffer size on CAVS platforms to help prevent any
trace data loss. Also relax the scheduling timeout given the extra
headroom.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",45,6,0
"thesofproject/sof","aa788b995cb81a54996c0b33a8c2f5f6a58712c7","mrajwa","2019-09-02 17:25:49","false","codeowners: add @tlauda and @mrajwa as codeowners of schedule directory

This adds @tlauda and @mrajwa as codeowners of
src\scheduler directory so they will be
auto-requested for review in all changes related
to files under this directory.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",59,15,0
"thesofproject/sof","e1bd1a9ebc0b236bcf57879b82dcb2204c05d96e","lgirdwood","2018-07-02 08:58:02","true","Merge pull request #36 from keqiaozhang/rimagefix

rimage: adding an include for all gcc version build",8,1,0
"thesofproject/sof","7f4950e36824841bb1e0678f1aad033944d3910b","mrajwa","2019-02-05 15:17:24","false","GDB: Added support for memory write (binary mode).

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",56,8,0
"thesofproject/sof","79d51405654023b714153eaf331c68a0b0ae41a9","lgirdwood","2018-11-15 15:46:20","true","Merge pull request #129 from xiulipan/pr/cnltest

Add test topology for CNL",39,5,0
"thesofproject/sof","4e5fa7723b97c774ac950f057e2e7334b491c44a","akloniex","2018-09-25 13:19:25","false","debugability: rimage: extract .static_log_entries from elf

.static_log_entries section is extracted to logs dictionary
to remove xtensa toolchain dependency from logs parser.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",37,4,0
"thesofproject/sof","76e8bd0122a018e0bbf16afa22d385d4827bc5f4","kv2019i","2022-10-06 06:47:11","false","init: print SOF version information at boot also in Zephyr builds

The log print for SOF build and ABI version numbers at boot time, is
only printed in dma_trace_enable(). It is done here to ensure
the log is not emitted until logging infrastructure is in place
and the log print is not lost.

The information is very useful, so similar log should be emitted
also in SOF Zephyr builds, where the Zephyr logging subsystem is
used instead of SOF's own trace infra.

As Zephyr logging subsystem is available early, this code
can now be added directly to primary_core_init(), which is called
from sof_main().

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",98,52,1
"thesofproject/sof","ea52fb043fae3f84bbc8af51919bc52e51a8bf6c","bkokoszx","2018-10-19 07:25:56","false","dma-trace: handling dma trace buffer overflow

In dtrace_add_event function I've added handling
dma trace buffer overflow. If there is not enough
memory, log will be dropped. Amount of dropped entries
is counted and it will be logged.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",32,5,0
"thesofproject/sof","72360bd42f03a15e9ad61af3aad0e2bbb663b57a","keyonjie","2019-05-05 10:14:12","false","kpb: fix kpb reset issue to make the consequent iteration work

We need reset kpb->state to KPB_STATE_BUFFERING, and unregister notifier
in .reset() as we will register it again at next .prepare(), otherwise,
the consequent record won't work.

Add definition of notifier_unregister() into cmoka fix the link error to
avoid breaking UT at the same time.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",47,11,0
"thesofproject/sof","2366d633b562fa007df3409174872f76300c8b78","slawblauciak","2018-12-06 12:51:33","false","dma: make sure the blocking link tx wait happens only for playback

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",44,6,0
"thesofproject/sof","945adb8d1660ed4e126f5a63a00e5ceb19831eec","marc-hb","2022-11-30 01:00:32","false","app/prj.conf: add CONFIG_BUILD_OUTPUT_STRIPPED=y

The discussion in
https://github.com/zephyrproject-rtos/zephyr/pull/51954 may take time
and we need reproducibility last year (who doesn't?)

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",102,54,1
"thesofproject/sof","2cbeabe722f9fcce6c88942a501613279db6a6db","marc-hb","2021-05-26 03:14:59","false","Restore original, 2018 mtrace_event(atomic) spin lock logic

Fixes bad commit b284ac32b53f5 (""debugability: Macro Metaprogramming
Refactor"") that accidentally swapped mtrace_event() and
mtrace_event_atomic()

Before that accidental inversion, _trace_event_mboxN() functions invoked
spin_lock_irq() whereas _trace_even_mbox_atomicN() did NOT take
locks. That was consistent with the non-mbox, DMA variants of these
functions. As explained in the message of commit 3dca7b777879 (""trace:
dma: Add atomic and nowait DMA tracing support.""), functions with the
`_atomic()` suffix,, are meant to be used in atomic contexts where the
lock is _already_ taken.

Searching for spin_lock_irq() in the code after the bad commit shows
that the logic was inverted for the _mbox variants: the lock became used
for the _atomic() variants.

The reasons why I can't reproduce any actual issue are likely the same
reasons why this inversion was never noticed:

- no multicore
- very little use of trace_.*_atomic variants
- spin_lock_irq() is re-entrant?

I merely noticed the inconsistency with DMA tracing while trying to
solve unrelated issues in the same places.

The non-mbox, DMA variants were not affected by the bad commit because
for DMA the lock was and is managed in a different file: dma-trace.c.

Searching ""spin_lock_irq"" in later commit b12a6626c5ade0a (""trace:
Remove metaprogramming from trace implementation"") shows that it
preserved this inversion across this second refactor; it left the bug
untouched.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",84,36,0
"thesofproject/sof","8dd1fce6dac94ce6d754247b2380ac087b3ad33b","marc-hb","2022-12-24 07:20:33","false",".github/zephyr: fix uploads overwriting each other

From
https://github.com/actions/upload-artifact#uploading-to-the-same-artifact

> Warning: Be careful when uploading to the same artifact via multiple
> jobs as artifacts may become corrupted.

Fix bug where IPC3 and IPC4 builds were randomly overwriting each
other and the same bug with different Zephyr revisions.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",92,55,1
"thesofproject/sof","cbb54fb1f627a2d023ece446c2f93c5411f39b0c","lyakh","2021-11-12 11:49:59","false","zephyr: ll_schedule: wrap spin-lock and unlock operations

Zephyr ll-scheduler locking implementation can change, abstract
spin-lock calls into new functions to simplify such changes.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",127,41,1
"thesofproject/sof","b406ca1ae87f6ec035fe90e60da36333d4eff4ea","lyakh","2021-04-30 11:50:18","false","zephyr: make timer-domain and EDF threads per-core

When running on Zephyr, timer domain and EDF scheduling is
implemented by per-core work queues. Make sure they only run
on designated cores.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",82,35,0
"thesofproject/sof","796a3eeb0d5d21f731d9faa097d159861d56a46b","lyakh","2023-07-05 10:44:00","false","lib-manager: fix wrong flags

Don't overwrite flags when mapping virtual memory and don't map
data for execution.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",32,61,1
"thesofproject/sof","02819769ac606e3d8427d7f6f1c6b08a1683fa3e","lyakh","2020-08-11 10:13:04","false","trace: fix 64-bit printing

SOF tracing can only handle up to 32-bit long values, attempts to
trace 64-bit values produce unpredictable results. Fix such cases
by making sure values are within range and casting them to 32 bits.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",73,26,0
"thesofproject/sof","21d8948e730ca5e77e5fb7b1c7b3bcce1ab8f1e7","MingJenTai","2022-10-05 01:18:43","false","rtnr: Support setting data blob

This commit lets user to set  data blob from host.

For example:
$ amixer -Dhw:0 controls | grep RTNR
numid=47,iface=MIXER,name='RTNR10.0 rtnr_bytes_10'
numid=48,iface=MIXER,name='RTNR10.0 rtnr_data_10'
numid=49,iface=MIXER,name='RTNR10.0 rtnr_enable_10'

$ sof-ctl -Dhw:0 -n 48 -b -s ./preset.bin

A new empty data control added to the topology will be used to send the
blob.
Model handler is now used for transferring the blob data.

Signed-off-by: Ming Jen Tai <mingjen_tai@realtek.com>

Code Refine",97,52,1
"thesofproject/sof","080b28a726e78a91b940a4875519ed069a0cad88","RanderWang","2021-11-16 01:49:50","false","ipc4: add dai_position support for ipc4

Ipc4 will update private data for dma engine.
For intel, it is llp register.

Signed-off-by: Rander Wang <rander.wang@intel.com>",127,41,1
"thesofproject/sof","fb19dcb8f5796ca8194e541dea8dab1cfca72b98","RanderWang","2022-02-09 07:53:54","false","ipc4: dai: remove sample count calculation for ipc4

Audio framework requires processed sample count
and audio driver gets processed bytes count and converts
to sample count, so fw doesn't need to calculate sample
count.

Signed-off-by: Rander Wang <rander.wang@intel.com>",108,44,1
"thesofproject/sof","f51ff46635ed62c6e5ac03b300eb564eb16ccf26","RanderWang","2022-11-21 05:50:23","false","rimage: remove incorrect module order check

The original check for ""i - 1 == type"" is used to make
sure that all modules in toml file are in order from 0
to max continuously. But the problem is that some modules
are not supported now or some modules share the same module
type of efx, so this check is incorrect.

Signed-off-by: Rander Wang <rander.wang@intel.com>",96,54,1
"thesofproject/sof","83f43ac0593fc7c6ee87dd13b81c79b3ad6bd422","RanderWang","2022-02-11 02:19:29","false","volume: set ramp_finished to true by default

ramp_finished should be true for reset state or
it will result unexpected ramp operation.

Signed-off-by: Rander Wang <rander.wang@intel.com>",108,44,1
"thesofproject/sof","8d0e863afc97c2959a29a85f28dd5ff84205346e","xiulipan","2019-08-27 15:30:36","false","topology: add tgl_rt1308 with no hdmi

Enable tgl_rt1308 topology with RT1308 speaker and DMIC01.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",55,15,0
"thesofproject/sof","da2f2958a131af15978dbd943af8a59ff51aecaa","xiulipan","2018-09-26 10:25:01","false","agent: add header for timer usage

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",37,4,0
"thesofproject/sof","3bcfda9ce74689fd890e24069789242155bc81a1","tlauda","2019-04-04 09:53:26","false","hda-dma: add host blocking copy implementation

Adds implementation of blocking copy mode for Host DMA.
In blocking mode we are waiting for data to be actually
copied by DMA after incrementing pointer. Normally
there is no need to wait since next copy call should
read DMA pointers and calculate how many bytes can be
copied next, but there can be a situation, where we
want to copy as much data as possible as fast as possible
without any delayed scheduling. For this kind of usage
scenario blocking mode can be used without a need to
add any delay nor checking DMA pointers from external
components.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",50,10,0
"thesofproject/sof","ebf5f113a5a6d3a29556fdcba82f06c99f0cb1a6","tlauda","2019-05-06 05:49:02","false","icelake: update xtensa headers

Updates xtensa headers to match real icelake core
capabilities.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",48,11,0
"thesofproject/sof","64a7d67b3e87e80f10a46c5bd4578aa669dbf2c7","ktrzcinx","2020-09-03 10:56:34","false","ipc: debug: Add memory usage probing possibility

This feature will be needed to monitor memory utilization and
memory leaks. It may be usable also in realese builds, so removed
conditional ipc_glb_test_message compilation.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",70,27,0
"thesofproject/sof","0549c274e42fb0d06a99d4ba75315d7b8b38c519","ktrzcinx","2019-11-07 06:45:32","false","kconfig: mux: add selective data format compilation

Use introduced configuration option in mux component to make
firmware footprint smaller.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",53,17,0
"thesofproject/sof","ccf6be4c2b2d7a62de1978b8759e5883111c3459","ktrzcinx","2020-06-30 13:23:57","false","platform: intel: cpu: Unify active_cores_mask

Set bit for PLATFORM_MASTER_CORE_ID and remove exception
handlind from arch_cpu_is_core_enabled.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",72,25,0
"thesofproject/sof","15d18cdc13b70c7ab03e49e9d942c5fe4295e30b","btian1","2023-02-28 08:40:02","false","copier: remove the host component and endpoint buffer creation

With previous commits, copier can perform DMA copy without host
endpoint buffer and host device, so remove host device and endpoint buffer
creation, accordinlgy, related state settings are all removed.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",58,57,1
"thesofproject/sof","16d1ca7c41c52dff14ee5f3d3fee05e3d84801b5","tlauda","2019-10-15 09:50:05","false","topology: sof-cml-demux-rt5682-max98357a: fix PCM and PIPELINE ids

Fixes ids for PCM and PIPELINE.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,16,0
"thesofproject/sof","e29baaa8b9dc90fcff9b8914b1d0ac2768474b54","ktrzcinx","2020-09-23 05:59:39","false","travis: Use $(...) instead `...` in bash scripts

It's encouraged to use version with $(...).
    Backtick command substitution `...` is legacy
    syntax with several issues.

   1. It has a series of undefined behaviors related to quoting in POSIX.
   2. It imposes a custom escaping mode with surprising results.
   3. It's exceptionally hard to nest.

   ~https://github.com/koalaman/shellcheck/wiki/SC2006

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",67,28,0
"thesofproject/sof","730bbcad131e86c31e596f25d585117370daad3c","marcinszkudlinski","2023-04-18 16:07:48","false","ipc4: raise error when DP cannot be created

when a DP module is to be created when DP
is disabled, module creation is rejected with
a message in log

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",51,58,1
"thesofproject/sof","16c1db5379e91f67433f7b7a6af2a6479ee56154","singalsu","2022-02-09 10:45:11","false","Audio: EQIIR: Optimize pass-through mode read/write frags

This patch optimizes the remaining EQ functions eq_iir_s32_s16_pass()
and eq_iir_s32_s24_pass() to not use audio stream read/write
frag functions.

This patch did not change x-x bit case that was already handled
efficiently by 1:1 stream copy function with 6 MCPS. The 32-16 bits
case improved 22.4 MCPS to 6.4 MCPS (-16 MCPS), the 32-24 bits case
improved 23.6 MCPS to 6.8 MCPS (-16.8 MCPS).

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",108,44,1
"thesofproject/sof","4f952a386894a349864b49a5987ed66ae0b7d6d6","akloniex","2020-08-12 08:40:46","false","test: volume: Utilize real buffer implementation instead of mocking.

Currently volume unit tests mock buffer components by hand, which
adds maintenance overhead in case of changes in buffer implementation,
which are under way.

Signed-off-by: Artur Kloniecki <arturx.kloniecki@linux.intel.com>",74,26,0
"thesofproject/sof","89ae27e3f43a38cdfbebb1ad18d608fe0fa22f72","constantinraducanu","2020-03-04 15:34:29","false","alloc: Remove empty line after open brace

This commit removes the empty line after the open brace,
fixing the checkpatch error: ""Blank lines aren't necessary
after an open brace '{'"".

Signed-off-by: Constantin Raducanu <raducanu.costi@gmail.com>",79,21,0
"thesofproject/sof","e3ba648de03e41d10aa9f5f3936237705568c300","tlauda","2019-10-10 11:55:24","false","pipeline: schedule pipelines separately

This patch enables separate scheduling of connected
pipelines. It allows for different scheduling periods
between connected pipelines and flexible controlling
of such topologies.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",61,16,0
"thesofproject/sof","d33ced649f7e2a4fc65173a59a17963610cafadb","jajanusz","2019-09-30 17:28:44","false","rimage: add SHA384 hashing

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",66,16,0
"thesofproject/sof","4839742c35f37f54af4ce6169cf3e591db49b2ad","tlauda","2019-10-11 12:11:28","false","dw-dma: reload lli in irq_callback

For DW-DMA without hardware linked list support we need
to manually reload linked list items after every interrupt.
It's very time-sensitive and even the slightest drift can
cause glitches, so this patch moves lli reload routine
to be called from DMA domain as an interrupt callback.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",61,16,0
"thesofproject/sof","5a3546595b0a40690353ab631ba5f4225790f5a0","tlauda","2019-09-20 09:16:00","false","topology: tgl: use 3 periods for SSP and DMIC DAIs

Changes number of SSP and DMIC DAI periods from 2 to 3.
This way we can support both timer and new single DMA
channel scheduling.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",63,16,0
"thesofproject/sof","df2a59dad4be68b7f185f90099cf814b6dd0aad4","tlauda","2019-08-22 15:32:51","false","notifier: align _notify_data to cache line

Aligns _notify_data object to cache line size.
Alignment is required, because it's a shared object.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",55,15,0
"thesofproject/sof","9417d217123cb339e7e7a2c8eb503c4976b1fc69","tlauda","2019-05-15 14:48:28","false","audio: remove checking for MODULE_TEST

Removes preprocessor checks for MODULE_TEST.
It was used by testbench, when the FW traces
were very limited. It's no longer needed.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,11,0
"thesofproject/sof","f493e907a18f9c6ede03aeff3365d80eb53a1141","ktrzcinx","2020-01-23 09:44:56","false","test: buffer: Replace memcpy to memcpy_s

Introduced change resolve checkpach issue related with edited lines
of code.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",79,20,0
"thesofproject/sof","ed77c6068779731a30070b25814fbdadc8496b5f","singalsu","2018-09-18 12:28:14","false","EQ IIR: Add support for S16_LE and S24_4LE data

This patch adds processing functions for S16_LE and S24_4LE data.
Existing support was only S32_LE. The lower word length filters are
executed with 32 bit algorithm core with left shifted input to keep the
data in MSB side. The output is shifted, rounded and saturated to the
lower precision.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",37,4,0
"thesofproject/sof","1c191a20fd74ab9660d4d93e70fe865af4058e8a","singalsu","2019-01-17 17:42:08","false","DMIC: Enable capture from secondary FIFO

This patch enables the FIFO B in addition to previously supported
FIFO A. It allows in topology to use in pipelines the DMIC DAI
type with indices 0 and 1. The DAI instances can be operated with
different sample rate and different PCM format. The other
topology parameters for microphones need to be the same (number
of channels and enabled microphones). If the request via topology
differs for those parameters the latter request overrides the
first request. Typical usage for this added feature is to provide
compact 16 kHz / 16 bit capture version for speech in addition to
normal 48 kHz / 32 bit media quality audio capture.

The DMIC HW actually provides a bit more freedom for FIR/FIFO A/B
usage difference but all of that is not exposed yet via the
driver due to added complexity.

Some trace prints for DMIC parameters and used configuration are
modified to print shorter lines for easier reading. The print
order is adjusted to be more logical.

The patch modifies two topologies to showcase the feature. The
sof-apl-dmic-2ch/4ch topologies for APL nocodec machine driver
are changed to instantiate in addition PCM7 set for 16 kHz 16 bit
format in addition to earlier PCM6.

Note: The required change to pipe-passthrough-capture.m4 PCM
capability to enable other than 48 kHz rate is not done to not
break important test cases. Another PR addresses the PCM
capabilities and after it is merged allowing 16 kHz PCM for DMIC
capture can be done safely.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",57,7,0
"thesofproject/sof","09a4aa8a8ec7a470a10cf091205790d4d8798e42","singalsu","2022-03-08 15:13:05","false","Topology: Topology1: Add topology with playback DRC to HDA generic

This patch enables testing of DRC in HDA generic devices by adding
it to headset/speaker pipeline after mixer.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",112,45,1
"thesofproject/sof","a852b5341e264ce320a5f7dbb9689a1e5647d9ec","singalsu","2018-06-27 10:49:33","false","SOFT: Add audio standards based objective performance measurements

This patch provides scripts to measure such performance as THD+N,
dynamic range, frequency response, gain, etc.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",5,1,0
"thesofproject/sof","0eeda80bdf40ffc3eb10008b5cd3cb8b831152bc","singalsu","2020-03-16 17:17:23","false","Testbench: Add processing component load

This patch adds to testbench capability to run pipelines with EQ_IIR
and EQ_FIR components. The component is configured with the topology
embedded configuration blob when instantiated with new().

The load of volume component has been enhanced to parse volume tokens and
compute the min and max volume parameters.

The topology parsing and component library load has been changed to
support processing component load and extracting of control private
data. The testbench build has been changed to create libraries
for EQ components.

The testbench command line parsing has been improved to return
error for invalid library request.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",79,21,0
"thesofproject/sof","1d63f8028e977d8e0626ce023aef98e291144c36","singalsu","2020-03-30 13:26:33","false","Tools: Topology: Add new example FIR EQ coefficient sets

This patch adds FIR coefficients for loudness effect, mid-boost, and
pass-through. They are useful when testing FIR pipelines.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",67,22,0
"thesofproject/sof","99ebc324f4ef7cd3c4869761e38a0f32ed809302","singalsu","2021-07-15 12:22:15","false","test: cmocka: Add exit to function __panic()

This change avoids build error:

cc1: warnings being treated as errors
sof/test/cmocka/src/common_mocks.c: In function ‘__panic’:
sof/test/cmocka/src/common_mocks.c:100: warning: ‘noreturn’ function does return

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",93,37,0
"thesofproject/sof","cb6420853d2b833cfc327e6f45ba2d0b5ad0f06f","slawblauciak","2020-10-27 08:03:38","false","compile: check for __XCC__ flag when defining FW build info

Previously, the __GNUC__ flag was used to differentiate between GCC and XCC.
However, that flag is defined by XCC as well,
as a result, __XCC__ flag should be checked instead.

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",75,29,0
"thesofproject/sof","8a48cc4902719061129751ecf3472a8c7f21ad8f","lgirdwood","2018-06-22 10:08:31","true","Merge pull request #8 from xiulipan/master

scripts: xtensa-build: fix ROOT var alais for BXT/APL gcc",3,1,0
"thesofproject/sof","9b3715fc168aa547495917001735a3ced76b3419","tmleman","2022-04-07 09:59:59","false","ipc4: setdx: skip sending ipc response

When SetDx message shut down primary core, response to this IPC will be
send during power down procedure. It's done to minimize the chances of
the host shutting down power before the core is ready.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",114,46,1
"thesofproject/sof","bc28b924d96c3c861a8fc4798a7b4ed2383b2e1b","aiChaoSONG","2023-08-22 08:32:25","false","cmocka: fix cmocka build issue

Fix the cmocka build issue after adding functions
for explicitly get ipc device for component, buffer
and pipeline.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",24,63,1
"thesofproject/sof","6f71808e3ee74a8782f1a65cf7154b7f04df6ea2","aiChaoSONG","2022-02-24 06:36:45","false","xtensa-build-zephyr.py: add ipc4 build support for tgl

Add ipc4 build support for tgl with OVERLAY_CONFIG.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",107,45,1
"thesofproject/sof","08c3a6d1ae8ec40f746d52fc1f49d3a3f3e2025a","plbossart","2019-01-16 05:08:05","false","src/include/sof/audio/buffer.h: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","885f2c41d7e7c6b28cdea3c4b5493e8b21f28397","lrgirdwo","2021-08-16 15:10:46","false","library: testbench: cosmetic: move external functions to end of file.

No need to declare static functions now.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",117,38,0
"thesofproject/sof","c91326bda26673948f64927cd28fab1c79f2f5d6","plbossart","2022-12-09 16:54:02","false","topology1: add ADL Rooks County laptop LAPRC710

Amplifier is on link 2, not 3, in this platform

Fixes: https://github.com/thesofproject/linux/issues/4088
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",103,54,1
"thesofproject/sof","bc10ba8b76c009764bfdbea2c9f74565b6c966c8","lrgirdwo","2021-06-26 12:25:41","false","testbench: squash some valgrind warnings.

Buffer and params not initialised to zero like the other IPC structures
used by testbench. Fix this.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",75,37,0
"thesofproject/sof","bfb245e080fb43ce7e5943d027e371fe6dbf4af4","dbaluta","2019-10-01 13:48:26","false","topology: Add i.MX8QXP platform info

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",66,16,0
"thesofproject/sof","faa9cf9132761a6d1c1f3b324538aba6fda24e3f","dbaluta","2020-01-14 11:37:59","false","scripts: add build for im8x

Add build scripts for i.mx8x with gcc and xcc support.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",77,19,0
"thesofproject/sof","b18f08d095777bd111308df2611a8d9e9f6297b2","dbaluta","2022-03-09 15:53:08","false","zephyr/cmake: Add support for linking with cadence libs

We add support for linking with Cadence AAC/MP3 libs.

Cadence lib MP3 support is enabled via CONFIG_CADENCE_CODEC_MP3_DEC config
symbol. Path to library file needs to be set via CONFIG_CADENCE_CODEC_MP3_DEC_LIB

Similar for AAC.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",114,45,1
"thesofproject/sof","a6ad6fbf3b900238443aa8023003c2386fe64b72","ujfalusi","2023-07-26 07:39:23","false","lib-manager: Check validity of lib_id

The range of lib_id is only valid for loadable libraries in a range of
1 - MAX_LIBS (15)

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",34,62,1
"thesofproject/sof","3af41339d6453053467773dd9b87ab18a04f1767","afq984","2022-04-26 10:59:49","false","CODEOWNERS: @benzh -> @bzhg

Signed-off-by: Li-Yu Yu <aaronyu@google.com>",114,47,1
"thesofproject/sof","a92355b499b3aed0cb39d5fd6d73a790506c894d","balakishorepati","2022-05-05 04:44:28","false","drivers: amd: renoir: fix for Bo noise during stream start

Flush i2s fifo buffers before stream start.
Re-arrange host buffer DMA operations.

Signed-off-by: Balakishorepati <balaKishore.pati@amd.com>",115,47,1
"thesofproject/sof","7bd816e1f98368ae44eac288290b62a2eb6381af","mrajwa","2019-02-05 14:32:31","false","GDB: Added support for register read.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",56,8,0
"thesofproject/sof","942caa30b1ba3ff008554f8901134f889ed00115","lgirdwood","2018-07-19 11:52:31","true","Merge pull request #35 from keqiaozhang/makedistfix

dist: fix make dist for topology M4",13,2,0
"thesofproject/sof","43120c923fed72a2c71dd6294097d2f6378dd74c","lgirdwood","2018-11-14 10:10:15","true","Merge pull request #575 from slawblauciak/dma_release_fix

dma: make sure the HDA DMA pointers are aligned after release",39,5,0
"thesofproject/sof","52b107e3c1a566c5e04817969eedaa3780e50288","lgirdwood","2018-06-27 14:18:19","true","Merge pull request #8 from singalsu/topic/fix_src_tests_proposal_v1

SOFT: Fix the topology file name in SRC test topology lookup",6,1,0
"thesofproject/sof","e9c81160eecfc1c23580621975228ee8cd986609","dragosht","2019-02-25 13:28:30","false","topology: ssp: add polarity inversion option in SSP_CLOCK

alsatplg allows setting inverted bclk and fsync polarities
by setting either bclk_invert or fsync_invert to ""true"".
This patch adds a default parameter in the SSP_CLOCK m4
macro which allows setting inverted bclk and fsync polarities.

Signed-off-by: Dragos Tarcatu <dragos_tarcatu@mentor.com>",64,9,0
"thesofproject/sof","bf5883e46b85e7ff3b2aafb47ace2b4acb84e9c6","jajanusz","2019-08-23 10:58:07","false","dma: update for tigerlake

Update DMA defines to include Tigerlake platform.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",54,15,0
"thesofproject/sof","02a7c9853429d20ca980ee1aa395b85b15fdf482","keqiaozhang","2023-10-18 10:07:36","false","topology: add test TPLGs for LNL-RVP

There're no differences for SSP and SoundWire TPLGs between
MTL and LNL, we can reuse MTL TPLGs for LNL.

Signed-off-by: Keqiao Zhang <keqiao.zhang@intel.com>",11,65,1
"thesofproject/sof","59171fdd627ee7672dc8dca3721580f78da1b579","ranj063","2023-02-02 18:19:07","false","topology2: Intel: sdw-amp-generic: Remove alh-2nd-spk.conf

Use the new feature to be able to include conf nodes directly to add the
second speaker conditionally and remove alh-2nd-spk.conf.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",52,56,1
"thesofproject/sof","9e78fa15695c184801a9927f62d63adc5ecdcd28","abonislawski","2020-05-26 10:35:47","false","jsl: HEAP_LP_* cleanup

This will delete unnecessary heap lp defines

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",97,24,0
"thesofproject/sof","b80fc03c4cf4665b0f18bb2ce4ee326200a1a64d","ranj063","2022-06-15 22:15:42","false","tplg_parser: Add support for parsing process components by UUID

Add support for loading the process components by UUID. This needs a
modification in the IPC3 helper to modify the ipc data pointer to
address followed by the UUID in the component extended data.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",120,48,1
"thesofproject/sof","eac5a0a12ef4d75eeff1a090842629d07874f893","ranj063","2023-08-08 22:08:12","false","tplg_parser: Add support for parsing PCM headers

Parse the PCM headers and save the PCM info along with the host
component associated with the PCM.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",28,62,1
"thesofproject/sof","1b3f033ccad7695d92851d300f324132a58037d7","ranj063","2022-05-26 19:22:41","false","module_adapter: limit bytes_to_process in copy()

Limit copying the source samples to the minimum of in_buff_size or the
number of source samples available.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,48,1
"thesofproject/sof","5832e8522282edf332ad9642e5a5d0aca6c94842","ranj063","2023-07-04 04:59:33","false","audio: copier: Convert module to use module interface

Define the module interface ops and the endpoint ops for the copier
module to convert it to use the module interface.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",39,61,1
"thesofproject/sof","308a24a92b4460708a09c1a485cb5c28fcb418dc","ranj063","2022-01-05 21:14:13","false","topology2: Add build support

Add build support for topology2. Topology2 will be built only if the
alsatplg version if 1.2.6 or greater.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,43,1
"thesofproject/sof","488cedaf79d77ddba5364984035718cd9e453c48","ranj063","2019-03-04 22:38:07","false","topology: pipeline: add sched_comp argument to PIPELINE_ADD

Some pipelines might need to share the scheduling comp
with other pipelines. In this case, the scheduling comp
name should be passed as an argument.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",67,9,0
"thesofproject/sof","8355f6047a2b2f63fbaa3ba07721d824bccde05e","ranj063","2022-03-03 02:27:37","false","codec_adapter: Move input/output buffer allocation to prepare

Add 3 fields for input_buffers, output_buffers and output_buffer_size
to struct processing_module. Move the memory allocation for input/output
buffers for the module to the prepare op from the copy op.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",112,45,1
"thesofproject/sof","62e894eb9d921b5bb9256b609d007f560ced42bf","jajanusz","2019-04-29 10:32:03","false","testbench: rename include folder

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",48,11,0
"thesofproject/sof","c93670853f94ded8ac2948a0bd659719c14e5cde","jajanusz","2019-04-05 17:46:37","false","test: pipeline: remove mock for removed scheduler function

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",48,10,0
"thesofproject/sof","eb8be5be38833adb244fe642c5fc9ea933540b98","jajanusz","2019-03-14 10:03:02","false","cmake: copy ldc to build root

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",68,9,0
"thesofproject/sof","0fcad5052cab450f37d898b0cbfd00380406165e","plbossart","2022-02-22 16:49:32","false","topology: sof-apl-da7219: add missing virtual widgets

Align this topology with the GLK one to avoid probe errors

[    4.224516] bxt_da7219_max98357a bxt_da7219_mx98357a: ASoC: no source widget found for iDisp3 Tx
[    4.224518] bxt_da7219_max98357a bxt_da7219_mx98357a: ASoC: Failed to add route iDisp3 Tx -> direct -> hifi3
[    4.224522] bxt_da7219_max98357a bxt_da7219_mx98357a: ASoC: no sink widget found for iDisp3 Tx
[    4.224524] bxt_da7219_max98357a bxt_da7219_mx98357a: ASoC: Failed to add route iDisp3_out -> direct -> iDisp3 Tx
[    4.224529] bxt_da7219_max98357a bxt_da7219_mx98357a: ASoC: no source widget found for iDisp2 Tx
[    4.224531] bxt_da7219_max98357a bxt_da7219_mx98357a: ASoC: Failed to add route iDisp2 Tx -> direct -> hifi2
[    4.224535] bxt_da7219_max98357a bxt_da7219_mx98357a: ASoC: no sink widget found for iDisp2 Tx
[    4.224537] bxt_da7219_max98357a bxt_da7219_mx98357a: ASoC: Failed to add route iDisp2_out -> direct -> iDisp2 Tx
[    4.224542] bxt_da7219_max98357a bxt_da7219_mx98357a: ASoC: no source widget found for iDisp1 Tx
[    4.224544] bxt_da7219_max98357a bxt_da7219_mx98357a: ASoC: Failed to add route iDisp1 Tx -> direct -> hifi1
[    4.224549] bxt_da7219_max98357a bxt_da7219_mx98357a: ASoC: no sink widget found for iDisp1 Tx
[    4.224551] bxt_da7219_max98357a bxt_da7219_mx98357a: ASoC: Failed to add route iDisp1_out -> direct -> iDisp1 Tx
[    4.224559] bxt_da7219_max98357a bxt_da7219_mx98357a: snd_soc_bind_card: snd_soc_dapm_add_routes failed: -19

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",106,45,1
"thesofproject/sof","cfff9e0b0402f0f7dd2bd9ba915fd6d1599b2fc8","plbossart","2018-08-01 04:48:20","true","Merge pull request #47 from plbossart/fix/glk

topology: add APL and GLK Chromebook support",18,2,0
"thesofproject/sof","08022aae49bf552a1ffae18a502bf8a1af775e7e","plbossart","2020-07-10 00:14:09","false","Revert ""pcm_converter: Convert linear memory regions""

This reverts commit 1f092df4012def1c541bf7c627ecffd51584093b.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",77,25,0
"thesofproject/sof","f7079f5d9af369d32b415085eea571dc3af4c26a","akloniex","2018-10-10 09:04:44","false","debugability: Protect against invalid param num in trace_event macro

Introduce STATIC_ASSERT macro for compile-time verifications.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",32,4,0
"thesofproject/sof","23ae5d824ac180232835df355403a3a838b02fcc","akloniex","2020-03-20 18:18:13","false","muxdemux: Rename unused API fields to '_deprecated'.

After the cleanup few elements of the API are no longer used/accessed.
This allows for ABI simplification in the future if we so decide.

Signed-off-by: Artur Kloniecki <arturx.kloniecki@linux.intel.com>",66,22,0
"thesofproject/sof","c9e0fc8c9afdc3d5e87cf3d6cc908603cf5c8b59","softwarecki","2023-09-04 13:37:29","false","module_adapter: ModuleInitialSettingsConcrete: Fix possible null reference

The dataAs function can return null if the buffer size is smaller than the
size of the target structure. Added handler for this situation.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",23,63,1
"thesofproject/sof","f6f23ec4cb2dd4a84b57673683348f5c5d876cf0","bkokoszx","2019-01-10 13:42:35","false","dw-dma: dw-dma.c displacement to top driver dir

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",57,7,0
"thesofproject/sof","985c5b5685dc5f2343c2a6f2929ae698b660eaea","kv2019i","2021-06-16 12:58:28","false","zephyr: split the heap into shared and non shared

To increase performance of audio application code, the SOF heap should
be mapped to cached address region on platforms with aliased
cached/uncached memory layout.

This splits the heap into two and maps the SOF_MEM_ZONE_BUFFER to
the cached heap and all rest to uncached heap.

The raw heap memory area is still mapped to uncached memory, even for
the cached heap. The allocated blocks are converted to cached addresses
and passed to SOF users of rmalloc() and rballoc_align(). To ensure
application buffers do not share cachelines with heap metadata chunks,
allocation sizes are rounded up to integer multiples of platform
cacheline size.

BugLink: https://github.com/thesofproject/sof/issues/4306
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",71,37,0
"thesofproject/sof","e32329a03f5f584067140df1ffb9523620a3fe5a","kv2019i","2023-09-04 16:41:46","false","zephyr: ll-schedule: stop using zephyr/timeout_q.h

Replace the call to z_abort_timeout() to be able to drop
dependency to timeout_q.h. This header is intended to be Zephyr
kernel private and plan is to remove this.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",23,63,1
"thesofproject/sof","13ba5fe90ccb9f93a9e01f77ae770a462fea4483","kv2019i","2022-08-18 06:02:51","false","tools: add mtrace-reader.py

Tool to stream data from Linux SOF driver ""mtrace"" debugfs
interface to standard output. Plain ""cat"" is not sufficient
as each read() syscall returns log data with a 32bit binary
header, containing the payload length.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",113,51,1
"thesofproject/sof","020c9f3fa5d18ec99a59dfbb06f85f6b419a44d0","kv2019i","2022-04-21 15:34:22","false","zephyr: track SOF app calls to enable/disable cores separately

Add a static variable w_core_enable_mask in Zephyr wrapper.c to
track requests to enable and disable cores, and use this to
implement arch_cpu_enabled_cores().

We don't yet have a implementation to power off secondary cores.
This creates issues to SOF application code that may rely on
disabling of cores to be reflected in cpu_enabled_cores(). Instead
of adding ifdefs in application code, manage this within wrapper.c.
Once the secondary core power-off is implemented, this static
variable can be removed.

BugLink: https://github.com/thesofproject/sof/issues/5701
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",114,47,1
"thesofproject/sof","f27085f046526bc5c6b0afcfa561efe91bbdd705","singalsu","2023-09-01 13:22:37","false","Tools: Tune: Multiband-DRC: Add comment about generator script

This patch helps to find the right tool to create the setup blobs.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",24,63,1
"thesofproject/sof","77b86202b14ebfb008d379cbd8c453624b793b33","singalsu","2019-06-13 16:25:53","false","DMIC: Add support for decimation factor 12

This patch adds driver capability to capture with combination
of 96 kHz and 16 kHz sample rates from FIFO A and FIFO B by using
decimation factor 12 in FIR. The earlier capability for 96 kHz was
with single FIFO only due to lack of suitable decimation filter
for the 16 kHz output.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",48,12,0
"thesofproject/sof","a292c9cf257d1dbbc0fec516ec678b7c6014aebc","singalsu","2023-08-30 12:49:28","false","Tools: Topology2: Build topologies to test processing components

This patch uses cavs-benchmark-hda.conf to build topologies to
test components in a simple playback and capture configuration.

host copier --> component --> DAI copier
host copier <-- component <-- DAI copier

The built topologies are
sof-hda-benchmark-dcblock16/24/32-tgl.tplg

The shell script bench_comp_generate.sh is added to conveniently
generate include files needed to build new test topologies for
component with s16/s24/s32 format.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",25,63,1
"thesofproject/sof","ee5d375c98f8974192c37a1dbaef056f297a4c8d","brentlu","2022-05-13 10:23:42","false","topology: sof-adl-max98360a-rt5682-2way: enable BT offload

Enable compile option ""BT_OFFLOAD"" to enable pipeline for Bluetooth
Offload.

Signed-off-by: Brent Lu <brent.lu@intel.com>",111,47,1
"thesofproject/sof","894c332997c4b2fe798bc9f8daa9b1b8ff04f3a0","DianaGabriela27","2019-03-06 12:45:39","false","rimage: Split lines over 80 characters

Change long lines so they don't exceed 80 characters.

Signed-off-by: Diana Ungureanu <diana-gabriela.ungureanu@nxp.com>",66,9,0
"thesofproject/sof","6a1938057871e3d77e28801ddd516b352ac2028c","lrgirdwo","2020-04-19 21:04:35","false","ipc: handler: Need to include clk.h for Zephyr build

Needed for Zephyr build.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",91,22,0
"thesofproject/sof","1951548a7888c6152d84bcb72591403d4cd9cd90","DianaGabriela27","2019-03-06 12:56:05","false","rimage: Remove multiple blank lines

Signed-off-by: Diana Ungureanu <diana-gabriela.ungureanu@nxp.com>",66,9,0
"thesofproject/sof","39874c5f6cf813c4d917ba13559a7e3f60b50bd4","lrgirdwo","2019-09-12 15:47:32","false","mailbox: remove duplicated mailbox macro

Duplicates MAILBOX_SIZE

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",62,15,0
"thesofproject/sof","708743594b6cb7dc9044f6ab0e8a1eb928bd9bb1","dbaluta","2020-04-09 20:02:37","false","drivers: imx: sdma: Remove src_may_change and dst_may_change

We extract this information from config->direction. This makes
code easier to understand.

Notice here that we add BD_DONE for all cases, and remove BD_EXTD
as it doesn't make sense for device2memory and memory2device.

Will have m2m case later, it is not yet supported.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",82,22,0
"thesofproject/sof","aab5d9b0a1270041d10930e66efacb207cadf91d","dbaluta","2022-03-23 12:44:43","false","codec_adapter: cadence: Move cadence_resolve_api

Move cadence_codec_resolve_api to cadence_codec_post_init function.
We need this because later the entire cadence_codec_post_init function
will be called later then init.

At init we do not know yet the codec id.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",109,46,1
"thesofproject/sof","235dd98e831744484e592957ac8f57210b95b983","marc-hb","2023-01-12 19:58:56","false","CODEOWNERS: be more selective when matching CMakeLists.txt files

I don't want to be spammed any more every time someone adds or renames a
source file.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",55,55,1
"thesofproject/sof","e08b2c2043f2ea7b9a9189e07dc9458cddbe9c74","marc-hb","2023-10-05 00:04:01","false","zephyr/cmake: add new ${RIMAGE_TOP} constant

In preparation for changing it, see
   https://github.com/thesofproject/sof/issues/8178

No functional change yet.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",16,64,1
"thesofproject/sof","59d2318a4c8fe2a47a1573227046abddc981dfe3","lyakh","2021-04-30 14:59:29","false","zephyr: schedule: enable multi-core scheduling

Initialise LL-schedulers on secondary cores too, which also
requires per-core scheduler data.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",82,35,0
"thesofproject/sof","b82e0efc7557e1bcaaed21ab76e36155404848b3","lyakh","2021-10-15 14:11:24","false","pipeline: always check pipeline_for_each_comp() return value

Make sure all pipeline_for_each_comp() return values are
consistently checked.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",122,40,1
"thesofproject/sof","2198f59a912fdc09509b347fc1e2febec1fa4da6","lyakh","2019-09-06 12:51:38","false","ll_schedule: replace macros with safe versions

Current implementations of ll_sch_set_pdata() and ll_sch_get_pdata()
are unsafe, replace them with safe versions.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",60,15,0
"thesofproject/sof","16878e387e8be1ea4ebb018d6f407b4a65065448","brentlu","2021-05-27 03:25:40","false","topology: ssp: mclk/bclk clock control

Define the SSP_CC_MCLK/BCLK_ES bit to be used in SSP_CONFIG_DATA macro
to enable mclk/bclk on hw_params and disable malk/bclk on hw_free.

Signed-off-by: Brent Lu <brent.lu@intel.com>
Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",84,36,0
"thesofproject/sof","113a49d25343467fd9cf0e3ca8d5ccd325a7e68f","brentlu","2022-01-18 07:48:53","false","topology: sof-adl-rt5682: add new topology

Add support for boards without speaker amplifier. Just simply remove
all speaker related components and configuration.

Signed-off-by: Brent Lu <brent.lu@intel.com>",116,43,1
"thesofproject/sof","bd6933b5ab9b61e99acb9843b6f6f14bdefdbe27","brentlu","2023-08-14 07:51:50","false","topology1: sof-tgl-max98357a-rt5682: add sof-adl-rt5650 topology

Add a new topology sof-adl-rt5650 for ALC5650 which supports SSP0 for
headset and SSP1 for speakers since this codec implements two I2S
interfaces.

DAI format changed to mclk: 24.576MHz, bclk: 3.072MHz, sample bits:
24-bit to avoid using ASRC function on codec side.

Signed-off-by: Brent Lu <brent.lu@intel.com>",28,62,1
"thesofproject/sof","7b564fcbd6e67234168f35da6d414f7e64558bd7","tlauda","2019-08-01 11:34:32","false","idc: access _ipc object through uncached memory region

Changes accesses to the _ipc object to go through uncached
memory region. This way slave cores can safely read shared_ctx
without causing random overwrite of the data.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",53,14,0
"thesofproject/sof","3f53d59e7bb7062677c732740939d622df53a623","tlauda","2020-01-08 08:20:13","false","memory: pass sof context to platform_init_memmap

Changes platform_init_memmap function's argument list to take
sof context. It will be needed to add memory map pointer into
sof context.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",72,19,0
"thesofproject/sof","5e080c14f5e036e6561355a06d5177940e74bc76","ktrzcinx","2020-01-17 09:36:48","false","selector: Mark input device pointer as const in processing functions

Const keyword is added to explicitly indicate that nothing in given
input devices buffer can be changed in processing functions -
- read pointers also.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",79,19,0
"thesofproject/sof","6c14e76c0d98366dccbc03f7fb08219f6ba853b3","ktrzcinx","2020-06-26 09:04:50","false","trace: Log FW ABI and hash numbers

This log allows to fully identify source code and check ldc
compatibility with FW by comparing source hash value saved in ldc
file with value received from FW in runtimee.
Without this mechanism it's impossible to
be sure about right connection without booting firmware
(to read fw_ready message content), because value of fw_hash
hasn't been provided in output logs file. This is especially
important during debugging process based on logs received by
client.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",70,25,0
"thesofproject/sof","5702b77200741446354f5088152febbba3f0da9f","ktrzcinx","2020-06-19 07:34:36","false","smart_amp: Release feedback buffer when unused

Each code path should unlock locked components, otherwise
lock system won't work correctly.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",78,25,0
"thesofproject/sof","ed97bb9418aebba2da9d860d2bcfcb25e2b85706","bardliao","2019-04-01 07:40:57","false","topology: update HDA index

The index should be 0,1,2 instead of all 0.

Signed-off-by: Bard liao <yung-chuan.liao@linux.intel.com>",51,10,0
"thesofproject/sof","ec3ca41b60d6b5c6ebb6411fc755063d6f3f2854","jxstelter","2023-10-17 09:22:26","false","DP: fix DP thread priority

After enabling deadline calculation DP threads began to lose priority
in relation to logger thread which currently is set to the same priority
but has zeroed deadline.
Since processing should be not disturbed by logging operations, the
ZEPHYR_DP_THREAD_PRIORITY must be set to lower value than logger.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",9,64,1
"thesofproject/sof","4b80be18e5f8ac0f798b55bb350e3f07b4fc36fa","iuliana-prodan","2021-09-21 16:49:35","false","xtensa-build-zephyr: add imx8x as supported platform

Add imx8x platform to be tested with Zephyr.
imx8x refers to i.MX8QXP target.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",118,40,0
"thesofproject/sof","276463d6dcb394dbce98978108f6ecbda59b8ff8","tlauda","2019-10-16 11:33:20","false","platform: rename and move PLATFORM_HOST_DMA_TIMEOUT

Renames PLATFORM_HOST_DMA_TIMEOUT to HDA_DMA_TIMEOUT and
moves to hda-dma, where it belongs.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,16,0
"thesofproject/sof","d5375e11b13e7af96f74d70ce9e79f1fdc4be65d","tlauda","2019-05-06 05:28:29","false","cannonlake: update xtensa headers

Updates xtensa headers to match real cannonlake core
capabilities.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",48,11,0
"thesofproject/sof","f07af79665ca530f5bf45ca916b064a7bf5f2daf","lgirdwood","2018-10-25 08:40:19","true","Merge pull request #504 from slawblauciak/dai_dma_sync

Sync DAI HDA DMA start with the internal work queue",27,5,0
"thesofproject/sof","4b0b9b666a53917e3232a8936dfa77a6d44ba2ff","lgirdwood","2018-07-02 14:47:47","true","Merge pull request #24 from tlauda/topic/multicore_support

arch: multicore xtos",8,1,0
"thesofproject/sof","d83912ff24ee8b8210e9a6083035c618a0bcde2c","mrajwa","2019-05-16 09:54:39","false","detector: add history depth as config option

Detector was using keyphrase_length to:
1. delay detection
2. to calculate the amount of data that shall be
drained from history buffer.

This was confusing people, therefore we use two
separate variables name with better naming.

1. history_depth -> to define default draining
request. (in bytes)
2. preamble_time -> to define delay after which
detection should be active.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",63,11,0
"thesofproject/sof","7d87b834b04b64e593cc7b7fe2e0c0be0893fdfb","mrajwa","2019-02-27 21:51:45","false","KPB: add copy function

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",67,9,0
"thesofproject/sof","7b5fef539645878ff3db2b6aa4ff02878c47e783","lgirdwood","2018-08-22 13:44:46","true","Merge pull request #245 from tlauda/topic/init_workq_slave_cores

work: init work queue for slave cores",19,3,0
"thesofproject/sof","6efe3d44706c2c1135fa02b6f48aec012e61185d","lgirdwood","2018-10-14 21:37:31","true","Merge pull request #95 from singalsu/tplg_add_iir_dmic_pipe

Topology: Add DMIC capture pipeline with gain and high-pass filter",35,4,0
"thesofproject/sof","98652478e573de59cecac7630f1b1245b58adb0f","lgirdwood","2018-09-13 14:04:16","true","Merge pull request #367 from xiulipan/merge12

Merge stable-1.2 into master without scheduler and task part",42,3,0
"thesofproject/sof","d548d8f3a645170c65178f9a34175c1e7cb434ac","lgirdwood","2018-11-21 17:15:14","true","Revert ""scripts: add local version number file""",39,6,0
"thesofproject/sof","a1b6003e3509fd614635f6494860a19df110e067","lyakh","2021-06-02 09:00:07","false","ll-scheduler: unregister domain when the last task completes

When all tasks in a domain terminate, the domain has to be
unregistered. This is done when the last LL task in a domain is
cancelled, but it isn't done when such a task completes. This almost
never occurs in practice, because LL tasks usually don't complete,
they are always cancelled. The only case when they complete is in
case of an xrun. Fix handling of such cases.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",83,36,0
"thesofproject/sof","5254f0938a3055ad62c68d8f6cb19e50cf1875d1","lyakh","2021-09-07 13:29:16","false","pipeline: (cosmetic) fix function names in trace text

Fix trace messages after moving them into different functions.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",119,39,0
"thesofproject/sof","3b9bc1640023d829b19e53e0a435403681ac64c8","lyakh","2022-12-13 16:53:11","false","lib-manager: fix cache annotations

lib-manager allocated memory for library modules with a cached alias
and explicitly synchronises cache in it (apparently superfluously).
Add cache address space annotations as needed.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",98,54,1
"thesofproject/sof","663174320904c0bc045f2d60cbe62035147c9736","ranj063","2021-12-12 05:03:50","false","topology2: common: Add new class definition for audio_format

Add definition for audio format class for defining the input and output
audio formats for each components in cavs topology.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",120,42,1
"thesofproject/sof","7427d7fe36dfc9ab4262317a4942459901d48dd6","ranj063","2023-07-07 01:10:27","false","audio: asrc: Update stream params from base config

The input stream params may not be updated by the source module. So
update the stream params from the config. Also, update the source/sink
ibuffer formats based on the base config audio format.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",31,61,1
"thesofproject/sof","8243b51e8db5ae0b10eed53316cc398e7ca37475","ranj063","2021-11-02 19:22:52","false","topology2: volume: include mixer.conf

Include mixer.conf so the conf can be built without errors.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",125,41,1
"thesofproject/sof","138e1c9b25a2b4807082163ad4706b6d7b3b46fe","ranj063","2023-05-16 00:16:59","false","copier: Remove creation of DAI endpoint device/buffer

These are not used anymore for the multi-endpoint DAI copiers, so remove
the creation/freeing of endpoint devices/buffers.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",51,59,1
"thesofproject/sof","d310beb9bbb803fc3e568e6437c666e3eb9fb4ce","xiulipan","2019-10-30 03:56:30","false","scripts: qemu: change ipc shm file name for cavs platform

The cavs platform IPC shm file name in QEMU is changed
from ipc-io to ipc-dsp-io.
Use regular expression to find the right SHM IPC register file,
so that we can smoothly pass the transition of the QEMU update.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",64,17,0
"thesofproject/sof","87020dad3a32e83793b9e457b86f4caff778c7e8","fkwasowi","2022-12-13 06:22:10","false","kpb: set sync_draining_mode to true

set sync_draining_mode to true otherwise we get
glitches on the output signal because the offsets
are set to 0

Signed-off-by: Kwasowiec, Fabiola <fabiola.kwasowiec@intel.com>",97,54,1
"thesofproject/sof","a4e5fea520aec02ef06cb7716c45cbb9594e094d","yongzhi1","2022-12-01 17:36:27","false","topology2: Add rt5682+max98357a support

Add sof-mtl-max98357a-rt5682 topology which supports
RT5682 headset and MAX98357A speaker amplifiers.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",101,54,1
"thesofproject/sof","d033181551eaf7a3b523741ae8ab1f7b83a504ed","saisurya-ch","2023-06-20 09:14:27","false","drivers: amd: vangogh: add drivers support for vangogh platform

Add drivers support for vangogh platform.

Signed-off-by: SaiSurya, Ch <saisurya.chakkaveeravenkatanaga@amd.com>",45,61,1
"thesofproject/sof","6e2d4973714dee424b60dac7beb29b91d22a03e8","ranj063","2023-05-19 15:49:52","false","topology2: dai-copier: num_input_pins/num_output_pins shouldn't be mandatory

Set them based on direction and the actual number of pins used.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",53,59,1
"thesofproject/sof","1a4b95748fbb1b0dc04f9187bede5a73132c66c0","singalsu","2023-02-01 11:56:53","false","Audio: EQ FIR: Get in prepare() channels count from sink stream

In IPC4 prepare() the source stream channels count is not always
set, it depends on topology. However the sink channels count
has been just set by IPC4 params function that gets it from
component's base configuration.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",51,56,1
"thesofproject/sof","f781a0b554be2d81511db02ee835f5c325ad3253","MingJenTai","2022-07-29 05:42:40","false","Modify used static libraries

With the version released in 20220728, some libraries are removed or renamed.

Signed-off-by: Ming Jen Tai <mingjen_tai@realtek.com>",110,50,1
"thesofproject/sof","fc5d74fccf690b20eb53daa66400e6ef85935eae","singalsu","2020-05-11 16:19:11","false","Audio: Add Time Domain Fixed Beamformer (TDFB) processing component

This patch adds the multi-microphone beamforming component. It enhances
microphone capture via spatial noise suppression. The component is a
quite generic FIR time domain filter bank and the fixed filter band
needs to be programmed with super directive or other beamformer criteria
filter coefficients. The coefficients are fixed but they can be
re-programmed during run-time.

The component reuses the FIR filter core but has different inputs
selection and outputs mixing features than FIR EQ so it is made a
separate new processing component.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",96,23,0
"thesofproject/sof","6fe1f343fccd9ddb31b7e56c6090bb2e0f5e3dfa","lyakh","2020-03-31 15:11:31","false","topology: add a ""core"" parameter to the W_DCBLOCK() macro

This places all SectionWidget.DCBLOCK* topology widgets, created by
the W_DCBLOCK() macro on the same core, on which the respective
pipeline is scheduled.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",69,22,0
"thesofproject/sof","ee692abd97f20c065ec1c20f92db5e1147d9598a","ktrzcinx","2020-03-24 13:26:52","false","tools: logger: Refactor format_uid()

Split this function to part responsible for pointer calculation
and string formatting. It make possibility to use same
string format with different pointer arithmetic.
Moreover introduce aprintf to make memory allocation for output
string more automated process.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",64,22,0
"thesofproject/sof","cf820a74452d6ae513bafc6e18cefa6376f10b84","bkokoszx","2020-01-08 11:51:24","false","driver: dai: implement get_hw_params() for specific dai's

Implements get_hw_params() function for specific DAI's (SSP, HDA,
ALH etc.) in order to fetch hardware stream parameters (set in
ipc_dai_config()). In case the specific DAI is able to support
different formats (e.g. HDA - it is configured via dma_set_config()
in dai_params()) params are set to 0 to indicate that they can vary.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",72,19,0
"thesofproject/sof","66baf6e08cea675c1076aca72b0aaa9113498779","tlauda","2019-12-18 09:31:10","false","alloc: remove zone from alloc_trace_*_heap functions

Removes zone argument from alloc_trace_*_heap functions.
They are using specific heaps anyway, so passing zone is pointless.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",73,18,0
"thesofproject/sof","81482ca63ab6f604f58f38a3dca34e4e8275aa10","groncarolonxp","2019-10-15 06:19:17","false","topology: Add SAI related utility macros

Signed-off-by: Guido Roncarolo <guido.roncarolo@nxp.com>",65,16,0
"thesofproject/sof","1bfb1978d4a0b8c8136ad6501f2fe66a5fa888b0","tlauda","2019-10-18 11:08:44","false","dma: alloc separate buffers for DMAs

Currently DMAs are using buffers on pipelines connected to either
host or dai components. This causes many problems in firmware logic
e.g. we need to preload playback pipelines with data or we need
to manually override buffer sizes, if the buffer isn't complaint
with specific DMA requirements. Also it requires from topology
creators to know some hardware specific things on each platform
like that for timer based scheduling on cAVS platforms we need
to have 3 periods in buffers connected to dai components.
This patch allocates separate buffers for DMAs, which are made
complaint by using different DMA attributes first. We no longer
need to preload playback streams, because we can start DMA
right away and just let it transfer zeroes before any valid
data will come.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,17,0
"thesofproject/sof","b793f0c1a019ddd78b78d245707489c4cacb7121","lgirdwood","2018-10-24 09:02:45","true","Merge pull request #483 from ranj063/eq

Eq 16/24/32-bit support",26,5,0
"thesofproject/sof","78748d42b974811f030ba407e0581dca8fb4d753","lgirdwood","2018-09-19 19:35:36","true","Merge pull request #72 from singalsu/fix_eq_fir_length_trailing_zeros

EQ FIR: Add check and removal for trailing zeros in filter coefficients",36,4,0
"thesofproject/sof","d566e7dd1d9e31b962e3dbac453900ff238b0b9f","tlauda","2018-08-23 10:12:22","false","pipeline: add pipeline_cache method

Adds implementation of pipeline_cache method,
which uses component ops to perform selected
cache command on every component, buffer and
pipeline itself.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",19,3,0
"thesofproject/sof","a99ee987ab80d53386e6acb8d9ed059dc75e5ee1","tlauda","2018-07-30 10:52:57","false","apl: platform: set ownership to DSP

Sets ownership of LPGPDMA, DMIC, I2S and some other generic registers
to DSP. Normally it's set by ROM, but on some older APL steppings
last two I2S ports were omitted, so FW got exception on boot.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",15,2,0
"thesofproject/sof","2fa6b3ac62fb7e10086cfafdb85d24d6663b1933","tlauda","2018-06-23 08:46:54","false","test: volume tests

Tests for volume processing functions.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",4,1,0
"thesofproject/sof","cfc5ff92668239f1fceaa2be49e434c476e97f12","tlauda","2018-06-19 16:22:24","false","arch: spinlock: fix value sharing between cores

Fixes xtensa spinlock implementation.
Previous one caused deadlock between cores.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",1,1,0
"thesofproject/sof","300f7179430afbaac459e09424bff436e4d68a8f","cujomalainey","2021-01-15 22:45:50","false","library: edf_schedule: fix naming collision

sch is global and local, rename local, found via cppcheck

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",69,31,0
"thesofproject/sof","052942c8636e0b7611e8d13d8cc97ba2966a3b4e","bardliao","2019-03-18 08:35:00","false","topology: add ABI information

We can add ABI information to the Manifest section. So kernel can
check if the topology is compatible with the kernel.

Signed-off-by: Bard liao <yung-chuan.liao@linux.intel.com>",67,9,0
"thesofproject/sof","62315289243efc9d60e43cdaa20d2ba2722ce05b","dbaluta","2022-08-05 14:46:34","false","topology: Fix setup control bytes comments

setup config data was removed with commit
5763c74bf408d (""codec_adapter: Remove setup config from module data"")
update documentation to reflect this.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",118,50,1
"thesofproject/sof","a91a396d5c7f821a63edf2165a5ee56e52c5f47e","tlauda","2019-09-17 10:36:17","false","notifier: add new NOTIFIER_ID_DMA_DOMAIN_CHANGE

Adds new NOTIFIER_ID_DMA_DOMAIN_CHANGE. This id will be used
by DMA single channel scheduling domain.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",61,16,0
"thesofproject/sof","4d1b3d15b6c5edefa550910c2580965f9b36519a","plbossart","2018-07-13 17:56:08","false","topology: fix sof-apl-pcm512x

Remove DMIC support to avoid topology load fail,
Remove capture (not supported by PCM512x codec)
Simplify structure using PCM_PIPELINE_ADD instead of PCM_PIPELINE_DAI_ADD
Enable 24-bit output
Enable up to 32-bit PCM (tested with S16_LE and S32_LE)

Tested on Up2, no issues detected.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",16,1,0
"thesofproject/sof","ca84a89b40b286386d5d30af2abbc8269a52ac0d","plbossart","2019-05-21 23:04:05","false","kmod_scripts: first support for SoundWire

remove additional modules in the right order to stress test SoundWire
support

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",61,12,0
"thesofproject/sof","0cf1f8854681e02e3fb421df383fed955bec30f5","lrgirdwo","2021-06-26 20:19:04","false","buffer: fix double list deletion detected by valgrind.

Buffer lists were being deleted twice, at first by the
pipeline_disconnect() (the correct place) and then by buffer_free().

Fix this so buffer_free() only frees the buffer.

==426365== Invalid write of size 8
==426365==    at 0x49CB47B: list_item_del (list.h:57)
==426365==    by 0x49CB47B: buffer_free (buffer.c:179)
==426365==    by 0x49C8C7B: ipc_buffer_free (helper.c:697)
==426365==    by 0x10C1E6: free_comps (testbench.c:165)
==426365==    by 0x10C1E6: main (testbench.c:415)
==426365==  Address 0x4bdce48 is 152 bytes inside a block of size 168 free'd
==426365==    at 0x484521F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==426365==    by 0x49C9163: comp_free (component_ext.h:55)
==426365==    by 0x49C9163: ipc_comp_free (helper.c:866)
==426365==    by 0x10C200: free_comps (testbench.c:162)
==426365==    by 0x10C200: main (testbench.c:415)
==426365==  Block was alloc'd at
==426365==    at 0x4847A25: calloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==426365==    by 0x10D4E8: comp_alloc (component.h:548)
==426365==    by 0x10D4E8: file_new (file.c:430)
==426365==    by 0x49C81E7: comp_new (helper.c:423)
==426365==    by 0x49C8F0F: ipc_comp_new (helper.c:823)
==426365==    by 0x10E642: load_fileread (topology.c:323)
==426365==    by 0x49E13A0: load_widget (tplg_parser.c:1281)
==426365==    by 0x10F796: parse_topology (topology.c:779)
==426365==    by 0x10BE76: main (testbench.c:310)

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",75,37,0
"thesofproject/sof","1674061b2059fe57ff3f7846883b17478181243b","lrgirdwo","2018-09-25 15:20:59","false","Revert ""ci: travis: Add host build to travis.""

This reverts commit a28476a2e7021319f6d4431a48122423a64cbeae.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",37,4,0
"thesofproject/sof","e706d5f9502e6f5daaef4505df1387f3a06c2b0f","plbossart","2021-09-28 17:06:55","false","ipc3: dai: avoid variable/function shadowing

cppcheck throws the following warning:

src/ipc/ipc3/dai.c:93:29: style: Local variable 'dai_config' shadows
outer function [shadowFunction]
 struct sof_ipc_dai_config *dai_config =
 ipc_from_dai_config(dd->dai_spec_config);
                            ^

src/ipc/ipc3/dai.c:250:5: note: Shadowed declaration
int dai_config(struct comp_dev *dev, struct
ipc_config_dai *common_config,
    ^
src/ipc/ipc3/dai.c:93:29: note: Shadow variable
 struct sof_ipc_dai_config *dai_config =
 ipc_from_dai_config(dd->dai_spec_config);

All other uses of 'struct sof_ipc_dai_config' use 'config', so let's
align the style.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",122,40,0
"thesofproject/sof","daeafb197c46c31fb070d6f9b2de0167f4602efc","tlauda","2019-02-07 13:00:49","false","dai: add dma_buffer to dai_data

Adds currently used dma_buffer to dai_data.
Now it's much easier to get buffer and also it's aligned
with what is done for host component.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",55,8,0
"thesofproject/sof","af19236513e5501180e02f346bf244f723f8047e","lgirdwood","2018-10-15 20:19:05","true","Merge pull request #486 from dabekjakub/fix_pause_resume

dma: fixed play pause bug",34,4,0
"thesofproject/sof","10007ee7df6de4d46bda8812600923cc5488546b","lgirdwood","2018-08-24 10:50:29","true","Merge pull request #259 from tlauda/topic/fix_notifications

ipc: fix position notifications",21,3,0
"thesofproject/sof","f4716b12b9bfd5eb5e5e15ca6a5547467df88046","lgirdwood","2018-08-08 13:00:13","true","Merge pull request #203 from mwierzbix/unitTest-lib-bzero

test: lib/bzero: Added unit tests for lib/bzero.",19,2,0
"thesofproject/sof","4ec8d8b6f574fbc92909165bf32b8ed16ca2db0c","tmleman","2022-02-14 10:00:25","false","ipc4: helper: unbinding modules from the same pipeline

When both module instances are parts of the same pipeline Unbind IPC
would be ignored by FW since FW does not support changing internal
topology of pipeline during run-time. The only way to change pipeline
topology is to delete the whole pipeline and create it in modified form.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",110,44,1
"thesofproject/sof","8675d4cb9f37458420e8862df89a892af7c5ee27","KaiChuan-Hsieh","2020-07-15 10:40:54","false","tools: add TGL key signature to sof_ri_info

Provide output info if evaluated FW image was signed with
TGL production key.

Signed-off-by: Kai-Chuan Hsieh <kaichuan.hsieh@canonical.com>",83,25,0
"thesofproject/sof","71fd3b34eaa775401567355f82daf738f2846acf","tmleman","2022-10-26 13:23:53","false","zephyr: power: preventing lower power states

D3 (PM_STATE_SOFT_OFF) state can be only entered after IPC request from
host. That why this prevent should be permanent.

D0i3 (PM_STATE_RUNTIME_IDLE) can be entered if host allows it and under
special conditions. State is prevented by default. Host will remove this
prevent with dedicated IPC message.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",93,53,1
"thesofproject/sof","4f273961ab8c4c2fbf2a13f752cc47ee370ce6f7","ranj063","2021-09-09 16:26:26","false","buffer: remove buffer core argument in comp_buffer_connect

It can be accessed with the buffer argument.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",118,39,0
"thesofproject/sof","c84d64b5242fc18ae64caac701a98972e1dc0d36","ranj063","2022-02-10 21:15:17","false","topology2: CMakeLists: clarify the pipelines for mixin-mixout tplg

Only the HDA pipelines use mixin/mixout based pipelines.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",108,44,1
"thesofproject/sof","f63951832f3367590d6a9180c6d37f91ac0c35ff","ranj063","2022-03-18 04:16:42","false","codec_adapter: Remove the status variable in module_set_configuration()

Remove the static variable that holds the total config size and use
the new field, new_cfg_size in struct module_data to store the size of
the config data.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",110,45,1
"thesofproject/sof","def800e421e193d39e329e2830b6ebb53bf3cb31","ranj063","2022-07-07 21:15:04","false","module_adapter: No need to calculate buffer sizes with simple_copy

When using simple_copy for components like volume, there is no need to
allocate intermediate sink buffers. So, move the check before the
calculation for sink buffers size.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",109,49,1
"thesofproject/sof","c950c6525e62170669e675a5effbae08abeba51a","kv2019i","2022-09-09 14:13:48","false","app: overlays: disable ADSP logging backend for IPC4 targets

Each logging backend has an overhead and we don't need two backends
writing to SRAM windows, so disable ADSP and keep MTRACE for IPC4
targets. Other targets will continue to use ADSP backend.

Due to a limitation in upstream Kconfig options, this change
will force a change in timestamp formatting as disabling ADSP
will disable CONFIG_LOG_BACKEND_FORMAT_TIMESTAMP=y. Mitigate
this by enabling CONFIG_LOG_OUTPUT_FORMAT_LINUX_TIMESTAMP=y.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",106,51,1
"thesofproject/sof","db36db4778bb1d417f24cf8d29ed1c6ceb015081","kv2019i","2021-06-02 14:26:59","false","cavs: memory: unify access macros on Zephyr

With Zephyr linker scripts updated on all cAVS platforms, we can now
unify uncache_to_cache() and cached_to_uncache() implementation in
Zephyr builds.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",82,36,0
"thesofproject/sof","bae8457c78318dcc723534b029eb601fcf8a7746","kv2019i","2022-10-10 13:44:45","false","buffer: add pipeline and component ids to buf_foo() output for Zephyr

The component and pipeline identifiers were direct part of the older
SOF dictionary format. This information was added directly to encoded
output and was not part of the log message. When using Zephyr logging
subsystem, this type of audio specific information has be to put
as part of the log messages like any other log content.

Modify buf_{err,warn,info,dbg} macros to add buffer pipeline
and buffer-id identifiers to all printed log messages.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",99,52,1
"thesofproject/sof","c97fb30f97c7dd479b0a97b91de07f20490bd32c","bardliao","2022-04-12 09:53:11","false","topology2: sdw-cavs: add dmic support

Add PCH DMIC support for MTL RVP with dmic01 id = 2 and dmic16k id = 3.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",118,46,1
"thesofproject/sof","1d81cb6a62fccb48558c305e472c370c66e2c82d","singalsu","2022-11-07 17:59:56","false","Tools: Test: Audio: Fix typo in THD+N help text

There's incorrect dynamic range test function usage in help.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",93,53,1
"thesofproject/sof","18d116b230feba0b00f99ab186398e37318e4f02","mrajwa","2019-02-13 11:37:10","false","GDB: cleanup and comments

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",60,8,0
"thesofproject/sof","805bcb10729bb7ce117d42942259ca8002429192","lgirdwood","2018-11-09 09:57:11","true","Merge pull request #557 from akloniex/less-text-usage

Lower size of .text section",41,5,0
"thesofproject/sof","d40087fdd4ecaf0329059ef63527e3d4664b2d59","lgirdwood","2018-08-30 14:55:54","true","Merge pull request #62 from singalsu/fix_src_test_cmdline_arg_proposal

SRC test: Fix testbench execute command line plus cleanup",29,3,0
"thesofproject/sof","299ae7177130c23b057f0d7ac067155c51674a34","mrajwa","2020-11-27 12:46:47","false","codec_adapter: make free_all_memory() interface available for codecs

This patch makes codec_free_all_memory() available for codecs so they
can free all memory allocated by themself.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",78,30,0
"thesofproject/sof","12436c78b379de49eb2fbc894b8375fa1239c30a","lgirdwood","2018-07-02 14:53:53","true","Merge pull request #23 from RanderWang/master

DMA-Trace: fix dma-trace overflow issue",8,1,0
"thesofproject/sof","e84770f46a09cfa0793765ea196ace67b566027c","lgirdwood","2018-11-28 10:12:40","true","Merge pull request #643 from keyonjie/master

dw-dma: fix several trace formats issues",42,6,0
"thesofproject/sof","44c6402cb4e9a1c04bfa5da66833d8014ab4e216","lgirdwood","2018-09-28 09:04:49","true","Merge pull request #419 from bkokoszx/debugability-avoid-null-dereference

debugability: avoid potential nullpointer dereference",36,4,0
"thesofproject/sof","90873c5d35ebd07d9c473507693db0585f767e31","dragosht","2019-09-02 13:37:54","false","sof-ctl: fix segfault when no ctl name given

If no control name is passed to sof-ctl, it currently pops an error,
dumps the usage and then segfaults:

root@gr-mrb:~# sof-ctl -D hw:0
Error: No control was requested.
Usage:   ...
Segmentation fault (core dumped)

Fix all that by jumping to the right label.

Signed-off-by: Dragos Tarcatu <dragos_tarcatu@mentor.com>",59,15,0
"thesofproject/sof","7e743cfb88f5a8ff0434eeaaeb21ddfe830900d2","jajanusz","2019-12-17 10:04:34","false","Revert ""kpb: rework of validate_host_params() function""

This reverts commit a1c498e7d1c8ef7c6cf08589e8c945151fde96ea.",69,18,0
"thesofproject/sof","dff70c449093b894faefc48adfbe9350e9eda6b8","jajanusz","2019-02-03 02:12:30","false","cmake: tools: remove autotools

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",58,8,0
"thesofproject/sof","10c6f46f2fae6cf8c3886b8c4daa545b615aa827","singalsu","2020-05-11 16:24:13","false","Topology: Add pipelines and topologies build for TDFB component

This patch adds the playback (for test only) and capture pipelines
with Time Domain Fixed Beamformer (TDFB) component.

Topologies variants to test capture with beamformer are built for
sof-hda-generic and sof-apl-pcm512x platforms. The beam direction
is +/- 10 degrees as compromise between notebook camera and stereo
capture. The dual beams preserve the stereo characteristic. The
beamformers are added to both 48 kHz and 16 kHz DMIC capture
pipelines.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",96,23,0
"thesofproject/sof","0cc895d609066ad2483ac6067bca5affc47dcfa3","jajanusz","2019-03-19 14:12:36","false","cmake: cmocka: add toolchain file for xt

It's needed to make cmocka build correctly
for generic instead of unix system

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",65,9,0
"thesofproject/sof","01829fae2ff57febed100a31545c5ce02f2f4eeb","lrgirdwo","2021-06-14 09:56:24","false","ipc: removed uneeded headers

Not used by these files so remove.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",69,36,0
"thesofproject/sof","7a802599ab83391f41ed2a30cb4fc89a8eee11a6","DianaGabriela27","2019-03-06 11:23:00","false","rimage: Remove blank lines before/after braces

Blank lines aren't necessary after/before open or closed
braces.

Signed-off-by: Diana Ungureanu <diana-gabriela.ungureanu@nxp.com>",66,9,0
"thesofproject/sof","6e26683f9f64c598e2174d2145aa7f5d2776cbaa","plbossart","2019-02-04 22:22:07","false","topology: apl-pcm512x: fix HDMI3 support

missing 2 in DAI_ADD() macro. This seems to be the only place where this
typo/mistake happens

we really need a parameter checker or move away from M4...

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",57,8,0
"thesofproject/sof","777c0008c1257ceeb433bc7f42dba2013cf4de1b","lrgirdwo","2021-06-26 12:26:53","false","testbench: add more helpful output for options parsing.

Lets be more helpful to the user.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",75,37,0
"thesofproject/sof","7cbc7ea87819904287d276e66ac8b7fda52e9a51","lgirdwood","2018-09-26 11:32:24","true","Merge pull request #415 from xiulipan/hostbuild

Enable travis host build",37,4,0
"thesofproject/sof","e330fb4ec727c3a060ad6b1fb6e8c21a4afe7357","marc-hb","2023-10-05 01:05:23","false","Delete old rimage submodule and old rimage west module

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",16,64,1
"thesofproject/sof","d3f3c5020584444df4dcfa079fa57f2690c656e2","aiChaoSONG","2021-06-15 05:45:15","false","topology2: add src class

Add the class definition for SRC widget, it can be
instantiated as follows:
	Object.Widget.src.""N"" {
		period_sink_count	2
		period_source_count	2
		format			""s24le""
		rate_out		48000
	}

Where N is the unique instance number for src widget
within the same alsaconf node.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",69,36,0
"thesofproject/sof","29416bbd1622db4773d6a0b0e761444b40069f59","kuanhsuncheng","2021-10-01 10:56:35","false","platform: mtk: fix wrong prefix windows name

change prefix windows name from
NUM_IMX_WINDOWS
to
NUM_MTK_WINDOWS

Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",122,40,1
"thesofproject/sof","f494b4c583dd9a5f4fbb5a6ea45c5d735246fa10","libinyang","2023-02-10 09:01:39","false","topology2: dmic-wov: fixup output_pin_binding

src_pin_binding has been renamed to output_pin_binding.
Fixup the name.

Signed-off-by: Libin Yang <libin.yang@intel.com>",54,56,1
"thesofproject/sof","6b119f9a86fe603473b72682e8cd376009b2ffbd","RanderWang","2022-09-05 13:24:16","false","ipc4: volume: set volume config when volume is initialized

Found one issue on Linux platform that the initialized volume setting
by alsamixer doesn't make effect when playback is started. The reason
is that the volume config set is skipped when volume module is just
initialized. Now volume will be set when it is initialized. At this
time cd->channels is not initialized so use channal count in module
config.

Signed-off-by: Rander Wang <rander.wang@intel.com>",118,51,1
"thesofproject/sof","7f8739837520c49c7835c24127b59155d15973ac","RanderWang","2021-08-12 07:59:40","false","mailbox: add support for batch-data writing for SW REG

In IPC4 case, we need to write a batch of register data to SW REG
box, not just one 32bit data.

Signed-off-by: Rander Wang <rander.wang@intel.com>",118,38,0
"thesofproject/sof","b71c043c5dbda181b8a8ab1a401d0229d6dc2108","slawblauciak","2019-07-22 09:18:13","false","dai: alh fifo params for ICL and CNL

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",48,14,0
"thesofproject/sof","ed6f48b94d273e047be857192fe906f2bdf9e701","RanderWang","2023-07-06 07:57:20","false","platform: cavs: remove hw clk setting in platform_init

These hw clk settings are done in zephyr layer in power_init(),
so remove them in sof side.

The CONFIG_CAVS_LPRO_ONLY is for CoffeeLake only and doesn't affect
TigerLake, so the hw clk settings are the same for platform_init
and power_init(), then we can remove them.

Signed-off-by: Rander Wang <rander.wang@intel.com>",31,61,1
"thesofproject/sof","b3c64f499adc91a3e63b078cecade4112bb85d24","xiulipan","2018-10-12 05:19:48","false","scripts: docker: add qmeu docker

Add a docker contains sof xtensa qemu

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",33,4,0
"thesofproject/sof","359326b8dbbab20e17a2827c43a6caf20d66ebec","jxstelter","2022-09-05 12:45:57","false","library_manager: Fix library_manager compilation issue

Fix typo. Add changes required after removing some old definitions.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",118,51,1
"thesofproject/sof","51e3c369855c1534da48f6203fd72bec0a04dd59","lbetlej","2020-01-29 13:21:14","false","cnl: remove an obsolete constant

An obsolete constant is removed from CannonLake specific code.

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",76,20,0
"thesofproject/sof","132e6482805afbc3e47575a64caf58d7c3aee39a","singalsu","2021-11-19 14:19:47","false","Math: Build library functions if enabled from Kconfig

This patch adds src/math/Kconfig with items CORDIC_TRIGONOMETRY_FIXED,
NUMBERS_GCD, NUMBERS_NORM, NUMBERS_VECTOR_FIND, MATH_DECIBELS, MATH_FFT,
MATH_FIR, and MATH_IIR_DF2T.

Configuration FIR and FFT were previously in src/audio/Kconfig but they
were moved to new math location for simplicity.

The build of trig.c was simplified by remove of unused UNIT_CORDIC_TEST
and CONFIG_CORDIC_TRIGONOMETRY_FIXED.

All but build details of numbers.c are handled by src/math/CMakeList.txt
if(CONFIG_X) additions. There was need to add ""-DCONFIG_NUMBERS_x"" into
target_compile_definitions() in test/cmocka/CMakeLists.txt because
the platforms those drop most features e.g. BYT would fail in test
case build.

Tone generator build is disabled for all platforms. It avoids select of
triginometric functions and saves RAM.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",129,42,1
"thesofproject/sof","78f13ed4c6dee90b4100f0043df95db16cab2929","singalsu","2018-12-12 16:41:20","false","Testbench: Fix component load fail

This patch fixes fail to load components into pipeline with new() in
host testbench. The config header size need to be valid since it is
checked by SOF now.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",45,6,0
"thesofproject/sof","1ea43cafe75fc7c6fe864abd63e40adeef2a724b","marcinszkudlinski","2023-09-19 11:24:19","false","DP: bugfix, set pointer to NULL after free

There should not be any pointers left pointing
to a freed structures.

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",20,64,1
"thesofproject/sof","14bf67634f646e8a99e6eb9ad2738a16077fd50c","tlauda","2019-06-05 11:01:05","false","init: reorder trace points sequence

Reorders trace points sequence to be incremental.
Because of many changes in init code the trace points
values stopped to be logged in incremental order.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",62,12,0
"thesofproject/sof","e291d5da4933214d4c21df5ea5776794e8fe0a0c","jajanusz","2018-07-11 14:59:43","false","doc: remove README.rst, it's in sof-docs now

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",15,1,0
"thesofproject/sof","e5a910d21b9cf8440abf78a775a4d9f7c86f32e6","jajanusz","2020-03-27 12:23:10","false","xtensa: cmake: use xt-ranlib

CMake should use ranlib that comes with toolchain.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",66,22,0
"thesofproject/sof","8db2b101eea8d77b4537a3dfeeb982155e28212d","dbaluta","2020-01-30 13:27:28","false","topology: imx8: Use s32le format for wm8960 codec

wm8960 codec drivers the master clock and for s24le we cannot easily
derive the bitclk.

So, switch to s32le. SAI supports s32le format. The initial s23le was
added because topology was based on sof-imx8qxp-cs42888.m4 which uses
ESAI and that's limited to s24le.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",75,20,0
"thesofproject/sof","6b91a553284ba541214e4a5ff7cb3e070228f8eb","andrula-song","2023-02-21 03:05:29","false","Audio: Fix the peak volume calculation error in volume component

Fix the peak volume calculation error in volume component, calculate
the maximum absolute value of input as peak volume as close source
firmware did.

Signed-off-by: Andrula Song <andrula.song@intel.com>",57,57,1
"thesofproject/sof","e4aee1afe73859a21601055c24bef2ec18c51c7a","andyross","2023-05-23 17:20:19","false","Revert ""tools: Remove older fuzz framework""

This got merged too fast.  Turns out it broke the newer fuzz
integration that was in the same YAML file.  Also there are some
evolving review comments.  Will resubmit.

This reverts commit 11e57f50309dbaec3a665dde951b38e219e9f762.

Signed-off-by: Andy Ross <andyross@google.com>",55,60,1
"thesofproject/sof","49c0f91a756b177a56bbe09856587f0cc0021a6c","keyonjie","2019-06-27 07:51:44","false","sof-ctl: allocate ctl_data struct and switch to use it

Allocate ctl_data struct, initialize it and switch to use it to replace
the local variables.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",46,13,0
"thesofproject/sof","25cd7795cc1afa0eab6ac3e2fe96b43483f27297","akloniex","2018-10-19 12:27:17","false","debugability: extend core dumps to provide AR registers.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>
Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",31,5,0
"thesofproject/sof","47b159fca33638cc1f60fc7eaa36af34c52db56b","yongzhi1","2021-11-30 01:00:43","false","topology: set default values for C_CONTROLBYTES string members

When the string fields left empty, the alsa topology parser treats
SND_CONFIG_TYPE_STRING type config as -EINVAL, so set defauls values.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",131,42,1
"thesofproject/sof","81f4b9229fc1f30363b8a1e8925bd464280cd6b3","tlauda","2019-07-12 11:50:27","false","schedule: cleanup includes

Cleanups includes in all schedule files.
Unused headers has been removed and needed
has beed added.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",43,13,0
"thesofproject/sof","d10efee363a3916cde45e0237e8c5fe66d513589","nashif","2022-07-19 16:44:14","false","zephyr: rename timer kconfig

The config name was changed in zephyr to INTEL_ADSP_TIMER to accommodate
non-cavs platforms. Align with upstream zephyr so we can deprecate it in
zephyr.

Signed-off-by: Anas Nashif <anas.nashif@intel.com>",115,50,1
"thesofproject/sof","1512a49bfad241fb41ec2ff5a8b24c91548415ab","cujomalainey","2020-10-14 18:12:47","false","component: initialize new devices to INIT state

As per component graph we start devices in INIT state. Since most
components don't use this state anyways lets just init the struct to
this state and remove it where it is used correctly.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",71,28,0
"thesofproject/sof","b40a2f7d3696d3680615954c16239c383add3f9a","Potochi","2021-08-04 13:23:33","false","docker: Add support for i.MX8ULP platform

This commit adds support for building i.MX8ULP toolchain support.

Signed-off-by: Bud Liviu-Alexandru <budliviu@gmail.com>",113,38,0
"thesofproject/sof","c80350cc3bfc9bb8dd81b031a5811a90347c2646","keyonjie","2020-11-26 10:38:29","false","math: add config item for fft library

Add config item MATH_FFT and disable it by default at the moment.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",78,30,0
"thesofproject/sof","c00d39c71b459c09638fadba9bcdc76960d6fd32","dcpleung","2019-11-12 19:05:05","false","Add rimage as a git submodule

This adds rimage as a git submodule by running:
  git submodule add https://github.com/thesofproject/rimage.git rimage
  git submodule set-branch --branch master rimage

This also modifies the build script to build the tool.

Signed-off-by: Daniel Leung <daniel.leung@intel.com>",54,17,0
"thesofproject/sof","8ec34b086a0e6d7515132cb4f7b2525ef41f613c","dbaluta","2021-04-02 16:51:24","false","codec_adapter: Move to shimmed codec adapter interface

This commit strips the codec adapter as it is more of a
library/layer for codecs to simplify their interface against rather than a
component in and of itself. This gives each codec its own UUID solving the
ID problem while opening an opertunity to register codecs directly for
future multiplexing capabilities.

Old UUID adapter used for codec_adapter is now used for Cadence codecs,
and we add new UUIDs for passthrough and Waves codecs.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>
Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",79,34,0
"thesofproject/sof","0d14a64ea6e96c066711cc9ad50b71839a0a5c9d","dbaluta","2021-08-03 08:44:52","false","topology1: i.MX: Add topology to demonstrate EQ FIR component

This enables EQ component using FIR filter for i.MX8QM/i.MX8QXP/i.MX8MP.

Usage:

   $  amixer -Dhw:1 controls | grep EQ
    numid=44,iface=MIXER,name='EQFIR1.0 eqfir_coef_1'

  $ ./sof-ctl -Dhw:1 -n 44 -s sof/tools/ctl/eq_fir_loudness.txt

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",111,38,0
"thesofproject/sof","0db4a829645ce0866c929015ac867805887c603c","lrgirdwo","2022-02-22 13:54:13","false","tplg parser: refactor and cleanup part 1

No functional change.

Move some common testbench code into the topology parser and group
feature parsing by file name.

Add a tplg_ prefix to external APIs without a prefix, others with an
existing prefix to follow this change.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",106,45,1
"thesofproject/sof","97bfb24d701c254279e407f3388b02fa77045a68","plbossart","2021-06-18 00:11:45","false","topology: sof-cnl-nocodec: use different core for each DAI

The UpExtreme HAT connector with the SoundWire,
I2S, DMIC mixed mode exposes the following pins

DMIC_DATA0: input: HAT PIN 8
DMIC_CLK: output: HAT PIN 26

IS2_MCLK: output: HAT PIN 16

I2S1_SCLK: output: HAT PIN 32
I2S1_SFRM: output: HAT PIN 10
I2S1_TXD: output: HAT PIN 24
I2S1_RXD: input: HAT PIN 18

Let's use core3 for DMIC, core2 for SSP0, core1 for SSP1 and core0 for
SSP2.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",72,37,0
"thesofproject/sof","801272e242592b48b471c51787d7a4a1aaccfd9b","lrgirdwo","2018-11-24 15:33:59","false","rimage: make sure cavs1.5 manifest uses correct file offsets.

cavs1.5 manifest file structure and offsets are different than cavs
version 1.8

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",40,6,0
"thesofproject/sof","dffb3ae76a0a1c7c724cc95129801138adf931f4","DianaGabriela27","2019-02-28 09:22:05","false","sof: Fix compilation error when TRACE = 0

Add missing macros and compile out heap_trace_all
and heap_trace.

Reported-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>
Signed-off-by: Diana Ungureanu <diana-gabriela.ungureanu@nxp.com>",67,9,0
"thesofproject/sof","5cf5e32a40ba27f7c050d199f365e4f6655e17f0","singalsu","2022-02-16 14:45:16","false","Audio: TDFB: Switch to fir_32x16_2x() function in generic C

This patch replaces the two calls for FIR filter with the dual
FIR function call.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",105,44,1
"thesofproject/sof","05dcf1ccdef58a79fb78bded8b5488291c28759e","btian1","2023-08-18 02:09:32","false","audio: zephyr: add -fno-inline-functions option to zephyr code

By enable/disable COMPILER_INLINE_FUNCTION_OPTION to control
add or remove -fno-inline-functions build option for sof zephyr
code.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",25,63,1
"thesofproject/sof","4a2d69b50b18a2521fc27ea61575a44cea579cc7","singalsu","2021-11-18 15:24:50","false","Tools: Topology: Updated TDFB macro files

The tdfb_controls.m4 is changed for better 15 degree control enum
spacing for beam direction. The file is with this change dedicated
for line arrays with physical limitation to -90 to +90 degrees that
is just achievable with 16 max. enum values.

The new tdfb_controls360.m4 uses the previous 30 degree spacing for
360 degrees arrays such as circular. The pipeline macros for 360
degrees are added to pipelines macros. The difference is only include
of 360 degrees controls version.

The topology development CMakeList.txt is changed to build topologies
with TDFB with single dual mono -90 to +90 degree angle steerable
beam. The stereo dual beam setup files are preserved and updated but
currently used only for testbench test for more complex configuration.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",128,42,1
"thesofproject/sof","0c1756c49a2a2b8f3b3c43b9d09c1bdad21d156d","singalsu","2018-10-02 07:51:59","false","EQ FIR: Add support for 16 and 24 bit data

This patch adds to equalizer capability to process 16 and 24 bit
pipelines in addition to 32 bit similarly as IIR. The generic C,
HiFiEP, and HiFi3 versions are updated with the capability.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",34,4,0
"thesofproject/sof","a62f7a79fba20ef350f9f2549e935d7f75dd0b2f","tlauda","2020-06-02 07:58:19","false","dmic: add DMIC_HW_VERSION 3

Implements new DMIC_HW_VERSION 3. It requires to set ipm values
no matter how many controllers are implemented.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",93,24,0
"thesofproject/sof","e300861d4a606e7aa0aab90f71f12d6842916001","tlauda","2019-01-15 10:39:42","false","pipeline: refactor complete function

Refactors pipeline complete function to work with pipelines,
which don't have scheduling component, but are just connected
to the pipeline with one.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,7,0
"thesofproject/sof","1178606b08a0caaf3ceb5896443e8658dbe7408e","tlauda","2019-12-13 12:11:11","false","ipc: remove flag dsp_pending

Removes dsp_pending flag. IPC notifications aren't sent
if the list is empty, so additional flag is not needed.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",75,18,0
"thesofproject/sof","99a2644e7bce47f6baab81678af924fe79d2df8e","tlauda","2020-01-22 09:13:51","false","mailbox: add missing header

Adds missing header with definition of cache_to_uncache macro.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",78,20,0
"thesofproject/sof","62035b22fc8b7091d98e7bee66c7adf5813a925d","tlauda","2019-07-16 07:44:55","false","host: move memory defines to appropriate header

Moves memory defines for host architecture to
memory.h.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",46,13,0
"thesofproject/sof","91bdf1a5de251cb12565dc1e8bf8e3556c45cf02","tlauda","2020-05-29 07:12:52","false","pm_memory: move everything to cAVS platform

Moves the entire pm_memory header from public directory
to cAVS specific one. Power management for memory is
currently done only for cAVS, so there is no point in
keeping one function public.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",97,24,0
"thesofproject/sof","e0491ff77838ba59d634105620969b33c4cbfed9","tlauda","2019-10-25 08:06:56","false","dai: volume: make pcm conversion in dai component

Changes processing flow and moves pcm frame format conversion
from volume to dai component. This way we'll no longer need to
artificially add volume into the pipelines, where it's not really
needed but frame format change is e.g. KPD topology. Dai is the perfect
place for conversion, since it's format is pretty much predefined and
comes from topology. Rest of the pipeline is configured from the host.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",65,17,0
"thesofproject/sof","80af480eccc4c90d5293a3e20fd8c2d4e8e92a82","aborisovich","2022-09-26 21:01:54","false","soc: ace: fix IPC D3 power state entry

This patch fixes D3 issue - now platform enters and wakes up from
D3 correctly on first iteration. This had been achieved using Zephyr
cpu function call that redirects D3 flow to power down assembly code
sending IPC response to host just before powering down.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>
Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",97,52,1
"thesofproject/sof","f51f2965721ad87e994ff3a33bf277035dd62830","aborisovich","2022-12-18 14:30:24","false",".github/workflows: added concurrency group to Zephyr workflow

Recently new feature had been introduced to Github actions
""concurrency"" that allows to define a name for a group of workflows
that will cause old workflow to stop if the new one had been created
and the group name matches.
This improves usage of resources in SOF project by cancelling
running workflows when pushes to pull requests are done frequently
before old jobs are completed.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",91,54,1
"thesofproject/sof","6bd69e63a74ed3d95e083efefe5c93c5aa597759","RanderWang","2023-09-04 01:23:06","false","ipc4: msg: simplify ipc message check for notification

Use list_is_empty to check the message is queued or not. The notify
message is initialized to empty after deleting from the ipc msg list.
We use the same idea in ipc_msg_send.

Signed-off-by: Rander Wang <rander.wang@intel.com>",24,63,1
"thesofproject/sof","321bfde9136ec2b490fffe30b8c503bc88291c9b","RanderWang","2022-10-13 14:00:40","false","topology2: fix multi-stream test issue in ci

Duplicated dai index results to module initialization
faiure in multi-stream test. Dai 2 should be used by
stream nocodec-2.

Signed-off-by: Rander Wang <rander.wang@intel.com>",97,52,1
"thesofproject/sof","512de6044e1f23aec407116b59a7f91b489ec47f","tlauda","2018-08-10 09:31:31","false","cavs: memory: align runtime heap buffers to cache lines

Aligns every runtime heap buffer to cache line (64 bytes).
This way we won't have problem with processing tasks on slave cores
in the future.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",19,2,0
"thesofproject/sof","ff2e969800921d2e04351ac3460eaeeb6cdd45a6","tlauda","2018-07-12 11:05:38","false","volume: fix condition in volume_ctrl_set_cmd

volume_ctrl_set_cmd should accept 8 channels.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",13,1,0
"thesofproject/sof","0d0ee34a311b879365c5e49eb0aceaa04c4eab3f","tlauda","2019-09-23 08:10:34","false","agent: remove disable and enable functions

Removes disable and enable functions, because they
are no longer needed. Agent will now update its lat_check
time above passive level, so every long running task will
be preempted.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,16,0
"thesofproject/sof","22426167559477954e3b2cad4d7f18cf0495e5b8","tlauda","2019-03-12 12:42:28","false","dw-dma: enable interrupts based on the scheduling mode

Adds new functionality to DW-DMA driver to enable/disable
interrupts based on the pipeline scheduling mode. If
we are scheduling on timer there is no need to touch
any irq related registers.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",69,9,0
"thesofproject/sof","660c9d2617c1b99376e997955307234804e7d4e4","plbossart","2022-03-16 00:44:23","false","topology2: cavs: rename mixout-capture as mixout-gain-host-copier-capture

Be exhaustive on pipeline contents.

Also remove Windows references and copy/pasted comments

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",107,45,1
"thesofproject/sof","193116818548ee61685044a32ccf5fea3b777172","lrgirdwo","2021-04-14 11:20:19","false","pipeline: decouple IPC major from pipeline_new().

Decouple the IPC ABI major version from pipeline creation. This moves
struct sof_ipc_pipe_new from the pipeline and replaces it with it's
members (saving 8 bytes as no header is needed).

Add new feature specific pipeline APIs to configure pipeline at creation.

Additionally align testbench and UTs to API change.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",80,34,0
"thesofproject/sof","955a5b3fc8e9431bb96a858e84a2df7e951dea45","lrgirdwo","2022-12-12 22:22:50","false","host: cmake: make sure we build maths support for host config

Add maths directory for host.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",103,54,1
"thesofproject/sof","f07cf8ea1f193ba18c4267cada546504d66ea20c","plbossart","2021-06-18 19:40:13","false","topology: CMakelists: group nocodec together

Prepare for use of common file

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",74,37,0
"thesofproject/sof","7ba1a08862d6edc8143683bb6c1adf5caffebd3b","lrgirdwo","2021-06-10 19:48:47","false","ipc4: add support for ipc4 boot message and data

Add support to send IPC4 boot message and boot data by providing
a new API to get this data from ABI specific code.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",75,36,0
"thesofproject/sof","5dce3fb8fbe785d1f573b53a4e13a67f0a4c98b4","lrgirdwo","2019-09-12 13:48:26","false","fuzzer: fix return value of topology loader.

Return the real error code.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",62,15,0
"thesofproject/sof","28761ec8abe9ef3eca974cc69fb7339df9490b51","lrgirdwo","2021-08-16 16:15:57","false","testbench: add support for virtual cores as threads

This is the first step in running a full DSP topology on multiple testbench
""virtual"" cores. Testbench will use threads to virtualise a emulate a core
allowing topologies with more than one core to run simultaneously.

This patch makes the following changes.

1) Adds and passes a topology testbench context to all APIs instead of
   relying on some globals.

2) Splits the testbench up into small functions that have a single purpose.

3) Creates a thread for each pipeline which in turn share a virtual core.

4) Adds the command line options to enable testing different cores and
   pipelines.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",117,38,0
"thesofproject/sof","a86cb76eb87f61653fce980adc1fbf070940918c","plbossart","2020-02-20 22:04:15","false","src: align prototype arguments

Fix cppcheck warning:

[src/include/sof/audio/src/src.h:118] -> [src/audio/src/src.c:96]:
(style, inconclusive) Function 'src_buffer_lengths' argument 1 names
different: declaration 'p' definition 'a'.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",80,21,0
"thesofproject/sof","c5c48fb1dc22ac2003078519cac69e1088a1d436","lrgirdwo","2020-01-29 13:36:24","false","ipc: Add support for simple IPC polling

Add support for a simple IPC polling API that will allow clients to
poll IPC messages and status. This is runtime mutually exclusive to
the default IPC IRQ mode.

IPC polling mode is only intended for certain use case where simplicity
or reduced footprint are required like GDB stub and bootloader stub users.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",77,20,0
"thesofproject/sof","905be3ac65f7f70be68a5a8b39fe594e20445779","lgirdwood","2018-06-27 12:09:29","true","Merge pull request #7 from singalsu/topic/add_src_tests_proposal_v1

Topic/add src tests proposal v1",6,1,0
"thesofproject/sof","6f238763fadb565d175b3fa15e5dfeb0f8a77f9c","lyakh","2019-04-30 09:22:57","false","interrupt: stop using SOF_IRQ_CPU()

The only two uses of SOF_IRQ_CPU() are currently in irq_mask() and
irq_unmask() on cAVS. However, those functions are always called
after interrupt_get_parent(), which makes sure, that the CPU, encoded
into the IRQ is the same as the current one. Therefore we can also
just use the current CPU in irq_mask() and irq_unmask().

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",46,11,0
"thesofproject/sof","453d741f8a685840df8a49971c324e56912bc0b9","lyakh","2023-01-25 11:57:30","false","cadence: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register cadence with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","d832aaa0455ac8c89b70354583868bc6172df235","lyakh","2023-04-14 15:45:01","false","host: (cosmetic) make a function static and move comments

host_dma_cb() should be static. Also move function description
comments to exported functions instead of their static wrappers.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",50,58,1
"thesofproject/sof","fad27f13d17d245b2fe866df12e5ff9bcb6f07d5","lyakh","2021-04-30 13:20:11","false","zephyr: remove LOG_* API left-over

Remove a log-module declaration to eliminate unused static
variables until we return to using the LOH_* Zephyr API.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",82,35,0
"thesofproject/sof","6adf9acbad7c873b9215581a1a248fda65d6b118","marc-hb","2022-10-10 17:48:21","false",".github/sparse: add MTL

Add the wrong compiler currently expected by the Zephyr build system,
very easy one-line change later, get sparse results for MTL NOW!

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",98,52,1
"thesofproject/sof","fa5cc118b5678e7bf643f15d7fb757352c26c04c","marc-hb","2021-05-21 18:22:06","false","fuzzer: add deprecation README.md

As discussed in https://github.com/thesofproject/sof/pull/4132

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",84,36,0
"thesofproject/sof","a5899812b7f5dbde42f6145abe69e22296c83ffb","marc-hb","2021-03-31 17:38:34","false","version.cmake: don't trust CI to record time and versions and log ourselves

In an ideal world, every CI engine records and shares the most important
CI information:
- current date and time in a well identified timezone
- git version of the pull request
- git version of the moving branch the PR is being merged with

In the real world we have multiple CI solutions and they unfortunately
cannot not all be trusted to perform their most basic job
correctly. Fortunately, they all make at least build logs available so
these very few lines of code adding very few lines of output cost near
zero extra build time and solve the problem once for all. I feel stupid
I didn't do this sooner, this would have saved me hours and hours in
vain requests and discussions and in trying to puzzle that information
together.

Sample output:

-- Preparing Xtensa toolchain
version.cmake starting SOF build at 2021-03-31T18:09:46Z UTC
Building git commit with parent(s):
150fd1e4c968 4249bdb1b305 [other parent if merge] (HEAD -> main) cmake: ...
-- GIT_TAG / GIT_LOG_HASH : v1.7-rc1-174-g150fd1e4c968-dirty / 150fd1e4c968

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",79,34,0
"thesofproject/sof","94f93c21dc0a90808ed40cfc4f34549952ac19ac","marc-hb","2022-10-25 00:31:13","false","xtensa-build-zephyr.py: indent new install_platform() function

Pure whitespace change.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",96,53,1
"thesofproject/sof","e168513f18427988916fcaafac4fc6568beddd95","marc-hb","2021-09-21 18:35:04","false",".github: testbench: don't use docker to build the testbench

Because it's not needed.

Also add a comment explaining why it's still needed to build topologies
so we can remove it some day and test much faster.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",117,40,0
"thesofproject/sof","0061953a595b18c12a5962edced12d9ac9ac1ce2","marc-hb","2023-09-26 17:27:37","false",".github/sparse-zephyr: add -DCONFIG_MINIMAL_LIBC to avoid picolibc

Add a sparse-specific workaround for the incompatibility with
picolibc (the new Zephyr default)
https://github.com/zephyrproject-rtos/zephyr/issues/63003

Also fix comment in commit 2a9473a17be4 (""app/prj.conf: disable PICOLIBC
with CONFIG_MINIMAL_LIBC=y""): we don't need to disable PICOLIBC
_everywhere_; we only need to disable it when using sparse.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",19,64,1
"thesofproject/sof","5374da8c8917e5b24fac48bde44c26772ca5409f","aiChaoSONG","2021-07-09 05:43:00","false","topology2: Add cavs nocodec topology

Only a playback pipeline and a capture pipeline
on SSP0 are added.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",86,37,0
"thesofproject/sof","9cc6454df6d27b84d3f20ccd8cec7f71b21b747a","ranj063","2023-05-31 16:06:57","false","module_adapter: Extend the module interface for endpoint devices

Introduce a new struct module_endpoint_ops which contains all the ops
that are relevant for endpoint devices (host copier and DAI copier) and
add a new field for setting the endpoint_ops.

These will be needed when the copier component is converted to use the
module adapter interface.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",48,60,1
"thesofproject/sof","5949148b94309b50706b10d81e58f2cdbaa0c8cc","abonislawski","2019-04-03 13:47:36","false","coredump-reader: add info to notice user about non-critical warning

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",51,10,0
"thesofproject/sof","41a16145fc2d436812d893bed320dc008017b056","ranj063","2022-09-28 15:13:12","false","mixer: convert the mixer comp to use the module interface

Convert the mixer component and the mock tests to use the module
interface

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",97,52,1
"thesofproject/sof","1bf52dbe6d259dc4e1a940d013bdcf3d71155727","kakulesza","2018-08-03 09:40:12","false","hda-dma fix: align DGMBS value to 32 bytes

APL/CNL:
If DSP Gateway Minimum Buffer Size (DGMBS) is not aligned to 32 bytes they occur
glitches in output signal (the buffer will be overwritten during work). It can
be observed during playback in following configuration:
- 8Khz 16bits 1 channel
- 24kHz 16bits 1 channel

Signed-off-by: Kamil Kulesza <kamil.kulesza@linux.intel.com>",16,2,0
"thesofproject/sof","de2e08a07a4324af53e7edcf29b39a93ec15d230","bkokoszx","2019-07-19 08:23:04","false","pipeline: refine pipeline_free() function

This change allows us to free components and pipelines
in any order. Added setting component pointer to NULL
after comp_free() invocation. In pipeline_free() there is
a incovation of pipeline_comp_free() only if component
pointer is not NULL.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",50,14,0
"thesofproject/sof","7a11e27bf2a19e9acf643d416fc079f479fd2748","ranj063","2023-10-11 18:30:14","false","topology2: host-gateway-capture: Replace audio_format objects

With input_audio_format/output_audio_format objects in preparation to
deprecate the audio_format class.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",11,64,1
"thesofproject/sof","719cb075f830bafefdf13f714dc2114735739046","ranj063","2023-03-31 19:02:45","false","topology: mixout-gain-dai-copier-playback: Do not set default node_type

It should be set when the pipeline is instantiated based on the DAI
type.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",56,58,1
"thesofproject/sof","e56326ab487ab048bde2a657c0d58ca155a3b4a8","ranj063","2019-02-01 19:23:19","false","topology: cht: fix link id for nocodec DAI

Nocodec machine driver adds all the BE dai links with
ID's linearly incrementing from 0. So the link ID
should match with the SSP dai index.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",59,8,0
"thesofproject/sof","e7fdc763154d6a9340005524774df1e7d5933f7a","lyakh","2022-08-05 14:32:31","false","ipc: improve list handling

Eliminate an unneeded negation in a test and use existing local
variables, instead of re-calculating list pointers. Also use
list_for_item() instead of open-coding it.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",118,50,1
"thesofproject/sof","bd9bd37f3f3d0fbd6fece0c144e48393434079d4","lyakh","2019-09-06 15:09:59","false","pipeline: remove redundant variable initialisations

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",60,15,0
"thesofproject/sof","8dfb2c8f4e993f1563fdb0bc344ad8a83e1aec49","lyakh","2022-12-21 15:38:03","false","mixin-mixout: fix address space mismatch

Fix address space conflicts caused by bf7aa048902c (""mixout: Convert
component to use the module adapter"")

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",93,55,1
"thesofproject/sof","d4a48f0b67dc63bb6eaa8b3c92a0b7f6ce97da8b","tmleman","2023-07-06 06:19:58","false","sof: tlv: pointer to const as arg for tlv_next

Changing argument for tlv_next from regular pointer to pointer to const
value. Function doesn't change value of passed argument.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",31,61,1
"thesofproject/sof","a83a26f9313cdc496b92037fa2dd5cc6c08c3dbc","tmleman","2022-11-11 00:58:49","false","ace: power: add logs in pm_runtime

Adding logs for easier debugging.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",97,53,1
"thesofproject/sof","cd2168cf2be80796074d1f3ba9b847c2baf86bf0","ranj063","2019-03-14 20:15:13","false","topology: pipe-pcm-media fix various typos/errors in comments

fix some typos and copy errors in pipe-pcm-media m4 file.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",69,9,0
"thesofproject/sof","082b6261c9dc54d0e5587a57f67b02d3d973fc8d","tinghan-shen","2022-06-28 04:01:06","false","config: Add mt8188.toml

Add mt8188.toml to support sof-mt8188.ri binary build.

Signed-off-by: Tinghan Shen <tinghan.shen@mediatek.com>",113,49,1
"thesofproject/sof","b8f8c30ea7cdf69501588d5c1ae2f72d01d4ffa9","RanderWang","2021-10-25 03:21:28","false","ipc4: limit pipeline stop & pause only to ipc3 path

Ipc4 path has different pipeline state machine and
we don't need these special operations for state changes.

Signed-off-by: Rander Wang <rander.wang@intel.com>",125,41,1
"thesofproject/sof","ba26eeff9df6a422e57b83f6ffe3a973d99d6250","ranj063","2022-04-14 19:45:13","false","topology2: cavs-nocodec: Add support for MTL nocodec topology

The key difference is the DMIC HW IP version.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",117,46,1
"thesofproject/sof","6bb1ed4b01614ed7b3e5a893249a4ecac710bbbd","ranj063","2023-08-13 01:59:21","false","audio: volume: Fix compilation error when COMP_PEAK_VOL is not selected

CONFIG_PEAK_METER_UPDATE_PERIOD depends on CONFIG_COMP_PEAK_VOL

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",28,62,1
"thesofproject/sof","64b2cb3bc8b9aa73ce6f4bb7eb025038e834925a","ranj063","2022-03-16 16:31:30","false","codec_adapter: no need to init source

Remove init for source. It is not needed anymore.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",108,45,1
"thesofproject/sof","ef43899c580fe6b96dc20ab4ccd521806dcab304","ktrzcinx","2020-05-22 07:11:02","false","trace: Put global trace context entries to separate section

To allow changing trace level of global elements, like
system agent or component driver, than it must be possible
to find corresponding trace context.
It is the first step to allow iterating over the trace context
entries and find what we are looking for. Linker variables
_trace_ctx_start and _trace_ctx_end will be needed to know
this section size in runtime code.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",99,24,0
"thesofproject/sof","4e53f78583da62f822cae592658810617a39fcb3","ktrzcinx","2020-07-01 11:24:03","false","platform: intel: clock: Merge clock change to single function call

It was needed to call two functions and update one global variable
to change clock frequency, what is quite error prone solution.
After merging it to one function, it is easier to keep clock description
synchronized.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",70,25,0
"thesofproject/sof","4b810a8767728aa745f7cb1b57b9938e4f3b3283","bardliao","2023-01-16 13:35:45","false","topology2: cavs-sdw: remove default value of DMIC_DRIVER_VERSION

DMIC_DRIVER_VERSION=3 is already set in mtl.conf. Other platforms
should use the default value in dmic-default.conf

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",55,55,1
"thesofproject/sof","d2f96d46bd61a248215f48d7f7f3bd2fdaccb63c","marcinszkudlinski","2023-08-02 07:30:20","false","sink/src: remove unused data from struct comp_dev

min_sink_bytes and min_source_bytes were not set
nor used

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",29,62,1
"thesofproject/sof","81060d9b887390781afa8282741ef591e098ed82","singalsu","2023-04-21 10:50:18","false","Tools: Tune: Add to DMIC modes generate alsa-utils export

This patch adds export format for header file that alsa-utils
uses. Automatic generation is much more convenient than hand
editing when there is update need.

The patch also contains some cleanup of unused code and small
code improvement. There are no changes to exported coefficients
values.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",53,59,1
"thesofproject/sof","085b68058b32e1de3b1baba756ada6a9cbdf9cdf","singalsu","2018-08-09 14:04:09","false","EQ: Improve example equalizer design scripts

This patch cleans up the scripts and improves the accuracy of speaker
case with more carefully set manual equalizer design parameters.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",19,2,0
"thesofproject/sof","fa0735572b72d1bb6659667a862fcdbe6942fea9","singalsu","2018-10-19 16:27:34","false","EQ Tool: Add calibration data import

This patch adds capability to apply for capture microphone calibration
data (ASCII text lines with Hz, dB values). The calibration data file
name needs to be edited into configuration file mls_rec_config.txt. Such
calibration data is provided by several inexpensive USB measurement
microphones manufacturers.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",31,5,0
"thesofproject/sof","d5ac458f56ac6d16cd42bab8b3b4fbdbeb27a29b","cujomalainey","2018-11-16 02:52:35","false","Update sof-byt-nocodec

Make it clearer that there is no codec as well as update the media graph

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",39,5,0
"thesofproject/sof","2ca0a474bb74f75f6b505416a55c951129352afc","tlauda","2018-08-22 10:03:40","false","alloc: align system objects to dcache line size

Aligns objects allocated on system heap to dcache line size.
One of the reason why it's required is because DMA and DAI
private data is allocated on system heap.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",18,3,0
"thesofproject/sof","be69f41befaed4875e3ef5c3dfe8fdd8a2231e24","iuliana-prodan","2021-10-04 22:07:16","false","drivers: imx: sdma: fix warning

Fix the following warning when building SOF with zephyr:
""warning: format '%x' expects argument of type 'unsigned int',
but argument 3 has type 'long unsigned int'"".

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",122,40,1
"thesofproject/sof","de8b0433715f73612c91e5922a618a7594ff614f","marc-hb","2020-05-22 00:10:58","false","scripts/qemu-check.sh: unhardcode ../sof.git/

Find it with dirname ""$0"" instead. Can also be overridden with
SOF_BUILDS from now on.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",99,24,0
"thesofproject/sof","7e19c42404020064ff46b60a83592a7a8ed33cba","marc-hb","2021-03-23 01:29:45","false",".github: replace HAVE_CONFIG KConfig hack with an override

Should make git describe --dirty clean.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",73,34,0
"thesofproject/sof","4bbdef7c160939e364446ea4edf6efc46e786a48","PayalKshirsagar","2020-03-26 08:38:51","false","src: probe: fix line exceeding 80 characters

Fix checkpatch warning of line over 80 characters.

Signed-off-by: Payal Kshirsagar <payalskshirsagar1234@gmail.com>",63,22,0
"thesofproject/sof","8d89d8223c6c2786f86e40017ee0b566044a0b1c","btian1","2023-05-09 01:43:53","false","ipcgtw: split the ipcgtw_new function

Split the ipcgtw_new() function to add a helper function,
ipcgtw_zephyr_new() in preparation for this to be called from both
a ipcgtw device and copier device.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",53,59,1
"thesofproject/sof","2a70f114bc72af0489dfa1cba9bba87c98d095f8","lrgirdwo","2020-05-05 18:40:20","false","dai: trace: fix description for overrun error.

Overruns are when there is no free space available.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",95,23,0
"thesofproject/sof","539c2b388cc54ef6e7427ea55c6a77d7636bf99b","softwarecki","2023-03-31 11:10:50","false","module: Set of a new functions to parse modules

A structure was created to represent the module, module section and section
informations. Added a set of new functions for parsing a module and reading
its contents.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",56,58,1
"thesofproject/sof","3ffeb8712354ca912505e84326f402a4dff073ea","fuyuntsuo","2021-11-17 07:53:18","false","Host component DMA copy the whole copy_bytes.

Host component stops copying bytes at element's end and resumes
copying the remaining bytes in the next round. This leads to jitter
between components of the same pipeline. Such jitter might cause
buffer overwrite for component which processes block by block.

Triggering extra DMA copy until all the copy_bytes are copied can
eliminate the jitter and hence no more buffer overwrite occurs.

Signed-off-by: fy.tsuo <fy.tsuo@intelli-go.com>",128,41,1
"thesofproject/sof","070e6bfc8289af9c7eb139662d256669ea216686","RanderWang","2018-07-23 06:37:47","false","volume: fix range check for max channels

Fix the check for maximum number of channels to be in the correct range.

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",13,2,0
"thesofproject/sof","8ccfe50ab3d710ce0f4d234bfb8d00345b917aa5","RanderWang","2021-07-19 07:51:20","false","pcm_converter: add ipc4 converter support

Ipc4 pcm converter will check container size and valid sample
size to do format conversion. This patch add general support for
valid sample / container size s16c16 <-> s16c32, s32c32 <-> s16c32
s16c32 <-> s24c32 s24c32 <->s16c32, which are not supported
by sof now.

Signed-off-by: Rander Wang <rander.wang@intel.com>",90,38,0
"thesofproject/sof","76091a9a40873970abc8d8a7ad851b9d69a84458","softwarecki","2022-11-23 10:41:40","false","cavs: dma: Disable sof dma drivers when using zephyrs native drivers

The sof dma drivers use defines of dma attributes which was disabled
when building with zephyrs native drivers. This commit disable
building sof dma drivers on cavs platforms when zephyrs native
drivers are used.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",94,54,1
"thesofproject/sof","f449a22cc7b147f4ab60f28bb20e63b9b4bcba7f","RanderWang","2023-07-07 08:33:34","false","ipc4: zephyr: remove useless member in struct sof for native driver

Struct cascade_root & mn are used by xtos build only so remove them for
zephyr native driver. And these two items are too specific to intel
platforms. Remove these item also save memory.

Signed-off-by: Rander Wang <rander.wang@intel.com>",31,61,1
"thesofproject/sof","a28dde67029cead30d9933b21352287a2243a3a7","balakishorepati","2022-10-14 07:34:55","false","drivers:amd: fix acp clock based on usecases.

Switch between ACLK and internal clock based on
active usecases and clock requirement.

Signed-off-by: Balakishorepati <balaKishore.pati@amd.com>",98,52,1
"thesofproject/sof","5ea5da80dd66a916db092de1bc3e090b0095e4f8","bkokoszx","2019-03-19 09:46:07","false","schedule: ll: refinement low latency queue

I've removed queue per priority in low latency scheduler.
Now there is only one queue for all priorities. Scheduler adds
tasks to queue in descending order based on ther priority.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",65,9,0
"thesofproject/sof","8ceb2df7e9dc5a698a70be1bb026cc8937401e04","ranj063","2022-05-06 16:40:36","false","module_adapter: remove the consume label

Simplify the logic by removing the unnecessary consume label. This will
change the logic to loop through the local output buffers when return is
-ENODATA or -ENOSPC. But since there will be no produced samples, this
loop will do nothing. It is not intended to optimize the performance at
this point and in fact the first few cycles might even take the hit
because of the extra looping. But this will help with clubbling the
handling of output samples simpler in the following patches.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,47,1
"thesofproject/sof","a25a3dc8873b4e09369a25f8093899b9a0651fc9","ranj063","2021-10-27 15:34:35","false","mux: use buffer acquire/release

instead of buffer_lock/unlock which will be deprecated

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",128,41,1
"thesofproject/sof","4c905f5234faf2cb32b0663dfd0b1c494b0a2a93","softwarecki","2023-09-18 13:31:28","false","logger: convert: Simplified printing of a timestamp

The timestamp printing process has been simplified by eliminating the
dynamic creation of the formatting string. All necessary parameters are now
passed directly to the printing function.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",20,64,1
"thesofproject/sof","af136e0325c7cd45c2be456928a7bd6e9d8cda76","ktrzcinx","2020-07-24 11:55:13","false","pcm_converter: Fix chunk size calculation in linear converter

Variable N1, N2, and chunk are compared to each other, so must be
in the same format - samples, because of possible different sample
size in source and sink buffer.
Use bitshift operations instead of division, to optimize source code.
It's possible because sample size must be power of two.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",78,26,0
"thesofproject/sof","353244d146dc8fc4348858e7eccc54a885f8af30","singalsu","2022-03-30 15:56:46","false","Audio: SRC: Add IPC4 full conversions matrix coefficients

This patch contains the new coefficients. All were created with
a script in tools/tune/src.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",112,46,1
"thesofproject/sof","cbf5aa6fbc63ef6595c4ca7a2e665d1c73c346ca","RanderWang","2021-09-28 07:33:34","false","ipc4: fix ipc4 build failed

Ipc4 checks manifest in fw binary, so it needs to
use header files in rimage

Signed-off-by: Rander Wang <rander.wang@intel.com>",121,40,0
"thesofproject/sof","44c72a4f258d02044d1205ec227356da6c737492","cujomalainey","2020-10-14 22:01:48","false","library: refactor init sequence

The fuzzer is makings its way into a lot places where we assume hw
configs exist. Therefore a refactor is needed make it easy to fill in
the missing configs.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",72,28,0
"thesofproject/sof","f52350ef3a52b54b3edca08c6c99d32ec44d8d48","lrgirdwo","2020-07-23 13:34:04","false","docker: update toolchains to GCC 9.3 and GDB 8.3

Use the later toolchains for docker.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",77,26,0
"thesofproject/sof","a4b7680adff6cd00f70fddaa7c44737dd6bfe841","tlauda","2020-05-27 09:37:23","false","ssp: move ssp driver out of the cavs specific directory

Shared ssp driver implementation between all possible Intel
platforms and not only cAVS. Currently depends only on cAVS,
since all other supported platforms don't support it.
Implementations for Baytrail and Haswell stay in their respective
platform directiories. It's built based on CONFIG_INTEL_SSP.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",95,24,0
"thesofproject/sof","318d5cb71c09f2e3c73d5bc5a6e159530f826e01","lyakh","2020-03-10 11:34:14","false","topology: add a ""core"" parameter to the W_PCM_PLAYBACK() macro

This places all SectionWidget.PCM*P topology widgets, created by
the W_PCM_PLAYBACK macro on the same core, on which the respective
pipeline is scheduled.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",85,21,0
"thesofproject/sof","31599ad0973f707f158413ef6533a998913dc3cd","bkokoszx","2018-07-13 13:11:52","false","Added comp_set_state function UT's

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",13,1,0
"thesofproject/sof","d85d853c6cf722b13c9ce1c837a29bb1ea49789e","jairaj-arava","2023-02-17 23:47:17","false","topology2: add second capture stream for DMIC0 for MTL topology

This patch adds second capture stream by means of copier module

Signed-off-by: jairaj-arava <jairaj.arava@intel.com>",55,56,1
"thesofproject/sof","6ec4b611ef30358a4aec80eaedbb4d8e97f33951","kv2019i","2023-09-01 09:14:51","false","versions.json: version to 2.7.99

With stable-v2.7 branch create, set the mainline version
to 2.7.99 to prepare for SOF v2.8 development.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",24,63,1
"thesofproject/sof","d337c0a9bab078f3d1c6e3762b68634e14b36715","kv2019i","2021-05-11 15:41:03","false","kconfig: add a namespace prefix to top-level xtensa specific options

The top-level Kconfig has a number of platform and architecture specific
options. For clarity, rename all Xtensa specific options with ""XT_""
prefix. Impacted options:

config WAITI_DELAY
config BOOT_LOADER
config HAVE_RESET_VECTOR_ROM
config IRQ_MAP
config INTERRUPT_LEVEL_[12345]

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",85,35,0
"thesofproject/sof","0205c95a3d111f8a65204af71cafdb4139faf60d","bkokoszx","2019-12-03 13:33:58","false","mux: fetch params from sink buffer

Fetches channels and frame_fmt from sink buffer (sink
buffer params are set in pipeline_set_params()
before mux_params()).

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",68,18,0
"thesofproject/sof","e29572bb2d00b00549af9dfd447d0c03e9cd0384","kv2019i","2022-08-29 19:12:10","false","github/zephyr.yml: use Zephyr docker-image v0.24.2

Recommendation from Zephyr infrastructure is to use a specific
version of the docker-image. This time we need this to upgrade
to SDK 0.15, which is a requirement to use latest main of
Zephyr. The current ""latest"" tag does not have 0.15 SDK.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",112,51,1
"thesofproject/sof","c66d5b59ead7dec07e5af750aeba87eca5f350e3","bkokoszx","2020-11-05 09:13:39","false","apl: power_down: move IPC_HOST_BASE literal into register

Before switching off memory, IPC_HOST_BASE literal value should
be moved to register, in order to avoid accessing to disabled
memory.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",75,29,0
"thesofproject/sof","b95d995bd2fb1f4f2b13575f11e5a42e18ad110e","kv2019i","2022-01-03 19:17:08","false","xtensa-build-zephyr: add -v option for verbose build

Align with xtensa-build-all.sh and add a ""-v"" option to toggle
verbose build log (""west -v build"").

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",115,43,1
"thesofproject/sof","8fb011df6c95f8e9adcda383442060e3cede1203","iganakov","2023-06-07 14:00:11","false","copier: fix attenuation stream frames calculation

When calculating number of frames to be attenuated in HOST copier
source stream frame bytes should be used instead of sink frame bytes.

E.g. in case of 24/24 bit to 24/32 bit PCM conversion using sink
container size will reduce frames number by 1/4 which will lead to
multiple glitches.

Also attenuation has to be applied in HOST copier in playback scenario
only, thus remove from do_conversion_copy()

Signed-off-by: Ievgen Ganakov <ievgen.ganakov@intel.com>",46,60,1
"thesofproject/sof","99f7ad112af9f6656c3d0886de385942d4405e05","ktrzcinx","2020-06-09 15:08:37","false","ipc: pipe: Fix pipe id value in log message

`pipe` should refer to `pipeline_id`, using `comp_id` is misleading.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",73,24,0
"thesofproject/sof","8ce262312f1e16110be26492777b9e83930f6007","ktrzcinx","2020-01-17 09:23:24","false","mixer: Mark source buffer as const in processing functions

Const keyword is added to explicitly indicate that nothing in given
source buffer can be changed in processing functions - read pointers also.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",79,19,0
"thesofproject/sof","ab0c9e046d5d6519272d892a0650228d3b776580","ktrzcinx","2020-03-31 10:42:20","false","DMA: Fix fw panic after release on SdW platforms

Bug was caused because sdw controller is stopped first,
then DSP is stopped, so DW FIFO will never be consumed,
so timeout occurs, and watch dog will reset hardware.
Moreover polling for FIFO empty in duch a place should have positive
result only when pause take shorten than 1ms what is not
reasonable value.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",66,22,0
"thesofproject/sof","4de66271ecbdefeee86ece09643e76fa8091acba","cujomalainey","2021-09-14 23:39:14","false","ipc: check type before freeing

When freeing we currently implicitly are trusting the ID to match the
type specified in the message. From a security standpoint this is wrong,
never trust the other side. This is the likely cause of how the fuzzer
is leaking memory in pipelines since they have additional allocations
that are not freed when they are treated as a buffer or a component.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",117,39,0
"thesofproject/sof","806af330d0fb34e91b58b4230dabf350dd6c8f43","DianaGabriela27","2019-03-06 12:52:19","false","rimage: elf: Break down multiple assignment

Multiple assignment should be avoided.

Signed-off-by: Diana Ungureanu <diana-gabriela.ungureanu@nxp.com>",66,9,0
"thesofproject/sof","532df2b7e7754af37182987a562ee170cbdf12a0","plbossart","2021-02-12 16:09:15","false","topology: fix semi-abandoned Chrome topologies

we have a set of topologies that don't seem aligned with the
mainstream ones.

All these topologies should be given the boot if they are not used.

FIXME: The case of tools/topology/sof-cml-rt5682-kwd.m4 is rather
strange, M4 seems to go in some sort of infinite recursion if
'DMIC16k' is defined.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",74,32,0
"thesofproject/sof","27a3d7c2af2befe97e0a1e08497c3619ee0d0ee4","lrgirdwo","2022-09-02 18:15:43","false","header: rtos: use rtos specific version of cache.h

Code can now include <rtos/cache.h> which can wrap onto rtos cache
APIs. Will wrap onto Zephyr generic cache API when ready.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",118,51,1
"thesofproject/sof","c8bc4b2c67cb51ee76f68c38c5571f94687f1b8c","dbaluta","2019-10-02 12:09:20","false","topology: Add topology for i.MX8QXP with cs42888 codec

This pipeline adds support for S24_LE, 2 channels, 48KHz playback.

cs42888 codec is connected to i.MX8QXP board on ESAI0 interface
as follows:
i.MX8QXP CPU board <--> i.MX8 base board <-> Audio I/O card
(setup similar with i.MX8QM, so this topology can be used as it is
on i.MX8QM in the future).

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",66,16,0
"thesofproject/sof","c4285a6a8cd43fe4db1bd5d64a7e143454484845","dbaluta","2020-04-16 18:58:12","false","drivers: imx: sdma: Remove INT and CONT from chan0 config

For running channel0 we only need 1 BD so remove BD_CONT flag.
Also, interacting with channel0 is done through polling so remove
BD_INT flag.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",82,22,0
"thesofproject/sof","d2a75ad038d92857f5fd783c7d805a3d783baa3b","udaymb","2020-07-03 15:32:36","false","topology: jsl-rt1015: PLL input at 50fs is no longer supported
The new recommended settings at 48Khz rate are:

PLL input       SSP bclk
------------------------
64fs            3.073Mhz
100fs           4.8Mhz

Modifying topology to 64fs",71,25,0
"thesofproject/sof","5f1b4ccc18fa516fd7197c5a76a8a8410b6113e8","plbossart","2021-09-28 17:10:59","false","ipc4: dai: fix NULL pointer dereference in error message

cppcheck warning:

Checking src/ipc/ipc4/dai.c ...
src/ipc/ipc4/dai.c:73:5: warning: Either the condition '!dai' is
redundant or there is possible null pointer dereference:
dai. [nullPointerRedundantCheck]
    dai->dai_index, dai->type);
    ^

src/ipc/ipc4/dai.c:71:6: note: Assuming that condition '!dai' is not redundant
 if (!dai) {
     ^
src/ipc/ipc4/dai.c:73:5: note: Null pointer dereference
    dai->dai_index, dai->type);
    ^

simplify error message to avoid dereferences.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",122,40,0
"thesofproject/sof","6318db56ab5b2144ae7cf5f60e0e119683dbafe3","xiulipan","2019-12-10 09:24:23","false","platform: bdw: fix bdw DMA timer

BDW DMAC0 can not be used with scheduler and no-one used it. The DMA
chan is not initiated and may cause DSP hang when read null point.
Skip the DMAC0 to avoid such issue.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>
Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",72,18,0
"thesofproject/sof","eb6e9a6a2ce930e299fce1a75ae41a0320f99e98","xiulipan","2018-09-26 03:30:25","false","scripts: add -l option for host-build-all

Enable host lib install into local folder.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",37,4,0
"thesofproject/sof","c0c720a6cb6a0c8c09c2d97d780a13f668ef9642","xiulipan","2018-09-03 07:54:32","false","dma-trace: workaround reschedule work fail

If reschedule work timeout is too small. The reschedule will fail.
Workaround this issue by increace the reschedule timeout.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",30,3,0
"thesofproject/sof","d87b81e670a2257ee50964cf2d32ea6a0ccbbc9f","xiulipan","2018-07-04 08:36:36","false","ipc: fix list uninit in handler

Need not to skip phost if we did not have phost and move init before
skip.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",7,1,0
"thesofproject/sof","4efa6ed73f98586a01760fd06a112c24117b0b3d","abonislawski","2020-02-05 09:10:23","false","arch: add missing ATOMCTL register for slave cores

Some instructions like s32c1i depends on ATOMCTL register settings
and it should be set for slave cores to works properly and not hang
on these instuctions

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",77,20,0
"thesofproject/sof","48d2a1c551d7b3c8f76d44f3c04dd59a37ff6a8f","ranj063","2018-06-14 17:45:57","false","dmic: fix size while copying DMIC params

The size argument for memcpy should be sizeof struct
sof_ipc_dai_dmic_params.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",1,0,0
"thesofproject/sof","e8237f3e0b0c106983b3caa1aa4af417f08080a2","ranj063","2023-02-15 08:49:29","false","ipc: ipc-common: Fix the logic for setting the pipeline source/sink component

It's not enough to look at the first component in the module's buffer
list. Check all of them to make sure that they belong to different
pipelines.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",56,56,1
"thesofproject/sof","44705dfc09729672031c2db667e02c34831b81be","abonislawski","2019-03-25 12:57:21","false","debugability: update coredump reader

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",61,10,0
"thesofproject/sof","cb5d769a84d51f225a82be00f9716c3333b42669","ranj063","2022-02-04 04:55:01","false","topology2: copier: remove format for copier widget objects

It is never used.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",106,44,1
"thesofproject/sof","f9a26e7ea2489c5802c49b6e1f61ec4b1992cf6a","ranj063","2022-04-27 23:03:06","false","module_adapter: delete module_adapter.h

And move the MAX_BLOB_SIZE macro to generic.h

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",114,47,1
"thesofproject/sof","ac7f8b0ae663b7cb5fbaf5b39e92a9072bc995ed","joechengxperi","2022-08-17 10:13:32","false","module_adapter:dts: revert the change ""return zero when param is invalid""

This reverts commit d5f8cb9eab49a22d6fe17fc8f12c932d36d75022.

This commit is not required if the setup and runtime configs are unified

and the payload size is set to right value.

Signed-off-by: Joe.Cheng <joe.cheng@xperi.com>",113,51,1
"thesofproject/sof","fcca1c3b7c328b772e6ee41c54e663175a347828","fredoh9","2022-07-06 18:31:01","false","topology2: cavs: re-order cavs hda toplogies

Re-ordering CNL TGL to MTL and DMIC 2ch to 4ch.
No functionality change.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",110,49,1
"thesofproject/sof","edf85fffb64766534b1993bf5e82273f762396a2","tobonex","2023-09-15 18:09:12","false","tdfb: remove buffer_acquire from tdfb.c

remove buffer ops from tdfb.c

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","baa791f6e10b96ec2f31d3ec39a10ecba31c35ef","singalsu","2018-09-06 10:00:17","false","Topology: Add Equalizer

This patch adds EQ, bytecontrol, and EQ+volume pipeline m4 macros and an
enhanced topology with EQ for UP2 + HiFiberry. There is not yet FIR/IIR
type select. The EQ type is currently hardcoded into kernel.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Jaska Uimonen <jaska.uimonen@intel.com>",31,3,0
"thesofproject/sof","424da2cd9d436ed42a8323b0200d0401e6be7f84","marc-hb","2022-12-15 02:33:35","false","zephyr/docker: pass http[s]_proxy variables to the container

Support downloads from within the container.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",95,54,1
"thesofproject/sof","1c4d14a5fb486c08f4cec6421ab878627cc1049d","marc-hb","2020-06-27 05:24:03","false","qemu-check.sh: restore error messages when test fails

Fixes 428804e1c (""scripts/qemu-check.sh: add set -e"") which failed to
consider the case of an empty $IPC_REG or $IPC_MSG.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",70,25,0
"thesofproject/sof","78667c028d93c22edea87d5ae1cee2ea2137e1d3","marc-hb","2022-03-10 18:40:33","false","xtensa-build-zephyr.py: do not modify submodules after building!

The older shell script had a deprecated convenience hack to clone
submodules before building rimage but _only if submodules were missing_!

While trying to preserve that, the new script changed that to an
unconditional git submodule update that can be destructive when
submodules are already present.

Generally speaking, using git and building must always be two very
distinct activities. No one wants the source code to change quietly from
one build to the next.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",112,45,1
"thesofproject/sof","bc39c0e91284f9b99f729bab2770f609948aa8bd","marc-hb","2022-04-30 01:19:01","false","Make Zephyr build compatible with optional assert() with __unused

For some legacy reason(s), SOF assert() is not optional. This is unlike
any other assert() anywhere else. This hasn't been a problem yet because
until now SOF assert() has been mapped to a non-optional and limited
Zephyr k_oops()

This commit makes it possible to temporarily or permanently switch the
Zephyr build to Zephyr's __ASSERT(expr, #expr) macro which logs the
asserted expression. This commit does NOT make such a switch.

Note this commit is not enough to make assert() optional in the XTOS
build.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",115,47,1
"thesofproject/sof","df440ba0bab04c0bb339c212b68f8d1ac0b22fa1","marc-hb","2023-03-22 00:09:58","false","sof/ipc/common.h: add missing #include <ipc/stream.h>

Also move system headers stdbool.h and stdint.h last to avoid them being
accidentally included.

Fixes commit b91e253f65cf2f (""include: sof: debug: Split panic.h into
Zephyr and XTOS-specific headers"") that broke `scripts/fuzz.sh` because
it stopped `sof/ipc/common.h` from accidentally getting `ipc/stream.h`
through `panic.h`.

Fixes:

```
src/include/sof/ipc/common.h:126:15: warning: declaration of
 'struct sof_ipc_host_buffer' will not be visible outside of
 this function [-Wvisibility]
                            struct sof_ipc_host_buffer *ring,
                                   ^
```

```
sof/src/ipc/ipc3/host-page-table.c:151:5: error: conflicting types
for 'ipc_process_host_buffer'
int ipc_process_host_buffer(struct ipc *ipc,
    ^

sof/zephyr/../src/include/sof/ipc/common.h:125:5: note: previous
declaration is here:
int ipc_process_host_buffer(struct ipc *ipc,
```

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",57,58,1
"thesofproject/sof","a51a64665b59eeed9bab787cac3564b0b32765fc","marc-hb","2021-12-15 00:12:01","false","Replace perf_*_trace() macros with functions.

The fewer macros, the better.

Commit 17582796230e (""perf: make trace part of perf counting
configurable"") provided no specific rationale for using macros. It did
not explain why it passed some ignored arguments either - renamed
accordingly.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",113,42,1
"thesofproject/sof","fca84b8773ee4a8e6308a0842be6367be560453e","marc-hb","2023-05-10 18:54:47","false",".github/zephyr: align hal_xtensa when compiling with Zephyr main branch

We import hal_xtensa indirectly through zephyr/west.yml.

When overriding the Zephyr revision in sof/west.yml to test the Zephyr
main branch ""zmain"", we must also update the version of hal_xtensa
specified in zephyr/west.yml. Stop doing a manual, single repo git fetch
and use a submanifest to perform this correctly. This is exactly why
submanifests/ were added in the first place.

These fixes the imx8m compilation error spotted and discussed
in (unrelated) #7579 following the IMX rename in
https://github.com/zephyrproject-rtos/zephyr/pull/57084 and
https://github.com/zephyrproject-rtos/zephyr/pull/57795

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",54,59,1
"thesofproject/sof","7d37ca6fa180726b3520fe05a0d8be00fe6de86a","marc-hb","2021-05-28 18:22:49","false","xtensa-build-zephyr.sh: use west long options

Zero functional change.

Makes the code and the build logs clearer, especially for SOF people new
to west. Short options are for saving repetitive typing; no reason to
use them in a script.

Also show the real /bin/pwd which can help when west gets lost in
complex symbolic link situations.
https://github.com/zephyrproject-rtos/west/issues/419

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",83,36,0
"thesofproject/sof","7e2f4e3b9c373fc621cd4bf00787ccb270925832","mengdonglin","2018-11-21 00:28:48","false","topology: Remove sof-apl-hdmi.m4

sof-apl-hdmi.m4 is no longer needed.

It was used in early stage of HDA enablement as the 1st reference.
Now HDA settings are added to UP2/GLK/WHL platform m4 files.

Signed-off-by: Mengdong Lin <mengdong.lin@linux.intel.com>",39,6,0
"thesofproject/sof","37d97d4357b34ba2f5f59aa575740d27f2a031c7","fuyuntsuo","2021-04-09 03:09:07","false","audio: igo_nr: Added intelliGo noise reduction wrapper code and topology

This commit consists of files for adding IGO_NR component in arbitrary
topology. The proprietary static library shall be released by intelliGo
via private channel upon request.

Signed-off-by: fy.tsuo <fy.tsuo@intelli-go.com>",79,34,0
"thesofproject/sof","05751b80e73e1b469c534c2e8e9e3e8ff787e99e","andrula-song","2023-03-03 08:52:28","false","Audio: Fix the ramp gain setting.

Fix the ramp gain setting bug to start ramp from the previous gain
instead of zero.

Signed-off-by: Andrula Song <andrula.song@intel.com>",59,57,1
"thesofproject/sof","a6de3b1602b32a7108212954d01744aa68c1fe97","yongzhi1","2023-07-17 14:47:49","false","topology2: cavs-rt5682: Change ECHO_REF_PCM_ID to 29 to avoid conflict

Fix tplgtool2.py caught error with sof-mtl-max98357a-rt5682.tplg

ERROR: Multiple pcm id=27: 2 (['EchoRef', 'DMIC0 RTC AEC'])

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",32,62,1
"thesofproject/sof","8174738b53cb45622087ea596c11ce1386bc4139","xiulipan","2018-12-03 06:36:50","false","scripts: add rom build option

Enable build rom for the target. Could only use with GCC compiler.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",39,6,0
"thesofproject/sof","fbd3452b396547fac0cb19e1f0f35144e999f6fa","xiulipan","2018-09-20 10:59:36","false","alloc: fix wrong size of memset with DEBUG_BLOCK_FREE

memset size is wrong, fix it.
also use block start as base to avoid more problem when freed
some wrong ptr.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",35,4,0
"thesofproject/sof","025c64e0626f8dd9fb15748c118a017b2f80e0b2","singalsu","2022-05-20 15:34:25","false","Audio: Add audio feature extractor component MFCC

This patch adds the SOF component for Mel Frequency Cepstral
Coefficients (MFCC) streaming to sink from source PCM stream.
The MFCC audio features are commonly used for neural network
based speech recognition services.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",117,47,1
"thesofproject/sof","b9a14709bf584fdc10a8f0523e1454a2940febfb","singalsu","2021-01-29 17:31:54","false","Tools: Tune: Add option for delay-and-sum to beamformer design

The delay-and-sum beamformer has highest white noise gain (WNG)
performance. It's good id suppressing microphone self noise. The
beam is steered with pure delay adjust in the all-pass filter
bank. Default type is still super directive. Use DSB or SDB
as beamformer type to select.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",67,32,0
"thesofproject/sof","c776d089d3a89937a13329e346296088c9f645aa","tlauda","2019-05-01 09:05:16","false","apollolake: update xtensa headers

Updates xtensa headers to match real apollolake core
capabilities.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",47,11,0
"thesofproject/sof","181658671f8a60d011bf9de9a5b4a06c2800c096","tlauda","2019-03-14 09:26:32","false","dai: dw-dma: adjust flow to more scheduler flexible

Adjusts dai and dw-dma configuration flows to be more
scheduler flexible and not only working for DMA IRQ
based schedulers. Note: due to the nature of timer
scheduling we need to have restriction for dw-dma
to support minimum 3 linked list items. Without
such restriction we may not be able to clear done
bits on time.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",68,9,0
"thesofproject/sof","3b3cc2fe4a0a8124df1ad2baab43315eb708065f","tlauda","2020-02-03 14:21:45","false","idc: implement message status retrieval

Implements new IDC functionality to report execution status
of last processed message through payload buffer. Core which
waits for IDC to be finished can retrieve the status from
the beginning of the payload. Message status can only be
obtained in IDC blocking mode.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",76,20,0
"thesofproject/sof","d9aecd8498244e17a4ab37f46dcfb3ee29f81c85","tlauda","2019-10-10 08:34:42","false","ll_schedule_domain: describe structure

Describes ll_schedule_domain structure.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",63,16,0
"thesofproject/sof","8137aef7bd0ba654cd909b578f275399913e1c3b","tlauda","2019-09-23 07:57:10","false","agent: add error tracing macro

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,16,0
"thesofproject/sof","33048b7f72c02c12d1869c6aeddadea6a4938f19","cujomalainey","2019-03-13 20:15:46","false","EQ: GUI: Load dsp.ini from ChromeOS

Add function that parses dsp.ini files into the GUI format and then into
SOF format.

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",68,9,0
"thesofproject/sof","e4f7e518e848084e5c1971a1398c08ed56b0da50","marcinszkudlinski","2022-11-30 07:57:38","false","Update zephyr revision

Updated zephyr to the latest version with
the necessary patches
a requried kconfig option is added because of
https://github.com/zephyrproject-rtos/zephyr/pull/51738

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",101,54,1
"thesofproject/sof","4ac3e3ff448caf9c771653c1c4540b6f861fc02d","marc-hb","2022-12-16 00:08:01","false","xtensa-build-zephyr.py: don't leave the install of an old build behind

In theory a failure from this script should immediately stop the show
and no one should then use the staging directory.

In practice we cannot make sure, especially not with shell scripts. So
make sure no previous build of a requested platform is left behind.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",91,54,1
"thesofproject/sof","02a7b298846cfbc13c50ff8339efaa587c3f9c9d","johnylin76","2022-10-27 10:09:04","false","configs: fix override tigerlake_chrome_* configs

Fix config name from COMP_CODEC_ADAPTER to COMP_MODULE_ADAPTER.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",94,53,1
"thesofproject/sof","c80037bbab880d7cfb63f3e411ff3f3fc61c2962","jajanusz","2019-01-30 05:47:11","false","rimage: elf.h: use stdint",56,8,0
"thesofproject/sof","d8c2a42d80b9bdda297e5744e86a5f628b971a3a","btian1","2022-12-14 08:07:31","false","sof debug and trace: change sof log level for some modules

Change some log level from info to dbg, those changed place are
not reporting errors, just information, so no risk and can be change
back when debugging.

From performance perspective, before and after:
Before:[11.86] <inf> ll_schedule: ll timer avg 2329, max 2887, overruns 0
after: [11.52] <inf> ll_schedule: ll timer avg 2226, max 2789, overruns 0

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",96,54,1
"thesofproject/sof","046e763974fe1914e2574af3a5bf1efff318d30e","xiulipan","2018-08-09 09:03:44","false","ci: travis: enable travis ci for SOFT

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",18,2,0
"thesofproject/sof","c563e6e633267b45e16308ce78828830c80b60f9","softwarecki","2022-06-30 14:18:50","false","dai: Introduce total_data_processed counter in dai_data

The counting of processed data has been moved from a component
device structure to the components private data. Added a new
function for reading it.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",110,49,1
"thesofproject/sof","89b4df8c6c79749b64e90598b1be93b4be3cede7","keyonjie","2019-06-27 08:58:10","false","sof-ctl: add support to dump kcontrol in binary mode

When specified with '-b', let's dump out kcontrol value in 16bit hex
format.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",46,13,0
"thesofproject/sof","e4cb046a2ccab57acf9f6018e1b718f18b187a3c","keyonjie","2019-05-09 10:23:29","false","Topology: kwd: change to use correct buffer caps

We don't need to use host/dai caps for detector buffer and selector
buffer, here correct it.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",58,11,0
"thesofproject/sof","50b7b3bc066c382761f8495a37ba5309872c3f4a","keyonjie","2020-11-10 01:10:52","false","tools/README: update comment for testbench building

The host-build-all.sh is deprecated, update to the recommended
'rebuild-testbench.sh'.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",73,29,0
"thesofproject/sof","d8739fb355df22e357642e7a58fcbb785ca7c69c","keyonjie","2020-07-20 08:24:16","false","platform: kconfig: only enable CAVS_USE_LPRO_IN_WAITI selection when
LPRO_ONLY is not set

When LPRO_ONLY is set, the item CAVS_USE_LPRO_IN_WAITI is not
configurable, and no clock switching is possible. Change to enable
CAVS_USE_LPRO_IN_WAITI selection only when LPRO_ONLY is not set.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",79,26,0
"thesofproject/sof","0b56f064c2a8a419af1c746e461e395aa1cd1588","slawblauciak","2019-03-27 13:29:55","false","kpb: rename comp_data struct to avoid conflicts

The kpb's comp_data struct is located in a public header,
which will be used by different components.
As such, it would cause conflicting definitions.

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",57,10,0
"thesofproject/sof","3020d4aba42c599b8bc7bf04b90c5fc9dfa4739a","dabekjakub","2019-04-19 13:44:11","false","memory: changed memcpy_s error handling

Failing to copy will result in FW panic

Signed-off-by: Jakub Dabek <jakub.dabek@intel.com>",48,10,0
"thesofproject/sof","8e1249c2938b48fefd22f2d95e83996b4f8e78ce","naveen-manohar","2018-12-14 17:38:55","false","topology: Add GLK topology support for chromebook rt5682+max98357a variant

Add new PCMs and backends for GLK chromebook with codecs rt5682+max98357a.

Signed-off-by: Naveen Manohar <naveen.m@intel.com>",49,6,0
"thesofproject/sof","c9a4c87d7a8a749b9ca37ef7df7bb6a732c08199","lgirdwood","2018-10-24 13:03:04","true","Merge pull request #114 from plbossart/fix/ipc-alignment

topology: renumber SSP tokens - ABI CHANGE",27,5,0
"thesofproject/sof","8397684e855f182f8f36342c96cb07c31d38906a","mrajwa","2019-04-09 21:25:11","false","memory: fix wrong calculation of remaining free blocks

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>

This patch corrects the calculation of free blocks.
Now, once we allocate all free space, the allocator
will go beyond available space.",48,10,0
"thesofproject/sof","c5a5bf1793d0b26f2c50a01e8f8245a751d94cb0","rfredzim","2022-04-22 13:05:26","false","ipc: fix ipc_msg_init call to use preinitialized structure fields

ipc_msg_init should use the already initialized size field in
rhdr structure instead using the sizeof.

Signed-off-by: Rafal Redzimski <rafal.f.redzimski@intel.com>",114,47,1
"thesofproject/sof","7680a7b0dcea3967f3dcbc88edc993cc445f701c","jajanusz","2019-01-15 09:46:20","false","cmake: add testbench host build

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",54,7,0
"thesofproject/sof","051bfdd04c84c2876a31c98be886e3bdbe269b7d","jajanusz","2018-11-22 14:36:22","false","github: add jajanusz as owner of .ac .am files

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",39,6,0
"thesofproject/sof","6a9bc3288ae7573a6d3c3d14b844ddc8e3a8303b","jajanusz","2019-04-24 12:45:06","false","module: fix include needed for DECLARE_MODULE

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",52,11,0
"thesofproject/sof","d72d43a344b1e06f95af9e5113ce00caf57dca24","fkwasowi","2022-12-13 06:02:57","false","kpb: add functions supporting 24-bit format

FW infrastructure shall support buffering of
historic data 24bit samples in 24bit container.
with modules configuration 24/32bit

Signed-off-by: Kwasowiec, Fabiola <fabiola.kwasowiec@intel.com>",97,54,1
"thesofproject/sof","691b80261a4ad82eae91def880d2091d248d446b","libinyang","2022-10-28 03:10:59","false","topology2: add payload_with_output_fmt token

payload_with_output_fmt token is used to tell sof driver whether
there is output audio format in the init instance ipc4 message
payload. payload_with_output_fmt = 1 mean there is audio output
format in the ipc4 message payload.

Signed-off-by: Libin Yang <libin.yang@intel.com>",94,53,1
"thesofproject/sof","bf65c0783d1c6624490b673d565420f718457ba0","RanderWang","2022-06-15 09:15:24","false","topology2: add src support on sdw platform

Signed-off-by: Rander Wang <rander.wang@intel.com>",119,48,1
"thesofproject/sof","5d3c650435a1f7cbdb7e1c3194a164f393d21e41","RanderWang","2021-11-10 08:15:37","false","ipc4: copier: update stream position for audio driver

Pipeline registers are located in memory windows0. FW needs
to update it with current stream position.

Currently we don't change stream_end_addr since we don't support
EOS. Will add support later.

Signed-off-by: Rander Wang <rander.wang@intel.com>",127,41,1
"thesofproject/sof","773a05a32ec130fc3661e6ac8f89c937d356ce98","RanderWang","2022-06-15 06:04:50","false","topology2: add S24LE support

S24LE is the major format used by SOF IPC4 FW and windows platform
and has better perfomance than S32.

Signed-off-by: Rander Wang <rander.wang@intel.com>",118,48,1
"thesofproject/sof","dbb49e03b9d811359f946e1a4b74c018caec95a0","RanderWang","2021-04-12 06:55:36","false","rimage: add cavs fw layout support

Add support of cavs extended manifest and modules. Now
we will have another config tgl-cavs for tgl.

Signed-off-by: Rander Wang <rander.wang@intel.com>",81,34,0
"thesofproject/sof","0bb593b15ec60c3eeada3b58e0be0442d7ffe0a7","mrajwa","2019-07-25 19:06:11","false","kpb: unify component data naming

This patch renames component data local
variables name from 'cd' to 'kpb'.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,14,0
"thesofproject/sof","f7ba009d1b40182476388e16dd400e0646f6dfe1","keyonjie","2021-09-30 11:36:03","false","buffer: fix memory leak in a error path

To avoid memory leak, we need to free buffer->lock in case of the
allocation of buffer->stream.addr failed, here fix it.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",121,40,0
"thesofproject/sof","9648fb65a5b8b86707e0a160efa992f3f3c97f59","keyonjie","2021-07-23 11:50:50","false","alloc: fix heap_trace() block start index

Fix and log the information of block 0 also.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",98,38,0
"thesofproject/sof","6a80a46ce0f84fd69c555bb1348b22bb1b5b1c25","ktrzcinx","2019-11-06 21:28:56","false","kconfig: iir: selective build by CONFIG_FORMAT

Include in footprint only code needed to support selected
data formats. It may make footprint lighter.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",52,17,0
"thesofproject/sof","dcfcef80cbd454eb33fdeaae2f8b600e0693238c","ktrzcinx","2021-09-01 06:19:22","false","config: Remove unused, platform specific, memory region definitions

After commit 916fc2cd73ff: ""config: Remove unused adsp structs""
those defines are unused.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",121,39,0
"thesofproject/sof","7c658a40fa8133bf563a3a5d4cfc7d7a372a1ec2","ktrzcinx","2019-12-13 11:09:51","false","sof: Assert level in platform_wait_for_interrupt is equal zero

Previously, the *platform_wait_for_interrupt() takes a
single int level argument to perform a check whether this
value is current arch_interrupt_get_level() and panics otherwise.
It does have any impact on the actual level lowered by
the waiti 0 call that is eventually made.

So right now, a caller is made to either provide the current
interrupt level to the function to pass the check
or sometimes duplicated code can be found as a way to bypass
the check and panic what is not compliant with DRY principle.

After changes current interrupt level is ridden and checked
in platform specific file, only for platforms where it is needed.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",75,18,0
"thesofproject/sof","a114c45b2a3db267c4d9d01464e3e2297cfd93d3","marc-hb","2022-08-04 21:18:07","false",".github/zephyr.yml: separate platforms a bit

It's faster like this and we also want platform-specific failures to be
identify as such and not block compilation of other platforms.

Also removed obsolete comment that sneaked in previous commit by
mistake and remove duplicate ""zephyr"" in the job name.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",113,50,1
"thesofproject/sof","e67d68e8e1ea34f2c434ccba21c9609fac8c5989","marc-hb","2020-09-23 05:03:30","false","adsp_config.c: actually check error when parsing ""version"" array elements

Caveat: this was just reported by valgrind. I did not test any actual
toml parsing error either (who tests error handling?) but this code
can't be worse than the previous one.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",67,28,0
"thesofproject/sof","b9fcc4156e5ee321ac3e565e6614dc75a2b84d0d","marc-hb","2021-11-18 01:13:09","false","xtensa-build-zephyr: fix incremental build, pass CMAKE_ARGS only once

As documented in
https://docs.zephyrproject.org/latest/guides/west/build-flash-debug.html#one-time-cmake-arguments
and accidentally found when testing rimage cleanup
https://github.com/zephyrproject-rtos/zephyr/pull/40431

Fixes commit 88327f618c7e (""xtensa-build-zephyr: support passing through
CMake arguments""); ccache is too good and hid this regression from me.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",128,41,1
"thesofproject/sof","c97493b37a3e0731bd3fac85aea62b172f46dd85","marc-hb","2022-11-08 01:02:42","false","xtensa-build-zephyr.py: detect multiple rimage checkouts and abort

When cloning sof under a different directory name like
sof-experiment1 ((which is bad but we can't stop it unfortunately and it
keeps happening), it's common to end up with two rimage git checkouts:
sof/rimage and sof-experiment1/rimage. Detect this and fail immediately.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",93,53,1
"thesofproject/sof","008815dd540a29c664e4f22cf266573a333f02e2","marc-hb","2023-11-03 21:58:41","false","tools/test/topology: mass replace codec_master -> codec_provider

This removes a lot of warning noise and may help spot other warnings
like `ALSA lib ops.c:48:(lookup_ops) wrong kcontrol ops value string ''`
and others.

Now that commit 1b1ec6c4920f (""topology/cmake: skip all topologies when
alsatplg < 1.2.5"") enforces alsatplg version >= 1.2.5, it is finally safe
to do this!

I compared the generated .tplg files before/after this commit and
they're bit for bit identical. Tested with  alsatplg v2.6.1 from
Ubuntu 22.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",4,65,1
"thesofproject/sof","4bf26d09c1f4974667b82b01031b6c061041f45c","marc-hb","2022-09-01 17:12:36","false","zephyr/docker-run.sh: add missing '-i' option

This makes it possible to run interactive commands like:

  ./sof/zephyr/docker-run.sh /bin/bash

Fixes commit 02c126914419 (""Add new, convenience zephyr/docker-run.sh
script"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",118,51,1
"thesofproject/sof","02222f41a50e162f14e882421d0c8a62a1546373","lyakh","2020-11-19 14:49:13","false","dma: add missing symbols for Zephyr builds

When building with Zephyr for unsupported architectures several DMA
symbols are missing. Add them to the respective platform header.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",74,30,0
"thesofproject/sof","5dffea9013765bc08703d3fd01adf0f694ac3b57","lyakh","2022-02-08 15:52:45","false","sparse: add attributes for cached memory

We want to separate access to memory via cached and uncached aliases.
To enforce this use sparse's address-space attributes.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",108,44,1
"thesofproject/sof","4baab5ff300e6e0a2ba4daadc2e137da565167b3","lyakh","2021-05-19 08:28:11","false","ipc: simplify a confusing variable use

The hdr variable in ipc_compact_read_msg() initially points to data
on stack, and then that variable is returned from the function,
creating an impression of a bug. However, that isn't a bug because
it is only returned from the function if it is overwritten to point
to a different data block, this time not on stack. Trivially
simplify the function to eliminate the confusion.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",87,35,0
"thesofproject/sof","d340f72f395ae557d6d069172b254c38fbcc26bd","wenliangwu","2022-11-14 01:52:29","false","platform: mtk: add platform driver for mt8188

Add mt8188 dai and dma platform driver.

Signed-off-by: Trevor Wu <trevor.wu@mediatek.com>",96,53,1
"thesofproject/sof","743d1941ff17b58b51dc3bd3301ee2045d59243c","plbossart","2021-02-12 14:46:54","false","topology: dmic users: define dailink and pcm ID in caller

The topologies changed in this patch relied on dailink defaults, and
never defined PCM IDs.

We want dailinks to be defined in callers, so let's remove those
defaults from intel-generic-dmic.m4

To be backwards 'bug-compatible' the PCM ID remains the same as the
dailink, but this is completely arbitrary and might be modified if
needed.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",74,32,0
"thesofproject/sof","ef804b41ae48403a608d15bed2b8cfec85e2c1d1","plbossart","2019-01-16 05:08:02","false","src/audio/host.c: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","9e7353a5bb738f42eada59e385ecaa8589bacff6","cujomalainey","2022-12-13 20:44:03","false","audio: google: Add missing return check

Check those errors

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",98,54,1
"thesofproject/sof","dba274da8918e52eebed31c6f7d00950583f8e07","lyakh","2023-01-25 14:40:39","false","chain-dma: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register chain-dma with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","ce3264a50721b7133e00dc3c6c268df19b169479","aborisovich","2022-03-13 23:29:56","false","platform: Move configuration from Zephyr to SOF

Move software configuration from Zephyr samples directory
to SOF platforms directory using Zephyr overlay mechanism.
How it works:
1. Gets zephyr board defconfig values
2. Applies Zephyr samples prj.conf values on top of it
3. Then applies our new overlay.conf on top of it
4. Final ""summary"" of Kconfig settings is written to autoconf.h header

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",108,45,1
"thesofproject/sof","bd35cebc0eb8346bbb70baf141526210c27ac468","andrula-song","2023-08-18 02:52:40","false","Audio: MFCC: Remove the debug file operations from C code

Remove the debug file operations from C code, and will add
a similar matlab script in the future.

Signed-off-by: Andrula Song <andrula.song@intel.com>",25,63,1
"thesofproject/sof","06401fe589cd77071a9c6ae6ee4af71be208b4a9","xiulipan","2020-03-27 05:11:07","false","topology: add KWD comp into sof-tgl-max98373-rt5682

Add KWD pipelines with vol-kfpm pipe using intel-generic-dmic-kwd tmplate.
48K DMIC still uses PCM 99
Add 16K DMIC KWD on PCM 100

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",65,22,0
"thesofproject/sof","5b39370e1e198acd0667666abfb242d88de74319","xiulipan","2018-09-18 03:44:10","false","scheduler: refine schedule_edf function to handle multiple task

There will be new task added in schedule_edf function, refine the
function to handle multiple task.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",38,4,0
"thesofproject/sof","fb5e8ac792fb8b25ae10b01147c7cb20d5831bb9","zhuyingjiang","2018-11-05 08:19:49","false","rimage: manifest: rename old manifest to 1.8

rename old API and comments print info to 1.8, as for add
1.5 manifest.

Signed-off-by: Zhu Yingjiang <yingjiang.zhu@linux.intel.com>",38,5,0
"thesofproject/sof","6c9bbd6fef6e77df28d65626b5108c812098a270","marc-hb","2021-07-12 03:30:32","false","zephyr/CMakeLists.txt: explain why we need if(CONFIG_SOF)

Not obvious plus many SOF developers are new to west.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",87,37,0
"thesofproject/sof","9353c2d5f137004f4541b62643c8dc0d01b1b588","kv2019i","2023-02-17 12:50:44","false","CODEOWNERS: add new owner for topology and topology2

Mark Ranjani Sridharan for full topology folder. Add Jyri
Sarha for topology2 folders.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",55,56,1
"thesofproject/sof","d3c7458b07979f5619964d8128172d1df9f99369","lyakh","2023-02-20 16:11:33","false","mixin-mixout: fix an error case

If audio_stream_set_zero() fails in mixout_process(), the output data
size should be set to 0.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,57,1
"thesofproject/sof","48afcefc756edbbd5596f3a74f1106b028f8832d","kv2019i","2023-01-25 10:23:28","false","topology2: cavs: fix num_audio_formats to match the actual number

Multiple pipelines had incorrect num_audio_formats leading to invalid
format structures ending up to topology.

Example FW trace:

[ 1601.624195] sof-audio-pci-intel-tgl 0000:00:1f.3: Get input audio formats for copier.module.8.2
[ 1601.624197] sof-audio-pci-intel-tgl 0000:00:1f.3:  #0: 48000KHz, 32bit (ch_map 0xffffff10 ch_cfg 1 interleaving_style 0 fmt_cfg 0x2002)
[ 1601.624201] sof-audio-pci-intel-tgl 0000:00:1f.3:  #1: 0KHz, 0bit (ch_map 0x0 ch_cfg 0 interleaving_style 0 fmt_cfg 0x0)

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",53,56,1
"thesofproject/sof","ee06c700f36dd1ca9523eaf74eb76aa6f55be4cd","tmleman","2022-03-31 21:40:36","false","ipc4: setdx: error checking on core disabling

If operation of disabling secondary core fails at any of the steps, host
will only learn about it after checking the SPA/CPA bits.

This patch adds checking core state after it disabling. If core will be
still active ipc response will report error.

Additionally, it removes an outdated comment.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",114,46,1
"thesofproject/sof","158bb9e454243e0def4b4803b2e9581d95918e51","plbossart","2021-07-27 22:02:48","false","Revert ""trace: move CONFIG_TRACEM implementation up a couple levels""

This reverts commit 0def9056300a4b23d909ba0b36256087af91d2fe.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",103,38,0
"thesofproject/sof","0e837079fe1d23309512166fb007cfab365df23f","ktrzcinx","2020-06-22 14:41:34","false","smart_amp: Invalidate feedback component before use

Without this path, read status might be incorrect in situation
when smart_amp component is in shared memory region but feedback
component is not - component state value will be outdated.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",72,25,0
"thesofproject/sof","0825d2fbddda48f1908767bf542c4233c19cb4bd","tlauda","2020-03-17 15:25:29","false","task: reduce default stack size for some platforms

Reduces default EDF task's stack size for some platforms,
which have less memory and aren't used for more serious
processing.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",72,21,0
"thesofproject/sof","901a963a678cbb1b3eb6e53ab29d80f82cd488d2","singalsu","2019-12-05 11:24:14","false","Volume: Always launch ramp in beginning of copy() operations

This patch ensures that a ramp will happen in beginning of
streaming even if the driver control sequence would not launch
it by successive volume requests for mute and actual volume.

Also a check is added into volume ramp update to prevent a volume
command in component idle state to schedule repeatedly ramp
updates. In that case the volume can be set immediately to ramp
end value.

Also the ramp is updated for active channels only. There's no need to
update for the maximum channels count.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",70,18,0
"thesofproject/sof","f12d202114b31cf0d62f3a308ef6a2833ac4363c","libinyang","2019-10-30 05:46:14","false","topology: add ElkhartLake platform info

Modify from tigerlake.

Signed-off-by: Libin Yang <libin.yang@linux.intel.com>",64,17,0
"thesofproject/sof","74e1bcc7866f22e1ec5c060c5448fa6280ca86fc","bkokoszx","2019-11-04 16:33:19","false","component: move pcm params from component to buffer struct

Moving pcm params from component to buffer is the first
step to improve parameter propagation within pipelines. This commit
moves several pcm paremeters (framet_fmt, buffer_fmt, rate,
channels, chmap, except direction) to comp_buffer struct.
Some of specific parameters are moved to private host and
kpb data.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",54,17,0
"thesofproject/sof","2da5689bdfcc9b2da5ce0de9a33e8d50ce35f4c7","ktrzcinx","2019-11-07 06:41:25","false","kconfig: mux: group functions by supported data type

It will be helpful during next step - conditional code
compilation depending on configuration

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",53,17,0
"thesofproject/sof","7eb051592e47a044fe6297f2dc78b6465c27e3de","tlauda","2019-10-14 07:54:50","false","dma_single_chan_domain: add trace logs

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,16,0
"thesofproject/sof","e755494e7ed53e40371366aad0ccb23e573bbc6f","tlauda","2019-10-10 12:20:19","false","timer: fix return values of platform_timer_set and arch_timer_set

Fixes return value of platform_timer_set and arch_timer_set functions.
Change was introduced for cAVS platforms, which accidentally broke
these functions for other platforms. The intention of this functions
is to return value of set ticks, so the timer scheduler can check
for delays.

Fixes: 75188e22434d (""timer: rework timer_set() so it verifies requested ticks"")

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",61,16,0
"thesofproject/sof","1c19a79d712f031e3a2234d27616ffbc33b609d4","lgirdwood","2018-10-10 09:51:35","true","Merge pull request #475 from xiulipan/pr/travisdivbuild

Travis CI Update Part 1. (Separate platform stage status)",32,4,0
"thesofproject/sof","c3a1f9a9fe74846ae860e55f5d4573e5f24aad92","lgirdwood","2018-07-25 15:37:43","true","Merge pull request #120 from kakulesza/set-max-volume-from-ipc-for-volume-module

volume: Set max volume value from IPC for volume module",11,2,0
"thesofproject/sof","81e8a33b58b8f909b34625292a05ed1215c9f19e","lgirdwood","2018-09-27 10:15:40","true","Merge pull request #429 from tlauda/topic/ut_fix_includes

ut: include missing headers",38,4,0
"thesofproject/sof","bdd62d54a014eaf62acad4ebb8d47eeff7e87f35","marc-hb","2021-09-27 06:37:19","false","installer: use tree -v to make the test output deterministic

Avoids semi-random order like:

-- tests/staging_sof_ref.txt
++ sof/installer-builds/staging_sof_tree.txt
@ -1,7 +1,7 @@
 .
 ├── community
-│   ├── sof-adl.ri -> sof-tgl.ri
 │   ├── sof-adl-s.ri -> sof-tgl-h.ri
+│   ├── sof-adl.ri -> sof-tgl.ri
 │   ├── sof-apl.ri
 │   ├── sof-cfl.ri -> sof-cnl.ri
 │   ├── sof-cml.ri -> sof-cnl.ri
@ -16,10 +16,10 @@

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",119,40,0
"thesofproject/sof","1e4236be68f7b2b8a0ee5878e7128217b69e70be","marc-hb","2022-10-04 22:50:59","false","tools: make sof_ri_info.py a usable library that can be imported

2 small changes required:

- Stop calling sys.exit(1) in case of error not to exit the importer
- Change EraseVars() to return the checksum value instead of printing
  it. Move the print() to the main() function

This is required by the new sof-bin tests that compare signed with
unsigned binaries; submitted in
https://github.com/thesofproject/sof-bin/pull/105

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",97,52,1
"thesofproject/sof","d4ae0cd3d6687e909814ffc6c17825defef91591","lrgirdwo","2019-02-01 11:00:43","false","logger: format file name to remove leading directories.

No need for full path as this breaks column formatting.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",59,8,0
"thesofproject/sof","0c93261349240d05ee04e1c8d2b5510e037da105","lrgirdwo","2019-04-19 15:17:09","false","ipc: irq: IPC IRQ is a LEVEL type and is cleared via HW

IPC IRQ is a LEVEL interrupt and hence does not need INTCLEAR set as
this is cleared by SHIM HW.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",48,10,0
"thesofproject/sof","045e6f44e4a6649aa3ba1c080b891d71513244a7","plbossart","2022-04-04 22:31:09","false","topology1: CMakeLists: split SoundWire NOJACK topologies

Before we enable the headset deep-buffer solution, we want to extract
the NOJACK topologies where the headset deep-buffer would be an
oxymoron.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",110,46,1
"thesofproject/sof","ddebac091f5c343438c593e91b179816e0ea03af","plbossart","2018-12-06 23:47:14","false","topology: realign sof-apl-da7219 on sof-glk-da7219

Somehow those two files should only differ on SSP connections and MCLK
ID1, so it's pretty obvious no one has tested this since August...

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",45,6,0
"thesofproject/sof","e2b82fdd6712f51a26ad457ac81741ff0146612e","lrgirdwo","2018-12-13 21:08:33","false","alloc: check ptr before potential dereference.

Make sure we check ptr is not NULL prior to converting address.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",46,6,0
"thesofproject/sof","7e33c8f9ce836dff7948698f486922b11bfe30e0","plbossart","2020-08-25 20:36:40","false","mixer: align and use audio_stream_period_bytes

Not sure why this was different from other processing.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",75,27,0
"thesofproject/sof","1c1c09ce7ee4eba8a41a2e61aba78447de07ca88","lrgirdwo","2020-11-12 22:07:53","false","manifest: cavs25: Add support for ext data type 0x16

This type was used by early versions of meu, but the hash is not
used in later versions. Leave the code in in case it has to come back.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",72,29,0
"thesofproject/sof","c1123ec2ab994a3d1dadd2c64e4e352c75e88e0e","lrgirdwo","2018-08-02 01:07:43","false","ci: travis: setup apt.conf

Needs revisiting after CI up and running

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",18,2,0
"thesofproject/sof","4cd3b7035085df7a33a147416955b66d569e6043","plbossart","2018-06-18 19:27:33","false","byt-ssp: fix frame sync polarity for DSP modes

Now that these modes work, fix the polarity to align with
ALSA/ASoC expectations

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",1,1,0
"thesofproject/sof","6d76acf67a6d979767279792eb4a026dc002a9f2","jajanusz","2020-04-10 11:15:54","false","debug: remove dead assignment

Reported by clang's scan-build.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",82,22,0
"thesofproject/sof","4d02a1faf7276b95003e29c05c90230d2d9f0abe","jajanusz","2020-02-27 14:12:15","false","script: clang scan-build for xtensa

Add utility scripts for launching clang static analyzer.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",76,21,0
"thesofproject/sof","6c1dd397f576f17fdaa68222f5da1531432d023e","johnylin76","2022-05-24 07:13:45","false","rtnr: add rtnr-only override config

Enables component RTNR for mt8195 binary

Signed-off-by: Pin-chih Lin <johnylin@google.com>",115,48,1
"thesofproject/sof","c623e9246325dbee615a5cad0c8e4b0c29976056","tlauda","2019-10-04 09:26:42","false","dai: prevent dai_config while in active state

Prevents dai_config while DAI is in active state.
It leads to undefined behavior and DSP exception
in some cases.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",65,16,0
"thesofproject/sof","1d3fa8a43252c24a1404332b9fac1f2ee1f09c40","tlauda","2019-10-01 07:10:15","false","platform: tgl: remove non-existent options selection

Removes selection of non-existent options.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,16,0
"thesofproject/sof","37877f2b04dc8a31a8a08c5774c36fae74198984","tlauda","2018-09-07 12:34:30","false","platform: cavs: let trace manager to clear mem window

Removes zeroing of memory window 3 - it will be now performed
in different place. Zeroing here causes removal of some traces
at the beginning.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",31,3,0
"thesofproject/sof","df917e0231ece6e8622826c8e263863b4b811410","tlauda","2020-02-21 15:03:50","false","ipc: extract method for message preparation

Extracts method for IPC message preparation.
More granular approach is needed for upcoming changes
regarding detector notification sending.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",80,21,0
"thesofproject/sof","300b9706756dd17e6feca6c535f84aab9e44d727","tlauda","2019-04-04 10:18:43","false","component: add new set_attribute ops

Adds new set_attribute component operations, which
allows to set some custom internal attributes.
Also adds COMP_ATTR_COPY_BLOCKING attribute and
implements it for host component.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",50,10,0
"thesofproject/sof","eefe72c925b67399569769bbdfa1fbbd73b7f346","tlauda","2019-06-27 12:21:51","false","component: add new COMP_COPY_ONE_SHOT type

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",47,13,0
"thesofproject/sof","1edaef67f40afd84a0b40d38fb06b4aa05abd0a5","tlauda","2019-04-16 13:53:53","false","dw-dma: set DMA suspend and drain stop from Kconfig

Makes DW-DMA stop method to be configurable from Kconfig.
Some of the platforms cannot stop DMA channel immediately,
but first need to suspend and drain FIFO.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",50,10,0
"thesofproject/sof","430f7549cadb6612b250e07b438948ac565fa7b9","tlauda","2019-05-20 13:40:39","false","checkpatch: fix as much issues as possible

Fixes almost all checkpatch issues.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",58,11,0
"thesofproject/sof","14b23ba5d3ff585b2610ff78729f52aa3c6b198e","tlauda","2019-07-19 11:39:22","false","task: move task structure and defines to the right header

Moves task structure and defines to the sof/task.h,
where they should be from the beginning. sof/schedule.h is
just for scheduler related things.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",51,14,0
"thesofproject/sof","f97e9f0de6b76c2b20f3423b57739af8ecf48a42","ktrzcinx","2020-10-06 11:19:30","false","ipc: Remove user_abi_version from mailbox

This information is already provided by extended manifest,
so there is no need to double it in runtime code.
It allows to save 16 bytes from .DATA and 128 bytes from .TEXT
for cnl platform.
`data_structs` library from src/ipc/CMakeLists.txt is no longer
needed. Moreover empty library may lead to cmake fail.
SMEX needs little update, to read DBG_ABI from .fw_metadata section
instead of .fw_ready.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",66,28,0
"thesofproject/sof","2fe33241b791ecbfbfb116b85709c6cfc51961c9","tlauda","2018-09-06 11:56:24","false","trace: implement multicore traces

Implements multicore traces for both DMA and memory window mode.
Also adds core id to the logs.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",31,3,0
"thesofproject/sof","b4a6cea5aa55a91e20ea6b8b4f6f94c0313d0ae0","keyonjie","2020-07-20 09:03:17","false","cavs: implement PM runtime dynamic clock switching

Let's select WAKEUP_HOOK for all cAVS platforms, and just do nothing
inside if that's the true.

1. When CONFIG_CAVS_LPRO_ONLY=y, use LPRO only, no clock switching.

2. When CONFIG_CAVS_LPRO_ONLY=n, dynamic clock switching will be
enabled, and the clock switching will be performed during
platform_wait_for_interrupt() only.

In platform_clock_on_waiti(), perform dynamic clock switching if
needed (active_freq_idx will be updated to denote the active non-wfi
clock frequecy index), and then put CORE_HP_CLK to perform possible
HPRO->LPRO switching if CONFIG_CAVS_USE_LPRO_IN_WAITI is selected.

In platform_clock_on_wakeup(), when CONFIG_CAVS_USE_LPRO_IN_WAITI is
selected, get CORE_HP_CLK to perform switching back to HPRO if HPRO
is the saved non-wfi active clock, and no more switching needed.
Otherwise, need to restore the active cpu freq_idx manually.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",79,26,0
"thesofproject/sof","1e2d57435632df515e863fdf1e765e354e3bbed1","keyonjie","2021-08-26 11:10:37","false","zephyr: wrapper: hardcode SIZEs to unblock building

We have change the size of runtime_shared zone to be decided at link
stage, here hardcode HEAP_RUNTIME_SHARED_SIZE to unblock the Zephyr
building.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",119,39,0
"thesofproject/sof","2db847b7b29559bbbe4e8a24fbdb213bce7235bc","keyonjie","2021-04-01 09:28:53","false","tools: test: mix_sweep: correct the start index

The i0 is already the start index, so no need the '+1' for i1
calculation, correct it.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",79,34,0
"thesofproject/sof","a64bdddc81e701626df772644eac5707b0dda90b","ktrzcinx","2019-11-06 21:08:15","false","kconfig: iir: group function pointer in arrays by data type

It will be helpful in next step - selective compilation.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",52,17,0
"thesofproject/sof","a940766d27c46635a5fc5739304fd5fbcc71d623","jsarha","2022-09-21 15:29:47","false","tools/probe: Fix realloc() usage

Realloc may change the location of memory and the code should
anticipate it.

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",96,52,1
"thesofproject/sof","6bccd675bf79711124e0f9cf4bb009c5600f2d0a","lyakh","2019-02-20 08:13:18","false","cavs: propagate error codes instead of overriding them

When returning an error, it's usually better to propagate the error
code, that caused the termination, than overriding it.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",63,9,0
"thesofproject/sof","70c257f9ae93c2b9cc1103d994f547d0b793f48c","wenliangwu","2023-05-19 03:43:40","false","drivers: mtk: get memif format from config of DAI component

MTK memif(DMA) can support different format from BE dai, so we don't
need to rely on the transformation of SOF DAI. After the patch, the
format of memif follows DAI component, so the format can be kept the
same in the pipeline and do format transformation via AFE if
necessary.

Signed-off-by: Trevor Wu <trevor.wu@mediatek.com>",50,59,1
"thesofproject/sof","7d44f31e7d37edb711a25c279747cf1cfc488fbc","Vamshigopal","2021-05-11 18:16:34","false","topology: sof-tgl-sdw-max98373-rt5682: remove redundant topologies

removing 2-ch topology and renaming 4-ch topology.

Signed-off-by: Vamshi Krishna <vamshi.krishna.gopal@intel.com>",84,35,0
"thesofproject/sof","def9d51d7d8186e8f70e5f15dbc1752cee1deb64","lyakh","2023-02-09 13:49:54","false","Fix regression - make default return code an error

A recent commit ec649f37d661 (""Convert all ELF addresses to cached
for calculations"") had a bug: it assumed a call to
parse_uint32_hex_key() for an absent key would return an error by
default, which isn't the case. To force it set the default return
code to an error value.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,56,1
"thesofproject/sof","2097ba2d27584cbfc314331fede9e625b2d38245","lyakh","2022-01-24 12:43:45","false","ipc4: fix uninitialised variable warnings

The ret variable in ipc4_trigger_chain_dma() can be used
uninitialised. Fix it.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",109,44,1
"thesofproject/sof","e95723ace13f30f7295d3607fa3b9f7b05cecdb5","lyakh","2023-03-23 14:50:59","false","host: make DMA reload threshold configurable

Add Kconfig options to specify when to reload DMA, by default it will
reload 4ms before the buffer is empty (or full).

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",56,58,1
"thesofproject/sof","ba73c3832015b8792e2dccba3d2dd3f0891a8020","lyakh","2023-01-25 12:57:55","false","aria: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register aria with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","6522872c927aabd43ec06fd7d2f84485b4cecb50","lyakh","2020-03-31 15:54:13","false","topology: add a ""core"" parameter to the W_MUXDEMUX() macro

This places all SectionWidget.MUXDEMUX* topology widgets, created by
the W_MUXDEMUX() macro on the same core, on which the respective
pipeline is scheduled.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",69,22,0
"thesofproject/sof","cb813bb6b8a25068eeb1301b51a1068e733f761d","akloniex","2020-02-05 14:41:59","false","boot metadata: Move mem window and cc version info to .fw_ready section.

Move extended boot metadata structures to compile-time section
.fw_ready_metadata which is appended to .fw_ready section of binary.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",77,20,0
"thesofproject/sof","51ade663cbef15c08d288e1f42cd598cd535def9","btian1","2023-05-11 02:38:13","false","copier: fix ipcgtw position issue

there is no interface for ipcgtw position, also no variables to
track for ipcgtw position, since ipcgtw device was removed,
ipcgtw position support have to be removed from copier.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",49,59,1
"thesofproject/sof","8fc405d1196c09b43ac2920e87de36274ccbd41b","btian1","2023-09-08 06:48:14","false","audio: volume: reduce ramp volume calculation

Will first check whether have same target volume, if same,
then only calculate one channel and copy to other channels.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",20,63,1
"thesofproject/sof","e60caa0c0cdfbc37658396fc4d0f22067410643a","dbaluta","2022-09-26 09:20:09","false","topology1: Update documentation to reflect multicodec support

This updates documentation to reflect that now param id is only 2 bytes
followed by 2 bytes codec id.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",97,52,1
"thesofproject/sof","20f064749abeeaf0d252ab9b407a3516b82f22d9","dbaluta","2023-06-20 14:44:04","false","app: boards: Remove mimx93_evk_a55_sof.conf file

We now use mimx93_evk_a55 board so there is no longer
need for mimx93_evk_a55_sof.conf.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",42,61,1
"thesofproject/sof","cf808895cc33b39ed375cb6945fe7e6b68decfa4","dbaluta","2022-03-28 16:28:32","false","LICENCE: Add Khronos Group Inc license header

This is introduced with compress_params.h file.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",112,46,1
"thesofproject/sof","72d2f6c4c16a6d52f51a5948509c8a769469700a","dbaluta","2020-01-22 09:28:15","false","platform: imx8m: Remove unused platform_timer variable

After commit dece398b2275d (""timer: add platform timer to sof context"")
platform timer was added to sof context so global platform timer is
no longer used. Remove it now.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",78,20,0
"thesofproject/sof","f044f8c4787dba79aee60018f5d86136207350bc","dbaluta","2020-04-05 18:01:16","false","platform: imx8m: dma: Fix SDMA irqname

irq name must match cascaded controller name, otherwise
interrupt_get_irq will fail.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",80,22,0
"thesofproject/sof","90d75018d3ada02cd97976f9258c6a5449d8abff","lrgirdwo","2018-11-30 16:06:30","false","rimage: Add support for Sue creek

WiP.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",40,6,0
"thesofproject/sof","ccdfa7972d8da9d489720fbaebc39eee84ef6ce8","zhuyingjiang","2018-11-05 08:57:47","false","rimage: add 1.5 rimage package API

add API for making 1.5 rimage binary

Signed-off-by: Zhu Yingjiang <yingjiang.zhu@linux.intel.com>",38,5,0
"thesofproject/sof","2d9af17a90d7be2b2e963f2f04505342065a8e03","zhuyingjiang","2018-10-18 06:21:04","false","rimage: modify the API to version 1.8

change the define to 1.8
modify the API name to 1.8

Signed-off-by: Zhu Yingjiang <yingjiang.zhu@linux.intel.com>",33,5,0
"thesofproject/sof","df0d70150ec7c99de128e219e4aef72fc94ec1b9","xiulipan","2018-08-28 10:19:31","false","ipc: use scheduler task for IPC process

IPC process is handled after wait_for_interrupt, but there may some IPC
is handled outside this WFI function. Use scheduler to avoid wait for
IRQ caused IPC timeout.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",22,3,0
"thesofproject/sof","173f4d21d0e84238e39ce2a802c6d7b392678628","xiulipan","2018-10-09 07:18:04","false","scripts: add no riamge build options for build all script

Add -lr to let xtensa-build-all.sh do not build rimage.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",35,4,0
"thesofproject/sof","5eb668cc52a572eb11919882b85c4448cf0d625e","xiulipan","2019-11-05 05:14:31","false","lib: alloc: fix block_map uninitialized warning

Fix build warning as error:
error: 'block_map' may be used uninitialized in this function

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",53,17,0
"thesofproject/sof","9259bac343327067d0188e4902b1914abb434ebc","RanderWang","2022-03-28 12:00:08","false","ipc4: use correct function to free buffer

Buffer_release is used for cache operation, not
for buffer free

Signed-off-by: Rander Wang <rander.wang@intel.com>",112,46,1
"thesofproject/sof","3b966f3d578861879dceb2c1b5d6193c222e5bc4","RanderWang","2018-09-10 06:54:41","false","ipc: remove waiti running in IRQ level higher than passive level

waiti would cause FW panic if it is called in irq level
higher than passive level

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",33,3,0
"thesofproject/sof","e3e4ced1f7ebba5616b925ab6eedd9c1117ccf7a","lyakh","2022-04-08 09:42:33","false","ipc3: use comp_buffer_connect() instead of open-coding it

ipc_comp_to_buffer_connect() and ipc_buffer_to_comp_connect() open-
code contents of the comp_buffer_connect() function. Remove redundant
code and call the function directly.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",114,46,1
"thesofproject/sof","e64fdf2e405962224c5469b614717c170b262991","RanderWang","2022-01-10 08:25:16","false","codeowner: add rander to review ipc changes

I am working on ipc interface for IPC4 and will
focus on ipc interface for both IPC3 & IPC4.

Signed-off-by: Rander Wang <rander.wang@intel.com>",116,43,1
"thesofproject/sof","fc95621cd8939360ffd8f3424b1ae2d88a8b0401","singalsu","2023-09-26 14:53:17","false","Audio: Google RTC audio processing: Mix all channels in mockup

With this change e.g. in all 2ch case all output channels are
mixed with matching microphone and reference channels. It helps
with testing to hear and see that the mockup works.

The mix is done for matching microphone, reference and output
channels indices. With e.g. less reference channels, the remaining
output channels are passed directly from microphone.

The mixed samples are saturated to avoid nasty sounding overflows.

Signed-off-by: Lionel Koenig <lionelk@google.com>
Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",19,64,1
"thesofproject/sof","673e335a7a822182ceb3b8c88a62f1e961610680","singalsu","2020-06-23 16:53:45","false","Tools: Topology: Change playback volume ramp duration to 20 ms

This patch shortens the ramp duration to 20 ms from 250 ms in all
topologies with volume playback. In addition the zero crossings detector
mode is enabled to mitigate zipper noise.

The change includes for the not yet updated pipeline macros a rename
of macro for tokens data with pipeline number suffix to ensure no
undesired volume instances are impacted by this change.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",69,25,0
"thesofproject/sof","971b5138010c6326235d18daf4b55d5a335443b2","singalsu","2020-01-23 16:51:52","false","ASRC: Add pull mode to copy() functions

This patch adds the missing use and initialization of ASRC for
pull mode. Pull mode is used typically in audio capture where
the DAI is not synchronous with rest of SOF. The previous version
used push mode for both plaback and capture that can work only with
a synchronous DAI.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",79,20,0
"thesofproject/sof","ebd2b1869e26772ad48931e526bdd9a9224a5c40","ktrzcinx","2020-06-22 12:35:23","false","smart_amp: Merge dbg logs from copy function

Number of available frames from feedback and passthrough buffers
should be in the same format and close together for easily compare.
Moreover reducing number of logs, especially from copy function is
important in terms of logs readability and FW performance - adding
one more parameter have much less impact on FW than adding one more
log message.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",73,25,0
"thesofproject/sof","d58e733c7bbd1260ae87d596e8719f88cd9a38a3","singalsu","2019-05-28 06:47:40","false","Topology: Change 16kHz DMIC DAI into 32bit mode and make scheduling 1ms

This patch changes the secondary DMIC FIFO configuration into 32 bits
mode for better quality. Since there is volume component in DMIC
capture pipelines the conversion to other PCM formats can happen
there. Using volume controller with 32 bit input gives a lot better
audio quality when the microphone signal needs amplification.

The scheduling of 16 kHz DAI is changed to 1000us. The comment
of 1000 us is correct but the parameter 48 is not. With 16 frames
the scheduling becomes the desired. This change should also save
some RAM due to smaller buffers.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",63,12,0
"thesofproject/sof","d3faab3d16fa8fb9908ff461a45a1ee9de757de6","kv2019i","2021-09-08 14:26:06","false","xtensa-build-zephyr: re-enable XCC build for Intel cAVS hw

The regression in Zephyr mainline is fixed with
https://github.com/zephyrproject-rtos/zephyr/pull/38374 , so
the XCC build can be renabled for cAVS targets.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",118,39,0
"thesofproject/sof","55d8f410664c4caae29d45bc914d8f79f300d7eb","marcinszkudlinski","2023-07-26 07:37:38","false","Revert ""Audio: SRC: Add safeguard against missing, wrong size or type init data""

This reverts commit 4849a71ada60085542722cfc6ca7e82c2b428ecf.

The commit has been merged with CI test fail
The test is now failing constantly making CI unusabe

Either CI test or the code requires changes before merging

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",34,62,1
"thesofproject/sof","d5b4f5705fce4138e6c4987311146b1e18fffe9c","singalsu","2018-10-23 09:43:58","false","SRC: Use 32 bit filter coefficients in host testbench

This patch adds definition of CONFIG_HOST for SOF host version build
and selects for SRC the better quality and full conversions set in
such case.

The problem with default for gcc was that the conversions set for
non-optimized xtensa gcc is very limited and the quality has been
lowered to save resources. Hence the testbench creates huge amount
of fails without this change. With this patch the SRC test tracks the
quality of coefficients for optimized HiFiEP/HiFi3 version code.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",27,5,0
"thesofproject/sof","7343445ee3311cc533d0c02714411c641b4db2ca","ktrzcinx","2020-01-17 08:32:27","false","ASRC: Mark source buffer as const in processing functions

Const keyword is added to explicitly indicate that nothing in given
source buffer can be changed in processing functions - read pointers also.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",79,19,0
"thesofproject/sof","4af814917ad5532d52515d342fe880f5e17983a3","tlauda","2019-03-05 15:17:36","false","volume: remove not needed parameters

Removes no longer needed parameters from component
data - source_period_bytes and sink_period_bytes.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",65,9,0
"thesofproject/sof","72d7b7d7216fb8a35b8f4083969edfbc7a7a2122","tlauda","2019-06-11 13:48:13","false","host: remove not needed check

Removes not needed check from host component.
It was supposed to detect if there is not enough
avail/free data, but since we've switched to
host copy on buffer callback this check is deprecated.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",49,12,0
"thesofproject/sof","e55d5be5efd98521e8f2017f0091a3745fef5ec5","tlauda","2018-09-28 14:09:05","false","memory: apl: extend system heap

Extends system heap for core 0 to match other platforms.
Needed as total size of objects allocated on system heap
constantly changes and causes out of memory during slave
core enablement.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",37,4,0
"thesofproject/sof","57400925148220a796b4a7642266bdc5faadceb4","tlauda","2019-07-17 09:55:14","false","edf_schedule: change wrong trace function

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",47,14,0
"thesofproject/sof","2aa4f92968a699dff31fc76648a64b07bd5428d4","tlauda","2020-01-21 13:28:19","false","arch: smp: remove unnecessary code

Removes no longer needed code, which was used in previous
implementation of SMP. With the latest implementation we are
going full SMP, so every core creates and configures its
own components. We no longer need to control cache in order
to synchronize data between cores.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",78,20,0
"thesofproject/sof","fdfebdd8ad65608d3b926a267788c153f33b086c","mrajwa","2020-12-15 09:52:26","false","codec_adapter: fix premature free of memory

This patch fixes the issue with premature free of runtime
parameters memory. Such situation occurs when runtime
params are send in few parts, then after the first packet
has been copied the memory is freed so the consecutive one
no longer has a copy destination.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",73,30,0
"thesofproject/sof","15030d4cab009d163319f446bc30dd5af2c0c78f","lgirdwood","2018-09-22 14:31:47","true","Merge pull request #73 from cujomalainey/master

Set capabilities of channels to those defined in topology",36,4,0
"thesofproject/sof","5e3b739043d8a09f799be2641905186545db412a","mrajwa","2019-07-30 14:24:10","false","kpb: disable sys_agent before draining

Draining task can take a long time depending
on various params. This patch disables system
agent which raises DSP PANIC in case firmware
is hanged. However draining task can look to
system agent in exactly the same manner thus
we disable it right before draining task and
reenable after draining is done.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",52,14,0
"thesofproject/sof","64c0e8d6ec358027b04a38a7b425c68d5c5da8d8","lgirdwood","2018-10-18 15:57:18","true","Merge pull request #109 from xiulipan/pr/pplfmt

topology: duplicate dai formart for pcm add",33,5,0
"thesofproject/sof","3c59e53943a075143a1ef8519469bd55e6ebb35a","lgirdwood","2018-10-10 15:29:48","true","Merge pull request #96 from akloniex/read-stdin

logger: Implement possibility to read log data from stdin",33,4,0
"thesofproject/sof","e9f33e64824f66d4dd9eca4d82ae04a908fadf18","lgirdwood","2018-11-21 15:39:34","true","Merge pull request #603 from tlauda/topic/pm-ctx-ipc-return

ipc: send generic reply for pm_context messages",39,6,0
"thesofproject/sof","39805a9fccbab79d6424f7a5d340418157abefb4","btian1","2023-07-12 03:13:45","false","aria: simplify aria parameter update

Use function to simplify buffer parameter update instead of
update one by one.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",31,61,1
"thesofproject/sof","107b60ea6f04b0432d15cc8c98a4f468f49478d5","plbossart","2021-09-28 16:28:25","false","pipeline: simplify handling of first pipeline

src/audio/pipeline/pipeline-schedule.c:186:6: style: Assignment of
function parameter has no effect outside the
function. [uselessAssignmentArg]
     cmd = -EINVAL;
     ^

The code isn't wrong but cppcheck points at a possible confusion. It's
better and more explicit to use a dedicated boolean flag than
modifying the command code.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",120,40,0
"thesofproject/sof","f16b141184ebdc39753435f7d15ca4740b3301d6","abonislawski","2019-04-12 11:00:16","false","exception: saving the EPC1 register

It will change in the panic functions so it is needed to save it in exception()

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",48,10,0
"thesofproject/sof","362a0781f20b6709cf8c609219798f6079a57511","ranj063","2023-03-30 23:19:01","false","topology2: Remove dma_buffer_size attribute

There's been a recent kernel change to compute the DMA buffer size using
the ibs/obs. So this attribute no longer needs to be set in the
topology.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",57,58,1
"thesofproject/sof","6b8e67c41bf3460eca5c842fc7eee847345f716e","abonislawski","2020-04-03 14:00:24","false","cpu: use simple counter to validate core power down

This will prevent core power down if it is not allowed
and still in use

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",81,22,0
"thesofproject/sof","f23b2c2d07d13b60efe881203d754475b11fbfba","abonislawski","2020-03-09 13:11:01","false","rimage: use lma if available

some sections may use different lma than vma address,
in such case rimage needs to use lma

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",85,21,0
"thesofproject/sof","c78b435b8d9d8a596e247dbdbb00e6b2ad7469e3","lyakh","2022-06-14 10:20:12","false","module: add __sparse_cache to struct {in,out}put_stream_buffer::data

A typical use for ""data"" pointers in struct {in,out}put_stream_buffer
is to store a pointer to struct audio_stream while it is held for
cached access. Add a __sparse_cache annotation to them to handle that
case.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",118,48,1
"thesofproject/sof","3609fa6fc64cead24cd03ded690638c414eb4cd8","tlauda","2020-02-28 11:19:46","false","ipc: use notifications allocated by sources

Changes implementation of notifications allocation.
Instead of using common empty list of messages let's
switch to allocating message per source of notification.
This way we won't have problem with memory and lack of
empty messages and also we will be able to optimize memory.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",73,21,0
"thesofproject/sof","1f97d44a3b474664263583e6c0b1349afcf24b0c","tlauda","2019-01-17 16:59:35","false","work: proper timeout for new and rescheduled work

Takes work flag into consideration during initial and
rescheduled timeout setup.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",57,7,0
"thesofproject/sof","8e7634674126fe657b0645adafd13d52f48a2437","tlauda","2020-01-13 14:22:00","false","trace: add missing spinlocks

Adds missing spinlocks in trace_on(), trace_off() and
trace_flush() functions.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",77,19,0
"thesofproject/sof","56f52b96a3ea482969d8e45ecfe5c38c5b166517","tlauda","2018-08-14 12:45:40","false","memory: add cache_to_uncache and uncache_to_cache macros

Adds macros, which allows to retrieve cached/uncached version
of memory pointer.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",16,2,0
"thesofproject/sof","5d554c515d43ddd3ed4148cd22f2a95d135dff2c","tlauda","2019-04-17 07:51:42","false","host: remove check for host buffer alignment

Removes check for host buffer alignment to period size.
This check is deprecated as we are correctly handling
split transfers.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",50,10,0
"thesofproject/sof","b7591b579e5d4899bca45707629b86748a8a9480","tlauda","2019-09-13 13:18:33","false","dma: add core to dma_chan_data structure

Adds core to dma_chan_data structure. This way we can
easily identify which core currently owns the DMA channel.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,15,0
"thesofproject/sof","bdd888130180aa719a637caf3b5c527229079191","bardliao","2021-05-25 02:48:40","false","ipc: dai-intel: add SOF_DAI_INTEL_SSP_CLKCTRL_MCLK/BCLK_ES bits

Add two clks_control bits. MCLK and/or BCLK will start during hw_params
and stop during hw_free if the corresponding bit is set.

This is tagged as a ABI 3.19 change.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",82,36,0
"thesofproject/sof","dc8cf3e4d544266bc6319d97f9be427592051931","fredoh9","2020-03-13 05:53:25","false","topology: add equalizer to hda generic topology

Add EQIIR and EQFIR to first playback pipeline. This help to expand more
equalizer testing across platforms.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",83,21,0
"thesofproject/sof","acad9bbf9464ab232654ca2d8b4c755f0d434907","lyakh","2019-01-10 13:23:49","false","work: make work_new_queue() static

work_new_queue() is never called outside of work.c, make it static.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",57,7,0
"thesofproject/sof","35e438501fb6b0e93ed7a05abde48c04c81f2f94","fredoh9","2019-05-03 18:55:37","false","topology: hda: fix virtual widget warnings

Add some more virtual widgets to suppress the machine driver errors.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",47,11,0
"thesofproject/sof","101912b93493bd45dedd4ce0833e1e8a94970c02","dbaluta","2020-12-29 08:45:02","false","logger: Reduce one level of indentation

There is one extra level of identation for all the
code inside format_file_name function.

Remove that to enhance readability.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",72,31,0
"thesofproject/sof","9fcfd751c9b2cd409b9a0cc65e12a7f35282c346","dbaluta","2021-02-03 19:28:45","false","codec: cadence: Add codec API functions symbols

Cadence library comes with various codecs. In order to support one
codec we need to initialize the API member of cadence_api with exported
library function.

This patch adds Cadence exported functions for aac, bsac, dabplus, drm
and mp3 codecs.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",70,32,0
"thesofproject/sof","30d6a967c02455abaea047e99e277b770e71e237","dbaluta","2019-05-15 07:37:27","false","platform: imx8: Initialize memap

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",65,11,0
"thesofproject/sof","25493e5d44fe1bc74950dad3c77d73bfa51dd10a","dbaluta","2022-11-11 09:42:52","false","zephyr: Add zephyr lib.c standalone file

We need this in order to export symbols to external libraries.

E.g Cadence library needs __vec_memset / __vec_memcpy.

Previous commit d9aed376d59b (""zephyr: rtos: Add __vec_memcpy /
__vec_memset"") is not enough in the case of external libs.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",97,53,1
"thesofproject/sof","9fc0badb4d7cd55f743568784bfb9ad85f2a5ff8","serhiy-katsyuba-intel","2022-08-23 18:35:44","false","ipc4: add mixin/mixout channel remapping support

Adds channel remapping feature support to mixin/mixout.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",111,51,1
"thesofproject/sof","72d19a703065ca89d467287226eb7cf09408f6ad","softwarecki","2023-07-12 13:51:47","false","pcm_converter: Add support for copying 8-bit formats

Added support for copying 8-bit unsigned probes in 8 and 16 bit containers.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",31,61,1
"thesofproject/sof","79fe66df6b2d72ac912c2a5a0b18652c6a4ec3a1","abonislawski","2020-08-11 16:05:31","false","ext_manifest: add simple config data element with IPC_MSG_SIZE

To avoid lots of single value structures this will introduce config data element
which will contain several simple token/value pairs

At initial version it will contain IPC_MSG_SIZE elem
which will inform kernel about maximum IPC msg size

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",73,26,0
"thesofproject/sof","f6e2ee4520aeb9fa173ede4d3a6f82984966e8fa","ranj063","2023-05-02 19:36:54","false","component-ext: Remove comp_get_dai()

The dai_data can simply be accessed via the copier_data. There is no
copier with chain DMA anymore, so no need to special handle that case
in pipeline_comp_trigger() either.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,59,1
"thesofproject/sof","dcbee3cdf3dcd313d1642684ac54a6f980ce4e92","abonislawski","2020-11-18 08:05:17","false","mixer: dont stop mixer on pause

Dont stop mixer on pause and write zeros
if all sources are inactive

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",73,30,0
"thesofproject/sof","a1dd2221126569a21c35ed95323a839afc4e6993","ranj063","2022-01-05 23:15:22","false","topology2: move all cavs topologies

Move all cavs tooplogies to the cavs folder.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,43,1
"thesofproject/sof","735d9e9fb8fac8d1bfa19a92f90a15c5db24ad68","abonislawski","2019-06-03 12:13:47","false","linker: fix for symbol overwrite in byt linker

It will fix symbol overwriting _system_heap_start was already used in system_heap section

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",68,12,0
"thesofproject/sof","07d5432d5c4cc1beff4d3aefac0217e53ec9de82","ranj063","2022-02-28 20:42:30","false","codec_adapter: Modify the process API signature

Modify the signature of the process API in the module interface to pass
the input/output buffers along with the counts of the number of input
and output buffers.

Please note that the pass input/output buffers are not used at this
point. The codec implementations will be modified in the follow-up
patches to use them.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",113,45,1
"thesofproject/sof","f8ad12734db153535d0899f964caa937bbc913e7","ranj063","2023-05-30 15:38:37","false","topology2: cavs-sdw: Add option for passthrough pipelines

Add a compile time option to build SDW topologies with passthrough
pipelines.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",47,60,1
"thesofproject/sof","dc41f390096ee5356517a085058344dae6163dd7","ranj063","2023-05-02 19:39:59","false","dai-zephyr/dai-legacy: Use comp_dai_get_hw_params()

So that the correct op will be invoked when this function is invoked
with a copier device.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,59,1
"thesofproject/sof","68866f2c1fd334aca4d96681f0a2bbfe11bed992","ranj063","2022-09-14 23:50:50","false","test: volume: remove unused code

Volume component no longer does format conversion. Remove the unused
test code.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",104,51,1
"thesofproject/sof","57d567c2e5f0ca5b99f84d03b36a0e60acd59633","abonislawski","2019-03-05 12:05:30","false","rimage: make a ""Module reading"" view similar to ""Module writing"" view

Size column in both cases instread of Bytes and Size
Hex view in both cases instead of Dec and Hex

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",66,9,0
"thesofproject/sof","304995621913e5bc14e23135271281878198135b","abonislawski","2020-08-11 17:51:00","false","ext_manifest: add platform-specific config elem

At initial version it will add CAVS_LPRO for CAVS platforms,
OUTBOX_SIZE and INBOX_SIZE

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",73,26,0
"thesofproject/sof","c94dca8be1c840d1d6aee6e26f576892c08d3c4c","ranj063","2023-03-31 19:27:29","false","topology2: sof-hda-generic: No need to include dai-copier-gain-mixin-capture

It is not used in the topology.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",56,58,1
"thesofproject/sof","ddbd2d655faa936bfaa9340b18a9f0e08a373e21","ranj063","2018-06-26 05:17:03","false","topology: add more dmic test topologies

This patch modifies the test topology generator to add dmic topologies
with pre-defined PDM controller configurations, sample rates and
formats.

It also modifies the DMIC_CONFIG macro to get the number of
active pdm from the pdm config.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",3,1,0
"thesofproject/sof","caff7a372603b0107be6c78c701517263fdd65b8","ranj063","2022-01-14 20:41:34","false","codec_adapter: remove macro CODEC_INTERFACE_ID()

Interface ID has been replaced with UUID. So no need for the unused
macro.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",117,43,1
"thesofproject/sof","9050d82a7d7dd588bd0267d17ad2b6ec0a2379b6","cujomalainey","2018-10-02 20:54:04","false","Use passed in number of channels for pipeline

Pipelines should not expose more channels than what they are configured
to support.

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",34,4,0
"thesofproject/sof","266a8f82b779a7484547c770a914373fd50a4f24","cujomalainey","2023-07-14 00:42:43","false","audio: rtnr: add stub for testing

Fuzzing and CI only stub library

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",32,61,1
"thesofproject/sof","c66e26a9cf3245b58ae4479f9e5bd2be10e3c443","marc-hb","2021-10-18 23:31:18","false","sof_ri_info: fix wrong begin_off in parse_mft_extension()

This broke parsing any extension past the first one.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",122,41,1
"thesofproject/sof","078ead9c65dbbeacb09bdede7fc3d039a41f74fa","abonislawski","2019-03-14 12:40:15","false","Trace: send trace errors as normal logs to dma trace buffer if TRACEE disabled

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",68,9,0
"thesofproject/sof","e28c429bc6356705369f11ca4890d88fc5b2df7d","ranj063","2022-07-19 18:17:02","false","Revert ""module_adapter: Add a new helper to update input/output stream buffers""

This reverts commit ea72e3e97e10acb27d02c3692b006c4f66fabfe4.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,50,1
"thesofproject/sof","a10b5dcf85294f08d0e9c1eb2634bbff2d529f57","ranj063","2021-07-08 17:28:43","false","topology: cavs-nocodec: Add deepbuffer pipeline to SSP0 and SSP2

Add a deepbuffer pipelines connected to the the mixer-dai
pipeline for SSP0 and SSP2. The pipeline deadlines are left at
1ms for now and will be changed later after the mixer pipelines
are validated.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",88,37,0
"thesofproject/sof","2ec2c2101b1d765f9cfe7bcb13ac3a3a3cc8d165","abonislawski","2019-04-02 14:19:23","false","panic: fix faulty panic handling

This commit will change the order of functions in panic_rewind() to fix SOF_IPC_PANIC_STACK in dump_stack().
Thats because arch_dump_regs() function is not able to make a 100% safe return

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",51,10,0
"thesofproject/sof","108912bba8461ac41a59414448f90e5920018e6a","ymdatta","2020-07-30 17:26:49","false","tools: testbench:add null pointer variable check before accessing it

When the realloc() function fails, a NULL pointer is returned. But,
if the size argument is zero, then also NULL is returned. So, to
differentiate that, we also check if size is non zero. Only if
pointer is NULL and size is non-zero, we come to the conclusion that
realloc() failed and the allocated memory till now is freed and
appropriate error is returned.

If realloc is called on a pointer and fails, the memory pointed by
the pointer isn't freed. When realloc() fails, even this memory
is freed.

Signed-off-by: Mohana Datta Yelugoti <ymdatta.work@gmail.com>",80,26,0
"thesofproject/sof","37bd20a2795d6c69059b1bd587a2f6e9321788bb","wwittbrx","2019-06-05 09:50:29","false","include: user: selector: Move selector configuration structure

Move selector configuration structure to user header folder to expose it to users such as applications/tools.
The configuration structure is needed to create a binary blob that allows to control the component.

Signed-off-by: WojciechX Wittbrodt <wojciechx.wittbrodt@linux.intel.com>",62,12,0
"thesofproject/sof","2d4d11d050accb0e6ceb3bc3cbe6b8ad6d7b13a2","lrgirdwo","2023-03-24 11:47:52","false","gitignore: ignore testbench test results files

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",57,58,1
"thesofproject/sof","ba32f4ad0b01ab9a12ce45254a02828c7bf97611","plbossart","2019-06-25 09:54:55","false","topology: SoundWire topologies for CML and ICL

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>
Signed-off-by: Rander Wang <rander.wang@linux.intel.com>
Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",45,13,0
"thesofproject/sof","dd98c4721e8653777679ced771b9b97f727b06e8","lrgirdwo","2018-12-07 17:03:02","false","topology: apl: nocodec config out of host GW DMAC channels

By default topology is using too many capture and playback PCMs, DAIs and
pipelines for available host GW DMAC channels. Comment out some so that
DMAC channels stay within bounds. This also gives users options to
re-enable for theer given test HW.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",44,6,0
"thesofproject/sof","e78187c6d1cdec38684ac491a06b84a59e78652c","plbossart","2022-03-15 22:00:18","false","topology2: cavs: remove 'windows-simple-pipeline'

There's no reason why we must have multiple versions of topologies.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",107,45,1
"thesofproject/sof","45918aa19b01720978e2eb690e6fefb85d4e03e2","lrgirdwo","2021-05-17 12:24:04","false","dai: abstract the DAI hardware configuration

Currently the DAI HW configuration is tightly bound to the IPC major
version and IPC structures. Provide a mechanism whereby different
IPC data structures can be passed for DAI configuration.

This change does the following changes.

1) Pass a common ipc_config_dai structure to all dai config call. This
allows retention of common logic that uses this common data.

2) Provide a IPC specific private data pointer to the dai config that
can be interpreted by the DAI as custom data. Today this is the
existing IPC, but it could also support an NHLT binary register blob in
the future.

3) Splits ipc specific code out of src/audio/dai.c and into
src/ipc/ipc3-dai.c.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",87,35,0
"thesofproject/sof","460c41aa661b918f543f86ed3d48bc5042e41fa2","lrgirdwo","2019-09-13 14:10:44","false","tgl: platform: removed unused scheduling macros.

No longer used so remove.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",60,15,0
"thesofproject/sof","6b0efa7004e4e4b6143f82e4590a17a0e78c8806","lrgirdwo","2020-06-25 15:10:13","false","trace: ipc: fix gcc unused variable warning when trace disabled.

Already declared on line 57

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",70,25,0
"thesofproject/sof","40b9e319258c9ad66cffc269cc057661ed127866","lrgirdwo","2023-08-30 23:11:27","false","ipc4: Add preprocessor directive

Fix the base_fw.h file to add the missing preprocessor directive.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",25,63,1
"thesofproject/sof","853c0a79080c76c0b9d0f8170ed897f11335ebd3","balakishorepati","2021-08-04 10:59:29","false","CODEOWNERS: add code owners for amd platforms

Add code owners for amd platforms.

Signed-off-by: balapati <balakishore.pati@amd.com>",113,38,0
"thesofproject/sof","cbbc6afd359436336f7b469d9507a1a1fcee1c72","xun2z","2019-04-02 00:26:39","false","tools: test: topology: add argument to fix build error in test tplg

Add one argument in test-tone-playback.m4 to fix the building error
of insufficient PIPELINE_ADD arguments.

Signed-off-by: Xun Zhang <xun2.zhang@intel.com>",52,10,0
"thesofproject/sof","cbbd3d17b63cf47f6caa5a9db70876b4d53d4c08","ranj063","2023-05-06 19:41:39","false","copier: Use dai_zephyr_free() for multi endpoint DAIs

In preparation removing the creating of DAI devices for multiple
endpoint DAIs, replace the call to the endpoint device's free op with
dai_zephyr_free().

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",53,59,1
"thesofproject/sof","529b1d0cc20a17bb65fbc6d2f52e91f588833950","chunxu-li","2022-03-03 06:38:08","false","platform: mtk: add afe-platform support for mt8186

Add memif data for AFE
Add common and regs header for AFE
Add AFE platform for mt8186 audio/dsp

AFE: the abbreviation for Audio Front End

Signed-off-by: Chunxu Li <chunxu.li@mediatek.com>",113,45,1
"thesofproject/sof","ae80d3b8af6e5ea2a2c4757f2415229a5c31292e","aiChaoSONG","2021-07-07 07:03:06","false","topology2: add PCM class

Add class definition for pcm, pcm object
can be instantiated as:
    Object.PCM.pcm.""N"" {
	id		2
	pcm_name	""Headset""
	direction	""playback""
    }

Signed-off-by: Ranjani Sridharan <ranjani.sidharan@linux.intel.com>
Signed-off-by: Chao Song <chao.song@linux.intel.com>",87,37,0
"thesofproject/sof","b0ae15a0bc17b1eea2e3e3b13b15b1d98ab1e5e3","chunxu-li","2022-12-13 12:07:42","false","topology1: mt8186: support 1ms pipeline capture period

Default support 1ms period capture pipeline to update host
position more precisely.

Signed-off-by: Chunxu Li <chunxu.li@mediatek.com>",98,54,1
"thesofproject/sof","b8b96a20bb02917fe17e97039fb7fb993b7c958a","dianacretu","2020-03-20 12:37:02","false","CI: travis: Add boot test for i.MX8M

i.MX8M is now supported in qemu up to boot. So, add
it to boottest list.

Signed-off-by: Diana Cretu <dianacretu2806@gmail.com>",67,22,0
"thesofproject/sof","179f23331edac2804e1cec972286492ac92bc62e","marc-hb","2023-05-15 22:36:31","false",".github/sparse-zephyr: switch to newer -DZEPHYR_SCA_VARIANT=sparse

-DSPARSE=y still works but has been deprecated for a while.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",51,59,1
"thesofproject/sof","d15474e67e2c6ba166c248b04c2ff2f72ab0da6c","andrula-song","2022-11-01 09:04:27","false","Audio: replace the IIR lib used by EQ and TDFB with DF1

Compared with DF2T, the DF1 has better performance on low frequency and
saves about 9.9% cycles on HiFi3 version, so select DF1 instead of DF2T
as the default IIR lib for component EQ and TDFB.

Signed-off-by: Andrula Song <xiaoyuan.song@intel.com>",89,53,1
"thesofproject/sof","608833cf27afd0c327e97929f8c0222064c4ee71","aborisovich","2022-07-14 15:06:19","false","xtensa-build-zephyr.py: use west manifest

Added usage of west manifest in the script to update both
SOF and zephyr dependencies.
Renamed ""clone-mode"" to ""update"" flag - the logic where
sof dependencies and zephyr with dependencies is cloned.
Removed ""point-mode"" from script as it will no longer work
(west manifests require fixed directory structure).
Removed ""zephyr revision"" or ""-z"" argument as it is no longer
needed (now revision may be set in west.yml manifest).
Added ""-p"" pristine flag to rebuild platforms while removing build
directory.

Co-developed-by: Krzysztof Frydryk <krzysztofx.frydryk@intel.com>
Signed-off-by: Krzysztof Frydryk <krzysztofx.frydryk@intel.com>
Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",111,49,1
"thesofproject/sof","c454399e8890c1d7eb007857f0dbe018d244eeb7","lgirdwood","2018-07-03 08:39:30","true","Merge pull request #32 from ranj063/topic/host

Host updates",7,1,0
"thesofproject/sof","c44a4549d458d2040eebae087f701a105ff081e4","mrajwa","2019-06-08 12:37:54","false","scheduler: enable idle task to be executed more than once

Some idle task like for example KWD draining needs
significant amount of time to finish their job.
For example, to drain whole history buffer 6 miliseconds
are needed in non-synchronied mode and as much as 2100
miliseconds in synchronized mode with period 400 frames.
Therefore it is vital to exit idle task when it itself
is in *idle* state and allow other tasks to do their
job.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",54,12,0
"thesofproject/sof","e39d0729e7eb5a276aa278f60752a87bdd6a4d4d","mrajwa","2019-04-19 09:14:36","false","CMOCKA-KPB: perform copy test and its verification

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",48,10,0
"thesofproject/sof","aae1c4c1d065006d2092039618ccc6c857c9872f","mrajwa","2019-02-05 14:59:27","false","GDB: Added support for memory read.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",56,8,0
"thesofproject/sof","9df6d36a52c3eac2421afeae3a5e34d4a0212f0e","lgirdwood","2018-10-15 11:48:45","true","Merge pull request #103 from bkokoszx/logger_usage

rmbox: usage function refinement",34,4,0
"thesofproject/sof","fe8ec158a0d948ae04164b500daba6ddeecbc889","cujomalainey","2019-03-21 23:13:35","false","mux: make init function static

Fixes checkpatch error that slipped in

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",66,10,0
"thesofproject/sof","ffbc717c30343d7c6a17a33cd235b2344055eda1","cujomalainey","2021-09-21 23:55:00","false","style: make delcaration match implementations

minor style violation, these should match exactly

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",117,40,0
"thesofproject/sof","89e7983498fda903d0718b17ec03f81bff37d424","cujomalainey","2021-06-02 23:23:49","false","probe: fix realloc mishandling

you need to use a temp var always with realloc, otherwise you through
away your pointer to your memory (which is still valid) in the event of
realloc failing.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",82,36,0
"thesofproject/sof","b31d19b6c2ad3ec51db5f7362ec4acfec86b0317","lyakh","2020-09-30 14:34:52","false","zephyr: fix build after a recent trace filter PR

Commit 0e1176d9434a (""trace: Update trace level after ipc message"")
broke building under Zephyr. Fix the breakage by effectively disabling
functionality, to be properly fixed later.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",66,28,0
"thesofproject/sof","e8b2d436c9139426935a9287de78229e764f6c62","lyakh","2021-07-30 15:05:06","false","clock: (cosmetic) make frequency tables and sources static const

Make platform_cpu_freq[], platform_ssp_freq[] and
platform_ssp_freq_sources[] arrays static and constant on multiple
platforms.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",108,38,0
"thesofproject/sof","32bf4deab2a32137a702a5e3a7cfab7e76cce7fc","singalsu","2018-08-21 10:02:04","false","SRC: Use 16 bit coefficients when FW is built with gcc

This patch changes the 16/32 bits coefficients selection macros to
always use 16 bit coefficient set when compiled with other than xt-xcc.
It was found out that gcc compiled SRC can't maintain real-time speed
in HiFi3 platform.

With xt-xcc compilation HiFiEP platforms will use 16 bit for RAM saving
(speed isn't an issue with 32 bit) and HiFi3 platforms will continue
using 32 bit coefficients. Only the 32 bit set provides the larger
conversions set and default quality.

With this change the APL and similar HiFi3 platforms can play via SRC
pipeline 8/16/32/48 kHz rate audio.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",19,3,0
"thesofproject/sof","db47e28154f3282941c501672e66332a7913e271","singalsu","2020-10-26 16:28:40","false","Tools: Test: Audio: Cleanup for TDFB component test script

The common array identifier string is brought up for easier edit to
test other array geometries than this default. A typo about 16 kHz
is fixed, the test runs at 48 kHz testbench default rate.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",74,29,0
"thesofproject/sof","c614ed38bb6e5ce7239d241e5312699a155a99bd","singalsu","2020-04-20 14:19:40","false","Testbench: Parse all buffer widget vendor arrays

In some topologies there is a component tokens array after buffer
tokens array for buffer widget. Since the earlier code version was
able to handle only single array and did not skip the remaining it
caused the remaining topology parsing to go out of sync and fail.

This patch changes the vendor array parsing to be similar as for PCM
widget that already had capability to handle several arrays. The core
id is retrieved if present in topology and passed via IPC.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",86,23,0
"thesofproject/sof","5dcace1211e707c3696407d7ea455f7d12082389","singalsu","2020-01-31 15:06:21","false","Testbench: Propagate fail from topology parse load widget

This patch avoids the testbench to crash when file read or write
file open was not successful. E.g. invoking testbench with
incorrect input file name caused a segfault.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",76,20,0
"thesofproject/sof","403c33f8296564f6fc78d9d41fd4e50961652199","andyross","2023-06-06 15:08:33","false","ipc: Tolerate uninitialized source/sink list nodes

These list heads in the comp_dev struct are not uniformly initialized
(grepping the source, the list_init() calls for these fields seem to
be spread around the source tree in individual components).  Fuzzing
is seeing nulls here, presumably because it's possible to reach
ipc_comp_free() in ""unintended lifecycle"" circumstances where they
weren't initialized.  Check the fields before crashing.

Signed-off-by: Andy Ross <andyross@google.com>",45,60,1
"thesofproject/sof","b84cb09f2712c75b6a3a0999ce88100d12508605","slawblauciak","2018-06-19 16:39:34","false","test: audio buffer unit tests
Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",1,1,0
"thesofproject/sof","553137d7414f632d4d5e81d3c1eba5a6a33b8fc3","keyonjie","2018-06-25 08:55:50","false","topology: sof-apl-nocodec: enable multiple SSP pipelines

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",4,1,0
"thesofproject/sof","44b37d19a24cab75d83f99f3d9083f5574917aa3","keyonjie","2021-07-21 10:06:24","false","config: sue: change image_size to the real SRAM size

We have 47 bank HP and 1 bank LP SRAM on Suecreek, change the toml config file
to reflect that.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",93,38,0
"thesofproject/sof","12ea3a0f7f3cefb90d1d16625a9270b29acabc95","keyonjie","2019-05-05 10:22:14","false","[RFC]selector: need treat selector as endpoint for command handling

For hw_params(), prepare(), trigger(), reset() commands, we should treat
seletor as endpoint(don't propagate them upstream anymore), otherwise,
those upstream components(e.g. kpb and dai) will complain about double
handling and status might be wrong, errors like ""source component buffer
has not enough data available"" will happen.

This is only RFC to raise attention of this issue, it is not good fix,
please help comment.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",47,11,0
"thesofproject/sof","6d48dc5ca42f4666ecb018e96c5ad0f119612479","lyakh","2023-01-24 12:59:07","false","zephyr: add a macro for module initialisation

This macro integrates SOF modules into Zephyr initialisation
framework. SOF module initialisation functions use
DECLARE_MODULE_ADAPTER() or DECLARE_MODULE() to register with the SOF
native initialisation scheme, now the same initialisation functions
can be used with the new SOF_MODULE_INIT() macro to integrate them
into the Zephyr initialisation flow.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","c0f5668a821b9597b8f1b76f6297fc91292af80d","marc-hb","2021-06-25 05:37:55","false","panic: add comments, especially link to dump corruption bug #1346

Zero functional change.

These comments would have saved me at least a day.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,37,0
"thesofproject/sof","f3fc87aca2e76fd20700c1d9efbcef1d6f2a8679","xiulipan","2018-09-26 10:44:28","false","panic: add filename and line number into panic info

Add filename and line number of the panic call into the panic info. Then
dump this info to host.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",37,4,0
"thesofproject/sof","d0cb4780075e8c0675ac83c981eb430f65a1d50a","andrula-song","2023-07-31 07:54:15","false","Audio: MFCC: Add HiFi3 implementation of MFCC

Add HiFi3 implementation of MFCC.

Signed-off-by: Andrula Song <andrula.song@intel.com>",32,62,1
"thesofproject/sof","68a237c963a89906c8723bbc18ab929d4f66b4d7","libinyang","2019-04-22 13:18:46","false","topology: DMIC: DMIC16k use pipe-volume-capture-16khz.m4

DMIC16k only supports 16KHz sample rate. It should use
pipe-volume-capture-16khz.m4 to create the pipe which supports
the 16KHz recording.

Signed-off-by: Libin Yang <libin.yang@intel.com>",47,11,0
"thesofproject/sof","f755277000b56a4a240809ba1a6bb52288c4895d","libinyang","2020-02-07 06:23:11","false","topology: sof-icl-rt711-rt1308-rt715 add MIC MUTE LED support

Add support of MIC Mute LED for capture on
sof-icl-rt711-rt1308-rt715 platform.

Signed-off-by: Libin Yang <libin.yang@linux.intel.com>",78,20,0
"thesofproject/sof","7709924f16accd45fc2b159d983d84f6e994afd6","dbaluta","2020-10-20 08:51:24","false","drivers: imx: sai: Make sure Tx/Rx is disabled at stop

TE/RE bit will remain set until the end of current frame. So,
for example, even if we set TE to 0 the transmitter will still be
enabled until the end of current frame.

This can have unexpected results when quickly restarting a channel.
Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",72,29,0
"thesofproject/sof","46897802a4549a77e26949ef7bbf54b4c480caaf","tlauda","2020-05-27 11:15:23","false","timestamp: move functionality to separate driver

Moves timestamp functionality into separate driver. This way every
future platform can have its own implementation.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",95,24,0
"thesofproject/sof","1070ff5086de1f18499949d646c8f5cedd78044f","tlauda","2020-05-27 10:02:35","false","mn: use M/N dividers based on platform support

Compiles out M/N divider related functions based on
whether platform supports them or not. Currently
all cAVS platforms support dividers.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",95,24,0
"thesofproject/sof","502b5817e328f0a1edb779d9ec9dea7b9e937b16","lgirdwood","2020-01-14 13:41:10","true","Merge pull request #2 from dbaluta/db

rimage: Add support for i.MX8X",77,19,0
"thesofproject/sof","75b6586f99d3e5fe32443817718fcd0900fd0b05","zhuyingjiang","2018-10-18 06:39:36","false","rimage: add firmware 1.5 manifest header

add manifest for skylake/kabylake, version 1.5

Signed-off-by: Zhu Yingjiang <yingjiang.zhu@linux.intel.com>",33,5,0
"thesofproject/sof","9c9db8b76ef5a7bac6ee0307236300411ed169b4","tlauda","2019-10-01 09:54:54","false","kconfig: add interrupt related options

Adds options, that allow to select the supported interrupt
levels on given platform. Disabling any interrupt level
allows for less memory consumption. Currently all the options
are enabled by default.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,16,0
"thesofproject/sof","459d9519f8d93c007b4dbcbfb778a9f3efc7b8b2","tlauda","2019-10-09 10:09:50","false","pipeline: reset pipeline in non-atomic context

With new schedulers implementation we don't need to reset
pipeline in atomic context anymore.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,16,0
"thesofproject/sof","61d153bbe3dd228da07079d9777cde5bdef9c3fd","sathyap-chrome","2019-09-23 17:24:50","false","topology: Add ABI version utilities

Some of the features on topology need to have
ABI version check. This adds few definitions to
check ABI version being 3.9 or more.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Sathya Prakash M R <sathya.prakash.m.r@intel.com>",64,16,0
"thesofproject/sof","901be03a059e888f86fc265da52f04e528115f6f","tlauda","2019-07-29 07:22:40","false","byt: update xtensa core headers

Updates xtensa core headers for byt and cht platforms.
The one previously used had wrong values for these
platforms.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",49,14,0
"thesofproject/sof","d5a10013aa3dd8abbf1a8f9efc31a2379cce614b","tlauda","2019-08-01 12:19:15","false","dw-dma: prevent from double stop sequence

Adds check in dw-dma to make sure the channel is in fact
in active state before doing anything.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",53,14,0
"thesofproject/sof","079558d3b95b69761b3597e15c721cc63d15dc54","lgirdwood","2018-10-18 14:20:26","true","Merge pull request #495 from mmaka1/drv-alloc-fix

alloc: fixed memory leaks in dw-dma",33,5,0
"thesofproject/sof","04faada01b6cd4bd7bbc742b63f98823cc2c3fc8","lgirdwood","2018-07-03 09:07:15","true","Merge pull request #39 from tlauda/topic/core_context

arch: core_context implementation",7,1,0
"thesofproject/sof","a7103e025588d805b6ae9bdb5442bb3909ae1723","brentlu","2022-04-22 02:22:55","false","topology: sof-tgl-max98357a-rt5682: include intel-boards for link ID

Include intel-boards.m4 for BE DAI Link ID definition.

Signed-off-by: Brent Lu <brent.lu@intel.com>",114,47,1
"thesofproject/sof","4572a5a59db01f4c6d96c746159aac89b4242ce3","keyonjie","2020-08-10 02:15:06","false","test: topology: includes utils.m4 first

Move the including of utils.m4 to first as it is needed by other
component m4 files.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",77,26,0
"thesofproject/sof","ebfe717f66a524ca035c6a080e52f7b1e5050067","serhiy-katsyuba-intel","2023-03-16 17:20:44","false","ipc4: Remove duplicate ALH_MULTI_GTW_BASE declaration

In ipc4/alh.h we have:
 #define IPC4_ALH_MULTI_GTW_BASE 0x50
In ipc4/gateway.h:
 #define ALH_MULTI_GTW_BASE 0x50

These were added almost simultaneously by two separate pull-requests.
No need to have them both.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",56,57,1
"thesofproject/sof","10b3c35c673bbb025e29a22a338786b15bd8b63f","serhiy-katsyuba-intel","2023-01-31 10:51:54","false","ipc4: fix IPC reply log message

Wrong (uninitialized) reply.extension value was printed in log as
msg_reply (not reply) is actually passed to ipc_msg_send().

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",51,56,1
"thesofproject/sof","f873a99dd7ccc7fe1f9620775669ff7f7ac47416","serhiy-katsyuba-intel","2023-09-29 13:20:29","false","ipc4: mixin/mixout: Remove redundant source_info stuff

Mutex protected module_source_info was an old failed attempt to support
cross-core connection of mixin and mixout. That functionality was never
properly tested as FW did not support cross-core connections there.

For connected mixin and mixout located on same core, that functionality
is not needed. For cross-core connection, that functionality creates
dead-lock.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",17,64,1
"thesofproject/sof","901f991eee82df45df9e32570584219af0faceef","ktrzcinx","2020-07-08 11:38:58","false","logger: Validate by src_hash instead of abi version from fw_ready

ABI version saved in fw_ready doesn't match with DBG_ABI version
saved in ldc file even for proper pair of fw and ldc file.
Moreover ldc file content changes at any log modyfication, what
is not related with DBG_ABI change, so this way of solving this
problem is incorrect.
Introduced src_hash value change solves both problems.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",78,25,0
"thesofproject/sof","d1b02d4ec8088ab6c08aaf011ceebcfd537a0637","ktrzcinx","2020-03-27 11:52:22","false","logger: Make CC_DESC string length indivisible by four

When variable length array, filled with string will be
placed in sucha manner that null terminator address will
be divisible by four, then it will be lost in output
binary file. It leads to troubles during scanning content
of such a section. Such a problem occur in firmware
and produce logger and FW debug ABI mismatch and it's why
logger output is broken.
After change length of XCC_TOOLS_VERSION to be none of
number four multiplication problem with logger disappear.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",66,22,0
"thesofproject/sof","43124daf39a961fa015761ad59ba3d6f19be7dfd","ktrzcinx","2020-09-24 16:10:48","false","alloc: Define new memory zone, shared

Shared memory shouldn't be connected with any cpu core,
because in general such an resource may be shared between
any number of arbitrary chosen cores.

Connecting it with with core 0 heap, leads to unbalanced
heap usage between core 0 and secondary cores.

Moreover operations like alloc and free may be called from
two different cores, what's not possible in current implementation.
Such an situation is especially possibly during handling resources
describing hardware components, eg. DAI or DMA, from two different
cores.

Moving shared memory management to dedicated heap, allows to easily
use another memory region, what may be needed to fulfill platform
specific demands.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",64,28,0
"thesofproject/sof","f8831495bdf16b8cc5b3ad7699406edff30d6acf","ktrzcinx","2020-02-06 13:59:29","false","doxygen: Fill missed argument description in *params functions

When some function has doxygen description then each argument should
have short description. In anothar situation, doxygen will generate
warning.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",78,20,0
"thesofproject/sof","78202631e76680fc3dc9913fdf24c06a412dbcfe","ktrzcinx","2020-08-27 11:56:20","false","pcm_converter: Reduce modulo operations

Module is expensive operation, so usage them in processing code
should be reduced.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",73,27,0
"thesofproject/sof","4cf57469b3ab9477a55f211bb0eccc7c193910b6","tlauda","2020-02-05 15:00:23","false","ipc: set buffer to inter-core

Sets buffers to inter-core if they are connecting components
from different cores. From now on FW supports pipelines,
where some of the components are offloaded to slave cores.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",77,20,0
"thesofproject/sof","81730d4da80a2815e23873f2191374a6ec8effdd","tlauda","2020-01-08 13:50:11","false","dai: moves dai_info structure to header

Moves dai_info structure to header, so it will become
available to other multiple modules.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",71,19,0
"thesofproject/sof","ad2123dd427174eee0c106a4540427c26cc9f55b","softwarecki","2023-10-26 10:35:48","false","lmdk: Add support for dynamic memory allocation by a loadable modules

This commit adds a necessary symbols in the linker script which allows use
a memory allocation functions from libc (malloc, calloc, etc.) in loadable
modules.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",7,65,1
"thesofproject/sof","d7e3d2b09183ebe1d120af80c936f8a2fd68a89d","softwarecki","2022-07-01 14:24:45","false","ipc4: Change declaration of node_id in ipc4_copier_gateway_cfg

Declare node_id in ipc4_copier_gateway_cfg structure as aproprietary type.
This change makes easier to reference the node_id field. Thanks to it,
you don't have to wonder what type the value should be casted. It make our
work easier and minimize the risk of a mistake.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",110,49,1
"thesofproject/sof","871f1825c378c12b93bf0c9007ad340bb66674d8","lyakh","2021-07-12 15:51:26","false","zephyr: fix memory allocation coherency

Commit 34bb9b728268 (""zephyr: wrapper: build SOF with Zephyr for imx"")
broke coherent memory allocations on Intel DSP platforms. Restore the
original code.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",87,37,0
"thesofproject/sof","c04b7fc13eb64ff70795ac16dab6dee37f50bb63","lyakh","2022-02-16 10:10:14","false","pipeline: fix aborting STOP or PAUSE propagation

When trigger.aborted is set, pipeline_trigger_run() also returns
PPL_STATUS_PATH_STOP. So the current test for trigger.aborted in
pipeline_task_cmd() after pipeline_trigger_run() is a left-over from
an earlier implementation and is never entered with the current flow.
In the current implementation, a typical playback topology like
[pipeline A] PCM -> ... - [pipeline B] mixer -> ... -> DAI
when a pause is triggered mixer will stop its propagation, set
trigger.aborted on pipeline B to true and return
PPL_STATUS_PATH_STOP. pipeline_task_cmd() is still running in the
context of pipeline A, so it will detect PPL_STATUS_PATH_STOP, check
that trigger.aborted is not set and terminate the task. Then the
scheduler will run the task for pipeline B, that one will verify,
that trigger.host == NULL, then find the trigger.aborted to be true
and will keep the task running.

In a topology, where the PCM, the mixer and the DAI all belong to the
same pipeline, when PAUSE is triggered, the whole pipeline should be
left running which is what this patch achieves by checkint
trigger.aborted when PPL_STATUS_PATH_STOP is returned by
pipeline_trigger_run().

BugLink: https://github.com/thesofproject/sof/issues/5257
Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",106,44,1
"thesofproject/sof","9976fb250213c5adba1241e91e4cbdd305794c6b","akloniex","2020-09-23 08:33:18","false","trace: Create vatrace_log() function taking variable argument list.

This separates trace filtering from actual sending of the message
and allows usage of sending function without filtering, when necessary.

Signed-off-by: Artur Kloniecki <arturx.kloniecki@linux.intel.com>",66,28,0
"thesofproject/sof","7bc3bde2036b5dc094e7e666a3590adeae45e5c9","fredoh9","2023-03-25 04:36:50","false","west.yml: update zephyr revision to fix MTL pause-resume

There is a merged MTL dmic fix.
https://github.com/zephyrproject-rtos/zephyr/pull/56209

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",57,58,1
"thesofproject/sof","2cc9b239db79c1f269b6a65f1a531d54c3daae35","ranj063","2021-10-26 03:48:57","false","asrc: use buffer acquire/release

instead of buffer_lock/unlock() which will be deprecated.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",127,41,1
"thesofproject/sof","24e1b7f6caceb48406803c2bc333decad5b9f8d4","tinghan-shen","2022-01-10 06:39:51","false","platform: mtk: add mt8186 memory layout and register definitions

Add memory layout and register address for mtk mt8186

Cache
  I-Cache: 64KB, 4-way Associativity
  D-Cache: 128KB, 4-way Associativity

External Memory
  DRAM: DSP can access DRAM shared with CPU
  L2TCM: 512KB DSP SRAM POOL

Currently, use
phy addr:0x60000000, size:0x1000000
dma phy addr: 0x61000000, size: 0x0100000

Signed-off-by: Tinghan Shen <tinghan.shen@mediatek.com>
Signed-off-by: Allen-KH Cheng <allen-kh.cheng@mediatek.com>",116,43,1
"thesofproject/sof","ed6ac05f6b884b5aa5597bf739fc97527bdab909","abonislawski","2019-04-08 13:28:02","false","coredump-reader: proper structs alignment with fw data

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",46,10,0
"thesofproject/sof","faf6696ea30fa7575740560690a2880a02768438","abonislawski","2019-04-08 11:47:48","false","coredump-reader: fix windowbase and windowstart calculations

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",46,10,0
"thesofproject/sof","bd918ada7f1f8456cf7b88c646909d642128e52c","ranj063","2021-10-05 02:54:17","false","trace: Add SOF_IPC_TRACE_DMA_FREE IPC command

This will be used to stop the trace DMA and free
its resources. This change is tagged for ABI 3.20.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",122,40,1
"thesofproject/sof","bccecb1a8eed84a0737fdf2878204adfb6cf845d","ranj063","2021-06-27 00:25:14","false","dai: only process DAI config for comps on cores that enabled

DAI config IPC is propagated to all DAI comps scheduled on
all cores but it should only be done if the secondary core is
enabled.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",75,37,0
"thesofproject/sof","54127b03741210bd01a5b248bd5cd9a6d7fa8c1b","groncarolonxp","2019-10-17 09:02:00","false","drivers: imx: sai: add one word to FIFO

FIFO should be pre-filled with one word as per RM
recommendation after TRCE has been anabled

Signed-off-by: Guido Roncarolo <guido.roncarolo@nxp.com>",64,16,0
"thesofproject/sof","0c2c0508856f96c27651836524f66b23e4d11375","ranj063","2022-11-30 16:28:03","false","ipc4: helper: Fix memory leaks during module binding

Connect and bind the source buffer before proceeding to do the same with
the sink buffer to disconnect, unbind and free the buffer properly in case
of errors.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",101,54,1
"thesofproject/sof","c17de6a9793e9554eff46e8659fd91be2ea3a3f3","mrajwa","2019-04-15 10:46:48","false","memory: enable LPSRAM on APL

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,10,0
"thesofproject/sof","cfaaa7ee53a2b087898c5516eadbef02dd6847a4","lgirdwood","2019-01-24 08:33:48","true","Merge pull request #880 from plbossart/fix/kmod_scripts

kmod_scripts: fix dependencies and add delays",55,8,0
"thesofproject/sof","fcb93569f03ab24e1224996a9ba5a4bb687425ea","mrajwa","2021-05-29 18:12:01","false","codec_adapter: cadence: change reset procedure

This patch simplifies reset procedure of cadence codecs
by only calling the init_process() function in which
XA_CMD_TYPE_INIT_PROCESS is the API call responsible for
the actual reset of codec parameters.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",83,36,0
"thesofproject/sof","9bbbac778a894d9a80dd40364c4f308388ad3ace","marc-hb","2023-05-09 22:40:20","false","xtensa-build-zephyr.py: call rimage_configuration() before building

This makes no difference now because it has no side-effect yet but it
will make a difference once it starts using `west config`.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",53,59,1
"thesofproject/sof","9d2857fe37bf6ed8ca4f8023f01f191572616113","serhiy-katsyuba-intel","2022-07-11 15:19:32","false","mixin/mixout all topologies support

Adds possibility to connect single mixin to multiple
mixouts. This allows for all possible mixin/mixout
topologies.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",109,49,1
"thesofproject/sof","13ce3345adde4f5a6744a2d6de53789cdfffa9ba","singalsu","2022-10-20 08:41:36","false","Audio: SRC: Fix generic SRC FIR off-by-one frame issue

This patch fixes the pointer arithmetic to start FIR calculation
from latest written PCM frame pointer. The rewind step was too
small and caused the first FIR coefficient to be multiplied with
the eldest frame in delay line while it should have pointed to
youngest. The second coefficient multiplied with youngest, etc.

The time shift for FIR coefficient caused a difference
to filter response vs. designed. Since especially in longer filters
the first tap value is near zero the impact was hard to notice.

The ""easy"" conversions such as 8 kHz to 48 kHz with short filters
and larger first tap values suffered most of this.

With this change THD+N (dB) for 8 kHz to 48 kHz improves:

		16 bits		24 bits		32 bits
Before		-60.59		-63.98		-63.98
After		-62.35		-80.39		-80.40

44.1 kHz to 48 kHz no impact:

		16 bits		24 bits		32 bits
Before		-62.36		-85.69		-85.72
After		-62.35		-85.69		-85.72

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",96,53,1
"thesofproject/sof","044d0b208d7fcc7bcafba5b4cac327d3f8d16794","singalsu","2022-11-07 17:54:02","false","Tools: Test: Audio: In SRC THD+N test apply standard low pass

This patch applies for conversions where Nyquist rate allows
a 20 kHz low-pass filter as specified in AES17 standard (test.fu).
The sweep test is set no higher than 20 kHz (test.f_end).

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",93,53,1
"thesofproject/sof","16236c0bf6ee9ffb2cce38c295945707be97d871","singalsu","2020-05-19 14:35:28","false","Audio: Add intermediate size SRC coefficients set

This patch adds a new small 32 bits SRC coefficients set. The conversions
quality is the same as in earlier 32 bit set but the support for high and
less common sample rates is removed. It saves RAM vs. the full set. By
default HiFi EP platforms use tiny set, APL uses small set, and other
platforms use std.

To avoid confusion the Kconfig option for 16 bit coefficients is renamed
to tiny. The kconfig option for 32 bit coefficients is renamed to std.
This gives three different choices for SRC coefficients size and
conversion quality.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",99,23,0
"thesofproject/sof","689e8e999f220356f69b8532216790fed18a9da4","marcinszkudlinski","2023-10-10 10:58:54","false","dp: LL tick source start/stop fix

as DP uses LL as a tick source, it starts an empty LL task
to ensure that an instance of LL is running
This applies to mostly to secondary cores, but is may happen
that there's no LL instance started on primary

This commit fixes 2 problems
 - LL tick source was stated once for every DP module
 - LL tick source wasn't stopped when there were no DP
   modules running anymore

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",13,64,1
"thesofproject/sof","bf6ae6dfa43be331f4810771f7ab324c143ec151","kv2019i","2023-06-05 12:29:05","false","west.yml: update Zephyr to 3.4.0-rc2

Forward Zephyr to commit 2ad1a24fd60d0df8cb45fb6ed6acf7b0d3820754 .

Contains 566 commits, including following:

dd09b04dc33e boards: xtensa: update rimage and west sign documentation
d98a7c2f8ddb soc: xtensa: cmake: add new WEST_SIGN_OPTS variable
794dff37754f boards: xtensa: mention the $HOME/.flexlmrc file alternative
ac3cafa2edd8 boards: xtensa: remove UP2 from README file
aa5b66be5f1f intel_adsp: cavs25: configure access to ALH
8e3437461d78 soc: intel_adsp: remove obsolete headers for cAVS platforms
44415eb881c8 intel_adsp: Initialize threadptr register
1c130d006099 arch: xtensa: Enable builds without the multithreading
f0b7c275bba9 boards: xtensa: intel_adsp_generic.rst: fix cAVS meaning
49c7aa56fa0c soc: intel_adsp: undefine NOP32
445f4e887712 arch/xtensa: undefine NOP32

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",45,60,1
"thesofproject/sof","57029398360454cde6f96a3bae18bb4de44e6136","kv2019i","2022-10-11 12:50:40","false","west.yml: upgrade Zephyr to ed661a6c6909

Upgrade Zephyr from 0956647aaf6bd2b1e840adcc86db503f274d84a9 to
ed661a6c6909b338035b026cfc101ddda65ab8eb (1020 commits, including
441 since v3.2.0 tag).

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",98,52,1
"thesofproject/sof","9ea2f05ac71b72b5c7e81b9d5271d1b3358dbe38","kv2019i","2023-02-07 17:06:47","false","ipc4 : send panic on Zephyr OS panic

Send panic notification message to host when panic happens. The panic
detail is built by Zephyr framework and included in debug memory window.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>
Signed-off-by: Rander Wang <rander.wang@intel.com>
Co-developed-by: Rander Wang <rander.wang@intel.com>",55,56,1
"thesofproject/sof","7ad6c23121df528fcb73a47ba38d0eaec1a8f213","bkokoszx","2018-10-11 09:34:14","false","rmbox: fix rmbox KW issues

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",33,4,0
"thesofproject/sof","2aa62e1e655dd74ca069f77ab7327568ab07c5f6","marc-hb","2020-10-30 17:46:12","false","rebuild-testbench.sh: don't build twice with combined ""make install""

""make + make install"" duplicates many steps, probably because of the
fatal combination of build timestamps + source hash, see PR #3353 for a
similar example.

A single, combined ""make install"" generates the exact same binary
outputs 30% faster and prints 30% shorter build logs.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",75,29,0
"thesofproject/sof","4aa1d9ab5b6bbd95c534011ff1977676472bac25","plbossart","2019-01-16 05:08:04","false","src/drivers/intel/haswell/timer.c: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","e70fd0fbf73bdf558a967c7d1cde3873e47960c6","plbossart","2022-06-30 18:13:23","false","topology1: sof-tgl-rt711-rt1308: make amplifier link configuration

HP Omen 16 devices have an amplifier on link3, add the required
configuration macro.

BugLink: https://github.com/thesofproject/linux/issues/3727
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",110,49,1
"thesofproject/sof","207c6fdbeed39b6ccd04a8b69e075808043e351e","lrgirdwo","2020-04-19 21:11:17","false","zephyr: add wrappers to bridge between Zephyr and SOF APIs.

Add a wrapper to convert SOF API calls to Zephyr equivalents. This allows
development to continue in parallel with xtos/HAL and Zephyr RTOSes until
parity is reached.

The initlial Zephyr APIs to be used are HAL, boot, IRQs, scheduling and
memory. The wrapper reflects this and will probably grow until feature
parity is reached when it can be deleted (as Zephyr APIs can be used
directly).

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",91,22,0
"thesofproject/sof","52b33a23b856105251c872fdb3d419434bdd7d58","lrgirdwo","2022-01-19 13:15:03","false","zephyr: spinlock: Align spinlock API to use Zephyr API

Align the SOF spinlock API with Zephyr spinlock API.

Currently SOF spinlock has two locking variants: with and without
disabling local IRQs. Since taking a spinlock potentially puts the
CPU into busy-looping, periods of time for holding spinlocks should
be kept as short as possible. This also means, that usually the CPU,
holding a spinlock shouldn't be interrupted. So usually spinlocks
should be taken in atomic contexts. Therefore using the version, not
locking local IRQs should only be done when IRQs are already
disabled. This then saves several CPU cycles, avoiding reading and
writing CPU status again. However, this should be only done with
extreme care and it introduces potential for current and future bugs,
including dead-locks.

Zephyr spinlock API always disables local IRQs. This makes it simpler
and less error prone. Switching to it potentially wastes several CPU
cycles in some locations, but makes the code more robust.

This is first part of work for spinlock Zephyr alignment, subsequent
updates will align headers and associated splinlock dependecies.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",113,44,1
"thesofproject/sof","3c4610016363626e55283d7e315036228d00beff","lyakh","2023-01-24 13:25:17","false","mixer: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register mixer, mixin and mixout with the
Zephyr initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","f0782e39d9c722a81ec1bc7e62862be1367c36e4","lyakh","2023-03-07 07:10:55","false","buffer: simplify buffer_from_list()

buffer_from_list() is always used for buffer objects, the type is
always struct comp_buffer. Hard code the type instead of always
specifying is as a parameter.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",56,57,1
"thesofproject/sof","23e81f7c20b42366449cd1703d6fcb9f50caa9f8","fredoh9","2022-07-06 19:01:35","false","topology2: cavs: add mixer-based hda pipelines to passthrough hdmi tplg for mtl

First two pipelines are mixer-based HDA playback and capture pipelines.
Tested with ALC256 HDA codec.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",110,49,1
"thesofproject/sof","8074caf3b54a2bd37178b0be9c01086ba4065c38","sathyap-chrome","2019-04-23 17:13:52","false","rimage: change feature mask to 0x1ff to support CML

CML supports feature mask of 0x1ff. With earlier manifest
the fw failed to load and fails at verfification of
feature mask

Signed-off-by: Sathya Prakash M R <sathya.prakash.m.r@intel.com>",49,11,0
"thesofproject/sof","f15512e920889238d2940f2b3be6b932705bceb2","ranj063","2018-06-28 03:14:57","false","host: move common testbench input parameters to header file

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",6,1,0
"thesofproject/sof","cbf0a1e35942b2558c1fb2605b767828395f58ca","ranj063","2021-04-28 19:26:38","false","pipeline: fix pipeline's scheduling comp setting

Move the code that sets the scheduling comp for
a pipeline to allow setting it in ipc_pipeline_complete().
This removes the restriction that the scheduling comp must
be set up before the pipeline widget and provides the
flexibility in the kernel to set up the widgets in any order
while parsing topology.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",81,35,0
"thesofproject/sof","d7f553f1a8836066980ba62f506be44e4ef590f6","abonislawski","2020-03-09 13:11:01","false","rimage: use lma if available

some sections may use different lma than vma address,
in such case rimage needs to use lma

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",85,21,0
"thesofproject/sof","c9820ccd47c9fc052e1c0c250d94f90628d3d385","ranj063","2023-05-06 19:39:39","false","copier: Avoid using device drv prepare() ops for multi endpoint case

Use the dai_zephyr_config_prepare() and dai_zephyr_prepare() instead in
preparation for removing the endpoint devices and buffers for the multi
endpoint DAI copiers.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",53,59,1
"thesofproject/sof","d4b27bfa8ba2b8deb88ec3bb1c9ab4b935535487","ranj063","2023-11-06 16:18:10","false","audio: google_rtc_audio_processing: Extract audio formats from base config extn

The reference audio format should be extracted from the base config
extension and set the buffer format based on the queue ID. The current
code works only by accident when the input and reference capture use the
same format.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",2,65,1
"thesofproject/sof","58ba94b2538500a6fb29192fe58ab960ce4db5cb","abonislawski","2022-08-31 17:07:15","false","dai-zephyr: add support for DAI_INTEL_HDA

This patch will add support for DAI_INTEL_HDA
in dai-zephyr like in legacy dai

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",116,51,1
"thesofproject/sof","70c7a02c66a3cac155ee948943e55b03b02b1e40","ranj063","2022-10-26 03:56:28","false","gain-capture: Add copier module

Gain module cannot be bound to a module from another pipeline. So,
add a module copier in the gain-capture pipeline.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",95,53,1
"thesofproject/sof","a08a0c7705b155f164765a903445cbed3fa2aec4","abonislawski","2019-02-04 12:14:43","false","Memory: make SOF_TEXT_SIZE dependent on the selected modules

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",57,8,0
"thesofproject/sof","6a59154bf2683d45a20db51733b06caa1479e980","iuliana-prodan","2021-04-07 18:08:03","false","topology: imx8m: add src component with wm8960 codec

This topology works on i.MX8MP with wm8960 codec.
It adds the Sample Rate Converter component for both playback
and capture.

The SRC topology can be used for test bench and real device usage.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",79,34,0
"thesofproject/sof","c22e3f438dab9ae8e4ee3b7e3b4a803f55370f50","singalsu","2023-10-13 11:44:40","false","Tools: Topology2: Use windows_fade in nocodec topologies

This patch changes all cavs-nocodec.conf based topologies to
use exponential Windows fade curve_type in gain components. It
is done to ensure the ramp gets tested after change of gain
curve_type default to linear.

The gain in included deep buffer playback pipeline (hw:0,31) and
in mixer pipeline (hw:0,41) are not changed because they are used
also in normal topologies. Also in capture direction DMIC raw
(hw:0,10) remains curve_type 2. Other gains are curve_type 1
Windows fade.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",10,64,1
"thesofproject/sof","7c10e1e51576c3e472b0277c523a4e9821da5323","singalsu","2023-02-02 11:42:27","false","Tools: sof-ctl: Add IPC4 EQ blobs for testing

This patch adds a number of FIR and IIR blobs to apply in
run-time with sof-ctl.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",52,56,1
"thesofproject/sof","5e487e013dbb6a9c3e76f2370599907d0dbde97b","singalsu","2019-03-27 11:54:28","false","IIR EQ: Fix for pipeline PCM format handling plus code cleanup

This patch determines the frame format for component depending on
stream direction. In playback it is determined from source buffer
and in capture from sink buffer. The errors handling in prepare()
is improved.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",58,10,0
"thesofproject/sof","aacbe98768a1f609a00994b340728be208988893","mrajwa","2020-09-30 15:52:15","false","topology: add simple topology with codec processing

This patch adds a processing topology which uses external
codec for processing. This topology comprises of:

HOST -> CODEC_ADAPTER -> DAI

So the only processing component is codec_adapter which can be
configured to work with any codec.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",66,28,0
"thesofproject/sof","05b903bc29d5a8a5656e7e151669d5b66405f159","serhiy-katsyuba-intel","2023-01-02 17:00:00","false","west.yml: Update Zephyr

Updates Zephyr to current top: e4fcb32451c587a3e4ba7f8bf3fc602b16f9652b.

This is to enable ALH multi-gateway feature. The required Zephyr commit
for Intel ADSP MTL is:
https://github.com/zephyrproject-rtos/zephyr/pull/53066

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",74,55,1
"thesofproject/sof","fc0fe9f4aa3dbb31050346f542449c794ee66b92","keyonjie","2021-05-11 10:53:45","false","ll_schedule: add new_target_tick to ll_schedule_domain

Add a new_target_tick to store the new target tick for the next set,
which is used during the reschedule stage.

Update the new_target_tick on tasks done on each core, and do the final
domain_set() at the point that tasks on all cores are finished.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",83,35,0
"thesofproject/sof","98f5de8d56202f45bd397661bb102f12f365af0f","keyonjie","2020-05-28 07:59:17","false","topology: utils: add DECLARE_SOF_RT_UUID() helper

Add a helper DECLARE_SOF_RT_UUID() to generate the 16 Bytes UUID string.

The input string in this format (copied from the FW source directly):
DECLARE_SOF_RT_UUID(name, uuid_macro, a, b, c,
		 d0, d1, d2, d3, d4, d5, d6, d7);

The output string should be in this format:
a6a7:a4a5:a2a3:a0a1:b2b3:b0b1:c2c3:c0c1:d00d01:d10d11:d20d21:d30d31:
d40d41:d50d51:d60d61:d70d71

e.g. for demux component, the macro usage is:
DECLARE_SOF_RT_UUID(""demux"", demux_uuid, 0xc4b26868, 0x1430, 0x470e,
		 0xa0, 0x89, 0x15, 0xd1, 0xc7, 0x7f, 0x85, 0x1a);

while the output will be:
68:68:b2:c4:30:14:0e:47:a0:89:15:d1:c7:7f:85:1a

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",96,24,0
"thesofproject/sof","188b37f6ebf1e78206dbb43aba2833f46fa15df6","akloniex","2019-11-05 10:38:19","false","memory: Increase amount of small sys runtime heap blocks.

Increase amount of 64B-sized blocks on sys runtime heap in preparation
for increased usage by callback handles allocated by notifier.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",53,17,0
"thesofproject/sof","b363cc0acc15e6dd6f378a8bb3151983cb190c64","RanderWang","2021-11-30 05:44:18","false","ipc4: copier: add support for container format

Ipc4 stream have container size and valid sample size.
In windows system, container size is normally 32bit
and valid sample size is 16bit or 24bit rely on system
setting. Currently host and dai component are included
by copier module to manage gateway. These two components
don't support container size and all the code is designed
for the case that container size is always equal to valid
sample size.

To avoid affecting current IPC3, this patch adds endpoint
buffer to support host or dai in a way that endpoint buffer
uses the same container and valid size and copier will do
the conversion between endpoint buffer and ipc4 buffer since
copier also supports format conversion.

Signed-off-by: Rander Wang <rander.wang@intel.com>",131,42,1
"thesofproject/sof","f6f3ab0d55ee9a26235d3912851c72ffea34fca7","xiulipan","2018-06-05 10:43:26","false","scripts: docker: Add proxy settings

Modify Dockerfile to copy apt.conf from host and set host proxy to
environment. Also modify some git url to http url in order to use the
proxy.

Also add a docker-build.sh to help docker build

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",1,0,0
"thesofproject/sof","a00a38a1ecef1b1cb387d9954ab8d63cc9f1544a","ranj063","2019-01-15 19:07:00","false","topology: remove HDA_DAI_CONFIG and re-use DAI_CONFIG

remove the HDA_DAI_CONFIG macro and reuse the DAI_CONFIG
macro with type HDA. This will ensure the hw_config
section gets added for HDA dai's as well.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,7,0
"thesofproject/sof","9c62ac56eb5a18f9500579ffe7755a598540de98","tlauda","2020-01-21 13:44:35","false","platform: use dma from sof context for domain initialization

Changes sequence of initialization in platform_init(),
so that DMA scheduling domain can be initialized with the DMA
taken through sof context. This allows for removal of another
externed global variable.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",78,20,0
"thesofproject/sof","063ecded7f94a2a3e26f20f692bd8ab19dfa055d","tlauda","2019-10-16 10:56:16","false","src: fix frames calculation for capture stream

Fixes source_frames and sink_frames calculation for SRC
in the capture pipeline.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,16,0
"thesofproject/sof","92ad7bd9747aab5aa3750fd81ccf201fe230f63d","bardliao","2022-11-11 02:08:42","false","Revert ""topology2: add ssp multi stream capture""

This reverts commit 0857ed68b9036ac303918b306536d9aaef97260e.
The ""topology2: add ssp multi stream capture"" impacted PR test.
Will resubmit once we fixed the issue.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",97,53,1
"thesofproject/sof","d472a2e73d85376a3f4a7e377b2bbd0b909475c0","singalsu","2023-02-01 13:10:54","false","Tools: Test: Audio: Fix BITS_OUT in test run configuration

This patch fixes a mistake with test run configuration for
testbech tests where input and output word lengths are not
the same.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",51,56,1
"thesofproject/sof","9eae757947d4c3a7cd127112d5d70ddcc514acda","singalsu","2023-11-03 11:39:26","false","Tools: Testbench: Fix ASRC component load

Before the fix the comp->core in ipc_comp_new() is garbage
and the check for maximum core count fails. The pointer to
struct asrc should be passed instead of address of pointer.

Fixes:	d9f9340e1a8ebc276fb67bf9e0a0c7bd08e4e52b
	(""tplg_parser: split out testbench logic and partition
	features per file."")

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",4,65,1
"thesofproject/sof","a366d378baed0149d9214b4d8b3c283cc51478ad","jajanusz","2019-11-05 11:04:49","false","arch: xtensa: use optimization configs

Use optimization configs that come from Kconfig in CMake
to set appropriate compiler flags.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",53,17,0
"thesofproject/sof","f99f276e497d55ff2cb35565300f29c347873f80","jajanusz","2019-07-19 09:22:39","false","kconfig: IS_ENABLED macro

Allows checking preprocessor symbols in compile-time.
Returns true for config with value 1, false for undefined
or any other value.

Expression like (CONFIG_MY ? a : b) rises compilation error when
CONFIG_MY is undefined, (IS_ENABLED(CONFIG_MY) ? a : b) can be
used instead of it.

It is intended to be used with Kconfig's bool configs - it should rise
error for other types, except positive integers, but it shouldn't be
used with them.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",50,14,0
"thesofproject/sof","b49257b7f097d8bb0ab4e20ca8135f1589857a16","jajanusz","2020-09-03 11:00:33","false","cpu: rename slave core to secondary

Change name of slave core to secondary core in order to
make terminology in SOF more inclusive.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",70,27,0
"thesofproject/sof","3dc5ea81a55c1497def6ed1c0ad344b2ca1c2fe8","jajanusz","2019-10-10 11:47:26","false","suecreek: shim: clock control registers

Add registers for requesting clocks.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",61,16,0
"thesofproject/sof","b755fe92b72672b80423ae8befe5d4ead283413c","jajanusz","2019-06-06 08:38:09","false","rimage: fix possible strcpy and sprintf overflows

It's for preventing possible buffer overflow.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",59,12,0
"thesofproject/sof","7070c1b2d61120763ebbff6ec9e0308f9137e39c","plbossart","2021-03-29 19:48:01","false","topology: soundwire: add macros for link numbers

remove hard-coded link numbers and make them configurable, this will
allow for reuse of the same topology when the devices are swapped

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",79,34,0
"thesofproject/sof","8fc5247289db0093bbb9de369c1dcb7e0d19a109","plbossart","2021-09-07 16:01:03","false","topology: move IMX and MTK topologies out of Intel list

Not sure why they were intertwined, let's separate them out to avoid
git conflicts with integration.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",119,39,0
"thesofproject/sof","447b365b6286434c6db067cac0da3506154a4845","softwarecki","2022-09-30 13:57:04","false","mtl: board: Update mtl board configuration

Necessary configuration options of the mtl board
have been enabled.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>
Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>
Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>
Signed-off-by: Konrad Leszczynski <konrad.leszczynski@intel.com>
Signed-off-by: Anas Nashif <anas.nashif@intel.com>
Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>
Signed-off-by: Rafal Redzimski <rafal.f.redzimski@intel.com>
Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>
Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",98,52,1
"thesofproject/sof","17d1140231a375976c0554316b48b7e4fa1c7478","xiulipan","2018-08-02 03:25:26","false","host: remove reset in stop to keep status

Need to keep status of host comp at when we stop.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",15,2,0
"thesofproject/sof","27795ece0ff9405795cef866fc28a7ab6db20d82","xiulipan","2018-06-19 10:02:46","false","scripts: fix xt-xcc build with wrong config

Need to export XTENSA_SYSTEM and override OBJCOPY and OBJDUMP for xt-xcc
build.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",1,1,0
"thesofproject/sof","476d63608bccd5f6e26ae308be573706be3cefe8","kfrydryx","2023-02-28 13:09:17","false","mtl: fill in cps and cpc data for ASRC module

Fill in measured cps consumption data for ASRC module for various
formats.

Signed-off-by: Krzysztof Frydryk <krzysztofx.frydryk@intel.com>",58,57,1
"thesofproject/sof","2c9772d5adab7d9ace77e40547ca88a55bc24ddb","kfrydryx","2022-03-30 11:37:24","false","Add west.yml configuring zephyr dependencies from sof

Added west.yaml file, that manages zephyr repo and its dependencies.
Additionally west manifest may now control sof submodules.
Added submanifests directory with README.txt file so the
submanifests directory exists in version control - otherwise
west update command returns error. This is bug described in
https://github.com/zephyrproject-rtos/west/issues/594 .

Co-developed-by: Andrey Borisovich <andrey.borisovich@intel.com>
Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>
Signed-off-by: Krzysztof Frydryk <krzysztofx.frydryk@intel.com>",112,46,1
"thesofproject/sof","9b4a618c5260b69cd9dd8055319d222c7277be45","tmleman","2023-05-15 12:49:13","false","pm: policy: d0i3: wait for ipc ack before pg

The DSP cannot enter the power gating state if it has not yet received
an ack from host after sending an ipc message.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",51,59,1
"thesofproject/sof","c1439168a096c027674690d5a31e7bc94863bb7f","tlauda","2019-07-12 11:16:23","false","gdb: cleanup includes

Cleanups includes in gdb file.
Unused headers has been removed and needed
has beed added.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",43,13,0
"thesofproject/sof","742f83ba2ffeb750057428f28cc1cb4079e7c5c1","tlauda","2019-03-26 14:19:38","false","pipeline: update sof_ipc_pipe_new struct

Updates sof_ipc_pipe_new struct to better handle
different time domains:
- Changes ""deadline"" to ""period"".
- Changes ""timer_delay"" to ""time_domain"".

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,10,0
"thesofproject/sof","3cba349741309a655e392db9c824a3075c52f5c4","tlauda","2020-04-06 11:45:13","false","pm_runtime: add core synchronization for Host DMA L1 Exit

Implements multicore synchronization mechanism for Host DMA L1 Exit.
Simple reference counter is added to avoid a situation, where shorter
processing on one core forces Host DMA bus to exit L1, when there is
still transfer happening on other core. PM_RUNTIME_HOST_DMA_L1 with get
is called in new NOTIFIER_ID_LL_PRE_RUN notification event.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",80,22,0
"thesofproject/sof","9bae27fd2b44a3a85d6f159c028c4c2b526a7f4c","abonislawski","2019-12-13 10:06:04","false","math: allow crc32 calculations on non-continuous data blocks

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",76,18,0
"thesofproject/sof","d6e326e9cd90e1ed66d421c36827e6f5d7eeb0ff","mrajwa","2019-05-29 20:52:04","false","kpb: add function verifying sampling width

This new function checks if config parameter regarding sampling
width is supported by current implementation.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",67,12,0
"thesofproject/sof","48de25287e325a0118b271ee0238c84d69ef0b66","lgirdwood","2018-07-24 09:02:10","true","Merge pull request #42 from ranj063/dai_id

topology: fix BE DAI id to be set to ID (not index)",13,2,0
"thesofproject/sof","43081afa6d54fb539bc73914718813250268ae51","lgirdwood","2018-11-20 19:55:43","true","Merge pull request #598 from tlauda/topic/issue-531

clk: trace error on wrong clock type",39,6,0
"thesofproject/sof","96686cfcde5a579649ef4504ba64572651689698","lyakh","2022-12-20 16:14:08","false","ipc: ipc4: do not access memory beyond object boudaries

With IPC4 only two 32-bit values are copied from the host in the
common part, anything beyond that must be copied separately. Those
two values are stored in a global msg_data.msg_in object. Therefore
always when reading from it only up to 8 bytes should be read. In
most cases it is also the case, because the target object has the
same size, but in case of SOF_IPC4_MOD_INIT_INSTANCE this isn't the
case, there special care must be taken.

Also remove a redundant NULL check where NULL cannot appear.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",90,55,1
"thesofproject/sof","6925dc51f1f22bfdc255e0ed1a167594de4ed6a1","btian1","2023-03-03 07:07:27","false","dai-zephyr: remove no use functions in dai zephyr

Function: dai_comp_hw_params does not do anything and remove it.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",60,57,1
"thesofproject/sof","babb16b155544712d459f260a99eeb57144ce09d","btian1","2023-06-08 05:38:58","false","mixin_out: remove remap mode

remove remap support from mixin process, there is no usecase
for remap for now, in future, if there is a need, we can add it back.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",46,60,1
"thesofproject/sof","c069197b63f4125fda354d68aabdedd2f7540dfd","ShriramShastry","2023-05-17 13:45:10","false","Math: Library: Add the hifi4 exponential function

The 32-bit HiFi4 exponential library function has an accuracy of 1e-4,
a unit in last place error of 5.60032793, and output ranges from
0.0067379470 to 148.4131591026 for inputs from -5 to +5 (Q4.28) (Q9.23).

Signed-off-by: ShriramShastry <malladi.sastry@intel.com>",51,59,1
"thesofproject/sof","a7604433c2a29aa1164350fb60db5f33f319a0cc","marc-hb","2021-07-03 05:47:03","false","imx/sdma.c: silence ""may be uninitialized"" warnings with gcc10.2 -O1

gcc10.2 does not see that config->elem_array.count is greater than zero
and complains. This happens only at the -O1 optimization level that is
rarely tested.

```
error: 'bd' may be used uninitialized in this function
                                  [-Werror=maybe-uninitialized]
  758 |  bd->config &= ~SDMA_BD_CONT;

error: 'width' may be used uninitialized in this function
                                  [-Werror=maybe-uninitialized]
  786 |  watermark = (config->burst_elems * width) / 8;
      |              ~~~~~~~~~~~~~~~~~~~~~^~~~~~~~
```

This is preferred over initialization at the top of the function
that hides _all_ warnings including valid ones.

Of course the even better fix would to BOTH declare and initialization
just before the loop, as late as possible just like in any other modern
and safer programming language. However C99 declarations are not allowed
yet; I've added this to the next TSC agenda:
github.com/orgs/thesofproject/teams/steering-committee/discussions/24

```
 -693,11 +698,9 @@ static int sdma_prep_desc(struct dma_chan_data *channel,
                          struct dma_sg_config *config)
 {
        int i;
-       int width;
        int watermark;
        uint32_t sdma_script_addr;
        struct sdma_chan *pdata = dma_chan_get_data(channel);
-       struct sdma_bd *bd;

        /* Validate requested configuration */
        if (config->elem_array.count > SDMA_MAX_BDS) {
 -713,6 +716,9 @@ static int sdma_prep_desc(struct dma_chan_data *channel,

        pdata->next_bd = 0;

+       struct sdma_bd *bd = &pdata->desc[0]; // or NULL
+       int width = 0;
+
        for (i = 0; i < config->elem_array.count; i++) {
                bd = &pdata->desc[i];
                /* For MEM2DEV and DEV2MEM, buf_addr holds the RAM address
```

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",84,37,0
"thesofproject/sof","9938a66db4c07104576bce03156d4f8764d3d0e3","marc-hb","2021-01-19 00:45:20","false","docker-run.sh: use --tty only when we have one

--tty is not compatible with github actions, fails with ""the input
device is not a TTY""

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",69,31,0
"thesofproject/sof","c8b226b86ff6c7a611b974b26a4a771c4dca13a2","marc-hb","2021-07-24 01:18:11","false","cmocka/cmake: add $SIMULATOR to fix ""make test"" on host

Before this it was required to find and run the executables one by one

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",99,38,0
"thesofproject/sof","ba38c7d7505124dbce9fc245cad6c1dcc78137cd","marc-hb","2020-03-26 05:11:27","false","Testbench: panic() calls abort()

... as opposed to doing nothing and returning.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",64,22,0
"thesofproject/sof","288e228c67ea312ee97d7900c3ae82b0538421f1","marc-hb","2021-02-05 08:20:16","false","cmake: generate the complete .config at configuration time.

Add cmake -DINIT_CONFIG= option that can point at any initial file.

""make clean"" does not delete .config any more.

Note reconfiguration does NOT causes recompilation because -imacros
hides the generated .h from CMake's dependency scan. This is not a
regression, that problems exists since -imacros was introduced. At least
it's now possible to ""make clean"" and rebuild without losing the .config
file.

Fix for #3617

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",72,32,0
"thesofproject/sof","528accc80bb62a60e9f54ad174ca680ecb290581","lyakh","2022-03-11 15:21:12","false","cache: add cache_to_uncache_init() to all platforms

cache_to_uncache_init() is needed to convert addresses from cached to
uncached aliases in a preprocessor-friendly way. Add it to all
platforms.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",114,45,1
"thesofproject/sof","e56e88dcca72d166022096f54f28e2a86fb3ca9b","lyakh","2022-05-31 12:42:07","false","dmic: move gain ramping to DAI .copy() context

Currently the DMIC driver uses a separate task to implement its gain
ramping. This creates a race during driver clean up. Avoid an
additional asynchronous context by performing the ramping in DAI's
.copy() context. Use the DAI's .copy() method for that.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",113,48,1
"thesofproject/sof","66a556062a9753e7b836427874a0db1561a72309","lyakh","2022-12-14 09:06:19","false","ace: remove ""volatile"" from cached addresses

Cached addresses aren't used to access the hardware in mailbox.h,
they don't need to be volatile.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",96,54,1
"thesofproject/sof","182f6eedf7ecc65ab1b0681cbe38f4b978cbdc92","lyakh","2022-01-21 09:38:04","false","pipeline: silence timestamp failure complains

pipeline_get_timestamp() can fail to obtain a valid timestamp when
called during data copying on the same pipeline, because the
.walking flag will be set for some of the buffers in the pipeline.
That issue should be fixed, because in fact there's no reason to fail
there, but for now at least remove the excessively verbose warning.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",114,44,1
"thesofproject/sof","0c1acc5623c019218301daa674e4524acfca9706","ranj063","2022-05-12 18:12:29","false","copier: fix spelling mistake

Only a cosmetic change. use ""unable"" instead of ""unenable""

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",111,47,1
"thesofproject/sof","509990620b7a0a4b0c660719b755cde3391066f1","cujomalainey","2019-03-21 23:15:18","false","volume: make init function static

Fixes checkpatch error that slipped in

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",66,10,0
"thesofproject/sof","cd2349834c842ca9a2831e4f2f29fad039cb080f","tmleman","2022-11-04 09:57:38","false","config: mtl: enabling power domains

Enabling power domains on meteorlake.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>",90,53,1
"thesofproject/sof","ec6b210d8ce0af841ca10cc6bb2de37d757d66d8","keyonjie","2020-05-28 08:09:14","false","topology: smart_amp: add uuid token to the widget

Add the uuid token to smart_amp widget for the future use.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",96,24,0
"thesofproject/sof","7e3e234b537aea48c593113e54521e47a3a68e86","plbossart","2018-08-03 14:53:29","true","Merge pull request #150 from bkokoszx/ssp_master_slave_hwd

apl-ssp: setting additional bits in ssp registers",16,2,0
"thesofproject/sof","2b10b49a8efb0b26d229517761e3fb5e7aef6e73","dbaluta","2021-02-26 13:42:40","false","codec_adapter: cadence: Fix API func search

Existing code returns every time the API function at index 0, which works
now because we support only a single API function. But, this will break
when patches adding multiple Cadence codec types will be merged.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",76,33,0
"thesofproject/sof","5ca0e9bba3e6da8abab7faf4577aa6683200bf41","dbaluta","2021-04-28 15:08:02","false","topology: Use generic name for 8qxp/8qm

i.MX8QXP / i.MX8QM have the same configuration w.r.t topology.
But since we firstly added support for 8qxp all the names use
8qxp and then for 8qm we just borrow the files but using the 8qxp
naming.

This sometimes might cause confusion. So, we group under the
umbrella of imx8 naming both i.mx8qxp and i.mx8qm.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",83,35,0
"thesofproject/sof","c7e98ee731880c7695a0f6ef393f391263ef8df8","dbaluta","2023-04-07 15:57:46","false","module_adapter: Propagate error from module specific callback

When module_prepare() fails we need to return to calling module the
exact specific error not just -EIO.

There is no real use for Host AP to receive an error code that doesn't
reflect the actual error.

While at it, make the code more compact as suggested by Guennadi.
Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",50,58,1
"thesofproject/sof","a33a96b34237be5d330afcbf0819e5eadd857cc9","RanderWang","2022-12-14 06:52:14","false","topology2: add second capture stream for DMIC0

The second capture stream can be used as a reference stream for user.

Signed-off-by: Rander Wang <rander.wang@intel.com>",96,54,1
"thesofproject/sof","f4b2901cf8f9270aabfe718d77e3f4e403e252b5","RanderWang","2022-02-09 08:23:41","false","ipc4: disable ipc3 stream position

The ipc3 stream position is not fit for ipc4
and sends ipc3 message to host. Now disable it.

Signed-off-by: Rander Wang <rander.wang@intel.com>",108,44,1
"thesofproject/sof","a1b6e6db33abb2702a242db1c9417b9fef81bc5b","dnikodem","2022-09-08 15:36:49","false","manifest: add fw_ver_micro to manifest

Pass fw_ver_micro value to manifest.

Signed-off-by: Damian Nikodem <damian.nikodem@intel.com>",105,51,1
"thesofproject/sof","9c1d10352075e784dc9c0d71f97609136736a14c","marc-hb","2021-05-28 18:26:44","false","xtensa-build-zephyr.sh: remove west --pristine option

Zephyr's incremental build works and saves time. I have been using it
with SOF for a long time. Slowly rebuilding from scratch is as simple as
deleting the build-$platform/ build directory. Quickly building not from
scratch is not possible without this commit.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",83,36,0
"thesofproject/sof","fa38c34a7a8c8f491ee6443e527a80e1372af50d","marc-hb","2021-03-29 23:06:21","false","docker: apt-get install python3-elftools

Required by #3459 / #3975 ""elfsize"" proof of concept and probably by
other things too in the future - we use both ELF and Python
everywhere; it's surprising they haven't met each other yet.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",79,34,0
"thesofproject/sof","e9a9e87af06ddceeb7a4cbe24a3a276af3bab9de","ktrzcinx","2020-01-15 12:44:13","false","audio_stream: Create wrapping function

In source code there are places where are implemented pointer
wrapping by hand, what looks quite complicated for a first eye catch
and is messy because of pointer type casting.
Using as_wrap is very well descriptive method and consist with DRY
principle.

as_get_frag has been changed to preprocessor function as it is just
moving given pointer and wrapping result.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",76,19,0
"thesofproject/sof","67e41d21c36b36a1ff14ea503c8950b0798a6ae8","ktrzcinx","2020-08-27 09:55:13","false","cmake: Keep temporary files used to compute source hash

Temporary files are useful to understand and debug the build.
Moving output to another directory, keeps binary directory clean.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",74,27,0
"thesofproject/sof","47ef306bf74e4d9fd92d916b8258b324b9ae177c","balakishorepati","2022-01-31 07:05:24","false","amd: renoir: Add lock for synchronization b/w host and DSP

Add hardware semaphore lock before accessing trigger
bits to achieve proper synchronization between host and
DSP during IPC communication.

Note: Same hardware lock is implemented in amd host driver.
Signed-off-by: balapati <balakishore.pati@amd.com>",102,44,1
"thesofproject/sof","8ed1e90b5c9aaff71f22fe5460002e9f9bfb7fcb","brentlu","2021-09-22 09:21:46","false","topology: pipe-demux-eq-iir-playback: change slot mapping

Change the default slot mapping from L_lo-L_hi-R_lo-R_hi to
L_lo-R_lo-L_hi-R_hi so slot 0/1 is for woofer and slot 2/3 is for
tweeter.

Signed-off-by: Brent Lu <brent.lu@intel.com>",117,40,0
"thesofproject/sof","9a6a38a609c2e1cb67715075c74005d48b665578","tlauda","2019-03-04 13:09:58","false","mixer: add support for variable data copy

Adds support to mixer for variable
data size copy.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",67,9,0
"thesofproject/sof","0e6f3a9fe4b1369eab702d75910873be25fb2534","tlauda","2019-09-10 14:56:28","false","platform: rename PLATFORM_WORKQ_DEFAULT_TIMEOUT define

Renames define PLATFORM_WORKQ_DEFAULT_TIMEOUT to
PLATFORM_LL_DEFAULT_TIMEOUT.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,15,0
"thesofproject/sof","06e9a345831a8086581fa72fdf911813ca96faee","tlauda","2019-04-16 13:59:02","false","dw-dma: make DMA FIFO partitioning configurable from Kconfig

Makes DMA FIFO partitioning configurable from Kconfig.
Some platforms need to set FIFO partitions before
enabling DMA controller.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",50,10,0
"thesofproject/sof","5aae7e12e2d2ad92f0e894d6e6d133e2439f5607","iganakov","2023-04-13 09:41:29","false","kpb: add ams support

Add AMS notifications support to KPB module

Signed-off-by: Ievgen Ganakov <ievgen.ganakov@intel.com>",50,58,1
"thesofproject/sof","de889c554bc73ad74cf1ded5f2811feff4ac9911","jxstelter","2022-09-05 13:03:28","false","library_manager: module_adapter: Enable build of library manager and IADK modules

Add the library manager and IADK modules to build.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",118,51,1
"thesofproject/sof","90aebd1d9cb4c8b4ed2ab2a80f1a9ee90d7d8d09","cujomalainey","2023-07-13 18:24:50","false","audio: waves: Fix buffer accessors

Since 3P code can't be compiled without the library (for now) we rely on
reviews for API conversions which unfortunately has proven to not be
perfect. Fixup the accessors for the waves module.

Fixes: e57883f3c2fd (""buffer: use an accessor to read struct audio_stream::channels"")
Fixes: f8e4d693b26f (""buffer: use an accessor to read struct audio_stream::rate"")
Fixes: 017b8ebcde57 (""buffer: use an accessor to read struct audio_stream::frame_fmt"")
Fixes: 90828e230590 (""buffer: external modules use API to access buffer_fmt"")
Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",32,61,1
"thesofproject/sof","5f93ad4729ee441b29474ea2cc7ad2e377ff81bc","iuliana-prodan","2021-03-05 17:06:37","false","drivers: imx: sai: W1C for a clean start

On start W1C the Work Start Flag, Sync Error Flag and
FIFO Error Flag.

Write a logic 1 to this field to clear each of this
flags and have a clean start for SAI.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",73,33,0
"thesofproject/sof","6dd44d5b4c4b380ce415ec1ad2b3ff9118ceea9f","bzhg","2021-03-15 20:29:49","false","comp: Add initial Google hotword detector

Add a new component that uses the Google hotword library
to do keyword detection. The language model needs to be
set using the byte control from userspace before running
the detector.

1. Put the hotword library at $SOF_REPO/third_party_libraries/
hotword_dsp_api.h
libhifi3_google_hotword_dsp_api.a (TGL)
libcometlake_google_hotword_dsp_api.a (CML)

2. Build SOF fw and tools with xcc

3. Set language model on DUT:
amixer -c 0 contents | grep Model
      numid=73,iface=MIXER,name='GHD9.0 Hotword Model'
./sof-ctl -n 73 -t 0 -b -r -s x_google/en_all.mmap

4. Open the WoV pcm device
arecord -Dhw:0,8 -M -N -r 16000 -c2 -f s16_le --buffer-size=67200 -vvv
/tmp/wov.wav

5. Say ""OK Google"" and verify wov.wav

Signed-off-by: Ben Zhang <benzh@chromium.org>
Signed-off-by: Curtis Malainey <cujomalainey@google.com>",73,33,0
"thesofproject/sof","31453ceca3ea2fd91938cd096fe5ce9127399327","ShriramShastry","2023-05-18 13:50:30","false","Math: Library: Add the HiFi3, HiFi4, HiFi5 exponential function

This check in change eliminates the extra include isa.h header file
from the exp_fcn_hifi.c file, as it does in the exp_fcn.h file.

Signed-off-by: ShriramShastry <malladi.sastry@intel.com>",50,59,1
"thesofproject/sof","52e25dc81432d0c7750fa642e4e98e29d684914a","jgunn0262","2019-04-24 20:55:05","false","xtensa: exception: Some xtensa configs dont have level 7 IRQ

This results in a compiler error when xtensa configuration has no IRQ
level 7. Make it use core-isa.h.

Signed-off-by: John Gunn <jgunn0262@gmail.com>",52,11,0
"thesofproject/sof","c6ff3fd5d1a2de3c86f5012a0264c95b5f93decb","singalsu","2018-12-14 14:54:51","false","Host: Reduce trace verbosity for a non-warn type of event

This patch prevents the host component from flooding the trace when
audio playback or capture rate is other than 48 kHz. It only means
that the host sink buffer still has samples unconsumed by the
downstream component. This is not a warning so it's better to change
it to tracev_host().

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",49,6,0
"thesofproject/sof","b608ec840c80b3e27bc8cc4d4d3a401f3929b396","marcinszkudlinski","2023-09-07 10:22:15","false","pipeline: remove buffer_acquire from pipeline files

remove buffer ops from pipeline-graph.c and
pipeline-params.c

this is a continuation of changes
from commit 4a036999118cfa7e491cbefc8eb6b737f50b7e33

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",21,63,1
"thesofproject/sof","fab13768c921d7fe13eb54d322e1d771e422a215","bardliao","2022-12-20 09:49:14","false","topology2: move development topologies to development folder

Some topologies are for development only. Move them to the development
folder.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",90,55,1
"thesofproject/sof","5ead758e24c46e22182b91f7414c2ccc10a2c4b2","tlauda","2019-10-10 09:31:10","false","pipeline: use pipeline_task

Initializes and uses pipeline_task instead of regular task.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",63,16,0
"thesofproject/sof","dcd825b923a680f63adde1b392638a14463ead63","tlauda","2019-02-14 11:27:41","false","pipeline: enable copy of connected pipelines

Enables copy of connected pipelines if the pipelines
were set to have the same scheduling component.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,8,0
"thesofproject/sof","5f85648c5a15d90cbd1228a42c5f027cb3c4c2b9","tlauda","2019-12-17 15:29:21","false","alloc: create enum type for heap zones

Creates new mem_zone enum type for heap zones.
We don't want to leave them as flags and allow
zone combinations.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",70,18,0
"thesofproject/sof","cff7ca4e4a9680e5a01221f562cf85868d627d4a","tlauda","2020-03-17 10:50:18","false","apl: memory: decrease module memory pool

Decreases runtime heap size on APL in order to accommodate
enabling larger number of simultaneous features.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",77,21,0
"thesofproject/sof","38f3f3d7ba0fa91c51276bbe5d5926be4e0f502a","tlauda","2019-07-12 07:33:31","false","arch: cleanup includes

Cleanups includes in all architecture files.
Unused headers has been removed and needed
has beed added.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",43,13,0
"thesofproject/sof","7c8e815c99c22455b65dfbbf49e89b123ee0d5d5","tlauda","2019-12-19 11:45:59","false","interrupt: make irq names const

Changes interrupt controller names to const.
They are not supposed to be modified.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",72,19,0
"thesofproject/sof","b0e9f91699650200369036293ae714a94a696035","tlauda","2020-01-21 12:14:32","false","memory: don't alloc shared memory if not needed

DMA channel's private data and also DMIC's private data no longer
need to be allocated as shared. They're only owned by one core at
a time and holds data valid for this particular run.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",79,20,0
"thesofproject/sof","13469d59517fcf7f82e114ef727eb145ac49f460","lrgirdwo","2018-12-07 00:38:18","false","pipeline: check pipeline init memory allocation.

Make sure we check the return value and complain if it fails.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",45,6,0
"thesofproject/sof","ac12b4a748af0be37c34e4902d69daf4c910a9b2","lrgirdwo","2022-02-04 17:09:12","false","testbench: print a meaningful error if scheduling comp is not found

Let the user know if the scheduling component is missing and handle it.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",106,44,1
"thesofproject/sof","f2594096c0d9ecfaca3d99eb2e9883a9ffa3ec60","plbossart","2019-01-16 05:08:05","false","src/host/testbench.c: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","7e042e9534a575e39a573d7eabe73f594bc0c390","lrgirdwo","2021-09-17 12:18:47","false","dma: bdw and byt dont have DMIC so remove from DMA caps.

Looks like a copy and paste error.

BDW also has SSP as target for DMAC0 which is forbidden by the
direction capability. Align with the direction cap to avoid confusion.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",118,40,0
"thesofproject/sof","425743e772342256141201a74c760551f1953561","plbossart","2021-09-28 22:10:27","false","topology1: add missing Dell SKU 0A45 topology

Same as before but with newer SDCA codecs.

Matching kernel PR: https://github.com/thesofproject/linux/pull/3162

BugLink: https://github.com/thesofproject/linux/issues/3161
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",121,40,0
"thesofproject/sof","cf665a03ec4ec60dd2fd233b3589d0aa48642fad","dbaluta","2019-01-28 12:06:14","false","rimage: Use fw.h instead of duplicating the code

This is very useful when updating one of the types in UAPI
because with the current implementation one needs to be careful
to also update file_format.h

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",59,8,0
"thesofproject/sof","67bf7b479aa96166b2550ea6095af51a7f5b47f7","dbaluta","2021-05-14 11:28:20","false","dai: limit number of bytes copied to one period for all directions

This is similar with:
commit 761bbac5aca6 (""host: dai: limit number of bytes copied to one
period"") which limits the number of copied bytes for CAPTURE direction.

This patch does the same thing for PLAYBACK direction.

We need this with codec adapter component that most of the time
will produce more than period_bytes in a period.

DAI will copy more than on period_bytes at a time and this
affects sound quality.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",85,35,0
"thesofproject/sof","02635875fb53c7cc2b14b5cfd0796be2c6c08eca","jxstelter","2022-11-09 14:13:28","false","lnl: Lunarlake configuration

Add initial LNL configuration.
Enable building for xt-clang.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",92,53,1
"thesofproject/sof","ba95d8d3060b313d1e9cb59c5ac3bf894816f58e","keyonjie","2021-09-03 04:35:34","false","cmocka: align to the new heap management

Align to the new heap memory map and allocator, smaller SYSTEM and
RUNTIME zones are used on apollolake now.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",119,39,0
"thesofproject/sof","b424c98cd87da5fde68c439b53a38d01f057c143","keyonjie","2019-04-15 02:47:25","false","topology: pipe-kfbm-capture: use DMIC16k for Keyword Detect PCM

Use DMIC16k for Keyword Detect PCM to align with driver.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",48,10,0
"thesofproject/sof","6569b345f54a14712a89771fdd7bb211657e3705","keyonjie","2020-04-10 16:36:21","false","Topology: utils: add Decimal to Hexadecimal converting macro

Add macro DEC2HEX marcro to convert 2-digit decimal number to
hexadecimal one that prefixed with '0x'.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",82,22,0
"thesofproject/sof","c6ab5b046d7e000247b020110b70077c97dbf0e6","andyross","2022-08-29 04:25:42","false","pipeline-graph.c: Needs clk.h

This was calling clk APIs without the header.  Discovered when
native_posix exposed a previous transitive include.

Signed-off-by: Andy Ross <andyross@google.com>",112,51,1
"thesofproject/sof","3f2fb7bb564df620e0ac334d3b8615efbe2ac797","lyakh","2019-02-21 14:36:28","false","interrupt: introduce a list of interrupt controllers

Add a list of interrupt controllers, that will be allocated
at run-time from non-cacheable memory, and functions to perform such
a registration and to search through the list.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",62,9,0
"thesofproject/sof","4f4fd1a42505cfb835470ac02d18394cbbdd2f09","marc-hb","2022-05-11 22:25:16","false","checkpatch: remove spurious white line before ""if MAINTAINERS""

This removes a small but conflicting difference with upstream.

Fixes commit d98a7ed1034e (""checkpatch: check ABI updates before warning
on it"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",113,47,1
"thesofproject/sof","7e1fd0adef890c8265d255d7d374ad3d7e69d9b2","marc-hb","2021-05-17 22:38:04","false","Really copy sof-$platform.{ri,ldc} to sof.{ri,ldc}

Fixes incomplete commit 0e60ec8da491 (""Copy sof-$platform.{ri,ldc} to
sof.{ri,ldc}""), see full rationale there. I missed the
copy/paste/diverge at the time and did it only in the MEU_SIGN case.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",86,35,0
"thesofproject/sof","9e080af37112dbf0ce6e55fd1888e7e758264275","marc-hb","2023-11-01 21:48:08","false","app/sample.yml: add MTL and LNL to Zephyr CI

This will catch earlier compile-time regressions like this one:
https://github.com/zephyrproject-rtos/zephyr/pull/61166#issuecomment-1789717233

Zephyr commit 06cfbd4159fd (""drivers: power_domain: Introduce a gpio
monitor driver"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",4,65,1
"thesofproject/sof","8d25e690055ff83ff578c400a98c883df6a0e778","marc-hb","2021-07-20 01:45:56","false","doxygen: delete many broken \file arguments

Remove all the duplicate \file platform/lib/cpu.h. The \file parameter
is optional, the duplicates made these entire comments no-ops and spit a
lot of warnings.

Doxygen knows where the files are.

Removed the \file argument in other places as well which fixes a ton of
warnings like:

sof/src/audio/volume/volume_hifi3.c:7: warning: the name
'audio/volume_hifi3.c' supplied as the argument in the \file statement
is not an input file

Or:

sof/src/lib/pm_runtime.c:7: warning: the name 'lib/pm_runtime.c'
supplied as the argument in the \file statement matches the following
input files:
   sof/src/lib/pm_runtime.c
   sof/src/platform/intel/cavs/lib/pm_runtime.c
   sof/src/platform/library/lib/pm_runtime.c
Please use a more specific name by including a (larger) part of the path!

Note these warnings are not seen in the default doxygen configuration
which ignores a lot of comments.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",90,38,0
"thesofproject/sof","ba2cfe3daa5526c7268859254c77e1db11852e12","marc-hb","2023-11-01 00:47:03","false","app/stub*.conf: add CONFIG_SAMPLE_SMART_AMP=y

While one smart_amp C file does not compile, let's keep compile-checking
the other two.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",4,65,1
"thesofproject/sof","d95004a62ebbf9315dfa51b12452890b0a0116bc","marc-hb","2022-11-08 01:00:04","false","xtensa-build-zephyr.py: trivial re-use of rimage_source_dir variable

Removes some minor duplication.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",93,53,1
"thesofproject/sof","89600974030fcbca903894c327c3c64afcede14d","marc-hb","2021-09-17 17:11:08","false","Revert ""ext_manifest: Fix incorrect signature""

This reverts commit 241af313dab49db06d6e6f0af3330f1a916de664 so the DSP
can boot again.

On my APL UP2 this fixes:

10:06:38: 00:0e.0: unstall/run core: core_mask = 1
10:06:38: 00:0e.0: DSP core(s) enabled? 1 : core_mask 1
10:06:38: 00:0e.0: FW Poll Status: reg[0x4c]=0x40000000 successful
10:06:38: 00:0e.0: FW Poll Status: reg[0x4]=0x3030202 successful
10:06:38: 00:0e.0: FW Poll Status: reg[0x4]=0x1010202 successful
10:06:38: 00:0e.0: DSP core(s) enabled? 0 : core_mask 2
10:06:38: 00:0e.0: FW Poll Status: reg[0x80000]=0x5000001 successful
10:06:41: 00:0e.0: FW Poll Status: reg[0x80000]=0x80000007 timedout
10:06:41: 00:0e.0: error: cl_copy_fw: timeout HDA_DSP_SRAM_REG_ROM_STATUS read
10:06:41: 00:0e.0: FW Poll Status: reg[0x160]=0x140000 successful
10:06:41: 00:0e.0: ------------[ DSP dump start ]------------
10:06:41: 00:0e.0: unknown ROM status value 80000007
10:06:41: 00:0e.0: error: extended rom status:  0x80000007 0x2f 0x0 0x0 \
                                                0x0 0x0 0x1522100 0x0
10:06:41: 00:0e.0: ------------[ DSP dump end ]------------
10:06:41: 00:0e.0: error: load fw failed ret: -110
10:06:41: 00:0e.0: error: failed to start DSP
10:06:41: 00:0e.0: error: failed to boot DSP firmware -110
10:06:41: 00:0e.0: FW Poll Status: reg[0x4]=0x1d003c timedout
10:06:41: 00:0e.0: error: hda_dsp_core_reset_enter: timeout on  \
                                                  HDA_DSP_REG_ADSPCS read
10:06:41: 00:0e.0: error: dsp core reset failed: core_mask 3
10:06:41: probe of 0000:00:0e.0 failed with error -110

Test PR https://github.com/thesofproject/sof/pull/4782 show this commit
broke the DSP boot on ALL platforms
  https://sof-ci.01.org/sofpr/PR4782/build10387/devicetest/

```
[    7.798750] kernel: sof-audio-acpi-intel-bdw INT3438:00: error: invalid firmware signature
[    7.798827] kernel: sof-audio-acpi-intel-bdw INT3438:00: error: invalid FW header
[    7.798943] kernel: sof-audio-acpi-intel-bdw INT3438:00: error: failed to load DSP firmware -22
[    7.810348] kernel: sof-audio-acpi-intel-bdw INT3438:00: error:
sof_probe_work failed err: -22
```

This also broke QEMU boot on a number of platforms: BDW, BYT and CHT, see
`error: invalid firmware signature` in

https://sof-ci.01.org/sofpr/PR4782/build10387/boottest/ and
https://github.com/thesofproject/sof/pull/4782/checks?check_run_id=3634915322

How was it tested?

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",118,40,0
"thesofproject/sof","88327f618c7ecabd363b123e8aaaedce5c7c65e6","marc-hb","2021-09-08 19:47:11","false","xtensa-build-zephyr: support passing through CMake arguments

Like this:

  xtensa-build-zephyr.sh -a -- -DEXTRA_CFLAGS='-Werror -Wextra'

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",118,39,0
"thesofproject/sof","9dd3f10481960bec1d50f0c43ebe21ddc0fbc389","ujfalusi","2023-07-28 08:32:11","false","lib-manager: Add timeout handling in lib_manager_load_data_from_host()

It is better to have some sort of timeout handling while waiting for the
DMA transfer of the library from host.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",31,62,1
"thesofproject/sof","f5a78f3cd5cd0954a4647a7186fc6c9402de7f23","abonislawski","2019-06-19 10:29:20","false","hda-dma-trace: remove unused variables if TRACE disabled

This will fix gcc ""variable x set but not used"" if TRACE disabled

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",49,13,0
"thesofproject/sof","f081a20de9e510f1688effb6680fc7876e29b2b3","ranj063","2018-11-27 17:22:11","false","github: add @ranj063 as topology owner

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",42,6,0
"thesofproject/sof","42cf9f84ef3347719f80ebf48199c6351078b279","ktrzcinx","2020-01-17 09:49:56","false","volume: Define processing function typedef

To keep code clean and consistent create processing function
interface outside comp_data function definition to omit
duplicated definitions.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",79,19,0
"thesofproject/sof","7d5edbef1300692d2677994b846e595862e0cb89","ktrzcinx","2020-02-07 09:51:28","false","wait: Remove unused completion_t with related functions

Unused code shouldn't be present in source code, it only makes system
more difficult to understand.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",78,20,0
"thesofproject/sof","03d92cef52469b02d3a9a70f73cdf11876bad0cb","ktrzcinx","2020-06-02 12:59:57","false","sof: Put UUID value of IPC components to runtime memory

UUID entries, related with components from topology,
should be loaded into SRAM to allow runtime comparison with
value in IPC message during component creation.
UUID of the components whose are not created by IPC message
are not needed in runtime, so there should not be there to
reduce memory consumtion - as it is now. It's untouched.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",94,24,0
"thesofproject/sof","f87c6e89f23a574c5af3990ec62cbe7c92bc0d18","ktrzcinx","2020-04-02 11:57:38","false","smex: logger: Logger should point to smex as ldc generator

rimage will not be responsible for ldc file creation so logger
should points valid tool.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",76,22,0
"thesofproject/sof","814dc46075c8a9e74c93b20c26fd2c3544e7eb19","ktrzcinx","2020-07-24 13:50:46","false","audio_stream: eq_fir: eq_iir: src: Remove audio_stream_copy_s16/s32()

Those functions do nothing more than audio_stream_copy(), so after
change source code will be little shorter without overhelming
pass-through function switch in processing components.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",78,26,0
"thesofproject/sof","73bd5c659f1d519b23ceaf4bebcb8659853d8548","kv2019i","2020-09-07 11:21:30","false","doc: annotate all ABI fields added/changed in 3.17 ABI

Add a ""ABImajor.minor"" note to inline documentation of all
ABI interfaces that have been added or modified as part of
3.17 interface changes.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",70,27,0
"thesofproject/sof","07ed14b6fd1a95d2448cf6bab9f357e188f266b7","kv2019i","2023-04-26 15:32:24","false","platform: cavs: do not program GPDMA/ALH ownership in Zephyr builds

If SOF is built with Zephyr, the GPDMA/ALH ownership programming
should happen in Zephyr platform code, not on SOF side.

Link: https://github.com/zephyrproject-rtos/zephyr/pull/55738
Closes: https://github.com/thesofproject/sof/issues/7249
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",52,59,1
"thesofproject/sof","49547404e98a867576b7ba147ff902604f5c4f2d","kv2019i","2021-04-15 19:33:38","false","topology: ssp: fix a bug in passing SSP_CONFIG_DATA args

The m4 ifelse check on macro parameters is not working as expected.
If optional parameters are not passed, an empty string is written
to output conf file, instead of the ""0"" string specified in
the ifelse statement.

This has not caused functional errors as the empty string has
been interpreted as zero. Fix the logic despite this so that this
is not copied to other macros.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",80,34,0
"thesofproject/sof","8881a406af67536b9ac6bfbb53d1c712aacdae81","kv2019i","2022-08-04 10:53:13","false","topology: add sof-rpl-nocodec.tplg

Add nocodec topology for Intel Raptor Lake.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",111,50,1
"thesofproject/sof","0122caf080a3b81c66fd31f3778352df7bbb5134","RanderWang","2018-12-12 05:41:17","false","alloc: bdw: fix memory error on bdw

The maximum valid address should be base + size -1

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",47,6,0
"thesofproject/sof","cc51ff8f0c4a67bc3bcbf0af3a3c3c4a3eaeb0d1","keyonjie","2019-03-05 10:43:39","false","topology: change token name from effect to process

The token can be used for more generic processing, not only effect
component, let's rename it.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",65,9,0
"thesofproject/sof","ece6d76b8a474b4665ad1e4e3082735adec6984b","jsarha","2022-03-17 15:23:41","false","ll_schedule: Update DSP load tracker to provide per task numbers

Calculates average and records the maximum execution cycles taken by
each execution round and prints the results out once every 1024 round,
e.g. roughly once per second with a typical 1ms tick configuration. The
output is mimicked from the Zephyr side scheduler output. There is a
Kconfig menu option under debug menu to disable this feature. Currently
the default is on.

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",109,45,1
"thesofproject/sof","51e7c618014176fb2c47555704f41706c4113fdc","bzhg","2022-03-08 14:18:13","false","google_rtc_audio_processing: Add config controls

1. Added a byte control to accept Google RTC audio processing
   configuration blob
     `name='GOOGLE_RTC_PROCESSING10.0 Config'`

Tested using:
    sof-ctl -n 48 -t 0 -b -r -s /root/tuning.bin
And verified correct audio processing behaviour on a alderlake board.

Signed-off-by: Ben Zhang <benzh@chromium.org>
Signed-off-by: Lionel Koenig <lionelk@google.com>",112,45,1
"thesofproject/sof","623bc3871189bbf97ab2bd0c21562afb4810f445","lyakh","2023-09-08 15:40:58","false","IPC4: remove a superfluous initialisation

module_init in ipc4_init_module_instance() is completely overwritten,
no need to initialise it.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",20,63,1
"thesofproject/sof","f882c301f1555433e13fb6d16babfc40445cabe6","softwarecki","2023-09-18 13:23:36","false","logger: convert: Fixed handling of an error reported by clock_gettime

The clock_gettime function only returns information that an error occurred.
The error code should be taken from the errno variable.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",20,64,1
"thesofproject/sof","48ac11d769520fee423d23fd1bccce84e316ca4a","abonislawski","2020-05-18 07:35:49","false","Kconfig: adjust default probe config

Adjust default probe config to align with security requirements

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",99,23,0
"thesofproject/sof","d345c56e71b495a1e4eec1a48e48d3d5be055cda","marc-hb","2023-04-21 05:35:29","false","parse_sparse_output.sh: add ""removes address space"" and ""too many""

Catch the additional two warnings below:

warning: too many warnings
warning: cast removes address space

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",54,59,1
"thesofproject/sof","6d69bbc2197b5acc9bf788dfc2a46301bedfaba6","balakishorepati","2022-06-20 14:06:47","false","platform:amd: increase SRAM inbox and outbox size to 1024

Increase SRAM_OUT_BOX, SRAM_IN_BOX sizes to 1024

Signed-off-by: Balakishorepati <balaKishore.pati@amd.com>",120,49,1
"thesofproject/sof","53b2d08c6f36703576de1e659ef04032224b443d","keyonjie","2021-02-04 05:30:10","false","ll_schedule: reschedule logic refining

Reschedule once interrupt is handled by all cores(clients) according to
the earlist task of the list, and enable interrupt on cores that have
tasks to run.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",70,32,0
"thesofproject/sof","ca65a442bb84a2b144438c681ef142bab04d6d75","finikorg","2020-04-15 20:16:12","false","Handle missing .init_array section

Fixes issue "".init_array"" is not copied to ri image making it zero
filled. This causes Zephyr crashing trying to execute functions from
this section.

Signed-off-by: Andrei Emeltchenko <andrei.emeltchenko@intel.com>",82,22,0
"thesofproject/sof","81eba29a2fcd3a28e0d61aaf448290b74002441c","tlauda","2018-06-04 11:03:42","false","rimage: add support for automatic MEU signing

This patch allows rimage to sign FW binaries using MEU tool.
Paths to MEU and private key have to be provided during config step.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",1,0,0
"thesofproject/sof","c7d01494bb74ea628e4a15fab9c0f0656b6749ff","tlauda","2019-10-11 10:04:52","false","pipeline: fix tasks initialization

Fixes tasks initialization for connected pipelines.
If we play on pipeline, which is not the owner of
the scheduling component, then the pipeline_prepare()
is not called on pipe owning that component and tasks
stay unitialized.

Fixes: de7d4c95cfbd (""pipeline: allocate pipe_task only if needed"")

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",61,16,0
"thesofproject/sof","3dbeefac49088d7cd288041f867ae72ec6d28178","jajanusz","2019-08-23 09:56:07","false","rimage: tgl machine definition

Add support for tgl platform in rimage tool.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",55,15,0
"thesofproject/sof","b8fa3c7ad5b59b40d02989b5af7735eb405dc241","singalsu","2019-08-16 12:52:45","false","Topology: Add amplifying high-pass EQ to DMIC capture paths

This patch alters topologies those use pipelines definitions from
intel-generic-dmic.m4. The 48 kHz and 16 kHz capture pipelines are
changed to use pipe-eq-capture instead of pipe-volume-capture. The new
pipeline contains volume but also an IIR EQ set for second order
high-pass with 50 Hz cut-off frequency. The IIR includes +20 dB
gain. The volume max is decreased by 10 dB due to the amplifying
IIR add.

The gain in IIR helps with too low capture loudness with default 0 dB
setting for volume. Further gain can be achieved with volume control.

The high-pass filter fixes the issue of too slow DCCOMP settling in
DMIC platform hardware. With IIR add the DMIC unmute ramp is shortened
to 200 ms from 400 ms in the 48 kHz pipeline. In 16 kHz pipeline the
400ms unmute is preserved due to slower DCCOMP settling time.

The min. channels count of two is replaced by pipeline channels count
macro to prevent corrupt capture to happen by capturing as 2ch from
4ch source.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",57,14,0
"thesofproject/sof","e69ebddb4f61a0e7047efb728f7d7525171b6690","lgirdwood","2018-07-17 17:06:43","true","Merge pull request #117 from tlauda/topic/dai_write_back_buffer

dai: capture buffer should also be flushed from cache",13,2,0
"thesofproject/sof","2746df76b98f21d3e0b2c5cd4fe405c9a42014a4","ktrzcinx","2020-02-13 10:14:48","false","ssp: Use *BIT* macros instead of raw bit operations

Introduced solution is more elegant and reliable because of
masking given argument in SET_BITS.
Moreover remove unused masks which usability is taken by SET_BITS
macro with given bits range.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",82,20,0
"thesofproject/sof","6a23e48e158479889ac0d89d5b59120abc7b0a04","ktrzcinx","2020-06-24 10:06:16","false","perf_cnt: Add simple tic-toc api

For simple performance measurement and optimization in development stage,
tic-toc api is provided. Performance data are traced at each tok call,
to allow fast clocks usage deviation estimation.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",69,25,0
"thesofproject/sof","97a8c685f8d086869d85827bd6e73c5d2605ec67","ktrzcinx","2020-08-24 06:08:44","false","logger: Implement whitespace trimming functions

They will be needed during trace filering command parsing,
to skip whitespaces. As generic functions, their are placed
in misc file instead of any feature-related file.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",75,27,0
"thesofproject/sof","fd3181893130581a60429353e6701a574f8bb2e0","kv2019i","2023-03-17 07:14:42","false","coherent: fix cache flush logic if coherent is not the first member

If coherent object is at non-zero offset, the init call ends
up invalidating data cache outside the allocated buffer.

All current users of ""struct coherent"" have the object as
the first member, so nothing is broken with current code.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",56,57,1
"thesofproject/sof","4f701966d68c09d352cfb8ba84ed9606c210f812","bkokoszx","2020-01-08 12:36:43","false"," component: add dai_get_hw_params() function to component ops

 Add dai_get_hw_params() function to component ops (mandatory
 only for dai components) in order to fetch hardware dai stream
 parameters.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",72,19,0
"thesofproject/sof","054a338d8f71f14942fdf774af84eb7422feb6ba","lgirdwood","2018-11-06 14:05:58","true","Merge pull request #545 from xiulipan/pr/dockersh

Scripts update",39,5,0
"thesofproject/sof","82bddf6cb8eef731071a7f11a44787e4838cd017","mrajwa","2020-11-27 13:54:43","false","topology: increase buffer sizes off post processing

This patch increases buffer periods of all components on a
post processing pipeline. This is needed because post processing
may introduce deep buffering and hence needs more space in its
buffers.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",78,30,0
"thesofproject/sof","77e96abba61fb8428836f1a3c977cd27a8628085","lgirdwood","2018-11-22 14:29:41","true","Merge pull request #616 from singalsu/add_codeowners_singalsu

CODEOWNERS: Add SRC; EQ, FIR, IIR, tone, and DMIC to singalsu",39,6,0
"thesofproject/sof","d2b188e4c1f7175f88ef770d6928f3494a86ae6e","mrajwa","2021-05-29 17:59:30","false","codec_adapter: generic: fix comments

This patch fixes wrong comment in generic processing function.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",83,36,0
"thesofproject/sof","a845daff864c31131e407409efdc07aa1127fdd7","lgirdwood","2018-07-03 09:49:39","true","Merge pull request #41 from mmaka1/dox-for-breathe

Dox for breathe",7,1,0
"thesofproject/sof","1d4cca5610dcada37a141795604ef1684a28d92a","tobonex","2023-09-15 18:03:25","false","mux: remove buffer_acquire from mux

remove buffer ops from mux module

this is a continuation of changes
from commit 4a03699

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",20,63,1
"thesofproject/sof","a6d6ed7632fa95fd9ad5a61dc9b3472d96f22e9c","lyakh","2023-01-25 13:32:34","false","waves: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register waves with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","418b18826085171877957e70c17c42239f922320","lyakh","2022-06-15 09:55:41","false","module-adapter: fix prohibitively verbose log message

module_adapter_copy() is typically called every millisecond for each
copy. Issuing an ""info""-level log statement with that frequency
floods the log. Replace it with a ""comp_dbg().""

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",119,48,1
"thesofproject/sof","ffd0542127bc101b8a09f09a92a9f193f2be260e","aiChaoSONG","2023-02-14 07:14:19","false","adsp_config: make the default value zero for init_config

The init_config is used to indicate if base config extension is
used (1) or not (0). Its default value is used if not specified
in module config, the default value for init_config should be zero
instead of one.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",57,56,1
"thesofproject/sof","8c60a56fef9db67cce2a3c69f1f0e1c6bebd45a4","tlissows","2022-10-07 12:25:03","false","ipc4: add mixing-based processing in channel selector

Add mixing-based processing in channel selector to implement
capabilities resulting from IPC4 configuration. Enable flexible
channels count (from 1 to 8) independently for input and output.

Signed-off-by: Tomasz Lissowski <tomasz.lissowski@intel.com>",98,52,1
"thesofproject/sof","228ecf57680ed12c9087bf6d2a02c1689936cedb","ranj063","2023-04-20 03:39:31","false","topology2: hdmi-generic: Fix audio format for DAI copier

It should only support 32-bit format for input and output.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",51,58,1
"thesofproject/sof","46e49cc3b452792f39c23b889e9caab2802ed574","singalsu","2020-09-09 08:46:48","false","Tools: Testbench: Fix mistake in topology component load by UUID

The if test needs to be done for comp_type. The index does not refer
to comp types but items in lib_table that is not correct. As result
testbench loads crossover for all UUID based components. The load of
beamformer works correctly with this change.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",66,27,0
"thesofproject/sof","2e4b435302c994b0be9e7fc7b45a0b28dba805a6","singalsu","2018-11-29 16:13:29","false","Tools: Topology: Update EQ related topology files for new user ABI

This patch adds the ABI header into topology EQ data files and updates
the pipe-eq-volume-playback.m4 to include the coefficients from m4
directory like other topology files to prevent duplication of
response data.

The CONTROLBYTES_MAX is decreased to 304 due to larger IPC header size.
The update is not critical since the kernel contains other checks to
cover this. However it's done to avoid confusion.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",40,6,0
"thesofproject/sof","992aa661ab338d7b470db5dda7e8cec249aaffb2","singalsu","2019-05-10 15:31:39","false","Topology: Rename pipe-src-playback.m4 macro

This patch renames the macro to pipe-src-volume-playback.m4 for
consistency with other audio processing plus volume
pipelines. The topologies those use it are modified for the new
file name.

A new macro for testbench usage called pipe-src-playback.m4 is
added. It is plain SRC component pipeline without volume. The
volume component in the pipeline caused difficulties with test.
The script tools/test/topology/tplg-build.sh will use the
pipeline to create test topology for SRC component.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",58,11,0
"thesofproject/sof","703e8269f34d6c1138a79800810c39d18c9b3d0e","singalsu","2019-10-15 13:03:11","false","SRC: Fix sink and source PCM formats handling in prepare()

This patch avoids wrong configuration for PCM format and audio
corruption in capture pipelines usage if the pipeline requires
format conversion.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",66,16,0
"thesofproject/sof","46a9d87f1f75dd72076018691b76de020e8176f6","marcinszkudlinski","2023-09-20 10:57:58","false","sink/src: change IBS/OBS in API to more meaningful names

there's a big confusion in naming: meaning IBS/OBS from
module point of view is opposite to meaning of OBS/IBS
from buffer or queue point of view

This PR changes
 - IBS to min_available
 - OBS to min_free_space

names like this are less likely to cause confusions

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",19,64,1
"thesofproject/sof","7bc2958ba4fd8bab351e688225c2241812cf1cb4","singalsu","2023-09-01 17:25:48","false","Config: Add DCblock to TGL, TGL-H, MTL, and LNL

This patch enables load of the DC blocker component.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",24,63,1
"thesofproject/sof","0d296ce7d179b75b3fd0c2178891c51a88e6ca6f","singalsu","2021-12-10 10:26:57","false","Tools: Tune: Make example FIR response long for large IPC test

The loudness EQ is changed to 250 taps to create large IPC
message type. It also improves subjective quality of this
effect with better bass response. The earlier version was
made very short to fit the that time IPC size limit.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",123,42,1
"thesofproject/sof","7812a5d8c6abb7c5339048593e0e4b1597e4c985","tlauda","2018-07-31 13:49:05","false","pipeline: schedule capture pipeline also after stop

Schedules capture pipeline after stop - start sequence
to avoid problem with xrun. Issue is resolved nicely with
valid pipeline state changes.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",17,2,0
"thesofproject/sof","fa9b4ed67488319f14ef5a59553e18b7f723334a","tlauda","2019-09-13 14:02:13","false","hda-dma: remove HDA_DMA_MAX_CHANS definition

Removes HDA_DMA_MAX_CHANS definition as it's not needed.
We can directly use the number of allocated channels.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,15,0
"thesofproject/sof","0e4ab04d28b5df0eb2b6ece49b7705b318d9a3a6","tlauda","2018-12-13 10:06:18","false","pipeline: timer driven ppl copy called synchronously

Timer driven pipeline_copy should execute task
synchronously. No need to involve scheduler.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",46,6,0
"thesofproject/sof","6195c63ac9a484b25f75d9424017beca5c6593d9","tlauda","2018-08-22 10:42:01","false","ipc: share component list between cores

Shares component list between cores.
Uses uncached addresses in order to avoid need
to perform complicated invalidations before accessing
the lists.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",19,3,0
"thesofproject/sof","a57b951f2c4cae9348e6f23fba5a04f9adda6111","lyakh","2019-09-06 13:03:34","false","notifier: remove superfluous initialisation

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",60,15,0
"thesofproject/sof","904a633351001557d9154f43018f78849c3897be","lyakh","2022-08-05 13:01:44","false","eq-iir: eq_iir_verify_params() has to acquire buffers

Failing to properly acquire buffer objects for access leads to a
CI regression.

BugLink: https://github.com/thesofproject/sof/issues/6075
Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",116,50,1
"thesofproject/sof","a47a8a6a21e7f6a2ca7b1e141f10fbe431523b92","ShriramShastry","2021-01-05 09:54:35","false","audio: tools: fix matlab/octave directory compatibility

To support exist function - fullfile() path addition is to prevent Matlab (differently than Octave)
to give false positive with some other directory location with it's search path

Added correction to isempty.

Signed-off-by: ShriramShastry <malladi.sastry@intel.com>",73,31,0
"thesofproject/sof","bbc5209c4ff734ffb760626ac102f6ae60811cf3","MingJenTai","2021-08-17 02:38:14","false","Support RTNR on Tigerlake platform

This PR adds RTNR Noise Reduction/Suppression(NR/NS) component by
Realtek Semiconductor Corp. This feature links to proprietary libraries.
Please contact antz0525@realtek.com for any question about the library.

Signed-off-by: Ming Jen Tai <mingjen_tai@realtek.com>",117,39,0
"thesofproject/sof","deb7a097e3cf0fd0c71315aa9083493931e6ea9e","aiChaoSONG","2023-09-26 07:50:48","false","github action: remove duplicate build for TGL/TGL-H

At the beginning, we have two build jobs in github
action to build IPC3 and IPC4 firmware for TGL/TGL-H.

The PR https://github.com/thesofproject/sof/pull/8048
switches cAVS2.5 configs to use IPC4 by default and
empties the cAVS2.5 overlay files. After the change,
the xtensa-build-zephyr.py script is building the
same IPC4 firmware with or without '-i IPC4' option.
So we have two jobs running different build command
but build the same IPC4 firmware.

Recently, commit 5004d0fe1e74 (""zephyr.yml: remove ipc
option for zephyr build"") removes '-i IPC4' option
in github action for TGL/TGL-H IPC4 build. So we have
duplicated jobs to build firmware for TGL and TGL-H
in the end.

This patch removes the duplicated build job which previously
is used to build IPC3 firmware for TGL/TGL-H and obsolete
comments.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",18,64,1
"thesofproject/sof","75337b41eb5147f8b9d3c82d8051f1832def43ab","aiChaoSONG","2023-09-21 06:45:52","false","topology2: remove duplicated pipeline index attribute definition

The pipeline-common.conf helps us to define several
common pipeline attributes include pipeline index,
there is no need to define pipeline index in each
pipeline class definition if pipeline-common.conf
is included.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",21,64,1
"thesofproject/sof","8e9df078e1df3162ee65ef03e9021064e3575291","aiChaoSONG","2020-01-13 09:49:20","false","kpb: get correct threshold with valid bits

We should get threshold with valid bits rather
than sample width.

Signed-off-by: Amery Song <chao.song@intel.com>",77,19,0
"thesofproject/sof","8dee4e4262bcb0dc426c278a1d7af97bd3df26a6","balakishorepati","2021-07-07 14:47:14","false","platform: amd: renoir: Add BT mode based on flags

By default SP mode was enable. BT mode will be
enable based on CONFIG_AMD_BT flag.

Signed-off-by: Basavaraj Hiregoudar <basavaraj.hiregoudar@amd.com>
Signed-off-by: Anup Kulkarni <anup.kulkarni@amd.com>
Signed-off-by: balapati <balakishore.pati@amd.com>",87,37,0
"thesofproject/sof","32e0b1d0b06a2bf0622c81f55519fa32d8d56efd","ktrzcinx","2020-02-27 07:34:49","false","sof: Add __section macro

New introduced macro is much shorten, have less parethesiss and
create possibility to easy change __section behavior in future
what is relevant in cross-platform source code.
Using such a macro is preferred way to define target section
in used checkpatch version.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",75,21,0
"thesofproject/sof","3c9657789d7fff1e9f0349bf8f8c25a38ba7af0d","ktrzcinx","2020-10-19 08:52:55","false","trace: ipc: pipeline: Add logs about ipc_pipeline_complete() errors

A few error paths through ipc_pipeline_complete() didn't send
any error log. Each silent error path is some kind of firmware
malfunction.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",73,29,0
"thesofproject/sof","6cebb327a287dcec2f218909ff1ffa620189e407","singalsu","2023-08-18 12:00:55","false","Tools: Topology1: Add IIR and IIR+FIR HDA generic playback topologies

This patch removes non-practical sof-hda-generic-loud topologies and
generates instead IIR and IIR+FIR topologies for headphone/speaker
path for no-DMIC/2ch-DMIC/4ch-DMIC platforms. The IIR and FIR are
by default programmed for pass-through without any processing.

sof-hda-generic-iir.tplg
sof-hda-generic-iir-2ch.tplg
sof-hda-generic-iir-4ch.tplg
sof-hda-generic-iir-fir.tplg
sof-hda-generic-iir-fir-2ch.tplg
sof-hda-generic-iir-fir-4ch.tplg

The custom topologies can be used e.g. copying them to
/lib/firmware/intel/sof-tplg-custom/ and by adding
to /etc/modprobe.d/sof.conf the following lines with desired
configuration un-commmented.

#options snd_sof_pci tplg_filename=""sof-hda-generic-iir.tplg"" tplg_path=""intel/sof-tplg-custom""
#options snd_sof_pci tplg_filename=""sof-hda-generic-iir-fir.tplg"" tplg_path=""intel/sof-tplg-custom""
#options snd_sof_pci tplg_filename=""sof-hda-generic-iir-2ch.tplg"" tplg_path=""intel/sof-tplg-custom""
#options snd_sof_pci tplg_filename=""sof-hda-generic-iir-fir-2ch.tplg"" tplg_path=""intel/sof-tplg-custom""
#options snd_sof_pci tplg_filename=""sof-hda-generic-iir-4ch.tplg"" tplg_path=""intel/sof-tplg-custom""
#options snd_sof_pci tplg_filename=""sof-hda-generic-iir-fir-4ch.tplg"" tplg_path=""intel/sof-tplg-custom""

The patch contains a fix for pipeline with FIR to undefine the
related macros to avoid them to possibly impact another FIR instance.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",24,63,1
"thesofproject/sof","e7816e9e63fc809c22b2a8cc8e239829dafb75d8","singalsu","2023-08-29 15:50:53","false","Tools: Tune: dcblock: Fixes for Matlab compatibility

The script can be run in both Matlab and Octave with these
changes.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",25,63,1
"thesofproject/sof","05e8c4f615ed6ee07becc10baac795b703cdbe43","marcinszkudlinski","2023-08-18 10:41:31","false","src: add is_ready_to_process call to src module_get_private_data

Introduce is_ready_to_process method for SRC.

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",24,63,1
"thesofproject/sof","369dac1a226d002839d1e5bd1c5a0e855a612079","singalsu","2023-10-25 13:49:41","false","Trace: Rename UNUSED() macro to SOF_TRACE_UNUSED()

The xt-clang RI-2022.10 compiler headers define UNUSED. The
rename of the macro for trace fixes in testbench build this
error:

  In file included sof/tools/tplg_parser/pga.c:17:
  In file included sof/tools/tplg_parser/
  ../../src/include/sof/lib/uuid.h:11:
  In file included sof/tools/tplg_parser/
  ../../src/include/sof/common.h:105:
  /home/singalsu/work/current/sof/sof/tools/tplg_parser/
  ../../src/include/sof/trace/preproc.h:162:9: error:
  'UNUSED' macro redefined [-Werror,-Wmacro-redefined]
  #define UNUSED(arg1, ...) do { META_RECURSE(
  xtensa/XtDevTools/install/tools/RI-2022.10-linux/XtensaTools/
  xtensa-elf/include/xtensa/xtensa-types.h:60:9:
  note: previous definition is here
  #define UNUSED(x)       ((void)(x))

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",8,65,1
"thesofproject/sof","846e693f1f7b67ccac1ed38b3b68f540a5b27034","singalsu","2019-05-16 16:24:03","false","Tools: sof-eqctl: Print return code for fails.

This patch adds printing of return code in decimal for failed
user control attempt. It helps the user to understand why a fail
happened.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",62,11,0
"thesofproject/sof","15bf883ead2a0c79d0cbd8aeda9d7fccb26c2fda","singalsu","2022-01-26 11:32:13","false","Tools: Test: Audio: Fix incorrect valgrind run control in audio test

The value for VALGRIND in the run command parameters needs to
be true or false. The value ""no"" causes an error in comp_run.sh
script run.

Fixes 30012d1454

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",104,44,1
"thesofproject/sof","46e326f239916aa638f5f0959216c9bbe7020ca8","marcinszkudlinski","2023-06-12 10:57:49","false","src: POC - change src module to use sink/source API

This is a porting of SRC module to use sink/src API
To have src fully ported there's a need to get 100%
independent of audio_stream and buffer.c
This step is necessary because other implementations of
sink/src, like DP Queue, may not be based on buffer
implementation

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",47,60,1
"thesofproject/sof","0fa9f7d89202940524c364e062c64d91bb06efd0","singalsu","2020-11-20 09:20:23","false","Topology: Updated TDFB related topology files with beam controls

This patch contains updates to add beam on/off and direction controls.
The common m4 tasks to add controls are placed to include files
tdfb_controls.m4, tdfb_defines.m4, tdfb_undefines.m4.

The single beam examples are replaced by blobs with 0, +/-30, and +/-90
degree angled beams. The Arrays are 50m, 68mm spaced for typical
notebook microphones. The 28mm example is for four microphones. A four
microphones for notebook with microphones at 0, 36, 146, and 182mm
line locations.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",74,30,0
"thesofproject/sof","87a044f583e675e35421143ee6df3da7c8af41be","singalsu","2018-11-22 14:23:08","false","CODEOWNERS: Add SRC; EQ, FIR, IIR, tone, and DMIC to singalsu

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",39,6,0
"thesofproject/sof","509a9064268d4f5796245f7f8f44e6532d80985b","singalsu","2020-04-23 16:52:48","false","Tools: Test: Improve Matlab compatibility

The function getpid() is only available in Octave. Instead use
a random integer number as identification to avoid conflict with
possible several simultaneous simulations with temporary files.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",71,23,0
"thesofproject/sof","c76a458e4ff9b1a67eada081cff4f12d4d4f3791","singalsu","2019-01-03 16:36:34","false","SRC: Add support for S16_LE PCM data format

With this patch the S16_LE format becomes supported in addition
to S24_4LE and S32_LE. The generic C, HiFiEP, and HiFi3 versions
are updated. The patch changes the s24 polyphase algorithm for
s16 data and changes the s32 algorithm for both s24/s32 support
with a shift by 0 or 8 parameter.

As done for other components too the PCM format handling is moved
from params() to prepare() function since the actual pipeline
format didn't appear correctly in params().

The patch removes the own ceil_divide() function since it's
provided by math library. Also some code indents are fixed.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",50,7,0
"thesofproject/sof","af38b20bc84f79c81fc37066cdd255b81cb08b11","tlauda","2020-04-27 10:54:31","false","pipeline: do not cancel task on xrun

We should not explicitly cancel pipeline task on xrun.
Xrun is handled by different functions and task state
flow will be handled by START and STOP commands.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",92,23,0
"thesofproject/sof","672409b14bc743787c660adeab5cf3737dc56bb3","tlauda","2020-01-20 15:04:46","false","buffer: add core id to comp_buffer

Adds core id to comp_buffer structure. It allows for
easy retrieval of core on which buffer has been created.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",80,20,0
"thesofproject/sof","a46e786aed98f21489c23471ec8bc12c639b7491","tlauda","2019-07-10 11:20:02","false","common: extract common helper macros to separate header

Extracts common helper macros to separate header called
common.h.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",42,13,0
"thesofproject/sof","00442c231005383da5ea5b2ab39c3fe5a625f93c","kv2019i","2023-02-14 08:18:50","false","west.yml: upgrade rimage to 3863e94fa5d3

Pull in following rimage changes:

3863e94fa5d3 Don't convert ROM addresses to cached aliases
1e0a85b44a19 config:tgl/tglh: Do not set cached/uncached address aliases
9b507ecc82d9 config: set cached and uncached aliases for affected platforms
def9d51d7d81 Fix regression - make default return code an error
d48ae7aadaa4 config: mtl: Set init_config for smart amp
b5d762290f1a config: tgl-cavs: set init_config for smart test
15ea48177a2b src: adsp_config: Use reserved bits for module init config
ec649f37d661 Convert all ELF addresses to cached for calculations

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",57,56,1
"thesofproject/sof","1e39ceec78b6150f4567e2631bc380762351bbdc","simransinghal","2020-03-30 16:22:49","false","alloc: Simplify function return logic

Simplify function returns by merging assignment and return into
one command line.

Signed-off-by: Simran Singhal <singhalsimran0@gmail.com>",67,22,0
"thesofproject/sof","90fbcd54f3c0ee562a7557c9d010099c73536cf8","kv2019i","2019-03-27 16:00:39","false","topology: add param check to DAI_CONFIG()

Abort build if not all mandatory arguments are passed to the
macro.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",56,10,0
"thesofproject/sof","eef56b3988f4916dd2c3ff119a1c6ba8346bcdf3","marc-hb","2021-07-16 08:00:02","false","trace: move CONFIG_TRACEM implementation up a couple levels

From deep down trace.c:va_tracelog() up to the _log_message() level.

Also rename va_tracelog() to the more specific dma_tracelog()

Preparation to support the DMA trace in Zephyr.

The only functional change in this commit is that DMA messages copied to
the shared memory are not de-duplicated any more (a.k.a ""adaptive rate
limiting"" or CONFIG_TRACE_FILTERING_ADAPTIVE). These are generally
supposed to be high level hence rare enough; otherwise there is probably
a ""bigger problem"".

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",92,37,0
"thesofproject/sof","734dbd38f0dc13ae4f1185dc7add73aff57e7f26","wenliangwu","2023-05-19 03:40:29","false","drivers: mtk: add missing argument

One argument is lost in the debug message. Add missing rptr in the
patch.

Signed-off-by: Trevor Wu <trevor.wu@mediatek.com>",50,59,1
"thesofproject/sof","2dcc3f79f7584dafde64b7b0eb5560fd0c216e06","lyakh","2019-02-14 12:08:29","false","panic: move most functions from the header to a .c file

Many functions in src/include/sof/panic.h are too large to be inlined
and repeated every time the header is included. Move them out to
src/lib/panic.c

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",60,8,0
"thesofproject/sof","e23bd336d43c99d8d149becd0be9909c96757967","lyakh","2021-07-20 14:51:19","false","host: (cosmetic) simplify function return flow

Remove redundant initialisation, re-use the same return statement.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",91,38,0
"thesofproject/sof","e4502448354828399c313ec2ccf4618e1c0cb634","lyakh","2019-03-05 11:41:08","false","ipc: (cosmetic) stop confusing editors

Some editors (e.g. emacs) do not take into account preprocessor
conditionals when performing syntax highlighting. I.e. patterns like

	if (a) {
	if (b) {
		do_things();
	}

cause those editors to miscalculate the number of opening and closing
braces and thus break code highlighting. Move the opening brace to
after the preprocessor conditional to avoid that.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",65,9,0
"thesofproject/sof","337afc4f3809ed2ef0da932f6ce97919b2077968","marc-hb","2020-09-11 03:27:25","false","logger: add error message when reading sof/etrace instead of sof/trace

Failing silently is not nice. Now prints instead:

  TIMESTAMP   DELTA C# COMPONENT   LOCATION   CONTENT
  error: in logger_read(), fread(..., /sys/kernel/debug/sof/etrace) \
    failed: Invalid argument(22)

Also make logger_read() and the process return [-]errno which can have
different values and some information instead of -ferror() which has
only one value (non-zero in theory, 1 in practice) hence no information.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",65,27,0
"thesofproject/sof","d1abc8815319ec899a4d3a566766ca9b0519a13b","plbossart","2021-07-13 15:37:11","false","topology: add development version for Volteer tests

Add support for reuse of sof-tgl-rt711-rt1308 on Google Volteer. This
is not intended for production but removes both hotwording and
smart-amp support - this simpler topology is intended for
SoundWire/DMIC tests only.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",88,37,0
"thesofproject/sof","517ad95d518cfe82784ce04167a854d511c4677e","lrgirdwo","2021-04-12 16:14:14","false","ipc: split ipc headers per function.

Split IPC APIs out by feature so that the IPC layer to help future
IPC infrastructure changes support more than one IPC ABI MAJOR version.

No code changes here, only code partitioning and Doxygen comments.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",81,34,0
"thesofproject/sof","2ce64f914f318ec3f8f6fd10bca34b52ed3d6def","plbossart","2021-03-29 23:04:56","false","topology: soundwire: use macros for dailink names

use eval w/ macros instead of hard-coded values

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",79,34,0
"thesofproject/sof","aef421ac4a4eed4f2861cbb7965b7583e0fa5186","plbossart","2020-06-27 19:16:59","false","topology: cht-max98090: align with byt-nocodec

Only the SSP settings need to be different.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",70,25,0
"thesofproject/sof","44ea105c06748809cfb11c31d9aefb5475692f28","xiulipan","2018-11-22 10:22:34","false","ipc: set timer delay to 0 for ipc_get_page_descriptors

Set the timer delay to avoid none init value broke the dma copy.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",40,6,0
"thesofproject/sof","8ed3bce0ea6ee894686520653bbc9e70c5f918d9","RanderWang","2022-01-12 12:58:56","false","ipc4: add general S24_3LE support

S24_3LE is not a native supported format for hda dma. Driver
treats it as 16bit stream or 8bit stream, .e.g. 24bit 3LE
2ch stream will be set as 16bit 3ch stream. In FW side,
24bit stream will be converted to S24LE.

Currently HIFI3 optimization is not supported now and also
S24_LE unit test is not implemented. These will be supported
later.

Tested on windows platform.

Signed-off-by: Rander Wang <rander.wang@intel.com>",117,43,1
"thesofproject/sof","8d7274e911b630faa491b6ed31083f26d8b2896a","abonislawski","2019-11-05 09:50:38","false","probes: Implement injection probe flow

Implement probes injection capability for several probe points

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",53,17,0
"thesofproject/sof","385110cf9d56458ce6003ac6de1967ec4403a2e4","ranj063","2023-07-10 00:12:31","false","audio: volume: Simplify volume_params()

Use the helper functions to update the stream params and the source/sink
buffer formats.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",31,61,1
"thesofproject/sof","ea85ccf25f03db43f7c38c9862c69825765abb7b","abonislawski","2021-12-22 16:17:54","false","ipc4: copier: update source format if needed

used only for rare cases where two pipelines are connected by a shared
buffer and 2 copiers, this will set source format only for shared buffers
for a short time when the second pipeline already started
and the first one is not ready yet along with sink buffers params

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",120,43,1
"thesofproject/sof","0ba5c29a87eee291d2581b3ef79fcf436a7d03bb","ranj063","2022-03-23 22:28:51","false","codec_adapter: rename codec_adapter_ctrl_set_data()

to module_adapter_ctrl_set_data(). No functional changes.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",109,46,1
"thesofproject/sof","17f85baa706b822689a5c5208a78515ad9ce82c9","ranj063","2019-03-14 14:02:28","false","topology: merge sof-cml-rt5682 and sof-whl-rt5682 m4 files

The only difference between them is the SSP index and name.
Use a macro during compilation to indicate which platform
we're building for and set these appropriately.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",69,9,0
"thesofproject/sof","788e0534d64677119be0b06508f75fe201d5deb5","ranj063","2022-02-10 21:12:29","false","topology2: mixin/mixout pipelines: Add gain before and after mixers

Add gain widgets before and after the mixers in all the
mixin/mixout-based pipelines. Change the cavs-mixin-mixout-hda.conf
topology to add the mixer names for all gain widgets.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",108,44,1
"thesofproject/sof","3d71fa793cb6e42fc967220a97d1e178a91e5b5b","ranj063","2022-03-23 22:14:16","false","codec_adapter: rename codec_adapter_new

to module_adapter_new(). Also, rename ipc_codec_adapter to
ipc_module_adaptermodule. No functional changes.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",109,46,1
"thesofproject/sof","2b4467c0077890d08b2010f8b2b14c94b8e2b824","ranj063","2019-02-14 21:45:27","false","topology: whl: add topology for whl with rt5682

Add topology for WHL with RT5682. This will be merged with
sof-cml-rt5682 in the future to avoid maintaining 2 files
with just the difference in SSP port numbers.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",60,8,0
"thesofproject/sof","6c3bfaeff3d7f2f039ed4f189b1837907493d4c8","ranj063","2022-05-26 20:11:48","false","module_adapter: writeback buffer stream after copy

Writeback the buffer stream after copying.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",115,48,1
"thesofproject/sof","1e0a85b44a19db37f9dd18906091d87abd8bd5e6","ranj063","2023-02-10 16:42:49","false","config:tgl/tglh: Do not set cached/uncached address aliases

tgl.toml and tgl-h.toml are only used for xtos builds.

Suggested-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,56,1
"thesofproject/sof","b8a38072bc83b49b528865765a8adf53ea400c8a","marc-hb","2023-06-21 21:58:52","false","xtensa-build-zephyr.py: add support for aliases (ADL-->TGL etc.)

This restores parity with the installer/GNUmakefile in the stable-v2.2
branch and simplifies CI deployment.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",42,61,1
"thesofproject/sof","dff5c1bbc8f27d68c70c411b17dab26cd59585ea","lyakh","2022-06-13 10:22:46","false","coherent: coherent_shared() must hold the lock

Even when CONFIG_INCOHERENT isn't selected, coherent_shared() must
hold the lock when setting the flag.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",117,48,1
"thesofproject/sof","0a1c8b65afc02c716ab54519f85715b490973f0d","crazoes","2020-03-22 21:17:42","false","alloc: Match alignment with open parenthesis

Match alignment with open parenthesis to
maintain the coding style.

Reported by checkpatch.pl

Signed-off-by: Shreeya Patel <shreeya.patel23498@gmail.com>",66,22,0
"thesofproject/sof","f8932f6fd9d3a94f74e3c7706de958fd4b2ba38e","tlauda","2020-03-17 12:31:13","false","icl: memory: increase heap buffer size

Increases heap buffer size on ICL platform to have
sufficient space for KPB allocation.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",77,21,0
"thesofproject/sof","6e2cf6920bd5c62095e26e6751d3169a07c34b5c","tlauda","2019-12-19 13:41:05","false","trace: add trace to sof main context

Adds pointer to generic trace data to sof main context.
Also changes access to the trace data to go only through
sof context.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",72,19,0
"thesofproject/sof","b27b21a865c158305cc4e2802215d63ffb4e8a51","singalsu","2019-11-11 12:45:34","false","EQ IIR: Code style fixes for trace prints

This patch contains maintenance for module traces. Some redundant
traces are removed and some new traces with useful information are
added, especially if they are related to an error with configuration
request. The long trace strings are shortened to and split to
several lines at numbers print when possible.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",55,17,0
"thesofproject/sof","580e9a4531c3d764057b7adc41ae1fe1168fb2eb","keyonjie","2019-08-01 09:24:30","false","topology: pipe-kfbm-capture: create low power PCM for KWD PCM

This will make it possible for running Keyword Detection PCM at low
power status like d0i3.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",53,14,0
"thesofproject/sof","089de0f6abcc74d06a096717d59bf3e904c93eda","tlauda","2019-10-16 11:36:11","false","platform: remove unused PLATFORM_HOST_FINISH_TIMEOUT

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,16,0
"thesofproject/sof","b5f26539de5b55dda82f748be4def034ab714c89","plbossart","2019-09-19 22:08:33","false","topology: add topology for Up board w/ Hifiberry DAC+ using 50kHz SRC

The PCM512x requires 32-bit data words, so the only solution is to use
a 3.2MHz bit clock and a 48->50kHz SRC.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",63,16,0
"thesofproject/sof","efd935d3176b510b3151a3db8c7d9cf1365ed855","jajanusz","2019-08-23 13:12:40","false","cmake: meu: support tigerlake

Add support for MEU 15 that is needed for Tigerlake.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",54,15,0
"thesofproject/sof","f7e4127f4dad762db115bd89ba1ba3e3419ffe9c","tlauda","2019-05-13 14:46:08","false","ipc: cavs: send notification as soon as possible

Right now we are sending ipc notifications only on
passive level. With many pipelines running there
are simply too many messages to be send with not
much time to do so. This patch adds additional
message sending as soon as host reports readiness
to receive it. With this change likelihood of
getting out of empty messages is very small.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",61,11,0
"thesofproject/sof","956585e089d4c9d43621575108bda4d7905eb99d","lgirdwood","2018-07-20 21:28:49","true","Merge pull request #136 from tlauda/topic/host_pointer_init

host: do not initialize pointer every trigger start",13,2,0
"thesofproject/sof","6b88ed7edc6909b239d0a135c5809011a0d1d700","keyonjie","2018-07-12 03:06:14","false","buffer: refine write-back and invalidate logic for produce/consume

We only need to handle data consistency for buffer and cache when
new data produced:
1. source(DMA) --> buffer --> sink(non-DMA): invalidate cache.
2. source(non-DMA) --> buffer --> sink(DMA): write back to memory.
3. source(DMA) --> buffer --> sink(DMA): do nothing.
4. source(non-DMA) --> buffer --> sink(non-DMA): do nothing.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",13,1,0
"thesofproject/sof","fda59fb7d4e983c5d9ce82b908b471755bb516ec","bardliao","2023-05-19 05:58:38","false","topology2: remove cavs-sdw.tplg from avs-tplg

There is no device that uses the topology.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",50,59,1
"thesofproject/sof","de23c27ad20a857dc145d875322af5c0d272cfaa","tlauda","2019-08-09 10:25:47","false","pipeline: return SOF_TASK_STATE_COMPLETED on xrun

Returns SOF_TASK_STATE_COMPLETED on xrun. Otherwise if
the xrun happens during playback preload phase, we'll end up
in the infinitely processed task.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,14,0
"thesofproject/sof","a8e6dbdb800260721e917dd04732bd6d0adee084","mwierzbix","2018-11-22 10:11:02","false","github: added mwierzbix as owner of preproc

Signed-off-by: Michal Jerzy Wierzbicki <michalx.wierzbicki@linux.intel.com>",40,6,0
"thesofproject/sof","631567d1ddcb0a29001baee06c927a3017e38f50","mrajwa","2021-07-28 08:55:03","false","memory: change macro name

This changes the name of MEMORY_POWER_DOWN_DELAY to MEMORY_POWER_CHANGE_DELAY
as we use it in all power change cases and not only when power gating.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",106,38,0
"thesofproject/sof","82e44361bd0eb158f01bd1042a1452eba5289918","mrajwa","2019-04-09 11:08:20","false","KPB: rework of new() function

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",48,10,0
"thesofproject/sof","e94a34fce2db410675a4e5f8dd8fc29c7ed4248c","lgirdwood","2018-11-30 16:26:17","true","Merge pull request #651 from singalsu/fix_eqs_from_abi_update

EQ: Fix FIR and IIR equalizers for the new user ABI",40,6,0
"thesofproject/sof","4ba4aa8998ebe81b10a6896f0b10800373c7eb22","lgirdwood","2018-07-18 10:59:58","true","Merge pull request #124 from tlauda/topic/issue-19

dai: do not initialize pointer every trigger start",13,2,0
"thesofproject/sof","f74cb7f1530e4d18c368f6637b56192be41b525c","mrajwa","2019-03-08 00:20:01","false","CODEOWNERS: add mrajwa as code owner of kpb and gdb files

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",67,9,0
"thesofproject/sof","a35ec91c4defa3983bbc661e9ed0172693fdd33b","mrajwa","2019-07-31 20:59:11","false","kpb: check if KPB's sinks have been found at prepare()

This patch checks during prepare we managed to find KPB's
sinks.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",53,14,0
"thesofproject/sof","06138864d08d0073e1c0a9270b3030867dfb4755","lgirdwood","2018-06-29 15:41:44","true","Merge pull request #31 from tlauda/topic/irq_core

interrupt: use core id from interrupt value",9,1,0
"thesofproject/sof","79532b8dbc0129b7755629c85c57d6bffc80a1a7","btian1","2023-07-27 07:51:54","false","copier: fix no consume for multi endpoint copy

In last time copier code split, it split multi-endpoint copy and
module copy with commit: e424b87, source buffer consume was missed,
added it back with this PR.

Fixes:#7979

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",31,62,1
"thesofproject/sof","ae653d06a473c20e978416c14b6dcc56195ab5da","btian1","2023-10-19 08:59:55","false","Topology2: condense src input format with combined array

Condense input format to combined array for src.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",12,65,1
"thesofproject/sof","aa858dff6ba65f2f26cc69e8ff716afc94646341","btian1","2023-07-11 08:56:54","false","copier: refine host creation

refine host creation to remove redundant parameters and code.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",31,61,1
"thesofproject/sof","2c468a38c2d267ee3db84f16221840dcff2a0e58","cujomalainey","2021-04-13 22:03:32","false","alloc: fix non-compiling debug code

unmatched brackets, found by cppcheck

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",81,34,0
"thesofproject/sof","eb91a7f1fc1a72f68139c3c653261d81269e29d3","cujomalainey","2023-07-24 21:57:39","false","ipc3: Deprecate invalid enums

Mark enums that are unused or never implemented as deprecated since they
will never be implemented as IPC3 is legacy.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",32,62,1
"thesofproject/sof","50e27a10b077947a4942b0da956d2c289d847e13","cujomalainey","2019-03-13 20:07:51","false","EQ: GUI: Add external control window

Add window for controlling loading and deployment

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",68,9,0
"thesofproject/sof","f1aeaa5f93fdf39f5a0da4132a168b1a438c9658","akloniex","2020-03-20 18:02:09","false","muxdemux: Remove obsolete references to comp_dev within process functions.

After optimizations done in 2 previous commits, reference to base
component is no longer necessary inside provessing functions, which
allows for simplification of the internal interface.

Signed-off-by: Artur Kloniecki <arturx.kloniecki@linux.intel.com>",66,22,0
"thesofproject/sof","9cfe3eb8b084c5c93cde28c44d1d9cba3cfd3d72","jajanusz","2020-02-21 12:58:26","false","xtensa: cmake: refactor fw postprocessing

Separate post-processing steps to not have fw image parts building
mixed with tools processing.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",80,21,0
"thesofproject/sof","ada20134cdb7bc72c0a6f09fcf0937a8ce044bd3","jajanusz","2019-08-21 09:42:50","false","dmic: fix stop after pause

This PR fixes bug that makes active FIFOs count go below 0,
if you call stop after pause.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",55,15,0
"thesofproject/sof","9e1a2b251a3e9de4dcbc2be42a3853b281295a3c","jajanusz","2020-02-27 14:19:08","false","panic: noreturn attribute for scan build

Add noreturn attribute to decrease number of
false positives when using assert / panic.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",76,21,0
"thesofproject/sof","aecc07fff2281f2a9839c1d67574692fe5bbdcb5","jajanusz","2019-12-17 10:04:34","false","Revert ""kpb: check if draining speed should be controlled""

This reverts commit ec577bcc33dcc2bfc5374370aa12c4d3f65329d8.",69,18,0
"thesofproject/sof","e83965027114105b9342fd04ecb3c8b750c89c1a","macchian","2021-10-06 12:57:58","false","topology: add max98390 2/4 codecs and bt_offload support

This patch adds support for three configurations:

SSP1 connects max98390 2/4 speakers
SSP2 connects max98390 2 speakers

The SSP TDM configuration uses 4 slots for playback and
4 slots for the echo reference capture - regardless of the number of speakers.

UCM files in userspace specify which channels needs to be used on the specific platform.
There is no information reported by the topology/firmware related to valid channels.

Max98390 uses following channels mapping for playback and EchoRef capture
Chan 0 = Left
Chan 1 = Right
Chan 2 = Tweeter Left
Chan 3 = Tweeter Right
(Chan 0 and 1 with regular speakers;Chan 2 and 3 with tweeter speakers)

Addition:
  Add SSP2 BT_OFFLOAD support

Signed-off-by: Mac Chiang <mac.chiang@intel.com>",121,40,1
"thesofproject/sof","94f8b0c4d43773fa013aebbad5db4ecea14dbbdd","yongzhi1","2023-05-20 11:29:42","false","topology2: fix number range between 1 and 1000 used by Regex

Since IncludeByKey uses Regular expressions to validate text match,
the expression [1-1000] does not filter number between 1 to 1000 as
intended. For example, DEEPBUFFER_FW_DMA_MS=0 results in matched while
DEEPBUFFER_FW_DMA_MS=5 returns not found, fix with regex flavor pattern.

Signed-off-by: Yong Zhi <yong.zhi@intel.com>",53,59,1
"thesofproject/sof","5aa722e72b7f4e8dc1cbbe2df2585b8e25839002","zhuyingjiang","2018-10-15 06:21:38","false","rimage: add firmware 1.5 manifest binary descryptor

add the 1.5 version manifest, for skylake and kabylake

Signed-off-by: Zhu Yingjiang <yingjiang.zhu@linux.intel.com>",35,4,0
"thesofproject/sof","0a433c831ec956460a87843841141e04e330c873","zhuyingjiang","2018-11-20 06:32:59","false","scripts: add local version number file

we now using git tag for version number control, but if
we release the code without .git/ folder, the git tag version
number is not present, so will cause compile error.
add the .tarball-version file as the local version number file,
it still can be generated by the autogen.sh from git tag. So
everytime anyone make a git tag should still modify the
.tarball-version file.

Signed-off-by: Zhu Yingjiang <yingjiang.zhu@linux.intel.com>",39,6,0
"thesofproject/sof","a2ac3c3197d85d5b8b7c591742dac48709061056","xiulipan","2020-03-30 08:39:25","false","sripts: update host-testbench to work with latest code

Enable 3 simple test with host-testbench:
volume, src and eqiir
Usage:
./scripts/build-tools.sh -t
./scripts/host-build-all.sh
./scripts/host-testbench.sh

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",67,22,0
"thesofproject/sof","b154132b46ea744ecc243715e79ada9e67a9c181","RanderWang","2022-03-22 08:33:56","false","ipc4: check pipeline priority for error report

Fix capture issue on windows and linux. In original code
if the source is in another pipeline line and is inactive
, ENODATA is returned. If current pipeline has higher
priority than the source pipeline, then the source pipeline
may be not started, so we return error only when source
pipeline has higher priority.

Signed-off-by: Rander Wang <rander.wang@intel.com>",109,46,1
"thesofproject/sof","2898a1a6d95a0eeeb812f24cdafbb71698d82257","libinyang","2022-03-07 02:00:50","false","topology1: sof-icl-rt711-rt1308-rt715-hdmi: remove NO_AGGREGATION

NO_AGGREGATION is never used now. Let's remove it.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>
Signed-off-by: Libin Yang <libin.yang@intel.com>",116,45,1
"thesofproject/sof","586716e1b93037e06b6ba6dbd05c7fe7ac7c9ce4","reddymur","2022-09-12 13:52:51","false","topology1: CMakeLists: add ADL support for ES83x6 & HDMI_In Capture

Add ADL support for ES83x6 on SSP1, LT_HDMI_In capture on SSP0 & SSP2.
Signed-off-by: Muralidhar Reddy <muralidhar.reddy@intel.com>",106,51,1
"thesofproject/sof","7d661d397906c095845fdf1e492de3bc9517817f","lgirdwood","2018-11-21 14:57:28","true","Merge pull request #601 from mrajwa/icl_work

DMIC: Added power gating.",39,6,0
"thesofproject/sof","5092190b0cef9ffc56edfec81a3e6209baecf228","lgirdwood","2018-08-04 17:03:54","true","Merge pull request #193 from kakulesza/fix-hda-dma-config-dgmbs-align-bits

hda-dma fix: align DGMBS value to 32 bytes",16,2,0
"thesofproject/sof","85f399aadbc272329d27081f939d7b02f232b3ab","lgirdwood","2018-10-01 19:42:01","true","Merge pull request #445 from singalsu/eq_fir_heap_rt_1k_proposal

EQ FIR: memory: Add trace error for alloc fail and add a 1024 size buffer",34,4,0
"thesofproject/sof","3e848fe2e5fc7e5a2a90f1fa9a30eb50ac152501","lgirdwood","2018-10-10 15:38:54","true","Merge pull request #97 from akloniex/fix-formatting

logger: Fix formatting of line number value.",33,4,0
"thesofproject/sof","7ff729bb83e3951f84cfbf77e260ea0a9d08212c","lgirdwood","2018-08-21 12:36:00","true","Merge pull request #240 from singalsu/src_use_short_coef_with_gcc_proposal

SRC: Use 16 bit coefficients when FW is built with gcc",19,3,0
"thesofproject/sof","629d2a6bf1d0cf3c5b069d06fd120ed43ef5040f","lgirdwood","2018-07-02 09:33:14","true","Merge pull request #17 from singalsu/topic/fix_src_test_case_fail

SOFT: Improve audio test synchronization code",8,1,0
"thesofproject/sof","b365447dc61226c8e53358c15d588ba9616f8cd2","brentlu","2021-07-28 06:24:09","false","topology: sof-jsl-rt5682: add SSP_CC_BCLK_ES flag to codec DAI

Add support for cs42l42 with max98360a running on JSL boards. The
cs42l42 needs to enable bclk earlier in prepare stage and disable bclk
at hw_free statge so we add the SSP_CC_BCLK_ES flag for it.

Signed-off-by: Brent Lu <brent.lu@intel.com>",104,38,0
"thesofproject/sof","d5f359c0f41ff2a650ecafa17f18896d720e53ae","keyonjie","2019-06-27 10:41:47","false","sof-ctl: add '-t' to support specifying the component type

Firmware may use different component specified type in abi header, to
support more than one kcontrols for the same component, here add '-t' to
support specifying this component specified type in the abi header.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",46,13,0
"thesofproject/sof","83c10268f1d71a3d19c1e2790a183246e3c36838","marc-hb","2021-09-29 00:27:06","false","cmake: add EXTRA_CFLAGS support

Example:

  EXTRA_CFLAGS=""-Werror -g0"" ./scripts/xtensa-build-all.sh

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",121,40,0
"thesofproject/sof","bd54434a2f7d68ea63ac2099e5b0b8dd049c3b7e","marc-hb","2022-01-28 18:30:13","false","Do not pass array arguments to the ASSUME_ALIGNED() macro

Do not pass array arguments to ASSUME_ALIGNED() macro, pass a pointer
instead.

Then it is possible to make ASSUME_ALIGNED type safe.

When using -g0, gcc outputs are exactly the same before vs after this
commit.

Note it is still not possible to make the `cdata->data->data`
abomination type-safe because it is nesting non-standard zero-length
members. However that is a different issue; not ASSUME_ALIGNED's
problem. ASSUME_ALIGNED is apparently needed for some ""normal"" C code
too.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",102,44,1
"thesofproject/sof","996ffefed487b85de1612b4f527fac118f1bebb6","akloniex","2020-09-11 14:57:29","false","test: pcm converter: Utilize comp_buffer implementation instead of mocking

Currently pcm converter unit tests use mocked-up audio_stream
implementation which should be replaced with real FW implementation.

Signed-off-by: Artur Kloniecki <arturx.kloniecki@linux.intel.com>",65,27,0
"thesofproject/sof","8a275ea44be5cbe3b9db2f36374fad2fc943d439","jajanusz","2020-07-10 11:53:18","false","xtensa: clock: change cpu timer to per-core timer

Every core has it's own timer so cpu timer should be
handled for each core independently.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",73,25,0
"thesofproject/sof","054a218e836687a8a8cc89a3e81bca9e60354f8a","jajanusz","2018-09-11 08:40:53","false","autoconf: optional implicit-fallthrough

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",38,3,0
"thesofproject/sof","6154b59e3bc07a62cfaa9208978fbe33cb84ca96","jajanusz","2019-10-16 12:37:46","false","tigerlake: increase system runtime heap size

Update memory.h to have similar capabilities to other platforms,
that were updated when dynamic DMA channels were introduced.
Previous values were not enough for some topologies.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",65,16,0
"thesofproject/sof","6f882950171897b95448960449deb9e6a094e926","jajanusz","2019-03-19 13:18:56","false","cmake: fix memory mock lds for windows

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",64,9,0
"thesofproject/sof","97f3b70d65aecf459adc2fe708e861f4c81c21ab","jajanusz","2019-01-23 19:31:24","false","cmake: update cmocka git

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",56,8,0
"thesofproject/sof","82387c07a1bd541c192418db07754e41b5c47661","jajanusz","2019-02-05 14:38:19","false","cmake: fix config.h dependency for linker

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",56,8,0
"thesofproject/sof","5df56355d150fc47c308e7f6cd407fe3d95e51f4","johnylin76","2022-05-24 07:12:51","false","topology1: rtnr: set bytes control to read-only

Due to security requirement, the config bytes control is set to read-only
for RTNR with hard-coded the config blob in the topology.

It's WA until the security approval is obtained.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",115,48,1
"thesofproject/sof","7e46996c967e5c9dbed1d2b671adc3ab155ebd3c","dbaluta","2021-03-04 17:39:43","false","kpb: Introduce force_copy_type

Some platforms need to force dma copy_type for reasons
mentioned in
commit 9ba1814d1d94 (""kpb: change draining copy type to normal"")

Some platform's DMA controllers (like dummy-dma on IMX does not support
normal copy type).

So, this patch forces the copy type to normal only when
CONFIG_KPB_FORCE_COPY_TYPE_NORMAL is set, otherwise it keeps the existing dma
copy-type.

Also, add Kconfig entry for KPB_FORCE_COPY_TYPE_NORMAL and set it default to y
to keep bisectability up!

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",73,33,0
"thesofproject/sof","c6e7011e1ebb6e907be5f3af7fe59228a6125edc","marc-hb","2022-12-23 00:25:05","false","xtensa-build-zephyr.py: convert sof-info/ text files from CRLF to LF

Building on Windows generates CRLF text files. Standardize checksums to
LF files.

As usual, files in the build directory are left untouched.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",92,55,1
"thesofproject/sof","4875c446091ea059e93a9bb5b7554b8392888005","lrgirdwo","2021-03-28 13:34:02","false","pipeline: split pipeline up by function.

Split the pipeline logic up into stream, params, graph, scheduling and xrun
so that it easier to follow and understand. This is to help on the TSC work
to integrate the codec adaptor into core logic.

This PR is all mechanical code moves. There are NO functional changes. Some
function that were static are now public.

Followup patches will add more documentation updates alongside.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",78,34,0
"thesofproject/sof","580b9cf005952e4e780abec70744927791c9eab4","lrgirdwo","2021-04-11 19:53:08","false","memory: remove platform_shared_commit() as it's a NOP on all platforms.

platform_shared_commit() was intended to provide a managed approach to
cache coherency between all cores on Intel CAVS platforms. However this
approach was never completed and its far simpler to use uncached pointers
globally and convert to local cacheable pointer when needed. i.e. all data
is uncacheable by default on Intel platforms and cacheable only when
requested.

This PR is mostly a result of running:

find . -name ""*.c"" -type f | xargs sed -i -e '/platform_shared_commit/d'
find . -name ""*.h"" -type f | xargs sed -i -e '/platform_shared_commit/d'

But this does not catch everything so manual build testing also required.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",81,34,0
"thesofproject/sof","f28d3fbe227deaaf75c53ac09da959eace5e9cce","lrgirdwo","2018-12-13 11:58:22","false","gdb: fix ABI delta with kernel and make sure GDB flag is fully exported

Align ABI with kernel and make sure GDB enabled flag is fully exported
to all platforms.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",46,6,0
"thesofproject/sof","b6f37e54b33f93bb8244199469e7fc5dc5db938a","dabekjakub","2019-08-16 14:46:14","false","memory: add memory banks pm API

Added power management API for memory banks in CAVS platforms
Cannonlake+

Signed-off-by: Jakub Dabek <jakub.dabek@intel.com>",57,14,0
"thesofproject/sof","0a9262ae4b35db9cb7badcc0617bb2700569e4ab","iuliana-prodan","2021-03-22 17:49:29","false","drivers: imx: esai: set private data after allocation

ESAI allocates private data and retrieves this data using
dai_get_drvdata().
But this is never set using dai_set_drvdata() and sometimes
dai_get_drvdata() returns NULL.
So, after private data is allocated, set it using dai_set_drvdata().

Without this fix, on i.MX8QM, on playback we get:
root@imx8qmmek:~# aplay -Dhw:1,0 -f S16_LE -c 2 -r 48000 -d 5 -t raw /dev/urandom
Playing raw data '/dev/urandom' : Signed 16 bit Little Endian, Rate 48000 Hz, Stereo
[  197.478128] sof-audio-of 556e8000.dsp: error : DSP panic!
[  197.483547] sof-audio-of 556e8000.dsp: error: runtime exception
[  197.489473] sof-audio-of 556e8000.dsp: error: trace point 0dead006
[  197.495658] sof-audio-of 556e8000.dsp: error: panic at :0
[  197.501064] sof-audio-of 556e8000.dsp: error: DSP Firmware Oops
[...]

Fixes: f40222a1eaae (""drivers: imx: esai: use rate from topology"")
Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",73,34,0
"thesofproject/sof","8f7f94aebbfe284e733f5cb404f75c907832a12f","lyakh","2022-02-08 15:58:57","false","sparse: make dcache_{writeback,invalidate} functions use __sparse_cache

Data-cache flushing functions can only be used on cached aliases.
Using them on uncached aliases generates exceptions. At the moment we
have to cast all uses of those functions to use the __sparse_cache sparse
attribute. We should convert respective variables to the correct tyoe
one by one.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",108,44,1
"thesofproject/sof","18e31abd4794056cb441544ff3b010a42d371d13","keyonjie","2020-12-16 07:35:28","false","ssp: mn: log more info for bclk/mclk configuration

Log more useful information about bclk/mclk configuration to help track
the blck/mclk status.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",73,30,0
"thesofproject/sof","b5df7bf2aca0ec428a5dc2e6353f1cfeaf161009","keyonjie","2021-05-17 06:32:54","false","dmic: switch to use uncached dmic_prm[]

When multi-core introduced, we need to use uncached address for the
global configuration variables, to make sure they are consistent for all
DSP cores.

When variables change, write through for both cached and uncached
addresses, to ensure the consistency.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",86,35,0
"thesofproject/sof","242be345ca9f87db29b9cb4b12b91438d932814d","keyonjie","2020-09-27 05:58:43","false","ssp: fix the RX FIFO flushing logic

To make sure all the RX FIFO entries are read out for the flushing, we
need wait until the SSSR_RNE is cleared after the SSP is disabled (the
SSSR_BSY is cleared, otherwise, there might be obsoleted entry remained
in the FIFO which will impact the next run with the SSP RX and lead to
sample mismatched issue.

BugLink: https://github.com/thesofproject/sof/issues/3428
Cc: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>
Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",66,28,0
"thesofproject/sof","eb674d1dac2feac8417ec2d31646a329ac7c70c6","RanderWang","2022-03-17 12:49:59","false","ipc4: check direction to choose pcm format conversion function

For alh, link dma and host gateway, the conversion function is
based on direction. For example to convert s24c32 to s32c32 with
alh, it should be function of convert_s24_to_s32 for playback,
but it is a simple copy function for capture since the valid
sample bits are set in msb 24bits like 0xdddddd00 for alh gateway.

The combination of all conditions is very huge but only part
of them are used in real case. This patch only supports some
patterns in our test case and is not complete. It will be enhanced
in future.

Signed-off-by: Rander Wang <rander.wang@intel.com>",109,45,1
"thesofproject/sof","3b624a34efdf82e40f1a15b606669c5f19e9ff1e","RanderWang","2019-02-18 07:52:23","false","dma: BDW: add id field in dma engine

It is missed on BDW.

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",63,8,0
"thesofproject/sof","65b2e0b390bcf3c69ead38cdf5e0c676733f6147","RanderWang","2023-08-21 02:07:23","false","copier: adjust valid format based on sample type

Adjust valid format in copier for some types of dai gateway which
need to use MSB type.

Currently sample type only affect the copier module so we don't do
it in audio_stream_fmt_conversion.

Signed-off-by: Rander Wang <rander.wang@intel.com>",24,63,1
"thesofproject/sof","a5d32b4c3a0551a7e42e0b2af0b0fb17ad6f2079","RanderWang","2019-01-25 08:12:03","false","topology: hda: fix a hda bug when pipeline is in 24bit

sof audio pipeline with the format of 24bit doesn't
work on HDA platform. It is caused by sample data layout. SOF supports
S24_LE, and each sample format is like pattern of 0ddd, d stands for
data. Samples are padded with 0‟s at the MSB.

Link dma copys samples directly to hda bus, but hda bus requires samples
layout like pattern of ddd0. Samples are padded with 0‟s at the LSB to
left justify the sample within the container.

Now there is a volume at the end of hda pipeline. We only need to
convert dai type from S24_LE to S32_LE to make volume convert hda data to
correct format

Signed-off-by: Rander Wang <rander.wang@linux.intel.com>",56,8,0
"thesofproject/sof","388075ec821503c4bbe9153afa51d44c6c0a3c3e","maruthi-machani","2023-06-27 05:50:20","false","topology1:amd: comments update

topology comments update

Signed-off-by: MARUTHI MACHANI <maruthi.machani@amd.com>",40,61,1
"thesofproject/sof","14f08e69e7d646f9fd47048bade9ce92bcfbe0b7","maruthi-machani","2023-03-24 07:03:31","false","platform:amd:enabling tdm without virtual dai's

Enabling tdm without using virtual dai's.

Signed-off-by: MARUTHI MACHANI <maruthi.machani@amd.com>",56,58,1
"thesofproject/sof","a6e936359c410882b07c2ed16c48f7e9f312c1fd","kfrydryx","2022-07-25 07:57:48","false","src: enable hifi4 optimized src build with zephyr

Add src_hifi4.c to sources when building with zephyr.

Signed-off-by: Krzysztof Frydryk <krzysztofx.frydryk@intel.com>",112,50,1
"thesofproject/sof","ecec8d11d1b0150014e1a337b3e29c8900754b2f","yaochunhung","2022-03-07 08:31:40","false","topology1: mt8195: support 2ms pipeline capture period

When host is more heavy loading(e.g. camera recoding case),
the size of dai buffer is 4ms and not enough. Increase 2ms
period capture pipeline to buffer more data to avoid overrun.

Signed-off-by: YC Hung <yc.hung@mediatek.com>",115,45,1
"thesofproject/sof","32bcaaf383afe9426c02a3a258d411ecbfb41ada","plbossart","2018-06-18 19:27:31","false","apl-ssp: fix MCLK and BCLK source selection

The existing code does not provide support for the full flexibility of
the hardaware: MCLK and BCLK can be independentely divided from Xtal
or Audio cardinal clock. Add the ability to support different sources
and dividers.

The M/N dividers remain bypassed since they introduce an irregular
duty-cycle for the BCLK, which isn't desirable if the BCLK is used as
a reference by an external device.  With this patch MCLK can be
divided by at most a factor of 8 which is reasonable for all
(additional factors are possible but haven't been tested)

The MCLK1 output was tested on a GeminiLake hardware, confirming that
the register configuration set according to the spec do result in an
observable clock.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",1,1,0
"thesofproject/sof","b01267897450ab226c3595b716079de08fca7912","lrgirdwo","2018-12-07 00:37:11","false","trace: hsw, byt: reduce verbosity of DW and some IPC trace

Trace is being flooded with data about trace. make it verbose to improve
SNR.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",45,6,0
"thesofproject/sof","4be016befc757595ae0f6be41eeb2a46e7195b81","plbossart","2022-07-05 18:04:25","false","topology1: sof-tgl-rt711-rt1308: use EXT_AMP_REF for rt1316

RT1316 is exposed by the machine driver as having an echo reference,
so the indices are different from the regular ones.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",109,49,1
"thesofproject/sof","b15b9f350fbdca219ae7533d04fc3d5a9245624a","lrgirdwo","2018-11-02 15:57:34","false","uapi: ipc: Add reserved padding and convert enums to uint32_t.

Add reserved fields to structures that contain variable length data
sections to allow for future ABI compatibility. Also make all enums
into uint32_t type to prevent compliers treating enum packing
differently.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",30,5,0
"thesofproject/sof","030f27d556b4a7cb74a2ed59d3cc8dd02dbd9b0d","plbossart","2021-09-11 00:13:42","false","topology1: sof-hda-generic: add deep-buffer pipeline for analog playback

Use SoundWire convention with deep-buffer using device 31.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",117,39,0
"thesofproject/sof","68bce2514e4d0d087a2368257f40cbd249eb7087","mwierzbix","2018-11-08 12:05:05","false","debugability: workaround for SOF_TEXT_SIZE too big with smp enabled (issue553)

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",42,5,0
"thesofproject/sof","1893ea34d3a914fef5809896816d1466622372a9","dbaluta","2022-10-19 07:39:15","false","module_adapter: Fix compile time error

After commit e101aadcd1dc98 (""module_adapter: drop the comp_get_module_data() macro"")
API prototype was changed to accept a `processing_module` instead of a
`comp_dev` but `dev` was still used inside passthrough_codec_free which
generates a compile time error:

src/audio/module_adapter/module/passthrough.c:110:12: error: 'dev'
undeclared (first use in this function)
  comp_info(dev, ""passthrough_codec_free()"");

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",98,53,1
"thesofproject/sof","e91001af673c7011b93124c987741918eb50bd36","johnylin76","2021-06-16 05:40:04","false","topology: Add DRC_EQ def for adopting DRC/EQ pipeline

For speaker pipeline, we want to deploy DRC/EQ for partial TGL device
like Eldrid. The definition flag DRC_EQ is added to make the choice of
adopting the playback pipeline with DRC/EQ.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",71,37,0
"thesofproject/sof","6515df852e1599d7dc70deac4606721bb248ea22","johnylin76","2021-06-09 06:20:04","false","topology: fix name mismatch of EQIIR control bytes

The name of CONTROLBYTES_PRIV should be aligned as mentioned in
sof/pipe-drc-eq-volume-demux-playback.m4#48.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",81,36,0
"thesofproject/sof","bb6565d317c91e8c217ff9989fc70d0c27b080d3","johnylin76","2020-08-12 07:33:06","false","tools: testbench: add Crossover component tests

Crossover component is added as multi-output playback tests for testbench.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",74,26,0
"thesofproject/sof","aab739ec29389d007b69eb2058aa98105b59faa6","jajanusz","2019-06-10 10:40:10","false","cmake: drivers: fix indentation

CMake supports indenting, so we should use it.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",50,12,0
"thesofproject/sof","a63a877dbe8810b205b8c4bfb0a671de4c80ab65","serhiy-katsyuba-intel","2023-07-04 09:34:14","false","bind/unbind support for cross core connection

bind/unbind handler must be called from core on which component was
created.
When both source and sink components are created on same core,
bind/unbind IPC is processed on that core. However, when connected
source and sink are on different cores, IPC is processed on core 0.
Hence comp_bind_remote() and comp_unbide_remote() is added to call
bind/unbide from proper core.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",39,61,1
"thesofproject/sof","389d7e1bcd3e2aaa0ee502aefcff55e1219b87f6","pjdobrowolski","2023-01-25 15:17:39","false","lib_manager: lib_id mismatch prevention

It is possible that lib_id from IPC would not match
with lib_id of module. That can cause NULL pointer and FW crash.

Signed-off-by: Dobrowolski, PawelX <pawelx.dobrowolski@intel.com>",53,56,1
"thesofproject/sof","ffa8cad7ae750c1ef84d10e84d0fd1ecd1bd5277","iuliana-prodan","2023-03-14 01:02:08","false","mixer: skip inactive source

In case one of the sources is inactive, the avail_frames
for that source is 0 and the frames = 0.
So, later on, there is nothing to copy, even if, at least
one source is still active.
In this case, we get a ""write error: Input/output error"".

To fix this, allow mixer to process data from at least one
source, if that is active.
Or, in other words, if any source is inactive, skip it.

Signed-off-by: Iuliana Prodan <iuliana.prodan@nxp.com>",55,57,1
"thesofproject/sof","557a82d6172ee3e6a09c983665acc6d88b293535","lgirdwood","2018-11-16 15:14:08","true","Merge pull request #587 from jajanusz/fix-dmic-16b

dai: dmic: fix 16 bit capture",40,5,0
"thesofproject/sof","1cdf8f12bb5e345eb82f45818d54093c8af8d71f","lgirdwood","2018-08-08 09:19:59","true","Merge pull request #208 from plbossart/fix/trigger_stop_fail

dai: fix error handling when DMA is stuck",19,2,0
"thesofproject/sof","803b4b3f23a8bc015325602813f73b05a2b3ba5a","lgirdwood","2018-09-27 07:37:59","true","Merge pull request #423 from xiulipan/panicinfo

Add panic info into panic dump and fix some issues to make code build",38,4,0
"thesofproject/sof","1fbdc7f788b2aecc6fcfb044c7a6424d4d521638","xiulipan","2020-04-17 05:46:09","false","scripts: fix testbench with more check

add status check for the host testbench
also fix file size check

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",82,22,0
"thesofproject/sof","18082e38692539fb14dd8edb76505f60dad7acee","xiulipan","2018-06-11 16:01:50","false","scripts: docker: merge commands and remove src after build

Merge the build and remove src to reduce the layer size.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",1,0,0
"thesofproject/sof","cb0786cf427805e9a762c15dfe0cc826af4ce6cc","xiulipan","2019-01-17 10:56:40","false","scripts: update qemu boot check

Enable checks to all supported platforms of QEMU now.
Check both IPC header regs and memory window IPC message header.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",56,7,0
"thesofproject/sof","8821c1c41217f901c3bcb512826e9a077bdea090","lyakh","2020-03-31 14:37:33","false","topology: add a ""core"" parameter to the W_EQ_IIR() macro

This places all SectionWidget.EQIIR* topology widgets, created by
the W_EQ_IIR() macro on the same core, on which the respective pipeline
is scheduled.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",69,22,0
"thesofproject/sof","af5d5545fe4da22eac4bc6cf8dd1a30f03b4c825","gongjun-song","2022-11-28 07:22:02","false","src: convert the SRC component to use the module interface

Adopt module interface for src component.

IPC3 has compatibility issues, it continues to use comp_driver.
Convert to module adapter only for IPC4.

Signed-off-by: Gongjun Song <gongjun.song@intel.com>",99,54,1
"thesofproject/sof","88ef648585dd071b07e3c29b34d91cb3a2cd360f","ranj063","2022-04-28 19:32:18","false","module_adapter: Add set/get_large_config ops

Define the set_large_config and get_large_config ops for the module
adapter component. These are mandatory ops needed to make the module
adapter compatible with IPC4.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",114,47,1
"thesofproject/sof","3ab06327dfed73a376326de3b6b8157bc8305cea","ranj063","2023-01-20 02:01:54","false","topology2: cavs-rt5682: Parameterize all HS and Speaker names

Add variable definitions for all HS and Speaker settings such as codec
name, SSP DAI index, PCM caps names etc in preparation to make this file
reusable for variations in the SSP ports in different machines.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Dharageswari R <dharageswari.r@intel.com>",55,56,1
"thesofproject/sof","ee2cb09ba624a63a4547235ff057f95b1a798d74","ranj063","2021-11-02 20:01:02","false","topology2: cavs: mixout-gain-playback: Add all includes

Include all dependencies to be able to build the conf file individually.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",125,41,1
"thesofproject/sof","fde7781a428437a24ecd5b46669c886d269e9580","groncarolonxp","2019-10-15 06:22:32","false","ipc: Introduce SAI IPC parameters definition

SAI is one of the DAIs found on i.MX8 platforms. Introduce
sai_params used to pass configuration from topology via AP to DSP.

Only MCLK and TDM related params for now.

Because this is a new struct, increment only ABI MINOR version
which makes the SOF FW backward compatible with older kernel
versions.

Signed-off-by: Guido Roncarolo <guido.roncarolo@nxp.com>",65,16,0
"thesofproject/sof","0140c43099b6f17c76834b92430a2da17360510c","ranj063","2023-04-25 16:54:22","false","topology2: Set the deepbuffer PCM D0i3 compatibility conditionally

Set the deep buffer PCM as D0I3 compatible only for MTL.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",52,59,1
"thesofproject/sof","077828a10953abffd8102fc001165299043aa821","ranj063","2023-01-27 05:23:32","false","topology2: control: bytes: Use instance ID to instantiate ops and extops

Use instance IDs as the class definitions have changed.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",52,56,1
"thesofproject/sof","abce00d22409061f4f01e55ca214c5947f26cab1","ranj063","2021-11-12 01:21:33","false","topology2: cavs-gain-hda: clean up includes

Add search directories and trim the includes.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",127,41,1
"thesofproject/sof","8d8481f448ed569e63b587bf48ef9166edac7e07","serhiy-katsyuba-intel","2023-01-31 10:40:04","false","ipc-common: Fix to allow IPC messages of max size

Messages up to SOF_IPC_MSG_MAX_SIZE should be supported.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",51,56,1
"thesofproject/sof","c6edc5f51e069e2c70c7cf0c50567ed916b3acd7","marc-hb","2021-01-22 08:15:43","false","New install/GNUmakefile to gradually replace scripts in sof-bin.git

More specifically replacing sof-bin/go.sh and sof-bin/publish.sh and
also sof/scripts/sof-target-install.sh eventually.

""make install"" code has always belonged to source repositories because
developers need to install too and we want everyone to use the same
installers. It's also easier to have all the information in a single
place.

Once the layout in sof-bin mirrors the /lib/firmware/intel layout
exactly, sof-bin does not need any installation code any more.

Mixing source and binaries in the same repo is also a ""code smell"",
notably because it forces branching them together.

Using a higher level build tool for installation instead of plain
scripts has a few benefits:

- Multiple entry points: easy to invoke (and test) any part of the
  installer individually
- ... while invoking dependencies automatically.
- Other features ""for free"" like:
  - errexit
  - error messages like ""dunno how to build file x""
  - commands are logged by default

- Also gets rid of most of the large code duplication in go.sh and
  publish.sh, so:
  - Enabling or disabling a platform is a 3-character change
  - Allows platform selection in local config file (even just one platform)
  - Much harder to add inconsistencies
  - Much easier to review correctness, for instance no need to
    scrutinize every line to see which platforms are aliased.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",69,32,0
"thesofproject/sof","f1ee4eb3ac7decf323fd52798472269f95c5551d","lyakh","2023-04-13 13:09:19","false","buffer: use an accessor to read struct audio_stream::addr

This patch adds audio_stream_get_addr() to read
struct audio_stream::addr and converts all users. Apart from hiding
internals of the structure, it also enforces the use of the
__sparse_cache annotation.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",50,58,1
"thesofproject/sof","0dc5e7e849ccbd7cdc455f6988dc4aea10d0aa32","jajanusz","2019-05-15 12:35:08","false","uapi: xtensa: fix windowbase typo

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",66,11,0
"thesofproject/sof","0a97c1a92f2d93bd4d45bc99d61e362cd214748c","jajanusz","2020-01-10 21:52:25","false","drivers: intel: mn: bclk sources

All BCLKs that use M/N share the same source clock, so we need to
track sources for each BCLK to prevent case in which next SSP config
would override source clock for previous SSP config.

Since cAVS 2.0, all clocks go through M/N, bypassing XTAL is
no longer supported.
For earlier version MN driver checks if XTAL can be used if it
would result in more efficient settings.
As a result it fixes ECS-related code for cAVS 2.0+ and is backwards
compatible with previous logic when there is only SSP0 used.
Previously topologies that used more than 1 SSP could override
source clock for previously configured SSP ports, now it will try
to use current clock with M/N or report error.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",76,19,0
"thesofproject/sof","af1e38a99532ecb8c5752238b0d4a21ffb65a765","fredoh9","2021-05-17 18:11:53","false","docker_build: add bison and flex to apt install list

There are warnings about bison and flex not available.
Interestingly these were not fatal errors but time to fix them.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",86,35,0
"thesofproject/sof","5f118b761bf023d74544d1554bada3c19a920982","btian1","2023-05-30 01:59:38","false","copier: use separate function for multi endpoint and module copy

Copier_copy left code is for multi endpoint and module copy,
move it to a separate function.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",53,60,1
"thesofproject/sof","5a2c6bae76b64fce013978ef492f942694023751","xiulipan","2018-09-26 03:32:02","false","ci: travis: add git tag

Travis CI will checkout to commit and no tag is there. Add a tag in the
travis CI script.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",37,4,0
"thesofproject/sof","0ca1c79d06c334f616712098060b8fb5f66832e7","xiulipan","2018-11-06 06:51:26","false","scripts: docker: remove -t flag

t flag is used to allocate a pseudo-TTY, but in some cases pseudo-tty is
not support. Removed for more useage.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",38,5,0
"thesofproject/sof","460bca5402054191be7efdf1f67bdd9a9987d4ab","andrula-song","2023-04-26 05:15:57","false","Smart_amp: Remove the k_mute lock of IPC3 implementation

Since smart_amp_test will always start feedback path firston IPC3
and the k_mute lock is added for IPC4 to support arbitrarily order
of starting source path and feedback source. So remove the k_mute
from IPC3 implementation.

Signed-off-by: Andrula Song <andrula.song@intel.com>",52,59,1
"thesofproject/sof","6328bb7a620d7a8db4e8ce0b0f0bbaea140cf84e","pblaszko","2022-11-17 13:43:58","false","ipc: separate ipc_get_comp_by_ppl_id for ipc3 and ipc4

Separate ipc_get_comp_by_ppl_id for ipc3 and ipc4 to allow searching
for pipeline core in case of multicore scenarios.

IPC4 design for multicore ll pipelines assumes all pipeline and module
data is accessed only by core on which resource is allocated.
Primary core use ipc_get_comp_by_ppl_id to check if the message should
be forwarded to secondary core.
Currently ipc_get_comp_by_ppl_id function calls ipc_comp_pipe_id which
access pipeline data to retrieve pipeline id. If pipeline is allocated
on secondary core, it causes a cache coherency issue.

In IPC4 implementation, ipc_comp_dev.id field for pipeline represents
pipeline id coming in configuration from driver. It is possible to
retrieve pipeline id from component device instead of pipeline data.
In IPC3 implementation, ipc_comp_dev is a unique component id coming in
configuration and it is not equal to pipeline id. For IPC3 leaving
implementation unchanged.

Signed-off-by: Przemyslaw Blaszkowski <przemyslaw.blaszkowski@intel.com>",97,53,1
"thesofproject/sof","debf4cf605ef39b283abb1f9bce582afaebc96cf","softwarecki","2023-03-31 08:13:57","false","manifest: Move MAN_MAX_SIZE_V1_8 define to the public manifest header

Currently, sof incorrectly includes a private manifest.h header belonging
to the manifest.c module. Moved the MAN_MAX_SIZE_V1_8 definition used by
sof, to the public manifest header to allow sof to switch to using the
correct file.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",56,58,1
"thesofproject/sof","f0264aa0c540d7e53073fbf2253815d6f7ec3c45","sathyap-chrome","2019-09-23 17:51:28","false","topology: Add CML topology support for rt1011 SPK AMP

Add rt1011 speaker CML Audio topology on top of
sof_rt5682 where RT1011 is configured as
TDM 4 SLOT ( 2 CH PB and 4 CH Feedback), 100 FS BCLK.
BCLK delay is added for supported ABI versions.

Signed-off-by: Sathya Prakash M R <sathya.prakash.m.r@intel.com>",64,16,0
"thesofproject/sof","54c65b9b0d81df28d4c80c328eef71c30838d8fd","ranj063","2023-05-02 04:08:57","false","ipc4: dai: No need to unregister DMA copy notifier

It is not needed for IPC4.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,59,1
"thesofproject/sof","e424b874a477617d080f368ae67b46d19b7e6d4d","ranj063","2023-06-29 23:47:26","false","audio: copier: Split up module copier and multi-endpoint copies

In preparation for converting the copier to use the module interface,
split up the multi-endpoint DAI copy and the module copier copy cases.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",37,61,1
"thesofproject/sof","57022fa5b97b4a26fc7b68d1b820aa92fbc4f723","abonislawski","2020-03-24 14:38:42","false","probe: add check for invalid purpose

This will allow to validate probe point purpose

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",64,22,0
"thesofproject/sof","76c85091bf61cdcb3238c1d1aa0b3a56a8fdfcec","ranj063","2022-12-06 05:02:15","false","ipc4: handler: Fix D3 entry sequence

Stop platform timer and disable interrupts before D3 entry for CAVS
platforms.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",100,54,1
"thesofproject/sof","5b0965d094dad4715b7d6df769f3b72353f7b65a","ranj063","2018-06-28 02:30:09","false","host: add support for src component in topology parser

Add support for parsing topologies with SRC component.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",6,1,0
"thesofproject/sof","39f81954c47b29f77760c2352554979de14b4e17","ranj063","2023-05-02 16:33:07","false","dai: Modify the signature of dai_release_llp_slot()

In preparation for using this function for both a DAI device and a
copier device, modify the signature to pass the dai_data as the input
instead of the dev pointer.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",54,59,1
"thesofproject/sof","aeb83eccc4d2525fbdf25f54988c694ee2b4faa0","ranj063","2023-10-12 16:32:46","false","topology2: sdw-jack-generic: Replace audio_format objects

Use input_output_format/output_audio_format explicitly. Additionally,
this patch introduces the used of the CombineArrays feature in the
topology2 compiler to generate multiple audio format objects from the
attribute array combinations.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",10,64,1
"thesofproject/sof","68345fb16829621b247d0b79c051a4f3b854097d","ranj063","2022-07-06 20:28:44","false","module_adapter: Add support for IPC4 in module_adapter_new

Since we do not know the size of the IPC payload, just pass the pointer
to the mailbox data and let me module handle it during it's init. No
need to copy the data into the module config.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",110,49,1
"thesofproject/sof","4f288b2c4de695f0985d3baac7f3f82c487be326","crazoes","2020-04-18 15:12:58","false","scripts: qemu-check.sh: Make PLATFORMS a proper array

""PLATFORMS"" variable was used as an array while it is actually a string
used incorrectly making it work accidentally.

Signed-off-by: Shreeya Patel <shreeya.patel23498@gmail.com>",92,22,0
"thesofproject/sof","be0fddaf773b3f7e8b1fc3c9b5b3f44d1e720aee","andyross","2022-12-03 00:10:49","false","ipc3: Silence top-level IPC cmd formatting errors when fuzzing

Command format errors during fuzzing are reported for virtually all
commands, and the resulting flood of logging becomes a severe
performance penalty (i.e. we get a lot less fuzzing done per CPU
cycle).

Signed-off-by: Andy Ross <andyross@google.com>",103,54,1
"thesofproject/sof","483c78fa5c5d72642242914772810eeb607aedc3","andyross","2023-04-25 16:18:49","false","ipc4: Clean up toolchain definitions

__packed and __aligned are defined in compiler_attributes.h, which
wasn't included, and when building for Zephyr that needs to include
the zephyr/toolchain.h header which is the original source of those
macros.

Transitive headers were saving this, but building for posix/fuzzing
works differently.

Signed-off-by: Andy Ross <andyross@google.com>",53,59,1
"thesofproject/sof","0d5bac87d3389dd781896dcd2f2e9af61b1d7929","mengdonglin","2022-06-04 10:16:20","false","xtensa-build-zephyr.py: avoid showing wrong layout of installed files

If each platform has its own output subdirectory, each platform output
subdirectory will include a key subdirectory with same name. Function
show_installed_files() can fail to find the correct parent for a node
as it only compares the subdir name that can no longer be unique.

This patch uses Anynode to replace Node class to define a new
attribute 'long_name' for a node to store its unique relative path
from the output staging directory (e.g. 'sof/apl/community') and
search for its parent.

The attribute 'name' is still used to store the subdir or file name
for a node (e.g. 'community'), and to display the layout of the
installed firmware files.

Signed-off-by: mengdonglin <mengdong.lin@intel.com>",115,48,1
"thesofproject/sof","25fc45143b5cca1ac61eede6f19077fd8a5c8e73","marc-hb","2021-03-04 04:48:49","false","installer: disable incremental builds with XCC due to $XTENSA_SYSTEM

In the future we should probably extract the array of XTENSA_SYSTEM
values out of xtensa-build-all.sh

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",73,33,0
"thesofproject/sof","d4e508cf861aed0d576903f5fb473cca8024e4ea","marc-hb","2020-05-20 00:17:27","false","topology: invoke with m4 --fatal-warnings

As seen in PR #2954, no one ever notices m4 warnings. As PR #2954 will
remove sof-tgl-rt711-i2s-rt1308-nohdmi.conf and the only m4 warning
currently, this is a great opportunity to upgrade m4 warnings to
errors.

Note neither Travis nor github have the concept of a ""warning"", they can
only report success or failure.

This fix can be considered part of the ""green failures"" family.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",99,23,0
"thesofproject/sof","2afbbd0ef141dbacf7d7b7c4cc15a11726bed03d","marc-hb","2020-06-13 01:25:13","false","cmake/git-submodules: don't throw away work in progress at build time

- Add a simple test in cmake to download submodules only when rimage is
  missing. This stops randomly changing the source code from one build
  to the next and overwriting any submodule work in progress.

- Remove the GIT_SUBMODULE option which is now useless because rimage is
  not optional for sof

- Add a --merge option for safety. It makes zero difference right now
  but could save work in progress if we ever add more
  submodules (hopefully not) and someone struggles with submodules and
  ends up in a partially initialized state.

Git submodules are rarely ever the answer; these few changes make them a
bit more usable.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",73,24,0
"thesofproject/sof","223c20acbe3f4667d048557cf1a114331408d213","marc-hb","2021-07-03 05:18:57","false","Fix !CONFIG_TRACE again, broken when adding mtrace_printf()

Fixes commit 50eb5c9ca22b (""trace.c: add mtrace_printf() low-level
shortcut"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",84,37,0
"thesofproject/sof","1bd9e0d2c7a853d4c993cfde58803d67e4fba054","marc-hb","2023-10-31 06:48:28","false","cmake/zephyr: decentralize src/ipc/

Adding all source files in a single, giant zephyr/CMakeLists.txt is
inconvenient and does not scale.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",5,65,1
"thesofproject/sof","0675b2af33e3a4e466518aff7c29c8227cc9d49f","lyakh","2023-09-08 15:29:12","false","system-agent: remove an unused variable

sys_service_p in
src/audio/module_adapter/library/native_system_agent.c is unused,
remove it.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",20,63,1
"thesofproject/sof","1d559f820c5dfccd2b7568040dafe9805fc3af53","akloniex","2018-11-02 17:50:11","false","debugability: Refactor pipeline traces to fully utilize new trace_event

Implemented set of macros for pipelines to allow reporting of pipeline
and component IDs. Refactor all traces to provide useful, human readible
messages.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",30,5,0
"thesofproject/sof","c33b7a58d76645af0dac5fa02926ae83534371c5","akloniex","2020-03-11 10:37:02","false","probe: Properly report size of arrays in INFO payloads.

Size of flexible arrays in Probe INFO responses is now reported properly.

Signed-off-by: Artur Kloniecki <arturx.kloniecki@linux.intel.com>",81,21,0
"thesofproject/sof","9ecae53e2828e77976bc4d5f840579f256a08014","softwarecki","2023-03-29 14:24:08","false","rimage: Moved memory alias configuration to a new struct

A new memory_alias structure containing memory address alias configurations
has been created. It was placed in the memory_config structure.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",58,58,1
"thesofproject/sof","f59e7061d36697127854fb643e980117032eae34","akloniex","2018-10-29 11:54:38","false","debugability: extract fw_ready message to separate section

This is done in order to place fw_version, part of fw_ready message,
in both .ri and .ldc files, for later verification of compatibility
of trace logs reported by dsp with .ldc file parsed together by logger.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",28,5,0
"thesofproject/sof","5f23dac7916d2881d5bf6e1cffc0aa5450fe5ab6","lyakh","2019-01-10 13:15:38","false","bootloader: simplify preprocessor conditionals

Use #elif to select between platforms in the bootloader.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",57,7,0
"thesofproject/sof","84b2dd2ae94ccc4101f44ecbea9564ffdd87d754","lyakh","2022-12-20 13:28:40","false","logger: check localtime() return value

localtime() can return NULL in error cases. Check the return value
before dereferencing it.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",90,55,1
"thesofproject/sof","a29d522059b79901af287974eb7a5b8056c284fe","marc-hb","2022-09-27 08:27:07","false","topology1: fix incremental build dependency on abi.h

Modifying abi.h now rebuilds topologies v1

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",97,52,1
"thesofproject/sof","178f561b6e3e6013a1bdd33704aa63e14c795f13","marc-hb","2023-08-29 22:35:54","false","Revert ""app/prj.conf: restore CONFIG_CLEANUP_INTERMEDIATE_FILES=n default""

This reverts commit 80c6738b89bc3e677cc125dd189aac97f111dfd5.

The Zephyr default changed in commit 385ad46a39ca so this is not needed
anymore.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",25,63,1
"thesofproject/sof","f070135e0432952591027b0bfef56d5bdfdbae7c","tobonex","2023-08-02 19:05:23","false","kpb: Implement configuration part of fast mode task

This patch implements handling of the configuration IPC for FMT in KPB
module. KPB now saves the list of module instances to be processed by
FMT. This is the first step for implementing FMT functionality. In case
of WoV event, FMT is needed for KPB to drain history buffer and send
this data to Host ASAP, as normal tasks are too slow.

Signed-off-by: Tobiasz Dryjanski <tobiaszx.dryjanski@intel.com>",29,62,1
"thesofproject/sof","de352e0beb05c9579e8bae1a31bab239e48f94b2","aiChaoSONG","2022-05-10 04:49:43","false","xtensa-build-zephyr.py: add -d option for debug build

Add a new -d option to support SOF debug build. This
option will add CONFIG_DEBUG=y to SOF configuration,
which is aligned with xtensa-build-all.sh script.

The -d option is a shortcut for '-o debug_overlay_path'.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",112,47,1
"thesofproject/sof","108df32c6bbdb55e47bea0b21076691a5222db1f","RanderWang","2023-08-16 09:13:29","false","TigerLake: disable memory windows setting on sof side

Memory windows is set on zephyr side, so remove it and also remove
xsram_window for memory windows to save memory since it is not used
by ipc4.

Signed-off-by: Rander Wang <rander.wang@intel.com>",26,62,1
"thesofproject/sof","b1eb29d62dbdc1b70c06a26bb1453b9ca02d8bdd","ktrzcinx","2020-04-28 06:17:37","false","pcm_converter: Add unit tests for conversion float to fixed

Implement mocks, cmake modification and unit test architecture.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",94,23,0
"thesofproject/sof","234faf1879b325aad5b87aab65883f170680ff7b","ktrzcinx","2021-04-27 11:11:39","false","rimage: Update

994ee247e13a ext_man: Fix code formating
6c44aefb1f1a ext_man: Fix memory leak after manifest build
dbb49e03b9d8 rimage: add cavs fw layout support
0d641a7b05cf minor -h fix: -s meu_offset disables rimage signing
0dba23083212 pkcs_v1_5_sign_man_v2_5(): add ""salt length"" comment

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",85,35,0
"thesofproject/sof","a9c3c9a4892cdc6ab719fb700cd53af9a134d7e3","ktrzcinx","2019-10-28 14:12:14","false","trace: Build switch traces macro

Old switch macro traces didn't have VA_ARG arguments.
It will be helpful during debugging components
to see correlated pipeline id after using with_ids macros.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",68,17,0
"thesofproject/sof","b35af528b503cf97d8821996abfe3d7e3a35a3fe","ktrzcinx","2020-04-16 09:00:46","false","logger: per_cnt: Explicit cast arguments to uint32_t

Logger doesn't have possibility to directly send 64b arguments
to host, so this arguments should be explicit cast to shorten
data type.
Moreover after putting 64b value to va_arg list in function call
and reading it as 32b will lead to arguments misalignment with
formatting string.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",82,22,0
"thesofproject/sof","d77655059eff962e0f7af68ef17498b0fc2a3cc2","RDharageswari","2020-08-13 00:52:31","false","topology: Add Smart-amp get parameter byte kcontrol

This patch adds the smart amplifier get parameter byte kcontrol
to read the actual algorithm parameters from DSP during runtime.

Signed-off-by: Dharageswari R <dharageswari.r@intel.com>",73,26,0
"thesofproject/sof","ef89e7c2add3491752b94b43a1e014b0d40a8234","tlauda","2020-01-20 15:14:03","false","idc: add message for IPC processing

Implements new IDC message for IPC processing.
From now on master core can pass IPC message to be processed
on chosen slave core. Slave core is also responsible for
sending IPC reply.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",80,20,0
"thesofproject/sof","452f8ef6d3d083319948cbff1cb1cca03531d7ae","tlauda","2019-12-19 14:12:52","false","clk: add clocks pointer to sof main context

Adds pointer to platforms clock info to sof main context.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",72,19,0
"thesofproject/sof","7d38ed143e5da45e4d090c101e746e27b3d68a7d","tlauda","2018-08-14 13:24:06","false","alloc: system memory reserved for master core

System memory should be reserved only for master core.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",17,2,0
"thesofproject/sof","bdd008f58e3bad88b5c55530e1c7a84675f6d68c","tlauda","2019-04-10 14:18:26","false","hda-dma: add missing check in hda_dma_avail_data_size

Adds missing check for buffer full in hda_dma_avail_data_size.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",49,10,0
"thesofproject/sof","eb2e854eb2e885222feeaed819c3ec1a7478c6a4","tlauda","2019-04-04 08:35:46","false","hda-dma: unify preload with regular host copy

Unifies preload function with regular host copy.
It's the preparation for blocking copy implementation.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",50,10,0
"thesofproject/sof","927e5b44b075760c173a95649bb72dad2e8f842c","tlauda","2019-05-15 14:44:03","false","audio: fix checkpatch errors

Fixes checkpatch errors in audio components.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,11,0
"thesofproject/sof","bb82e336b55d5681ee69355e1548512e7c80d6bf","tlauda","2018-09-21 08:55:14","false","idc: add IDC_COMP_CMD message

Adds implementation for IDC_COMP_CMD message.
It allows to get and set component commands
for the components executed on slave cores.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",35,4,0
"thesofproject/sof","ea76f6eba6d0cf7f768f8efb0a59af0d62fb2067","tlauda","2020-01-21 12:08:37","false","cpu: remove cache alignment for active_cores_mask

Removes data cache line size alignment for active_cores_mask.
They are accessed only by master core and with shared data
implementation there is no risk of random data overwrite
in bss.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",79,20,0
"thesofproject/sof","3c79047dad6ea3a9deedfa50935fcf0e82608414","tlauda","2019-09-30 14:17:47","false","wait: panic only if we're lowering irq level

Change the waiti implementation to panic only if we're
lowering current interrupt level. In some rare cases
(like entering D3 for some platforms) we don't care,
because DSP will be disabled anyway.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,16,0
"thesofproject/sof","7a0d5f6246bb2f6ff289bfba3797d65a4f6501f2","singalsu","2018-09-27 10:56:04","false","EQ FIR: Updates for component initialization and cache functions

This patch delays FIR initialization until prepare() to avoid unnecessary
initialization for not final channels amount when in idle. It avoids
a number of malloc and free operations. The FIR delaylines allocation
is brought easier visible via addition for FIR delay address and size
pointers to component data. There's no more need to look it up from inside
of FIR channel instances.

The FIR channel bypass feature is now supported with assign of response
number -1 into channel similarly as in IIR. The same change is done
for generic C and optimized FIR cores.

The cache invalidate functions are cleaned up to perform the operation
into single allocated buffer instead of multiple.

FIR reconfigure during playback is prevented due to still incomplete
implementation for runtime changes.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",37,4,0
"thesofproject/sof","3dc0ae97ac837bc2d6d41361180d24072ae9a37e","singalsu","2020-06-24 17:14:00","false","Audio: Improve volume ramp time calculation precision

This patch changes the ramp time (from ramp start) calculation
unit from millisecond to Q29.3 milliseconds. It changes the smallest
time difference and therefore ramp slop point value down to 125 us
so finer than 1000 us volume update rate can be used. E.g. update
rates 125/250/500 us are good choices for high update rate.

The higher ramp update rates can be defined in volume.h if the volume
ramp need to be much shorter than currently while avoiding
audible zipper noise.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",69,25,0
"thesofproject/sof","fa48a05c151339fe3d571263d857c0fb721b95c5","singalsu","2018-06-19 15:14:53","false","DMIC: Use gain ramp and delayed filters unmute in start sequence

The loud DC thump sound plus the impulse like noises in the beginning of
capture can be mitigated with the gain ramp and muted filters start.
The gain ramp rate and CIC and FIR unmute delays parameters can be
adjusted from dmic.h header file.

Note: The logarithmic ramp length is now hardwired to 300 us for the 1 ms
update rate via macro LOGRAMP_GM in dmic.c. A larger value will shorten the
ramp. It will be replaced later by topology passed ramp characteristic.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",1,1,0
"thesofproject/sof","c7246d22129c4e1eec083cb9fb7968f29d1e29d3","bardliao","2022-02-24 06:28:08","false","topology2: HDA: add 24 bit audio format

We declare that S24_LE is supported by a HDA PCM, but 24 bit audio
format is not included in the available audio format list.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",107,45,1
"thesofproject/sof","3ae3beffbc03a8d4b2fe937916580c77ee237d3c","bardliao","2020-03-11 07:12:29","false","topology: dai: add DAI_ADD_SCHED to set scheduling component

So we can set scheduling component when adding a DAI.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",84,21,0
"thesofproject/sof","ccde447b051361ff3e2514184c51c5ad92717caa","bardliao","2022-03-02 07:24:55","false","topology2: add be pipeline for sdw

Use two separated pipelines for BE and FE.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",113,45,1
"thesofproject/sof","b6c2d6a8339d35e94f1f476b8ebb4cc223544191","keyonjie","2020-11-19 09:31:51","false","ssp: mn: release the M/N clock source when not used

During mn_release_bclk(), check if there is still any SSP which is
holding the M/N clock source, if no, release the clock source for power
saving.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",74,30,0
"thesofproject/sof","d3ec9b5d219985cefae199b805b0f8d3f2b38443","slawblauciak","2020-04-14 12:45:12","false","hda: retrieve hda hardware params from ipc

This is an analogous change to what's been done for ALH DAIs.
Similarly, HDA is set up on the host side.

As a result, the firmware normally has no knowledge
of the hardware configuration, which leads to failures
in components, that may modify stream parameters, such as
(de)mux or asrc.

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",83,22,0
"thesofproject/sof","3912ac95a1325047f5a0bcd9e54216c8549d6615","serhiy-katsyuba-intel","2022-09-05 13:19:45","false","ipc4: fix copier set sink format handling

When gateway is copier's source, this should not prevent
from calling ""set sink format"" for sink pin 0.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",118,51,1
"thesofproject/sof","009e6b61a1f2b231cf5ad7089919e0febe38cdf8","akloniex","2019-09-03 10:26:18","false","memory: Increase number of 64b blobs available on CNL and ICL platforms.

Sys runtime heap is running low on available 64b blobs, while additinal
are necessary for fragmented allocation of dma channels' control structs.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",59,15,0
"thesofproject/sof","33cd4ce23fb8b686d0e8db897ca0982568f76ed9","joechengxperi","2022-11-17 06:13:18","false","module_adapter:dts: required code update for DTS library v1.0.7

1. Remove totalBufferLengthInBytes as it's handled by SDK internally now.
2. Add debug log to print config size

Signed-off-by: Joe.Cheng <joe.cheng@xperi.com>",97,53,1
"thesofproject/sof","0b0f6f9305ef1d91c0b581c7671feadf5a1b7cdf","btian1","2023-05-12 06:32:01","false","dai-zephyr/legacy: remove comp_dai_get_hw_params dependency

inside dai-zephyr/legacy, there is no need to call
comp_dai_get_hw_params, dai_zephyr_get_hw_params can be directly
called without wrap, remove the dpendency in dai-zephyr/legacy.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",50,59,1
"thesofproject/sof","79a51819fc95028b7a6ddccd2803b97ae1cbf430","btian1","2022-11-21 08:48:54","false","Heap profiling: fix regression for heap profiling print with ipc3 case

In zephyr ipc3 case, the first heap allocation come too early
and zephyr logging even is not initialized, it cause sof boot failure.

Limit heap status collection for zephyr+ipc4 only.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",96,54,1
"thesofproject/sof","001415e917024655badc7755191483ae513283b8","ujfalusi","2023-07-26 10:56:37","false","lib-manager: Use stat.pending_length directly in data load loop

There is no need to use local variable in the loop when checking the
progression of the DMA.

Read the DMA status right after start as the DMA might already copied the
data.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",34,62,1
"thesofproject/sof","27b4573a68a2f7f6b47193a3d8a1fe5759bc6d26","ujfalusi","2023-07-28 09:32:33","false","lib-manager: Reword the module management error and debug prints

With the rewording it is going to be easier to get idea where the error
occurred from the logs.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",31,62,1
"thesofproject/sof","676541b0253856f5fb8cb5e17db985fc3af0e2eb","ujfalusi","2021-12-17 10:55:31","false","dma-trace: Move the first trace printing within dma_trace_buffer_init()

Move the tag printing out from dma_trace_enable() to
dma_trace_buffer_init()
to be close proximity of the buffer allocation for easier reading.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",117,42,1
"thesofproject/sof","208c2049f4da4435e45a219579b909a7c90c6c93","RanderWang","2023-02-08 08:33:59","false","topology2: deep buffer: use 32 bits to align with other pipelines

Now deep buffer uses S24_LE but other pipelines use S32_LE internal format
. Chrome team found a bug that deep buffer can't work well with I2S codec
since fw only support S32_LE for I2S now.

This patch will use S32_LE to align with current requirement

Signed-off-by: Rander Wang <rander.wang@intel.com>",55,56,1
"thesofproject/sof","082122556aada5275f9f64ccaa91db5d92c1e365","ranj063","2019-02-13 00:03:15","false","topology: add support for keyword detect component in topology

Add support for constructing and adding keyword detect
component in topology

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>
Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",60,8,0
"thesofproject/sof","830ecf323c1adccf2ba4ebffff279c7e4ceba2b5","groncarolonxp","2019-10-16 15:06:26","false","drivers: imx: edma: parameterize iteration size on FIFO size

various interfaces e.g. SAI or ESAI have different
FIFO size: EDMA has to take into account this when
programming the iteration size

Signed-off-by: Guido Roncarolo <guido.roncarolo@nxp.com>
Signed-off-by: Jerome Laclavere <jerome.laclavere@nxp.com>",65,16,0
"thesofproject/sof","78be251a4468b523547447e9df26e98721928089","ranj063","2023-04-06 19:13:55","false","topology2: Move common_definitions.conf

These are Intel-specific, so move them to the platform/intel folder

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",51,58,1
"thesofproject/sof","716206bcd96286d449319cfbbbfb48c680ad489a","cujomalainey","2020-10-05 23:35:56","false","host: add DMA definitions

Add dummy definitions to satisfy build requirements

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",66,28,0
"thesofproject/sof","98b4625a0d8d87af367b2675d46b6b2999730310","marc-hb","2022-12-06 00:52:33","false",".github/daily-tests.yml: add sparse-zephyr.yml

Because why not.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",102,54,1
"thesofproject/sof","141efbd7b0e9242ab01d712c918fd6004f612c44","RanderWang","2022-08-02 08:38:19","false","ipc4: convert selector to use the new module interface

Now both ipc4 and ipc3 path will switch to module interface
with this patch.

Signed-off-by: Rander Wang <rander.wang@intel.com>",112,50,1
"thesofproject/sof","285df36f1b435278cd230500385d4bd9f515c56f","CyKuei","2022-08-11 05:43:53","false","module_adapter: correct the way to get the scheduling period

Scheduling period should be acquired from dev->pipeline->period

Signed-off-by: CY Kuei <cyk@waves.com>",115,50,1
"thesofproject/sof","d750055a697d7c55f0ae63ba5f0a841b81344c42","keqiaozhang","2021-06-25 01:37:23","false","zephyr: switch to use 3k private key for tgl-h

TGL-H should be used the 3k otc private key for build.

Signed-off-by: Zhang Keqiao <keqiao.zhang@intel.com>",74,37,0
"thesofproject/sof","4e87899f25b0c859169c1dfd4dd9f9fd65d48ad2","ktrzcinx","2020-03-24 07:08:58","false","cmake: Do not duplicate subdirectory adding for library build

Cmake files should have consistent directory linkage scheme
where lines duplication should be avoided.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",65,22,0
"thesofproject/sof","0a52c2e3191acac6477a37a30ee1e45d2eee20bb","bardliao","2020-03-11 08:30:54","false","topology: add pipe-dai-endpoint

This will create a basic pipeline with a buffer only. Note that
we don't implement a SectionGraph to connect the buffer to its
starting component, we should define it manually.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",85,21,0
"thesofproject/sof","752f086bdc1a94d5aa7eeedcaaa9f43073579b76","fredoh9","2020-03-03 01:45:42","false","topology: add platform sku files to config platform settings

icl, cml whl are sharing some toplogy files. Create platform specific files
including DSP configuration, SSP setting and DMIC to simplify platform
settings.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",78,21,0
"thesofproject/sof","4b9cad28bfe64c2dd9b72df6ac907be70a793320","tlauda","2020-02-03 13:44:43","false","idc: add possibility of sending payload

Implements IDC message payload functionality. It is now possible
to send additional large data, when sending IDC to other core.
Maximum size of payload has been set to 96 bytes, but can be easily
extended if needed.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",76,20,0
"thesofproject/sof","8453c0026a5afc250b70a2ba4dae230760d596ce","bkokoszx","2020-01-08 14:24:25","false","pipeline: add buf pointer in func arg in pipeline_for_each_comp()

Add calling buffer pointer in func argument in pipeline_for_each_comp()
function. It can be used for easy identification of buffer preceding
current component and allows to perform specific operations on that
buffer.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",71,19,0
"thesofproject/sof","f2e92812afa18ad6d369dba9bae395de2a17790d","dcpleung","2019-11-12 02:20:34","false","Add building instructions to README.md

This adds intructions to build the rimage tool.

Signed-off-by: Daniel Leung <danielcp@gmail.com>",55,17,0
"thesofproject/sof","3be6f2e7428f3b3d05110fe19c451fab503a3f85","tlauda","2019-09-25 11:47:06","false","dw-dma: use generic dma reg functions

Changes usage to generic dma reg functions instead of using
dw-dma specific methods.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,16,0
"thesofproject/sof","5efd0c5e81a736d27be7cc3171cde3c96ad46b2e","tlauda","2019-08-01 09:07:11","false","platform: byt: do not use vector addresses from core-isa.h

This patch copies vector addresses for baytrail platform
from core-isa.h to memory.h. This way we won't overwrite
default xtensa addresses, when updating xtensa headers.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",53,14,0
"thesofproject/sof","825646595580ff181520d2c5173575bb42d5188d","mrajwa","2019-06-26 23:29:07","false","host: fix wrong check for irq

This patch fixes the incorrect check of period irq in
host_period_bytes.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",45,13,0
"thesofproject/sof","f10b52f5e41f5694dfa42f9841c7dfe6c5ce4236","lgirdwood","2018-08-30 11:35:00","true","Merge pull request #281 from jajanusz/fix-ut

test: cmocka: fix pipeline tests, disable alloc tests",29,3,0
"thesofproject/sof","5213e3757ab0584e00b26f976285e6872610ace7","lgirdwood","2018-07-12 20:00:10","true","Merge pull request #92 from mmaka1/doc-dai

doc: dai interface connected to dox and sof-docs",12,1,0
"thesofproject/sof","7c960669746096291c6549c0701eee658127b796","lrgirdwo","2018-07-14 16:34:15","false","configure: rimage: Make sure rimage CFLAGS are strict.

Turn all warnings into errors for rimage.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",15,1,0
"thesofproject/sof","4050ff6c31157bd9a6a0aea891fa3ad8dd9deb14","plbossart","2021-06-18 18:40:02","false","topology: intel-generic-dmic: add macro for DMIC_CORE_ID

Add macros to quickly enable multi-core with DMICs

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",74,37,0
"thesofproject/sof","0f245bf15194d519ed71f41de7d8d50b35aea0a2","lrgirdwo","2021-09-20 14:47:02","false","testbench: split pipeline logic up into actions.

Split pipeline functionality into smaller action to support more
complex use cases. Provide more useful logging.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",118,40,0
"thesofproject/sof","e327f092507ea005415b9056427462263a679176","lrgirdwo","2022-06-03 10:54:39","false","ipc: blob: Add a Kconfig option for the blob loader

Save memory when not used.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",115,48,1
"thesofproject/sof","99473f3200cbfc2016ca9fcb4f17a680aa0a26c2","lrgirdwo","2018-09-28 14:48:29","false","rimage: add initial support for sue creek.

Build tested.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",37,4,0
"thesofproject/sof","76587ac98a24a99f2fef5992dfff4ffc234584d6","tlauda","2019-06-13 12:44:43","false","hda-dma: do not configure DMA during transfer

Ignores request for HDA-DMA configuration if the
channel is in active state.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",48,12,0
"thesofproject/sof","415273fba9316232e32a64fa10979a88fa6d3652","tlauda","2020-01-13 12:13:32","false","spinlock: commit lock changes

Uses platform_shared_commit() function to commit lock changes.
Every spinlock has to be in a shared memory region in order
to properly synchronize multiple cores.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",77,19,0
"thesofproject/sof","468d8973145e66a47836e2fcab158dd1d4180edf","tlauda","2019-12-17 15:35:50","false","eq_fir: set fir_delay pointer to NULL when freed

Sets fir_delay pointer to NULL when freed to prevent attempts
to free the buffer multiple times.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",70,18,0
"thesofproject/sof","f3fee1347169db7e7c33328ec675743fd7b6bfb4","singalsu","2022-10-10 12:44:24","false","Tools: Test: Fix false success if no processing happened

The test is treated passed if there were no failed cases. The fix in
this patch is to force one failed case if both failed and passed counts
are zeros. Then the upper level test scripts/host-testbench.sh reports
correctly the test fail.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",99,52,1
"thesofproject/sof","269d8d592488d9f4bc1ba3ec4fc9dc57d9090418","singalsu","2023-09-04 09:35:39","false","Tools: Topology2: Add DC block component

This patch adds the widget class dcblock and a sample
bytes configuration blobs.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",23,63,1
"thesofproject/sof","700ca2ae9a0c27a0e2e201de0fa358a58d4a5810","singalsu","2020-06-09 12:48:05","false","Audio: Fix error trace for build specific limitation for FIR EQ

This patch fixes from errors trace a message where the length
parameter is always shown as zero:

ERROR Filter length 0 exceeds limitation for build.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",73,24,0
"thesofproject/sof","957d3369f7a372ed2608c9d1af2ea1740e51c54a","singalsu","2019-02-21 15:43:47","false","Testbench: Fix parameters passing within testbench

This patch fixes the use of private copies of the same header file
defined parameters in several C files that is not good practise to
do. They were not defined as proper global variables. Instead the
same parameters are now simply passed in function calls only to where
needed.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",62,9,0
"thesofproject/sof","b9ee31b2c1d6c27ee02ebe083a267723af83c1c8","singalsu","2019-05-16 15:07:34","false","DMIC: Support capture from different microphones for DAI 0 and 1

This patch allows to configure the two DMIC DAIs for different
used microphones, e.g. DAI 0 for 4ch and DAI 1 for 2ch capture.

The common decimator core is programmed for combined max. request
and the FIFOs are configured to match the desired microphones. In
case of not a possible configuration an error is returned.

The patch also cleans up the magic value of four that was used in
determining IPM bit fields setting.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",62,11,0
"thesofproject/sof","dc0d9e028e0e7f7feb1fda344bc64bb2edd37601","singalsu","2018-06-27 13:44:43","false","SOFT: Increase SRC playback topology buffer size

This patch increases the SRC source buffer to contain 5 periods of data
(measured for 1 ms @ 48 kHz ). It fixes the issue in 176.4 kHz to 48 kHz
playback conversion that the pipeline freezes with insufficient available
data in source buffer for SRC to convert and too little free in buffer
for host to fill another 48 frames.

176.4 kHz playback is currently the largest buffer size consumer due
to non-steady in/out rate. The higher rate conversion 192 kHz to 48 kHz
can operate with smaller size buffer due to steady in/out rate.

Note: This has been only simulated in the host test bench since SRC
playback does not run currently in real devices due to another issue.
However since buffers simulation is accurate this should be a real issue.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",6,1,0
"thesofproject/sof","51c2bc1eb6e58d12d57215a20c20fb8c7bccc2db","marcinszkudlinski","2022-11-28 14:56:25","false","IMRheap preparation - cleanup in alloc.c

A quick cleanum in alloc.c
 - code style
 - code not relevant to CAVS/ACE

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",99,54,1
"thesofproject/sof","84f10e55976b57f556e4988f100d31ebab85ec07","singalsu","2023-01-19 18:09:25","false","Audio: EQ FIR: Fixes for IPC4 processing function select and params

This patch contains the main changes for IPC4. The FIR function
need to be selected in prepare() with mod->priv.cfg.base_cfg.audio_fmt
information.

The eq_fir_prepare() function must call in IPC4 the params()
function to get stream parameters from same struct to set the
sink buffer parameters.

Some comp_info() traces are changed to comp_dbg() to reduce
trace verbosity.

This patch also includes an optimization to select the
eq_fir_passtrough() function when all of the channel filters
in blob are set to bypass. The block copy function is more
efficient than per channel FIR bypass.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",55,56,1
"thesofproject/sof","b7d958bad951e796ad5906b97b5fa49c5a32c06e","singalsu","2022-04-26 18:03:39","false","IPC: IPC4: Fix return value handling in two helper.c functions

This patch changes function ipc4_create_chain_dma() to check return
value against IPC_SUCCESS. If not successful return the return
value.

The function ipc4_add_comp_dev() is changed to return value
IPC4_SUCCESS instead of zero since the other return value
in function is IPC4 style.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",115,47,1
"thesofproject/sof","16975a591bf3681151536403aa5600c1e2a510fe","singalsu","2023-10-25 10:10:24","false","Tools: Topology2: Add sof-hda-benchmark-aria32-tgl build

This patch adds the aria test topologies build. Aria supports
only s32 format so the s16 and s24 versions build is left
out.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",8,65,1
"thesofproject/sof","77e42657c6aa4fef220e9535137ef9dd89a2edf6","keyonjie","2020-06-30 01:33:40","false","topology: sof-hda-generic-kwd: switch to use vol-kfbm mode

We need PGA to tune the volume for the KWD pipeline, switch to use
vol-kfbm mode to get it done.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",72,25,0
"thesofproject/sof","f3d79e73988275335da9e753c4b4c3fb32adcf12","bkokoszx","2019-07-21 10:28:25","false","component: add comp_set_sink_buffer() function

Component in comp_prepare() should change sink buffer
only when sink component is not connected to dma.
comp_set_sink_buffer() checks whether sink component
is not connected to dma and in that case it try to
resize sink buffer.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",51,14,0
"thesofproject/sof","76e35fbec2be6809c9a7e47b248c0f3884824552","kv2019i","2022-10-04 15:25:15","false","ipc4: use atomic primitives to maintain delayed_reply state

In tests with repeated IPCs that require handling in
the pipeline context (such as SET_PIPELINE_STATE), the delayed_reply
state sometimes goes out of sync.

When this happens, pipeline has processed the message and called
ipc_compound_msg_done(), but the next call to ipc_wait_for_compound_msg()
does not see the correct value, leading to a timeout.

Fix the problem by using atomic primitives to maintain the state.

Also make it explicit that the delayed_reply is a boolean
condition and in current code, having multiple IPC messages in
flight concurrently should never happen.

BugLink: https://github.com/thesofproject/sof/issues/6220
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",96,52,1
"thesofproject/sof","1912eb82c8408085933ec4473f095d24da3d447b","kv2019i","2022-09-01 22:12:11","false","ipc4: fix IPC message queueing with IPC4

The list fields in the ipc_msg objects used by IPC4 stack, are not
initialized properly. This breaks the queueing logic in ipc_msg_send()
when it checks for ""if (list_is_empty(&msg->list))"". As a result,
if a IPC could not be sent immediately as the driver is busy, it would
not properly be resent later.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",118,51,1
"thesofproject/sof","1c729f43c86296cef3355ba21f90d9fc7cbfe5ba","kv2019i","2023-10-25 10:40:11","false","west.yml: update Zephyr to 460c2167e4f3

Contains 600+ commits merged after 3.5.0 release, including following
directly affecting SOF targets:

76cb2a54f51f intel_adsp: Do not include device_runtime header
1fac5ed2a60b soc: xtensa/nxp_adsp: put guard in Kconfig.defconfig
f4cb487b79f9 modules: sof: Options only when module is available
02deea0e806a ace: alh: Only ACE1.5 has OSEL feature
f0326f72498c tests: dma_loopback: Intel ADSP ACE15 disable PM
adf6d0e3d80e soc: intel_adsp: lpsram enable retention mode
eeb4f2f76d6d soc: intel_adsp: hpsram enable retention mode
16f729214b50 soc: intel_adsp: lpsram init refactor
112611378f85 soc: intel_adsp: hpsram init refactor
cdd4d8470323 xtensa: add custom mem range check functions

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",8,65,1
"thesofproject/sof","38faea7ec329d2a294701f9510493b15866ae820","kv2019i","2023-08-30 11:12:09","false","west.yml: update Zephyr to 5689916a70ad

Contains 450+ commits, including following directly affecting
SOF targets:

5689916a70ad soc: xtensa: intel_adsp: cavs: fix assert on L3_MEM_BASE_ADDR
34ea488da91c intel_adsp: ace20_lnl: add ALH DAI support
b7e181c2708b soc: intel_adsp: add HDA buffer interrupt functions
d68a58d6cd26 dts: xtensa: intel: add HDA DMA interrupt defs for ACE2.0
62c7729b3e1a dts: xtensa: intel: add HDA DMA interrupt defs for cAVS platforms
c6c6c5a5ed64 soc: intel_adsp: ace shim: add force L1 defines
0fead68e2b8e Revert ""llvm: use proper syntax for --config option""
cd97eae73b4b soc: xtensa: intel_adsp: common: s/device.h/init.h
6cdabb4dff5e soc: xtensa: intel_adsp: common: add missing section_tags.h
c360284c6e14 soc: xtensa: intel_adsp: add missing init.h
ffd2121c65d3 soc: xtensa: intel_adsp: cavs: fix power_down_cavs() signature
a1d7ffdc374d soc: xtensa: intel_adsp: cavs: fix incorrect cached/uncached cast
ce7c30c12978 soc: intel_adsp/ace: use WAIT_FOR for core power transitions
3f0ee7f6db7a power_domain: intel_adsp: initialize after DMA
ca23a5f0cf75 xtensa: mmu: allow SoC to do additional MMU init steps
088a31e2bffa xtensa: mmu: preload ITLB for VECBASE before restoring...
40f2486b685c xtensa: mmu: rename MMU_KERNEL_RING to Z_XTENSA_KERNEL_RING...
18eb17f4cd69 xtensa: mmu: add arch_reserved_pages_update
4778c13bbeab xtensa: mmu: handle all data TLB misses in double exception
c723d8b8d3ac xtensa: Add missing synchronization
24148718fc6e xtensa: mmu: cache common data and heap if !XTENSA_RPO_CACHE
b6ccbae58dc4 xtensa: mmu: use _image_ram_start/end for data region
257404a14327 xtensa: mmu: init: only clear enough entries in way 6
614e64325d48 xtensa: mmu: no longer identity map the first 512MB
b5016714b082 xtensa: mmu: handle TLB misses during user exception
98ffd1addd6a xtensa: crt1: call z_xtensa_mmu_init
38d4b7872401 xtensa: mmu: remove printing vaddr registers during exception
3d63e2060edf dts: cpu: add cdns,tensilica-xtensa-lx3

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",25,63,1
"thesofproject/sof","39a913d7daa80c519e16751b3c63f80c8bbf0010","cujomalainey","2022-04-14 22:57:20","false","google_rtc_audio_processing: add alloc guards

When doing low mem testing with the mock we should still check our
allocs

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",116,46,1
"thesofproject/sof","d6981775729ab9320ac184653de36b5472297090","cujomalainey","2021-02-16 23:16:10","false","imx: edma: remove unused variable

Cppcheck complaint
Related to #3843

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",74,32,0
"thesofproject/sof","74fd2914991a59eeb7229aeed321294434ce03e9","cujomalainey","2022-12-13 20:44:59","false","audio: google: Fix AEC mock

Some build errors that appear to be missed in xcc but gcc catches

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",98,54,1
"thesofproject/sof","b814f307fbcd21e9cc8af3a4e904ab1e686e3292","btian1","2023-10-19 08:34:55","false","Topology2: condense src input format in tplg file

Condense src input audio format convert to 48k in tplg file.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",12,65,1
"thesofproject/sof","140914aa035aa2de37687e95e31d9af1a5c89866","xiulipan","2019-01-23 07:55:16","false","scripts: update build all scripts

Use different build folder for gcc and xcc build.
Will auto selected if ROM build is not supported for the platform,
thus make -a -r can work.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",57,8,0
"thesofproject/sof","21b64c051f37013fde86920187b34175014b91a1","macchian","2020-02-14 16:41:32","false","topology: add cml support with da7219 and max98357a

Reuse sof-glk-da7219-kwd by included cml.m4
for sof-cml-da7219-max98357a topology with KWD pipeline enabling

Signed-off-by: Mac Chiang <mac.chiang@intel.com>",84,20,0
"thesofproject/sof","5fdd09ef2a067b0c846b0b03093d1310aa1f4c10","RanderWang","2023-01-10 07:24:36","false","ipc4: copier: set sink buffer format when sink format is set

The original code only set sink format in copier but forget to set format
of sink buffer. This will result to error when sink components use it.

Signed-off-by: Rander Wang <rander.wang@intel.com>",54,55,1
"thesofproject/sof","17453b58ec66265712218f38f4221870c77d978e","RanderWang","2021-12-15 07:03:38","false","ipc4: refine HDA dai driver for ipc4

The blob data of HDA is only for lp mode, not
for hw params, so just return.

Signed-off-by: Rander Wang <rander.wang@intel.com>",113,42,1
"thesofproject/sof","1447d43aac683f616a9913a70606b441c2d365e9","RanderWang","2022-10-25 08:09:56","false","ipc4: fw_reg: add more description for fw_reg

Signed-off-by: Rander Wang <rander.wang@intel.com>",95,53,1
"thesofproject/sof","dcb9aeb308a92bc86cc57470a09d6ad0e2934cab","kfrydryx","2022-01-27 12:34:55","false","SRC: add HiFi4 specific implementation

Add separate SRC implementation for hifi4.

Signed-off-by: Krzysztof Frydryk <krzysztofx.frydryk@intel.com>",105,44,1
"thesofproject/sof","b15e0a9e8e1323fa04979804bc4cd088649c3b49","ranj063","2021-12-13 00:29:26","false","audio: codec_adapter: remove init_process op from the interface

In preparation for defining a generic module interface API that can
replace the existing codec_adapter interface and the comp_driver
interface, remove the init_process op from the codec interface.

The init_process operations will still be performed in the
codec-specific process op if the init_done flag is not set.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",120,42,1
"thesofproject/sof","a3de21dbab472dbb745a64d72779c6dd7ae06863","dbaluta","2019-05-22 20:12:23","false"," drivers: Add skeleton drivers for i.MX8

Adds skeleton drivers for:
	* ESAI, Enhanced Serial Audio Interface
	* EDMA, Enhanced DMA Controler
	* dummy DMA, simple dummy DMA to emulate API for copying data
	between Host and DSP.
	* timer, ipc - imx8 specific implementation

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",63,12,0
"thesofproject/sof","ed027d045be5379c5454e55219b41571c7c4574d","dbaluta","2021-03-02 15:35:07","false","codec_adapter: Differentiate between consumed/produced bytes

With decoders, usually, consumed bytes is not equal
with produced bytes. We need to take this into account
in order to copy the entire produced bytes by the processing algorithm.

- consumed bytes -> number of bytes consumed from the input buffer.
- produced bytes -> number of bytes produced into the output buffer.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",73,33,0
"thesofproject/sof","8eeaf5aea57e64880d620b0b144c1659132affc0","dbaluta","2023-10-16 13:51:17","false","drivers: imx: Select HAVE_SDMA_FIRMWARE when using MICFIL

MICFIL needs multi-fifo SDMA script so select HAVE_SDMA_FIRMWARE.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",9,64,1
"thesofproject/sof","1a56804ff7862c5fb27457e845586dc28a0636a6","plbossart","2020-06-27 18:05:01","false","topology: align cht-nocodec and byt-codec topologies

Additional work needed to make the BE name and index configuration, as
well as LBM quirk.
We should be using a single topology here.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",70,25,0
"thesofproject/sof","7b334d3ee7114963214ea6c59a40ea3140507ee3","lrgirdwo","2021-03-26 16:16:25","false","memcpy: remove duplicate memcpy and memset definitions in local string.h

Local string.h already includes C library string.h.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",78,34,0
"thesofproject/sof","edc81c521f115eb60beaf1b71c9ce7b67828944b","ktrzcinx","2019-11-04 07:27:13","false","trace: remove trace_value

Because those functions was hardly used in source code.
Moreover it is better practise to add short trace
description, at least variable name instead of trace
with only variable value.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",56,17,0
"thesofproject/sof","33a0990cc476862e47a5289ba1cc146eed0ef7e8","dbaluta","2020-04-23 13:26:14","false","drivers: imx: sai: Configure MCLK signal pin as output

For i.MX8MP the MCLK that enters codec is generated by SAI MCLK pin.
To allow this we need to configure MCLK pin as output.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",71,23,0
"thesofproject/sof","8e348ff794a304d48339556c2c0adc0b6f6b464b","dbaluta","2021-03-05 08:55:55","false","configs: imx: Disable KPB_FORCE_COPY_TYPE by default

KPB_FORCE_COPY_TYPE forces kpb draining mode to normal. Anyhow,
dummy-dma used by the Host on IMXes doesn't support normal copy mode.
So, by disabling this config we keep the copy mode unchanged.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",73,33,0
"thesofproject/sof","44c0ce738899a0ba66eb814dce41c516e954bb0e","jajanusz","2019-02-03 00:09:01","false","cmake: tools: topology

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",58,8,0
"thesofproject/sof","c71a45e718fbe24fce38697c547895f800706bba","jajanusz","2019-06-10 12:50:29","false","kconfig: icelake: fix help indent

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",50,12,0
"thesofproject/sof","e3a6efd8e769e3c8146721f3389e918a8b4068d8","tlauda","2020-02-05 12:15:15","false","buffer: use locks for inter-core buffers

Implements locking and cache synchronization for buffers,
which are connecting components running on different cores.
We need to explicitly use cache here (if platform supports it),
so the shared API cannot be used in this particular case.
Shared is going through uncached area on cAVS platforms,
but it's too slow in the case of frequent buffer accesses.
Also loop in pipeline_set_params has been changed to avoid
unnecessary cache accesses after unlocking the buffer.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",77,20,0
"thesofproject/sof","948b5518b5e7269e1723de9df72286db9a8392db","tlauda","2020-01-15 09:54:20","false","imx: add missing headers

Adds missing header to clk and esai implementations.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",76,19,0
"thesofproject/sof","d9fd6030cbf6a73ce9bd354a154b959dd58253d0","tlauda","2019-11-29 13:34:30","false","task: remove flags

SOF_SCHEDULE_FLAG_IDLE is no longer needed, since EDF scheduler
has been improved and relies only on deadlines. Let's remove it,
but keep flags field. It may come in handy in the future.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",67,18,0
"thesofproject/sof","dc8a9feaead7dfdb88658c1cb734ac26cc58b342","tlauda","2020-05-26 06:56:13","false","arch: xtensa: don't check whether master core id is zero

Checking whether PLATFORM_MASTER_CORE_ID is zero is unnecessary.
We can compare it directly no matter what is the value.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",97,24,0
"thesofproject/sof","678ae1197bce8c8c5a31332584831e02b2edf86d","tlauda","2019-10-28 14:24:58","false","common: add IS_ALIGNED macro

Implements macro to check whether value is aligned.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",68,17,0
"thesofproject/sof","687c6f305e46fb79cf6cb37af6dbd67186fb2ebc","aborisovich","2022-11-30 14:47:12","false",".github: workflow: removed legacy RTOS platforms from Zephyr build

Legacy platforms not meant to work with Zephyr were added
in commit "".github: compile-test multiple zephyr revisions + IPC4""
(8543f5c88978d406549412db00c16135fff7d5ff).
Removed them from CI as they never should be built in the first place.

Signed-off-by: Andrey Borisovich <andrey.borisovich@intel.com>",101,54,1
"thesofproject/sof","051f827dbbc8b0e11aed524d5d8b763b94f293dd","lgirdwood","2018-09-06 13:19:39","true","Merge pull request #318 from singalsu/eq_iir_fix_comp_data_retrieve

EQ IIR: Fix just introduced bug in eq_iir_cache()",31,3,0
"thesofproject/sof","3a9413eebd82608728a9aaef335e71a05486f939","marc-hb","2022-10-11 23:24:17","false","xtensa-build-zephyr.py: restore lost reproducible .ri checksum

At the end of the build, parse the .ri file and print a reproducible
checksum of the its content.

This feature was in xtensa-build-zephyr.sh but never made it to the .py
conversion. It was lost when the .sh file was deleted in commit
ef028f634a06 (""Removed obsolete xtensa-build-zephyr.sh"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",98,52,1
"thesofproject/sof","c30dffcc351258986c5583aec9d0c51bff3c1303","marc-hb","2021-12-03 05:33:10","false","zephyr/cmake: BUILD_ALWAYS for smex and sof-logger

Discovered the hard way that the Zephyr build assumes sof-logger is
always up to date when present. It's not clear from cmake's
ExternalProject documentation why that is the case. In any case
BUILD_ALWAYS fixes the issue and takes very little time because it does
not rebuild sof-logger from scratch. BUILD_ALWAYS is already used for
XTOS.

Fixes commit f6c71c21d03b8 (""zephyr/CMakeLists.txt: build smex and
sof-logger"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",128,42,1
"thesofproject/sof","ee8a0d884066278c4977c98dc3057969c3029b2a","marc-hb","2020-06-16 06:15:01","false","CMakeLists.txt: change generated config.h default to autoconfig.h

Change generated config.h default name to autoconfig.h to catch any
remaining #include config.h left in any other PR, branch or any other
concurrent work in progress unknown to this.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,25,0
"thesofproject/sof","33c5f5d38e187217405242cbc489711d798ae197","marc-hb","2021-04-28 23:44:02","false","xtensa-build-zephyr: do not clone a second version of sof.git

This script lives in a sof.git/ clone yet it was systematically cloning
a second sof.git/. Besides the obvious confusion and risk of editing the
wrong files, this meant it was not possible to build code that has not
been merged yet! This was a problem for both CI and developers. Fixed by
using symbolic links to ourselves instead.

Note it is _still_ possible to build from another sof.git clone if
desired, however this script will never git re-clone a second sof.git
itself, that second clone has to be created (e.g.: by west) before this
script runs.

When cloning a brand new zephyrproject, use a shallow zephyr clone and
download only the two zephyr modules we actually use. This speeds up
automation considerably and makes it much faster for non-Zephyr
developers to reproduce Zephyr issues. Developers can always git
unshallow and west update once if they want to.

Rename the default west top to ""zephyrproject"" to not just match the
zephyr documentation but to also avoid creating a double zephyr/zephyr/
directory.

See the new print_usage() for a few more implementation details.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",81,35,0
"thesofproject/sof","82d4767ca5776b13f968d6f409fd407c87459d1b","marc-hb","2020-09-19 01:11:50","false","Stop silently discarding -l option

Commit https://github.com/thesofproject/soft/commits/59d81995f6828 added
an -l option (for --liam? :-) which was never implemented. Remove it
because silently discarding user input is really not nice no matter how
wrong it is.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",67,28,0
"thesofproject/sof","fe83601406f32f2b446b3f3c635422d9cafca569","marc-hb","2023-06-21 18:37:12","false","iadk/array.h: do not redefine assert() to nothing in an unrelated .h

Do not unconditionally define assert() to nothing in some obscure and
unrelated array.h file.

This looks like it was a temporary hack that was missed in:
Fixes commit 6f366e2eefe4 (""Add definition of interfaces of Intel IADK
modules.""), part of PR #5848 too massive to be properly reviewed.
(docs.zephyrproject.org/latest/contribute/contributor_expectations.html)

In addition to enabling asserts when requested by a debug build (!), fix
the following messenger warning:

```
In file included
   from src/include/sof/common.h:30,
   from src/include/sof/audio/sink_api.h:10,
   from src/include/sof/audio/module_adapter/module/module_interface.h:17,
   from src/include/sof/audio/module_adapter/iadk/iadk_module_adapter.h:19,
   from src/audio/module_adapter/iadk/system_agent.cpp:22:
 zephyr/include/rtos/panic.h:19: error: ""assert"" redefined [-Werror]
   19 | #define assert(x) __ASSERT_NO_MSG(x)
      |

In file included from
  src/audio/module_adapter/iadk/system_agent.cpp:16:
  src/include/sof/audio/module_adapter/iadk/utilities/array.h:60:
   note:  this is the location of the previous definition
   60 | #define assert(cond)
```

This warning appeared only later in messenger commit
002d4a3f666f (""Pipeline2.0: change module API to use various data"")
because it started to include audio/sink_api.h in
module_interface.h. This led to the two definitions finally clashing
with each other.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",42,61,1
"thesofproject/sof","d1550621954aa4fe54c7acab052d7be5ce592f4e","marc-hb","2022-09-27 05:46:21","false","scripts/build-tools.sh: switch to incremental build by default

Faster build and focused and readable logs at last.

Add a warning not to surprise anyone.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",97,52,1
"thesofproject/sof","8aab18351fd68d0719541451f35ff8aad7afd523","marc-hb","2023-03-12 05:43:50","false","xtensa-build-zephyr: fix DEFAULT_TOOLCHAIN_VARIANT spill on next platf

xtensa-build-zephyr.py has always defined XTENSA_ and other environment
variables in the current environment shared by all platforms. This was
always bad but apparently never a problem until the addition of the new
DEFAULT_TOOLCHAIN_VARIANT (xcc or clang) variable.

Before DEFAULT_TOOLCHAIN_VARIANT, each platform's environment would
simply override the previous one. However with the new
DEFAULT_TOOLCHAIN_VARIANT, the current environment has precedence for
more flexibility. This makes each platform ""spill"" onto the next one and
`xtensa-build-zephyr.py -p tgl mtl` fail like this:

```
-- Board: intel_adsp_ace15_mtpm
-- Found toolchain: xcc (/home/XCC/install/tools)
CMake Error at zephyr/cmake/compiler/xcc/generic.cmake:9 (message):
  Zephyr was unable to find the toolchain.  Is the environment
  misconfigured?

  User-configuration:

  ZEPHYR_TOOLCHAIN_VARIANT: xcc

  Internal variables:

  CROSS_COMPILE:
  /home/XCC/install/tools/RI-2022.10-linux/XtensaTools/bin/xt-
```

To fix this, stop modifying the current os.environ and use a new, fresh
os.environ.copy() for each platform instead.

Fixes commit 309fa264e29d (""xtensa-build-zephyr.py: upgraded Xtensa
toolchain for MTL"")

History repeats itself: commit 6bedd8e7427c (""xtensa-build-zephyr: fix
RIMAGE_KEY when building multiple platforms"") fixed the same logical
error months ago in a different script.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",55,57,1
"thesofproject/sof","ae36fa5c9133b271a0f5ea0a8b6e531321b692f3","marc-hb","2021-11-25 06:44:47","false","xtensa-build-zephyr: build ICL by default again

ICL linking overlap issue has been fixed by
https://github.com/zephyrproject-rtos/zephyr/pull/39603

This is a logical revert of commit d4b8a01f206c (""xtensa-build-zephyr:
temporarily exclude ICL"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",128,42,1
"thesofproject/sof","157457c1273927976212590804e0acb6659d6bd1","marc-hb","2023-10-04 00:36:55","false","Switch smex and sof-logger to new sof/tools/rimage location

Switch away from the independent rimage submodule. Long story in
https://github.com/thesofproject/sof/issues/8178 and others.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",16,64,1
"thesofproject/sof","2ac78a0603fb9adca6b86a75c6b1d9b430d1f797","marc-hb","2022-03-08 02:02:10","false","version.cmake: make XTOS and Zephyr .ldc file different from each other

This is especially important considering some sof-bin releases are now
""hybrid"": with a mix of XTOS and Zephyr.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",114,45,1
"thesofproject/sof","6e29114a5f072d793b4def30942ef61b204a8b82","mrajwa","2019-05-16 23:37:15","false","kpb: add additional log message into draining task

This patch adds two new trace messages into draining
task - the amount of drained data and time needed to
drain them in milliseconds.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",62,11,0
"thesofproject/sof","6b45d5c81a7d79d2ded0d69bdebfdabd866e6de0","lgirdwood","2018-10-30 19:25:12","true","Merge pull request #512 from akloniex/extract-fw_version

debugability: extract fw_version and copy it to .ldc file",27,5,0
"thesofproject/sof","cceef7a0be5838f812ab4bef4f5245ca1bc96ba8","mrajwa","2019-04-08 19:22:30","false","KPB: add history buffer data type

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",45,10,0
"thesofproject/sof","71bad3eef71b14197c2c8aeba3c97218b6a8bbee","mrajwa","2021-04-26 22:10:27","false","codec_adapter: state rework

This patch simplifies codec adapter state machine by removing
redundant state ""ca_state"" plus extending the other one with
new states like IDLE or PROCESSING.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",84,35,0
"thesofproject/sof","a1dfcb7f4bb4e8979a41f65d78307576b75c7831","lgirdwood","2018-10-18 15:58:20","true","Merge pull request #110 from xiulipan/pr/daidir

Add direction for dai widget in topology",33,5,0
"thesofproject/sof","f378af522aa2797c9aeb86860e4904358f8e330d","lgirdwood","2018-08-01 14:55:04","true","Merge pull request #177 from tlauda/topic/issue-48

cnl: pm_runtime: increase L1 exit time",19,2,0
"thesofproject/sof","54a0cc8e5aa37c8aaecb9433b7e49dfb994d228e","xiulipan","2020-07-27 06:06:19","false","topology: add test topology sof-tgl-nocodec-ci

Add FW echo reference to nocodec TPLG on SSP0.
Add internal loopback on SSP0. We can compare echo reference and
loopback capture stream.
Add smart amplifier for nocodec on SSP2

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>
Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",77,26,0
"thesofproject/sof","1fabda97befd39cfd9ff9cd162e1e4114e573412","jajanusz","2019-09-30 17:24:01","false","rimage: rename module_sha functions

These functions are generic and can be used for other SHA algorithms.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",66,16,0
"thesofproject/sof","cfa10b808dcd190046a6f5d5a654a5c92152a51d","jajanusz","2019-02-02 23:02:01","false","cmake: CMakeLists for tools

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",58,8,0
"thesofproject/sof","8f23a22b5fc00d2b4a6c924b775b39958f291aac","alaa-emad","2023-03-20 11:29:48","false","drivers: imx: sdma: add blank line after declaration

Add blank line after struct declaration as reported
by checkpatch:

""WARNING: Missing a blank line after declarations""

Signed-off-by: Alaa Emad <eng.alaaemad.ae@gmail.com>
---
changes in v2:
	-edit subject line to include the file name.
	-edit commit message",56,58,1
"thesofproject/sof","3b5447b37981f0f53a52fdba84192cb5e8b1bbd9","johnylin76","2020-07-24 05:52:34","false","tools: topology: Support multi-output playback topology

Support up to 4 output pipelines for test/topology/test-playback.m4, where
argument TEST_PIPE_AMOUNT is added for identifying the number of pipelines
while generating test topologies.

Multi-output component should be added in ALG_MULTI_MODE_TESTS and
ALG_MULTI_SIMPLE_TESTS to generate test topologies with multiple output
pipelines in the future.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",77,26,0
"thesofproject/sof","6ec8bce836c7db180dfa6ba912166ed60485aeeb","akloniex","2018-10-03 12:34:31","false","logging: Add proper comments about trace_event macro usage

Reorganize definitions of macros to enhance visibility of trace_event()
macro. Add proper comment about it's usage.
Fill in missing definitions when TRACE is defined 0, to avoid compilation
issues.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",34,4,0
"thesofproject/sof","b5b0b2c4f23cd86b245096395e963a9af5f4fa86","plbossart","2021-06-18 19:44:53","false","topology: use same file for all cavs 1.8+ nocodec topologies

The beginning of the end of insanity?

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",74,37,0
"thesofproject/sof","ca1e5d0bbad3b6196f4250bc2d977f11f1f318bf","lrgirdwo","2018-11-21 14:53:24","false","build: clean: Don't delete .bin files during make clean

rom-<plat>.bin files need to stay around for testing after script builds.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",39,6,0
"thesofproject/sof","e54087caa4408c81247998841d10bfbdcc28ce22","plbossart","2019-02-06 16:10:37","false","topology: add support for HDMI only w/ 3 iDISP streams

This is useful for headless devices such as Up2 with no external
HDAudio codec but an HDMI/DP output.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",54,8,0
"thesofproject/sof","71cd9666a95ccc801952a4a7d6f468458c7f8050","plbossart","2021-12-17 19:52:04","false","platform: cavs: make IMR restore feature default - except APL/GLK

Let's enable this capability, with CAVS_1_5 left out for now since there
are known issues with suspend-resume on Up2 board that were never
root-caused.

Enabling this at the firmware level is not enough, this capability
need to be enabled by kernel patches in
https://github.com/thesofproject/linux/pull/3340

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",117,42,1
"thesofproject/sof","59513055f40bc09d95eea6c76dfb482f27121e75","plbossart","2019-01-16 05:08:02","false","src/audio/tone.c: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","746bbff485722dc7449d1d6d77b966b6d01560d6","plbossart","2022-04-04 21:58:43","false","topology1: CMakeLists: regroup SoundWire topologies

For some reason the topologies are in separate blocks, regroup them.

No functionality change.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",110,46,1
"thesofproject/sof","dec18e3f7468a81d36c96101f050f5928ded636b","jajanusz","2019-09-30 18:13:59","false","rimage: update tgl

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",66,16,0
"thesofproject/sof","1e57b05a8d452d0bb9940ac436b1968b63ddfb06","jajanusz","2019-04-25 13:41:46","false","host: add library defconfig

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",47,11,0
"thesofproject/sof","643b9ade00404a35d9ad6ca4500496e10c1623b5","ktrzcinx","2019-10-28 13:15:07","false","trace: Add pipeline id to eq_fir traces

It will be helpful during debugging components
to see correlated pipeline id.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",68,17,0
"thesofproject/sof","fb10557575a8d5c93aa21aacb6b150dc72140348","bkokoszx","2019-06-25 10:49:39","false","host: remove using bytes argument in host_buffer_cb

We do not have to use bytes to count copy_bytes since
copy_bytes variable is calculated based on hda-dma and
host buffer pointers. Bytes variable is not useful here
- we should copy as much data as available in the host
buffer. Bytes variable gives additional unnecessary
limitation.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",45,13,0
"thesofproject/sof","eca023476fce5782873dfe1123ab68afe31493f0","tlauda","2019-06-03 10:15:26","false","dma-trace: align copied trace size to DMA burst size

Aligns copied trace size to DMA burst size for HD-DMA.
Previously we've copied data on the DSP side and sent
the right offset to the host, but actually if the data
wasn't aligned to the burst size, the host would read
old traces for the part of data not yet pushed to the
host.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",68,12,0
"thesofproject/sof","9e1affa19b0c7cb1cbd4e7c355caeb2f38e82de2","tlauda","2020-03-24 12:29:41","false","byt: bdw: imx8: disable agent by default

Disables system agent for BYT/CHT, HSW/BDW and IMX8 platforms.
System agent is supposed to track drift between timer ticks,
but it's only valid for the platforms with timer based scheduling.
Platforms with DMA based scheduling have asynchronous interrupts,
which can potentially starve the agent and cause system panic.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,22,0
"thesofproject/sof","6e48480165b6cc0412af3f39ed437ddd434033e6","tlauda","2019-10-04 07:22:13","false","ll_schedule: clear domain earlier

Some ll scheduling domains require to have interrupt cleared
right at the beginning of handler. Clear domain earlier to
fulfill that requirement.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",65,16,0
"thesofproject/sof","8fc6caf823b48d9e32e4d118569ad601d81e122f","tlauda","2018-12-14 12:45:47","false","mixer: remove redundant prepare set state

Removes redundant prepare set state in mixer.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",48,6,0
"thesofproject/sof","2df3cba533055db568a5a25295897f607cc2d013","jxstelter","2022-11-28 10:17:32","false","LNL: Add new platform to RI_INFO_FIXME

The LNL platform added to RI_INFO_FIXME
list in build script.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",99,54,1
"thesofproject/sof","f179e4740e7ad9517169de40a03951c66491cfb9","jxstelter","2022-05-23 13:25:34","false","Move processing module interface specific defines to separate file.

These defines need to be included in C++ wrappers for
ProcesingModuleInterface defined in Intel IADK based
3rd party modules. Move it to separate file to not include
whole sof stuff there.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",115,48,1
"thesofproject/sof","ad895a8d00efc393db24d2b37322e6a07296c356","lgirdwood","2018-08-08 09:31:24","true","Merge pull request #50 from plbossart/fix/kmod_scripts_trace

Enhance kmod scripts",19,2,0
"thesofproject/sof","00c407f8c9962af66fda0c1764844b29efda34ad","nashif","2022-07-13 02:22:07","false","zephyr: app: move main SOF app from zephyr samples

Make the main SOF app part of SOF, where it belongs. No need for any
overlays (which just duplicated the sample .conf anyways) and one place
to build everything.

This now does not depend on zephyr samples, which have a different
purpose completely.

Signed-off-by: Anas Nashif <anas.nashif@intel.com>",110,49,1
"thesofproject/sof","3acf3fac076827ab5ea95041e6e0f1b09884dbdb","libinyang","2023-01-09 09:49:29","false","mtl: enlarge HEAPMEM_SIZE to 0x60000

The heap mem size is not large enough. Enlarge the size to 0x600000.

Signed-off-by: Libin Yang <libin.yang@intel.com>",54,55,1
"thesofproject/sof","a7bf07a7728bd3be8a91716b669c8f4b755cbf5a","xiulipan","2019-11-14 07:52:27","false","topology: add bdw nocodec topology

Enable nocodec topology for bdw.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",57,17,0
"thesofproject/sof","f32b6ac0fea3a445fe6b211bf4db57e4c846b818","serhiy-katsyuba-intel","2023-01-02 16:13:24","false","ipc4: copier: Fix to avoid writing to buf above available free space

Fix only affects ALH multi-gateway feature (mux/demux routines). Adds
check for free space in buffer(s) before copying there.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",74,55,1
"thesofproject/sof","2a5d1c41b940c1e2a0db708c07736dbdd2e387af","sebcarlucci","2020-03-18 21:03:42","false","sof: configs: Default DCB to n for cht and byt

The memory size for cht and byt is too small to include the DC Block
module. If the user wants to use it, they will have to disable some
other components.

Signed-off-by: Sebastiano Carlucci <scarlucci@google.com>",70,21,0
"thesofproject/sof","acba2d12d012ec62c814efcb20b1fd6d87bc81f2","lyakh","2021-09-23 09:14:36","false","ll_schedule: don't re-enable the domain if no tasks are active

If the last task completes in a domain, don't re-enable it. It will
be re-enabled when a new task is submitted.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",118,40,0
"thesofproject/sof","30a65051d5392907f570babbeb9bf246308b6dbb","lyakh","2019-03-06 12:04:35","false","dmic: improve readability

Use a ""for"" loop instead of simulating it, using a ""while"" loop. Also
avoid needlessly setting a variable inside that loop, where it can
just be set once after the loop termination.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",66,9,0
"thesofproject/sof","afcbe880c40953be059857fd9bec8627c12b75a9","lyakh","2023-02-08 07:26:12","false","list: add a static list head initialiser

To statically initialise a list do something like
static struct list_item item = LIST_INIT(item);

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,56,1
"thesofproject/sof","96c3268c7eb866267d5f7122b660bf36267c0429","tmleman","2022-02-22 16:37:36","false","ipc4: setdx: move payload definition to module messages

This patch removes code prepare for SetDx send via large config set.
Only module message is proper way to do this.
Moving payload struct from base_fw to module.

Signed-off-by: Tomasz Leman <tomasz.m.leman@intel.com>
Signed-off-by: Rafal Redzimski <rafal.f.redzimski@intel.com>",106,45,1
"thesofproject/sof","7fa9befd57c4a410554aaac63e32ce3577f91c39","fuyuntsuo","2021-05-12 09:53:03","false","topology: sof-tgl-max98373-rt5682: added igonr.

Added sof-tgl-max98373-rt5682-igonr.tplg.

Signed-off-by: fy.tsuo <fy.tsuo@intelli-go.com>",85,35,0
"thesofproject/sof","b81c76f854c0ee521fc35ec4e79011d3a5a52f7f","jsarha","2022-03-08 13:52:47","false","component: Split data_blob.[ch] out of component.[ch]

The data blob handler functionality is quite independent from the rest
of the generic component code. The component.c and component.h are
already too big so it is better to split the data blob handler
functionality out before adding more features to it.

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",112,45,1
"thesofproject/sof","5b5ed42720313bfd1c622fed710ee8b946a92a20","jsarha","2023-02-28 17:23:56","false","Revert ""hda: chain dma: cancel task before freeing it""

This was not the correct fix for the ll timer free crash issue. Now
that the correct fix[1] is found and merged, this workaround can be
removed.

[1] b3a808afa8c7 ""chain-dma: fix scheduling exception""

This reverts commit 60e9e97e0df842c3030c0772b02120c807f6721a.

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",58,57,1
"thesofproject/sof","9f318fd3d55c1ae5f34efd9404908e8f1c470382","udaymb","2023-02-09 06:12:50","false","topology2: cavs-rt5682: Update BT offload SSP for MTL chromebook

For MTL chromebook, SSP 1 is used for BT offload with
cavs-rt5682 configuration

Co-developed-by: Jaska Uimonen <jaska.uimonen@intel.com>
Signed-off-by: Jaska Uimonen <jaska.uimonen@intel.com>
Co-developed-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>
Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>
Signed-off-by: Uday M Bhat <uday.m.bhat@intel.com>",54,56,1
"thesofproject/sof","b4b6b18dcef76df74cb1af862b91ecb5dc793354","tinghan-shen","2022-05-17 10:19:03","false","platform: mt8186: Use stack size configuration

Instead of a constant in the header file, allow fine tuning the stack
size via settings for various use cases.

Signed-off-by: Tinghan Shen <tinghan.shen@mediatek.com>",114,47,1
"thesofproject/sof","6d67a9dce9c139202063eeeee11c8a00f2bd648c","ranj063","2020-11-05 05:06:04","false","ipc: fix logic for buffer free

A buffer should be prevented from being freed only
if both the sink and the source widgets are active.
In the case of dynamic pipeline loading, a buffer
belonging to a pipeline will need to freed when that
pipeline is no longer active but the other end of the
buffer might still be active. So, change the logic
to check if both the sink and source widget states
are invalid to prevent the buffer from being freed.
Also make sure that the buffer is disconnected from the
active comp before it is freed.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",75,29,0
"thesofproject/sof","7c623256cba190ceb2153b87da170d63ce59ba21","abonislawski","2022-12-09 13:01:37","false","library_manager: fix dma_deinit order

Fixes commit f90f5f9a142d
dma ptr should be checked before dma->z_dev

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",103,54,1
"thesofproject/sof","908838ac15b963d1abaaa7b448efd2253fc529b3","abonislawski","2020-09-25 07:58:27","false","clk: release clock in low power mode

This patch will release previous clock in low power mode
because there are some rare problems with not releasing it

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",65,28,0
"thesofproject/sof","b1ce311540e0690fb3cb091a3c1fb09d3a6a0185","ranj063","2023-06-28 17:34:21","false","topology2: pipelines: dai-copier-eqiir-module-copier-capture: Replace audio_format object

Use the input_audio_format/output_audio_format objects explicitly.
Also, add the 4ch audio format in the class definition as this is only
instantiated once in dmic-generic.conf and needs support for both
formats.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",38,61,1
"thesofproject/sof","0ead3bda19ccb9a88974c6d94e79a602caf5f9f3","ranj063","2019-03-14 21:03:05","false","topology: merge bdw codec topologies into single m4

Use the same m4 file to generate the topology for all bdw
boards based on the CODEC name defined during compilation.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",69,9,0
"thesofproject/sof","5b789f1d0aae8009c3e9dfa2ed878494f0af6b03","ranj063","2022-11-30 16:31:56","false","ipc4: helper: prevent memory leak in error path in ipc_comp_disconnect()

Unbind both source and sink components and free the buffer even in case
of errors to prevent memory leaks.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",101,54,1
"thesofproject/sof","54c2174563714584db20a921e2a926d74ebea937","ranj063","2021-10-26 03:42:31","false","mixer: use buffer acquire/release

instead of buffer_lock/unlock() which will be deprecated.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",127,41,1
"thesofproject/sof","645e0aaaa865369a1aba322beb9a3ed420aa144f","groncarolonxp","2019-11-07 08:01:09","false","drivers: imx: sai: correct clock divider

For stereo playback correct divider is 0x7

Signed-off-by: Guido Roncarolo <guido.roncarolo@nxp.com>",53,17,0
"thesofproject/sof","1f9dbcad22bdc8835d5772920224e2660a247e3b","tinghan-shen","2022-12-16 02:36:40","false","platform: mt8188: Fix build error

Add back the mailbox_sw_reg_write inline function
to fix build error of mt8188.

sof/src/platform/mt8188/include/platform/platform.h: In function ‘platform_panic’:
sof/src/platform/mt8188/include/platform/platform.h:69: warning: implicit declaration of function ‘mailbox_sw_reg_write’

Signed-off-by: Tinghan Shen <tinghan.shen@mediatek.com>",92,54,1
"thesofproject/sof","a21cba16d99d642dd55fd3ebdd04201fb1017c40","abonislawski","2020-06-02 07:42:43","false","ipc: check state in comp_free

This will prevent removing the component if not in a proper state
as required in our security requirements

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",93,24,0
"thesofproject/sof","a992de9a05d0374116bded9898c1f71a40729950","DINESHKUMARK1","2022-12-08 09:02:29","false","drivers: amd: enable acp SRAM

Configure ACP sram access.

Signed-off-by: Kalva, DineshKumar <dineshkumar.kalva@amd.com>",101,54,1
"thesofproject/sof","ce4cd06405d3697ddc247be7322ad51cdc53e2d6","bkokoszx","2021-02-15 08:51:30","false","demux: fix demux look up table preparation

Array streams represents streams on ""many"" side i.e. input
for MUX and output for DEMUX.
For DEMUX each stream has masks array - 1 mask per output
channel. Each mask shows, from which input channel data
should be taken.

This commit reverts ""demux"" part of commit:
""b1b31e7154a5c159d81459634eabd8013b434181""

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",74,32,0
"thesofproject/sof","fa0d4eda063c9f0109acc59edca39aebfb56f2b2","tlauda","2018-09-26 12:44:07","false","memory: apl: increased SOF_TEXT_SIZE

Fixes xcc building errors by increasing SOF_TEXT_SIZE.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",37,4,0
"thesofproject/sof","64fcebbd64bf8e8be4ec7098215d7281fa6a4791","singalsu","2023-09-25 13:24:30","false","Tools: Topology2: Add nocodec topology to test google-rtc-aec

The first playback PCM is for AEC mic input via SSP0 LBM. The second
playback PCM is for AEC reference via SSP2 LBM. The first capture
PCM is the AEC output.

The AEC (mockup) can be run and tested with the topology like
this:

$ aplay -Dhw:0,0 mic_clip.wav &
$ aplay -Dhw:0,2 ref_clip.wav &
$ arecord -Dhw:0,0 -f dat -d 10 output.wav

With AEC mockup version output.wav is mix of microphone
and reference.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",20,64,1
"thesofproject/sof","501816a90a6ff25e3cd5a9b9f3c76e32b079c8ad","singalsu","2023-09-27 13:54:47","false","Tools: Topology2: Add sof-hda-benchmark-drc16/24/32-tgl build

This patch adds DRC test topologies build.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",19,64,1
"thesofproject/sof","4f8cf51b6f6c7ba926507b3a6796f90829501567","singalsu","2021-04-13 16:33:14","false","Drivers: Intel: DMIC: Add NHLT binary data based configuration

This patch adds to DMIC driver support for binary data based HW
registers setup. The driver mode is selected in Kconfig.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",81,34,0
"thesofproject/sof","f215d5e05243e478466ff17157e8732fc95fe7e4","lyakh","2020-10-07 06:16:30","false","cavs: explicitly include <cavs/version.h> where needed

To use CAVS_VERSION* macros the <cavs/version.h> header has to be
included. Also remove superfluous empty lines from that header.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",67,28,0
"thesofproject/sof","3bf8ffc7a0cc3389e4e79a851cc316a08b60e09d","cujomalainey","2023-07-14 00:05:49","false","audio: igo: add missing header include

Needed for the config type

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",32,61,1
"thesofproject/sof","7e05a956931c49541be87c3cc062a9d055c41bfb","mrajwa","2019-07-29 19:53:31","false","kpb: add sanity check of host params

This patch checks if host period size and well as
host buffer size are sane and can be used for draining
calculations.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",51,14,0
"thesofproject/sof","33e4b993512751b2847e75e6b713e3a39c20afc0","lgirdwood","2018-11-02 16:00:02","true","Merge pull request #455 from mwierzbix/debugability

debugability: macro metaprogramming refactor",30,5,0
"thesofproject/sof","8a7a1ad76af2deaa37e57fe9f7dfe4690a98a26f","marc-hb","2022-06-01 18:23:54","false",".github: add new job that builds all DEFAULT_PLATFORMS

This will make sure platforms without an open-source toolchain available
are added to SUPPORTED_PLATFORMS and do not break the -a option

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",115,48,1
"thesofproject/sof","41ef0529fc5bfa677975d1e247275de2ba147d42","ranj063","2018-06-12 18:32:59","false","topology: use switch IO handler for tone switch

Use the bespoke switch IO handler in the driver for the tone switch kcontrol.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",1,0,0
"thesofproject/sof","9d25e1984ae84aee2946d9d49c2b9b52103a7e9a","abonislawski","2019-10-15 11:14:36","false","probes: Implement extraction probes flow.

Implement buffer lifecycle callbacks to properly handle extraction
from probe. Implement probe data packet header generation and sending
it along with data from buffer via extraction DMA.

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",66,16,0
"thesofproject/sof","5c3594afe8b99aeed6dd845099408655130f8b0f","MingJenTai","2022-08-17 07:11:07","false","rtnr: Set process_enabled by default and keep its value in rtnr_reset()

Since rtnr_reset() will be called once recording is finished, 
the value of process_enabled should not be changed in this function.
Otherwise every new recording will start with the value set in 
rtnr_reset(), and it should be an incorrect behavior.

Signed-off-by: Ming Jen Tai <mingjen_tai@realtek.com>",113,51,1
"thesofproject/sof","fcb2d65bfc153f5a347ffd43b84b352a081ace41","RanderWang","2020-01-14 08:43:52","false","topology: tgl: add i2s in topology name

Rename topology file for 1308 in i2s mode according
to machine driver.

Signed-off-by: Rander Wang <rander.wang@intel.com>",78,19,0
"thesofproject/sof","cb605a44ce51231f94d0f110f0d19fb26e88d8d4","RanderWang","2023-06-01 09:22:31","false","zephyr: enable core dump on MTL platform

Follow the setting on TGL platforms.

Signed-off-by: Rander Wang <rander.wang@intel.com>",49,60,1
"thesofproject/sof","e72a05fce0a0dc9450b6c16bd740166a60579979","RanderWang","2022-03-15 07:00:26","false","ipc4: revert ""ipc4: fix pipeline reset""

This reverts commit 819c023d236ada6adbb8bc1610466e754c15f2ff.
Fix a regression issue on windows.

Component is set to reset status in pipeline_reset, so no
need to propagate reset status to each component.

Pipe_reset may return PATH_STOP of value 1 and this is not
a error status, so we don't return error for this case.

Signed-off-by: Rander Wang <rander.wang@intel.com>",107,45,1
"thesofproject/sof","b25922023ee456dce7ad057b47a8ad9dd7c991b2","lrgirdwo","2020-08-10 14:37:08","false","zephyr: lib: memcpy should use zephyr version.

Also applies to host library.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",75,26,0
"thesofproject/sof","7f70d99e4a9872a29c7fe0dbfe8a8d24d3f40b6e","lrgirdwo","2021-03-16 16:52:17","false","compiler: use libc versions of memset, memcpy for GCC10 onwards

GCC configuration for ct-NG uses newlibc libc versions of common
memcpy() and memset(). Check this in makefile and lib.c so we can use
the correct versions.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",71,33,0
"thesofproject/sof","03c6d027b8e0464fbb71d68d39290aa0599ec7ec","dbaluta","2019-10-01 11:19:03","false","topology: Add ESAI related utility macros

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",66,16,0
"thesofproject/sof","b456a35d2f50a02925b99d46f3ccd31c4936158c","dbaluta","2019-02-01 22:23:45","false","rimage: Add support for imx8

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",59,8,0
"thesofproject/sof","09ac7f1b72cfeae917771b1617f7d9db8783c4e4","dbaluta","2021-03-02 16:11:02","false","codec_adapter: cadence: Factor out init process code

Initialization of the processing shouldn't be done in the prepare
function as the decoder needs some input frames in order to figure
out decoding parameters.

First step is to just factour out the init process code into
a function and move it to the proper place later.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",73,33,0
"thesofproject/sof","79b39ccc9bd258c4ed7606134f9a496a3bb38e03","crazoes","2020-03-26 13:27:09","false","gen-doc.sh: Use getopts for parsing arguments

Use getopts to parse the arguments instead of manual parsing to leave no
room for errors, bugs, and inconsistent conventions introduced by custom
implementation.

Signed-off-by: Shreeya Patel <shreeya.patel23498@gmail.com>",64,22,0
"thesofproject/sof","001bb8f33141c50a4f5c9bd0930075db02f84fd1","andyross","2022-08-29 17:39:21","false","zephyr/wrapper.c: Misc portability/correctness cleanups

This file needs the clk.h APIs, so include the header.  Don't include
the Xtensa cache.h, as it's unused (and not supposed to be, zephyr.c
is portable code).  Use the proper interrupt en/disable APIs instead
of the SOC-level calls they wrap.

Signed-off-by: Andy Ross <andyross@google.com>",112,51,1
"thesofproject/sof","c2e644b701acb3fbe930ca17493209f3a52269fd","keyonjie","2021-10-22 08:33:29","false","component: allocate comp_dev with coherent uncached address

Allocate comp_dev on buffer zone with uncached address to rule out
multi-core cache coherency issue, may need to implement coherent API for
it if it is proved lead to too much performance drop with the change.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",124,41,1
"thesofproject/sof","3f1b929ba697674d514397bdf076e61ecf50a2d5","keyonjie","2019-05-07 09:02:05","false","uapi: token: align header file with driver side.

This won't introduce ABI bump, only alignment with driver side header
file.

Reported-by: Keqiao Zhang <keqiao.zhang@linux.intel.com>
Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",54,11,0
"thesofproject/sof","d5c779918c0f5cdb9f8055e52997b5116b423bbc","keyonjie","2021-04-22 10:19:23","false","Revert ""topology: sof-tgl-nocodec-ci: change to run smart_amp on core 1""

This reverts commit cd2444adbf8821d33e098b071b40dab2931d6a8e.

Reverting this to unblock the CI runningon tgl-nocodec-ci platform.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",91,35,0
"thesofproject/sof","ab5644592417bb1185d99d0cd7f41180a69d7128","marc-hb","2023-01-11 22:21:05","false",".github/zephyr: add new manifest-check

Other jobs typically use `west update --narrow` which is faster but also
able to fetch ""wild"" SHA1s from any random place!  It is useful for
testing unmerged Zephyr commits but risks accepting ""invalid"" zephyr
commits; this will not.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",54,55,1
"thesofproject/sof","259b8ce559b04ef7a1929bf6a232431587f9ebd6","marc-hb","2021-07-01 01:15:28","false","zephyr/wrapper.c: add ""temporary fix"" comment to ipc_send_queued_msg()

As requested in previous PR #4428

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",86,37,0
"thesofproject/sof","d00c8d599bae43ce50cdc60c6304b5061ef80e38","slawblauciak","2020-03-30 10:54:26","false","kpb: perform additional pointer sanity checks

Issues detected by code scans.

Signed-off-by: Slawomir Blauciak <slawomir.blauciak@linux.intel.com>",67,22,0
"thesofproject/sof","15330bc27da5e5639af8df1dd55876f6a09760c9","marc-hb","2021-07-20 03:01:00","false","doxygen: fix or delete a large number of broken comments

At first I assumed some refactorings forgot to update the comments to
match. Then I saw some of these could never had made sense ever.

This does not fix _all_ doxygen warnings, it only makes the remaining
warnings easy to grep -v. This is just good enough for me to test other
doxygen changes without being drown into warning noise.

C files are not parsed by the default doxygen configuration - ""if it's
not tested then it does not work"".

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",92,38,0
"thesofproject/sof","a7abc0352388bc062f79f072aab46b47768811a0","marc-hb","2021-07-06 04:00:12","false","cavs/platform.c: don't guard trace initialization with #ifdef ZEPHYR

Because it's mostly working now and avoids macro nesting complexity;
there is already #ifdef CONFIG_DW_SPI #elif CONFIG_TRACE

Just for the record this is reverting a very tiny part of
commit cf8e35f860a7 (""zephyr: init: create a zephyr entry point in SOF."")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",84,37,0
"thesofproject/sof","a107cfabab65df2d04bf2697a9a40be18cc9fea9","marc-hb","2020-07-06 17:55:51","false","dist.cmake: add --prefix to git archive to stop creating a ""tarbomb""

A ""tarbomb"" is an archive file that has more than one directory at the
top level, which is (fortunately) unusual for .tar files. By default,
tar extracts archive members ""as is"" in the current directory. If the
archive has many top level members then it becomes very hard to make the
difference between what was just extracted versus what was already
there. As extraction is recursive this gets much worse because the
problem can repeat itself in subdirectories. As the last but not least
nail in the coffin, tar silently overwrites existing files by default.

This commit is admittedly an ""incompatible build API change"" meaning any
higher level build or packaging script that was consuming source release
tarballs (as opposed to git cloning the source) will require a small
change. Consumers of release tarballs must be rare though because the
output of ""make dist"" has already been broken by commit
c00d39c71b45 (""Add rimage as a git submodule"") anyway yet no one noticed
yet.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",73,25,0
"thesofproject/sof","9b03553d1da21ba120fb8cdfa328043f031517db","marc-hb","2021-09-30 01:16:20","false","docker-run.sh: log the docker image version

Especially useful when forgetting to update the 'sof' tag

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",121,40,0
"thesofproject/sof","e76ccbad599ae7f37ee5315264a642ed0bb60865","marc-hb","2020-06-15 18:50:26","false","scripts/xtensa-build-all.sh: clarify help of -c option

""Configure defconfig"" misses the most important, interactive difference.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,24,0
"thesofproject/sof","37e87e54b1771a522f2dcdd0c55528b75a7fb0ca","marc-hb","2021-04-19 16:01:45","false","logger: partial rewording of one log_err() and usage message

Cosmetic change that does not fit in any other commit.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",88,34,0
"thesofproject/sof","ce525551734b59047e647315a158031f2978df0c","marc-hb","2021-05-03 16:29:32","false","numbers.h: simplify #ifndef ZEPHYR for MIN and MAX

Undefining and re-defining MIN/MAX when already defined is
convoluted. Simply define them if not __ZEPHYR__ instead.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",82,35,0
"thesofproject/sof","42aec0a1867bde41dbad8c3a6461d608af921a6c","lyakh","2022-08-29 14:59:02","false","coherent: make CONFIG_INCOHERENT selectable from menuconfig

At the moment CONFIG_INCOHERENT is automatically enabled when
CONFIG_TIGERLAKE is set and cannot be switched from menuconfig.
Enable that to make debugging with limited cache use possible.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",113,51,1
"thesofproject/sof","079ce95b988384225d3f1dc2013811d4c41b3d82","lyakh","2022-01-11 15:25:52","false","zephyr: (cosmetic) make a needlessly global variable static

_smex_placeholder dowsn't have to be global, make it static.
Also no need to explicitly specify smex_placeholder_f() as inline,
the compiler will decide by itself.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",115,43,1
"thesofproject/sof","63c7b529622c3fdd1c50d53e82e06fccebe503fb","jxstelter","2022-11-07 11:22:13","false","iadk_modules: Add new ops initialization for IADK

IADK modules must have get_attribute function initialized.
Initialize also set_large_config and get_large_config to generic
module adapter calls.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",93,53,1
"thesofproject/sof","cbf60f2bb2549d5ee81a27fc3162615ec540456f","cujomalainey","2018-11-16 02:05:19","false","Correct sof-bdw-rt5640

Correct comments to reflect code

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",39,5,0
"thesofproject/sof","011de4a094970465905046464480b13a68bee8a0","cujomalainey","2023-07-18 20:24:45","false","audio: dsm: fix include path

Header is not in the include directory, add inclusion directive

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",32,62,1
"thesofproject/sof","bc1497a74284bc7bb888acb58d41e30e48e79241","gongjun-song","2021-05-27 16:50:13","false","Topology: Add sof-tgl-rt711-4ch topology

There is no rt1308 on the TGL-H-RVP platform, need to add a topology
file with only rt711 to enable soundwire on the TGL-H-RVP platform.

The patch of enable soundwire on the TGL-H-RVP platform has been
merged into the thesofproject/linux.

Signed-off-by: Gongjun Song <gongjun.song@intel.com>",82,36,0
"thesofproject/sof","10e4e3f86bc2597a8e91da4cca40a70e88e57c82","fkwasowi","2023-01-02 07:28:07","false","peakvol: select correct processing function

24/32 function is never selected due to the fact that only the size of
the container determines the selection of the function.
It should be selected based on valid_bit_depth.

Signed-off-by: Kwasowiec, Fabiola <fabiola.kwasowiec@intel.com>",87,55,1
"thesofproject/sof","640f71f45f510390d29319c5faa3db6af8c90215","ranj063","2023-09-19 19:03:46","false","ipc4: Add support for IPC4 shared library

Add support for the SOF shared library modules to work with IPC4.
The main changes in the patch involve support for triggering pipelines
in the IPC context when running on the host and support for fetch the
component driver with the INIT_MODULE_INSTANCE IPC. Currently, we use a
hardcoded table to match the module ID with UUIDs. This will be modified
in the future to make it scale for all modules.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",20,64,1
"thesofproject/sof","97374b6f91e225ef86f9ad9bfbc8707058ae601d","ranj063","2023-01-20 01:37:59","false","topology2: Make name a mandatory attribute in hw_config

Add an instance attribute and make the name attribute mandatory for the
hw_config objects. This is required because the topology2 compiler allows
for expansion of string values with variable definitions. So, if we
wanted to expand the name from a variable definition(as shown below), it
is only possible if it were a normal attribute instead of the node ID as
it is currently.

Define {
	SSP0_HW_CONFIG_NAME	""SSP0""
}
Object.DAI.SSP.1 {
	dai_index 0
	Object.Base.hw_config.1 {
		name $SSP0_HW_CONFIG_NAME
	}
}

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",55,56,1
"thesofproject/sof","136b48cea4d1575f780767128bfcfe77b419acca","abonislawski","2020-05-18 14:15:35","false","lps: make prefctl platfrom specific

This will allow to enable LPS on TGL

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",99,23,0
"thesofproject/sof","f0d491a4abdb6cf678fb3fda1d5c1e6c387fab74","ranj063","2020-10-30 05:01:32","false","ssp/dai: Dont treat dai_config during active audio as an error

When a DAI_CONFIG IPC is sent from the driver for a particular
DAI type and index, all DAI components that match the type and index
are configured. When all components are set up during topology
loading, this isn't really much of a problem as all DAI_CONFIG
IPCs will be sent at that time as well ie there is no active
playback/capture. But with dynamic pipeline loading, the playback
and capture DAIs will be individually configured whenever the
respective pipeline is started. This will end up with errors both
when configuring the SSP and when configuring the DAI comp itself.

So, ignore the request to configure the SSP and the DAI comp
that is already active so that the other DAI comp can be
configured successfully when its pipeline is set up.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",75,29,0
"thesofproject/sof","980a5b25b3d97654e2583a12fcc165b47f3a717f","lkoenig","2022-03-03 09:54:58","false","topology1: Fix m4 issue in conditional definition

Due to m4 peculiarities it is require to escape the content of an
ifdef. I forgot to add those escaping for around the `SPK_MIC_PERIOD_US`
definition leading to erroneous value if GOOGLE_RTC_AUDIO_PROCESSING was
defined.

Signed-off-by: Lionel Koenig <lionelk@google.com>",113,45,1
"thesofproject/sof","864064d4a9de4b1a8f03aa3cefaa876211b759ea","johnylin76","2022-11-07 07:19:15","false","sof-nau8825: add DSM lib and remove hotword/dmic16k

For nau8825 codec devices e.g. Kano/Volmar/Zavala, it had been observed
that when Hotword module is enabled, noticeable pop noises appear in the
playback audio. While disabled, the playback audio becomes clear.

Because Hotword module is optional, remove it for now as WA fix for noise
issue.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",94,53,1
"thesofproject/sof","466a0508a194a364cd98a5a47c488024b172c2c6","johnylin76","2022-11-16 07:59:34","false","topology: unify RTNR+AEC topology file

pipe-rtnr-google-rtc-audio-processing-capture.m4 and
pipe-google-rtc-audio-processing-rtnr-capture.m4 are actually the same
graph. The filename differs because they are originated from different
branch.

This commit unifies them to avoid confusion.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",95,53,1
"thesofproject/sof","3ab6cf2a3954fdaebd778b21b4c9034bf352fb7c","jajanusz","2019-05-13 11:45:27","false","cmake: meu: support override of flags

Custom meu flags can be set with MEU_FLAGS variable.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",61,11,0
"thesofproject/sof","fb03464dd50a93d365fac36f7bad5c885446f04b","plbossart","2021-09-10 23:39:37","false","topology1: fix comments in pipe-mixer-volume-dai-playback.m4

buffer information and formatting was incorrect

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",117,39,0
"thesofproject/sof","bc74137c3c2417dd11a74c7f3043cdd76a528290","btian1","2023-05-10 14:17:34","false","ipcgtw: remove all device related function content

Those standard interface are no longer needed by copier, since
copier already can call with zephyr prefix function to have same
functionality, so removed those code.

Signed-off-by: Baofeng Tian <baofeng.tian@intel.com>",54,59,1
"thesofproject/sof","2a863143e80baec223c9f670f3718f24432bb423","tlauda","2019-02-11 16:05:56","false","component: refactor set state handling

Changes component set state handling. If component
already has the desired state, then the state propagation
will stop at that component. This allows for connecting
multiple source pipelines to one sink pipeline and
properly handling params and prepare calls.
Also removes unit tests, which don't make sense anymore.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",59,8,0
"thesofproject/sof","93be71b1a73341fc1a93e19dcca382eb8ca01a56","tlauda","2020-01-10 14:39:31","false","alloc: mark memory map as shared

Marks memory map as shared data and refactors code in alloc
to use new platform_shared_commit function. Memory map is
accessed from SMP code, so it should be explicitly marked
as shared resource. Newly introduced API makes code more generic.
We no longer need explicit cache operations.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",76,19,0
"thesofproject/sof","13fc45e8fa51cecaf2d23f2946ccd0a3386562d4","saisurya-ch","2023-06-20 06:45:22","false","drivers: amd: create common driver code for different amd platforms

 - Renoir and Rembrandt have the common functionality.
   Moving the common code to common folder as per the recommendation from
   maintainers and to support future platform's common functionality.
 - Remove unused code.

Signed-off-by: SaiSurya, Ch <saisurya.chakkaveeravenkatanaga@amd.com>",46,61,1
"thesofproject/sof","ff02f2f0082582e919b997afc3fa5e423fc0c16c","tlauda","2019-08-03 14:29:33","false","spinlock: fix locking

Fixes locking mechanism of spinlocks.
Current implementation hasn't worked at all,
so there wasn't any synchronization between cores.
I myself have broken it a long time ago.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,14,0
"thesofproject/sof","5d763d63499d67ec482b35bb66f56410df26f58e","bkokoszx","2020-05-27 13:41:07","false","mux: simplifies mux processing functions

This commit simplifies mux processing functions and
does not allow mux to mix channels.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",95,24,0
"thesofproject/sof","0efce6361db43a003e6d58cc954bc4914ab4c13b","kv2019i","2021-05-17 06:26:54","false","kconfig: rename HW_LLI to DMA_HW_LLI

Add a proper namespace prefix to CONFIG_HW_LLI. While this
option is only used by DW-DMA driver at the moment, this is
a generic option, so remove the DW-DMA specific text from
top-level documentation.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",86,35,0
"thesofproject/sof","d33af9ffbd11cda36df4e47ffbfb3435dd652c74","softwarecki","2022-12-29 15:24:22","false","platform: ace: watchdog: Add ll watchdog support

This commit adds watchdog support in zephyrs ll domain for ace platform.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",93,55,1
"thesofproject/sof","3a5f7a3d2d48ef2b2d9d74f4a0b8215b4ead5160","keith-packard","2023-04-27 16:48:45","false","app: Switch main return type to 'int'

With Zephyr adopting a different type for 'main', adapt this
application to match.

Signed-off-by: Keith Packard <keithp@keithp.com>",52,59,1
"thesofproject/sof","a2e69b873bd3fb971cb28ec225dfcb3d9453bc94","keyonjie","2020-06-01 04:11:22","false","topology: eq_fir: add uuid token support

Add the uuid token to eq_fir widget for the future use.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",97,24,0
"thesofproject/sof","968eaf162156aca3ba53f5331a91a7efb000d871","keyonjie","2020-05-29 17:25:00","false","pipeline: add a flag to indicate if the buffer is being traversed

Add a flag 'walking' to the buffer struct, to indicate if the buffer is
just being traversed while walking through the graph, and don't go back
to the buffer which is already walked.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",97,24,0
"thesofproject/sof","f45f5dffec7a64c16d08de2a17f45ecc70730e7c","marc-hb","2022-01-03 20:27:17","false","xtensa-build-zephyr.sh: remove x-prefix in comparisons

Fixes new shellcheck 0.8.0 warning:

SC2268 (style): Avoid x-prefix in comparisons as it no longer serves a
purpose.

This script requires bash anyway.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",115,43,1
"thesofproject/sof","921e52c680488e6e89aae4f3f21ce418058fcbb1","marc-hb","2021-01-23 01:40:39","false","common.h: rename two alignment verification macros, add comments

Zero functional change.

Rename ""is_non0_power_of_2(x)"" to ""is_power_of_2(x)"" because it's
simpler and because zero is not a power of 2.

Rename ""compile_fail_zero_or_true(x)"" to ""compile_assert()"" because it's
much simpler and because I really couldn't find what ""zero_or_true""
meant?

Add a few comments, especially explain why COMPILE_TIME_ALIGNED(align)
uses __builtin_constant_p(align) because it took me ages to figure it
out.

Also recommend ALIGN_UP_COMPILE() over ALIGN_COMPILE() when compiling
with -O0

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",69,32,0
"thesofproject/sof","c0fd911396eb897070efef1425c67d94d915f54b","marc-hb","2023-08-28 12:53:46","false","xtensa-build-zephyr.py: re-enable sof_ri_info.py on MTL and LNL

Now we can avoid bitrot again thanks to recent rimage fix
https://github.com/thesofproject/rimage/commit/4fb9fe00575bc

Also update outdated comments.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",25,63,1
"thesofproject/sof","0def9056300a4b23d909ba0b36256087af91d2fe","marc-hb","2021-07-16 08:00:02","false","trace: move CONFIG_TRACEM implementation up a couple levels

From deep down trace.c:va_tracelog() up to the _log_message() level.

Also rename va_tracelog() to the more specific dma_tracelog()

Preparation to support the DMA trace in Zephyr.

The only functional change in this commit is that DMA messages copied to
the shared memory are not de-duplicated any more (a.k.a ""adaptive rate
limiting"" or CONFIG_TRACE_FILTERING_ADAPTIVE). These are generally
supposed to be high level hence rare enough; otherwise there is probably
a ""bigger problem"".

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",92,37,0
"thesofproject/sof","5c93db8ca7e46d0492f3e8928311f0efb84a2013","xiulipan","2019-01-23 06:58:36","false","CMake: restore the naming style of binaries

use sof-*.ri back to make alignment with Linux driver FW name
requirement.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",57,8,0
"thesofproject/sof","785149353407a92b42fe13e6aa20271a8c5babe3","libinyang","2021-04-21 07:07:51","false","topology: add sof-adl-rt711 topologies

Add sof-adl-rt711.tplg and sof-adl-rt711-4ch.tplg.

Signed-off-by: Libin Yang <libin.yang@intel.com>",89,35,0
"thesofproject/sof","65dc05a1319a62492523736c7ca907fe0c20ea46","andyross","2023-06-06 15:11:18","false","ipc3: Check component type in ipc_stream_pcm_params()

This handler was missing its type check and would follow comp_dev
union fields on components that might be buffers or pipelines, leading
to crashes downstream.

Found via fuzzing.

Signed-off-by: Andy Ross <andyross@google.com>",45,60,1
"thesofproject/sof","4ee9e1159c4d08af8f236c1d49b32ead1b535b41","tlauda","2019-07-16 18:31:41","false","sof: move headers to dedicated directories

Moves headers to dedicated directories in sof/include,
arch/include and platform/include. File tree was too flat,
so some of the files has been moved.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",46,14,0
"thesofproject/sof","b667c914c63d6ffae3869ddb00be896803da57b2","lyakh","2023-04-13 15:32:20","false","buffer: use an accessor to read struct audio_stream::avail

This patch adds audio_stream_get_avail() to read
struct audio_stream::avail and converts all users. Apart from hiding
internals of the structure, it also enforces the use of the
__sparse_cache annotation.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",50,58,1
"thesofproject/sof","d697516c329958ee4dbc1c934f95c5f7badee3f4","lyakh","2020-08-11 11:54:30","false","topology: apl: use the generic DMIC topology template

Use a generic DMIC topology template instead of defining a private
one.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",73,26,0
"thesofproject/sof","97e2a3c5833d67505b376f77d1c311e03dc42548","ktrzcinx","2020-08-27 08:16:54","false","cmake: Look for .git folder in SOF_ROOT_SOURCE_DIRECTORY directory

This is possible location of .git folder, instead of CMAKE_SOURCE_DIR.
Without this patch, checked condition always return false and
GIT_LOG_HASH is used instead source code hash.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",74,27,0
"thesofproject/sof","56a660be28f23b6af5b5987a149ce7b3a61cbe72","ktrzcinx","2020-04-28 06:17:41","false","pcm_converter: HiFi3 implementation of conversion between float and fixed

Used method need floating point unit in DSP core.
Vectorized conversion functions are inaccessible for used cores.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",94,23,0
"thesofproject/sof","22e4e7bff627c3f61930d84105053d3032e9f9c8","jajanusz","2020-04-03 10:51:26","false","cmake: fix defconfigs dependency

CMake regeneration condition should depend on directory to automatically
update when new defconfigs are added.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",81,22,0
"thesofproject/sof","eded228beb209cc9513ccc89050111ae478c8494","lrgirdwo","2018-09-28 20:32:30","false","gitignore: ignore shared object .so files

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",37,4,0
"thesofproject/sof","12236ee4eafae56cda956ccd718def8ae4cb2180","lbetlej","2019-03-07 17:51:44","false","comp: selector: add support for binary configuration data

Channel selector component supports configuration get/set using
COMP_CMD_GET_DATA & COMP_CMD_SET_DATA commands
of SOF_CTRL_CMD_BINARY type

Signed-off-by: Lech Betlej <lech.betlej@linux.intel.com>",67,9,0
"thesofproject/sof","71a5409ea481be643377a968e2ac53f16784e36a","lrgirdwo","2021-05-06 19:53:19","false","dai: dont assert() when DAI is not configured.

Currently the dai logic will assert if not configured before hw_params.
Fix this so we produce error output only.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",80,35,0
"thesofproject/sof","4b2edf8eed562d5d4eead02ab79cefb2a87ab970","lrgirdwo","2020-06-23 15:43:56","false","zephyr: wrapper: complete zephyr support for working audio

This patch finalises the wrapper to allow LL scheduling of
timer domain audio, EDF sccheduling of IPC, trace re-direction
and kconfig build support.

There are still many items that are WIP and have been marked with
TODO: comments.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",69,25,0
"thesofproject/sof","5838f7175f5d531126c47531562a602fee70f57e","plbossart","2018-11-11 14:52:35","true","Merge pull request #529 from thesofproject/topic/abi

ABI updates with Semantic versioning",40,5,0
"thesofproject/sof","04a0d3c1b584acc77c110e12379c15998c2275b2","plbossart","2022-02-16 02:43:33","false","topology1: sof-cml-es8336: use correct 24MHz MCLK

Rookie mistake, the clock can't possibly be 19.2 MHz

Reported-by: Nikolai Kostrigin <nickel@altlinux.org>
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",105,44,1
"thesofproject/sof","1fa037cc1ec3d3b1f3e8109c3172e1944836dff5","lrgirdwo","2019-11-07 14:09:00","false","logger: fix build errors with gcc 9.1.x

Latest GCC does additional checks. This patch fixes the following build
error.

Scanning dependencies of target sof-logger
[  0%] Building C object logger/CMakeFiles/sof-logger.dir/convert.c.o
/home/lrg/work/sof/sof/tools/logger/convert.c: In function ‘serial_read’:
/home/lrg/work/sof/sof/tools/logger/convert.c:311:2: error: converting a packed ‘struct log_entry_header’ pointer (alignment 1) to a ‘uint32_t’ {aka ‘unsigned int’} pointer (alignment 4) may result in an unaligned pointer value [-Werror=address-of-packed-member]
  311 |  for (len = 0, n = (uint32_t *)&dma_log; len < sizeof(dma_log); n++) {
      |  ^~~
In file included from /home/lrg/work/sof/sof/tools/logger/convert.c:15:
/home/lrg/work/sof/sof/tools/../src/include/user/trace.h:94:8: note: defined here
   94 | struct log_entry_header {
      |        ^~~~~~~~~~~~~~~~
cc1: all warnings being treated as errors
make[2]: *** [logger/CMakeFiles/sof-logger.dir/build.make:76: logger/CMakeFiles/sof-logger.dir/convert.c.o] Error 1
make[1]: *** [CMakeFiles/Makefile2:91: logger/CMakeFiles/sof-logger.dir/all] Error 2
make: *** [Makefile:130: all] Error 2

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",53,17,0
"thesofproject/sof","6077b57e196389d34437ad0e5b13885346da7162","tlauda","2019-02-25 11:04:36","false","pipeline: add sink component

Adds sink component to pipeline. It will allow
for pipeline copy direction simplification.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",64,9,0
"thesofproject/sof","d68eb43857ff93f202852be4a4cc2138f423e11a","lenghonglin","2022-04-19 08:59:36","false","detect_test/google_hotword_detect: fix comp struct

if sof_ipc_comp_event include flexible array, so it should be the last one of the structures.

Signed-off-by: honglin leng <a909204013@gmail.com>",115,46,1
"thesofproject/sof","7b01b4f7c1a62e1cbc53e9e9092b369817fb47f5","lyakh","2019-02-12 14:27:12","false","cavs: eliminate per-core interrupt controller descriptors

Currently cascading interrupt controller descriptors are registered
per core. This works well with Xtensa's ""levelN"" IRQ controllers
because their child interrupt lines can be masked per core. However
generic interrupt controllers do not have such a capability, which
makes registering them per core meaningless and error-prone. Switch
over to global IRQ descriptors, allocating them from non-cacheable
memory to avoid having to manually synchronise them at run-time.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",59,8,0
"thesofproject/sof","7a6dd62031a52f757c57850cc7f4e402baf6b82f","lyakh","2023-02-07 16:44:48","false","eq-iir: fix address space notation

eq_iir_set_alignment() should use the  __sparse_cache annotation for
both its arguments.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",55,56,1
"thesofproject/sof","f8315621cdd7fff2820a5f1636a4029d39993dea","lyakh","2022-04-11 12:56:20","false","crossover: fix buffer acquisition

Instead of acquiring and releasing buffers locally multiple times,
do that once for .copy() and .prepare() methods.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",115,46,1
"thesofproject/sof","10f6dd0d7bdf785e2a0cb462e94577d6cbfc994a","lyakh","2022-10-18 13:59:55","false","module-adapter: add a constant data pointer

module_config contains a .data pointer that is used both for initial
and run-time configuration. The initial configuration should be
const. We add a new .init_data pointer for it.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",99,53,1
"thesofproject/sof","cf3a1163afe0dc56b88a42d6755bdb1b43e47249","lyakh","2021-11-12 12:10:09","false","zephyr: ll_schedule: make sure no cross-core scheduling is done

All LL-scheduling calls (scheduling a task, cancelling a task, etc.)
should only be done from the respective core. Add an assert() to
guard against violations.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",127,41,1
"thesofproject/sof","d61d7323148ac8a5f6c6220df3c8a24c0cac77a3","ujfalusi","2023-08-23 11:55:43","false","ipc4: handler: Split the set_pipeline_state()

Separate the set_pipeline_state() function into two distinct phase:
ipc4_pipeline_prepare() and ipc4_pipeline_trigger()

The two phase will be used later directly to avoid race conditions when
a pipeline is already set to run while the connected pipeline is not yet
prepared.

With the split also clean up the debug prints to be unified and clear.

Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>",26,63,1
"thesofproject/sof","a4ca53c9f164501e821d396768c3df98cc5ee5fd","softwarecki","2023-02-27 08:57:06","false","toml_utils: Adding support for decimal numbers in hex parser

Modified the strtoul function parameter to automatically recognize
the value format. This will avoid the situation when a decimal value
is parsed as hexadecimal.

Signed-off-by: Adrian Warecki <adrian.warecki@intel.com>",58,57,1
"thesofproject/sof","75e8f4b63c168fb7e7ee11b9db60812a57c9f915","ranj063","2023-06-05 18:37:27","false","topology2: cavs-nocodec: Introduce macros for PCM IDs

And fix the erroneous PCM ID for SSP0 capture.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",45,60,1
"thesofproject/sof","470557bda5a7be51135e2943d96d53181395b5f0","ranj063","2021-06-17 20:52:06","false","ipc: ip3: handler: check if enable core mask is valid

Check if the enable core mask is valid before trying
to enable the cores.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",71,37,0
"thesofproject/sof","f2bd51a1380b16d963703eabed662f07684f2681","ranj063","2021-05-05 18:56:32","false","Revert ""topology: Switch HDA topologies to use dynamic pipelines""

This reverts commit 2c69afc5fdebc87ea091b7c76c35860ea256f4da.
The dynamic pipeline feature is broken with PA enabled. Revert
this change until the issue is sorted.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",81,35,0
"thesofproject/sof","60288c4051a7ccca4376f7c8dabb774d473067e5","ranj063","2022-01-07 22:38:36","false","codec_adapter: rename codec_cfg_type to module_cfg_type

Rename enum codec_cfg_type to module_cfg_type. No functional change.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",116,43,1
"thesofproject/sof","9d1ebecb8f09cd8c6c611e6106f74caca22a9c21","abonislawski","2020-11-26 09:36:37","false","kpb: check pm_is_active and dont enable it at the end of draining

This patch will prevent from enabling pm_runtime dsp at the end of draining
to avoid enabling it when already received disable ipc during draining

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@linux.intel.com>",78,30,0
"thesofproject/sof","2583398d45c232a4f20c0ec414952fcad4b88227","ranj063","2022-06-16 19:09:24","false","audio_format: Add macro for converting bytes <-> samples

And macros for converting bytes to samples and samples to bytes and use
it in all components to avoid duplication.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",120,49,1
"thesofproject/sof","7b6d395aca6f7e3f5acbc609784003674e57b823","RanderWang","2022-06-13 06:48:31","false","topology2: add cavs src support

Cavs src is different with sof src. It has different uuid
and param which are composed of base module definition and
output rate.

Signed-off-by: Rander Wang <rander.wang@intel.com>",118,48,1
"thesofproject/sof","235255bc44dc80b9bcf5278527f527d5d5805606","RanderWang","2021-12-03 03:03:00","false","test: add format S24_3LE in volume test

The format is added to make volume test pass.
The implementation will be added later.

Signed-off-by: Rander Wang <rander.wang@intel.com>",128,42,1
"thesofproject/sof","e14ab7088bf4673f43396f02490f717f69de0de9","kv2019i","2019-04-15 07:49:28","false","tools: logger: fix parsing of -s argument

Fix logic for saving the snapshot file argument. getopt()
is called at least once after snapshot option is parsed and
getopt() will erase the optarg value when exiting the while
loop. Without this patch, argument is always NULL and snapshot
cannot be taken.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",49,10,0
"thesofproject/sof","10f4669cccb114ccd2a6ddb7f9ec0d1a6868ae3b","kv2019i","2022-02-02 13:16:39","false","Revert ""zephyr: implement arch_cpu_disable_core()""

This reverts commit 414089aa442dfdbdab6d37507adffddc09af179e.

Failures hit with 4core cAVS2.5 configuraions, so this has
to be reverted. We need an implementation that keeps both
Zephyr (and SOF runtime-DSP if still used) in the loop.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",104,44,1
"thesofproject/sof","934bf2bee2618fa4dc61f3e0bda169d2d6d4cacd","bkokoszx","2020-01-12 17:13:00","false","suecreek: align SRAM_VECBASE to page size

Rimage assumes that beginning of segment is aligned to
page size. Rimage in function man_module_validate() validates
segment borders. Module length (man_module->segment[j].flags.r.length)
is aligned up to the page size (in man_module_create()). If beginning
of segment is not aligned to the page size, mismatch may appear -
rimage wrongly returns overlap error.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",77,19,0
"thesofproject/sof","ae4c30207e73ce2b8675b1233235ec63802899bd","singalsu","2022-02-08 09:14:03","false","Tools: Tune: Fix typos tools/tune/*

This patch fixes the typos in the setup tools Matlab code.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",106,44,1
"thesofproject/sof","eab189fe69ca6954015892502ee21e66f828e667","singalsu","2020-04-17 09:18:58","false","ASRC: Fix memory allocation fail handling in prepare()

This patch fixes a minor issue when handling the fail to allocate a
samples buffer. The goto err_free_buf jumps to code ""rfree(cd->buf);""
that would attempt free null pointer that is confusing and just
overhead. Only the successive operations of comp_set_state() and
returning -ENOMEM are needed.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",82,22,0
"thesofproject/sof","f57e478f4c332a62c2a649ba684f22792ea2a10f","singalsu","2023-09-25 14:56:29","false","Zephyr: Fix path to google_hotword_detect.c

The file is found from subdirectory src/audio/google. Without
fix if CONFIG_COMP_GOOGLE_HOTWORD_DETECT is enabled build fails:

CMake Error at sof/zephyr/cmake/modules/extensions.cmake:424
(add_library):
Cannot find source file:
/src/audio/google_hotword_detect.c

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",20,64,1
"thesofproject/sof","613021b37f62ea5d059745ece2167bddd37c6dcb","singalsu","2023-10-02 08:51:31","false","Tools: Topology2: Add widget class TDFB

This patch adds the class for the Time domain fixed beamformer
(TDFB) and example blobs for line arrays.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",16,64,1
"thesofproject/sof","707ffa7f07a2b58f8f7f11592ac89bd034a8e46d","singalsu","2020-01-03 16:37:57","false","Topology: FIR: Increase maximum size of configuration data blob

This patch increases the max. size to 4 kB. Such size allows
setting up e.g. 8ch 192 tap FIR. The multiple part configuration
IPC support has existed in the EQ component for a while and this
limit in topology has remained not updated.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",71,19,0
"thesofproject/sof","6f99d71d58026b74474875524650df9ec4c2da8f","singalsu","2020-01-28 11:27:51","false","Tune: SRC: Fix rate exclusion in generator script

This patch fixes a mistake that forces generation of rate into
fs_inout matrix diagonal. The purpose of this test is to enable
SRC to pass equal input and output rate, so in case not equal
input and output rates the generator would not disable such
conversion if requested.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",76,20,0
"thesofproject/sof","f06da576cfa3feda5d4a004b21c5eaa6da10686a","bkokoszx","2019-08-12 10:28:15","false","smart_amp: add smart amplifier test component

Smart amplifier should be used in following topology:

                 +------------------------------------------+
     +------+    | +---+  +-------------+  +---+  +-------+ |
     | Host |----->|Buf|->|  Smart Amp  |->|Buf|->|SSP Dai|-----------+
     +------+    | +---+  +-------------+  +---+  +-------+ |         |
                 +-----------------^------------------------+         |
                                   |                                  |
                                 +---+                                |
				 |Buf|                                |
                                 +---+                                |
                                   ^                                  |
                 +-----------------|--------------------------+       |
     +------+    | +---+  +--------|------+  +---+  +-------+ |       |
     | Host |<-----|Buf|<-|     Demux     |<-|Buf|<-|SSP Dai|<--------+
     +------+    | +---+  +---------------+  +---+  +-------+ |
                 +--------------------------------------------+

Smart amplifier test component does not implement any specific processing
algorithm at the moment. I can pass chosen channels from source (buffer
between Host and Smart amplifier) or feedback (buffer between Smart
amplifier and Demux component) buffers. Those channels are selected by
sending proper config to this component. Smart amplifier can be
configured via SOF_SMART_AMP_CONFIG or SOF_SMART_AMP_MODEL data
(similarly as it happens in detector case).

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",54,14,0
"thesofproject/sof","9b5ba319387aaaf8cd606dd6054464c015b7ce2c","cujomalainey","2020-10-28 02:49:47","false","dma-trace: free buffer on error

We are leaking memory if the host sends bad messages to the firmware
since we are not freeing the buffer.

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",75,29,0
"thesofproject/sof","2831afe345af70cb48ca32b0652e560eff8cfdfd","singalsu","2023-10-16 12:05:22","false","Tools: Topology2: Easier controls create with bench_comp_generate.sh

This patch adds to benchmark topologies template .conf files
generator commented out control examples types for easier
ALSA controls create.

The controls include files are renamed since they may
contain all controls types and not just bytes.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",9,64,1
"thesofproject/sof","8f5ee926e20c88e1672c7cf6b2d6de7584fee146","singalsu","2023-03-22 12:39:49","false","Audio: TDFB: Fix a mistake in sound direction updates filtering

Check for four least significant bits set means that four
previous processes periods need to be high enough signal
level over ambient. The value 0x15 is an obvious mistake and
does not filter properly control events. The purpose of the filter
is to prevent too frequent or unreliable control updates.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",55,58,1
"thesofproject/sof","bec163c1cce985c81f0137b17318576ff409a8e6","keyonjie","2021-10-18 08:31:48","false","ll_schedule: keep the task in the list for finished task

Keep the task in the list and the subsequent call to
schedule_ll_task_cancel() will clean it up.

Remove the operation in schedule_ll_task_done() to avoid double
cleaning, and unregistering from the interrupt handler itself won't
happen anymore.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",122,41,1
"thesofproject/sof","229da95e0d5a9d8abce89a5bb3804926b74d1ba0","keyonjie","2018-06-25 08:52:22","false","topology: dai: correct default_hw_conf_id

default_hw_conf_id was used by mistake, we should use index 0 of the hw
config array.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",4,1,0
"thesofproject/sof","3b34b60e81d3e5e272b71086ececc1b61d5ccfe9","lgirdwood","2018-09-25 14:17:29","true","Merge pull request #405 from tlauda/topic/timer_irq_changes

timer: different handling of TIMER3 for cAVS",37,4,0
"thesofproject/sof","11716bb415f8d6d5d1d728224b437251f56cbd74","lgirdwood","2018-06-25 13:56:39","true","Merge pull request #16 from tlauda/issue-9

core: fix wrong inclusion of core-isa.h",4,1,0
"thesofproject/sof","83ed9f8139869440247afcf9690b67d1d769030b","lgirdwood","2018-08-21 15:45:50","true","Merge pull request #243 from bkokoszx/master

drivers: apl-ssp: refinement in DSP_A and I2S mode.",19,3,0
"thesofproject/sof","3ba908546c7559379ac8414409d6b24ec5c9fea3","mrajwa","2019-04-20 16:16:42","false","edf_scheduler: unify scheduling function for normal and idle tasks

Idle tasks are scheduled using the same interface
as normal tasks. However they will be putted
on sperate tasks list and run while system is
idle.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",47,11,0
"thesofproject/sof","431711c8cb3e44dd18bd05524dc17e859055dfc4","lgirdwood","2018-11-08 11:36:26","true","Merge pull request #543 from mwierzbix/debugability-macro-metaprog-bugfix-varargcount_0_for_parenthesis

preproc: varargscount: bugfix for tokens starting with '(' not being counted",42,5,0
"thesofproject/sof","975ea52ae1f289b90d95ff8951ad602f32402f9d","lgirdwood","2022-01-21 12:01:42","false","Revert ""codec_adapter: Remove redundant setting of avail to true""

This reverts commit 8198c33b95f60498ff4013096b1e569e3b679195.",114,44,1
"thesofproject/sof","ad3ae32850b337be9583b670c3293f8cb4baa339","cujomalainey","2023-02-14 22:00:38","false","lib: fix compiler macro for vec_mem*

using incorrect names for compiler, missing ISA header for HiFi check,
also should add inlines if we don't have the HiFi implementations

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",56,56,1
"thesofproject/sof","287ba112e32e5e727f54a0c5a760bd34c13b2a9e","cujomalainey","2019-03-21 23:14:02","false","selector: make init function static

Fixes checkpatch error that slipped in

Signed-off-by: Curtis Malainey <cujomalainey@google.com>",66,10,0
"thesofproject/sof","583329173effaf49cae478cec2fb10dc64a2c54e","serhiy-katsyuba-intel","2023-07-28 12:24:09","false","probe: Fix injection probe creation

Both extraction and injection probes require to subscribe to buffer
produce notification. Hence notification subscription logic should be
enabled for both types of probes.

Signed-off-by: Serhiy Katsyuba <serhiy.katsyuba@intel.com>",31,62,1
"thesofproject/sof","e9f1531b50d6674a8effda9d4118cfd5ff85264c","marc-hb","2023-06-08 19:20:51","false","west.yml: add hal_nxp

This is small and required to automated the very first LP64 compilation.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",46,60,1
"thesofproject/sof","85aa873198e128e5df09a8f14e1a9f5b221c3d4f","marc-hb","2021-10-19 17:42:12","false","sof_ri_info: minor reader.info() additions and tweaks

These changes are visible only in -v mode.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",123,41,1
"thesofproject/sof","6541a86101e40768c32309d8b045a30a43578507","marc-hb","2021-03-11 06:12:26","false","check patch: ignore UNKNOWN_COMMIT_ID in shallow clone

Cause it's obviously missing from a shallow clone most of the time.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",74,33,0
"thesofproject/sof","0ee59c317e9c9d7f3332055590a952101be38254","marc-hb","2022-03-10 23:00:04","false","xtensa-build-zephyr.py: do not update SOF submodules after west init

This script is run from an existing SOF repo that is assumed to be fully
initialized. Updating existing submodules is a potentially destructive
operation.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",112,45,1
"thesofproject/sof","2c208b52fbbcefdf4e3ac62540b5941523037741","marc-hb","2021-11-19 21:09:20","false","sof_ri_info: add JSL Intel prod key to list of known keys

Extracted from
https://github.com/thesofproject/sof-bin/blob/main/v1.9.x/sof-v1.9.2/intel-signed/sof-jsl.ri

Note previous sof-jsl.ri releases were signed with the ICL key:
https://github.com/thesofproject/sof/issues/4916

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",129,42,1
"thesofproject/sof","ec649f37d661cb2853cf9e1338cc7f853b91e36d","lyakh","2023-01-27 11:59:42","false","Convert all ELF addresses to cached for calculations

Rimage calculates sizes of ELF sections, for which it has to use
addresses from the same address space: either all cached or all
uncached. The ELF image itself can contain mixed addresses. Convert
all to cached for internal calculations.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",52,56,1
"thesofproject/sof","7184a4a5fff7f97630039fd7d0887893b9b5a4bf","lyakh","2021-08-04 08:53:43","false","ssp: split the trigger handler into early and late parts

The SSP trigger handler has a potentially long delay when processing
START and RELEASE triggers. Split off an early start trigger to
extract that delay out of the SSP driver into the trigger state
machine.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",113,38,0
"thesofproject/sof","f8448fec118196b746de54efaa9f47bc02d307f2","lyakh","2021-05-06 11:56:38","false","timer_domain: fix wrong addressing

In timer_domain_set() timer_domain is a pointer to a single struct
timer_domain object, not an array. Fix potential access beyond the
object memory.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",81,35,0
"thesofproject/sof","f4b6a54a77dd8e3e4e476bbdb6dcf79821def220","lyakh","2020-11-19 11:41:27","false","init: make secondary_core_init() available to all single-core configurations

If MULTICORE is disabled secondary_core_init() should be a dummy on
all architectures, not only on Xtensa. This change also makes
arch/init.h redundant, remove it.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",74,30,0
"thesofproject/sof","17d0e2d5ab71a7b198d007399c35d7aa4af5d69f","Johnnynator","2021-11-01 22:00:51","false","logger: use more specific format specifiers

Signed-off-by: John Zimmermann <me@johnnynator.dev>",125,41,1
"thesofproject/sof","3b0c91e222e250c5eed20a2eed9226642c56a73a","lyakh","2021-09-24 12:28:08","false","ll_schedule: (cosmetic) remove a redundant type-cast

atomic_read() returns values of type uint32_t, no need to cast to it
again.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",118,40,0
"thesofproject/sof","a9f313955eb9279c95eadb39c6afd75b71bfaf0b","lyakh","2019-02-21 17:05:37","false","interrupt: add controller mask and unmask operations

Add interrupt controller .mask() and .unmask() operations. Use them
instead of platform_interrupt_mask() and platform_interrupt_unmask().

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",62,9,0
"thesofproject/sof","e9d078b69fdff2450bb6822eba01af37adc1746c","lyakh","2023-01-25 12:04:56","false","passthrough: convert to Zephyr native initialisation

Use SOF_MODULE_INIT() to register passthrough with the Zephyr
initialisation framework.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",53,56,1
"thesofproject/sof","252d7fec4c027865ed22f06782d9a0c4a9ee3e6e","jajanusz","2018-08-31 17:26:36","false","scripts: add icl to xtensa-build-all.sh

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",27,3,0
"thesofproject/sof","5dd9aaccb4774cafa15fa36ed6ac8451dab6913e","jajanusz","2019-06-05 08:27:14","false","cmake: xtensa: use absolute paths for tools

CMake has convention of changing relative paths to absolute
for CMAKE_* variables. It does it automatically f.e. CMAKE_C_COMPILER.
However for our tools like objcopy we have to do it manually.
It also helps with integration of CMake in some IDEs.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",63,12,0
"thesofproject/sof","62b59ce76244b6d8c7745dfc1ee889b4669c6ceb","jajanusz","2019-08-08 08:44:40","false","cmake: link sof libraries as private

In function target_link_libraries visibility modifiers have to be
consistent, otherwise we will get error while trying to use modifier,
if it wasn't used in root CMakeLists.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",52,14,0
"thesofproject/sof","4fc3af5e04bf1c394a09e1f2734ca9873756b7c3","jajanusz","2019-01-27 19:57:31","false","cmake: prevent in-source build

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",58,8,0
"thesofproject/sof","ce676ddefcdca35e216973bc11e64f5881f74f38","plbossart","2019-01-16 05:08:03","false","src/drivers/intel/cavs/hda-dma.c: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","cfb3ac5b00975e6692da00a17a9a13820a515d1d","plbossart","2021-09-10 23:47:57","false","topology1: add pipe-mixer-eq-iir-eq-fir-volume-dai-playback.m4

mix/merge of parts coming from pipe-mixer-volume-dai-playback.m4 and
pipe-eq-iir-eq-fir-volume-playback.m4

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",117,39,0
"thesofproject/sof","9091635f10557a250221a6fe339153b548238d26","jxstelter","2022-12-05 16:46:06","false","iadk modules: Add variable initialization

This patch adds initialization of module_size_ variable
in SystemAgent() creator.

Signed-off-by: Jaroslaw Stelter <Jaroslaw.Stelter@intel.com>",102,54,1
"thesofproject/sof","6baff99f885bbbc434d0d711d538e6d829d2e0a0","lgirdwood","2018-10-19 20:16:29","true","Merge pull request #488 from mmaka1/ssp-init

dai: ssp: dynamic device descriptor initialization",31,5,0
"thesofproject/sof","8ab4c61faa45abc6afe3dd7395d1116400b5e934","lgirdwood","2018-08-07 16:40:14","true","Merge pull request #205 from xiulipan/dockerupdate

scripts: docker: update gcc cross compiler to 8.1",18,2,0
"thesofproject/sof","d48ad6b67baf23fbbb65fa95493cac486071d8a2","aiChaoSONG","2023-02-14 07:17:44","false","adsp_config: add dump for init_config

This patch adds dump for init_config for debug.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",57,56,1
"thesofproject/sof","c183ce2739435a6a49bd3f64869ffd3ef78d7005","kfrydryx","2023-02-24 15:50:34","false","mtl: add measured cps and cpc values

Add CPS and CPC consumptions for given modules

Signed-off-by: Krzysztof Frydryk <krzysztofx.frydryk@intel.com>",57,57,1
"thesofproject/sof","45eeb1c492f69b35c94832d0ed6b66a3bae22ad1","ktrzcinx","2020-01-23 06:42:24","false","pcm_converter: Use copy method from audio_stream

In HiFi implementation should be used copy methods with prefix
from audio_stream_* instead buffer_* because of removing this
functionality to audio_stream module.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",79,20,0
"thesofproject/sof","8baa71d39f399c03bafacf7a0120076d02abaf9f","ktrzcinx","2019-12-09 11:07:46","false","sof: Send sof_ipc_cc_version after platform boot

Fill struct with c compiler information and send it through
mailbox to host.
Separate definition of cc_version struct to separate file and
cmake target, to pass them extra definitions from build system.
Moreover add macros to copy CC_NAME and CC_OPTIM in compilation time,
with guarantee of null termination.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",73,18,0
"thesofproject/sof","be8c48bbebee8f3a826d97ec58c276391de22e0c","ktrzcinx","2020-01-16 12:31:13","false","fir: Mark source buffer as const in processing functions

Const keyword is added to explicitly indicate that nothing in given
source buffer can be changed in processing functions - read pointers also.
Moreover same thing needs to be done in *setup_circular functions
to achieve successful compilation.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",78,19,0
"thesofproject/sof","e3cf1f2fed756cb8c1c154593ed354e34e2fc5e8","bkokoszx","2019-01-31 10:11:57","false","logger: use fopen binary mode

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",59,8,0
"thesofproject/sof","fe28746bba863b9b59abc5b78152f75740f8382e","keyonjie","2019-06-27 09:46:53","false","sof-ctl: add '-r' to support raw data mode

Using '-r' with '-s' means no abi header for the input file, and asks
for not dumping abi header when using '-r' without '-s'.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",46,13,0
"thesofproject/sof","057ccaff6a531f0296ebada19469db6a8ed3db32","keyonjie","2019-04-10 10:37:03","false","pipeline: stop periodic scheduling at xrun

At xrun, we will try internal recovery(if we have), if recovering
fails(or no internal recovery existed), we need to stop the periodic
scheduling.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",49,10,0
"thesofproject/sof","524cf111f68e00c64f9e7ce57d7af21b65f0a755","akloniex","2020-09-29 22:24:16","false","trace: Disable adaptive filtering, when user modifies filters settings

When user manually overrides trace filtering settings, adaptive trace
rate-limiting is disabled. This assures, that when user deliberately
changes filters, all trace messages are being delivered.

Signed-off-by: Artur Kloniecki <arturx.kloniecki@linux.intel.com>",67,28,0
"thesofproject/sof","b0150764dc086c085b4afe9fa8954444a2484972","akloniex","2018-10-15 11:09:09","false","debugability: Restore error traces always using mbox.

Signed-off-by: ArturX Kloniecki <arturx.kloniecki@linux.intel.com>",34,4,0
"thesofproject/sof","25ed49f4612a833e6a114b55b9cd2fb9d5c828f5","cristinailie","2021-03-08 16:36:25","false","kwd sample: Add IMX platform as a dependency for SAMPLE_KEYPHRASE

This allows i.MX based platforms to use the
samples for the keyphrase detector

Signed-off-by: Cristina Feies (ilie) <cristina.ilie@nxp.com>",73,33,0
"thesofproject/sof","3aa972fe676006b363565fbca9ccca8cd826193f","dnikodem","2023-02-03 17:04:08","false","pipeline: add attributes field in pipeline structure

Added attributes field to store attribute values from IPC
extension message. The attribute field will be used to store
information about ULP and AUTONOMOUS_RESET support by pipeline.

Signed-off-by: Damian Nikodem <damian.nikodem@intel.com>",54,56,1
"thesofproject/sof","031491f691215832e2ae7e3500775270d65df590","dnikodem","2023-06-15 07:28:53","false","src: copier_generic: update apply_attenuation function

The function applying the attenuation should be based
on write pointer and the current number of copied data in
the current systick.

Signed-off-by: Damian Nikodem <damian.nikodem@intel.com>",44,60,1
"thesofproject/sof","7475929bc778dd57f8f28a314b859fe16b09eb51","ranj063","2022-01-14 21:30:51","false","codec_adapter: dts: remove included header

dts.h has been deleted.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",117,43,1
"thesofproject/sof","607f0866387be2e8a8c054c823f349582a45faaa","andrula-song","2023-06-05 07:01:37","false","Audio: Volume: Split the hifi files into hifi3 and hifi4 version

Split the hifi version code into hifi3 and hifi4 version files.

Signed-off-by: Andrula Song <andrula.song@intel.com>",45,60,1
"thesofproject/sof","004241927f3a52d67e1e0d75b2db04438d43ea90","bardliao","2023-05-16 03:36:48","false","topology2: sdw-amp-generic: use fixed format on amp feedback io

Use fixed 32 bit format on io-gateway and let host-gateway do the
conversion.

Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>",51,59,1
"thesofproject/sof","8ab2e715702fe8f28bb0ac9df38f4f0824e76906","kv2019i","2022-08-11 14:37:45","false","probe: fix probe_task to handle non-aligned amount of data

Modify probe task to support cases where the amount of available data is
not multiple of the DMA copy size, or wraps around in the DMA
buffer.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",116,50,1
"thesofproject/sof","926fc9ad7d2062a2751bb890202a40d3cb427ee2","balakishorepati","2021-12-02 17:12:54","false","topology1: Add sof-rn-rt5682-max98360, sof-rn-rt5682-rt1019

Add topology support for max98360,rt1019 speaker amplifiers
for amd renoir platform.

Signed-off-by: balapati <balakishore.pati@amd.com>",127,42,1
"thesofproject/sof","4337831643609e6d4e81a4c1c7b3cc41a52aaf18","lyakh","2021-10-07 07:59:53","false","zephyr: further reduce the size of heap on APL with XCC

Building SOF with Zephyr for Apollolake with XCC fails because of
insufficient RAM. Reduce the heap size to fix the problem.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",121,40,1
"thesofproject/sof","b3e4a71ba5747d57c04880c19d15efe3d6c1d801","keyonjie","2021-03-23 10:43:35","false","codec_adapter: accept 0 size library config

There could be some codecs which require 0 byte library configure, e.g.
the passthrough one, change to make this possible.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",74,34,0
"thesofproject/sof","fc2b8d14a6bf0dfddbf72b4d73ad4f70a08bd02b","keyonjie","2020-06-16 02:20:43","false","topology: sof-smart-amplifier: configure ssp quirk to 0 by default

We should make sure SMART_SSP_QUIRK is set, if it is not defined from
the upper layer, let's set it to explicit 0.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",74,25,0
"thesofproject/sof","f545e3e832ec32a00512b49f5d4ae6f3a6be4979","tlauda","2020-05-27 08:09:29","false","dmic: move dmic driver out of the cavs specific directory

Shares dmic driver implementation between all possible Intel
platforms and not only cAVS. Currently depends only on cAVS,
since all other supported platforms don't support it.
It's built based on CONFIG_INTEL_DMIC.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",96,24,0
"thesofproject/sof","e433e878656f9b549283283c03d5ae899ef77b87","ktrzcinx","2020-03-27 09:51:15","false","rimage: Remove unused 'image' argument in elf_find_section()

Unused arguments shouldn't be passed to function because it
makes code messy.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",67,22,0
"thesofproject/sof","d343039093d56ec64afa0848607cff86ed0a942c","tlauda","2019-11-19 12:37:26","false","shim: cleanup and extend GPDMA shim registers

Cleanups definitions of GPDMA shim registers for all cAVS platforms
and extends them by adding support for channel linear link position
control register.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",58,18,0
"thesofproject/sof","e9e19136c1bd143f60658a3cd96b5d819d448669","ktrzcinx","2019-11-04 13:49:50","false","meta: introduced UNUSED macro

UNUSED macro should prevent compiler from throwing warnings
about unused wariables during conditional builds.
Usable for example in trace logs.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",56,17,0
"thesofproject/sof","53529b103d071128f3e2620012eb00066c0fc5ee","tlauda","2019-08-26 07:29:50","false","byt: fix simultaneous playback and capture

Fixes simultaneous playback and capture on byt/cht platforms.
It's a temporary fix and will be replaced with the proper solution
soon.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",54,15,0
"thesofproject/sof","4549747e37e60db458ac75c93dfd5531afba37a4","tlauda","2019-06-13 12:38:32","false","dw-dma: do nothing on preload

DW-DMA should ignore copy call if flags include
DMA_COPY_PRELOAD.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",48,12,0
"thesofproject/sof","f359214717ee40bcc3f0bd32dd12cbe0fa9219df","keyonjie","2018-06-29 07:45:15","false","Revert ""topology: dai: correct default_hw_conf_id""

This reverts commit 229da95e0d5a9d8abce89a5bb3804926b74d1ba0 which call
regression:
https://github.com/thesofproject/soft/issues/15

Default_hw_conf_id is id, not index of array, revert to fix it.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",9,1,0
"thesofproject/sof","ed9989ebbe17346e66469387db18271380524347","jajanusz","2019-10-16 13:13:11","false","pipeline: check task init result

In case of unsuccessful scheduler task init, the pipeline
task init should also fail.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",65,16,0
"thesofproject/sof","a380d21d853ca40b769dc5df4565be5db525d9fc","singalsu","2023-03-31 11:17:56","false","Tools: Testbench: Fixes for xt-xcc build and cycles counting

This patch avoids the build errors. Most of the issues are
from different types for formatted printing in gcc vs. xt-xcc.

The ""__attribute__ ((fallthrough));"" is not supported in xt-xcc.

The xtensa C library does not have clock_gettime() so it is
only left out from build. The cycles count and MCPS is printed
instead.

The include of dlfcn.h is not needed since the testbench no
more has dynamic libraries.

Structs within structs need to be initialized to zero in xt-xcc
with multiple brackets.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",56,58,1
"thesofproject/sof","c38879d5cab8db7198afae84a4df8e54adde3f91","tlauda","2019-09-11 13:21:54","false","dma: add interrupt ops implementations

Adds interrupt operation implementations for all existing
DMA drivers.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",59,15,0
"thesofproject/sof","5a63a6baf565e071b25e095ca31f8d92a09fbae6","tlauda","2019-09-13 13:33:08","false","dma: add scheduling_source

Adds scheduling_source field and dma_is_scheduling_source
function. It allows for easy identification whether particular
DMA channel is the source of pipeline scheduling.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",60,15,0
"thesofproject/sof","1bb78a5caba70ab6d97f8ffd5d35cab0b1bc79f9","tlauda","2020-01-15 12:44:38","false","dma: use platform_shared_commit()

Uses new platform_shared_commit() function to commit
shared dma and dma channels data.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",76,19,0
"thesofproject/sof","49fe994e4b6b362d806cb8d9067f79d6e8b8eb23","tlauda","2020-01-14 11:10:54","false","timer: use platform_shared_commit()

Uses new platform_shared_commit() function to commit
shared timer data. Timers can be shared between cores,
so let's use new shared API in timer API.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",77,19,0
"thesofproject/sof","99fcd37f1303d6e648e691ef99f477ce314eb20b","tlauda","2019-09-16 14:33:31","false","schedule: use DMA multi channel scheduling domain

Registers low latency scheduler with DMA multi channel
domain as scheduling source. This way we can finally get rid
of scheduling code from DW-DMA driver and DAI component.
Functionally it works the same as the previous implementation,
but transfers scheduling layer to the right places.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",62,15,0
"thesofproject/sof","3c8ac2ac86d22726b3f26de9b3b32562be7b1a7b","tlauda","2018-12-06 15:40:45","false","init: compile out slave_core_init on UP arch

Compiles out slave_core_init on UP architecure.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",44,6,0
"thesofproject/sof","8ebc0547260a4ad49a2a5faf79cc1e6a1effa56b","tlauda","2019-06-04 09:59:24","false","idc: optimize interrupt handler

Optimizes IDC interrupt handler by:
- Omitting currently used core.
- Omitting check for DONE irq on slave cores.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",66,12,0
"thesofproject/sof","ac7b0c227ada2231ce811f7229d91b5c317b9f49","tlauda","2018-06-04 11:03:42","false","rimage: add support for automatic MEU signing

This patch allows rimage to sign FW binaries using MEU tool.
Paths to MEU and private key have to be provided during config step.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",1,0,0
"thesofproject/sof","91f36e1fb1ab1adfa0d73ec77891695f218abb47","tlauda","2020-01-15 15:47:32","false","interrupt: add cascade_root to sof context

Adds pointer to cascade_root structure to sof main context.
It allows to access cascade_root globally and also will
simplify making it shared across SMP code.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",75,19,0
"thesofproject/sof","230727c4c58c348581b510497d2e0b1a5d6cac1c","tlauda","2019-04-30 03:12:25","false","icelake: suecreek: prevent power gating on all cores

Prevents powering off any cores during waiti call
on icelake and suecreek platforms.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",47,11,0
"thesofproject/sof","f26a32dc90bdbc9d0e8c026867af2016c003d533","bzhg","2020-12-10 22:22:19","false","google_hotword_detect: Remove model CRC to avoid XRUN

The CRC calculation of the language model (~64kB) takes
a long time (~475k platform timer ticks). For comparison:
GoogleHotwordDspInit takes 1.2k ticks.
GoogleHotwordDspProcess takes ~11k ticks for 320 samples.

The CRC calculation is causing XRUN on other tasks so
it's not suitable in the copy callback. Remove the CRC
for now until there is support for running it in low
priority background task.

Signed-off-by: Ben Zhang <benzh@chromium.org>
Signed-off-by: Curtis Malainey <cujomalainey@google.com>",73,30,0
"thesofproject/sof","ab8849581c8751b79ea025280dd36e076e607567","jsarha","2022-09-29 16:30:02","false","tools/probe: Add routing FW logs to stdout and dma data from stdin

To get dma data from std in, just leav out the -p flag, and to get
logs from stdout, use -l flag.

Signed-off-by: Jyri Sarha <jyri.sarha@intel.com>",98,52,1
"thesofproject/sof","77ef08a95105fe90a89cbd581e8fe1dd0f2b3616","fredoh9","2021-05-11 17:55:44","false","docker-run.sh: set http/https proxy when docker run

Use http/https proxys setting from the host.

Signed-off-by: Fred Oh <fred.oh@linux.intel.com>",84,35,0
"thesofproject/sof","be2c2fc000a89a484ec16d7c7001ee239ff52d93","cujomalainey","2023-07-14 00:31:28","false","audio: rtnr: add headers for type dependencies

many of these headers don't include what they actually use, correct by
including

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",32,61,1
"thesofproject/sof","ed04c4f150de34311f76b72cc645129572f61c03","cujomalainey","2023-07-13 23:40:39","false","audio: igo: fix create arg attributes

Creation is done with constant args

Fixes: 10f6dd0d7b (""module-adapter: add a constant data pointer"")
Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",32,61,1
"thesofproject/sof","66c42af8b74356120459ec35013151efda29dd48","lyakh","2021-11-24 12:03:49","false","schedule: verify compulsory operations

schedule_task_cancel, schedule_task_free and schedule_task are
compulsory scheduler operations. Verify them once during scheduler
registration and don't check them afterwards when calling.

Signed-off-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>",129,42,1
"thesofproject/sof","43efd2da504a3c5ca8d3f66399188f7f46bfecef","jiande-my","2023-03-24 07:26:02","false","drivers: imx: fix checkpatch styling error

`drivers: imx: ipc`
Split long line into two short lines
at 135: FILE: src/drivers/imx/ipc.c:135:
""CHECK: line length of 103 exceeds 100 columns""

Modified to match the alignment of the open parenthesis
at 227: FILE: src/drivers/imx/ipc.c:227:
""CHECK: Alignment should match open parenthesis""

Split long line into two short lines
at 309: FILE: src/drivers/imx/ipc.c:309:
""CHECK: line length of 101 exceeds 100 columns""

`drivers: imx: sai`
Modified to match the alignment of the open parenthesis
at 353: FILE: src/drivers/imx/sai.c:353:
""CHECK: Alignment should match open parenthesis""

Signed-off-by: Jian De <jiande2020@gmail.com>",56,58,1
"thesofproject/sof","606e3bed34a655230bbaf3b109a50411c419668e","marc-hb","2022-11-29 23:29:53","false",".github/checkpatch: rename --strict to --subjective

--subjective is strictly (pun intended) equivalent to --strict but it
makes it more obvious that ""checkpatch is not always right"" (c)
https://www.kernel.org/doc/html/latest/dev-tools/checkpatch.html

This should save some time in situations where some warnings conflict
with each other like for instance
https://github.com/thesofproject/sof/pull/6655#discussion_r1031572596

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",102,54,1
"thesofproject/sof","e3e038d6d48eb7e2f4013ddc0201e087a1c00d4b","marc-hb","2022-02-24 00:09:24","false","Revert ""dma-trace: Preserve logs while dtrace is disabled""

This reverts commit 58ce6e68608fdbec49a9835dfb8b76e0fa848187.

This commit has caused the DMA trace to be frequently empty on a number
of ADL and TGL in daily runs for two days in a row (test runs 10429 and
10459).

The DMA trace could be completely empty in the past but that was on
different platforms and a very long time ago, this had been fixed in
bug #4333 and had not happened for many months.

The _only_ commit difference between the last successful test
run (10402) and the first failing one (10459) is this commit.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",107,45,1
"thesofproject/sof","158089ceb69d8c685992c52d54e07483cec32b05","marc-hb","2021-04-19 15:57:34","false","Add and fix many logger and dma-related comments. No code change.

Learned the hard way.  Will help refactoring or duplicated
""reverse-engineering"" effort.

Zero code change, pure comments: no functional change.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",88,34,0
"thesofproject/sof","60c39377008c726cf523fcdec72dcbc83861d503","lgirdwood","2018-09-26 10:58:48","true","Merge pull request #76 from keyonjie/master

topology: sof-glk-da7219: update to use s32le format for HDMI pipelines",37,4,0
"thesofproject/sof","ebf4f52652b4f4d00975eecf37d424c2107d2b85","cujomalainey","2018-11-25 07:27:37","false","Merge SOFT into SOF

Merge SOFT in to reduce bisecting issues and header confusion for tools",40,6,0
"thesofproject/sof","86e257731d85a67f5cc8650420e4eef1f33704e9","cujomalainey","2021-02-11 01:39:07","false","crossover: dont set values where it doesn't matter

if we aren't going to use the value, dont set it.
Cppcheck complaint

Signed-off-by: Curtis Malainey <cujomalainey@chromium.org>",72,32,0
"thesofproject/sof","15200e4091c1e1951e9b671dd407a14e82b0d935","plbossart","2022-04-04 22:47:46","false","topology1/kernel_dependent/v5.19: enable HDaudio codec deep-buffer topologies

This patch duplicates the configuration at the higher level and adds
the ""DEEP_BUFFER"" definition. The topologies are generated in the
kernel_dependent/v5.19 directory and shall only be used by
distro/users when their kernel is based on 5.19-rc1 or later. If these
topologies are used with an older kernel, the ASoC DPCM state machine
issues will result in broken audio. We have no ability to detect a
dependency on kernel to load a topology.

This is not very elegant and will require changes in two places, but I
don't see a better solution with M4.

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",110,46,1
"thesofproject/sof","3fe517f317b531d3105a3d6a91d4d86abfebbb6a","plbossart","2019-01-16 05:08:02","false","src/audio/pipeline.c: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","a766e471b0e26b5292b2d7a4118acf6d565f0e25","zhuyingjiang","2019-01-17 09:56:09","false","add nocodec topology for CNL

add nocodec topology for CNL, with three SSPs and one DMIC

Signed-off-by: Zhu Yingjiang <yingjiang.zhu@linux.intel.com>",55,7,0
"thesofproject/sof","f3be41dc40dcd2886fc6d13b2b284ca1cee26fea","xiulipan","2019-10-30 04:36:46","false","rimage: add support for jsl

JSL should have almost same config as ICL, but they should
have different fw name.

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>",64,17,0
"thesofproject/sof","d40ab8c853705bac15171a2166656a7e9b04b34d","gongjun-song","2021-09-24 02:59:02","false","topology1: Add sof-adl-rt1316-l2-mono-rt714-l3

Support SKU 0B13 product, the audio hardware configuration is rt1316
on link2 and rt714 on link3.

Signed-off-by: Gongjun Song <gongjun.song@intel.com>",118,40,0
"thesofproject/sof","d3f8bdc3044b98dbd9f0565758cbe07ab1a897ad","yongzhi1","2023-05-23 17:07:49","false","topology2: add sof-mtl-cs42l42-l0-max98363-l2-4ch support

cs42l42 headset codec on link0 & 2xmax98363 on link 2.

Co-developed-by: Uday M Bhat <uday.m.bhat@intel.com>
Co-developed-by: Jairaj Arava <jairaj.arava@intel.com>
Signed-off-by: Yong Zhi <yong.zhi@intel.com>",55,60,1
"thesofproject/sof","e73cdf68057a0d7a8f8618d2dba53dda28e54b9a","aiChaoSONG","2023-10-30 07:43:21","false","topology2: Add sof-mtl-rt722-l0 support

This patch adds sof-mtl-rt722-l0.tplg, which is used
to support MTL RVP + RT722 EVB combination.

Headphone, speaker and DMIC functions are verified
with this topology.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",6,65,1
"thesofproject/sof","8a1ba8e47afe00d03d6b04c872220069874632fe","makarukp","2023-04-17 10:00:04","false","cadence: register module logs in Zephyr

Use LOG_MODULE_REGISTER() to register cadence in the Zephyr logger
framework.

Signed-off-by: Piotr Makaruk <piotr.makaruk@intel.com>",50,58,1
"thesofproject/sof","dd58f5ba1defa77bde205905701617a9cdd53c52","ranj063","2022-11-03 00:30:38","false","topology2: cavs-passthrough-hdmi: Add support for chained DMA

Add support for chained DMA pipelines in the HDMI passthrough topology.
Since the HDA hardware does not support S24_LE, remove the format from
the PCM capabilities for all the HDMI PCM's as well.

This version should work even if the kernel does not support chained DMA
as yet.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",89,53,1
"thesofproject/sof","1ea364620f8ff9592b9101fa3055328631dbd756","ranj063","2022-10-19 22:17:35","false","topology2: gain: Fix curve_type

log and linear are not supported with IPC4. Use no_fade and fade
instead and set the default to fade.

This should fix the following error seen with volume prepare():
volume: comp:9 0x60003 volume_prepare(): invalid cd->ramp_func

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",96,53,1
"thesofproject/sof","fef58eea863c00bc7d607e0b29a233fdfdd574a2","abonislawski","2022-12-13 15:30:13","false","dai-zephyr: check max block count supported by DMA

Check max block count supported by DMA using new Zephyr API
This will allow to prepare a correct config regardless of
specific DMA capabilities

Signed-off-by: Adrian Bonislawski <adrian.bonislawski@intel.com>",99,54,1
"thesofproject/sof","9e131360fc389239db0617eb0bc61777b99c09aa","ktrzcinx","2020-10-20 08:09:01","false","logger: Check for unused arguments

There is no place for unused arguments, their are consequence of invalid
argument list as usual.
Such an situation is highly possible especially during defining trace
filters, eg `-Fv=mux 4.1` instead `-F""v=mux 4.1""` or `-Fv=mux4.1`.

Signed-off-by: Karol Trzcinski <karolx.trzcinski@linux.intel.com>",72,29,0
"thesofproject/sof","da74953805dad5e0f89d011717517e5f77b0d38a","singalsu","2022-11-11 11:25:52","false","Audio: SRC: Compact the generic C FIR core

This patch compacts the FIR code a bit per discussion in other SRC
refine patch review where the current pointer arithmetic and code
style was not liked. There is no measurable MCPS impact in the 2ch
and Nch versions of core. It's not slower than original, but possibly
one perf comp_copy trace unit faster (0.03%).

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",97,53,1
"thesofproject/sof","df460c8c6b1836f21358e5d59f113a6ad8ad2bdf","singalsu","2023-08-08 15:36:06","false","Audio: Crossover: Fix a mistake in s32 processing core

The filters state need to be retrieved for every channel as
it is done in other s16 and s24 processing cores. The mistake
caused very distorted sound with waveform discontinuity every
copy period, e.g. 1 ms.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",27,62,1
"thesofproject/sof","9c002f37e0f037f518703b5743bcf4c87346601c","singalsu","2022-01-05 15:16:53","false","Arch: Host: Enable default-no components for testbench build

Components those use library functions fail to run in testbench
if they are not enabled in library_defconfig. The testbench build
builds the component library but not the library dependencies. E.g.
DRC component run in testbench failed because of this. Crossover
worked because it does not currently use library functions. All such
components with functional source are enabled for completeness.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",116,43,1
"thesofproject/sof","8d9d3ce664450adb269ca5dd2868f54192507e9d","singalsu","2020-03-24 12:32:37","false","Math: Get max and min signed integer values for given word length

This patch adds to header file sof/math/numbers.h two macros
INT_MAX(N) and INT_MIN(N). E.g. for 16 bits the returned values
are 32767 and -32768. The macro works up to N = 64.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",64,22,0
"thesofproject/sof","843553646ab0f026d797c9b36a67f481994b9d13","singalsu","2019-01-03 17:13:56","false","Topology: Add volume control into SRC playback pipeline

This patch adds a volume component after SRC to be able to convert
the variable pipeline s16/s24/s32 PCM format into PCM format used
by DAI. The PCM capabilities are changed to allow all formats.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",50,7,0
"thesofproject/sof","aaebb2563b5afccf4d30b2dc6136db07cf003f4c","marcinszkudlinski","2023-09-04 08:35:49","false","sparse: add a debug core check for shared structures

to verify that shared structures are used in a proper way
a debug check is introduced

If compiled with COHERENT_CHECK_NONSHARED_CORES flag
each usage of shared structures will be verified
against proper memory alias usage

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",23,63,1
"thesofproject/sof","386abbe8bca3b51603ffda8852aff70eceff7ef4","jajanusz","2019-11-04 12:28:04","false","checkpatch: add SOF constant

Introduce constant that enables SOF-specific behaviour of checkpatch.
Changes made to original checkpatch should be easily visible
to make merging updates easier.

If code that is not applicable to SOF is just removed, then
while updating it's hard to distinguish if it is new feature
in checkpatch or was removed for SOF. It's better to just disable
parts of code that do not work for SOF.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",55,17,0
"thesofproject/sof","1795e4a3918fd704b579ad71f7d58c54bff231c8","jajanusz","2019-04-04 15:47:12","false","testbench: accumulate widgets while parsing

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",49,10,0
"thesofproject/sof","9327ca524ab4768c3e14d6832cd21180775b2f6d","jajanusz","2019-02-21 23:18:05","false","cmake: lds headers dependency

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",61,9,0
"thesofproject/sof","91998d7d01f9319397d8b2426f66cb0e90a501bf","johnylin76","2020-10-19 03:16:35","false","sof: drc: Use one_over_attack_frames in replace of attack_frames

Replaced the config coefficient ""attack_frames"" by ""one_over_attack_frames""
(=1/attack_frames). It is because only ""one_over_attack_frames"" is used by
firmware and it could save a division operand by the replacement.

Signed-off-by: Pin-chih Lin <johnylin@google.com>",73,29,0
"thesofproject/sof","b15e1b15f94f33bd920642ef0a195f5cd6c42523","plbossart","2019-01-16 05:08:06","false","src/include/sof/debug.h: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","315eb67b3091eacb282d695ff392c4f61c4a4931","plbossart","2019-01-16 05:08:01","false","src/audio/buffer.c: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","75fa04de091581eb182cf4e25f7251ef9e15ebf4","marc-hb","2023-01-06 01:22:00","false","scripts/sudo-cwd.sh: don't try to copy missing sudoers.d/ permissions

Copying a file that does not exist obviously fails.

This bug was found when trying to switch from the current ""Developer
Image"" to the smaller ""CI Image"":
https://github.com/zephyrproject-rtos/docker-image/pkgs/container/zephyr-build

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",57,55,1
"thesofproject/sof","3e442f5f311b0c18c998738e66f86076b4ffba35","marc-hb","2021-03-30 17:58:16","false",".gitmodules: use default branch

No need to hardcode to ""master"" or anything else, submodules
don't even use branches anyway

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",79,34,0
"thesofproject/sof","07c63c1f99ddc428df1873c3a06e5acc049a328b","marc-hb","2021-12-10 22:26:43","false","topology1: build the production topologies one level down

Move generated *.conf and *.tplg v1 files down from:

  build_tools/topology/topology1/*.{conf,tplg}

_to:

  build_tools/topology/topology1/production/*.{conf,tplg}

... then copy/""install"" the production/* subdirectory two levels up.

This fixes the race condition #5067 that also copied a random number of
development/ and dsp_enhancement/ topologies, sometimes even truncating
these.

In other words, this commit REMOVES the following two copies:

build_tools/topology/development/       # randomly corrupted copy, removed
build_tools/topology/dsp_enhancement/   # randomly corrupted copy, removed

build_tools/topology/topology1/development/    # real build dir, unchanged
build_tools/topology/topology1/dsp_enhancement # real build dir, unchanged

Production topologies are copied only to help with the v1->v2
transition. That duplication makes the build directory confusing enough,
no need to extend that copy to development topologies. A single instance
of development topologies in the build directory is enough.

This removal may break some CI script(s): this is perfect because such
CI script(s) were copying randomly corrupted data.

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",121,42,1
"thesofproject/sof","03c078935d0d510834834d0472905b897af414c2","marc-hb","2022-12-15 18:46:06","false",".github/zephyr: use a single job for both tgl and tgl-h

The list is getting too long and the ""checks"" box in the Github User
Interface is small.

Fixes commit 543acc124d4b ("".github/workflows: add tgl-h IPC4 build"")

Signed-off-by: Marc Herbert <marc.herbert@intel.com>",91,54,1
"thesofproject/sof","f5f097a715183bf7743f4e8aa42fc0b5e5760b7c","mrajwa","2020-10-07 17:30:26","false","codec_adapter: export cadence specific functions

This exports cadence interfaces for the middle layer.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",67,28,0
"thesofproject/sof","65fb817100978e608d58ce5d81b06e551c7382ae","plbossart","2019-02-06 16:08:08","false","topology: rename HDA topology to name used by kernel

s/sof-hda-intel-common/sof-hda-generic

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",54,8,0
"thesofproject/sof","55dc68385bc14067d48610aa44e9d17c0062b03a","plbossart","2019-01-16 05:08:03","false","src/drivers/intel/baytrail/ipc.c: fix style

Make checkpatch happy

Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>",55,7,0
"thesofproject/sof","eb7add5135fda83c779b936b76e57f54fd293a8d","lrgirdwo","2021-06-26 13:15:56","false","testbench: add a option for specifying the number of copy() iterations

All the user to specify the number of copies.

Signed-off-by: Liam Girdwood <liam.r.girdwood@linux.intel.com>",75,37,0
"thesofproject/sof","59c0e6b7ba8b186a3403dabbb65fa0e0c6e2003d","gongjun-song","2022-11-28 08:09:54","false","src: remove some unnecessary brackets

Remove some unnecessary brackets in src_verify_params function.

Signed-off-by: Gongjun Song <gongjun.song@intel.com>",99,54,1
"thesofproject/sof","5bc201039d91457ad9b9068ac228e57bc2713d3b","aiChaoSONG","2023-03-06 08:44:37","false","rimage: fix build error

Recent changes introduce build error, fix the build
error.

Signed-off-by: Chao Song <chao.song@linux.intel.com>",58,57,1
"thesofproject/sof","7fc1b7159bb36e7ad14b1c9f61de3858faa7004f","ranj063","2021-11-02 19:59:46","false","topology2: cavs: passthrough-capture: Add all includes

Include all dependencies to be able to build the conf file individually.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",125,41,1
"thesofproject/sof","eb157a5c2fecebf36f1109b133d22c130f9ebdab","ranj063","2023-05-16 20:51:47","false","topology2: mixout-gain-host-copier-capture: Use host-copier

Replace the generic copier with host-copier in the class definition.

Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>",52,59,1
"thesofproject/sof","41992a2bc5fa10840f8dec1892417575ab6ff3e2","tinghan-shen","2022-05-18 02:45:56","false",".github: Add a TODO for mt81xx gcc build to pull request tests

Add masked mt81xx gcc build to pull request tests.
Unmask mt81xx after docker image updated with mt81xx toolchain.

Signed-off-by: Tinghan Shen <tinghan.shen@mediatek.com>",114,47,1
"thesofproject/sof","db16f82c8c9e57a51d5a99e8f4c99a4e5b74d98f","dabekjakub","2019-05-14 11:38:47","false","checkpatch: added check for memcpy calls

Added check for memcpy calls and warning that they should be
memcpy_s calls if possible.

Signed-off-by: Jakub Dabek <jakub.dabek@intel.com>",65,11,0
"thesofproject/sof","72a51a462fb833a6fa1978d0aad047c71c37f58b","kv2019i","2021-05-20 08:17:11","false","cavs: memory: fix panic on tplg load for zephyr on cavs20/25

The Zephyr linker scripts for cavs20/25 do not map sections
on uncached RAM, so the memory accesses to uncached memory will
fail. This shows up as a DSP panic while loading initial topology.

Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>",85,35,0
"thesofproject/sof","221064d4637719a144356e195c7ba795c8613370","bkokoszx","2018-11-26 16:24:18","false","tools: logger: abi verification addition

I've added abi_version verification. Be default logger verify: abi
in *.ldc file with logger abi version. Additionally, logger can verify
abi in ""/sys/kernel/debug/sof/fw_version"" (with -e flag) or in
ver_file (with -v ver_file) with logger abi version.

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",41,6,0
"thesofproject/sof","acf2bd52d5d8e7994b0dd1177020488bd338920e","bkokoszx","2019-04-01 10:06:16","false","codeowners: updated tools/logger codeowners

Signed-off-by: Bartosz Kokoszko <bartoszx.kokoszko@linux.intel.com>",52,10,0
"thesofproject/sof","afd86e08081835b16c960713ae2f44ffd3654ecb","singalsu","2023-06-15 17:13:15","false","Audio: Mux: Fix mistake in frames count handling

The source frames count need to be checked from every
active input_buffers[n].size). Similarly in consuming the
source buffers it needs to be updated to every
mod->input_buffers[n].consumed.

Fixes: #7308
Fixes: c399624 (""Audio: Mux: Convert mux and demux to module adapter"")

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",44,60,1
"thesofproject/sof","573e0b17b355bbb79084643b5ee4d34e68edc8b8","singalsu","2019-05-17 15:13:39","false","Tools: Audio quality test for ssh accessible device

This patch adds a shell script sof_test_perf.sh that measures
gain, frequency response, and total harmonic distortion plus
noise for a remote device.

Matlab or Octave is needed. The shell script launches by default
Octave to process the signal generation and test results analysis
scripts.

The remote device must be set to be accessible by ssh without
passwords. An external high quality USB sound card is recommended
as analog interface to connect to test device's analog interface.

The configuration file sof_test_perf_config.m must be edited for
the remote device's user account, audio device, audio format, and
capture sound card audio device, and audio format.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",59,11,0
"thesofproject/sof","84809f9606e51f59805ffb4eb7c29b7dfca00a71","singalsu","2023-06-13 13:36:11","false","Tools: Topology2: Add Multiband-DRC

This patch adds the topology2 files for multiband-DRC. The EFX
processing chain is gain - IIR - FIR - DRC or Multiband-DRC. The
DRC selection is done with macro EFX_DRC_COMPONENT and values
""singleband"" and ""multiband"".

The multiband-drc has two ALSA controls, bytes and switch. The
switch control switches the processing on and off.

The generated topology files with multiband-drc are:

sof-hda-efx-mbdrc-generic.tplg
sof-hda-efx-mbdrc-generic-2ch.tplg
sof-hda-efx-mbdrc-generic-4cg.tplg

The topology files with DRC are as before:

sof-hda-efx-mbdrc-generic.tplg
sof-hda-efx-mbdrc-generic-2ch.tplg
sof-hda-efx-mbdrc-generic-4cg.tplg

The configuration blob default is updated to what is generated
by the current example_multiband_drc.m configuration script. The
pass-through blob is set as default for tplg2. The topology 1
blobs are updated similarly.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",44,60,1
"thesofproject/sof","94ebaa31669ee2fdd9a546c0c565dd25547dc92e","marcinszkudlinski","2023-09-07 08:00:14","false","sparse: remove notifier cache/uncache conversions

as buffer pointer now is not swapping between cached
and uncached aliases, there's no need to convert pointers
in notifier events

Signed-off-by: Marcin Szkudlinski <marcin.szkudlinski@intel.com>",21,63,1
"thesofproject/sof","ce1401f62a69d4de54ad49e72b96fbe182e45aef","singalsu","2020-03-16 17:27:14","false","Tools: Test: Cleanup component run scripts

The src_run.sh is converted into a generic component run script
that is called by new simple component specific scripts asrc_run.sh,
eqfir_run.sh, eqiir_run.sh, src_run.sh, and volume_run.sh.

Note: The testbench does not yet have fully working capture support
so the direction is not exposed yet.

Signed-off-by: Seppo Ingalsuo <seppo.ingalsuo@linux.intel.com>",79,21,0
"thesofproject/sof","b5070847bf3528a2fd7a000274119a1b0bfedd61","tlauda","2019-03-26 07:36:50","false","component: rename status

Renames status COMP_STATE_ALREADY_SET to
COMP_STATUS_STATE_ALREADY_SET.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",61,10,0
"thesofproject/sof","45cd013e6a2d7426438031c4184d59a918104429","jajanusz","2019-09-03 09:53:13","false","pm_runtime: ssp: check CPA

Writing to SPA before CPA is updated may result in undefined behaviour.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",59,15,0
"thesofproject/sof","b4cce00e465a3e403166bc439507b6a92e1a13a5","dbaluta","2020-04-07 18:07:09","false","drivers: imx: irqsteer: Add IRQ fixup for mask/unmask

IRQSTEER module on i.MX8MP accepts 160 interrupts in 5
groups of 32 interrupts and steers them to an output of 3 lines.
Each output line has 64 interrupts.

The interesting part here is how the interrupts are steered and
how the registers are mapped.

Each 32 IRQ input group has 1 register for mask/set/status. Lets name
REGn the base of such registers. Then, according to the documentation
we have:

REG0 -> IRQ in[159:128]  }
REG1 -> IRQ in[127:96]   } =>  IRQ out[2] [191:128] from in[159:96]
REG2 -> IRQ in[95:64]    ]
REG3 -> IRQ in[63:32]    ] =>  IRQ out[1] [127:64]  from in[95:32]
REG4 -> IRQ in[31:0]     | =>  IRQ out[0] [63:0]    from in[31:0]

Notice that the original IRQ input interrupts are shifted with 32. When
computing the corresponding registers for an output register we need
to subtract 32 to get the correct register. This is achieved using
a fixup function which only applies for i.MX8MP.

Another important observation is that the IRQ in[31:0] is the single
valid group on output line 0. Thus in our represanation leaving a gap
with first 32 interrupts unused.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",90,22,0
"thesofproject/sof","7fafadd73285e25f7e6a9ecac1552acea3e6153b","lgirdwood","2018-07-04 13:00:28","true","Merge pull request #43 from tlauda/topic/core_flow

init: init sequence supporting slave cores",9,1,0
"thesofproject/sof","e027b08d39502de1a361f9cdc600cb527701301f","mrajwa","2020-07-13 19:00:26","false","KPB: protect update of history buffer

This patch adds critical section during update
of real time stream in draining task. There is a small possibility
that history data may get corrupted when real time stream preempt
draining at wrong moment.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",78,25,0
"thesofproject/sof","282a318c2ecfa9cd8f11e930e9dc57903acae62b","lgirdwood","2018-10-15 11:37:55","true","Merge pull request #80 from xiulipan/pr/up2hdmi

topology: enable hdmi support on UP2 board",34,4,0
"thesofproject/sof","b315f9bfd4ee0583bebe896e48e6452e1b5f468a","lgirdwood","2018-10-24 10:51:47","true","Merge pull request #113 from singalsu/fix_src_host_testbench_paths

Test: Audio: Fix paths in SRC host version testbench",27,5,0
"thesofproject/sof","d150379651188db815c2e3972bed269c59eb6fbf","mrajwa","2019-07-25 21:17:37","false","kpb: rework main copy function

This patch reworks kpb_copy() adding
explicit state handling. Improves redability and
function performance. This way we don't need to
search for things that are not needed at the time.

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",49,14,0
"thesofproject/sof","b7bb5b8539372ae72f38e2bb9510dc4fd7093495","tlauda","2019-09-17 11:01:29","false","schedule: implement dma_single_chan_domain

Adds implementation of DMA single channel scheduling domain.
This domain allows to schedule all the tasks on all the cores
on single DMA channel interrupt. This way we have only one
interrupt source and we don't need to worry about handling
many interrupts. We always select the channel with the lowest
period. This domain cannot be used with the DMAs, which require
to manually reload the next data to be transferred e.g. DW-DMA
on BYT or HSW.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",61,16,0
"thesofproject/sof","465a69fbc99549cd12da466376148a46984fc164","tlauda","2020-05-27 06:43:20","false","ipc: prevent SSP dai config double execution

Prevents DAI config to be executed double for SSP.
Along with this change we need to share dai private data.
From now on master core will be always responsible for setting
dai config on dai and it may happen that private data is allocated
by slave core.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",95,24,0
"thesofproject/sof","45e3a93b578391be7210e835a0097e0643a7929d","tlauda","2020-01-09 08:46:16","false","clk: use clocks_get() instead of global pointer

Uses clock_get() as one point of access to clock info
instead of global pointer.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",74,19,0
"thesofproject/sof","cc7bff9e615aec62880db2c4966a5d0ffbfbfca8","tlauda","2019-06-12 10:31:39","false","component: remove checks for xruns

Removes checks for xruns in all components besides
dai. There is no need to check for underrun and
overrun in every component, because no free or avail
space in buffer doesn't mean that data is not continuous.
We can have processing modules inside the pipeline, which
work on different frame sizes than rest of the pipe. In
such cases we will detect false xrun. In the future we
can think about adding xruns checks to the components,
which will be connection points for multiple pipelines
e.g. separate pipe with the mixer in the beginning.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",49,12,0
"thesofproject/sof","8fe7b72682a9e639f98c0fabeb979093633bd3d5","tlauda","2019-11-29 13:30:40","false","edf_schedule: remove priority

Removes need to pass EDF task priority during initialization.
Also removes priority definitions, which were only used by
EDF scheduler. Priorities of EDF tasks are now deprecated.
We are scheduling based only on deadline.

Signed-off-by: Tomasz Lauda <tomasz.lauda@linux.intel.com>",67,18,0
"thesofproject/sof","b59e53034bef27ddb25e018851914365ea23319f","dbaluta","2021-03-02 18:37:05","false","codec_adapter: Introduce codec_init_process api

This function should be called before processing. It searches
for a valid header, does header decoding to get the parameters
and initializes state and configuration structures.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",73,33,0
"thesofproject/sof","903a94e0974538be5750ced7bfd00069f24573aa","dbaluta","2021-12-07 16:08:25","false","audio: drc: Select DRC dependencies

DRC needs some math functions brought in by CONFIG_NUMBERS_NORM and
CONFIG_MATH_DECIBELS.

Signed-off-by: Daniel Baluta <daniel.baluta@nxp.com>",124,42,1
"thesofproject/sof","e97bda295fb08cb824e0e9867c85f216556c4a50","lgirdwood","2018-09-29 19:53:28","true","Merge pull request #74 from singalsu/add_eqctl_proposal

EQ: Add equalizer control tool eqctl",37,4,0
"thesofproject/sof","53346127d61a85593fc6e382d3d0ae012086b724","lgirdwood","2018-07-20 10:04:08","true","Merge pull request #131 from zhigang-wu/topic/state-machine-change1

component: draw the state machine flow chart",13,2,0
"thesofproject/sof","e610edca7cd35d91fac1a12200682be5a0e14796","lgirdwood","2018-11-26 14:54:48","true","Merge pull request #626 from ranj063/host-owner

github: add ranj063 as owner of src/host",41,6,0
"thesofproject/sof","597194f3dd8f7899384d0819548e05f75257ad15","lgirdwood","2018-08-09 10:56:17","true","Merge pull request #204 from RanderWang/dma_trace_apl

trace: refine dma trace algorithm for apl",19,2,0
"thesofproject/sof","9887d2dffbe75c0f164352db7b1060aabeccb482","keyonjie","2021-09-15 07:35:32","false","cmocka: alloc: remove the 200KB+ buffer zone case

We have limited buffer zone which can't afford as big as 200KB+
allocation request on platforms like APL, remove the case.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",117,39,0
"thesofproject/sof","2da0638db471bd9e92f2e82839fb7e0207247402","keyonjie","2020-05-28 08:37:20","false","topology: detect: add uuid token support

Add the uuid token to detect widget for the future use.

Signed-off-by: Keyon Jie <yang.jie@linux.intel.com>",96,24,0
"thesofproject/sof","23d4d12598f8253d3ff9ca158f7c3f9ddd4e3bf2","mrajwa","2019-04-09 11:16:02","false","KPB: reclaim history buffer memory

Signed-off-by: Marcin Rajwa <marcin.rajwa@linux.intel.com>",48,10,0
"thesofproject/sof","71fa73f120914ec82191e63651ea3719583ce27d","lgirdwood","2018-06-25 13:50:05","true","Merge pull request #13 from tlauda/topic/vol_ut

test: volume tests",4,1,0
"thesofproject/sof","bac917330ed4d2b228a8a53842252d4f9ec832af","jajanusz","2019-06-27 09:31:15","false","ssp: add M/N divider

M/N divider is needed for getting BCLK rates,
that are not dividers of MCLK.
In such a case, FW will try to find set of M, N and SCR values
needed to achieve target BCLK.

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",46,13,0
"thesofproject/sof","d33f8c99a1ce7242568a59d351c5827c40130535","jajanusz","2019-03-25 10:18:07","false","test: rename CHECK to UNIT_TEST

Signed-off-by: Janusz Jankowski <janusz.jankowski@linux.intel.com>",61,10,0
